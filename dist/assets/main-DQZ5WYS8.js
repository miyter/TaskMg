var FS=Object.defineProperty;var vw=t=>{throw TypeError(t)};var zS=(t,e,n)=>e in t?FS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rt=(t,e,n)=>zS(t,typeof e!="symbol"?e+"":e,n),lg=(t,e,n)=>e.has(t)||vw("Cannot "+n);var $=(t,e,n)=>(lg(t,e,"read from private field"),n?n.call(t):e.get(t)),Le=(t,e,n)=>e.has(t)?vw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),me=(t,e,n,r)=>(lg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Xe=(t,e,n)=>(lg(t,e,"access private method"),n);var qh=(t,e,n,r)=>({set _(s){me(t,e,s,n)},get _(){return $(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function dk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cg={exports:{}},pu={},ug={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _w;function US(){if(_w)return Qe;_w=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function x(W){return W===null||typeof W!="object"?null:(W=_&&W[_]||W["@@iterator"],typeof W=="function"?W:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,I={};function R(W,ee,ce){this.props=W,this.context=ee,this.refs=I,this.updater=ce||E}R.prototype.isReactComponent={},R.prototype.setState=function(W,ee){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ee,"setState")},R.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function U(){}U.prototype=R.prototype;function F(W,ee,ce){this.props=W,this.context=ee,this.refs=I,this.updater=ce||E}var M=F.prototype=new U;M.constructor=F,C(M,R.prototype),M.isPureReactComponent=!0;var q=Array.isArray,Z=Object.prototype.hasOwnProperty,G={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function k(W,ee,ce){var xe,Oe={},Pe=null,Se=null;if(ee!=null)for(xe in ee.ref!==void 0&&(Se=ee.ref),ee.key!==void 0&&(Pe=""+ee.key),ee)Z.call(ee,xe)&&!A.hasOwnProperty(xe)&&(Oe[xe]=ee[xe]);var $e=arguments.length-2;if($e===1)Oe.children=ce;else if(1<$e){for(var ne=Array($e),he=0;he<$e;he++)ne[he]=arguments[he+2];Oe.children=ne}if(W&&W.defaultProps)for(xe in $e=W.defaultProps,$e)Oe[xe]===void 0&&(Oe[xe]=$e[xe]);return{$$typeof:t,type:W,key:Pe,ref:Se,props:Oe,_owner:G.current}}function N(W,ee){return{$$typeof:t,type:W.type,key:ee,ref:W.ref,props:W.props,_owner:W._owner}}function P(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function D(W){var ee={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(ce){return ee[ce]})}var V=/\/+/g;function j(W,ee){return typeof W=="object"&&W!==null&&W.key!=null?D(""+W.key):ee.toString(36)}function Ae(W,ee,ce,xe,Oe){var Pe=typeof W;(Pe==="undefined"||Pe==="boolean")&&(W=null);var Se=!1;if(W===null)Se=!0;else switch(Pe){case"string":case"number":Se=!0;break;case"object":switch(W.$$typeof){case t:case e:Se=!0}}if(Se)return Se=W,Oe=Oe(Se),W=xe===""?"."+j(Se,0):xe,q(Oe)?(ce="",W!=null&&(ce=W.replace(V,"$&/")+"/"),Ae(Oe,ee,ce,"",function(he){return he})):Oe!=null&&(P(Oe)&&(Oe=N(Oe,ce+(!Oe.key||Se&&Se.key===Oe.key?"":(""+Oe.key).replace(V,"$&/")+"/")+W)),ee.push(Oe)),1;if(Se=0,xe=xe===""?".":xe+":",q(W))for(var $e=0;$e<W.length;$e++){Pe=W[$e];var ne=xe+j(Pe,$e);Se+=Ae(Pe,ee,ce,ne,Oe)}else if(ne=x(W),typeof ne=="function")for(W=ne.call(W),$e=0;!(Pe=W.next()).done;)Pe=Pe.value,ne=xe+j(Pe,$e++),Se+=Ae(Pe,ee,ce,ne,Oe);else if(Pe==="object")throw ee=String(W),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Se}function rt(W,ee,ce){if(W==null)return W;var xe=[],Oe=0;return Ae(W,xe,"","",function(Pe){return ee.call(ce,Pe,Oe++)}),xe}function Ze(W){if(W._status===-1){var ee=W._result;ee=ee(),ee.then(function(ce){(W._status===0||W._status===-1)&&(W._status=1,W._result=ce)},function(ce){(W._status===0||W._status===-1)&&(W._status=2,W._result=ce)}),W._status===-1&&(W._status=0,W._result=ee)}if(W._status===1)return W._result.default;throw W._result}var Re={current:null},X={transition:null},pe={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:X,ReactCurrentOwner:G};function de(){throw Error("act(...) is not supported in production builds of React.")}return Qe.Children={map:rt,forEach:function(W,ee,ce){rt(W,function(){ee.apply(this,arguments)},ce)},count:function(W){var ee=0;return rt(W,function(){ee++}),ee},toArray:function(W){return rt(W,function(ee){return ee})||[]},only:function(W){if(!P(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Qe.Component=R,Qe.Fragment=n,Qe.Profiler=s,Qe.PureComponent=F,Qe.StrictMode=r,Qe.Suspense=d,Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Qe.act=de,Qe.cloneElement=function(W,ee,ce){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var xe=C({},W.props),Oe=W.key,Pe=W.ref,Se=W._owner;if(ee!=null){if(ee.ref!==void 0&&(Pe=ee.ref,Se=G.current),ee.key!==void 0&&(Oe=""+ee.key),W.type&&W.type.defaultProps)var $e=W.type.defaultProps;for(ne in ee)Z.call(ee,ne)&&!A.hasOwnProperty(ne)&&(xe[ne]=ee[ne]===void 0&&$e!==void 0?$e[ne]:ee[ne])}var ne=arguments.length-2;if(ne===1)xe.children=ce;else if(1<ne){$e=Array(ne);for(var he=0;he<ne;he++)$e[he]=arguments[he+2];xe.children=$e}return{$$typeof:t,type:W.type,key:Oe,ref:Pe,props:xe,_owner:Se}},Qe.createContext=function(W){return W={$$typeof:l,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:o,_context:W},W.Consumer=W},Qe.createElement=k,Qe.createFactory=function(W){var ee=k.bind(null,W);return ee.type=W,ee},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(W){return{$$typeof:u,render:W}},Qe.isValidElement=P,Qe.lazy=function(W){return{$$typeof:y,_payload:{_status:-1,_result:W},_init:Ze}},Qe.memo=function(W,ee){return{$$typeof:m,type:W,compare:ee===void 0?null:ee}},Qe.startTransition=function(W){var ee=X.transition;X.transition={};try{W()}finally{X.transition=ee}},Qe.unstable_act=de,Qe.useCallback=function(W,ee){return Re.current.useCallback(W,ee)},Qe.useContext=function(W){return Re.current.useContext(W)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(W){return Re.current.useDeferredValue(W)},Qe.useEffect=function(W,ee){return Re.current.useEffect(W,ee)},Qe.useId=function(){return Re.current.useId()},Qe.useImperativeHandle=function(W,ee,ce){return Re.current.useImperativeHandle(W,ee,ce)},Qe.useInsertionEffect=function(W,ee){return Re.current.useInsertionEffect(W,ee)},Qe.useLayoutEffect=function(W,ee){return Re.current.useLayoutEffect(W,ee)},Qe.useMemo=function(W,ee){return Re.current.useMemo(W,ee)},Qe.useReducer=function(W,ee,ce){return Re.current.useReducer(W,ee,ce)},Qe.useRef=function(W){return Re.current.useRef(W)},Qe.useState=function(W){return Re.current.useState(W)},Qe.useSyncExternalStore=function(W,ee,ce){return Re.current.useSyncExternalStore(W,ee,ce)},Qe.useTransition=function(){return Re.current.useTransition()},Qe.version="18.3.1",Qe}var ww;function jy(){return ww||(ww=1,ug.exports=US()),ug.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bw;function $S(){if(bw)return pu;bw=1;var t=jy(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var y,_={},x=null,E=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(E=d.ref);for(y in d)r.call(d,y)&&!o.hasOwnProperty(y)&&(_[y]=d[y]);if(u&&u.defaultProps)for(y in d=u.defaultProps,d)_[y]===void 0&&(_[y]=d[y]);return{$$typeof:e,type:u,key:x,ref:E,props:_,_owner:s.current}}return pu.Fragment=n,pu.jsx=l,pu.jsxs=l,pu}var xw;function BS(){return xw||(xw=1,cg.exports=$S()),cg.exports}var p=BS(),od=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},WS={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ho,Py,tk,qS=(tk=class{constructor(){Le(this,ho,WS);Le(this,Py,!1)}setTimeoutProvider(t){me(this,ho,t)}setTimeout(t,e){return $(this,ho).setTimeout(t,e)}clearTimeout(t){$(this,ho).clearTimeout(t)}setInterval(t,e){return $(this,ho).setInterval(t,e)}clearInterval(t){$(this,ho).clearInterval(t)}},ho=new WeakMap,Py=new WeakMap,tk),ba=new qS;function HS(t){setTimeout(t,0)}var Da=typeof window>"u"||"Deno"in globalThis;function pr(){}function KS(t,e){return typeof t=="function"?t(e):t}function Dg(t){return typeof t=="number"&&t>=0&&t!==1/0}function hk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function xo(t,e){return typeof t=="function"?t(e):t}function Wr(t,e){return typeof t=="function"?t(e):t}function kw(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==Dy(l,e.options))return!1}else if(!Lu(e.queryKey,l))return!1}if(n!=="all"){const d=e.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||o&&!o(e))}function Ew(t,e){const{exact:n,status:r,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(Ou(e.options.mutationKey)!==Ou(o))return!1}else if(!Lu(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Dy(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ou)(t)}function Ou(t){return JSON.stringify(t,(e,n)=>Lg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Lu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Lu(t[n],e[n])):!1}var GS=Object.prototype.hasOwnProperty;function fk(t,e){if(t===e)return t;const n=Tw(t)&&Tw(e);if(!n&&!(Lg(t)&&Lg(e)))return e;const s=(n?t:Object.keys(t)).length,o=n?e:Object.keys(e),l=o.length,u=n?new Array(l):{};let d=0;for(let m=0;m<l;m++){const y=n?m:o[m],_=t[y],x=e[y];if(_===x){u[y]=_,(n?m<s:GS.call(t,y))&&d++;continue}if(_===null||x===null||typeof _!="object"||typeof x!="object"){u[y]=x;continue}const E=fk(_,x);u[y]=E,E===_&&d++}return s===l&&d===s?t:u}function Og(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Tw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Lg(t){if(!Iw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Iw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Iw(t){return Object.prototype.toString.call(t)==="[object Object]"}function QS(t){return new Promise(e=>{ba.setTimeout(e,t)})}function Mg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?fk(t,e):e}function ZS(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function YS(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Oy=Symbol();function pk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Oy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function JS(t,e){return typeof t=="function"?t(...e):!!t}function XS(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var ka,fo,ql,nk,eC=(nk=class extends od{constructor(){super();Le(this,ka);Le(this,fo);Le(this,ql);me(this,ql,e=>{if(!Da&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){$(this,fo)||this.setEventListener($(this,ql))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,fo))==null||e.call(this),me(this,fo,void 0))}setEventListener(e){var n;me(this,ql,e),(n=$(this,fo))==null||n.call(this),me(this,fo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){$(this,ka)!==e&&(me(this,ka,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof $(this,ka)=="boolean"?$(this,ka):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ka=new WeakMap,fo=new WeakMap,ql=new WeakMap,nk),Ly=new eC;function Vg(){let t,e;const n=new Promise((s,o)=>{t=s,e=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var tC=HS;function nC(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=tC;const o=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(d=>{n(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||l()}return d},batchCalls:u=>(...d)=>{o(()=>{u(...d)})},schedule:o,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Sn=nC(),Hl,po,Kl,rk,rC=(rk=class extends od{constructor(){super();Le(this,Hl,!0);Le(this,po);Le(this,Kl);me(this,Kl,e=>{if(!Da&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){$(this,po)||this.setEventListener($(this,Kl))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,po))==null||e.call(this),me(this,po,void 0))}setEventListener(e){var n;me(this,Kl,e),(n=$(this,po))==null||n.call(this),me(this,po,e(this.setOnline.bind(this)))}setOnline(e){$(this,Hl)!==e&&(me(this,Hl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return $(this,Hl)}},Hl=new WeakMap,po=new WeakMap,Kl=new WeakMap,rk),Sf=new rC;function sC(t){return Math.min(1e3*2**t,3e4)}function mk(t){return(t??"online")==="online"?Sf.isOnline():!0}var Fg=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function gk(t){let e=!1,n=0,r;const s=Vg(),o=()=>s.status!=="pending",l=I=>{var R;if(!o()){const U=new Fg(I);x(U),(R=t.onCancel)==null||R.call(t,U)}},u=()=>{e=!0},d=()=>{e=!1},m=()=>Ly.isFocused()&&(t.networkMode==="always"||Sf.isOnline())&&t.canRun(),y=()=>mk(t.networkMode)&&t.canRun(),_=I=>{o()||(r==null||r(),s.resolve(I))},x=I=>{o()||(r==null||r(),s.reject(I))},E=()=>new Promise(I=>{var R;r=U=>{(o()||m())&&I(U)},(R=t.onPause)==null||R.call(t)}).then(()=>{var I;r=void 0,o()||(I=t.onContinue)==null||I.call(t)}),C=()=>{if(o())return;let I;const R=n===0?t.initialPromise:void 0;try{I=R??t.fn()}catch(U){I=Promise.reject(U)}Promise.resolve(I).then(_).catch(U=>{var G;if(o())return;const F=t.retry??(Da?0:3),M=t.retryDelay??sC,q=typeof M=="function"?M(n,U):M,Z=F===!0||typeof F=="number"&&n<F||typeof F=="function"&&F(n,U);if(e||!Z){x(U);return}n++,(G=t.onFail)==null||G.call(t,n,U),QS(q).then(()=>m()?void 0:E()).then(()=>{e?x(U):C()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r==null||r(),s),cancelRetry:u,continueRetry:d,canStart:y,start:()=>(y()?C():E().then(C),s)}}var Ea,sk,yk=(sk=class{constructor(){Le(this,Ea)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Dg(this.gcTime)&&me(this,Ea,ba.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Da?1/0:300*1e3))}clearGcTimeout(){$(this,Ea)&&(ba.clearTimeout($(this,Ea)),me(this,Ea,void 0))}},Ea=new WeakMap,sk),Ta,Gl,Br,Ia,pn,td,Sa,fs,ci,ik,iC=(ik=class extends yk{constructor(n){super();Le(this,fs);Le(this,Ta);Le(this,Gl);Le(this,Br);Le(this,Ia);Le(this,pn);Le(this,td);Le(this,Sa);me(this,Sa,!1),me(this,td,n.defaultOptions),this.setOptions(n.options),this.observers=[],me(this,Ia,n.client),me(this,Br,$(this,Ia).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,me(this,Ta,Cw(this.options)),this.state=n.state??$(this,Ta),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=$(this,pn))==null?void 0:n.promise}setOptions(n){if(this.options={...$(this,td),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Cw(this.options);r.data!==void 0&&(this.setState(Sw(r.data,r.dataUpdatedAt)),me(this,Ta,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Br).remove(this)}setData(n,r){const s=Mg(this.state.data,n,this.options);return Xe(this,fs,ci).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Xe(this,fs,ci).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,o;const r=(s=$(this,pn))==null?void 0:s.promise;return(o=$(this,pn))==null||o.cancel(n),r?r.then(pr).catch(pr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Ta))}isActive(){return this.observers.some(n=>Wr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Oy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>xo(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!hk(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,pn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,pn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),$(this,Br).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||($(this,pn)&&($(this,Sa)?$(this,pn).cancel({revert:!0}):$(this,pn).cancelRetry()),this.scheduleGc()),$(this,Br).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Xe(this,fs,ci).call(this,{type:"invalidate"})}async fetch(n,r){var m,y,_,x,E,C,I,R,U,F,M,q;if(this.state.fetchStatus!=="idle"&&((m=$(this,pn))==null?void 0:m.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,pn))return $(this,pn).continueRetry(),$(this,pn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const Z=this.observers.find(G=>G.options.queryFn);Z&&this.setOptions(Z.options)}const s=new AbortController,o=Z=>{Object.defineProperty(Z,"signal",{enumerable:!0,get:()=>(me(this,Sa,!0),s.signal)})},l=()=>{const Z=pk(this.options,r),A=(()=>{const k={client:$(this,Ia),queryKey:this.queryKey,meta:this.meta};return o(k),k})();return me(this,Sa,!1),this.options.persister?this.options.persister(Z,A,this):Z(A)},d=(()=>{const Z={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,Ia),state:this.state,fetchFn:l};return o(Z),Z})();(y=this.options.behavior)==null||y.onFetch(d,this),me(this,Gl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((_=d.fetchOptions)==null?void 0:_.meta))&&Xe(this,fs,ci).call(this,{type:"fetch",meta:(x=d.fetchOptions)==null?void 0:x.meta}),me(this,pn,gk({initialPromise:r==null?void 0:r.initialPromise,fn:d.fetchFn,onCancel:Z=>{Z instanceof Fg&&Z.revert&&this.setState({...$(this,Gl),fetchStatus:"idle"}),s.abort()},onFail:(Z,G)=>{Xe(this,fs,ci).call(this,{type:"failed",failureCount:Z,error:G})},onPause:()=>{Xe(this,fs,ci).call(this,{type:"pause"})},onContinue:()=>{Xe(this,fs,ci).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const Z=await $(this,pn).start();if(Z===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(Z),(C=(E=$(this,Br).config).onSuccess)==null||C.call(E,Z,this),(R=(I=$(this,Br).config).onSettled)==null||R.call(I,Z,this.state.error,this),Z}catch(Z){if(Z instanceof Fg){if(Z.silent)return $(this,pn).promise;if(Z.revert){if(this.state.data===void 0)throw Z;return this.state.data}}throw Xe(this,fs,ci).call(this,{type:"error",error:Z}),(F=(U=$(this,Br).config).onError)==null||F.call(U,Z,this),(q=(M=$(this,Br).config).onSettled)==null||q.call(M,this.state.data,Z,this),Z}finally{this.scheduleGc()}}},Ta=new WeakMap,Gl=new WeakMap,Br=new WeakMap,Ia=new WeakMap,pn=new WeakMap,td=new WeakMap,Sa=new WeakMap,fs=new WeakSet,ci=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...vk(s.data,this.options),fetchMeta:n.meta??null};case"success":const o={...s,...Sw(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return me(this,Gl,n.manual?o:void 0),o;case"error":const l=n.error;return{...s,error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Sn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),$(this,Br).notify({query:this,type:"updated",action:n})})},ik);function vk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Sw(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Cw(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var fr,et,nd,Qn,Ca,Ql,ui,mo,rd,Zl,Yl,Aa,Na,go,Jl,dt,vu,zg,Ug,$g,Bg,Wg,qg,Hg,_k,ok,oC=(ok=class extends od{constructor(e,n){super();Le(this,dt);Le(this,fr);Le(this,et);Le(this,nd);Le(this,Qn);Le(this,Ca);Le(this,Ql);Le(this,ui);Le(this,mo);Le(this,rd);Le(this,Zl);Le(this,Yl);Le(this,Aa);Le(this,Na);Le(this,go);Le(this,Jl,new Set);this.options=n,me(this,fr,e),me(this,mo,null),me(this,ui,Vg()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&($(this,et).addObserver(this),Aw($(this,et),this.options)?Xe(this,dt,vu).call(this):this.updateResult(),Xe(this,dt,Bg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kg($(this,et),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kg($(this,et),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Xe(this,dt,Wg).call(this),Xe(this,dt,qg).call(this),$(this,et).removeObserver(this)}setOptions(e){const n=this.options,r=$(this,et);if(this.options=$(this,fr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wr(this.options.enabled,$(this,et))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Xe(this,dt,Hg).call(this),$(this,et).setOptions(this.options),n._defaulted&&!Og(this.options,n)&&$(this,fr).getQueryCache().notify({type:"observerOptionsUpdated",query:$(this,et),observer:this});const s=this.hasListeners();s&&Nw($(this,et),r,this.options,n)&&Xe(this,dt,vu).call(this),this.updateResult(),s&&($(this,et)!==r||Wr(this.options.enabled,$(this,et))!==Wr(n.enabled,$(this,et))||xo(this.options.staleTime,$(this,et))!==xo(n.staleTime,$(this,et)))&&Xe(this,dt,zg).call(this);const o=Xe(this,dt,Ug).call(this);s&&($(this,et)!==r||Wr(this.options.enabled,$(this,et))!==Wr(n.enabled,$(this,et))||o!==$(this,go))&&Xe(this,dt,$g).call(this,o)}getOptimisticResult(e){const n=$(this,fr).getQueryCache().build($(this,fr),e),r=this.createResult(n,e);return lC(this,r)&&(me(this,Qn,r),me(this,Ql,this.options),me(this,Ca,$(this,et).state)),r}getCurrentResult(){return $(this,Qn)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&$(this,ui).status==="pending"&&$(this,ui).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){$(this,Jl).add(e)}getCurrentQuery(){return $(this,et)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=$(this,fr).defaultQueryOptions(e),r=$(this,fr).getQueryCache().build($(this,fr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Xe(this,dt,vu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),$(this,Qn)))}createResult(e,n){var N;const r=$(this,et),s=this.options,o=$(this,Qn),l=$(this,Ca),u=$(this,Ql),m=e!==r?e.state:$(this,nd),{state:y}=e;let _={...y},x=!1,E;if(n._optimisticResults){const P=this.hasListeners(),D=!P&&Aw(e,n),V=P&&Nw(e,r,n,s);(D||V)&&(_={..._,...vk(y.data,e.options)}),n._optimisticResults==="isRestoring"&&(_.fetchStatus="idle")}let{error:C,errorUpdatedAt:I,status:R}=_;E=_.data;let U=!1;if(n.placeholderData!==void 0&&E===void 0&&R==="pending"){let P;o!=null&&o.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(P=o.data,U=!0):P=typeof n.placeholderData=="function"?n.placeholderData((N=$(this,Yl))==null?void 0:N.state.data,$(this,Yl)):n.placeholderData,P!==void 0&&(R="success",E=Mg(o==null?void 0:o.data,P,n),x=!0)}if(n.select&&E!==void 0&&!U)if(o&&E===(l==null?void 0:l.data)&&n.select===$(this,rd))E=$(this,Zl);else try{me(this,rd,n.select),E=n.select(E),E=Mg(o==null?void 0:o.data,E,n),me(this,Zl,E),me(this,mo,null)}catch(P){me(this,mo,P)}$(this,mo)&&(C=$(this,mo),E=$(this,Zl),I=Date.now(),R="error");const F=_.fetchStatus==="fetching",M=R==="pending",q=R==="error",Z=M&&F,G=E!==void 0,k={status:R,fetchStatus:_.fetchStatus,isPending:M,isSuccess:R==="success",isError:q,isInitialLoading:Z,isLoading:Z,data:E,dataUpdatedAt:_.dataUpdatedAt,error:C,errorUpdatedAt:I,failureCount:_.fetchFailureCount,failureReason:_.fetchFailureReason,errorUpdateCount:_.errorUpdateCount,isFetched:_.dataUpdateCount>0||_.errorUpdateCount>0,isFetchedAfterMount:_.dataUpdateCount>m.dataUpdateCount||_.errorUpdateCount>m.errorUpdateCount,isFetching:F,isRefetching:F&&!M,isLoadingError:q&&!G,isPaused:_.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:q&&G,isStale:My(e,n),refetch:this.refetch,promise:$(this,ui),isEnabled:Wr(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=j=>{k.status==="error"?j.reject(k.error):k.data!==void 0&&j.resolve(k.data)},D=()=>{const j=me(this,ui,k.promise=Vg());P(j)},V=$(this,ui);switch(V.status){case"pending":e.queryHash===r.queryHash&&P(V);break;case"fulfilled":(k.status==="error"||k.data!==V.value)&&D();break;case"rejected":(k.status!=="error"||k.error!==V.reason)&&D();break}}return k}updateResult(){const e=$(this,Qn),n=this.createResult($(this,et),this.options);if(me(this,Ca,$(this,et).state),me(this,Ql,this.options),$(this,Ca).data!==void 0&&me(this,Yl,$(this,et)),Og(n,e))return;me(this,Qn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!$(this,Jl).size)return!0;const l=new Set(o??$(this,Jl));return this.options.throwOnError&&l.add("error"),Object.keys($(this,Qn)).some(u=>{const d=u;return $(this,Qn)[d]!==e[d]&&l.has(d)})};Xe(this,dt,_k).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Xe(this,dt,Bg).call(this)}},fr=new WeakMap,et=new WeakMap,nd=new WeakMap,Qn=new WeakMap,Ca=new WeakMap,Ql=new WeakMap,ui=new WeakMap,mo=new WeakMap,rd=new WeakMap,Zl=new WeakMap,Yl=new WeakMap,Aa=new WeakMap,Na=new WeakMap,go=new WeakMap,Jl=new WeakMap,dt=new WeakSet,vu=function(e){Xe(this,dt,Hg).call(this);let n=$(this,et).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(pr)),n},zg=function(){Xe(this,dt,Wg).call(this);const e=xo(this.options.staleTime,$(this,et));if(Da||$(this,Qn).isStale||!Dg(e))return;const r=hk($(this,Qn).dataUpdatedAt,e)+1;me(this,Aa,ba.setTimeout(()=>{$(this,Qn).isStale||this.updateResult()},r))},Ug=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval($(this,et)):this.options.refetchInterval)??!1},$g=function(e){Xe(this,dt,qg).call(this),me(this,go,e),!(Da||Wr(this.options.enabled,$(this,et))===!1||!Dg($(this,go))||$(this,go)===0)&&me(this,Na,ba.setInterval(()=>{(this.options.refetchIntervalInBackground||Ly.isFocused())&&Xe(this,dt,vu).call(this)},$(this,go)))},Bg=function(){Xe(this,dt,zg).call(this),Xe(this,dt,$g).call(this,Xe(this,dt,Ug).call(this))},Wg=function(){$(this,Aa)&&(ba.clearTimeout($(this,Aa)),me(this,Aa,void 0))},qg=function(){$(this,Na)&&(ba.clearInterval($(this,Na)),me(this,Na,void 0))},Hg=function(){const e=$(this,fr).getQueryCache().build($(this,fr),this.options);if(e===$(this,et))return;const n=$(this,et);me(this,et,e),me(this,nd,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},_k=function(e){Sn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n($(this,Qn))}),$(this,fr).getQueryCache().notify({query:$(this,et),type:"observerResultsUpdated"})})},ok);function aC(t,e){return Wr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Aw(t,e){return aC(t,e)||t.state.data!==void 0&&Kg(t,e,e.refetchOnMount)}function Kg(t,e,n){if(Wr(e.enabled,t)!==!1&&xo(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&My(t,e)}return!1}function Nw(t,e,n,r){return(t!==e||Wr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&My(t,n)}function My(t,e){return Wr(e.enabled,t)!==!1&&t.isStaleByTime(xo(e.staleTime,t))}function lC(t,e){return!Og(t.getCurrentResult(),e)}function Rw(t){return{onFetch:(e,n)=>{var y,_,x,E,C;const r=e.options,s=(x=(_=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:_.fetchMore)==null?void 0:x.direction,o=((E=e.state.data)==null?void 0:E.pages)||[],l=((C=e.state.data)==null?void 0:C.pageParams)||[];let u={pages:[],pageParams:[]},d=0;const m=async()=>{let I=!1;const R=M=>{XS(M,()=>e.signal,()=>I=!0)},U=pk(e.options,e.fetchOptions),F=async(M,q,Z)=>{if(I)return Promise.reject();if(q==null&&M.pages.length)return Promise.resolve(M);const A=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:q,direction:Z?"backward":"forward",meta:e.options.meta};return R(D),D})(),k=await U(A),{maxPages:N}=e.options,P=Z?YS:ZS;return{pages:P(M.pages,k,N),pageParams:P(M.pageParams,q,N)}};if(s&&o.length){const M=s==="backward",q=M?cC:Pw,Z={pages:o,pageParams:l},G=q(r,Z);u=await F(Z,G,M)}else{const M=t??o.length;do{const q=d===0?l[0]??r.initialPageParam:Pw(r,u);if(d>0&&q==null)break;u=await F(u,q),d++}while(d<M)}return u};e.options.persister?e.fetchFn=()=>{var I,R;return(R=(I=e.options).persister)==null?void 0:R.call(I,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=m}}}function Pw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function cC(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var sd,Os,Zn,Ra,Ls,so,ak,uC=(ak=class extends yk{constructor(n){super();Le(this,Ls);Le(this,sd);Le(this,Os);Le(this,Zn);Le(this,Ra);me(this,sd,n.client),this.mutationId=n.mutationId,me(this,Zn,n.mutationCache),me(this,Os,[]),this.state=n.state||dC(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){$(this,Os).includes(n)||($(this,Os).push(n),this.clearGcTimeout(),$(this,Zn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){me(this,Os,$(this,Os).filter(r=>r!==n)),this.scheduleGc(),$(this,Zn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){$(this,Os).length||(this.state.status==="pending"?this.scheduleGc():$(this,Zn).remove(this))}continue(){var n;return((n=$(this,Ra))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var u,d,m,y,_,x,E,C,I,R,U,F,M,q,Z,G,A,k,N,P;const r=()=>{Xe(this,Ls,so).call(this,{type:"continue"})},s={client:$(this,sd),meta:this.options.meta,mutationKey:this.options.mutationKey};me(this,Ra,gk({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(D,V)=>{Xe(this,Ls,so).call(this,{type:"failed",failureCount:D,error:V})},onPause:()=>{Xe(this,Ls,so).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,Zn).canRun(this)}));const o=this.state.status==="pending",l=!$(this,Ra).canStart();try{if(o)r();else{Xe(this,Ls,so).call(this,{type:"pending",variables:n,isPaused:l}),await((d=(u=$(this,Zn).config).onMutate)==null?void 0:d.call(u,n,this,s));const V=await((y=(m=this.options).onMutate)==null?void 0:y.call(m,n,s));V!==this.state.context&&Xe(this,Ls,so).call(this,{type:"pending",context:V,variables:n,isPaused:l})}const D=await $(this,Ra).start();return await((x=(_=$(this,Zn).config).onSuccess)==null?void 0:x.call(_,D,n,this.state.context,this,s)),await((C=(E=this.options).onSuccess)==null?void 0:C.call(E,D,n,this.state.context,s)),await((R=(I=$(this,Zn).config).onSettled)==null?void 0:R.call(I,D,null,this.state.variables,this.state.context,this,s)),await((F=(U=this.options).onSettled)==null?void 0:F.call(U,D,null,n,this.state.context,s)),Xe(this,Ls,so).call(this,{type:"success",data:D}),D}catch(D){try{await((q=(M=$(this,Zn).config).onError)==null?void 0:q.call(M,D,n,this.state.context,this,s))}catch(V){Promise.reject(V)}try{await((G=(Z=this.options).onError)==null?void 0:G.call(Z,D,n,this.state.context,s))}catch(V){Promise.reject(V)}try{await((k=(A=$(this,Zn).config).onSettled)==null?void 0:k.call(A,void 0,D,this.state.variables,this.state.context,this,s))}catch(V){Promise.reject(V)}try{await((P=(N=this.options).onSettled)==null?void 0:P.call(N,void 0,D,n,this.state.context,s))}catch(V){Promise.reject(V)}throw Xe(this,Ls,so).call(this,{type:"error",error:D}),D}finally{$(this,Zn).runNext(this)}}},sd=new WeakMap,Os=new WeakMap,Zn=new WeakMap,Ra=new WeakMap,Ls=new WeakSet,so=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Sn.batch(()=>{$(this,Os).forEach(s=>{s.onMutationUpdate(n)}),$(this,Zn).notify({mutation:this,type:"updated",action:n})})},ak);function dC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var di,ps,id,lk,hC=(lk=class extends od{constructor(e={}){super();Le(this,di);Le(this,ps);Le(this,id);this.config=e,me(this,di,new Set),me(this,ps,new Map),me(this,id,0)}build(e,n,r){const s=new uC({client:e,mutationCache:this,mutationId:++qh(this,id)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){$(this,di).add(e);const n=Hh(e);if(typeof n=="string"){const r=$(this,ps).get(n);r?r.push(e):$(this,ps).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if($(this,di).delete(e)){const n=Hh(e);if(typeof n=="string"){const r=$(this,ps).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&$(this,ps).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Hh(e);if(typeof n=="string"){const r=$(this,ps).get(n),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Hh(e);if(typeof n=="string"){const s=(r=$(this,ps).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Sn.batch(()=>{$(this,di).forEach(e=>{this.notify({type:"removed",mutation:e})}),$(this,di).clear(),$(this,ps).clear()})}getAll(){return Array.from($(this,di))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Ew(n,r))}findAll(e={}){return this.getAll().filter(n=>Ew(e,n))}notify(e){Sn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Sn.batch(()=>Promise.all(e.map(n=>n.continue().catch(pr))))}},di=new WeakMap,ps=new WeakMap,id=new WeakMap,lk);function Hh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Ms,ck,fC=(ck=class extends od{constructor(e={}){super();Le(this,Ms);this.config=e,me(this,Ms,new Map)}build(e,n,r){const s=n.queryKey,o=n.queryHash??Dy(s,n);let l=this.get(o);return l||(l=new iC({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){$(this,Ms).has(e.queryHash)||($(this,Ms).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=$(this,Ms).get(e.queryHash);n&&(e.destroy(),n===e&&$(this,Ms).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Sn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return $(this,Ms).get(e)}getAll(){return[...$(this,Ms).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>kw(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>kw(e,r)):n}notify(e){Sn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Sn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Sn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ms=new WeakMap,ck),$t,yo,vo,Xl,ec,_o,tc,nc,uk,pC=(uk=class{constructor(t={}){Le(this,$t);Le(this,yo);Le(this,vo);Le(this,Xl);Le(this,ec);Le(this,_o);Le(this,tc);Le(this,nc);me(this,$t,t.queryCache||new fC),me(this,yo,t.mutationCache||new hC),me(this,vo,t.defaultOptions||{}),me(this,Xl,new Map),me(this,ec,new Map),me(this,_o,0)}mount(){qh(this,_o)._++,$(this,_o)===1&&(me(this,tc,Ly.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,$t).onFocus())})),me(this,nc,Sf.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,$t).onOnline())})))}unmount(){var t,e;qh(this,_o)._--,$(this,_o)===0&&((t=$(this,tc))==null||t.call(this),me(this,tc,void 0),(e=$(this,nc))==null||e.call(this),me(this,nc,void 0))}isFetching(t){return $(this,$t).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return $(this,yo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,$t).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=$(this,$t).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(xo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return $(this,$t).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=$(this,$t).get(r.queryHash),o=s==null?void 0:s.state.data,l=KS(e,o);if(l!==void 0)return $(this,$t).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Sn.batch(()=>$(this,$t).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,$t).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=$(this,$t);Sn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=$(this,$t);return Sn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Sn.batch(()=>$(this,$t).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(pr).catch(pr)}invalidateQueries(t,e={}){return Sn.batch(()=>($(this,$t).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Sn.batch(()=>$(this,$t).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(pr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(pr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=$(this,$t).build(this,e);return n.isStaleByTime(xo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(pr).catch(pr)}fetchInfiniteQuery(t){return t.behavior=Rw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(pr).catch(pr)}ensureInfiniteQueryData(t){return t.behavior=Rw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Sf.isOnline()?$(this,yo).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,$t)}getMutationCache(){return $(this,yo)}getDefaultOptions(){return $(this,vo)}setDefaultOptions(t){me(this,vo,t)}setQueryDefaults(t,e){$(this,Xl).set(Ou(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...$(this,Xl).values()],n={};return e.forEach(r=>{Lu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){$(this,ec).set(Ou(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...$(this,ec).values()],n={};return e.forEach(r=>{Lu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...$(this,vo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Dy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Oy&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...$(this,vo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){$(this,$t).clear(),$(this,yo).clear()}},$t=new WeakMap,yo=new WeakMap,vo=new WeakMap,Xl=new WeakMap,ec=new WeakMap,_o=new WeakMap,tc=new WeakMap,nc=new WeakMap,uk),O=jy();const Me=dk(O);var wk=O.createContext(void 0),Vy=t=>{const e=O.useContext(wk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},mC=({client:t,children:e})=>(O.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(wk.Provider,{value:t,children:e})),bk=O.createContext(!1),gC=()=>O.useContext(bk);bk.Provider;function yC(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var vC=O.createContext(yC()),_C=()=>O.useContext(vC),wC=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},bC=t=>{O.useEffect(()=>{t.clearReset()},[t])},xC=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||JS(n,[t.error,r])),kC=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},EC=(t,e)=>t.isLoading&&t.isFetching&&!e,TC=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,jw=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function IC(t,e,n){var _,x,E,C,I;const r=gC(),s=_C(),o=Vy(),l=o.defaultQueryOptions(t);(x=(_=o.getDefaultOptions().queries)==null?void 0:_._experimental_beforeQuery)==null||x.call(_,l),l._optimisticResults=r?"isRestoring":"optimistic",kC(l),wC(l,s),bC(s);const u=!o.getQueryCache().get(l.queryHash),[d]=O.useState(()=>new e(o,l)),m=d.getOptimisticResult(l),y=!r&&t.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(R=>{const U=y?d.subscribe(Sn.batchCalls(R)):pr;return d.updateResult(),U},[d,y]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),O.useEffect(()=>{d.setOptions(l)},[l,d]),TC(l,m))throw jw(l,d,s);if(xC({result:m,errorResetBoundary:s,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw m.error;if((C=(E=o.getDefaultOptions().queries)==null?void 0:E._experimental_afterQuery)==null||C.call(E,l,m),l.experimental_prefetchInRender&&!Da&&EC(m,r)){const R=u?jw(l,d,s):(I=o.getQueryCache().get(l.queryHash))==null?void 0:I.promise;R==null||R.catch(pr).finally(()=>{d.updateResult()})}return l.notifyOnChangeProps?m:d.trackResult(m)}function SC(t,e){return IC(t,oC)}var Kh={},dg={exports:{}},hr={},hg={exports:{}},fg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function CC(){return Dw||(Dw=1,(function(t){function e(X,pe){var de=X.length;X.push(pe);e:for(;0<de;){var W=de-1>>>1,ee=X[W];if(0<s(ee,pe))X[W]=pe,X[de]=ee,de=W;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var pe=X[0],de=X.pop();if(de!==pe){X[0]=de;e:for(var W=0,ee=X.length,ce=ee>>>1;W<ce;){var xe=2*(W+1)-1,Oe=X[xe],Pe=xe+1,Se=X[Pe];if(0>s(Oe,de))Pe<ee&&0>s(Se,Oe)?(X[W]=Se,X[Pe]=de,W=Pe):(X[W]=Oe,X[xe]=de,W=xe);else if(Pe<ee&&0>s(Se,de))X[W]=Se,X[Pe]=de,W=Pe;else break e}}return pe}function s(X,pe){var de=X.sortIndex-pe.sortIndex;return de!==0?de:X.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],m=[],y=1,_=null,x=3,E=!1,C=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(X){for(var pe=n(m);pe!==null;){if(pe.callback===null)r(m);else if(pe.startTime<=X)r(m),pe.sortIndex=pe.expirationTime,e(d,pe);else break;pe=n(m)}}function q(X){if(I=!1,M(X),!C)if(n(d)!==null)C=!0,Ze(Z);else{var pe=n(m);pe!==null&&Re(q,pe.startTime-X)}}function Z(X,pe){C=!1,I&&(I=!1,U(k),k=-1),E=!0;var de=x;try{for(M(pe),_=n(d);_!==null&&(!(_.expirationTime>pe)||X&&!D());){var W=_.callback;if(typeof W=="function"){_.callback=null,x=_.priorityLevel;var ee=W(_.expirationTime<=pe);pe=t.unstable_now(),typeof ee=="function"?_.callback=ee:_===n(d)&&r(d),M(pe)}else r(d);_=n(d)}if(_!==null)var ce=!0;else{var xe=n(m);xe!==null&&Re(q,xe.startTime-pe),ce=!1}return ce}finally{_=null,x=de,E=!1}}var G=!1,A=null,k=-1,N=5,P=-1;function D(){return!(t.unstable_now()-P<N)}function V(){if(A!==null){var X=t.unstable_now();P=X;var pe=!0;try{pe=A(!0,X)}finally{pe?j():(G=!1,A=null)}}else G=!1}var j;if(typeof F=="function")j=function(){F(V)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,rt=Ae.port2;Ae.port1.onmessage=V,j=function(){rt.postMessage(null)}}else j=function(){R(V,0)};function Ze(X){A=X,G||(G=!0,j())}function Re(X,pe){k=R(function(){X(t.unstable_now())},pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){C||E||(C=!0,Ze(Z))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(X){switch(x){case 1:case 2:case 3:var pe=3;break;default:pe=x}var de=x;x=pe;try{return X()}finally{x=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,pe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var de=x;x=X;try{return pe()}finally{x=de}},t.unstable_scheduleCallback=function(X,pe,de){var W=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?W+de:W):de=W,X){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=de+ee,X={id:y++,callback:pe,priorityLevel:X,startTime:de,expirationTime:ee,sortIndex:-1},de>W?(X.sortIndex=de,e(m,X),n(d)===null&&X===n(m)&&(I?(U(k),k=-1):I=!0,Re(q,de-W))):(X.sortIndex=ee,e(d,X),C||E||(C=!0,Ze(Z))),X},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(X){var pe=x;return function(){var de=x;x=pe;try{return X.apply(this,arguments)}finally{x=de}}}})(fg)),fg}var Ow;function AC(){return Ow||(Ow=1,hg.exports=CC()),hg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function NC(){if(Lw)return hr;Lw=1;var t=jy(),e=AC();function n(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},_={};function x(i){return d.call(_,i)?!0:d.call(y,i)?!1:m.test(i)?_[i]=!0:(y[i]=!0,!1)}function E(i,a,c,f){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function C(i,a,c,f){if(a===null||typeof a>"u"||E(i,a,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function I(i,a,c,f,g,w,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=w,this.removeEmptyString=T}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){R[i]=new I(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];R[a]=new I(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){R[i]=new I(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){R[i]=new I(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){R[i]=new I(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){R[i]=new I(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){R[i]=new I(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){R[i]=new I(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){R[i]=new I(i,5,!1,i.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function F(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(U,F);R[a]=new I(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(U,F);R[a]=new I(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(U,F);R[a]=new I(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){R[i]=new I(i,1,!1,i.toLowerCase(),null,!1,!1)}),R.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){R[i]=new I(i,1,!1,i.toLowerCase(),null,!0,!0)});function M(i,a,c,f){var g=R.hasOwnProperty(a)?R[a]:null;(g!==null?g.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(C(a,c,g,f)&&(c=null),f||g===null?x(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):g.mustUseProperty?i[g.propertyName]=c===null?g.type===3?!1:"":c:(a=g.attributeName,f=g.attributeNamespace,c===null?i.removeAttribute(a):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,f?i.setAttributeNS(f,a,c):i.setAttribute(a,c))))}var q=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),G=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),Ze=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),X=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var de=Object.assign,W;function ee(i){if(W===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);W=a&&a[1]||""}return`
`+W+i}var ce=!1;function xe(i,a){if(!i||ce)return"";ce=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var f=Y}Reflect.construct(i,[],a)}else{try{a.call()}catch(Y){f=Y}i.call(a.prototype)}else{try{throw Error()}catch(Y){f=Y}i()}}catch(Y){if(Y&&f&&typeof Y.stack=="string"){for(var g=Y.stack.split(`
`),w=f.stack.split(`
`),T=g.length-1,L=w.length-1;1<=T&&0<=L&&g[T]!==w[L];)L--;for(;1<=T&&0<=L;T--,L--)if(g[T]!==w[L]){if(T!==1||L!==1)do if(T--,L--,0>L||g[T]!==w[L]){var z=`
`+g[T].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=T&&0<=L);break}}}finally{ce=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?ee(i):""}function Oe(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=xe(i.type,!1),i;case 11:return i=xe(i.type.render,!1),i;case 1:return i=xe(i.type,!0),i;default:return""}}function Pe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case G:return"Portal";case N:return"Profiler";case k:return"StrictMode";case j:return"Suspense";case Ae:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case D:return(i.displayName||"Context")+".Consumer";case P:return(i._context.displayName||"Context")+".Provider";case V:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case rt:return a=i.displayName||null,a!==null?a:Pe(i.type)||"Memo";case Ze:a=i._payload,i=i._init;try{return Pe(i(a))}catch{}}return null}function Se(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(a);case 8:return a===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function $e(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ne(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function he(i){var a=ne(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,w=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,w.call(this,T)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function st(i){i._valueTracker||(i._valueTracker=he(i))}function gt(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=ne(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function _n(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function wn(i,a){var c=a.checked;return de({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function yr(i,a){var c=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;c=$e(a.value!=null?a.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Rr(i,a){a=a.checked,a!=null&&M(i,"checked",a,!1)}function Ai(i,a){Rr(i,a);var c=$e(a.value),f=a.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?xs(i,a.type,c):a.hasOwnProperty("defaultValue")&&xs(i,a.type,$e(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Bo(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function xs(i,a,c){(a!=="number"||_n(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var cn=Array.isArray;function nr(i,a,c,f){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+$e(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function ks(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return de({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Hs(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(n(92));if(cn(c)){if(1<c.length)throw Error(n(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:$e(c)}}function Ks(i,a){var c=$e(a.value),f=$e(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function Wo(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Bt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _t(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Bt(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Rn,Yr=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,f,g){MSApp.execUnsafeLocalFunction(function(){return i(a,c,f,g)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Rn=Rn||document.createElement("div"),Rn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Rn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Jr(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var Pn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Es=["Webkit","ms","Moz","O"];Object.keys(Pn).forEach(function(i){Es.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Pn[a]=Pn[i]})});function qo(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||Pn.hasOwnProperty(i)&&Pn[i]?(""+a).trim():a+"px"}function Ho(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var f=c.indexOf("--")===0,g=qo(c,a[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,g):i[c]=g}}var Gs=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ni(i,a){if(a){if(Gs[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Ko(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ts=null;function Ri(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Pi=null,rr=null,yt=null;function Ht(i){if(i=Xc(i)){if(typeof Pi!="function")throw Error(n(280));var a=i.stateNode;a&&(a=oh(a),Pi(i.stateNode,i.type,a))}}function Ct(i){rr?yt?yt.push(i):yt=[i]:rr=i}function sr(){if(rr){var i=rr,a=yt;if(yt=rr=null,Ht(i),a)for(i=0;i<a.length;i++)Ht(a[i])}}function Kt(i,a){return i(a)}function en(){}var Gt=!1;function Pr(i,a,c){if(Gt)return i(a,c);Gt=!0;try{return Kt(i,a,c)}finally{Gt=!1,(rr!==null||yt!==null)&&(en(),sr())}}function Ke(i,a){var c=i.stateNode;if(c===null)return null;var f=oh(c);if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,a,typeof c));return c}var Bn=!1;if(u)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{Bn=!1}function bn(i,a,c,f,g,w,T,L,z){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(c,Y)}catch(ie){this.onError(ie)}}var vr=!1,jr=null,Qt=!1,Xr=null,Go={onError:function(i){vr=!0,jr=i}};function Ka(i,a,c,f,g,w,T,L,z){vr=!1,jr=null,bn.apply(Go,arguments)}function Rd(i,a,c,f,g,w,T,L,z){if(Ka.apply(this,arguments),vr){if(vr){var Y=jr;vr=!1,jr=null}else throw Error(n(198));Qt||(Qt=!0,Xr=Y)}}function es(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function Qo(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function ts(i){if(es(i)!==i)throw Error(n(188))}function Pd(i){var a=i.alternate;if(!a){if(a=es(i),a===null)throw Error(n(188));return a!==i?null:i}for(var c=i,f=a;;){var g=c.return;if(g===null)break;var w=g.alternate;if(w===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===c)return ts(g),i;if(w===f)return ts(g),a;w=w.sibling}throw Error(n(188))}if(c.return!==f.return)c=g,f=w;else{for(var T=!1,L=g.child;L;){if(L===c){T=!0,c=g,f=w;break}if(L===f){T=!0,f=g,c=w;break}L=L.sibling}if(!T){for(L=w.child;L;){if(L===c){T=!0,c=w,f=g;break}if(L===f){T=!0,f=w,c=g;break}L=L.sibling}if(!T)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:a}function Dc(i){return i=Pd(i),i!==null?Ga(i):null}function Ga(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Ga(i);if(a!==null)return a;i=i.sibling}return null}var Qa=e.unstable_scheduleCallback,Oc=e.unstable_cancelCallback,jd=e.unstable_shouldYield,Mp=e.unstable_requestPaint,wt=e.unstable_now,Dd=e.unstable_getCurrentPriorityLevel,Zo=e.unstable_ImmediatePriority,ji=e.unstable_UserBlockingPriority,Dr=e.unstable_NormalPriority,Lc=e.unstable_LowPriority,Od=e.unstable_IdlePriority,Yo=null,_r=null;function Ld(i){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(Yo,i,void 0,(i.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:Vd,Mc=Math.log,Md=Math.LN2;function Vd(i){return i>>>=0,i===0?32:31-(Mc(i)/Md|0)|0}var Za=64,Ya=4194304;function Di(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Jo(i,a){var c=i.pendingLanes;if(c===0)return 0;var f=0,g=i.suspendedLanes,w=i.pingedLanes,T=c&268435455;if(T!==0){var L=T&~g;L!==0?f=Di(L):(w&=T,w!==0&&(f=Di(w)))}else T=c&~g,T!==0?f=Di(T):w!==0&&(f=Di(w));if(f===0)return 0;if(a!==0&&a!==f&&(a&g)===0&&(g=f&-f,w=a&-a,g>=w||g===16&&(w&4194240)!==0))return a;if((f&4)!==0&&(f|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)c=31-Wn(a),g=1<<c,f|=i[c],a&=~g;return f}function Vp(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qs(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,w=i.pendingLanes;0<w;){var T=31-Wn(w),L=1<<T,z=g[T];z===-1?((L&c)===0||(L&f)!==0)&&(g[T]=Vp(L,a)):z<=a&&(i.expiredLanes|=L),w&=~L}}function wr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Xo(){var i=Za;return Za<<=1,(Za&4194240)===0&&(Za=64),i}function Oi(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Li(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Wn(a),i[a]=c}function vt(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var g=31-Wn(c),w=1<<g;a[g]=0,f[g]=-1,i[g]=-1,c&=~w}}function Mi(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-Wn(c),g=1<<f;g&a|i[f]&a&&(i[f]|=a),c&=~g}}var Je=0;function Vi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Fd,Ja,zd,Ud,$d,Vc=!1,Is=[],xn=null,ns=null,rs=null,Fi=new Map,Or=new Map,Ss=[],Fp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bd(i,a){switch(i){case"focusin":case"focusout":xn=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Fi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Or.delete(a.pointerId)}}function ir(i,a,c,f,g,w){return i===null||i.nativeEvent!==w?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:w,targetContainers:[g]},a!==null&&(a=Xc(a),a!==null&&Ja(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function zp(i,a,c,f,g){switch(a){case"focusin":return xn=ir(xn,i,a,c,f,g),!0;case"dragenter":return ns=ir(ns,i,a,c,f,g),!0;case"mouseover":return rs=ir(rs,i,a,c,f,g),!0;case"pointerover":var w=g.pointerId;return Fi.set(w,ir(Fi.get(w)||null,i,a,c,f,g)),!0;case"gotpointercapture":return w=g.pointerId,Or.set(w,ir(Or.get(w)||null,i,a,c,f,g)),!0}return!1}function Wd(i){var a=sa(i.target);if(a!==null){var c=es(a);if(c!==null){if(a=c.tag,a===13){if(a=Qo(c),a!==null){i.blockedOn=a,$d(i.priority,function(){zd(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Zs(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Xa(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);Ts=f,c.target.dispatchEvent(f),Ts=null}else return a=Xc(c),a!==null&&Ja(a),i.blockedOn=c,!1;a.shift()}return!0}function ea(i,a,c){Zs(i)&&c.delete(a)}function qd(){Vc=!1,xn!==null&&Zs(xn)&&(xn=null),ns!==null&&Zs(ns)&&(ns=null),rs!==null&&Zs(rs)&&(rs=null),Fi.forEach(ea),Or.forEach(ea)}function ss(i,a){i.blockedOn===a&&(i.blockedOn=null,Vc||(Vc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qd)))}function is(i){function a(g){return ss(g,i)}if(0<Is.length){ss(Is[0],i);for(var c=1;c<Is.length;c++){var f=Is[c];f.blockedOn===i&&(f.blockedOn=null)}}for(xn!==null&&ss(xn,i),ns!==null&&ss(ns,i),rs!==null&&ss(rs,i),Fi.forEach(a),Or.forEach(a),c=0;c<Ss.length;c++)f=Ss[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<Ss.length&&(c=Ss[0],c.blockedOn===null);)Wd(c),c.blockedOn===null&&Ss.shift()}var Ys=q.ReactCurrentBatchConfig,zi=!0;function At(i,a,c,f){var g=Je,w=Ys.transition;Ys.transition=null;try{Je=1,Fc(i,a,c,f)}finally{Je=g,Ys.transition=w}}function Up(i,a,c,f){var g=Je,w=Ys.transition;Ys.transition=null;try{Je=4,Fc(i,a,c,f)}finally{Je=g,Ys.transition=w}}function Fc(i,a,c,f){if(zi){var g=Xa(i,a,c,f);if(g===null)Jp(i,a,f,ta,c),Bd(i,f);else if(zp(g,i,a,c,f))f.stopPropagation();else if(Bd(i,f),a&4&&-1<Fp.indexOf(i)){for(;g!==null;){var w=Xc(g);if(w!==null&&Fd(w),w=Xa(i,a,c,f),w===null&&Jp(i,a,f,ta,c),w===g)break;g=w}g!==null&&f.stopPropagation()}else Jp(i,a,f,null,c)}}var ta=null;function Xa(i,a,c,f){if(ta=null,i=Ri(f),i=sa(i),i!==null)if(a=es(i),a===null)i=null;else if(c=a.tag,c===13){if(i=Qo(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return ta=i,null}function zc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dd()){case Zo:return 1;case ji:return 4;case Dr:case Lc:return 16;case Od:return 536870912;default:return 16}default:return 16}}var br=null,el=null,or=null;function Uc(){if(or)return or;var i,a=el,c=a.length,f,g="value"in br?br.value:br.textContent,w=g.length;for(i=0;i<c&&a[i]===g[i];i++);var T=c-i;for(f=1;f<=T&&a[c-f]===g[w-f];f++);return or=g.slice(i,1<f?1-f:void 0)}function tl(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Cs(){return!0}function $c(){return!1}function kn(i){function a(c,f,g,w,T){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(w):w[L]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Cs:$c,this.isPropagationStopped=$c,this}return de(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),a}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nl=kn(os),As=de({},os,{view:0,detail:0}),$p=kn(As),rl,Js,Ui,na=de({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ns,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ui&&(Ui&&i.type==="mousemove"?(rl=i.screenX-Ui.screenX,Js=i.screenY-Ui.screenY):Js=rl=0,Ui=i),rl)},movementY:function(i){return"movementY"in i?i.movementY:Js}}),sl=kn(na),Bc=de({},na,{dataTransfer:0}),Hd=kn(Bc),il=de({},As,{relatedTarget:0}),ol=kn(il),Kd=de({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),Xs=kn(Kd),Gd=de({},os,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Qd=kn(Gd),Zd=de({},os,{data:0}),Wc=kn(Zd),al={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Yd[i])?!!a[i]:!1}function Ns(){return Jd}var h=de({},As,{key:function(i){if(i.key){var a=al[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=tl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?qn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ns,charCode:function(i){return i.type==="keypress"?tl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?tl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=kn(h),b=de({},na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=kn(b),H=de({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ns}),J=kn(H),ue=de({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),ht=kn(ue),tn=de({},na,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),it=kn(tn),un=[9,13,27,32],Zt=u&&"CompositionEvent"in window,Lr=null;u&&"documentMode"in document&&(Lr=document.documentMode);var xr=u&&"TextEvent"in window&&!Lr,ra=u&&(!Zt||Lr&&8<Lr&&11>=Lr),ll=" ",hv=!1;function fv(i,a){switch(i){case"keyup":return un.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var cl=!1;function LI(i,a){switch(i){case"compositionend":return pv(a);case"keypress":return a.which!==32?null:(hv=!0,ll);case"textInput":return i=a.data,i===ll&&hv?null:i;default:return null}}function MI(i,a){if(cl)return i==="compositionend"||!Zt&&fv(i,a)?(i=Uc(),or=el=br=null,cl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ra&&a.locale!=="ko"?null:a.data;default:return null}}var VI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!VI[i.type]:a==="textarea"}function gv(i,a,c,f){Ct(f),a=rh(a,"onChange"),0<a.length&&(c=new nl("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var qc=null,Hc=null;function FI(i){Dv(i,0)}function Xd(i){var a=pl(i);if(gt(a))return i}function zI(i,a){if(i==="change")return a}var yv=!1;if(u){var Bp;if(u){var Wp="oninput"in document;if(!Wp){var vv=document.createElement("div");vv.setAttribute("oninput","return;"),Wp=typeof vv.oninput=="function"}Bp=Wp}else Bp=!1;yv=Bp&&(!document.documentMode||9<document.documentMode)}function _v(){qc&&(qc.detachEvent("onpropertychange",wv),Hc=qc=null)}function wv(i){if(i.propertyName==="value"&&Xd(Hc)){var a=[];gv(a,Hc,i,Ri(i)),Pr(FI,a)}}function UI(i,a,c){i==="focusin"?(_v(),qc=a,Hc=c,qc.attachEvent("onpropertychange",wv)):i==="focusout"&&_v()}function $I(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Xd(Hc)}function BI(i,a){if(i==="click")return Xd(a)}function WI(i,a){if(i==="input"||i==="change")return Xd(a)}function qI(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var as=typeof Object.is=="function"?Object.is:qI;function Kc(i,a){if(as(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!d.call(a,g)||!as(i[g],a[g]))return!1}return!0}function bv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function xv(i,a){var c=bv(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=bv(c)}}function kv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?kv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Ev(){for(var i=window,a=_n();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=_n(i.document)}return a}function qp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function HI(i){var a=Ev(),c=i.focusedElem,f=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&kv(c.ownerDocument.documentElement,c)){if(f!==null&&qp(c)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var g=c.textContent.length,w=Math.min(f.start,g);f=f.end===void 0?w:Math.min(f.end,g),!i.extend&&w>f&&(g=f,f=w,w=g),g=xv(c,w);var T=xv(c,f);g&&T&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),i.removeAllRanges(),w>f?(i.addRange(a),i.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var KI=u&&"documentMode"in document&&11>=document.documentMode,ul=null,Hp=null,Gc=null,Kp=!1;function Tv(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Kp||ul==null||ul!==_n(f)||(f=ul,"selectionStart"in f&&qp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Gc&&Kc(Gc,f)||(Gc=f,f=rh(Hp,"onSelect"),0<f.length&&(a=new nl("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=ul)))}function eh(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var dl={animationend:eh("Animation","AnimationEnd"),animationiteration:eh("Animation","AnimationIteration"),animationstart:eh("Animation","AnimationStart"),transitionend:eh("Transition","TransitionEnd")},Gp={},Iv={};u&&(Iv=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function th(i){if(Gp[i])return Gp[i];if(!dl[i])return i;var a=dl[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in Iv)return Gp[i]=a[c];return i}var Sv=th("animationend"),Cv=th("animationiteration"),Av=th("animationstart"),Nv=th("transitionend"),Rv=new Map,Pv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $i(i,a){Rv.set(i,a),o(a,[i])}for(var Qp=0;Qp<Pv.length;Qp++){var Zp=Pv[Qp],GI=Zp.toLowerCase(),QI=Zp[0].toUpperCase()+Zp.slice(1);$i(GI,"on"+QI)}$i(Sv,"onAnimationEnd"),$i(Cv,"onAnimationIteration"),$i(Av,"onAnimationStart"),$i("dblclick","onDoubleClick"),$i("focusin","onFocus"),$i("focusout","onBlur"),$i(Nv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qc));function jv(i,a,c){var f=i.type||"unknown-event";i.currentTarget=c,Rd(f,a,void 0,i),i.currentTarget=null}function Dv(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var w=void 0;if(a)for(var T=f.length-1;0<=T;T--){var L=f[T],z=L.instance,Y=L.currentTarget;if(L=L.listener,z!==w&&g.isPropagationStopped())break e;jv(g,L,Y),w=z}else for(T=0;T<f.length;T++){if(L=f[T],z=L.instance,Y=L.currentTarget,L=L.listener,z!==w&&g.isPropagationStopped())break e;jv(g,L,Y),w=z}}}if(Qt)throw i=Xr,Qt=!1,Xr=null,i}function Et(i,a){var c=a[sm];c===void 0&&(c=a[sm]=new Set);var f=i+"__bubble";c.has(f)||(Ov(a,i,2,!1),c.add(f))}function Yp(i,a,c){var f=0;a&&(f|=4),Ov(c,i,f,a)}var nh="_reactListening"+Math.random().toString(36).slice(2);function Zc(i){if(!i[nh]){i[nh]=!0,r.forEach(function(c){c!=="selectionchange"&&(ZI.has(c)||Yp(c,!1,i),Yp(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[nh]||(a[nh]=!0,Yp("selectionchange",!1,a))}}function Ov(i,a,c,f){switch(zc(a)){case 1:var g=At;break;case 4:g=Up;break;default:g=Fc}c=g.bind(null,a,c,i),g=void 0,!Bn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function Jp(i,a,c,f,g){var w=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var L=f.stateNode.containerInfo;if(L===g||L.nodeType===8&&L.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var z=T.tag;if((z===3||z===4)&&(z=T.stateNode.containerInfo,z===g||z.nodeType===8&&z.parentNode===g))return;T=T.return}for(;L!==null;){if(T=sa(L),T===null)return;if(z=T.tag,z===5||z===6){f=w=T;continue e}L=L.parentNode}}f=f.return}Pr(function(){var Y=w,ie=Ri(c),ae=[];e:{var se=Rv.get(i);if(se!==void 0){var fe=nl,_e=i;switch(i){case"keypress":if(tl(c)===0)break e;case"keydown":case"keyup":fe=v;break;case"focusin":_e="focus",fe=ol;break;case"focusout":_e="blur",fe=ol;break;case"beforeblur":case"afterblur":fe=ol;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Hd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=J;break;case Sv:case Cv:case Av:fe=Xs;break;case Nv:fe=ht;break;case"scroll":fe=$p;break;case"wheel":fe=it;break;case"copy":case"cut":case"paste":fe=Qd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=S}var ke=(a&4)!==0,Wt=!ke&&i==="scroll",K=ke?se!==null?se+"Capture":null:se;ke=[];for(var B=Y,Q;B!==null;){Q=B;var le=Q.stateNode;if(Q.tag===5&&le!==null&&(Q=le,K!==null&&(le=Ke(B,K),le!=null&&ke.push(Yc(B,le,Q)))),Wt)break;B=B.return}0<ke.length&&(se=new fe(se,_e,null,c,ie),ae.push({event:se,listeners:ke}))}}if((a&7)===0){e:{if(se=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",se&&c!==Ts&&(_e=c.relatedTarget||c.fromElement)&&(sa(_e)||_e[ei]))break e;if((fe||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(_e=c.relatedTarget||c.toElement,fe=Y,_e=_e?sa(_e):null,_e!==null&&(Wt=es(_e),_e!==Wt||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(fe=null,_e=Y),fe!==_e)){if(ke=sl,le="onMouseLeave",K="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(ke=S,le="onPointerLeave",K="onPointerEnter",B="pointer"),Wt=fe==null?se:pl(fe),Q=_e==null?se:pl(_e),se=new ke(le,B+"leave",fe,c,ie),se.target=Wt,se.relatedTarget=Q,le=null,sa(ie)===Y&&(ke=new ke(K,B+"enter",_e,c,ie),ke.target=Q,ke.relatedTarget=Wt,le=ke),Wt=le,fe&&_e)t:{for(ke=fe,K=_e,B=0,Q=ke;Q;Q=hl(Q))B++;for(Q=0,le=K;le;le=hl(le))Q++;for(;0<B-Q;)ke=hl(ke),B--;for(;0<Q-B;)K=hl(K),Q--;for(;B--;){if(ke===K||K!==null&&ke===K.alternate)break t;ke=hl(ke),K=hl(K)}ke=null}else ke=null;fe!==null&&Lv(ae,se,fe,ke,!1),_e!==null&&Wt!==null&&Lv(ae,Wt,_e,ke,!0)}}e:{if(se=Y?pl(Y):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var Te=zI;else if(mv(se))if(yv)Te=WI;else{Te=$I;var je=UI}else(fe=se.nodeName)&&fe.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Te=BI);if(Te&&(Te=Te(i,Y))){gv(ae,Te,c,ie);break e}je&&je(i,se,Y),i==="focusout"&&(je=se._wrapperState)&&je.controlled&&se.type==="number"&&xs(se,"number",se.value)}switch(je=Y?pl(Y):window,i){case"focusin":(mv(je)||je.contentEditable==="true")&&(ul=je,Hp=Y,Gc=null);break;case"focusout":Gc=Hp=ul=null;break;case"mousedown":Kp=!0;break;case"contextmenu":case"mouseup":case"dragend":Kp=!1,Tv(ae,c,ie);break;case"selectionchange":if(KI)break;case"keydown":case"keyup":Tv(ae,c,ie)}var De;if(Zt)e:{switch(i){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else cl?fv(i,c)&&(ze="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(ze="onCompositionStart");ze&&(ra&&c.locale!=="ko"&&(cl||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&cl&&(De=Uc()):(br=ie,el="value"in br?br.value:br.textContent,cl=!0)),je=rh(Y,ze),0<je.length&&(ze=new Wc(ze,i,null,c,ie),ae.push({event:ze,listeners:je}),De?ze.data=De:(De=pv(c),De!==null&&(ze.data=De)))),(De=xr?LI(i,c):MI(i,c))&&(Y=rh(Y,"onBeforeInput"),0<Y.length&&(ie=new Wc("onBeforeInput","beforeinput",null,c,ie),ae.push({event:ie,listeners:Y}),ie.data=De))}Dv(ae,a)})}function Yc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function rh(i,a){for(var c=a+"Capture",f=[];i!==null;){var g=i,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=Ke(i,c),w!=null&&f.unshift(Yc(i,w,g)),w=Ke(i,a),w!=null&&f.push(Yc(i,w,g))),i=i.return}return f}function hl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Lv(i,a,c,f,g){for(var w=a._reactName,T=[];c!==null&&c!==f;){var L=c,z=L.alternate,Y=L.stateNode;if(z!==null&&z===f)break;L.tag===5&&Y!==null&&(L=Y,g?(z=Ke(c,w),z!=null&&T.unshift(Yc(c,z,L))):g||(z=Ke(c,w),z!=null&&T.push(Yc(c,z,L)))),c=c.return}T.length!==0&&i.push({event:a,listeners:T})}var YI=/\r\n?/g,JI=/\u0000|\uFFFD/g;function Mv(i){return(typeof i=="string"?i:""+i).replace(YI,`
`).replace(JI,"")}function sh(i,a,c){if(a=Mv(a),Mv(i)!==a&&c)throw Error(n(425))}function ih(){}var Xp=null,em=null;function tm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var nm=typeof setTimeout=="function"?setTimeout:void 0,XI=typeof clearTimeout=="function"?clearTimeout:void 0,Vv=typeof Promise=="function"?Promise:void 0,eS=typeof queueMicrotask=="function"?queueMicrotask:typeof Vv<"u"?function(i){return Vv.resolve(null).then(i).catch(tS)}:nm;function tS(i){setTimeout(function(){throw i})}function rm(i,a){var c=a,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(f===0){i.removeChild(g),is(a);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=g}while(c);is(a)}function Bi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Fv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var fl=Math.random().toString(36).slice(2),Rs="__reactFiber$"+fl,Jc="__reactProps$"+fl,ei="__reactContainer$"+fl,sm="__reactEvents$"+fl,nS="__reactListeners$"+fl,rS="__reactHandles$"+fl;function sa(i){var a=i[Rs];if(a)return a;for(var c=i.parentNode;c;){if(a=c[ei]||c[Rs]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Fv(i);i!==null;){if(c=i[Rs])return c;i=Fv(i)}return a}i=c,c=i.parentNode}return null}function Xc(i){return i=i[Rs]||i[ei],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function pl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function oh(i){return i[Jc]||null}var im=[],ml=-1;function Wi(i){return{current:i}}function Tt(i){0>ml||(i.current=im[ml],im[ml]=null,ml--)}function bt(i,a){ml++,im[ml]=i.current,i.current=a}var qi={},jn=Wi(qi),ar=Wi(!1),ia=qi;function gl(i,a){var c=i.type.contextTypes;if(!c)return qi;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in c)g[w]=a[w];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=g),g}function lr(i){return i=i.childContextTypes,i!=null}function ah(){Tt(ar),Tt(jn)}function zv(i,a,c){if(jn.current!==qi)throw Error(n(168));bt(jn,a),bt(ar,c)}function Uv(i,a,c){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(n(108,Se(i)||"Unknown",g));return de({},c,f)}function lh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||qi,ia=jn.current,bt(jn,i),bt(ar,ar.current),!0}function $v(i,a,c){var f=i.stateNode;if(!f)throw Error(n(169));c?(i=Uv(i,a,ia),f.__reactInternalMemoizedMergedChildContext=i,Tt(ar),Tt(jn),bt(jn,i)):Tt(ar),bt(ar,c)}var ti=null,ch=!1,om=!1;function Bv(i){ti===null?ti=[i]:ti.push(i)}function sS(i){ch=!0,Bv(i)}function Hi(){if(!om&&ti!==null){om=!0;var i=0,a=Je;try{var c=ti;for(Je=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}ti=null,ch=!1}catch(g){throw ti!==null&&(ti=ti.slice(i+1)),Qa(Zo,Hi),g}finally{Je=a,om=!1}}return null}var yl=[],vl=0,uh=null,dh=0,Mr=[],Vr=0,oa=null,ni=1,ri="";function aa(i,a){yl[vl++]=dh,yl[vl++]=uh,uh=i,dh=a}function Wv(i,a,c){Mr[Vr++]=ni,Mr[Vr++]=ri,Mr[Vr++]=oa,oa=i;var f=ni;i=ri;var g=32-Wn(f)-1;f&=~(1<<g),c+=1;var w=32-Wn(a)+g;if(30<w){var T=g-g%5;w=(f&(1<<T)-1).toString(32),f>>=T,g-=T,ni=1<<32-Wn(a)+g|c<<g|f,ri=w+i}else ni=1<<w|c<<g|f,ri=i}function am(i){i.return!==null&&(aa(i,1),Wv(i,1,0))}function lm(i){for(;i===uh;)uh=yl[--vl],yl[vl]=null,dh=yl[--vl],yl[vl]=null;for(;i===oa;)oa=Mr[--Vr],Mr[Vr]=null,ri=Mr[--Vr],Mr[Vr]=null,ni=Mr[--Vr],Mr[Vr]=null}var kr=null,Er=null,Nt=!1,ls=null;function qv(i,a){var c=$r(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function Hv(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,kr=i,Er=Bi(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,kr=i,Er=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=oa!==null?{id:ni,overflow:ri}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=$r(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,kr=i,Er=null,!0):!1;default:return!1}}function cm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function um(i){if(Nt){var a=Er;if(a){var c=a;if(!Hv(i,a)){if(cm(i))throw Error(n(418));a=Bi(c.nextSibling);var f=kr;a&&Hv(i,a)?qv(f,c):(i.flags=i.flags&-4097|2,Nt=!1,kr=i)}}else{if(cm(i))throw Error(n(418));i.flags=i.flags&-4097|2,Nt=!1,kr=i}}}function Kv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;kr=i}function hh(i){if(i!==kr)return!1;if(!Nt)return Kv(i),Nt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!tm(i.type,i.memoizedProps)),a&&(a=Er)){if(cm(i))throw Gv(),Error(n(418));for(;a;)qv(i,a),a=Bi(a.nextSibling)}if(Kv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){Er=Bi(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}Er=null}}else Er=kr?Bi(i.stateNode.nextSibling):null;return!0}function Gv(){for(var i=Er;i;)i=Bi(i.nextSibling)}function _l(){Er=kr=null,Nt=!1}function dm(i){ls===null?ls=[i]:ls.push(i)}var iS=q.ReactCurrentBatchConfig;function eu(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var f=c.stateNode}if(!f)throw Error(n(147,i));var g=f,w=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(T){var L=g.refs;T===null?delete L[w]:L[w]=T},a._stringRef=w,a)}if(typeof i!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,i))}return i}function fh(i,a){throw i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Qv(i){var a=i._init;return a(i._payload)}function Zv(i){function a(K,B){if(i){var Q=K.deletions;Q===null?(K.deletions=[B],K.flags|=16):Q.push(B)}}function c(K,B){if(!i)return null;for(;B!==null;)a(K,B),B=B.sibling;return null}function f(K,B){for(K=new Map;B!==null;)B.key!==null?K.set(B.key,B):K.set(B.index,B),B=B.sibling;return K}function g(K,B){return K=eo(K,B),K.index=0,K.sibling=null,K}function w(K,B,Q){return K.index=Q,i?(Q=K.alternate,Q!==null?(Q=Q.index,Q<B?(K.flags|=2,B):Q):(K.flags|=2,B)):(K.flags|=1048576,B)}function T(K){return i&&K.alternate===null&&(K.flags|=2),K}function L(K,B,Q,le){return B===null||B.tag!==6?(B=ng(Q,K.mode,le),B.return=K,B):(B=g(B,Q),B.return=K,B)}function z(K,B,Q,le){var Te=Q.type;return Te===A?ie(K,B,Q.props.children,le,Q.key):B!==null&&(B.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ze&&Qv(Te)===B.type)?(le=g(B,Q.props),le.ref=eu(K,B,Q),le.return=K,le):(le=Mh(Q.type,Q.key,Q.props,null,K.mode,le),le.ref=eu(K,B,Q),le.return=K,le)}function Y(K,B,Q,le){return B===null||B.tag!==4||B.stateNode.containerInfo!==Q.containerInfo||B.stateNode.implementation!==Q.implementation?(B=rg(Q,K.mode,le),B.return=K,B):(B=g(B,Q.children||[]),B.return=K,B)}function ie(K,B,Q,le,Te){return B===null||B.tag!==7?(B=ma(Q,K.mode,le,Te),B.return=K,B):(B=g(B,Q),B.return=K,B)}function ae(K,B,Q){if(typeof B=="string"&&B!==""||typeof B=="number")return B=ng(""+B,K.mode,Q),B.return=K,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Z:return Q=Mh(B.type,B.key,B.props,null,K.mode,Q),Q.ref=eu(K,null,B),Q.return=K,Q;case G:return B=rg(B,K.mode,Q),B.return=K,B;case Ze:var le=B._init;return ae(K,le(B._payload),Q)}if(cn(B)||pe(B))return B=ma(B,K.mode,Q,null),B.return=K,B;fh(K,B)}return null}function se(K,B,Q,le){var Te=B!==null?B.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Te!==null?null:L(K,B,""+Q,le);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Z:return Q.key===Te?z(K,B,Q,le):null;case G:return Q.key===Te?Y(K,B,Q,le):null;case Ze:return Te=Q._init,se(K,B,Te(Q._payload),le)}if(cn(Q)||pe(Q))return Te!==null?null:ie(K,B,Q,le,null);fh(K,Q)}return null}function fe(K,B,Q,le,Te){if(typeof le=="string"&&le!==""||typeof le=="number")return K=K.get(Q)||null,L(B,K,""+le,Te);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case Z:return K=K.get(le.key===null?Q:le.key)||null,z(B,K,le,Te);case G:return K=K.get(le.key===null?Q:le.key)||null,Y(B,K,le,Te);case Ze:var je=le._init;return fe(K,B,Q,je(le._payload),Te)}if(cn(le)||pe(le))return K=K.get(Q)||null,ie(B,K,le,Te,null);fh(B,le)}return null}function _e(K,B,Q,le){for(var Te=null,je=null,De=B,ze=B=0,fn=null;De!==null&&ze<Q.length;ze++){De.index>ze?(fn=De,De=null):fn=De.sibling;var lt=se(K,De,Q[ze],le);if(lt===null){De===null&&(De=fn);break}i&&De&&lt.alternate===null&&a(K,De),B=w(lt,B,ze),je===null?Te=lt:je.sibling=lt,je=lt,De=fn}if(ze===Q.length)return c(K,De),Nt&&aa(K,ze),Te;if(De===null){for(;ze<Q.length;ze++)De=ae(K,Q[ze],le),De!==null&&(B=w(De,B,ze),je===null?Te=De:je.sibling=De,je=De);return Nt&&aa(K,ze),Te}for(De=f(K,De);ze<Q.length;ze++)fn=fe(De,K,ze,Q[ze],le),fn!==null&&(i&&fn.alternate!==null&&De.delete(fn.key===null?ze:fn.key),B=w(fn,B,ze),je===null?Te=fn:je.sibling=fn,je=fn);return i&&De.forEach(function(to){return a(K,to)}),Nt&&aa(K,ze),Te}function ke(K,B,Q,le){var Te=pe(Q);if(typeof Te!="function")throw Error(n(150));if(Q=Te.call(Q),Q==null)throw Error(n(151));for(var je=Te=null,De=B,ze=B=0,fn=null,lt=Q.next();De!==null&&!lt.done;ze++,lt=Q.next()){De.index>ze?(fn=De,De=null):fn=De.sibling;var to=se(K,De,lt.value,le);if(to===null){De===null&&(De=fn);break}i&&De&&to.alternate===null&&a(K,De),B=w(to,B,ze),je===null?Te=to:je.sibling=to,je=to,De=fn}if(lt.done)return c(K,De),Nt&&aa(K,ze),Te;if(De===null){for(;!lt.done;ze++,lt=Q.next())lt=ae(K,lt.value,le),lt!==null&&(B=w(lt,B,ze),je===null?Te=lt:je.sibling=lt,je=lt);return Nt&&aa(K,ze),Te}for(De=f(K,De);!lt.done;ze++,lt=Q.next())lt=fe(De,K,ze,lt.value,le),lt!==null&&(i&&lt.alternate!==null&&De.delete(lt.key===null?ze:lt.key),B=w(lt,B,ze),je===null?Te=lt:je.sibling=lt,je=lt);return i&&De.forEach(function(VS){return a(K,VS)}),Nt&&aa(K,ze),Te}function Wt(K,B,Q,le){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Z:e:{for(var Te=Q.key,je=B;je!==null;){if(je.key===Te){if(Te=Q.type,Te===A){if(je.tag===7){c(K,je.sibling),B=g(je,Q.props.children),B.return=K,K=B;break e}}else if(je.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ze&&Qv(Te)===je.type){c(K,je.sibling),B=g(je,Q.props),B.ref=eu(K,je,Q),B.return=K,K=B;break e}c(K,je);break}else a(K,je);je=je.sibling}Q.type===A?(B=ma(Q.props.children,K.mode,le,Q.key),B.return=K,K=B):(le=Mh(Q.type,Q.key,Q.props,null,K.mode,le),le.ref=eu(K,B,Q),le.return=K,K=le)}return T(K);case G:e:{for(je=Q.key;B!==null;){if(B.key===je)if(B.tag===4&&B.stateNode.containerInfo===Q.containerInfo&&B.stateNode.implementation===Q.implementation){c(K,B.sibling),B=g(B,Q.children||[]),B.return=K,K=B;break e}else{c(K,B);break}else a(K,B);B=B.sibling}B=rg(Q,K.mode,le),B.return=K,K=B}return T(K);case Ze:return je=Q._init,Wt(K,B,je(Q._payload),le)}if(cn(Q))return _e(K,B,Q,le);if(pe(Q))return ke(K,B,Q,le);fh(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,B!==null&&B.tag===6?(c(K,B.sibling),B=g(B,Q),B.return=K,K=B):(c(K,B),B=ng(Q,K.mode,le),B.return=K,K=B),T(K)):c(K,B)}return Wt}var wl=Zv(!0),Yv=Zv(!1),ph=Wi(null),mh=null,bl=null,hm=null;function fm(){hm=bl=mh=null}function pm(i){var a=ph.current;Tt(ph),i._currentValue=a}function mm(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function xl(i,a){mh=i,hm=bl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(cr=!0),i.firstContext=null)}function Fr(i){var a=i._currentValue;if(hm!==i)if(i={context:i,memoizedValue:a,next:null},bl===null){if(mh===null)throw Error(n(308));bl=i,mh.dependencies={lanes:0,firstContext:i}}else bl=bl.next=i;return a}var la=null;function gm(i){la===null?la=[i]:la.push(i)}function Jv(i,a,c,f){var g=a.interleaved;return g===null?(c.next=c,gm(a)):(c.next=g.next,g.next=c),a.interleaved=c,si(i,f)}function si(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Ki=!1;function ym(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xv(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ii(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Gi(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(at&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,si(i,c)}return g=f.interleaved,g===null?(a.next=a,gm(f)):(a.next=g.next,g.next=a),f.interleaved=a,si(i,c)}function gh(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Mi(i,c)}}function e_(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var T={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?g=w=T:w=w.next=T,c=c.next}while(c!==null);w===null?g=w=a:w=w.next=a}else g=w=a;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function yh(i,a,c,f){var g=i.updateQueue;Ki=!1;var w=g.firstBaseUpdate,T=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var z=L,Y=z.next;z.next=null,T===null?w=Y:T.next=Y,T=z;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,L=ie.lastBaseUpdate,L!==T&&(L===null?ie.firstBaseUpdate=Y:L.next=Y,ie.lastBaseUpdate=z))}if(w!==null){var ae=g.baseState;T=0,ie=Y=z=null,L=w;do{var se=L.lane,fe=L.eventTime;if((f&se)===se){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var _e=i,ke=L;switch(se=a,fe=c,ke.tag){case 1:if(_e=ke.payload,typeof _e=="function"){ae=_e.call(fe,ae,se);break e}ae=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=ke.payload,se=typeof _e=="function"?_e.call(fe,ae,se):_e,se==null)break e;ae=de({},ae,se);break e;case 2:Ki=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,se=g.effects,se===null?g.effects=[L]:se.push(L))}else fe={eventTime:fe,lane:se,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ie===null?(Y=ie=fe,z=ae):ie=ie.next=fe,T|=se;if(L=L.next,L===null){if(L=g.shared.pending,L===null)break;se=L,L=se.next,se.next=null,g.lastBaseUpdate=se,g.shared.pending=null}}while(!0);if(ie===null&&(z=ae),g.baseState=z,g.firstBaseUpdate=Y,g.lastBaseUpdate=ie,a=g.shared.interleaved,a!==null){g=a;do T|=g.lane,g=g.next;while(g!==a)}else w===null&&(g.shared.lanes=0);da|=T,i.lanes=T,i.memoizedState=ae}}function t_(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],g=f.callback;if(g!==null){if(f.callback=null,f=c,typeof g!="function")throw Error(n(191,g));g.call(f)}}}var tu={},Ps=Wi(tu),nu=Wi(tu),ru=Wi(tu);function ca(i){if(i===tu)throw Error(n(174));return i}function vm(i,a){switch(bt(ru,a),bt(nu,i),bt(Ps,tu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:_t(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=_t(a,i)}Tt(Ps),bt(Ps,a)}function kl(){Tt(Ps),Tt(nu),Tt(ru)}function n_(i){ca(ru.current);var a=ca(Ps.current),c=_t(a,i.type);a!==c&&(bt(nu,i),bt(Ps,c))}function _m(i){nu.current===i&&(Tt(Ps),Tt(nu))}var Ot=Wi(0);function vh(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var wm=[];function bm(){for(var i=0;i<wm.length;i++)wm[i]._workInProgressVersionPrimary=null;wm.length=0}var _h=q.ReactCurrentDispatcher,xm=q.ReactCurrentBatchConfig,ua=0,Lt=null,nn=null,dn=null,wh=!1,su=!1,iu=0,oS=0;function Dn(){throw Error(n(321))}function km(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!as(i[c],a[c]))return!1;return!0}function Em(i,a,c,f,g,w){if(ua=w,Lt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,_h.current=i===null||i.memoizedState===null?uS:dS,i=c(f,g),su){w=0;do{if(su=!1,iu=0,25<=w)throw Error(n(301));w+=1,dn=nn=null,a.updateQueue=null,_h.current=hS,i=c(f,g)}while(su)}if(_h.current=kh,a=nn!==null&&nn.next!==null,ua=0,dn=nn=Lt=null,wh=!1,a)throw Error(n(300));return i}function Tm(){var i=iu!==0;return iu=0,i}function js(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Lt.memoizedState=dn=i:dn=dn.next=i,dn}function zr(){if(nn===null){var i=Lt.alternate;i=i!==null?i.memoizedState:null}else i=nn.next;var a=dn===null?Lt.memoizedState:dn.next;if(a!==null)dn=a,nn=i;else{if(i===null)throw Error(n(310));nn=i,i={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},dn===null?Lt.memoizedState=dn=i:dn=dn.next=i}return dn}function ou(i,a){return typeof a=="function"?a(i):a}function Im(i){var a=zr(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var f=nn,g=f.baseQueue,w=c.pending;if(w!==null){if(g!==null){var T=g.next;g.next=w.next,w.next=T}f.baseQueue=g=w,c.pending=null}if(g!==null){w=g.next,f=f.baseState;var L=T=null,z=null,Y=w;do{var ie=Y.lane;if((ua&ie)===ie)z!==null&&(z=z.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),f=Y.hasEagerState?Y.eagerState:i(f,Y.action);else{var ae={lane:ie,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};z===null?(L=z=ae,T=f):z=z.next=ae,Lt.lanes|=ie,da|=ie}Y=Y.next}while(Y!==null&&Y!==w);z===null?T=f:z.next=L,as(f,a.memoizedState)||(cr=!0),a.memoizedState=f,a.baseState=T,a.baseQueue=z,c.lastRenderedState=f}if(i=c.interleaved,i!==null){g=i;do w=g.lane,Lt.lanes|=w,da|=w,g=g.next;while(g!==i)}else g===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Sm(i){var a=zr(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,w=a.memoizedState;if(g!==null){c.pending=null;var T=g=g.next;do w=i(w,T.action),T=T.next;while(T!==g);as(w,a.memoizedState)||(cr=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),c.lastRenderedState=w}return[w,f]}function r_(){}function s_(i,a){var c=Lt,f=zr(),g=a(),w=!as(f.memoizedState,g);if(w&&(f.memoizedState=g,cr=!0),f=f.queue,Cm(a_.bind(null,c,f,i),[i]),f.getSnapshot!==a||w||dn!==null&&dn.memoizedState.tag&1){if(c.flags|=2048,au(9,o_.bind(null,c,f,g,a),void 0,null),hn===null)throw Error(n(349));(ua&30)!==0||i_(c,a,g)}return g}function i_(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Lt.updateQueue,a===null?(a={lastEffect:null,stores:null},Lt.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function o_(i,a,c,f){a.value=c,a.getSnapshot=f,l_(a)&&c_(i)}function a_(i,a,c){return c(function(){l_(a)&&c_(i)})}function l_(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!as(i,c)}catch{return!0}}function c_(i){var a=si(i,1);a!==null&&hs(a,i,1,-1)}function u_(i){var a=js();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:i},a.queue=i,i=i.dispatch=cS.bind(null,Lt,i),[a.memoizedState,i]}function au(i,a,c,f){return i={tag:i,create:a,destroy:c,deps:f,next:null},a=Lt.updateQueue,a===null?(a={lastEffect:null,stores:null},Lt.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i)),i}function d_(){return zr().memoizedState}function bh(i,a,c,f){var g=js();Lt.flags|=i,g.memoizedState=au(1|a,c,void 0,f===void 0?null:f)}function xh(i,a,c,f){var g=zr();f=f===void 0?null:f;var w=void 0;if(nn!==null){var T=nn.memoizedState;if(w=T.destroy,f!==null&&km(f,T.deps)){g.memoizedState=au(a,c,w,f);return}}Lt.flags|=i,g.memoizedState=au(1|a,c,w,f)}function h_(i,a){return bh(8390656,8,i,a)}function Cm(i,a){return xh(2048,8,i,a)}function f_(i,a){return xh(4,2,i,a)}function p_(i,a){return xh(4,4,i,a)}function m_(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function g_(i,a,c){return c=c!=null?c.concat([i]):null,xh(4,4,m_.bind(null,a,i),c)}function Am(){}function y_(i,a){var c=zr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&km(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function v_(i,a){var c=zr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&km(a,f[1])?f[0]:(i=i(),c.memoizedState=[i,a],i)}function __(i,a,c){return(ua&21)===0?(i.baseState&&(i.baseState=!1,cr=!0),i.memoizedState=c):(as(c,a)||(c=Xo(),Lt.lanes|=c,da|=c,i.baseState=!0),a)}function aS(i,a){var c=Je;Je=c!==0&&4>c?c:4,i(!0);var f=xm.transition;xm.transition={};try{i(!1),a()}finally{Je=c,xm.transition=f}}function w_(){return zr().memoizedState}function lS(i,a,c){var f=Ji(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},b_(i))x_(a,c);else if(c=Jv(i,a,c,f),c!==null){var g=Kn();hs(c,i,f,g),k_(c,a,f)}}function cS(i,a,c){var f=Ji(i),g={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(b_(i))x_(a,g);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var T=a.lastRenderedState,L=w(T,c);if(g.hasEagerState=!0,g.eagerState=L,as(L,T)){var z=a.interleaved;z===null?(g.next=g,gm(a)):(g.next=z.next,z.next=g),a.interleaved=g;return}}catch{}finally{}c=Jv(i,a,g,f),c!==null&&(g=Kn(),hs(c,i,f,g),k_(c,a,f))}}function b_(i){var a=i.alternate;return i===Lt||a!==null&&a===Lt}function x_(i,a){su=wh=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function k_(i,a,c){if((c&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Mi(i,c)}}var kh={readContext:Fr,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useInsertionEffect:Dn,useLayoutEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useMutableSource:Dn,useSyncExternalStore:Dn,useId:Dn,unstable_isNewReconciler:!1},uS={readContext:Fr,useCallback:function(i,a){return js().memoizedState=[i,a===void 0?null:a],i},useContext:Fr,useEffect:h_,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,bh(4194308,4,m_.bind(null,a,i),c)},useLayoutEffect:function(i,a){return bh(4194308,4,i,a)},useInsertionEffect:function(i,a){return bh(4,2,i,a)},useMemo:function(i,a){var c=js();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var f=js();return a=c!==void 0?c(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=lS.bind(null,Lt,i),[f.memoizedState,i]},useRef:function(i){var a=js();return i={current:i},a.memoizedState=i},useState:u_,useDebugValue:Am,useDeferredValue:function(i){return js().memoizedState=i},useTransition:function(){var i=u_(!1),a=i[0];return i=aS.bind(null,i[1]),js().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var f=Lt,g=js();if(Nt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=a(),hn===null)throw Error(n(349));(ua&30)!==0||i_(f,a,c)}g.memoizedState=c;var w={value:c,getSnapshot:a};return g.queue=w,h_(a_.bind(null,f,w,i),[i]),f.flags|=2048,au(9,o_.bind(null,f,w,c,a),void 0,null),c},useId:function(){var i=js(),a=hn.identifierPrefix;if(Nt){var c=ri,f=ni;c=(f&~(1<<32-Wn(f)-1)).toString(32)+c,a=":"+a+"R"+c,c=iu++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=oS++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},dS={readContext:Fr,useCallback:y_,useContext:Fr,useEffect:Cm,useImperativeHandle:g_,useInsertionEffect:f_,useLayoutEffect:p_,useMemo:v_,useReducer:Im,useRef:d_,useState:function(){return Im(ou)},useDebugValue:Am,useDeferredValue:function(i){var a=zr();return __(a,nn.memoizedState,i)},useTransition:function(){var i=Im(ou)[0],a=zr().memoizedState;return[i,a]},useMutableSource:r_,useSyncExternalStore:s_,useId:w_,unstable_isNewReconciler:!1},hS={readContext:Fr,useCallback:y_,useContext:Fr,useEffect:Cm,useImperativeHandle:g_,useInsertionEffect:f_,useLayoutEffect:p_,useMemo:v_,useReducer:Sm,useRef:d_,useState:function(){return Sm(ou)},useDebugValue:Am,useDeferredValue:function(i){var a=zr();return nn===null?a.memoizedState=i:__(a,nn.memoizedState,i)},useTransition:function(){var i=Sm(ou)[0],a=zr().memoizedState;return[i,a]},useMutableSource:r_,useSyncExternalStore:s_,useId:w_,unstable_isNewReconciler:!1};function cs(i,a){if(i&&i.defaultProps){a=de({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function Nm(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:de({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Eh={isMounted:function(i){return(i=i._reactInternals)?es(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var f=Kn(),g=Ji(i),w=ii(f,g);w.payload=a,c!=null&&(w.callback=c),a=Gi(i,w,g),a!==null&&(hs(a,i,g,f),gh(a,i,g))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=Kn(),g=Ji(i),w=ii(f,g);w.tag=1,w.payload=a,c!=null&&(w.callback=c),a=Gi(i,w,g),a!==null&&(hs(a,i,g,f),gh(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Kn(),f=Ji(i),g=ii(c,f);g.tag=2,a!=null&&(g.callback=a),a=Gi(i,g,f),a!==null&&(hs(a,i,f,c),gh(a,i,f))}};function E_(i,a,c,f,g,w,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,w,T):a.prototype&&a.prototype.isPureReactComponent?!Kc(c,f)||!Kc(g,w):!0}function T_(i,a,c){var f=!1,g=qi,w=a.contextType;return typeof w=="object"&&w!==null?w=Fr(w):(g=lr(a)?ia:jn.current,f=a.contextTypes,w=(f=f!=null)?gl(i,g):qi),a=new a(c,w),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Eh,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=w),a}function I_(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&Eh.enqueueReplaceState(a,a.state,null)}function Rm(i,a,c,f){var g=i.stateNode;g.props=c,g.state=i.memoizedState,g.refs={},ym(i);var w=a.contextType;typeof w=="object"&&w!==null?g.context=Fr(w):(w=lr(a)?ia:jn.current,g.context=gl(i,w)),g.state=i.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(Nm(i,a,w,c),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&Eh.enqueueReplaceState(g,g.state,null),yh(i,c,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function El(i,a){try{var c="",f=a;do c+=Oe(f),f=f.return;while(f);var g=c}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:a,stack:g,digest:null}}function Pm(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function jm(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var fS=typeof WeakMap=="function"?WeakMap:Map;function S_(i,a,c){c=ii(-1,c),c.tag=3,c.payload={element:null};var f=a.value;return c.callback=function(){Rh||(Rh=!0,Gm=f),jm(i,a)},c}function C_(i,a,c){c=ii(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;c.payload=function(){return f(g)},c.callback=function(){jm(i,a)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){jm(i,a),typeof f!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),c}function A_(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new fS;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(c)||(g.add(c),i=SS.bind(null,i,a,c),a.then(i,i))}function N_(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function R_(i,a,c,f,g){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=ii(-1,1),a.tag=2,Gi(c,a,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var pS=q.ReactCurrentOwner,cr=!1;function Hn(i,a,c,f){a.child=i===null?Yv(a,null,c,f):wl(a,i.child,c,f)}function P_(i,a,c,f,g){c=c.render;var w=a.ref;return xl(a,g),f=Em(i,a,c,f,w,g),c=Tm(),i!==null&&!cr?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,oi(i,a,g)):(Nt&&c&&am(a),a.flags|=1,Hn(i,a,f,g),a.child)}function j_(i,a,c,f,g){if(i===null){var w=c.type;return typeof w=="function"&&!tg(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=w,D_(i,a,w,f,g)):(i=Mh(c.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(w=i.child,(i.lanes&g)===0){var T=w.memoizedProps;if(c=c.compare,c=c!==null?c:Kc,c(T,f)&&i.ref===a.ref)return oi(i,a,g)}return a.flags|=1,i=eo(w,f),i.ref=a.ref,i.return=a,a.child=i}function D_(i,a,c,f,g){if(i!==null){var w=i.memoizedProps;if(Kc(w,f)&&i.ref===a.ref)if(cr=!1,a.pendingProps=f=w,(i.lanes&g)!==0)(i.flags&131072)!==0&&(cr=!0);else return a.lanes=i.lanes,oi(i,a,g)}return Dm(i,a,c,f,g)}function O_(i,a,c){var f=a.pendingProps,g=f.children,w=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(Il,Tr),Tr|=c;else{if((c&1073741824)===0)return i=w!==null?w.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,bt(Il,Tr),Tr|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:c,bt(Il,Tr),Tr|=f}else w!==null?(f=w.baseLanes|c,a.memoizedState=null):f=c,bt(Il,Tr),Tr|=f;return Hn(i,a,g,c),a.child}function L_(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Dm(i,a,c,f,g){var w=lr(c)?ia:jn.current;return w=gl(a,w),xl(a,g),c=Em(i,a,c,f,w,g),f=Tm(),i!==null&&!cr?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,oi(i,a,g)):(Nt&&f&&am(a),a.flags|=1,Hn(i,a,c,g),a.child)}function M_(i,a,c,f,g){if(lr(c)){var w=!0;lh(a)}else w=!1;if(xl(a,g),a.stateNode===null)Ih(i,a),T_(a,c,f),Rm(a,c,f,g),f=!0;else if(i===null){var T=a.stateNode,L=a.memoizedProps;T.props=L;var z=T.context,Y=c.contextType;typeof Y=="object"&&Y!==null?Y=Fr(Y):(Y=lr(c)?ia:jn.current,Y=gl(a,Y));var ie=c.getDerivedStateFromProps,ae=typeof ie=="function"||typeof T.getSnapshotBeforeUpdate=="function";ae||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==f||z!==Y)&&I_(a,T,f,Y),Ki=!1;var se=a.memoizedState;T.state=se,yh(a,f,T,g),z=a.memoizedState,L!==f||se!==z||ar.current||Ki?(typeof ie=="function"&&(Nm(a,c,ie,f),z=a.memoizedState),(L=Ki||E_(a,c,L,f,se,z,Y))?(ae||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=z),T.props=f,T.state=z,T.context=Y,f=L):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{T=a.stateNode,Xv(i,a),L=a.memoizedProps,Y=a.type===a.elementType?L:cs(a.type,L),T.props=Y,ae=a.pendingProps,se=T.context,z=c.contextType,typeof z=="object"&&z!==null?z=Fr(z):(z=lr(c)?ia:jn.current,z=gl(a,z));var fe=c.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==ae||se!==z)&&I_(a,T,f,z),Ki=!1,se=a.memoizedState,T.state=se,yh(a,f,T,g);var _e=a.memoizedState;L!==ae||se!==_e||ar.current||Ki?(typeof fe=="function"&&(Nm(a,c,fe,f),_e=a.memoizedState),(Y=Ki||E_(a,c,Y,f,se,_e,z)||!1)?(ie||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,_e,z),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,_e,z)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=_e),T.props=f,T.state=_e,T.context=z,f=Y):(typeof T.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=1024),f=!1)}return Om(i,a,c,f,w,g)}function Om(i,a,c,f,g,w){L_(i,a);var T=(a.flags&128)!==0;if(!f&&!T)return g&&$v(a,c,!1),oi(i,a,w);f=a.stateNode,pS.current=a;var L=T&&typeof c.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&T?(a.child=wl(a,i.child,null,w),a.child=wl(a,null,L,w)):Hn(i,a,L,w),a.memoizedState=f.state,g&&$v(a,c,!0),a.child}function V_(i){var a=i.stateNode;a.pendingContext?zv(i,a.pendingContext,a.pendingContext!==a.context):a.context&&zv(i,a.context,!1),vm(i,a.containerInfo)}function F_(i,a,c,f,g){return _l(),dm(g),a.flags|=256,Hn(i,a,c,f),a.child}var Lm={dehydrated:null,treeContext:null,retryLane:0};function Mm(i){return{baseLanes:i,cachePool:null,transitions:null}}function z_(i,a,c){var f=a.pendingProps,g=Ot.current,w=!1,T=(a.flags&128)!==0,L;if((L=T)||(L=i!==null&&i.memoizedState===null?!1:(g&2)!==0),L?(w=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),bt(Ot,g&1),i===null)return um(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(T=f.children,i=f.fallback,w?(f=a.mode,w=a.child,T={mode:"hidden",children:T},(f&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=T):w=Vh(T,f,0,null),i=ma(i,f,c,null),w.return=a,i.return=a,w.sibling=i,a.child=w,a.child.memoizedState=Mm(c),a.memoizedState=Lm,i):Vm(a,T));if(g=i.memoizedState,g!==null&&(L=g.dehydrated,L!==null))return mS(i,a,T,f,L,g,c);if(w){w=f.fallback,T=a.mode,g=i.child,L=g.sibling;var z={mode:"hidden",children:f.children};return(T&1)===0&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=z,a.deletions=null):(f=eo(g,z),f.subtreeFlags=g.subtreeFlags&14680064),L!==null?w=eo(L,w):(w=ma(w,T,c,null),w.flags|=2),w.return=a,f.return=a,f.sibling=w,a.child=f,f=w,w=a.child,T=i.child.memoizedState,T=T===null?Mm(c):{baseLanes:T.baseLanes|c,cachePool:null,transitions:T.transitions},w.memoizedState=T,w.childLanes=i.childLanes&~c,a.memoizedState=Lm,f}return w=i.child,i=w.sibling,f=eo(w,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=c),f.return=a,f.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=f,a.memoizedState=null,f}function Vm(i,a){return a=Vh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Th(i,a,c,f){return f!==null&&dm(f),wl(a,i.child,null,c),i=Vm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function mS(i,a,c,f,g,w,T){if(c)return a.flags&256?(a.flags&=-257,f=Pm(Error(n(422))),Th(i,a,T,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(w=f.fallback,g=a.mode,f=Vh({mode:"visible",children:f.children},g,0,null),w=ma(w,g,T,null),w.flags|=2,f.return=a,w.return=a,f.sibling=w,a.child=f,(a.mode&1)!==0&&wl(a,i.child,null,T),a.child.memoizedState=Mm(T),a.memoizedState=Lm,w);if((a.mode&1)===0)return Th(i,a,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var L=f.dgst;return f=L,w=Error(n(419)),f=Pm(w,f,void 0),Th(i,a,T,f)}if(L=(T&i.childLanes)!==0,cr||L){if(f=hn,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|T))!==0?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,si(i,g),hs(f,i,g,-1))}return eg(),f=Pm(Error(n(421))),Th(i,a,T,f)}return g.data==="$?"?(a.flags|=128,a.child=i.child,a=CS.bind(null,i),g._reactRetry=a,null):(i=w.treeContext,Er=Bi(g.nextSibling),kr=a,Nt=!0,ls=null,i!==null&&(Mr[Vr++]=ni,Mr[Vr++]=ri,Mr[Vr++]=oa,ni=i.id,ri=i.overflow,oa=a),a=Vm(a,f.children),a.flags|=4096,a)}function U_(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),mm(i.return,a,c)}function Fm(i,a,c,f,g){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=c,w.tailMode=g)}function $_(i,a,c){var f=a.pendingProps,g=f.revealOrder,w=f.tail;if(Hn(i,a,f.children,c),f=Ot.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&U_(i,c,a);else if(i.tag===19)U_(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(bt(Ot,f),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&vh(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Fm(a,!1,g,c,w);break;case"backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&vh(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Fm(a,!0,c,null,w);break;case"together":Fm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ih(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function oi(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),da|=a.lanes,(c&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,c=eo(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=eo(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function gS(i,a,c){switch(a.tag){case 3:V_(a),_l();break;case 5:n_(a);break;case 1:lr(a.type)&&lh(a);break;case 4:vm(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,g=a.memoizedProps.value;bt(ph,f._currentValue),f._currentValue=g;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(bt(Ot,Ot.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?z_(i,a,c):(bt(Ot,Ot.current&1),i=oi(i,a,c),i!==null?i.sibling:null);bt(Ot,Ot.current&1);break;case 19:if(f=(c&a.childLanes)!==0,(i.flags&128)!==0){if(f)return $_(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),bt(Ot,Ot.current),f)break;return null;case 22:case 23:return a.lanes=0,O_(i,a,c)}return oi(i,a,c)}var B_,zm,W_,q_;B_=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},zm=function(){},W_=function(i,a,c,f){var g=i.memoizedProps;if(g!==f){i=a.stateNode,ca(Ps.current);var w=null;switch(c){case"input":g=wn(i,g),f=wn(i,f),w=[];break;case"select":g=de({},g,{value:void 0}),f=de({},f,{value:void 0}),w=[];break;case"textarea":g=ks(i,g),f=ks(i,f),w=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=ih)}Ni(c,f);var T;c=null;for(Y in g)if(!f.hasOwnProperty(Y)&&g.hasOwnProperty(Y)&&g[Y]!=null)if(Y==="style"){var L=g[Y];for(T in L)L.hasOwnProperty(T)&&(c||(c={}),c[T]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?w||(w=[]):(w=w||[]).push(Y,null));for(Y in f){var z=f[Y];if(L=g!=null?g[Y]:void 0,f.hasOwnProperty(Y)&&z!==L&&(z!=null||L!=null))if(Y==="style")if(L){for(T in L)!L.hasOwnProperty(T)||z&&z.hasOwnProperty(T)||(c||(c={}),c[T]="");for(T in z)z.hasOwnProperty(T)&&L[T]!==z[T]&&(c||(c={}),c[T]=z[T])}else c||(w||(w=[]),w.push(Y,c)),c=z;else Y==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,L=L?L.__html:void 0,z!=null&&L!==z&&(w=w||[]).push(Y,z)):Y==="children"?typeof z!="string"&&typeof z!="number"||(w=w||[]).push(Y,""+z):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(z!=null&&Y==="onScroll"&&Et("scroll",i),w||L===z||(w=[])):(w=w||[]).push(Y,z))}c&&(w=w||[]).push("style",c);var Y=w;(a.updateQueue=Y)&&(a.flags|=4)}},q_=function(i,a,c,f){c!==f&&(a.flags|=4)};function lu(i,a){if(!Nt)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function On(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function yS(i,a,c){var f=a.pendingProps;switch(lm(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(a),null;case 1:return lr(a.type)&&ah(),On(a),null;case 3:return f=a.stateNode,kl(),Tt(ar),Tt(jn),bm(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(hh(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ls!==null&&(Ym(ls),ls=null))),zm(i,a),On(a),null;case 5:_m(a);var g=ca(ru.current);if(c=a.type,i!==null&&a.stateNode!=null)W_(i,a,c,f,g),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(n(166));return On(a),null}if(i=ca(Ps.current),hh(a)){f=a.stateNode,c=a.type;var w=a.memoizedProps;switch(f[Rs]=a,f[Jc]=w,i=(a.mode&1)!==0,c){case"dialog":Et("cancel",f),Et("close",f);break;case"iframe":case"object":case"embed":Et("load",f);break;case"video":case"audio":for(g=0;g<Qc.length;g++)Et(Qc[g],f);break;case"source":Et("error",f);break;case"img":case"image":case"link":Et("error",f),Et("load",f);break;case"details":Et("toggle",f);break;case"input":yr(f,w),Et("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},Et("invalid",f);break;case"textarea":Hs(f,w),Et("invalid",f)}Ni(c,w),g=null;for(var T in w)if(w.hasOwnProperty(T)){var L=w[T];T==="children"?typeof L=="string"?f.textContent!==L&&(w.suppressHydrationWarning!==!0&&sh(f.textContent,L,i),g=["children",L]):typeof L=="number"&&f.textContent!==""+L&&(w.suppressHydrationWarning!==!0&&sh(f.textContent,L,i),g=["children",""+L]):s.hasOwnProperty(T)&&L!=null&&T==="onScroll"&&Et("scroll",f)}switch(c){case"input":st(f),Bo(f,w,!0);break;case"textarea":st(f),Wo(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=ih)}f=g,a.updateQueue=f,f!==null&&(a.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Bt(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=T.createElement(c,{is:f.is}):(i=T.createElement(c),c==="select"&&(T=i,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):i=T.createElementNS(i,c),i[Rs]=a,i[Jc]=f,B_(i,a,!1,!1),a.stateNode=i;e:{switch(T=Ko(c,f),c){case"dialog":Et("cancel",i),Et("close",i),g=f;break;case"iframe":case"object":case"embed":Et("load",i),g=f;break;case"video":case"audio":for(g=0;g<Qc.length;g++)Et(Qc[g],i);g=f;break;case"source":Et("error",i),g=f;break;case"img":case"image":case"link":Et("error",i),Et("load",i),g=f;break;case"details":Et("toggle",i),g=f;break;case"input":yr(i,f),g=wn(i,f),Et("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=de({},f,{value:void 0}),Et("invalid",i);break;case"textarea":Hs(i,f),g=ks(i,f),Et("invalid",i);break;default:g=f}Ni(c,g),L=g;for(w in L)if(L.hasOwnProperty(w)){var z=L[w];w==="style"?Ho(i,z):w==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Yr(i,z)):w==="children"?typeof z=="string"?(c!=="textarea"||z!=="")&&Jr(i,z):typeof z=="number"&&Jr(i,""+z):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?z!=null&&w==="onScroll"&&Et("scroll",i):z!=null&&M(i,w,z,T))}switch(c){case"input":st(i),Bo(i,f,!1);break;case"textarea":st(i),Wo(i);break;case"option":f.value!=null&&i.setAttribute("value",""+$e(f.value));break;case"select":i.multiple=!!f.multiple,w=f.value,w!=null?nr(i,!!f.multiple,w,!1):f.defaultValue!=null&&nr(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=ih)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return On(a),null;case 6:if(i&&a.stateNode!=null)q_(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(n(166));if(c=ca(ru.current),ca(Ps.current),hh(a)){if(f=a.stateNode,c=a.memoizedProps,f[Rs]=a,(w=f.nodeValue!==c)&&(i=kr,i!==null))switch(i.tag){case 3:sh(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&sh(f.nodeValue,c,(i.mode&1)!==0)}w&&(a.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Rs]=a,a.stateNode=f}return On(a),null;case 13:if(Tt(Ot),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Nt&&Er!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Gv(),_l(),a.flags|=98560,w=!1;else if(w=hh(a),f!==null&&f.dehydrated!==null){if(i===null){if(!w)throw Error(n(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[Rs]=a}else _l(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;On(a),w=!1}else ls!==null&&(Ym(ls),ls=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(Ot.current&1)!==0?rn===0&&(rn=3):eg())),a.updateQueue!==null&&(a.flags|=4),On(a),null);case 4:return kl(),zm(i,a),i===null&&Zc(a.stateNode.containerInfo),On(a),null;case 10:return pm(a.type._context),On(a),null;case 17:return lr(a.type)&&ah(),On(a),null;case 19:if(Tt(Ot),w=a.memoizedState,w===null)return On(a),null;if(f=(a.flags&128)!==0,T=w.rendering,T===null)if(f)lu(w,!1);else{if(rn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(T=vh(i),T!==null){for(a.flags|=128,lu(w,!1),f=T.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=c,c=a.child;c!==null;)w=c,i=f,w.flags&=14680066,T=w.alternate,T===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=T.childLanes,w.lanes=T.lanes,w.child=T.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=T.memoizedProps,w.memoizedState=T.memoizedState,w.updateQueue=T.updateQueue,w.type=T.type,i=T.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return bt(Ot,Ot.current&1|2),a.child}i=i.sibling}w.tail!==null&&wt()>Sl&&(a.flags|=128,f=!0,lu(w,!1),a.lanes=4194304)}else{if(!f)if(i=vh(T),i!==null){if(a.flags|=128,f=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),lu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!T.alternate&&!Nt)return On(a),null}else 2*wt()-w.renderingStartTime>Sl&&c!==1073741824&&(a.flags|=128,f=!0,lu(w,!1),a.lanes=4194304);w.isBackwards?(T.sibling=a.child,a.child=T):(c=w.last,c!==null?c.sibling=T:a.child=T,w.last=T)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=wt(),a.sibling=null,c=Ot.current,bt(Ot,f?c&1|2:c&1),a):(On(a),null);case 22:case 23:return Xm(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(Tr&1073741824)!==0&&(On(a),a.subtreeFlags&6&&(a.flags|=8192)):On(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function vS(i,a){switch(lm(a),a.tag){case 1:return lr(a.type)&&ah(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return kl(),Tt(ar),Tt(jn),bm(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return _m(a),null;case 13:if(Tt(Ot),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));_l()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Tt(Ot),null;case 4:return kl(),null;case 10:return pm(a.type._context),null;case 22:case 23:return Xm(),null;case 24:return null;default:return null}}var Sh=!1,Ln=!1,_S=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Tl(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Ut(i,a,f)}else c.current=null}function Um(i,a,c){try{c()}catch(f){Ut(i,a,f)}}var H_=!1;function wS(i,a){if(Xp=zi,i=Ev(),qp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var T=0,L=-1,z=-1,Y=0,ie=0,ae=i,se=null;t:for(;;){for(var fe;ae!==c||g!==0&&ae.nodeType!==3||(L=T+g),ae!==w||f!==0&&ae.nodeType!==3||(z=T+f),ae.nodeType===3&&(T+=ae.nodeValue.length),(fe=ae.firstChild)!==null;)se=ae,ae=fe;for(;;){if(ae===i)break t;if(se===c&&++Y===g&&(L=T),se===w&&++ie===f&&(z=T),(fe=ae.nextSibling)!==null)break;ae=se,se=ae.parentNode}ae=fe}c=L===-1||z===-1?null:{start:L,end:z}}else c=null}c=c||{start:0,end:0}}else c=null;for(em={focusedElem:i,selectionRange:c},zi=!1,ve=a;ve!==null;)if(a=ve,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ve=i;else for(;ve!==null;){a=ve;try{var _e=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var ke=_e.memoizedProps,Wt=_e.memoizedState,K=a.stateNode,B=K.getSnapshotBeforeUpdate(a.elementType===a.type?ke:cs(a.type,ke),Wt);K.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var Q=a.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(le){Ut(a,a.return,le)}if(i=a.sibling,i!==null){i.return=a.return,ve=i;break}ve=a.return}return _e=H_,H_=!1,_e}function cu(i,a,c){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var w=g.destroy;g.destroy=void 0,w!==void 0&&Um(a,c,w)}g=g.next}while(g!==f)}}function Ch(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==a)}}function $m(i){var a=i.ref;if(a!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof a=="function"?a(i):a.current=i}}function K_(i){var a=i.alternate;a!==null&&(i.alternate=null,K_(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Rs],delete a[Jc],delete a[sm],delete a[nS],delete a[rS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function G_(i){return i.tag===5||i.tag===3||i.tag===4}function Q_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||G_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Bm(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=ih));else if(f!==4&&(i=i.child,i!==null))for(Bm(i,a,c),i=i.sibling;i!==null;)Bm(i,a,c),i=i.sibling}function Wm(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Wm(i,a,c),i=i.sibling;i!==null;)Wm(i,a,c),i=i.sibling}var En=null,us=!1;function Qi(i,a,c){for(c=c.child;c!==null;)Z_(i,a,c),c=c.sibling}function Z_(i,a,c){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(Yo,c)}catch{}switch(c.tag){case 5:Ln||Tl(c,a);case 6:var f=En,g=us;En=null,Qi(i,a,c),En=f,us=g,En!==null&&(us?(i=En,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):En.removeChild(c.stateNode));break;case 18:En!==null&&(us?(i=En,c=c.stateNode,i.nodeType===8?rm(i.parentNode,c):i.nodeType===1&&rm(i,c),is(i)):rm(En,c.stateNode));break;case 4:f=En,g=us,En=c.stateNode.containerInfo,us=!0,Qi(i,a,c),En=f,us=g;break;case 0:case 11:case 14:case 15:if(!Ln&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var w=g,T=w.destroy;w=w.tag,T!==void 0&&((w&2)!==0||(w&4)!==0)&&Um(c,a,T),g=g.next}while(g!==f)}Qi(i,a,c);break;case 1:if(!Ln&&(Tl(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(L){Ut(c,a,L)}Qi(i,a,c);break;case 21:Qi(i,a,c);break;case 22:c.mode&1?(Ln=(f=Ln)||c.memoizedState!==null,Qi(i,a,c),Ln=f):Qi(i,a,c);break;default:Qi(i,a,c)}}function Y_(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new _S),a.forEach(function(f){var g=AS.bind(null,i,f);c.has(f)||(c.add(f),f.then(g,g))})}}function ds(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];try{var w=i,T=a,L=T;e:for(;L!==null;){switch(L.tag){case 5:En=L.stateNode,us=!1;break e;case 3:En=L.stateNode.containerInfo,us=!0;break e;case 4:En=L.stateNode.containerInfo,us=!0;break e}L=L.return}if(En===null)throw Error(n(160));Z_(w,T,g),En=null,us=!1;var z=g.alternate;z!==null&&(z.return=null),g.return=null}catch(Y){Ut(g,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)J_(a,i),a=a.sibling}function J_(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ds(a,i),Ds(i),f&4){try{cu(3,i,i.return),Ch(3,i)}catch(ke){Ut(i,i.return,ke)}try{cu(5,i,i.return)}catch(ke){Ut(i,i.return,ke)}}break;case 1:ds(a,i),Ds(i),f&512&&c!==null&&Tl(c,c.return);break;case 5:if(ds(a,i),Ds(i),f&512&&c!==null&&Tl(c,c.return),i.flags&32){var g=i.stateNode;try{Jr(g,"")}catch(ke){Ut(i,i.return,ke)}}if(f&4&&(g=i.stateNode,g!=null)){var w=i.memoizedProps,T=c!==null?c.memoizedProps:w,L=i.type,z=i.updateQueue;if(i.updateQueue=null,z!==null)try{L==="input"&&w.type==="radio"&&w.name!=null&&Rr(g,w),Ko(L,T);var Y=Ko(L,w);for(T=0;T<z.length;T+=2){var ie=z[T],ae=z[T+1];ie==="style"?Ho(g,ae):ie==="dangerouslySetInnerHTML"?Yr(g,ae):ie==="children"?Jr(g,ae):M(g,ie,ae,Y)}switch(L){case"input":Ai(g,w);break;case"textarea":Ks(g,w);break;case"select":var se=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var fe=w.value;fe!=null?nr(g,!!w.multiple,fe,!1):se!==!!w.multiple&&(w.defaultValue!=null?nr(g,!!w.multiple,w.defaultValue,!0):nr(g,!!w.multiple,w.multiple?[]:"",!1))}g[Jc]=w}catch(ke){Ut(i,i.return,ke)}}break;case 6:if(ds(a,i),Ds(i),f&4){if(i.stateNode===null)throw Error(n(162));g=i.stateNode,w=i.memoizedProps;try{g.nodeValue=w}catch(ke){Ut(i,i.return,ke)}}break;case 3:if(ds(a,i),Ds(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{is(a.containerInfo)}catch(ke){Ut(i,i.return,ke)}break;case 4:ds(a,i),Ds(i);break;case 13:ds(a,i),Ds(i),g=i.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||(Km=wt())),f&4&&Y_(i);break;case 22:if(ie=c!==null&&c.memoizedState!==null,i.mode&1?(Ln=(Y=Ln)||ie,ds(a,i),Ln=Y):ds(a,i),Ds(i),f&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ie&&(i.mode&1)!==0)for(ve=i,ie=i.child;ie!==null;){for(ae=ve=ie;ve!==null;){switch(se=ve,fe=se.child,se.tag){case 0:case 11:case 14:case 15:cu(4,se,se.return);break;case 1:Tl(se,se.return);var _e=se.stateNode;if(typeof _e.componentWillUnmount=="function"){f=se,c=se.return;try{a=f,_e.props=a.memoizedProps,_e.state=a.memoizedState,_e.componentWillUnmount()}catch(ke){Ut(f,c,ke)}}break;case 5:Tl(se,se.return);break;case 22:if(se.memoizedState!==null){tw(ae);continue}}fe!==null?(fe.return=se,ve=fe):tw(ae)}ie=ie.sibling}e:for(ie=null,ae=i;;){if(ae.tag===5){if(ie===null){ie=ae;try{g=ae.stateNode,Y?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(L=ae.stateNode,z=ae.memoizedProps.style,T=z!=null&&z.hasOwnProperty("display")?z.display:null,L.style.display=qo("display",T))}catch(ke){Ut(i,i.return,ke)}}}else if(ae.tag===6){if(ie===null)try{ae.stateNode.nodeValue=Y?"":ae.memoizedProps}catch(ke){Ut(i,i.return,ke)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===i)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===i)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===i)break e;ie===ae&&(ie=null),ae=ae.return}ie===ae&&(ie=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:ds(a,i),Ds(i),f&4&&Y_(i);break;case 21:break;default:ds(a,i),Ds(i)}}function Ds(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(G_(c)){var f=c;break e}c=c.return}throw Error(n(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Jr(g,""),f.flags&=-33);var w=Q_(i);Wm(i,w,g);break;case 3:case 4:var T=f.stateNode.containerInfo,L=Q_(i);Bm(i,L,T);break;default:throw Error(n(161))}}catch(z){Ut(i,i.return,z)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function bS(i,a,c){ve=i,X_(i)}function X_(i,a,c){for(var f=(i.mode&1)!==0;ve!==null;){var g=ve,w=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||Sh;if(!T){var L=g.alternate,z=L!==null&&L.memoizedState!==null||Ln;L=Sh;var Y=Ln;if(Sh=T,(Ln=z)&&!Y)for(ve=g;ve!==null;)T=ve,z=T.child,T.tag===22&&T.memoizedState!==null?nw(g):z!==null?(z.return=T,ve=z):nw(g);for(;w!==null;)ve=w,X_(w),w=w.sibling;ve=g,Sh=L,Ln=Y}ew(i)}else(g.subtreeFlags&8772)!==0&&w!==null?(w.return=g,ve=w):ew(i)}}function ew(i){for(;ve!==null;){var a=ve;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Ln||Ch(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!Ln)if(c===null)f.componentDidMount();else{var g=a.elementType===a.type?c.memoizedProps:cs(a.type,c.memoizedProps);f.componentDidUpdate(g,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&t_(a,w,f);break;case 3:var T=a.updateQueue;if(T!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}t_(a,T,c)}break;case 5:var L=a.stateNode;if(c===null&&a.flags&4){c=L;var z=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&c.focus();break;case"img":z.src&&(c.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var ie=Y.memoizedState;if(ie!==null){var ae=ie.dehydrated;ae!==null&&is(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ln||a.flags&512&&$m(a)}catch(se){Ut(a,a.return,se)}}if(a===i){ve=null;break}if(c=a.sibling,c!==null){c.return=a.return,ve=c;break}ve=a.return}}function tw(i){for(;ve!==null;){var a=ve;if(a===i){ve=null;break}var c=a.sibling;if(c!==null){c.return=a.return,ve=c;break}ve=a.return}}function nw(i){for(;ve!==null;){var a=ve;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Ch(4,a)}catch(z){Ut(a,c,z)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(z){Ut(a,g,z)}}var w=a.return;try{$m(a)}catch(z){Ut(a,w,z)}break;case 5:var T=a.return;try{$m(a)}catch(z){Ut(a,T,z)}}}catch(z){Ut(a,a.return,z)}if(a===i){ve=null;break}var L=a.sibling;if(L!==null){L.return=a.return,ve=L;break}ve=a.return}}var xS=Math.ceil,Ah=q.ReactCurrentDispatcher,qm=q.ReactCurrentOwner,Ur=q.ReactCurrentBatchConfig,at=0,hn=null,Yt=null,Tn=0,Tr=0,Il=Wi(0),rn=0,uu=null,da=0,Nh=0,Hm=0,du=null,ur=null,Km=0,Sl=1/0,ai=null,Rh=!1,Gm=null,Zi=null,Ph=!1,Yi=null,jh=0,hu=0,Qm=null,Dh=-1,Oh=0;function Kn(){return(at&6)!==0?wt():Dh!==-1?Dh:Dh=wt()}function Ji(i){return(i.mode&1)===0?1:(at&2)!==0&&Tn!==0?Tn&-Tn:iS.transition!==null?(Oh===0&&(Oh=Xo()),Oh):(i=Je,i!==0||(i=window.event,i=i===void 0?16:zc(i.type)),i)}function hs(i,a,c,f){if(50<hu)throw hu=0,Qm=null,Error(n(185));Li(i,c,f),((at&2)===0||i!==hn)&&(i===hn&&((at&2)===0&&(Nh|=c),rn===4&&Xi(i,Tn)),dr(i,f),c===1&&at===0&&(a.mode&1)===0&&(Sl=wt()+500,ch&&Hi()))}function dr(i,a){var c=i.callbackNode;Qs(i,a);var f=Jo(i,i===hn?Tn:0);if(f===0)c!==null&&Oc(c),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(c!=null&&Oc(c),a===1)i.tag===0?sS(sw.bind(null,i)):Bv(sw.bind(null,i)),eS(function(){(at&6)===0&&Hi()}),c=null;else{switch(Vi(f)){case 1:c=Zo;break;case 4:c=ji;break;case 16:c=Dr;break;case 536870912:c=Od;break;default:c=Dr}c=hw(c,rw.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function rw(i,a){if(Dh=-1,Oh=0,(at&6)!==0)throw Error(n(327));var c=i.callbackNode;if(Cl()&&i.callbackNode!==c)return null;var f=Jo(i,i===hn?Tn:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=Lh(i,f);else{a=f;var g=at;at|=2;var w=ow();(hn!==i||Tn!==a)&&(ai=null,Sl=wt()+500,fa(i,a));do try{TS();break}catch(L){iw(i,L)}while(!0);fm(),Ah.current=w,at=g,Yt!==null?a=0:(hn=null,Tn=0,a=rn)}if(a!==0){if(a===2&&(g=wr(i),g!==0&&(f=g,a=Zm(i,g))),a===1)throw c=uu,fa(i,0),Xi(i,f),dr(i,wt()),c;if(a===6)Xi(i,f);else{if(g=i.current.alternate,(f&30)===0&&!kS(g)&&(a=Lh(i,f),a===2&&(w=wr(i),w!==0&&(f=w,a=Zm(i,w))),a===1))throw c=uu,fa(i,0),Xi(i,f),dr(i,wt()),c;switch(i.finishedWork=g,i.finishedLanes=f,a){case 0:case 1:throw Error(n(345));case 2:pa(i,ur,ai);break;case 3:if(Xi(i,f),(f&130023424)===f&&(a=Km+500-wt(),10<a)){if(Jo(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Kn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=nm(pa.bind(null,i,ur,ai),a);break}pa(i,ur,ai);break;case 4:if(Xi(i,f),(f&4194240)===f)break;for(a=i.eventTimes,g=-1;0<f;){var T=31-Wn(f);w=1<<T,T=a[T],T>g&&(g=T),f&=~w}if(f=g,f=wt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*xS(f/1960))-f,10<f){i.timeoutHandle=nm(pa.bind(null,i,ur,ai),f);break}pa(i,ur,ai);break;case 5:pa(i,ur,ai);break;default:throw Error(n(329))}}}return dr(i,wt()),i.callbackNode===c?rw.bind(null,i):null}function Zm(i,a){var c=du;return i.current.memoizedState.isDehydrated&&(fa(i,a).flags|=256),i=Lh(i,a),i!==2&&(a=ur,ur=c,a!==null&&Ym(a)),i}function Ym(i){ur===null?ur=i:ur.push.apply(ur,i)}function kS(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var g=c[f],w=g.getSnapshot;g=g.value;try{if(!as(w(),g))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xi(i,a){for(a&=~Hm,a&=~Nh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-Wn(a),f=1<<c;i[c]=-1,a&=~f}}function sw(i){if((at&6)!==0)throw Error(n(327));Cl();var a=Jo(i,0);if((a&1)===0)return dr(i,wt()),null;var c=Lh(i,a);if(i.tag!==0&&c===2){var f=wr(i);f!==0&&(a=f,c=Zm(i,f))}if(c===1)throw c=uu,fa(i,0),Xi(i,a),dr(i,wt()),c;if(c===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,pa(i,ur,ai),dr(i,wt()),null}function Jm(i,a){var c=at;at|=1;try{return i(a)}finally{at=c,at===0&&(Sl=wt()+500,ch&&Hi())}}function ha(i){Yi!==null&&Yi.tag===0&&(at&6)===0&&Cl();var a=at;at|=1;var c=Ur.transition,f=Je;try{if(Ur.transition=null,Je=1,i)return i()}finally{Je=f,Ur.transition=c,at=a,(at&6)===0&&Hi()}}function Xm(){Tr=Il.current,Tt(Il)}function fa(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,XI(c)),Yt!==null)for(c=Yt.return;c!==null;){var f=c;switch(lm(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&ah();break;case 3:kl(),Tt(ar),Tt(jn),bm();break;case 5:_m(f);break;case 4:kl();break;case 13:Tt(Ot);break;case 19:Tt(Ot);break;case 10:pm(f.type._context);break;case 22:case 23:Xm()}c=c.return}if(hn=i,Yt=i=eo(i.current,null),Tn=Tr=a,rn=0,uu=null,Hm=Nh=da=0,ur=du=null,la!==null){for(a=0;a<la.length;a++)if(c=la[a],f=c.interleaved,f!==null){c.interleaved=null;var g=f.next,w=c.pending;if(w!==null){var T=w.next;w.next=g,f.next=T}c.pending=f}la=null}return i}function iw(i,a){do{var c=Yt;try{if(fm(),_h.current=kh,wh){for(var f=Lt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}wh=!1}if(ua=0,dn=nn=Lt=null,su=!1,iu=0,qm.current=null,c===null||c.return===null){rn=1,uu=a,Yt=null;break}e:{var w=i,T=c.return,L=c,z=a;if(a=Tn,L.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var Y=z,ie=L,ae=ie.tag;if((ie.mode&1)===0&&(ae===0||ae===11||ae===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=N_(T);if(fe!==null){fe.flags&=-257,R_(fe,T,L,w,a),fe.mode&1&&A_(w,Y,a),a=fe,z=Y;var _e=a.updateQueue;if(_e===null){var ke=new Set;ke.add(z),a.updateQueue=ke}else _e.add(z);break e}else{if((a&1)===0){A_(w,Y,a),eg();break e}z=Error(n(426))}}else if(Nt&&L.mode&1){var Wt=N_(T);if(Wt!==null){(Wt.flags&65536)===0&&(Wt.flags|=256),R_(Wt,T,L,w,a),dm(El(z,L));break e}}w=z=El(z,L),rn!==4&&(rn=2),du===null?du=[w]:du.push(w),w=T;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var K=S_(w,z,a);e_(w,K);break e;case 1:L=z;var B=w.type,Q=w.stateNode;if((w.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Zi===null||!Zi.has(Q)))){w.flags|=65536,a&=-a,w.lanes|=a;var le=C_(w,L,a);e_(w,le);break e}}w=w.return}while(w!==null)}lw(c)}catch(Te){a=Te,Yt===c&&c!==null&&(Yt=c=c.return);continue}break}while(!0)}function ow(){var i=Ah.current;return Ah.current=kh,i===null?kh:i}function eg(){(rn===0||rn===3||rn===2)&&(rn=4),hn===null||(da&268435455)===0&&(Nh&268435455)===0||Xi(hn,Tn)}function Lh(i,a){var c=at;at|=2;var f=ow();(hn!==i||Tn!==a)&&(ai=null,fa(i,a));do try{ES();break}catch(g){iw(i,g)}while(!0);if(fm(),at=c,Ah.current=f,Yt!==null)throw Error(n(261));return hn=null,Tn=0,rn}function ES(){for(;Yt!==null;)aw(Yt)}function TS(){for(;Yt!==null&&!jd();)aw(Yt)}function aw(i){var a=dw(i.alternate,i,Tr);i.memoizedProps=i.pendingProps,a===null?lw(i):Yt=a,qm.current=null}function lw(i){var a=i;do{var c=a.alternate;if(i=a.return,(a.flags&32768)===0){if(c=yS(c,a,Tr),c!==null){Yt=c;return}}else{if(c=vS(c,a),c!==null){c.flags&=32767,Yt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{rn=6,Yt=null;return}}if(a=a.sibling,a!==null){Yt=a;return}Yt=a=i}while(a!==null);rn===0&&(rn=5)}function pa(i,a,c){var f=Je,g=Ur.transition;try{Ur.transition=null,Je=1,IS(i,a,c,f)}finally{Ur.transition=g,Je=f}return null}function IS(i,a,c,f){do Cl();while(Yi!==null);if((at&6)!==0)throw Error(n(327));c=i.finishedWork;var g=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var w=c.lanes|c.childLanes;if(vt(i,w),i===hn&&(Yt=hn=null,Tn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Ph||(Ph=!0,hw(Dr,function(){return Cl(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=Ur.transition,Ur.transition=null;var T=Je;Je=1;var L=at;at|=4,qm.current=null,wS(i,c),J_(c,i),HI(em),zi=!!Xp,em=Xp=null,i.current=c,bS(c),Mp(),at=L,Je=T,Ur.transition=w}else i.current=c;if(Ph&&(Ph=!1,Yi=i,jh=g),w=i.pendingLanes,w===0&&(Zi=null),Ld(c.stateNode),dr(i,wt()),a!==null)for(f=i.onRecoverableError,c=0;c<a.length;c++)g=a[c],f(g.value,{componentStack:g.stack,digest:g.digest});if(Rh)throw Rh=!1,i=Gm,Gm=null,i;return(jh&1)!==0&&i.tag!==0&&Cl(),w=i.pendingLanes,(w&1)!==0?i===Qm?hu++:(hu=0,Qm=i):hu=0,Hi(),null}function Cl(){if(Yi!==null){var i=Vi(jh),a=Ur.transition,c=Je;try{if(Ur.transition=null,Je=16>i?16:i,Yi===null)var f=!1;else{if(i=Yi,Yi=null,jh=0,(at&6)!==0)throw Error(n(331));var g=at;for(at|=4,ve=i.current;ve!==null;){var w=ve,T=w.child;if((ve.flags&16)!==0){var L=w.deletions;if(L!==null){for(var z=0;z<L.length;z++){var Y=L[z];for(ve=Y;ve!==null;){var ie=ve;switch(ie.tag){case 0:case 11:case 15:cu(8,ie,w)}var ae=ie.child;if(ae!==null)ae.return=ie,ve=ae;else for(;ve!==null;){ie=ve;var se=ie.sibling,fe=ie.return;if(K_(ie),ie===Y){ve=null;break}if(se!==null){se.return=fe,ve=se;break}ve=fe}}}var _e=w.alternate;if(_e!==null){var ke=_e.child;if(ke!==null){_e.child=null;do{var Wt=ke.sibling;ke.sibling=null,ke=Wt}while(ke!==null)}}ve=w}}if((w.subtreeFlags&2064)!==0&&T!==null)T.return=w,ve=T;else e:for(;ve!==null;){if(w=ve,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:cu(9,w,w.return)}var K=w.sibling;if(K!==null){K.return=w.return,ve=K;break e}ve=w.return}}var B=i.current;for(ve=B;ve!==null;){T=ve;var Q=T.child;if((T.subtreeFlags&2064)!==0&&Q!==null)Q.return=T,ve=Q;else e:for(T=B;ve!==null;){if(L=ve,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:Ch(9,L)}}catch(Te){Ut(L,L.return,Te)}if(L===T){ve=null;break e}var le=L.sibling;if(le!==null){le.return=L.return,ve=le;break e}ve=L.return}}if(at=g,Hi(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(Yo,i)}catch{}f=!0}return f}finally{Je=c,Ur.transition=a}}return!1}function cw(i,a,c){a=El(c,a),a=S_(i,a,1),i=Gi(i,a,1),a=Kn(),i!==null&&(Li(i,1,a),dr(i,a))}function Ut(i,a,c){if(i.tag===3)cw(i,i,c);else for(;a!==null;){if(a.tag===3){cw(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Zi===null||!Zi.has(f))){i=El(c,i),i=C_(a,i,1),a=Gi(a,i,1),i=Kn(),a!==null&&(Li(a,1,i),dr(a,i));break}}a=a.return}}function SS(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),a=Kn(),i.pingedLanes|=i.suspendedLanes&c,hn===i&&(Tn&c)===c&&(rn===4||rn===3&&(Tn&130023424)===Tn&&500>wt()-Km?fa(i,0):Hm|=c),dr(i,a)}function uw(i,a){a===0&&((i.mode&1)===0?a=1:(a=Ya,Ya<<=1,(Ya&130023424)===0&&(Ya=4194304)));var c=Kn();i=si(i,a),i!==null&&(Li(i,a,c),dr(i,c))}function CS(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),uw(i,c)}function AS(i,a){var c=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(a),uw(i,c)}var dw;dw=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||ar.current)cr=!0;else{if((i.lanes&c)===0&&(a.flags&128)===0)return cr=!1,gS(i,a,c);cr=(i.flags&131072)!==0}else cr=!1,Nt&&(a.flags&1048576)!==0&&Wv(a,dh,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;Ih(i,a),i=a.pendingProps;var g=gl(a,jn.current);xl(a,c),g=Em(null,a,f,i,g,c);var w=Tm();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,lr(f)?(w=!0,lh(a)):w=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,ym(a),g.updater=Eh,a.stateNode=g,g._reactInternals=a,Rm(a,f,i,c),a=Om(null,a,f,!0,w,c)):(a.tag=0,Nt&&w&&am(a),Hn(null,a,g,c),a=a.child),a;case 16:f=a.elementType;e:{switch(Ih(i,a),i=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=RS(f),i=cs(f,i),g){case 0:a=Dm(null,a,f,i,c);break e;case 1:a=M_(null,a,f,i,c);break e;case 11:a=P_(null,a,f,i,c);break e;case 14:a=j_(null,a,f,cs(f.type,i),c);break e}throw Error(n(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:cs(f,g),Dm(i,a,f,g,c);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:cs(f,g),M_(i,a,f,g,c);case 3:e:{if(V_(a),i===null)throw Error(n(387));f=a.pendingProps,w=a.memoizedState,g=w.element,Xv(i,a),yh(a,f,null,c);var T=a.memoizedState;if(f=T.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){g=El(Error(n(423)),a),a=F_(i,a,f,c,g);break e}else if(f!==g){g=El(Error(n(424)),a),a=F_(i,a,f,c,g);break e}else for(Er=Bi(a.stateNode.containerInfo.firstChild),kr=a,Nt=!0,ls=null,c=Yv(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(_l(),f===g){a=oi(i,a,c);break e}Hn(i,a,f,c)}a=a.child}return a;case 5:return n_(a),i===null&&um(a),f=a.type,g=a.pendingProps,w=i!==null?i.memoizedProps:null,T=g.children,tm(f,g)?T=null:w!==null&&tm(f,w)&&(a.flags|=32),L_(i,a),Hn(i,a,T,c),a.child;case 6:return i===null&&um(a),null;case 13:return z_(i,a,c);case 4:return vm(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=wl(a,null,f,c):Hn(i,a,f,c),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:cs(f,g),P_(i,a,f,g,c);case 7:return Hn(i,a,a.pendingProps,c),a.child;case 8:return Hn(i,a,a.pendingProps.children,c),a.child;case 12:return Hn(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,w=a.memoizedProps,T=g.value,bt(ph,f._currentValue),f._currentValue=T,w!==null)if(as(w.value,T)){if(w.children===g.children&&!ar.current){a=oi(i,a,c);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var L=w.dependencies;if(L!==null){T=w.child;for(var z=L.firstContext;z!==null;){if(z.context===f){if(w.tag===1){z=ii(-1,c&-c),z.tag=2;var Y=w.updateQueue;if(Y!==null){Y=Y.shared;var ie=Y.pending;ie===null?z.next=z:(z.next=ie.next,ie.next=z),Y.pending=z}}w.lanes|=c,z=w.alternate,z!==null&&(z.lanes|=c),mm(w.return,c,a),L.lanes|=c;break}z=z.next}}else if(w.tag===10)T=w.type===a.type?null:w.child;else if(w.tag===18){if(T=w.return,T===null)throw Error(n(341));T.lanes|=c,L=T.alternate,L!==null&&(L.lanes|=c),mm(T,c,a),T=w.sibling}else T=w.child;if(T!==null)T.return=w;else for(T=w;T!==null;){if(T===a){T=null;break}if(w=T.sibling,w!==null){w.return=T.return,T=w;break}T=T.return}w=T}Hn(i,a,g.children,c),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,xl(a,c),g=Fr(g),f=f(g),a.flags|=1,Hn(i,a,f,c),a.child;case 14:return f=a.type,g=cs(f,a.pendingProps),g=cs(f.type,g),j_(i,a,f,g,c);case 15:return D_(i,a,a.type,a.pendingProps,c);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:cs(f,g),Ih(i,a),a.tag=1,lr(f)?(i=!0,lh(a)):i=!1,xl(a,c),T_(a,f,g),Rm(a,f,g,c),Om(null,a,f,!0,i,c);case 19:return $_(i,a,c);case 22:return O_(i,a,c)}throw Error(n(156,a.tag))};function hw(i,a){return Qa(i,a)}function NS(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(i,a,c,f){return new NS(i,a,c,f)}function tg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function RS(i){if(typeof i=="function")return tg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===V)return 11;if(i===rt)return 14}return 2}function eo(i,a){var c=i.alternate;return c===null?(c=$r(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Mh(i,a,c,f,g,w){var T=2;if(f=i,typeof i=="function")tg(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case A:return ma(c.children,g,w,a);case k:T=8,g|=8;break;case N:return i=$r(12,c,a,g|2),i.elementType=N,i.lanes=w,i;case j:return i=$r(13,c,a,g),i.elementType=j,i.lanes=w,i;case Ae:return i=$r(19,c,a,g),i.elementType=Ae,i.lanes=w,i;case Re:return Vh(c,g,w,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case P:T=10;break e;case D:T=9;break e;case V:T=11;break e;case rt:T=14;break e;case Ze:T=16,f=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return a=$r(T,c,a,g),a.elementType=i,a.type=f,a.lanes=w,a}function ma(i,a,c,f){return i=$r(7,i,f,a),i.lanes=c,i}function Vh(i,a,c,f){return i=$r(22,i,f,a),i.elementType=Re,i.lanes=c,i.stateNode={isHidden:!1},i}function ng(i,a,c){return i=$r(6,i,null,a),i.lanes=c,i}function rg(i,a,c){return a=$r(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function PS(i,a,c,f,g){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oi(0),this.expirationTimes=Oi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oi(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function sg(i,a,c,f,g,w,T,L,z){return i=new PS(i,a,c,L,z),a===1?(a=1,w===!0&&(a|=8)):a=0,w=$r(3,null,null,a),i.current=w,w.stateNode=i,w.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},ym(w),i}function jS(i,a,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:f==null?null:""+f,children:i,containerInfo:a,implementation:c}}function fw(i){if(!i)return qi;i=i._reactInternals;e:{if(es(i)!==i||i.tag!==1)throw Error(n(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(lr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(i.tag===1){var c=i.type;if(lr(c))return Uv(i,c,a)}return a}function pw(i,a,c,f,g,w,T,L,z){return i=sg(c,f,!0,i,g,w,T,L,z),i.context=fw(null),c=i.current,f=Kn(),g=Ji(c),w=ii(f,g),w.callback=a??null,Gi(c,w,g),i.current.lanes=g,Li(i,g,f),dr(i,f),i}function Fh(i,a,c,f){var g=a.current,w=Kn(),T=Ji(g);return c=fw(c),a.context===null?a.context=c:a.pendingContext=c,a=ii(w,T),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=Gi(g,a,T),i!==null&&(hs(i,g,T,w),gh(i,g,T)),T}function zh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function mw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function ig(i,a){mw(i,a),(i=i.alternate)&&mw(i,a)}function DS(){return null}var gw=typeof reportError=="function"?reportError:function(i){console.error(i)};function og(i){this._internalRoot=i}Uh.prototype.render=og.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));Fh(i,a,null,null)},Uh.prototype.unmount=og.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ha(function(){Fh(null,i,null,null)}),a[ei]=null}};function Uh(i){this._internalRoot=i}Uh.prototype.unstable_scheduleHydration=function(i){if(i){var a=Ud();i={blockedOn:null,target:i,priority:a};for(var c=0;c<Ss.length&&a!==0&&a<Ss[c].priority;c++);Ss.splice(c,0,i),c===0&&Wd(i)}};function ag(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function $h(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function yw(){}function OS(i,a,c,f,g){if(g){if(typeof f=="function"){var w=f;f=function(){var Y=zh(T);w.call(Y)}}var T=pw(a,f,i,0,null,!1,!1,"",yw);return i._reactRootContainer=T,i[ei]=T.current,Zc(i.nodeType===8?i.parentNode:i),ha(),T}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var L=f;f=function(){var Y=zh(z);L.call(Y)}}var z=sg(i,0,!1,null,null,!1,!1,"",yw);return i._reactRootContainer=z,i[ei]=z.current,Zc(i.nodeType===8?i.parentNode:i),ha(function(){Fh(a,z,c,f)}),z}function Bh(i,a,c,f,g){var w=c._reactRootContainer;if(w){var T=w;if(typeof g=="function"){var L=g;g=function(){var z=zh(T);L.call(z)}}Fh(a,T,i,g)}else T=OS(c,a,i,g,f);return zh(T)}Fd=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=Di(a.pendingLanes);c!==0&&(Mi(a,c|1),dr(a,wt()),(at&6)===0&&(Sl=wt()+500,Hi()))}break;case 13:ha(function(){var f=si(i,1);if(f!==null){var g=Kn();hs(f,i,1,g)}}),ig(i,1)}},Ja=function(i){if(i.tag===13){var a=si(i,134217728);if(a!==null){var c=Kn();hs(a,i,134217728,c)}ig(i,134217728)}},zd=function(i){if(i.tag===13){var a=Ji(i),c=si(i,a);if(c!==null){var f=Kn();hs(c,i,a,f)}ig(i,a)}},Ud=function(){return Je},$d=function(i,a){var c=Je;try{return Je=i,a()}finally{Je=c}},Pi=function(i,a,c){switch(a){case"input":if(Ai(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var g=oh(f);if(!g)throw Error(n(90));gt(f),Ai(f,g)}}}break;case"textarea":Ks(i,c);break;case"select":a=c.value,a!=null&&nr(i,!!c.multiple,a,!1)}},Kt=Jm,en=ha;var LS={usingClientEntryPoint:!1,Events:[Xc,pl,oh,Ct,sr,Jm]},fu={findFiberByHostInstance:sa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MS={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Dc(i),i===null?null:i.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||DS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wh.isDisabled&&Wh.supportsFiber)try{Yo=Wh.inject(MS),_r=Wh}catch{}}return hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LS,hr.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ag(a))throw Error(n(200));return jS(i,a,null,c)},hr.createRoot=function(i,a){if(!ag(i))throw Error(n(299));var c=!1,f="",g=gw;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=sg(i,1,!1,null,null,c,!1,f,g),i[ei]=a.current,Zc(i.nodeType===8?i.parentNode:i),new og(a)},hr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Dc(a),i=i===null?null:i.stateNode,i},hr.flushSync=function(i){return ha(i)},hr.hydrate=function(i,a,c){if(!$h(a))throw Error(n(200));return Bh(null,i,a,!0,c)},hr.hydrateRoot=function(i,a,c){if(!ag(i))throw Error(n(405));var f=c!=null&&c.hydratedSources||null,g=!1,w="",T=gw;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),a=pw(a,null,i,1,c??null,g,!1,w,T),i[ei]=a.current,Zc(i),f)for(i=0;i<f.length;i++)c=f[i],g=c._getVersion,g=g(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,g]:a.mutableSourceEagerHydrationData.push(c,g);return new Uh(a)},hr.render=function(i,a,c){if(!$h(a))throw Error(n(200));return Bh(null,i,a,!1,c)},hr.unmountComponentAtNode=function(i){if(!$h(i))throw Error(n(40));return i._reactRootContainer?(ha(function(){Bh(null,null,i,!1,function(){i._reactRootContainer=null,i[ei]=null})}),!0):!1},hr.unstable_batchedUpdates=Jm,hr.unstable_renderSubtreeIntoContainer=function(i,a,c,f){if(!$h(c))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Bh(i,a,c,!1,f)},hr.version="18.3.1-next-f1338f8080-20240426",hr}var Mw;function xk(){if(Mw)return dg.exports;Mw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),dg.exports=NC(),dg.exports}var Vw;function RC(){if(Vw)return Kh;Vw=1;var t=xk();return Kh.createRoot=t.createRoot,Kh.hydrateRoot=t.hydrateRoot,Kh}var PC=RC();const jC=dk(PC);var wo=xk();function DC(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Xf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pc(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Fy(t){return"nodeType"in t}function er(t){var e,n;return t?pc(t)?t:Fy(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function zy(t){const{Document:e}=er(t);return t instanceof e}function ad(t){return pc(t)?!1:t instanceof er(t).HTMLElement}function kk(t){return t instanceof er(t).SVGElement}function mc(t){return t?pc(t)?t.document:Fy(t)?zy(t)?t:ad(t)||kk(t)?t.ownerDocument:document:document:document}const vs=Xf?O.useLayoutEffect:O.useEffect;function ep(t){const e=O.useRef(t);return vs(()=>{e.current=t}),O.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function OC(){const t=O.useRef(null),e=O.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=O.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Mu(t,e){e===void 0&&(e=[t]);const n=O.useRef(t);return vs(()=>{n.current!==t&&(n.current=t)},e),n}function ld(t,e){const n=O.useRef();return O.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Cf(t){const e=ep(t),n=O.useRef(null),r=O.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Af(t){const e=O.useRef();return O.useEffect(()=>{e.current=t},[t]),e.current}let pg={};function cd(t,e){return O.useMemo(()=>{if(e)return e;const n=pg[t]==null?0:pg[t]+1;return pg[t]=n,t+"-"+n},[t,e])}function Ek(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,l)=>{const u=Object.entries(l);for(const[d,m]of u){const y=o[d];y!=null&&(o[d]=y+t*m)}return o},{...e})}}const Ml=Ek(1),Vu=Ek(-1);function LC(t){return"clientX"in t&&"clientY"in t}function tp(t){if(!t)return!1;const{KeyboardEvent:e}=er(t.target);return e&&t instanceof e}function MC(t){if(!t)return!1;const{TouchEvent:e}=er(t.target);return e&&t instanceof e}function Nf(t){if(MC(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return LC(t)?{x:t.clientX,y:t.clientY}:null}const Ws=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ws.Translate.toString(t),Ws.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Fw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function VC(t){return t.matches(Fw)?t:t.querySelector(Fw)}const FC={display:"none"};function zC(t){let{id:e,value:n}=t;return Me.createElement("div",{id:e,style:FC},n)}function UC(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Me.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function $C(){const[t,e]=O.useState("");return{announce:O.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Tk=O.createContext(null);function BC(t){const e=O.useContext(Tk);O.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function WC(){const[t]=O.useState(()=>new Set),e=O.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[O.useCallback(r=>{let{type:s,event:o}=r;t.forEach(l=>{var u;return(u=l[s])==null?void 0:u.call(l,o)})},[t]),e]}const qC={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},HC={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function KC(t){let{announcements:e=HC,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=qC}=t;const{announce:o,announcement:l}=$C(),u=cd("DndLiveRegion"),[d,m]=O.useState(!1);if(O.useEffect(()=>{m(!0)},[]),BC(O.useMemo(()=>({onDragStart(_){let{active:x}=_;o(e.onDragStart({active:x}))},onDragMove(_){let{active:x,over:E}=_;e.onDragMove&&o(e.onDragMove({active:x,over:E}))},onDragOver(_){let{active:x,over:E}=_;o(e.onDragOver({active:x,over:E}))},onDragEnd(_){let{active:x,over:E}=_;o(e.onDragEnd({active:x,over:E}))},onDragCancel(_){let{active:x,over:E}=_;o(e.onDragCancel({active:x,over:E}))}}),[o,e])),!d)return null;const y=Me.createElement(Me.Fragment,null,Me.createElement(zC,{id:r,value:s.draggable}),Me.createElement(UC,{id:u,announcement:l}));return n?wo.createPortal(y,n):y}var on;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(on||(on={}));function Rf(){}function Ao(t,e){return O.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function np(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const _s=Object.freeze({x:0,y:0});function Ik(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function GC(t,e){const n=Nf(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function Sk(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function QC(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function zw(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function Ck(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Uw(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const rp=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Uw(e,e.left,e.top),o=[];for(const l of r){const{id:u}=l,d=n.get(u);if(d){const m=Ik(Uw(d),s);o.push({id:u,data:{droppableContainer:l,value:m}})}}return o.sort(Sk)},ZC=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=zw(e),o=[];for(const l of r){const{id:u}=l,d=n.get(u);if(d){const m=zw(d),y=s.reduce((x,E,C)=>x+Ik(m[C],E),0),_=Number((y/4).toFixed(4));o.push({id:u,data:{droppableContainer:l,value:_}})}}return o.sort(Sk)};function YC(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),l=s-r,u=o-n;if(r<s&&n<o){const d=e.width*e.height,m=t.width*t.height,y=l*u,_=y/(d+m-y);return Number(_.toFixed(4))}return 0}const JC=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=YC(u,e);d>0&&s.push({id:l,data:{droppableContainer:o,value:d}})}}return s.sort(QC)};function XC(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Ak(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:_s}function eA(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((l,u)=>({...l,top:l.top+t*u.y,bottom:l.bottom+t*u.y,left:l.left+t*u.x,right:l.right+t*u.x}),{...n})}}const tA=eA(1);function Nk(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function nA(t,e,n){const r=Nk(e);if(!r)return t;const{scaleX:s,scaleY:o,x:l,y:u}=r,d=t.left-l-(1-s)*parseFloat(n),m=t.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),y=s?t.width/s:t.width,_=o?t.height/o:t.height;return{width:y,height:_,top:m,right:d+y,bottom:m+_,left:d}}const rA={ignoreTransform:!1};function gc(t,e){e===void 0&&(e=rA);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:y}=er(t).getComputedStyle(t);m&&(n=nA(n,m,y))}const{top:r,left:s,width:o,height:l,bottom:u,right:d}=n;return{top:r,left:s,width:o,height:l,bottom:u,right:d}}function $w(t){return gc(t,{ignoreTransform:!0})}function sA(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function iA(t,e){return e===void 0&&(e=er(t).getComputedStyle(t)),e.position==="fixed"}function oA(t,e){e===void 0&&(e=er(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=e[s];return typeof o=="string"?n.test(o):!1})}function sp(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(zy(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ad(s)||kk(s)||n.includes(s))return n;const o=er(t).getComputedStyle(s);return s!==t&&oA(s,o)&&n.push(s),iA(s,o)?n:r(s.parentNode)}return t?r(t):n}function Rk(t){const[e]=sp(t,1);return e??null}function mg(t){return!Xf||!t?null:pc(t)?t:Fy(t)?zy(t)||t===mc(t).scrollingElement?window:ad(t)?t:null:null}function Pk(t){return pc(t)?t.scrollX:t.scrollLeft}function jk(t){return pc(t)?t.scrollY:t.scrollTop}function Gg(t){return{x:Pk(t),y:jk(t)}}var gn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(gn||(gn={}));function Dk(t){return!Xf||!t?!1:t===document.scrollingElement}function Ok(t){const e={x:0,y:0},n=Dk(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,l=t.scrollTop>=r.y,u=t.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:l,isRight:u,maxScroll:r,minScroll:e}}const aA={x:.2,y:.2};function lA(t,e,n,r,s){let{top:o,left:l,right:u,bottom:d}=n;r===void 0&&(r=10),s===void 0&&(s=aA);const{isTop:m,isBottom:y,isLeft:_,isRight:x}=Ok(t),E={x:0,y:0},C={x:0,y:0},I={height:e.height*s.y,width:e.width*s.x};return!m&&o<=e.top+I.height?(E.y=gn.Backward,C.y=r*Math.abs((e.top+I.height-o)/I.height)):!y&&d>=e.bottom-I.height&&(E.y=gn.Forward,C.y=r*Math.abs((e.bottom-I.height-d)/I.height)),!x&&u>=e.right-I.width?(E.x=gn.Forward,C.x=r*Math.abs((e.right-I.width-u)/I.width)):!_&&l<=e.left+I.width&&(E.x=gn.Backward,C.x=r*Math.abs((e.left+I.width-l)/I.width)),{direction:E,speed:C}}function cA(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Lk(t){return t.reduce((e,n)=>Ml(e,Gg(n)),_s)}function uA(t){return t.reduce((e,n)=>e+Pk(n),0)}function dA(t){return t.reduce((e,n)=>e+jk(n),0)}function Mk(t,e){if(e===void 0&&(e=gc),!t)return;const{top:n,left:r,bottom:s,right:o}=e(t);Rk(t)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const hA=[["x",["left","right"],uA],["y",["top","bottom"],dA]];class Uy{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=sp(n),s=Lk(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,u]of hA)for(const d of l)Object.defineProperty(this,d,{get:()=>{const m=u(r),y=s[o]-m;return this.rect[d]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Iu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function fA(t){const{EventTarget:e}=er(t);return t instanceof e?t:mc(t)}function gg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var qr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(qr||(qr={}));function Bw(t){t.preventDefault()}function pA(t){t.stopPropagation()}var tt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(tt||(tt={}));const Vk={start:[tt.Space,tt.Enter],cancel:[tt.Esc],end:[tt.Space,tt.Enter,tt.Tab]},mA=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case tt.Right:return{...n,x:n.x+25};case tt.Left:return{...n,x:n.x-25};case tt.Down:return{...n,y:n.y+25};case tt.Up:return{...n,y:n.y-25}}};class ud{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Iu(mc(n)),this.windowListeners=new Iu(er(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(qr.Resize,this.handleCancel),this.windowListeners.add(qr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(qr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Mk(r),n(_s)}handleKeyDown(e){if(tp(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=Vk,coordinateGetter:l=mA,scrollBehavior:u="smooth"}=s,{code:d}=e;if(o.end.includes(d)){this.handleEnd(e);return}if(o.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:m}=r.current,y=m?{x:m.left,y:m.top}:_s;this.referenceCoordinates||(this.referenceCoordinates=y);const _=l(e,{active:n,context:r.current,currentCoordinates:y});if(_){const x=Vu(_,y),E={x:0,y:0},{scrollableAncestors:C}=r.current;for(const I of C){const R=e.code,{isTop:U,isRight:F,isLeft:M,isBottom:q,maxScroll:Z,minScroll:G}=Ok(I),A=cA(I),k={x:Math.min(R===tt.Right?A.right-A.width/2:A.right,Math.max(R===tt.Right?A.left:A.left+A.width/2,_.x)),y:Math.min(R===tt.Down?A.bottom-A.height/2:A.bottom,Math.max(R===tt.Down?A.top:A.top+A.height/2,_.y))},N=R===tt.Right&&!F||R===tt.Left&&!M,P=R===tt.Down&&!q||R===tt.Up&&!U;if(N&&k.x!==_.x){const D=I.scrollLeft+x.x,V=R===tt.Right&&D<=Z.x||R===tt.Left&&D>=G.x;if(V&&!x.y){I.scrollTo({left:D,behavior:u});return}V?E.x=I.scrollLeft-D:E.x=R===tt.Right?I.scrollLeft-Z.x:I.scrollLeft-G.x,E.x&&I.scrollBy({left:-E.x,behavior:u});break}else if(P&&k.y!==_.y){const D=I.scrollTop+x.y,V=R===tt.Down&&D<=Z.y||R===tt.Up&&D>=G.y;if(V&&!x.x){I.scrollTo({top:D,behavior:u});return}V?E.y=I.scrollTop-D:E.y=R===tt.Down?I.scrollTop-Z.y:I.scrollTop-G.y,E.y&&I.scrollBy({top:-E.y,behavior:u});break}}this.handleMove(e,Ml(Vu(_,this.referenceCoordinates),E))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ud.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Vk,onActivation:s}=e,{active:o}=n;const{code:l}=t.nativeEvent;if(r.start.includes(l)){const u=o.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Ww(t){return!!(t&&"distance"in t)}function qw(t){return!!(t&&"delay"in t)}class $y{constructor(e,n,r){var s;r===void 0&&(r=fA(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:l}=o;this.props=e,this.events=n,this.document=mc(l),this.documentListeners=new Iu(this.document),this.listeners=new Iu(r),this.windowListeners=new Iu(er(l)),this.initialCoordinates=(s=Nf(o))!=null?s:_s,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(qr.Resize,this.handleCancel),this.windowListeners.add(qr.DragStart,Bw),this.windowListeners.add(qr.VisibilityChange,this.handleCancel),this.windowListeners.add(qr.ContextMenu,Bw),this.documentListeners.add(qr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(qw(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ww(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(qr.Click,pA,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(qr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!s)return;const d=(n=Nf(e))!=null?n:_s,m=Vu(s,d);if(!r&&u){if(Ww(u)){if(u.tolerance!=null&&gg(m,u.tolerance))return this.handleCancel();if(gg(m,u.distance))return this.handleStart()}if(qw(u)&&gg(m,u.tolerance))return this.handleCancel();this.handlePending(u,m);return}e.cancelable&&e.preventDefault(),l(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===tt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const gA={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class yc extends $y{constructor(e){const{event:n}=e,r=mc(n.target);super(e,gA,r)}}yc.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const yA={move:{name:"mousemove"},end:{name:"mouseup"}};var Qg;(function(t){t[t.RightClick=2]="RightClick"})(Qg||(Qg={}));class vA extends $y{constructor(e){super(e,yA,mc(e.event.target))}}vA.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Qg.RightClick?!1:(r==null||r({event:n}),!0)}}];const yg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Fk extends $y{constructor(e){super(e,yg)}static setup(){return window.addEventListener(yg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(yg.move.name,e)};function e(){}}}Fk.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Su;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Su||(Su={}));var Pf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Pf||(Pf={}));function _A(t){let{acceleration:e,activator:n=Su.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:l=5,order:u=Pf.TreeOrder,pointerCoordinates:d,scrollableAncestors:m,scrollableAncestorRects:y,delta:_,threshold:x}=t;const E=bA({delta:_,disabled:!o}),[C,I]=OC(),R=O.useRef({x:0,y:0}),U=O.useRef({x:0,y:0}),F=O.useMemo(()=>{switch(n){case Su.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Su.DraggableRect:return s}},[n,s,d]),M=O.useRef(null),q=O.useCallback(()=>{const G=M.current;if(!G)return;const A=R.current.x*U.current.x,k=R.current.y*U.current.y;G.scrollBy(A,k)},[]),Z=O.useMemo(()=>u===Pf.TreeOrder?[...m].reverse():m,[u,m]);O.useEffect(()=>{if(!o||!m.length||!F){I();return}for(const G of Z){if((r==null?void 0:r(G))===!1)continue;const A=m.indexOf(G),k=y[A];if(!k)continue;const{direction:N,speed:P}=lA(G,k,F,e,x);for(const D of["x","y"])E[D][N[D]]||(P[D]=0,N[D]=0);if(P.x>0||P.y>0){I(),M.current=G,C(q,l),R.current=P,U.current=N;return}}R.current={x:0,y:0},U.current={x:0,y:0},I()},[e,q,r,I,o,l,JSON.stringify(F),JSON.stringify(E),C,m,Z,y,JSON.stringify(x)])}const wA={x:{[gn.Backward]:!1,[gn.Forward]:!1},y:{[gn.Backward]:!1,[gn.Forward]:!1}};function bA(t){let{delta:e,disabled:n}=t;const r=Af(e);return ld(s=>{if(n||!r||!s)return wA;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[gn.Backward]:s.x[gn.Backward]||o.x===-1,[gn.Forward]:s.x[gn.Forward]||o.x===1},y:{[gn.Backward]:s.y[gn.Backward]||o.y===-1,[gn.Forward]:s.y[gn.Forward]||o.y===1}}},[n,e,r])}function xA(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ld(s=>{var o;return e==null?null:(o=r??s)!=null?o:null},[r,e])}function kA(t,e){return O.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,r)}));return[...n,...o]},[]),[t,e])}var Fu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Fu||(Fu={}));var Zg;(function(t){t.Optimized="optimized"})(Zg||(Zg={}));const Hw=new Map;function EA(t,e){let{dragging:n,dependencies:r,config:s}=e;const[o,l]=O.useState(null),{frequency:u,measure:d,strategy:m}=s,y=O.useRef(t),_=R(),x=Mu(_),E=O.useCallback(function(U){U===void 0&&(U=[]),!x.current&&l(F=>F===null?U:F.concat(U.filter(M=>!F.includes(M))))},[x]),C=O.useRef(null),I=ld(U=>{if(_&&!n)return Hw;if(!U||U===Hw||y.current!==t||o!=null){const F=new Map;for(let M of t){if(!M)continue;if(o&&o.length>0&&!o.includes(M.id)&&M.rect.current){F.set(M.id,M.rect.current);continue}const q=M.node.current,Z=q?new Uy(d(q),q):null;M.rect.current=Z,Z&&F.set(M.id,Z)}return F}return U},[t,o,n,_,d]);return O.useEffect(()=>{y.current=t},[t]),O.useEffect(()=>{_||E()},[n,_]),O.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),O.useEffect(()=>{_||typeof u!="number"||C.current!==null||(C.current=setTimeout(()=>{E(),C.current=null},u))},[u,_,E,...r]),{droppableRects:I,measureDroppableContainers:E,measuringScheduled:o!=null};function R(){switch(m){case Fu.Always:return!1;case Fu.BeforeDragging:return n;default:return!n}}}function By(t,e){return ld(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function TA(t,e){return By(t,e)}function IA(t){let{callback:e,disabled:n}=t;const r=ep(e),s=O.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ip(t){let{callback:e,disabled:n}=t;const r=ep(e),s=O.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function SA(t){return new Uy(gc(t),t)}function Kw(t,e,n){e===void 0&&(e=SA);const[r,s]=O.useState(null);function o(){s(d=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=d??n)!=null?m:null}const y=e(t);return JSON.stringify(d)===JSON.stringify(y)?d:y})}const l=IA({callback(d){if(t)for(const m of d){const{type:y,target:_}=m;if(y==="childList"&&_ instanceof HTMLElement&&_.contains(t)){o();break}}}}),u=ip({callback:o});return vs(()=>{o(),t?(u==null||u.observe(t),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[t]),r}function CA(t){const e=By(t);return Ak(t,e)}const Gw=[];function AA(t){const e=O.useRef(t),n=ld(r=>t?r&&r!==Gw&&t&&e.current&&t.parentNode===e.current.parentNode?r:sp(t):Gw,[t]);return O.useEffect(()=>{e.current=t},[t]),n}function NA(t){const[e,n]=O.useState(null),r=O.useRef(t),s=O.useCallback(o=>{const l=mg(o.target);l&&n(u=>u?(u.set(l,Gg(l)),new Map(u)):null)},[]);return O.useEffect(()=>{const o=r.current;if(t!==o){l(o);const u=t.map(d=>{const m=mg(d);return m?(m.addEventListener("scroll",s,{passive:!0}),[m,Gg(m)]):null}).filter(d=>d!=null);n(u.length?new Map(u):null),r.current=t}return()=>{l(t),l(o)};function l(u){u.forEach(d=>{const m=mg(d);m==null||m.removeEventListener("scroll",s)})}},[s,t]),O.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,l)=>Ml(o,l),_s):Lk(t):_s,[t,e])}function Qw(t,e){e===void 0&&(e=[]);const n=O.useRef(null);return O.useEffect(()=>{n.current=null},e),O.useEffect(()=>{const r=t!==_s;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Vu(t,n.current):_s}function RA(t){O.useEffect(()=>{if(!Xf)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function PA(t,e){return O.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=l=>{o(l,e)},n},{}),[t,e])}function zk(t){return O.useMemo(()=>t?sA(t):null,[t])}const Zw=[];function jA(t,e){e===void 0&&(e=gc);const[n]=t,r=zk(n?er(n):null),[s,o]=O.useState(Zw);function l(){o(()=>t.length?t.map(d=>Dk(d)?r:new Uy(e(d),d)):Zw)}const u=ip({callback:l});return vs(()=>{u==null||u.disconnect(),l(),t.forEach(d=>u==null?void 0:u.observe(d))},[t]),s}function Uk(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ad(e)?e:t}function DA(t){let{measure:e}=t;const[n,r]=O.useState(null),s=O.useCallback(m=>{for(const{target:y}of m)if(ad(y)){r(_=>{const x=e(y);return _?{..._,width:x.width,height:x.height}:x});break}},[e]),o=ip({callback:s}),l=O.useCallback(m=>{const y=Uk(m);o==null||o.disconnect(),y&&(o==null||o.observe(y)),r(y?e(y):null)},[e,o]),[u,d]=Cf(l);return O.useMemo(()=>({nodeRef:u,rect:n,setRef:d}),[n,u,d])}const OA=[{sensor:yc,options:{}},{sensor:ud,options:{}}],LA={current:{}},hf={draggable:{measure:$w},droppable:{measure:$w,strategy:Fu.WhileDragging,frequency:Zg.Optimized},dragOverlay:{measure:gc}};class Cu extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const MA={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Cu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Rf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:hf,measureDroppableContainers:Rf,windowRect:null,measuringScheduled:!1},$k={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Rf,draggableNodes:new Map,over:null,measureDroppableContainers:Rf},dd=O.createContext($k),Bk=O.createContext(MA);function VA(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Cu}}}function FA(t,e){switch(e.type){case on.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case on.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case on.DragEnd:case on.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case on.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Cu(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case on.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const l=new Cu(t.droppable.containers);return l.set(n,{...o,disabled:s}),{...t,droppable:{...t.droppable,containers:l}}}case on.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Cu(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function zA(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=O.useContext(dd),o=Af(r),l=Af(n==null?void 0:n.id);return O.useEffect(()=>{if(!e&&!r&&o&&l!=null){if(!tp(o)||document.activeElement===o.target)return;const u=s.get(l);if(!u)return;const{activatorNode:d,node:m}=u;if(!d.current&&!m.current)return;requestAnimationFrame(()=>{for(const y of[d.current,m.current]){if(!y)continue;const _=VC(y);if(_){_.focus();break}}})}},[r,e,s,l,o]),null}function Wk(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,o)=>o({transform:s,...r}),n):n}function UA(t){return O.useMemo(()=>({draggable:{...hf.draggable,...t==null?void 0:t.draggable},droppable:{...hf.droppable,...t==null?void 0:t.droppable},dragOverlay:{...hf.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function $A(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const o=O.useRef(!1),{x:l,y:u}=typeof s=="boolean"?{x:s,y:s}:s;vs(()=>{if(!l&&!u||!e){o.current=!1;return}if(o.current||!r)return;const m=e==null?void 0:e.node.current;if(!m||m.isConnected===!1)return;const y=n(m),_=Ak(y,r);if(l||(_.x=0),u||(_.y=0),o.current=!0,Math.abs(_.x)>0||Math.abs(_.y)>0){const x=Rk(m);x&&x.scrollBy({top:_.y,left:_.x})}},[e,l,u,r,n])}const op=O.createContext({..._s,scaleX:1,scaleY:1});var oo;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(oo||(oo={}));const ap=O.memo(function(e){var n,r,s,o;let{id:l,accessibility:u,autoScroll:d=!0,children:m,sensors:y=OA,collisionDetection:_=JC,measuring:x,modifiers:E,...C}=e;const I=O.useReducer(FA,void 0,VA),[R,U]=I,[F,M]=WC(),[q,Z]=O.useState(oo.Uninitialized),G=q===oo.Initialized,{draggable:{active:A,nodes:k,translate:N},droppable:{containers:P}}=R,D=A!=null?k.get(A):null,V=O.useRef({initial:null,translated:null}),j=O.useMemo(()=>{var yt;return A!=null?{id:A,data:(yt=D==null?void 0:D.data)!=null?yt:LA,rect:V}:null},[A,D]),Ae=O.useRef(null),[rt,Ze]=O.useState(null),[Re,X]=O.useState(null),pe=Mu(C,Object.values(C)),de=cd("DndDescribedBy",l),W=O.useMemo(()=>P.getEnabled(),[P]),ee=UA(x),{droppableRects:ce,measureDroppableContainers:xe,measuringScheduled:Oe}=EA(W,{dragging:G,dependencies:[N.x,N.y],config:ee.droppable}),Pe=xA(k,A),Se=O.useMemo(()=>Re?Nf(Re):null,[Re]),$e=rr(),ne=TA(Pe,ee.draggable.measure);$A({activeNode:A!=null?k.get(A):null,config:$e.layoutShiftCompensation,initialRect:ne,measure:ee.draggable.measure});const he=Kw(Pe,ee.draggable.measure,ne),st=Kw(Pe?Pe.parentElement:null),gt=O.useRef({activatorEvent:null,active:null,activeNode:Pe,collisionRect:null,collisions:null,droppableRects:ce,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_n=P.getNodeFor((n=gt.current.over)==null?void 0:n.id),wn=DA({measure:ee.dragOverlay.measure}),yr=(r=wn.nodeRef.current)!=null?r:Pe,Rr=G?(s=wn.rect)!=null?s:he:null,Ai=!!(wn.nodeRef.current&&wn.rect),Bo=CA(Ai?null:he),xs=zk(yr?er(yr):null),cn=AA(G?_n??Pe:null),nr=jA(cn),ks=Wk(E,{transform:{x:N.x-Bo.x,y:N.y-Bo.y,scaleX:1,scaleY:1},activatorEvent:Re,active:j,activeNodeRect:he,containerNodeRect:st,draggingNodeRect:Rr,over:gt.current.over,overlayNodeRect:wn.rect,scrollableAncestors:cn,scrollableAncestorRects:nr,windowRect:xs}),Hs=Se?Ml(Se,N):null,Ks=NA(cn),Wo=Qw(Ks),Bt=Qw(Ks,[he]),_t=Ml(ks,Wo),Rn=Rr?tA(Rr,ks):null,Yr=j&&Rn?_({active:j,collisionRect:Rn,droppableRects:ce,droppableContainers:W,pointerCoordinates:Hs}):null,Jr=Ck(Yr,"id"),[Pn,Es]=O.useState(null),qo=Ai?ks:Ml(ks,Bt),Ho=XC(qo,(o=Pn==null?void 0:Pn.rect)!=null?o:null,he),Gs=O.useRef(null),Ni=O.useCallback((yt,Ht)=>{let{sensor:Ct,options:sr}=Ht;if(Ae.current==null)return;const Kt=k.get(Ae.current);if(!Kt)return;const en=yt.nativeEvent,Gt=new Ct({active:Ae.current,activeNode:Kt,event:en,options:sr,context:gt,onAbort(Ke){if(!k.get(Ke))return;const{onDragAbort:zt}=pe.current,bn={id:Ke};zt==null||zt(bn),F({type:"onDragAbort",event:bn})},onPending(Ke,Bn,zt,bn){if(!k.get(Ke))return;const{onDragPending:jr}=pe.current,Qt={id:Ke,constraint:Bn,initialCoordinates:zt,offset:bn};jr==null||jr(Qt),F({type:"onDragPending",event:Qt})},onStart(Ke){const Bn=Ae.current;if(Bn==null)return;const zt=k.get(Bn);if(!zt)return;const{onDragStart:bn}=pe.current,vr={activatorEvent:en,active:{id:Bn,data:zt.data,rect:V}};wo.unstable_batchedUpdates(()=>{bn==null||bn(vr),Z(oo.Initializing),U({type:on.DragStart,initialCoordinates:Ke,active:Bn}),F({type:"onDragStart",event:vr}),Ze(Gs.current),X(en)})},onMove(Ke){U({type:on.DragMove,coordinates:Ke})},onEnd:Pr(on.DragEnd),onCancel:Pr(on.DragCancel)});Gs.current=Gt;function Pr(Ke){return async function(){const{active:zt,collisions:bn,over:vr,scrollAdjustedTranslate:jr}=gt.current;let Qt=null;if(zt&&jr){const{cancelDrop:Xr}=pe.current;Qt={activatorEvent:en,active:zt,collisions:bn,delta:jr,over:vr},Ke===on.DragEnd&&typeof Xr=="function"&&await Promise.resolve(Xr(Qt))&&(Ke=on.DragCancel)}Ae.current=null,wo.unstable_batchedUpdates(()=>{U({type:Ke}),Z(oo.Uninitialized),Es(null),Ze(null),X(null),Gs.current=null;const Xr=Ke===on.DragEnd?"onDragEnd":"onDragCancel";if(Qt){const Go=pe.current[Xr];Go==null||Go(Qt),F({type:Xr,event:Qt})}})}}},[k]),Ko=O.useCallback((yt,Ht)=>(Ct,sr)=>{const Kt=Ct.nativeEvent,en=k.get(sr);if(Ae.current!==null||!en||Kt.dndKit||Kt.defaultPrevented)return;const Gt={active:en};yt(Ct,Ht.options,Gt)===!0&&(Kt.dndKit={capturedBy:Ht.sensor},Ae.current=sr,Ni(Ct,Ht))},[k,Ni]),Ts=kA(y,Ko);RA(y),vs(()=>{he&&q===oo.Initializing&&Z(oo.Initialized)},[he,q]),O.useEffect(()=>{const{onDragMove:yt}=pe.current,{active:Ht,activatorEvent:Ct,collisions:sr,over:Kt}=gt.current;if(!Ht||!Ct)return;const en={active:Ht,activatorEvent:Ct,collisions:sr,delta:{x:_t.x,y:_t.y},over:Kt};wo.unstable_batchedUpdates(()=>{yt==null||yt(en),F({type:"onDragMove",event:en})})},[_t.x,_t.y]),O.useEffect(()=>{const{active:yt,activatorEvent:Ht,collisions:Ct,droppableContainers:sr,scrollAdjustedTranslate:Kt}=gt.current;if(!yt||Ae.current==null||!Ht||!Kt)return;const{onDragOver:en}=pe.current,Gt=sr.get(Jr),Pr=Gt&&Gt.rect.current?{id:Gt.id,rect:Gt.rect.current,data:Gt.data,disabled:Gt.disabled}:null,Ke={active:yt,activatorEvent:Ht,collisions:Ct,delta:{x:Kt.x,y:Kt.y},over:Pr};wo.unstable_batchedUpdates(()=>{Es(Pr),en==null||en(Ke),F({type:"onDragOver",event:Ke})})},[Jr]),vs(()=>{gt.current={activatorEvent:Re,active:j,activeNode:Pe,collisionRect:Rn,collisions:Yr,droppableRects:ce,draggableNodes:k,draggingNode:yr,draggingNodeRect:Rr,droppableContainers:P,over:Pn,scrollableAncestors:cn,scrollAdjustedTranslate:_t},V.current={initial:Rr,translated:Rn}},[j,Pe,Yr,Rn,k,yr,Rr,ce,P,Pn,cn,_t]),_A({...$e,delta:N,draggingRect:Rn,pointerCoordinates:Hs,scrollableAncestors:cn,scrollableAncestorRects:nr});const Ri=O.useMemo(()=>({active:j,activeNode:Pe,activeNodeRect:he,activatorEvent:Re,collisions:Yr,containerNodeRect:st,dragOverlay:wn,draggableNodes:k,droppableContainers:P,droppableRects:ce,over:Pn,measureDroppableContainers:xe,scrollableAncestors:cn,scrollableAncestorRects:nr,measuringConfiguration:ee,measuringScheduled:Oe,windowRect:xs}),[j,Pe,he,Re,Yr,st,wn,k,P,ce,Pn,xe,cn,nr,ee,Oe,xs]),Pi=O.useMemo(()=>({activatorEvent:Re,activators:Ts,active:j,activeNodeRect:he,ariaDescribedById:{draggable:de},dispatch:U,draggableNodes:k,over:Pn,measureDroppableContainers:xe}),[Re,Ts,j,he,U,de,k,Pn,xe]);return Me.createElement(Tk.Provider,{value:M},Me.createElement(dd.Provider,{value:Pi},Me.createElement(Bk.Provider,{value:Ri},Me.createElement(op.Provider,{value:Ho},m)),Me.createElement(zA,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Me.createElement(KC,{...u,hiddenTextDescribedById:de}));function rr(){const yt=(rt==null?void 0:rt.autoScrollEnabled)===!1,Ht=typeof d=="object"?d.enabled===!1:d===!1,Ct=G&&!yt&&!Ht;return typeof d=="object"?{...d,enabled:Ct}:{enabled:Ct}}}),BA=O.createContext(null),Yw="button",WA="Draggable";function qA(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const o=cd(WA),{activators:l,activatorEvent:u,active:d,activeNodeRect:m,ariaDescribedById:y,draggableNodes:_,over:x}=O.useContext(dd),{role:E=Yw,roleDescription:C="draggable",tabIndex:I=0}=s??{},R=(d==null?void 0:d.id)===e,U=O.useContext(R?op:BA),[F,M]=Cf(),[q,Z]=Cf(),G=PA(l,e),A=Mu(n);vs(()=>(_.set(e,{id:e,key:o,node:F,activatorNode:q,data:A}),()=>{const N=_.get(e);N&&N.key===o&&_.delete(e)}),[_,e]);const k=O.useMemo(()=>({role:E,tabIndex:I,"aria-disabled":r,"aria-pressed":R&&E===Yw?!0:void 0,"aria-roledescription":C,"aria-describedby":y.draggable}),[r,E,I,R,C,y.draggable]);return{active:d,activatorEvent:u,activeNodeRect:m,attributes:k,isDragging:R,listeners:r?void 0:G,node:F,over:x,setNodeRef:M,setActivatorNodeRef:Z,transform:U}}function qk(){return O.useContext(Bk)}const HA="Droppable",KA={timeout:25};function vc(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const o=cd(HA),{active:l,dispatch:u,over:d,measureDroppableContainers:m}=O.useContext(dd),y=O.useRef({disabled:n}),_=O.useRef(!1),x=O.useRef(null),E=O.useRef(null),{disabled:C,updateMeasurementsFor:I,timeout:R}={...KA,...s},U=Mu(I??r),F=O.useCallback(()=>{if(!_.current){_.current=!0;return}E.current!=null&&clearTimeout(E.current),E.current=setTimeout(()=>{m(Array.isArray(U.current)?U.current:[U.current]),E.current=null},R)},[R]),M=ip({callback:F,disabled:C||!l}),q=O.useCallback((k,N)=>{M&&(N&&(M.unobserve(N),_.current=!1),k&&M.observe(k))},[M]),[Z,G]=Cf(q),A=Mu(e);return O.useEffect(()=>{!M||!Z.current||(M.disconnect(),_.current=!1,M.observe(Z.current))},[Z,M]),O.useEffect(()=>(u({type:on.RegisterDroppable,element:{id:r,key:o,disabled:n,node:Z,rect:x,data:A}}),()=>u({type:on.UnregisterDroppable,key:o,id:r})),[r]),O.useEffect(()=>{n!==y.current.disabled&&(u({type:on.SetDroppableDisabled,id:r,key:o,disabled:n}),y.current.disabled=n)},[r,o,n,u]),{active:l,rect:x,isOver:(d==null?void 0:d.id)===r,node:Z,over:d,setNodeRef:G}}function GA(t){let{animation:e,children:n}=t;const[r,s]=O.useState(null),[o,l]=O.useState(null),u=Af(n);return!n&&!r&&u&&s(u),vs(()=>{if(!o)return;const d=r==null?void 0:r.key,m=r==null?void 0:r.props.id;if(d==null||m==null){s(null);return}Promise.resolve(e(m,o)).then(()=>{s(null)})},[e,r,o]),Me.createElement(Me.Fragment,null,n,r?O.cloneElement(r,{ref:l}):null)}const QA={x:0,y:0,scaleX:1,scaleY:1};function ZA(t){let{children:e}=t;return Me.createElement(dd.Provider,{value:$k},Me.createElement(op.Provider,{value:QA},e))}const YA={position:"fixed",touchAction:"none"},JA=t=>tp(t)?"transform 250ms ease":void 0,XA=O.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:l,rect:u,style:d,transform:m,transition:y=JA}=t;if(!u)return null;const _=s?m:{...m,scaleX:1,scaleY:1},x={...YA,width:u.width,height:u.height,top:u.top,left:u.left,transform:Ws.Transform.toString(_),transformOrigin:s&&r?GC(r,u):void 0,transition:typeof y=="function"?y(r):y,...d};return Me.createElement(n,{className:l,style:x,ref:e},o)}),e2=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:o,className:l}=t;if(o!=null&&o.active)for(const[u,d]of Object.entries(o.active))d!==void 0&&(s[u]=n.node.style.getPropertyValue(u),n.node.style.setProperty(u,d));if(o!=null&&o.dragOverlay)for(const[u,d]of Object.entries(o.dragOverlay))d!==void 0&&r.node.style.setProperty(u,d);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[d,m]of Object.entries(s))n.node.style.setProperty(d,m);l!=null&&l.active&&n.node.classList.remove(l.active)}},t2=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Ws.Transform.toString(e)},{transform:Ws.Transform.toString(n)}]},n2={duration:250,easing:"ease",keyframes:t2,sideEffects:e2({styles:{active:{opacity:"0"}}})};function r2(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return ep((o,l)=>{if(e===null)return;const u=n.get(o);if(!u)return;const d=u.node.current;if(!d)return;const m=Uk(l);if(!m)return;const{transform:y}=er(l).getComputedStyle(l),_=Nk(y);if(!_)return;const x=typeof e=="function"?e:s2(e);return Mk(d,s.draggable.measure),x({active:{id:o,data:u.data,node:d,rect:s.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:l,rect:s.dragOverlay.measure(m)},droppableContainers:r,measuringConfiguration:s,transform:_})})}function s2(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...n2,...t};return o=>{let{active:l,dragOverlay:u,transform:d,...m}=o;if(!e)return;const y={x:u.rect.left-l.rect.left,y:u.rect.top-l.rect.top},_={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/u.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/u.rect.height:1},x={x:d.x-y.x,y:d.y-y.y,..._},E=s({...m,active:l,dragOverlay:u,transform:{initial:d,final:x}}),[C]=E,I=E[E.length-1];if(JSON.stringify(C)===JSON.stringify(I))return;const R=r==null?void 0:r({active:l,dragOverlay:u,...m}),U=u.node.animate(E,{duration:e,easing:n,fill:"forwards"});return new Promise(F=>{U.onfinish=()=>{R==null||R(),F()}})}}let Jw=0;function i2(t){return O.useMemo(()=>{if(t!=null)return Jw++,Jw},[t])}const o2=Me.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:l,wrapperElement:u="div",className:d,zIndex:m=999}=t;const{activatorEvent:y,active:_,activeNodeRect:x,containerNodeRect:E,draggableNodes:C,droppableContainers:I,dragOverlay:R,over:U,measuringConfiguration:F,scrollableAncestors:M,scrollableAncestorRects:q,windowRect:Z}=qk(),G=O.useContext(op),A=i2(_==null?void 0:_.id),k=Wk(l,{activatorEvent:y,active:_,activeNodeRect:x,containerNodeRect:E,draggingNodeRect:R.rect,over:U,overlayNodeRect:R.rect,scrollableAncestors:M,scrollableAncestorRects:q,transform:G,windowRect:Z}),N=By(x),P=r2({config:r,draggableNodes:C,droppableContainers:I,measuringConfiguration:F}),D=N?R.setRef:void 0;return Me.createElement(ZA,null,Me.createElement(GA,{animation:P},_&&A?Me.createElement(XA,{key:A,id:_.id,ref:D,as:u,activatorEvent:y,adjustScale:e,className:d,transition:o,rect:N,style:{zIndex:m,...s},transform:k},n):null))});var Xw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},a2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],u=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Kk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,u=l?t[s+1]:0,d=s+2<t.length,m=d?t[s+2]:0,y=o>>2,_=(o&3)<<4|u>>4;let x=(u&15)<<2|m>>6,E=m&63;d||(E=64,l||(x=64)),r.push(n[y],n[_],n[x],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Hk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):a2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const _=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||u==null||m==null||_==null)throw new l2;const x=o<<2|u>>4;if(r.push(x),m!==64){const E=u<<4&240|m>>2;if(r.push(E),_!==64){const C=m<<6&192|_;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class l2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c2=function(t){const e=Hk(t);return Kk.encodeByteArray(e,!0)},jf=function(t){return c2(t).replace(/\./g,"")},Gk=function(t){try{return Kk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=()=>u2().__FIREBASE_DEFAULTS__,h2=()=>{if(typeof process>"u"||typeof Xw>"u")return;const t=Xw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},f2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gk(t[1]);return e&&JSON.parse(e)},lp=()=>{try{return d2()||h2()||f2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qk=t=>{var e,n;return(n=(e=lp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},p2=t=>{const e=Qk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zk=()=>{var t;return(t=lp())===null||t===void 0?void 0:t.config},Yk=t=>{var e;return(e=lp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jf(JSON.stringify(n)),jf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function v2(){var t;const e=(t=lp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function w2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function b2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function x2(){const t=Un();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function k2(){return!v2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E2(){try{return typeof indexedDB=="object"}catch{return!1}}function T2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="FirebaseError";class Ei extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=I2,Object.setPrototypeOf(this,Ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hd.prototype.create)}}class hd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?S2(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new Ei(s,u,r)}}function S2(t,e){return t.replace(C2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const C2=/\{\$([^}]+)}/g;function A2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Df(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(eb(o)&&eb(l)){if(!Df(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function eb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _u(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function wu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function N2(t,e){const n=new R2(t,e);return n.subscribe.bind(n)}class R2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");P2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vg),s.error===void 0&&(s.error=vg),s.complete===void 0&&(s.complete=vg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class Oa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new m2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O2(e))try{this.getOrInitializeService({instanceIdentifier:va})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=va){return this.instances.has(e)}getOptions(e=va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:D2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=va){return this.component?this.component.multipleInstances?e:va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D2(t){return t===va?void 0:t}function O2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const M2={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},V2=nt.INFO,F2={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},z2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=F2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wy{constructor(e){this.name=e,this._logLevel=V2,this._logHandler=z2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?M2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const U2=(t,e)=>e.some(n=>t instanceof n);let tb,nb;function $2(){return tb||(tb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B2(){return nb||(nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jk=new WeakMap,Yg=new WeakMap,Xk=new WeakMap,_g=new WeakMap,qy=new WeakMap;function W2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(ko(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Jk.set(n,t)}).catch(()=>{}),qy.set(e,t),e}function q2(t){if(Yg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Yg.set(t,e)}let Jg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ko(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function H2(t){Jg=t(Jg)}function K2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wg(this),e,...n);return Xk.set(r,e.sort?e.sort():[e]),ko(r)}:B2().includes(t)?function(...e){return t.apply(wg(this),e),ko(Jk.get(this))}:function(...e){return ko(t.apply(wg(this),e))}}function G2(t){return typeof t=="function"?K2(t):(t instanceof IDBTransaction&&q2(t),U2(t,$2())?new Proxy(t,Jg):t)}function ko(t){if(t instanceof IDBRequest)return W2(t);if(_g.has(t))return _g.get(t);const e=G2(t);return e!==t&&(_g.set(t,e),qy.set(e,t)),e}const wg=t=>qy.get(t);function Q2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),u=ko(l);return r&&l.addEventListener("upgradeneeded",d=>{r(ko(l.result),d.oldVersion,d.newVersion,ko(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const Z2=["get","getKey","getAll","getAllKeys","count"],Y2=["put","add","delete","clear"],bg=new Map;function rb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bg.get(e))return bg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Y2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Z2.includes(n)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(u.shift())),(await Promise.all([m[n](...u),s&&d.done]))[0]};return bg.set(e,o),o}H2(t=>({...t,get:(e,n,r)=>rb(e,n)||t.get(e,n,r),has:(e,n)=>!!rb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(X2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function X2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xg="@firebase/app",sb="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Wy("@firebase/app"),eN="@firebase/app-compat",tN="@firebase/analytics-compat",nN="@firebase/analytics",rN="@firebase/app-check-compat",sN="@firebase/app-check",iN="@firebase/auth",oN="@firebase/auth-compat",aN="@firebase/database",lN="@firebase/data-connect",cN="@firebase/database-compat",uN="@firebase/functions",dN="@firebase/functions-compat",hN="@firebase/installations",fN="@firebase/installations-compat",pN="@firebase/messaging",mN="@firebase/messaging-compat",gN="@firebase/performance",yN="@firebase/performance-compat",vN="@firebase/remote-config",_N="@firebase/remote-config-compat",wN="@firebase/storage",bN="@firebase/storage-compat",xN="@firebase/firestore",kN="@firebase/vertexai-preview",EN="@firebase/firestore-compat",TN="firebase",IN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="[DEFAULT]",SN={[Xg]:"fire-core",[eN]:"fire-core-compat",[nN]:"fire-analytics",[tN]:"fire-analytics-compat",[sN]:"fire-app-check",[rN]:"fire-app-check-compat",[iN]:"fire-auth",[oN]:"fire-auth-compat",[aN]:"fire-rtdb",[lN]:"fire-data-connect",[cN]:"fire-rtdb-compat",[uN]:"fire-fn",[dN]:"fire-fn-compat",[hN]:"fire-iid",[fN]:"fire-iid-compat",[pN]:"fire-fcm",[mN]:"fire-fcm-compat",[gN]:"fire-perf",[yN]:"fire-perf-compat",[vN]:"fire-rc",[_N]:"fire-rc-compat",[wN]:"fire-gcs",[bN]:"fire-gcs-compat",[xN]:"fire-fst",[EN]:"fire-fst-compat",[kN]:"fire-vertex","fire-js":"fire-js",[TN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=new Map,CN=new Map,ty=new Map;function ib(t,e){try{t.container.addComponent(e)}catch(n){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rc(t){const e=t.name;if(ty.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;ty.set(e,t);for(const n of zu.values())ib(n,t);for(const n of CN.values())ib(n,t);return!0}function Hy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Eo=new hd("app","Firebase",AN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=IN;function Ky(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ey,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Eo.create("bad-app-name",{appName:String(s)});if(n||(n=Zk()),!n)throw Eo.create("no-options");const o=zu.get(s);if(o){if(Df(n,o.options)&&Df(r,o.config))return o;throw Eo.create("duplicate-app",{appName:s})}const l=new L2(s);for(const d of ty.values())l.addComponent(d);const u=new NN(n,r,l);return zu.set(s,u),u}function eE(t=ey){const e=zu.get(t);if(!e&&t===ey&&Zk())return Ky();if(!e)throw Eo.create("no-app",{appName:t});return e}function ob(){return Array.from(zu.values())}function To(t,e,n){var r;let s=(r=SN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(u.join(" "));return}rc(new Oa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="firebase-heartbeat-database",PN=1,Uu="firebase-heartbeat-store";let xg=null;function tE(){return xg||(xg=Q2(RN,PN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Uu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Eo.create("idb-open",{originalErrorMessage:t.message})})),xg}async function jN(t){try{const n=(await tE()).transaction(Uu),r=await n.objectStore(Uu).get(nE(t));return await n.done,r}catch(e){if(e instanceof Ei)vi.warn(e.message);else{const n=Eo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vi.warn(n.message)}}}async function ab(t,e){try{const r=(await tE()).transaction(Uu,"readwrite");await r.objectStore(Uu).put(e,nE(t)),await r.done}catch(n){if(n instanceof Ei)vi.warn(n.message);else{const r=Eo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vi.warn(r.message)}}}function nE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=1024,ON=720*60*60*1e3;class LN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=lb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const u=new Date(l.date).valueOf();return Date.now()-u<=ON}),this._storage.overwrite(this._heartbeatsCache))}catch(r){vi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lb(),{heartbeatsToSend:r,unsentEntries:s}=MN(this._heartbeatsCache.heartbeats),o=jf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return vi.warn(n),""}}}function lb(){return new Date().toISOString().substring(0,10)}function MN(t,e=DN){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),cb(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),cb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E2()?T2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ab(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ab(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cb(t){return jf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){rc(new Oa("platform-logger",e=>new J2(e),"PRIVATE")),rc(new Oa("heartbeat",e=>new LN(e),"PRIVATE")),To(Xg,sb,t),To(Xg,sb,"esm2017"),To("fire-js","")}FN("");var zN="firebase",UN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */To(zN,UN,"app");function Gy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function rE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $N=rE,sE=new hd("auth","Firebase",rE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of=new Wy("@firebase/auth");function BN(t,...e){Of.logLevel<=nt.WARN&&Of.warn(`Auth (${_c}): ${t}`,...e)}function ff(t,...e){Of.logLevel<=nt.ERROR&&Of.error(`Auth (${_c}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t,...e){throw Qy(t,...e)}function Fs(t,...e){return Qy(t,...e)}function iE(t,e,n){const r=Object.assign(Object.assign({},$N()),{[e]:n});return new hd("auth","Firebase",r).create(e,{appName:t.name})}function zs(t){return iE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sE.create(t,...e)}function Ve(t,e,...n){if(!t)throw Qy(e,...n)}function hi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ff(e),new Error(e)}function _i(t,e){t||hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WN(){return ub()==="http:"||ub()==="https:"}function ub(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WN()||w2()||"connection"in navigator)?navigator.onLine:!0}function HN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n){this.shortDelay=e,this.longDelay=n,_i(n>e,"Short delay should be less than long delay!"),this.isMobile=y2()||b2()}get(){return qN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,e){_i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new pd(3e4,6e4);function Ti(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ii(t,e,n,r,s={}){return aE(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=fd(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:d},o);return _2()||(m.referrerPolicy="no-referrer"),oE.fetch()(lE(t,t.config.apiHost,n,u),m)})}async function aE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},KN),e);try{const s=new ZN(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Gh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,m]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gh(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Gh(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Gh(t,"user-disabled",l);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw iE(t,y,m);ws(t,y)}}catch(s){if(s instanceof Ei)throw s;ws(t,"network-request-failed",{message:String(s)})}}async function wc(t,e,n,r,s={}){const o=await Ii(t,e,n,r,s);return"mfaPendingCredential"in o&&ws(t,"multi-factor-auth-required",{_serverResponse:o}),o}function lE(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Zy(t.config,s):`${t.config.apiScheme}://${s}`}function QN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fs(this.auth,"network-request-failed")),GN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Fs(t,e,r);return s.customData._tokenResponse=n,s}function db(t){return t!==void 0&&t.enterprise!==void 0}class YN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function JN(t,e){return Ii(t,"GET","/v2/recaptchaConfig",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,e){return Ii(t,"POST","/v1/accounts:delete",e)}async function cE(t,e){return Ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eR(t,e=!1){const n=Mt(t),r=await n.getIdToken(e),s=Yy(r);Ve(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Au(kg(s.auth_time)),issuedAtTime:Au(kg(s.iat)),expirationTime:Au(kg(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function kg(t){return Number(t)*1e3}function Yy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ff("JWT malformed, contained fewer than 3 sections"),null;try{const s=Gk(n);return s?JSON.parse(s):(ff("Failed to decode base64 JWT payload"),null)}catch(s){return ff("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hb(t){const e=Yy(t);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ei&&tR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(t){var e;const n=t.auth,r=await t.getIdToken(),s=await sc(t,cE(n,{idToken:r}));Ve(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?uE(o.providerUserInfo):[],u=sR(t.providerData,l),d=t.isAnonymous,m=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),y=d?m:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ry(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(t,_)}async function rR(t){const e=Mt(t);await $u(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function uE(t){return t.map(e=>{var{providerId:n}=e,r=Gy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(t,e){const n=await aE(t,{},async()=>{const r=fd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=lE(t,s,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",oE.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oR(t,e){return Ii(t,"POST","/v2/accounts:revokeToken",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const n=hb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await iR(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new Vl;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Ve(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ve(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t,e){Ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fi{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=Gy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ry(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await sc(this,this.stsTokenManager.getToken(this.auth,e));return Ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eR(this,e)}reload(){return rR(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $u(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gs(this.auth.app))return Promise.reject(zs(this.auth));const e=await this.getIdToken();return await sc(this,XN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,l,u,d,m,y;const _=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,E=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=n.photoURL)!==null&&l!==void 0?l:void 0,I=(u=n.tenantId)!==null&&u!==void 0?u:void 0,R=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,U=(m=n.createdAt)!==null&&m!==void 0?m:void 0,F=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:M,emailVerified:q,isAnonymous:Z,providerData:G,stsTokenManager:A}=n;Ve(M&&A,e,"internal-error");const k=Vl.fromJSON(this.name,A);Ve(typeof M=="string",e,"internal-error"),no(_,e.name),no(x,e.name),Ve(typeof q=="boolean",e,"internal-error"),Ve(typeof Z=="boolean",e,"internal-error"),no(E,e.name),no(C,e.name),no(I,e.name),no(R,e.name),no(U,e.name),no(F,e.name);const N=new fi({uid:M,auth:e,email:x,emailVerified:q,displayName:_,isAnonymous:Z,photoURL:C,phoneNumber:E,tenantId:I,stsTokenManager:k,createdAt:U,lastLoginAt:F});return G&&Array.isArray(G)&&(N.providerData=G.map(P=>Object.assign({},P))),R&&(N._redirectEventId=R),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new Vl;s.updateFromServerResponse(n);const o=new fi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await $u(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ve(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?uE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),u=new Vl;u.updateFromIdToken(r);const d=new fi({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ry(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new Map;function pi(t){_i(t instanceof Function,"Expected a class definition");let e=fb.get(t);return e?(_i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dE.type="NONE";const pb=dE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(t,e,n){return`firebase:${t}:${e}:${n}`}class Fl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=pf(this.userKey,s.apiKey,o),this.fullPersistenceKey=pf("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fl(pi(pb),e,r);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||pi(pb);const l=pf(r,e.config.apiKey,e.name);let u=null;for(const m of n)try{const y=await m._get(l);if(y){const _=fi._fromJSON(e,y);m!==o&&(u=_),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Fl(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new Fl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yE(e))return"Blackberry";if(vE(e))return"Webos";if(fE(e))return"Safari";if((e.includes("chrome/")||pE(e))&&!e.includes("edge/"))return"Chrome";if(gE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hE(t=Un()){return/firefox\//i.test(t)}function fE(t=Un()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pE(t=Un()){return/crios\//i.test(t)}function mE(t=Un()){return/iemobile/i.test(t)}function gE(t=Un()){return/android/i.test(t)}function yE(t=Un()){return/blackberry/i.test(t)}function vE(t=Un()){return/webos/i.test(t)}function Jy(t=Un()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aR(t=Un()){var e;return Jy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lR(){return x2()&&document.documentMode===10}function _E(t=Un()){return Jy(t)||gE(t)||vE(t)||yE(t)||/windows phone/i.test(t)||mE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t,e=[]){let n;switch(t){case"Browser":n=mb(Un());break;case"Worker":n=`${mb(Un())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_c}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(t,e={}){return Ii(t,"GET","/v2/passwordPolicy",Ti(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=6;class hR{constructor(e){var n,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:dR,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gb(this),this.idTokenSubscription=new gb(this),this.beforeStateQueue=new cR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pi(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Fl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cE(this,{idToken:e}),r=await fi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gs(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $u(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gs(this.app))return Promise.reject(zs(this));const n=e?Mt(e):null;return n&&Ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gs(this.app)?Promise.reject(zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gs(this.app)?Promise.reject(zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uR(this),n=new hR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pi(e)||this._popupRedirectResolver;Ve(n,this,"argument-error"),this.redirectPersistenceManager=await Fl.create(this,[pi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&BN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Mo(t){return Mt(t)}class gb{constructor(e){this.auth=e,this.observer=null,this.addObserver=N2(n=>this.observer=n)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pR(t){cp=t}function bE(t){return cp.loadJS(t)}function mR(){return cp.recaptchaEnterpriseScript}function gR(){return cp.gapiScript}function yR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const vR="recaptcha-enterprise",_R="NO_RECAPTCHA";class wR{constructor(e){this.type=vR,this.auth=Mo(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{JN(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const m=new YN(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,l(m.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;db(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{l(m)}).catch(()=>{l(_R)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{r(this.auth).then(u=>{if(!n&&db(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=mR();d.length!==0&&(d+=u),bE(d).then(()=>{s(u,o,l)}).catch(m=>{l(m)})}}).catch(u=>{l(u)})})}}async function yb(t,e,n,r=!1){const s=new wR(t);let o;try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function vb(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await yb(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await yb(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t,e){const n=Hy(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Df(o,e??{}))return s;ws(s,"already-initialized")}return n.initialize({options:e})}function xR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kR(t,e,n){const r=Mo(t);Ve(r._canInitEmulator,r,"emulator-config-failed"),Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=xE(e),{host:l,port:u}=ER(e),d=u===null?"":`:${u}`;r.config.emulator={url:`${o}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),TR()}function xE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ER(t){const e=xE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:_b(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:_b(l)}}}function _b(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hi("not implemented")}_getIdTokenResponse(e){return hi("not implemented")}_linkToIdToken(e,n){return hi("not implemented")}_getReauthenticationResolver(e){return hi("not implemented")}}async function IR(t,e){return Ii(t,"POST","/v1/accounts:update",e)}async function SR(t,e){return Ii(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e){return wc(t,"POST","/v1/accounts:signInWithPassword",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(t,e){return wc(t,"POST","/v1/accounts:signInWithEmailLink",Ti(t,e))}async function NR(t,e){return wc(t,"POST","/v1/accounts:signInWithEmailLink",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends Xy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Bu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vb(e,n,"signInWithPassword",CR);case"emailLink":return AR(e,{email:this._email,oobCode:this._password});default:ws(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vb(e,r,"signUpPassword",SR);case"emailLink":return NR(e,{idToken:n,email:this._email,oobCode:this._password});default:ws(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t,e){return wc(t,"POST","/v1/accounts:signInWithIdp",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="http://localhost";class La extends Xy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new La(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ws("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=Gy(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new La(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return zl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zl(e,n)}buildRequest(){const e={requestUri:RR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jR(t){const e=_u(wu(t)).link,n=e?_u(wu(e)).deep_link_id:null,r=_u(wu(t)).deep_link_id;return(r?_u(wu(r)).link:null)||r||n||e||t}class e0{constructor(e){var n,r,s,o,l,u;const d=_u(wu(e)),m=(n=d.apiKey)!==null&&n!==void 0?n:null,y=(r=d.oobCode)!==null&&r!==void 0?r:null,_=PR((s=d.mode)!==null&&s!==void 0?s:null);Ve(m&&y&&_,"argument-error"),this.apiKey=m,this.operation=_,this.code=y,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=jR(e);try{return new e0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.providerId=Vo.PROVIDER_ID}static credential(e,n){return Bu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=e0.parseLink(n);return Ve(r,"argument-error"),Bu._fromEmailAndCode(e,r.code,r.tenantId)}}Vo.PROVIDER_ID="password";Vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends kE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends md{constructor(){super("facebook.com")}static credential(e){return La._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";ao.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends md{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return La._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return lo.credential(n,r)}catch{return null}}}lo.GOOGLE_SIGN_IN_METHOD="google.com";lo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends md{constructor(){super("github.com")}static credential(e){return La._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return co.credential(e.oauthAccessToken)}catch{return null}}}co.GITHUB_SIGN_IN_METHOD="github.com";co.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends md{constructor(){super("twitter.com")}static credential(e,n){return La._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return uo.credential(n,r)}catch{return null}}}uo.TWITTER_SIGN_IN_METHOD="twitter.com";uo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e){return wc(t,"POST","/v1/accounts:signUp",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await fi._fromIdTokenResponse(e,r,s),l=wb(r);return new wi({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=wb(r);return new wi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function wb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EE(t){var e;if(gs(t.app))return Promise.reject(zs(t));const n=Mo(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new wi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await DR(n,{returnSecureToken:!0}),s=await wi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends Ei{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Lf(e,n,r,s)}}function TE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function IE(t,e,n=!1){const r=await sc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wi._forOperation(t,"link",r)}async function LR(t,e,n){await $u(e);const r=OR(e.providerData);Ve(r.has(n)===t,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e,n=!1){const{auth:r}=t;if(gs(r.app))return Promise.reject(zs(r));const s="reauthenticate";try{const o=await sc(t,TE(r,s,e,t),n);Ve(o.idToken,r,"internal-error");const l=Yy(o.idToken);Ve(l,r,"internal-error");const{sub:u}=l;return Ve(t.uid===u,r,"user-mismatch"),wi._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ws(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(t,e,n=!1){if(gs(t.app))return Promise.reject(zs(t));const r="signIn",s=await TE(t,r,e),o=await wi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function VR(t,e){return SE(Mo(t),e)}async function CE(t,e){const n=Mt(t);return await LR(!1,n,e.providerId),IE(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(t,e){return wc(t,"POST","/v1/accounts:signInWithCustomToken",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AE(t,e){if(gs(t.app))return Promise.reject(zs(t));const n=Mo(t),r=await FR(n,{token:e,returnSecureToken:!0}),s=await wi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(t){const e=Mo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function t0(t,e,n){return gs(t.app)?Promise.reject(zs(t)):VR(Mt(t),Vo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&zR(t),r})}function NE(t,e){return UR(Mt(t),null,e)}async function UR(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const l=await sc(t,IR(r,o));await t._updateTokensIfNecessary(l,!0)}function $R(t,e,n,r){return Mt(t).onIdTokenChanged(e,n,r)}function BR(t,e,n){return Mt(t).beforeAuthStateChanged(e,n)}function n0(t,e,n,r){return Mt(t).onAuthStateChanged(e,n,r)}function r0(t){return Mt(t).signOut()}const Mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mf,"1"),this.storage.removeItem(Mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=1e3,qR=10;class PE extends RE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_E(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);lR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},WR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PE.type="LOCAL";const HR=PE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE extends RE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jE.type="SESSION";const DE=jE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new up(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async m=>m(n.origin,o)),d=await KR(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}up.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const m=s0("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(_){const x=_;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(x.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function QR(t){Us().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function ZR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function JR(){return OE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="firebaseLocalStorageDb",XR=1,Vf="firebaseLocalStorage",ME="fbase_key";class gd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dp(t,e){return t.transaction([Vf],e?"readwrite":"readonly").objectStore(Vf)}function eP(){const t=indexedDB.deleteDatabase(LE);return new gd(t).toPromise()}function sy(){const t=indexedDB.open(LE,XR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Vf,{keyPath:ME})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Vf)?e(r):(r.close(),await eP(),e(await sy()))})})}async function bb(t,e,n){const r=dp(t,!0).put({[ME]:e,value:n});return new gd(r).toPromise()}async function tP(t,e){const n=dp(t,!1).get(e),r=await new gd(n).toPromise();return r===void 0?null:r.value}function xb(t,e){const n=dp(t,!0).delete(e);return new gd(n).toPromise()}const nP=800,rP=3;class VE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=up._getInstance(JR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ZR(),!this.activeServiceWorker)return;this.sender=new GR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sy();return await bb(e,Mf,"1"),await xb(e,Mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>bb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=dp(s,!1).getAll();return new gd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VE.type="LOCAL";const sP=VE;new pd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t,e){return e?pi(e):(Ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends Xy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oP(t){return SE(t.auth,new i0(t),t.bypassAuthState)}function aP(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),MR(n,new i0(t),t.bypassAuthState)}async function lP(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),IE(n,new i0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oP;case"linkViaPopup":case"linkViaRedirect":return lP;case"reauthViaPopup":case"reauthViaRedirect":return aP;default:ws(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new pd(2e3,1e4);class Dl extends FE{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Dl.currentPopupAction&&Dl.currentPopupAction.cancel(),Dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=s0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cP.get())};e()}}Dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="pendingRedirect",mf=new Map;class dP extends FE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=mf.get(this.auth._key());if(!e){try{const r=await hP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}mf.set(this.auth._key(),e)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hP(t,e){const n=mP(e),r=pP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function fP(t,e){mf.set(t._key(),e)}function pP(t){return pi(t._redirectPersistence)}function mP(t){return pf(uP,t.config.apiKey,t.name)}async function gP(t,e,n=!1){if(gs(t.app))return Promise.reject(zs(t));const r=Mo(t),s=iP(r,e),l=await new dP(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=600*1e3;class vP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_P(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!zE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fs(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yP&&this.cachedEventUids.clear(),this.cachedEventUids.has(kb(e))}saveEventToCache(e){this.cachedEventUids.add(kb(e)),this.lastProcessedEventTime=Date.now()}}function kb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _P(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(t,e={}){return Ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xP=/^https?/;async function kP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wP(t);for(const n of e)try{if(EP(n))return}catch{}ws(t,"unauthorized-domain")}function EP(t){const e=ny(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!xP.test(n))return!1;if(bP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=new pd(3e4,6e4);function Eb(){const t=Us().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IP(t){return new Promise((e,n)=>{var r,s,o;function l(){Eb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Eb(),n(Fs(t,"network-request-failed"))},timeout:TP.get()})}if(!((s=(r=Us().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Us().gapi)===null||o===void 0)&&o.load)l();else{const u=yR("iframefcb");return Us()[u]=()=>{gapi.load?l():n(Fs(t,"network-request-failed"))},bE(`${gR()}?onload=${u}`).catch(d=>n(d))}}).catch(e=>{throw gf=null,e})}let gf=null;function SP(t){return gf=gf||IP(t),gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=new pd(5e3,15e3),AP="__/auth/iframe",NP="emulator/auth/iframe",RP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jP(t){const e=t.config;Ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zy(e,NP):`https://${t.config.authDomain}/${AP}`,r={apiKey:e.apiKey,appName:t.name,v:_c},s=PP.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${fd(r).slice(1)}`}async function DP(t){const e=await SP(t),n=Us().gapi;return Ve(n,t,"internal-error"),e.open({where:document.body,url:jP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RP,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Fs(t,"network-request-failed"),u=Us().setTimeout(()=>{o(l)},CP.get());function d(){Us().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LP=500,MP=600,VP="_blank",FP="http://localhost";class Tb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zP(t,e,n,r=LP,s=MP){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},OP),{width:r.toString(),height:s.toString(),top:o,left:l}),m=Un().toLowerCase();n&&(u=pE(m)?VP:n),hE(m)&&(e=e||FP,d.scrollbars="yes");const y=Object.entries(d).reduce((x,[E,C])=>`${x}${E}=${C},`,"");if(aR(m)&&u!=="_self")return UP(e||"",u),new Tb(null);const _=window.open(e||"",u,y);Ve(_,t,"popup-blocked");try{_.focus()}catch{}return new Tb(_)}function UP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="__/auth/handler",BP="emulator/auth/handler",WP=encodeURIComponent("fac");async function Ib(t,e,n,r,s,o){Ve(t.config.authDomain,t,"auth-domain-config-required"),Ve(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_c,eventId:s};if(e instanceof kE){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",A2(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))l[y]=_}if(e instanceof md){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const d=await t._getAppCheckToken(),m=d?`#${WP}=${encodeURIComponent(d)}`:"";return`${qP(t)}?${fd(u).slice(1)}${m}`}function qP({config:t}){return t.emulator?Zy(t,BP):`https://${t.authDomain}/${$P}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="webStorageSupport";class HP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DE,this._completeRedirectFn=gP,this._overrideRedirectResult=fP}async _openPopup(e,n,r,s){var o;_i((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Ib(e,n,r,ny(),s);return zP(e,l,s0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await Ib(e,n,r,ny(),s);return QR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(_i(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await DP(e),r=new vP(e);return n.register("authEvent",s=>(Ve(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Eg,{type:Eg},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Eg];l!==void 0&&n(!!l),ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _E()||fE()||Jy()}}const KP=HP;var Sb="@firebase/auth",Cb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZP(t){rc(new Oa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Ve(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wE(t)},m=new fR(r,s,o,d);return xR(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rc(new Oa("auth-internal",e=>{const n=Mo(e.getProvider("auth").getImmediate());return(r=>new GP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),To(Sb,Cb,QP(t)),To(Sb,Cb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=300,JP=Yk("authIdTokenMaxAge")||YP;let Ab=null;const XP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JP)return;const s=n==null?void 0:n.token;Ab!==s&&(Ab=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function UE(t=eE()){const e=Hy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bR(t,{popupRedirectResolver:KP,persistence:[sP,HR,DE]}),r=Yk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=XP(o.toString());BR(n,l,()=>l(n.currentUser)),$R(n,u=>l(u))}}const s=Qk("auth");return s&&kR(n,`http://${s}`),n}function ej(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}pR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Fs("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",ej().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZP("Browser");var Nb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pa,$E;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,k){function N(){}N.prototype=k.prototype,A.D=k.prototype,A.prototype=new N,A.prototype.constructor=A,A.C=function(P,D,V){for(var j=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)j[Ae-2]=arguments[Ae];return k.prototype[D].apply(P,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,k,N){N||(N=0);var P=Array(16);if(typeof k=="string")for(var D=0;16>D;++D)P[D]=k.charCodeAt(N++)|k.charCodeAt(N++)<<8|k.charCodeAt(N++)<<16|k.charCodeAt(N++)<<24;else for(D=0;16>D;++D)P[D]=k[N++]|k[N++]<<8|k[N++]<<16|k[N++]<<24;k=A.g[0],N=A.g[1],D=A.g[2];var V=A.g[3],j=k+(V^N&(D^V))+P[0]+3614090360&4294967295;k=N+(j<<7&4294967295|j>>>25),j=V+(D^k&(N^D))+P[1]+3905402710&4294967295,V=k+(j<<12&4294967295|j>>>20),j=D+(N^V&(k^N))+P[2]+606105819&4294967295,D=V+(j<<17&4294967295|j>>>15),j=N+(k^D&(V^k))+P[3]+3250441966&4294967295,N=D+(j<<22&4294967295|j>>>10),j=k+(V^N&(D^V))+P[4]+4118548399&4294967295,k=N+(j<<7&4294967295|j>>>25),j=V+(D^k&(N^D))+P[5]+1200080426&4294967295,V=k+(j<<12&4294967295|j>>>20),j=D+(N^V&(k^N))+P[6]+2821735955&4294967295,D=V+(j<<17&4294967295|j>>>15),j=N+(k^D&(V^k))+P[7]+4249261313&4294967295,N=D+(j<<22&4294967295|j>>>10),j=k+(V^N&(D^V))+P[8]+1770035416&4294967295,k=N+(j<<7&4294967295|j>>>25),j=V+(D^k&(N^D))+P[9]+2336552879&4294967295,V=k+(j<<12&4294967295|j>>>20),j=D+(N^V&(k^N))+P[10]+4294925233&4294967295,D=V+(j<<17&4294967295|j>>>15),j=N+(k^D&(V^k))+P[11]+2304563134&4294967295,N=D+(j<<22&4294967295|j>>>10),j=k+(V^N&(D^V))+P[12]+1804603682&4294967295,k=N+(j<<7&4294967295|j>>>25),j=V+(D^k&(N^D))+P[13]+4254626195&4294967295,V=k+(j<<12&4294967295|j>>>20),j=D+(N^V&(k^N))+P[14]+2792965006&4294967295,D=V+(j<<17&4294967295|j>>>15),j=N+(k^D&(V^k))+P[15]+1236535329&4294967295,N=D+(j<<22&4294967295|j>>>10),j=k+(D^V&(N^D))+P[1]+4129170786&4294967295,k=N+(j<<5&4294967295|j>>>27),j=V+(N^D&(k^N))+P[6]+3225465664&4294967295,V=k+(j<<9&4294967295|j>>>23),j=D+(k^N&(V^k))+P[11]+643717713&4294967295,D=V+(j<<14&4294967295|j>>>18),j=N+(V^k&(D^V))+P[0]+3921069994&4294967295,N=D+(j<<20&4294967295|j>>>12),j=k+(D^V&(N^D))+P[5]+3593408605&4294967295,k=N+(j<<5&4294967295|j>>>27),j=V+(N^D&(k^N))+P[10]+38016083&4294967295,V=k+(j<<9&4294967295|j>>>23),j=D+(k^N&(V^k))+P[15]+3634488961&4294967295,D=V+(j<<14&4294967295|j>>>18),j=N+(V^k&(D^V))+P[4]+3889429448&4294967295,N=D+(j<<20&4294967295|j>>>12),j=k+(D^V&(N^D))+P[9]+568446438&4294967295,k=N+(j<<5&4294967295|j>>>27),j=V+(N^D&(k^N))+P[14]+3275163606&4294967295,V=k+(j<<9&4294967295|j>>>23),j=D+(k^N&(V^k))+P[3]+4107603335&4294967295,D=V+(j<<14&4294967295|j>>>18),j=N+(V^k&(D^V))+P[8]+1163531501&4294967295,N=D+(j<<20&4294967295|j>>>12),j=k+(D^V&(N^D))+P[13]+2850285829&4294967295,k=N+(j<<5&4294967295|j>>>27),j=V+(N^D&(k^N))+P[2]+4243563512&4294967295,V=k+(j<<9&4294967295|j>>>23),j=D+(k^N&(V^k))+P[7]+1735328473&4294967295,D=V+(j<<14&4294967295|j>>>18),j=N+(V^k&(D^V))+P[12]+2368359562&4294967295,N=D+(j<<20&4294967295|j>>>12),j=k+(N^D^V)+P[5]+4294588738&4294967295,k=N+(j<<4&4294967295|j>>>28),j=V+(k^N^D)+P[8]+2272392833&4294967295,V=k+(j<<11&4294967295|j>>>21),j=D+(V^k^N)+P[11]+1839030562&4294967295,D=V+(j<<16&4294967295|j>>>16),j=N+(D^V^k)+P[14]+4259657740&4294967295,N=D+(j<<23&4294967295|j>>>9),j=k+(N^D^V)+P[1]+2763975236&4294967295,k=N+(j<<4&4294967295|j>>>28),j=V+(k^N^D)+P[4]+1272893353&4294967295,V=k+(j<<11&4294967295|j>>>21),j=D+(V^k^N)+P[7]+4139469664&4294967295,D=V+(j<<16&4294967295|j>>>16),j=N+(D^V^k)+P[10]+3200236656&4294967295,N=D+(j<<23&4294967295|j>>>9),j=k+(N^D^V)+P[13]+681279174&4294967295,k=N+(j<<4&4294967295|j>>>28),j=V+(k^N^D)+P[0]+3936430074&4294967295,V=k+(j<<11&4294967295|j>>>21),j=D+(V^k^N)+P[3]+3572445317&4294967295,D=V+(j<<16&4294967295|j>>>16),j=N+(D^V^k)+P[6]+76029189&4294967295,N=D+(j<<23&4294967295|j>>>9),j=k+(N^D^V)+P[9]+3654602809&4294967295,k=N+(j<<4&4294967295|j>>>28),j=V+(k^N^D)+P[12]+3873151461&4294967295,V=k+(j<<11&4294967295|j>>>21),j=D+(V^k^N)+P[15]+530742520&4294967295,D=V+(j<<16&4294967295|j>>>16),j=N+(D^V^k)+P[2]+3299628645&4294967295,N=D+(j<<23&4294967295|j>>>9),j=k+(D^(N|~V))+P[0]+4096336452&4294967295,k=N+(j<<6&4294967295|j>>>26),j=V+(N^(k|~D))+P[7]+1126891415&4294967295,V=k+(j<<10&4294967295|j>>>22),j=D+(k^(V|~N))+P[14]+2878612391&4294967295,D=V+(j<<15&4294967295|j>>>17),j=N+(V^(D|~k))+P[5]+4237533241&4294967295,N=D+(j<<21&4294967295|j>>>11),j=k+(D^(N|~V))+P[12]+1700485571&4294967295,k=N+(j<<6&4294967295|j>>>26),j=V+(N^(k|~D))+P[3]+2399980690&4294967295,V=k+(j<<10&4294967295|j>>>22),j=D+(k^(V|~N))+P[10]+4293915773&4294967295,D=V+(j<<15&4294967295|j>>>17),j=N+(V^(D|~k))+P[1]+2240044497&4294967295,N=D+(j<<21&4294967295|j>>>11),j=k+(D^(N|~V))+P[8]+1873313359&4294967295,k=N+(j<<6&4294967295|j>>>26),j=V+(N^(k|~D))+P[15]+4264355552&4294967295,V=k+(j<<10&4294967295|j>>>22),j=D+(k^(V|~N))+P[6]+2734768916&4294967295,D=V+(j<<15&4294967295|j>>>17),j=N+(V^(D|~k))+P[13]+1309151649&4294967295,N=D+(j<<21&4294967295|j>>>11),j=k+(D^(N|~V))+P[4]+4149444226&4294967295,k=N+(j<<6&4294967295|j>>>26),j=V+(N^(k|~D))+P[11]+3174756917&4294967295,V=k+(j<<10&4294967295|j>>>22),j=D+(k^(V|~N))+P[2]+718787259&4294967295,D=V+(j<<15&4294967295|j>>>17),j=N+(V^(D|~k))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+k&4294967295,A.g[1]=A.g[1]+(D+(j<<21&4294967295|j>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+V&4294967295}r.prototype.u=function(A,k){k===void 0&&(k=A.length);for(var N=k-this.blockSize,P=this.B,D=this.h,V=0;V<k;){if(D==0)for(;V<=N;)s(this,A,V),V+=this.blockSize;if(typeof A=="string"){for(;V<k;)if(P[D++]=A.charCodeAt(V++),D==this.blockSize){s(this,P),D=0;break}}else for(;V<k;)if(P[D++]=A[V++],D==this.blockSize){s(this,P),D=0;break}}this.h=D,this.o+=k},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var k=1;k<A.length-8;++k)A[k]=0;var N=8*this.o;for(k=A.length-8;k<A.length;++k)A[k]=N&255,N/=256;for(this.u(A),A=Array(16),k=N=0;4>k;++k)for(var P=0;32>P;P+=8)A[N++]=this.g[k]>>>P&255;return A};function o(A,k){var N=u;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=k(A)}function l(A,k){this.h=k;for(var N=[],P=!0,D=A.length-1;0<=D;D--){var V=A[D]|0;P&&V==k||(N[D]=V,P=!1)}this.g=N}var u={};function d(A){return-128<=A&&128>A?o(A,function(k){return new l([k|0],0>k?-1:0)}):new l([A|0],0>A?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return _;if(0>A)return R(m(-A));for(var k=[],N=1,P=0;A>=N;P++)k[P]=A/N|0,N*=4294967296;return new l(k,0)}function y(A,k){if(A.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A.charAt(0)=="-")return R(y(A.substring(1),k));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(k,8)),P=_,D=0;D<A.length;D+=8){var V=Math.min(8,A.length-D),j=parseInt(A.substring(D,D+V),k);8>V?(V=m(Math.pow(k,V)),P=P.j(V).add(m(j))):(P=P.j(N),P=P.add(m(j)))}return P}var _=d(0),x=d(1),E=d(16777216);t=l.prototype,t.m=function(){if(I(this))return-R(this).m();for(var A=0,k=1,N=0;N<this.g.length;N++){var P=this.i(N);A+=(0<=P?P:4294967296+P)*k,k*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C(this))return"0";if(I(this))return"-"+R(this).toString(A);for(var k=m(Math.pow(A,6)),N=this,P="";;){var D=q(N,k).g;N=U(N,D.j(k));var V=((0<N.g.length?N.g[0]:N.h)>>>0).toString(A);if(N=D,C(N))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function C(A){if(A.h!=0)return!1;for(var k=0;k<A.g.length;k++)if(A.g[k]!=0)return!1;return!0}function I(A){return A.h==-1}t.l=function(A){return A=U(this,A),I(A)?-1:C(A)?0:1};function R(A){for(var k=A.g.length,N=[],P=0;P<k;P++)N[P]=~A.g[P];return new l(N,~A.h).add(x)}t.abs=function(){return I(this)?R(this):this},t.add=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],P=0,D=0;D<=k;D++){var V=P+(this.i(D)&65535)+(A.i(D)&65535),j=(V>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);P=j>>>16,V&=65535,j&=65535,N[D]=j<<16|V}return new l(N,N[N.length-1]&-2147483648?-1:0)};function U(A,k){return A.add(R(k))}t.j=function(A){if(C(this)||C(A))return _;if(I(this))return I(A)?R(this).j(R(A)):R(R(this).j(A));if(I(A))return R(this.j(R(A)));if(0>this.l(E)&&0>A.l(E))return m(this.m()*A.m());for(var k=this.g.length+A.g.length,N=[],P=0;P<2*k;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<A.g.length;D++){var V=this.i(P)>>>16,j=this.i(P)&65535,Ae=A.i(D)>>>16,rt=A.i(D)&65535;N[2*P+2*D]+=j*rt,F(N,2*P+2*D),N[2*P+2*D+1]+=V*rt,F(N,2*P+2*D+1),N[2*P+2*D+1]+=j*Ae,F(N,2*P+2*D+1),N[2*P+2*D+2]+=V*Ae,F(N,2*P+2*D+2)}for(P=0;P<k;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=k;P<2*k;P++)N[P]=0;return new l(N,0)};function F(A,k){for(;(A[k]&65535)!=A[k];)A[k+1]+=A[k]>>>16,A[k]&=65535,k++}function M(A,k){this.g=A,this.h=k}function q(A,k){if(C(k))throw Error("division by zero");if(C(A))return new M(_,_);if(I(A))return k=q(R(A),k),new M(R(k.g),R(k.h));if(I(k))return k=q(A,R(k)),new M(R(k.g),k.h);if(30<A.g.length){if(I(A)||I(k))throw Error("slowDivide_ only works with positive integers.");for(var N=x,P=k;0>=P.l(A);)N=Z(N),P=Z(P);var D=G(N,1),V=G(P,1);for(P=G(P,2),N=G(N,2);!C(P);){var j=V.add(P);0>=j.l(A)&&(D=D.add(N),V=j),P=G(P,1),N=G(N,1)}return k=U(A,D.j(k)),new M(D,k)}for(D=_;0<=A.l(k);){for(N=Math.max(1,Math.floor(A.m()/k.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=m(N),j=V.j(k);I(j)||0<j.l(A);)N-=P,V=m(N),j=V.j(k);C(V)&&(V=x),D=D.add(V),A=U(A,j)}return new M(D,A)}t.A=function(A){return q(this,A).h},t.and=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],P=0;P<k;P++)N[P]=this.i(P)&A.i(P);return new l(N,this.h&A.h)},t.or=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],P=0;P<k;P++)N[P]=this.i(P)|A.i(P);return new l(N,this.h|A.h)},t.xor=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],P=0;P<k;P++)N[P]=this.i(P)^A.i(P);return new l(N,this.h^A.h)};function Z(A){for(var k=A.g.length+1,N=[],P=0;P<k;P++)N[P]=A.i(P)<<1|A.i(P-1)>>>31;return new l(N,A.h)}function G(A,k){var N=k>>5;k%=32;for(var P=A.g.length-N,D=[],V=0;V<P;V++)D[V]=0<k?A.i(V+N)>>>k|A.i(V+N+1)<<32-k:A.i(V+N);return new l(D,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$E=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,Pa=l}).apply(typeof Nb<"u"?Nb:typeof self<"u"?self:typeof window<"u"?window:{});var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BE,bu,WE,yf,iy,qE,HE,KE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,b){return h==Array.prototype||h==Object.prototype||(h[v]=b.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qh=="object"&&Qh];for(var v=0;v<h.length;++v){var b=h[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(h,v){if(v)e:{var b=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var H=h[S];if(!(H in b))break e;b=b[H]}h=h[h.length-1],S=b[h],v=v(S),v!=S&&v!=null&&e(b,h,{configurable:!0,writable:!0,value:v})}}function o(h,v){h instanceof String&&(h+="");var b=0,S=!1,H={next:function(){if(!S&&b<h.length){var J=b++;return{value:v(J,h[J]),done:!1}}return S=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(h){return h||function(){return o(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function m(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,b){return h.call.apply(h.bind,arguments)}function _(h,v,b){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,S),h.apply(v,H)}}return function(){return h.apply(v,arguments)}}function x(h,v,b){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,x.apply(null,arguments)}function E(h,v){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function C(h,v){function b(){}b.prototype=v.prototype,h.aa=v.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(S,H,J){for(var ue=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)ue[ht-2]=arguments[ht];return v.prototype[H].apply(S,ue)}}function I(h){const v=h.length;if(0<v){const b=Array(v);for(let S=0;S<v;S++)b[S]=h[S];return b}return[]}function R(h,v){for(let b=1;b<arguments.length;b++){const S=arguments[b];if(d(S)){const H=h.length||0,J=S.length||0;h.length=H+J;for(let ue=0;ue<J;ue++)h[H+ue]=S[ue]}else h.push(S)}}class U{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function F(h){return/^[\s\xa0]*$/.test(h)}function M(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function q(h){return q[" "](h),h}q[" "]=function(){};var Z=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function G(h,v,b){for(const S in h)v.call(b,h[S],S,h)}function A(h,v){for(const b in h)v.call(void 0,h[b],b,h)}function k(h){const v={};for(const b in h)v[b]=h[b];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,v){let b,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(b in S)h[b]=S[b];for(let J=0;J<N.length;J++)b=N[J],Object.prototype.hasOwnProperty.call(S,b)&&(h[b]=S[b])}}function D(h){var v=1;h=h.split(":");const b=[];for(;0<v&&h.length;)b.push(h.shift()),v--;return h.length&&b.push(h.join(":")),b}function V(h){u.setTimeout(()=>{throw h},0)}function j(){var h=pe;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Ae{constructor(){this.h=this.g=null}add(v,b){const S=rt.get();S.set(v,b),this.h?this.h.next=S:this.g=S,this.h=S}}var rt=new U(()=>new Ze,h=>h.reset());class Ze{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,X=!1,pe=new Ae,de=()=>{const h=u.Promise.resolve(void 0);Re=()=>{h.then(W)}};var W=()=>{for(var h;h=j();){try{h.h.call(h.g)}catch(b){V(b)}var v=rt;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}X=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var xe=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};u.addEventListener("test",b,v),u.removeEventListener("test",b,v)}catch{}return h})();function Oe(h,v){if(ce.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(Z){e:{try{q(v.nodeName);var H=!0;break e}catch{}H=!1}H||(v=null)}}else b=="mouseover"?v=h.fromElement:b=="mouseout"&&(v=h.toElement);this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Pe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Oe.aa.h.call(this)}}C(Oe,ce);var Pe={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),$e=0;function ne(h,v,b,S,H){this.listener=h,this.proxy=null,this.src=v,this.type=b,this.capture=!!S,this.ha=H,this.key=++$e,this.da=this.fa=!1}function he(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function st(h){this.src=h,this.g={},this.h=0}st.prototype.add=function(h,v,b,S,H){var J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);var ue=_n(h,v,S,H);return-1<ue?(v=h[ue],b||(v.fa=!1)):(v=new ne(v,this.src,J,!!S,H),v.fa=b,h.push(v)),v};function gt(h,v){var b=v.type;if(b in h.g){var S=h.g[b],H=Array.prototype.indexOf.call(S,v,void 0),J;(J=0<=H)&&Array.prototype.splice.call(S,H,1),J&&(he(v),h.g[b].length==0&&(delete h.g[b],h.h--))}}function _n(h,v,b,S){for(var H=0;H<h.length;++H){var J=h[H];if(!J.da&&J.listener==v&&J.capture==!!b&&J.ha==S)return H}return-1}var wn="closure_lm_"+(1e6*Math.random()|0),yr={};function Rr(h,v,b,S,H){if(Array.isArray(v)){for(var J=0;J<v.length;J++)Rr(h,v[J],b,S,H);return null}return b=Wo(b),h&&h[Se]?h.K(v,b,m(S)?!!S.capture:!1,H):Ai(h,v,b,!1,S,H)}function Ai(h,v,b,S,H,J){if(!v)throw Error("Invalid event type");var ue=m(H)?!!H.capture:!!H,ht=Hs(h);if(ht||(h[wn]=ht=new st(h)),b=ht.add(v,b,S,ue,J),b.proxy)return b;if(S=Bo(),b.proxy=S,S.src=h,S.listener=b,h.addEventListener)xe||(H=ue),H===void 0&&(H=!1),h.addEventListener(v.toString(),S,H);else if(h.attachEvent)h.attachEvent(nr(v.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Bo(){function h(b){return v.call(h.src,h.listener,b)}const v=ks;return h}function xs(h,v,b,S,H){if(Array.isArray(v))for(var J=0;J<v.length;J++)xs(h,v[J],b,S,H);else S=m(S)?!!S.capture:!!S,b=Wo(b),h&&h[Se]?(h=h.i,v=String(v).toString(),v in h.g&&(J=h.g[v],b=_n(J,b,S,H),-1<b&&(he(J[b]),Array.prototype.splice.call(J,b,1),J.length==0&&(delete h.g[v],h.h--)))):h&&(h=Hs(h))&&(v=h.g[v.toString()],h=-1,v&&(h=_n(v,b,S,H)),(b=-1<h?v[h]:null)&&cn(b))}function cn(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Se])gt(v.i,h);else{var b=h.type,S=h.proxy;v.removeEventListener?v.removeEventListener(b,S,h.capture):v.detachEvent?v.detachEvent(nr(b),S):v.addListener&&v.removeListener&&v.removeListener(S),(b=Hs(v))?(gt(b,h),b.h==0&&(b.src=null,v[wn]=null)):he(h)}}}function nr(h){return h in yr?yr[h]:yr[h]="on"+h}function ks(h,v){if(h.da)h=!0;else{v=new Oe(v,this);var b=h.listener,S=h.ha||h.src;h.fa&&cn(h),h=b.call(S,v)}return h}function Hs(h){return h=h[wn],h instanceof st?h:null}var Ks="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wo(h){return typeof h=="function"?h:(h[Ks]||(h[Ks]=function(v){return h.handleEvent(v)}),h[Ks])}function Bt(){ee.call(this),this.i=new st(this),this.M=this,this.F=null}C(Bt,ee),Bt.prototype[Se]=!0,Bt.prototype.removeEventListener=function(h,v,b,S){xs(this,h,v,b,S)};function _t(h,v){var b,S=h.F;if(S)for(b=[];S;S=S.F)b.push(S);if(h=h.M,S=v.type||v,typeof v=="string")v=new ce(v,h);else if(v instanceof ce)v.target=v.target||h;else{var H=v;v=new ce(S,h),P(v,H)}if(H=!0,b)for(var J=b.length-1;0<=J;J--){var ue=v.g=b[J];H=Rn(ue,S,!0,v)&&H}if(ue=v.g=h,H=Rn(ue,S,!0,v)&&H,H=Rn(ue,S,!1,v)&&H,b)for(J=0;J<b.length;J++)ue=v.g=b[J],H=Rn(ue,S,!1,v)&&H}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var b=h.g[v],S=0;S<b.length;S++)he(b[S]);delete h.g[v],h.h--}}this.F=null},Bt.prototype.K=function(h,v,b,S){return this.i.add(String(h),v,!1,b,S)},Bt.prototype.L=function(h,v,b,S){return this.i.add(String(h),v,!0,b,S)};function Rn(h,v,b,S){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var H=!0,J=0;J<v.length;++J){var ue=v[J];if(ue&&!ue.da&&ue.capture==b){var ht=ue.listener,tn=ue.ha||ue.src;ue.fa&&gt(h.i,ue),H=ht.call(tn,S)!==!1&&H}}return H&&!S.defaultPrevented}function Yr(h,v,b){if(typeof h=="function")b&&(h=x(h,b));else if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:u.setTimeout(h,v||0)}function Jr(h){h.g=Yr(()=>{h.g=null,h.i&&(h.i=!1,Jr(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Pn extends ee{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Jr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(h){ee.call(this),this.h=h,this.g={}}C(Es,ee);var qo=[];function Ho(h){G(h.g,function(v,b){this.g.hasOwnProperty(b)&&cn(v)},h),h.g={}}Es.prototype.N=function(){Es.aa.N.call(this),Ho(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gs=u.JSON.stringify,Ni=u.JSON.parse,Ko=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Ts(){}Ts.prototype.h=null;function Ri(h){return h.h||(h.h=h.i())}function Pi(){}var rr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yt(){ce.call(this,"d")}C(yt,ce);function Ht(){ce.call(this,"c")}C(Ht,ce);var Ct={},sr=null;function Kt(){return sr=sr||new Bt}Ct.La="serverreachability";function en(h){ce.call(this,Ct.La,h)}C(en,ce);function Gt(h){const v=Kt();_t(v,new en(v))}Ct.STAT_EVENT="statevent";function Pr(h,v){ce.call(this,Ct.STAT_EVENT,h),this.stat=v}C(Pr,ce);function Ke(h){const v=Kt();_t(v,new Pr(v,h))}Ct.Ma="timingevent";function Bn(h,v){ce.call(this,Ct.Ma,h),this.size=v}C(Bn,ce);function zt(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},v)}function bn(){this.g=!0}bn.prototype.xa=function(){this.g=!1};function vr(h,v,b,S,H,J){h.info(function(){if(h.g)if(J)for(var ue="",ht=J.split("&"),tn=0;tn<ht.length;tn++){var it=ht[tn].split("=");if(1<it.length){var un=it[0];it=it[1];var Zt=un.split("_");ue=2<=Zt.length&&Zt[1]=="type"?ue+(un+"="+it+"&"):ue+(un+"=redacted&")}}else ue=null;else ue=J;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+v+`
`+b+`
`+ue})}function jr(h,v,b,S,H,J,ue){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+v+`
`+b+`
`+J+" "+ue})}function Qt(h,v,b,S){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Go(h,b)+(S?" "+S:"")})}function Xr(h,v){h.info(function(){return"TIMEOUT: "+v})}bn.prototype.info=function(){};function Go(h,v){if(!h.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var S=b[h];if(!(2>S.length)){var H=S[1];if(Array.isArray(H)&&!(1>H.length)){var J=H[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ue=1;ue<H.length;ue++)H[ue]=""}}}}return Gs(b)}catch{return v}}var Ka={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},es;function Qo(){}C(Qo,Ts),Qo.prototype.g=function(){return new XMLHttpRequest},Qo.prototype.i=function(){return{}},es=new Qo;function ts(h,v,b,S){this.j=h,this.i=v,this.l=b,this.R=S||1,this.U=new Es(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pd}function Pd(){this.i=null,this.g="",this.h=!1}var Dc={},Ga={};function Qa(h,v,b){h.L=1,h.v=Mi(wr(v)),h.m=b,h.P=!0,Oc(h,null)}function Oc(h,v){h.F=Date.now(),wt(h),h.A=wr(h.v);var b=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),Fi(b.i,"t",S),h.C=0,b=h.j.J,h.h=new Pd,h.g=Zd(h.j,b?v:null,!h.m),0<h.O&&(h.M=new Pn(x(h.Y,h,h.g),h.O)),v=h.U,b=h.g,S=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(qo[0]=H.toString()),H=qo);for(var J=0;J<H.length;J++){var ue=Rr(b,H[J],S||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=h.H?k(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Gt(),vr(h.i,h.u,h.A,h.l,h.R,h.m)}ts.prototype.ca=function(h){h=h.target;const v=this.M;v&&or(h)==3?v.j():this.Y(h)},ts.prototype.Y=function(h){try{if(h==this.g)e:{const Zt=or(this.g);var v=this.g.Ba();const Lr=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||Uc(this.g)))){this.J||Zt!=4||v==7||(v==8||0>=Lr?Gt(3):Gt(2)),Zo(this);var b=this.g.Z();this.X=b;t:if(jd(this)){var S=Uc(this.g);h="";var H=S.length,J=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dr(this),ji(this);var ue="";break t}this.h.i=new u.TextDecoder}for(v=0;v<H;v++)this.h.h=!0,h+=this.h.i.decode(S[v],{stream:!(J&&v==H-1)});S.length=0,this.h.g+=h,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=b==200,jr(this.i,this.u,this.A,this.l,this.R,Zt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var ht,tn=this.g;if((ht=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(ht)){var it=ht;break t}}it=null}if(b=it)Qt(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lc(this,b);else{this.o=!1,this.s=3,Ke(12),Dr(this),ji(this);break e}}if(this.P){b=!0;let xr;for(;!this.J&&this.C<ue.length;)if(xr=Mp(this,ue),xr==Ga){Zt==4&&(this.s=4,Ke(14),b=!1),Qt(this.i,this.l,null,"[Incomplete Response]");break}else if(xr==Dc){this.s=4,Ke(15),Qt(this.i,this.l,ue,"[Invalid Chunk]"),b=!1;break}else Qt(this.i,this.l,xr,null),Lc(this,xr);if(jd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||ue.length!=0||this.h.h||(this.s=1,Ke(16),b=!1),this.o=this.o&&b,!b)Qt(this.i,this.l,ue,"[Invalid Chunked Response]"),Dr(this),ji(this);else if(0<ue.length&&!this.W){this.W=!0;var un=this.j;un.g==this&&un.ba&&!un.M&&(un.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Bc(un),un.M=!0,Ke(11))}}else Qt(this.i,this.l,ue,null),Lc(this,ue);Zt==4&&Dr(this),this.o&&!this.J&&(Zt==4?ol(this.j,this):(this.o=!1,wt(this)))}else tl(this.g),b==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Ke(12)):(this.s=0,Ke(13)),Dr(this),ji(this)}}}catch{}finally{}};function jd(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Mp(h,v){var b=h.C,S=v.indexOf(`
`,b);return S==-1?Ga:(b=Number(v.substring(b,S)),isNaN(b)?Dc:(S+=1,S+b>v.length?Ga:(v=v.slice(S,S+b),h.C=S+b,v)))}ts.prototype.cancel=function(){this.J=!0,Dr(this)};function wt(h){h.S=Date.now()+h.I,Dd(h,h.I)}function Dd(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=zt(x(h.ba,h),v)}function Zo(h){h.B&&(u.clearTimeout(h.B),h.B=null)}ts.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Xr(this.i,this.A),this.L!=2&&(Gt(),Ke(17)),Dr(this),this.s=2,ji(this)):Dd(this,this.S-h)};function ji(h){h.j.G==0||h.J||ol(h.j,h)}function Dr(h){Zo(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Ho(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Lc(h,v){try{var b=h.j;if(b.G!=0&&(b.g==h||Wn(b.h,h))){if(!h.K&&Wn(b.h,h)&&b.G==3){try{var S=b.Da.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)il(b),os(b);else break e;sl(b),Ke(18)}}else b.za=H[1],0<b.za-b.T&&37500>H[2]&&b.F&&b.v==0&&!b.C&&(b.C=zt(x(b.Za,b),6e3));if(1>=Ld(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Xs(b,11)}else if((h.K||b.g==h)&&il(b),!F(v))for(H=b.Da.g.parse(v),v=0;v<H.length;v++){let it=H[v];if(b.T=it[0],it=it[1],b.G==2)if(it[0]=="c"){b.K=it[1],b.ia=it[2];const un=it[3];un!=null&&(b.la=un,b.j.info("VER="+b.la));const Zt=it[4];Zt!=null&&(b.Aa=Zt,b.j.info("SVER="+b.Aa));const Lr=it[5];Lr!=null&&typeof Lr=="number"&&0<Lr&&(S=1.5*Lr,b.L=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const xr=h.g;if(xr){const ra=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ra){var J=S.h;J.g||ra.indexOf("spdy")==-1&&ra.indexOf("quic")==-1&&ra.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Mc(J,J.h),J.h=null))}if(S.D){const ll=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;ll&&(S.ya=ll,vt(S.I,S.D,ll))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),S=b;var ue=h;if(S.qa=Qd(S,S.J?S.ia:null,S.W),ue.K){Md(S.h,ue);var ht=ue,tn=S.L;tn&&(ht.I=tn),ht.B&&(Zo(ht),wt(ht)),S.g=ue}else na(S);0<b.i.length&&As(b)}else it[0]!="stop"&&it[0]!="close"||Xs(b,7);else b.G==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Xs(b,7):kn(b):it[0]!="noop"&&b.l&&b.l.ta(it),b.v=0)}}Gt(4)}catch{}}var Od=class{constructor(h,v){this.g=h,this.map=v}};function Yo(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _r(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ld(h){return h.h?1:h.g?h.g.size:0}function Wn(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Mc(h,v){h.g?h.g.add(v):h.h=v}function Md(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Yo.prototype.cancel=function(){if(this.i=Vd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Vd(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const b of h.g.values())v=v.concat(b.D);return v}return I(h.i)}function Za(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],b=h.length,S=0;S<b;S++)v.push(h[S]);return v}v=[],b=0;for(S in h)v[b++]=h[S];return v}function Ya(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var b=0;b<h;b++)v.push(b);return v}v=[],b=0;for(const S in h)v[b++]=S;return v}}}function Di(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var b=Ya(h),S=Za(h),H=S.length,J=0;J<H;J++)v.call(void 0,S[J],b&&b[J],h)}var Jo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vp(h,v){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var S=h[b].indexOf("="),H=null;if(0<=S){var J=h[b].substring(0,S);H=h[b].substring(S+1)}else J=h[b];v(J,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Qs(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Qs){this.h=h.h,Xo(this,h.j),this.o=h.o,this.g=h.g,Oi(this,h.s),this.l=h.l;var v=h.i,b=new Is;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),Li(this,b),this.m=h.m}else h&&(v=String(h).match(Jo))?(this.h=!1,Xo(this,v[1]||"",!0),this.o=Je(v[2]||""),this.g=Je(v[3]||"",!0),Oi(this,v[4]),this.l=Je(v[5]||"",!0),Li(this,v[6]||"",!0),this.m=Je(v[7]||"")):(this.h=!1,this.i=new Is(null,this.h))}Qs.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Vi(v,Ja,!0),":");var b=this.g;return(b||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Vi(v,Ja,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Vi(b,b.charAt(0)=="/"?Ud:zd,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Vi(b,Vc)),h.join("")};function wr(h){return new Qs(h)}function Xo(h,v,b){h.j=b?Je(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Oi(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Li(h,v,b){v instanceof Is?(h.i=v,Ss(h.i,h.h)):(b||(v=Vi(v,$d)),h.i=new Is(v,h.h))}function vt(h,v,b){h.i.set(v,b)}function Mi(h){return vt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Je(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Vi(h,v,b){return typeof h=="string"?(h=encodeURI(h).replace(v,Fd),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Fd(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ja=/[#\/\?@]/g,zd=/[#\?:]/g,Ud=/[#\?]/g,$d=/[#\?@]/g,Vc=/#/g;function Is(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function xn(h){h.g||(h.g=new Map,h.h=0,h.i&&Vp(h.i,function(v,b){h.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}t=Is.prototype,t.add=function(h,v){xn(this),this.i=null,h=Or(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(v),this.h+=1,this};function ns(h,v){xn(h),v=Or(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function rs(h,v){return xn(h),v=Or(h,v),h.g.has(v)}t.forEach=function(h,v){xn(this),this.g.forEach(function(b,S){b.forEach(function(H){h.call(v,H,S,this)},this)},this)},t.na=function(){xn(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let S=0;S<v.length;S++){const H=h[S];for(let J=0;J<H.length;J++)b.push(v[S])}return b},t.V=function(h){xn(this);let v=[];if(typeof h=="string")rs(this,h)&&(v=v.concat(this.g.get(Or(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)v=v.concat(h[b])}return v},t.set=function(h,v){return xn(this),this.i=null,h=Or(this,h),rs(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function Fi(h,v,b){ns(h,v),0<b.length&&(h.i=null,h.g.set(Or(h,v),I(b)),h.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var S=v[b];const J=encodeURIComponent(String(S)),ue=this.V(S);for(S=0;S<ue.length;S++){var H=J;ue[S]!==""&&(H+="="+encodeURIComponent(String(ue[S]))),h.push(H)}}return this.i=h.join("&")};function Or(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ss(h,v){v&&!h.j&&(xn(h),h.i=null,h.g.forEach(function(b,S){var H=S.toLowerCase();S!=H&&(ns(this,S),Fi(this,H,b))},h)),h.j=v}function Fp(h,v){const b=new bn;if(u.Image){const S=new Image;S.onload=E(ir,b,"TestLoadImage: loaded",!0,v,S),S.onerror=E(ir,b,"TestLoadImage: error",!1,v,S),S.onabort=E(ir,b,"TestLoadImage: abort",!1,v,S),S.ontimeout=E(ir,b,"TestLoadImage: timeout",!1,v,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else v(!1)}function Bd(h,v){const b=new bn,S=new AbortController,H=setTimeout(()=>{S.abort(),ir(b,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:S.signal}).then(J=>{clearTimeout(H),J.ok?ir(b,"TestPingServer: ok",!0,v):ir(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),ir(b,"TestPingServer: error",!1,v)})}function ir(h,v,b,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(b)}catch{}}function zp(){this.g=new Ko}function Wd(h,v,b){const S=b||"";try{Di(h,function(H,J){let ue=H;m(H)&&(ue=Gs(H)),v.push(S+J+"="+encodeURIComponent(ue))})}catch(H){throw v.push(S+"type="+encodeURIComponent("_badmap")),H}}function Zs(h){this.l=h.Ub||null,this.j=h.eb||!1}C(Zs,Ts),Zs.prototype.g=function(){return new ea(this.l,this.j)},Zs.prototype.i=(function(h){return function(){return h}})({});function ea(h,v){Bt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ea,Bt),t=ea.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,is(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||u).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ss(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qd(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function qd(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ss(this):is(this),this.readyState==3&&qd(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ss(this))},t.Qa=function(h){this.g&&(this.response=h,ss(this))},t.ga=function(){this.g&&ss(this)};function ss(h){h.readyState=4,h.l=null,h.j=null,h.v=null,is(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=v.next();return h.join(`\r
`)};function is(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ys(h){let v="";return G(h,function(b,S){v+=S,v+=":",v+=b,v+=`\r
`}),v}function zi(h,v,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Ys(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):vt(h,v,b))}function At(h){Bt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(At,Bt);var Up=/^https?$/i,Fc=["POST","PUT"];t=At.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():es.g(),this.v=this.o?Ri(this.o):Ri(es),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){ta(this,J);return}if(h=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)b.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())b.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(J=>J.toLowerCase()=="content-type"),H=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Fc,v,void 0))||S||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ue]of b)this.g.setRequestHeader(J,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{el(this),this.u=!0,this.g.send(h),this.u=!1}catch(J){ta(this,J)}};function ta(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Xa(h),br(h)}function Xa(h){h.A||(h.A=!0,_t(h,"complete"),_t(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,_t(this,"complete"),_t(this,"abort"),br(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),br(this,!0)),At.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?zc(this):this.bb())},t.bb=function(){zc(this)};function zc(h){if(h.h&&typeof l<"u"&&(!h.v[1]||or(h)!=4||h.Z()!=2)){if(h.u&&or(h)==4)Yr(h.Ea,0,h);else if(_t(h,"readystatechange"),or(h)==4){h.h=!1;try{const ue=h.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var S;if(S=ue===0){var H=String(h.D).match(Jo)[1]||null;!H&&u.self&&u.self.location&&(H=u.self.location.protocol.slice(0,-1)),S=!Up.test(H?H.toLowerCase():"")}b=S}if(b)_t(h,"complete"),_t(h,"success");else{h.m=6;try{var J=2<or(h)?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.Z()+"]",Xa(h)}}finally{br(h)}}}}function br(h,v){if(h.g){el(h);const b=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||_t(h,"ready");try{b.onreadystatechange=S}catch{}}}function el(h){h.I&&(u.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function or(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Ni(v)}};function Uc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function tl(h){const v={};h=(h.g&&2<=or(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(F(h[S]))continue;var b=D(h[S]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const J=v[H]||[];v[H]=J,J.push(b)}A(v,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cs(h,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||v}function $c(h){this.Aa=0,this.i=[],this.j=new bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cs("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cs("baseRetryDelayMs",5e3,h),this.cb=Cs("retryDelaySeedMs",1e4,h),this.Wa=Cs("forwardChannelMaxRetries",2,h),this.wa=Cs("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Yo(h&&h.concurrentRequestLimit),this.Da=new zp,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$c.prototype,t.la=8,t.G=1,t.connect=function(h,v,b,S){Ke(0),this.W=h,this.H=v||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.I=Qd(this,null,this.W),As(this)};function kn(h){if(nl(h),h.G==3){var v=h.U++,b=wr(h.I);if(vt(b,"SID",h.K),vt(b,"RID",v),vt(b,"TYPE","terminate"),Js(h,b),v=new ts(h,h.j,v),v.L=2,v.v=Mi(wr(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&u.Image&&(new Image().src=v.v,b=!0),b||(v.g=Zd(v.j,null),v.g.ea(v.v)),v.F=Date.now(),wt(v)}Gd(h)}function os(h){h.g&&(Bc(h),h.g.cancel(),h.g=null)}function nl(h){os(h),h.u&&(u.clearTimeout(h.u),h.u=null),il(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function As(h){if(!_r(h.h)&&!h.s){h.s=!0;var v=h.Ga;Re||de(),X||(Re(),X=!0),pe.add(v,h),h.B=0}}function $p(h,v){return Ld(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=zt(x(h.Ga,h,v),Kd(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new ts(this,this.j,h);let J=this.o;if(this.S&&(J?(J=k(J),P(J,this.S)):J=this.S),this.m!==null||this.O||(H.H=J,J=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=Ui(this,H,v),b=wr(this.I),vt(b,"RID",h),vt(b,"CVER",22),this.D&&vt(b,"X-HTTP-Session-Id",this.D),Js(this,b),J&&(this.O?v="headers="+encodeURIComponent(String(Ys(J)))+"&"+v:this.m&&zi(b,this.m,J)),Mc(this.h,H),this.Ua&&vt(b,"TYPE","init"),this.P?(vt(b,"$req",v),vt(b,"SID","null"),H.T=!0,Qa(H,b,null)):Qa(H,b,v),this.G=2}}else this.G==3&&(h?rl(this,h):this.i.length==0||_r(this.h)||rl(this))};function rl(h,v){var b;v?b=v.l:b=h.U++;const S=wr(h.I);vt(S,"SID",h.K),vt(S,"RID",b),vt(S,"AID",h.T),Js(h,S),h.m&&h.o&&zi(S,h.m,h.o),b=new ts(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Ui(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Mc(h.h,b),Qa(b,S,v)}function Js(h,v){h.H&&G(h.H,function(b,S){vt(v,S,b)}),h.l&&Di({},function(b,S){vt(v,S,b)})}function Ui(h,v,b){b=Math.min(h.i.length,b);var S=h.l?x(h.l.Na,h.l,h):null;e:{var H=h.i;let J=-1;for(;;){const ue=["count="+b];J==-1?0<b?(J=H[0].g,ue.push("ofs="+J)):J=0:ue.push("ofs="+J);let ht=!0;for(let tn=0;tn<b;tn++){let it=H[tn].g;const un=H[tn].map;if(it-=J,0>it)J=Math.max(0,H[tn].g-100),ht=!1;else try{Wd(un,ue,"req"+it+"_")}catch{S&&S(un)}}if(ht){S=ue.join("&");break e}}}return h=h.i.splice(0,b),v.D=h,S}function na(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;Re||de(),X||(Re(),X=!0),pe.add(v,h),h.v=0}}function sl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=zt(x(h.Fa,h),Kd(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,Hd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=zt(x(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ke(10),os(this),Hd(this))};function Bc(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function Hd(h){h.g=new ts(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=wr(h.qa);vt(v,"RID","rpc"),vt(v,"SID",h.K),vt(v,"AID",h.T),vt(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&vt(v,"TO",h.ja),vt(v,"TYPE","xmlhttp"),Js(h,v),h.m&&h.o&&zi(v,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=Mi(wr(v)),b.m=null,b.P=!0,Oc(b,h)}t.Za=function(){this.C!=null&&(this.C=null,os(this),sl(this),Ke(19))};function il(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function ol(h,v){var b=null;if(h.g==v){il(h),Bc(h),h.g=null;var S=2}else if(Wn(h.h,v))b=v.D,Md(h.h,v),S=1;else return;if(h.G!=0){if(v.o)if(S==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var H=h.B;S=Kt(),_t(S,new Bn(S,b)),As(h)}else na(h);else if(H=v.s,H==3||H==0&&0<v.X||!(S==1&&$p(h,v)||S==2&&sl(h)))switch(b&&0<b.length&&(v=h.h,v.i=v.i.concat(b)),H){case 1:Xs(h,5);break;case 4:Xs(h,10);break;case 3:Xs(h,6);break;default:Xs(h,2)}}}function Kd(h,v){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*v}function Xs(h,v){if(h.j.info("Error code "+v),v==2){var b=x(h.fb,h),S=h.Xa;const H=!S;S=new Qs(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Xo(S,"https"),Mi(S),H?Fp(S.toString(),b):Bd(S.toString(),b)}else Ke(2);h.G=0,h.l&&h.l.sa(v),Gd(h),nl(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function Gd(h){if(h.G=0,h.ka=[],h.l){const v=Vd(h.h);(v.length!=0||h.i.length!=0)&&(R(h.ka,v),R(h.ka,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.ra()}}function Qd(h,v,b){var S=b instanceof Qs?wr(b):new Qs(b);if(S.g!="")v&&(S.g=v+"."+S.g),Oi(S,S.s);else{var H=u.location;S=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;var J=new Qs(null);S&&Xo(J,S),v&&(J.g=v),H&&Oi(J,H),b&&(J.l=b),S=J}return b=h.D,v=h.ya,b&&v&&vt(S,b,v),vt(S,"VER",h.la),Js(h,S),S}function Zd(h,v,b){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new At(new Zs({eb:b})):new At(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wc(){}t=Wc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function al(){}al.prototype.g=function(h,v){return new qn(h,v)};function qn(h,v){Bt.call(this),this.g=new $c(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!F(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!F(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Ns(this)}C(qn,Bt),qn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){kn(this.g)},qn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=Gs(h),h=b);v.i.push(new Od(v.Ya++,h)),v.G==3&&As(v)},qn.prototype.N=function(){this.g.l=null,delete this.j,kn(this.g),delete this.g,qn.aa.N.call(this)};function Yd(h){yt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const b in v){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}C(Yd,yt);function Jd(){Ht.call(this),this.status=1}C(Jd,Ht);function Ns(h){this.g=h}C(Ns,Wc),Ns.prototype.ua=function(){_t(this.g,"a")},Ns.prototype.ta=function(h){_t(this.g,new Yd(h))},Ns.prototype.sa=function(h){_t(this.g,new Jd)},Ns.prototype.ra=function(){_t(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,KE=function(){return new al},HE=function(){return Kt()},qE=Ct,iy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,yf=Ka,Rd.COMPLETE="complete",WE=Rd,Pi.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,bu=Pi,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,BE=At}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});const Rb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vn.UNAUTHENTICATED=new Vn(null),Vn.GOOGLE_CREDENTIALS=new Vn("google-credentials-uid"),Vn.FIRST_PARTY=new Vn("first-party-uid"),Vn.MOCK_USER=new Vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new Wy("@firebase/firestore");function mu(){return Ma.logLevel}function Ee(t,...e){if(Ma.logLevel<=nt.DEBUG){const n=e.map(o0);Ma.debug(`Firestore (${bc}): ${t}`,...n)}}function bi(t,...e){if(Ma.logLevel<=nt.ERROR){const n=e.map(o0);Ma.error(`Firestore (${bc}): ${t}`,...n)}}function ic(t,...e){if(Ma.logLevel<=nt.WARN){const n=e.map(o0);Ma.warn(`Firestore (${bc}): ${t}`,...n)}}function o0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t="Unexpected state"){const e=`FIRESTORE (${bc}) INTERNAL ASSERTION FAILED: `+t;throw bi(e),new Error(e)}function pt(t,e){t||Ue()}function We(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Ei{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Vn.UNAUTHENTICATED)))}shutdown(){}}class nj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class rj{constructor(e){this.t=e,this.currentUser=Vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pt(this.o===void 0);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new Io;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Io,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Io)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt(typeof r.accessToken=="string"),new GE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string"),new Vn(e)}}class sj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Vn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ij{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new sj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class oj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pt(this.o===void 0);const r=o=>{o.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,Ee("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(pt(typeof n.token=="string"),this.R=n.token,new oj(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=lj(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%e.length))}return r}}function ct(t,e){return t<e?-1:t>e?1:0}function oc(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new kt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new kt(0,0))}static max(){return new Be(new kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(),r===void 0?r=e.length-n:r>e.length-n&&Ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wu?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=e.get(s),l=n.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class It extends Wu{construct(e,n,r){return new It(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new It(n)}static emptyPath(){return new It([])}}const cj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cn extends Wu{construct(e,n,r){return new Cn(e,n,r)}static isValidIdentifier(e){return cj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Cn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cn(n)}static emptyPath(){return new Cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(It.fromString(e))}static fromName(e){return new Ne(It.fromString(e).popFirst(5))}static empty(){return new Ne(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return It.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new It(e.slice()))}}function uj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Be.fromTimestamp(r===1e9?new kt(n+1,0):new kt(n,r));return new No(s,Ne.empty(),e)}function dj(t){return new No(t.readTime,t.key,-1)}class No{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new No(Be.min(),Ne.empty(),-1)}static max(){return new No(Be.max(),Ne.empty(),-1)}}function hj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==fj)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,r)=>{n(e)}))}static reject(e){return new oe(((n,r)=>{r(e)}))}static waitFor(e){return new oe(((n,r)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&n()}),(d=>r(d)))})),l=!0,o===s&&n()}))}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next((s=>s?oe.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,o)=>{r.push(n.call(this,s,o))})),this.waitFor(r)}static mapArray(e,n){return new oe(((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next((y=>{l[m]=y,++u,u===o&&r(l)}),(y=>s(y)))}}))}static doWhile(e,n){return new oe(((r,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):r()};o()}))}}function mj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}a0.oe=-1;function hp(t){return t==null}function Ff(t){return t===0&&1/t==-1/0}function gj(t){return typeof t=="number"&&Number.isInteger(t)&&!Ff(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function za(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){this.comparator=e,this.root=n||In.EMPTY}insert(e,n){return new Vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??In.RED,this.left=s??In.EMPTY,this.right=o??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new In(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return In.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(e,n,r,s,o){return this}insert(e,n,r){return new In(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jb(this.data.getIterator())}getIteratorFrom(e){return new jb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new An(this.comparator);return n.data=e,n}}class jb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new Sr([])}unionWith(e){let n=new An(Cn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oc(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new YE("Invalid base64 string: "+o):o}})(e);return new Nn(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new Nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nn.EMPTY_BYTE_STRING=new Nn("");const yj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(t){if(pt(!!t),typeof t=="string"){let e=0;const n=yj.exec(t);if(pt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qt(t.seconds),nanos:qt(t.nanos)}}function qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Va(t){return typeof t=="string"?Nn.fromBase64String(t):Nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function c0(t){const e=t.mapValue.fields.__previous_value__;return l0(e)?c0(e):e}function qu(t){const e=Ro(t.mapValue.fields.__local_write_time__.timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n,r,s,o,l,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=m}}class Hu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Hu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh={mapValue:{}};function Fa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l0(t)?4:wj(t)?9007199254740991:_j(t)?10:11:Ue()}function qs(t,e){if(t===e)return!0;const n=Fa(t);if(n!==Fa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qu(t).isEqual(qu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Ro(s.timestampValue),u=Ro(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return Va(s.bytesValue).isEqual(Va(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return qt(s.geoPointValue.latitude)===qt(o.geoPointValue.latitude)&&qt(s.geoPointValue.longitude)===qt(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return qt(s.integerValue)===qt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=qt(s.doubleValue),u=qt(o.doubleValue);return l===u?Ff(l)===Ff(u):isNaN(l)&&isNaN(u)}return!1})(t,e);case 9:return oc(t.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Pb(l)!==Pb(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!qs(l[d],u[d])))return!1;return!0})(t,e);default:return Ue()}}function Ku(t,e){return(t.values||[]).find((n=>qs(n,e)))!==void 0}function ac(t,e){if(t===e)return 0;const n=Fa(t),r=Fa(e);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=qt(o.integerValue||o.doubleValue),d=qt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(t,e);case 3:return Db(t.timestampValue,e.timestampValue);case 4:return Db(qu(t),qu(e));case 5:return ct(t.stringValue,e.stringValue);case 6:return(function(o,l){const u=Va(o),d=Va(l);return u.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let m=0;m<u.length&&m<d.length;m++){const y=ct(u[m],d[m]);if(y!==0)return y}return ct(u.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=ct(qt(o.latitude),qt(l.latitude));return u!==0?u:ct(qt(o.longitude),qt(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Ob(t.arrayValue,e.arrayValue);case 10:return(function(o,l){var u,d,m,y;const _=o.fields||{},x=l.fields||{},E=(u=_.value)===null||u===void 0?void 0:u.arrayValue,C=(d=x.value)===null||d===void 0?void 0:d.arrayValue,I=ct(((m=E==null?void 0:E.values)===null||m===void 0?void 0:m.length)||0,((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0);return I!==0?I:Ob(E,C)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Yh.mapValue&&l===Yh.mapValue)return 0;if(o===Yh.mapValue)return 1;if(l===Yh.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),m=l.fields||{},y=Object.keys(m);d.sort(),y.sort();for(let _=0;_<d.length&&_<y.length;++_){const x=ct(d[_],y[_]);if(x!==0)return x;const E=ac(u[d[_]],m[y[_]]);if(E!==0)return E}return ct(d.length,y.length)})(t.mapValue,e.mapValue);default:throw Ue()}}function Db(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ct(t,e);const n=Ro(t),r=Ro(e),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Ob(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=ac(n[s],r[s]);if(o)return o}return ct(n.length,r.length)}function lc(t){return oy(t)}function oy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Ro(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Va(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=oy(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${oy(n.fields[l])}`;return s+"}"})(t.mapValue):Ue()}function Lb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ay(t){return!!t&&"integerValue"in t}function u0(t){return!!t&&"arrayValue"in t}function Mb(t){return!!t&&"nullValue"in t}function Vb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vf(t){return!!t&&"mapValue"in t}function _j(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Nu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return za(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Nu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.value=e}static empty(){return new mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nu(n)}setAll(e){let n=Cn.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=Nu(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());vf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];vf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){za(n,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new mr(Nu(this.value))}}function JE(t){const e=[];return za(t.fields,((n,r)=>{const s=new Cn([n]);if(vf(r)){const o=JE(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n,r,s,o,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Fn(e,0,Be.min(),Be.min(),Be.min(),mr.empty(),0)}static newFoundDocument(e,n,r,s){return new Fn(e,1,n,Be.min(),r,s,0)}static newNoDocument(e,n){return new Fn(e,2,n,Be.min(),Be.min(),mr.empty(),0)}static newUnknownDocument(e,n){return new Fn(e,3,n,Be.min(),Be.min(),mr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){this.position=e,this.inclusive=n}}function Fb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=Ne.comparator(Ne.fromName(l.referenceValue),n.key):r=ac(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function zb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n="asc"){this.field=e,this.dir=n}}function bj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{}class Xt extends XE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kj(e,n,r):n==="array-contains"?new Ij(e,r):n==="in"?new Sj(e,r):n==="not-in"?new Cj(e,r):n==="array-contains-any"?new Aj(e,r):new Xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ej(e,r):new Tj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ac(n,this.value)):n!==null&&Fa(this.value)===Fa(n)&&this.matchesComparison(ac(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bs extends XE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new bs(e,n)}matches(e){return eT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function eT(t){return t.op==="and"}function tT(t){return xj(t)&&eT(t)}function xj(t){for(const e of t.filters)if(e instanceof bs)return!1;return!0}function ly(t){if(t instanceof Xt)return t.field.canonicalString()+t.op.toString()+lc(t.value);if(tT(t))return t.filters.map((e=>ly(e))).join(",");{const e=t.filters.map((n=>ly(n))).join(",");return`${t.op}(${e})`}}function nT(t,e){return t instanceof Xt?(function(r,s){return s instanceof Xt&&r.op===s.op&&r.field.isEqual(s.field)&&qs(r.value,s.value)})(t,e):t instanceof bs?(function(r,s){return s instanceof bs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,u)=>o&&nT(l,s.filters[u])),!0):!1})(t,e):void Ue()}function rT(t){return t instanceof Xt?(function(n){return`${n.field.canonicalString()} ${n.op} ${lc(n.value)}`})(t):t instanceof bs?(function(n){return n.op.toString()+" {"+n.getFilters().map(rT).join(" ,")+"}"})(t):"Filter"}class kj extends Xt{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ej extends Xt{constructor(e,n){super(e,"in",n),this.keys=sT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Tj extends Xt{constructor(e,n){super(e,"not-in",n),this.keys=sT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function sT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>Ne.fromName(r.referenceValue)))}class Ij extends Xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return u0(n)&&Ku(n.arrayValue,this.value)}}class Sj extends Xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ku(this.value.arrayValue,n)}}class Cj extends Xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ku(this.value.arrayValue,n)}}class Aj extends Xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!u0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ku(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.ue=null}}function Ub(t,e=null,n=[],r=[],s=null,o=null,l=null){return new Nj(t,e,n,r,s,o,l)}function d0(t){const e=We(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>ly(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),hp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>lc(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>lc(r))).join(",")),e.ue=n}return e.ue}function h0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zb(t.startAt,e.startAt)&&zb(t.endAt,e.endAt)}function cy(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Rj(t,e,n,r,s,o,l,u){return new xc(t,e,n,r,s,o,l,u)}function f0(t){return new xc(t)}function $b(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iT(t){return t.collectionGroup!==null}function Ru(t){const e=We(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new An(Cn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(u=u.add(m.field))}))})),u})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Gu(o,r))})),n.has(Cn.keyField().canonicalString())||e.ce.push(new Gu(Cn.keyField(),r))}return e.ce}function $s(t){const e=We(t);return e.le||(e.le=Pj(e,Ru(t))),e.le}function Pj(t,e){if(t.limitType==="F")return Ub(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Gu(s.field,o)}));const n=t.endAt?new zf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zf(t.startAt.position,t.startAt.inclusive):null;return Ub(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function uy(t,e){const n=t.filters.concat([e]);return new xc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Uf(t,e,n){return new xc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fp(t,e){return h0($s(t),$s(e))&&t.limitType===e.limitType}function oT(t){return`${d0($s(t))}|lt:${t.limitType}`}function Rl(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>rT(s))).join(", ")}]`),hp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>lc(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>lc(s))).join(",")),`Target(${r})`})($s(t))}; limitType=${t.limitType})`}function pp(t,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,s){for(const o of Ru(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const m=Fb(l,u,d);return l.inclusive?m<=0:m<0})(r.startAt,Ru(r),s)||r.endAt&&!(function(l,u,d){const m=Fb(l,u,d);return l.inclusive?m>=0:m>0})(r.endAt,Ru(r),s))})(t,e)}function jj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aT(t){return(e,n)=>{let r=!1;for(const s of Ru(t)){const o=Dj(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function Dj(t,e,n){const r=t.field.isKeyField()?Ne.comparator(e.key,n.key):(function(o,l,u){const d=l.data.field(o),m=u.data.field(o);return d!==null&&m!==null?ac(d,m):Ue()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){za(this.inner,((n,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return ZE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=new Vt(Ne.comparator);function xi(){return Oj}const lT=new Vt(Ne.comparator);function xu(...t){let e=lT;for(const n of t)e=e.insert(n.key,n);return e}function cT(t){let e=lT;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function xa(){return Pu()}function uT(){return Pu()}function Pu(){return new kc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Lj=new Vt(Ne.comparator),Mj=new An(Ne.comparator);function Ye(...t){let e=Mj;for(const n of t)e=e.add(n);return e}const Vj=new An(ct);function Fj(){return Vj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ff(e)?"-0":e}}function dT(t){return{integerValue:""+t}}function zj(t,e){return gj(e)?dT(e):p0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){this._=void 0}}function Uj(t,e,n){return t instanceof Qu?(function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&l0(o)&&(o=c0(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}})(n,e):t instanceof Zu?fT(t,e):t instanceof Yu?pT(t,e):(function(s,o){const l=hT(s,o),u=Bb(l)+Bb(s.Pe);return ay(l)&&ay(s.Pe)?dT(u):p0(s.serializer,u)})(t,e)}function $j(t,e,n){return t instanceof Zu?fT(t,e):t instanceof Yu?pT(t,e):n}function hT(t,e){return t instanceof $f?(function(r){return ay(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Qu extends mp{}class Zu extends mp{constructor(e){super(),this.elements=e}}function fT(t,e){const n=mT(e);for(const r of t.elements)n.some((s=>qs(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Yu extends mp{constructor(e){super(),this.elements=e}}function pT(t,e){let n=mT(e);for(const r of t.elements)n=n.filter((s=>!qs(s,r)));return{arrayValue:{values:n}}}class $f extends mp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Bb(t){return qt(t.integerValue||t.doubleValue)}function mT(t){return u0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n){this.field=e,this.transform=n}}function Wj(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Zu&&s instanceof Zu||r instanceof Yu&&s instanceof Yu?oc(r.elements,s.elements,qs):r instanceof $f&&s instanceof $f?qs(r.Pe,s.Pe):r instanceof Qu&&s instanceof Qu})(t.transform,e.transform)}class qj{constructor(e,n){this.version=e,this.transformResults=n}}class Yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _f(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class gp{}function gT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yp(t.key,Yn.none()):new _d(t.key,t.data,Yn.none());{const n=t.data,r=mr.empty();let s=new An(Cn.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Fo(t.key,r,new Sr(s.toArray()),Yn.none())}}function Hj(t,e,n){t instanceof _d?(function(s,o,l){const u=s.value.clone(),d=qb(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,n):t instanceof Fo?(function(s,o,l){if(!_f(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=qb(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(yT(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function ju(t,e,n,r){return t instanceof _d?(function(o,l,u,d){if(!_f(o.precondition,l))return u;const m=o.value.clone(),y=Hb(o.fieldTransforms,d,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(t,e,n,r):t instanceof Fo?(function(o,l,u,d){if(!_f(o.precondition,l))return u;const m=Hb(o.fieldTransforms,d,l),y=l.data;return y.setAll(yT(o)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(t,e,n,r):(function(o,l,u){return _f(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(t,e,n)}function Kj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=hT(r.transform,s||null);o!=null&&(n===null&&(n=mr.empty()),n.set(r.field,o))}return n||null}function Wb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oc(r,s,((o,l)=>Wj(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _d extends gp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fo extends gp{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function yT(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function qb(t,e,n){const r=new Map;pt(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,$j(l,u,n[s]))}return r}function Hb(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,Uj(o,l,e))}return r}class yp extends gp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gj extends gp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Hj(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ju(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ju(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uT();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=n.has(s.key)?null:u;const d=gT(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Be.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&oc(this.mutations,e.mutations,((n,r)=>Wb(n,r)))&&oc(this.baseMutations,e.baseMutations,((n,r)=>Wb(n,r)))}}class m0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pt(e.mutations.length===r.length);let s=(function(){return Lj})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new m0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,ot;function Jj(t){switch(t){default:return Ue();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function vT(t){if(t===void 0)return bi("GRPC error has no .code"),re.UNKNOWN;switch(t){case Jt.OK:return re.OK;case Jt.CANCELLED:return re.CANCELLED;case Jt.UNKNOWN:return re.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return re.INTERNAL;case Jt.UNAVAILABLE:return re.UNAVAILABLE;case Jt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Jt.NOT_FOUND:return re.NOT_FOUND;case Jt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Jt.ABORTED:return re.ABORTED;case Jt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Jt.DATA_LOSS:return re.DATA_LOSS;default:return Ue()}}(ot=Jt||(Jt={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new Pa([4294967295,4294967295],0);function Kb(t){const e=Xj().encode(t),n=new $E;return n.update(e),new Uint8Array(n.digest())}function Gb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pa([n,r],0),new Pa([s,o],0)]}class g0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ku(`Invalid padding: ${n}`);if(r<0)throw new ku(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ku(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ku(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Pa.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Pa.fromNumber(r)));return s.compare(eD)===1&&(s=new Pa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Kb(e),[r,s]=Gb(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);if(!this.de(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new g0(o,s,n);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.Ie===0)return;const n=Kb(e),[r,s]=Gb(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,wd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vp(Be.min(),s,new Vt(ct),xi(),Ye())}}class wd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wd(r,n,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class _T{constructor(e,n){this.targetId=e,this.me=n}}class wT{constructor(e,n,r=Nn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Qb{constructor(){this.fe=0,this.ge=Yb(),this.pe=Nn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ye(),n=Ye(),r=Ye();return this.ge.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ue()}})),new wd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Yb()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tD{constructor(e){this.Le=e,this.Be=new Map,this.ke=xi(),this.qe=Zb(),this.Qe=new Vt(ct)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ue()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,s)=>{this.ze(s)&&n(s)}))}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const o=s.target;if(cy(o))if(r===0){const l=new Ne(o.path);this.Ue(n,l,Fn.newNoDocument(l,Be.min()))}else pt(r===1);else{const l=this.Ye(n);if(l!==r){const u=this.Ze(e),d=u?this.Xe(u,e,l):1;if(d!==0){this.je(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,u;try{l=Va(r).toUint8Array()}catch(d){if(d instanceof YE)return ic("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new g0(l,s,o)}catch(d){return ic(d instanceof ku?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach((o=>{const l=this.Le.tt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),s++)})),s}rt(e){const n=new Map;this.Be.forEach(((o,l)=>{const u=this.Je(l);if(u){if(o.current&&cy(u.target)){const d=new Ne(u.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Fn.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}}));let r=Ye();this.qe.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const m=this.Je(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.ke.forEach(((o,l)=>l.setReadTime(e)));const s=new vp(e,n,this.Qe,this.ke,r);return this.ke=xi(),this.qe=Zb(),this.Qe=new Vt(ct),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Qb,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new An(ct),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Qb),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Zb(){return new Vt(Ne.comparator)}function Yb(){return new Vt(Ne.comparator)}const nD={asc:"ASCENDING",desc:"DESCENDING"},rD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sD={and:"AND",or:"OR"};class iD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dy(t,e){return t.useProto3Json||hp(e)?e:{value:e}}function Bf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oD(t,e){return Bf(t,e.toTimestamp())}function Bs(t){return pt(!!t),Be.fromTimestamp((function(n){const r=Ro(n);return new kt(r.seconds,r.nanos)})(t))}function y0(t,e){return hy(t,e).canonicalString()}function hy(t,e){const n=(function(s){return new It(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function xT(t){const e=It.fromString(t);return pt(ST(e)),e}function fy(t,e){return y0(t.databaseId,e.path)}function Tg(t,e){const n=xT(e);if(n.get(1)!==t.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(ET(n))}function kT(t,e){return y0(t.databaseId,e)}function aD(t){const e=xT(t);return e.length===4?It.emptyPath():ET(e)}function py(t){return new It(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ET(t){return pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Jb(t,e,n){return{name:fy(t,e),fields:n.value.mapValue.fields}}function lD(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ue()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(m,y){return m.useProto3Json?(pt(y===void 0||typeof y=="string"),Nn.fromBase64String(y||"")):(pt(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Nn.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(m){const y=m.code===void 0?re.UNKNOWN:vT(m.code);return new ye(y,m.message||"")})(l);n=new wT(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Tg(t,r.document.name),o=Bs(r.document.updateTime),l=r.document.createTime?Bs(r.document.createTime):Be.min(),u=new mr({mapValue:{fields:r.document.fields}}),d=Fn.newFoundDocument(s,o,l,u),m=r.targetIds||[],y=r.removedTargetIds||[];n=new wf(m,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Tg(t,r.document),o=r.readTime?Bs(r.readTime):Be.min(),l=Fn.newNoDocument(s,o),u=r.removedTargetIds||[];n=new wf([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Tg(t,r.document),o=r.removedTargetIds||[];n=new wf([],o,s,null)}else{if(!("filter"in e))return Ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new Yj(s,o),u=r.targetId;n=new _T(u,l)}}return n}function cD(t,e){let n;if(e instanceof _d)n={update:Jb(t,e.key,e.value)};else if(e instanceof yp)n={delete:fy(t,e.key)};else if(e instanceof Fo)n={update:Jb(t,e.key,e.data),updateMask:vD(e.fieldMask)};else{if(!(e instanceof Gj))return Ue();n={verify:fy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof Qu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Zu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Yu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof $f)return{fieldPath:l.field.canonicalString(),increment:u.Pe};throw Ue()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:oD(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue()})(t,e.precondition)),n}function uD(t,e){return t&&t.length>0?(pt(e!==void 0),t.map((n=>(function(s,o){let l=s.updateTime?Bs(s.updateTime):Bs(o);return l.isEqual(Be.min())&&(l=Bs(o)),new qj(l,s.transformResults||[])})(n,e)))):[]}function dD(t,e){return{documents:[kT(t,e.path)]}}function hD(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kT(t,s);const o=(function(m){if(m.length!==0)return IT(bs.create(m,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(m){if(m.length!==0)return m.map((y=>(function(x){return{field:Pl(x.field),direction:mD(x.dir)}})(y)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=dy(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:n,parent:s}}function fD(t){let e=aD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pt(r===1);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=(function(_){const x=TT(_);return x instanceof bs&&tT(x)?x.getFilters():[x]})(n.where));let l=[];n.orderBy&&(l=(function(_){return _.map((x=>(function(C){return new Gu(jl(C.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(x)))})(n.orderBy));let u=null;n.limit&&(u=(function(_){let x;return x=typeof _=="object"?_.value:_,hp(x)?null:x})(n.limit));let d=null;n.startAt&&(d=(function(_){const x=!!_.before,E=_.values||[];return new zf(E,x)})(n.startAt));let m=null;return n.endAt&&(m=(function(_){const x=!_.before,E=_.values||[];return new zf(E,x)})(n.endAt)),Rj(e,s,l,o,u,"F",d,m)}function pD(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=jl(n.unaryFilter.field);return Xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=jl(n.unaryFilter.field);return Xt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=jl(n.unaryFilter.field);return Xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=jl(n.unaryFilter.field);return Xt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}})(t):t.fieldFilter!==void 0?(function(n){return Xt.create(jl(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return bs.create(n.compositeFilter.filters.map((r=>TT(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ue()}})(n.compositeFilter.op))})(t):Ue()}function mD(t){return nD[t]}function gD(t){return rD[t]}function yD(t){return sD[t]}function Pl(t){return{fieldPath:t.canonicalString()}}function jl(t){return Cn.fromServerFormat(t.fieldPath)}function IT(t){return t instanceof Xt?(function(n){if(n.op==="=="){if(Vb(n.value))return{unaryFilter:{field:Pl(n.field),op:"IS_NAN"}};if(Mb(n.value))return{unaryFilter:{field:Pl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vb(n.value))return{unaryFilter:{field:Pl(n.field),op:"IS_NOT_NAN"}};if(Mb(n.value))return{unaryFilter:{field:Pl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pl(n.field),op:gD(n.op),value:n.value}}})(t):t instanceof bs?(function(n){const r=n.getFilters().map((s=>IT(s)));return r.length===1?r[0]:{compositeFilter:{op:yD(n.op),filters:r}}})(t):Ue()}function vD(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ST(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r,s,o=Be.min(),l=Be.min(),u=Nn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.ct=e}}function wD(t){const e=fD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.un=new xD}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(No.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(No.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class xD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new An(It.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new An(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new cc(0)}static kn(){return new cc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.changes=new kc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&ju(r.mutation,s,Sr.empty(),kt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ye()){const s=xa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((o=>{let l=xu();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=xa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ye())))}populateOverlays(e,n,r){const s=[];return r.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{n.set(l,u)}))}))}computeViews(e,n,r,s){let o=xi();const l=Pu(),u=(function(){return Pu()})();return n.forEach(((d,m)=>{const y=r.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof Fo)?o=o.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),ju(y.mutation,m,y.mutation.getFieldMask(),kt.now())):l.set(m.key,Sr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((m,y)=>l.set(m,y))),n.forEach(((m,y)=>{var _;return u.set(m,new ED(y,(_=l.get(m))!==null&&_!==void 0?_:null))})),u)))}recalculateAndSaveOverlays(e,n){const r=Pu();let s=new Vt(((l,u)=>l-u)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const u of l)u.keys().forEach((d=>{const m=n.get(d);if(m===null)return;let y=r.get(d)||Sr.empty();y=u.applyToLocalView(m,y),r.set(d,y);const _=(s.get(u.batchId)||Ye()).add(d);s=s.insert(u.batchId,_)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),m=d.key,y=d.value,_=uT();y.forEach((x=>{if(!o.has(x)){const E=gT(n.get(x),r.get(x));E!==null&&_.set(x,E),o=o.add(x)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,_))}return oe.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(l){return Ne.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):oe.resolve(xa());let u=-1,d=o;return l.next((m=>oe.forEach(m,((y,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(y)?oe.resolve():this.remoteDocumentCache.getEntry(e,y).next((x=>{d=d.insert(y,x)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,d,m,Ye()))).next((y=>({batchId:u,changes:cT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next((r=>{let s=xu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=xu();return this.indexManager.getCollectionParents(e,o).next((u=>oe.forEach(u,(d=>{const m=(function(_,x){return new xc(x,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((y=>{y.forEach(((_,x)=>{l=l.insert(_,x)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s)))).next((l=>{o.forEach(((d,m)=>{const y=m.getKey();l.get(y)===null&&(l=l.insert(y,Fn.newInvalidDocument(y)))}));let u=xu();return l.forEach(((d,m)=>{const y=o.get(d);y!==void 0&&ju(y.mutation,m,Sr.empty(),kt.now()),pp(n,m)&&(u=u.insert(d,m))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Bs(s.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(s){return{name:s.name,query:wD(s.bundledQuery),readTime:Bs(s.readTime)}})(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this.overlays=new Vt(Ne.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xa();return oe.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,o)=>{this.ht(e,n,o)})),oe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const s=xa(),o=n.length+1,l=new Ne(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Vt(((m,y)=>m-y));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=o.get(m.largestBatchId);y===null&&(y=xa(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const u=xa(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,y)=>u.set(m,y))),!(u.size()>=s)););return oe.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Zj(n,r));let o=this.Ir.get(n);o===void 0&&(o=Ye(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.sessionToken=Nn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(){this.Tr=new An(mn.Er),this.dr=new An(mn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new mn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new mn(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new Ne(new It([])),r=new mn(n,e),s=new mn(n,e+1),o=[];return this.dr.forEachInRange([r,s],(l=>{this.Vr(l),o.push(l.key)})),o}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ne(new It([])),r=new mn(n,e),s=new mn(n,e+1);let o=Ye();return this.dr.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new mn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ne.comparator(e.key,n.key)||ct(e.wr,n.wr)}static Ar(e,n){return ct(e.wr,n.wr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new An(mn.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Qj(o,n,r,s);this.mutationQueue.push(l);for(const u of s)this.br=this.br.add(new mn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),o=s<0?0:s;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mn(n,0),s=new mn(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,s],(l=>{const u=this.Dr(l.wr);o.push(u)})),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new An(ct);return n.forEach((s=>{const o=new mn(s,0),l=new mn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],(u=>{r=r.add(u.wr)}))})),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Ne.isDocumentKey(o)||(o=o.child(""));const l=new mn(new Ne(o),0);let u=new An(ct);return this.br.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(u=u.add(d.wr)),!0)}),l),oe.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){pt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(n.mutations,(s=>{const o=new mn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new mn(n,0),s=this.br.firstAfterOrEqual(r);return oe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.Mr=e,this.docs=(function(){return new Vt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(n))}getEntries(e,n){let r=xi();return n.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Fn.newInvalidDocument(s))})),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=xi();const l=n.path,u=new Ne(l.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:y}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||hj(dj(y),r)<=0||(s.has(y.key)||pp(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ue()}Or(e,n){return oe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new RD(this)}getSize(e){return oe.resolve(this.size)}}class RD extends kD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.persistence=e,this.Nr=new kc((n=>d0(n)),h0),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new v0,this.targetCount=0,this.kr=cc.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,s)=>n(s))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new cc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.Nr.forEach(((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),oe.waitFor(o).next((()=>s))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new a0(0),this.Kr=!1,this.Kr=!0,this.$r=new CD,this.referenceDelegate=e(this),this.Ur=new PD(this),this.indexManager=new bD,this.remoteDocumentCache=(function(s){return new ND(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new _D(n),this.Gr=new ID(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new AD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ee("MemoryPersistence","Starting transaction:",e);const s=new DD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((o=>this.referenceDelegate.jr(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Hr(e,n){return oe.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class DD extends pj{constructor(e){super(),this.currentSequenceNumber=e}}class _0{constructor(e){this.persistence=e,this.Jr=new v0,this.Yr=null}static Zr(e){return new _0(e)}get Xr(){if(this.Yr)return this.Yr;throw Ue()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.Xr.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,(r=>{const s=Ne.fromPath(r);return this.ei(e,s).next((o=>{o||n.removeEntry(s,Be.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ye(),s=Ye();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new w0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return k2()?8:mj(Un())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.Yi(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.Zi(e,n,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new OD;return this.Xi(e,n,l).next((u=>{if(o.result=u,this.zi)return this.es(e,n,l,u.size)}))})).next((()=>o.result))}es(e,n,r,s){return r.documentReadCount<this.ji?(mu()<=nt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",Rl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(mu()<=nt.DEBUG&&Ee("QueryEngine","Query:",Rl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(mu()<=nt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",Rl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$s(n))):oe.resolve())}Yi(e,n){if($b(n))return oe.resolve(null);let r=$s(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Uf(n,null,"F"),r=$s(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Ye(...o);return this.Ji.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.ts(n,u);return this.ns(n,m,l,d.readTime)?this.Yi(e,Uf(n,null,"F")):this.rs(e,m,n,d)}))))})))))}Zi(e,n,r,s){return $b(n)||s.isEqual(Be.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next((o=>{const l=this.ts(n,o);return this.ns(n,l,r,s)?oe.resolve(null):(mu()<=nt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Rl(n)),this.rs(e,l,n,uj(s,-1)).next((u=>u)))}))}ts(e,n){let r=new An(aT(e));return n.forEach(((s,o)=>{pp(e,o)&&(r=r.add(o))})),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,r){return mu()<=nt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",Rl(n)),this.Ji.getDocumentsMatchingQuery(e,n,No.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Vt(ct),this._s=new kc((o=>d0(o)),h0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function VD(t,e,n,r){return new MD(t,e,n,r)}async function CT(t,e){const n=We(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let d=Ye();for(const m of s){l.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}for(const m of o){u.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(r,d).next((m=>({hs:m,removedBatchIds:l,addedBatchIds:u})))}))}))}function FD(t,e){const n=We(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return(function(u,d,m,y){const _=m.batch,x=_.keys();let E=oe.resolve();return x.forEach((C=>{E=E.next((()=>y.getEntry(d,C))).next((I=>{const R=m.docVersions.get(C);pt(R!==null),I.version.compareTo(R)<0&&(_.applyToRemoteDocument(I,m),I.isValidDocument()&&(I.setReadTime(m.commitVersion),y.addEntry(I)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(d,_)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=Ye();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(d=d.add(u.batch.mutations[m].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function AT(t){const e=We(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function zD(t,e){const n=We(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach(((y,_)=>{const x=s.get(_);if(!x)return;u.push(n.Ur.removeMatchingKeys(o,y.removedDocuments,_).next((()=>n.Ur.addMatchingKeys(o,y.addedDocuments,_))));let E=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?E=E.withResumeToken(Nn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):y.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(y.resumeToken,r)),s=s.insert(_,E),(function(I,R,U){return I.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(x,E,y)&&u.push(n.Ur.updateTargetData(o,E))}));let d=xi(),m=Ye();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))})),u.push(UD(o,l,e.documentUpdates).next((y=>{d=y.Ps,m=y.Is}))),!r.isEqual(Be.min())){const y=n.Ur.getLastRemoteSnapshotVersion(o).next((_=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(y)}return oe.waitFor(u).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,m))).next((()=>d))})).then((o=>(n.os=s,o)))}function UD(t,e,n){let r=Ye(),s=Ye();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let l=xi();return n.forEach(((u,d)=>{const m=o.get(u);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Be.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):Ee("LocalStore","Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",d.version)})),{Ps:l,Is:s}}))}function $D(t,e){const n=We(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function BD(t,e){const n=We(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Ur.getTargetData(r,e).next((o=>o?(s=o,oe.resolve(s)):n.Ur.allocateTargetId(r).next((l=>(s=new bo(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function my(t,e,n){const r=We(t),s=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!vd(l))throw l;Ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Xb(t,e,n){const r=We(t);let s=Be.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,m,y){const _=We(d),x=_._s.get(y);return x!==void 0?oe.resolve(_.os.get(x)):_.Ur.getTargetData(m,y)})(r,l,$s(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,n?s:Be.min(),n?o:Ye()))).next((u=>(WD(r,jj(e),u),{documents:u,Ts:o})))))}function WD(t,e,n){let r=t.us.get(e)||Be.min();n.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.us.set(e,r)}class ex{constructor(){this.activeTargetIds=Fj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qD{constructor(){this.so=new ex,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ex,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh=null;function Ig(){return Jh===null?Jh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jh++,"0x"+Jh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection";class QD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,r,s,o,l){const u=Ig(),d=this.xo(n,r.toUriEncodedString());Ee("RestConnection",`Sending RPC '${n}' ${u}:`,d,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,l),this.No(n,d,m,s).then((y=>(Ee("RestConnection",`Received RPC '${n}' ${u}: `,y),y)),(y=>{throw ic("RestConnection",`RPC '${n}' ${u} failed with error: `,y,"url: ",d,"request:",s),y}))}Lo(n,r,s,o,l,u){return this.Mo(n,r,s,o,l)}Oo(n,r,s){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bc})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((o,l)=>n[l]=o)),s&&s.headers.forEach(((o,l)=>n[l]=o))}xo(n,r){const s=KD[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const o=Ig();return new Promise(((l,u)=>{const d=new BE;d.setWithCredentials(!0),d.listenOnce(WE.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case yf.NO_ERROR:const y=d.getResponseJson();Ee(Mn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),l(y);break;case yf.TIMEOUT:Ee(Mn,`RPC '${e}' ${o} timed out`),u(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:const _=d.getStatus();if(Ee(Mn,`RPC '${e}' ${o} failed with status:`,_,"response text:",d.getResponseText()),_>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const E=x==null?void 0:x.error;if(E&&E.status&&E.message){const C=(function(R){const U=R.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(U)>=0?U:re.UNKNOWN})(E.status);u(new ye(C,E.message))}else u(new ye(re.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ye(re.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{Ee(Mn,`RPC '${e}' ${o} completed.`)}}));const m=JSON.stringify(s);Ee(Mn,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,r,15)}))}Bo(e,n,r){const s=Ig(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=KE(),u=HE(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const y=o.join("");Ee(Mn,`Creating RPC '${e}' stream ${s}: ${y}`,d);const _=l.createWebChannel(y,d);let x=!1,E=!1;const C=new GD({Io:R=>{E?Ee(Mn,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(x||(Ee(Mn,`Opening RPC '${e}' stream ${s} transport.`),_.open(),x=!0),Ee(Mn,`RPC '${e}' stream ${s} sending:`,R),_.send(R))},To:()=>_.close()}),I=(R,U,F)=>{R.listen(U,(M=>{try{F(M)}catch(q){setTimeout((()=>{throw q}),0)}}))};return I(_,bu.EventType.OPEN,(()=>{E||(Ee(Mn,`RPC '${e}' stream ${s} transport opened.`),C.yo())})),I(_,bu.EventType.CLOSE,(()=>{E||(E=!0,Ee(Mn,`RPC '${e}' stream ${s} transport closed`),C.So())})),I(_,bu.EventType.ERROR,(R=>{E||(E=!0,ic(Mn,`RPC '${e}' stream ${s} transport errored:`,R),C.So(new ye(re.UNAVAILABLE,"The operation could not be completed")))})),I(_,bu.EventType.MESSAGE,(R=>{var U;if(!E){const F=R.data[0];pt(!!F);const M=F,q=M.error||((U=M[0])===null||U===void 0?void 0:U.error);if(q){Ee(Mn,`RPC '${e}' stream ${s} received error:`,q);const Z=q.status;let G=(function(N){const P=Jt[N];if(P!==void 0)return vT(P)})(Z),A=q.message;G===void 0&&(G=re.INTERNAL,A="Unknown error status: "+Z+" with message "+q.message),E=!0,C.So(new ye(G,A)),_.close()}else Ee(Mn,`RPC '${e}' stream ${s} received:`,F),C.bo(F)}})),I(u,qE.STAT_EVENT,(R=>{R.stat===iy.PROXY?Ee(Mn,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===iy.NOPROXY&&Ee(Mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.wo()}),0),C}}function Sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){return new iD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n,r=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n,r,s,o,l,u,d){this.ui=e,this.Ho=r,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new NT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(bi(n.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===n&&this.P_(r,s)}),(r=>{e((()=>{const s=new ye(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(Ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZD extends RT{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=lD(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Be.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Be.min():l.readTime?Bs(l.readTime):Be.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=py(this.serializer),n.addTarget=(function(o,l){let u;const d=l.target;if(u=cy(d)?{documents:dD(o,d)}:{query:hD(o,d)._t},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=bT(o,l.resumeToken);const m=dy(o,l.expectedCount);m!==null&&(u.expectedCount=m)}else if(l.snapshotVersion.compareTo(Be.min())>0){u.readTime=Bf(o,l.snapshotVersion.toTimestamp());const m=dy(o,l.expectedCount);m!==null&&(u.expectedCount=m)}return u})(this.serializer,e);const r=pD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=py(this.serializer),n.removeTarget=e,this.a_(n)}}class YD extends RT{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pt(!!e.streamToken),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=uD(e.writeResults,e.commitTime),r=Bs(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=py(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>cD(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Mo(e,hy(n,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(re.UNKNOWN,o.toString())}))}Lo(e,n,r,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Lo(e,hy(n,r),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(re.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class XD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(bi(n),this.D_=!1):Ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o((l=>{r.enqueueAndForget((async()=>{Ua(this)&&(Ee("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const m=We(d);m.L_.add(4),await bd(m),m.q_.set("Unknown"),m.L_.delete(4),await wp(m)})(this))}))})),this.q_=new XD(r,s)}}async function wp(t){if(Ua(t))for(const e of t.B_)await e(!0)}async function bd(t){for(const e of t.B_)await e(!1)}function PT(t,e){const n=We(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),E0(n)?k0(n):Ec(n).r_()&&x0(n,e))}function b0(t,e){const n=We(t),r=Ec(n);n.N_.delete(e),r.r_()&&jT(n,e),n.N_.size===0&&(r.r_()?r.o_():Ua(n)&&n.q_.set("Unknown"))}function x0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ec(t).A_(e)}function jT(t,e){t.Q_.xe(e),Ec(t).R_(e)}function k0(t){t.Q_=new tD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ec(t).start(),t.q_.v_()}function E0(t){return Ua(t)&&!Ec(t).n_()&&t.N_.size>0}function Ua(t){return We(t).L_.size===0}function DT(t){t.Q_=void 0}async function t4(t){t.q_.set("Online")}async function n4(t){t.N_.forEach(((e,n)=>{x0(t,e)}))}async function r4(t,e){DT(t),E0(t)?(t.q_.M_(e),k0(t)):t.q_.set("Unknown")}async function s4(t,e,n){if(t.q_.set("Online"),e instanceof wT&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.N_.delete(u),s.Q_.removeTarget(u))})(t,e)}catch(r){Ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wf(t,r)}else if(e instanceof wf?t.Q_.Ke(e):e instanceof _T?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Be.min()))try{const r=await AT(t.localStore);n.compareTo(r)>=0&&await(function(o,l){const u=o.Q_.rt(l);return u.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.N_.get(m);y&&o.N_.set(m,y.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,m)=>{const y=o.N_.get(d);if(!y)return;o.N_.set(d,y.withResumeToken(Nn.EMPTY_BYTE_STRING,y.snapshotVersion)),jT(o,d);const _=new bo(y.target,d,m,y.sequenceNumber);x0(o,_)})),o.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){Ee("RemoteStore","Failed to raise snapshot:",r),await Wf(t,r)}}async function Wf(t,e,n){if(!vd(e))throw e;t.L_.add(1),await bd(t),t.q_.set("Offline"),n||(n=()=>AT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await wp(t)}))}function OT(t,e){return e().catch((n=>Wf(t,n,e)))}async function bp(t){const e=We(t),n=Po(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;i4(e);)try{const s=await $D(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,o4(e,s)}catch(s){await Wf(e,s)}LT(e)&&MT(e)}function i4(t){return Ua(t)&&t.O_.length<10}function o4(t,e){t.O_.push(e);const n=Po(t);n.r_()&&n.V_&&n.m_(e.mutations)}function LT(t){return Ua(t)&&!Po(t).n_()&&t.O_.length>0}function MT(t){Po(t).start()}async function a4(t){Po(t).p_()}async function l4(t){const e=Po(t);for(const n of t.O_)e.m_(n.mutations)}async function c4(t,e,n){const r=t.O_.shift(),s=m0.from(r,e,n);await OT(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await bp(t)}async function u4(t,e){e&&Po(t).V_&&await(async function(r,s){if((function(l){return Jj(l)&&l!==re.ABORTED})(s.code)){const o=r.O_.shift();Po(r).s_(),await OT(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await bp(r)}})(t,e),LT(t)&&MT(t)}async function nx(t,e){const n=We(t);n.asyncQueue.verifyOperationInProgress(),Ee("RemoteStore","RemoteStore received new credentials");const r=Ua(n);n.L_.add(3),await bd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await wp(n)}async function d4(t,e){const n=We(t);e?(n.L_.delete(2),await wp(n)):e||(n.L_.add(2),await bd(n),n.q_.set("Unknown"))}function Ec(t){return t.K_||(t.K_=(function(n,r,s){const o=We(n);return o.w_(),new ZD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Eo:t4.bind(null,t),Ro:n4.bind(null,t),mo:r4.bind(null,t),d_:s4.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),E0(t)?k0(t):t.q_.set("Unknown")):(await t.K_.stop(),DT(t))}))),t.K_}function Po(t){return t.U_||(t.U_=(function(n,r,s){const o=We(n);return o.w_(),new YD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:a4.bind(null,t),mo:u4.bind(null,t),f_:l4.bind(null,t),g_:c4.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await bp(t)):(await t.U_.stop(),t.O_.length>0&&(Ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,u=new T0(e,n,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I0(t,e){if(bi("AsyncQueue",`${e}: ${t}`),vd(t))return new ye(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=xu(),this.sortedSet=new Vt(this.comparator)}static emptySet(e){return new Ul(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ul;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.W_=new Vt(Ne.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ue():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class uc{constructor(e,n,r,s,o,l,u,d,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach((u=>{l.push({type:0,doc:u})})),new uc(e,n,Ul.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class f4{constructor(){this.queries=sx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=We(n),o=s.queries;s.queries=sx(),o.forEach(((l,u)=>{for(const d of u.j_)d.onError(r)}))})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function sx(){return new kc((t=>oT(t)),fp)}async function VT(t,e){const n=We(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(r=2):(o=new h4,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=I0(l,`Initialization of query '${Rl(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&S0(n)}async function FT(t,e){const n=We(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function p4(t,e){const n=We(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const u of l.j_)u.X_(s)&&(r=!0);l.z_=s}}r&&S0(n)}function m4(t,e,n){const r=We(t),s=r.queries.get(e);if(s)for(const o of s.j_)o.onError(n);r.queries.delete(e)}function S0(t){t.Y_.forEach((e=>{e.next()}))}var gy,ix;(ix=gy||(gy={})).ea="default",ix.Cache="cache";class zT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.key=e}}class $T{constructor(e){this.key=e}}class g4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ye(),this.mutatedKeys=Ye(),this.Aa=aT(e),this.Ra=new Ul(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new rx,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,_)=>{const x=s.get(y),E=pp(this.query,_)?_:null,C=!!x&&this.mutatedKeys.has(x.key),I=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;x&&E?x.data.isEqual(E.data)?C!==I&&(r.track({type:3,doc:E}),R=!0):this.ga(x,E)||(r.track({type:2,doc:E}),R=!0,(d&&this.Aa(E,d)>0||m&&this.Aa(E,m)<0)&&(u=!0)):!x&&E?(r.track({type:0,doc:E}),R=!0):x&&!E&&(r.track({type:1,doc:x}),R=!0,(d||m)&&(u=!0)),R&&(E?(l=l.add(E),o=I?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{Ra:l,fa:r,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((y,_)=>(function(E,C){const I=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return I(E)-I(C)})(y.type,_.type)||this.Aa(y.doc,_.doc))),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,m=d!==this.Ea;return this.Ea=d,l.length!==0||m?{snapshot:new uc(this.query,e.Ra,o,l,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ye(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new $T(r))})),this.da.forEach((r=>{e.has(r)||n.push(new UT(r))})),n}ba(e){this.Ta=e.Ts,this.da=Ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return uc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class y4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class v4{constructor(e){this.key=e,this.va=!1}}class _4{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new kc((u=>oT(u)),fp),this.Ma=new Map,this.xa=new Set,this.Oa=new Vt(Ne.comparator),this.Na=new Map,this.La=new v0,this.Ba={},this.ka=new Map,this.qa=cc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function w4(t,e,n=!0){const r=GT(t);let s;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await BT(r,e,n,!0),s}async function b4(t,e){const n=GT(t);await BT(n,e,!0,!1)}async function BT(t,e,n,r){const s=await BD(t.localStore,$s(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await x4(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&PT(t.remoteStore,s),u}async function x4(t,e,n,r,s){t.Ka=(_,x,E)=>(async function(I,R,U,F){let M=R.view.ma(U);M.ns&&(M=await Xb(I.localStore,R.query,!1).then((({documents:A})=>R.view.ma(A,M))));const q=F&&F.targetChanges.get(R.targetId),Z=F&&F.targetMismatches.get(R.targetId)!=null,G=R.view.applyChanges(M,I.isPrimaryClient,q,Z);return ax(I,R.targetId,G.wa),G.snapshot})(t,_,x,E);const o=await Xb(t.localStore,e,!0),l=new g4(e,o.Ts),u=l.ma(o.documents),d=wd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),m=l.applyChanges(u,t.isPrimaryClient,d);ax(t,n,m.wa);const y=new y4(e,n,l);return t.Fa.set(e,y),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function k4(t,e,n){const r=We(t),s=r.Fa.get(e),o=r.Ma.get(s.targetId);if(o.length>1)return r.Ma.set(s.targetId,o.filter((l=>!fp(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await my(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&b0(r.remoteStore,s.targetId),yy(r,s.targetId)})).catch(yd)):(yy(r,s.targetId),await my(r.localStore,s.targetId,!0))}async function E4(t,e){const n=We(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),b0(n.remoteStore,r.targetId))}async function T4(t,e,n){const r=P4(t);try{const s=await(function(l,u){const d=We(l),m=kt.now(),y=u.reduce(((E,C)=>E.add(C.key)),Ye());let _,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let C=xi(),I=Ye();return d.cs.getEntries(E,y).next((R=>{C=R,C.forEach(((U,F)=>{F.isValidDocument()||(I=I.add(U))}))})).next((()=>d.localDocuments.getOverlayedDocuments(E,C))).next((R=>{_=R;const U=[];for(const F of u){const M=Kj(F,_.get(F.key).overlayedDocument);M!=null&&U.push(new Fo(F.key,M,JE(M.value.mapValue),Yn.exists(!0)))}return d.mutationQueue.addMutationBatch(E,m,U,u)})).next((R=>{x=R;const U=R.applyToLocalDocumentSet(_,I);return d.documentOverlayCache.saveOverlays(E,R.batchId,U)}))})).then((()=>({batchId:x.batchId,changes:cT(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let m=l.Ba[l.currentUser.toKey()];m||(m=new Vt(ct)),m=m.insert(u,d),l.Ba[l.currentUser.toKey()]=m})(r,s.batchId,n),await xd(r,s.changes),await bp(r.remoteStore)}catch(s){const o=I0(s,"Failed to persist write");n.reject(o)}}async function WT(t,e){const n=We(t);try{const r=await zD(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=n.Na.get(o);l&&(pt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?pt(l.va):s.removedDocuments.size>0&&(pt(l.va),l.va=!1))})),await xd(n,r,e)}catch(r){await yd(r)}}function ox(t,e,n){const r=We(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach(((o,l)=>{const u=l.view.Z_(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=We(l);d.onlineState=u;let m=!1;d.queries.forEach(((y,_)=>{for(const x of _.j_)x.Z_(u)&&(m=!0)})),m&&S0(d)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function I4(t,e,n){const r=We(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),o=s&&s.key;if(o){let l=new Vt(Ne.comparator);l=l.insert(o,Fn.newNoDocument(o,Be.min()));const u=Ye().add(o),d=new vp(Be.min(),new Map,new Vt(ct),l,u);await WT(r,d),r.Oa=r.Oa.remove(o),r.Na.delete(e),C0(r)}else await my(r.localStore,e,!1).then((()=>yy(r,e,n))).catch(yd)}async function S4(t,e){const n=We(t),r=e.batch.batchId;try{const s=await FD(n.localStore,e);HT(n,r,null),qT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xd(n,s)}catch(s){await yd(s)}}async function C4(t,e,n){const r=We(t);try{const s=await(function(l,u){const d=We(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return d.mutationQueue.lookupMutationBatch(m,u).next((_=>(pt(_!==null),y=_.keys(),d.mutationQueue.removeMutationBatch(m,_)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,y,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>d.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);HT(r,e,n),qT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xd(r,s)}catch(s){await yd(s)}}function qT(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function HT(t,e,n){const r=We(t);let s=r.Ba[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function yy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||KT(t,r)}))}function KT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(b0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),C0(t))}function ax(t,e,n){for(const r of n)r instanceof UT?(t.La.addReference(r.key,e),A4(t,r)):r instanceof $T?(Ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||KT(t,r.key)):Ue()}function A4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),C0(t))}function C0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ne(It.fromString(e)),r=t.qa.next();t.Na.set(r,new v4(n)),t.Oa=t.Oa.insert(n,r),PT(t.remoteStore,new bo($s(f0(n.path)),r,"TargetPurposeLimboResolution",a0.oe))}}async function xd(t,e,n){const r=We(t),s=[],o=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((u,d)=>{l.push(r.Ka(d,e,n).then((m=>{var y;if((m||n)&&r.isPrimaryClient){const _=m?!m.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(m){s.push(m);const _=w0.Wi(d.targetId,m);o.push(_)}})))})),await Promise.all(l),r.Ca.d_(s),await(async function(d,m){const y=We(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>oe.forEach(m,(x=>oe.forEach(x.$i,(E=>y.persistence.referenceDelegate.addReference(_,x.targetId,E))).next((()=>oe.forEach(x.Ui,(E=>y.persistence.referenceDelegate.removeReference(_,x.targetId,E)))))))))}catch(_){if(!vd(_))throw _;Ee("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of m){const x=_.targetId;if(!_.fromCache){const E=y.os.get(x),C=E.snapshotVersion,I=E.withLastLimboFreeSnapshotVersion(C);y.os=y.os.insert(x,I)}}})(r.localStore,o))}async function N4(t,e){const n=We(t);if(!n.currentUser.isEqual(e)){Ee("SyncEngine","User change. New user:",e.toKey());const r=await CT(n.localStore,e);n.currentUser=e,(function(o,l){o.ka.forEach((u=>{u.forEach((d=>{d.reject(new ye(re.CANCELLED,l))}))})),o.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xd(n,r.hs)}}function R4(t,e){const n=We(t),r=n.Na.get(e);if(r&&r.va)return Ye().add(r.key);{let s=Ye();const o=n.Ma.get(e);if(!o)return s;for(const l of o){const u=n.Fa.get(l);s=s.unionWith(u.view.Va)}return s}}function GT(t){const e=We(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I4.bind(null,e),e.Ca.d_=p4.bind(null,e.eventManager),e.Ca.$a=m4.bind(null,e.eventManager),e}function P4(t){const e=We(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C4.bind(null,e),e}class qf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_p(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return VD(this.persistence,new LD,e.initialUser,this.serializer)}Ga(e){return new jD(_0.Zr,this.serializer)}Wa(e){return new qD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qf.provider={build:()=>new qf};class vy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ox(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=N4.bind(null,this.syncEngine),await d4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new f4})()}createDatastore(e){const n=_p(e.databaseInfo.databaseId),r=(function(o){return new QD(o)})(e.databaseInfo);return(function(o,l,u,d){return new JD(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,o,l,u){return new e4(r,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>ox(this.syncEngine,n,0)),(function(){return tx.D()?new tx:new HD})())}createSyncEngine(e,n){return(function(s,o,l,u,d,m,y){const _=new _4(s,o,l,u,d,m);return y&&(_.Qa=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const o=We(s);Ee("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await bd(o),o.k_.shutdown(),o.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vy.provider={build:()=>new vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Vn.UNAUTHENTICATED,this.clientId=QE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{Ee("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Ee("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=I0(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Cg(t,e){t.asyncQueue.verifyOperationInProgress(),Ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await CT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function lx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await D4(t);Ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>nx(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>nx(e.remoteStore,s))),t._onlineComponents=e}async function D4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;ic("Error using user provided cache. Falling back to memory cache: "+n),await Cg(t,new qf)}}else Ee("FirestoreClient","Using default OfflineComponentProvider"),await Cg(t,new qf);return t._offlineComponents}async function ZT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee("FirestoreClient","Using user provided OnlineComponentProvider"),await lx(t,t._uninitializedComponentsProvider._online)):(Ee("FirestoreClient","Using default OnlineComponentProvider"),await lx(t,new vy))),t._onlineComponents}function O4(t){return ZT(t).then((e=>e.syncEngine))}async function _y(t){const e=await ZT(t),n=e.eventManager;return n.onListen=w4.bind(null,e.syncEngine),n.onUnlisten=k4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=b4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=E4.bind(null,e.syncEngine),n}function L4(t,e,n={}){const r=new Io;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,m){const y=new QT({next:x=>{y.Za(),l.enqueueAndForget((()=>FT(o,_))),x.fromCache&&d.source==="server"?m.reject(new ye(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),_=new zT(u,y,{includeMetadataChanges:!0,_a:!0});return VT(o,_)})(await _y(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t,e,n){if(!n)throw new ye(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function M4(t,e,n,r){if(e===!0&&r===!0)throw new ye(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ux(t){if(!Ne.isDocumentKey(t))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dx(t){if(Ne.isDocumentKey(t))throw new ye(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue()}function Cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xp(t);throw new ye(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hx(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new tj;switch(r.type){case"firstParty":return new ij(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=cx.get(n);r&&(Ee("ComponentProvider","Removing Datastore"),cx.delete(n),r.terminate())})(this),Promise.resolve()}}function V4(t,e,n,r={}){var s;const o=(t=Cr(t,kp))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&ic("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Vn.MOCK_USER;else{u=g2(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ye(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Vn(m)}t._authCredentials=new nj(new GE(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class Jn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new So(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class So extends Si{constructor(e,n,r){super(e,n,f0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new Ne(e))}withConverter(e){return new So(this.firestore,e,this._path)}}function ft(t,e,...n){if(t=Mt(t),JT("collection","path",e),t instanceof kp){const r=It.fromString(e,...n);return dx(r),new So(t,null,r)}{if(!(t instanceof Jn||t instanceof So))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return dx(r),new So(t.firestore,null,r)}}function yn(t,e,...n){if(t=Mt(t),arguments.length===1&&(e=QE.newId()),JT("doc","path",e),t instanceof kp){const r=It.fromString(e,...n);return ux(r),new Jn(t,null,new Ne(r))}{if(!(t instanceof Jn||t instanceof So))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return ux(r),new Jn(t.firestore,t instanceof So?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new NT(this,"async_queue_retry"),this.Vu=()=>{const r=Sg();r&&Ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Sg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new Io;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!vd(e))throw e;Ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u})(r);throw bi("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=T0.createAndSchedule(this,e,n,r,(o=>this.yu(o)));return this.Tu.push(s),s}fu(){this.Eu&&Ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function px(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(t,["next","error","complete"])}class ki extends kp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new fx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fx(e),this._firestoreClient=void 0,await e}}}function XT(t,e){const n=typeof t=="object"?t:eE(),r=typeof t=="string"?t:"(default)",s=Hy(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=p2("firestore");o&&V4(s,...o)}return s}function Ep(t){if(t._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||F4(t),t._firestoreClient}function F4(t){var e,n,r;const s=t._freezeSettings(),o=(function(u,d,m,y){return new vj(u,d,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,YT(y.experimentalLongPollingOptions),y.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new j4(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dc(Nn.fromBase64String(e))}catch(n){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dc(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=/^__.*__$/;class U4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,n,this.fieldTransforms):new _d(e,this.data,n,this.fieldTransforms)}}class e1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function t1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class R0{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new R0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(t1(this.Cu)&&z4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class $4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_p(e)}Qu(e,n,r,s=!1){return new R0({Cu:e,methodName:n,qu:r,path:Cn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ed(t){const e=t._freezeSettings(),n=_p(t._databaseId);return new $4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function P0(t,e,n,r,s,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,s);D0("Data must be an object, but it was:",l,r);const u=s1(r,l);let d,m;if(o.merge)d=new Sr(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const _ of o.mergeFields){const x=wy(e,_,n);if(!l.contains(x))throw new ye(re.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);o1(y,x)||y.push(x)}d=new Sr(y),m=l.fieldTransforms.filter((_=>d.covers(_.field)))}else d=null,m=l.fieldTransforms;return new U4(new mr(u),d,m)}class Ip extends Tp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ip}}class j0 extends Tp{_toFieldTransform(e){return new Bj(e.path,new Qu)}isEqual(e){return e instanceof j0}}function n1(t,e,n,r){const s=t.Qu(1,e,n);D0("Data must be an object, but it was:",s,r);const o=[],l=mr.empty();za(r,((d,m)=>{const y=O0(e,d,n);m=Mt(m);const _=s.Nu(y);if(m instanceof Ip)o.push(y);else{const x=Td(m,_);x!=null&&(o.push(y),l.set(y,x))}}));const u=new Sr(o);return new e1(l,u,s.fieldTransforms)}function r1(t,e,n,r,s,o){const l=t.Qu(1,e,n),u=[wy(e,r,n)],d=[s];if(o.length%2!=0)throw new ye(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)u.push(wy(e,o[x])),d.push(o[x+1]);const m=[],y=mr.empty();for(let x=u.length-1;x>=0;--x)if(!o1(m,u[x])){const E=u[x];let C=d[x];C=Mt(C);const I=l.Nu(E);if(C instanceof Ip)m.push(E);else{const R=Td(C,I);R!=null&&(m.push(E),y.set(E,R))}}const _=new Sr(m);return new e1(y,_,l.fieldTransforms)}function B4(t,e,n,r=!1){return Td(n,t.Qu(r?4:3,e))}function Td(t,e){if(i1(t=Mt(t)))return D0("Unsupported field value:",e,t),s1(t,e);if(t instanceof Tp)return(function(r,s){if(!t1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const u of r){let d=Td(u,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(t,e)}return(function(r,s){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=kt.fromDate(r);return{timestampValue:Bf(s.serializer,o)}}if(r instanceof kt){const o=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bf(s.serializer,o)}}if(r instanceof A0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dc)return{bytesValue:bT(s.serializer,r._byteString)};if(r instanceof Jn){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:y0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof N0)return(function(l,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return p0(u.serializer,d)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${xp(r)}`)})(t,e)}function s1(t,e){const n={};return ZE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):za(t,((r,s)=>{const o=Td(s,e.Mu(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function i1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof kt||t instanceof A0||t instanceof dc||t instanceof Jn||t instanceof Tp||t instanceof N0)}function D0(t,e,n){if(!i1(n)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(n)){const r=xp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function wy(t,e,n){if((e=Mt(e))instanceof kd)return e._internalPath;if(typeof e=="string")return O0(t,e);throw Hf("Field path arguments must be of type string or ",t,!1,void 0,n)}const W4=new RegExp("[~\\*/\\[\\]]");function O0(t,e,n){if(e.search(W4)>=0)throw Hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kd(...e.split("."))._internalPath}catch{throw Hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hf(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new ye(re.INVALID_ARGUMENT,u+t+d)}function o1(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new q4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(L0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class q4 extends a1{data(){return super.data()}}function L0(t,e){return typeof e=="string"?O0(t,e):e instanceof kd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class M0{}class V0 extends M0{}function Ci(t,e,...n){let r=[];e instanceof M0&&r.push(e),r=r.concat(n),(function(o){const l=o.filter((d=>d instanceof z0)).length,u=o.filter((d=>d instanceof F0)).length;if(l>1||l>0&&u>0)throw new ye(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class F0 extends V0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new F0(e,n,r)}_apply(e){const n=this._parse(e);return u1(e._query,n),new Si(e.firestore,e.converter,uy(e._query,n))}_parse(e){const n=Ed(e.firestore);return(function(o,l,u,d,m,y,_){let x;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ye(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){gx(_,y);const E=[];for(const C of _)E.push(mx(d,o,C));x={arrayValue:{values:E}}}else x=mx(d,o,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||gx(_,y),x=B4(u,l,_,y==="in"||y==="not-in");return Xt.create(m,y,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class z0 extends M0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new z0(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:bs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)u1(l,d),l=uy(l,d)})(e._query,n),new Si(e.firestore,e.converter,uy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class U0 extends V0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new U0(e,n)}_apply(e){const n=(function(s,o,l){if(s.startAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gu(o,l)})(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new xc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function Sp(t,e="asc"){const n=e,r=L0("orderBy",t);return U0._create(r,n)}class $0 extends V0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new $0(e,n,r)}_apply(e){return new Si(e.firestore,e.converter,Uf(e._query,this._limit,this._limitType))}}function c1(t){return $0._create("limit",t,"F")}function mx(t,e,n){if(typeof(n=Mt(n))=="string"){if(n==="")throw new ye(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iT(e)&&n.indexOf("/")!==-1)throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(It.fromString(n));if(!Ne.isDocumentKey(r))throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lb(t,new Ne(r))}if(n instanceof Jn)return Lb(t,n._key);throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xp(n)}.`)}function gx(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function u1(t,e){const n=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class H4{convertValue(e,n="none"){switch(Fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return za(e,((s,o)=>{r[s]=this.convertValue(o,n)})),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((l=>qt(l.doubleValue)));return new N0(o)}convertGeoPoint(e){return new A0(qt(e.latitude),qt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=c0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qu(e));default:return null}}convertTimestamp(e){const n=Ro(e);return new kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=It.fromString(e);pt(ST(r));const s=new Hu(r.get(1),r.get(3)),o=new Ne(r.popFirst(5));return s.isEqual(n)||bi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class d1 extends a1{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(L0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bf extends d1{data(e={}){return super.data(e)}}class h1{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Eu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new bf(this._firestore,this._userDataWriter,r.key,r,new Eu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new bf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Eu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new bf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Eu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return u.type!==0&&(m=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),y=l.indexOf(u.doc.key)),{type:K4(u.type),doc:d,oldIndex:m,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function K4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}class W0 extends H4{constructor(e){super(),this.firestore=e}convertBytes(e){return new dc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,n)}}function Vs(t){t=Cr(t,Si);const e=Cr(t.firestore,ki),n=Ep(e),r=new W0(e);return l1(t._query),L4(n,t._query).then((s=>new h1(e,r,t,s)))}function f1(t,e,n){t=Cr(t,Jn);const r=Cr(t.firestore,ki),s=B0(t.converter,e,n);return Id(r,[P0(Ed(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Yn.none())])}function $a(t,e,n,...r){t=Cr(t,Jn);const s=Cr(t.firestore,ki),o=Ed(s);let l;return l=typeof(e=Mt(e))=="string"||e instanceof kd?r1(o,"updateDoc",t._key,e,n,r):n1(o,"updateDoc",t._key,e),Id(s,[l.toMutation(t._key,Yn.exists(!0))])}function Tc(t){return Id(Cr(t.firestore,ki),[new yp(t._key,Yn.none())])}function Ir(t,e){const n=Cr(t.firestore,ki),r=yn(t),s=B0(t.converter,e);return Id(n,[P0(Ed(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Yn.exists(!1))]).then((()=>r))}function zo(t,...e){var n,r,s;t=Mt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||px(e[l])||(o=e[l],l++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(px(e[l])){const _=e[l];e[l]=(n=_.next)===null||n===void 0?void 0:n.bind(_),e[l+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[l+2]=(s=_.complete)===null||s===void 0?void 0:s.bind(_)}let d,m,y;if(t instanceof Jn)m=Cr(t.firestore,ki),y=f0(t._key.path),d={next:_=>{e[l]&&e[l](G4(m,t,_))},error:e[l+1],complete:e[l+2]};else{const _=Cr(t,Si);m=Cr(_.firestore,ki),y=_._query;const x=new W0(m);d={next:E=>{e[l]&&e[l](new h1(m,x,_,E))},error:e[l+1],complete:e[l+2]},l1(t._query)}return(function(x,E,C,I){const R=new QT(I),U=new zT(E,R,C);return x.asyncQueue.enqueueAndForget((async()=>VT(await _y(x),U))),()=>{R.Za(),x.asyncQueue.enqueueAndForget((async()=>FT(await _y(x),U)))}})(Ep(m),y,u,d)}function Id(t,e){return(function(r,s){const o=new Io;return r.asyncQueue.enqueueAndForget((async()=>T4(await O4(r),s,o))),o.promise})(Ep(t),e)}function G4(t,e,n){const r=n.docs.get(e._key),s=new W0(t);return new d1(t,s,e._key,r,new Eu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ed(e)}set(e,n,r){this._verifyNotCommitted();const s=Ag(e,this._firestore),o=B0(s.converter,n,r),l=P0(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,Yn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=Ag(e,this._firestore);let l;return l=typeof(n=Mt(n))=="string"||n instanceof kd?r1(this._dataReader,"WriteBatch.update",o._key,n,r,s):n1(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,Yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ag(e,this._firestore);return this._mutations=this._mutations.concat(new yp(n._key,Yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ag(t,e){if((t=Mt(t)).firestore!==e)throw new ye(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Kr(){return new j0("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t){return Ep(t=Cr(t,ki)),new Q4(t,(e=>Id(t,e)))}(function(e,n=!0){(function(s){bc=s})(_c),rc(new Oa("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new ki(new rj(r.getProvider("auth-internal")),new aj(r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(m.options.projectId,y)})(l,s),l);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),To(Rb,"4.7.3",e),To(Rb,"4.7.3","esm2017")})();const Z4={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function Y4(){if(typeof window<"u"&&window.GLOBAL_FIREBASE_CONFIG&&window.GLOBAL_FIREBASE_CONFIG.apiKey)return window.GLOBAL_FIREBASE_CONFIG;try{const t=Z4;if(t&&t.VITE_FIREBASE_API_KEY)return{apiKey:t.VITE_FIREBASE_API_KEY,authDomain:t.VITE_FIREBASE_AUTH_DOMAIN,projectId:t.VITE_FIREBASE_PROJECT_ID,storageBucket:t.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:t.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:t.VITE_FIREBASE_APP_ID,measurementId:t.VITE_FIREBASE_MEASUREMENT_ID}}catch{}if(typeof __firebase_config<"u")try{return typeof __firebase_config=="object"?__firebase_config:JSON.parse(__firebase_config)}catch(t){return console.error("[Firebase] Config parse failed (legacy):",t),null}return console.error("[Firebase] All config sources failed. Check index.html injection."),null}const io=Y4();if(!(io!=null&&io.apiKey)||!(io!=null&&io.projectId)){const t="[Firebase] Configuration is missing required fields (apiKey, projectId). Application cannot start.";throw console.error(t,io),new Error(t)}let by;ob().length>0?by=ob()[0]:by=Ky(io);const p1=by,He=UE(p1),Fe=XT(p1),J4=Object.freeze(Object.defineProperty({__proto__:null,EmailAuthProvider:Vo,Timestamp:kt,addDoc:Ir,collection:ft,deleteDoc:Tc,doc:yn,getAuth:UE,getDocs:Vs,getFirestore:XT,initializeApp:Ky,limit:c1,linkWithCredential:CE,onAuthStateChanged:n0,onSnapshot:zo,orderBy:Sp,query:Ci,serverTimestamp:Kr,setDoc:f1,signInAnonymously:EE,signInWithCustomToken:AE,signInWithEmailAndPassword:t0,signOut:r0,updateDoc:$a,updatePassword:NE,writeBatch:Cp},Symbol.toStringTag,{value:"Module"})),X4=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[s,o]=O.useState(!1),[l,u]=O.useState(null),d=async y=>{y.preventDefault(),u(null),o(!0);try{await t0(He,t,n)}catch(_){let x="Login failed.";switch(_.code){case"auth/invalid-email":x="Invalid email format.";break;case"auth/user-disabled":x="User disabled.";break;case"auth/user-not-found":x="User not found.";break;case"auth/wrong-password":x="Wrong password.";break;case"auth/too-many-requests":x="Too many requests. Try again later.";break;case"auth/network-request-failed":x="Network error.";break}u(x)}finally{o(!1)}},m=async()=>{u(null),o(!0);try{await EE(He)}catch(y){u("Guest login failed: "+y.message)}finally{o(!1)}};return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-premium-gradient p-4 antialiased",children:p.jsxs("div",{className:"max-w-md w-full p-6 sm:p-8 bg-white/70 dark:bg-gray-800/60 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 rounded-[2rem] shadow-2xl transition-all duration-300",children:[p.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[p.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-3xl shadow-lg mb-6 animate-float",children:p.jsx("img",{src:"/images/web-app-manifest-512x512.png",alt:"Logo",className:"h-12 w-12"})}),p.jsxs("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:["Task",p.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:""})]}),p.jsxs("form",{onSubmit:d,className:"space-y-5 sm:space-y-6",children:[l&&p.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium animate-in fade-in slide-in-from-top-4 duration-300 shadow-sm",children:l}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"login-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Email"}),p.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:y=>e(y.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"mail@example.com"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"login-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Password"}),p.jsx("input",{id:"login-password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:y=>r(y.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:""})]}),p.jsx("button",{type:"submit",disabled:s,className:"btn-premium w-full py-4 text-lg shadow-lg hover:shadow-xl active:scale-[0.98] transition-all",children:s?"...":""})]}),p.jsxs("div",{className:"mt-8",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200/50 dark:border-gray-700/50"})}),p.jsx("div",{className:"relative flex justify-center text-xs",children:p.jsx("span",{className:"px-3 bg-transparent text-gray-400 uppercase tracking-widest font-bold",children:"OR"})})]}),p.jsxs("button",{onClick:m,disabled:s,className:"mt-8 w-full py-3.5 bg-gray-100/50 hover:bg-gray-200/70 active:bg-gray-300 dark:bg-gray-700/30 dark:hover:bg-gray-600/50 dark:active:bg-gray-600 text-gray-700 dark:text-gray-200 font-bold rounded-2xl transition-all active:scale-95 flex items-center justify-center gap-3 border border-transparent hover:border-gray-300 dark:hover:border-gray-600",children:[p.jsx("span",{className:"text-xl",children:""})," "]})]})]})})},yx=t=>{let e;const n=new Set,r=(m,y)=>{const _=typeof m=="function"?m(e):m;if(!Object.is(_,e)){const x=e;e=y??(typeof _!="object"||_===null)?_:Object.assign({},e,_),n.forEach(E=>E(e,x))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>d,subscribe:m=>(n.add(m),()=>n.delete(m))},d=e=t(r,s,u);return u},eO=(t=>t?yx(t):yx),tO=t=>t;function nO(t,e=tO){const n=Me.useSyncExternalStore(t.subscribe,Me.useCallback(()=>e(t.getState()),[t,e]),Me.useCallback(()=>e(t.getInitialState()),[t,e]));return Me.useDebugValue(n),n}const vx=t=>{const e=eO(t),n=r=>nO(e,r);return Object.assign(n,e),n},Ba=(t=>t?vx(t):vx),rO={success:3e3,info:4e3,error:6e3},Xh=new Map,sO=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,11),xf=Ba(t=>({toasts:[],addToast:(e,n="info")=>{const r=sO();t(l=>({toasts:[...l.toasts,{id:r,message:e,type:n}]}));const s=rO[n],o=setTimeout(()=>{t(l=>({toasts:l.toasts.filter(u=>u.id!==r)})),Xh.delete(r)},s);Xh.set(r,o)},removeToast:e=>{const n=Xh.get(e);n&&(clearTimeout(n),Xh.delete(e)),t(r=>({toasts:r.toasts.filter(s=>s.id!==e)}))}})),ut={success:t=>xf.getState().addToast(t,"success"),error:t=>xf.getState().addToast(t,"error"),info:t=>xf.getState().addToast(t,"info")};function m1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=m1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function iO(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=m1(t))&&(r&&(r+=" "),r+=e);return r}const oO=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},aO=(t,e)=>({classGroupId:t,validator:e}),g1=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Kf="-",_x=[],lO="arbitrary..",cO=t=>{const e=dO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return uO(l);const u=l.split(Kf),d=u[0]===""&&u.length>1?1:0;return y1(u,d,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=r[l],m=n[l];return d?m?oO(m,d):d:m||_x}return n[l]||_x}}},y1=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],o=n.nextPart.get(s);if(o){const m=y1(t,e+1,o);if(m)return m}const l=n.validators;if(l===null)return;const u=e===0?t.join(Kf):t.slice(e).join(Kf),d=l.length;for(let m=0;m<d;m++){const y=l[m];if(y.validator(u))return y.classGroupId}},uO=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?lO+r:void 0})(),dO=t=>{const{theme:e,classGroups:n}=t;return hO(n,e)},hO=(t,e)=>{const n=g1();for(const r in t){const s=t[r];q0(s,n,r,e)}return n},q0=(t,e,n,r)=>{const s=t.length;for(let o=0;o<s;o++){const l=t[o];fO(l,e,n,r)}},fO=(t,e,n,r)=>{if(typeof t=="string"){pO(t,e,n);return}if(typeof t=="function"){mO(t,e,n,r);return}gO(t,e,n,r)},pO=(t,e,n)=>{const r=t===""?e:v1(e,t);r.classGroupId=n},mO=(t,e,n,r)=>{if(yO(t)){q0(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(aO(n,t))},gO=(t,e,n,r)=>{const s=Object.entries(t),o=s.length;for(let l=0;l<o;l++){const[u,d]=s[l];q0(d,v1(e,u),n,r)}},v1=(t,e)=>{let n=t;const r=e.split(Kf),s=r.length;for(let o=0;o<s;o++){const l=r[o];let u=n.nextPart.get(l);u||(u=g1(),n.nextPart.set(l,u)),n=u}return n},yO=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,vO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(o,l)=>{n[o]=l,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(o){let l=n[o];if(l!==void 0)return l;if((l=r[o])!==void 0)return s(o,l),l},set(o,l){o in n?n[o]=l:s(o,l)}}},xy="!",wx=":",_O=[],bx=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),wO=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const o=[];let l=0,u=0,d=0,m;const y=s.length;for(let I=0;I<y;I++){const R=s[I];if(l===0&&u===0){if(R===wx){o.push(s.slice(d,I)),d=I+1;continue}if(R==="/"){m=I;continue}}R==="["?l++:R==="]"?l--:R==="("?u++:R===")"&&u--}const _=o.length===0?s:s.slice(d);let x=_,E=!1;_.endsWith(xy)?(x=_.slice(0,-1),E=!0):_.startsWith(xy)&&(x=_.slice(1),E=!0);const C=m&&m>d?m-d:void 0;return bx(o,E,x,C)};if(e){const s=e+wx,o=r;r=l=>l.startsWith(s)?o(l.slice(s.length)):bx(_O,!1,l,void 0,!0)}if(n){const s=r;r=o=>n({className:o,parseClassName:s})}return r},bO=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let o=0;o<n.length;o++){const l=n[o],u=l[0]==="[",d=e.has(l);u||d?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},xO=t=>({cache:vO(t.cacheSize),parseClassName:wO(t),sortModifiers:bO(t),...cO(t)}),kO=/\s+/,EO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,l=[],u=t.trim().split(kO);let d="";for(let m=u.length-1;m>=0;m-=1){const y=u[m],{isExternal:_,modifiers:x,hasImportantModifier:E,baseClassName:C,maybePostfixModifierPosition:I}=n(y);if(_){d=y+(d.length>0?" "+d:d);continue}let R=!!I,U=r(R?C.substring(0,I):C);if(!U){if(!R){d=y+(d.length>0?" "+d:d);continue}if(U=r(C),!U){d=y+(d.length>0?" "+d:d);continue}R=!1}const F=x.length===0?"":x.length===1?x[0]:o(x).join(":"),M=E?F+xy:F,q=M+U;if(l.indexOf(q)>-1)continue;l.push(q);const Z=s(U,R);for(let G=0;G<Z.length;++G){const A=Z[G];l.push(M+A)}d=y+(d.length>0?" "+d:d)}return d},TO=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=_1(n))&&(s&&(s+=" "),s+=r);return s},_1=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=_1(t[r]))&&(n&&(n+=" "),n+=e);return n},IO=(t,...e)=>{let n,r,s,o;const l=d=>{const m=e.reduce((y,_)=>_(y),t());return n=xO(m),r=n.cache.get,s=n.cache.set,o=u,u(d)},u=d=>{const m=r(d);if(m)return m;const y=EO(d,n);return s(d,y),y};return o=l,(...d)=>o(TO(...d))},SO=[],sn=t=>{const e=n=>n[t]||SO;return e.isThemeGetter=!0,e},w1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,b1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,CO=/^\d+\/\d+$/,AO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,RO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,PO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Al=t=>CO.test(t),Ge=t=>!!t&&!Number.isNaN(Number(t)),ro=t=>!!t&&Number.isInteger(Number(t)),Ng=t=>t.endsWith("%")&&Ge(t.slice(0,-1)),li=t=>AO.test(t),DO=()=>!0,OO=t=>NO.test(t)&&!RO.test(t),x1=()=>!1,LO=t=>PO.test(t),MO=t=>jO.test(t),VO=t=>!we(t)&&!be(t),FO=t=>Ic(t,T1,x1),we=t=>w1.test(t),ga=t=>Ic(t,I1,OO),Rg=t=>Ic(t,WO,Ge),xx=t=>Ic(t,k1,x1),zO=t=>Ic(t,E1,MO),ef=t=>Ic(t,S1,LO),be=t=>b1.test(t),gu=t=>Sc(t,I1),UO=t=>Sc(t,qO),kx=t=>Sc(t,k1),$O=t=>Sc(t,T1),BO=t=>Sc(t,E1),tf=t=>Sc(t,S1,!0),Ic=(t,e,n)=>{const r=w1.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Sc=(t,e,n=!1)=>{const r=b1.exec(t);return r?r[1]?e(r[1]):n:!1},k1=t=>t==="position"||t==="percentage",E1=t=>t==="image"||t==="url",T1=t=>t==="length"||t==="size"||t==="bg-size",I1=t=>t==="length",WO=t=>t==="number",qO=t=>t==="family-name",S1=t=>t==="shadow",HO=()=>{const t=sn("color"),e=sn("font"),n=sn("text"),r=sn("font-weight"),s=sn("tracking"),o=sn("leading"),l=sn("breakpoint"),u=sn("container"),d=sn("spacing"),m=sn("radius"),y=sn("shadow"),_=sn("inset-shadow"),x=sn("text-shadow"),E=sn("drop-shadow"),C=sn("blur"),I=sn("perspective"),R=sn("aspect"),U=sn("ease"),F=sn("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Z=()=>[...q(),be,we],G=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto","contain","none"],k=()=>[be,we,d],N=()=>[Al,"full","auto",...k()],P=()=>[ro,"none","subgrid",be,we],D=()=>["auto",{span:["full",ro,be,we]},ro,be,we],V=()=>[ro,"auto",be,we],j=()=>["auto","min","max","fr",be,we],Ae=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],rt=()=>["start","end","center","stretch","center-safe","end-safe"],Ze=()=>["auto",...k()],Re=()=>[Al,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],X=()=>[t,be,we],pe=()=>[...q(),kx,xx,{position:[be,we]}],de=()=>["no-repeat",{repeat:["","x","y","space","round"]}],W=()=>["auto","cover","contain",$O,FO,{size:[be,we]}],ee=()=>[Ng,gu,ga],ce=()=>["","none","full",m,be,we],xe=()=>["",Ge,gu,ga],Oe=()=>["solid","dashed","dotted","double"],Pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Se=()=>[Ge,Ng,kx,xx],$e=()=>["","none",C,be,we],ne=()=>["none",Ge,be,we],he=()=>["none",Ge,be,we],st=()=>[Ge,be,we],gt=()=>[Al,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[li],breakpoint:[li],color:[DO],container:[li],"drop-shadow":[li],ease:["in","out","in-out"],font:[VO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[li],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[li],shadow:[li],spacing:["px",Ge],text:[li],"text-shadow":[li],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Al,we,be,R]}],container:["container"],columns:[{columns:[Ge,we,be,u]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Z()}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[ro,"auto",be,we]}],basis:[{basis:[Al,"full","auto",u,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ge,Al,"auto","initial","none",we]}],grow:[{grow:["",Ge,be,we]}],shrink:[{shrink:["",Ge,be,we]}],order:[{order:[ro,"first","last","none",be,we]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":j()}],"auto-rows":[{"auto-rows":j()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...Ae(),"normal"]}],"justify-items":[{"justify-items":[...rt(),"normal"]}],"justify-self":[{"justify-self":["auto",...rt()]}],"align-content":[{content:["normal",...Ae()]}],"align-items":[{items:[...rt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...rt(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ae()}],"place-items":[{"place-items":[...rt(),"baseline"]}],"place-self":[{"place-self":["auto",...rt()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:Ze()}],mx:[{mx:Ze()}],my:[{my:Ze()}],ms:[{ms:Ze()}],me:[{me:Ze()}],mt:[{mt:Ze()}],mr:[{mr:Ze()}],mb:[{mb:Ze()}],ml:[{ml:Ze()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:Re()}],w:[{w:[u,"screen",...Re()]}],"min-w":[{"min-w":[u,"screen","none",...Re()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...Re()]}],h:[{h:["screen","lh",...Re()]}],"min-h":[{"min-h":["screen","lh","none",...Re()]}],"max-h":[{"max-h":["screen","lh",...Re()]}],"font-size":[{text:["base",n,gu,ga]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,be,Rg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ng,we]}],"font-family":[{font:[UO,we,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,be,we]}],"line-clamp":[{"line-clamp":[Ge,"none",be,Rg]}],leading:[{leading:[o,...k()]}],"list-image":[{"list-image":["none",be,we]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",be,we]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ge,"from-font","auto",be,ga]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[Ge,"auto",be,we]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be,we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be,we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:pe()}],"bg-repeat":[{bg:de()}],"bg-size":[{bg:W()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ro,be,we],radial:["",be,we],conic:[ro,be,we]},BO,zO]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:xe()}],"border-w-x":[{"border-x":xe()}],"border-w-y":[{"border-y":xe()}],"border-w-s":[{"border-s":xe()}],"border-w-e":[{"border-e":xe()}],"border-w-t":[{"border-t":xe()}],"border-w-r":[{"border-r":xe()}],"border-w-b":[{"border-b":xe()}],"border-w-l":[{"border-l":xe()}],"divide-x":[{"divide-x":xe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":xe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Oe(),"hidden","none"]}],"divide-style":[{divide:[...Oe(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...Oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ge,be,we]}],"outline-w":[{outline:["",Ge,gu,ga]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",y,tf,ef]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",_,tf,ef]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:xe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[Ge,ga]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":xe()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",x,tf,ef]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[Ge,be,we]}],"mix-blend":[{"mix-blend":[...Pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ge]}],"mask-image-linear-from-pos":[{"mask-linear-from":Se()}],"mask-image-linear-to-pos":[{"mask-linear-to":Se()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Se()}],"mask-image-t-to-pos":[{"mask-t-to":Se()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Se()}],"mask-image-r-to-pos":[{"mask-r-to":Se()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Se()}],"mask-image-b-to-pos":[{"mask-b-to":Se()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Se()}],"mask-image-l-to-pos":[{"mask-l-to":Se()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Se()}],"mask-image-x-to-pos":[{"mask-x-to":Se()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Se()}],"mask-image-y-to-pos":[{"mask-y-to":Se()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[be,we]}],"mask-image-radial-from-pos":[{"mask-radial-from":Se()}],"mask-image-radial-to-pos":[{"mask-radial-to":Se()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":q()}],"mask-image-conic-pos":[{"mask-conic":[Ge]}],"mask-image-conic-from-pos":[{"mask-conic-from":Se()}],"mask-image-conic-to-pos":[{"mask-conic-to":Se()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:pe()}],"mask-repeat":[{mask:de()}],"mask-size":[{mask:W()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",be,we]}],filter:[{filter:["","none",be,we]}],blur:[{blur:$e()}],brightness:[{brightness:[Ge,be,we]}],contrast:[{contrast:[Ge,be,we]}],"drop-shadow":[{"drop-shadow":["","none",E,tf,ef]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",Ge,be,we]}],"hue-rotate":[{"hue-rotate":[Ge,be,we]}],invert:[{invert:["",Ge,be,we]}],saturate:[{saturate:[Ge,be,we]}],sepia:[{sepia:["",Ge,be,we]}],"backdrop-filter":[{"backdrop-filter":["","none",be,we]}],"backdrop-blur":[{"backdrop-blur":$e()}],"backdrop-brightness":[{"backdrop-brightness":[Ge,be,we]}],"backdrop-contrast":[{"backdrop-contrast":[Ge,be,we]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ge,be,we]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ge,be,we]}],"backdrop-invert":[{"backdrop-invert":["",Ge,be,we]}],"backdrop-opacity":[{"backdrop-opacity":[Ge,be,we]}],"backdrop-saturate":[{"backdrop-saturate":[Ge,be,we]}],"backdrop-sepia":[{"backdrop-sepia":["",Ge,be,we]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",be,we]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ge,"initial",be,we]}],ease:[{ease:["linear","initial",U,be,we]}],delay:[{delay:[Ge,be,we]}],animate:[{animate:["none",F,be,we]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[I,be,we]}],"perspective-origin":[{"perspective-origin":Z()}],rotate:[{rotate:ne()}],"rotate-x":[{"rotate-x":ne()}],"rotate-y":[{"rotate-y":ne()}],"rotate-z":[{"rotate-z":ne()}],scale:[{scale:he()}],"scale-x":[{"scale-x":he()}],"scale-y":[{"scale-y":he()}],"scale-z":[{"scale-z":he()}],"scale-3d":["scale-3d"],skew:[{skew:st()}],"skew-x":[{"skew-x":st()}],"skew-y":[{"skew-y":st()}],transform:[{transform:[be,we,"","none","gpu","cpu"]}],"transform-origin":[{origin:Z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:gt()}],"translate-x":[{"translate-x":gt()}],"translate-y":[{"translate-y":gt()}],"translate-z":[{"translate-z":gt()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be,we]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be,we]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[Ge,gu,ga,Rg]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},KO=IO(HO);function Ce(...t){return KO(iO(t))}const GO=()=>{const{toasts:t,removeToast:e}=xf();return t.length===0?null:p.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:t.map(n=>p.jsx("div",{onClick:()=>e(n.id),className:Ce("pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-xl shadow border text-sm font-medium cursor-pointer hover:opacity-90",n.type==="success"&&"bg-white dark:bg-gray-800 text-green-600 dark:text-green-400 border-green-200 dark:border-green-900",n.type==="error"&&"bg-white dark:bg-gray-800 text-red-600 dark:text-red-400 border-red-200 dark:border-red-900",n.type==="info"&&"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700"),children:p.jsxs("div",{className:"flex items-start gap-3",children:[n.type==="success"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),n.type==="error"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.type==="info"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),p.jsx("p",{className:"leading-5 flex-1",children:n.message}),p.jsx("button",{onClick:r=>{r.stopPropagation(),e(n.id)},className:"flex-shrink-0 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})},n.id))})};function QO(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var o;const l=d=>d===null?null:JSON.parse(d,void 0),u=(o=n.getItem(s))!=null?o:null;return u instanceof Promise?u.then(l):l(u)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const ky=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return ky(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ky(r)(n)}}}},ZO=(t,e)=>(n,r,s)=>{let o={storage:QO(()=>localStorage),partialize:I=>I,version:0,merge:(I,R)=>({...R,...I}),...e},l=!1;const u=new Set,d=new Set;let m=o.storage;if(!m)return t((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...I)},r,s);const y=()=>{const I=o.partialize({...r()});return m.setItem(o.name,{state:I,version:o.version})},_=s.setState;s.setState=(I,R)=>(_(I,R),y());const x=t((...I)=>(n(...I),y()),r,s);s.getInitialState=()=>x;let E;const C=()=>{var I,R;if(!m)return;l=!1,u.forEach(F=>{var M;return F((M=r())!=null?M:x)});const U=((R=o.onRehydrateStorage)==null?void 0:R.call(o,(I=r())!=null?I:x))||void 0;return ky(m.getItem.bind(m))(o.name).then(F=>{if(F)if(typeof F.version=="number"&&F.version!==o.version){if(o.migrate){const M=o.migrate(F.state,F.version);return M instanceof Promise?M.then(q=>[!0,q]):[!0,M]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,F.state];return[!1,void 0]}).then(F=>{var M;const[q,Z]=F;if(E=o.merge(Z,(M=r())!=null?M:x),n(E,!0),q)return y()}).then(()=>{U==null||U(E,void 0),E=r(),l=!0,d.forEach(F=>F(E))}).catch(F=>{U==null||U(void 0,F)})};return s.persist={setOptions:I=>{o={...o,...I},I.storage&&(m=I.storage)},clearStorage:()=>{m==null||m.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>C(),hasHydrated:()=>l,onHydrate:I=>(u.add(I),()=>{u.delete(I)}),onFinishHydration:I=>(d.add(I),()=>{d.delete(I)})},o.skipHydration||C(),E||x},Sd=ZO,Ar=Ba()(Sd(t=>({themeMode:"system",fontEn:"Inter",fontJp:"M PLUS 2",fontSize:"md",density:"normal",language:"ja",customDurations:[15,30,45,60,75,90,120],setThemeMode:e=>t({themeMode:e}),setFontEn:e=>t({fontEn:e}),setFontJp:e=>t({fontJp:e}),setFontSize:e=>t({fontSize:e}),setDensity:e=>t({density:e}),setLanguage:e=>t(n=>{const s={ja:{density:"normal",fontSize:"md"},en:{density:"comfortable",fontSize:"base"}}[e];return{language:e,density:s.density,fontSize:s.fontSize}}),setCustomDurations:e=>t({customDurations:e.sort((n,r)=>n-r)})}),{name:"app-settings",partialize:t=>({themeMode:t.themeMode,fontEn:t.fontEn,fontJp:t.fontJp,fontSize:t.fontSize,density:t.density,language:t.language,customDurations:t.customDurations})})),YO={dashboard:"",inbox:"",today:"",upcoming:"",completed:"",trash:"",projects:"",project:"",labels:"",filters:"",timeblocks:"",durations:"",targets:"",workspaces:"",settings:"",edit:"",active:"",add_task:"",search:"",no_tasks:"",loading:"...",saving:"...",done:"",error:"",backup_restore:"",general:"",appearance:"",account:"",language:"",important:"",all_tasks:"",add:"",close:"",clear:"",backward_map:"",woop_board:"WOOP",okr_tree:"OKR",msg:{task:{create_success:"",create_fail:"",update_success:"",update_fail:"",delete_success:"",delete_fail:"",complete_success:" ",status_update_fail:"",move_fail:""},auth:{login_success:"",logout_success:""},dnd:{reorderFailed:""},project:{reorder_fail:""},confirm_delete:`
`},delete:"",timeblock:"",filter:"",sidebar:{add_workspace:"",search_placeholder:" (/)",target_wizard:"",target_dashboard:"",framework_wiki:"Wiki",unassigned:"",toggle_collapse:"",toggle_expand:"",resizer_label:"",resizer_hint:"",menu_open:"",reorder_section:"",no_projects:"",duration_format:"{min}"},modal:{task_title_placeholder:"",filter_name_placeholder:": ",memo_markdown:" (Markdown)",edit:"",preview:"",schedule:"",due_date:"",recurrence:"",recurrence_days:"",time_block:"",duration:"",no_duration:"",no_project:"",cancel:"",save:"",create:"",delete:"",delete_confirm:"",no_memo:"",workspace_edit_title:"",workspace_create_title:"",workspace_name_label:"",workspace_name_placeholder:"...",workspace_desc_edit:"",workspace_desc_create:"",label_name:"",label_name_placeholder:"",label_create_placeholder:"",project_name:"",project_name_placeholder:"...",project_delete_confirm:"{name}",label_delete_confirm:"{name}",theme_color:"",delete_label:"",delete_project:""},task_detail:{recurrence_label:"",recurrence_days:"",time_block_label:"",time_block_unspecified:"",duration_label:"",duration_none:"",project_label:"",project_none:"",due_date_label:"",schedule_label:"",title_placeholder:"",delete_button:""},time_block:{add_button:"",max_limit:"10",unspecified:"",default_zone_desc:"",change_color:"",error_invalid_time:": {start}  {end}",error_overlap:": [{range1}]  [{range2}]",time_select:"",delete_confirm:"",settings_title:""},recurrence:{none:"",daily:"",weekdays:"",weekly:"",monthly:""},days:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},colors:{red:"",pink:"",purple:"",deep_purple:"",indigo:"",blue:"",light_blue:"",cyan:"",teal:"",green:"",light_green:"",lime:"",yellow:"",amber:"",orange:"",deep_orange:"",brown:"",grey:"",blue_grey:""},settings_modal:{title:"",tabs:{general:"",appearance:"",account:"",advanced:""},appearance:{theme:"",density:"",font_size:"",fonts:"",font_en:"",font_jp:""},backup:{title:"",description:"JSON",create:"",import:"",import_confirm:`
ID`,import_success:`
: {tasks}
: {projects}`,import_fail:"",create_fail:""},options:{theme:{light:"",dark:"",system:""},density:{compact:"",normal:"",comfortable:"",spacious:""}},language:{title:" (Language)",description:"UI"},maintenance:{title:"",description:"",cleanup_duplicate:"",confirm_backup:`

`,confirm_final:"",cleanup_success:"{count} ",cleanup_fail:": {error}"},account:{guest_user:"",registered_user:"",not_logged_in:"",logout:"",logout_confirm:"",persist_account:"",persist_desc:`
`,register:"",registering:"...",register_success:"",register_fail:"",already_in_use:"",weak_password:"",email_label:"Email",password_label:"Password",hide_password:"",show_password:"",registered_msg:""}},inline_input:{placeholder:"...",label:"",tooltip_today:"",tooltip_today_remove:"",tooltip_important:"",tooltip_important_remove:"",aria_today:"",aria_today_remove:"",aria_important:"",aria_important_remove:"",adding:"..."},validation:{required:"",workspace_name_required:"",workspace_duplicate:"",project_name_required:"",workspace_required:"",filter_name_required:"",filter_condition_required:"1",save_fail:"",delete_fail:"",label_name_required:"",label_workspace_required:"",workspace_confirm_switch:"",select_days:""},date_options:{today:"",tomorrow:"",week:"",next_week:""},task_list:{searching_results:': "{query}"',sort_manual:" ()",sort_created:"",sort_due:"",sort_important:"",sort_title:"",show_completed:"",hide_completed:"",no_tasks_title:"",no_tasks_desc_showing:"",no_tasks_desc_hiding:"",add_new_task:"",loading:"..."},task_stats:{count_label:"COUNT",count_unit:"",total_label:"TOTAL",avg_label:"AVG",avg_unit:"/",over:"",remaining:""},add_task_button:{add_task:"",add_with_title:"{title}",aria_label:""},error_boundary:{title:"",description:"",retry:"",reload:"",details:""}},JO={dashboard:"Dashboard",inbox:"Inbox",today:"Today",upcoming:"Upcoming",completed:"Completed",trash:"Trash",projects:"Projects",project:"Project",labels:"Labels",filters:"Filters",timeblocks:"Time Blocks",durations:"Durations",targets:"Targets",workspaces:"Workspaces",settings:"Settings",edit:"Edit",active:"Active",add_task:"Add Task",search:"Search",no_tasks:"No tasks found",loading:"Loading...",saving:"Saving...",done:"Done",error:"An error occurred",backup_restore:"Backup & Restore",general:"General",appearance:"Appearance",account:"Account",language:"Language",important:"Important",all_tasks:"All Tasks",add:"Add",close:"Close",clear:"Clear",backward_map:"Backward Map",woop_board:"WOOP Board",okr_tree:"OKR Tree",msg:{task:{create_success:"Task created",create_fail:"Failed to create task",update_success:"Task updated",update_fail:"Failed to save task",delete_success:"Task deleted",delete_fail:"Failed to delete task",complete_success:"Task completed ",status_update_fail:"Failed to update status",move_fail:"Failed to move task"},auth:{login_success:"Logged in",logout_success:"Logged out"},dnd:{reorderFailed:"Failed to reorder"},project:{reorder_fail:"Failed to reorder projects"},confirm_delete:`Are you sure you want to delete this item?
This action cannot be undone.`},delete:"Delete",timeblock:"Time Block",filter:"Filter",sidebar:{add_workspace:"Add Workspace",search_placeholder:"Search (/)",target_wizard:"Target Wizard",target_dashboard:"Target Dashboard",framework_wiki:"Framework Wiki",unassigned:"Unassigned",toggle_collapse:"Collapse Sidebar",toggle_expand:"Expand Sidebar",resizer_label:"Resize Sidebar",resizer_hint:"Drag or use arrow keys to resize",menu_open:"Open Menu",reorder_section:"Reorder Section",no_projects:"No projects",duration_format:"{min} min"},modal:{task_title_placeholder:"Task Title",filter_name_placeholder:"e.g. Important tasks this week",memo_markdown:"Memo (Markdown)",edit:"Edit",preview:"Preview",schedule:"Schedule",due_date:"Due Date",recurrence:"Recurrence",recurrence_days:"Repeat Days",time_block:"Time Block",duration:"Duration",no_duration:"Not Set",no_project:"No Project",cancel:"Cancel",save:"Save",create:"Create",delete:"Delete",delete_confirm:"Are you sure you want to delete this task?",no_memo:"No memo",workspace_edit_title:"Edit Workspace Name",workspace_create_title:"New Workspace",workspace_name_label:"Workspace Name",workspace_name_placeholder:"Enter workspace name...",workspace_desc_edit:"Rename the workspace.",workspace_desc_create:"Create a new workspace to manage projects and tasks separately.",label_name:"Label Name",label_name_placeholder:"Label Name",label_create_placeholder:"New Label Name",project_name:"Project Name",project_name_placeholder:"Enter name...",project_delete_confirm:'Delete project "{name}"?',label_delete_confirm:'Delete label "{name}"?',theme_color:"Theme Color",delete_label:"Delete Label",delete_project:"Delete Project"},task_detail:{recurrence_label:"Recurrence",recurrence_days:"Repeat Days",time_block_label:"Time Block",time_block_unspecified:"Unspecified",duration_label:"Duration",duration_none:"None",project_label:"Project",project_none:"No Project",due_date_label:"Due Date",schedule_label:"Schedule",title_placeholder:"Task Title",delete_button:"Delete"},time_block:{add_button:"Add Time Block",max_limit:"Max 10 blocks allowed",unspecified:"Unspecified",default_zone_desc:"Default Zone",change_color:"Change Color",error_invalid_time:"Invalid Time: {start} - {end}",error_overlap:"Time Overlap: [{range1}] and [{range2}]",time_select:"Select Time",delete_confirm:"Delete this time block?",settings_title:"Time Block Settings"},recurrence:{none:"None",daily:"Daily",weekdays:"Weekdays",weekly:"Weekly",monthly:"Monthly"},days:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},colors:{red:"Red",pink:"Pink",purple:"Purple",deep_purple:"Deep Purple",indigo:"Indigo",blue:"Blue",light_blue:"Light Blue",cyan:"Cyan",teal:"Teal",green:"Green",light_green:"Light Green",lime:"Lime",yellow:"Yellow",amber:"Amber",orange:"Orange",deep_orange:"Deep Orange",brown:"Brown",grey:"Grey",blue_grey:"Blue Grey"},settings_modal:{title:"Settings",tabs:{general:"General",appearance:"Appearance",account:"Account",advanced:"Advanced"},appearance:{theme:"Theme",density:"Density",font_size:"Font Size",fonts:"Fonts",font_en:"English Font",font_jp:"Japanese Font"},backup:{title:"Backup & Restore",description:"Download workspace data (tasks, projects, settings) as JSON or restore from backup.",create:"Create Backup",import:"Import",import_confirm:`Import data into current workspace?
Existing data remains, but some IDs may change to prevent duplicates.`,import_success:`Import completed.
Tasks: {tasks}
Projects: {projects}`,import_fail:"Import failed. Please check the file format.",create_fail:"Failed to create backup."},options:{theme:{light:"Light",dark:"Dark",system:"System"},density:{compact:"Compact",normal:"Normal",comfortable:"Comfortable",spacious:"Spacious"}},language:{title:"Language",description:"Change the UI language."},maintenance:{title:"Database Maintenance",description:"Detect and clean up duplicate data. This action cannot be undone. Please backup before running.",cleanup_duplicate:"Clean Up Duplicates (Confirm)",confirm_backup:`[Warning] Deleting duplicate tasks.
Did you create a backup?
(Older duplicates will be removed)`,confirm_final:"[Final Confirm] This cannot be undone. Execute?",cleanup_success:"Deleted {count} duplicate tasks.",cleanup_fail:"Error occurred: {error}"},account:{guest_user:"Guest User",registered_user:"Registered User",not_logged_in:"Not logged in",logout:"Logout",logout_confirm:"Are you sure you want to logout?",persist_account:"Persist Account",persist_desc:`Your account is temporary.
Register an email to access your data from other devices.`,register:"Register Account",registering:"Registering...",register_success:"Account registered!",register_fail:"Registration failed",already_in_use:"Email already in use",weak_password:"Password is too weak",email_label:"Email",password_label:"Password",hide_password:"Hide Password",show_password:"Show Password",registered_msg:"Account is fully registered."}},inline_input:{placeholder:"Enter task name...",label:"Task Name",tooltip_today:"Do Today",tooltip_today_remove:"Remove Today",tooltip_important:"Mark Important",tooltip_important_remove:"Unmark Important",aria_today:"Set for today",aria_today_remove:"Remove from today",aria_important:"Mark as important",aria_important_remove:"Unmark as important",adding:"Adding..."},validation:{required:"Required",workspace_name_required:"Workspace name is required",workspace_duplicate:"This name is already taken",project_name_required:"Project name is required",workspace_required:"No workspace selected",filter_name_required:"Filter name is required",filter_condition_required:"Please select at least one condition",save_fail:"Failed to save",delete_fail:"Failed to delete",label_name_required:"Name is required",label_workspace_required:"Workspace not found",workspace_confirm_switch:"Switch to new workspace?",select_days:"Please select days"},date_options:{today:"Today",tomorrow:"Tomorrow",week:"This Week",next_week:"Next Week"},task_list:{searching_results:'Showing results for: "{query}"',sort_manual:"Manual (Reorder)",sort_created:"Date Created",sort_due:"Due Date",sort_important:"Importance",sort_title:"Title",show_completed:"Show Completed",hide_completed:"Hide Completed",no_tasks_title:"No tasks found",no_tasks_desc_showing:"Try changing filters or create a new task to start your day.",no_tasks_desc_hiding:"Show completed tasks or add a new task.",add_new_task:"Add New Task",loading:"Loading tasks..."},task_stats:{count_label:"COUNT",count_unit:"",total_label:"TOTAL",avg_label:"AVG",avg_unit:"/task",over:"Over",remaining:"Left"},add_task_button:{add_task:"Add Task",add_with_title:'Add "{title}" as task',aria_label:"Add new task"},error_boundary:{title:"An Error Occurred",description:"Sorry, an unexpected error has occurred.",retry:"Retry",reload:"Reload Page",details:"Error Details"}},Ex={ja:YO,en:JO},Cc=t=>{function e(n,r){const s=Ex[t],o=Ex.en,l=(d,m)=>m.split(".").reduce((y,_)=>y&&y[_],d);let u=l(s,n);return u||(u=l(o,n)||n),r?Object.entries(r).reduce((d,[m,y])=>d.replace(`{${m}}`,String(y)),u):u}return{t:e}},mt=()=>{const t=Ar(n=>n.language);return O.useMemo(()=>Cc(t),[t])},Pt={SIDEBAR_DENSITY:{compact:"py-0.5",normal:"py-1.5",comfortable:"py-2.5",spacious:"py-3.5"},DND:{PREFIX_TASK:"task:",TYPE_PROJECT:"project",TYPE_INBOX:"inbox",TYPE_TIMEBLOCK:"timeblock",TOUCH_DELAY:250},STORAGE_KEYS:{SECTION_ORDER:"sidebar_section_order"},SIDEBAR:{MIN_WIDTH:150,MAX_WIDTH:500,DEFAULT_WIDTH:280,DURATIONS:[30,45,60,75,90]},LAYOUT:{CONTAINER_WIDTH_CLASS:"w-full max-w-full",MOBILE_SIDEBAR_WIDTH_PX:280},FONTS:{EU:[{label:"Google Sans",value:'"Google Sans", Inter, sans-serif'},{label:"Inter",value:"Inter, sans-serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"System UI",value:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}],JP:[{label:"M PLUS 2",value:'"M PLUS 2", sans-serif'},{label:"Noto Sans JP",value:'"Noto Sans JP", sans-serif'},{label:"Hiragino / Yu Gothic",value:'"Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif'}]}},mi=[{value:"#EF5350",key:"red"},{value:"#EC407A",key:"pink"},{value:"#AB47BC",key:"purple"},{value:"#7E57C2",key:"deep_purple"},{value:"#5C6BC0",key:"indigo"},{value:"#42A5F5",key:"blue"},{value:"#29B6F6",key:"light_blue"},{value:"#26C6DA",key:"cyan"},{value:"#26A69A",key:"teal"},{value:"#66BB6A",key:"green"},{value:"#9CCC65",key:"light_green"},{value:"#D4E157",key:"lime"},{value:"#FFEE58",key:"yellow"},{value:"#FFCA28",key:"amber"},{value:"#FFA726",key:"orange"},{value:"#FF7043",key:"deep_orange"},{value:"#8D6E63",key:"brown"},{value:"#BDBDBD",key:"grey"},{value:"#78909C",key:"blue_grey"}];mi.map(t=>t.value);const XO=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),vn=Ba(t=>({stack:[],openModal:(e,n=null)=>{if(!e)return;const s={id:XO(),type:e,data:n};t(o=>({stack:[...o.stack,s]}))},closeModal:()=>t(e=>e.stack.length===0?e:{stack:e.stack.slice(0,-1)}),closeAllModals:()=>t({stack:[]})})),eL=1024,H0=Ba()(Sd(t=>({sidebarWidth:Pt.SIDEBAR.DEFAULT_WIDTH,isSidebarOpen:!0,sidebarDensity:"normal",setSidebarWidth:e=>{const n=Math.max(Pt.SIDEBAR.MIN_WIDTH,Math.min(e,Pt.SIDEBAR.MAX_WIDTH));t({sidebarWidth:n})},toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),setSidebarOpen:e=>t({isSidebarOpen:e}),setSidebarDensity:e=>t({sidebarDensity:e})}),{name:"ui-storage",partialize:t=>({sidebarWidth:t.sidebarWidth,sidebarDensity:t.sidebarDensity,isSidebarOpen:t.isSidebarOpen}),onRehydrateStorage:()=>t=>{typeof window<"u"&&window.innerWidth<eL&&(t==null||t.setSidebarOpen(!1))}})),tL="/assets/logo-BADOZ29k.png",Gr=Ba()(Sd(t=>({filterType:"inbox",targetId:null,query:"",showCompleted:!1,sortCriteria:"createdAt_desc",setFilter:(e,n=null)=>t({filterType:e,targetId:n,query:""}),setSearchQuery:e=>t({query:e,filterType:"search"}),clearFilter:()=>t({filterType:"inbox",targetId:null,query:""}),setShowCompleted:e=>t({showCompleted:e}),setSortCriteria:e=>t({sortCriteria:e})}),{name:"filter-storage",partialize:t=>({filterType:t.filterType,targetId:t.targetId,query:t.query,showCompleted:t.showCompleted,sortCriteria:t.sortCriteria})})),jo=Ba()(Sd(t=>({currentView:"tasks",viewData:null,setView:(e,n=null)=>t({currentView:e,viewData:n})}),{name:"view-storage",partialize:t=>({currentView:t.currentView})})),nL=()=>{const{t}=mt(),{query:e,setFilter:n}=Gr(),{currentView:r,setView:s}=jo(),o=r==="search",l=()=>{n("search"),s("search")};return p.jsxs("button",{onClick:l,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-all duration-200 group ${o?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700/50 text-gray-600 dark:text-gray-400"}`,"aria-label":t("sidebar.search_placeholder"),children:[p.jsx("svg",{className:`w-4 h-4 transition-colors ${o?"text-blue-600 dark:text-blue-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),p.jsx("span",{className:"flex-1 text-sm font-medium",children:e?`"${e}"`:t("sidebar.search_placeholder")}),p.jsx("span",{className:"text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"/"})]})},rL=({children:t})=>{const{sidebarWidth:e,isSidebarOpen:n,sidebarDensity:r,toggleSidebar:s,setSidebarWidth:o}=H0(),{t:l}=mt(),u={compact:"p-1",normal:"p-2",comfortable:"p-4",spacious:"p-6"}[r];Me.useEffect(()=>{const m=_=>{if(!document.body.classList.contains("resizing"))return;const x=Math.max(Pt.SIDEBAR.MIN_WIDTH,Math.min(Pt.SIDEBAR.MAX_WIDTH,_.clientX));o(x)},y=()=>{document.body.classList.remove("resizing"),document.body.style.cursor="default"};return document.addEventListener("mousemove",m),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",y)}},[o]);const d=()=>{document.body.classList.add("resizing"),document.body.style.cursor="col-resize"};return p.jsxs("aside",{className:Ce("h-full transition-all duration-300 flex flex-col group relative","bg-white dark:bg-gray-900 lg:bg-white/70 lg:dark:bg-gray-800/60","lg:backdrop-blur-xl","border-r border-gray-200/50 dark:border-gray-700/30",n?"translate-x-0":"-translate-x-full lg:translate-x-0","fixed lg:relative z-30 lg:z-0 shadow-2xl lg:shadow-none overflow-hidden","w-[var(--sidebar-mobile)] lg:w-[var(--sidebar-desktop)]"),style:{"--sidebar-desktop":`${e}px`,"--sidebar-mobile":n?`${Pt.LAYOUT.MOBILE_SIDEBAR_WIDTH_PX}px`:"0px",width:n?void 0:"0px"},children:[p.jsxs("div",{className:"h-14 flex items-center px-4 flex-shrink-0 justify-between border-b border-gray-100 dark:border-gray-800/50",children:[p.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition select-none",children:[p.jsx("div",{className:"w-8 h-8 rounded-xl bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20",children:p.jsx("img",{src:tL,alt:"L",className:"h-5 w-5 invert brightness-0"})}),p.jsxs("span",{className:"text-lg font-black text-gray-900 dark:text-white tracking-tight",children:["Task",p.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]})]}),p.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all active:scale-90",title:l(n?"sidebar.toggle_collapse":"sidebar.toggle_expand"),"aria-label":l(n?"sidebar.toggle_collapse":"sidebar.toggle_expand"),children:p.jsx("svg",{className:Ce("w-5 h-5 transition-transform duration-300",!n&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),p.jsx("div",{className:"px-3 pb-2 pt-2",children:p.jsx(nL,{})}),p.jsx("div",{className:Ce("flex-1 overflow-y-auto custom-scrollbar pt-2",u),children:t}),p.jsx("div",{role:"separator","aria-orientation":"vertical","aria-label":l("sidebar.resizer_label"),"aria-valuenow":e,"aria-valuemin":Pt.SIDEBAR.MIN_WIDTH,"aria-valuemax":Pt.SIDEBAR.MAX_WIDTH,tabIndex:n?0:-1,onMouseDown:d,onKeyDown:m=>{m.key==="ArrowLeft"?o(Math.max(Pt.SIDEBAR.MIN_WIDTH,e-10)):m.key==="ArrowRight"&&o(Math.min(Pt.SIDEBAR.MAX_WIDTH,e+10))},className:Ce("absolute top-0 right-0 w-3 h-full cursor-col-resize z-40 transition-colors hidden lg:flex items-center justify-center outline-none focus:bg-blue-500","hover:bg-blue-500/30 active:bg-blue-600/50 group/resizer"),title:l("sidebar.resizer_hint"),children:p.jsx("div",{className:"absolute w-1 h-12 bg-gray-400 dark:bg-gray-500 rounded-full opacity-0 group-hover/resizer:opacity-100 group-focus/resizer:opacity-100 transition-opacity pointer-events-none"})}),p.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-gray-200/50 dark:bg-gray-700/30 hidden lg:block"})]})};function te(t,e,n){function r(u,d){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:d,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,d);const m=l.prototype,y=Object.keys(m);for(let _=0;_<y.length;_++){const x=y[_];x in u||(u[x]=m[x].bind(u))}}const s=(n==null?void 0:n.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:t});function l(u){var d;const m=n!=null&&n.Parent?new o:this;r(m,u),(d=m._zod).deferred??(d.deferred=[]);for(const y of m._zod.deferred)y();return m}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>{var d,m;return n!=null&&n.Parent&&u instanceof n.Parent?!0:(m=(d=u==null?void 0:u._zod)==null?void 0:d.traits)==null?void 0:m.has(t)}}),Object.defineProperty(l,"name",{value:t}),l}class $l extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class C1 extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const A1={};function Do(t){return A1}function N1(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function Ey(t,e){return typeof e=="bigint"?e.toString():e}function K0(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function G0(t){return t==null}function Q0(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function sL(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const d=r.match(/\d?e-(\d?)/);d!=null&&d[1]&&(s=Number.parseInt(d[1]))}const o=n>s?n:s,l=Number.parseInt(t.toFixed(o).replace(".","")),u=Number.parseInt(e.toFixed(o).replace(".",""));return l%u/10**o}const Tx=Symbol("evaluating");function xt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==Tx)return r===void 0&&(r=Tx,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Wa(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function qa(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function Ix(t){return JSON.stringify(t)}function iL(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const R1="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Gf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const oL=K0(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function hc(t){if(Gf(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Gf(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function P1(t){return hc(t)?{...t}:Array.isArray(t)?[...t]:t}const aL=new Set(["string","number","symbol"]);function Ap(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Uo(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function Ie(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function lL(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const cL={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function uL(t,e){const n=t._zod.def,r=qa(t._zod.def,{get shape(){const s={};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(s[o]=n.shape[o])}return Wa(this,"shape",s),s},checks:[]});return Uo(t,r)}function dL(t,e){const n=t._zod.def,r=qa(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete s[o]}return Wa(this,"shape",s),s},checks:[]});return Uo(t,r)}function hL(t,e){if(!hc(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=qa(t._zod.def,{get shape(){const o={...t._zod.def.shape,...e};return Wa(this,"shape",o),o},checks:[]});return Uo(t,s)}function fL(t,e){if(!hc(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return Wa(this,"shape",r),r},checks:t._zod.def.checks};return Uo(t,n)}function pL(t,e){const n=qa(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Wa(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Uo(t,n)}function mL(t,e,n){const r=qa(e._zod.def,{get shape(){const s=e._zod.def.shape,o={...s};if(n)for(const l in n){if(!(l in s))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=t?new t({type:"optional",innerType:s[l]}):s[l])}else for(const l in s)o[l]=t?new t({type:"optional",innerType:s[l]}):s[l];return Wa(this,"shape",o),o},checks:[]});return Uo(e,r)}function gL(t,e,n){const r=qa(e._zod.def,{get shape(){const s=e._zod.def.shape,o={...s};if(n)for(const l in n){if(!(l in o))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)o[l]=new t({type:"nonoptional",innerType:s[l]});return Wa(this,"shape",o),o},checks:[]});return Uo(e,r)}function Ol(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Ll(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function nf(t){return typeof t=="string"?t:t==null?void 0:t.message}function Oo(t,e,n){var s,o,l,u,d,m;const r={...t,path:t.path??[]};if(!t.message){const y=nf((l=(o=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:l.call(o,t))??nf((u=e==null?void 0:e.error)==null?void 0:u.call(e,t))??nf((d=n.customError)==null?void 0:d.call(n,t))??nf((m=n.localeError)==null?void 0:m.call(n,t))??"Invalid input";r.message=y}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function Z0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Ju(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const j1=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Ey,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},D1=te("$ZodError",j1),O1=te("$ZodError",j1,{Parent:Error});function yL(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function vL(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>r({issues:l}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)n._errors.push(e(o));else{let l=n,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(e(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return r(t),n}const Y0=t=>(e,n,r,s)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},o);if(l instanceof Promise)throw new $l;if(l.issues.length){const u=new((s==null?void 0:s.Err)??t)(l.issues.map(d=>Oo(d,o,Do())));throw R1(u,s==null?void 0:s.callee),u}return l.value},J0=t=>async(e,n,r,s)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},o);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new((s==null?void 0:s.Err)??t)(l.issues.map(d=>Oo(d,o,Do())));throw R1(u,s==null?void 0:s.callee),u}return l.value},Np=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},o=e._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new $l;return o.issues.length?{success:!1,error:new(t??D1)(o.issues.map(l=>Oo(l,s,Do())))}:{success:!0,data:o.value}},_L=Np(O1),Rp=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(l=>Oo(l,s,Do())))}:{success:!0,data:o.value}},wL=Rp(O1),bL=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Y0(t)(e,n,s)},xL=t=>(e,n,r)=>Y0(t)(e,n,r),kL=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return J0(t)(e,n,s)},EL=t=>async(e,n,r)=>J0(t)(e,n,r),TL=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Np(t)(e,n,s)},IL=t=>(e,n,r)=>Np(t)(e,n,r),SL=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Rp(t)(e,n,s)},CL=t=>async(e,n,r)=>Rp(t)(e,n,r),AL=/^[cC][^\s-]{8,}$/,NL=/^[0-9a-z]+$/,RL=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,PL=/^[0-9a-vA-V]{20}$/,jL=/^[A-Za-z0-9]{27}$/,DL=/^[a-zA-Z0-9_-]{21}$/,OL=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,LL=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Sx=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,ML=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,VL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function FL(){return new RegExp(VL,"u")}const zL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,UL=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,$L=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,BL=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,WL=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,L1=/^[A-Za-z0-9_-]*$/,qL=/^\+(?:[0-9]){6,14}[0-9]$/,M1="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",HL=new RegExp(`^${M1}$`);function V1(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function KL(t){return new RegExp(`^${V1(t)}$`)}function GL(t){const e=V1({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${M1}T(?:${r})$`)}const QL=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},ZL=/^-?\d+$/,YL=/^-?\d+(?:\.\d+)?/,JL=/^(?:true|false)$/i,XL=/^null$/i,eM=/^undefined$/i,tM=/^[^A-Z]*$/,nM=/^[^a-z]*$/,gr=te("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),F1={number:"number",bigint:"bigint",object:"date"},z1=te("$ZodCheckLessThan",(t,e)=>{gr.init(t,e);const n=F1[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,o=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),U1=te("$ZodCheckGreaterThan",(t,e)=>{gr.init(t,e);const n=F1[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,o=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),rM=te("$ZodCheckMultipleOf",(t,e)=>{gr.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):sL(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),sM=te("$ZodCheckNumberFormat",(t,e)=>{var l;gr.init(t,e),e.format=e.format||"float64";const n=(l=e.format)==null?void 0:l.includes("int"),r=n?"int":"number",[s,o]=cL[e.format];t._zod.onattach.push(u=>{const d=u._zod.bag;d.format=e.format,d.minimum=s,d.maximum=o,n&&(d.pattern=ZL)}),t._zod.check=u=>{const d=u.value;if(n){if(!Number.isInteger(d)){u.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:d,inst:t});return}if(!Number.isSafeInteger(d)){d>0?u.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):u.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}d<s&&u.issues.push({origin:"number",input:d,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),d>o&&u.issues.push({origin:"number",input:d,code:"too_big",maximum:o,inst:t})}}),iM=te("$ZodCheckMaxLength",(t,e)=>{var n;gr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!G0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=Z0(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),oM=te("$ZodCheckMinLength",(t,e)=>{var n;gr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!G0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=Z0(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),aM=te("$ZodCheckLengthEquals",(t,e)=>{var n;gr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!G0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,o=s.length;if(o===e.length)return;const l=Z0(s),u=o>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Pp=te("$ZodCheckStringFormat",(t,e)=>{var n,r;gr.init(t,e),t._zod.onattach.push(s=>{const o=s._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),lM=te("$ZodCheckRegex",(t,e)=>{Pp.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),cM=te("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=tM),Pp.init(t,e)}),uM=te("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=nM),Pp.init(t,e)}),dM=te("$ZodCheckIncludes",(t,e)=>{gr.init(t,e);const n=Ap(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),hM=te("$ZodCheckStartsWith",(t,e)=>{gr.init(t,e);const n=new RegExp(`^${Ap(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),fM=te("$ZodCheckEndsWith",(t,e)=>{gr.init(t,e);const n=new RegExp(`.*${Ap(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),pM=te("$ZodCheckOverwrite",(t,e)=>{gr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class mM{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),o=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of o)this.content.push(l)}compile(){const e=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new e(...n,s.join(`
`))}}const gM={major:4,minor:2,patch:1},St=te("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=gM;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const o of r)for(const l of o._zod.onattach)l(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const o=(u,d,m)=>{let y=Ol(u),_;for(const x of d){if(x._zod.def.when){if(!x._zod.def.when(u))continue}else if(y)continue;const E=u.issues.length,C=x._zod.check(u);if(C instanceof Promise&&(m==null?void 0:m.async)===!1)throw new $l;if(_||C instanceof Promise)_=(_??Promise.resolve()).then(async()=>{await C,u.issues.length!==E&&(y||(y=Ol(u,E)))});else{if(u.issues.length===E)continue;y||(y=Ol(u,E))}}return _?_.then(()=>u):u},l=(u,d,m)=>{if(Ol(u))return u.aborted=!0,u;const y=o(d,r,m);if(y instanceof Promise){if(m.async===!1)throw new $l;return y.then(_=>t._zod.parse(_,m))}return t._zod.parse(y,m)};t._zod.run=(u,d)=>{if(d.skipChecks)return t._zod.parse(u,d);if(d.direction==="backward"){const y=t._zod.parse({value:u.value,issues:[]},{...d,skipChecks:!0});return y instanceof Promise?y.then(_=>l(_,u,d)):l(y,u,d)}const m=t._zod.parse(u,d);if(m instanceof Promise){if(d.async===!1)throw new $l;return m.then(y=>o(y,r,d))}return o(m,r,d)}}t["~standard"]={validate:o=>{var l;try{const u=_L(t,o);return u.success?{value:u.data}:{issues:(l=u.error)==null?void 0:l.issues}}catch{return wL(t,o).then(d=>{var m;return d.success?{value:d.data}:{issues:(m=d.error)==null?void 0:m.issues}})}},vendor:"zod",version:1}}),X0=te("$ZodString",(t,e)=>{var n;St.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??QL(t._zod.bag),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),jt=te("$ZodStringFormat",(t,e)=>{Pp.init(t,e),X0.init(t,e)}),yM=te("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=LL),jt.init(t,e)}),vM=te("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Sx(r))}else e.pattern??(e.pattern=Sx());jt.init(t,e)}),_M=te("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=ML),jt.init(t,e)}),wM=te("$ZodURL",(t,e)=>{jt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),bM=te("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=FL()),jt.init(t,e)}),xM=te("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=DL),jt.init(t,e)}),kM=te("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=AL),jt.init(t,e)}),EM=te("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=NL),jt.init(t,e)}),TM=te("$ZodULID",(t,e)=>{e.pattern??(e.pattern=RL),jt.init(t,e)}),IM=te("$ZodXID",(t,e)=>{e.pattern??(e.pattern=PL),jt.init(t,e)}),SM=te("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=jL),jt.init(t,e)}),CM=te("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=GL(e)),jt.init(t,e)}),AM=te("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=HL),jt.init(t,e)}),NM=te("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=KL(e)),jt.init(t,e)}),RM=te("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=OL),jt.init(t,e)}),PM=te("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=zL),jt.init(t,e),t._zod.bag.format="ipv4"}),jM=te("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=UL),jt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),DM=te("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=$L),jt.init(t,e)}),OM=te("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=BL),jt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,o]=r;if(!o)throw new Error;const l=Number(o);if(`${l}`!==o)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function $1(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const LM=te("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=WL),jt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{$1(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function MM(t){if(!L1.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return $1(n)}const VM=te("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=L1),jt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{MM(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),FM=te("$ZodE164",(t,e)=>{e.pattern??(e.pattern=qL),jt.init(t,e)});function zM(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const UM=te("$ZodJWT",(t,e)=>{jt.init(t,e),t._zod.check=n=>{zM(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),B1=te("$ZodNumber",(t,e)=>{St.init(t,e),t._zod.pattern=t._zod.bag.pattern??YL,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...o?{received:o}:{}}),n}}),$M=te("$ZodNumberFormat",(t,e)=>{sM.init(t,e),B1.init(t,e)}),BM=te("$ZodBoolean",(t,e)=>{St.init(t,e),t._zod.pattern=JL,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),n}}),WM=te("$ZodUndefined",(t,e)=>{St.init(t,e),t._zod.pattern=eM,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(n,r)=>{const s=n.value;return typeof s>"u"||n.issues.push({expected:"undefined",code:"invalid_type",input:s,inst:t}),n}}),qM=te("$ZodNull",(t,e)=>{St.init(t,e),t._zod.pattern=XL,t._zod.values=new Set([null]),t._zod.parse=(n,r)=>{const s=n.value;return s===null||n.issues.push({expected:"null",code:"invalid_type",input:s,inst:t}),n}}),HM=te("$ZodUnknown",(t,e)=>{St.init(t,e),t._zod.parse=n=>n}),KM=te("$ZodNever",(t,e)=>{St.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),GM=te("$ZodDate",(t,e)=>{St.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const s=n.value,o=s instanceof Date;return o&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...o?{received:"Invalid Date"}:{},inst:t}),n}});function Cx(t,e,n){t.issues.length&&e.issues.push(...Ll(n,t.issues)),e.value[n]=t.value}const QM=te("$ZodArray",(t,e)=>{St.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const o=[];for(let l=0;l<s.length;l++){const u=s[l],d=e.element._zod.run({value:u,issues:[]},r);d instanceof Promise?o.push(d.then(m=>Cx(m,n,l))):Cx(d,n,l)}return o.length?Promise.all(o).then(()=>n):n}});function Qf(t,e,n,r){t.issues.length&&e.issues.push(...Ll(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function W1(t){var r,s,o,l;const e=Object.keys(t.shape);for(const u of e)if(!((l=(o=(s=(r=t.shape)==null?void 0:r[u])==null?void 0:s._zod)==null?void 0:o.traits)!=null&&l.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const n=lL(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function q1(t,e,n,r,s,o){const l=[],u=s.keySet,d=s.catchall._zod,m=d.def.type;for(const y in e){if(u.has(y))continue;if(m==="never"){l.push(y);continue}const _=d.run({value:e[y],issues:[]},r);_ instanceof Promise?t.push(_.then(x=>Qf(x,n,y,e))):Qf(_,n,y,e)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:o}),t.length?Promise.all(t).then(()=>n):n}const ZM=te("$ZodObject",(t,e)=>{St.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const d={...u};return Object.defineProperty(e,"shape",{value:d}),d}})}const r=K0(()=>W1(e));xt(t._zod,"propValues",()=>{const u=e.shape,d={};for(const m in u){const y=u[m]._zod;if(y.values){d[m]??(d[m]=new Set);for(const _ of y.values)d[m].add(_)}}return d});const s=Gf,o=e.catchall;let l;t._zod.parse=(u,d)=>{l??(l=r.value);const m=u.value;if(!s(m))return u.issues.push({expected:"object",code:"invalid_type",input:m,inst:t}),u;u.value={};const y=[],_=l.shape;for(const x of l.keys){const C=_[x]._zod.run({value:m[x],issues:[]},d);C instanceof Promise?y.push(C.then(I=>Qf(I,u,x,m))):Qf(C,u,x,m)}return o?q1(y,m,u,d,r.value,t):y.length?Promise.all(y).then(()=>u):u}}),YM=te("$ZodObjectJIT",(t,e)=>{ZM.init(t,e);const n=t._zod.parse,r=K0(()=>W1(e)),s=x=>{const E=new mM(["shape","payload","ctx"]),C=r.value,I=M=>{const q=Ix(M);return`shape[${q}]._zod.run({ value: input[${q}], issues: [] }, ctx)`};E.write("const input = payload.value;");const R=Object.create(null);let U=0;for(const M of C.keys)R[M]=`key_${U++}`;E.write("const newResult = {};");for(const M of C.keys){const q=R[M],Z=Ix(M);E.write(`const ${q} = ${I(M)};`),E.write(`
        if (${q}.issues.length) {
          payload.issues = payload.issues.concat(${q}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Z}, ...iss.path] : [${Z}]
          })));
        }
        
        
        if (${q}.value === undefined) {
          if (${Z} in input) {
            newResult[${Z}] = undefined;
          }
        } else {
          newResult[${Z}] = ${q}.value;
        }
        
      `)}E.write("payload.value = newResult;"),E.write("return payload;");const F=E.compile();return(M,q)=>F(x,M,q)};let o;const l=Gf,u=!A1.jitless,m=u&&oL.value,y=e.catchall;let _;t._zod.parse=(x,E)=>{_??(_=r.value);const C=x.value;return l(C)?u&&m&&(E==null?void 0:E.async)===!1&&E.jitless!==!0?(o||(o=s(e.shape)),x=o(x,E),y?q1([],C,x,E,_,t):x):n(x,E):(x.issues.push({expected:"object",code:"invalid_type",input:C,inst:t}),x)}});function Ax(t,e,n,r){for(const o of t)if(o.issues.length===0)return e.value=o.value,e;const s=t.filter(o=>!Ol(o));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(o=>o.issues.map(l=>Oo(l,r,Do())))}),e)}const JM=te("$ZodUnion",(t,e)=>{St.init(t,e),xt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),xt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),xt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),xt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${s.map(o=>Q0(o.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,o)=>{if(n)return r(s,o);let l=!1;const u=[];for(const d of e.options){const m=d._zod.run({value:s.value,issues:[]},o);if(m instanceof Promise)u.push(m),l=!0;else{if(m.issues.length===0)return m;u.push(m)}}return l?Promise.all(u).then(d=>Ax(d,s,t,o)):Ax(u,s,t,o)}}),XM=te("$ZodIntersection",(t,e)=>{St.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,o=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return o instanceof Promise||l instanceof Promise?Promise.all([o,l]).then(([d,m])=>Nx(n,d,m)):Nx(n,o,l)}});function Ty(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(hc(t)&&hc(e)){const n=Object.keys(e),r=Object.keys(t).filter(o=>n.indexOf(o)!==-1),s={...t,...e};for(const o of r){const l=Ty(t[o],e[o]);if(!l.valid)return{valid:!1,mergeErrorPath:[o,...l.mergeErrorPath]};s[o]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],o=e[r],l=Ty(s,o);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Nx(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),Ol(t))return t;const r=Ty(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const e5=te("$ZodRecord",(t,e)=>{St.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!hc(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:t}),n;const o=[],l=e.keyType._zod.values;if(l){n.value={};const u=new Set;for(const m of l)if(typeof m=="string"||typeof m=="number"||typeof m=="symbol"){u.add(typeof m=="number"?m.toString():m);const y=e.valueType._zod.run({value:s[m],issues:[]},r);y instanceof Promise?o.push(y.then(_=>{_.issues.length&&n.issues.push(...Ll(m,_.issues)),n.value[m]=_.value})):(y.issues.length&&n.issues.push(...Ll(m,y.issues)),n.value[m]=y.value)}let d;for(const m in s)u.has(m)||(d=d??[],d.push(m));d&&d.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:t,keys:d})}else{n.value={};for(const u of Reflect.ownKeys(s)){if(u==="__proto__")continue;const d=e.keyType._zod.run({value:u,issues:[]},r);if(d instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(d.issues.length){e.mode==="loose"?n.value[u]=s[u]:n.issues.push({code:"invalid_key",origin:"record",issues:d.issues.map(y=>Oo(y,r,Do())),input:u,path:[u],inst:t});continue}const m=e.valueType._zod.run({value:s[u],issues:[]},r);m instanceof Promise?o.push(m.then(y=>{y.issues.length&&n.issues.push(...Ll(u,y.issues)),n.value[d.value]=y.value})):(m.issues.length&&n.issues.push(...Ll(u,m.issues)),n.value[d.value]=m.value)}}return o.length?Promise.all(o).then(()=>n):n}}),t5=te("$ZodEnum",(t,e)=>{St.init(t,e);const n=N1(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>aL.has(typeof s)).map(s=>typeof s=="string"?Ap(s):s.toString()).join("|")})$`),t._zod.parse=(s,o)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),n5=te("$ZodTransform",(t,e)=>{St.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new C1(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new $l;return n.value=s,n}});function Rx(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const r5=te("$ZodOptional",(t,e)=>{St.init(t,e),t._zod.optin="optional",t._zod.optout="optional",xt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),xt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Q0(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>Rx(o,n.value)):Rx(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),s5=te("$ZodNullable",(t,e)=>{St.init(t,e),xt(t._zod,"optin",()=>e.innerType._zod.optin),xt(t._zod,"optout",()=>e.innerType._zod.optout),xt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Q0(n.source)}|null)$`):void 0}),xt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),i5=te("$ZodDefault",(t,e)=>{St.init(t,e),t._zod.optin="optional",xt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>Px(o,e)):Px(s,e)}});function Px(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const o5=te("$ZodPrefault",(t,e)=>{St.init(t,e),t._zod.optin="optional",xt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),a5=te("$ZodNonOptional",(t,e)=>{St.init(t,e),xt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>jx(o,t)):jx(s,t)}});function jx(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const l5=te("$ZodCatch",(t,e)=>{St.init(t,e),xt(t._zod,"optin",()=>e.innerType._zod.optin),xt(t._zod,"optout",()=>e.innerType._zod.optout),xt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>(n.value=o.value,o.issues.length&&(n.value=e.catchValue({...n,error:{issues:o.issues.map(l=>Oo(l,r,Do()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(o=>Oo(o,r,Do()))},input:n.value}),n.issues=[]),n)}}),c5=te("$ZodPipe",(t,e)=>{St.init(t,e),xt(t._zod,"values",()=>e.in._zod.values),xt(t._zod,"optin",()=>e.in._zod.optin),xt(t._zod,"optout",()=>e.out._zod.optout),xt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const o=e.out._zod.run(n,r);return o instanceof Promise?o.then(l=>rf(l,e.in,r)):rf(o,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(o=>rf(o,e.out,r)):rf(s,e.out,r)}});function rf(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const u5=te("$ZodReadonly",(t,e)=>{St.init(t,e),xt(t._zod,"propValues",()=>e.innerType._zod.propValues),xt(t._zod,"values",()=>e.innerType._zod.values),xt(t._zod,"optin",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),xt(t._zod,"optout",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(Dx):Dx(s)}});function Dx(t){return t.value=Object.freeze(t.value),t}const d5=te("$ZodCustom",(t,e)=>{gr.init(t,e),St.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(o=>Ox(o,n,r,t));Ox(s,n,r,t)}});function Ox(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Ju(s))}}var Lx;class h5{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function f5(){return new h5}(Lx=globalThis).__zod_globalRegistry??(Lx.__zod_globalRegistry=f5());const Tu=globalThis.__zod_globalRegistry;function p5(t,e){return new t({type:"string",...Ie(e)})}function m5(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Ie(e)})}function Mx(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Ie(e)})}function g5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Ie(e)})}function y5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ie(e)})}function v5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ie(e)})}function _5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ie(e)})}function w5(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Ie(e)})}function b5(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Ie(e)})}function x5(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ie(e)})}function k5(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Ie(e)})}function E5(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ie(e)})}function T5(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Ie(e)})}function I5(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Ie(e)})}function S5(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ie(e)})}function C5(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ie(e)})}function A5(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ie(e)})}function N5(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ie(e)})}function R5(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ie(e)})}function P5(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Ie(e)})}function j5(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Ie(e)})}function D5(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Ie(e)})}function O5(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Ie(e)})}function L5(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ie(e)})}function M5(t,e){return new t({type:"string",format:"date",check:"string_format",...Ie(e)})}function V5(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Ie(e)})}function F5(t,e){return new t({type:"string",format:"duration",check:"string_format",...Ie(e)})}function z5(t,e){return new t({type:"number",checks:[],...Ie(e)})}function U5(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Ie(e)})}function $5(t,e){return new t({type:"boolean",...Ie(e)})}function B5(t,e){return new t({type:"undefined",...Ie(e)})}function W5(t,e){return new t({type:"null",...Ie(e)})}function q5(t){return new t({type:"unknown"})}function H5(t,e){return new t({type:"never",...Ie(e)})}function K5(t,e){return new t({type:"date",...Ie(e)})}function Vx(t,e){return new z1({check:"less_than",...Ie(e),value:t,inclusive:!1})}function kf(t,e){return new z1({check:"less_than",...Ie(e),value:t,inclusive:!0})}function Fx(t,e){return new U1({check:"greater_than",...Ie(e),value:t,inclusive:!1})}function Ef(t,e){return new U1({check:"greater_than",...Ie(e),value:t,inclusive:!0})}function zx(t,e){return new rM({check:"multiple_of",...Ie(e),value:t})}function H1(t,e){return new iM({check:"max_length",...Ie(e),maximum:t})}function Zf(t,e){return new oM({check:"min_length",...Ie(e),minimum:t})}function K1(t,e){return new aM({check:"length_equals",...Ie(e),length:t})}function G5(t,e){return new lM({check:"string_format",format:"regex",...Ie(e),pattern:t})}function Q5(t){return new cM({check:"string_format",format:"lowercase",...Ie(t)})}function Z5(t){return new uM({check:"string_format",format:"uppercase",...Ie(t)})}function Y5(t,e){return new dM({check:"string_format",format:"includes",...Ie(e),includes:t})}function J5(t,e){return new hM({check:"string_format",format:"starts_with",...Ie(e),prefix:t})}function X5(t,e){return new fM({check:"string_format",format:"ends_with",...Ie(e),suffix:t})}function Ac(t){return new pM({check:"overwrite",tx:t})}function e3(t){return Ac(e=>e.normalize(t))}function t3(){return Ac(t=>t.trim())}function n3(){return Ac(t=>t.toLowerCase())}function r3(){return Ac(t=>t.toUpperCase())}function s3(){return Ac(t=>iL(t))}function i3(t,e,n){return new t({type:"array",element:e,...Ie(n)})}function o3(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Ie(n)})}function a3(t){const e=l3(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Ju(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Ju(s))}},t(n.value,n)));return e}function l3(t,e){const n=new gr({check:"custom",...Ie(e)});return n._zod.check=t,n}function G1(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??Tu,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function ln(t,e,n={path:[],schemaPath:[]}){var y,_;var r;const s=t._zod.def,o=e.seen.get(t);if(o)return o.count++,n.schemaPath.includes(t)&&(o.cycle=n.path),o.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=(_=(y=t._zod).toJSONSchema)==null?void 0:_.call(y);if(u)l.schema=u;else{const x={...n,schemaPath:[...n.schemaPath,t],path:n.path},E=t._zod.parent;if(E)l.ref=E,ln(E,e,x),e.seen.get(E).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,x);else{const C=l.schema,I=e.processors[s.type];if(!I)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);I(t,e,C,x)}}const d=e.metadataRegistry.get(t);return d&&Object.assign(l.schema,d),e.io==="input"&&Gn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function Q1(t,e){var o,l,u;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=d=>{var E;const m=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const C=(E=t.external.registry.get(d[0]))==null?void 0:E.id,I=t.external.uri??(U=>U);if(C)return{ref:I(C)};const R=d[1].defId??d[1].schema.id??`schema${t.counter++}`;return d[1].defId=R,{defId:R,ref:`${I("__shared")}#/${m}/${R}`}}if(d[1]===n)return{ref:"#"};const _=`#/${m}/`,x=d[1].schema.id??`__schema${t.counter++}`;return{defId:x,ref:_+x}},s=d=>{if(d[1].schema.$ref)return;const m=d[1],{ref:y,defId:_}=r(d);m.def={...m.schema},_&&(m.defId=_);const x=m.schema;for(const E in x)delete x[E];x.$ref=y};if(t.cycles==="throw")for(const d of t.seen.entries()){const m=d[1];if(m.cycle)throw new Error(`Cycle detected: #/${(o=m.cycle)==null?void 0:o.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const d of t.seen.entries()){const m=d[1];if(e===d[0]){s(d);continue}if(t.external){const _=(l=t.external.registry.get(d[0]))==null?void 0:l.id;if(e!==d[0]&&_){s(d);continue}}if((u=t.metadataRegistry.get(d[0]))==null?void 0:u.id){s(d);continue}if(m.cycle){s(d);continue}if(m.count>1&&t.reused==="ref"){s(d);continue}}}function Z1(t,e){var l,u,d;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=m=>{const y=t.seen.get(m),_=y.def??y.schema,x={..._};if(y.ref===null)return;const E=y.ref;if(y.ref=null,E){r(E);const C=t.seen.get(E).schema;C.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(_.allOf=_.allOf??[],_.allOf.push(C)):(Object.assign(_,C),Object.assign(_,x))}y.isParent||t.override({zodSchema:m,jsonSchema:_,path:y.path??[]})};for(const m of[...t.seen.entries()].reverse())r(m[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,(l=t.external)!=null&&l.uri){const m=(u=t.external.registry.get(e))==null?void 0:u.id;if(!m)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(m)}Object.assign(s,n.def??n.schema);const o=((d=t.external)==null?void 0:d.defs)??{};for(const m of t.seen.entries()){const y=m[1];y.def&&y.defId&&(o[y.defId]=y.def)}t.external||Object.keys(o).length>0&&(t.target==="draft-2020-12"?s.$defs=o:s.definitions=o);try{const m=JSON.parse(JSON.stringify(s));return Object.defineProperty(m,"~standard",{value:{...e["~standard"],jsonSchema:{input:Yf(e,"input"),output:Yf(e,"output")}},enumerable:!1,writable:!1}),m}catch{throw new Error("Error converting schema to JSON.")}}function Gn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Gn(r.element,n);if(r.type==="set")return Gn(r.valueType,n);if(r.type==="lazy")return Gn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Gn(r.innerType,n);if(r.type==="intersection")return Gn(r.left,n)||Gn(r.right,n);if(r.type==="record"||r.type==="map")return Gn(r.keyType,n)||Gn(r.valueType,n);if(r.type==="pipe")return Gn(r.in,n)||Gn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(Gn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(Gn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(Gn(s,n))return!0;return!!(r.rest&&Gn(r.rest,n))}return!1}const c3=(t,e={})=>n=>{const r=G1({...n,processors:e});return ln(t,r),Q1(r,t),Z1(r,t)},Yf=(t,e)=>n=>{const{libraryOptions:r,target:s}=n??{},o=G1({...r??{},target:s,io:e,processors:{}});return ln(t,o),Q1(o,t),Z1(o,t)},u3={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},d3=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:o,maximum:l,format:u,patterns:d,contentEncoding:m}=t._zod.bag;if(typeof o=="number"&&(s.minLength=o),typeof l=="number"&&(s.maxLength=l),u&&(s.format=u3[u]??u,s.format===""&&delete s.format),m&&(s.contentEncoding=m),d&&d.size>0){const y=[...d];y.length===1?s.pattern=y[0].source:y.length>1&&(s.allOf=[...y.map(_=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:_.source}))])}},h3=(t,e,n,r)=>{const s=n,{minimum:o,maximum:l,format:u,multipleOf:d,exclusiveMaximum:m,exclusiveMinimum:y}=t._zod.bag;typeof u=="string"&&u.includes("int")?s.type="integer":s.type="number",typeof y=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=y,s.exclusiveMinimum=!0):s.exclusiveMinimum=y),typeof o=="number"&&(s.minimum=o,typeof y=="number"&&e.target!=="draft-04"&&(y>=o?delete s.minimum:delete s.exclusiveMinimum)),typeof m=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=m,s.exclusiveMaximum=!0):s.exclusiveMaximum=m),typeof l=="number"&&(s.maximum=l,typeof m=="number"&&e.target!=="draft-04"&&(m<=l?delete s.maximum:delete s.exclusiveMaximum)),typeof d=="number"&&(s.multipleOf=d)},f3=(t,e,n,r)=>{n.type="boolean"},p3=(t,e,n,r)=>{e.target==="openapi-3.0"?(n.type="string",n.nullable=!0,n.enum=[null]):n.type="null"},m3=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},g3=(t,e,n,r)=>{n.not={}},y3=(t,e,n,r)=>{},v3=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},_3=(t,e,n,r)=>{const s=t._zod.def,o=N1(s.entries);o.every(l=>typeof l=="number")&&(n.type="number"),o.every(l=>typeof l=="string")&&(n.type="string"),n.enum=o},w3=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},b3=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},x3=(t,e,n,r)=>{const s=n,o=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=ln(o.element,e,{...r,path:[...r.path,"items"]})},k3=(t,e,n,r)=>{var m;const s=n,o=t._zod.def;s.type="object",s.properties={};const l=o.shape;for(const y in l)s.properties[y]=ln(l[y],e,{...r,path:[...r.path,"properties",y]});const u=new Set(Object.keys(l)),d=new Set([...u].filter(y=>{const _=o.shape[y]._zod;return e.io==="input"?_.optin===void 0:_.optout===void 0}));d.size>0&&(s.required=Array.from(d)),((m=o.catchall)==null?void 0:m._zod.def.type)==="never"?s.additionalProperties=!1:o.catchall?o.catchall&&(s.additionalProperties=ln(o.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},E3=(t,e,n,r)=>{const s=t._zod.def,o=s.inclusive===!1,l=s.options.map((u,d)=>ln(u,e,{...r,path:[...r.path,o?"oneOf":"anyOf",d]}));o?n.oneOf=l:n.anyOf=l},T3=(t,e,n,r)=>{const s=t._zod.def,o=ln(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=ln(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=m=>"allOf"in m&&Object.keys(m).length===1,d=[...u(o)?o.allOf:[o],...u(l)?l.allOf:[l]];n.allOf=d},I3=(t,e,n,r)=>{const s=n,o=t._zod.def;s.type="object",(e.target==="draft-07"||e.target==="draft-2020-12")&&(s.propertyNames=ln(o.keyType,e,{...r,path:[...r.path,"propertyNames"]})),s.additionalProperties=ln(o.valueType,e,{...r,path:[...r.path,"additionalProperties"]})},S3=(t,e,n,r)=>{const s=t._zod.def,o=ln(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[o,{type:"null"}]},C3=(t,e,n,r)=>{const s=t._zod.def;ln(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType},A3=(t,e,n,r)=>{const s=t._zod.def;ln(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},N3=(t,e,n,r)=>{const s=t._zod.def;ln(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},R3=(t,e,n,r)=>{const s=t._zod.def;ln(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},P3=(t,e,n,r)=>{const s=t._zod.def,o=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;ln(o,e,r);const l=e.seen.get(t);l.ref=o},j3=(t,e,n,r)=>{const s=t._zod.def;ln(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,n.readOnly=!0},D3=(t,e,n,r)=>{const s=t._zod.def;ln(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType},O3=te("ZodISODateTime",(t,e)=>{CM.init(t,e),Ft.init(t,e)});function L3(t){return L5(O3,t)}const M3=te("ZodISODate",(t,e)=>{AM.init(t,e),Ft.init(t,e)});function V3(t){return M5(M3,t)}const F3=te("ZodISOTime",(t,e)=>{NM.init(t,e),Ft.init(t,e)});function z3(t){return V5(F3,t)}const U3=te("ZodISODuration",(t,e)=>{RM.init(t,e),Ft.init(t,e)});function $3(t){return F5(U3,t)}const B3=(t,e)=>{D1.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>vL(t,n)},flatten:{value:n=>yL(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Ey,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Ey,2)}},isEmpty:{get(){return t.issues.length===0}}})},Qr=te("ZodError",B3,{Parent:Error}),W3=Y0(Qr),q3=J0(Qr),H3=Np(Qr),K3=Rp(Qr),G3=bL(Qr),Q3=xL(Qr),Z3=kL(Qr),Y3=EL(Qr),J3=TL(Qr),X3=IL(Qr),eV=SL(Qr),tV=CL(Qr),Dt=te("ZodType",(t,e)=>(St.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Yf(t,"input"),output:Yf(t,"output")}}),t.toJSONSchema=c3(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(qa(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>Uo(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>W3(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>H3(t,n,r),t.parseAsync=async(n,r)=>q3(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>K3(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>G3(t,n,r),t.decode=(n,r)=>Q3(t,n,r),t.encodeAsync=async(n,r)=>Z3(t,n,r),t.decodeAsync=async(n,r)=>Y3(t,n,r),t.safeEncode=(n,r)=>J3(t,n,r),t.safeDecode=(n,r)=>X3(t,n,r),t.safeEncodeAsync=async(n,r)=>eV(t,n,r),t.safeDecodeAsync=async(n,r)=>tV(t,n,r),t.refine=(n,r)=>t.check(ZV(n,r)),t.superRefine=n=>t.check(YV(n)),t.overwrite=n=>t.check(Ac(n)),t.optional=()=>Wx(t),t.nullable=()=>qx(t),t.nullish=()=>Wx(qx(t)),t.nonoptional=n=>WV(t,n),t.array=()=>ms(t),t.or=n=>ev([t,n]),t.and=n=>OV(t,n),t.transform=n=>Hx(t,VV(n)),t.default=n=>UV(t,n),t.prefault=n=>BV(t,n),t.catch=n=>HV(t,n),t.pipe=n=>Hx(t,n),t.readonly=()=>QV(t),t.describe=n=>{const r=t.clone();return Tu.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=Tu.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Tu.get(t);const r=t.clone();return Tu.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Y1=te("_ZodString",(t,e)=>{X0.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(r,s,o)=>d3(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(G5(...r)),t.includes=(...r)=>t.check(Y5(...r)),t.startsWith=(...r)=>t.check(J5(...r)),t.endsWith=(...r)=>t.check(X5(...r)),t.min=(...r)=>t.check(Zf(...r)),t.max=(...r)=>t.check(H1(...r)),t.length=(...r)=>t.check(K1(...r)),t.nonempty=(...r)=>t.check(Zf(1,...r)),t.lowercase=r=>t.check(Q5(r)),t.uppercase=r=>t.check(Z5(r)),t.trim=()=>t.check(t3()),t.normalize=(...r)=>t.check(e3(...r)),t.toLowerCase=()=>t.check(n3()),t.toUpperCase=()=>t.check(r3()),t.slugify=()=>t.check(s3())}),nV=te("ZodString",(t,e)=>{X0.init(t,e),Y1.init(t,e),t.email=n=>t.check(m5(rV,n)),t.url=n=>t.check(w5(sV,n)),t.jwt=n=>t.check(O5(_V,n)),t.emoji=n=>t.check(b5(iV,n)),t.guid=n=>t.check(Mx(Ux,n)),t.uuid=n=>t.check(g5(sf,n)),t.uuidv4=n=>t.check(y5(sf,n)),t.uuidv6=n=>t.check(v5(sf,n)),t.uuidv7=n=>t.check(_5(sf,n)),t.nanoid=n=>t.check(x5(oV,n)),t.guid=n=>t.check(Mx(Ux,n)),t.cuid=n=>t.check(k5(aV,n)),t.cuid2=n=>t.check(E5(lV,n)),t.ulid=n=>t.check(T5(cV,n)),t.base64=n=>t.check(P5(gV,n)),t.base64url=n=>t.check(j5(yV,n)),t.xid=n=>t.check(I5(uV,n)),t.ksuid=n=>t.check(S5(dV,n)),t.ipv4=n=>t.check(C5(hV,n)),t.ipv6=n=>t.check(A5(fV,n)),t.cidrv4=n=>t.check(N5(pV,n)),t.cidrv6=n=>t.check(R5(mV,n)),t.e164=n=>t.check(D5(vV,n)),t.datetime=n=>t.check(L3(n)),t.date=n=>t.check(V3(n)),t.time=n=>t.check(z3(n)),t.duration=n=>t.check($3(n))});function ge(t){return p5(nV,t)}const Ft=te("ZodStringFormat",(t,e)=>{jt.init(t,e),Y1.init(t,e)}),rV=te("ZodEmail",(t,e)=>{_M.init(t,e),Ft.init(t,e)}),Ux=te("ZodGUID",(t,e)=>{yM.init(t,e),Ft.init(t,e)}),sf=te("ZodUUID",(t,e)=>{vM.init(t,e),Ft.init(t,e)}),sV=te("ZodURL",(t,e)=>{wM.init(t,e),Ft.init(t,e)}),iV=te("ZodEmoji",(t,e)=>{bM.init(t,e),Ft.init(t,e)}),oV=te("ZodNanoID",(t,e)=>{xM.init(t,e),Ft.init(t,e)}),aV=te("ZodCUID",(t,e)=>{kM.init(t,e),Ft.init(t,e)}),lV=te("ZodCUID2",(t,e)=>{EM.init(t,e),Ft.init(t,e)}),cV=te("ZodULID",(t,e)=>{TM.init(t,e),Ft.init(t,e)}),uV=te("ZodXID",(t,e)=>{IM.init(t,e),Ft.init(t,e)}),dV=te("ZodKSUID",(t,e)=>{SM.init(t,e),Ft.init(t,e)}),hV=te("ZodIPv4",(t,e)=>{PM.init(t,e),Ft.init(t,e)}),fV=te("ZodIPv6",(t,e)=>{jM.init(t,e),Ft.init(t,e)}),pV=te("ZodCIDRv4",(t,e)=>{DM.init(t,e),Ft.init(t,e)}),mV=te("ZodCIDRv6",(t,e)=>{OM.init(t,e),Ft.init(t,e)}),gV=te("ZodBase64",(t,e)=>{LM.init(t,e),Ft.init(t,e)}),yV=te("ZodBase64URL",(t,e)=>{VM.init(t,e),Ft.init(t,e)}),vV=te("ZodE164",(t,e)=>{FM.init(t,e),Ft.init(t,e)}),_V=te("ZodJWT",(t,e)=>{UM.init(t,e),Ft.init(t,e)}),J1=te("ZodNumber",(t,e)=>{B1.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(r,s,o)=>h3(t,r,s),t.gt=(r,s)=>t.check(Fx(r,s)),t.gte=(r,s)=>t.check(Ef(r,s)),t.min=(r,s)=>t.check(Ef(r,s)),t.lt=(r,s)=>t.check(Vx(r,s)),t.lte=(r,s)=>t.check(kf(r,s)),t.max=(r,s)=>t.check(kf(r,s)),t.int=r=>t.check($x(r)),t.safe=r=>t.check($x(r)),t.positive=r=>t.check(Fx(0,r)),t.nonnegative=r=>t.check(Ef(0,r)),t.negative=r=>t.check(Vx(0,r)),t.nonpositive=r=>t.check(kf(0,r)),t.multipleOf=(r,s)=>t.check(zx(r,s)),t.step=(r,s)=>t.check(zx(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function ys(t){return z5(J1,t)}const wV=te("ZodNumberFormat",(t,e)=>{$M.init(t,e),J1.init(t,e)});function $x(t){return U5(wV,t)}const bV=te("ZodBoolean",(t,e)=>{BM.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>f3(t,n,r)});function X1(t){return $5(bV,t)}const xV=te("ZodUndefined",(t,e)=>{WM.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>m3(t,n)});function kV(t){return B5(xV,t)}const EV=te("ZodNull",(t,e)=>{qM.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>p3(t,n,r)});function TV(t){return W5(EV,t)}const IV=te("ZodUnknown",(t,e)=>{HM.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>y3()});function Bx(){return q5(IV)}const SV=te("ZodNever",(t,e)=>{KM.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>g3(t,n,r)});function CV(t){return H5(SV,t)}const AV=te("ZodDate",(t,e)=>{GM.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(r,s,o)=>v3(t,r),t.min=(r,s)=>t.check(Ef(r,s)),t.max=(r,s)=>t.check(kf(r,s));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function NV(t){return K5(AV,t)}const RV=te("ZodArray",(t,e)=>{QM.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>x3(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Zf(n,r)),t.nonempty=n=>t.check(Zf(1,n)),t.max=(n,r)=>t.check(H1(n,r)),t.length=(n,r)=>t.check(K1(n,r)),t.unwrap=()=>t.element});function ms(t,e){return i3(RV,t,e)}const PV=te("ZodObject",(t,e)=>{YM.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>k3(t,n,r,s),xt(t,"shape",()=>e.shape),t.keyof=()=>Xu(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Bx()}),t.loose=()=>t.clone({...t._zod.def,catchall:Bx()}),t.strict=()=>t.clone({...t._zod.def,catchall:CV()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>hL(t,n),t.safeExtend=n=>fL(t,n),t.merge=n=>pL(t,n),t.pick=n=>uL(t,n),t.omit=n=>dL(t,n),t.partial=(...n)=>mL(tI,t,n[0]),t.required=(...n)=>gL(nI,t,n[0])});function $n(t,e){const n={type:"object",shape:t??{},...Ie(e)};return new PV(n)}const jV=te("ZodUnion",(t,e)=>{JM.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>E3(t,n,r,s),t.options=e.options});function ev(t,e){return new jV({type:"union",options:t,...Ie(e)})}const DV=te("ZodIntersection",(t,e)=>{XM.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>T3(t,n,r,s)});function OV(t,e){return new DV({type:"intersection",left:t,right:e})}const LV=te("ZodRecord",(t,e)=>{e5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>I3(t,n,r,s),t.keyType=e.keyType,t.valueType=e.valueType});function eI(t,e,n){return new LV({type:"record",keyType:t,valueType:e,...Ie(n)})}const Iy=te("ZodEnum",(t,e)=>{t5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(r,s,o)=>_3(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const o={};for(const l of r)if(n.has(l))o[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Iy({...e,checks:[],...Ie(s),entries:o})},t.exclude=(r,s)=>{const o={...e.entries};for(const l of r)if(n.has(l))delete o[l];else throw new Error(`Key ${l} not found in enum`);return new Iy({...e,checks:[],...Ie(s),entries:o})}});function Xu(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Iy({type:"enum",entries:n,...Ie(e)})}const MV=te("ZodTransform",(t,e)=>{n5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>b3(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new C1(t.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(Ju(o,n.value,e));else{const l=o;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(Ju(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(o=>(n.value=o,n)):(n.value=s,n)}});function VV(t){return new MV({type:"transform",transform:t})}const tI=te("ZodOptional",(t,e)=>{r5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>D3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Wx(t){return new tI({type:"optional",innerType:t})}const FV=te("ZodNullable",(t,e)=>{s5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>S3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function qx(t){return new FV({type:"nullable",innerType:t})}const zV=te("ZodDefault",(t,e)=>{i5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>A3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function UV(t,e){return new zV({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():P1(e)}})}const $V=te("ZodPrefault",(t,e)=>{o5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>N3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function BV(t,e){return new $V({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():P1(e)}})}const nI=te("ZodNonOptional",(t,e)=>{a5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>C3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function WV(t,e){return new nI({type:"nonoptional",innerType:t,...Ie(e)})}const qV=te("ZodCatch",(t,e)=>{l5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>R3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function HV(t,e){return new qV({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const KV=te("ZodPipe",(t,e)=>{c5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>P3(t,n,r,s),t.in=e.in,t.out=e.out});function Hx(t,e){return new KV({type:"pipe",in:t,out:e})}const GV=te("ZodReadonly",(t,e)=>{u5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>j3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function QV(t){return new GV({type:"readonly",innerType:t})}const rI=te("ZodCustom",(t,e)=>{d5.init(t,e),Dt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>w3(t,n)});function ZV(t,e={}){return o3(rI,t,e)}function YV(t){return a3(t)}function JV(t,e={error:`Input not instance of ${t.name}`}){const n=new rI({type:"custom",check:"custom",fn:r=>r instanceof t,abort:!0,...Ie(e)});return n._zod.bag.Class=t,n}const gi=ev([NV(),JV(kt),ge().datetime({offset:!0}).or(ge().datetime())]).nullable().optional(),XV=$n({type:Xu(["none","daily","weekly","weekdays","monthly"]).default("none"),days:ms(ys().min(0).max(6)).optional()}).nullable(),tv=$n({id:ge().optional(),title:ge().min(1,""),description:ge().nullable().optional(),status:Xu(["todo","completed","archived"]).default("todo"),dueDate:gi,completedAt:gi,createdAt:gi,ownerId:ge(),projectId:ge().nullable().optional(),labelIds:ms(ge()).optional(),timeBlockId:ge().nullable().optional(),duration:ys().min(0,"0").optional(),isImportant:X1().default(!1),recurrence:XV,order:ys().optional()});$n({id:ge().optional(),name:ge().min(1,""),color:ge().optional(),ownerId:ge(),createdAt:gi,order:ys().optional()});$n({id:ge().optional(),name:ge().min(1,""),color:ge().optional(),ownerId:ge(),workspaceId:ge().optional(),createdAt:gi});const nv=$n({id:ge().optional(),name:ge().min(1,""),createdAt:gi}),sI=$n({id:ge().optional(),name:ge().min(1,""),query:ge(),workspaceId:ge().optional(),createdAt:gi}),Kx=ge().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,"HH:mm: 09:00, 14:30");$n({id:ge().optional(),name:ge().min(1,""),start:Kx,end:Kx,color:ge().optional(),order:ys().optional()});$n({id:ge().optional(),mode:ge(),data:eI(ge(),ge()),createdAt:gi,updatedAt:gi,ownerId:ge(),workspaceId:ge()});const Nc=Ba()(Sd(t=>({currentWorkspaceId:null,workspaces:[],setCurrentWorkspaceId:e=>t({currentWorkspaceId:e}),setWorkspaces:e=>{const n=e.filter(r=>{const s=nv.safeParse(r);return s.success?!0:(console.error("Invalid workspace data:",r,s.error),!1)});t({workspaces:n})}}),{name:"workspace-storage",partialize:t=>({currentWorkspaceId:t.currentWorkspaceId})}));function eF(){return typeof window<"u"&&window.GLOBAL_APP_ID?window.GLOBAL_APP_ID:typeof __app_id<"u"?__app_id:"default-app-id"}function Sy(t){return`artifacts/${eF()}/users/${t}`}function Nl(t,e){return`${Sy(t)}/workspaces/${e}`}const qe={users:t=>Sy(t),workspaces:t=>`${Sy(t)}/workspaces`,filters:(t,e)=>`${Nl(t,e)}/filters`,labels:(t,e)=>`${Nl(t,e)}/labels`,timeblocks:(t,e)=>`${Nl(t,e)}/timeblocks`,tasks:(t,e)=>`${Nl(t,e)}/tasks`,projects:(t,e)=>`${Nl(t,e)}/projects`,targets:(t,e)=>`${Nl(t,e)}/targets`},tF=["permission-denied","invalid-argument","unauthenticated","not-found","already-exists","failed-precondition"];async function tr(t,e={}){const n=typeof e=="number"?{maxRetries:e}:e,{maxRetries:r=3,initialDelay:s=1e3,onError:o,onFinalFailure:l}=n;let u;for(let d=0;d<=r;d++)try{return await t()}catch(m){if(u=m,o&&o(m,d),d===r)break;const y=(m==null?void 0:m.code)||"";if(tF.some(E=>y.includes(E)))throw l&&l(m),m;const x=s*Math.pow(2,d);await new Promise(E=>setTimeout(E,x))}throw l&&l(u),u}class nF{constructor(){Rt(this,"cachedWorkspacesMap",new Map);Rt(this,"listeners",new Map);Rt(this,"unsubscribes",new Map)}isInitialized(e){return this.cachedWorkspacesMap.has(e)}notifyListeners(e){const n=this.cachedWorkspacesMap.get(e)||[],r=this.listeners.get(e);if(r){const s=[...n];r.forEach(o=>o(s))}}setCache(e,n){this.cachedWorkspacesMap.set(e,n),this.notifyListeners(e)}getWorkspaces(e){return this.cachedWorkspacesMap.get(e)||[]}subscribe(e,n){this.listeners.has(e)||this.listeners.set(e,new Set);const r=this.listeners.get(e);r.add(n);const s=this.cachedWorkspacesMap.get(e);if(s&&queueMicrotask(()=>n([...s])),!this.unsubscribes.has(e)){const o=qe.workspaces(e),l=Ci(ft(Fe,o),Sp("createdAt","asc"));console.log(`[WorkspaceCache] Subscribing to path: ${o}`);const u=zo(l,d=>{const m=d.docs.map(_=>({id:_.id,..._.data()}));console.log(`[WorkspaceCache] Received ${m.length} workspaces from Firestore`);const y=m.filter(_=>{const x=nv.safeParse(_);return x.success?!0:(console.error("[WorkspaceCache] Invalid workspace data:",_,x.error),!1)});this.cachedWorkspacesMap.set(e,y),this.notifyListeners(e)},d=>{console.error("[WorkspaceCache] Subscription error:",d),this.cachedWorkspacesMap.set(e,[]),this.notifyListeners(e)});this.unsubscribes.set(e,u)}return()=>{var o;r.delete(n),r.size===0&&((o=this.unsubscribes.get(e))==null||o(),this.unsubscribes.delete(e),this.listeners.delete(e))}}clearCache(e){var n;this.cachedWorkspacesMap.delete(e),(n=this.unsubscribes.get(e))==null||n(),this.unsubscribes.delete(e),this.listeners.delete(e)}}const yi=new nF,rF=t=>yi.isInitialized(t),sF=t=>yi.getWorkspaces(t);function iF(t,e){return yi.subscribe(t,e)}async function iI(t,e){const n=yi.getWorkspaces(t);nv.pick({name:!0}).parse({name:e});const r="temp-"+Date.now(),s={id:r,name:e,createdAt:new Date};yi.setCache(t,[...n,s]);const o=qe.workspaces(t);console.log(`[WorkspaceCache] Adding workspace to path: ${o}`);let l=r;return await tr(async()=>{const u=await Ir(ft(Fe,o),{name:e,createdAt:Kr()});l=u.id,console.log(`[WorkspaceCache] Successfully added workspace with ID: ${u.id}`)},{onFinalFailure:()=>{console.error(`[WorkspaceCache] Failed to add workspace: ${e}`),yi.setCache(t,n),ut.error("")}}),{id:l,name:e}}async function oF(t,e,n){const r=yi.getWorkspaces(t),s=r.map(o=>o.id===e?{...o,...n}:o);yi.setCache(t,s),await tr(async()=>{const o=qe.workspaces(t),l=yn(Fe,o,e);await $a(l,n)},{onFinalFailure:()=>{yi.setCache(t,r),ut.error("")}})}async function aF(t){try{const e=qe.workspaces(t);(await Vs(Ci(ft(Fe,e),c1(1)))).empty&&await iI(t,"")}catch(e){console.error("[WorkspaceCache] Failed to ensure default workspace:",e)}}function oI(t){var n;const e=t||((n=He.currentUser)==null?void 0:n.uid);return e?sF(e):[]}function lF(t){var n;const e=t||((n=He.currentUser)==null?void 0:n.uid);return e?rF(e):!1}function Zr(){return Nc.getState().currentWorkspaceId}function aI(t){if(!t)return;const e=Nc.getState();e.currentWorkspaceId!==t&&e.setCurrentWorkspaceId(t)}function cF(t,e){var o;const n=typeof t=="function"?t:e,r=typeof t=="string"?t:(o=He.currentUser)==null?void 0:o.uid;return r?iF(r,l=>{l.length===0?aF(r).catch(u=>console.error("[Workspace] Default creation error:",u)):uF(l),typeof n=="function"&&n(l)}):(typeof n=="function"&&n([]),()=>{})}function uF(t){if(t.length===0)return null;const e=Nc.getState();let n=e.currentWorkspaceId;const r=n?t.some(s=>s.id===n):!1;return(!n||!r)&&(n=t[0].id,e.setCurrentWorkspaceId(n)),n}async function dF(t){const e=He.currentUser;if(!e)throw new Error("Authentication required");return iI(e.uid,t)}async function hF(t,e){const n=He.currentUser;if(!n)throw new Error("Authentication required");return oF(n.uid,t,{name:e})}function ed(t){const e=`[ErrorLogger] [${t.type.toUpperCase()}]`,n=t.stack?`
${t.stack}`:"";t.type==="warn"?console.warn(`${e} ${t.message}${n}`):console.error(`${e} ${t.message}${n}`)}function fF(){window.onerror=(t,e,n,r,s)=>(ed({timestamp:new Date().toISOString(),type:"error",message:String(t),stack:s==null?void 0:s.stack}),!1),window.onunhandledrejection=t=>{const e=t.reason;ed({timestamp:new Date().toISOString(),type:"unhandledrejection",message:(e==null?void 0:e.message)||String(e),stack:e==null?void 0:e.stack})},console.info("[ErrorLogger] Initialized")}function pF(t,e){ed({timestamp:new Date().toISOString(),type:"react",message:t.message,stack:t.stack})}class mF{constructor(){Rt(this,"initialLoginPromise",null)}getCurrentUserId(){var e;return((e=He.currentUser)==null?void 0:e.uid)||null}hasInitialToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return!0;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return!0}catch{}return!1}getInitialAuthToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return window.GLOBAL_INITIAL_AUTH_TOKEN;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return __initial_auth_token}catch{}return null}async tryInitialTokenLogin(){if(this.initialLoginPromise)return this.initialLoginPromise;const e=this.getInitialAuthToken();if(!e){this.initialLoginPromise=Promise.resolve();return}return this.initialLoginPromise=(async()=>{try{await AE(He,e),console.log("[Auth] Initial token login success")}catch(n){ed({timestamp:new Date().toISOString(),type:"error",message:`Initial token login failed: ${n.message}`,stack:n.stack})}})(),this.initialLoginPromise}initAuthListener(e,n){return this.tryInitialTokenLogin(),n0(He,s=>{s?e(s):n()})}async loginWithEmail(e,n){return await t0(He,e,n)}async logout(){try{await r0(He)}catch(e){throw ed({timestamp:new Date().toISOString(),type:"error",message:`Logout failed: ${e.message}`,stack:e.stack}),e}}async updateUserAuthPassword(e){const n=He.currentUser;if(!n)throw new Error("Authentication required: No current user.");await NE(n,e)}}const Cy=new mF,gF=(t,e)=>Cy.initAuthListener(t,e),Tf={TIMEOUT:{AUTH_LOADING:1e4},TIME_BLOCK:{MAX_COUNT:10}},rv=()=>{var l;const[t,e]=O.useState(((l=He.currentUser)==null?void 0:l.uid)||null),[n,r]=O.useState(He.currentUser),[s,o]=O.useState(!0);return O.useEffect(()=>{const u=new AbortController;let d=()=>{},m=null;const y=async()=>{if(Cy.hasInitialToken())try{await Cy.tryInitialTokenLogin()}catch(_){console.error("[useAuth] Initial token login failed:",_)}u.signal.aborted||(d=gF(_=>{u.signal.aborted||(e(_.uid),r(_),o(!1),m&&clearTimeout(m))},()=>{u.signal.aborted||(e(null),r(null),o(!1),m&&clearTimeout(m))}))};return m=setTimeout(()=>{u.signal.aborted||(console.warn("[useAuth] Loading timeout reached, forcing loading=false"),o(!1))},Tf.TIMEOUT.AUTH_LOADING),y(),()=>{u.abort(),d(),m&&clearTimeout(m)}},[]),{userId:t,user:n,loading:s}},of=new Map;function Ha(t,e,n){const r=Vy(),s=JSON.stringify(t);return O.useEffect(()=>{if(t.some(l=>l==null))return;let o=of.get(s);return o||(o={count:0,unsubscribe:e(u=>{r.setQueryData(t,u)})},of.set(s,o)),o.count++,()=>{const l=of.get(s);l&&(l.count--,l.count===0&&(l.unsubscribe(),of.delete(s)))}},[s]),SC({queryKey:t,queryFn:()=>{const o=r.getQueryData(t);return o!==void 0?Promise.resolve(o):n!==void 0?Promise.resolve(n):new Promise(l=>{const u=setTimeout(()=>{const y=r.getQueryData(t);l(y??n??null)},1e4),d=r.getQueryCache().subscribe(y=>{if(y.type==="updated"&&JSON.stringify(y.query.queryKey)===s){const _=y.query.state.data;_!==void 0&&(clearTimeout(u),d(),l(_))}}),m=r.getQueryData(t);m!==void 0&&(clearTimeout(u),d(),l(m))})},initialData:n,staleTime:1/0,gcTime:1e3*60*5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})}const yF=()=>{const{userId:t,loading:e}=rv(),n=O.useCallback(d=>t?cF(t,d):()=>{},[t]),s=(t?lF(t):!1)&&t?oI(t):void 0,{data:o,isPending:l}=Ha(["workspaces",t||void 0],n,s);return{workspaces:o||[],loading:e||!!t&&l}},Nr=()=>{const t=Nc(r=>r.currentWorkspaceId),{userId:e,loading:n}=rv();return{workspaceId:t,userId:e,loading:n}},vF=()=>{const{t}=mt(),{workspaces:e,loading:n}=yF(),{openModal:r}=vn(),[s,o]=O.useState(!1),l=O.useRef(null),{workspaceId:u}=Nr(),d=e.find(m=>m.id===u);return O.useEffect(()=>{const m=_=>{l.current&&!l.current.contains(_.target)&&o(!1)},y=_=>{_.key==="Escape"&&o(!1)};return s&&(document.addEventListener("mousedown",m),document.addEventListener("keydown",y)),()=>{document.removeEventListener("mousedown",m),document.removeEventListener("keydown",y)}},[s]),n?p.jsx("div",{className:"h-8 w-32 bg-gray-100 dark:bg-gray-800 animate-pulse rounded"}):p.jsxs("div",{className:"relative",ref:l,children:[p.jsxs("button",{onClick:()=>o(!s),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md px-2 py-1 transition-colors group","aria-expanded":s,"aria-haspopup":"true",children:[p.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 truncate max-w-[120px] sm:max-w-[140px] md:max-w-[180px]",children:d?d.name:t("loading")}),p.jsx("svg",{className:Ce("w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-transform duration-200",s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),s&&p.jsxs("div",{className:"absolute left-0 mt-2 w-60 sm:w-64 max-w-[calc(100vw-32px)] origin-top-left rounded-lg shadow-2xl bg-white dark:bg-gray-800 ring-1 ring-black/5 z-50 border border-gray-100 dark:border-gray-700 overflow-hidden animate-scale-in custom-scrollbar",children:[p.jsx("div",{className:"p-1 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50",children:p.jsxs("button",{onClick:()=>{o(!1),r("workspace-edit",null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700/50 transition-colors rounded-md",children:[p.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),t("sidebar.add_workspace")]})}),p.jsx("div",{className:"py-1 max-h-[300px] overflow-y-auto custom-scrollbar",children:e.map(m=>{const y=m.id===u;return p.jsxs("button",{onClick:()=>{m.id&&aI(m.id),o(!1)},className:Ce("w-full text-left px-4 py-2 text-sm flex items-center justify-between transition-colors",y?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[p.jsx("span",{className:"truncate block max-w-[140px] sm:max-w-[180px]",children:m.name}),y&&p.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]},m.id)})})]})]})},_F=({sidebarContent:t,title:e,children:n})=>{const{toggleSidebar:r,isSidebarOpen:s}=H0(),{t:o}=mt(),{openModal:l}=vn();return p.jsxs("div",{className:"w-full h-full flex overflow-hidden bg-premium-gradient text-gray-800 dark:text-white antialiased",children:[s&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-20 lg:hidden transition-opacity duration-300",onClick:r}),p.jsx(rL,{children:t}),p.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden",id:"main-content",children:[p.jsxs("header",{className:"h-12 border-b border-gray-200 dark:border-gray-800 flex items-center px-4 justify-between bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-10 sticky top-0",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[!s&&p.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:o("sidebar.menu_open"),"aria-label":o("sidebar.menu_open"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),p.jsx(vF,{}),p.jsx("h1",{className:"font-bold text-lg border-l border-gray-300 dark:border-gray-700 pl-3 ml-1 truncate",children:e})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("button",{onClick:()=>l("settings"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Settings","aria-label":"Settings",children:p.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]}),p.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:p.jsx("div",{className:Ce("w-full h-full bg-white dark:bg-gray-900 relative flex-1",Pt.LAYOUT.CONTAINER_WIDTH_CLASS),children:n})})]})]})};function wF(t,e){return t===e?!0:!t||!e||t.length!==e.length?!1:JSON.stringify(t)===JSON.stringify(e)}function bF(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;const n=[...t].sort((s,o)=>(s.id||"").localeCompare(o.id||"")),r=[...e].sort((s,o)=>(s.id||"").localeCompare(o.id||""));for(let s=0;s<n.length;s++){const o=n[s],l=r[s];if(o.id!==l.id||o.status!==l.status||o.title!==l.title||o.description!==l.description||o.projectId!==l.projectId||o.timeBlockId!==l.timeBlockId||o.duration!==l.duration||o.isImportant!==l.isImportant)return!1;const u=d=>d==null?d:d instanceof Date?d.getTime():typeof(d==null?void 0:d.toMillis)=="function"?d.toMillis():d;if(u(o.dueDate)!==u(l.dueDate))return!1}return!0}function xF(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].id!==e[n].id||t[n].name!==e[n].name||t[n].color!==e[n].color)return!1;return!0}class kF{constructor(){Rt(this,"cachedProjectsMap",new Map);Rt(this,"listeners",new Map);Rt(this,"unsubscribes",new Map)}isInitialized(e){return this.cachedProjectsMap.has(e)}notifyListeners(e){const n=this.cachedProjectsMap.get(e)||[],r=this.listeners.get(e);if(r){const s=[...n];r.forEach(o=>o(s))}}setCache(e,n){this.cachedProjectsMap.set(e,n),this.notifyListeners(e)}getProjects(e){return this.cachedProjectsMap.get(e)||[]}subscribe(e,n,r){this.listeners.has(n)||this.listeners.set(n,new Set);const s=this.listeners.get(n);s.add(r);const o=this.cachedProjectsMap.get(n);if(o&&queueMicrotask(()=>r([...o])),!this.unsubscribes.has(n)){const l=qe.projects(e,n),u=Ci(ft(Fe,l));console.log(`[ProjectCache] Subscribing to path: ${l} for user: ${e}`);const d=zo(u,m=>{const y=m.docs.map(x=>({id:x.id,...x.data()}));console.log(`[ProjectCache] Received ${y.length} projects from Firestore for workspace: ${n}`);const _=this.cachedProjectsMap.get(n);if(_&&xF(_,y)){console.log("[ProjectCache] Data identical, skipping update");return}console.log("[ProjectCache] Updating cache and notifying listeners"),this.cachedProjectsMap.set(n,y),this.notifyListeners(n)},m=>{console.error("[ProjectCache] Subscription error:",m),this.cachedProjectsMap.set(n,[]),this.notifyListeners(n)});this.unsubscribes.set(n,d)}return()=>{var l;s.delete(r),s.size===0&&((l=this.unsubscribes.get(n))==null||l(),this.unsubscribes.delete(n),this.listeners.delete(n))}}}const zn=new kF,EF=t=>zn.isInitialized(t),TF=t=>zn.getProjects(t),IF=(t,e)=>zn.setCache(t,e);function SF(t,e,n){return zn.subscribe(t,e,n)}async function CF(t,e,n,r){const s=zn.getProjects(e),l={id:"temp-"+Date.now(),name:n,color:r,ownerId:t,createdAt:new Date};zn.setCache(e,[...s,l]);const u=qe.projects(t,e);return console.log(`[ProjectCache] Adding project to path: ${u}`),tr(async()=>{const d=await Ir(ft(Fe,u),{name:n,color:r,ownerId:t,createdAt:Kr()});console.log(`[ProjectCache] Successfully added project with ID: ${d.id}`)},{onFinalFailure:()=>{console.error(`[ProjectCache] Failed to add project: ${n}`),zn.setCache(e,s),ut.error("")}})}async function AF(t,e,n,r){const s=zn.getProjects(e),o=s.map(l=>l.id===n?{...l,...r}:l);return zn.setCache(e,o),tr(async()=>{const l=qe.projects(t,e),u=yn(Fe,l,n);await $a(u,r)},{onFinalFailure:()=>{zn.setCache(e,s),ut.error("")}})}async function NF(t,e,n){const r=zn.getProjects(e),s=r.filter(o=>o.id!==n);return zn.setCache(e,s),tr(async()=>{const o=qe.projects(t,e);await Tc(yn(Fe,o,n))},{onFinalFailure:()=>{zn.setCache(e,r),ut.error("")}})}async function RF(t,e,n){const r=zn.getProjects(e);return zn.setCache(e,n),tr(async()=>{const s=Cp(Fe),o=qe.projects(t,e);n.forEach((l,u)=>{if(l.id&&!l.id.startsWith("temp-")){const d=yn(Fe,o,l.id);s.update(d,{order:u})}}),await s.commit()},{onFinalFailure:()=>{zn.setCache(e,r),ut.error("")}})}function sv(){var n;const t=(n=He.currentUser)==null?void 0:n.uid,e=Zr();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}const PF=t=>{const e=t||Zr();return e?TF(e):[]},jF=t=>{const e=t||Zr();return e?EF(e):!1},DF=(t,e)=>{const n=e||Zr();n&&IF(n,t)},OF=(t,e)=>{const n=typeof t=="function"?t:e,r=typeof t=="string"?t:Zr(),s=He.currentUser;return s&&r&&typeof n=="function"?SF(s.uid,r,n):(typeof n=="function"&&n([]),()=>{})},LF=async(t,e=null,n)=>{const r=He.currentUser;if(!r)throw new Error("Authentication required.");const s=e||Zr();if(!s)throw new Error("Workspace selection required.");return CF(r.uid,s,t,n)},MF=async(t,e)=>{const{userId:n,workspaceId:r}=sv();return AF(n,r,t,e)},lI=async t=>{const{userId:e,workspaceId:n}=sv();return NF(e,n,t)},VF=async t=>{const{userId:e,workspaceId:n}=sv();return RF(e,n,t)},jp=()=>{const{workspaceId:t,userId:e,loading:n}=Nr(),r=Vy(),s=O.useCallback(_=>!t||!e?()=>{}:OF(t,_),[t,e]),l=(t?jF(t):!1)&&t?PF(t):void 0,{data:u,isPending:d}=Ha(["projects",e||void 0,t||void 0],s,l);return{projects:u||[],loading:n||!!t&&d,setProjectsOverride:_=>{t&&(r.setQueryData(["projects",t],_),DF(_,t))}}},FF=[{id:"tb_morning",name:"06:00 - 09:00",start:"06:00",end:"09:00",color:"#EF4444",order:0},{id:"tb_afternoon",name:"13:00 - 17:00",start:"13:00",end:"17:00",color:"#3B82F6",order:1},{id:"tb_night",name:"20:00 - 22:00",start:"20:00",end:"22:00",color:"#8B5CF6",order:2}],_a=class _a{constructor(){Rt(this,"cacheMap",new Map);Rt(this,"listeners",new Map);Rt(this,"unsubscribes",new Map)}static getInstance(){return _a.instance||(_a.instance=new _a),_a.instance}getBlocks(e){return this.cacheMap.get(e)||[]}isInitialized(e){return this.cacheMap.has(e)}setCache(e,n){this.cacheMap.set(e,n),this.notify(e)}notify(e){const n=this.getBlocks(e),r=this.listeners.get(e);r&&r.forEach(s=>s([...n]))}subscribe(e,n,r){if(!e||!n)return r([]),()=>{};this.listeners.has(n)||this.listeners.set(n,new Set),this.listeners.get(n).add(r);const s=this.cacheMap.get(n);if(s&&queueMicrotask(()=>r([...s])),!this.unsubscribes.has(n)){const o=qe.timeblocks(e,n),l=Ci(ft(Fe,o),Sp("order","asc"));let u=!0;const d=zo(l,m=>{const y=m.docs.map(_=>({id:_.id,..._.data()}));if(u&&y.length===0&&!m.metadata.hasPendingWrites){u=!1,zF(e,n).catch(_=>console.error("[TimeBlocks] Failed to create defaults:",_));return}u=!1,this.cacheMap.set(n,y),this.notify(n)},m=>{console.error("[TimeBlocks] Subscription error:",m)});this.unsubscribes.set(n,d)}return()=>{const o=this.listeners.get(n);o&&o.delete(r)}}};Rt(_a,"instance");let Ay=_a;const Dp=Ay.getInstance();async function zF(t,e){const n=qe.timeblocks(t,e),r=Cp(Fe);FF.forEach(s=>{const o=yn(Fe,n,s.id);r.set(o,{name:s.name,start:s.start,end:s.end,color:s.color,order:s.order,updatedAt:Kr()})}),await r.commit()}function UF(t,e){var r;const n=(r=He.currentUser)==null?void 0:r.uid;return Dp.subscribe(n,t,e)}function $F(t){return Dp.getBlocks(t)}function BF(t){return Dp.isInitialized(t)}async function WF(t,e){var r;const n=(r=He.currentUser)==null?void 0:r.uid;if(!(!n||!t))try{const s=qe.timeblocks(n,t),o=e.id||crypto.randomUUID(),l=Dp.getBlocks(t),u=e.order!==void 0?e.order:Math.max(...l.map(m=>m.order||0),-1)+1,d={name:e.name,start:e.start,end:e.end,color:e.color,order:u,updatedAt:Kr()};return await f1(yn(Fe,s,o),d,{merge:!0}),!0}catch(s){console.error("[TimeBlocks] Save error:",s)}}async function cI(t,e){var r;const n=(r=He.currentUser)==null?void 0:r.uid;if(!(!n||!t))try{const s=qe.timeblocks(n,t);return await Tc(yn(Fe,s,e)),!0}catch(s){console.error("[TimeBlocks] Delete error:",s)}}const Cd=()=>{const{workspaceId:t,userId:e,loading:n}=Nr(),r=O.useCallback(d=>!t||!e?()=>{}:UF(t,d),[t,e]),s=t?BF(t):!1,{data:o,isPending:l}=Ha(["timeblocks",e||void 0,t||void 0],r,t&&s?$F(t):void 0);return{timeBlocks:o||[],loading:n||!!t&&l}};function iv(t){const e={keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(!t)return e;const n=/(?:-?[a-zA-Z]+:(?:"[^"]*"|[^\s]+))|(?:"[^"]*")|(?:-?[^\s]+)/g,r=t.match(n);if(!r)return e;const s=[];for(let o=0;o<r.length;o++){const l=r[o];if(l==="OR"){const u=s.length-1,d=s[u],m=r[o+1],y=d&&(typeof d=="string"?!d.includes(":"):!0),_=m&&!m.includes(":")&&m!=="OR";if(y&&_){const x=Array.isArray(d)?d:[d];x.push(m.toLowerCase().replace(/^"|"$/g,"")),s[u]=x,o++;continue}}s.push(l)}return s.forEach(o=>{if(Array.isArray(o)){e.keywords.push(o);return}const l=o;if(l.startsWith('"')&&l.endsWith('"')){const u=l.substring(1,l.length-1);u&&e.keywords.push(u.toLowerCase());return}if(l.startsWith("-")&&!l.includes(":")){const u=l.substring(1);u&&e.excludeKeywords.push(u.toLowerCase());return}if(l.includes(":")){let u=!1,d=l;d.startsWith("-")&&(u=!0,d=d.substring(1));const m=d.indexOf(":"),y=d.substring(0,m).toLowerCase();let _=d.substring(m+1);switch(_.startsWith('"')&&_.endsWith('"')&&(_=_.substring(1,_.length-1)),_.toLowerCase(),y){case"project":case"p":u?_.split(",").forEach(C=>e.excludeProjects.push(C)):_.split(",").forEach(C=>e.projects.push(C));break;case"label":case"l":u?_.split(",").forEach(C=>e.excludeLabels.push(C)):_.split(",").forEach(C=>e.labels.push(C));break;case"timeblock":case"tb":u?_.split(",").forEach(C=>e.excludeTimeBlocks.push(C)):_.split(",").forEach(C=>e.timeBlocks.push(C));break;case"duration":case"d":_.split(",").forEach(C=>{const I=parseInt(C,10);isNaN(I)||e.durations.push(I)});break;case"date":case"due":const x=["today","tomorrow","week","upcoming","overdue","next-week"];_.split(",").forEach(C=>{const I=C.toLowerCase();x.includes(I)&&e.dates.push(I)});break;case"status":case"is":const E=["completed","active","todo"];_.split(",").forEach(C=>{const I=C.toLowerCase();E.includes(I)&&(u?e.excludeStatus.push(I):e.status.push(I)),I==="important"&&(e.isImportant=!u),I==="unimportant"&&(e.isImportant=u)});break;default:u?e.excludeKeywords.push(d.toLowerCase()):e.keywords.push(d.toLowerCase());break}}else l!=="OR"&&e.keywords.push(l.toLowerCase())}),e}function qF(t){var n,r,s,o,l,u,d,m,y,_,x,E;const e=[];return(n=t.keywords)!=null&&n.length&&e.push(...t.keywords.map(C=>Array.isArray(C)?C.join(" OR "):C.includes(" ")?`"${C}"`:C)),(r=t.excludeKeywords)!=null&&r.length&&e.push(...t.excludeKeywords.map(C=>`-${C}`)),(s=t.projects)!=null&&s.length&&e.push(`project:${t.projects.join(",")}`),(o=t.excludeProjects)!=null&&o.length&&e.push(`-project:${t.excludeProjects.join(",")}`),(l=t.labels)!=null&&l.length&&e.push(`label:${t.labels.join(",")}`),(u=t.excludeLabels)!=null&&u.length&&e.push(`-label:${t.excludeLabels.join(",")}`),(d=t.timeBlocks)!=null&&d.length&&e.push(`timeblock:${t.timeBlocks.join(",")}`),(m=t.excludeTimeBlocks)!=null&&m.length&&e.push(`-timeblock:${t.excludeTimeBlocks.join(",")}`),(y=t.durations)!=null&&y.length&&e.push(`duration:${t.durations.join(",")}`),(_=t.dates)!=null&&_.length&&e.push(`date:${t.dates.join(",")}`),(x=t.status)!=null&&x.length&&e.push(`status:${t.status.join(",")}`),(E=t.excludeStatus)!=null&&E.length&&e.push(`-status:${t.excludeStatus.join(",")}`),t.isImportant===!0&&e.push("is:important"),t.isImportant===!1&&e.push("is:unimportant"),e.join(" ")}const Co=ev([ys(),ge(),TV(),kV()]),HF=$n({id:ge(),title:ge().min(1),description:ge().nullable().optional(),status:Xu(["todo","completed","archived"]).optional(),dueDate:Co,completedAt:Co,createdAt:Co,ownerId:ge().optional(),projectId:ge().nullable().optional(),labelIds:ms(ge()).optional(),timeBlockId:ge().nullable().optional(),duration:ys().optional(),isImportant:X1().optional(),recurrence:$n({type:Xu(["none","daily","weekly","weekdays","monthly"]).optional(),days:ms(ys()).optional()}).nullable().optional(),order:ys().optional()}).passthrough(),KF=$n({id:ge(),name:ge().min(1),color:ge().optional(),ownerId:ge().optional(),createdAt:Co,order:ys().optional()}).passthrough(),GF=$n({id:ge(),name:ge().min(1),color:ge().optional(),ownerId:ge().optional(),createdAt:Co}).passthrough(),QF=$n({id:ge(),mode:ge(),data:eI(ge(),ge()),createdAt:Co,updatedAt:Co,ownerId:ge().optional(),workspaceId:ge().optional()}).passthrough(),ZF=$n({id:ge(),name:ge().min(1),start:ge(),end:ge(),color:ge().optional(),order:ys().optional()}).passthrough(),YF=$n({id:ge(),name:ge().min(1),query:ge(),createdAt:Co}).passthrough(),JF=$n({version:ge().optional(),exportedAt:ge().optional(),userId:ge().optional(),workspaceId:ge().optional(),tasks:ms(HF).default([]),projects:ms(KF).default([]),labels:ms(GF).default([]),targets:ms(QF).default([]),timeBlocks:ms(ZF).default([]),customFilters:ms(YF).default([])}),XF=t=>t instanceof Date?kt.fromDate(t):t,ya=t=>{if(t!=null){if(typeof t=="number")return new Date(t);if(typeof t=="string")return new Date(t)}};async function ez(t,e){if(!t||!e)throw new Error("Missing parameters for backup.");try{const n=ft(Fe,qe.tasks(t,e)),r=ft(Fe,qe.projects(t,e)),s=ft(Fe,qe.labels(t,e)),o=ft(Fe,qe.targets(t,e)),l=ft(Fe,qe.timeblocks(t,e)),u=ft(Fe,qe.filters(t,e)),[d,m,y,_,x,E]=await Promise.all([Vs(n),Vs(r),Vs(s),Vs(o),Vs(l),Vs(u)]),C=I=>I.docs.map(R=>{const U=R.data(),F={id:R.id};for(const M in U){const q=U[M];F[M]=q instanceof kt?q.toMillis():q}return F});return{version:"1.4",exportedAt:new Date().toISOString(),userId:t,workspaceId:e,tasks:C(d),projects:C(m),labels:C(y),targets:C(_),timeBlocks:C(x),customFilters:C(E)}}catch(n){throw console.error("[Backup] createBackupData failed:",n),n}}async function tz(t,e,n){var l;if(!t||!e)throw new Error("Invalid import parameters: userId and workspaceId are required.");if(!n)throw new Error("Invalid import parameters: backupData is required.");const r=JF.safeParse(n);if(!r.success)throw console.error("[Backup] Validation failed:",r.error.format()),new Error(`: ${r.error.issues.map(u=>u.message).join(", ")}`);const s=r.data,o=[];try{const{tasks:u,projects:d,labels:m,targets:y,timeBlocks:_,customFilters:x}=s,E=new Map,C=new Map,I=await Vs(ft(Fe,qe.labels(t,e))),R=new Map;I.forEach(F=>R.set(F.data().name,F.id));for(const F of m)try{const M=(l=F.name)==null?void 0:l.trim();if(!M)continue;if(R.has(M))C.set(F.id,R.get(M));else{const q={...F,name:M};delete q.id;const Z=await Ir(ft(Fe,qe.labels(t,e)),q);C.set(F.id,Z.id),R.set(M,Z.id)}}catch(M){o.push(` "${F.name}" : ${M}`)}for(const F of d)try{const M={...F};delete M.id,M.createdAt=ya(F.createdAt);const q=await Ir(ft(Fe,qe.projects(t,e)),M);E.set(F.id,q.id)}catch(M){o.push(` "${F.name}" : ${M}`)}for(const F of _)try{const M={...F};delete M.id,await Ir(ft(Fe,qe.timeblocks(t,e)),M)}catch(M){o.push(` "${F.name}" : ${M}`)}for(const F of x)try{const M={...F};delete M.id,M.createdAt=ya(F.createdAt),await Ir(ft(Fe,qe.filters(t,e)),M)}catch(M){o.push(` "${F.name}" : ${M}`)}for(const F of y)try{const M={...F};delete M.id,M.createdAt=ya(F.createdAt),M.updatedAt=ya(F.updatedAt),M.ownerId=t,M.workspaceId=e,await Ir(ft(Fe,qe.targets(t,e)),M)}catch(M){o.push(` (mode: ${F.mode}) : ${M}`)}const U=u.map(async F=>{try{const M={...F};delete M.id,M.createdAt=ya(F.createdAt);const q=ya(F.dueDate);M.dueDate=q?XF(q):null,M.completedAt=ya(F.completedAt),F.projectId&&E.has(F.projectId)?M.projectId=E.get(F.projectId):M.projectId=null,Array.isArray(F.labelIds)&&(M.labelIds=F.labelIds.map(Z=>C.get(Z)).filter(Z=>!!Z)),M.ownerId=t,await Ir(ft(Fe,qe.tasks(t,e)),M)}catch(M){o.push(` "${F.title}" : ${M}`)}});return await Promise.all(U),{tasksCount:u.length,projectsCount:d.length,labelsCount:m.length,targetsCount:y.length,timeBlocksCount:_.length,filtersCount:x.length,errors:o}}catch(u){throw console.error("[Backup] importBackupData failed:",u),u}}const Du=new Map;function nz(t){return t?Du.get(t)||[]:[]}function rz(t){return Du.has(t)}function sz(t,e){var o;const n=(o=He.currentUser)==null?void 0:o.uid;if(!n||!t)return Du.set(t||"",[]),e([]),()=>{};const r=qe.filters(n,t),s=Ci(ft(Fe,r));return zo(s,l=>{const u=l.docs.map(d=>({id:d.id,...d.data()}));Du.set(t,u),e(u)},l=>{console.error("[Filters] Subscription error:",l),Du.set(t,[]),e([])})}async function iz(t){var d;const e=(d=He.currentUser)==null?void 0:d.uid;if(!e)throw ut.error(""),new Error("Authentication required");const{workspaceId:n,...r}=t;if(!n)throw ut.error("ID"),new Error("Workspace ID required");const s=sI.pick({name:!0,query:!0}).safeParse(r);if(!s.success){const m=s.error.issues.map(y=>y.message).join(", ");throw console.error("[Filters] Validation failed:",s.error.flatten()),ut.error(`: ${m}`),new Error(`Validation failed: ${m}`)}const o=qe.filters(e,n),{id:l,...u}=r;await Ir(ft(Fe,o),{...u,ownerId:e,workspaceId:n,createdAt:Kr()})}async function oz(t,e,n){var d;const r=(d=He.currentUser)==null?void 0:d.uid;if(!r||!t)throw ut.error(""),new Error("Authentication required");const s=sI.partial().safeParse(n);if(!s.success){const m=s.error.issues.map(y=>y.message).join(", ");throw console.error("[Filters] Validation failed:",s.error.flatten()),ut.error(`: ${m}`),new Error(`Validation failed: ${m}`)}const o=qe.filters(r,t),{id:l,...u}=n;await $a(yn(Fe,o,e),{...u,updatedAt:Kr()})}async function az(t,e){var s;const n=(s=He.currentUser)==null?void 0:s.uid;if(!n||!t)throw ut.error(""),new Error("Authentication required");const r=qe.filters(n,t);await Tc(yn(Fe,r,e))}class lz{constructor(){Rt(this,"cachedLabelsMap",new Map);Rt(this,"listeners",new Map);Rt(this,"unsubscribes",new Map)}isInitialized(e){return this.cachedLabelsMap.has(e)}notifyListeners(e){const n=this.cachedLabelsMap.get(e)||[],r=this.listeners.get(e);if(r){const s=[...n];r.forEach(o=>o(s))}}setCache(e,n){this.cachedLabelsMap.set(e,n),this.notifyListeners(e)}getLabels(e){return this.cachedLabelsMap.get(e)||[]}subscribe(e,n,r){this.listeners.has(n)||this.listeners.set(n,new Set);const s=this.listeners.get(n);s.add(r);const o=this.cachedLabelsMap.get(n);if(o&&queueMicrotask(()=>r([...o])),!this.unsubscribes.has(n)){const l=qe.labels(e,n),u=Ci(ft(Fe,l));console.log(`[LabelCache] Subscribing to path: ${l}`);const d=zo(u,m=>{const y=m.docs.map(_=>({id:_.id,..._.data()}));console.log(`[LabelCache] Received ${y.length} labels from Firestore for workspace: ${n}`),this.cachedLabelsMap.set(n,y),this.notifyListeners(n)},m=>{console.error("[LabelCache] Subscription error:",m),this.cachedLabelsMap.set(n,[]),this.notifyListeners(n)});this.unsubscribes.set(n,d)}return()=>{var l;s.delete(r),s.size===0&&((l=this.unsubscribes.get(n))==null||l(),this.unsubscribes.delete(n),this.listeners.delete(n))}}}const Hr=new lz,cz=t=>Hr.isInitialized(t),uz=t=>Hr.getLabels(t);function dz(t,e,n){return!t||!e?(n([]),()=>{}):Hr.subscribe(t,e,n)}async function hz(t,e,n,r){const s=Hr.getLabels(e),l={id:"temp-"+Date.now(),name:n,color:r,ownerId:t,createdAt:new Date};Hr.setCache(e,[...s,l]);const u=qe.labels(t,e);return console.log(`[LabelCache] Adding label to path: ${u}`),tr(async()=>{await Ir(ft(Fe,u),{name:n,color:r,ownerId:t,workspaceId:e,createdAt:Kr()})},{onFinalFailure:()=>{console.error(`[LabelCache] Failed to add label: ${n}`),Hr.setCache(e,s),ut.error("")}})}async function fz(t,e,n,r){const s=Hr.getLabels(e),o=s.map(l=>l.id===n?{...l,...r}:l);return Hr.setCache(e,o),tr(async()=>{const l=qe.labels(t,e),u=yn(Fe,l,n);await $a(u,r)},{onFinalFailure:()=>{Hr.setCache(e,s),ut.error("")}})}async function pz(t,e,n){const r=Hr.getLabels(e),s=r.filter(o=>o.id!==n);return Hr.setCache(e,s),tr(async()=>{const o=qe.labels(t,e);await Tc(yn(Fe,o,n))},{onFinalFailure:()=>{Hr.setCache(e,r),ut.error("")}})}const mz=uz,gz=t=>t?cz(t):!1;function ov(){var e;const t=(e=He.currentUser)==null?void 0:e.uid;if(!t)throw console.error("Authentication required for label operation."),new Error("Authentication required.");return t}function yz(t,e){var r;const n=(r=He.currentUser)==null?void 0:r.uid;return n&&t?dz(n,t,e):(e([]),()=>{})}async function vz(t,e,n){const r=ov();if(!t)throw new Error("Workspace ID required");return hz(r,t,e,n)}async function _z(t,e,n){const r=ov();if(!t)throw new Error("Workspace ID required");return fz(r,t,e,n)}async function wz(t,e){const n=ov();if(!t)throw new Error("Workspace ID required");return pz(n,t,e)}const bz="modulepreload",xz=function(t){return"/"+t},Gx={},uI=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(n.map(m=>{if(m=xz(m),m in Gx)return;Gx[m]=!0;const y=m.endsWith(".css"),_=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${_}`))return;const x=document.createElement("link");if(x.rel=y?"stylesheet":bz,y||(x.as="script"),x.crossOrigin="",x.href=m,d&&x.setAttribute("nonce",d),document.head.appendChild(x),y)return new Promise((E,C)=>{x.addEventListener("load",E),x.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};async function kz(t){const e=He.currentUser;if(!e)throw new Error("User not authenticated");const n=qe.tasks(e.uid,t),s=(await Vs(ft(Fe,n))).docs.map(u=>({id:u.id,...u.data()})),o=new Map;for(const u of s){if(!u.title)continue;const d=u.title.trim(),m=o.get(d)||[];m.push(u),o.set(d,m)}const l=[];for(const[u,d]of o.entries())if(d.length>1){d.sort((y,_)=>{const x=I=>{if(!I)return 0;if(typeof I=="object"&&"toDate"in I&&typeof I.toDate=="function")return I.toDate().getTime();const R=new Date(I);return isNaN(R.getTime())?0:R.getTime()},E=x(y.createdAt),C=x(_.createdAt);return E-C});const m=d.slice(1);for(const y of m)y.id&&l.push(y.id)}if(l.length>0){const{writeBatch:u}=await uI(async()=>{const{writeBatch:d}=await Promise.resolve().then(()=>J4);return{writeBatch:d}},void 0);for(let d=0;d<l.length;d+=500){const m=u(Fe),y=l.slice(d,d+500);for(const _ of y)m.delete(yn(Fe,n,_));await m.commit()}}return l.length}class Ez{constructor(){Rt(this,"cachedTargetsMap",new Map);Rt(this,"listeners",new Map);Rt(this,"unsubscribes",new Map)}isInitialized(e){return this.cachedTargetsMap.has(e)}notifyListeners(e){const n=this.cachedTargetsMap.get(e)||[],r=this.listeners.get(e);if(r){const s=[...n];r.forEach(o=>o(s))}}setCache(e,n){this.cachedTargetsMap.set(e,n),this.notifyListeners(e)}getTargets(e){return this.cachedTargetsMap.get(e)||[]}subscribe(e,n,r){this.listeners.has(n)||this.listeners.set(n,new Set);const s=this.listeners.get(n);s.add(r);const o=this.cachedTargetsMap.get(n);if(o&&queueMicrotask(()=>r([...o])),!this.unsubscribes.has(n)){const l=qe.targets(e,n),u=Ci(ft(Fe,l),Sp("createdAt","desc"));console.log(`[TargetCache] Subscribing to path: ${l}`);const d=zo(u,m=>{const y=m.docs.map(x=>({id:x.id,...x.data()})),_=this.cachedTargetsMap.get(n);_&&wF(_,y)||(console.log(`[TargetCache] Received ${y.length} targets from Firestore for workspace: ${n}`),this.cachedTargetsMap.set(n,y),this.notifyListeners(n))},m=>{console.error("[TargetCache] Subscription error:",m),this.cachedTargetsMap.set(n,[]),this.notifyListeners(n)});this.unsubscribes.set(n,d)}return()=>{var l;s.delete(r),s.size===0&&((l=this.unsubscribes.get(n))==null||l(),this.unsubscribes.delete(n),this.listeners.delete(n))}}}const Bl=new Ez,Tz=t=>Bl.isInitialized(t),Iz=t=>Bl.getTargets(t);function Sz(t,e,n,r){return!t||!e?(n([]),()=>{}):Bl.subscribe(t,e,s=>{n(s)})}async function Cz(t,e,n){const r=Bl.getTargets(e),o={id:"temp-"+Date.now(),mode:n.mode||"",data:n.data||{},ownerId:t,workspaceId:e,createdAt:new Date,updatedAt:new Date,...n};return Bl.setCache(e,[o,...r]),tr(async()=>{const l=qe.targets(t,e),u={...n,ownerId:t,workspaceId:e,createdAt:Kr(),updatedAt:Kr()};delete u.id,await Ir(ft(Fe,l),u)},{onFinalFailure:()=>{console.error("[TargetCache] Failed to add target"),Bl.setCache(e,r),ut.error("")}})}function Az(){var e;const t=(e=He.currentUser)==null?void 0:e.uid;if(!t)throw new Error("Authentication required.");return t}const Nz=t=>{const e=t||Zr();return e?Iz(e):[]},Rz=t=>{const e=t||Zr();return e?Tz(e):!1},Pz=(t,e,n)=>{let r,s;typeof t=="function"?(r=t,s=Zr()||void 0):(s=t,r=e);const o=He.currentUser;return o&&s&&typeof r=="function"?Sz(o.uid,s,r):(typeof r=="function"&&r([]),()=>{})},jz=async(t,e)=>{const n=Az();if(!t)throw new Error("Workspace ID required.");return Cz(n,t,e)},Pg=t=>t instanceof kt?t.toDate():t instanceof Date?t:void 0,dI=t=>t instanceof Date?kt.fromDate(t):t;function Dz(t,e){if(!e||typeof e!="object")return console.warn(`[deserializeTask] Invalid data for task ${t}:`,e),{id:t,title:"Invalid Task",status:"todo",ownerId:""};const n=e.recurrence||null,r={id:t,title:String(e.title||"Untitled"),description:e.description?String(e.description):null,status:e.status==="completed"||e.status==="todo"||e.status==="archived"?e.status:"todo",dueDate:Pg(e.dueDate)||void 0,createdAt:Pg(e.createdAt)||void 0,completedAt:Pg(e.completedAt)||void 0,ownerId:String(e.ownerId||""),projectId:e.projectId?String(e.projectId):null,labelIds:Array.isArray(e.labelIds)?e.labelIds.map(String):[],timeBlockId:e.timeBlockId?String(e.timeBlockId):null,duration:typeof e.duration=="number"?e.duration:null,isImportant:!!e.isImportant,recurrence:n};return tv.safeParse(r).success,r}const wa=class wa{constructor(){Rt(this,"cachedTasksMap",new Map);Rt(this,"listeners",new Map);Rt(this,"unsubscribes",new Map);Rt(this,"currentWorkspaceId",null)}static getInstance(){return wa.instance||(wa.instance=new wa),wa.instance}notifyListeners(e){const n=this.cachedTasksMap.get(e)||[],r=this.listeners.get(e);if(r){const s=[...n];r.forEach(o=>o(s))}}reset(e){var n;e?((n=this.unsubscribes.get(e))==null||n(),this.unsubscribes.delete(e),this.listeners.delete(e),this.cachedTasksMap.delete(e)):(this.unsubscribes.forEach(r=>r()),this.unsubscribes.clear(),this.listeners.clear(),this.cachedTasksMap.clear()),this.currentWorkspaceId=null}getTask(e,n){const r=this.cachedTasksMap.get(e);return r==null?void 0:r.find(s=>s.id===n)}getTasks(e){return this.cachedTasksMap.get(e)||[]}isInitialized(e){return this.cachedTasksMap.has(e)}setCache(e,n){this.cachedTasksMap.set(e,n),this.notifyListeners(e)}subscribe(e,n,r,s){if(!e||!n)return r([]),()=>{};this.currentWorkspaceId=n,this.listeners.has(n)||this.listeners.set(n,new Set);const o=this.listeners.get(n);o.add(r);const l=this.cachedTasksMap.get(n);if(l&&queueMicrotask(()=>r([...l])),!this.unsubscribes.has(n)){const u=qe.tasks(e,n),d=Ci(ft(Fe,u)),m=zo(d,y=>{const _=y.docs.map(E=>Dz(E.id,E.data())),x=this.cachedTasksMap.get(n);x&&bF(x,_)||(this.cachedTasksMap.set(n,_),this.notifyListeners(n))},y=>{console.error("[Tasks] Subscription error:",y),s&&s(y)});this.unsubscribes.set(n,m)}return()=>{if(o.delete(r),o.size===0){const u=this.unsubscribes.get(n);u&&(u(),this.unsubscribes.delete(n))}}}};Rt(wa,"instance");let Ny=wa;const Xn=Ny.getInstance();function hI(t,e){return Xn.getTask(t,e)}function Oz(t){return Xn.getTasks(t)}function Lz(t){return Xn.isInitialized(t)}function Mz(t,e,n,r){return Xn.subscribe(t,e,n,r)}function fI(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!==void 0))}async function Vz(t,e,n){const r=new Map;n.forEach((o,l)=>r.set(o,l));const s=Xn.getTasks(e);if(s&&s.length>0){const o=s.map(l=>{const u=r.get(l.id);return u!==void 0?{...l,order:u}:l});o.sort((l,u)=>{const d=l.order??Number.MAX_SAFE_INTEGER,m=u.order??Number.MAX_SAFE_INTEGER;return d-m}),Xn.setCache(e,o)}return tr(async()=>{const o=qe.tasks(t,e),l=[];for(let u=0;u<n.length;u+=500)l.push(n.slice(u,u+500));for(const u of l){const d=Cp(Fe);u.forEach(m=>{const y=r.get(m),_=yn(Fe,o,m);d.update(_,{order:y})}),await d.commit()}})}async function pI(t,e,n){return tr(async()=>{const r=qe.tasks(t,e),s=fI({...n});return s.dueDate&&(s.dueDate=dI(s.dueDate)),delete s.id,await Ir(ft(Fe,r),{...s,ownerId:t,status:"todo",createdAt:Kr()})})}async function Fz(t,e,n,r){const s=Xn.getTasks(e);if(s==null||s.find(o=>o.id===n),s){const o=s.map(l=>l.id===n?{...l,status:r,completedAt:r==="completed"?new Date:void 0}:l);Xn.setCache(e,o)}return tr(async()=>{const o=qe.tasks(t,e),l={status:r};r==="completed"?l.completedAt=Kr():l.completedAt=null,await $a(yn(Fe,o,n),l)},{onFinalFailure:()=>{s&&Xn.setCache(e,s),ut.error("")}})}async function zz(t,e,n,r){const s=Xn.getTasks(e);if(s){const o=s.map(l=>l.id===n?{...l,...r}:l);Xn.setCache(e,o)}return tr(async()=>{const o=qe.tasks(t,e),l=fI({...r});l.dueDate!==void 0&&(l.dueDate=dI(l.dueDate)),await $a(yn(Fe,o,n),l)},{onFinalFailure:()=>{s&&Xn.setCache(e,s),ut.error("")}})}async function Uz(t,e,n){const r=Xn.getTasks(e);if(r){const s=r.filter(o=>o.id!==n);Xn.setCache(e,s)}return tr(async()=>{const s=qe.tasks(t,e);await Tc(yn(Fe,s,n))},{onFinalFailure:()=>{r&&Xn.setCache(e,r),ut.error("")}})}const Lo=()=>Cc(Ar.getState().language).t;function Rc(){var n;const t=(n=He.currentUser)==null?void 0:n.uid,e=Zr();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}async function mI(t){try{const{userId:e,workspaceId:n}=Rc(),s=tv.partial().required({title:!0}).safeParse(t);s.success||console.warn("[addTask] Validation warning:",s.error.flatten()),await pI(e,n,t)}catch(e){throw console.error("Failed to add task:",e),ut.error(Lo()("msg.task.create_fail")),e}}async function $z(t,e){try{const{userId:n,workspaceId:r}=Rc();if(e==="completed"){const s=hI(r,t);if(s!=null&&s.recurrence&&s.recurrence.type!=="none"){const{getNextRecurrenceDate:o}=await uI(async()=>{const{getNextRecurrenceDate:u}=await Promise.resolve().then(()=>r6);return{getNextRecurrenceDate:u}},void 0),l=o(s.dueDate??null,s.recurrence);if(l){const u={title:s.title,description:s.description,projectId:s.projectId,labelIds:s.labelIds,timeBlockId:s.timeBlockId,duration:s.duration,isImportant:s.isImportant,recurrence:s.recurrence,dueDate:l,status:"todo"};pI(n,r,u).catch(d=>console.error("Failed to create recurring task:",d))}}}await Fz(n,r,t,e)}catch(n){throw console.error("Failed to update status:",n),ut.error(Lo()("msg.task.status_update_fail")),n}}async function av(t,e){try{const{userId:n,workspaceId:r}=Rc(),s=tv.partial().safeParse(e);s.success||console.warn("[updateTask] Validation warning:",s.error.flatten()),await zz(n,r,t,e)}catch(n){throw console.error("Failed to update task:",n),ut.error(Lo()("msg.task.update_fail")),n}}async function Bz(t){try{const{userId:e,workspaceId:n}=Rc();await Vz(e,n,t)}catch(e){throw console.error("Failed to reorder tasks:",e),ut.error(Lo()("msg.task.update_fail")),e}}async function Wz(t){try{const{userId:e,workspaceId:n}=Rc();await Uz(e,n,t),ut.success(Lo()("msg.task.delete_success"))}catch(e){throw console.error("Failed to delete task:",e),ut.error(Lo()("msg.task.delete_fail")),e}}async function qz(t,e){try{const{userId:n,workspaceId:r}=Rc(),s=hI(r,t),l=((s==null?void 0:s.status)||e||"todo")==="completed"?"todo":"completed";await $z(t,l),l==="completed"&&ut.success(Lo()("msg.task.complete_success"))}catch(n){throw console.error("Failed to toggle status:",n),ut.error(Lo()("msg.task.status_update_fail")),n}}function Hz(t,e,n){const r=He.currentUser;return!r||!t?(typeof e=="function"&&e([]),()=>{}):Mz(r.uid,t,e,n)}const Kz=t=>{const e=t||Zr();return e?Oz(e):[]},Gz=t=>{const e=t||Zr();return e?Lz(e):!1},Pc=({message:t,id:e,className:n})=>t?p.jsxs("div",{id:e,role:"alert",className:`p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center justify-center gap-2 ${n||""}`,children:[p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),p.jsx("span",{children:t})]}):null,Qx='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',$o=({isOpen:t,onClose:e,title:n,children:r,className:s,overlayClassName:o,zIndex:l=100,size:u="md"})=>{const{t:d}=mt(),m=O.useRef(null),y={sm:"max-w-full sm:max-w-sm",md:"max-w-full sm:max-w-lg",lg:"max-w-full sm:max-w-3xl",xl:"max-w-full sm:max-w-5xl",full:"max-w-full m-0 sm:m-4 h-[100dvh] sm:h-[calc(100vh-2rem)]"};return O.useEffect(()=>{const _=E=>{E.key==="Escape"&&e()},x=E=>{if(E.key!=="Tab"||!m.current)return;const C=m.current.querySelectorAll(Qx);if(C.length===0){E.preventDefault();return}const I=C[0],R=C[C.length-1];E.shiftKey?document.activeElement===I&&(E.preventDefault(),R.focus()):document.activeElement===R&&(E.preventDefault(),I.focus())};if(t){window.addEventListener("keydown",_),window.addEventListener("keydown",x),document.body.style.overflow="hidden";const E=setTimeout(()=>{var I;const C=(I=m.current)==null?void 0:I.querySelectorAll(Qx);C&&C.length>0?C[0].focus():m.current&&m.current.focus()},50);return()=>clearTimeout(E)}return()=>{window.removeEventListener("keydown",_),window.removeEventListener("keydown",x),document.body.style.overflow=""}},[t,e]),t?wo.createPortal(p.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-0 sm:p-4",style:{zIndex:l},role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,children:[p.jsx("div",{className:Ce("fixed inset-0 backdrop-blur-sm transition-opacity",o??"bg-black/50"),onClick:e,"aria-hidden":"true"}),p.jsxs("div",{ref:m,tabIndex:-1,className:Ce("relative bg-white dark:bg-gray-800 rounded-none sm:rounded-xl shadow-md w-full overflow-hidden flex flex-col outline-none max-h-[100dvh] sm:max-h-[90vh]",y[u],s),children:[n&&p.jsxs("div",{className:"px-3 py-2 sm:px-modal sm:py-3 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[p.jsx("h3",{id:"modal-title",className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white truncate",children:n}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 shrink-0","aria-label":d("close"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-modal custom-scrollbar",children:r})]})]}),document.body):null};function af({title:t,items:e,selectedItems:n,onToggle:r,labelFn:s=o=>o.name??o.id??String(o)}){return p.jsxs("div",{className:"flex flex-col min-h-[10rem] max-h-64 border border-gray-100 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-900",children:[p.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700 text-xs font-bold text-gray-500 uppercase tracking-wider shrink-0",children:t}),p.jsx("div",{className:"p-2 overflow-y-auto space-y-1 custom-scrollbar flex-1",children:e.map(o=>{const l=o.id||o.toString(),u=n.includes(l),d=`filter-${t.replace(/ /g,"-")}-${l}`,m=s(o);return p.jsxs("div",{className:"flex items-center px-2 py-1.5 rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",onClick:()=>r(l),children:[p.jsx("input",{id:d,type:"checkbox",checked:u,onChange:()=>{},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer","aria-label":`${t}: ${m}`}),p.jsx("label",{htmlFor:d,className:"ml-2 text-sm text-gray-700 dark:text-gray-300 truncate flex-1 cursor-pointer pointer-events-none",children:m})]},l)})})]})}const If="none",Qz=t=>{const e=iv(t);return{project:e.projects,timeblock:e.timeBlocks.map(n=>n==="null"||n==="none"?If:n),duration:e.durations.map(n=>n.toString()),date:e.dates}},Zz=[30,45,60,75,90],Yz=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=mt(),{closeModal:o}=vn(),l=!!t,u=e,d=!!(u!=null&&u.id),{projects:m}=jp(),{timeBlocks:y}=Cd(),{workspaceId:_}=Nr(),[x,E]=O.useState(""),[C,I]=O.useState({project:[],timeblock:[],duration:[],date:[]}),[R,U]=O.useState(!1),[F,M]=O.useState(null),q=Me.useRef(null);O.useEffect(()=>{l&&(E((u==null?void 0:u.name)||""),I(Qz((u==null?void 0:u.query)||"")),M(null),U(!1))},[l,u]),O.useEffect(()=>{var k;F&&((k=q.current)==null||k.focus())},[F]);const Z=(k,N)=>{I(P=>{const D=P[k],V=D.includes(N)?D.filter(j=>j!==N):[...D,N];return{...P,[k]:V}})},G=O.useCallback(async()=>{const k=x.trim();if(!k){M(s("validation.filter_name_required"));return}const N=qF({projects:C.project,timeBlocks:C.timeblock.map(P=>P===If?"null":P),durations:C.duration.map(Number),dates:C.date});if(!N){M(s("validation.filter_condition_required"));return}U(!0),M(null);try{if(!_){M(s("validation.workspace_required")),U(!1);return}const P={name:k,query:N,type:"custom"};d&&(u!=null&&u.id)?await oz(_,u.id,P):await iz({...P,workspaceId:_}),o()}catch(P){M(s("validation.save_fail")+": "+(P.message||"Error")),U(!1)}},[x,C,d,u,o,s]),A=k=>{k.key==="Enter"&&!k.nativeEvent.isComposing&&(!R&&x.trim()&&G(),k.preventDefault())};return l?p.jsx($o,{isOpen:l,onClose:o,title:s(d?"modal.edit":"modal.create"),className:"max-w-4xl",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"filter-name-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s("filter")}),p.jsx("input",{ref:q,id:"filter-name-input",name:"filterName",type:"text",value:x,onChange:k=>E(k.target.value),onKeyDown:A,placeholder:s("modal.filter_name_placeholder"),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg outline-none focus:ring-2 focus:ring-blue-500/20 dark:text-white",autoFocus:!0})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(af,{title:s("project"),items:m,selectedItems:C.project,onToggle:k=>Z("project",k)}),p.jsx(af,{title:s("timeblock"),items:[...y,{id:If,name:s("sidebar.unassigned")}],selectedItems:C.timeblock,onToggle:k=>Z("timeblock",k),labelFn:k=>k.id===If||!k.start?k.name:`${k.start}-${k.end}`}),p.jsx(af,{title:s("modal.duration"),items:Zz.map(k=>({id:k.toString(),name:`${k} min`})),selectedItems:C.duration,onToggle:k=>Z("duration",k)}),p.jsx(af,{title:s("modal.due_date"),items:[{id:"today",name:s("date_options.today")},{id:"tomorrow",name:s("date_options.tomorrow")},{id:"week",name:s("date_options.week")},{id:"next-week",name:s("date_options.next_week")}],selectedItems:C.date,onToggle:k=>Z("date",k)})]}),p.jsx(Pc,{message:F}),p.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[p.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition",children:s("modal.cancel")}),p.jsx("button",{onClick:G,disabled:R,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg transition-colors disabled:opacity-50",children:R?"...":s(d?"modal.save":"modal.create")})]})]})}):null},Jz=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=mt(),{closeModal:o}=vn(),l=!!t,u=e,d=!!(u!=null&&u.id),{workspaceId:m}=Nr(),[y,_]=O.useState(""),[x,E]=O.useState("#42A5F5"),[C,I]=O.useState(!1),[R,U]=O.useState(null),F=Me.useRef(null);O.useEffect(()=>{l&&(_((u==null?void 0:u.name)||""),E((u==null?void 0:u.color)||mi[Math.floor(Math.random()*mi.length)].value),U(null),I(!1))},[l,u]),O.useEffect(()=>{var G;R&&((G=F.current)==null||G.focus())},[R]);const M=O.useCallback(async()=>{const G=y.trim();if(!G){U(s("validation.label_name_required"));return}I(!0),U(null);try{if(!m){U(s("validation.label_workspace_required")),I(!1);return}d&&(u!=null&&u.id)?await _z(m,u.id,{name:G,color:x}):await vz(m,G,x),o()}catch(A){U(s("validation.save_fail")+": "+(A.message||"Error")),I(!1)}},[y,x,d,u,o,s]),q=O.useCallback(async()=>{if(u!=null&&u.id&&confirm(s("modal.label_delete_confirm").replace("{name}",u.name))){I(!0);try{m&&(u!=null&&u.id)&&await wz(m,u.id),o()}catch{U(s("validation.delete_fail")),I(!1)}}},[u,o,s]),Z=G=>{G.key==="Enter"&&!G.nativeEvent.isComposing&&(!C&&y.trim()&&M(),G.preventDefault())};return l?p.jsx($o,{isOpen:l,onClose:o,className:"max-w-sm",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full flex-shrink-0 border-2 border-gray-100 dark:border-gray-700 shadow-sm",style:{backgroundColor:x}}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{htmlFor:"label-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1",children:s("modal.label_name")}),p.jsx("input",{ref:F,id:"label-name-input",name:"labelName",type:"text",value:y,onChange:G=>_(G.target.value),onKeyDown:Z,placeholder:s(d?"modal.label_name_placeholder":"modal.label_create_placeholder"),className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600 p-0",autoFocus:!0,"aria-label":s("modal.label_name"),"aria-invalid":!!R,"aria-describedby":R?"label-error-msg":void 0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:s("modal.theme_color")}),p.jsx("div",{className:"flex flex-wrap gap-2",children:mi.map(G=>p.jsx("button",{type:"button",onClick:()=>E(G.value),className:Ce("w-6 h-6 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",x===G.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800":""),style:{backgroundColor:G.value},"aria-label":s(`colors.${G.key}`),"aria-pressed":x===G.value},G.value))})]}),p.jsx(Pc,{message:R}),p.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.jsx("div",{className:"flex items-center gap-2",children:d&&p.jsx("button",{onClick:q,disabled:C,className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50","aria-label":s("modal.delete_label"),title:s("modal.delete_label"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:o,disabled:C,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:s("modal.cancel")}),p.jsx("button",{onClick:M,disabled:C||!y.trim(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s(C?"saving":d?"modal.save":"modal.create")})]})]})]})}):null},Xz=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=mt(),{closeModal:o}=vn(),{currentWorkspaceId:l}=Nc(),u=!!t,d=e,m=!!(d!=null&&d.id),[y,_]=O.useState(""),[x,E]=O.useState("#7E57C2"),[C,I]=O.useState(!1),[R,U]=O.useState(null),F=Me.useRef(null);O.useEffect(()=>{u&&(_((d==null?void 0:d.name)||""),E((d==null?void 0:d.color)||mi[3].value),U(null),I(!1))},[u,d]),O.useEffect(()=>{var G;R&&((G=F.current)==null||G.focus())},[R]);const M=O.useCallback(async()=>{const G=y.trim();if(!G){U(s("validation.project_name_required"));return}if(!l&&!m){U(s("validation.workspace_required"));return}I(!0),U(null);try{m&&(d!=null&&d.id)?await MF(d.id,{name:G,color:x}):l&&await LF(G,l,x),o()}catch(A){U(s("validation.save_fail")+": "+(A.message||"Error")),I(!1)}},[y,x,m,d,l,o,s]),q=O.useCallback(async()=>{if(d!=null&&d.id&&confirm(s("modal.project_delete_confirm").replace("{name}",d.name))){I(!0);try{await lI(d.id),o()}catch{U(s("validation.delete_fail")),I(!1)}}},[d,o,s]),Z=G=>{G.key==="Enter"&&!G.nativeEvent.isComposing&&(!C&&y.trim()&&M(),G.preventDefault())};return u?p.jsx($o,{isOpen:u,onClose:o,className:"max-w-sm",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-500 shrink-0",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"project-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1",children:s("modal.project_name")}),p.jsx("input",{ref:F,id:"project-name-input",name:"projectName",type:"text",value:y,onChange:G=>_(G.target.value),onKeyDown:Z,placeholder:s("modal.project_name_placeholder"),className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600 p-0",autoFocus:!0,"aria-describedby":R?"project-error-msg":void 0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:s("modal.theme_color")}),p.jsx("div",{className:"flex flex-wrap gap-2",children:mi.map(G=>p.jsx("button",{type:"button",onClick:()=>E(G.value),className:Ce("w-6 h-6 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",x===G.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800":""),style:{backgroundColor:G.value},"aria-label":s(`colors.${G.key}`),"aria-pressed":x===G.value},G.value))})]}),p.jsx(Pc,{message:R,id:"project-error-msg"}),p.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.jsx("div",{className:"flex items-center gap-2",children:m&&p.jsx("button",{onClick:q,disabled:C,className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50","aria-label":s("modal.delete_project"),title:s("modal.delete_project"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:o,disabled:C,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:s("modal.cancel")}),p.jsx("button",{onClick:M,disabled:C,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C?"...":s(m?"modal.save":"modal.create")})]})]})]})}):null},yu=({title:t,children:e,defaultOpen:n=!1,icon:r,className:s})=>{const[o,l]=O.useState(n);return p.jsxs("section",{className:Ce("border border-gray-200 dark:border-gray-700/50 rounded-xl overflow-hidden",s),children:[p.jsxs("button",{onClick:()=>l(!o),className:"w-full flex items-center justify-between p-4 bg-gray-50/50 dark:bg-gray-800/30 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors text-left",type:"button","aria-expanded":o,"aria-controls":`accordion-panel-${t.replace(/\s+/g,"-").toLowerCase()}`,children:[p.jsxs("div",{className:"flex items-center gap-3",children:[r&&p.jsx("span",{className:"text-lg",children:r}),p.jsx("h4",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:t})]}),p.jsx("svg",{className:Ce("w-4 h-4 text-gray-400 transition-transform duration-200",o&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p.jsx("div",{id:`accordion-panel-${t.replace(/\s+/g,"-").toLowerCase()}`,className:Ce("transition-all duration-100 ease-in-out overflow-hidden bg-white dark:bg-transparent",o?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"),children:p.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700/30",children:e})})]})},e6=()=>{const{t}=mt(),{user:e}=rv(),[n,r]=O.useState(""),[s,o]=O.useState(""),[l,u]=O.useState(!1),[d,m]=O.useState(!1),[y,_]=O.useState(null);if(!e)return p.jsx("div",{className:"text-center text-gray-500",children:t("settings_modal.account.not_logged_in")});const x=e.isAnonymous,E=async I=>{I.preventDefault(),m(!0),_(null);try{const R=Vo.credential(n,s);await CE(e,R),ut.success(t("settings_modal.account.register_success"))}catch(R){console.error("Link account error:",R);let U=t("settings_modal.account.register_fail");R.code==="auth/email-already-in-use"&&(U=t("settings_modal.account.already_in_use")),R.code==="auth/weak-password"&&(U=t("settings_modal.account.weak_password")),_(U)}finally{m(!1)}},C=async()=>{confirm(t("settings_modal.account.logout_confirm"))&&(await r0(He),window.location.reload())};return p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-2xl p-6 flex flex-col sm:flex-row items-center gap-8 sm:gap-6 border border-gray-100 dark:border-gray-700",children:[p.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-3xl shrink-0",children:x?"":""}),p.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:x?t("settings_modal.account.guest_user"):e.displayName||t("settings_modal.account.registered_user")}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono mb-4 break-all",children:x?`ID: ${e.uid.slice(0,8)}...`:e.email}),!x&&p.jsx("button",{onClick:C,className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 text-sm font-bold px-4 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border border-transparent hover:border-red-100 dark:hover:border-red-900/30",children:t("settings_modal.account.logout")})]})]}),x?p.jsxs("div",{className:"border border-blue-200 dark:border-blue-800 bg-blue-50/50 dark:bg-blue-900/10 rounded-2xl p-8 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:p.jsx("svg",{className:"w-32 h-32 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),p.jsxs("div",{className:"relative",children:[p.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," ",t("settings_modal.account.persist_account")]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6 leading-relaxed whitespace-pre-wrap",children:t("settings_modal.account.persist_desc")}),p.jsxs("form",{onSubmit:E,className:"space-y-4 max-w-md",children:[y&&p.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-lg font-medium",children:y}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"account-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:t("settings_modal.account.email_label")}),p.jsx("input",{id:"account-email",type:"email",required:!0,value:n,onChange:I=>r(I.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"mail@example.com",autoComplete:"email"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"account-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:t("settings_modal.account.password_label")}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{id:"account-password",type:l?"text":"password",required:!0,minLength:6,value:s,onChange:I=>o(I.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all pr-12",placeholder:"",autoComplete:"new-password"}),p.jsx("button",{type:"button",onClick:()=>u(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none p-1","aria-label":t(l?"settings_modal.account.hide_password":"settings_modal.account.show_password"),children:l?p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):p.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),p.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-colors flex items-center justify-center gap-2",children:d?t("settings_modal.account.registering"):p.jsxs(p.Fragment,{children:[t("settings_modal.account.register"),p.jsx("span",{children:""})]})})]})]})]}):p.jsx("div",{className:"text-center py-8 text-gray-400",children:p.jsx("p",{children:t("settings_modal.account.registered_msg")})})]})},lf=({active:t,onClick:e,label:n,icon:r})=>p.jsxs("button",{onClick:e,className:Ce("flex items-center gap-2 px-4 py-2 text-sm rounded-lg transition-all whitespace-nowrap min-w-0","md:w-full md:justify-start md:text-left md:py-2","flex-col w-full justify-center py-3 text-[10px] gap-1 rounded-none md:rounded-lg md:text-sm md:flex-row md:gap-3",t?"bg-white dark:bg-gray-800 shadow-sm text-blue-600 dark:text-blue-400 font-bold border-t-2 md:border-t-0 md:border md:border-gray-100 dark:md:border-gray-700 border-blue-500 md:border-transparent":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-200 border-t-2 md:border-t-0 border-transparent"),children:[p.jsx("span",{className:"text-lg md:text-base",children:r}),p.jsx("span",{className:"truncate font-medium",children:n})]}),t6=({isOpen:t,zIndex:e,overlayClassName:n})=>{const{t:r}=mt(),{closeModal:s}=vn(),{themeMode:o,setThemeMode:l,density:u,setDensity:d,fontSize:m,setFontSize:y,fontEn:_,setFontEn:x,fontJp:E,setFontJp:C,language:I,setLanguage:R}=Ar(),{currentWorkspaceId:U}=Nc(),[F,M]=O.useState("appearance"),[q,Z]=O.useState(!1),G=!!t;return p.jsx($o,{isOpen:G,onClose:s,title:r("settings_modal.title"),className:"w-full max-w-4xl h-[90vh] md:h-[85vh] p-0 overflow-hidden",zIndex:e,overlayClassName:n,children:p.jsxs("div",{className:"flex flex-col md:flex-row h-full",children:[p.jsx("div",{className:"order-last md:order-first w-full md:w-64 bg-white dark:bg-gray-900 md:bg-gray-50/50 md:dark:bg-gray-900/50 border-t md:border-t-0 md:border-r border-gray-200 dark:border-gray-700 shrink-0 z-10",children:p.jsxs("div",{className:"flex flex-row md:flex-col justify-around md:justify-start md:p-4 md:space-y-2 pb-safe md:pb-4",children:[p.jsx(lf,{active:F==="general",onClick:()=>M("general"),label:r("settings_modal.tabs.general"),icon:""}),p.jsx(lf,{active:F==="appearance",onClick:()=>M("appearance"),label:r("settings_modal.tabs.appearance"),icon:""}),p.jsx(lf,{active:F==="account",onClick:()=>M("account"),label:r("settings_modal.tabs.account"),icon:""}),p.jsx(lf,{active:F==="advanced",onClick:()=>M("advanced"),label:r("settings_modal.tabs.advanced"),icon:""})]})}),p.jsxs("div",{className:"flex-1 p-4 md:p-8 overflow-y-auto custom-scrollbar bg-white dark:bg-gray-900 order-first md:order-last relative",children:[F==="appearance"&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx(yu,{title:r("settings_modal.appearance.theme"),icon:"",defaultOpen:!1,children:p.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","system"].map(A=>p.jsx("button",{onClick:()=>l(A),className:Ce("p-3 border rounded-xl text-sm font-medium transition-all",o===A?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-white dark:hover:bg-gray-800 bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400"),children:p.jsx("span",{className:"capitalize",children:r(`settings_modal.options.theme.${A}`)})},A))})}),p.jsx(yu,{title:r("settings_modal.appearance.density"),icon:"",defaultOpen:!1,children:p.jsx("div",{className:"space-y-3",children:["compact","normal","comfortable","spacious"].map(A=>p.jsxs("label",{htmlFor:`density-${A}`,className:Ce("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors",u===A?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-transparent hover:bg-white dark:hover:bg-gray-800"),children:[p.jsx("div",{className:Ce("w-4 h-4 rounded-full border flex items-center justify-center",u===A?"border-blue-500 bg-blue-500":"border-gray-300"),children:u===A&&p.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),p.jsx("input",{id:`density-${A}`,type:"radio",name:"density",checked:u===A,onChange:()=>d(A),className:"hidden"}),p.jsx("span",{className:"capitalize text-sm font-medium text-gray-700 dark:text-gray-300",children:r(`settings_modal.options.density.${A}`)})]},A))})}),p.jsx(yu,{title:r("settings_modal.appearance.font_size"),icon:"Aa",defaultOpen:!1,children:p.jsx("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:["sm","base","md","lg","xl"].map(A=>p.jsx("button",{onClick:()=>y(A),className:Ce("flex-1 py-1.5 px-3 rounded text-sm font-medium transition-all",m===A?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:A},A))})}),p.jsx(yu,{title:r("settings_modal.appearance.fonts"),icon:"Tt",defaultOpen:!1,children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"settings-font-en",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:r("settings_modal.appearance.font_en")}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{id:"settings-font-en",name:"fontEn",value:_,onChange:A=>x(A.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none relative z-10 bg-transparent",children:Pt.FONTS.EU.map(A=>p.jsx("option",{value:A.value,children:A.label},A.value))}),p.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 z-0",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"settings-font-jp",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:r("settings_modal.appearance.font_jp")}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{id:"settings-font-jp",name:"fontJp",value:E,onChange:A=>C(A.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none relative z-10 bg-transparent",children:Pt.FONTS.JP.map(A=>p.jsx("option",{value:A.value,children:A.label},A.value))}),p.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 z-0",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})})]}),F==="general"&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-800",children:[p.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," ",r("settings_modal.backup.title")]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:r("settings_modal.backup.description")}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[p.jsxs("button",{onClick:async()=>{if(!(!He.currentUser||!U))try{const A=await ez(He.currentUser.uid,U),k=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),N=URL.createObjectURL(k),P=document.createElement("a");P.href=N,P.download=`taskmg-backup-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(N)}catch(A){console.error(A),alert(r("settings_modal.backup.create_fail"))}},className:"btn-premium w-full sm:w-auto text-sm flex items-center justify-center gap-2 bg-white text-blue-600 border border-blue-200 hover:bg-blue-50 shadow-sm",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),p.jsx("span",{className:"inline",children:r("settings_modal.backup.create")})]}),p.jsxs("div",{className:"relative w-full sm:w-auto",children:[p.jsx("input",{type:"file",accept:".json",className:"hidden",id:"backup-import-input",onChange:async A=>{var P;const k=(P=A.target.files)==null?void 0:P[0];if(!k||!He.currentUser||!U)return;if(!window.confirm(r("settings_modal.backup.import_confirm"))){A.target.value="";return}const N=new FileReader;N.onload=async D=>{var V;try{const j=JSON.parse((V=D.target)==null?void 0:V.result),Ae=await tz(He.currentUser.uid,U,j);alert(r("settings_modal.backup.import_success").replace("{tasks}",String(Ae.tasksCount)).replace("{projects}",String(Ae.projectsCount))),window.location.reload()}catch(j){console.error(j),alert(r("settings_modal.backup.import_fail"))}},N.readAsText(k),A.target.value=""}}),p.jsxs("label",{htmlFor:"backup-import-input",className:"w-full sm:w-auto px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-bold rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer shadow-sm text-sm flex items-center justify-center gap-2 transition-colors",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),r("settings_modal.backup.import")]})]})]})]}),p.jsx(yu,{title:r("settings_modal.language.title"),icon:"",defaultOpen:!1,children:p.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{code:"ja",label:""},{code:"en",label:"English"}].map(A=>p.jsxs("button",{onClick:()=>R(A.code),className:Ce("p-3 border rounded-xl text-sm font-medium transition-all",I===A.code?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-white dark:hover:bg-gray-800 bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400"),children:[p.jsx("span",{className:"text-xl mr-2",children:A.code==="ja"?"":""}),A.label]},A.code))})})]}),F==="account"&&p.jsx(e6,{}),F==="advanced"&&p.jsx("div",{className:"flex flex-col gap-4",children:p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-xl border border-red-100 dark:border-red-900/30",children:[p.jsxs("h4",{className:"font-bold text-red-700 dark:text-red-400 mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," ",r("settings_modal.maintenance.title")]}),p.jsx("p",{className:"text-sm text-red-600/80 dark:text-red-400/80 mb-4",children:r("settings_modal.maintenance.description")}),p.jsxs("label",{htmlFor:"backup-confirm-checkbox",className:"flex items-center gap-2 mb-4 cursor-pointer",children:[p.jsx("input",{id:"backup-confirm-checkbox",name:"backupConfirmed",type:"checkbox",className:"w-4 h-4 text-red-600 rounded border-red-300 focus:ring-red-500",checked:q,onChange:A=>Z(A.target.checked)}),p.jsx("span",{className:"text-sm font-bold text-red-700 dark:text-red-400",children:r("settings_modal.maintenance.confirm_backup")||""})]}),p.jsx("button",{onClick:async()=>{if(U&&confirm(r("settings_modal.maintenance.confirm_final")))try{const A=await kz(U);alert(r("settings_modal.maintenance.cleanup_success").replace("{count}",String(A))),A>0&&window.location.reload()}catch(A){console.error(A),alert(r("settings_modal.maintenance.cleanup_fail").replace("{error}",A.message))}},disabled:!q,className:"px-6 py-2.5 bg-red-600 hover:bg-red-700 disabled:bg-red-300 disabled:cursor-not-allowed text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:r("settings_modal.maintenance.cleanup_duplicate")})]})})]})]})})};function an(t){if(!t)return null;if(t instanceof Date)return t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();const e=new Date(t);return isNaN(e.getTime())?null:e}const Ry=(t,e)=>{const n=an(t),r=an(e);return!n||!r?!1:n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()&&n.getDate()===r.getDate()},gI=t=>{const e=an(t);if(!e)return!1;const n=new Date;return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()},yI=(t,e=7)=>{const n=an(t);if(!n)return!1;const r=new Date;r.setHours(0,0,0,0);const s=new Date(r);s.setDate(r.getDate()+1);const o=new Date(r);return o.setDate(r.getDate()+e+1),n>=s&&n<o};function Ad(t=new Date){const e=an(t)||new Date,n=new Date(e);return n.setHours(0,0,0,0),n}function vI(t=new Date,e=1){const n=an(t)||new Date,r=n.getDay(),s=n.getDate()-r+(r<e?e-7:e),o=new Date(n);return o.setDate(s),Ad(o)}function _I(t){const e=an(t);if(!e)return"";const n=new Date,r=Ad(n),s=Math.round((e.getTime()-r.getTime())/(1e3*60*60*24));if(s===0)return"";if(s===1)return"";if(s===-1)return"";const o=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),u=String(e.getDate()).padStart(2,"0");return o!==n.getFullYear()?`${o}/${l}/${u}`:`${l}/${u}`}const wI=t=>{const e=an(t);if(!e)return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${s}`},bI=t=>{if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e};function xI(t){const e=an(t);if(!e)return"text-gray-500";const n=Ad(new Date),r=Math.round((e.getTime()-n.getTime())/(1e3*60*60*24));return r<0?"text-red-500 font-bold":r===0?"text-green-600 dark:text-green-400 font-medium":r===1?"text-orange-500 dark:text-orange-400 font-medium":"text-gray-500 dark:text-gray-400"}function n6(t,e){var r;if(!t||!(e!=null&&e.type))return null;const n=new Date(an(t));switch(e.type){case"daily":return n.setDate(n.getDate()+1),n;case"weekly":{if(!((r=e.days)!=null&&r.length))return null;const s=n.getDay();for(let o=1;o<=7;o++){const l=(s+o)%7;if(e.days.includes(l))return n.setDate(n.getDate()+o),n}return null}case"weekdays":do n.setDate(n.getDate()+1);while(n.getDay()===0||n.getDay()===6);return n;case"monthly":return n.setMonth(n.getMonth()+1),n;default:return null}}function kI(t){const e=Ad(new Date);if(!(t!=null&&t.type)||t.type==="daily"||t.type==="monthly")return e;if(t.type==="weekly"&&t.days&&t.days.length>0){const n=e.getDay();for(let r=0;r<=6;r++)if(t.days.includes((n+r)%7))return e.setDate(e.getDate()+r),e}if(t.type==="weekdays"){for(;e.getDay()===0||e.getDay()===6;)e.setDate(e.getDate()+1);return e}return e}function EI(t,e){if(!t||!e)return 0;const[n,r]=t.split(":").map(Number),[s,o]=e.split(":").map(Number);if(isNaN(n)||isNaN(r)||isNaN(s)||isNaN(o))return 0;const l=n*60+r;let u=s*60+o;return u<l&&(u+=1440),u-l}const r6=Object.freeze(Object.defineProperty({__proto__:null,calculateDurationMinutes:EI,formatDateCompact:_I,formatDateForInput:wI,getInitialDueDateFromRecurrence:kI,getNextRecurrenceDate:n6,getStartOfDay:Ad,getStartOfWeek:vI,getTaskDateColor:xI,isSameDay:Ry,isToday:gI,isUpcoming:yI,parseDateInput:bI,toDate:an},Symbol.toStringTag,{value:"Module"})),s6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function i6(t){return t.replace(/[&<>"']/g,e=>s6[e]||e)}function o6(t){if(!t)return"";const e=t.split(`
`);let n=[],r=null;return e.forEach(s=>{const o=s.trimStart(),l=o.startsWith("* ")||o.startsWith("- "),u=/^\d+\.\s/.test(o),d=l||u;if(d){const m=u?"ol":"ul";if(r!==m){r&&n.push(`</${r}>`);const y=u?"list-decimal":"list-disc";n.push(`<${m} class="${y} ml-5 space-y-1">`),r=m}}else r&&(n.push(`</${r}>`),r=null);if(d){let m="";l?m=o.substring(2):m=o.replace(/^\d+\.\s/,"");const y=jg(m);n.push(`<li>${y}</li>`)}else if(s.trim()){const m=s.match(/^(#{1,6})\s+(.+)$/);if(m){const y=m[1].length,_=jg(m[2]),x={1:"text-2xl font-bold mb-3",2:"text-xl font-bold mb-2",3:"text-lg font-semibold mb-2",4:"text-base font-semibold mb-1",5:"text-sm font-semibold mb-1",6:"text-xs font-semibold mb-1"};n.push(`<h${y} class="${x[y]}">${_}</h${y}>`)}else n.push(`<p class="mb-2">${jg(s)}</p>`)}else r&&(n.push(`</${r}>`),r=null)}),r&&n.push(`</${r}>`),n.join(`
`)}function jg(t){return i6(t).replace(/\[(.*?)\]\((.*?)\)/g,(n,r,s)=>`<a href="${s.replace(/"/g,"&quot;")}" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300 underline font-medium">${r}</a>`)}const Zx={TODO:"todo"},a6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=mt(),{closeModal:o}=vn(),l=!!t,u=e,d=!(u!=null&&u.id)||u.id.startsWith("temp-"),{projects:m}=jp(),{timeBlocks:y}=Cd(),{customDurations:_}=Ar(),[x,E]=O.useState(""),[C,I]=O.useState(""),[R,U]=O.useState(null),[F,M]=O.useState(Zx.TODO),[q,Z]=O.useState(!1),[G,A]=O.useState(null),[k,N]=O.useState({type:"none",days:[]}),[P,D]=O.useState(null),[V,j]=O.useState(null),[Ae,rt]=O.useState(!1),[Ze,Re]=O.useState(!1),X=O.useMemo(()=>[{value:"none",label:s("recurrence.none")},{value:"daily",label:s("recurrence.daily")},{value:"weekdays",label:s("recurrence.weekdays")},{value:"weekly",label:s("recurrence.weekly")},{value:"monthly",label:s("recurrence.monthly")}],[s]),pe=O.useMemo(()=>[s("days.sun"),s("days.mon"),s("days.tue"),s("days.wed"),s("days.thu"),s("days.fri"),s("days.sat")],[s]),[de,W]=O.useState(null);O.useEffect(()=>{var ne;if(u){E(u.title||""),I(u.description||""),U(u.projectId||null),M(u.status||Zx.TODO),Z(!!u.isImportant),D(u.timeBlockId||null),j(u.duration||null);const he=an(u.dueDate);A(he);const st=u.recurrence||{type:"none",days:[]};N(st),st!=null&&st.type&&st.type!=="none"&&!he&&A(kI(st));const gt=!!(he||(st==null?void 0:st.type)!=="none"||u.timeBlockId||u.duration);Re(gt||d),rt(!!((ne=u.description)!=null&&ne.trim()))}},[u,l]);const ee=O.useCallback(async()=>{if(W(null),!x.trim()){W(s("validation.required"));return}if((k==null?void 0:k.type)==="weekly"&&(!k.days||k.days.length===0)){W(s("validation.select_days"));return}const ne={title:x.trim(),description:C.trim()??null,projectId:R==="none"?null:R,status:F,isImportant:q,dueDate:G?kt.fromDate(G):null,recurrence:(k==null?void 0:k.type)==="none"?null:k,timeBlockId:P??null,duration:V??void 0};try{d?await mI(ne):await av(u.id,ne),o()}catch(he){console.error("Failed to save task",he),W(s("validation.save_fail"))}},[x,C,R,F,q,G,k,P,V,d,u,o,s]),ce=O.useCallback(async ne=>{if(ne==null||ne.preventDefault(),ne==null||ne.stopPropagation(),W(null),!(!(u!=null&&u.id)||d)&&confirm(s("modal.delete_confirm")))try{await Wz(u.id),o()}catch(he){console.error("Failed to delete task",he),W(s("validation.delete_fail"))}},[u==null?void 0:u.id,d,o,s]),xe=O.useCallback(ne=>{let he=[];ne==="weekly"?he=(k==null?void 0:k.days)||[]:ne==="weekdays"&&(he=[1,2,3,4,5]),N({type:ne,days:he})},[k==null?void 0:k.days]),Oe=O.useCallback(ne=>{const he=(k==null?void 0:k.days)||[],st=he.includes(ne)?he.filter(gt=>gt!==ne):[...he,ne].sort((gt,_n)=>gt-_n);N({type:"weekly",days:st})},[k==null?void 0:k.days]),Pe=O.useMemo(()=>o6(C),[C]),Se=ne=>{ne.key==="Enter"&&!ne.nativeEvent.isComposing&&(ne.preventDefault(),ee())},$e=ne=>{(ne.metaKey||ne.ctrlKey)&&ne.key==="Enter"&&(ne.preventDefault(),ee())};return l?p.jsx($o,{isOpen:l,onClose:o,zIndex:n,className:"max-w-4xl h-[95vh] sm:h-[85vh] w-full mx-2 sm:mx-auto mt-4 sm:mt-0 pb-safe",overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col h-full",onKeyDown:$e,children:[p.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-700 flex items-center gap-3 shrink-0",children:[p.jsx("input",{id:"task-title",name:"title",type:"text",value:x,onChange:ne=>E(ne.target.value),onKeyDown:Se,placeholder:s("task_detail.title_placeholder"),className:"flex-1 text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder:text-gray-400",autoFocus:!0,"aria-label":s("task_detail.title_placeholder")}),p.jsx("button",{onClick:()=>Z(!q),className:Ce("p-2 rounded-full transition-colors",q?"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),title:q?"":"",children:p.jsx("svg",{className:"w-6 h-6",fill:q?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),p.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[p.jsx(Pc,{message:de,className:"mb-3"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 h-full",children:[p.jsxs("div",{className:"md:col-span-8 flex flex-col h-full min-h-[300px] bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("label",{className:"text-xs font-semibold text-gray-500 flex items-center gap-2 uppercase",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})," (Markdown)"]}),p.jsx("button",{type:"button",onClick:()=>rt(!Ae),className:"text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 px-3 py-1 rounded transition-colors text-xs font-medium","aria-label":Ae?"":"",children:Ae?"":""})]}),p.jsx("div",{className:"flex-1 relative",children:Ae?p.jsx("div",{className:"w-full h-full p-4 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm overflow-y-auto prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:Pe||'<span class="text-gray-400"></span>'}}):p.jsx("textarea",{id:"task-description",name:"description",value:C,onChange:ne=>I(ne.target.value),placeholder:"...",className:"w-full h-full p-3 bg-gray-50 dark:bg-gray-900/50 border-0 rounded-lg outline-none text-sm transition-all resize-none leading-relaxed focus:ring-1 focus:ring-blue-500/50 text-gray-800 dark:text-gray-200 font-mono",autoFocus:!C,"aria-label":""})})]}),p.jsxs("div",{className:"md:col-span-4 space-y-4",children:[p.jsxs("details",{open:Ze,onToggle:ne=>Re(ne.currentTarget.open),className:"group border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800",children:[p.jsxs("summary",{className:"flex items-center justify-between px-4 py-3 cursor-pointer list-none outline-none bg-gray-50 dark:bg-gray-700/30 rounded-t-lg group-[:not([open])]:rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700/50 focus:ring-2 focus:ring-inset focus:ring-blue-500",role:"button","aria-expanded":Ze,children:[p.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s("task_detail.schedule_label")]}),p.jsx("span",{className:"transform group-open:rotate-180 transition-transform text-gray-400",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),p.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-due-date",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.due_date_label")}),p.jsx("div",{className:"relative cursor-pointer",onClick:()=>{var he;const ne=document.getElementById("task-due-date");(he=ne==null?void 0:ne.showPicker)==null||he.call(ne)},children:p.jsx("input",{type:"date",id:"task-due-date",value:wI(G),onChange:ne=>A(bI(ne.target.value)),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm cursor-pointer"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-recurrence",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.recurrence_label")}),p.jsx("select",{id:"task-recurrence",value:(k==null?void 0:k.type)||"none",onChange:ne=>xe(ne.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:X.map(ne=>p.jsx("option",{value:ne.value,children:ne.label},ne.value))})]}),((k==null?void 0:k.type)==="weekly"||(k==null?void 0:k.type)==="weekdays")&&p.jsxs("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700 animate-in fade-in slide-in-from-top-1 duration-200",children:[p.jsx("span",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:s("task_detail.recurrence_days")}),p.jsx("div",{className:"flex flex-wrap gap-2",children:pe.map((ne,he)=>{var st;return p.jsxs("label",{htmlFor:`recurrence-day-${he}`,className:"flex items-center gap-1 cursor-pointer select-none",children:[p.jsx("input",{id:`recurrence-day-${he}`,name:`recurrenceDay${he}`,type:"checkbox",checked:((st=k.days)==null?void 0:st.includes(he))||!1,onChange:()=>Oe(he),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),p.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:ne})]},he)})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-timeblock",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.time_block_label")}),p.jsxs("select",{id:"task-timeblock",value:P||"",onChange:ne=>D(ne.target.value||null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:s("task_detail.time_block_unspecified")}),y.map(ne=>p.jsxs("option",{value:ne.id,children:[ne.start," - ",ne.end]},ne.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-duration",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.duration_label")}),p.jsxs("select",{id:"task-duration",value:V||"",onChange:ne=>j(ne.target.value?parseInt(ne.target.value,10):null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:s("task_detail.duration_none")}),_.map(ne=>p.jsxs("option",{value:ne,children:[ne," min"]},ne))]})]})]})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[p.jsx("label",{htmlFor:"task-project",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.project_label")}),p.jsxs("select",{id:"task-project",value:R||"none",onChange:ne=>U(ne.target.value==="none"?null:ne.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"none",children:s("task_detail.project_none")}),m.map(ne=>p.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]})]})]})]}),p.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center shrink-0",children:[!d&&p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("button",{type:"button",onClick:ce,className:"px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition flex items-center gap-1.5",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s("task_detail.delete_button")]})}),p.jsxs("div",{className:`flex gap-2 ${d?"ml-auto":""}`,children:[p.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition",children:s("modal.cancel")}),p.jsx("button",{type:"button",onClick:ee,className:"px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium transition-colors",children:s(d?"modal.create":"modal.save")})]})]})]})}):null};function jc(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function l6(t,e){return t.reduce((n,r,s)=>{const o=e.get(r);return o&&(n[s]=o),n},Array(t.length))}function cf(t){return t!==null&&t>=0}function c6(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function u6(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const TI=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const o=jc(e,r,n),l=e[s],u=o[s];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},uf={scaleX:1,scaleY:1},Op=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:l}=t;const u=(e=o[n])!=null?e:r;if(!u)return null;if(s===n){const m=o[l];return m?{x:0,y:n<l?m.top+m.height-(u.top+u.height):m.top-u.top,...uf}:null}const d=d6(o,s,n);return s>n&&s<=l?{x:0,y:-u.height-d,...uf}:s<n&&s>=l?{x:0,y:u.height+d,...uf}:{x:0,y:0,...uf}};function d6(t,e,n){const r=t[e],s=t[e-1],o=t[e+1];return r?n<e?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const II="Sortable",SI=Me.createContext({activeIndex:-1,containerId:II,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:TI,disabled:{draggable:!1,droppable:!1}});function Lp(t){let{children:e,id:n,items:r,strategy:s=TI,disabled:o=!1}=t;const{active:l,dragOverlay:u,droppableRects:d,over:m,measureDroppableContainers:y}=qk(),_=cd(II,n),x=u.rect!==null,E=O.useMemo(()=>r.map(G=>typeof G=="object"&&"id"in G?G.id:G),[r]),C=l!=null,I=l?E.indexOf(l.id):-1,R=m?E.indexOf(m.id):-1,U=O.useRef(E),F=!c6(E,U.current),M=R!==-1&&I===-1||F,q=u6(o);vs(()=>{F&&C&&y(E)},[F,E,C,y]),O.useEffect(()=>{U.current=E},[E]);const Z=O.useMemo(()=>({activeIndex:I,containerId:_,disabled:q,disableTransforms:M,items:E,overIndex:R,useDragOverlay:x,sortedRects:l6(E,d),strategy:s}),[I,_,q.draggable,q.droppable,M,E,R,d,x,s]);return Me.createElement(SI.Provider,{value:Z},e)}const h6=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return jc(n,r,s).indexOf(e)},f6=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:o,newIndex:l,previousItems:u,previousContainerId:d,transition:m}=t;return!m||!r||u!==o&&s===l?!1:n?!0:l!==s&&e===d},p6={duration:200,easing:"ease"},CI="transform",m6=Ws.Transition.toString({property:CI,duration:0,easing:"linear"}),g6={roleDescription:"sortable"};function y6(t){let{disabled:e,index:n,node:r,rect:s}=t;const[o,l]=O.useState(null),u=O.useRef(n);return vs(()=>{if(!e&&n!==u.current&&r.current){const d=s.current;if(d){const m=gc(r.current,{ignoreTransform:!0}),y={x:d.left-m.left,y:d.top-m.top,scaleX:d.width/m.width,scaleY:d.height/m.height};(y.x||y.y)&&l(y)}}n!==u.current&&(u.current=n)},[e,n,r,s]),O.useEffect(()=>{o&&l(null)},[o]),o}function lv(t){let{animateLayoutChanges:e=f6,attributes:n,disabled:r,data:s,getNewIndex:o=h6,id:l,strategy:u,resizeObserverConfig:d,transition:m=p6}=t;const{items:y,containerId:_,activeIndex:x,disabled:E,disableTransforms:C,sortedRects:I,overIndex:R,useDragOverlay:U,strategy:F}=O.useContext(SI),M=v6(r,E),q=y.indexOf(l),Z=O.useMemo(()=>({sortable:{containerId:_,index:q,items:y},...s}),[_,s,q,y]),G=O.useMemo(()=>y.slice(y.indexOf(l)),[y,l]),{rect:A,node:k,isOver:N,setNodeRef:P}=vc({id:l,data:Z,disabled:M.droppable,resizeObserverConfig:{updateMeasurementsFor:G,...d}}),{active:D,activatorEvent:V,activeNodeRect:j,attributes:Ae,setNodeRef:rt,listeners:Ze,isDragging:Re,over:X,setActivatorNodeRef:pe,transform:de}=qA({id:l,data:Z,attributes:{...g6,...n},disabled:M.draggable}),W=DC(P,rt),ee=!!D,ce=ee&&!C&&cf(x)&&cf(R),xe=!U&&Re,Oe=xe&&ce?de:null,Se=ce?Oe??(u??F)({rects:I,activeNodeRect:j,activeIndex:x,overIndex:R,index:q}):null,$e=cf(x)&&cf(R)?o({id:l,items:y,activeIndex:x,overIndex:R}):q,ne=D==null?void 0:D.id,he=O.useRef({activeId:ne,items:y,newIndex:$e,containerId:_}),st=y!==he.current.items,gt=e({active:D,containerId:_,isDragging:Re,isSorting:ee,id:l,index:q,items:y,newIndex:he.current.newIndex,previousItems:he.current.items,previousContainerId:he.current.containerId,transition:m,wasDragging:he.current.activeId!=null}),_n=y6({disabled:!gt,index:q,node:k,rect:A});return O.useEffect(()=>{ee&&he.current.newIndex!==$e&&(he.current.newIndex=$e),_!==he.current.containerId&&(he.current.containerId=_),y!==he.current.items&&(he.current.items=y)},[ee,$e,_,y]),O.useEffect(()=>{if(ne===he.current.activeId)return;if(ne!=null&&he.current.activeId==null){he.current.activeId=ne;return}const yr=setTimeout(()=>{he.current.activeId=ne},50);return()=>clearTimeout(yr)},[ne]),{active:D,activeIndex:x,attributes:Ae,data:Z,rect:A,index:q,newIndex:$e,items:y,isOver:N,isSorting:ee,isDragging:Re,listeners:Ze,node:k,overIndex:R,over:X,setNodeRef:W,setActivatorNodeRef:pe,setDroppableNodeRef:P,setDraggableNodeRef:rt,transform:_n??Se,transition:wn()};function wn(){if(_n||st&&he.current.newIndex===q)return m6;if(!(xe&&!tp(V)||!m)&&(ee||gt))return Ws.Transition.toString({...m,property:CI})}}function v6(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Jf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const _6=[tt.Down,tt.Right,tt.Up,tt.Left],cv=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:o,over:l,scrollableAncestors:u}}=e;if(_6.includes(t.code)){if(t.preventDefault(),!n||!r)return;const d=[];o.getEnabled().forEach(_=>{if(!_||_!=null&&_.disabled)return;const x=s.get(_.id);if(x)switch(t.code){case tt.Down:r.top<x.top&&d.push(_);break;case tt.Up:r.top>x.top&&d.push(_);break;case tt.Left:r.left>x.left&&d.push(_);break;case tt.Right:r.left<x.left&&d.push(_);break}});const m=ZC({collisionRect:r,droppableRects:s,droppableContainers:d});let y=Ck(m,"id");if(y===(l==null?void 0:l.id)&&m.length>1&&(y=m[1].id),y!=null){const _=o.get(n.id),x=o.get(y),E=x?s.get(x.id):null,C=x==null?void 0:x.node.current;if(C&&E&&_&&x){const R=sp(C).some((G,A)=>u[A]!==G),U=AI(_,x),F=w6(_,x),M=R||!U?{x:0,y:0}:{x:F?r.width-E.width:0,y:F?r.height-E.height:0},q={x:E.left,y:E.top};return M.x&&M.y?q:Vu(q,M)}}}};function AI(t,e){return!Jf(t)||!Jf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function w6(t,e){return!Jf(t)||!Jf(e)||!AI(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}class b6 extends O.Component{constructor(n){super(n);Rt(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){pF(n,r.componentStack??void 0)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const n=Ar.getState().language,{t:r}=Cc(n);return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:p.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[p.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:p.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),p.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:r("error_boundary.title")}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:r("error_boundary.description")}),p.jsxs("div",{className:"flex gap-3 justify-center",children:[p.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:r("error_boundary.retry")}),p.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:r("error_boundary.reload")})]}),!1]})})}return this.props.children}}const x6=({className:t})=>p.jsx("svg",{className:Ce("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),k6=({className:t})=>p.jsx("svg",{className:Ce("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),E6=({className:t})=>p.jsx("svg",{className:Ce("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),T6=({children:t,containerId:e="portal-root"})=>{const n=document.getElementById(e)??document.body;return wo.createPortal(t,n)},NI=()=>p.jsxs("div",{className:"space-y-2 p-2",children:[p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),RI=({id:t,children:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:o,transition:l,isDragging:u}=lv({id:t}),d={transform:Ws.Transform.toString(o),transition:l,opacity:u?.5:1};return p.jsx("div",{ref:s,style:d,...n,...r,children:e})},Yx=Array.from({length:24},(t,e)=>String(e).padStart(2,"0")),Jx=["00","15","30","45"],I6=({isOpen:t,zIndex:e,overlayClassName:n})=>{const{t:r}=mt(),{closeModal:s}=vn(),o=!!t,{timeBlocks:l}=Cd(),{workspaceId:u}=Nr(),[d,m]=O.useState([]),[y,_]=O.useState(!1),[x,E]=O.useState(null),[C,I]=O.useState(null),R=np(Ao(yc,{activationConstraint:{distance:5}}),Ao(ud,{coordinateGetter:cv}));O.useEffect(()=>{o&&(m(l.sort((k,N)=>(k.order||0)-(N.order||0))),E(null),_(!1))},[o,l]);const U=()=>{if(d.length>=Tf.TIME_BLOCK.MAX_COUNT)return;let k="09:00",N="10:00";if(d.length>0){const D=d[d.length-1];if(D.end){const[V,j]=D.end.split(":").map(Number);k=D.end;const Ae=(V+1)%24;N=`${String(Ae).padStart(2,"0")}:${String(j).padStart(2,"0")}`}}const P={id:`new-${Date.now()}`,start:k,end:N,color:mi[d.length%mi.length].value,order:d.length};m([...d,P])},F=async k=>{if(!k.startsWith("new-")){if(!confirm(r("time_block.delete_confirm")))return;try{u&&await cI(u,k)}catch{E(r("validation.delete_fail"));return}}m(d.filter(N=>N.id!==k))},M=(k,N)=>{m(d.map(P=>P.id===k?{...P,...N}:P))},q=k=>{I(k.active.id)},Z=k=>{const{active:N,over:P}=k;I(null),P&&N.id!==P.id&&m(D=>{const V=D.findIndex(Ae=>Ae.id===N.id),j=D.findIndex(Ae=>Ae.id===P.id);return jc(D,V,j)})},G=async()=>{_(!0),E(null);try{for(const P of d){if(!P.start||!P.end)continue;const[D,V]=P.start.split(":").map(Number),[j,Ae]=P.end.split(":").map(Number);if(D*60+V>=j*60+Ae)throw new Error(r("time_block.error_invalid_time",{start:P.start,end:P.end}))}const k=[...d].sort((P,D)=>(P.start||"").localeCompare(D.start||""));for(let P=0;P<k.length-1;P++){const D=k[P],V=k[P+1];if(!D.end||!V.start)continue;const[j,Ae]=D.end.split(":").map(Number),[rt,Ze]=V.start.split(":").map(Number);if(rt*60+Ze<j*60+Ae)throw new Error(r("time_block.error_overlap",{range1:`${D.start}-${D.end}`,range2:`${V.start}-${V.end}`}))}const N=d.map((P,D)=>{var j;const V={...P,id:(j=P.id)!=null&&j.startsWith("new-")?null:P.id,order:D,name:`${P.start}-${P.end}`};if(!u)throw new Error("No workspace");return WF(u,V)});await Promise.all(N),await Promise.all(N),s()}catch(k){E(k.message||r("validation.save_fail")),_(!1)}};if(!o)return null;const A=C?d.find(k=>k.id===C):null;return p.jsx($o,{isOpen:o,onClose:s,title:r("time_block.settings_title"),className:"max-w-2xl h-[600px]",zIndex:e,overlayClassName:n,children:p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-3 custom-scrollbar",children:[p.jsxs(ap,{sensors:R,collisionDetection:rp,onDragStart:q,onDragEnd:Z,children:[p.jsx(Lp,{items:d.map(k=>k.id),strategy:Op,children:d.map(k=>p.jsx(RI,{id:k.id,children:p.jsx(Xx,{block:k,onDelete:()=>F(k.id),onUpdate:N=>M(k.id,N),isOverlay:!1})},k.id))}),p.jsx(o2,{dropAnimation:null,modifiers:[],children:A?p.jsx("div",{style:{opacity:.9},children:p.jsx(Xx,{block:A,onDelete:()=>{},onUpdate:()=>{},isOverlay:!0})}):null})]}),d.length<Tf.TIME_BLOCK.MAX_COUNT?p.jsxs("button",{onClick:U,disabled:d.length>=Tf.TIME_BLOCK.MAX_COUNT,className:"w-full py-4 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl text-gray-400 hover:border-blue-500 hover:text-blue-500 hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-all font-medium text-sm flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),r("time_block.add_button")]}):p.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400 text-sm rounded-lg flex items-center justify-center gap-2 border border-yellow-100 dark:border-yellow-900/30",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r("time_block.max_limit")]}),p.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/40 rounded-lg flex items-center text-sm text-gray-500 dark:text-gray-400",children:[p.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-gray-400 mr-3 shadow-sm"}),p.jsx("span",{className:"font-bold mr-2 text-gray-700 dark:text-gray-300",children:r("time_block.unspecified")}),p.jsx("span",{className:"text-xs opacity-80",children:r("time_block.default_zone_desc")})]})]}),p.jsx(Pc,{message:x,className:"mb-4"}),p.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:p.jsx("button",{onClick:G,disabled:y,className:"px-8 py-2.5 bg-gray-900 hover:bg-gray-800 dark:bg-blue-600 dark:hover:bg-blue-500 text-white rounded-lg font-bold text-sm transition-colors disabled:bg-gray-400",children:r(y?"saving":"done")})})]})})},Xx=({block:t,onDelete:e,onUpdate:n,isOverlay:r})=>{const{t:s}=mt(),[o,l]=O.useState(!1),u=t.start||"09:00",d=t.end||"10:00",[m,y]=u.split(":"),[_,x]=d.split(":");return p.jsxs("div",{className:`flex items-center gap-4 p-2 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-sm group ${r?"shadow ring-2 ring-blue-500 opacity-90 cursor-grabbing":""}`,children:[p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>l(!o),className:"w-6 h-6 rounded-full shadow-sm ring-2 ring-transparent focus:ring-blue-400 ring-offset-2 dark:ring-offset-gray-900",style:{backgroundColor:t.color||"#3B82F6"},title:s("time_block.change_color")}),o&&p.jsxs(T6,{children:[p.jsx("div",{className:"fixed inset-0 z-[9999] bg-transparent",onClick:()=>l(!1)}),p.jsxs("div",{className:"fixed z-[10000] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow p-4 w-[280px]",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[p.jsx("h4",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase mb-3 tracking-wider",children:s("modal.theme_color")}),p.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:mi.map(E=>p.jsx("button",{onClick:()=>{n({color:E.value}),l(!1)},className:Ce("w-8 h-8 rounded-full ring-2 ring-transparent hover:ring-blue-400 focus:outline-none",t.color===E.value&&"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800"),style:{backgroundColor:E.value},"aria-label":s(`colors.${E.key}`),"aria-pressed":t.color===E.value},E.value))})]})]})]}),p.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(df,{options:Yx,value:m,onChange:E=>n({start:`${E}:${y}`})}),p.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),p.jsx(df,{options:Jx,value:y,onChange:E=>n({start:`${m}:${E}`})})]}),p.jsx("div",{className:"w-4 h-0.5 bg-gray-200 dark:bg-gray-700 rounded-full"}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(df,{options:Yx,value:_,onChange:E=>n({end:`${E}:${x}`})}),p.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),p.jsx(df,{options:Jx,value:x,onChange:E=>n({end:`${_}:${E}`})})]})]}),p.jsx("button",{onClick:e,className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:s("modal.delete"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},df=({options:t,value:e,onChange:n,label:r})=>{const{t:s}=mt();return p.jsx("select",{value:e,onChange:o=>n(o.target.value),className:"appearance-none px-2 py-1 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm font-mono font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-100 dark:focus:ring-blue-900 outline-none cursor-pointer","aria-label":r||s("time_block.time_select"),children:t.map(o=>p.jsx("option",{value:o,children:o},o))})},S6=({isOpen:t,data:e,zIndex:n})=>{const{t:r}=mt(),{closeModal:s}=vn(),o=!!t,l=e,u=!!(l!=null&&l.id),[d,m]=O.useState(""),[y,_]=O.useState(!1),[x,E]=O.useState(null),C=Me.useRef(null);O.useEffect(()=>{o&&(m((l==null?void 0:l.name)||""),E(null),_(!1))},[o,l]),O.useEffect(()=>{var U;x&&((U=C.current)==null||U.focus())},[x]);const I=O.useCallback(async()=>{const U=d.trim();if(!U){E(r("validation.workspace_name_required"));return}if(oI().some(q=>q.name===U&&q.id!==(l==null?void 0:l.id))){E(r("validation.workspace_duplicate"));return}_(!0),E(null);try{if(u&&(l!=null&&l.id))await hF(l.id,U);else{const q=await dF(U);q!=null&&q.id&&confirm(r("validation.workspace_confirm_switch"))&&aI(q.id)}s()}catch(q){E(r("validation.save_fail")+": "+(q.message||"Error")),_(!1)}},[d,u,l,s,r]),R=U=>{U.key==="Enter"&&!U.nativeEvent.isComposing&&I()};return o?p.jsx($o,{isOpen:o,onClose:s,className:"max-w-md",children:p.jsxs("div",{className:"flex flex-col gap-6 max-h-[85vh] overflow-y-auto p-1",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"workspace-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:r(u?"modal.workspace_edit_title":"modal.workspace_create_title")}),p.jsx("input",{ref:C,id:"workspace-name-input",name:"workspaceName",type:"text",value:d,onChange:U=>m(U.target.value),onKeyDown:R,placeholder:r("modal.workspace_name_placeholder"),className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600",autoFocus:!0})]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:r(u?"modal.workspace_desc_edit":"modal.workspace_desc_create")}),p.jsx(Pc,{message:x}),p.jsxs("div",{className:"flex justify-end items-center pt-4 border-t border-gray-200 dark:border-gray-700 gap-3",children:[p.jsx("button",{onClick:s,disabled:y,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:r("modal.cancel")}),p.jsx("button",{onClick:I,disabled:y,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95",children:r(y?"saving":u?"modal.save":"modal.create")})]})]})}):null},C6=({isOpen:t,data:e,zIndex:n})=>{const{closeModal:r}=vn(),s=!!t,o=e,l=O.useCallback(()=>{jo.getState().setView("wizard",{mode:o.id}),r()},[o,r]);return!s||!o?null:p.jsx($o,{isOpen:s,onClose:r,className:"max-w-3xl max-h-[90vh] p-0 overflow-hidden bg-transparent shadow-none",children:p.jsxs("div",{className:"w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[p.jsx("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-4xl animate-bounce-slow",children:o.icon}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:o.title}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:o.subTitle})]})]})}),p.jsxs("div",{className:"p-6 overflow-y-auto flex-1 custom-scrollbar",children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-blue-600 dark:bg-blue-400 mr-2 rounded-full"}),""]}),p.jsx("p",{className:"text-base text-gray-700 dark:text-gray-300 leading-relaxed bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:o.concept.summary})]}),p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-gray-400 mr-2 rounded-full"}),""]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed mb-3",children:o.concept.detail})]}),Array.isArray(o.useCases)&&o.useCases.length>0&&p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-purple-500 mr-2 rounded-full"}),"Use Cases"]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.useCases.map((u,d)=>p.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/40 rounded-lg p-5 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 transition-colors",children:[p.jsxs("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center",children:[p.jsx("span",{className:"text-purple-500 mr-2",children:"#"}),u.title]}),p.jsx("div",{className:"mb-3",children:p.jsxs("div",{className:"flex items-start mb-1",children:[p.jsx("span",{className:"text-[10px] font-bold text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"Before"}),p.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.before})]})}),p.jsx("div",{children:p.jsxs("div",{className:"flex items-start",children:[p.jsx("span",{className:"text-[10px] font-bold text-blue-600 bg-blue-100 dark:bg-blue-900/40 dark:text-blue-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"After"}),p.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-300 font-medium",children:u.after})]})})]},d))})]}),o.tips&&o.tips.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-amber-500 mr-2 rounded-full"}),"Tips"]}),p.jsx("div",{className:"space-y-3",children:o.tips.map((u,d)=>p.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-lg border border-amber-100 dark:border-amber-900/30",children:[p.jsxs("p",{className:"font-bold text-amber-800 dark:text-amber-400 mb-1",children:["Q. ",u.q]}),p.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["A. ",u.a]})]},d))})]})]}),p.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[p.jsx("button",{onClick:r,className:"px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""}),p.jsxs("button",{onClick:l,className:"group relative px-6 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg shadow-md transition-all transform hover:scale-105 active:scale-95 overflow-hidden",children:[p.jsxs("span",{className:"relative z-10 flex items-center",children:["",p.jsx("svg",{className:"w-4 h-4 ml-2 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})]}),p.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 skew-y-12"})]})]})]})})},A6=()=>{const{stack:t}=vn();return t.length===0?null:p.jsx(p.Fragment,{children:t.map((e,n)=>{const s=n===0?void 0:"bg-black/30",o={isOpen:!0,data:e.data,zIndex:100+n*10,overlayClassName:s};switch(e.type){case"settings":return p.jsx(t6,{...o},e.id);case"task-detail":return p.jsx(a6,{...o},e.id);case"label-edit":return p.jsx(Jz,{...o},e.id);case"project-edit":return p.jsx(Xz,{...o},e.id);case"workspace-edit":return p.jsx(S6,{...o},e.id);case"filter-edit":return p.jsx(Yz,{...o},e.id);case"timeblock-edit":return p.jsx(I6,{...o},e.id);case"wiki-framework":return p.jsx(C6,{...o},e.id);default:return null}})})},Nd=()=>{const{workspaceId:t,userId:e,loading:n}=Nr(),r=O.useCallback(d=>!t||!e?()=>{}:Hz(t,m=>d(m),m=>console.error("Task subscription error:",m)),[t,e]),s=t?Gz(t):!1,{data:o,isPending:l}=Ha(["tasks",e||void 0,t||void 0],r,t&&s?Kz(t):void 0);return{tasks:o||[],loading:n||!!t&&!s&&l}};function N6(){const{tasks:t}=Nd(),{showCompleted:e,query:n}=Gr();return O.useMemo(()=>{var l,u;const s={inbox:0,today:0,upcoming:0,important:0,all:0,search:0},o=n?n.toLowerCase().trim():"";for(const d of t){if(o){const y=(l=d.title)==null?void 0:l.toLowerCase().includes(o),_=(u=d.description)==null?void 0:u.toLowerCase().includes(o);(y||_)&&s.search++}d.status==="archived"||d.status==="completed"||(s.all++,(!d.projectId||d.projectId==="unassigned"||d.projectId==="none")&&s.inbox++,d.isImportant&&s.important++,d.dueDate&&(gI(d.dueDate)?s.today++:yI(d.dueDate)&&s.upcoming++))}return s},[t,n])}const R6=t=>t in Pt.SIDEBAR_DENSITY,uv=t=>R6(t)?Pt.SIDEBAR_DENSITY[t]:Pt.SIDEBAR_DENSITY.normal,P6=[{id:"inbox",i18nKey:"inbox",icon:"",color:"text-blue-500",droppable:!0},{id:"today",i18nKey:"today",icon:"",color:"text-green-500"},{id:"upcoming",i18nKey:"upcoming",icon:"",color:"text-purple-500"},{id:"important",i18nKey:"important",icon:"",color:"text-amber-400"},{id:"custom",i18nKey:"all_tasks",icon:"",color:"text-gray-500"}],j6=()=>{const{language:t}=Ar(),{t:e}=Cc(t),n=N6();return p.jsx("ul",{className:"space-y-0.5",children:P6.map(r=>p.jsx(D6,{item:r,label:e(r.i18nKey),count:n[r.id]||0},r.id))})},D6=({item:t,label:e,count:n})=>{const{filterType:r,setFilter:s}=Gr(),{setView:o}=jo(),{density:l}=Ar(),d=jo(x=>x.currentView)==="tasks"&&r===t.id,{setNodeRef:m,isOver:y}=vc({id:`filter:${t.id}`,disabled:!t.droppable,data:{type:t.id==="inbox"?"inbox":"filter",value:t.id}}),_=()=>{t.id==="search"?(o("tasks"),s("search")):(o("tasks"),s(t.id))};return p.jsx("li",{ref:m,children:p.jsxs("button",{onClick:_,className:Ce("w-full flex items-center px-3 text-sm rounded-md transition-colors text-left gap-3 group/item",uv(l),d?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",y&&t.droppable&&"bg-blue-50 dark:bg-blue-900/30"),children:[p.jsx("span",{className:t.color,children:t.icon}),p.jsx("span",{className:"flex-1",children:e}),t.id!=="search"&&n>0&&p.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:n})]})})},O6=()=>{const{workspaceId:t,userId:e,loading:n}=Nr(),r=O.useCallback(d=>!t||!e?()=>{}:sz(t,d),[t,e]),s=t?rz(t):!1,{data:o,isPending:l}=Ha(["filters",e||void 0,t||void 0],r,t&&s?nz(t):void 0);return{filters:o,loading:n||!!t&&l}};function L6(t,e="createdAt_desc"){if(!Array.isArray(t))return[];const[n,r]=e.split("_"),o=r==="desc"?-1:1;return[...t].sort((l,u)=>{var y,_,x,E,C,I;let d,m;switch(n){case"dueDate":d=(y=an(l.dueDate))==null?void 0:y.getTime(),m=(_=an(u.dueDate))==null?void 0:_.getTime();break;case"createdAt":d=(x=an(l.createdAt))==null?void 0:x.getTime(),m=(E=an(u.createdAt))==null?void 0:E.getTime();break;case"title":d=l.title.toLowerCase(),m=u.title.toLowerCase();break;case"duration":d=l.duration||0,m=u.duration||0;break;case"important":d=l.isImportant?1:0,m=u.isImportant?1:0;break;case"manual":d=l.order!==void 0?l.order:Number.MAX_SAFE_INTEGER,m=u.order!==void 0?u.order:Number.MAX_SAFE_INTEGER;break;default:d=(C=an(l.createdAt))==null?void 0:C.getTime(),m=(I=an(u.createdAt))==null?void 0:I.getTime()}return M6(d,m)*o})}function M6(t,e){return t===e?0:t==null?1:e==null?-1:t>e?1:t<e?-1:0}function V6(){const t=new Date;t.setHours(0,0,0,0);const e=new Date(t);e.setDate(e.getDate()+1);const n=vI(t),r=new Date(n);r.setDate(r.getDate()+7);const s=new Date(e);return s.setDate(s.getDate()+7),{now:t,tomorrow:e,weekStart:n,weekEnd:r,upcomingEnd:s}}function F6(t,e,n,r){const{now:s,tomorrow:o,weekStart:l,weekEnd:u,upcomingEnd:d}=n;switch(e){case"today":return Ry(t,s);case"tomorrow":return Ry(t,o);case"week":return t>=l&&t<u;case"upcoming":return t>=o&&t<d;case"overdue":return t<s&&r!=="completed";default:return!1}}function ek(t,e){if(!e)return t;const n=typeof e=="string"?iv(e):e,r=n.dates.length>0?V6():null;return t.filter(s=>{if(n.status.length>0){const l=s.status||"todo";if(!n.status.some(d=>d==="active"&&l==="todo"?!0:d===l))return!1}if(n.excludeStatus.length>0){const l=s.status||"todo";if(n.excludeStatus.some(d=>d==="active"&&l==="todo"?!0:d===l))return!1}if(n.isImportant===!0&&!s.isImportant||n.isImportant===!1&&s.isImportant||n.projects.length>0&&!n.projects.some(u=>u==="unassigned"?!s.projectId||s.projectId==="unassigned"||s.projectId==="none":s.projectId===u)||n.excludeProjects.length>0&&n.excludeProjects.some(l=>s.projectId===l)||n.labels.length>0&&(!s.labelIds||!n.labels.some(l=>{var u;return(u=s.labelIds)==null?void 0:u.includes(l)}))||n.excludeLabels.length>0&&s.labelIds&&n.excludeLabels.some(l=>{var u;return(u=s.labelIds)==null?void 0:u.includes(l)})||n.timeBlocks.length>0&&!n.timeBlocks.some(u=>u==="unassigned"?!s.timeBlockId:s.timeBlockId===u)||n.excludeTimeBlocks.length>0&&n.excludeTimeBlocks.some(l=>s.timeBlockId===l))return!1;if(n.durations.length>0){const l=s.duration||0;if(!n.durations.includes(l))return!1}if(r&&n.dates.length>0){const l=an(s.dueDate);if(!l||!n.dates.some(d=>F6(l,d,r,s.status||"todo")))return!1}const o=`${s.title} ${s.description||""}`.toLowerCase();return!(n.keywords.length>0&&!n.keywords.every(u=>Array.isArray(u)?u.some(d=>o.includes(d)):o.includes(u))||n.excludeKeywords.length>0&&n.excludeKeywords.some(u=>o.includes(u)))})}function z6(t){const{keyword:e,showCompleted:n,projectId:r,labelId:s,timeBlockId:o,duration:l,filterType:u}=t,d=e?iv(e):{keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(r&&d.projects.push(r),s&&d.labels.push(s),o&&d.timeBlocks.push(o),l){const m=typeof l=="number"?l:parseInt(l,10);isNaN(m)||d.durations.push(m)}return u==="today"&&d.dates.push("today"),u==="upcoming"&&d.dates.push("upcoming"),u==="important"&&(d.isImportant=!0),n||d.status.length===0&&d.status.push("active"),d}function PI(t,e){const{savedFilter:n,sortCriteria:r}=e,s=z6(e);let o=ek(t,s);return n&&n.query&&(o=ek(o,n.query)),L6(o,r||"createdAt_desc")}const dv=({x:t,y:e,onClose:n,children:r})=>{const s=O.useRef(null);return O.useEffect(()=>{const o=u=>{s.current&&!s.current.contains(u.target)&&n()},l=()=>n();return document.addEventListener("mousedown",o),window.addEventListener("scroll",l,!0),()=>{document.removeEventListener("mousedown",o),window.removeEventListener("scroll",l,!0)}},[n]),wo.createPortal(p.jsx("div",{ref:s,className:"fixed z-50 min-w-[160px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-100",style:{top:e,left:t},onContextMenu:o=>o.preventDefault(),children:r}),document.body)},fc=({onClick:t,children:e,className:n,icon:r,variant:s="default"})=>p.jsxs("button",{onClick:o=>{o.stopPropagation(),t()},className:Ce("w-full text-left px-3 py-2 text-sm flex items-center gap-2 transition-colors",s==="danger"?"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",n),children:[r&&p.jsx("span",{className:Ce("w-4 h-4",s==="danger"?"text-red-500":"text-gray-400"),children:r}),e]}),ja=({icon:t,label:e,count:n,isActive:r,isOver:s,onClick:o,onContextMenu:l,showZero:u=!1})=>{const{density:d}=Ar();return p.jsxs("button",{type:"button",onClick:o,onContextMenu:l,className:Ce("w-full text-left group flex items-center justify-between px-2 ml-1 rounded-md transition-colors select-none outline-none focus:ring-2 focus:ring-blue-500/50",uv(d),r?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",s&&"bg-blue-50 dark:bg-blue-900/30"),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t&&p.jsx("span",{className:"flex-shrink-0 w-5 flex justify-center text-sm",children:t}),p.jsx("span",{className:"text-sm truncate",children:e})]}),n!==void 0&&(n>0||u&&n===0)&&p.jsx("span",{className:Ce("text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700/50",r?"text-blue-700 dark:text-blue-300 bg-white":"text-gray-400"),children:n})]})},U6=()=>{const{filters:t,loading:e}=O6(),{tasks:n}=Nd(),{workspaceId:r}=Nr();return e?null:p.jsx("div",{className:"space-y-0.5 py-1",children:t.map(s=>p.jsx($6,{filter:s,tasks:n,workspaceId:r},s.id))})},$6=({filter:t,tasks:e,workspaceId:n})=>{const{t:r}=mt(),{filterType:s,targetId:o,setFilter:l}=Gr(),{openModal:u}=vn(),d=s==="custom"&&o===t.id,[m,y]=O.useState(null),_=Me.useMemo(()=>{try{return PI(e,{savedFilter:t,showCompleted:!1}).length}catch(I){return console.warn("[CustomFilterItem] Count error:",I),0}},[e,t]),x=()=>{y(null),u("filter-edit",t)},E=async()=>{y(null),confirm(`${r("filter")}: ${t.name}
${r("msg.confirm_delete")}`)&&t.id&&n&&await az(n,t.id)},C=I=>{I.preventDefault(),I.stopPropagation(),y({x:I.clientX,y:I.clientY})};return p.jsxs(p.Fragment,{children:[p.jsx("div",{onContextMenu:C,children:p.jsx(ja,{label:t.name,icon:p.jsx("span",{children:""}),count:_,isActive:d,onClick:()=>l("custom",t.id)})}),m&&p.jsxs(dv,{x:m.x,y:m.y,onClose:()=>y(null),children:[p.jsx(fc,{onClick:x,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:r("edit")}),p.jsx(fc,{onClick:E,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:r("delete")})]})]})},B6=Me.memo(({mins:t,count:e})=>{const{t:n}=mt(),{filterType:r,targetId:s,setFilter:o}=Gr(),l=r==="duration"&&s===t.toString(),{setNodeRef:u,isOver:d}=vc({id:`duration:${t}`,data:{type:"duration",value:t.toString()}});return p.jsx("div",{ref:u,children:p.jsx(ja,{label:n("sidebar.duration_format",{min:t}),icon:p.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),count:e,isActive:l,isOver:d,onClick:()=>o("duration",t.toString())})})}),W6=()=>{const{tasks:t}=Nd(),e=Pt.SIDEBAR.DURATIONS,n=O.useMemo(()=>{const r=new Map;return t.forEach(s=>{if(s.status!=="completed"&&s.duration){const o=Number(s.duration);isNaN(o)||r.set(o,(r.get(o)||0)+1)}}),r},[t]);return p.jsx("div",{className:"space-y-0.5 py-1",children:e.map(r=>p.jsx(B6,{mins:r,count:n.get(r)||0},r))})},q6=Me.memo(({project:t})=>{const{t:e}=mt(),{filterType:n,targetId:r,setFilter:s}=Gr(),{density:o}=Ar(),{openModal:l}=vn(),u=n==="project"&&r===t.id,[d,m]=O.useState(null),{setNodeRef:y,isOver:_}=vc({id:`project:${t.id}`,data:{type:"project",value:t.id}}),x=I=>{I==null||I.stopPropagation(),m(null),l("project-edit",t)},E=async()=>{m(null),confirm(`${e("project")}: ${t.name}
${e("msg.confirm_delete")}`)&&t.id&&await lI(t.id)},C=I=>{I.preventDefault(),I.stopPropagation(),m({x:I.clientX,y:I.clientY})};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{ref:y,onClick:()=>s("project",t.id),onContextMenu:C,className:Ce("group flex items-center justify-between px-2 rounded-md cursor-pointer transition-colors select-none",uv(o),u?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",_&&"bg-blue-50 dark:bg-blue-900/30"),role:"button",tabIndex:0,"aria-selected":u,"aria-label":`${e("project")}: ${t.name}${u?` (${e("active")})`:""}`,children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[p.jsx("span",{className:Ce("text-xs shrink-0 transition-colors",u?"text-blue-500":"text-gray-400 group-hover:text-gray-500"),children:p.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),p.jsx("span",{className:"text-sm truncate",children:t.name})]}),p.jsx("button",{onClick:x,className:Ce("p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-opacity",u?"opacity-100":"opacity-0 sm:group-hover:opacity-100 focus:opacity-100"),"aria-label":e("edit"),title:e("edit"),children:p.jsx("svg",{className:"w-3.5 h-3.5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),d&&p.jsxs(dv,{x:d.x,y:d.y,onClose:()=>m(null),children:[p.jsx(fc,{onClick:x,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:e("edit")}),p.jsx(fc,{onClick:E,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:e("delete")})]})]})}),H6=()=>{const{t}=mt(),{projects:e,loading:n}=jp();return n?p.jsx(NI,{}):e.length===0?p.jsx("div",{className:"p-4 text-xs text-gray-400",children:t("sidebar.no_projects")}):p.jsx(Lp,{items:e.map(r=>r.id),strategy:Op,children:p.jsx("div",{className:"space-y-0.5 p-2",children:e.map(r=>p.jsx(RI,{id:r.id,children:p.jsx(q6,{project:r})},r.id))})})},K6=({title:t,children:e,defaultExpanded:n=!0,action:r,dragHandleProps:s})=>{const{t:o}=mt(),[l,u]=O.useState(()=>typeof window<"u"&&window.innerWidth<768?!1:n),m=`section-${encodeURIComponent(t.replace(/\s+/g,"-").toLowerCase())}`;return p.jsxs("div",{className:"mb-2 group/section",children:[p.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[p.jsxs("button",{...s,onClick:()=>u(!l),"aria-expanded":l,"aria-controls":m,className:"flex items-center flex-1 text-xs font-semibold text-gray-500 uppercase hover:text-gray-700 dark:hover:text-gray-300 transition-colors text-left cursor-grab active:cursor-grabbing touch-none select-none",title:o("sidebar.reorder_section"),children:[p.jsx("svg",{className:Ce("w-3 h-3 mr-1 transition-transform",l?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),t]}),r&&p.jsx("div",{className:"opacity-100 transition-opacity",onClick:y=>y.stopPropagation(),children:r})]}),l&&p.jsx("div",{className:"mt-1",id:m,children:e})]})},G6=()=>{const{t}=mt(),{currentView:e,setView:n}=jo();return p.jsxs("div",{className:"space-y-0.5 py-1",children:[p.jsx(ja,{label:t("sidebar.target_wizard"),icon:p.jsx(x6,{}),isActive:e==="wizard",onClick:()=>n("wizard")}),p.jsx(ja,{label:t("sidebar.target_dashboard"),icon:p.jsx(k6,{}),isActive:e==="target-dashboard",onClick:()=>n("target-dashboard")}),p.jsx(ja,{label:t("sidebar.framework_wiki"),icon:p.jsx(E6,{}),isActive:e==="wiki",onClick:()=>n("wiki")})]})},Q6=()=>{const{timeBlocks:t,loading:e}=Cd(),{tasks:n}=Nd(),{workspaceId:r}=Nr(),s=Me.useMemo(()=>{const o=new Map;let l=0;return n.forEach(u=>{u.status!=="completed"&&(!u.timeBlockId||u.timeBlockId==="unassigned"||u.timeBlockId==="null"?l++:o.set(u.timeBlockId,(o.get(u.timeBlockId)||0)+1))}),{map:o,unassignedCount:l}},[n]);return e?p.jsx(NI,{}):p.jsxs("div",{className:"space-y-0.5 py-1",children:[t.map(o=>p.jsx(Z6,{block:o,count:s.map.get(o.id||"")||0,workspaceId:r},o.id)),p.jsx(Y6,{count:s.unassignedCount})]})},Z6=({block:t,count:e,workspaceId:n})=>{const{t:r}=mt(),{filterType:s,targetId:o,setFilter:l}=Gr(),{openModal:u}=vn(),d=s==="timeblock"&&o===t.id,[m,y]=O.useState(null),{setNodeRef:_,isOver:x}=vc({id:`timeblock:${t.id}`,data:{type:"timeblock",value:t.id}}),E=()=>{y(null),u("timeblock-edit",t)},C=async()=>{y(null),confirm(`${r("timeblock")}: ${t.start} - ${t.end}
${r("msg.confirm_delete")}`)&&t.id&&n&&await cI(n,t.id)},I=R=>{R.preventDefault(),R.stopPropagation(),y({x:R.clientX,y:R.clientY})};return p.jsxs("div",{ref:_,onContextMenu:I,children:[p.jsx(ja,{label:`${t.start} - ${t.end}`,icon:p.jsx("span",{className:"w-2 rounded-full aspect-square",style:{backgroundColor:t.color}}),count:e,isActive:d,isOver:x,onClick:()=>l("timeblock",t.id||"")}),m&&p.jsxs(dv,{x:m.x,y:m.y,onClose:()=>y(null),children:[p.jsx(fc,{onClick:E,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:r("edit")}),p.jsx(fc,{onClick:C,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:r("delete")})]})]})},Y6=({count:t})=>{const{t:e}=mt(),{filterType:n,targetId:r,setFilter:s}=Gr(),o=n==="timeblock"&&r==="unassigned",{setNodeRef:l,isOver:u}=vc({id:"timeblock:unassigned",data:{type:"timeblock",value:"unassigned"}});return p.jsx("div",{ref:l,children:p.jsx(ja,{label:e("sidebar.unassigned"),icon:p.jsx("span",{className:"w-2 rounded-full aspect-square bg-gray-400"}),count:t,isActive:o,isOver:u,onClick:()=>s("timeblock","unassigned")})})},J6=({id:t,section:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:o,transition:l,isDragging:u}=lv({id:t}),d={transform:Ws.Transform.toString(o),transition:l,opacity:u?.5:1};return p.jsx("div",{ref:s,style:d,...n,children:p.jsx(K6,{title:e.title,defaultExpanded:e.defaultExpanded,action:e.action,dragHandleProps:r,children:e.component})})},X6=["general","projects","targets","timeblocks","durations","filters"],e9=()=>{const{t}=mt(),{openModal:e}=vn(),[n,r]=Me.useState(()=>{const u=localStorage.getItem(Pt.STORAGE_KEYS.SECTION_ORDER);if(u)try{const d=JSON.parse(u);if(Array.isArray(d)&&d.every(m=>typeof m=="string"))return d}catch{}return X6});O.useEffect(()=>{localStorage.setItem(Pt.STORAGE_KEYS.SECTION_ORDER,JSON.stringify(n))},[n]);const s=np(Ao(yc,{activationConstraint:{distance:8}}),Ao(ud,{coordinateGetter:cv})),o=u=>{const{active:d,over:m}=u;m&&d.id!==m.id&&r(y=>{const _=y.indexOf(d.id),x=y.indexOf(m.id);return jc(y,_,x)})},l=Me.useMemo(()=>({general:{id:"general",title:t("general"),component:p.jsx(p.Fragment,{children:p.jsx(j6,{})}),defaultExpanded:!0},projects:{id:"projects",title:t("projects"),component:p.jsx(H6,{}),defaultExpanded:!0,action:p.jsx("button",{onClick:()=>e("project-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},targets:{id:"targets",title:t("targets"),component:p.jsx(G6,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("wiki-framework"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},timeblocks:{id:"timeblocks",title:t("timeblocks"),component:p.jsx(Q6,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("timeblock-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},durations:{id:"durations",title:t("durations"),component:p.jsx(W6,{}),defaultExpanded:!1},filters:{id:"filters",title:t("filters"),component:p.jsx(U6,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("filter-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})}}),[t,e]);return p.jsx(ap,{sensors:s,collisionDetection:rp,onDragEnd:o,children:p.jsx(Lp,{items:n,strategy:Op,children:p.jsx("div",{className:"flex flex-col gap-4",children:n.map(u=>{const d=l[u];return d?p.jsx(J6,{id:d.id,section:d},d.id):null})})})})},t9=({className:t,onCancel:e,onSuccess:n,placeholder:r,initialValue:s=""})=>{const{t:o}=mt(),l=r||o("inline_input.placeholder"),[u,d]=O.useState(s),[m,y]=O.useState(!1),[_,x]=O.useState(!1),[E,C]=O.useState(!1),I=async F=>{if(!(!u.trim()||E)){C(!0);try{await mI({title:u,isImportant:m,dueDate:_?new Date:void 0}),d(""),y(!1),x(!1),n==null||n()}catch(M){console.error(M),ut.error(o("msg.task.create_fail"))}finally{C(!1)}}},R=F=>{F.key==="Enter"&&!F.shiftKey&&!F.nativeEvent.isComposing&&(F.preventDefault(),I()),F.key==="Escape"&&(e==null||e())},U=Me.useRef(null);return Me.useEffect(()=>{const F=q=>{U.current&&!U.current.contains(q.target)&&(u.trim()||e==null||e())},M=setTimeout(()=>{document.addEventListener("mousedown",F)},100);return()=>{clearTimeout(M),document.removeEventListener("mousedown",F)}},[e,u]),p.jsxs("div",{ref:U,className:Ce("glass-effect rounded-xl shadow-xl p-3 sm:p-4 border border-blue-500/30 dark:border-blue-400/30 animate-in slide-in-from-top-2 duration-300 w-full",t),children:[p.jsx("label",{htmlFor:"inline-task-input",className:"sr-only",children:o("inline_input.label")}),p.jsx("input",{id:"inline-task-input",type:"text",autoFocus:!0,className:"w-full bg-white/50 dark:bg-gray-800/50 text-base sm:text-lg font-medium text-gray-800 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 outline-none mb-3 sm:mb-4 focus:bg-white/80 dark:focus:bg-gray-800/80 p-3 rounded-lg transition-all border border-transparent focus:border-blue-500/30 focus:ring-2 focus:ring-blue-500/20",placeholder:l,value:u,onChange:F=>d(F.target.value),onKeyDown:R,disabled:E}),p.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100 dark:border-gray-700/50",children:[p.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[p.jsx("button",{type:"button",onClick:()=>x(!_),className:Ce("transition-colors p-2 rounded-lg",_?"text-blue-600 bg-blue-50 hover:bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30 dark:hover:bg-blue-900/50":"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":o(_?"inline_input.aria_today_remove":"inline_input.aria_today"),title:o(_?"inline_input.tooltip_today_remove":"inline_input.tooltip_today"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("button",{type:"button",onClick:()=>y(!m),className:Ce("transition-colors p-2 rounded-lg",m?"text-amber-500 bg-amber-50 hover:bg-amber-100 dark:text-amber-400 dark:bg-amber-900/30 dark:hover:bg-amber-900/50":"text-gray-400 hover:text-amber-500 dark:hover:text-amber-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":o(m?"inline_input.aria_important_remove":"inline_input.aria_important"),title:o(m?"inline_input.tooltip_important_remove":"inline_input.tooltip_important"),children:p.jsx("svg",{className:Ce("w-5 h-5",m&&"fill-current"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]}),p.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e&&p.jsx("button",{type:"button",onClick:e,disabled:E,className:"px-3 py-2 sm:px-4 sm:py-2 text-sm font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all","aria-label":o("modal.cancel"),children:o("modal.cancel")}),p.jsx("button",{onClick:()=>I(),disabled:!u.trim()||E,className:"px-4 py-2 sm:px-5 sm:py-2 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl shadow-lg shadow-blue-500/20 transition-all active:scale-95 flex items-center gap-1","aria-label":o("add_task"),children:o(E?"inline_input.adding":"add")})]})]})]})},n9=({initialValue:t=""})=>{const{t:e}=mt(),[n,r]=O.useState(!1);if(Me.useEffect(()=>{if(!n)return;const o=l=>{l.key==="Escape"&&r(!1)};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[n]),n)return p.jsx("div",{className:"mb-2",children:p.jsx(t9,{onCancel:()=>r(!1),onSuccess:()=>r(!1),initialValue:t})});const s=t?e("add_task_button.add_with_title",{title:t}):e("add_task_button.add_task");return p.jsxs("button",{onClick:()=>r(!0),"aria-label":e("add_task_button.aria_label"),className:"group flex items-center gap-2 w-full text-left py-2 px-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-2",children:[p.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-transparent group-hover:bg-blue-100/50 dark:group-hover:bg-blue-900/30 transition-colors",children:p.jsx("svg",{className:"w-4 h-4 text-inherit",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),p.jsx("span",{className:"text-sm font-medium",children:s})]})},jI=Me.memo(({task:t,style:e,className:n,dragHandleProps:r})=>{const s=t.status==="completed",o=!!t.isImportant,{openModal:l}=vn(),u=async m=>{m.stopPropagation(),t.id&&await qz(t.id,t.status||"todo")},d=async m=>{m.stopPropagation(),t.id&&await av(t.id,{isImportant:!o})};return p.jsxs("li",{style:e,onClick:()=>l("task-detail",t),className:Ce("group flex items-start gap-3 p-[var(--task-p)] bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700/50 rounded-xl hover:shadow-sm hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-200 cursor-pointer hover-lift",n),...r,children:[p.jsx("button",{onClick:u,className:Ce("mt-0.5 w-5 h-5 rounded-full border flex items-center justify-center transition-colors shrink-0",s?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-blue-400 text-transparent"),"aria-label":s?"Mark as incomplete":"Mark as complete",children:p.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:Ce("text-sm text-gray-800 dark:text-gray-200 break-words",s&&"line-through text-gray-400 dark:text-gray-500"),children:t.title}),t.description&&p.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-[var(--task-line-clamp)]",children:t.description}),p.jsx("div",{className:"flex items-center gap-3 mt-2",children:t.dueDate&&p.jsxs("span",{className:Ce("text-xs flex items-center gap-1",s?"text-gray-400":xI(t.dueDate)),children:[" ",_I(t.dueDate)]})})]}),p.jsx("div",{className:Ce("flex items-center gap-1 transition-opacity",o?"opacity-100":"opacity-30 group-hover:opacity-100"),children:p.jsx("button",{onClick:d,className:Ce("p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",o?"text-yellow-500":"text-gray-400"),title:o?"":"",children:p.jsx("svg",{className:"w-4 h-4",fill:o?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})})]})},(t,e)=>{const n=s=>s?s instanceof Date?s.getTime():typeof s.toDate=="function"?s.toDate().getTime():typeof s.getTime=="function"?s.getTime():null:null,r=(s,o)=>{const l=n(s),u=n(o);return l===u};return t.task.id===e.task.id&&t.task.status===e.task.status&&t.task.title===e.task.title&&t.task.description===e.task.description&&t.task.isImportant===e.task.isImportant&&r(t.task.dueDate,e.task.dueDate)}),r9=({tasks:t,timeBlockId:e})=>{const{t:n}=mt(),{timeBlocks:r}=Cd(),s=t.reduce((_,x)=>{const E=x.duration,C=typeof E=="number"?E:Number(E);return _+(isNaN(C)?0:C)},0),o=_=>(_/60).toFixed(2)+"h",l=e?r.find(_=>_.id===e):null;if(l&&l.start&&l.end){const _=EI(l.start,l.end);if(_<=0)return null;const x=(_/60).toFixed(2),E=(s/60).toFixed(2),C=s/_*100,I=Math.min(C,100),R=_-s,U=R<0,F=(Math.abs(R)/60).toFixed(2),M=C>100;return p.jsxs("div",{className:"glass-card flex items-center gap-4 py-3 px-4 my-2",children:[p.jsx("div",{className:"flex-shrink-0 w-24 truncate text-xs font-bold text-gray-500 dark:text-gray-400",title:l.name,children:l.name}),p.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 dark:text-gray-400 tabular-nums",children:[p.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300 w-[4.5ch] text-right inline-block",children:[E,"h"]}),p.jsx("span",{className:"text-gray-400 mx-0.5",children:"/"}),p.jsxs("span",{className:"w-[4.5ch] inline-block",children:[x,"h"]})]}),p.jsx("div",{className:"flex-1 relative h-3 bg-gray-200 dark:bg-gray-700/50 rounded-full overflow-hidden min-w-[100px]",children:p.jsx("div",{className:Ce("h-full rounded-full transition-all duration-500 ease-out shadow-sm",M?"bg-red-500":"bg-gradient-to-r from-blue-500 to-indigo-600"),style:{width:M?"100%":`${I}%`}})}),p.jsxs("div",{className:"flex-shrink-0 flex items-center justify-end gap-3 min-w-[140px]",children:[p.jsxs("div",{className:Ce("text-lg font-bold tabular-nums text-right w-[3.5ch]",M?"text-red-500":"text-blue-500"),children:[Math.round(C),p.jsx("span",{className:"text-xs font-normal opacity-70",children:"%"})]}),p.jsxs("div",{className:Ce("text-xs whitespace-nowrap text-right w-[100px]",U?"text-red-500":"text-green-500"),children:["(",n(U?"task_stats.over":"task_stats.remaining")," ",F,"h)"]})]})]})}const u=t.length,d=u>0?s/u:0,m=n("task_stats.count_unit"),y=n("task_stats.avg_unit");return p.jsxs("div",{className:"glass-card flex items-center justify-evenly py-3 px-4 my-2",children:[p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:n("task_stats.count_label")}),p.jsxs("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:[u,m&&p.jsx("span",{className:"text-xs font-normal ml-0.5 text-gray-400",children:m})]})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:n("task_stats.total_label")}),p.jsx("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200 text-blue-600 dark:text-blue-400",children:o(s)})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:n("task_stats.avg_label")}),p.jsxs("span",{className:"font-medium text-sm",children:[o(d),p.jsx("span",{className:"text-xs ml-0.5",children:y})]})]})]})},s9=({task:t,className:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:o,transition:l,isDragging:u}=lv({id:t.id||""}),d={transform:Ws.Transform.toString(o),transition:l,zIndex:u?50:"auto",position:"relative"};return p.jsx("div",{ref:s,style:d,className:"touch-manipulation",children:p.jsx(jI,{task:t,className:Ce(e,u&&"opacity-80 shadow-lg border-blue-400 bg-blue-50/50"),dragHandleProps:{...n,...r}})})},DI=()=>{const{t}=mt(),{tasks:e,loading:n}=Nd(),{filterType:r,targetId:s,query:o,showCompleted:l,sortCriteria:u,setShowCompleted:d,setSortCriteria:m}=Gr(),{density:y}=Ar(),{openModal:_}=vn(),x=O.useMemo(()=>o&&o.trim().length>0?{keyword:o,showCompleted:l,projectId:null,labelId:null,timeBlockId:null,duration:null,filterType:"all_tasks",savedFilter:null,sortCriteria:u}:{keyword:o,showCompleted:l,projectId:r==="inbox"?"unassigned":r==="project"?s:null,labelId:r==="label"?s:null,timeBlockId:r==="timeblock"?s:null,duration:r==="duration"?s:null,filterType:r,savedFilter:null,sortCriteria:u},[r,s,o,l,u]),E=O.useMemo(()=>PI(e,x),[e,x]),C={compact:"space-y-1",normal:"space-y-2",comfortable:"space-y-3",spacious:"space-y-4"}[y],I=np(Ao(yc,{activationConstraint:{distance:8}}),Ao(ud,{coordinateGetter:cv})),R=async q=>{const{active:Z,over:G}=q;if(!G||Z.id===G.id)return;const A=E.findIndex(N=>N.id===Z.id),k=E.findIndex(N=>N.id===G.id);if(A!==-1&&k!==-1){const P=jc(E,A,k).map(D=>D.id).filter(Boolean);await Bz(P)}},U=!!(o&&o.trim().length>0);if(n&&!U&&e.length===0)return p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("div",{className:"text-gray-400 text-sm animate-pulse",children:t("task_list.loading")})});const M=u==="manual";return p.jsxs("div",{className:"flex flex-col h-full overflow-hidden relative",children:[p.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-1 pb-24",children:[p.jsxs("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm pt-2 pb-4 mb-4 flex items-center gap-2",children:[p.jsx("div",{className:"flex-1",children:U?p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t("task_list.searching_results",{query:o||""})]}):p.jsx(n9,{initialValue:""})}),p.jsx("div",{className:"flex items-center gap-2 px-1",children:p.jsxs("select",{value:u,onChange:q=>m(q.target.value),className:"text-xs bg-transparent border-none outline-none text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer font-medium",children:[p.jsx("option",{value:"manual",children:t("task_list.sort_manual")}),p.jsx("option",{value:"createdAt_desc",children:t("task_list.sort_created")}),p.jsx("option",{value:"dueDate_asc",children:t("task_list.sort_due")}),p.jsx("option",{value:"important_desc",children:t("task_list.sort_important")}),p.jsx("option",{value:"title_asc",children:t("task_list.sort_title")})]})}),p.jsx("button",{onClick:()=>d(!l),className:Ce("px-3 py-2 rounded-lg text-xs font-medium border transition-colors shrink-0",l?"bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-300":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"),title:t(l?"task_list.hide_completed":"task_list.show_completed"),children:t(l?"task_list.hide_completed":"task_list.show_completed")})]}),E.length===0?p.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center min-h-[60vh]",children:[p.jsxs("div",{className:"relative mb-8",children:[p.jsx("div",{className:"absolute -inset-4 bg-blue-500/10 dark:bg-blue-400/10 blur-3xl rounded-full"}),p.jsx("div",{className:"relative",children:p.jsx("svg",{className:"w-24 h-24 text-blue-200 dark:text-blue-900/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})})]}),p.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:t("task_list.no_tasks_title")}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs mb-8",children:t(l?"task_list.no_tasks_desc_showing":"task_list.no_tasks_desc_hiding")}),p.jsxs("button",{onClick:()=>_("task-detail",{title:""}),className:"btn-premium flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),t("task_list.add_new_task")]})]}):M?p.jsx(ap,{sensors:I,collisionDetection:rp,onDragEnd:R,children:p.jsx(Lp,{items:E.map(q=>q.id||""),strategy:Op,children:p.jsx("div",{className:Ce("transition-all duration-200",C),children:E.map(q=>p.jsx(s9,{task:q},q.id))})})}):p.jsx("ul",{className:Ce("transition-all duration-200",C),children:E.map(q=>p.jsx(jI,{task:q},q.id))})]}),p.jsx("div",{className:"flex-none mt-auto pt-2 border-t border-gray-100 dark:border-gray-800 bg-white/50 dark:bg-gray-900/50 backdrop-blur pb-[calc(0.5rem+env(safe-area-inset-bottom))]",children:p.jsx(r9,{tasks:E,timeBlockId:x.timeBlockId})})]})},i9=()=>{const{t}=mt(),{query:e,setSearchQuery:n,setFilter:r}=Gr(),{setView:s}=jo(),[o,l]=O.useState(e),u=O.useRef(null);O.useEffect(()=>{var _;(_=u.current)==null||_.focus()},[]),O.useEffect(()=>{e!==o&&l(e)},[e]),O.useEffect(()=>{const _=setTimeout(()=>{o!==e&&n(o)},150);return()=>{clearTimeout(_)}},[o,e,n]);const d=_=>{l(_.target.value)},m=()=>{var _;l(""),n(""),(_=u.current)==null||_.focus()},y=()=>{n(""),r("inbox"),s("tasks")};return p.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-50 via-white to-blue-50/30 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:[p.jsxs("div",{className:"relative p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800",children:[p.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full blur-3xl -z-0"}),p.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all hover:scale-105 active:scale-95","aria-label":t("close"),children:p.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),p.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("sidebar.search_placeholder")})]}),p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-2xl blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"}),p.jsx("div",{className:"relative bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 rounded-2xl shadow-lg shadow-gray-200/50 dark:shadow-black/20 overflow-hidden",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"pl-4 text-gray-400",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),p.jsx("input",{ref:u,id:"search-input",name:"search",type:"text",value:o,onChange:d,placeholder:t("sidebar.search_placeholder"),className:"w-full bg-transparent py-4 px-3 text-base text-gray-800 dark:text-gray-100 placeholder-gray-400 outline-none"}),o&&p.jsx("button",{type:"button",onClick:m,className:"p-2 mr-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":t("clear"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})]}),!o&&p.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[p.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 font-mono",children:"/"}),p.jsx("span",{children:""})]}),o&&p.jsxs("p",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),"",o,""]})]})]}),p.jsx("div",{className:"flex-1 overflow-hidden",children:o?p.jsx(DI,{}):p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 dark:text-gray-500 p-8",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-full blur-2xl"}),p.jsx("div",{className:"relative w-24 h-24 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center mb-6",children:p.jsx("svg",{className:"w-12 h-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),p.jsx("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-300 mb-2",children:""}),p.jsxs("p",{className:"text-sm text-center max-w-xs opacity-75",children:["",p.jsx("br",{}),""]})]})})]})},o9=()=>{const{workspaceId:t,userId:e,loading:n}=Nr(),r=O.useCallback(d=>!t||!e?()=>{}:Pz(t,d),[t,e]),s=t?Rz(t):!1,{data:o,isPending:l}=Ha(["targets",e||void 0,t||void 0],r,t&&s?Nz(t):void 0);return{targets:o||[],loading:n||!!t&&l}},a9=Me.memo(({kgi:t,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:s})=>{const{language:o}=Ar(),{t:l}=Cc(o),u={good:"text-emerald-500",warning:"text-amber-500",danger:"text-red-500"},d={good:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-red-500"},m=u[t.status]||"text-gray-500",y=d[t.status]||"bg-gray-500",_=[{id:"backward",label:l("backward_map"),icon:""},{id:"woop",label:l("woop_board"),icon:""},{id:"okr",label:l("okr_tree"),icon:""}];return p.jsx("div",{className:`mb-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg transition-all duration-300 mx-4 mt-4 ${r?"py-2":"py-4"}`,children:p.jsxs("div",{className:"px-6 flex items-center justify-between gap-6",children:[p.jsx("div",{className:"flex-1 min-w-0",children:p.jsx("h1",{className:`font-bold text-gray-900 dark:text-white truncate transition-all duration-300 ${r?"text-sm opacity-50":"text-base"}`,children:t.title})}),p.jsx("div",{className:"flex-1 max-w-md hidden sm:block",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex-1",children:p.jsx("div",{className:"h-3 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:p.jsx("div",{style:{width:`${t.progress}%`},className:`h-full ${y} transition-all duration-1000 ease-out rounded-full`})})}),p.jsxs("span",{className:`font-black ${m} tabular-nums text-sm whitespace-nowrap`,children:[t.progress,"%"]})]})}),p.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0",children:[p.jsxs("div",{className:"text-center hidden sm:block",children:[p.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),p.jsxs("div",{className:`font-black ${m} tabular-nums`,children:[t.daysLeft,p.jsx("span",{className:"text-xs font-medium ml-0.5 text-gray-400",children:""})]})]}),p.jsx("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-900/50 p-1 rounded-lg",children:_.map(x=>p.jsxs("button",{onClick:()=>n(x.id),className:`group px-3 py-1.5 rounded-md text-xs font-bold transition-all flex flex-col sm:flex-row items-center gap-1 sm:gap-2 ${e===x.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,title:x.label,children:[p.jsx("span",{className:"text-sm sm:text-base leading-none",children:x.icon}),p.jsx("span",{className:"text-[10px] sm:text-xs leading-none",children:x.label})]},x.id))}),p.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:r?"Expand Header":"Collapse Header",children:p.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform duration-300 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})})})]})]})})}),l9=Me.memo(({data:t})=>!t||!t.milestones?p.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):p.jsxs("div",{className:"max-w-4xl mx-auto relative pb-10",children:[p.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 -translate-x-1/2"}),t.milestones.map((e,n)=>{const r=e.type==="goal",s=e.type==="current",o=e.completed;let l,u="";return r?(l=p.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-400 text-white flex items-center justify-center text-base shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),u="bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"):s?(l=p.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 animate-pulse relative",children:"Now"}),u="border-blue-500 border-2 shadow-md"):o?(l=p.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs shadow ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),u="bg-gray-50 dark:bg-gray-800 opacity-70"):(l=p.jsx("div",{className:"w-5 h-5 rounded-full bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative"}),u="bg-white dark:bg-gray-800"),p.jsxs("div",{className:"relative flex items-center mb-4 animate-fade-in group",style:{animationDelay:`${n*50}ms`},children:[p.jsx("div",{className:"w-16 flex-shrink-0 flex justify-center items-center z-10",children:l}),p.jsx("div",{className:"flex-1 pr-4 min-w-0",children:p.jsx("div",{className:`px-3 py-3 rounded-lg border ${s&&!u.includes("border-2")?"border-2 border-blue-500":s?"":"border-gray-200 dark:border-gray-700"} ${u} shadow-sm transition-all hover:shadow-md hover:translate-x-1 cursor-pointer`,children:p.jsxs("div",{className:"flex items-center justify-between gap-3",children:[p.jsx("span",{className:`text-xs font-bold ${s?"text-blue-600":"text-gray-500"} flex-shrink-0 font-mono`,children:e.date}),p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white flex-1 truncate text-sm md:text-base",children:e.title}),r&&p.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-bold flex-shrink-0",children:"TARGET"}),s&&p.jsx("span",{className:"text-[10px] text-blue-500 font-bold flex-shrink-0",children:" NOW"})]})})})]},e.id||`milestone-${n}`)})]})),c9=Me.memo(({data:t})=>{if(!t||!t.keyResults)return p.jsx("div",{className:"p-4 text-center text-gray-500",children:""});const e=n=>n==="high"?"bg-emerald-500":n==="medium"?"bg-amber-500":"bg-red-500";return p.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border-2 border-blue-100 dark:border-blue-900 shadow-lg text-center mb-12 relative z-10 transition-transform hover:scale-[1.01]",children:[p.jsx("div",{className:"absolute top-[-15px] left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-md",children:"Objective"}),p.jsxs("h2",{className:"font-black text-2xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 leading-tight",children:['"',t.objective,'"']}),p.jsx("div",{className:"absolute bottom-[-50px] left-1/2 w-1 h-[50px] bg-gray-200 dark:bg-gray-700 z-0"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative",children:[p.jsx("div",{className:"hidden md:block absolute top-[-25px] left-[16.66%] right-[16.66%] h-1 bg-gray-200 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 rounded-t-xl z-0"}),t.keyResults.map(n=>{const r=n.target>0?Math.round(n.current/n.target*100):0,s=e(n.confidence);return p.jsxs("div",{className:"relative pt-6",children:[p.jsx("div",{className:"absolute top-[-25px] left-1/2 w-1 h-[25px] bg-gray-200 dark:bg-gray-700 md:block hidden"}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-700 transition-all group h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",children:[p.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["KR #",n.id]}),p.jsx("div",{className:`w-3 h-3 rounded-full ${s}`,title:`Confidence: ${n.confidence}`})]}),p.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-4 h-12 line-clamp-2",children:n.text}),p.jsxs("div",{className:"space-y-1 mt-auto",children:[p.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-500 dark:text-gray-400",children:[p.jsx("span",{children:n.current}),p.jsx("span",{children:n.target})]}),p.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-900 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${r}%`}})}),p.jsxs("div",{className:"text-right text-sm font-black text-blue-600 mt-1",children:[r,"%"]})]})]})]},n.id)})]})]})}),u9=Me.memo(({data:t})=>!t||!t.obstacles?p.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto animate-fade-in",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/30 dark:to-blue-900/30 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800 shadow-sm hover:shadow-md transition-shadow",children:[p.jsx("h3",{className:"text-sm font-bold text-indigo-500 uppercase mb-2",children:"Wish ()"}),p.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.wish,'"']})]}),p.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/30 dark:to-rose-900/30 p-6 rounded-2xl border border-pink-100 dark:border-pink-800 shadow-sm hover:shadow-md transition-shadow",children:[p.jsx("h3",{className:"text-sm font-bold text-pink-500 uppercase mb-2",children:"Outcome ()"}),p.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.outcome,'"']})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-2 flex items-center",children:[p.jsx("span",{className:"mr-2",children:""})," Obstacles & If-Then Plans"]}),t.obstacles.map(e=>p.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all overflow-hidden relative",children:[p.jsx("div",{className:"p-5 border-l-4 border-gray-400 bg-gray-50 dark:bg-gray-800 relative z-10 transition-transform group-hover:translate-x-1",children:p.jsxs("h4",{className:"font-bold text-gray-700 dark:text-gray-300 flex items-center",children:[p.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-xs px-2 py-1 rounded mr-3 text-gray-600 dark:text-gray-400",children:""}),e.text]})}),p.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border-t border-gray-100 dark:border-gray-700 flex items-start",children:[p.jsx("div",{className:"flex-shrink-0 mt-1",children:p.jsx("span",{className:"block w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs font-bold",children:"IF"})}),p.jsx("div",{className:"ml-3 flex-1",children:p.jsxs("p",{className:"text-emerald-800 dark:text-emerald-300 font-bold text-sm",children:[" ",e.plan]})}),p.jsxs("div",{className:"ml-2 flex flex-col items-center",children:[p.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Score"}),p.jsx("span",{className:"text-lg font-black text-emerald-500 leading-none",children:e.overcomeCount})]})]})]},e.id)),p.jsx("button",{className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl text-gray-400 hover:border-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition flex items-center justify-center font-bold text-sm",children:"+ "})]})]})),d9=()=>{var C;const{targets:t}=o9(),[e,n]=O.useState("backward"),[r,s]=O.useState(!1),o=t.filter(I=>{var R;return((R=I.mode)==null?void 0:R.toLowerCase())===e.toLowerCase()}),l=I=>({milestones:[{date:"Future",title:I.data.goal_kgi||"Undefined Goal",type:"goal",completed:!1},{date:"Milestone",title:I.data.milestone_minus_1mo||"",type:"milestone",completed:!1},{date:"Today",title:"Current Status",type:"current",completed:!0},{date:"Now",title:I.data.first_action||"",type:"action",completed:!1}]}),u=I=>({wish:I.data.wish||"",outcome:I.data.outcome||"",obstacles:[{id:1,text:I.data.obstacle||"",plan:I.data.plan||"",overcomeCount:0}]}),d=I=>({objective:I.data.objective||"",keyResults:[{id:1,text:I.data.kr_1||"KR 1",current:0,target:100,confidence:"medium"},{id:2,text:I.data.kr_2||"KR 2",current:0,target:100,confidence:"medium"},{id:3,text:I.data.kr_3||"KR 3",current:0,target:100,confidence:"medium"}]}),m=I=>I?typeof I.toDate=="function"?I.toDate().toLocaleDateString():I instanceof Date?I.toLocaleDateString():String(I):"Unknown",y=()=>o.length===0?p.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500 dark:text-gray-400",children:p.jsxs("p",{className:"mb-4",children:["No ",e.toUpperCase()," targets found."]})}):p.jsx("div",{className:"space-y-12",children:o.map(I=>p.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-12 last:border-0",children:[p.jsxs("div",{className:"mb-4 text-xs text-gray-400 flex justify-end",children:["Created: ",m(I.createdAt)]}),e==="backward"&&p.jsx(l9,{data:l(I)}),e==="woop"&&p.jsx(u9,{data:u(I)}),e==="okr"&&p.jsx(c9,{data:d(I)})]},I.id))}),_=o[0],E={title:((I,R)=>I?R==="backward"?I.data.goal_kgi||"KGI":R==="woop"?I.data.wish||"WISH":R==="okr"?I.data.objective||"Objective":"":"")(_,e),progress:Number(((C=_==null?void 0:_.data)==null?void 0:C.progress)||0),daysLeft:0,status:"good"};return p.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[p.jsx(a9,{kgi:E,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:()=>s(!r)}),p.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 pb-6 pt-4",children:y()})]})},h9=[{id:"okr",title:"OKR (Objectives and Key Results)",subTitle:"",color:"blue",icon:"",concept:{summary:"ObjectiveKey Results",detail:"GoogleIntel60-70%"},useCases:[{title:"",before:"",after:"O:Rust KR:Rust13"},{title:"",before:"",after:"O:MVP KR:310030%"}],tips:[{q:"",a:"OKR60%Win"},{q:"KR",a:"50%100%70%NG"}]},{id:"woop",title:"WOOP (Wish, Outcome, Obstacle, Plan)",subTitle:"",color:"amber",icon:"",concept:{summary:"",detail:"If-ThenXY"},useCases:[{title:"",before:"",after:"W:30 O: Obs: Plan:"},{title:"",before:"",after:"Obs: Plan:"}],tips:[{q:"Obstacle",a:""},{q:"Plan",a:"5"}]},{id:"backward",title:"Backward Design ()",subTitle:"",color:"purple",icon:"",concept:{summary:"",detail:"ForecastingBackcasting"},useCases:[{title:"",before:"",after:"Goal: 1: 3:LP :"},{title:"",before:"",after:"Goal:3 2:20 1: :"}],tips:[{q:"",a:"KGI1OK"},{q:"",a:""}]}],f9=Me.memo(({framework:t,onClick:e})=>p.jsxs("div",{className:"framework-card cursor-pointer bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-6 transition-all duration-300 hover:border-blue-500 hover:shadow-lg hover:scale-105 group",onClick:()=>e(t),role:"button",tabIndex:0,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&e(t)},children:[p.jsx("div",{className:"text-4xl mb-3 transform transition-transform group-hover:scale-110 duration-300",children:t.icon}),p.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:t.title}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 h-10",children:t.concept.summary}),p.jsxs("div",{className:"mt-4 flex items-center text-xs text-blue-600 dark:text-blue-400 font-medium opacity-80 group-hover:opacity-100 transition-opacity",children:[p.jsx("span",{children:""}),p.jsx("svg",{className:"w-4 h-4 ml-1 transform transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})),p9=()=>{const{openModal:t}=vn();return p.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-900 overflow-y-auto custom-scrollbar",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 animate-fade-in",children:[p.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-8 flex items-center",children:[p.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500 mr-3",children:p.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),p.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-gray-300",children:" Wiki"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h9.map(e=>p.jsx(f9,{framework:e,onClick:n=>t("wiki-framework",n)},e.id))})]})})},Wl={backward:{id:"backward",label:"Backward Design",description:"",steps:[{title:"Goal / KGI",description:"KGI",inputs:[{type:"textarea",placeholder:"20253311",key:"goal_kgi"}]},{title:"Milestone",description:"1",inputs:[{type:"textarea",placeholder:"100",key:"milestone_minus_1mo"}]},{title:"First Action",description:"",inputs:[{type:"textarea",placeholder:"",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"",steps:[{title:"Wish ()",description:"",inputs:[{type:"textarea",placeholder:"30",key:"wish"}]},{title:"Outcome ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"outcome"}]},{title:"Obstacle ()",description:"",inputs:[{type:"textarea",placeholder:"SNS",key:"obstacle"}]},{title:"Plan ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"(O)(KR)",steps:[{title:"Objective",description:"1",inputs:[{type:"textarea",placeholder:"",key:"objective"}]},{title:"Key Results",description:"3",inputs:[{type:"text",placeholder:"KR 1 (: GitHub 1,000)",key:"kr_1"},{type:"text",placeholder:"KR 2 (:  500)",key:"kr_2"},{type:"text",placeholder:"KR 3 (:  40%)",key:"kr_3"}]}]}},m9=({mode:t,currentStep:e})=>{const n=Wl[t],r=n.steps.length;return p.jsx("div",{className:"flex items-center justify-between mb-8 max-w-2xl mx-auto",children:p.jsx("div",{className:"flex items-center space-x-1 mx-auto w-full justify-center",children:n.steps.map((s,o)=>{const l=o+1,u=e>l,d=e===l,m=e<l;return p.jsxs(Me.Fragment,{children:[p.jsxs("div",{className:"flex flex-col items-center relative z-10 w-16",children:[p.jsx("div",{className:Ce("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold",d&&"bg-blue-600 text-white ring-4 ring-blue-100 dark:ring-blue-900",u&&"bg-green-500 text-white",m&&"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:u?"":l}),p.jsx("div",{className:Ce("text-[10px] mt-1 font-medium text-center w-20 truncate",d?"text-blue-600 dark:text-blue-400":"text-gray-400"),children:s.title})]}),o<r-1&&p.jsx("div",{className:Ce("h-1 flex-1 mx-[-10px] mt-[-14px] z-0 transition-all duration-500 rounded-full",e>l?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},o)})})})},g9=({mode:t,step:e,onBack:n,onNext:r,onFinish:s})=>{const o=Wl[t],l=e-1,u=o.steps[l],d=o.steps.length,[m,y]=O.useState({}),_=(E,C)=>{y(I=>({...I,[E]:C}))},x=()=>{const E=u.inputs.reduce((C,I,R)=>{const U=m[R]||"";return I.key&&(C[I.key]=U),C},{});e<d?r(E):s(E)};return p.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[p.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:[o.label," Mode"]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-8 min-h-[500px] flex flex-col",children:[p.jsx(m9,{mode:t,currentStep:e}),p.jsxs("div",{className:"flex-1 animate-fade-in",children:[p.jsxs("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-100",children:["Q",e,". ",u.title]}),p.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:u.description}),p.jsx("div",{className:"mb-8 space-y-4",children:u.inputs.map((E,C)=>p.jsx("div",{children:E.type==="textarea"?p.jsx("textarea",{className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",rows:5,placeholder:E.placeholder,value:m[C]||"",onChange:I=>_(C,I.target.value)}):p.jsx("input",{type:"text",className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",placeholder:E.placeholder,value:m[C]||"",onChange:I=>_(C,I.target.value)})},E.key||C))})]}),p.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[p.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition font-medium",children:""}),e<d?p.jsxs("button",{onClick:x,className:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-md transition font-medium flex items-center",children:["",p.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]}):p.jsxs("button",{onClick:x,className:"px-8 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 shadow-lg transition font-medium flex items-center transform hover:scale-105",children:[p.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),""]})]})]})]})},y9=({currentMode:t,onModeChange:e,onStart:n})=>{const r=Wl[t],s={okr:["","",""],woop:["","",""],backward:["","",""]};return p.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-full max-h-[700px] flex flex-col py-6",children:[p.jsx("div",{className:"mb-4 flex-shrink-0",children:p.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[p.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),p.jsx("span",{className:"font-medium",children:""}),p.jsx("svg",{className:"w-3 h-3 mx-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),p.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:""})]})}),p.jsxs("div",{className:"mb-6 flex-shrink-0",children:[p.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:""}),p.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:Object.keys(Wl).map(o=>p.jsx("button",{onClick:()=>e(o),className:Ce("flex-1 py-2 text-xs font-bold rounded-lg transition-all",t===o?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:Wl[o].label},o))})]}),p.jsx("div",{className:"flex-1 mb-6 min-h-0",children:p.jsx("div",{className:"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden shadow-xl",children:p.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[p.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mb-4 shadow-lg flex-shrink-0",children:p.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 text-xl",children:r.label}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-2xl leading-relaxed",children:r.description}),p.jsx("div",{className:"mt-6 flex flex-wrap gap-2 justify-center",children:(s[t]||[]).map(o=>p.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300 shadow-sm",children:o},o))})]})})}),p.jsx("div",{className:"flex justify-center pb-4 flex-shrink-0",children:p.jsxs("button",{onClick:n,className:"group inline-flex items-center px-6 py-3 border-2 border-transparent shadow-xl font-bold rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition-all transform hover:scale-105 active:scale-95",children:[p.jsx("span",{children:""}),p.jsx("svg",{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},v9=()=>{const[t,e]=O.useState("backward"),[n,r]=O.useState(0),[s,o]=O.useState({}),{setView:l,viewData:u}=jo(),{workspaceId:d}=Nr();O.useEffect(()=>{u!=null&&u.mode&&(e(u.mode),r(0))},[u]);const m=x=>{o(E=>({...E,...x})),r(E=>E+1)},y=async x=>{const E={...s,...x};if(!d){alert("");return}try{await jz(d,{mode:t,data:E}),console.log("Wizard Completed, Saved to Firestore",E),alert(`${Wl[t].label}`),r(0),o({}),l("target-dashboard")}catch(C){console.error("Failed to save wizard target:",C),alert("")}},_=()=>{r(x=>Math.max(0,x-1))};return n===0?p.jsx(y9,{currentMode:t,onModeChange:e,onStart:()=>r(1)}):p.jsx(g9,{mode:t,step:n,onBack:_,onNext:m,onFinish:y})},_9=(t,e)=>{const n=np(Ao(yc,{activationConstraint:{distance:5}}),Ao(Fk,{activationConstraint:{delay:Pt.DND.TOUCH_DELAY,tolerance:5}})),{language:r}=Ar(),{t:s}=Cc(r),o=O.useRef(t),l=O.useCallback(()=>{o.current=t},[t]),u=O.useCallback(async d=>{var I,R,U,F;const{active:m,over:y}=d;if(!y)return;const _=String(m.id),x=String(y.id),C=(M=>M.startsWith(Pt.DND.PREFIX_TASK)?M.split(":")[1]:null)(_);if(C){const M=(I=y.data.current)==null?void 0:I.type,q=(R=y.data.current)==null?void 0:R.value,Z={};if(M===Pt.DND.TYPE_PROJECT&&(Z.projectId=q),M===Pt.DND.TYPE_INBOX&&(Z.projectId=null),M===Pt.DND.TYPE_TIMEBLOCK&&(Z.timeBlockId=q==="unassigned"?null:q),Object.keys(Z).length>0)try{await av(C,Z)}catch(G){console.error("Failed to update task via dnd",G),ut.error(s("msg.dnd.reorderFailed")||s("error"))}}if(_!==x&&!C){const M=o.current,q=M.findIndex(G=>G.id===_),Z=M.findIndex(G=>G.id===x);if(q!==-1&&Z!==-1){const G=jc(M,q,Z);(U=e==null?void 0:e.onOptimisticReorder)==null||U.call(e,G);try{await VF(G)}catch(A){console.error("Failed to update project order",A),ut.error(s("msg.dnd.reorderFailed")||s("error")),(F=e==null?void 0:e.onRevertReorder)==null||F.call(e,M)}}}},[t,e,s]);return{sensors:n,handleDragEnd:u,handleDragStart:l}},w9=()=>{const{workspaceId:t,userId:e,loading:n}=Nr(),r=O.useCallback(d=>!t||!e?()=>{}:yz(t,d),[t,e]),s=t?gz(t):!1,{data:o,isPending:l}=Ha(["labels",e||void 0,t||void 0],r,t&&s?mz(t):void 0);return{labels:o||[],loading:n||!!t&&l}},b9=()=>{const{fontEn:t,fontJp:e,fontSize:n,density:r,themeMode:s}=Ar(),{setSidebarDensity:o}=H0();O.useLayoutEffect(()=>{const l=document.documentElement,u=document.body;s==="dark"?l.classList.add("dark"):s==="light"?l.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?l.classList.add("dark"):l.classList.remove("dark"),l.style.setProperty("--font-en",`"${t}"`),l.style.setProperty("--font-jp",`"${e}"`);const d=["font-app-sm","font-app-base","font-app-md","font-app-lg","font-app-xl"];u.classList.remove(...d),u.classList.add(`font-app-${n}`);const m=["app-density-compact","app-density-normal","app-density-comfortable","app-density-spacious"];u.classList.remove(...m),u.classList.add(`app-density-${r}`),o(r);const y=window.matchMedia("(prefers-color-scheme: dark)"),_=()=>{s==="system"&&(y.matches?l.classList.add("dark"):l.classList.remove("dark"))};return y.addEventListener("change",_),()=>y.removeEventListener("change",_)},[s,t,e,n,r,o])},x9=()=>{b9();const{filterType:t,targetId:e,query:n}=Gr(),{currentView:r,setView:s}=jo(),{setFilter:o}=Gr(),{projects:l,setProjectsOverride:u}=jp(),{labels:d}=w9(),[m,y]=Me.useState({user:He.currentUser,loading:!He.currentUser}),_=O.useCallback(R=>{const U=R.target,F=["INPUT","TEXTAREA"].includes(U.tagName)||U.closest("[contenteditable]"),M=document.querySelector('[role="dialog"]');R.key==="/"&&!F&&!M&&(R.preventDefault(),o("search"),s("search"))},[o,s]);Me.useEffect(()=>{const R=n0(He,U=>{y({user:U,loading:!1})});return document.addEventListener("keydown",_),()=>{R(),document.removeEventListener("keydown",_)}},[_]);const{sensors:x,handleDragEnd:E,handleDragStart:C}=_9(l,{onOptimisticReorder:u,onRevertReorder:u}),I=O.useMemo(()=>{var R,U;if(r==="wizard")return"Goal Wizard";if(r==="target-dashboard")return"Target Dashboard";if(r==="wiki")return"Framework Wiki";if(r==="search")return n?`"${n}" `:"";if(t==="project")return((R=l.find(F=>F.id===e))==null?void 0:R.name)||"Project";if(t==="label")return((U=d.find(F=>F.id===e))==null?void 0:U.name)||"Label";if(t==="search")return n?`"${n}" `:"";switch(t){case"inbox":return"Inbox";case"today":return"Today";case"upcoming":return"Upcoming";case"important":return"Important";case"custom":return"All Tasks";default:return"TaskMg"}},[r,n,t,e,l,d]);return m.loading?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"..."})]})}):m.user?p.jsxs(ap,{sensors:x,collisionDetection:rp,onDragEnd:E,onDragStart:C,children:[p.jsx(GO,{}),p.jsx(A6,{}),p.jsx(_F,{sidebarContent:p.jsx(e9,{}),title:I,children:r==="wizard"?p.jsx(v9,{}):r==="target-dashboard"?p.jsx(d9,{}):r==="wiki"?p.jsx(p9,{}):r==="search"?p.jsx(i9,{}):p.jsx(DI,{})})]}):p.jsx(X4,{})},k9=new pC({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1,retry:!1}}});fF();const OI=document.getElementById("app");if(!OI)throw new Error("Failed to find the root element");const E9=p.jsx(b6,{children:p.jsx(mC,{client:k9,children:p.jsx(x9,{})})});jC.createRoot(OI).render(E9);
