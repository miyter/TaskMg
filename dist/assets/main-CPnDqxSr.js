var h_=t=>{throw TypeError(t)};var xp=(t,e,n)=>e.has(t)||h_("Cannot "+n);var X=(t,e,n)=>(xp(t,e,"read from private field"),n?n.call(t):e.get(t)),We=(t,e,n)=>e.has(t)?h_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ne=(t,e,n,r)=>(xp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),En=(t,e,n)=>(xp(t,e,"access private method"),n);var md=(t,e,n,r)=>({set _(i){Ne(t,e,i,n)},get _(){return X(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Zw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ap={exports:{}},tu={},Cp={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function qk(){if(f_)return $e;f_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function I(z){return z===null||typeof z!="object"?null:(z=w&&z[w]||z["@@iterator"],typeof z=="function"?z:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,P={};function N(z,Z,de){this.props=z,this.context=Z,this.refs=P,this.updater=de||S}N.prototype.isReactComponent={},N.prototype.setState=function(z,Z){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Z,"setState")},N.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function q(){}q.prototype=N.prototype;function U(z,Z,de){this.props=z,this.context=Z,this.refs=P,this.updater=de||S}var H=U.prototype=new q;H.constructor=U,V(H,N.prototype),H.isPureReactComponent=!0;var J=Array.isArray,Y=Object.prototype.hasOwnProperty,te={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(z,Z,de){var Ee,Re={},Ce=null,Ie=null;if(Z!=null)for(Ee in Z.ref!==void 0&&(Ie=Z.ref),Z.key!==void 0&&(Ce=""+Z.key),Z)Y.call(Z,Ee)&&!C.hasOwnProperty(Ee)&&(Re[Ee]=Z[Ee]);var Ve=arguments.length-2;if(Ve===1)Re.children=de;else if(1<Ve){for(var je=Array(Ve),Se=0;Se<Ve;Se++)je[Se]=arguments[Se+2];Re.children=je}if(z&&z.defaultProps)for(Ee in Ve=z.defaultProps,Ve)Re[Ee]===void 0&&(Re[Ee]=Ve[Ee]);return{$$typeof:t,type:z,key:Ce,ref:Ie,props:Re,_owner:te.current}}function x(z,Z){return{$$typeof:t,type:z.type,key:Z,ref:z.ref,props:z.props,_owner:z._owner}}function O(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function D(z){var Z={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(de){return Z[de]})}var L=/\/+/g;function R(z,Z){return typeof z=="object"&&z!==null&&z.key!=null?D(""+z.key):Z.toString(36)}function Ue(z,Z,de,Ee,Re){var Ce=typeof z;(Ce==="undefined"||Ce==="boolean")&&(z=null);var Ie=!1;if(z===null)Ie=!0;else switch(Ce){case"string":case"number":Ie=!0;break;case"object":switch(z.$$typeof){case t:case e:Ie=!0}}if(Ie)return Ie=z,Re=Re(Ie),z=Ee===""?"."+R(Ie,0):Ee,J(Re)?(de="",z!=null&&(de=z.replace(L,"$&/")+"/"),Ue(Re,Z,de,"",function(Se){return Se})):Re!=null&&(O(Re)&&(Re=x(Re,de+(!Re.key||Ie&&Ie.key===Re.key?"":(""+Re.key).replace(L,"$&/")+"/")+z)),Z.push(Re)),1;if(Ie=0,Ee=Ee===""?".":Ee+":",J(z))for(var Ve=0;Ve<z.length;Ve++){Ce=z[Ve];var je=Ee+R(Ce,Ve);Ie+=Ue(Ce,Z,de,je,Re)}else if(je=I(z),typeof je=="function")for(z=je.call(z),Ve=0;!(Ce=z.next()).done;)Ce=Ce.value,je=Ee+R(Ce,Ve++),Ie+=Ue(Ce,Z,de,je,Re);else if(Ce==="object")throw Z=String(z),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Ie}function et(z,Z,de){if(z==null)return z;var Ee=[],Re=0;return Ue(z,Ee,"","",function(Ce){return Z.call(de,Ce,Re++)}),Ee}function Ze(z){if(z._status===-1){var Z=z._result;Z=Z(),Z.then(function(de){(z._status===0||z._status===-1)&&(z._status=1,z._result=de)},function(de){(z._status===0||z._status===-1)&&(z._status=2,z._result=de)}),z._status===-1&&(z._status=0,z._result=Z)}if(z._status===1)return z._result.default;throw z._result}var re={current:null},G={transition:null},he={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:G,ReactCurrentOwner:te};function ue(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:et,forEach:function(z,Z,de){et(z,function(){Z.apply(this,arguments)},de)},count:function(z){var Z=0;return et(z,function(){Z++}),Z},toArray:function(z){return et(z,function(Z){return Z})||[]},only:function(z){if(!O(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},$e.Component=N,$e.Fragment=n,$e.Profiler=i,$e.PureComponent=U,$e.StrictMode=r,$e.Suspense=f,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,$e.act=ue,$e.cloneElement=function(z,Z,de){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Ee=V({},z.props),Re=z.key,Ce=z.ref,Ie=z._owner;if(Z!=null){if(Z.ref!==void 0&&(Ce=Z.ref,Ie=te.current),Z.key!==void 0&&(Re=""+Z.key),z.type&&z.type.defaultProps)var Ve=z.type.defaultProps;for(je in Z)Y.call(Z,je)&&!C.hasOwnProperty(je)&&(Ee[je]=Z[je]===void 0&&Ve!==void 0?Ve[je]:Z[je])}var je=arguments.length-2;if(je===1)Ee.children=de;else if(1<je){Ve=Array(je);for(var Se=0;Se<je;Se++)Ve[Se]=arguments[Se+2];Ee.children=Ve}return{$$typeof:t,type:z.type,key:Re,ref:Ce,props:Ee,_owner:Ie}},$e.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:a,_context:z},z.Consumer=z},$e.createElement=T,$e.createFactory=function(z){var Z=T.bind(null,z);return Z.type=z,Z},$e.createRef=function(){return{current:null}},$e.forwardRef=function(z){return{$$typeof:h,render:z}},$e.isValidElement=O,$e.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:Ze}},$e.memo=function(z,Z){return{$$typeof:m,type:z,compare:Z===void 0?null:Z}},$e.startTransition=function(z){var Z=G.transition;G.transition={};try{z()}finally{G.transition=Z}},$e.unstable_act=ue,$e.useCallback=function(z,Z){return re.current.useCallback(z,Z)},$e.useContext=function(z){return re.current.useContext(z)},$e.useDebugValue=function(){},$e.useDeferredValue=function(z){return re.current.useDeferredValue(z)},$e.useEffect=function(z,Z){return re.current.useEffect(z,Z)},$e.useId=function(){return re.current.useId()},$e.useImperativeHandle=function(z,Z,de){return re.current.useImperativeHandle(z,Z,de)},$e.useInsertionEffect=function(z,Z){return re.current.useInsertionEffect(z,Z)},$e.useLayoutEffect=function(z,Z){return re.current.useLayoutEffect(z,Z)},$e.useMemo=function(z,Z){return re.current.useMemo(z,Z)},$e.useReducer=function(z,Z,de){return re.current.useReducer(z,Z,de)},$e.useRef=function(z){return re.current.useRef(z)},$e.useState=function(z){return re.current.useState(z)},$e.useSyncExternalStore=function(z,Z,de){return re.current.useSyncExternalStore(z,Z,de)},$e.useTransition=function(){return re.current.useTransition()},$e.version="18.3.1",$e}var p_;function zm(){return p_||(p_=1,Cp.exports=qk()),Cp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function Wk(){if(m_)return tu;m_=1;var t=zm(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,m){var v,w={},I=null,S=null;m!==void 0&&(I=""+m),f.key!==void 0&&(I=""+f.key),f.ref!==void 0&&(S=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(w[v]=f[v]);if(h&&h.defaultProps)for(v in f=h.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:h,key:I,ref:S,props:w,_owner:i.current}}return tu.Fragment=n,tu.jsx=u,tu.jsxs=u,tu}var g_;function Hk(){return g_||(g_=1,Ap.exports=Wk()),Ap.exports}var k=Hk(),yh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Kk={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ai,Fm,Uw,Gk=(Uw=class{constructor(){We(this,Ai,Kk);We(this,Fm,!1)}setTimeoutProvider(t){Ne(this,Ai,t)}setTimeout(t,e){return X(this,Ai).setTimeout(t,e)}clearTimeout(t){X(this,Ai).clearTimeout(t)}setInterval(t,e){return X(this,Ai).setInterval(t,e)}clearInterval(t){X(this,Ai).clearInterval(t)}},Ai=new WeakMap,Fm=new WeakMap,Uw),Yp=new Gk;function Qk(t){setTimeout(t,0)}var vh=typeof window>"u"||"Deno"in globalThis;function Ur(){}function Zk(t,e){return typeof t=="function"?t(e):t}function Jk(t){return typeof t=="number"&&t>=0&&t!==1/0}function Yk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Xp(t,e){return typeof t=="function"?t(e):t}function Xk(t,e){return typeof t=="function"?t(e):t}function y_(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:u,stale:h}=t;if(u){if(r){if(e.queryHash!==Um(u,e.options))return!1}else if(!vu(e.queryKey,u))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||i&&i!==e.state.fetchStatus||a&&!a(e))}function v_(t,e){const{exact:n,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(yu(e.options.mutationKey)!==yu(a))return!1}else if(!vu(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Um(t,e){return((e==null?void 0:e.queryKeyHashFn)||yu)(t)}function yu(t){return JSON.stringify(t,(e,n)=>em(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function vu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>vu(t[n],e[n])):!1}var eS=Object.prototype.hasOwnProperty;function Jw(t,e){if(t===e)return t;const n=__(t)&&__(e);if(!n&&!(em(t)&&em(e)))return e;const i=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),u=a.length,h=n?new Array(u):{};let f=0;for(let m=0;m<u;m++){const v=n?m:a[m],w=t[v],I=e[v];if(w===I){h[v]=w,(n?m<i:eS.call(t,v))&&f++;continue}if(w===null||I===null||typeof w!="object"||typeof I!="object"){h[v]=I;continue}const S=Jw(w,I);h[v]=S,S===w&&f++}return i===u&&f===i?t:h}function __(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function em(t){if(!w_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!w_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function w_(t){return Object.prototype.toString.call(t)==="[object Object]"}function tS(t){return new Promise(e=>{Yp.setTimeout(e,t)})}function nS(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Jw(t,e):e}function rS(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function sS(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var $m=Symbol();function Yw(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===$m?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function iS(t,e,n){let r=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),r||(r=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var Io,Ci,Wa,$w,oS=($w=class extends yh{constructor(){super();We(this,Io);We(this,Ci);We(this,Wa);Ne(this,Wa,e=>{if(!vh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){X(this,Ci)||this.setEventListener(X(this,Wa))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,Ci))==null||e.call(this),Ne(this,Ci,void 0))}setEventListener(e){var n;Ne(this,Wa,e),(n=X(this,Ci))==null||n.call(this),Ne(this,Ci,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){X(this,Io)!==e&&(Ne(this,Io,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof X(this,Io)=="boolean"?X(this,Io):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Io=new WeakMap,Ci=new WeakMap,Wa=new WeakMap,$w),Xw=new oS;function aS(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var lS=Qk;function uS(){let t=[],e=0,n=h=>{h()},r=h=>{h()},i=lS;const a=h=>{e?t.push(h):i(()=>{n(h)})},u=()=>{const h=t;t=[],h.length&&i(()=>{r(()=>{h.forEach(f=>{n(f)})})})};return{batch:h=>{let f;e++;try{f=h()}finally{e--,e||u()}return f},batchCalls:h=>(...f)=>{a(()=>{h(...f)})},schedule:a,setNotifyFunction:h=>{n=h},setBatchNotifyFunction:h=>{r=h},setScheduler:h=>{i=h}}}var Mn=uS(),Ha,Ri,Ka,Bw,cS=(Bw=class extends yh{constructor(){super();We(this,Ha,!0);We(this,Ri);We(this,Ka);Ne(this,Ka,e=>{if(!vh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){X(this,Ri)||this.setEventListener(X(this,Ka))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,Ri))==null||e.call(this),Ne(this,Ri,void 0))}setEventListener(e){var n;Ne(this,Ka,e),(n=X(this,Ri))==null||n.call(this),Ne(this,Ri,e(this.setOnline.bind(this)))}setOnline(e){X(this,Ha)!==e&&(Ne(this,Ha,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return X(this,Ha)}},Ha=new WeakMap,Ri=new WeakMap,Ka=new WeakMap,Bw),Hd=new cS;function dS(t){return Math.min(1e3*2**t,3e4)}function eE(t){return(t??"online")==="online"?Hd.isOnline():!0}var tm=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function tE(t){let e=!1,n=0,r;const i=aS(),a=()=>i.status!=="pending",u=P=>{var N;if(!a()){const q=new tm(P);I(q),(N=t.onCancel)==null||N.call(t,q)}},h=()=>{e=!0},f=()=>{e=!1},m=()=>Xw.isFocused()&&(t.networkMode==="always"||Hd.isOnline())&&t.canRun(),v=()=>eE(t.networkMode)&&t.canRun(),w=P=>{a()||(r==null||r(),i.resolve(P))},I=P=>{a()||(r==null||r(),i.reject(P))},S=()=>new Promise(P=>{var N;r=q=>{(a()||m())&&P(q)},(N=t.onPause)==null||N.call(t)}).then(()=>{var P;r=void 0,a()||(P=t.onContinue)==null||P.call(t)}),V=()=>{if(a())return;let P;const N=n===0?t.initialPromise:void 0;try{P=N??t.fn()}catch(q){P=Promise.reject(q)}Promise.resolve(P).then(w).catch(q=>{var te;if(a())return;const U=t.retry??(vh?0:3),H=t.retryDelay??dS,J=typeof H=="function"?H(n,q):H,Y=U===!0||typeof U=="number"&&n<U||typeof U=="function"&&U(n,q);if(e||!Y){I(q);return}n++,(te=t.onFail)==null||te.call(t,n,q),tS(J).then(()=>m()?void 0:S()).then(()=>{e?I(q):V()})})};return{promise:i,status:()=>i.status,cancel:u,continue:()=>(r==null||r(),i),cancelRetry:h,continueRetry:f,canStart:v,start:()=>(v()?V():S().then(V),i)}}var bo,qw,nE=(qw=class{constructor(){We(this,bo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Jk(this.gcTime)&&Ne(this,bo,Yp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(vh?1/0:300*1e3))}clearGcTimeout(){X(this,bo)&&(Yp.clearTimeout(X(this,bo)),Ne(this,bo,void 0))}},bo=new WeakMap,qw),ko,Ga,wr,So,en,Lu,xo,$r,Ds,Ww,hS=(Ww=class extends nE{constructor(n){super();We(this,$r);We(this,ko);We(this,Ga);We(this,wr);We(this,So);We(this,en);We(this,Lu);We(this,xo);Ne(this,xo,!1),Ne(this,Lu,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ne(this,So,n.client),Ne(this,wr,X(this,So).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ne(this,ko,T_(this.options)),this.state=n.state??X(this,ko),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=X(this,en))==null?void 0:n.promise}setOptions(n){if(this.options={...X(this,Lu),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=T_(this.options);r.data!==void 0&&(this.setState(E_(r.data,r.dataUpdatedAt)),Ne(this,ko,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&X(this,wr).remove(this)}setData(n,r){const i=nS(this.state.data,n,this.options);return En(this,$r,Ds).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){En(this,$r,Ds).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,a;const r=(i=X(this,en))==null?void 0:i.promise;return(a=X(this,en))==null||a.cancel(n),r?r.then(Ur).catch(Ur):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(X(this,ko))}isActive(){return this.observers.some(n=>Xk(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$m||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Xp(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Yk(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=X(this,en))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=X(this,en))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),X(this,wr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(X(this,en)&&(X(this,xo)?X(this,en).cancel({revert:!0}):X(this,en).cancelRetry()),this.scheduleGc()),X(this,wr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||En(this,$r,Ds).call(this,{type:"invalidate"})}async fetch(n,r){var m,v,w,I,S,V,P,N,q,U,H,J;if(this.state.fetchStatus!=="idle"&&((m=X(this,en))==null?void 0:m.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(X(this,en))return X(this,en).continueRetry(),X(this,en).promise}if(n&&this.setOptions(n),!this.options.queryFn){const Y=this.observers.find(te=>te.options.queryFn);Y&&this.setOptions(Y.options)}const i=new AbortController,a=Y=>{Object.defineProperty(Y,"signal",{enumerable:!0,get:()=>(Ne(this,xo,!0),i.signal)})},u=()=>{const Y=Yw(this.options,r),C=(()=>{const T={client:X(this,So),queryKey:this.queryKey,meta:this.meta};return a(T),T})();return Ne(this,xo,!1),this.options.persister?this.options.persister(Y,C,this):Y(C)},f=(()=>{const Y={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:X(this,So),state:this.state,fetchFn:u};return a(Y),Y})();(v=this.options.behavior)==null||v.onFetch(f,this),Ne(this,Ga,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((w=f.fetchOptions)==null?void 0:w.meta))&&En(this,$r,Ds).call(this,{type:"fetch",meta:(I=f.fetchOptions)==null?void 0:I.meta}),Ne(this,en,tE({initialPromise:r==null?void 0:r.initialPromise,fn:f.fetchFn,onCancel:Y=>{Y instanceof tm&&Y.revert&&this.setState({...X(this,Ga),fetchStatus:"idle"}),i.abort()},onFail:(Y,te)=>{En(this,$r,Ds).call(this,{type:"failed",failureCount:Y,error:te})},onPause:()=>{En(this,$r,Ds).call(this,{type:"pause"})},onContinue:()=>{En(this,$r,Ds).call(this,{type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0}));try{const Y=await X(this,en).start();if(Y===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(Y),(V=(S=X(this,wr).config).onSuccess)==null||V.call(S,Y,this),(N=(P=X(this,wr).config).onSettled)==null||N.call(P,Y,this.state.error,this),Y}catch(Y){if(Y instanceof tm){if(Y.silent)return X(this,en).promise;if(Y.revert){if(this.state.data===void 0)throw Y;return this.state.data}}throw En(this,$r,Ds).call(this,{type:"error",error:Y}),(U=(q=X(this,wr).config).onError)==null||U.call(q,Y,this),(J=(H=X(this,wr).config).onSettled)==null||J.call(H,this.state.data,Y,this),Y}finally{this.scheduleGc()}}},ko=new WeakMap,Ga=new WeakMap,wr=new WeakMap,So=new WeakMap,en=new WeakMap,Lu=new WeakMap,xo=new WeakMap,$r=new WeakSet,Ds=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...fS(i.data,this.options),fetchMeta:n.meta??null};case"success":const a={...i,...E_(n.data,n.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ne(this,Ga,n.manual?a:void 0),a;case"error":const u=n.error;return{...i,error:u,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),Mn.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),X(this,wr).notify({query:this,type:"updated",action:n})})},Ww);function fS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:eE(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function E_(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function T_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function I_(t){return{onFetch:(e,n)=>{var v,w,I,S,V;const r=e.options,i=(I=(w=(v=e.fetchOptions)==null?void 0:v.meta)==null?void 0:w.fetchMore)==null?void 0:I.direction,a=((S=e.state.data)==null?void 0:S.pages)||[],u=((V=e.state.data)==null?void 0:V.pageParams)||[];let h={pages:[],pageParams:[]},f=0;const m=async()=>{let P=!1;const N=H=>{iS(H,()=>e.signal,()=>P=!0)},q=Yw(e.options,e.fetchOptions),U=async(H,J,Y)=>{if(P)return Promise.reject();if(J==null&&H.pages.length)return Promise.resolve(H);const C=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:J,direction:Y?"backward":"forward",meta:e.options.meta};return N(D),D})(),T=await q(C),{maxPages:x}=e.options,O=Y?sS:rS;return{pages:O(H.pages,T,x),pageParams:O(H.pageParams,J,x)}};if(i&&a.length){const H=i==="backward",J=H?pS:b_,Y={pages:a,pageParams:u},te=J(r,Y);h=await U(Y,te,H)}else{const H=t??a.length;do{const J=f===0?u[0]??r.initialPageParam:b_(r,h);if(f>0&&J==null)break;h=await U(h,J),f++}while(f<H)}return h};e.options.persister?e.fetchFn=()=>{var P,N;return(N=(P=e.options).persister)==null?void 0:N.call(P,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=m}}}function b_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function pS(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Vu,os,On,Ao,as,Ti,Hw,mS=(Hw=class extends nE{constructor(n){super();We(this,as);We(this,Vu);We(this,os);We(this,On);We(this,Ao);Ne(this,Vu,n.client),this.mutationId=n.mutationId,Ne(this,On,n.mutationCache),Ne(this,os,[]),this.state=n.state||gS(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){X(this,os).includes(n)||(X(this,os).push(n),this.clearGcTimeout(),X(this,On).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ne(this,os,X(this,os).filter(r=>r!==n)),this.scheduleGc(),X(this,On).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){X(this,os).length||(this.state.status==="pending"?this.scheduleGc():X(this,On).remove(this))}continue(){var n;return((n=X(this,Ao))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var h,f,m,v,w,I,S,V,P,N,q,U,H,J,Y,te,C,T,x,O;const r=()=>{En(this,as,Ti).call(this,{type:"continue"})},i={client:X(this,Vu),meta:this.options.meta,mutationKey:this.options.mutationKey};Ne(this,Ao,tE({fn:()=>this.options.mutationFn?this.options.mutationFn(n,i):Promise.reject(new Error("No mutationFn found")),onFail:(D,L)=>{En(this,as,Ti).call(this,{type:"failed",failureCount:D,error:L})},onPause:()=>{En(this,as,Ti).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>X(this,On).canRun(this)}));const a=this.state.status==="pending",u=!X(this,Ao).canStart();try{if(a)r();else{En(this,as,Ti).call(this,{type:"pending",variables:n,isPaused:u}),await((f=(h=X(this,On).config).onMutate)==null?void 0:f.call(h,n,this,i));const L=await((v=(m=this.options).onMutate)==null?void 0:v.call(m,n,i));L!==this.state.context&&En(this,as,Ti).call(this,{type:"pending",context:L,variables:n,isPaused:u})}const D=await X(this,Ao).start();return await((I=(w=X(this,On).config).onSuccess)==null?void 0:I.call(w,D,n,this.state.context,this,i)),await((V=(S=this.options).onSuccess)==null?void 0:V.call(S,D,n,this.state.context,i)),await((N=(P=X(this,On).config).onSettled)==null?void 0:N.call(P,D,null,this.state.variables,this.state.context,this,i)),await((U=(q=this.options).onSettled)==null?void 0:U.call(q,D,null,n,this.state.context,i)),En(this,as,Ti).call(this,{type:"success",data:D}),D}catch(D){try{await((J=(H=X(this,On).config).onError)==null?void 0:J.call(H,D,n,this.state.context,this,i))}catch(L){Promise.reject(L)}try{await((te=(Y=this.options).onError)==null?void 0:te.call(Y,D,n,this.state.context,i))}catch(L){Promise.reject(L)}try{await((T=(C=X(this,On).config).onSettled)==null?void 0:T.call(C,void 0,D,this.state.variables,this.state.context,this,i))}catch(L){Promise.reject(L)}try{await((O=(x=this.options).onSettled)==null?void 0:O.call(x,void 0,D,n,this.state.context,i))}catch(L){Promise.reject(L)}throw En(this,as,Ti).call(this,{type:"error",error:D}),D}finally{X(this,On).runNext(this)}}},Vu=new WeakMap,os=new WeakMap,On=new WeakMap,Ao=new WeakMap,as=new WeakSet,Ti=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Mn.batch(()=>{X(this,os).forEach(i=>{i.onMutationUpdate(n)}),X(this,On).notify({mutation:this,type:"updated",action:n})})},Hw);function gS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Os,Br,ju,Kw,yS=(Kw=class extends yh{constructor(e={}){super();We(this,Os);We(this,Br);We(this,ju);this.config=e,Ne(this,Os,new Set),Ne(this,Br,new Map),Ne(this,ju,0)}build(e,n,r){const i=new mS({client:e,mutationCache:this,mutationId:++md(this,ju)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){X(this,Os).add(e);const n=gd(e);if(typeof n=="string"){const r=X(this,Br).get(n);r?r.push(e):X(this,Br).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(X(this,Os).delete(e)){const n=gd(e);if(typeof n=="string"){const r=X(this,Br).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&X(this,Br).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=gd(e);if(typeof n=="string"){const r=X(this,Br).get(n),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=gd(e);if(typeof n=="string"){const i=(r=X(this,Br).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Mn.batch(()=>{X(this,Os).forEach(e=>{this.notify({type:"removed",mutation:e})}),X(this,Os).clear(),X(this,Br).clear()})}getAll(){return Array.from(X(this,Os))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>v_(n,r))}findAll(e={}){return this.getAll().filter(n=>v_(e,n))}notify(e){Mn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Mn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ur))))}},Os=new WeakMap,Br=new WeakMap,ju=new WeakMap,Kw);function gd(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ls,Gw,vS=(Gw=class extends yh{constructor(e={}){super();We(this,ls);this.config=e,Ne(this,ls,new Map)}build(e,n,r){const i=n.queryKey,a=n.queryHash??Um(i,n);let u=this.get(a);return u||(u=new hS({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(u)),u}add(e){X(this,ls).has(e.queryHash)||(X(this,ls).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=X(this,ls).get(e.queryHash);n&&(e.destroy(),n===e&&X(this,ls).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Mn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return X(this,ls).get(e)}getAll(){return[...X(this,ls).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>y_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>y_(e,r)):n}notify(e){Mn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Mn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Mn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ls=new WeakMap,Gw),kt,Pi,Ni,Qa,Za,Di,Ja,Ya,Qw,_S=(Qw=class{constructor(t={}){We(this,kt);We(this,Pi);We(this,Ni);We(this,Qa);We(this,Za);We(this,Di);We(this,Ja);We(this,Ya);Ne(this,kt,t.queryCache||new vS),Ne(this,Pi,t.mutationCache||new yS),Ne(this,Ni,t.defaultOptions||{}),Ne(this,Qa,new Map),Ne(this,Za,new Map),Ne(this,Di,0)}mount(){md(this,Di)._++,X(this,Di)===1&&(Ne(this,Ja,Xw.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,kt).onFocus())})),Ne(this,Ya,Hd.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,kt).onOnline())})))}unmount(){var t,e;md(this,Di)._--,X(this,Di)===0&&((t=X(this,Ja))==null||t.call(this),Ne(this,Ja,void 0),(e=X(this,Ya))==null||e.call(this),Ne(this,Ya,void 0))}isFetching(t){return X(this,kt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return X(this,Pi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,kt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=X(this,kt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Xp(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return X(this,kt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=X(this,kt).get(r.queryHash),a=i==null?void 0:i.state.data,u=Zk(e,a);if(u!==void 0)return X(this,kt).build(this,r).setData(u,{...n,manual:!0})}setQueriesData(t,e,n){return Mn.batch(()=>X(this,kt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,kt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=X(this,kt);Mn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=X(this,kt);return Mn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Mn.batch(()=>X(this,kt).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Ur).catch(Ur)}invalidateQueries(t,e={}){return Mn.batch(()=>(X(this,kt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Mn.batch(()=>X(this,kt).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(Ur)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Ur)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=X(this,kt).build(this,e);return n.isStaleByTime(Xp(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ur).catch(Ur)}fetchInfiniteQuery(t){return t.behavior=I_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ur).catch(Ur)}ensureInfiniteQueryData(t){return t.behavior=I_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Hd.isOnline()?X(this,Pi).resumePausedMutations():Promise.resolve()}getQueryCache(){return X(this,kt)}getMutationCache(){return X(this,Pi)}getDefaultOptions(){return X(this,Ni)}setDefaultOptions(t){Ne(this,Ni,t)}setQueryDefaults(t,e){X(this,Qa).set(yu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...X(this,Qa).values()],n={};return e.forEach(r=>{vu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){X(this,Za).set(yu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...X(this,Za).values()],n={};return e.forEach(r=>{vu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...X(this,Ni).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Um(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===$m&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...X(this,Ni).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){X(this,kt).clear(),X(this,Pi).clear()}},kt=new WeakMap,Pi=new WeakMap,Ni=new WeakMap,Qa=new WeakMap,Za=new WeakMap,Di=new WeakMap,Ja=new WeakMap,Ya=new WeakMap,Qw),F=zm();const Gt=Zw(F);var wS=F.createContext(void 0),ES=({client:t,children:e})=>(F.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),k.jsx(wS.Provider,{value:t,children:e})),yd={},Rp={exports:{}},Kn={},Pp={exports:{}},Np={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function TS(){return k_||(k_=1,(function(t){function e(G,he){var ue=G.length;G.push(he);e:for(;0<ue;){var z=ue-1>>>1,Z=G[z];if(0<i(Z,he))G[z]=he,G[ue]=Z,ue=z;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var he=G[0],ue=G.pop();if(ue!==he){G[0]=ue;e:for(var z=0,Z=G.length,de=Z>>>1;z<de;){var Ee=2*(z+1)-1,Re=G[Ee],Ce=Ee+1,Ie=G[Ce];if(0>i(Re,ue))Ce<Z&&0>i(Ie,Re)?(G[z]=Ie,G[Ce]=ue,z=Ce):(G[z]=Re,G[Ee]=ue,z=Ee);else if(Ce<Z&&0>i(Ie,ue))G[z]=Ie,G[Ce]=ue,z=Ce;else break e}}return he}function i(G,he){var ue=G.sortIndex-he.sortIndex;return ue!==0?ue:G.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],m=[],v=1,w=null,I=3,S=!1,V=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(G){for(var he=n(m);he!==null;){if(he.callback===null)r(m);else if(he.startTime<=G)r(m),he.sortIndex=he.expirationTime,e(f,he);else break;he=n(m)}}function J(G){if(P=!1,H(G),!V)if(n(f)!==null)V=!0,Ze(Y);else{var he=n(m);he!==null&&re(J,he.startTime-G)}}function Y(G,he){V=!1,P&&(P=!1,q(T),T=-1),S=!0;var ue=I;try{for(H(he),w=n(f);w!==null&&(!(w.expirationTime>he)||G&&!D());){var z=w.callback;if(typeof z=="function"){w.callback=null,I=w.priorityLevel;var Z=z(w.expirationTime<=he);he=t.unstable_now(),typeof Z=="function"?w.callback=Z:w===n(f)&&r(f),H(he)}else r(f);w=n(f)}if(w!==null)var de=!0;else{var Ee=n(m);Ee!==null&&re(J,Ee.startTime-he),de=!1}return de}finally{w=null,I=ue,S=!1}}var te=!1,C=null,T=-1,x=5,O=-1;function D(){return!(t.unstable_now()-O<x)}function L(){if(C!==null){var G=t.unstable_now();O=G;var he=!0;try{he=C(!0,G)}finally{he?R():(te=!1,C=null)}}else te=!1}var R;if(typeof U=="function")R=function(){U(L)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,et=Ue.port2;Ue.port1.onmessage=L,R=function(){et.postMessage(null)}}else R=function(){N(L,0)};function Ze(G){C=G,te||(te=!0,R())}function re(G,he){T=N(function(){G(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){V||S||(V=!0,Ze(Y))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(G){switch(I){case 1:case 2:case 3:var he=3;break;default:he=I}var ue=I;I=he;try{return G()}finally{I=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,he){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ue=I;I=G;try{return he()}finally{I=ue}},t.unstable_scheduleCallback=function(G,he,ue){var z=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?z+ue:z):ue=z,G){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ue+Z,G={id:v++,callback:he,priorityLevel:G,startTime:ue,expirationTime:Z,sortIndex:-1},ue>z?(G.sortIndex=ue,e(m,G),n(f)===null&&G===n(m)&&(P?(q(T),T=-1):P=!0,re(J,ue-z))):(G.sortIndex=Z,e(f,G),V||S||(V=!0,Ze(Y))),G},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(G){var he=I;return function(){var ue=I;I=he;try{return G.apply(this,arguments)}finally{I=ue}}}})(Np)),Np}var S_;function IS(){return S_||(S_=1,Pp.exports=TS()),Pp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function bS(){if(x_)return Kn;x_=1;var t=zm(),e=IS();function n(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){u(s,o),u(s+"Capture",o)}function u(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function I(s){return f.call(w,s)?!0:f.call(v,s)?!1:m.test(s)?w[s]=!0:(v[s]=!0,!1)}function S(s,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function V(s,o,l,d){if(o===null||typeof o>"u"||S(s,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function P(s,o,l,d,p,y,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=s,this.type=o,this.sanitizeURL=y,this.removeEmptyString=E}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){N[s]=new P(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];N[o]=new P(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){N[s]=new P(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){N[s]=new P(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){N[s]=new P(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){N[s]=new P(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){N[s]=new P(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){N[s]=new P(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){N[s]=new P(s,5,!1,s.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function U(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(q,U);N[o]=new P(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(q,U);N[o]=new P(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(q,U);N[o]=new P(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){N[s]=new P(s,1,!1,s.toLowerCase(),null,!1,!1)}),N.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){N[s]=new P(s,1,!1,s.toLowerCase(),null,!0,!0)});function H(s,o,l,d){var p=N.hasOwnProperty(o)?N[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(V(o,l,p,d)&&(l=null),d||p===null?I(o)&&(l===null?s.removeAttribute(o):s.setAttribute(o,""+l)):p.mustUseProperty?s[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,d=p.attributeNamespace,l===null?s.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?s.setAttributeNS(d,o,l):s.setAttribute(o,l))))}var J=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),te=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),D=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),et=Symbol.for("react.memo"),Ze=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),G=Symbol.iterator;function he(s){return s===null||typeof s!="object"?null:(s=G&&s[G]||s["@@iterator"],typeof s=="function"?s:null)}var ue=Object.assign,z;function Z(s){if(z===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);z=o&&o[1]||""}return`
`+z+s}var de=!1;function Ee(s,o){if(!s||de)return"";de=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(K){var d=K}Reflect.construct(s,[],o)}else{try{o.call()}catch(K){d=K}s.call(o.prototype)}else{try{throw Error()}catch(K){d=K}s()}}catch(K){if(K&&d&&typeof K.stack=="string"){for(var p=K.stack.split(`
`),y=d.stack.split(`
`),E=p.length-1,A=y.length-1;1<=E&&0<=A&&p[E]!==y[A];)A--;for(;1<=E&&0<=A;E--,A--)if(p[E]!==y[A]){if(E!==1||A!==1)do if(E--,A--,0>A||p[E]!==y[A]){var M=`
`+p[E].replace(" at new "," at ");return s.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",s.displayName)),M}while(1<=E&&0<=A);break}}}finally{de=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?Z(s):""}function Re(s){switch(s.tag){case 5:return Z(s.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return s=Ee(s.type,!1),s;case 11:return s=Ee(s.type.render,!1),s;case 1:return s=Ee(s.type,!0),s;default:return""}}function Ce(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case te:return"Portal";case x:return"Profiler";case T:return"StrictMode";case R:return"Suspense";case Ue:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case D:return(s.displayName||"Context")+".Consumer";case O:return(s._context.displayName||"Context")+".Provider";case L:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case et:return o=s.displayName||null,o!==null?o:Ce(s.type)||"Memo";case Ze:o=s._payload,s=s._init;try{return Ce(s(o))}catch{}}return null}function Ie(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(o);case 8:return o===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ve(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function je(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Se(s){var o=je(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),d=""+s[o];if(!s.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){d=""+E,y.call(this,E)}}),Object.defineProperty(s,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Ut(s){s._valueTracker||(s._valueTracker=Se(s))}function Tt(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return s&&(d=je(s)?s.checked?"true":"false":s.value),s=d,s!==l?(o.setValue(s),!0):!1}function xn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function rn(s,o){var l=o.checked;return ue({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function Yn(s,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=Ve(o.value!=null?o.value:l),s._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function lr(s,o){o=o.checked,o!=null&&H(s,"checked",o,!1)}function Ks(s,o){lr(s,o);var l=Ve(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?Kr(s,o.type,l):o.hasOwnProperty("defaultValue")&&Kr(s,o.type,Ve(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Hi(s,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,l||o===s.value||(s.value=o),s.defaultValue=o}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function Kr(s,o,l){(o!=="number"||xn(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var Qt=Array.isArray;function Vn(s,o,l,d){if(s=s.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<s.length;l++)p=o.hasOwnProperty("$"+s[l].value),s[l].selected!==p&&(s[l].selected=p),p&&d&&(s[l].defaultSelected=!0)}else{for(l=""+Ve(l),o=null,p=0;p<s.length;p++){if(s[p].value===l){s[p].selected=!0,d&&(s[p].defaultSelected=!0);return}o!==null||s[p].disabled||(o=s[p])}o!==null&&(o.selected=!0)}}function Gr(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return ue({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function gs(s,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(n(92));if(Qt(l)){if(1<l.length)throw Error(n(93));l=l[0]}o=l}o==null&&(o=""),l=o}s._wrapperState={initialValue:Ve(l)}}function ys(s,o){var l=Ve(o.value),d=Ve(o.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),o.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),d!=null&&(s.defaultValue=""+d)}function Ki(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function St(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?St(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var mn,kr=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,p){MSApp.execUnsafeLocalFunction(function(){return s(o,l,d,p)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(mn=mn||document.createElement("div"),mn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function Sr(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var gn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qr=["Webkit","ms","Moz","O"];Object.keys(gn).forEach(function(s){Qr.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),gn[o]=gn[s]})});function Gi(s,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||gn.hasOwnProperty(s)&&gn[s]?(""+o).trim():o+"px"}function Qi(s,o){s=s.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=Gi(l,o[l],d);l==="float"&&(l="cssFloat"),d?s.setProperty(l,p):s[l]=p}}var vs=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gs(s,o){if(o){if(vs[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function Zi(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zr=null;function Qs(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Zs=null,jn=null,rt=null;function Rt(s){if(s=zl(s)){if(typeof Zs!="function")throw Error(n(280));var o=s.stateNode;o&&(o=Rc(o),Zs(s.stateNode,s.type,o))}}function ft(s){jn?rt?rt.push(s):rt=[s]:jn=s}function Fn(){if(jn){var s=jn,o=rt;if(rt=jn=null,Rt(s),o)for(s=0;s<o.length;s++)Rt(o[s])}}function Pt(s,o){return s(o)}function $t(){}var Nt=!1;function ur(s,o,l){if(Nt)return s(o,l);Nt=!0;try{return Pt(s,o,l)}finally{Nt=!1,(jn!==null||rt!==null)&&($t(),Fn())}}function Fe(s,o){var l=s.stateNode;if(l===null)return null;var d=Rc(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(n(231,o,typeof l));return l}var An=!1;if(h)try{var It={};Object.defineProperty(It,"passive",{get:function(){An=!0}}),window.addEventListener("test",It,It),window.removeEventListener("test",It,It)}catch{An=!1}function sn(s,o,l,d,p,y,E,A,M){var K=Array.prototype.slice.call(arguments,3);try{o.apply(l,K)}catch(ie){this.onError(ie)}}var Xn=!1,cr=null,Dt=!1,xr=null,Ji={onError:function(s){Xn=!0,cr=s}};function Go(s,o,l,d,p,y,E,A,M){Xn=!1,cr=null,sn.apply(Ji,arguments)}function tc(s,o,l,d,p,y,E,A,M){if(Go.apply(this,arguments),Xn){if(Xn){var K=cr;Xn=!1,cr=null}else throw Error(n(198));Dt||(Dt=!0,xr=K)}}function Ar(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function Yi(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Cr(s){if(Ar(s)!==s)throw Error(n(188))}function nc(s){var o=s.alternate;if(!o){if(o=Ar(s),o===null)throw Error(n(188));return o!==s?null:s}for(var l=s,d=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Cr(p),s;if(y===d)return Cr(p),o;y=y.sibling}throw Error(n(188))}if(l.return!==d.return)l=p,d=y;else{for(var E=!1,A=p.child;A;){if(A===l){E=!0,l=p,d=y;break}if(A===d){E=!0,d=p,l=y;break}A=A.sibling}if(!E){for(A=y.child;A;){if(A===l){E=!0,l=y,d=p;break}if(A===d){E=!0,d=y,l=p;break}A=A.sibling}if(!E)throw Error(n(189))}}if(l.alternate!==d)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?s:o}function El(s){return s=nc(s),s!==null?Qo(s):null}function Qo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Qo(s);if(o!==null)return o;s=s.sibling}return null}var Zo=e.unstable_scheduleCallback,Tl=e.unstable_cancelCallback,rc=e.unstable_shouldYield,tf=e.unstable_requestPaint,ot=e.unstable_now,sc=e.unstable_getCurrentPriorityLevel,Xi=e.unstable_ImmediatePriority,Js=e.unstable_UserBlockingPriority,dr=e.unstable_NormalPriority,Il=e.unstable_LowPriority,ic=e.unstable_IdlePriority,eo=null,er=null;function oc(s){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(eo,s,void 0,(s.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:lc,bl=Math.log,ac=Math.LN2;function lc(s){return s>>>=0,s===0?32:31-(bl(s)/ac|0)|0}var Jo=64,Yo=4194304;function Ys(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function to(s,o){var l=s.pendingLanes;if(l===0)return 0;var d=0,p=s.suspendedLanes,y=s.pingedLanes,E=l&268435455;if(E!==0){var A=E&~p;A!==0?d=Ys(A):(y&=E,y!==0&&(d=Ys(y)))}else E=l&~p,E!==0?d=Ys(E):y!==0&&(d=Ys(y));if(d===0)return 0;if(o!==0&&o!==d&&(o&p)===0&&(p=d&-d,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((d&4)!==0&&(d|=l&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)l=31-Cn(o),p=1<<l,d|=s[l],o&=~p;return d}function nf(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _s(s,o){for(var l=s.suspendedLanes,d=s.pingedLanes,p=s.expirationTimes,y=s.pendingLanes;0<y;){var E=31-Cn(y),A=1<<E,M=p[E];M===-1?((A&l)===0||(A&d)!==0)&&(p[E]=nf(A,o)):M<=o&&(s.expiredLanes|=A),y&=~A}}function tr(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function no(){var s=Jo;return Jo<<=1,(Jo&4194240)===0&&(Jo=64),s}function Xs(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function ei(s,o,l){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-Cn(o),s[o]=l}function st(s,o){var l=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<l;){var p=31-Cn(l),y=1<<p;o[p]=0,d[p]=-1,s[p]=-1,l&=~y}}function ti(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var d=31-Cn(l),p=1<<d;p&o|s[d]&o&&(s[d]|=o),l&=~p}}var qe=0;function ni(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var uc,Xo,cc,dc,hc,kl=!1,Jr=[],on=null,Rr=null,Pr=null,ri=new Map,hr=new Map,Yr=[],rf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fc(s,o){switch(s){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":ri.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":hr.delete(o.pointerId)}}function zn(s,o,l,d,p,y){return s===null||s.nativeEvent!==y?(s={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},o!==null&&(o=zl(o),o!==null&&Xo(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),s)}function sf(s,o,l,d,p){switch(o){case"focusin":return on=zn(on,s,o,l,d,p),!0;case"dragenter":return Rr=zn(Rr,s,o,l,d,p),!0;case"mouseover":return Pr=zn(Pr,s,o,l,d,p),!0;case"pointerover":var y=p.pointerId;return ri.set(y,zn(ri.get(y)||null,s,o,l,d,p)),!0;case"gotpointercapture":return y=p.pointerId,hr.set(y,zn(hr.get(y)||null,s,o,l,d,p)),!0}return!1}function pc(s){var o=ao(s.target);if(o!==null){var l=Ar(o);if(l!==null){if(o=l.tag,o===13){if(o=Yi(l),o!==null){s.blockedOn=o,hc(s.priority,function(){cc(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ws(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=ea(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var d=new l.constructor(l.type,l);Zr=d,l.target.dispatchEvent(d),Zr=null}else return o=zl(l),o!==null&&Xo(o),s.blockedOn=l,!1;o.shift()}return!0}function ro(s,o,l){ws(s)&&l.delete(o)}function mc(){kl=!1,on!==null&&ws(on)&&(on=null),Rr!==null&&ws(Rr)&&(Rr=null),Pr!==null&&ws(Pr)&&(Pr=null),ri.forEach(ro),hr.forEach(ro)}function Nr(s,o){s.blockedOn===o&&(s.blockedOn=null,kl||(kl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mc)))}function Dr(s){function o(p){return Nr(p,s)}if(0<Jr.length){Nr(Jr[0],s);for(var l=1;l<Jr.length;l++){var d=Jr[l];d.blockedOn===s&&(d.blockedOn=null)}}for(on!==null&&Nr(on,s),Rr!==null&&Nr(Rr,s),Pr!==null&&Nr(Pr,s),ri.forEach(o),hr.forEach(o),l=0;l<Yr.length;l++)d=Yr[l],d.blockedOn===s&&(d.blockedOn=null);for(;0<Yr.length&&(l=Yr[0],l.blockedOn===null);)pc(l),l.blockedOn===null&&Yr.shift()}var Es=J.ReactCurrentBatchConfig,si=!0;function pt(s,o,l,d){var p=qe,y=Es.transition;Es.transition=null;try{qe=1,Sl(s,o,l,d)}finally{qe=p,Es.transition=y}}function of(s,o,l,d){var p=qe,y=Es.transition;Es.transition=null;try{qe=4,Sl(s,o,l,d)}finally{qe=p,Es.transition=y}}function Sl(s,o,l,d){if(si){var p=ea(s,o,l,d);if(p===null)yf(s,o,d,so,l),fc(s,d);else if(sf(p,s,o,l,d))d.stopPropagation();else if(fc(s,d),o&4&&-1<rf.indexOf(s)){for(;p!==null;){var y=zl(p);if(y!==null&&uc(y),y=ea(s,o,l,d),y===null&&yf(s,o,d,so,l),y===p)break;p=y}p!==null&&d.stopPropagation()}else yf(s,o,d,null,l)}}var so=null;function ea(s,o,l,d){if(so=null,s=Qs(d),s=ao(s),s!==null)if(o=Ar(s),o===null)s=null;else if(l=o.tag,l===13){if(s=Yi(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return so=s,null}function xl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sc()){case Xi:return 1;case Js:return 4;case dr:case Il:return 16;case ic:return 536870912;default:return 16}default:return 16}}var nr=null,ta=null,Un=null;function Al(){if(Un)return Un;var s,o=ta,l=o.length,d,p="value"in nr?nr.value:nr.textContent,y=p.length;for(s=0;s<l&&o[s]===p[s];s++);var E=l-s;for(d=1;d<=E&&o[l-d]===p[y-d];d++);return Un=p.slice(s,1<d?1-d:void 0)}function na(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Xr(){return!0}function Cl(){return!1}function an(s){function o(l,d,p,y,E){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(l=s[A],this[A]=l?l(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Xr:Cl,this.isPropagationStopped=Cl,this}return ue(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),o}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=an(Or),es=ue({},Or,{view:0,detail:0}),af=an(es),sa,Ts,ii,io=ue({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ii&&(ii&&s.type==="mousemove"?(sa=s.screenX-ii.screenX,Ts=s.screenY-ii.screenY):Ts=sa=0,ii=s),sa)},movementY:function(s){return"movementY"in s?s.movementY:Ts}}),ia=an(io),Rl=ue({},io,{dataTransfer:0}),gc=an(Rl),oa=ue({},es,{relatedTarget:0}),aa=an(oa),yc=ue({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),Is=an(yc),vc=ue({},Or,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),_c=an(vc),wc=ue({},Or,{data:0}),Pl=an(wc),la={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tc(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Ec[s])?!!o[s]:!1}function ts(){return Tc}var c=ue({},es,{key:function(s){if(s.key){var o=la[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=na(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Rn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(s){return s.type==="keypress"?na(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?na(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),g=an(c),_=ue({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b=an(_),$=ue({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),Q=an($),ce=ue({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),tt=an(ce),Bt=ue({},io,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ge=an(Bt),Zt=[9,13,27,32],Ot=h&&"CompositionEvent"in window,fr=null;h&&"documentMode"in document&&(fr=document.documentMode);var rr=h&&"TextEvent"in window&&!fr,oo=h&&(!Ot||fr&&8<fr&&11>=fr),ua=" ",oy=!1;function ay(s,o){switch(s){case"keyup":return Zt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ly(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ca=!1;function Ub(s,o){switch(s){case"compositionend":return ly(o);case"keypress":return o.which!==32?null:(oy=!0,ua);case"textInput":return s=o.data,s===ua&&oy?null:s;default:return null}}function $b(s,o){if(ca)return s==="compositionend"||!Ot&&ay(s,o)?(s=Al(),Un=ta=nr=null,ca=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return oo&&o.locale!=="ko"?null:o.data;default:return null}}var Bb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uy(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Bb[s.type]:o==="textarea"}function cy(s,o,l,d){ft(d),o=xc(o,"onChange"),0<o.length&&(l=new ra("onChange","change",null,l,d),s.push({event:l,listeners:o}))}var Nl=null,Dl=null;function qb(s){Ay(s,0)}function Ic(s){var o=ma(s);if(Tt(o))return s}function Wb(s,o){if(s==="change")return o}var dy=!1;if(h){var lf;if(h){var uf="oninput"in document;if(!uf){var hy=document.createElement("div");hy.setAttribute("oninput","return;"),uf=typeof hy.oninput=="function"}lf=uf}else lf=!1;dy=lf&&(!document.documentMode||9<document.documentMode)}function fy(){Nl&&(Nl.detachEvent("onpropertychange",py),Dl=Nl=null)}function py(s){if(s.propertyName==="value"&&Ic(Dl)){var o=[];cy(o,Dl,s,Qs(s)),ur(qb,o)}}function Hb(s,o,l){s==="focusin"?(fy(),Nl=o,Dl=l,Nl.attachEvent("onpropertychange",py)):s==="focusout"&&fy()}function Kb(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ic(Dl)}function Gb(s,o){if(s==="click")return Ic(o)}function Qb(s,o){if(s==="input"||s==="change")return Ic(o)}function Zb(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Mr=typeof Object.is=="function"?Object.is:Zb;function Ol(s,o){if(Mr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!f.call(o,p)||!Mr(s[p],o[p]))return!1}return!0}function my(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function gy(s,o){var l=my(s);s=0;for(var d;l;){if(l.nodeType===3){if(d=s+l.textContent.length,s<=o&&d>=o)return{node:l,offset:o-s};s=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=my(l)}}function yy(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?yy(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function vy(){for(var s=window,o=xn();o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=xn(s.document)}return o}function cf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function Jb(s){var o=vy(),l=s.focusedElem,d=s.selectionRange;if(o!==l&&l&&l.ownerDocument&&yy(l.ownerDocument.documentElement,l)){if(d!==null&&cf(l)){if(o=d.start,s=d.end,s===void 0&&(s=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(s,l.value.length);else if(s=(o=l.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var p=l.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!s.extend&&y>d&&(p=d,d=y,y=p),p=gy(l,y);var E=gy(l,d);p&&E&&(s.rangeCount!==1||s.anchorNode!==p.node||s.anchorOffset!==p.offset||s.focusNode!==E.node||s.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),s.removeAllRanges(),y>d?(s.addRange(o),s.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),s.addRange(o)))}}for(o=[],s=l;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)s=o[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Yb=h&&"documentMode"in document&&11>=document.documentMode,da=null,df=null,Ml=null,hf=!1;function _y(s,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;hf||da==null||da!==xn(d)||(d=da,"selectionStart"in d&&cf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ml&&Ol(Ml,d)||(Ml=d,d=xc(df,"onSelect"),0<d.length&&(o=new ra("onSelect","select",null,o,l),s.push({event:o,listeners:d}),o.target=da)))}function bc(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var ha={animationend:bc("Animation","AnimationEnd"),animationiteration:bc("Animation","AnimationIteration"),animationstart:bc("Animation","AnimationStart"),transitionend:bc("Transition","TransitionEnd")},ff={},wy={};h&&(wy=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function kc(s){if(ff[s])return ff[s];if(!ha[s])return s;var o=ha[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in wy)return ff[s]=o[l];return s}var Ey=kc("animationend"),Ty=kc("animationiteration"),Iy=kc("animationstart"),by=kc("transitionend"),ky=new Map,Sy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(s,o){ky.set(s,o),a(o,[s])}for(var pf=0;pf<Sy.length;pf++){var mf=Sy[pf],Xb=mf.toLowerCase(),ek=mf[0].toUpperCase()+mf.slice(1);oi(Xb,"on"+ek)}oi(Ey,"onAnimationEnd"),oi(Ty,"onAnimationIteration"),oi(Iy,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(by,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ll));function xy(s,o,l){var d=s.type||"unknown-event";s.currentTarget=l,tc(d,o,void 0,s),s.currentTarget=null}function Ay(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var d=s[l],p=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var E=d.length-1;0<=E;E--){var A=d[E],M=A.instance,K=A.currentTarget;if(A=A.listener,M!==y&&p.isPropagationStopped())break e;xy(p,A,K),y=M}else for(E=0;E<d.length;E++){if(A=d[E],M=A.instance,K=A.currentTarget,A=A.listener,M!==y&&p.isPropagationStopped())break e;xy(p,A,K),y=M}}}if(Dt)throw s=xr,Dt=!1,xr=null,s}function ct(s,o){var l=o[If];l===void 0&&(l=o[If]=new Set);var d=s+"__bubble";l.has(d)||(Cy(o,s,2,!1),l.add(d))}function gf(s,o,l){var d=0;o&&(d|=4),Cy(l,s,d,o)}var Sc="_reactListening"+Math.random().toString(36).slice(2);function Vl(s){if(!s[Sc]){s[Sc]=!0,r.forEach(function(l){l!=="selectionchange"&&(tk.has(l)||gf(l,!1,s),gf(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Sc]||(o[Sc]=!0,gf("selectionchange",!1,o))}}function Cy(s,o,l,d){switch(xl(o)){case 1:var p=pt;break;case 4:p=of;break;default:p=Sl}l=p.bind(null,o,l,s),p=void 0,!An||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?s.addEventListener(o,l,{capture:!0,passive:p}):s.addEventListener(o,l,!0):p!==void 0?s.addEventListener(o,l,{passive:p}):s.addEventListener(o,l,!1)}function yf(s,o,l,d,p){var y=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var A=d.stateNode.containerInfo;if(A===p||A.nodeType===8&&A.parentNode===p)break;if(E===4)for(E=d.return;E!==null;){var M=E.tag;if((M===3||M===4)&&(M=E.stateNode.containerInfo,M===p||M.nodeType===8&&M.parentNode===p))return;E=E.return}for(;A!==null;){if(E=ao(A),E===null)return;if(M=E.tag,M===5||M===6){d=y=E;continue e}A=A.parentNode}}d=d.return}ur(function(){var K=y,ie=Qs(l),ae=[];e:{var se=ky.get(s);if(se!==void 0){var fe=ra,ge=s;switch(s){case"keypress":if(na(l)===0)break e;case"keydown":case"keyup":fe=g;break;case"focusin":ge="focus",fe=aa;break;case"focusout":ge="blur",fe=aa;break;case"beforeblur":case"afterblur":fe=aa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=ia;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Q;break;case Ey:case Ty:case Iy:fe=Is;break;case by:fe=tt;break;case"scroll":fe=af;break;case"wheel":fe=Ge;break;case"copy":case"cut":case"paste":fe=_c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=b}var _e=(o&4)!==0,xt=!_e&&s==="scroll",B=_e?se!==null?se+"Capture":null:se;_e=[];for(var j=K,W;j!==null;){W=j;var le=W.stateNode;if(W.tag===5&&le!==null&&(W=le,B!==null&&(le=Fe(j,B),le!=null&&_e.push(jl(j,le,W)))),xt)break;j=j.return}0<_e.length&&(se=new fe(se,ge,null,l,ie),ae.push({event:se,listeners:_e}))}}if((o&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",fe=s==="mouseout"||s==="pointerout",se&&l!==Zr&&(ge=l.relatedTarget||l.fromElement)&&(ao(ge)||ge[bs]))break e;if((fe||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(ge=l.relatedTarget||l.toElement,fe=K,ge=ge?ao(ge):null,ge!==null&&(xt=Ar(ge),ge!==xt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(fe=null,ge=K),fe!==ge)){if(_e=ia,le="onMouseLeave",B="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(_e=b,le="onPointerLeave",B="onPointerEnter",j="pointer"),xt=fe==null?se:ma(fe),W=ge==null?se:ma(ge),se=new _e(le,j+"leave",fe,l,ie),se.target=xt,se.relatedTarget=W,le=null,ao(ie)===K&&(_e=new _e(B,j+"enter",ge,l,ie),_e.target=W,_e.relatedTarget=xt,le=_e),xt=le,fe&&ge)t:{for(_e=fe,B=ge,j=0,W=_e;W;W=fa(W))j++;for(W=0,le=B;le;le=fa(le))W++;for(;0<j-W;)_e=fa(_e),j--;for(;0<W-j;)B=fa(B),W--;for(;j--;){if(_e===B||B!==null&&_e===B.alternate)break t;_e=fa(_e),B=fa(B)}_e=null}else _e=null;fe!==null&&Ry(ae,se,fe,_e,!1),ge!==null&&xt!==null&&Ry(ae,xt,ge,_e,!0)}}e:{if(se=K?ma(K):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var Te=Wb;else if(uy(se))if(dy)Te=Qb;else{Te=Kb;var xe=Hb}else(fe=se.nodeName)&&fe.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Te=Gb);if(Te&&(Te=Te(s,K))){cy(ae,Te,l,ie);break e}xe&&xe(s,se,K),s==="focusout"&&(xe=se._wrapperState)&&xe.controlled&&se.type==="number"&&Kr(se,"number",se.value)}switch(xe=K?ma(K):window,s){case"focusin":(uy(xe)||xe.contentEditable==="true")&&(da=xe,df=K,Ml=null);break;case"focusout":Ml=df=da=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":hf=!1,_y(ae,l,ie);break;case"selectionchange":if(Yb)break;case"keydown":case"keyup":_y(ae,l,ie)}var Ae;if(Ot)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else ca?ay(s,l)&&(Pe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(oo&&l.locale!=="ko"&&(ca||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&ca&&(Ae=Al()):(nr=ie,ta="value"in nr?nr.value:nr.textContent,ca=!0)),xe=xc(K,Pe),0<xe.length&&(Pe=new Pl(Pe,s,null,l,ie),ae.push({event:Pe,listeners:xe}),Ae?Pe.data=Ae:(Ae=ly(l),Ae!==null&&(Pe.data=Ae)))),(Ae=rr?Ub(s,l):$b(s,l))&&(K=xc(K,"onBeforeInput"),0<K.length&&(ie=new Pl("onBeforeInput","beforeinput",null,l,ie),ae.push({event:ie,listeners:K}),ie.data=Ae))}Ay(ae,o)})}function jl(s,o,l){return{instance:s,listener:o,currentTarget:l}}function xc(s,o){for(var l=o+"Capture",d=[];s!==null;){var p=s,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Fe(s,l),y!=null&&d.unshift(jl(s,y,p)),y=Fe(s,o),y!=null&&d.push(jl(s,y,p))),s=s.return}return d}function fa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Ry(s,o,l,d,p){for(var y=o._reactName,E=[];l!==null&&l!==d;){var A=l,M=A.alternate,K=A.stateNode;if(M!==null&&M===d)break;A.tag===5&&K!==null&&(A=K,p?(M=Fe(l,y),M!=null&&E.unshift(jl(l,M,A))):p||(M=Fe(l,y),M!=null&&E.push(jl(l,M,A)))),l=l.return}E.length!==0&&s.push({event:o,listeners:E})}var nk=/\r\n?/g,rk=/\u0000|\uFFFD/g;function Py(s){return(typeof s=="string"?s:""+s).replace(nk,`
`).replace(rk,"")}function Ac(s,o,l){if(o=Py(o),Py(s)!==o&&l)throw Error(n(425))}function Cc(){}var vf=null,_f=null;function wf(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ef=typeof setTimeout=="function"?setTimeout:void 0,sk=typeof clearTimeout=="function"?clearTimeout:void 0,Ny=typeof Promise=="function"?Promise:void 0,ik=typeof queueMicrotask=="function"?queueMicrotask:typeof Ny<"u"?function(s){return Ny.resolve(null).then(s).catch(ok)}:Ef;function ok(s){setTimeout(function(){throw s})}function Tf(s,o){var l=o,d=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){s.removeChild(p),Dr(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);Dr(o)}function ai(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Dy(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return s;o--}else l==="/$"&&o++}s=s.previousSibling}return null}var pa=Math.random().toString(36).slice(2),ns="__reactFiber$"+pa,Fl="__reactProps$"+pa,bs="__reactContainer$"+pa,If="__reactEvents$"+pa,ak="__reactListeners$"+pa,lk="__reactHandles$"+pa;function ao(s){var o=s[ns];if(o)return o;for(var l=s.parentNode;l;){if(o=l[bs]||l[ns]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=Dy(s);s!==null;){if(l=s[ns])return l;s=Dy(s)}return o}s=l,l=s.parentNode}return null}function zl(s){return s=s[ns]||s[bs],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ma(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Rc(s){return s[Fl]||null}var bf=[],ga=-1;function li(s){return{current:s}}function dt(s){0>ga||(s.current=bf[ga],bf[ga]=null,ga--)}function at(s,o){ga++,bf[ga]=s.current,s.current=o}var ui={},yn=li(ui),$n=li(!1),lo=ui;function ya(s,o){var l=s.type.contextTypes;if(!l)return ui;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=p),p}function Bn(s){return s=s.childContextTypes,s!=null}function Pc(){dt($n),dt(yn)}function Oy(s,o,l){if(yn.current!==ui)throw Error(n(168));at(yn,o),at($n,l)}function My(s,o,l){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(n(108,Ie(s)||"Unknown",p));return ue({},l,d)}function Nc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ui,lo=yn.current,at(yn,s),at($n,$n.current),!0}function Ly(s,o,l){var d=s.stateNode;if(!d)throw Error(n(169));l?(s=My(s,o,lo),d.__reactInternalMemoizedMergedChildContext=s,dt($n),dt(yn),at(yn,s)):dt($n),at($n,l)}var ks=null,Dc=!1,kf=!1;function Vy(s){ks===null?ks=[s]:ks.push(s)}function uk(s){Dc=!0,Vy(s)}function ci(){if(!kf&&ks!==null){kf=!0;var s=0,o=qe;try{var l=ks;for(qe=1;s<l.length;s++){var d=l[s];do d=d(!0);while(d!==null)}ks=null,Dc=!1}catch(p){throw ks!==null&&(ks=ks.slice(s+1)),Zo(Xi,ci),p}finally{qe=o,kf=!1}}return null}var va=[],_a=0,Oc=null,Mc=0,pr=[],mr=0,uo=null,Ss=1,xs="";function co(s,o){va[_a++]=Mc,va[_a++]=Oc,Oc=s,Mc=o}function jy(s,o,l){pr[mr++]=Ss,pr[mr++]=xs,pr[mr++]=uo,uo=s;var d=Ss;s=xs;var p=32-Cn(d)-1;d&=~(1<<p),l+=1;var y=32-Cn(o)+p;if(30<y){var E=p-p%5;y=(d&(1<<E)-1).toString(32),d>>=E,p-=E,Ss=1<<32-Cn(o)+p|l<<p|d,xs=y+s}else Ss=1<<y|l<<p|d,xs=s}function Sf(s){s.return!==null&&(co(s,1),jy(s,1,0))}function xf(s){for(;s===Oc;)Oc=va[--_a],va[_a]=null,Mc=va[--_a],va[_a]=null;for(;s===uo;)uo=pr[--mr],pr[mr]=null,xs=pr[--mr],pr[mr]=null,Ss=pr[--mr],pr[mr]=null}var sr=null,ir=null,mt=!1,Lr=null;function Fy(s,o){var l=_r(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=s,o=s.deletions,o===null?(s.deletions=[l],s.flags|=16):o.push(l)}function zy(s,o){switch(s.tag){case 5:var l=s.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,sr=s,ir=ai(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,sr=s,ir=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=uo!==null?{id:Ss,overflow:xs}:null,s.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=_r(18,null,null,0),l.stateNode=o,l.return=s,s.child=l,sr=s,ir=null,!0):!1;default:return!1}}function Af(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Cf(s){if(mt){var o=ir;if(o){var l=o;if(!zy(s,o)){if(Af(s))throw Error(n(418));o=ai(l.nextSibling);var d=sr;o&&zy(s,o)?Fy(d,l):(s.flags=s.flags&-4097|2,mt=!1,sr=s)}}else{if(Af(s))throw Error(n(418));s.flags=s.flags&-4097|2,mt=!1,sr=s}}}function Uy(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;sr=s}function Lc(s){if(s!==sr)return!1;if(!mt)return Uy(s),mt=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!wf(s.type,s.memoizedProps)),o&&(o=ir)){if(Af(s))throw $y(),Error(n(418));for(;o;)Fy(s,o),o=ai(o.nextSibling)}if(Uy(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(o===0){ir=ai(s.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}s=s.nextSibling}ir=null}}else ir=sr?ai(s.stateNode.nextSibling):null;return!0}function $y(){for(var s=ir;s;)s=ai(s.nextSibling)}function wa(){ir=sr=null,mt=!1}function Rf(s){Lr===null?Lr=[s]:Lr.push(s)}var ck=J.ReactCurrentBatchConfig;function Ul(s,o,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var d=l.stateNode}if(!d)throw Error(n(147,s));var p=d,y=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(E){var A=p.refs;E===null?delete A[y]:A[y]=E},o._stringRef=y,o)}if(typeof s!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,s))}return s}function Vc(s,o){throw s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function By(s){var o=s._init;return o(s._payload)}function qy(s){function o(B,j){if(s){var W=B.deletions;W===null?(B.deletions=[j],B.flags|=16):W.push(j)}}function l(B,j){if(!s)return null;for(;j!==null;)o(B,j),j=j.sibling;return null}function d(B,j){for(B=new Map;j!==null;)j.key!==null?B.set(j.key,j):B.set(j.index,j),j=j.sibling;return B}function p(B,j){return B=vi(B,j),B.index=0,B.sibling=null,B}function y(B,j,W){return B.index=W,s?(W=B.alternate,W!==null?(W=W.index,W<j?(B.flags|=2,j):W):(B.flags|=2,j)):(B.flags|=1048576,j)}function E(B){return s&&B.alternate===null&&(B.flags|=2),B}function A(B,j,W,le){return j===null||j.tag!==6?(j=Ep(W,B.mode,le),j.return=B,j):(j=p(j,W),j.return=B,j)}function M(B,j,W,le){var Te=W.type;return Te===C?ie(B,j,W.props.children,le,W.key):j!==null&&(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ze&&By(Te)===j.type)?(le=p(j,W.props),le.ref=Ul(B,j,W),le.return=B,le):(le=ad(W.type,W.key,W.props,null,B.mode,le),le.ref=Ul(B,j,W),le.return=B,le)}function K(B,j,W,le){return j===null||j.tag!==4||j.stateNode.containerInfo!==W.containerInfo||j.stateNode.implementation!==W.implementation?(j=Tp(W,B.mode,le),j.return=B,j):(j=p(j,W.children||[]),j.return=B,j)}function ie(B,j,W,le,Te){return j===null||j.tag!==7?(j=_o(W,B.mode,le,Te),j.return=B,j):(j=p(j,W),j.return=B,j)}function ae(B,j,W){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Ep(""+j,B.mode,W),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Y:return W=ad(j.type,j.key,j.props,null,B.mode,W),W.ref=Ul(B,null,j),W.return=B,W;case te:return j=Tp(j,B.mode,W),j.return=B,j;case Ze:var le=j._init;return ae(B,le(j._payload),W)}if(Qt(j)||he(j))return j=_o(j,B.mode,W,null),j.return=B,j;Vc(B,j)}return null}function se(B,j,W,le){var Te=j!==null?j.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Te!==null?null:A(B,j,""+W,le);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Y:return W.key===Te?M(B,j,W,le):null;case te:return W.key===Te?K(B,j,W,le):null;case Ze:return Te=W._init,se(B,j,Te(W._payload),le)}if(Qt(W)||he(W))return Te!==null?null:ie(B,j,W,le,null);Vc(B,W)}return null}function fe(B,j,W,le,Te){if(typeof le=="string"&&le!==""||typeof le=="number")return B=B.get(W)||null,A(j,B,""+le,Te);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case Y:return B=B.get(le.key===null?W:le.key)||null,M(j,B,le,Te);case te:return B=B.get(le.key===null?W:le.key)||null,K(j,B,le,Te);case Ze:var xe=le._init;return fe(B,j,W,xe(le._payload),Te)}if(Qt(le)||he(le))return B=B.get(W)||null,ie(j,B,le,Te,null);Vc(j,le)}return null}function ge(B,j,W,le){for(var Te=null,xe=null,Ae=j,Pe=j=0,Xt=null;Ae!==null&&Pe<W.length;Pe++){Ae.index>Pe?(Xt=Ae,Ae=null):Xt=Ae.sibling;var Ye=se(B,Ae,W[Pe],le);if(Ye===null){Ae===null&&(Ae=Xt);break}s&&Ae&&Ye.alternate===null&&o(B,Ae),j=y(Ye,j,Pe),xe===null?Te=Ye:xe.sibling=Ye,xe=Ye,Ae=Xt}if(Pe===W.length)return l(B,Ae),mt&&co(B,Pe),Te;if(Ae===null){for(;Pe<W.length;Pe++)Ae=ae(B,W[Pe],le),Ae!==null&&(j=y(Ae,j,Pe),xe===null?Te=Ae:xe.sibling=Ae,xe=Ae);return mt&&co(B,Pe),Te}for(Ae=d(B,Ae);Pe<W.length;Pe++)Xt=fe(Ae,B,Pe,W[Pe],le),Xt!==null&&(s&&Xt.alternate!==null&&Ae.delete(Xt.key===null?Pe:Xt.key),j=y(Xt,j,Pe),xe===null?Te=Xt:xe.sibling=Xt,xe=Xt);return s&&Ae.forEach(function(_i){return o(B,_i)}),mt&&co(B,Pe),Te}function _e(B,j,W,le){var Te=he(W);if(typeof Te!="function")throw Error(n(150));if(W=Te.call(W),W==null)throw Error(n(151));for(var xe=Te=null,Ae=j,Pe=j=0,Xt=null,Ye=W.next();Ae!==null&&!Ye.done;Pe++,Ye=W.next()){Ae.index>Pe?(Xt=Ae,Ae=null):Xt=Ae.sibling;var _i=se(B,Ae,Ye.value,le);if(_i===null){Ae===null&&(Ae=Xt);break}s&&Ae&&_i.alternate===null&&o(B,Ae),j=y(_i,j,Pe),xe===null?Te=_i:xe.sibling=_i,xe=_i,Ae=Xt}if(Ye.done)return l(B,Ae),mt&&co(B,Pe),Te;if(Ae===null){for(;!Ye.done;Pe++,Ye=W.next())Ye=ae(B,Ye.value,le),Ye!==null&&(j=y(Ye,j,Pe),xe===null?Te=Ye:xe.sibling=Ye,xe=Ye);return mt&&co(B,Pe),Te}for(Ae=d(B,Ae);!Ye.done;Pe++,Ye=W.next())Ye=fe(Ae,B,Pe,Ye.value,le),Ye!==null&&(s&&Ye.alternate!==null&&Ae.delete(Ye.key===null?Pe:Ye.key),j=y(Ye,j,Pe),xe===null?Te=Ye:xe.sibling=Ye,xe=Ye);return s&&Ae.forEach(function(Bk){return o(B,Bk)}),mt&&co(B,Pe),Te}function xt(B,j,W,le){if(typeof W=="object"&&W!==null&&W.type===C&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Y:e:{for(var Te=W.key,xe=j;xe!==null;){if(xe.key===Te){if(Te=W.type,Te===C){if(xe.tag===7){l(B,xe.sibling),j=p(xe,W.props.children),j.return=B,B=j;break e}}else if(xe.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ze&&By(Te)===xe.type){l(B,xe.sibling),j=p(xe,W.props),j.ref=Ul(B,xe,W),j.return=B,B=j;break e}l(B,xe);break}else o(B,xe);xe=xe.sibling}W.type===C?(j=_o(W.props.children,B.mode,le,W.key),j.return=B,B=j):(le=ad(W.type,W.key,W.props,null,B.mode,le),le.ref=Ul(B,j,W),le.return=B,B=le)}return E(B);case te:e:{for(xe=W.key;j!==null;){if(j.key===xe)if(j.tag===4&&j.stateNode.containerInfo===W.containerInfo&&j.stateNode.implementation===W.implementation){l(B,j.sibling),j=p(j,W.children||[]),j.return=B,B=j;break e}else{l(B,j);break}else o(B,j);j=j.sibling}j=Tp(W,B.mode,le),j.return=B,B=j}return E(B);case Ze:return xe=W._init,xt(B,j,xe(W._payload),le)}if(Qt(W))return ge(B,j,W,le);if(he(W))return _e(B,j,W,le);Vc(B,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,j!==null&&j.tag===6?(l(B,j.sibling),j=p(j,W),j.return=B,B=j):(l(B,j),j=Ep(W,B.mode,le),j.return=B,B=j),E(B)):l(B,j)}return xt}var Ea=qy(!0),Wy=qy(!1),jc=li(null),Fc=null,Ta=null,Pf=null;function Nf(){Pf=Ta=Fc=null}function Df(s){var o=jc.current;dt(jc),s._currentValue=o}function Of(s,o,l){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===l)break;s=s.return}}function Ia(s,o){Fc=s,Pf=Ta=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(qn=!0),s.firstContext=null)}function gr(s){var o=s._currentValue;if(Pf!==s)if(s={context:s,memoizedValue:o,next:null},Ta===null){if(Fc===null)throw Error(n(308));Ta=s,Fc.dependencies={lanes:0,firstContext:s}}else Ta=Ta.next=s;return o}var ho=null;function Mf(s){ho===null?ho=[s]:ho.push(s)}function Hy(s,o,l,d){var p=o.interleaved;return p===null?(l.next=l,Mf(o)):(l.next=p.next,p.next=l),o.interleaved=l,As(s,d)}function As(s,o){s.lanes|=o;var l=s.alternate;for(l!==null&&(l.lanes|=o),l=s,s=s.return;s!==null;)s.childLanes|=o,l=s.alternate,l!==null&&(l.childLanes|=o),l=s,s=s.return;return l.tag===3?l.stateNode:null}var di=!1;function Lf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ky(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Cs(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function hi(s,o,l){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Je&2)!==0){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,As(s,l)}return p=d.interleaved,p===null?(o.next=o,Mf(d)):(o.next=p.next,p.next=o),d.interleaved=o,As(s,l)}function zc(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,l|=d,o.lanes=l,ti(s,l)}}function Gy(s,o){var l=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}function Uc(s,o,l,d){var p=s.updateQueue;di=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var M=A,K=M.next;M.next=null,E===null?y=K:E.next=K,E=M;var ie=s.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==E&&(A===null?ie.firstBaseUpdate=K:A.next=K,ie.lastBaseUpdate=M))}if(y!==null){var ae=p.baseState;E=0,ie=K=M=null,A=y;do{var se=A.lane,fe=A.eventTime;if((d&se)===se){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ge=s,_e=A;switch(se=o,fe=l,_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){ae=ge.call(fe,ae,se);break e}ae=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,se=typeof ge=="function"?ge.call(fe,ae,se):ge,se==null)break e;ae=ue({},ae,se);break e;case 2:di=!0}}A.callback!==null&&A.lane!==0&&(s.flags|=64,se=p.effects,se===null?p.effects=[A]:se.push(A))}else fe={eventTime:fe,lane:se,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(K=ie=fe,M=ae):ie=ie.next=fe,E|=se;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;se=A,A=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);if(ie===null&&(M=ae),p.baseState=M,p.firstBaseUpdate=K,p.lastBaseUpdate=ie,o=p.shared.interleaved,o!==null){p=o;do E|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);mo|=E,s.lanes=E,s.memoizedState=ae}}function Qy(s,o,l){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(n(191,p));p.call(d)}}}var $l={},rs=li($l),Bl=li($l),ql=li($l);function fo(s){if(s===$l)throw Error(n(174));return s}function Vf(s,o){switch(at(ql,o),at(Bl,s),at(rs,$l),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:it(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=it(o,s)}dt(rs),at(rs,o)}function ba(){dt(rs),dt(Bl),dt(ql)}function Zy(s){fo(ql.current);var o=fo(rs.current),l=it(o,s.type);o!==l&&(at(Bl,s),at(rs,l))}function jf(s){Bl.current===s&&(dt(rs),dt(Bl))}var yt=li(0);function $c(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ff=[];function zf(){for(var s=0;s<Ff.length;s++)Ff[s]._workInProgressVersionPrimary=null;Ff.length=0}var Bc=J.ReactCurrentDispatcher,Uf=J.ReactCurrentBatchConfig,po=0,vt=null,qt=null,Jt=null,qc=!1,Wl=!1,Hl=0,dk=0;function vn(){throw Error(n(321))}function $f(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!Mr(s[l],o[l]))return!1;return!0}function Bf(s,o,l,d,p,y){if(po=y,vt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Bc.current=s===null||s.memoizedState===null?mk:gk,s=l(d,p),Wl){y=0;do{if(Wl=!1,Hl=0,25<=y)throw Error(n(301));y+=1,Jt=qt=null,o.updateQueue=null,Bc.current=yk,s=l(d,p)}while(Wl)}if(Bc.current=Kc,o=qt!==null&&qt.next!==null,po=0,Jt=qt=vt=null,qc=!1,o)throw Error(n(300));return s}function qf(){var s=Hl!==0;return Hl=0,s}function ss(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?vt.memoizedState=Jt=s:Jt=Jt.next=s,Jt}function yr(){if(qt===null){var s=vt.alternate;s=s!==null?s.memoizedState:null}else s=qt.next;var o=Jt===null?vt.memoizedState:Jt.next;if(o!==null)Jt=o,qt=s;else{if(s===null)throw Error(n(310));qt=s,s={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Jt===null?vt.memoizedState=Jt=s:Jt=Jt.next=s}return Jt}function Kl(s,o){return typeof o=="function"?o(s):o}function Wf(s){var o=yr(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=s;var d=qt,p=d.baseQueue,y=l.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}d.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,d=d.baseState;var A=E=null,M=null,K=y;do{var ie=K.lane;if((po&ie)===ie)M!==null&&(M=M.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),d=K.hasEagerState?K.eagerState:s(d,K.action);else{var ae={lane:ie,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};M===null?(A=M=ae,E=d):M=M.next=ae,vt.lanes|=ie,mo|=ie}K=K.next}while(K!==null&&K!==y);M===null?E=d:M.next=A,Mr(d,o.memoizedState)||(qn=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=M,l.lastRenderedState=d}if(s=l.interleaved,s!==null){p=s;do y=p.lane,vt.lanes|=y,mo|=y,p=p.next;while(p!==s)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Hf(s){var o=yr(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=s;var d=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var E=p=p.next;do y=s(y,E.action),E=E.next;while(E!==p);Mr(y,o.memoizedState)||(qn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,d]}function Jy(){}function Yy(s,o){var l=vt,d=yr(),p=o(),y=!Mr(d.memoizedState,p);if(y&&(d.memoizedState=p,qn=!0),d=d.queue,Kf(tv.bind(null,l,d,s),[s]),d.getSnapshot!==o||y||Jt!==null&&Jt.memoizedState.tag&1){if(l.flags|=2048,Gl(9,ev.bind(null,l,d,p,o),void 0,null),Yt===null)throw Error(n(349));(po&30)!==0||Xy(l,o,p)}return p}function Xy(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=vt.updateQueue,o===null?(o={lastEffect:null,stores:null},vt.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function ev(s,o,l,d){o.value=l,o.getSnapshot=d,nv(o)&&rv(s)}function tv(s,o,l){return l(function(){nv(o)&&rv(s)})}function nv(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!Mr(s,l)}catch{return!0}}function rv(s){var o=As(s,1);o!==null&&zr(o,s,1,-1)}function sv(s){var o=ss();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:s},o.queue=s,s=s.dispatch=pk.bind(null,vt,s),[o.memoizedState,s]}function Gl(s,o,l,d){return s={tag:s,create:o,destroy:l,deps:d,next:null},o=vt.updateQueue,o===null?(o={lastEffect:null,stores:null},vt.updateQueue=o,o.lastEffect=s.next=s):(l=o.lastEffect,l===null?o.lastEffect=s.next=s:(d=l.next,l.next=s,s.next=d,o.lastEffect=s)),s}function iv(){return yr().memoizedState}function Wc(s,o,l,d){var p=ss();vt.flags|=s,p.memoizedState=Gl(1|o,l,void 0,d===void 0?null:d)}function Hc(s,o,l,d){var p=yr();d=d===void 0?null:d;var y=void 0;if(qt!==null){var E=qt.memoizedState;if(y=E.destroy,d!==null&&$f(d,E.deps)){p.memoizedState=Gl(o,l,y,d);return}}vt.flags|=s,p.memoizedState=Gl(1|o,l,y,d)}function ov(s,o){return Wc(8390656,8,s,o)}function Kf(s,o){return Hc(2048,8,s,o)}function av(s,o){return Hc(4,2,s,o)}function lv(s,o){return Hc(4,4,s,o)}function uv(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function cv(s,o,l){return l=l!=null?l.concat([s]):null,Hc(4,4,uv.bind(null,o,s),l)}function Gf(){}function dv(s,o){var l=yr();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&$f(o,d[1])?d[0]:(l.memoizedState=[s,o],s)}function hv(s,o){var l=yr();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&$f(o,d[1])?d[0]:(s=s(),l.memoizedState=[s,o],s)}function fv(s,o,l){return(po&21)===0?(s.baseState&&(s.baseState=!1,qn=!0),s.memoizedState=l):(Mr(l,o)||(l=no(),vt.lanes|=l,mo|=l,s.baseState=!0),o)}function hk(s,o){var l=qe;qe=l!==0&&4>l?l:4,s(!0);var d=Uf.transition;Uf.transition={};try{s(!1),o()}finally{qe=l,Uf.transition=d}}function pv(){return yr().memoizedState}function fk(s,o,l){var d=gi(s);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},mv(s))gv(o,l);else if(l=Hy(s,o,l,d),l!==null){var p=Nn();zr(l,s,d,p),yv(l,o,d)}}function pk(s,o,l){var d=gi(s),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(mv(s))gv(o,p);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,A=y(E,l);if(p.hasEagerState=!0,p.eagerState=A,Mr(A,E)){var M=o.interleaved;M===null?(p.next=p,Mf(o)):(p.next=M.next,M.next=p),o.interleaved=p;return}}catch{}finally{}l=Hy(s,o,p,d),l!==null&&(p=Nn(),zr(l,s,d,p),yv(l,o,d))}}function mv(s){var o=s.alternate;return s===vt||o!==null&&o===vt}function gv(s,o){Wl=qc=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function yv(s,o,l){if((l&4194240)!==0){var d=o.lanes;d&=s.pendingLanes,l|=d,o.lanes=l,ti(s,l)}}var Kc={readContext:gr,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useInsertionEffect:vn,useLayoutEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useMutableSource:vn,useSyncExternalStore:vn,useId:vn,unstable_isNewReconciler:!1},mk={readContext:gr,useCallback:function(s,o){return ss().memoizedState=[s,o===void 0?null:o],s},useContext:gr,useEffect:ov,useImperativeHandle:function(s,o,l){return l=l!=null?l.concat([s]):null,Wc(4194308,4,uv.bind(null,o,s),l)},useLayoutEffect:function(s,o){return Wc(4194308,4,s,o)},useInsertionEffect:function(s,o){return Wc(4,2,s,o)},useMemo:function(s,o){var l=ss();return o=o===void 0?null:o,s=s(),l.memoizedState=[s,o],s},useReducer:function(s,o,l){var d=ss();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=fk.bind(null,vt,s),[d.memoizedState,s]},useRef:function(s){var o=ss();return s={current:s},o.memoizedState=s},useState:sv,useDebugValue:Gf,useDeferredValue:function(s){return ss().memoizedState=s},useTransition:function(){var s=sv(!1),o=s[0];return s=hk.bind(null,s[1]),ss().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,l){var d=vt,p=ss();if(mt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=o(),Yt===null)throw Error(n(349));(po&30)!==0||Xy(d,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,ov(tv.bind(null,d,y,s),[s]),d.flags|=2048,Gl(9,ev.bind(null,d,y,l,o),void 0,null),l},useId:function(){var s=ss(),o=Yt.identifierPrefix;if(mt){var l=xs,d=Ss;l=(d&~(1<<32-Cn(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=Hl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=dk++,o=":"+o+"r"+l.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},gk={readContext:gr,useCallback:dv,useContext:gr,useEffect:Kf,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:lv,useMemo:hv,useReducer:Wf,useRef:iv,useState:function(){return Wf(Kl)},useDebugValue:Gf,useDeferredValue:function(s){var o=yr();return fv(o,qt.memoizedState,s)},useTransition:function(){var s=Wf(Kl)[0],o=yr().memoizedState;return[s,o]},useMutableSource:Jy,useSyncExternalStore:Yy,useId:pv,unstable_isNewReconciler:!1},yk={readContext:gr,useCallback:dv,useContext:gr,useEffect:Kf,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:lv,useMemo:hv,useReducer:Hf,useRef:iv,useState:function(){return Hf(Kl)},useDebugValue:Gf,useDeferredValue:function(s){var o=yr();return qt===null?o.memoizedState=s:fv(o,qt.memoizedState,s)},useTransition:function(){var s=Hf(Kl)[0],o=yr().memoizedState;return[s,o]},useMutableSource:Jy,useSyncExternalStore:Yy,useId:pv,unstable_isNewReconciler:!1};function Vr(s,o){if(s&&s.defaultProps){o=ue({},o),s=s.defaultProps;for(var l in s)o[l]===void 0&&(o[l]=s[l]);return o}return o}function Qf(s,o,l,d){o=s.memoizedState,l=l(d,o),l=l==null?o:ue({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Gc={isMounted:function(s){return(s=s._reactInternals)?Ar(s)===s:!1},enqueueSetState:function(s,o,l){s=s._reactInternals;var d=Nn(),p=gi(s),y=Cs(d,p);y.payload=o,l!=null&&(y.callback=l),o=hi(s,y,p),o!==null&&(zr(o,s,p,d),zc(o,s,p))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var d=Nn(),p=gi(s),y=Cs(d,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=hi(s,y,p),o!==null&&(zr(o,s,p,d),zc(o,s,p))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=Nn(),d=gi(s),p=Cs(l,d);p.tag=2,o!=null&&(p.callback=o),o=hi(s,p,d),o!==null&&(zr(o,s,d,l),zc(o,s,d))}};function vv(s,o,l,d,p,y,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,y,E):o.prototype&&o.prototype.isPureReactComponent?!Ol(l,d)||!Ol(p,y):!0}function _v(s,o,l){var d=!1,p=ui,y=o.contextType;return typeof y=="object"&&y!==null?y=gr(y):(p=Bn(o)?lo:yn.current,d=o.contextTypes,y=(d=d!=null)?ya(s,p):ui),o=new o(l,y),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Gc,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=p,s.__reactInternalMemoizedMaskedChildContext=y),o}function wv(s,o,l,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==s&&Gc.enqueueReplaceState(o,o.state,null)}function Zf(s,o,l,d){var p=s.stateNode;p.props=l,p.state=s.memoizedState,p.refs={},Lf(s);var y=o.contextType;typeof y=="object"&&y!==null?p.context=gr(y):(y=Bn(o)?lo:yn.current,p.context=ya(s,y)),p.state=s.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Qf(s,o,y,l),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Gc.enqueueReplaceState(p,p.state,null),Uc(s,l,p,d),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308)}function ka(s,o){try{var l="",d=o;do l+=Re(d),d=d.return;while(d);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:o,stack:p,digest:null}}function Jf(s,o,l){return{value:s,source:null,stack:l??null,digest:o??null}}function Yf(s,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var vk=typeof WeakMap=="function"?WeakMap:Map;function Ev(s,o,l){l=Cs(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){td||(td=!0,fp=d),Yf(s,o)},l}function Tv(s,o,l){l=Cs(-1,l),l.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;l.payload=function(){return d(p)},l.callback=function(){Yf(s,o)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Yf(s,o),typeof d!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),l}function Iv(s,o,l){var d=s.pingCache;if(d===null){d=s.pingCache=new vk;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(l)||(p.add(l),s=Nk.bind(null,s,o,l),o.then(s,s))}function bv(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function kv(s,o,l,d,p){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Cs(-1,1),o.tag=2,hi(l,o,1))),l.lanes|=1),s):(s.flags|=65536,s.lanes=p,s)}var _k=J.ReactCurrentOwner,qn=!1;function Pn(s,o,l,d){o.child=s===null?Wy(o,null,l,d):Ea(o,s.child,l,d)}function Sv(s,o,l,d,p){l=l.render;var y=o.ref;return Ia(o,p),d=Bf(s,o,l,d,y,p),l=qf(),s!==null&&!qn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~p,Rs(s,o,p)):(mt&&l&&Sf(o),o.flags|=1,Pn(s,o,d,p),o.child)}function xv(s,o,l,d,p){if(s===null){var y=l.type;return typeof y=="function"&&!wp(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,Av(s,o,y,d,p)):(s=ad(l.type,null,d,o,o.mode,p),s.ref=o.ref,s.return=o,o.child=s)}if(y=s.child,(s.lanes&p)===0){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:Ol,l(E,d)&&s.ref===o.ref)return Rs(s,o,p)}return o.flags|=1,s=vi(y,d),s.ref=o.ref,s.return=o,o.child=s}function Av(s,o,l,d,p){if(s!==null){var y=s.memoizedProps;if(Ol(y,d)&&s.ref===o.ref)if(qn=!1,o.pendingProps=d=y,(s.lanes&p)!==0)(s.flags&131072)!==0&&(qn=!0);else return o.lanes=s.lanes,Rs(s,o,p)}return Xf(s,o,l,d,p)}function Cv(s,o,l){var d=o.pendingProps,p=d.children,y=s!==null?s.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(xa,or),or|=l;else{if((l&1073741824)===0)return s=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,at(xa,or),or|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,at(xa,or),or|=d}else y!==null?(d=y.baseLanes|l,o.memoizedState=null):d=l,at(xa,or),or|=d;return Pn(s,o,p,l),o.child}function Rv(s,o){var l=o.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Xf(s,o,l,d,p){var y=Bn(l)?lo:yn.current;return y=ya(o,y),Ia(o,p),l=Bf(s,o,l,d,y,p),d=qf(),s!==null&&!qn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~p,Rs(s,o,p)):(mt&&d&&Sf(o),o.flags|=1,Pn(s,o,l,p),o.child)}function Pv(s,o,l,d,p){if(Bn(l)){var y=!0;Nc(o)}else y=!1;if(Ia(o,p),o.stateNode===null)Zc(s,o),_v(o,l,d),Zf(o,l,d,p),d=!0;else if(s===null){var E=o.stateNode,A=o.memoizedProps;E.props=A;var M=E.context,K=l.contextType;typeof K=="object"&&K!==null?K=gr(K):(K=Bn(l)?lo:yn.current,K=ya(o,K));var ie=l.getDerivedStateFromProps,ae=typeof ie=="function"||typeof E.getSnapshotBeforeUpdate=="function";ae||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==d||M!==K)&&wv(o,E,d,K),di=!1;var se=o.memoizedState;E.state=se,Uc(o,d,E,p),M=o.memoizedState,A!==d||se!==M||$n.current||di?(typeof ie=="function"&&(Qf(o,l,ie,d),M=o.memoizedState),(A=di||vv(o,l,A,d,se,M,K))?(ae||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=M),E.props=d,E.state=M,E.context=K,d=A):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,Ky(s,o),A=o.memoizedProps,K=o.type===o.elementType?A:Vr(o.type,A),E.props=K,ae=o.pendingProps,se=E.context,M=l.contextType,typeof M=="object"&&M!==null?M=gr(M):(M=Bn(l)?lo:yn.current,M=ya(o,M));var fe=l.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==ae||se!==M)&&wv(o,E,d,M),di=!1,se=o.memoizedState,E.state=se,Uc(o,d,E,p);var ge=o.memoizedState;A!==ae||se!==ge||$n.current||di?(typeof fe=="function"&&(Qf(o,l,fe,d),ge=o.memoizedState),(K=di||vv(o,l,K,d,se,ge,M)||!1)?(ie||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,ge,M),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,ge,M)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ge),E.props=d,E.state=ge,E.context=M,d=K):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),d=!1)}return ep(s,o,l,d,y,p)}function ep(s,o,l,d,p,y){Rv(s,o);var E=(o.flags&128)!==0;if(!d&&!E)return p&&Ly(o,l,!1),Rs(s,o,y);d=o.stateNode,_k.current=o;var A=E&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&E?(o.child=Ea(o,s.child,null,y),o.child=Ea(o,null,A,y)):Pn(s,o,A,y),o.memoizedState=d.state,p&&Ly(o,l,!0),o.child}function Nv(s){var o=s.stateNode;o.pendingContext?Oy(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Oy(s,o.context,!1),Vf(s,o.containerInfo)}function Dv(s,o,l,d,p){return wa(),Rf(p),o.flags|=256,Pn(s,o,l,d),o.child}var tp={dehydrated:null,treeContext:null,retryLane:0};function np(s){return{baseLanes:s,cachePool:null,transitions:null}}function Ov(s,o,l){var d=o.pendingProps,p=yt.current,y=!1,E=(o.flags&128)!==0,A;if((A=E)||(A=s!==null&&s.memoizedState===null?!1:(p&2)!==0),A?(y=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(p|=1),at(yt,p&1),s===null)return Cf(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(E=d.children,s=d.fallback,y?(d=o.mode,y=o.child,E={mode:"hidden",children:E},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=ld(E,d,0,null),s=_o(s,d,l,null),y.return=o,s.return=o,y.sibling=s,o.child=y,o.child.memoizedState=np(l),o.memoizedState=tp,s):rp(o,E));if(p=s.memoizedState,p!==null&&(A=p.dehydrated,A!==null))return wk(s,o,E,d,A,p,l);if(y){y=d.fallback,E=o.mode,p=s.child,A=p.sibling;var M={mode:"hidden",children:d.children};return(E&1)===0&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=M,o.deletions=null):(d=vi(p,M),d.subtreeFlags=p.subtreeFlags&14680064),A!==null?y=vi(A,y):(y=_o(y,E,l,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,E=s.child.memoizedState,E=E===null?np(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=s.childLanes&~l,o.memoizedState=tp,d}return y=s.child,s=y.sibling,d=vi(y,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=l),d.return=o,d.sibling=null,s!==null&&(l=o.deletions,l===null?(o.deletions=[s],o.flags|=16):l.push(s)),o.child=d,o.memoizedState=null,d}function rp(s,o){return o=ld({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Qc(s,o,l,d){return d!==null&&Rf(d),Ea(o,s.child,null,l),s=rp(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function wk(s,o,l,d,p,y,E){if(l)return o.flags&256?(o.flags&=-257,d=Jf(Error(n(422))),Qc(s,o,E,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(y=d.fallback,p=o.mode,d=ld({mode:"visible",children:d.children},p,0,null),y=_o(y,p,E,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,(o.mode&1)!==0&&Ea(o,s.child,null,E),o.child.memoizedState=np(E),o.memoizedState=tp,y);if((o.mode&1)===0)return Qc(s,o,E,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var A=d.dgst;return d=A,y=Error(n(419)),d=Jf(y,d,void 0),Qc(s,o,E,d)}if(A=(E&s.childLanes)!==0,qn||A){if(d=Yt,d!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|E))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,As(s,p),zr(d,s,p,-1))}return _p(),d=Jf(Error(n(421))),Qc(s,o,E,d)}return p.data==="$?"?(o.flags|=128,o.child=s.child,o=Dk.bind(null,s),p._reactRetry=o,null):(s=y.treeContext,ir=ai(p.nextSibling),sr=o,mt=!0,Lr=null,s!==null&&(pr[mr++]=Ss,pr[mr++]=xs,pr[mr++]=uo,Ss=s.id,xs=s.overflow,uo=o),o=rp(o,d.children),o.flags|=4096,o)}function Mv(s,o,l){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),Of(s.return,o,l)}function sp(s,o,l,d,p){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=p)}function Lv(s,o,l){var d=o.pendingProps,p=d.revealOrder,y=d.tail;if(Pn(s,o,d.children,l),d=yt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Mv(s,l,o);else if(s.tag===19)Mv(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(at(yt,d),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)s=l.alternate,s!==null&&$c(s)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),sp(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(s=p.alternate,s!==null&&$c(s)===null){o.child=p;break}s=p.sibling,p.sibling=l,l=p,p=s}sp(o,!0,l,null,y);break;case"together":sp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Zc(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Rs(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),mo|=o.lanes,(l&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,l=vi(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=vi(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function Ek(s,o,l){switch(o.tag){case 3:Nv(o),wa();break;case 5:Zy(o);break;case 1:Bn(o.type)&&Nc(o);break;case 4:Vf(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;at(jc,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(at(yt,yt.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?Ov(s,o,l):(at(yt,yt.current&1),s=Rs(s,o,l),s!==null?s.sibling:null);at(yt,yt.current&1);break;case 19:if(d=(l&o.childLanes)!==0,(s.flags&128)!==0){if(d)return Lv(s,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),at(yt,yt.current),d)break;return null;case 22:case 23:return o.lanes=0,Cv(s,o,l)}return Rs(s,o,l)}var Vv,ip,jv,Fv;Vv=function(s,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},ip=function(){},jv=function(s,o,l,d){var p=s.memoizedProps;if(p!==d){s=o.stateNode,fo(rs.current);var y=null;switch(l){case"input":p=rn(s,p),d=rn(s,d),y=[];break;case"select":p=ue({},p,{value:void 0}),d=ue({},d,{value:void 0}),y=[];break;case"textarea":p=Gr(s,p),d=Gr(s,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=Cc)}Gs(l,d);var E;l=null;for(K in p)if(!d.hasOwnProperty(K)&&p.hasOwnProperty(K)&&p[K]!=null)if(K==="style"){var A=p[K];for(E in A)A.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?y||(y=[]):(y=y||[]).push(K,null));for(K in d){var M=d[K];if(A=p!=null?p[K]:void 0,d.hasOwnProperty(K)&&M!==A&&(M!=null||A!=null))if(K==="style")if(A){for(E in A)!A.hasOwnProperty(E)||M&&M.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in M)M.hasOwnProperty(E)&&A[E]!==M[E]&&(l||(l={}),l[E]=M[E])}else l||(y||(y=[]),y.push(K,l)),l=M;else K==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,A=A?A.__html:void 0,M!=null&&A!==M&&(y=y||[]).push(K,M)):K==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(K,""+M):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(i.hasOwnProperty(K)?(M!=null&&K==="onScroll"&&ct("scroll",s),y||A===M||(y=[])):(y=y||[]).push(K,M))}l&&(y=y||[]).push("style",l);var K=y;(o.updateQueue=K)&&(o.flags|=4)}},Fv=function(s,o,l,d){l!==d&&(o.flags|=4)};function Ql(s,o){if(!mt)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function _n(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,d=0;if(o)for(var p=s.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=d,s.childLanes=l,o}function Tk(s,o,l){var d=o.pendingProps;switch(xf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(o),null;case 1:return Bn(o.type)&&Pc(),_n(o),null;case 3:return d=o.stateNode,ba(),dt($n),dt(yn),zf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Lc(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Lr!==null&&(gp(Lr),Lr=null))),ip(s,o),_n(o),null;case 5:jf(o);var p=fo(ql.current);if(l=o.type,s!==null&&o.stateNode!=null)jv(s,o,l,d,p),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(n(166));return _n(o),null}if(s=fo(rs.current),Lc(o)){d=o.stateNode,l=o.type;var y=o.memoizedProps;switch(d[ns]=o,d[Fl]=y,s=(o.mode&1)!==0,l){case"dialog":ct("cancel",d),ct("close",d);break;case"iframe":case"object":case"embed":ct("load",d);break;case"video":case"audio":for(p=0;p<Ll.length;p++)ct(Ll[p],d);break;case"source":ct("error",d);break;case"img":case"image":case"link":ct("error",d),ct("load",d);break;case"details":ct("toggle",d);break;case"input":Yn(d,y),ct("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},ct("invalid",d);break;case"textarea":gs(d,y),ct("invalid",d)}Gs(l,y),p=null;for(var E in y)if(y.hasOwnProperty(E)){var A=y[E];E==="children"?typeof A=="string"?d.textContent!==A&&(y.suppressHydrationWarning!==!0&&Ac(d.textContent,A,s),p=["children",A]):typeof A=="number"&&d.textContent!==""+A&&(y.suppressHydrationWarning!==!0&&Ac(d.textContent,A,s),p=["children",""+A]):i.hasOwnProperty(E)&&A!=null&&E==="onScroll"&&ct("scroll",d)}switch(l){case"input":Ut(d),Hi(d,y,!0);break;case"textarea":Ut(d),Ki(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Cc)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=St(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=E.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=E.createElement(l,{is:d.is}):(s=E.createElement(l),l==="select"&&(E=s,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):s=E.createElementNS(s,l),s[ns]=o,s[Fl]=d,Vv(s,o,!1,!1),o.stateNode=s;e:{switch(E=Zi(l,d),l){case"dialog":ct("cancel",s),ct("close",s),p=d;break;case"iframe":case"object":case"embed":ct("load",s),p=d;break;case"video":case"audio":for(p=0;p<Ll.length;p++)ct(Ll[p],s);p=d;break;case"source":ct("error",s),p=d;break;case"img":case"image":case"link":ct("error",s),ct("load",s),p=d;break;case"details":ct("toggle",s),p=d;break;case"input":Yn(s,d),p=rn(s,d),ct("invalid",s);break;case"option":p=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},p=ue({},d,{value:void 0}),ct("invalid",s);break;case"textarea":gs(s,d),p=Gr(s,d),ct("invalid",s);break;default:p=d}Gs(l,p),A=p;for(y in A)if(A.hasOwnProperty(y)){var M=A[y];y==="style"?Qi(s,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&kr(s,M)):y==="children"?typeof M=="string"?(l!=="textarea"||M!=="")&&Sr(s,M):typeof M=="number"&&Sr(s,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?M!=null&&y==="onScroll"&&ct("scroll",s):M!=null&&H(s,y,M,E))}switch(l){case"input":Ut(s),Hi(s,d,!1);break;case"textarea":Ut(s),Ki(s);break;case"option":d.value!=null&&s.setAttribute("value",""+Ve(d.value));break;case"select":s.multiple=!!d.multiple,y=d.value,y!=null?Vn(s,!!d.multiple,y,!1):d.defaultValue!=null&&Vn(s,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(s.onclick=Cc)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return _n(o),null;case 6:if(s&&o.stateNode!=null)Fv(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(n(166));if(l=fo(ql.current),fo(rs.current),Lc(o)){if(d=o.stateNode,l=o.memoizedProps,d[ns]=o,(y=d.nodeValue!==l)&&(s=sr,s!==null))switch(s.tag){case 3:Ac(d.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Ac(d.nodeValue,l,(s.mode&1)!==0)}y&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[ns]=o,o.stateNode=d}return _n(o),null;case 13:if(dt(yt),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(mt&&ir!==null&&(o.mode&1)!==0&&(o.flags&128)===0)$y(),wa(),o.flags|=98560,y=!1;else if(y=Lc(o),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(n(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[ns]=o}else wa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_n(o),y=!1}else Lr!==null&&(gp(Lr),Lr=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(yt.current&1)!==0?Wt===0&&(Wt=3):_p())),o.updateQueue!==null&&(o.flags|=4),_n(o),null);case 4:return ba(),ip(s,o),s===null&&Vl(o.stateNode.containerInfo),_n(o),null;case 10:return Df(o.type._context),_n(o),null;case 17:return Bn(o.type)&&Pc(),_n(o),null;case 19:if(dt(yt),y=o.memoizedState,y===null)return _n(o),null;if(d=(o.flags&128)!==0,E=y.rendering,E===null)if(d)Ql(y,!1);else{if(Wt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(E=$c(s),E!==null){for(o.flags|=128,Ql(y,!1),d=E.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)y=l,s=d,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,s=E.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return at(yt,yt.current&1|2),o.child}s=s.sibling}y.tail!==null&&ot()>Aa&&(o.flags|=128,d=!0,Ql(y,!1),o.lanes=4194304)}else{if(!d)if(s=$c(E),s!==null){if(o.flags|=128,d=!0,l=s.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Ql(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!mt)return _n(o),null}else 2*ot()-y.renderingStartTime>Aa&&l!==1073741824&&(o.flags|=128,d=!0,Ql(y,!1),o.lanes=4194304);y.isBackwards?(E.sibling=o.child,o.child=E):(l=y.last,l!==null?l.sibling=E:o.child=E,y.last=E)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=ot(),o.sibling=null,l=yt.current,at(yt,d?l&1|2:l&1),o):(_n(o),null);case 22:case 23:return vp(),d=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(or&1073741824)!==0&&(_n(o),o.subtreeFlags&6&&(o.flags|=8192)):_n(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function Ik(s,o){switch(xf(o),o.tag){case 1:return Bn(o.type)&&Pc(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ba(),dt($n),dt(yn),zf(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return jf(o),null;case 13:if(dt(yt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));wa()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return dt(yt),null;case 4:return ba(),null;case 10:return Df(o.type._context),null;case 22:case 23:return vp(),null;case 24:return null;default:return null}}var Jc=!1,wn=!1,bk=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Sa(s,o){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){bt(s,o,d)}else l.current=null}function op(s,o,l){try{l()}catch(d){bt(s,o,d)}}var zv=!1;function kk(s,o){if(vf=si,s=vy(),cf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var E=0,A=-1,M=-1,K=0,ie=0,ae=s,se=null;t:for(;;){for(var fe;ae!==l||p!==0&&ae.nodeType!==3||(A=E+p),ae!==y||d!==0&&ae.nodeType!==3||(M=E+d),ae.nodeType===3&&(E+=ae.nodeValue.length),(fe=ae.firstChild)!==null;)se=ae,ae=fe;for(;;){if(ae===s)break t;if(se===l&&++K===p&&(A=E),se===y&&++ie===d&&(M=E),(fe=ae.nextSibling)!==null)break;ae=se,se=ae.parentNode}ae=fe}l=A===-1||M===-1?null:{start:A,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(_f={focusedElem:s,selectionRange:l},si=!1,pe=o;pe!==null;)if(o=pe,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,pe=s;else for(;pe!==null;){o=pe;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var _e=ge.memoizedProps,xt=ge.memoizedState,B=o.stateNode,j=B.getSnapshotBeforeUpdate(o.elementType===o.type?_e:Vr(o.type,_e),xt);B.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var W=o.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(le){bt(o,o.return,le)}if(s=o.sibling,s!==null){s.return=o.return,pe=s;break}pe=o.return}return ge=zv,zv=!1,ge}function Zl(s,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&s)===s){var y=p.destroy;p.destroy=void 0,y!==void 0&&op(o,l,y)}p=p.next}while(p!==d)}}function Yc(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&s)===s){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function ap(s){var o=s.ref;if(o!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof o=="function"?o(s):o.current=s}}function Uv(s){var o=s.alternate;o!==null&&(s.alternate=null,Uv(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[ns],delete o[Fl],delete o[If],delete o[ak],delete o[lk])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function $v(s){return s.tag===5||s.tag===3||s.tag===4}function Bv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||$v(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function lp(s,o,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(s,o):l.insertBefore(s,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(s,l)):(o=l,o.appendChild(s)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Cc));else if(d!==4&&(s=s.child,s!==null))for(lp(s,o,l),s=s.sibling;s!==null;)lp(s,o,l),s=s.sibling}function up(s,o,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(up(s,o,l),s=s.sibling;s!==null;)up(s,o,l),s=s.sibling}var ln=null,jr=!1;function fi(s,o,l){for(l=l.child;l!==null;)qv(s,o,l),l=l.sibling}function qv(s,o,l){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(eo,l)}catch{}switch(l.tag){case 5:wn||Sa(l,o);case 6:var d=ln,p=jr;ln=null,fi(s,o,l),ln=d,jr=p,ln!==null&&(jr?(s=ln,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):ln.removeChild(l.stateNode));break;case 18:ln!==null&&(jr?(s=ln,l=l.stateNode,s.nodeType===8?Tf(s.parentNode,l):s.nodeType===1&&Tf(s,l),Dr(s)):Tf(ln,l.stateNode));break;case 4:d=ln,p=jr,ln=l.stateNode.containerInfo,jr=!0,fi(s,o,l),ln=d,jr=p;break;case 0:case 11:case 14:case 15:if(!wn&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&op(l,o,E),p=p.next}while(p!==d)}fi(s,o,l);break;case 1:if(!wn&&(Sa(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(A){bt(l,o,A)}fi(s,o,l);break;case 21:fi(s,o,l);break;case 22:l.mode&1?(wn=(d=wn)||l.memoizedState!==null,fi(s,o,l),wn=d):fi(s,o,l);break;default:fi(s,o,l)}}function Wv(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new bk),o.forEach(function(d){var p=Ok.bind(null,s,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Fr(s,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var y=s,E=o,A=E;e:for(;A!==null;){switch(A.tag){case 5:ln=A.stateNode,jr=!1;break e;case 3:ln=A.stateNode.containerInfo,jr=!0;break e;case 4:ln=A.stateNode.containerInfo,jr=!0;break e}A=A.return}if(ln===null)throw Error(n(160));qv(y,E,p),ln=null,jr=!1;var M=p.alternate;M!==null&&(M.return=null),p.return=null}catch(K){bt(p,o,K)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Hv(o,s),o=o.sibling}function Hv(s,o){var l=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Fr(o,s),is(s),d&4){try{Zl(3,s,s.return),Yc(3,s)}catch(_e){bt(s,s.return,_e)}try{Zl(5,s,s.return)}catch(_e){bt(s,s.return,_e)}}break;case 1:Fr(o,s),is(s),d&512&&l!==null&&Sa(l,l.return);break;case 5:if(Fr(o,s),is(s),d&512&&l!==null&&Sa(l,l.return),s.flags&32){var p=s.stateNode;try{Sr(p,"")}catch(_e){bt(s,s.return,_e)}}if(d&4&&(p=s.stateNode,p!=null)){var y=s.memoizedProps,E=l!==null?l.memoizedProps:y,A=s.type,M=s.updateQueue;if(s.updateQueue=null,M!==null)try{A==="input"&&y.type==="radio"&&y.name!=null&&lr(p,y),Zi(A,E);var K=Zi(A,y);for(E=0;E<M.length;E+=2){var ie=M[E],ae=M[E+1];ie==="style"?Qi(p,ae):ie==="dangerouslySetInnerHTML"?kr(p,ae):ie==="children"?Sr(p,ae):H(p,ie,ae,K)}switch(A){case"input":Ks(p,y);break;case"textarea":ys(p,y);break;case"select":var se=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var fe=y.value;fe!=null?Vn(p,!!y.multiple,fe,!1):se!==!!y.multiple&&(y.defaultValue!=null?Vn(p,!!y.multiple,y.defaultValue,!0):Vn(p,!!y.multiple,y.multiple?[]:"",!1))}p[Fl]=y}catch(_e){bt(s,s.return,_e)}}break;case 6:if(Fr(o,s),is(s),d&4){if(s.stateNode===null)throw Error(n(162));p=s.stateNode,y=s.memoizedProps;try{p.nodeValue=y}catch(_e){bt(s,s.return,_e)}}break;case 3:if(Fr(o,s),is(s),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Dr(o.containerInfo)}catch(_e){bt(s,s.return,_e)}break;case 4:Fr(o,s),is(s);break;case 13:Fr(o,s),is(s),p=s.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(hp=ot())),d&4&&Wv(s);break;case 22:if(ie=l!==null&&l.memoizedState!==null,s.mode&1?(wn=(K=wn)||ie,Fr(o,s),wn=K):Fr(o,s),is(s),d&8192){if(K=s.memoizedState!==null,(s.stateNode.isHidden=K)&&!ie&&(s.mode&1)!==0)for(pe=s,ie=s.child;ie!==null;){for(ae=pe=ie;pe!==null;){switch(se=pe,fe=se.child,se.tag){case 0:case 11:case 14:case 15:Zl(4,se,se.return);break;case 1:Sa(se,se.return);var ge=se.stateNode;if(typeof ge.componentWillUnmount=="function"){d=se,l=se.return;try{o=d,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(_e){bt(d,l,_e)}}break;case 5:Sa(se,se.return);break;case 22:if(se.memoizedState!==null){Qv(ae);continue}}fe!==null?(fe.return=se,pe=fe):Qv(ae)}ie=ie.sibling}e:for(ie=null,ae=s;;){if(ae.tag===5){if(ie===null){ie=ae;try{p=ae.stateNode,K?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(A=ae.stateNode,M=ae.memoizedProps.style,E=M!=null&&M.hasOwnProperty("display")?M.display:null,A.style.display=Gi("display",E))}catch(_e){bt(s,s.return,_e)}}}else if(ae.tag===6){if(ie===null)try{ae.stateNode.nodeValue=K?"":ae.memoizedProps}catch(_e){bt(s,s.return,_e)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===s)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===s)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===s)break e;ie===ae&&(ie=null),ae=ae.return}ie===ae&&(ie=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Fr(o,s),is(s),d&4&&Wv(s);break;case 21:break;default:Fr(o,s),is(s)}}function is(s){var o=s.flags;if(o&2){try{e:{for(var l=s.return;l!==null;){if($v(l)){var d=l;break e}l=l.return}throw Error(n(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Sr(p,""),d.flags&=-33);var y=Bv(s);up(s,y,p);break;case 3:case 4:var E=d.stateNode.containerInfo,A=Bv(s);lp(s,A,E);break;default:throw Error(n(161))}}catch(M){bt(s,s.return,M)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Sk(s,o,l){pe=s,Kv(s)}function Kv(s,o,l){for(var d=(s.mode&1)!==0;pe!==null;){var p=pe,y=p.child;if(p.tag===22&&d){var E=p.memoizedState!==null||Jc;if(!E){var A=p.alternate,M=A!==null&&A.memoizedState!==null||wn;A=Jc;var K=wn;if(Jc=E,(wn=M)&&!K)for(pe=p;pe!==null;)E=pe,M=E.child,E.tag===22&&E.memoizedState!==null?Zv(p):M!==null?(M.return=E,pe=M):Zv(p);for(;y!==null;)pe=y,Kv(y),y=y.sibling;pe=p,Jc=A,wn=K}Gv(s)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,pe=y):Gv(s)}}function Gv(s){for(;pe!==null;){var o=pe;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:wn||Yc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!wn)if(l===null)d.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Vr(o.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Qy(o,y,d);break;case 3:var E=o.updateQueue;if(E!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Qy(o,E,l)}break;case 5:var A=o.stateNode;if(l===null&&o.flags&4){l=A;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&l.focus();break;case"img":M.src&&(l.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var K=o.alternate;if(K!==null){var ie=K.memoizedState;if(ie!==null){var ae=ie.dehydrated;ae!==null&&Dr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}wn||o.flags&512&&ap(o)}catch(se){bt(o,o.return,se)}}if(o===s){pe=null;break}if(l=o.sibling,l!==null){l.return=o.return,pe=l;break}pe=o.return}}function Qv(s){for(;pe!==null;){var o=pe;if(o===s){pe=null;break}var l=o.sibling;if(l!==null){l.return=o.return,pe=l;break}pe=o.return}}function Zv(s){for(;pe!==null;){var o=pe;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Yc(4,o)}catch(M){bt(o,l,M)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(M){bt(o,p,M)}}var y=o.return;try{ap(o)}catch(M){bt(o,y,M)}break;case 5:var E=o.return;try{ap(o)}catch(M){bt(o,E,M)}}}catch(M){bt(o,o.return,M)}if(o===s){pe=null;break}var A=o.sibling;if(A!==null){A.return=o.return,pe=A;break}pe=o.return}}var xk=Math.ceil,Xc=J.ReactCurrentDispatcher,cp=J.ReactCurrentOwner,vr=J.ReactCurrentBatchConfig,Je=0,Yt=null,Mt=null,un=0,or=0,xa=li(0),Wt=0,Jl=null,mo=0,ed=0,dp=0,Yl=null,Wn=null,hp=0,Aa=1/0,Ps=null,td=!1,fp=null,pi=null,nd=!1,mi=null,rd=0,Xl=0,pp=null,sd=-1,id=0;function Nn(){return(Je&6)!==0?ot():sd!==-1?sd:sd=ot()}function gi(s){return(s.mode&1)===0?1:(Je&2)!==0&&un!==0?un&-un:ck.transition!==null?(id===0&&(id=no()),id):(s=qe,s!==0||(s=window.event,s=s===void 0?16:xl(s.type)),s)}function zr(s,o,l,d){if(50<Xl)throw Xl=0,pp=null,Error(n(185));ei(s,l,d),((Je&2)===0||s!==Yt)&&(s===Yt&&((Je&2)===0&&(ed|=l),Wt===4&&yi(s,un)),Hn(s,d),l===1&&Je===0&&(o.mode&1)===0&&(Aa=ot()+500,Dc&&ci()))}function Hn(s,o){var l=s.callbackNode;_s(s,o);var d=to(s,s===Yt?un:0);if(d===0)l!==null&&Tl(l),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(l!=null&&Tl(l),o===1)s.tag===0?uk(Yv.bind(null,s)):Vy(Yv.bind(null,s)),ik(function(){(Je&6)===0&&ci()}),l=null;else{switch(ni(d)){case 1:l=Xi;break;case 4:l=Js;break;case 16:l=dr;break;case 536870912:l=ic;break;default:l=dr}l=o_(l,Jv.bind(null,s))}s.callbackPriority=o,s.callbackNode=l}}function Jv(s,o){if(sd=-1,id=0,(Je&6)!==0)throw Error(n(327));var l=s.callbackNode;if(Ca()&&s.callbackNode!==l)return null;var d=to(s,s===Yt?un:0);if(d===0)return null;if((d&30)!==0||(d&s.expiredLanes)!==0||o)o=od(s,d);else{o=d;var p=Je;Je|=2;var y=e_();(Yt!==s||un!==o)&&(Ps=null,Aa=ot()+500,yo(s,o));do try{Rk();break}catch(A){Xv(s,A)}while(!0);Nf(),Xc.current=y,Je=p,Mt!==null?o=0:(Yt=null,un=0,o=Wt)}if(o!==0){if(o===2&&(p=tr(s),p!==0&&(d=p,o=mp(s,p))),o===1)throw l=Jl,yo(s,0),yi(s,d),Hn(s,ot()),l;if(o===6)yi(s,d);else{if(p=s.current.alternate,(d&30)===0&&!Ak(p)&&(o=od(s,d),o===2&&(y=tr(s),y!==0&&(d=y,o=mp(s,y))),o===1))throw l=Jl,yo(s,0),yi(s,d),Hn(s,ot()),l;switch(s.finishedWork=p,s.finishedLanes=d,o){case 0:case 1:throw Error(n(345));case 2:vo(s,Wn,Ps);break;case 3:if(yi(s,d),(d&130023424)===d&&(o=hp+500-ot(),10<o)){if(to(s,0)!==0)break;if(p=s.suspendedLanes,(p&d)!==d){Nn(),s.pingedLanes|=s.suspendedLanes&p;break}s.timeoutHandle=Ef(vo.bind(null,s,Wn,Ps),o);break}vo(s,Wn,Ps);break;case 4:if(yi(s,d),(d&4194240)===d)break;for(o=s.eventTimes,p=-1;0<d;){var E=31-Cn(d);y=1<<E,E=o[E],E>p&&(p=E),d&=~y}if(d=p,d=ot()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*xk(d/1960))-d,10<d){s.timeoutHandle=Ef(vo.bind(null,s,Wn,Ps),d);break}vo(s,Wn,Ps);break;case 5:vo(s,Wn,Ps);break;default:throw Error(n(329))}}}return Hn(s,ot()),s.callbackNode===l?Jv.bind(null,s):null}function mp(s,o){var l=Yl;return s.current.memoizedState.isDehydrated&&(yo(s,o).flags|=256),s=od(s,o),s!==2&&(o=Wn,Wn=l,o!==null&&gp(o)),s}function gp(s){Wn===null?Wn=s:Wn.push.apply(Wn,s)}function Ak(s){for(var o=s;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],y=p.getSnapshot;p=p.value;try{if(!Mr(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function yi(s,o){for(o&=~dp,o&=~ed,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var l=31-Cn(o),d=1<<l;s[l]=-1,o&=~d}}function Yv(s){if((Je&6)!==0)throw Error(n(327));Ca();var o=to(s,0);if((o&1)===0)return Hn(s,ot()),null;var l=od(s,o);if(s.tag!==0&&l===2){var d=tr(s);d!==0&&(o=d,l=mp(s,d))}if(l===1)throw l=Jl,yo(s,0),yi(s,o),Hn(s,ot()),l;if(l===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,vo(s,Wn,Ps),Hn(s,ot()),null}function yp(s,o){var l=Je;Je|=1;try{return s(o)}finally{Je=l,Je===0&&(Aa=ot()+500,Dc&&ci())}}function go(s){mi!==null&&mi.tag===0&&(Je&6)===0&&Ca();var o=Je;Je|=1;var l=vr.transition,d=qe;try{if(vr.transition=null,qe=1,s)return s()}finally{qe=d,vr.transition=l,Je=o,(Je&6)===0&&ci()}}function vp(){or=xa.current,dt(xa)}function yo(s,o){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,sk(l)),Mt!==null)for(l=Mt.return;l!==null;){var d=l;switch(xf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Pc();break;case 3:ba(),dt($n),dt(yn),zf();break;case 5:jf(d);break;case 4:ba();break;case 13:dt(yt);break;case 19:dt(yt);break;case 10:Df(d.type._context);break;case 22:case 23:vp()}l=l.return}if(Yt=s,Mt=s=vi(s.current,null),un=or=o,Wt=0,Jl=null,dp=ed=mo=0,Wn=Yl=null,ho!==null){for(o=0;o<ho.length;o++)if(l=ho[o],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,y=l.pending;if(y!==null){var E=y.next;y.next=p,d.next=E}l.pending=d}ho=null}return s}function Xv(s,o){do{var l=Mt;try{if(Nf(),Bc.current=Kc,qc){for(var d=vt.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}qc=!1}if(po=0,Jt=qt=vt=null,Wl=!1,Hl=0,cp.current=null,l===null||l.return===null){Wt=1,Jl=o,Mt=null;break}e:{var y=s,E=l.return,A=l,M=o;if(o=un,A.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var K=M,ie=A,ae=ie.tag;if((ie.mode&1)===0&&(ae===0||ae===11||ae===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=bv(E);if(fe!==null){fe.flags&=-257,kv(fe,E,A,y,o),fe.mode&1&&Iv(y,K,o),o=fe,M=K;var ge=o.updateQueue;if(ge===null){var _e=new Set;_e.add(M),o.updateQueue=_e}else ge.add(M);break e}else{if((o&1)===0){Iv(y,K,o),_p();break e}M=Error(n(426))}}else if(mt&&A.mode&1){var xt=bv(E);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),kv(xt,E,A,y,o),Rf(ka(M,A));break e}}y=M=ka(M,A),Wt!==4&&(Wt=2),Yl===null?Yl=[y]:Yl.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var B=Ev(y,M,o);Gy(y,B);break e;case 1:A=M;var j=y.type,W=y.stateNode;if((y.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(pi===null||!pi.has(W)))){y.flags|=65536,o&=-o,y.lanes|=o;var le=Tv(y,A,o);Gy(y,le);break e}}y=y.return}while(y!==null)}n_(l)}catch(Te){o=Te,Mt===l&&l!==null&&(Mt=l=l.return);continue}break}while(!0)}function e_(){var s=Xc.current;return Xc.current=Kc,s===null?Kc:s}function _p(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Yt===null||(mo&268435455)===0&&(ed&268435455)===0||yi(Yt,un)}function od(s,o){var l=Je;Je|=2;var d=e_();(Yt!==s||un!==o)&&(Ps=null,yo(s,o));do try{Ck();break}catch(p){Xv(s,p)}while(!0);if(Nf(),Je=l,Xc.current=d,Mt!==null)throw Error(n(261));return Yt=null,un=0,Wt}function Ck(){for(;Mt!==null;)t_(Mt)}function Rk(){for(;Mt!==null&&!rc();)t_(Mt)}function t_(s){var o=i_(s.alternate,s,or);s.memoizedProps=s.pendingProps,o===null?n_(s):Mt=o,cp.current=null}function n_(s){var o=s;do{var l=o.alternate;if(s=o.return,(o.flags&32768)===0){if(l=Tk(l,o,or),l!==null){Mt=l;return}}else{if(l=Ik(l,o),l!==null){l.flags&=32767,Mt=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Wt=6,Mt=null;return}}if(o=o.sibling,o!==null){Mt=o;return}Mt=o=s}while(o!==null);Wt===0&&(Wt=5)}function vo(s,o,l){var d=qe,p=vr.transition;try{vr.transition=null,qe=1,Pk(s,o,l,d)}finally{vr.transition=p,qe=d}return null}function Pk(s,o,l,d){do Ca();while(mi!==null);if((Je&6)!==0)throw Error(n(327));l=s.finishedWork;var p=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var y=l.lanes|l.childLanes;if(st(s,y),s===Yt&&(Mt=Yt=null,un=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||nd||(nd=!0,o_(dr,function(){return Ca(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=vr.transition,vr.transition=null;var E=qe;qe=1;var A=Je;Je|=4,cp.current=null,kk(s,l),Hv(l,s),Jb(_f),si=!!vf,_f=vf=null,s.current=l,Sk(l),tf(),Je=A,qe=E,vr.transition=y}else s.current=l;if(nd&&(nd=!1,mi=s,rd=p),y=s.pendingLanes,y===0&&(pi=null),oc(l.stateNode),Hn(s,ot()),o!==null)for(d=s.onRecoverableError,l=0;l<o.length;l++)p=o[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(td)throw td=!1,s=fp,fp=null,s;return(rd&1)!==0&&s.tag!==0&&Ca(),y=s.pendingLanes,(y&1)!==0?s===pp?Xl++:(Xl=0,pp=s):Xl=0,ci(),null}function Ca(){if(mi!==null){var s=ni(rd),o=vr.transition,l=qe;try{if(vr.transition=null,qe=16>s?16:s,mi===null)var d=!1;else{if(s=mi,mi=null,rd=0,(Je&6)!==0)throw Error(n(331));var p=Je;for(Je|=4,pe=s.current;pe!==null;){var y=pe,E=y.child;if((pe.flags&16)!==0){var A=y.deletions;if(A!==null){for(var M=0;M<A.length;M++){var K=A[M];for(pe=K;pe!==null;){var ie=pe;switch(ie.tag){case 0:case 11:case 15:Zl(8,ie,y)}var ae=ie.child;if(ae!==null)ae.return=ie,pe=ae;else for(;pe!==null;){ie=pe;var se=ie.sibling,fe=ie.return;if(Uv(ie),ie===K){pe=null;break}if(se!==null){se.return=fe,pe=se;break}pe=fe}}}var ge=y.alternate;if(ge!==null){var _e=ge.child;if(_e!==null){ge.child=null;do{var xt=_e.sibling;_e.sibling=null,_e=xt}while(_e!==null)}}pe=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,pe=E;else e:for(;pe!==null;){if(y=pe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Zl(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,pe=B;break e}pe=y.return}}var j=s.current;for(pe=j;pe!==null;){E=pe;var W=E.child;if((E.subtreeFlags&2064)!==0&&W!==null)W.return=E,pe=W;else e:for(E=j;pe!==null;){if(A=pe,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Yc(9,A)}}catch(Te){bt(A,A.return,Te)}if(A===E){pe=null;break e}var le=A.sibling;if(le!==null){le.return=A.return,pe=le;break e}pe=A.return}}if(Je=p,ci(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(eo,s)}catch{}d=!0}return d}finally{qe=l,vr.transition=o}}return!1}function r_(s,o,l){o=ka(l,o),o=Ev(s,o,1),s=hi(s,o,1),o=Nn(),s!==null&&(ei(s,1,o),Hn(s,o))}function bt(s,o,l){if(s.tag===3)r_(s,s,l);else for(;o!==null;){if(o.tag===3){r_(o,s,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(pi===null||!pi.has(d))){s=ka(l,s),s=Tv(o,s,1),o=hi(o,s,1),s=Nn(),o!==null&&(ei(o,1,s),Hn(o,s));break}}o=o.return}}function Nk(s,o,l){var d=s.pingCache;d!==null&&d.delete(o),o=Nn(),s.pingedLanes|=s.suspendedLanes&l,Yt===s&&(un&l)===l&&(Wt===4||Wt===3&&(un&130023424)===un&&500>ot()-hp?yo(s,0):dp|=l),Hn(s,o)}function s_(s,o){o===0&&((s.mode&1)===0?o=1:(o=Yo,Yo<<=1,(Yo&130023424)===0&&(Yo=4194304)));var l=Nn();s=As(s,o),s!==null&&(ei(s,o,l),Hn(s,l))}function Dk(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),s_(s,l)}function Ok(s,o){var l=0;switch(s.tag){case 13:var d=s.stateNode,p=s.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(n(314))}d!==null&&d.delete(o),s_(s,l)}var i_;i_=function(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps||$n.current)qn=!0;else{if((s.lanes&l)===0&&(o.flags&128)===0)return qn=!1,Ek(s,o,l);qn=(s.flags&131072)!==0}else qn=!1,mt&&(o.flags&1048576)!==0&&jy(o,Mc,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Zc(s,o),s=o.pendingProps;var p=ya(o,yn.current);Ia(o,l),p=Bf(null,o,d,s,p,l);var y=qf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Bn(d)?(y=!0,Nc(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Lf(o),p.updater=Gc,o.stateNode=p,p._reactInternals=o,Zf(o,d,s,l),o=ep(null,o,d,!0,y,l)):(o.tag=0,mt&&y&&Sf(o),Pn(null,o,p,l),o=o.child),o;case 16:d=o.elementType;e:{switch(Zc(s,o),s=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=Lk(d),s=Vr(d,s),p){case 0:o=Xf(null,o,d,s,l);break e;case 1:o=Pv(null,o,d,s,l);break e;case 11:o=Sv(null,o,d,s,l);break e;case 14:o=xv(null,o,d,Vr(d.type,s),l);break e}throw Error(n(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Vr(d,p),Xf(s,o,d,p,l);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Vr(d,p),Pv(s,o,d,p,l);case 3:e:{if(Nv(o),s===null)throw Error(n(387));d=o.pendingProps,y=o.memoizedState,p=y.element,Ky(s,o),Uc(o,d,null,l);var E=o.memoizedState;if(d=E.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=ka(Error(n(423)),o),o=Dv(s,o,d,l,p);break e}else if(d!==p){p=ka(Error(n(424)),o),o=Dv(s,o,d,l,p);break e}else for(ir=ai(o.stateNode.containerInfo.firstChild),sr=o,mt=!0,Lr=null,l=Wy(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(wa(),d===p){o=Rs(s,o,l);break e}Pn(s,o,d,l)}o=o.child}return o;case 5:return Zy(o),s===null&&Cf(o),d=o.type,p=o.pendingProps,y=s!==null?s.memoizedProps:null,E=p.children,wf(d,p)?E=null:y!==null&&wf(d,y)&&(o.flags|=32),Rv(s,o),Pn(s,o,E,l),o.child;case 6:return s===null&&Cf(o),null;case 13:return Ov(s,o,l);case 4:return Vf(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=Ea(o,null,d,l):Pn(s,o,d,l),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Vr(d,p),Sv(s,o,d,p,l);case 7:return Pn(s,o,o.pendingProps,l),o.child;case 8:return Pn(s,o,o.pendingProps.children,l),o.child;case 12:return Pn(s,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,y=o.memoizedProps,E=p.value,at(jc,d._currentValue),d._currentValue=E,y!==null)if(Mr(y.value,E)){if(y.children===p.children&&!$n.current){o=Rs(s,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var A=y.dependencies;if(A!==null){E=y.child;for(var M=A.firstContext;M!==null;){if(M.context===d){if(y.tag===1){M=Cs(-1,l&-l),M.tag=2;var K=y.updateQueue;if(K!==null){K=K.shared;var ie=K.pending;ie===null?M.next=M:(M.next=ie.next,ie.next=M),K.pending=M}}y.lanes|=l,M=y.alternate,M!==null&&(M.lanes|=l),Of(y.return,l,o),A.lanes|=l;break}M=M.next}}else if(y.tag===10)E=y.type===o.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(n(341));E.lanes|=l,A=E.alternate,A!==null&&(A.lanes|=l),Of(E,l,o),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===o){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}Pn(s,o,p.children,l),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,Ia(o,l),p=gr(p),d=d(p),o.flags|=1,Pn(s,o,d,l),o.child;case 14:return d=o.type,p=Vr(d,o.pendingProps),p=Vr(d.type,p),xv(s,o,d,p,l);case 15:return Av(s,o,o.type,o.pendingProps,l);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Vr(d,p),Zc(s,o),o.tag=1,Bn(d)?(s=!0,Nc(o)):s=!1,Ia(o,l),_v(o,d,p),Zf(o,d,p,l),ep(null,o,d,!0,s,l);case 19:return Lv(s,o,l);case 22:return Cv(s,o,l)}throw Error(n(156,o.tag))};function o_(s,o){return Zo(s,o)}function Mk(s,o,l,d){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(s,o,l,d){return new Mk(s,o,l,d)}function wp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Lk(s){if(typeof s=="function")return wp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===L)return 11;if(s===et)return 14}return 2}function vi(s,o){var l=s.alternate;return l===null?(l=_r(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function ad(s,o,l,d,p,y){var E=2;if(d=s,typeof s=="function")wp(s)&&(E=1);else if(typeof s=="string")E=5;else e:switch(s){case C:return _o(l.children,p,y,o);case T:E=8,p|=8;break;case x:return s=_r(12,l,o,p|2),s.elementType=x,s.lanes=y,s;case R:return s=_r(13,l,o,p),s.elementType=R,s.lanes=y,s;case Ue:return s=_r(19,l,o,p),s.elementType=Ue,s.lanes=y,s;case re:return ld(l,p,y,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:E=10;break e;case D:E=9;break e;case L:E=11;break e;case et:E=14;break e;case Ze:E=16,d=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return o=_r(E,l,o,p),o.elementType=s,o.type=d,o.lanes=y,o}function _o(s,o,l,d){return s=_r(7,s,d,o),s.lanes=l,s}function ld(s,o,l,d){return s=_r(22,s,d,o),s.elementType=re,s.lanes=l,s.stateNode={isHidden:!1},s}function Ep(s,o,l){return s=_r(6,s,null,o),s.lanes=l,s}function Tp(s,o,l){return o=_r(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function Vk(s,o,l,d,p){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xs(0),this.expirationTimes=Xs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xs(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Ip(s,o,l,d,p,y,E,A,M){return s=new Vk(s,o,l,A,M),o===1?(o=1,y===!0&&(o|=8)):o=0,y=_r(3,null,null,o),s.current=y,y.stateNode=s,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lf(y),s}function jk(s,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:d==null?null:""+d,children:s,containerInfo:o,implementation:l}}function a_(s){if(!s)return ui;s=s._reactInternals;e:{if(Ar(s)!==s||s.tag!==1)throw Error(n(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Bn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(s.tag===1){var l=s.type;if(Bn(l))return My(s,l,o)}return o}function l_(s,o,l,d,p,y,E,A,M){return s=Ip(l,d,!0,s,p,y,E,A,M),s.context=a_(null),l=s.current,d=Nn(),p=gi(l),y=Cs(d,p),y.callback=o??null,hi(l,y,p),s.current.lanes=p,ei(s,p,d),Hn(s,d),s}function ud(s,o,l,d){var p=o.current,y=Nn(),E=gi(p);return l=a_(l),o.context===null?o.context=l:o.pendingContext=l,o=Cs(y,E),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=hi(p,o,E),s!==null&&(zr(s,p,E,y),zc(s,p,E)),E}function cd(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function u_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function bp(s,o){u_(s,o),(s=s.alternate)&&u_(s,o)}function Fk(){return null}var c_=typeof reportError=="function"?reportError:function(s){console.error(s)};function kp(s){this._internalRoot=s}dd.prototype.render=kp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));ud(s,o,null,null)},dd.prototype.unmount=kp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;go(function(){ud(null,s,null,null)}),o[bs]=null}};function dd(s){this._internalRoot=s}dd.prototype.unstable_scheduleHydration=function(s){if(s){var o=dc();s={blockedOn:null,target:s,priority:o};for(var l=0;l<Yr.length&&o!==0&&o<Yr[l].priority;l++);Yr.splice(l,0,s),l===0&&pc(s)}};function Sp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function hd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function d_(){}function zk(s,o,l,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var K=cd(E);y.call(K)}}var E=l_(o,d,s,0,null,!1,!1,"",d_);return s._reactRootContainer=E,s[bs]=E.current,Vl(s.nodeType===8?s.parentNode:s),go(),E}for(;p=s.lastChild;)s.removeChild(p);if(typeof d=="function"){var A=d;d=function(){var K=cd(M);A.call(K)}}var M=Ip(s,0,!1,null,null,!1,!1,"",d_);return s._reactRootContainer=M,s[bs]=M.current,Vl(s.nodeType===8?s.parentNode:s),go(function(){ud(o,M,l,d)}),M}function fd(s,o,l,d,p){var y=l._reactRootContainer;if(y){var E=y;if(typeof p=="function"){var A=p;p=function(){var M=cd(E);A.call(M)}}ud(o,E,s,p)}else E=zk(l,o,s,p,d);return cd(E)}uc=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var l=Ys(o.pendingLanes);l!==0&&(ti(o,l|1),Hn(o,ot()),(Je&6)===0&&(Aa=ot()+500,ci()))}break;case 13:go(function(){var d=As(s,1);if(d!==null){var p=Nn();zr(d,s,1,p)}}),bp(s,1)}},Xo=function(s){if(s.tag===13){var o=As(s,134217728);if(o!==null){var l=Nn();zr(o,s,134217728,l)}bp(s,134217728)}},cc=function(s){if(s.tag===13){var o=gi(s),l=As(s,o);if(l!==null){var d=Nn();zr(l,s,o,d)}bp(s,o)}},dc=function(){return qe},hc=function(s,o){var l=qe;try{return qe=s,o()}finally{qe=l}},Zs=function(s,o,l){switch(o){case"input":if(Ks(s,l),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==s&&d.form===s.form){var p=Rc(d);if(!p)throw Error(n(90));Tt(d),Ks(d,p)}}}break;case"textarea":ys(s,l);break;case"select":o=l.value,o!=null&&Vn(s,!!l.multiple,o,!1)}},Pt=yp,$t=go;var Uk={usingClientEntryPoint:!1,Events:[zl,ma,Rc,ft,Fn,yp]},eu={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$k={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=El(s),s===null?null:s.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||Fk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{eo=pd.inject($k),er=pd}catch{}}return Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uk,Kn.createPortal=function(s,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sp(o))throw Error(n(200));return jk(s,o,null,l)},Kn.createRoot=function(s,o){if(!Sp(s))throw Error(n(299));var l=!1,d="",p=c_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Ip(s,1,!1,null,null,l,!1,d,p),s[bs]=o.current,Vl(s.nodeType===8?s.parentNode:s),new kp(o)},Kn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=El(o),s=s===null?null:s.stateNode,s},Kn.flushSync=function(s){return go(s)},Kn.hydrate=function(s,o,l){if(!hd(o))throw Error(n(200));return fd(null,s,o,!0,l)},Kn.hydrateRoot=function(s,o,l){if(!Sp(s))throw Error(n(405));var d=l!=null&&l.hydratedSources||null,p=!1,y="",E=c_;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),o=l_(o,null,s,1,l??null,p,!1,y,E),s[bs]=o.current,Vl(s),d)for(s=0;s<d.length;s++)l=d[s],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new dd(o)},Kn.render=function(s,o,l){if(!hd(o))throw Error(n(200));return fd(null,s,o,!1,l)},Kn.unmountComponentAtNode=function(s){if(!hd(s))throw Error(n(40));return s._reactRootContainer?(go(function(){fd(null,null,s,!1,function(){s._reactRootContainer=null,s[bs]=null})}),!0):!1},Kn.unstable_batchedUpdates=yp,Kn.unstable_renderSubtreeIntoContainer=function(s,o,l,d){if(!hd(l))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return fd(s,o,l,!1,d)},Kn.version="18.3.1-next-f1338f8080-20240426",Kn}var A_;function rE(){if(A_)return Rp.exports;A_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rp.exports=bS(),Rp.exports}var C_;function kS(){if(C_)return yd;C_=1;var t=rE();return yd.createRoot=t.createRoot,yd.hydrateRoot=t.hydrateRoot,yd}var SS=kS();const xS=Zw(SS);var R_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},AS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],u=t[n++],h=t[n++],f=((i&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],u=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|u&63)}}return e.join("")},iE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],u=i+1<t.length,h=u?t[i+1]:0,f=i+2<t.length,m=f?t[i+2]:0,v=a>>2,w=(a&3)<<4|h>>4;let I=(h&15)<<2|m>>6,S=m&63;f||(S=64,u||(I=64)),r.push(n[v],n[w],n[I],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],h=i<t.length?n[t.charAt(i)]:0;++i;const m=i<t.length?n[t.charAt(i)]:64;++i;const w=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||h==null||m==null||w==null)throw new CS;const I=a<<2|h>>4;if(r.push(I),m!==64){const S=h<<4&240|m>>2;if(r.push(S),w!==64){const V=m<<6&192|w;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RS=function(t){const e=sE(t);return iE.encodeByteArray(e,!0)},Kd=function(t){return RS(t).replace(/\./g,"")},oE=function(t){try{return iE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=()=>PS().__FIREBASE_DEFAULTS__,DS=()=>{if(typeof process>"u"||typeof R_>"u")return;const t=R_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&oE(t[1]);return e&&JSON.parse(e)},_h=()=>{try{return NS()||DS()||OS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aE=t=>{var e,n;return(n=(e=_h())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},MS=t=>{const e=aE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lE=()=>{var t;return(t=_h())===null||t===void 0?void 0:t.config},uE=t=>{var e;return(e=_h())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Kd(JSON.stringify(n)),Kd(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function FS(){var t;const e=(t=_h())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function US(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $S(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BS(){const t=kn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qS(){return!FS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WS(){try{return typeof indexedDB=="object"}catch{return!1}}function HS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="FirebaseError";class Bs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KS,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fu.prototype.create)}}class Fu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],u=a?GS(a,r):"Error",h=`${this.serviceName}: ${u} (${i}).`;return new Bs(i,h,r)}}function GS(t,e){return t.replace(QS,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const QS=/\{\$([^}]+)}/g;function ZS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],u=e[i];if(P_(a)&&P_(u)){if(!Gd(a,u))return!1}else if(a!==u)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function P_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function JS(t,e){const n=new YS(t,e);return n.subscribe.bind(n)}class YS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XS(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Dp),i.error===void 0&&(i.error=Dp),i.complete===void 0&&(i.complete=Dp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t){return t&&t._delegate?t._delegate:t}class Do{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nx(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const u=this.instances.get(i);return u&&e(u,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tx(t){return t===Eo?void 0:t}function nx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ex(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const sx={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},ix=Ke.INFO,ox={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},ax=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=ox[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bm{constructor(e){this.name=e,this._logLevel=ix,this._logHandler=ax,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const lx=(t,e)=>e.some(n=>t instanceof n);let N_,D_;function ux(){return N_||(N_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cx(){return D_||(D_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cE=new WeakMap,nm=new WeakMap,dE=new WeakMap,Op=new WeakMap,qm=new WeakMap;function dx(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(Li(t.result)),i()},u=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&cE.set(n,t)}).catch(()=>{}),qm.set(e,t),e}function hx(t){if(nm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),i()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});nm.set(t,e)}let rm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fx(t){rm=t(rm)}function px(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mp(this),e,...n);return dE.set(r,e.sort?e.sort():[e]),Li(r)}:cx().includes(t)?function(...e){return t.apply(Mp(this),e),Li(cE.get(this))}:function(...e){return Li(t.apply(Mp(this),e))}}function mx(t){return typeof t=="function"?px(t):(t instanceof IDBTransaction&&hx(t),lx(t,ux())?new Proxy(t,rm):t)}function Li(t){if(t instanceof IDBRequest)return dx(t);if(Op.has(t))return Op.get(t);const e=mx(t);return e!==t&&(Op.set(t,e),qm.set(e,t)),e}const Mp=t=>qm.get(t);function gx(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const u=indexedDB.open(t,e),h=Li(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Li(u.result),f.oldVersion,f.newVersion,Li(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const yx=["get","getKey","getAll","getAllKeys","count"],vx=["put","add","delete","clear"],Lp=new Map;function O_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yx.includes(n)))return;const a=async function(u,...h){const f=this.transaction(u,i?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),i&&f.done]))[0]};return Lp.set(e,a),a}fx(t=>({...t,get:(e,n,r)=>O_(e,n)||t.get(e,n,r),has:(e,n)=>!!O_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function wx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sm="@firebase/app",M_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Bm("@firebase/app"),Ex="@firebase/app-compat",Tx="@firebase/analytics-compat",Ix="@firebase/analytics",bx="@firebase/app-check-compat",kx="@firebase/app-check",Sx="@firebase/auth",xx="@firebase/auth-compat",Ax="@firebase/database",Cx="@firebase/data-connect",Rx="@firebase/database-compat",Px="@firebase/functions",Nx="@firebase/functions-compat",Dx="@firebase/installations",Ox="@firebase/installations-compat",Mx="@firebase/messaging",Lx="@firebase/messaging-compat",Vx="@firebase/performance",jx="@firebase/performance-compat",Fx="@firebase/remote-config",zx="@firebase/remote-config-compat",Ux="@firebase/storage",$x="@firebase/storage-compat",Bx="@firebase/firestore",qx="@firebase/vertexai-preview",Wx="@firebase/firestore-compat",Hx="firebase",Kx="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="[DEFAULT]",Gx={[sm]:"fire-core",[Ex]:"fire-core-compat",[Ix]:"fire-analytics",[Tx]:"fire-analytics-compat",[kx]:"fire-app-check",[bx]:"fire-app-check-compat",[Sx]:"fire-auth",[xx]:"fire-auth-compat",[Ax]:"fire-rtdb",[Cx]:"fire-data-connect",[Rx]:"fire-rtdb-compat",[Px]:"fire-fn",[Nx]:"fire-fn-compat",[Dx]:"fire-iid",[Ox]:"fire-iid-compat",[Mx]:"fire-fcm",[Lx]:"fire-fcm-compat",[Vx]:"fire-perf",[jx]:"fire-perf-compat",[Fx]:"fire-rc",[zx]:"fire-rc-compat",[Ux]:"fire-gcs",[$x]:"fire-gcs-compat",[Bx]:"fire-fst",[Wx]:"fire-fst-compat",[qx]:"fire-vertex","fire-js":"fire-js",[Hx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Map,Qx=new Map,om=new Map;function L_(t,e){try{t.container.addComponent(e)}catch(n){js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xa(t){const e=t.name;if(om.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;om.set(e,t);for(const n of _u.values())L_(n,t);for(const n of Qx.values())L_(n,t);return!0}function Wm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Oi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vi=new Fu("app","Firebase",Zx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Do("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=Kx;function hE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:im,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vi.create("bad-app-name",{appName:String(i)});if(n||(n=lE()),!n)throw Vi.create("no-options");const a=_u.get(i);if(a){if(Gd(n,a.options)&&Gd(r,a.config))return a;throw Vi.create("duplicate-app",{appName:i})}const u=new rx(i);for(const f of om.values())u.addComponent(f);const h=new Jx(n,r,u);return _u.set(i,h),h}function fE(t=im){const e=_u.get(t);if(!e&&t===im&&lE())return hE();if(!e)throw Vi.create("no-app",{appName:t});return e}function V_(){return Array.from(_u.values())}function ji(t,e,n){var r;let i=(r=Gx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${i}" with version "${e}":`];a&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(h.join(" "));return}Xa(new Do(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="firebase-heartbeat-database",Xx=1,wu="firebase-heartbeat-store";let Vp=null;function pE(){return Vp||(Vp=gx(Yx,Xx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vi.create("idb-open",{originalErrorMessage:t.message})})),Vp}async function eA(t){try{const n=(await pE()).transaction(wu),r=await n.objectStore(wu).get(mE(t));return await n.done,r}catch(e){if(e instanceof Bs)js.warn(e.message);else{const n=Vi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(n.message)}}}async function j_(t,e){try{const r=(await pE()).transaction(wu,"readwrite");await r.objectStore(wu).put(e,mE(t)),await r.done}catch(n){if(n instanceof Bs)js.warn(n.message);else{const r=Vi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});js.warn(r.message)}}}function mE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=1024,nA=720*60*60*1e3;class rA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=F_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=nA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){js.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=F_(),{heartbeatsToSend:r,unsentEntries:i}=sA(this._heartbeatsCache.heartbeats),a=Kd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return js.warn(n),""}}}function F_(){return new Date().toISOString().substring(0,10)}function sA(t,e=tA){const n=[];let r=t.slice();for(const i of t){const a=n.find(u=>u.agent===i.agent);if(a){if(a.dates.push(i.date),z_(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),z_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WS()?HS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return j_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return j_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function z_(t){return Kd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){Xa(new Do("platform-logger",e=>new _x(e),"PRIVATE")),Xa(new Do("heartbeat",e=>new rA(e),"PRIVATE")),ji(sm,M_,t),ji(sm,M_,"esm2017"),ji("fire-js","")}oA("");var aA="firebase",lA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji(aA,lA,"app");function Hm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uA=gE,yE=new Fu("auth","Firebase",gE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=new Bm("@firebase/auth");function cA(t,...e){Qd.logLevel<=Ke.WARN&&Qd.warn(`Auth (${ll}): ${t}`,...e)}function Nd(t,...e){Qd.logLevel<=Ke.ERROR&&Qd.error(`Auth (${ll}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t,...e){throw Km(t,...e)}function us(t,...e){return Km(t,...e)}function vE(t,e,n){const r=Object.assign(Object.assign({},uA()),{[e]:n});return new Fu("auth","Firebase",r).create(e,{appName:t.name})}function Co(t){return vE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Km(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yE.create(t,...e)}function De(t,e,...n){if(!t)throw Km(e,...n)}function Ms(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nd(e),new Error(e)}function zs(t,e){t||Ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function dA(){return U_()==="http:"||U_()==="https:"}function U_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dA()||US()||"connection"in navigator)?navigator.onLine:!0}function fA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n){this.shortDelay=e,this.longDelay=n,zs(n>e,"Short delay should be less than long delay!"),this.isMobile=jS()||$S()}get(){return hA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){zs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new Uu(3e4,6e4);function Qm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ul(t,e,n,r,i={}){return wE(t,i,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const h=zu(Object.assign({key:t.config.apiKey},u)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:f},a);return zS()||(m.referrerPolicy="no-referrer"),_E.fetch()(EE(t,t.config.apiHost,n,h),m)})}async function wE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},pA),e);try{const i=new yA(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw vd(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw vd(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw vd(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw vd(t,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw vE(t,v,m);Fs(t,v)}}catch(i){if(i instanceof Bs)throw i;Fs(t,"network-request-failed",{message:String(i)})}}async function gA(t,e,n,r,i={}){const a=await ul(t,e,n,r,i);return"mfaPendingCredential"in a&&Fs(t,"multi-factor-auth-required",{_serverResponse:a}),a}function EE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Gm(t.config,i):`${t.config.apiScheme}://${i}`}class yA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(us(this.auth,"network-request-failed")),mA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=us(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(t,e){return ul(t,"POST","/v1/accounts:delete",e)}async function TE(t,e){return ul(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _A(t,e=!1){const n=Sn(t),r=await n.getIdToken(e),i=Zm(r);De(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:uu(jp(i.auth_time)),issuedAtTime:uu(jp(i.iat)),expirationTime:uu(jp(i.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function jp(t){return Number(t)*1e3}function Zm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{const i=oE(n);return i?JSON.parse(i):(Nd("Failed to decode base64 JWT payload"),null)}catch(i){return Nd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $_(t){const e=Zm(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bs&&wA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Eu(t,TE(n,{idToken:r}));De(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?IE(a.providerUserInfo):[],h=IA(t.providerData,u),f=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(h!=null&&h.length),v=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new lm(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(t,w)}async function TA(t){const e=Sn(t);await Zd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IA(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function IE(t){return t.map(e=>{var{providerId:n}=e,r=Hm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(t,e){const n=await wE(t,{},async()=>{const r=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,u=EE(t,i,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",_E.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kA(t,e){return ul(t,"POST","/v2/accounts:revokeToken",Qm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=$_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await bA(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,u=new Fa;return r&&(De(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(De(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),a&&(De(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fa,this.toJSON())}_performRefresh(){return Ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ls{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new lm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Eu(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _A(this,e)}reload(){return TA(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ls(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Oi(this.auth.app))return Promise.reject(Co(this.auth));const e=await this.getIdToken();return await Eu(this,vA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,u,h,f,m,v;const w=(r=n.displayName)!==null&&r!==void 0?r:void 0,I=(i=n.email)!==null&&i!==void 0?i:void 0,S=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,V=(u=n.photoURL)!==null&&u!==void 0?u:void 0,P=(h=n.tenantId)!==null&&h!==void 0?h:void 0,N=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,q=(m=n.createdAt)!==null&&m!==void 0?m:void 0,U=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:H,emailVerified:J,isAnonymous:Y,providerData:te,stsTokenManager:C}=n;De(H&&C,e,"internal-error");const T=Fa.fromJSON(this.name,C);De(typeof H=="string",e,"internal-error"),wi(w,e.name),wi(I,e.name),De(typeof J=="boolean",e,"internal-error"),De(typeof Y=="boolean",e,"internal-error"),wi(S,e.name),wi(V,e.name),wi(P,e.name),wi(N,e.name),wi(q,e.name),wi(U,e.name);const x=new Ls({uid:H,auth:e,email:I,emailVerified:J,displayName:w,isAnonymous:Y,photoURL:V,phoneNumber:S,tenantId:P,stsTokenManager:T,createdAt:q,lastLoginAt:U});return te&&Array.isArray(te)&&(x.providerData=te.map(O=>Object.assign({},O))),N&&(x._redirectEventId=N),x}static async _fromIdTokenResponse(e,n,r=!1){const i=new Fa;i.updateFromServerResponse(n);const a=new Ls({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zd(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];De(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?IE(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),h=new Fa;h.updateFromIdToken(r);const f=new Ls({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new lm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=new Map;function Vs(t){zs(t instanceof Function,"Expected a class definition");let e=B_.get(t);return e?(zs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,B_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bE.type="NONE";const q_=bE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t,e,n){return`firebase:${t}:${e}:${n}`}class za{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Dd(this.userKey,i.apiKey,a),this.fullPersistenceKey=Dd("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ls._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new za(Vs(q_),e,r);const i=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||Vs(q_);const u=Dd(r,e.config.apiKey,e.name);let h=null;for(const m of n)try{const v=await m._get(u);if(v){const w=Ls._fromJSON(e,v);m!==a&&(h=w),a=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new za(a,e,r):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new za(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RE(e))return"Blackberry";if(PE(e))return"Webos";if(SE(e))return"Safari";if((e.includes("chrome/")||xE(e))&&!e.includes("edge/"))return"Chrome";if(CE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kE(t=kn()){return/firefox\//i.test(t)}function SE(t=kn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xE(t=kn()){return/crios\//i.test(t)}function AE(t=kn()){return/iemobile/i.test(t)}function CE(t=kn()){return/android/i.test(t)}function RE(t=kn()){return/blackberry/i.test(t)}function PE(t=kn()){return/webos/i.test(t)}function Jm(t=kn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SA(t=kn()){var e;return Jm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xA(){return BS()&&document.documentMode===10}function NE(t=kn()){return Jm(t)||CE(t)||PE(t)||RE(t)||/windows phone/i.test(t)||AE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t,e=[]){let n;switch(t){case"Browser":n=W_(kn());break;case"Worker":n=`${W_(kn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ll}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t,e={}){return ul(t,"GET","/v2/passwordPolicy",Qm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=6;class PA{constructor(e){var n,r,i,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:RA,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H_(this),this.idTokenSubscription=new H_(this),this.beforeStateQueue=new AA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vs(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await za.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await TE(this,{idToken:e}),r=await Ls._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Oi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&(f!=null&&f.user)&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Oi(this.app))return Promise.reject(Co(this));const n=e?Sn(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Oi(this.app)?Promise.reject(Co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Oi(this.app)?Promise.reject(Co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CA(this),n=new PA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vs(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[Vs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&cA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ym(t){return Sn(t)}class H_{constructor(e){this.auth=e,this.observer=null,this.addObserver=JS(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DA(t){Xm=t}function OA(t){return Xm.loadJS(t)}function MA(){return Xm.gapiScript}function LA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t,e){const n=Wm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Gd(a,e??{}))return i;Fs(i,"already-initialized")}return n.initialize({options:e})}function jA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FA(t,e,n){const r=Ym(t);De(r._canInitEmulator,r,"emulator-config-failed"),De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=OE(e),{host:u,port:h}=zA(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${a}//${u}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),UA()}function OE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zA(t){const e=OE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:K_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:K_(u)}}}function K_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ms("not implemented")}_getIdTokenResponse(e){return Ms("not implemented")}_linkToIdToken(e,n){return Ms("not implemented")}_getReauthenticationResolver(e){return Ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(t,e){return gA(t,"POST","/v1/accounts:signInWithIdp",Qm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="http://localhost";class Oo extends ME{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Hm(n,["providerId","signInMethod"]);if(!r||!i)return null;const u=new Oo(r,i);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Ua(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ua(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ua(e,n)}buildRequest(){const e={requestUri:$A,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends LE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends $u{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends $u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oo._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ki.credential(n,r)}catch{return null}}}ki.GOOGLE_SIGN_IN_METHOD="google.com";ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends $u{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends $u{constructor(){super("twitter.com")}static credential(e,n){return Oo._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xi.credential(n,r)}catch{return null}}}xi.TWITTER_SIGN_IN_METHOD="twitter.com";xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Ls._fromIdTokenResponse(e,r,i),u=G_(r);return new el({user:a,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=G_(r);return new el({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function G_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends Bs{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Jd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Jd(e,n,r,i)}}function VE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Jd._fromErrorAndOperation(t,a,e,r):a})}async function BA(t,e,n=!1){const r=await Eu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return el._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(t,e,n=!1){const{auth:r}=t;if(Oi(r.app))return Promise.reject(Co(r));const i="reauthenticate";try{const a=await Eu(t,VE(r,i,e,t),n);De(a.idToken,r,"internal-error");const u=Zm(a.idToken);De(u,r,"internal-error");const{sub:h}=u;return De(t.uid===h,r,"user-mismatch"),el._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Fs(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t,e,n=!1){if(Oi(t.app))return Promise.reject(Co(t));const r="signIn",i=await VE(t,r,e),a=await el._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}function HA(t,e,n,r){return Sn(t).onIdTokenChanged(e,n,r)}function KA(t,e,n){return Sn(t).beforeAuthStateChanged(e,n)}const Yd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yd,"1"),this.storage.removeItem(Yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=1e3,QA=10;class FE extends jE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);xA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,QA):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},GA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}FE.type="LOCAL";const ZA=FE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends jE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zE.type="SESSION";const UE=zE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new wh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,u=this.handlersMap[i];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(u).map(async m=>m(n.origin,a)),f=await JA(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const m=eg("",20);i.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(w){const I=w;if(I.data.eventId===m)switch(I.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(I.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(){return window}function XA(t){cs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(){return typeof cs().WorkerGlobalScope<"u"&&typeof cs().importScripts=="function"}async function eC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nC(){return $E()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="firebaseLocalStorageDb",rC=1,Xd="firebaseLocalStorage",qE="fbase_key";class Bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Eh(t,e){return t.transaction([Xd],e?"readwrite":"readonly").objectStore(Xd)}function sC(){const t=indexedDB.deleteDatabase(BE);return new Bu(t).toPromise()}function um(){const t=indexedDB.open(BE,rC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xd,{keyPath:qE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xd)?e(r):(r.close(),await sC(),e(await um()))})})}async function Q_(t,e,n){const r=Eh(t,!0).put({[qE]:e,value:n});return new Bu(r).toPromise()}async function iC(t,e){const n=Eh(t,!1).get(e),r=await new Bu(n).toPromise();return r===void 0?null:r.value}function Z_(t,e){const n=Eh(t,!0).delete(e);return new Bu(n).toPromise()}const oC=800,aC=3;class WE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(nC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await eC(),!this.activeServiceWorker)return;this.sender=new YA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await um();return await Q_(e,Yd,"1"),await Z_(e,Yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Z_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Eh(i,!1).getAll();return new Bu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WE.type="LOCAL";const lC=WE;new Uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e){return e?Vs(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends ME{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ua(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ua(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cC(t){return WA(t.auth,new tg(t),t.bypassAuthState)}function dC(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),qA(n,new tg(t),t.bypassAuthState)}async function hC(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),BA(n,new tg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cC;case"linkViaPopup":case"linkViaRedirect":return hC;case"reauthViaPopup":case"reauthViaRedirect":return dC;default:Fs(this.auth,"internal-error")}}resolve(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new Uu(2e3,1e4);class Ma extends HE{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ma.currentPopupAction&&Ma.currentPopupAction.cancel(),Ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){zs(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fC.get())};e()}}Ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="pendingRedirect",Od=new Map;class mC extends HE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Od.get(this.auth._key());if(!e){try{const r=await gC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Od.set(this.auth._key(),e)}return this.bypassAuthState||Od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gC(t,e){const n=_C(e),r=vC(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function yC(t,e){Od.set(t._key(),e)}function vC(t){return Vs(t._redirectPersistence)}function _C(t){return Dd(pC,t.config.apiKey,t.name)}async function wC(t,e,n=!1){if(Oi(t.app))return Promise.reject(Co(t));const r=Ym(t),i=uC(r,e),u=await new mC(r,i,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=600*1e3;class TC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!KE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(us(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EC&&this.cachedEventUids.clear(),this.cachedEventUids.has(J_(e))}saveEventToCache(e){this.cachedEventUids.add(J_(e)),this.lastProcessedEventTime=Date.now()}}function J_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bC(t,e={}){return ul(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SC=/^https?/;async function xC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bC(t);for(const n of e)try{if(AC(n))return}catch{}Fs(t,"unauthorized-domain")}function AC(t){const e=am(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!SC.test(n))return!1;if(kC.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new Uu(3e4,6e4);function Y_(){const t=cs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RC(t){return new Promise((e,n)=>{var r,i,a;function u(){Y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y_(),n(us(t,"network-request-failed"))},timeout:CC.get()})}if(!((i=(r=cs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=cs().gapi)===null||a===void 0)&&a.load)u();else{const h=LA("iframefcb");return cs()[h]=()=>{gapi.load?u():n(us(t,"network-request-failed"))},OA(`${MA()}?onload=${h}`).catch(f=>n(f))}}).catch(e=>{throw Md=null,e})}let Md=null;function PC(t){return Md=Md||RC(t),Md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Uu(5e3,15e3),DC="__/auth/iframe",OC="emulator/auth/iframe",MC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VC(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gm(e,OC):`https://${t.config.authDomain}/${DC}`,r={apiKey:e.apiKey,appName:t.name,v:ll},i=LC.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${zu(r).slice(1)}`}async function jC(t){const e=await PC(t),n=cs().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:VC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MC,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const u=us(t,"network-request-failed"),h=cs().setTimeout(()=>{a(u)},NC.get());function f(){cs().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zC=500,UC=600,$C="_blank",BC="http://localhost";class X_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qC(t,e,n,r=zC,i=UC){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},FC),{width:r.toString(),height:i.toString(),top:a,left:u}),m=kn().toLowerCase();n&&(h=xE(m)?$C:n),kE(m)&&(e=e||BC,f.scrollbars="yes");const v=Object.entries(f).reduce((I,[S,V])=>`${I}${S}=${V},`,"");if(SA(m)&&h!=="_self")return WC(e||"",h),new X_(null);const w=window.open(e||"",h,v);De(w,t,"popup-blocked");try{w.focus()}catch{}return new X_(w)}function WC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="__/auth/handler",KC="emulator/auth/handler",GC=encodeURIComponent("fac");async function e0(t,e,n,r,i,a){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ll,eventId:i};if(e instanceof LE){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",ZS(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof $u){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await t._getAppCheckToken(),m=f?`#${GC}=${encodeURIComponent(f)}`:"";return`${QC(t)}?${zu(h).slice(1)}${m}`}function QC({config:t}){return t.emulator?Gm(t,KC):`https://${t.authDomain}/${HC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="webStorageSupport";class ZC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UE,this._completeRedirectFn=wC,this._overrideRedirectResult=yC}async _openPopup(e,n,r,i){var a;zs((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await e0(e,n,r,am(),i);return qC(e,u,eg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await e0(e,n,r,am(),i);return XA(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(zs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await jC(e),r=new TC(e);return n.register("authEvent",i=>(De(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fp,{type:Fp},i=>{var a;const u=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Fp];u!==void 0&&n(!!u),Fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NE()||SE()||Jm()}}const JC=ZC;var t0="@firebase/auth",n0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eR(t){Xa(new Do("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;De(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DE(t)},m=new NA(r,i,a,f);return jA(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xa(new Do("auth-internal",e=>{const n=Ym(e.getProvider("auth").getImmediate());return(r=>new YC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ji(t0,n0,XC(t)),ji(t0,n0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=300,nR=uE("authIdTokenMaxAge")||tR;let r0=null;const rR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>nR)return;const i=n==null?void 0:n.token;r0!==i&&(r0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sR(t=fE()){const e=Wm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VA(t,{popupRedirectResolver:JC,persistence:[lC,ZA,UE]}),r=uE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=rR(a.toString());KA(n,u,()=>u(n.currentUser)),HA(n,h=>u(h))}}const i=aE("auth");return i&&FA(n,`http://${i}`),n}function iR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}DA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=us("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",iR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eR("Browser");var s0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ro,GE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function x(){}x.prototype=T.prototype,C.D=T.prototype,C.prototype=new x,C.prototype.constructor=C,C.C=function(O,D,L){for(var R=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)R[Ue-2]=arguments[Ue];return T.prototype[D].apply(O,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,T,x){x||(x=0);var O=Array(16);if(typeof T=="string")for(var D=0;16>D;++D)O[D]=T.charCodeAt(x++)|T.charCodeAt(x++)<<8|T.charCodeAt(x++)<<16|T.charCodeAt(x++)<<24;else for(D=0;16>D;++D)O[D]=T[x++]|T[x++]<<8|T[x++]<<16|T[x++]<<24;T=C.g[0],x=C.g[1],D=C.g[2];var L=C.g[3],R=T+(L^x&(D^L))+O[0]+3614090360&4294967295;T=x+(R<<7&4294967295|R>>>25),R=L+(D^T&(x^D))+O[1]+3905402710&4294967295,L=T+(R<<12&4294967295|R>>>20),R=D+(x^L&(T^x))+O[2]+606105819&4294967295,D=L+(R<<17&4294967295|R>>>15),R=x+(T^D&(L^T))+O[3]+3250441966&4294967295,x=D+(R<<22&4294967295|R>>>10),R=T+(L^x&(D^L))+O[4]+4118548399&4294967295,T=x+(R<<7&4294967295|R>>>25),R=L+(D^T&(x^D))+O[5]+1200080426&4294967295,L=T+(R<<12&4294967295|R>>>20),R=D+(x^L&(T^x))+O[6]+2821735955&4294967295,D=L+(R<<17&4294967295|R>>>15),R=x+(T^D&(L^T))+O[7]+4249261313&4294967295,x=D+(R<<22&4294967295|R>>>10),R=T+(L^x&(D^L))+O[8]+1770035416&4294967295,T=x+(R<<7&4294967295|R>>>25),R=L+(D^T&(x^D))+O[9]+2336552879&4294967295,L=T+(R<<12&4294967295|R>>>20),R=D+(x^L&(T^x))+O[10]+4294925233&4294967295,D=L+(R<<17&4294967295|R>>>15),R=x+(T^D&(L^T))+O[11]+2304563134&4294967295,x=D+(R<<22&4294967295|R>>>10),R=T+(L^x&(D^L))+O[12]+1804603682&4294967295,T=x+(R<<7&4294967295|R>>>25),R=L+(D^T&(x^D))+O[13]+4254626195&4294967295,L=T+(R<<12&4294967295|R>>>20),R=D+(x^L&(T^x))+O[14]+2792965006&4294967295,D=L+(R<<17&4294967295|R>>>15),R=x+(T^D&(L^T))+O[15]+1236535329&4294967295,x=D+(R<<22&4294967295|R>>>10),R=T+(D^L&(x^D))+O[1]+4129170786&4294967295,T=x+(R<<5&4294967295|R>>>27),R=L+(x^D&(T^x))+O[6]+3225465664&4294967295,L=T+(R<<9&4294967295|R>>>23),R=D+(T^x&(L^T))+O[11]+643717713&4294967295,D=L+(R<<14&4294967295|R>>>18),R=x+(L^T&(D^L))+O[0]+3921069994&4294967295,x=D+(R<<20&4294967295|R>>>12),R=T+(D^L&(x^D))+O[5]+3593408605&4294967295,T=x+(R<<5&4294967295|R>>>27),R=L+(x^D&(T^x))+O[10]+38016083&4294967295,L=T+(R<<9&4294967295|R>>>23),R=D+(T^x&(L^T))+O[15]+3634488961&4294967295,D=L+(R<<14&4294967295|R>>>18),R=x+(L^T&(D^L))+O[4]+3889429448&4294967295,x=D+(R<<20&4294967295|R>>>12),R=T+(D^L&(x^D))+O[9]+568446438&4294967295,T=x+(R<<5&4294967295|R>>>27),R=L+(x^D&(T^x))+O[14]+3275163606&4294967295,L=T+(R<<9&4294967295|R>>>23),R=D+(T^x&(L^T))+O[3]+4107603335&4294967295,D=L+(R<<14&4294967295|R>>>18),R=x+(L^T&(D^L))+O[8]+1163531501&4294967295,x=D+(R<<20&4294967295|R>>>12),R=T+(D^L&(x^D))+O[13]+2850285829&4294967295,T=x+(R<<5&4294967295|R>>>27),R=L+(x^D&(T^x))+O[2]+4243563512&4294967295,L=T+(R<<9&4294967295|R>>>23),R=D+(T^x&(L^T))+O[7]+1735328473&4294967295,D=L+(R<<14&4294967295|R>>>18),R=x+(L^T&(D^L))+O[12]+2368359562&4294967295,x=D+(R<<20&4294967295|R>>>12),R=T+(x^D^L)+O[5]+4294588738&4294967295,T=x+(R<<4&4294967295|R>>>28),R=L+(T^x^D)+O[8]+2272392833&4294967295,L=T+(R<<11&4294967295|R>>>21),R=D+(L^T^x)+O[11]+1839030562&4294967295,D=L+(R<<16&4294967295|R>>>16),R=x+(D^L^T)+O[14]+4259657740&4294967295,x=D+(R<<23&4294967295|R>>>9),R=T+(x^D^L)+O[1]+2763975236&4294967295,T=x+(R<<4&4294967295|R>>>28),R=L+(T^x^D)+O[4]+1272893353&4294967295,L=T+(R<<11&4294967295|R>>>21),R=D+(L^T^x)+O[7]+4139469664&4294967295,D=L+(R<<16&4294967295|R>>>16),R=x+(D^L^T)+O[10]+3200236656&4294967295,x=D+(R<<23&4294967295|R>>>9),R=T+(x^D^L)+O[13]+681279174&4294967295,T=x+(R<<4&4294967295|R>>>28),R=L+(T^x^D)+O[0]+3936430074&4294967295,L=T+(R<<11&4294967295|R>>>21),R=D+(L^T^x)+O[3]+3572445317&4294967295,D=L+(R<<16&4294967295|R>>>16),R=x+(D^L^T)+O[6]+76029189&4294967295,x=D+(R<<23&4294967295|R>>>9),R=T+(x^D^L)+O[9]+3654602809&4294967295,T=x+(R<<4&4294967295|R>>>28),R=L+(T^x^D)+O[12]+3873151461&4294967295,L=T+(R<<11&4294967295|R>>>21),R=D+(L^T^x)+O[15]+530742520&4294967295,D=L+(R<<16&4294967295|R>>>16),R=x+(D^L^T)+O[2]+3299628645&4294967295,x=D+(R<<23&4294967295|R>>>9),R=T+(D^(x|~L))+O[0]+4096336452&4294967295,T=x+(R<<6&4294967295|R>>>26),R=L+(x^(T|~D))+O[7]+1126891415&4294967295,L=T+(R<<10&4294967295|R>>>22),R=D+(T^(L|~x))+O[14]+2878612391&4294967295,D=L+(R<<15&4294967295|R>>>17),R=x+(L^(D|~T))+O[5]+4237533241&4294967295,x=D+(R<<21&4294967295|R>>>11),R=T+(D^(x|~L))+O[12]+1700485571&4294967295,T=x+(R<<6&4294967295|R>>>26),R=L+(x^(T|~D))+O[3]+2399980690&4294967295,L=T+(R<<10&4294967295|R>>>22),R=D+(T^(L|~x))+O[10]+4293915773&4294967295,D=L+(R<<15&4294967295|R>>>17),R=x+(L^(D|~T))+O[1]+2240044497&4294967295,x=D+(R<<21&4294967295|R>>>11),R=T+(D^(x|~L))+O[8]+1873313359&4294967295,T=x+(R<<6&4294967295|R>>>26),R=L+(x^(T|~D))+O[15]+4264355552&4294967295,L=T+(R<<10&4294967295|R>>>22),R=D+(T^(L|~x))+O[6]+2734768916&4294967295,D=L+(R<<15&4294967295|R>>>17),R=x+(L^(D|~T))+O[13]+1309151649&4294967295,x=D+(R<<21&4294967295|R>>>11),R=T+(D^(x|~L))+O[4]+4149444226&4294967295,T=x+(R<<6&4294967295|R>>>26),R=L+(x^(T|~D))+O[11]+3174756917&4294967295,L=T+(R<<10&4294967295|R>>>22),R=D+(T^(L|~x))+O[2]+718787259&4294967295,D=L+(R<<15&4294967295|R>>>17),R=x+(L^(D|~T))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+L&4294967295}r.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var x=T-this.blockSize,O=this.B,D=this.h,L=0;L<T;){if(D==0)for(;L<=x;)i(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<T;)if(O[D++]=C.charCodeAt(L++),D==this.blockSize){i(this,O),D=0;break}}else for(;L<T;)if(O[D++]=C[L++],D==this.blockSize){i(this,O),D=0;break}}this.h=D,this.o+=T},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var x=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=x&255,x/=256;for(this.u(C),C=Array(16),T=x=0;4>T;++T)for(var O=0;32>O;O+=8)C[x++]=this.g[T]>>>O&255;return C};function a(C,T){var x=h;return Object.prototype.hasOwnProperty.call(x,C)?x[C]:x[C]=T(C)}function u(C,T){this.h=T;for(var x=[],O=!0,D=C.length-1;0<=D;D--){var L=C[D]|0;O&&L==T||(x[D]=L,O=!1)}this.g=x}var h={};function f(C){return-128<=C&&128>C?a(C,function(T){return new u([T|0],0>T?-1:0)}):new u([C|0],0>C?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return w;if(0>C)return N(m(-C));for(var T=[],x=1,O=0;C>=x;O++)T[O]=C/x|0,x*=4294967296;return new u(T,0)}function v(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return N(v(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=m(Math.pow(T,8)),O=w,D=0;D<C.length;D+=8){var L=Math.min(8,C.length-D),R=parseInt(C.substring(D,D+L),T);8>L?(L=m(Math.pow(T,L)),O=O.j(L).add(m(R))):(O=O.j(x),O=O.add(m(R)))}return O}var w=f(0),I=f(1),S=f(16777216);t=u.prototype,t.m=function(){if(P(this))return-N(this).m();for(var C=0,T=1,x=0;x<this.g.length;x++){var O=this.i(x);C+=(0<=O?O:4294967296+O)*T,T*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(P(this))return"-"+N(this).toString(C);for(var T=m(Math.pow(C,6)),x=this,O="";;){var D=J(x,T).g;x=q(x,D.j(T));var L=((0<x.g.length?x.g[0]:x.h)>>>0).toString(C);if(x=D,V(x))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function P(C){return C.h==-1}t.l=function(C){return C=q(this,C),P(C)?-1:V(C)?0:1};function N(C){for(var T=C.g.length,x=[],O=0;O<T;O++)x[O]=~C.g[O];return new u(x,~C.h).add(I)}t.abs=function(){return P(this)?N(this):this},t.add=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],O=0,D=0;D<=T;D++){var L=O+(this.i(D)&65535)+(C.i(D)&65535),R=(L>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);O=R>>>16,L&=65535,R&=65535,x[D]=R<<16|L}return new u(x,x[x.length-1]&-2147483648?-1:0)};function q(C,T){return C.add(N(T))}t.j=function(C){if(V(this)||V(C))return w;if(P(this))return P(C)?N(this).j(N(C)):N(N(this).j(C));if(P(C))return N(this.j(N(C)));if(0>this.l(S)&&0>C.l(S))return m(this.m()*C.m());for(var T=this.g.length+C.g.length,x=[],O=0;O<2*T;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(var D=0;D<C.g.length;D++){var L=this.i(O)>>>16,R=this.i(O)&65535,Ue=C.i(D)>>>16,et=C.i(D)&65535;x[2*O+2*D]+=R*et,U(x,2*O+2*D),x[2*O+2*D+1]+=L*et,U(x,2*O+2*D+1),x[2*O+2*D+1]+=R*Ue,U(x,2*O+2*D+1),x[2*O+2*D+2]+=L*Ue,U(x,2*O+2*D+2)}for(O=0;O<T;O++)x[O]=x[2*O+1]<<16|x[2*O];for(O=T;O<2*T;O++)x[O]=0;return new u(x,0)};function U(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function H(C,T){this.g=C,this.h=T}function J(C,T){if(V(T))throw Error("division by zero");if(V(C))return new H(w,w);if(P(C))return T=J(N(C),T),new H(N(T.g),N(T.h));if(P(T))return T=J(C,N(T)),new H(N(T.g),T.h);if(30<C.g.length){if(P(C)||P(T))throw Error("slowDivide_ only works with positive integers.");for(var x=I,O=T;0>=O.l(C);)x=Y(x),O=Y(O);var D=te(x,1),L=te(O,1);for(O=te(O,2),x=te(x,2);!V(O);){var R=L.add(O);0>=R.l(C)&&(D=D.add(x),L=R),O=te(O,1),x=te(x,1)}return T=q(C,D.j(T)),new H(D,T)}for(D=w;0<=C.l(T);){for(x=Math.max(1,Math.floor(C.m()/T.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=m(x),R=L.j(T);P(R)||0<R.l(C);)x-=O,L=m(x),R=L.j(T);V(L)&&(L=I),D=D.add(L),C=q(C,R)}return new H(D,C)}t.A=function(C){return J(this,C).h},t.and=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],O=0;O<T;O++)x[O]=this.i(O)&C.i(O);return new u(x,this.h&C.h)},t.or=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],O=0;O<T;O++)x[O]=this.i(O)|C.i(O);return new u(x,this.h|C.h)},t.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],O=0;O<T;O++)x[O]=this.i(O)^C.i(O);return new u(x,this.h^C.h)};function Y(C){for(var T=C.g.length+1,x=[],O=0;O<T;O++)x[O]=C.i(O)<<1|C.i(O-1)>>>31;return new u(x,C.h)}function te(C,T){var x=T>>5;T%=32;for(var O=C.g.length-x,D=[],L=0;L<O;L++)D[L]=0<T?C.i(L+x)>>>T|C.i(L+x+1)<<32-T:C.i(L+x);return new u(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Ro=u}).apply(typeof s0<"u"?s0:typeof self<"u"?self:typeof window<"u"?window:{});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QE,su,ZE,Ld,cm,JE,YE,XE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _d=="object"&&_d];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(c,g){if(g)e:{var _=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var $=c[b];if(!($ in _))break e;_=_[$]}c=c[c.length-1],b=_[c],g=g(b),g!=b&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,b=!1,$={next:function(){if(!b&&_<c.length){var Q=_++;return{value:g(Q,c[Q]),done:!1}}return b=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,b),c.apply(g,$)}}return function(){return c.apply(g,arguments)}}function I(c,g,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,I.apply(null,arguments)}function S(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function V(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(b,$,Q){for(var ce=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)ce[tt-2]=arguments[tt];return g.prototype[$].apply(b,ce)}}function P(c){const g=c.length;if(0<g){const _=Array(g);for(let b=0;b<g;b++)_[b]=c[b];return _}return[]}function N(c,g){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(f(b)){const $=c.length||0,Q=b.length||0;c.length=$+Q;for(let ce=0;ce<Q;ce++)c[$+ce]=b[ce]}else c.push(b)}}class q{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function U(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var Y=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function te(c,g,_){for(const b in c)g.call(_,c[b],b,c)}function C(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function T(c){const g={};for(const _ in c)g[_]=c[_];return g}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,g){let _,b;for(let $=1;$<arguments.length;$++){b=arguments[$];for(_ in b)c[_]=b[_];for(let Q=0;Q<x.length;Q++)_=x[Q],Object.prototype.hasOwnProperty.call(b,_)&&(c[_]=b[_])}}function D(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function L(c){h.setTimeout(()=>{throw c},0)}function R(){var c=he;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ue{constructor(){this.h=this.g=null}add(g,_){const b=et.get();b.set(g,_),this.h?this.h.next=b:this.g=b,this.h=b}}var et=new q(()=>new Ze,c=>c.reset());class Ze{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let re,G=!1,he=new Ue,ue=()=>{const c=h.Promise.resolve(void 0);re=()=>{c.then(z)}};var z=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(_){L(_)}var g=et;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}G=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Ee=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};h.addEventListener("test",_,g),h.removeEventListener("test",_,g)}catch{}return c})();function Re(c,g){if(de.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(Y){e:{try{J(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ce[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Re.aa.h.call(this)}}V(Re,de);var Ce={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function je(c,g,_,b,$){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!b,this.ha=$,this.key=++Ve,this.da=this.fa=!1}function Se(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ut(c){this.src=c,this.g={},this.h=0}Ut.prototype.add=function(c,g,_,b,$){var Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);var ce=xn(c,g,b,$);return-1<ce?(g=c[ce],_||(g.fa=!1)):(g=new je(g,this.src,Q,!!b,$),g.fa=_,c.push(g)),g};function Tt(c,g){var _=g.type;if(_ in c.g){var b=c.g[_],$=Array.prototype.indexOf.call(b,g,void 0),Q;(Q=0<=$)&&Array.prototype.splice.call(b,$,1),Q&&(Se(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function xn(c,g,_,b){for(var $=0;$<c.length;++$){var Q=c[$];if(!Q.da&&Q.listener==g&&Q.capture==!!_&&Q.ha==b)return $}return-1}var rn="closure_lm_"+(1e6*Math.random()|0),Yn={};function lr(c,g,_,b,$){if(Array.isArray(g)){for(var Q=0;Q<g.length;Q++)lr(c,g[Q],_,b,$);return null}return _=Ki(_),c&&c[Ie]?c.K(g,_,m(b)?!!b.capture:!1,$):Ks(c,g,_,!1,b,$)}function Ks(c,g,_,b,$,Q){if(!g)throw Error("Invalid event type");var ce=m($)?!!$.capture:!!$,tt=gs(c);if(tt||(c[rn]=tt=new Ut(c)),_=tt.add(g,_,b,ce,Q),_.proxy)return _;if(b=Hi(),_.proxy=b,b.src=c,b.listener=_,c.addEventListener)Ee||($=ce),$===void 0&&($=!1),c.addEventListener(g.toString(),b,$);else if(c.attachEvent)c.attachEvent(Vn(g.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Hi(){function c(_){return g.call(c.src,c.listener,_)}const g=Gr;return c}function Kr(c,g,_,b,$){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)Kr(c,g[Q],_,b,$);else b=m(b)?!!b.capture:!!b,_=Ki(_),c&&c[Ie]?(c=c.i,g=String(g).toString(),g in c.g&&(Q=c.g[g],_=xn(Q,_,b,$),-1<_&&(Se(Q[_]),Array.prototype.splice.call(Q,_,1),Q.length==0&&(delete c.g[g],c.h--)))):c&&(c=gs(c))&&(g=c.g[g.toString()],c=-1,g&&(c=xn(g,_,b,$)),(_=-1<c?g[c]:null)&&Qt(_))}function Qt(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Ie])Tt(g.i,c);else{var _=c.type,b=c.proxy;g.removeEventListener?g.removeEventListener(_,b,c.capture):g.detachEvent?g.detachEvent(Vn(_),b):g.addListener&&g.removeListener&&g.removeListener(b),(_=gs(g))?(Tt(_,c),_.h==0&&(_.src=null,g[rn]=null)):Se(c)}}}function Vn(c){return c in Yn?Yn[c]:Yn[c]="on"+c}function Gr(c,g){if(c.da)c=!0;else{g=new Re(g,this);var _=c.listener,b=c.ha||c.src;c.fa&&Qt(c),c=_.call(b,g)}return c}function gs(c){return c=c[rn],c instanceof Ut?c:null}var ys="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ki(c){return typeof c=="function"?c:(c[ys]||(c[ys]=function(g){return c.handleEvent(g)}),c[ys])}function St(){Z.call(this),this.i=new Ut(this),this.M=this,this.F=null}V(St,Z),St.prototype[Ie]=!0,St.prototype.removeEventListener=function(c,g,_,b){Kr(this,c,g,_,b)};function it(c,g){var _,b=c.F;if(b)for(_=[];b;b=b.F)_.push(b);if(c=c.M,b=g.type||g,typeof g=="string")g=new de(g,c);else if(g instanceof de)g.target=g.target||c;else{var $=g;g=new de(b,c),O(g,$)}if($=!0,_)for(var Q=_.length-1;0<=Q;Q--){var ce=g.g=_[Q];$=mn(ce,b,!0,g)&&$}if(ce=g.g=c,$=mn(ce,b,!0,g)&&$,$=mn(ce,b,!1,g)&&$,_)for(Q=0;Q<_.length;Q++)ce=g.g=_[Q],$=mn(ce,b,!1,g)&&$}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],b=0;b<_.length;b++)Se(_[b]);delete c.g[g],c.h--}}this.F=null},St.prototype.K=function(c,g,_,b){return this.i.add(String(c),g,!1,_,b)},St.prototype.L=function(c,g,_,b){return this.i.add(String(c),g,!0,_,b)};function mn(c,g,_,b){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,Q=0;Q<g.length;++Q){var ce=g[Q];if(ce&&!ce.da&&ce.capture==_){var tt=ce.listener,Bt=ce.ha||ce.src;ce.fa&&Tt(c.i,ce),$=tt.call(Bt,b)!==!1&&$}}return $&&!b.defaultPrevented}function kr(c,g,_){if(typeof c=="function")_&&(c=I(c,_));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function Sr(c){c.g=kr(()=>{c.g=null,c.i&&(c.i=!1,Sr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class gn extends Z{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Sr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(c){Z.call(this),this.h=c,this.g={}}V(Qr,Z);var Gi=[];function Qi(c){te(c.g,function(g,_){this.g.hasOwnProperty(_)&&Qt(g)},c),c.g={}}Qr.prototype.N=function(){Qr.aa.N.call(this),Qi(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vs=h.JSON.stringify,Gs=h.JSON.parse,Zi=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Zr(){}Zr.prototype.h=null;function Qs(c){return c.h||(c.h=c.i())}function Zs(){}var jn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rt(){de.call(this,"d")}V(rt,de);function Rt(){de.call(this,"c")}V(Rt,de);var ft={},Fn=null;function Pt(){return Fn=Fn||new St}ft.La="serverreachability";function $t(c){de.call(this,ft.La,c)}V($t,de);function Nt(c){const g=Pt();it(g,new $t(g))}ft.STAT_EVENT="statevent";function ur(c,g){de.call(this,ft.STAT_EVENT,c),this.stat=g}V(ur,de);function Fe(c){const g=Pt();it(g,new ur(g,c))}ft.Ma="timingevent";function An(c,g){de.call(this,ft.Ma,c),this.size=g}V(An,de);function It(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function sn(){this.g=!0}sn.prototype.xa=function(){this.g=!1};function Xn(c,g,_,b,$,Q){c.info(function(){if(c.g)if(Q)for(var ce="",tt=Q.split("&"),Bt=0;Bt<tt.length;Bt++){var Ge=tt[Bt].split("=");if(1<Ge.length){var Zt=Ge[0];Ge=Ge[1];var Ot=Zt.split("_");ce=2<=Ot.length&&Ot[1]=="type"?ce+(Zt+"="+Ge+"&"):ce+(Zt+"=redacted&")}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+b+") [attempt "+$+"]: "+g+`
`+_+`
`+ce})}function cr(c,g,_,b,$,Q,ce){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+$+"]: "+g+`
`+_+`
`+Q+" "+ce})}function Dt(c,g,_,b){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ji(c,_)+(b?" "+b:"")})}function xr(c,g){c.info(function(){return"TIMEOUT: "+g})}sn.prototype.info=function(){};function Ji(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var b=_[c];if(!(2>b.length)){var $=b[1];if(Array.isArray($)&&!(1>$.length)){var Q=$[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ce=1;ce<$.length;ce++)$[ce]=""}}}}return vs(_)}catch{return g}}var Go={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ar;function Yi(){}V(Yi,Zr),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},Ar=new Yi;function Cr(c,g,_,b){this.j=c,this.i=g,this.l=_,this.R=b||1,this.U=new Qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nc}function nc(){this.i=null,this.g="",this.h=!1}var El={},Qo={};function Zo(c,g,_){c.L=1,c.v=ti(tr(g)),c.m=_,c.P=!0,Tl(c,null)}function Tl(c,g){c.F=Date.now(),ot(c),c.A=tr(c.v);var _=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),ri(_.i,"t",b),c.C=0,_=c.j.J,c.h=new nc,c.g=wc(c.j,_?g:null,!c.m),0<c.O&&(c.M=new gn(I(c.Y,c,c.g),c.O)),g=c.U,_=c.g,b=c.ca;var $="readystatechange";Array.isArray($)||($&&(Gi[0]=$.toString()),$=Gi);for(var Q=0;Q<$.length;Q++){var ce=lr(_,$[Q],b||g.handleEvent,!1,g.h||g);if(!ce)break;g.g[ce.key]=ce}g=c.H?T(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Nt(),Xn(c.i,c.u,c.A,c.l,c.R,c.m)}Cr.prototype.ca=function(c){c=c.target;const g=this.M;g&&Un(c)==3?g.j():this.Y(c)},Cr.prototype.Y=function(c){try{if(c==this.g)e:{const Ot=Un(this.g);var g=this.g.Ba();const fr=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||Al(this.g)))){this.J||Ot!=4||g==7||(g==8||0>=fr?Nt(3):Nt(2)),Xi(this);var _=this.g.Z();this.X=_;t:if(rc(this)){var b=Al(this.g);c="";var $=b.length,Q=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dr(this),Js(this);var ce="";break t}this.h.i=new h.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,c+=this.h.i.decode(b[g],{stream:!(Q&&g==$-1)});b.length=0,this.h.g+=c,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=_==200,cr(this.i,this.u,this.A,this.l,this.R,Ot,_),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Bt=this.g;if((tt=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(tt)){var Ge=tt;break t}}Ge=null}if(_=Ge)Dt(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Il(this,_);else{this.o=!1,this.s=3,Fe(12),dr(this),Js(this);break e}}if(this.P){_=!0;let rr;for(;!this.J&&this.C<ce.length;)if(rr=tf(this,ce),rr==Qo){Ot==4&&(this.s=4,Fe(14),_=!1),Dt(this.i,this.l,null,"[Incomplete Response]");break}else if(rr==El){this.s=4,Fe(15),Dt(this.i,this.l,ce,"[Invalid Chunk]"),_=!1;break}else Dt(this.i,this.l,rr,null),Il(this,rr);if(rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||ce.length!=0||this.h.h||(this.s=1,Fe(16),_=!1),this.o=this.o&&_,!_)Dt(this.i,this.l,ce,"[Invalid Chunked Response]"),dr(this),Js(this);else if(0<ce.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Rl(Zt),Zt.M=!0,Fe(11))}}else Dt(this.i,this.l,ce,null),Il(this,ce);Ot==4&&dr(this),this.o&&!this.J&&(Ot==4?aa(this.j,this):(this.o=!1,ot(this)))}else na(this.g),_==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Fe(12)):(this.s=0,Fe(13)),dr(this),Js(this)}}}catch{}finally{}};function rc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function tf(c,g){var _=c.C,b=g.indexOf(`
`,_);return b==-1?Qo:(_=Number(g.substring(_,b)),isNaN(_)?El:(b+=1,b+_>g.length?Qo:(g=g.slice(b,b+_),c.C=b+_,g)))}Cr.prototype.cancel=function(){this.J=!0,dr(this)};function ot(c){c.S=Date.now()+c.I,sc(c,c.I)}function sc(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=It(I(c.ba,c),g)}function Xi(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Cr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(xr(this.i,this.A),this.L!=2&&(Nt(),Fe(17)),dr(this),this.s=2,Js(this)):sc(this,this.S-c)};function Js(c){c.j.G==0||c.J||aa(c.j,c)}function dr(c){Xi(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Qi(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Il(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Cn(_.h,c))){if(!c.K&&Cn(_.h,c)&&_.G==3){try{var b=_.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var $=b;if($[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)oa(_),Or(_);else break e;ia(_),Fe(18)}}else _.za=$[1],0<_.za-_.T&&37500>$[2]&&_.F&&_.v==0&&!_.C&&(_.C=It(I(_.Za,_),6e3));if(1>=oc(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Is(_,11)}else if((c.K||_.g==c)&&oa(_),!U(g))for($=_.Da.g.parse(g),g=0;g<$.length;g++){let Ge=$[g];if(_.T=Ge[0],Ge=Ge[1],_.G==2)if(Ge[0]=="c"){_.K=Ge[1],_.ia=Ge[2];const Zt=Ge[3];Zt!=null&&(_.la=Zt,_.j.info("VER="+_.la));const Ot=Ge[4];Ot!=null&&(_.Aa=Ot,_.j.info("SVER="+_.Aa));const fr=Ge[5];fr!=null&&typeof fr=="number"&&0<fr&&(b=1.5*fr,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const rr=c.g;if(rr){const oo=rr.g?rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var Q=b.h;Q.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(bl(Q,Q.h),Q.h=null))}if(b.D){const ua=rr.g?rr.g.getResponseHeader("X-HTTP-Session-Id"):null;ua&&(b.ya=ua,st(b.I,b.D,ua))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var ce=c;if(b.qa=_c(b,b.J?b.ia:null,b.W),ce.K){ac(b.h,ce);var tt=ce,Bt=b.L;Bt&&(tt.I=Bt),tt.B&&(Xi(tt),ot(tt)),b.g=ce}else io(b);0<_.i.length&&es(_)}else Ge[0]!="stop"&&Ge[0]!="close"||Is(_,7);else _.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Is(_,7):an(_):Ge[0]!="noop"&&_.l&&_.l.ta(Ge),_.v=0)}}Nt(4)}catch{}}var ic=class{constructor(c,g){this.g=c,this.map=g}};function eo(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function er(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function oc(c){return c.h?1:c.g?c.g.size:0}function Cn(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function bl(c,g){c.g?c.g.add(g):c.h=g}function ac(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}eo.prototype.cancel=function(){if(this.i=lc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function lc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return P(c.i)}function Jo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,b=0;b<_;b++)g.push(c[b]);return g}g=[],_=0;for(b in c)g[_++]=c[b];return g}function Yo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const b in c)g[_++]=b;return g}}}function Ys(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=Yo(c),b=Jo(c),$=b.length,Q=0;Q<$;Q++)g.call(void 0,b[Q],_&&_[Q],c)}var to=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nf(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var b=c[_].indexOf("="),$=null;if(0<=b){var Q=c[_].substring(0,b);$=c[_].substring(b+1)}else Q=c[_];g(Q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function _s(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof _s){this.h=c.h,no(this,c.j),this.o=c.o,this.g=c.g,Xs(this,c.s),this.l=c.l;var g=c.i,_=new Jr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),ei(this,_),this.m=c.m}else c&&(g=String(c).match(to))?(this.h=!1,no(this,g[1]||"",!0),this.o=qe(g[2]||""),this.g=qe(g[3]||"",!0),Xs(this,g[4]),this.l=qe(g[5]||"",!0),ei(this,g[6]||"",!0),this.m=qe(g[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}_s.prototype.toString=function(){var c=[],g=this.j;g&&c.push(ni(g,Xo,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ni(g,Xo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ni(_,_.charAt(0)=="/"?dc:cc,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ni(_,kl)),c.join("")};function tr(c){return new _s(c)}function no(c,g,_){c.j=_?qe(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Xs(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function ei(c,g,_){g instanceof Jr?(c.i=g,Yr(c.i,c.h)):(_||(g=ni(g,hc)),c.i=new Jr(g,c.h))}function st(c,g,_){c.i.set(g,_)}function ti(c){return st(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function qe(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ni(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,uc),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function uc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Xo=/[#\/\?@]/g,cc=/[#\?:]/g,dc=/[#\?]/g,hc=/[#\?@]/g,kl=/#/g;function Jr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function on(c){c.g||(c.g=new Map,c.h=0,c.i&&nf(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=Jr.prototype,t.add=function(c,g){on(this),this.i=null,c=hr(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Rr(c,g){on(c),g=hr(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Pr(c,g){return on(c),g=hr(c,g),c.g.has(g)}t.forEach=function(c,g){on(this),this.g.forEach(function(_,b){_.forEach(function($){c.call(g,$,b,this)},this)},this)},t.na=function(){on(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let b=0;b<g.length;b++){const $=c[b];for(let Q=0;Q<$.length;Q++)_.push(g[b])}return _},t.V=function(c){on(this);let g=[];if(typeof c=="string")Pr(this,c)&&(g=g.concat(this.g.get(hr(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},t.set=function(c,g){return on(this),this.i=null,c=hr(this,c),Pr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ri(c,g,_){Rr(c,g),0<_.length&&(c.i=null,c.g.set(hr(c,g),P(_)),c.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var b=g[_];const Q=encodeURIComponent(String(b)),ce=this.V(b);for(b=0;b<ce.length;b++){var $=Q;ce[b]!==""&&($+="="+encodeURIComponent(String(ce[b]))),c.push($)}}return this.i=c.join("&")};function hr(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Yr(c,g){g&&!c.j&&(on(c),c.i=null,c.g.forEach(function(_,b){var $=b.toLowerCase();b!=$&&(Rr(this,b),ri(this,$,_))},c)),c.j=g}function rf(c,g){const _=new sn;if(h.Image){const b=new Image;b.onload=S(zn,_,"TestLoadImage: loaded",!0,g,b),b.onerror=S(zn,_,"TestLoadImage: error",!1,g,b),b.onabort=S(zn,_,"TestLoadImage: abort",!1,g,b),b.ontimeout=S(zn,_,"TestLoadImage: timeout",!1,g,b),h.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else g(!1)}function fc(c,g){const _=new sn,b=new AbortController,$=setTimeout(()=>{b.abort(),zn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:b.signal}).then(Q=>{clearTimeout($),Q.ok?zn(_,"TestPingServer: ok",!0,g):zn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),zn(_,"TestPingServer: error",!1,g)})}function zn(c,g,_,b,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),b(_)}catch{}}function sf(){this.g=new Zi}function pc(c,g,_){const b=_||"";try{Ys(c,function($,Q){let ce=$;m($)&&(ce=vs($)),g.push(b+Q+"="+encodeURIComponent(ce))})}catch($){throw g.push(b+"type="+encodeURIComponent("_badmap")),$}}function ws(c){this.l=c.Ub||null,this.j=c.eb||!1}V(ws,Zr),ws.prototype.g=function(){return new ro(this.l,this.j)},ws.prototype.i=(function(c){return function(){return c}})({});function ro(c,g){St.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(ro,St),t=ro.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Dr(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Dr(this)),this.g&&(this.readyState=3,Dr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function mc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Nr(this):Dr(this),this.readyState==3&&mc(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Nr(this))},t.Qa=function(c){this.g&&(this.response=c,Nr(this))},t.ga=function(){this.g&&Nr(this)};function Nr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Dr(c)}t.setRequestHeader=function(c,g){this.u.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Dr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ro.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Es(c){let g="";return te(c,function(_,b){g+=b,g+=":",g+=_,g+=`\r
`}),g}function si(c,g,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=Es(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):st(c,g,_))}function pt(c){St.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(pt,St);var of=/^https?$/i,Sl=["POST","PUT"];t=pt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,g,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ar.g(),this.v=this.o?Qs(this.o):Qs(Ar),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(Q){so(this,Q);return}if(c=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var $ in b)_.set($,b[$]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Q of b.keys())_.set(Q,b.get(Q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),$=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Sl,g,void 0))||b||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of _)this.g.setRequestHeader(Q,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ta(this),this.u=!0,this.g.send(c),this.u=!1}catch(Q){so(this,Q)}};function so(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,ea(c),nr(c)}function ea(c){c.A||(c.A=!0,it(c,"complete"),it(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,it(this,"complete"),it(this,"abort"),nr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nr(this,!0)),pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xl(this):this.bb())},t.bb=function(){xl(this)};function xl(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Un(c)!=4||c.Z()!=2)){if(c.u&&Un(c)==4)kr(c.Ea,0,c);else if(it(c,"readystatechange"),Un(c)==4){c.h=!1;try{const ce=c.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var b;if(b=ce===0){var $=String(c.D).match(to)[1]||null;!$&&h.self&&h.self.location&&($=h.self.location.protocol.slice(0,-1)),b=!of.test($?$.toLowerCase():"")}_=b}if(_)it(c,"complete"),it(c,"success");else{c.m=6;try{var Q=2<Un(c)?c.g.statusText:""}catch{Q=""}c.l=Q+" ["+c.Z()+"]",ea(c)}}finally{nr(c)}}}}function nr(c,g){if(c.g){ta(c);const _=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||it(c,"ready");try{_.onreadystatechange=b}catch{}}}function ta(c){c.I&&(h.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Un(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Gs(g)}};function Al(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function na(c){const g={};c=(c.g&&2<=Un(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(U(c[b]))continue;var _=D(c[b]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=g[$]||[];g[$]=Q,Q.push(_)}C(g,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function Cl(c){this.Aa=0,this.i=[],this.j=new sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xr("baseRetryDelayMs",5e3,c),this.cb=Xr("retryDelaySeedMs",1e4,c),this.Wa=Xr("forwardChannelMaxRetries",2,c),this.wa=Xr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new eo(c&&c.concurrentRequestLimit),this.Da=new sf,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Cl.prototype,t.la=8,t.G=1,t.connect=function(c,g,_,b){Fe(0),this.W=c,this.H=g||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=_c(this,null,this.W),es(this)};function an(c){if(ra(c),c.G==3){var g=c.U++,_=tr(c.I);if(st(_,"SID",c.K),st(_,"RID",g),st(_,"TYPE","terminate"),Ts(c,_),g=new Cr(c,c.j,g),g.L=2,g.v=ti(tr(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=g.v,_=!0),_||(g.g=wc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ot(g)}vc(c)}function Or(c){c.g&&(Rl(c),c.g.cancel(),c.g=null)}function ra(c){Or(c),c.u&&(h.clearTimeout(c.u),c.u=null),oa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function es(c){if(!er(c.h)&&!c.s){c.s=!0;var g=c.Ga;re||ue(),G||(re(),G=!0),he.add(g,c),c.B=0}}function af(c,g){return oc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=It(I(c.Ga,c,g),yc(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new Cr(this,this.j,c);let Q=this.o;if(this.S&&(Q?(Q=T(Q),O(Q,this.S)):Q=this.S),this.m!==null||this.O||($.H=Q,Q=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=ii(this,$,g),_=tr(this.I),st(_,"RID",c),st(_,"CVER",22),this.D&&st(_,"X-HTTP-Session-Id",this.D),Ts(this,_),Q&&(this.O?g="headers="+encodeURIComponent(String(Es(Q)))+"&"+g:this.m&&si(_,this.m,Q)),bl(this.h,$),this.Ua&&st(_,"TYPE","init"),this.P?(st(_,"$req",g),st(_,"SID","null"),$.T=!0,Zo($,_,null)):Zo($,_,g),this.G=2}}else this.G==3&&(c?sa(this,c):this.i.length==0||er(this.h)||sa(this))};function sa(c,g){var _;g?_=g.l:_=c.U++;const b=tr(c.I);st(b,"SID",c.K),st(b,"RID",_),st(b,"AID",c.T),Ts(c,b),c.m&&c.o&&si(b,c.m,c.o),_=new Cr(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=ii(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),bl(c.h,_),Zo(_,b,g)}function Ts(c,g){c.H&&te(c.H,function(_,b){st(g,b,_)}),c.l&&Ys({},function(_,b){st(g,b,_)})}function ii(c,g,_){_=Math.min(c.i.length,_);var b=c.l?I(c.l.Na,c.l,c):null;e:{var $=c.i;let Q=-1;for(;;){const ce=["count="+_];Q==-1?0<_?(Q=$[0].g,ce.push("ofs="+Q)):Q=0:ce.push("ofs="+Q);let tt=!0;for(let Bt=0;Bt<_;Bt++){let Ge=$[Bt].g;const Zt=$[Bt].map;if(Ge-=Q,0>Ge)Q=Math.max(0,$[Bt].g-100),tt=!1;else try{pc(Zt,ce,"req"+Ge+"_")}catch{b&&b(Zt)}}if(tt){b=ce.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,b}function io(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;re||ue(),G||(re(),G=!0),he.add(g,c),c.v=0}}function ia(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=It(I(c.Fa,c),yc(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,gc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=It(I(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fe(10),Or(this),gc(this))};function Rl(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function gc(c){c.g=new Cr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=tr(c.qa);st(g,"RID","rpc"),st(g,"SID",c.K),st(g,"AID",c.T),st(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&st(g,"TO",c.ja),st(g,"TYPE","xmlhttp"),Ts(c,g),c.m&&c.o&&si(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=ti(tr(g)),_.m=null,_.P=!0,Tl(_,c)}t.Za=function(){this.C!=null&&(this.C=null,Or(this),ia(this),Fe(19))};function oa(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function aa(c,g){var _=null;if(c.g==g){oa(c),Rl(c),c.g=null;var b=2}else if(Cn(c.h,g))_=g.D,ac(c.h,g),b=1;else return;if(c.G!=0){if(g.o)if(b==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var $=c.B;b=Pt(),it(b,new An(b,_)),es(c)}else io(c);else if($=g.s,$==3||$==0&&0<g.X||!(b==1&&af(c,g)||b==2&&ia(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),$){case 1:Is(c,5);break;case 4:Is(c,10);break;case 3:Is(c,6);break;default:Is(c,2)}}}function yc(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Is(c,g){if(c.j.info("Error code "+g),g==2){var _=I(c.fb,c),b=c.Xa;const $=!b;b=new _s(b||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||no(b,"https"),ti(b),$?rf(b.toString(),_):fc(b.toString(),_)}else Fe(2);c.G=0,c.l&&c.l.sa(g),vc(c),ra(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))};function vc(c){if(c.G=0,c.ka=[],c.l){const g=lc(c.h);(g.length!=0||c.i.length!=0)&&(N(c.ka,g),N(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function _c(c,g,_){var b=_ instanceof _s?tr(_):new _s(_);if(b.g!="")g&&(b.g=g+"."+b.g),Xs(b,b.s);else{var $=h.location;b=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var Q=new _s(null);b&&no(Q,b),g&&(Q.g=g),$&&Xs(Q,$),_&&(Q.l=_),b=Q}return _=c.D,g=c.ya,_&&g&&st(b,_,g),st(b,"VER",c.la),Ts(c,b),b}function wc(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new pt(new ws({eb:_})):new pt(c.pa),g.Ha(c.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pl(){}t=Pl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function la(){}la.prototype.g=function(c,g){return new Rn(c,g)};function Rn(c,g){St.call(this),this.g=new Cl(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!U(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!U(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ts(this)}V(Rn,St),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){an(this.g)},Rn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=vs(c),c=_);g.i.push(new ic(g.Ya++,c)),g.G==3&&es(g)},Rn.prototype.N=function(){this.g.l=null,delete this.j,an(this.g),delete this.g,Rn.aa.N.call(this)};function Ec(c){rt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}V(Ec,rt);function Tc(){Rt.call(this),this.status=1}V(Tc,Rt);function ts(c){this.g=c}V(ts,Pl),ts.prototype.ua=function(){it(this.g,"a")},ts.prototype.ta=function(c){it(this.g,new Ec(c))},ts.prototype.sa=function(c){it(this.g,new Tc)},ts.prototype.ra=function(){it(this.g,"b")},la.prototype.createWebChannel=la.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,XE=function(){return new la},YE=function(){return Pt()},JE=ft,cm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Go.NO_ERROR=0,Go.TIMEOUT=8,Go.HTTP_ERROR=6,Ld=Go,tc.COMPLETE="complete",ZE=tc,Zs.EventType=jn,jn.OPEN="a",jn.CLOSE="b",jn.ERROR="c",jn.MESSAGE="d",St.prototype.listen=St.prototype.K,su=Zs,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,QE=pt}).apply(typeof _d<"u"?_d:typeof self<"u"?self:typeof window<"u"?window:{});const i0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new Bm("@firebase/firestore");function nu(){return Mo.logLevel}function we(t,...e){if(Mo.logLevel<=Ke.DEBUG){const n=e.map(ng);Mo.debug(`Firestore (${cl}): ${t}`,...n)}}function Us(t,...e){if(Mo.logLevel<=Ke.ERROR){const n=e.map(ng);Mo.error(`Firestore (${cl}): ${t}`,...n)}}function tl(t,...e){if(Mo.logLevel<=Ke.WARN){const n=e.map(ng);Mo.warn(`Firestore (${cl}): ${t}`,...n)}}function ng(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t="Unexpected state"){const e=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: `+t;throw Us(e),new Error(e)}function nt(t,e){t||Oe()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(In.UNAUTHENTICATED)))}shutdown(){}}class aR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class lR{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new Po;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Po,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},h=f=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Po)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string"),new eT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new In(e)}}class uR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new uR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(In.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){nt(this.o===void 0);const r=a=>{a.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,we("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(nt(typeof n.token=="string"),this.R=n.token,new dR(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fR(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function Xe(t,e){return t<e?-1:t>e?1:0}function nl(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new _t(0,0))}static max(){return new Me(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Oe(),r===void 0?r=e.length-n:r>e.length-n&&Oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Tu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tu?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),u=n.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ht extends Tu{construct(e,n,r){return new ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new ht(n)}static emptyPath(){return new ht([])}}const pR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Tu{construct(e,n,r){return new dn(e,n,r)}static isValidIdentifier(e){return pR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(u=!u,i++):h!=="."||u?(r+=h,i++):(a(),i++)}if(a(),u)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(ht.fromString(e))}static fromName(e){return new ke(ht.fromString(e).popFirst(5))}static empty(){return new ke(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new ht(e.slice()))}}function mR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new zi(i,ke.empty(),e)}function gR(t){return new zi(t.readTime,t.key,-1)}class zi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zi(Me.min(),ke.empty(),-1)}static max(){return new zi(Me.max(),ke.empty(),-1)}}function yR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _R{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==vR)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,r)=>{n(e)}))}static reject(e){return new oe(((n,r)=>{r(e)}))}static waitFor(e){return new oe(((n,r)=>{let i=0,a=0,u=!1;e.forEach((h=>{++i,h.next((()=>{++a,u&&a===i&&n()}),(f=>r(f)))})),u=!0,a===i&&n()}))}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next((i=>i?oe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new oe(((r,i)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;n(e[m]).next((v=>{u[m]=v,++h,h===a&&r(u)}),(v=>i(v)))}}))}static doWhile(e,n){return new oe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function wR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}rg.oe=-1;function Th(t){return t==null}function eh(t){return t===0&&1/t==-1/0}function ER(t){return typeof t=="number"&&Number.isInteger(t)&&!eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Uo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){this.comparator=e,this.root=n||cn.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wd(this.root,e,this.comparator,!0)}}class wd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??cn.RED,this.left=i??cn.EMPTY,this.right=a??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new cn(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return cn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,n,r,i,a){return this}insert(e,n,r){return new cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new a0(this.data.getIterator())}getIteratorFrom(e){return new a0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new hn(this.comparator);return n.data=e,n}}class a0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new ar([])}unionWith(e){let n=new hn(dn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return nl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new rT("Invalid base64 string: "+a):a}})(e);return new fn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let u=0;u<i.length;++u)a+=String.fromCharCode(i[u]);return a})(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const TR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(t){if(nt(!!t),typeof t=="string"){let e=0;const n=TR.exec(t);if(nt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lo(t){return typeof t=="string"?fn.fromBase64String(t):fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ig(t){const e=t.mapValue.fields.__previous_value__;return sg(e)?ig(e):e}function Iu(t){const e=Ui(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n,r,i,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m}}class bu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed={mapValue:{}};function Vo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sg(t)?4:kR(t)?9007199254740991:bR(t)?10:11:Oe()}function ps(t,e){if(t===e)return!0;const n=Vo(t);if(n!==Vo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Iu(t).isEqual(Iu(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const u=Ui(i.timestampValue),h=Ui(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Lo(i.bytesValue).isEqual(Lo(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return At(i.geoPointValue.latitude)===At(a.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return At(i.integerValue)===At(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const u=At(i.doubleValue),h=At(a.doubleValue);return u===h?eh(u)===eh(h):isNaN(u)&&isNaN(h)}return!1})(t,e);case 9:return nl(t.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return(function(i,a){const u=i.mapValue.fields||{},h=a.mapValue.fields||{};if(o0(u)!==o0(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!ps(u[f],h[f])))return!1;return!0})(t,e);default:return Oe()}}function ku(t,e){return(t.values||[]).find((n=>ps(n,e)))!==void 0}function rl(t,e){if(t===e)return 0;const n=Vo(t),r=Vo(e);if(n!==r)return Xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const h=At(a.integerValue||a.doubleValue),f=At(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(t,e);case 3:return l0(t.timestampValue,e.timestampValue);case 4:return l0(Iu(t),Iu(e));case 5:return Xe(t.stringValue,e.stringValue);case 6:return(function(a,u){const h=Lo(a),f=Lo(u);return h.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const h=a.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const v=Xe(h[m],f[m]);if(v!==0)return v}return Xe(h.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const h=Xe(At(a.latitude),At(u.latitude));return h!==0?h:Xe(At(a.longitude),At(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return u0(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var h,f,m,v;const w=a.fields||{},I=u.fields||{},S=(h=w.value)===null||h===void 0?void 0:h.arrayValue,V=(f=I.value)===null||f===void 0?void 0:f.arrayValue,P=Xe(((m=S==null?void 0:S.values)===null||m===void 0?void 0:m.length)||0,((v=V==null?void 0:V.values)===null||v===void 0?void 0:v.length)||0);return P!==0?P:u0(S,V)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Ed.mapValue&&u===Ed.mapValue)return 0;if(a===Ed.mapValue)return 1;if(u===Ed.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let w=0;w<f.length&&w<v.length;++w){const I=Xe(f[w],v[w]);if(I!==0)return I;const S=rl(h[f[w]],m[v[w]]);if(S!==0)return S}return Xe(f.length,v.length)})(t.mapValue,e.mapValue);default:throw Oe()}}function l0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=Ui(t),r=Ui(e),i=Xe(n.seconds,r.seconds);return i!==0?i:Xe(n.nanos,r.nanos)}function u0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=rl(n[i],r[i]);if(a)return a}return Xe(n.length,r.length)}function sl(t){return dm(t)}function dm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Ui(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Lo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ke.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=dm(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const u of r)a?a=!1:i+=",",i+=`${u}:${dm(n.fields[u])}`;return i+"}"})(t.mapValue):Oe()}function c0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hm(t){return!!t&&"integerValue"in t}function og(t){return!!t&&"arrayValue"in t}function d0(t){return!!t&&"nullValue"in t}function h0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vd(t){return!!t&&"mapValue"in t}function bR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function cu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Uo(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=cu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(n)}setAll(e){let n=dn.emptyPath(),r={},i=[];e.forEach(((u,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=h.popLast()}u?r[h.lastSegment()]=cu(u):i.push(h.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Vd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Uo(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Gn(cu(this.value))}}function sT(t){const e=[];return Uo(t.fields,((n,r)=>{const i=new dn([n]);if(Vd(r)){const a=sT(r.mapValue).fields;if(a.length===0)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)})),new ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,r,i,a,u,h){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new bn(e,0,Me.min(),Me.min(),Me.min(),Gn.empty(),0)}static newFoundDocument(e,n,r,i){return new bn(e,1,n,Me.min(),r,i,0)}static newNoDocument(e,n){return new bn(e,2,n,Me.min(),Me.min(),Gn.empty(),0)}static newUnknownDocument(e,n){return new bn(e,3,n,Me.min(),Me.min(),Gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.position=e,this.inclusive=n}}function f0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],u=t.position[i];if(a.field.isKeyField()?r=ke.comparator(ke.fromName(u.referenceValue),n.key):r=rl(u,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function p0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ps(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n="asc"){this.field=e,this.dir=n}}function SR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{}class Vt extends iT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AR(e,n,r):n==="array-contains"?new PR(e,r):n==="in"?new NR(e,r):n==="not-in"?new DR(e,r):n==="array-contains-any"?new OR(e,r):new Vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CR(e,r):new RR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(rl(n,this.value)):n!==null&&Vo(this.value)===Vo(n)&&this.matchesComparison(rl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wr extends iT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Wr(e,n)}matches(e){return oT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function oT(t){return t.op==="and"}function aT(t){return xR(t)&&oT(t)}function xR(t){for(const e of t.filters)if(e instanceof Wr)return!1;return!0}function fm(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+sl(t.value);if(aT(t))return t.filters.map((e=>fm(e))).join(",");{const e=t.filters.map((n=>fm(n))).join(",");return`${t.op}(${e})`}}function lT(t,e){return t instanceof Vt?(function(r,i){return i instanceof Vt&&r.op===i.op&&r.field.isEqual(i.field)&&ps(r.value,i.value)})(t,e):t instanceof Wr?(function(r,i){return i instanceof Wr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,u,h)=>a&&lT(u,i.filters[h])),!0):!1})(t,e):void Oe()}function uT(t){return t instanceof Vt?(function(n){return`${n.field.canonicalString()} ${n.op} ${sl(n.value)}`})(t):t instanceof Wr?(function(n){return n.op.toString()+" {"+n.getFilters().map(uT).join(" ,")+"}"})(t):"Filter"}class AR extends Vt{constructor(e,n,r){super(e,n,r),this.key=ke.fromName(r.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class CR extends Vt{constructor(e,n){super(e,"in",n),this.keys=cT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class RR extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=cT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function cT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>ke.fromName(r.referenceValue)))}class PR extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return og(n)&&ku(n.arrayValue,this.value)}}class NR extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ku(this.value.arrayValue,n)}}class DR extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ku(this.value.arrayValue,n)}}class OR extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!og(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ku(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n=null,r=[],i=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=h,this.ue=null}}function m0(t,e=null,n=[],r=[],i=null,a=null,u=null){return new MR(t,e,n,r,i,a,u)}function ag(t){const e=Le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>fm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>sl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>sl(r))).join(",")),e.ue=n}return e.ue}function lg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!p0(t.startAt,e.startAt)&&p0(t.endAt,e.endAt)}function pm(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n=null,r=[],i=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function LR(t,e,n,r,i,a,u,h){return new dl(t,e,n,r,i,a,u,h)}function ug(t){return new dl(t)}function g0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dT(t){return t.collectionGroup!==null}function du(t){const e=Le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new hn(dn.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Su(a,r))})),n.has(dn.keyField().canonicalString())||e.ce.push(new Su(dn.keyField(),r))}return e.ce}function ds(t){const e=Le(t);return e.le||(e.le=VR(e,du(t))),e.le}function VR(t,e){if(t.limitType==="F")return m0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Su(i.field,a)}));const n=t.endAt?new th(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new th(t.startAt.position,t.startAt.inclusive):null;return m0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mm(t,e){const n=t.filters.concat([e]);return new dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gm(t,e,n){return new dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ih(t,e){return lg(ds(t),ds(e))&&t.limitType===e.limitType}function hT(t){return`${ag(ds(t))}|lt:${t.limitType}`}function Pa(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>uT(i))).join(", ")}]`),Th(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>sl(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>sl(i))).join(",")),`Target(${r})`})(ds(t))}; limitType=${t.limitType})`}function bh(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ke.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of du(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(u,h,f){const m=f0(u,h,f);return u.inclusive?m<=0:m<0})(r.startAt,du(r),i)||r.endAt&&!(function(u,h,f){const m=f0(u,h,f);return u.inclusive?m>=0:m>0})(r.endAt,du(r),i))})(t,e)}function jR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fT(t){return(e,n)=>{let r=!1;for(const i of du(t)){const a=FR(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function FR(t,e,n){const r=t.field.isKeyField()?ke.comparator(e.key,n.key):(function(a,u,h){const f=u.data.field(a),m=h.data.field(a);return f!==null&&m!==null?rl(f,m):Oe()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Uo(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return nT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new wt(ke.comparator);function $s(){return zR}const pT=new wt(ke.comparator);function iu(...t){let e=pT;for(const n of t)e=e.insert(n.key,n);return e}function mT(t){let e=pT;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function To(){return hu()}function gT(){return hu()}function hu(){return new hl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const UR=new wt(ke.comparator),$R=new hn(ke.comparator);function Be(...t){let e=$R;for(const n of t)e=e.add(n);return e}const BR=new hn(Xe);function qR(){return BR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eh(e)?"-0":e}}function yT(t){return{integerValue:""+t}}function WR(t,e){return ER(e)?yT(e):cg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function HR(t,e,n){return t instanceof xu?(function(i,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&sg(a)&&(a=ig(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(n,e):t instanceof Au?_T(t,e):t instanceof Cu?wT(t,e):(function(i,a){const u=vT(i,a),h=y0(u)+y0(i.Pe);return hm(u)&&hm(i.Pe)?yT(h):cg(i.serializer,h)})(t,e)}function KR(t,e,n){return t instanceof Au?_T(t,e):t instanceof Cu?wT(t,e):n}function vT(t,e){return t instanceof nh?(function(r){return hm(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class xu extends kh{}class Au extends kh{constructor(e){super(),this.elements=e}}function _T(t,e){const n=ET(e);for(const r of t.elements)n.some((i=>ps(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Cu extends kh{constructor(e){super(),this.elements=e}}function wT(t,e){let n=ET(e);for(const r of t.elements)n=n.filter((i=>!ps(i,r)));return{arrayValue:{values:n}}}class nh extends kh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function y0(t){return At(t.integerValue||t.doubleValue)}function ET(t){return og(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n){this.field=e,this.transform=n}}function QR(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Au&&i instanceof Au||r instanceof Cu&&i instanceof Cu?nl(r.elements,i.elements,ps):r instanceof nh&&i instanceof nh?ps(r.Pe,i.Pe):r instanceof xu&&i instanceof xu})(t.transform,e.transform)}class ZR{constructor(e,n){this.version=e,this.transformResults=n}}class Tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sh{}function TT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dg(t.key,Tr.none()):new Hu(t.key,t.data,Tr.none());{const n=t.data,r=Gn.empty();let i=new hn(dn.comparator);for(let a of e.fields)if(!i.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?r.delete(a):r.set(a,u),i=i.add(a)}return new Bi(t.key,r,new ar(i.toArray()),Tr.none())}}function JR(t,e,n){t instanceof Hu?(function(i,a,u){const h=i.value.clone(),f=_0(i.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):t instanceof Bi?(function(i,a,u){if(!jd(i.precondition,a))return void a.convertToUnknownDocument(u.version);const h=_0(i.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(IT(i)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):(function(i,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function fu(t,e,n,r){return t instanceof Hu?(function(a,u,h,f){if(!jd(a.precondition,u))return h;const m=a.value.clone(),v=w0(a.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(t,e,n,r):t instanceof Bi?(function(a,u,h,f){if(!jd(a.precondition,u))return h;const m=w0(a.fieldTransforms,f,u),v=u.data;return v.setAll(IT(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(t,e,n,r):(function(a,u,h){return jd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(t,e,n)}function YR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=vT(r.transform,i||null);a!=null&&(n===null&&(n=Gn.empty()),n.set(r.field,a))}return n||null}function v0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&nl(r,i,((a,u)=>QR(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hu extends Sh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bi extends Sh{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function IT(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function _0(t,e,n){const r=new Map;nt(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],u=a.transform,h=e.data.field(a.field);r.set(a.field,KR(u,h,n[i]))}return r}function w0(t,e,n){const r=new Map;for(const i of t){const a=i.transform,u=n.data.field(i.field);r.set(i.field,HR(a,u,e))}return r}class dg extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XR extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&JR(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gT();return this.mutations.forEach((i=>{const a=e.get(i.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=n.has(i.key)?null:h;const f=TT(u,h);f!==null&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(Me.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Be())}isEqual(e){return this.batchId===e.batchId&&nl(this.mutations,e.mutations,((n,r)=>v0(n,r)))&&nl(this.baseMutations,e.baseMutations,((n,r)=>v0(n,r)))}}class hg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){nt(e.mutations.length===r.length);let i=(function(){return UR})();const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new hg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Qe;function r1(t){switch(t){default:return Oe();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function bT(t){if(t===void 0)return Us("GRPC error has no .code"),ne.UNKNOWN;switch(t){case Lt.OK:return ne.OK;case Lt.CANCELLED:return ne.CANCELLED;case Lt.UNKNOWN:return ne.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return ne.INTERNAL;case Lt.UNAVAILABLE:return ne.UNAVAILABLE;case Lt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Lt.NOT_FOUND:return ne.NOT_FOUND;case Lt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Lt.ABORTED:return ne.ABORTED;case Lt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Lt.DATA_LOSS:return ne.DATA_LOSS;default:return Oe()}}(Qe=Lt||(Lt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=new Ro([4294967295,4294967295],0);function E0(t){const e=s1().encode(t),n=new GE;return n.update(e),new Uint8Array(n.digest())}function T0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ro([n,r],0),new Ro([i,a],0)]}class fg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ou(`Invalid padding: ${n}`);if(r<0)throw new ou(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ou(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ro.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ro.fromNumber(r)));return i.compare(i1)===1&&(i=new Ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=E0(e),[r,i]=T0(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,i,a);if(!this.de(u))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new fg(a,i,n);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.Ie===0)return;const n=E0(e),[r,i]=T0(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,i,a);this.Ae(u)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ku.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xh(Me.min(),i,new wt(Xe),$s(),Be())}}class Ku{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ku(r,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class kT{constructor(e,n){this.targetId=e,this.me=n}}class ST{constructor(e,n,r=fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class I0{constructor(){this.fe=0,this.ge=k0(),this.pe=fn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),n=Be(),r=Be();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Oe()}})),new Ku(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=k0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class o1{constructor(e){this.Le=e,this.Be=new Map,this.ke=$s(),this.qe=b0(),this.Qe=new wt(Xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Oe()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,i)=>{this.ze(i)&&n(i)}))}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(pm(a))if(r===0){const u=new ke(a.path);this.Ue(n,u,bn.newNoDocument(u,Me.min()))}else nt(r===1);else{const u=this.Ye(n);if(u!==r){const h=this.Ze(e),f=h?this.Xe(h,e,u):1;if(f!==0){this.je(n);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let u,h;try{u=Lo(r).toUint8Array()}catch(f){if(f instanceof rT)return tl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new fg(u,i,a)}catch(f){return tl(f instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const u=this.Le.tt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,a,null),i++)})),i}rt(e){const n=new Map;this.Be.forEach(((a,u)=>{const h=this.Je(u);if(h){if(a.current&&pm(h.target)){const f=new ke(h.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,bn.newNoDocument(f,e))}a.be&&(n.set(u,a.ve()),a.Ce())}}));let r=Be();this.qe.forEach(((a,u)=>{let h=!0;u.forEachWhile((f=>{const m=this.Je(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const i=new xh(e,n,this.Qe,this.ke,r);return this.ke=$s(),this.qe=b0(),this.Qe=new wt(Xe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new I0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new hn(Xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new I0),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function b0(){return new wt(ke.comparator)}function k0(){return new wt(ke.comparator)}const a1={asc:"ASCENDING",desc:"DESCENDING"},l1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u1={and:"AND",or:"OR"};class c1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ym(t,e){return t.useProto3Json||Th(e)?e:{value:e}}function rh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function d1(t,e){return rh(t,e.toTimestamp())}function hs(t){return nt(!!t),Me.fromTimestamp((function(n){const r=Ui(n);return new _t(r.seconds,r.nanos)})(t))}function pg(t,e){return vm(t,e).canonicalString()}function vm(t,e){const n=(function(i){return new ht(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function AT(t){const e=ht.fromString(t);return nt(DT(e)),e}function _m(t,e){return pg(t.databaseId,e.path)}function zp(t,e){const n=AT(e);if(n.get(1)!==t.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(RT(n))}function CT(t,e){return pg(t.databaseId,e)}function h1(t){const e=AT(t);return e.length===4?ht.emptyPath():RT(e)}function wm(t){return new ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RT(t){return nt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function S0(t,e,n){return{name:_m(t,e),fields:n.value.mapValue.fields}}function f1(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Oe()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(nt(v===void 0||typeof v=="string"),fn.fromBase64String(v||"")):(nt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),fn.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const v=m.code===void 0?ne.UNKNOWN:bT(m.code);return new me(v,m.message||"")})(u);n=new ST(r,i,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zp(t,r.document.name),a=hs(r.document.updateTime),u=r.document.createTime?hs(r.document.createTime):Me.min(),h=new Gn({mapValue:{fields:r.document.fields}}),f=bn.newFoundDocument(i,a,u,h),m=r.targetIds||[],v=r.removedTargetIds||[];n=new Fd(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zp(t,r.document),a=r.readTime?hs(r.readTime):Me.min(),u=bn.newNoDocument(i,a),h=r.removedTargetIds||[];n=new Fd([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zp(t,r.document),a=r.removedTargetIds||[];n=new Fd([],a,i,null)}else{if(!("filter"in e))return Oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,u=new n1(i,a),h=r.targetId;n=new kT(h,u)}}return n}function p1(t,e){let n;if(e instanceof Hu)n={update:S0(t,e.key,e.value)};else if(e instanceof dg)n={delete:_m(t,e.key)};else if(e instanceof Bi)n={update:S0(t,e.key,e.data),updateMask:I1(e.fieldMask)};else{if(!(e instanceof XR))return Oe();n={verify:_m(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const h=u.transform;if(h instanceof xu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Au)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Cu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof nh)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw Oe()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:d1(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Oe()})(t,e.precondition)),n}function m1(t,e){return t&&t.length>0?(nt(e!==void 0),t.map((n=>(function(i,a){let u=i.updateTime?hs(i.updateTime):hs(a);return u.isEqual(Me.min())&&(u=hs(a)),new ZR(u,i.transformResults||[])})(n,e)))):[]}function g1(t,e){return{documents:[CT(t,e.path)]}}function y1(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=CT(t,i);const a=(function(m){if(m.length!==0)return NT(Wr.create(m,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((v=>(function(I){return{field:Na(I.field),direction:w1(I.dir)}})(v)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=ym(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:n,parent:i}}function v1(t){let e=h1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){nt(r===1);const v=n.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=(function(w){const I=PT(w);return I instanceof Wr&&aT(I)?I.getFilters():[I]})(n.where));let u=[];n.orderBy&&(u=(function(w){return w.map((I=>(function(V){return new Su(Da(V.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(I)))})(n.orderBy));let h=null;n.limit&&(h=(function(w){let I;return I=typeof w=="object"?w.value:w,Th(I)?null:I})(n.limit));let f=null;n.startAt&&(f=(function(w){const I=!!w.before,S=w.values||[];return new th(S,I)})(n.startAt));let m=null;return n.endAt&&(m=(function(w){const I=!w.before,S=w.values||[];return new th(S,I)})(n.endAt)),LR(e,i,u,a,h,"F",f,m)}function _1(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Da(n.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Da(n.unaryFilter.field);return Vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Da(n.unaryFilter.field);return Vt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Da(n.unaryFilter.field);return Vt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}})(t):t.fieldFilter!==void 0?(function(n){return Vt.create(Da(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Wr.create(n.compositeFilter.filters.map((r=>PT(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Oe()}})(n.compositeFilter.op))})(t):Oe()}function w1(t){return a1[t]}function E1(t){return l1[t]}function T1(t){return u1[t]}function Na(t){return{fieldPath:t.canonicalString()}}function Da(t){return dn.fromServerFormat(t.fieldPath)}function NT(t){return t instanceof Vt?(function(n){if(n.op==="=="){if(h0(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NAN"}};if(d0(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(h0(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NOT_NAN"}};if(d0(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Na(n.field),op:E1(n.op),value:n.value}}})(t):t instanceof Wr?(function(n){const r=n.getFilters().map((i=>NT(i)));return r.length===1?r[0]:{compositeFilter:{op:T1(n.op),filters:r}}})(t):Oe()}function I1(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function DT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n,r,i,a=Me.min(),u=Me.min(),h=fn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.ct=e}}function k1(t){const e=v1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.un=new x1}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(zi.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class x1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new hn(ht.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hn(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new il(0)}static kn(){return new il(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.changes=new hl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&fu(r.mutation,i,ar.empty(),_t.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Be()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Be()){const i=To();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let u=iu();return a.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=To();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Be())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((u,h)=>{n.set(u,h)}))}))}computeViews(e,n,r,i){let a=$s();const u=hu(),h=(function(){return hu()})();return n.forEach(((f,m)=>{const v=r.get(m.key);i.has(m.key)&&(v===void 0||v.mutation instanceof Bi)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),fu(v.mutation,m,v.mutation.getFieldMask(),_t.now())):u.set(m.key,ar.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,v)=>u.set(m,v))),n.forEach(((m,v)=>{var w;return h.set(m,new C1(v,(w=u.get(m))!==null&&w!==void 0?w:null))})),h)))}recalculateAndSaveOverlays(e,n){const r=hu();let i=new wt(((u,h)=>u-h)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const h of u)h.keys().forEach((f=>{const m=n.get(f);if(m===null)return;let v=r.get(f)||ar.empty();v=h.applyToLocalView(m,v),r.set(f,v);const w=(i.get(h.batchId)||Be()).add(f);i=i.insert(h.batchId,w)}))})).next((()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,v=f.value,w=gT();v.forEach((I=>{if(!a.has(I)){const S=TT(n.get(I),r.get(I));S!==null&&w.set(I,S),a=a.add(I)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return oe.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(u){return ke.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):oe.resolve(To());let h=-1,f=a;return u.next((m=>oe.forEach(m,((v,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(v)?oe.resolve():this.remoteDocumentCache.getEntry(e,v).next((I=>{f=f.insert(v,I)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Be()))).next((v=>({batchId:h,changes:mT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next((r=>{let i=iu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let u=iu();return this.indexManager.getCollectionParents(e,a).next((h=>oe.forEach(h,(f=>{const m=(function(w,I){return new dl(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((v=>{v.forEach(((w,I)=>{u=u.insert(w,I)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((u=>{a.forEach(((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,bn.newInvalidDocument(v)))}));let h=iu();return u.forEach(((f,m)=>{const v=a.get(f);v!==void 0&&fu(v.mutation,m,ar.empty(),_t.now()),bh(n,m)&&(h=h.insert(f,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:hs(i.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(i){return{name:i.name,query:k1(i.bundledQuery),readTime:hs(i.readTime)}})(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.overlays=new wt(ke.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=To();return oe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.ht(e,n,a)})),oe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const i=To(),a=n.length+1,u=new ke(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new wt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=To(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=To(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,v)=>h.set(m,v))),!(h.size()>=i)););return oe.resolve(h)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new t1(n,r));let a=this.Ir.get(n);a===void 0&&(a=Be(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.Tr=new hn(tn.Er),this.dr=new hn(tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new tn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new tn(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new ke(new ht([])),r=new tn(n,e),i=new tn(n,e+1),a=[];return this.dr.forEachInRange([r,i],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ke(new ht([])),r=new tn(n,e),i=new tn(n,e+1);let a=Be();return this.dr.forEachInRange([r,i],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new tn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ke.comparator(e.key,n.key)||Xe(e.wr,n.wr)}static Ar(e,n){return Xe(e.wr,n.wr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new hn(tn.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new e1(a,n,r,i);this.mutationQueue.push(u);for(const h of i)this.br=this.br.add(new tn(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tn(n,0),i=new tn(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],(u=>{const h=this.Dr(u.wr);a.push(h)})),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new hn(Xe);return n.forEach((i=>{const a=new tn(i,0),u=new tn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(h=>{r=r.add(h.wr)}))})),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ke.isDocumentKey(a)||(a=a.child(""));const u=new tn(new ke(a),0);let h=new hn(Xe);return this.br.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(f.wr)),!0)}),u),oe.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){nt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(n.mutations,(i=>{const a=new tn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new tn(n,0),i=this.br.firstAfterOrEqual(r);return oe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.Mr=e,this.docs=(function(){return new wt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,u=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(e,n){let r=$s();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():bn.newInvalidDocument(i))})),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=$s();const u=n.path,h=new ke(u.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||yR(gR(v),r)<=0||(i.has(v.key)||bh(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Oe()}Or(e,n){return oe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new L1(this)}getSize(e){return oe.resolve(this.size)}}class L1 extends A1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.persistence=e,this.Nr=new hl((n=>ag(n)),lg),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mg,this.targetCount=0,this.kr=il.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,i)=>n(i))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new il(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach(((u,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)})),oe.waitFor(a).next((()=>i))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((u=>{a.push(i.markPotentiallyOrphaned(e,u))})),oe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new rg(0),this.Kr=!1,this.Kr=!0,this.$r=new D1,this.referenceDelegate=e(this),this.Ur=new V1(this),this.indexManager=new S1,this.remoteDocumentCache=(function(i){return new M1(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new b1(n),this.Gr=new P1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new N1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new O1(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){we("MemoryPersistence","Starting transaction:",e);const i=new F1(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,n){return oe.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class F1 extends _R{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Jr=new mg,this.Yr=null}static Zr(e){return new gg(e)}get Xr(){if(this.Yr)return this.Yr;throw Oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,(r=>{const i=ke.fromPath(r);return this.ei(e,i).next((a=>{a||n.removeEntry(i,Me.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Be(),i=Be();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new yg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return qS()?8:wR(kn())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,n,i,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new z1;return this.Xi(e,n,u).next((h=>{if(a.result=h,this.zi)return this.es(e,n,u,h.size)}))})).next((()=>a.result))}es(e,n,r,i){return r.documentReadCount<this.ji?(nu()<=Ke.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Pa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(nu()<=Ke.DEBUG&&we("QueryEngine","Query:",Pa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(nu()<=Ke.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Pa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ds(n))):oe.resolve())}Yi(e,n){if(g0(n))return oe.resolve(null);let r=ds(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=gm(n,null,"F"),r=ds(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Be(...a);return this.Ji.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.ts(n,h);return this.ns(n,m,u,f.readTime)?this.Yi(e,gm(n,null,"F")):this.rs(e,m,n,f)}))))})))))}Zi(e,n,r,i){return g0(n)||i.isEqual(Me.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const u=this.ts(n,a);return this.ns(n,u,r,i)?oe.resolve(null):(nu()<=Ke.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pa(n)),this.rs(e,u,n,mR(i,-1)).next((h=>h)))}))}ts(e,n){let r=new hn(fT(e));return n.forEach(((i,a)=>{bh(e,a)&&(r=r.add(a))})),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return nu()<=Ke.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Pa(n)),this.Ji.getDocumentsMatchingQuery(e,n,zi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new wt(Xe),this._s=new hl((a=>ag(a)),lg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function B1(t,e,n,r){return new $1(t,e,n,r)}async function OT(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],h=[];let f=Be();for(const m of i){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){h.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return n.localDocuments.getDocuments(r,f).next((m=>({hs:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function q1(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,v){const w=m.batch,I=w.keys();let S=oe.resolve();return I.forEach((V=>{S=S.next((()=>v.getEntry(f,V))).next((P=>{const N=m.docVersions.get(V);nt(N!==null),P.version.compareTo(N)<0&&(w.applyToRemoteDocument(P,m),P.isValidDocument()&&(P.setReadTime(m.commitVersion),v.addEntry(P)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(f,w)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Be();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function MT(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function W1(t,e){const n=Le(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const h=[];e.targetChanges.forEach(((v,w)=>{const I=i.get(w);if(!I)return;h.push(n.Ur.removeMatchingKeys(a,v.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(a,v.addedDocuments,w))));let S=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?S=S.withResumeToken(fn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,r)),i=i.insert(w,S),(function(P,N,q){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(I,S,v)&&h.push(n.Ur.updateTargetData(a,S))}));let f=$s(),m=Be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))})),h.push(H1(a,u,e.documentUpdates).next((v=>{f=v.Ps,m=v.Is}))),!r.isEqual(Me.min())){const v=n.Ur.getLastRemoteSnapshotVersion(a).next((w=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(v)}return oe.waitFor(h).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(n.os=i,a)))}function H1(t,e,n){let r=Be(),i=Be();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let u=$s();return n.forEach(((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(Me.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):we("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{Ps:u,Is:i}}))}function K1(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function G1(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Ur.getTargetData(r,e).next((a=>a?(i=a,oe.resolve(i)):n.Ur.allocateTargetId(r).next((u=>(i=new Mi(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function Em(t,e,n){const r=Le(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Wu(u))throw u;we("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function x0(t,e,n){const r=Le(t);let i=Me.min(),a=Be();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,v){const w=Le(f),I=w._s.get(v);return I!==void 0?oe.resolve(w.os.get(I)):w.Ur.getTargetData(m,v)})(r,u,ds(e)).next((h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,h.targetId).next((f=>{a=f}))})).next((()=>r.ss.getDocumentsMatchingQuery(u,e,n?i:Me.min(),n?a:Be()))).next((h=>(Q1(r,jR(e),h),{documents:h,Ts:a})))))}function Q1(t,e,n){let r=t.us.get(e)||Me.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class A0{constructor(){this.activeTargetIds=qR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z1{constructor(){this.so=new A0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new A0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td=null;function Up(){return Td===null?Td=(function(){return 268435456+Math.round(2147483648*Math.random())})():Td++,"0x"+Td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class eP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,u){const h=Up(),f=this.xo(n,r.toUriEncodedString());we("RestConnection",`Sending RPC '${n}' ${h}:`,f,i);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,u),this.No(n,f,m,i).then((v=>(we("RestConnection",`Received RPC '${n}' ${h}: `,v),v)),(v=>{throw tl("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",f,"request:",i),v}))}Lo(n,r,i,a,u,h){return this.Mo(n,r,i,a,u)}Oo(n,r,i){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cl})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,u)=>n[u]=a)),i&&i.headers.forEach(((a,u)=>n[u]=a))}xo(n,r){const i=Y1[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=Up();return new Promise(((u,h)=>{const f=new QE;f.setWithCredentials(!0),f.listenOnce(ZE.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ld.NO_ERROR:const v=f.getResponseJson();we(Tn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),u(v);break;case Ld.TIMEOUT:we(Tn,`RPC '${e}' ${a} timed out`),h(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Ld.HTTP_ERROR:const w=f.getStatus();if(we(Tn,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);const S=I==null?void 0:I.error;if(S&&S.status&&S.message){const V=(function(N){const q=N.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(q)>=0?q:ne.UNKNOWN})(S.status);h(new me(V,S.message))}else h(new me(ne.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new me(ne.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{we(Tn,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(i);we(Tn,`RPC '${e}' ${a} sending request:`,i),f.send(n,"POST",m,r,15)}))}Bo(e,n,r){const i=Up(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=XE(),h=YE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const v=a.join("");we(Tn,`Creating RPC '${e}' stream ${i}: ${v}`,f);const w=u.createWebChannel(v,f);let I=!1,S=!1;const V=new X1({Io:N=>{S?we(Tn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(I||(we(Tn,`Opening RPC '${e}' stream ${i} transport.`),w.open(),I=!0),we(Tn,`RPC '${e}' stream ${i} sending:`,N),w.send(N))},To:()=>w.close()}),P=(N,q,U)=>{N.listen(q,(H=>{try{U(H)}catch(J){setTimeout((()=>{throw J}),0)}}))};return P(w,su.EventType.OPEN,(()=>{S||(we(Tn,`RPC '${e}' stream ${i} transport opened.`),V.yo())})),P(w,su.EventType.CLOSE,(()=>{S||(S=!0,we(Tn,`RPC '${e}' stream ${i} transport closed`),V.So())})),P(w,su.EventType.ERROR,(N=>{S||(S=!0,tl(Tn,`RPC '${e}' stream ${i} transport errored:`,N),V.So(new me(ne.UNAVAILABLE,"The operation could not be completed")))})),P(w,su.EventType.MESSAGE,(N=>{var q;if(!S){const U=N.data[0];nt(!!U);const H=U,J=H.error||((q=H[0])===null||q===void 0?void 0:q.error);if(J){we(Tn,`RPC '${e}' stream ${i} received error:`,J);const Y=J.status;let te=(function(x){const O=Lt[x];if(O!==void 0)return bT(O)})(Y),C=J.message;te===void 0&&(te=ne.INTERNAL,C="Unknown error status: "+Y+" with message "+J.message),S=!0,V.So(new me(te,C)),w.close()}else we(Tn,`RPC '${e}' stream ${i} received:`,U),V.bo(U)}})),P(h,JE.STAT_EVENT,(N=>{N.stat===cm.PROXY?we(Tn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===cm.NOPROXY&&we(Tn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{V.wo()}),0),V}}function $p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){return new c1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&we("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n,r,i,a,u,h,f){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new LT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Us(n.toString()),Us("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===n&&this.P_(r,i)}),(r=>{e((()=>{const i=new me(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return we("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tP extends VT{constructor(e,n,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,u),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=f1(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Me.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Me.min():u.readTime?hs(u.readTime):Me.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=wm(this.serializer),n.addTarget=(function(a,u){let h;const f=u.target;if(h=pm(f)?{documents:g1(a,f)}:{query:y1(a,f)._t},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=xT(a,u.resumeToken);const m=ym(a,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Me.min())>0){h.readTime=rh(a,u.snapshotVersion.toTimestamp());const m=ym(a,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=_1(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=wm(this.serializer),n.removeTarget=e,this.a_(n)}}class nP extends VT{constructor(e,n,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return nt(!!e.streamToken),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=m1(e.writeResults,e.commitTime),r=hs(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=wm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>p1(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,vm(n,r),i,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(ne.UNKNOWN,a.toString())}))}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Lo(e,vm(n,r),i,u,h,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ne.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class sP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Us(n),this.D_=!1):we("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{r.enqueueAndForget((async()=>{$o(this)&&(we("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const m=Le(f);m.L_.add(4),await Gu(m),m.q_.set("Unknown"),m.L_.delete(4),await Ch(m)})(this))}))})),this.q_=new sP(r,i)}}async function Ch(t){if($o(t))for(const e of t.B_)await e(!0)}async function Gu(t){for(const e of t.B_)await e(!1)}function jT(t,e){const n=Le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Eg(n)?wg(n):fl(n).r_()&&_g(n,e))}function vg(t,e){const n=Le(t),r=fl(n);n.N_.delete(e),r.r_()&&FT(n,e),n.N_.size===0&&(r.r_()?r.o_():$o(n)&&n.q_.set("Unknown"))}function _g(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fl(t).A_(e)}function FT(t,e){t.Q_.xe(e),fl(t).R_(e)}function wg(t){t.Q_=new o1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),fl(t).start(),t.q_.v_()}function Eg(t){return $o(t)&&!fl(t).n_()&&t.N_.size>0}function $o(t){return Le(t).L_.size===0}function zT(t){t.Q_=void 0}async function oP(t){t.q_.set("Online")}async function aP(t){t.N_.forEach(((e,n)=>{_g(t,e)}))}async function lP(t,e){zT(t),Eg(t)?(t.q_.M_(e),wg(t)):t.q_.set("Unknown")}async function uP(t,e,n){if(t.q_.set("Online"),e instanceof ST&&e.state===2&&e.cause)try{await(async function(i,a){const u=a.cause;for(const h of a.targetIds)i.N_.has(h)&&(await i.remoteSyncer.rejectListen(h,u),i.N_.delete(h),i.Q_.removeTarget(h))})(t,e)}catch(r){we("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sh(t,r)}else if(e instanceof Fd?t.Q_.Ke(e):e instanceof kT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Me.min()))try{const r=await MT(t.localStore);n.compareTo(r)>=0&&await(function(a,u){const h=a.Q_.rt(u);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.N_.get(m);v&&a.N_.set(m,v.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,m)=>{const v=a.N_.get(f);if(!v)return;a.N_.set(f,v.withResumeToken(fn.EMPTY_BYTE_STRING,v.snapshotVersion)),FT(a,f);const w=new Mi(v.target,f,m,v.sequenceNumber);_g(a,w)})),a.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(r){we("RemoteStore","Failed to raise snapshot:",r),await sh(t,r)}}async function sh(t,e,n){if(!Wu(e))throw e;t.L_.add(1),await Gu(t),t.q_.set("Offline"),n||(n=()=>MT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{we("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ch(t)}))}function UT(t,e){return e().catch((n=>sh(t,n,e)))}async function Rh(t){const e=Le(t),n=$i(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;cP(e);)try{const i=await K1(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,dP(e,i)}catch(i){await sh(e,i)}$T(e)&&BT(e)}function cP(t){return $o(t)&&t.O_.length<10}function dP(t,e){t.O_.push(e);const n=$i(t);n.r_()&&n.V_&&n.m_(e.mutations)}function $T(t){return $o(t)&&!$i(t).n_()&&t.O_.length>0}function BT(t){$i(t).start()}async function hP(t){$i(t).p_()}async function fP(t){const e=$i(t);for(const n of t.O_)e.m_(n.mutations)}async function pP(t,e,n){const r=t.O_.shift(),i=hg.from(r,e,n);await UT(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Rh(t)}async function mP(t,e){e&&$i(t).V_&&await(async function(r,i){if((function(u){return r1(u)&&u!==ne.ABORTED})(i.code)){const a=r.O_.shift();$i(r).s_(),await UT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Rh(r)}})(t,e),$T(t)&&BT(t)}async function R0(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const r=$o(n);n.L_.add(3),await Gu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ch(n)}async function gP(t,e){const n=Le(t);e?(n.L_.delete(2),await Ch(n)):e||(n.L_.add(2),await Gu(n),n.q_.set("Unknown"))}function fl(t){return t.K_||(t.K_=(function(n,r,i){const a=Le(n);return a.w_(),new tP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:oP.bind(null,t),Ro:aP.bind(null,t),mo:lP.bind(null,t),d_:uP.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),Eg(t)?wg(t):t.q_.set("Unknown")):(await t.K_.stop(),zT(t))}))),t.K_}function $i(t){return t.U_||(t.U_=(function(n,r,i){const a=Le(n);return a.w_(),new nP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hP.bind(null,t),mo:mP.bind(null,t),f_:fP.bind(null,t),g_:pP.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Rh(t)):(await t.U_.stop(),t.O_.length>0&&(we("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const u=Date.now()+r,h=new Tg(e,n,u,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(t,e){if(Us("AsyncQueue",`${e}: ${t}`),Wu(t))return new me(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ke.comparator(n.key,r.key):(n,r)=>ke.comparator(n.key,r.key),this.keyedMap=iu(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new $a(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $a)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $a;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.W_=new wt(ke.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ol{constructor(e,n,r,i,a,u,h,f,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,i,a){const u=[];return n.forEach((h=>{u.push({type:0,doc:h})})),new ol(e,n,$a.emptySet(n),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class vP{constructor(){this.queries=N0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Le(n),a=i.queries;i.queries=N0(),a.forEach(((u,h)=>{for(const f of h.j_)f.onError(r)}))})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function N0(){return new hl((t=>hT(t)),Ih)}async function _P(t,e){const n=Le(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new yP,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(u){const h=Ig(u,`Initialization of query '${Pa(e.query)}' failed`);return void e.onError(h)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&bg(n)}async function wP(t,e){const n=Le(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function EP(t,e){const n=Le(t);let r=!1;for(const i of e){const a=i.query,u=n.queries.get(a);if(u){for(const h of u.j_)h.X_(i)&&(r=!0);u.z_=i}}r&&bg(n)}function TP(t,e,n){const r=Le(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function bg(t){t.Y_.forEach((e=>{e.next()}))}var Tm,D0;(D0=Tm||(Tm={})).ea="default",D0.Cache="cache";class IP{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ol(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.key=e}}class WT{constructor(e){this.key=e}}class bP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=fT(e),this.Ra=new $a(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new P0,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,u=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((v,w)=>{const I=i.get(v),S=bh(this.query,w)?w:null,V=!!I&&this.mutatedKeys.has(I.key),P=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let N=!1;I&&S?I.data.isEqual(S.data)?V!==P&&(r.track({type:3,doc:S}),N=!0):this.ga(I,S)||(r.track({type:2,doc:S}),N=!0,(f&&this.Aa(S,f)>0||m&&this.Aa(S,m)<0)&&(h=!0)):!I&&S?(r.track({type:0,doc:S}),N=!0):I&&!S&&(r.track({type:1,doc:I}),N=!0,(f||m)&&(h=!0)),N&&(S?(u=u.add(S),a=P?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{Ra:u,fa:r,ns:h,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((v,w)=>(function(S,V){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return P(S)-P(V)})(v.type,w.type)||this.Aa(v.doc,w.doc))),this.pa(r),i=i!=null&&i;const h=n&&!i?this.ya():[],f=this.da.size===0&&this.current&&!i?1:0,m=f!==this.Ea;return this.Ea=f,u.length!==0||m?{snapshot:new ol(this.query,e.Ra,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new P0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Be(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new WT(r))})),this.da.forEach((r=>{e.has(r)||n.push(new qT(r))})),n}ba(e){this.Ta=e.Ts,this.da=Be();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ol.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class kP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SP{constructor(e){this.key=e,this.va=!1}}class xP{constructor(e,n,r,i,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new hl((h=>hT(h)),Ih),this.Ma=new Map,this.xa=new Set,this.Oa=new wt(ke.comparator),this.Na=new Map,this.La=new mg,this.Ba={},this.ka=new Map,this.qa=il.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function AP(t,e,n=!0){const r=JT(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await HT(r,e,n,!0),i}async function CP(t,e){const n=JT(t);await HT(n,e,!0,!1)}async function HT(t,e,n,r){const i=await G1(t.localStore,ds(e)),a=i.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let h;return r&&(h=await RP(t,e,a,u==="current",i.resumeToken)),t.isPrimaryClient&&n&&jT(t.remoteStore,i),h}async function RP(t,e,n,r,i){t.Ka=(w,I,S)=>(async function(P,N,q,U){let H=N.view.ma(q);H.ns&&(H=await x0(P.localStore,N.query,!1).then((({documents:C})=>N.view.ma(C,H))));const J=U&&U.targetChanges.get(N.targetId),Y=U&&U.targetMismatches.get(N.targetId)!=null,te=N.view.applyChanges(H,P.isPrimaryClient,J,Y);return M0(P,N.targetId,te.wa),te.snapshot})(t,w,I,S);const a=await x0(t.localStore,e,!0),u=new bP(e,a.Ts),h=u.ma(a.documents),f=Ku.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),m=u.applyChanges(h,t.isPrimaryClient,f);M0(t,n,m.wa);const v=new kP(e,n,u);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function PP(t,e,n){const r=Le(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter((u=>!Ih(u,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Em(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vg(r.remoteStore,i.targetId),Im(r,i.targetId)})).catch(qu)):(Im(r,i.targetId),await Em(r.localStore,i.targetId,!0))}async function NP(t,e){const n=Le(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vg(n.remoteStore,r.targetId))}async function DP(t,e,n){const r=zP(t);try{const i=await(function(u,h){const f=Le(u),m=_t.now(),v=h.reduce(((S,V)=>S.add(V.key)),Be());let w,I;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let V=$s(),P=Be();return f.cs.getEntries(S,v).next((N=>{V=N,V.forEach(((q,U)=>{U.isValidDocument()||(P=P.add(q))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,V))).next((N=>{w=N;const q=[];for(const U of h){const H=YR(U,w.get(U.key).overlayedDocument);H!=null&&q.push(new Bi(U.key,H,sT(H.value.mapValue),Tr.exists(!0)))}return f.mutationQueue.addMutationBatch(S,m,q,h)})).next((N=>{I=N;const q=N.applyToLocalDocumentSet(w,P);return f.documentOverlayCache.saveOverlays(S,N.batchId,q)}))})).then((()=>({batchId:I.batchId,changes:mT(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(u,h,f){let m=u.Ba[u.currentUser.toKey()];m||(m=new wt(Xe)),m=m.insert(h,f),u.Ba[u.currentUser.toKey()]=m})(r,i.batchId,n),await Qu(r,i.changes),await Rh(r.remoteStore)}catch(i){const a=Ig(i,"Failed to persist write");n.reject(a)}}async function KT(t,e){const n=Le(t);try{const r=await W1(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const u=n.Na.get(a);u&&(nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.va=!0:i.modifiedDocuments.size>0?nt(u.va):i.removedDocuments.size>0&&(nt(u.va),u.va=!1))})),await Qu(n,r,e)}catch(r){await qu(r)}}function O0(t,e,n){const r=Le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach(((a,u)=>{const h=u.view.Z_(e);h.snapshot&&i.push(h.snapshot)})),(function(u,h){const f=Le(u);f.onlineState=h;let m=!1;f.queries.forEach(((v,w)=>{for(const I of w.j_)I.Z_(h)&&(m=!0)})),m&&bg(f)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function OP(t,e,n){const r=Le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let u=new wt(ke.comparator);u=u.insert(a,bn.newNoDocument(a,Me.min()));const h=Be().add(a),f=new xh(Me.min(),new Map,new wt(Xe),u,h);await KT(r,f),r.Oa=r.Oa.remove(a),r.Na.delete(e),kg(r)}else await Em(r.localStore,e,!1).then((()=>Im(r,e,n))).catch(qu)}async function MP(t,e){const n=Le(t),r=e.batch.batchId;try{const i=await q1(n.localStore,e);QT(n,r,null),GT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qu(n,i)}catch(i){await qu(i)}}async function LP(t,e,n){const r=Le(t);try{const i=await(function(u,h){const f=Le(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,h).next((w=>(nt(w!==null),v=w.keys(),f.mutationQueue.removeMutationBatch(m,w)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(r.localStore,e);QT(r,e,n),GT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qu(r,i)}catch(i){await qu(i)}}function GT(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function QT(t,e,n){const r=Le(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Im(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||ZT(t,r)}))}function ZT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(vg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),kg(t))}function M0(t,e,n){for(const r of n)r instanceof qT?(t.La.addReference(r.key,e),VP(t,r)):r instanceof WT?(we("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ZT(t,r.key)):Oe()}function VP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(we("SyncEngine","New document in limbo: "+n),t.xa.add(r),kg(t))}function kg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ke(ht.fromString(e)),r=t.qa.next();t.Na.set(r,new SP(n)),t.Oa=t.Oa.insert(n,r),jT(t.remoteStore,new Mi(ds(ug(n.path)),r,"TargetPurposeLimboResolution",rg.oe))}}async function Qu(t,e,n){const r=Le(t),i=[],a=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach(((h,f)=>{u.push(r.Ka(f,e,n).then((m=>{var v;if((m||n)&&r.isPrimaryClient){const w=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){i.push(m);const w=yg.Wi(f.targetId,m);a.push(w)}})))})),await Promise.all(u),r.Ca.d_(i),await(async function(f,m){const v=Le(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>oe.forEach(m,(I=>oe.forEach(I.$i,(S=>v.persistence.referenceDelegate.addReference(w,I.targetId,S))).next((()=>oe.forEach(I.Ui,(S=>v.persistence.referenceDelegate.removeReference(w,I.targetId,S)))))))))}catch(w){if(!Wu(w))throw w;we("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const I=w.targetId;if(!w.fromCache){const S=v.os.get(I),V=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(V);v.os=v.os.insert(I,P)}}})(r.localStore,a))}async function jP(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){we("SyncEngine","User change. New user:",e.toKey());const r=await OT(n.localStore,e);n.currentUser=e,(function(a,u){a.ka.forEach((h=>{h.forEach((f=>{f.reject(new me(ne.CANCELLED,u))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qu(n,r.hs)}}function FP(t,e){const n=Le(t),r=n.Na.get(e);if(r&&r.va)return Be().add(r.key);{let i=Be();const a=n.Ma.get(e);if(!a)return i;for(const u of a){const h=n.Fa.get(u);i=i.unionWith(h.view.Va)}return i}}function JT(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OP.bind(null,e),e.Ca.d_=EP.bind(null,e.eventManager),e.Ca.$a=TP.bind(null,e.eventManager),e}function zP(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LP.bind(null,e),e}class ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ah(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return B1(this.persistence,new U1,e.initialUser,this.serializer)}Ga(e){return new j1(gg.Zr,this.serializer)}Wa(e){return new Z1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ih.provider={build:()=>new ih};class bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>O0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jP.bind(null,this.syncEngine),await gP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vP})()}createDatastore(e){const n=Ah(e.databaseInfo.databaseId),r=(function(a){return new eP(a)})(e.databaseInfo);return(function(a,u,h,f){return new rP(a,u,h,f)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,u,h){return new iP(r,i,a,u,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>O0(this.syncEngine,n,0)),(function(){return C0.D()?new C0:new J1})())}createSyncEngine(e,n){return(function(i,a,u,h,f,m,v){const w=new xP(i,a,u,h,f,m);return v&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const a=Le(i);we("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Gu(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bm.provider={build:()=>new bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Us("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=In.UNAUTHENTICATED,this.clientId=tT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{we("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(we("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ig(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Bp(t,e){t.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await OT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function L0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BP(t);we("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>R0(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>R0(e.remoteStore,i))),t._onlineComponents=e}async function BP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;tl("Error using user provided cache. Falling back to memory cache: "+n),await Bp(t,new ih)}}else we("FirestoreClient","Using default OfflineComponentProvider"),await Bp(t,new ih);return t._offlineComponents}async function YT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we("FirestoreClient","Using user provided OnlineComponentProvider"),await L0(t,t._uninitializedComponentsProvider._online)):(we("FirestoreClient","Using default OnlineComponentProvider"),await L0(t,new bm))),t._onlineComponents}function qP(t){return YT(t).then((e=>e.syncEngine))}async function V0(t){const e=await YT(t),n=e.eventManager;return n.onListen=AP.bind(null,e.syncEngine),n.onUnlisten=PP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NP.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t,e,n){if(!n)throw new me(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WP(t,e,n,r){if(e===!0&&r===!0)throw new me(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function F0(t){if(!ke.isDocumentKey(t))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z0(t){if(ke.isDocumentKey(t))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe()}function fs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ph(t);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U0(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new oR;switch(r.type){case"firstParty":return new cR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=j0.get(n);r&&(we("ComponentProvider","Removing Datastore"),j0.delete(n),r.terminate())})(this),Promise.resolve()}}function HP(t,e,n,r={}){var i;const a=(t=fs(t,Nh))._getSettings(),u=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=In.MOCK_USER;else{h=VS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new In(m)}t._authCredentials=new aR(new eT(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bo(this.firestore,e,this._query)}}class Ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class Fi extends Bo{constructor(e,n,r){super(e,n,ug(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new ke(e))}withConverter(e){return new Fi(this.firestore,e,this._path)}}function qs(t,e,...n){if(t=Sn(t),eI("collection","path",e),t instanceof Nh){const r=ht.fromString(e,...n);return z0(r),new Fi(t,null,r)}{if(!(t instanceof Ln||t instanceof Fi))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return z0(r),new Fi(t.firestore,null,r)}}function Ir(t,e,...n){if(t=Sn(t),arguments.length===1&&(e=tT.newId()),eI("doc","path",e),t instanceof Nh){const r=ht.fromString(e,...n);return F0(r),new Ln(t,null,new ke(r))}{if(!(t instanceof Ln||t instanceof Fi))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return F0(r),new Ln(t.firestore,t instanceof Fi?t.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new LT(this,"async_queue_retry"),this.Vu=()=>{const r=$p();r&&we("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=$p();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=$p();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new Po;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wu(e))throw e;we("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h})(r);throw Us("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Tg.createAndSchedule(this,e,n,r,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&Oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function B0(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class jo extends Nh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $0(e),this._firestoreClient=void 0,await e}}}function KP(t,e){const n=typeof t=="object"?t:fE(),r=typeof t=="string"?t:"(default)",i=Wm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=MS("firestore");a&&HP(i,...a)}return i}function tI(t){if(t._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GP(t),t._firestoreClient}function GP(t){var e,n,r;const i=t._freezeSettings(),a=(function(h,f,m,v){return new IR(h,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,XT(v.experimentalLongPollingOptions),v.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new $P(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this._byteString=e}static fromBase64String(e){try{return new al(fn.fromBase64String(e))}catch(n){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new al(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=/^__.*__$/;class ZP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hu(e,this.data,n,this.fieldTransforms)}}class nI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class Ag{constructor(e,n,r,i,a,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return oh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(rI(this.Cu)&&QP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class JP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ah(e)}Qu(e,n,r,i=!1){return new Ag({Cu:e,methodName:n,qu:r,path:dn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mh(t){const e=t._freezeSettings(),n=Ah(t._databaseId);return new JP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sI(t,e,n,r,i,a={}){const u=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);Rg("Data must be an object, but it was:",u,r);const h=iI(r,u);let f,m;if(a.merge)f=new ar(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const I=km(e,w,n);if(!u.contains(I))throw new me(ne.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);aI(v,I)||v.push(I)}f=new ar(v),m=u.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,m=u.fieldTransforms;return new ZP(new Gn(h),f,m)}class Lh extends Oh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lh}}class Cg extends Oh{_toFieldTransform(e){return new GR(e.path,new xu)}isEqual(e){return e instanceof Cg}}function YP(t,e,n,r){const i=t.Qu(1,e,n);Rg("Data must be an object, but it was:",i,r);const a=[],u=Gn.empty();Uo(r,((f,m)=>{const v=Pg(e,f,n);m=Sn(m);const w=i.Nu(v);if(m instanceof Lh)a.push(v);else{const I=Zu(m,w);I!=null&&(a.push(v),u.set(v,I))}}));const h=new ar(a);return new nI(u,h,i.fieldTransforms)}function XP(t,e,n,r,i,a){const u=t.Qu(1,e,n),h=[km(e,r,n)],f=[i];if(a.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<a.length;I+=2)h.push(km(e,a[I])),f.push(a[I+1]);const m=[],v=Gn.empty();for(let I=h.length-1;I>=0;--I)if(!aI(m,h[I])){const S=h[I];let V=f[I];V=Sn(V);const P=u.Nu(S);if(V instanceof Lh)m.push(S);else{const N=Zu(V,P);N!=null&&(m.push(S),v.set(S,N))}}const w=new ar(m);return new nI(v,w,u.fieldTransforms)}function eN(t,e,n,r=!1){return Zu(n,t.Qu(r?4:3,e))}function Zu(t,e){if(oI(t=Sn(t)))return Rg("Unsupported field value:",e,t),iI(t,e);if(t instanceof Oh)return(function(r,i){if(!rI(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const a=[];let u=0;for(const h of r){let f=Zu(h,i.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=_t.fromDate(r);return{timestampValue:rh(i.serializer,a)}}if(r instanceof _t){const a=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rh(i.serializer,a)}}if(r instanceof Sg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof al)return{bytesValue:xT(i.serializer,r._byteString)};if(r instanceof Ln){const a=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw i.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:pg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof xg)return(function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return cg(h.serializer,f)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${Ph(r)}`)})(t,e)}function iI(t,e){const n={};return nT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Uo(t,((r,i)=>{const a=Zu(i,e.Mu(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function oI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Sg||t instanceof al||t instanceof Ln||t instanceof Oh||t instanceof xg)}function Rg(t,e,n){if(!oI(n)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(n)){const r=Ph(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function km(t,e,n){if((e=Sn(e))instanceof Dh)return e._internalPath;if(typeof e=="string")return Pg(t,e);throw oh("Field path arguments must be of type string or ",t,!1,void 0,n)}const tN=new RegExp("[~\\*/\\[\\]]");function Pg(t,e,n){if(e.search(tN)>=0)throw oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dh(...e.split("."))._internalPath}catch{throw oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function oh(t,e,n,r,i){const a=r&&!r.isEmpty(),u=i!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new me(ne.INVALID_ARGUMENT,h+t+f)}function aI(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nN extends lI{data(){return super.data()}}function Ng(t,e){return typeof e=="string"?Pg(t,e):e instanceof Dh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dg{}class uI extends Dg{}function Vh(t,e,...n){let r=[];e instanceof Dg&&r.push(e),r=r.concat(n),(function(a){const u=a.filter((f=>f instanceof Mg)).length,h=a.filter((f=>f instanceof Og)).length;if(u>1||u>0&&h>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Og extends uI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Og(e,n,r)}_apply(e){const n=this._parse(e);return dI(e._query,n),new Bo(e.firestore,e.converter,mm(e._query,n))}_parse(e){const n=Mh(e.firestore);return(function(a,u,h,f,m,v,w){let I;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){W0(w,v);const S=[];for(const V of w)S.push(q0(f,a,V));I={arrayValue:{values:S}}}else I=q0(f,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||W0(w,v),I=eN(h,u,w,v==="in"||v==="not-in");return Vt.create(m,v,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Mg extends Dg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Wr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let u=i;const h=a.getFlattenedFilters();for(const f of h)dI(u,f),u=mm(u,f)})(e._query,n),new Bo(e.firestore,e.converter,mm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lg extends uI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lg(e,n)}_apply(e){const n=(function(i,a,u){if(i.startAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Su(a,u)})(e._query,this._field,this._direction);return new Bo(e.firestore,e.converter,(function(i,a){const u=i.explicitOrderBy.concat([a]);return new dl(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function cI(t,e="asc"){const n=e,r=Ng("orderBy",t);return Lg._create(r,n)}function q0(t,e,n){if(typeof(n=Sn(n))=="string"){if(n==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dT(e)&&n.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ht.fromString(n));if(!ke.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return c0(t,new ke(r))}if(n instanceof Ln)return c0(t,n._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ph(n)}.`)}function W0(t,e){if(!Array.isArray(t)||t.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dI(t,e){const n=(function(i,a){for(const u of i)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sN{convertValue(e,n="none"){switch(Vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Uo(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((u=>At(u.doubleValue)));return new xg(a)}convertGeoPoint(e){return new Sg(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ig(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const n=Ui(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ht.fromString(e);nt(DT(r));const i=new bu(r.get(1),r.get(3)),a=new ke(r.popFirst(5));return i.isEqual(n)||Us(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fI extends lI{constructor(e,n,r,i,a,u){super(e,n,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ng("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zd extends fI{data(e={}){return super.data(e)}}class iN{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new au(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new zd(this._firestore,this._userDataWriter,r.key,r,new au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((h=>{const f=new zd(i._firestore,i._userDataWriter,h.doc.key,h.doc,new au(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new zd(i._firestore,i._userDataWriter,h.doc.key,h.doc,new au(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,v=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:oN(h.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}class pI extends sN{constructor(e){super(),this.firestore=e}convertBytes(e){return new al(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,n)}}function aN(t,e,n){t=fs(t,Ln);const r=fs(t.firestore,jo),i=hI(t.converter,e,n);return zh(r,[sI(Mh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Tr.none())])}function pl(t,e,n,...r){t=fs(t,Ln);const i=fs(t.firestore,jo),a=Mh(i);let u;return u=typeof(e=Sn(e))=="string"||e instanceof Dh?XP(a,"updateDoc",t._key,e,n,r):YP(a,"updateDoc",t._key,e),zh(i,[u.toMutation(t._key,Tr.exists(!0))])}function jh(t){return zh(fs(t.firestore,jo),[new dg(t._key,Tr.none())])}function Ju(t,e){const n=fs(t.firestore,jo),r=Ir(t),i=hI(t.converter,e);return zh(n,[sI(Mh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Tr.exists(!1))]).then((()=>r))}function Fh(t,...e){var n,r,i;t=Sn(t);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||B0(e[u])||(a=e[u],u++);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(B0(e[u])){const w=e[u];e[u]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[u+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[u+2]=(i=w.complete)===null||i===void 0?void 0:i.bind(w)}let f,m,v;if(t instanceof Ln)m=fs(t.firestore,jo),v=ug(t._key.path),f={next:w=>{e[u]&&e[u](lN(m,t,w))},error:e[u+1],complete:e[u+2]};else{const w=fs(t,Bo);m=fs(w.firestore,jo),v=w._query;const I=new pI(m);f={next:S=>{e[u]&&e[u](new iN(m,I,w,S))},error:e[u+1],complete:e[u+2]},rN(t._query)}return(function(I,S,V,P){const N=new UP(P),q=new IP(S,N,V);return I.asyncQueue.enqueueAndForget((async()=>_P(await V0(I),q))),()=>{N.Za(),I.asyncQueue.enqueueAndForget((async()=>wP(await V0(I),q)))}})(tI(m),v,h,f)}function zh(t,e){return(function(r,i){const a=new Po;return r.asyncQueue.enqueueAndForget((async()=>DP(await qP(r),i,a))),a.promise})(tI(t),e)}function lN(t,e,n){const r=n.docs.get(e._key),i=new pI(t);return new fI(t,i,e._key,r,new au(n.hasPendingWrites,n.fromCache),e.converter)}function qi(){return new Cg("serverTimestamp")}(function(e,n=!0){(function(i){cl=i})(ll),Xa(new Do("firestore",((r,{instanceIdentifier:i,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new jo(new lR(r.getProvider("auth-internal")),new hR(r.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(m.options.projectId,v)})(u,i),u);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),ji(i0,"4.7.3",e),ji(i0,"4.7.3","esm2017")})();const H0={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function uN(){if(typeof window<"u"&&window.GLOBAL_FIREBASE_CONFIG&&window.GLOBAL_FIREBASE_CONFIG.apiKey)return window.GLOBAL_FIREBASE_CONFIG;try{if(import.meta&&H0){const t=H0,e={apiKey:t.VITE_FIREBASE_API_KEY,authDomain:t.VITE_FIREBASE_AUTH_DOMAIN,projectId:t.VITE_FIREBASE_PROJECT_ID,storageBucket:t.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:t.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:t.VITE_FIREBASE_APP_ID,measurementId:t.VITE_FIREBASE_MEASUREMENT_ID};if(e.apiKey)return e}}catch{}if(typeof __firebase_config<"u")try{return typeof __firebase_config=="object"?__firebase_config:JSON.parse(__firebase_config)}catch(t){return console.error("[Firebase] Config parse failed (legacy):",t),null}return console.error("[Firebase] All config sources failed. Check index.html injection."),null}const Ud=uN();if(!(Ud!=null&&Ud.apiKey)){const t="[Firebase] Configuration is missing or invalid. Application cannot start.";throw console.error(t),new Error(t)}let Sm;V_().length>0?(Sm=V_()[0],console.log("[Firebase] Using existing app instance.")):(Sm=hE(Ud),console.log("[Firebase] Initialized new app instance."));const mI=Sm,Qn=sR(mI),jt=KP(mI);function cN(t,e,n){return`
        <div id="message-modal" class="fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in p-4" role="dialog" aria-modal="true">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 max-w-sm w-full transform transition-all scale-100 border border-gray-100 dark:border-gray-700">
                <div class="mb-5">
                    <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 mb-2 flex items-center gap-2" id="msg-modal-title"></h3>
                    <p class="text-gray-600 dark:text-gray-300 text-sm whitespace-pre-wrap leading-relaxed" id="msg-modal-body"></p>
                </div>
                <div class="flex justify-end space-x-3">
                    ${n?`
                    <button id="msg-modal-cancel" class="px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors">
                        ${t.cancelText}
                    </button>`:""}
                    <button id="msg-modal-ok" class="px-4 py-2 text-sm font-bold text-white ${e} rounded-lg shadow-md transition-transform active:scale-95">
                        ${t.okText}
                    </button>
                </div>
            </div>
        </div>
    `}function dN(t){var v;(v=document.getElementById("message-modal"))==null||v.remove();let e="bg-blue-600 hover:bg-blue-700";if(!t.title)switch(t.type){case"error":t.title="",e="bg-red-600 hover:bg-red-700";break;case"success":t.title="",e="bg-green-600 hover:bg-green-700";break;case"confirm":t.title="",e="bg-red-600 hover:bg-red-700";break;default:t.title="";break}const n=t.type==="confirm";!n&&t.okText==="OK"&&(t.okText=""),document.body.insertAdjacentHTML("beforeend",cN(t,e,n));const r=document.getElementById("message-modal"),i=document.getElementById("msg-modal-title"),a=document.getElementById("msg-modal-body"),u=document.getElementById("msg-modal-ok"),h=document.getElementById("msg-modal-cancel");i.textContent=t.title||"",a.textContent=t.message;const f=()=>{document.removeEventListener("keydown",m),r.classList.add("opacity-0"),setTimeout(()=>r.remove(),200)},m=w=>{w.key==="Escape"&&f(),w.key==="Enter"&&!n&&f()};document.addEventListener("keydown",m),u.onclick=()=>{t.onConfirm&&t.onConfirm(),f()},h&&(h.onclick=f),r.onclick=w=>{w.target===r&&!n&&f()},u.focus()}function Uh(t,e=null){let n={title:"",message:"",type:"info",onConfirm:null,cancelText:"",okText:"OK"};typeof t=="object"&&t!==null?n={...n,...t}:(n.message=String(t),typeof e=="function"?(n.type="confirm",n.onConfirm=e):typeof e=="string"&&(n.type=e)),dN(n)}function hN(){return typeof window<"u"&&window.GLOBAL_APP_ID?window.GLOBAL_APP_ID:typeof __app_id<"u"?__app_id:"default-app-id"}function Oa(t){return`artifacts/${hN()}/users/${t}`}function K0(t,e){return`${Oa(t)}/workspaces/${e}`}const Ft={users:t=>Oa(t),filters:t=>`${Oa(t)}/filters`,labels:t=>`${Oa(t)}/labels`,workspaces:t=>`${Oa(t)}/workspaces`,timeblocks:t=>`${Oa(t)}/timeblocks`,tasks:(t,e)=>`${K0(t,e)}/tasks`,projects:(t,e)=>`${K0(t,e)}/projects`},fN={WORKSPACE_CHANGED:"workspace-changed"};function ee(t,e,n){function r(h,f){if(h._zod||Object.defineProperty(h,"_zod",{value:{def:f,constr:u,traits:new Set},enumerable:!1}),h._zod.traits.has(t))return;h._zod.traits.add(t),e(h,f);const m=u.prototype,v=Object.keys(m);for(let w=0;w<v.length;w++){const I=v[w];I in h||(h[I]=m[I].bind(h))}}const i=(n==null?void 0:n.Parent)??Object;class a extends i{}Object.defineProperty(a,"name",{value:t});function u(h){var f;const m=n!=null&&n.Parent?new a:this;r(m,h),(f=m._zod).deferred??(f.deferred=[]);for(const v of m._zod.deferred)v();return m}return Object.defineProperty(u,"init",{value:r}),Object.defineProperty(u,Symbol.hasInstance,{value:h=>{var f,m;return n!=null&&n.Parent&&h instanceof n.Parent?!0:(m=(f=h==null?void 0:h._zod)==null?void 0:f.traits)==null?void 0:m.has(t)}}),Object.defineProperty(u,"name",{value:t}),u}class Ba extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class gI extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const yI={};function Fo(t){return yI}function vI(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function xm(t,e){return typeof e=="bigint"?e.toString():e}function Vg(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function jg(t){return t==null}function Fg(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function pN(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let i=(r.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(r)){const f=r.match(/\d?e-(\d?)/);f!=null&&f[1]&&(i=Number.parseInt(f[1]))}const a=n>i?n:i,u=Number.parseInt(t.toFixed(a).replace(".","")),h=Number.parseInt(e.toFixed(a).replace(".",""));return u%h/10**a}const G0=Symbol("evaluating");function ut(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==G0)return r===void 0&&(r=G0,r=n()),r},set(i){Object.defineProperty(t,e,{value:i})},configurable:!0})}function qo(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Wo(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function Q0(t){return JSON.stringify(t)}function mN(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const _I="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function ah(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const gN=Vg(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Ru(t){if(ah(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(ah(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function wI(t){return Ru(t)?{...t}:Array.isArray(t)?[...t]:t}const yN=new Set(["string","number","symbol"]);function $h(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Wi(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function be(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function vN(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const _N={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function wN(t,e){const n=t._zod.def,r=Wo(t._zod.def,{get shape(){const i={};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(i[a]=n.shape[a])}return qo(this,"shape",i),i},checks:[]});return Wi(t,r)}function EN(t,e){const n=t._zod.def,r=Wo(t._zod.def,{get shape(){const i={...t._zod.def.shape};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete i[a]}return qo(this,"shape",i),i},checks:[]});return Wi(t,r)}function TN(t,e){if(!Ru(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=Wo(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return qo(this,"shape",a),a},checks:[]});return Wi(t,i)}function IN(t,e){if(!Ru(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return qo(this,"shape",r),r},checks:t._zod.def.checks};return Wi(t,n)}function bN(t,e){const n=Wo(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return qo(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Wi(t,n)}function kN(t,e,n){const r=Wo(e._zod.def,{get shape(){const i=e._zod.def.shape,a={...i};if(n)for(const u in n){if(!(u in i))throw new Error(`Unrecognized key: "${u}"`);n[u]&&(a[u]=t?new t({type:"optional",innerType:i[u]}):i[u])}else for(const u in i)a[u]=t?new t({type:"optional",innerType:i[u]}):i[u];return qo(this,"shape",a),a},checks:[]});return Wi(e,r)}function SN(t,e,n){const r=Wo(e._zod.def,{get shape(){const i=e._zod.def.shape,a={...i};if(n)for(const u in n){if(!(u in a))throw new Error(`Unrecognized key: "${u}"`);n[u]&&(a[u]=new t({type:"nonoptional",innerType:i[u]}))}else for(const u in i)a[u]=new t({type:"nonoptional",innerType:i[u]});return qo(this,"shape",a),a},checks:[]});return Wi(e,r)}function La(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function EI(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Id(t){return typeof t=="string"?t:t==null?void 0:t.message}function zo(t,e,n){var i,a,u,h,f,m;const r={...t,path:t.path??[]};if(!t.message){const v=Id((u=(a=(i=t.inst)==null?void 0:i._zod.def)==null?void 0:a.error)==null?void 0:u.call(a,t))??Id((h=e==null?void 0:e.error)==null?void 0:h.call(e,t))??Id((f=n.customError)==null?void 0:f.call(n,t))??Id((m=n.localeError)==null?void 0:m.call(n,t))??"Invalid input";r.message=v}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function zg(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Pu(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const TI=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,xm,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},II=ee("$ZodError",TI),bI=ee("$ZodError",TI,{Parent:Error});function xN(t,e=n=>n.message){const n={},r=[];for(const i of t.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}function AN(t,e=n=>n.message){const n={_errors:[]},r=i=>{for(const a of i.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(u=>r({issues:u}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let u=n,h=0;for(;h<a.path.length;){const f=a.path[h];h===a.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(e(a))):u[f]=u[f]||{_errors:[]},u=u[f],h++}}};return r(t),n}const Ug=t=>(e,n,r,i)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},u=e._zod.run({value:n,issues:[]},a);if(u instanceof Promise)throw new Ba;if(u.issues.length){const h=new((i==null?void 0:i.Err)??t)(u.issues.map(f=>zo(f,a,Fo())));throw _I(h,i==null?void 0:i.callee),h}return u.value},$g=t=>async(e,n,r,i)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let u=e._zod.run({value:n,issues:[]},a);if(u instanceof Promise&&(u=await u),u.issues.length){const h=new((i==null?void 0:i.Err)??t)(u.issues.map(f=>zo(f,a,Fo())));throw _I(h,i==null?void 0:i.callee),h}return u.value},Bh=t=>(e,n,r)=>{const i=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new Ba;return a.issues.length?{success:!1,error:new(t??II)(a.issues.map(u=>zo(u,i,Fo())))}:{success:!0,data:a.value}},CN=Bh(bI),qh=t=>async(e,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(u=>zo(u,i,Fo())))}:{success:!0,data:a.value}},RN=qh(bI),PN=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ug(t)(e,n,i)},NN=t=>(e,n,r)=>Ug(t)(e,n,r),DN=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return $g(t)(e,n,i)},ON=t=>async(e,n,r)=>$g(t)(e,n,r),MN=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Bh(t)(e,n,i)},LN=t=>(e,n,r)=>Bh(t)(e,n,r),VN=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return qh(t)(e,n,i)},jN=t=>async(e,n,r)=>qh(t)(e,n,r),FN=/^[cC][^\s-]{8,}$/,zN=/^[0-9a-z]+$/,UN=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,$N=/^[0-9a-vA-V]{20}$/,BN=/^[A-Za-z0-9]{27}$/,qN=/^[a-zA-Z0-9_-]{21}$/,WN=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,HN=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Z0=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,KN=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,GN="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function QN(){return new RegExp(GN,"u")}const ZN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,JN=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,YN=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,XN=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eD=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,kI=/^[A-Za-z0-9_-]*$/,tD=/^\+(?:[0-9]){6,14}[0-9]$/,SI="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",nD=new RegExp(`^${SI}$`);function xI(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function rD(t){return new RegExp(`^${xI(t)}$`)}function sD(t){const e=xI({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${SI}T(?:${r})$`)}const iD=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},oD=/^-?\d+$/,aD=/^-?\d+(?:\.\d+)?/,lD=/^[^A-Z]*$/,uD=/^[^a-z]*$/,Zn=ee("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),AI={number:"number",bigint:"bigint",object:"date"},CI=ee("$ZodCheckLessThan",(t,e)=>{Zn.init(t,e);const n=AI[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,a=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<a&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),RI=ee("$ZodCheckGreaterThan",(t,e)=>{Zn.init(t,e);const n=AI[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,a=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>a&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),cD=ee("$ZodCheckMultipleOf",(t,e)=>{Zn.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):pN(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),dD=ee("$ZodCheckNumberFormat",(t,e)=>{var u;Zn.init(t,e),e.format=e.format||"float64";const n=(u=e.format)==null?void 0:u.includes("int"),r=n?"int":"number",[i,a]=_N[e.format];t._zod.onattach.push(h=>{const f=h._zod.bag;f.format=e.format,f.minimum=i,f.maximum=a,n&&(f.pattern=oD)}),t._zod.check=h=>{const f=h.value;if(n){if(!Number.isInteger(f)){h.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:f,inst:t});return}if(!Number.isSafeInteger(f)){f>0?h.issues.push({input:f,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):h.issues.push({input:f,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}f<i&&h.issues.push({origin:"number",input:f,code:"too_small",minimum:i,inclusive:!0,inst:t,continue:!e.abort}),f>a&&h.issues.push({origin:"number",input:f,code:"too_big",maximum:a,inst:t})}}),hD=ee("$ZodCheckMaxLength",(t,e)=>{var n;Zn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!jg(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const i=r.value;if(i.length<=e.maximum)return;const u=zg(i);r.issues.push({origin:u,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),fD=ee("$ZodCheckMinLength",(t,e)=>{var n;Zn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!jg(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const i=r.value;if(i.length>=e.minimum)return;const u=zg(i);r.issues.push({origin:u,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),pD=ee("$ZodCheckLengthEquals",(t,e)=>{var n;Zn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!jg(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),t._zod.check=r=>{const i=r.value,a=i.length;if(a===e.length)return;const u=zg(i),h=a>e.length;r.issues.push({origin:u,...h?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Wh=ee("$ZodCheckStringFormat",(t,e)=>{var n,r;Zn.init(t,e),t._zod.onattach.push(i=>{const a=i._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),mD=ee("$ZodCheckRegex",(t,e)=>{Wh.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),gD=ee("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=lD),Wh.init(t,e)}),yD=ee("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=uD),Wh.init(t,e)}),vD=ee("$ZodCheckIncludes",(t,e)=>{Zn.init(t,e);const n=$h(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(i=>{const a=i._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:t,continue:!e.abort})}}),_D=ee("$ZodCheckStartsWith",(t,e)=>{Zn.init(t,e);const n=new RegExp(`^${$h(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),wD=ee("$ZodCheckEndsWith",(t,e)=>{Zn.init(t,e);const n=new RegExp(`.*${$h(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),ED=ee("$ZodCheckOverwrite",(t,e)=>{Zn.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class TD{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(u=>u),i=Math.min(...r.map(u=>u.length-u.trimStart().length)),a=r.map(u=>u.slice(i)).map(u=>" ".repeat(this.indent*2)+u);for(const u of a)this.content.push(u)}compile(){const e=Function,n=this==null?void 0:this.args,i=[...((this==null?void 0:this.content)??[""]).map(a=>`  ${a}`)];return new e(...n,i.join(`
`))}}const ID={major:4,minor:2,patch:1},Ct=ee("$ZodType",(t,e)=>{var i;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=ID;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)for(const u of a._zod.onattach)u(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(i=t._zod.deferred)==null||i.push(()=>{t._zod.run=t._zod.parse});else{const a=(h,f,m)=>{let v=La(h),w;for(const I of f){if(I._zod.def.when){if(!I._zod.def.when(h))continue}else if(v)continue;const S=h.issues.length,V=I._zod.check(h);if(V instanceof Promise&&(m==null?void 0:m.async)===!1)throw new Ba;if(w||V instanceof Promise)w=(w??Promise.resolve()).then(async()=>{await V,h.issues.length!==S&&(v||(v=La(h,S)))});else{if(h.issues.length===S)continue;v||(v=La(h,S))}}return w?w.then(()=>h):h},u=(h,f,m)=>{if(La(h))return h.aborted=!0,h;const v=a(f,r,m);if(v instanceof Promise){if(m.async===!1)throw new Ba;return v.then(w=>t._zod.parse(w,m))}return t._zod.parse(v,m)};t._zod.run=(h,f)=>{if(f.skipChecks)return t._zod.parse(h,f);if(f.direction==="backward"){const v=t._zod.parse({value:h.value,issues:[]},{...f,skipChecks:!0});return v instanceof Promise?v.then(w=>u(w,h,f)):u(v,h,f)}const m=t._zod.parse(h,f);if(m instanceof Promise){if(f.async===!1)throw new Ba;return m.then(v=>a(v,r,f))}return a(m,r,f)}}t["~standard"]={validate:a=>{var u;try{const h=CN(t,a);return h.success?{value:h.data}:{issues:(u=h.error)==null?void 0:u.issues}}catch{return RN(t,a).then(f=>{var m;return f.success?{value:f.data}:{issues:(m=f.error)==null?void 0:m.issues}})}},vendor:"zod",version:1}}),Bg=ee("$ZodString",(t,e)=>{var n;Ct.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??iD(t._zod.bag),t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),gt=ee("$ZodStringFormat",(t,e)=>{Wh.init(t,e),Bg.init(t,e)}),bD=ee("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=HN),gt.init(t,e)}),kD=ee("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Z0(r))}else e.pattern??(e.pattern=Z0());gt.init(t,e)}),SD=ee("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=KN),gt.init(t,e)}),xD=ee("$ZodURL",(t,e)=>{gt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),i=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),AD=ee("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=QN()),gt.init(t,e)}),CD=ee("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=qN),gt.init(t,e)}),RD=ee("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=FN),gt.init(t,e)}),PD=ee("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=zN),gt.init(t,e)}),ND=ee("$ZodULID",(t,e)=>{e.pattern??(e.pattern=UN),gt.init(t,e)}),DD=ee("$ZodXID",(t,e)=>{e.pattern??(e.pattern=$N),gt.init(t,e)}),OD=ee("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=BN),gt.init(t,e)}),MD=ee("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=sD(e)),gt.init(t,e)}),LD=ee("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=nD),gt.init(t,e)}),VD=ee("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=rD(e)),gt.init(t,e)}),jD=ee("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=WN),gt.init(t,e)}),FD=ee("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=ZN),gt.init(t,e),t._zod.bag.format="ipv4"}),zD=ee("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=JN),gt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),UD=ee("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=YN),gt.init(t,e)}),$D=ee("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=XN),gt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[i,a]=r;if(!a)throw new Error;const u=Number(a);if(`${u}`!==a)throw new Error;if(u<0||u>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function PI(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const BD=ee("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=eD),gt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{PI(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function qD(t){if(!kI.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return PI(n)}const WD=ee("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=kI),gt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{qD(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),HD=ee("$ZodE164",(t,e)=>{e.pattern??(e.pattern=tD),gt.init(t,e)});function KD(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const GD=ee("$ZodJWT",(t,e)=>{gt.init(t,e),t._zod.check=n=>{KD(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),NI=ee("$ZodNumber",(t,e)=>{Ct.init(t,e),t._zod.pattern=t._zod.bag.pattern??aD,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const a=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:t,...a?{received:a}:{}}),n}}),QD=ee("$ZodNumberFormat",(t,e)=>{dD.init(t,e),NI.init(t,e)}),ZD=ee("$ZodUnknown",(t,e)=>{Ct.init(t,e),t._zod.parse=n=>n}),JD=ee("$ZodNever",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),YD=ee("$ZodDate",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const i=n.value,a=i instanceof Date;return a&&!Number.isNaN(i.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:i,...a?{received:"Invalid Date"}:{},inst:t}),n}});function J0(t,e,n){t.issues.length&&e.issues.push(...EI(n,t.issues)),e.value[n]=t.value}const XD=ee("$ZodArray",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),n;n.value=Array(i.length);const a=[];for(let u=0;u<i.length;u++){const h=i[u],f=e.element._zod.run({value:h,issues:[]},r);f instanceof Promise?a.push(f.then(m=>J0(m,n,u))):J0(f,n,u)}return a.length?Promise.all(a).then(()=>n):n}});function lh(t,e,n,r){t.issues.length&&e.issues.push(...EI(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function DI(t){var r,i,a,u;const e=Object.keys(t.shape);for(const h of e)if(!((u=(a=(i=(r=t.shape)==null?void 0:r[h])==null?void 0:i._zod)==null?void 0:a.traits)!=null&&u.has("$ZodType")))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);const n=vN(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function OI(t,e,n,r,i,a){const u=[],h=i.keySet,f=i.catchall._zod,m=f.def.type;for(const v in e){if(h.has(v))continue;if(m==="never"){u.push(v);continue}const w=f.run({value:e[v],issues:[]},r);w instanceof Promise?t.push(w.then(I=>lh(I,n,v,e))):lh(w,n,v,e)}return u.length&&n.issues.push({code:"unrecognized_keys",keys:u,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const e2=ee("$ZodObject",(t,e)=>{Ct.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const h=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...h};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=Vg(()=>DI(e));ut(t._zod,"propValues",()=>{const h=e.shape,f={};for(const m in h){const v=h[m]._zod;if(v.values){f[m]??(f[m]=new Set);for(const w of v.values)f[m].add(w)}}return f});const i=ah,a=e.catchall;let u;t._zod.parse=(h,f)=>{u??(u=r.value);const m=h.value;if(!i(m))return h.issues.push({expected:"object",code:"invalid_type",input:m,inst:t}),h;h.value={};const v=[],w=u.shape;for(const I of u.keys){const V=w[I]._zod.run({value:m[I],issues:[]},f);V instanceof Promise?v.push(V.then(P=>lh(P,h,I,m))):lh(V,h,I,m)}return a?OI(v,m,h,f,r.value,t):v.length?Promise.all(v).then(()=>h):h}}),t2=ee("$ZodObjectJIT",(t,e)=>{e2.init(t,e);const n=t._zod.parse,r=Vg(()=>DI(e)),i=I=>{const S=new TD(["shape","payload","ctx"]),V=r.value,P=H=>{const J=Q0(H);return`shape[${J}]._zod.run({ value: input[${J}], issues: [] }, ctx)`};S.write("const input = payload.value;");const N=Object.create(null);let q=0;for(const H of V.keys)N[H]=`key_${q++}`;S.write("const newResult = {};");for(const H of V.keys){const J=N[H],Y=Q0(H);S.write(`const ${J} = ${P(H)};`),S.write(`
        if (${J}.issues.length) {
          payload.issues = payload.issues.concat(${J}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Y}, ...iss.path] : [${Y}]
          })));
        }
        
        
        if (${J}.value === undefined) {
          if (${Y} in input) {
            newResult[${Y}] = undefined;
          }
        } else {
          newResult[${Y}] = ${J}.value;
        }
        
      `)}S.write("payload.value = newResult;"),S.write("return payload;");const U=S.compile();return(H,J)=>U(I,H,J)};let a;const u=ah,h=!yI.jitless,m=h&&gN.value,v=e.catchall;let w;t._zod.parse=(I,S)=>{w??(w=r.value);const V=I.value;return u(V)?h&&m&&(S==null?void 0:S.async)===!1&&S.jitless!==!0?(a||(a=i(e.shape)),I=a(I,S),v?OI([],V,I,S,w,t):I):n(I,S):(I.issues.push({expected:"object",code:"invalid_type",input:V,inst:t}),I)}});function Y0(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const i=t.filter(a=>!La(a));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(u=>zo(u,r,Fo())))}),e)}const n2=ee("$ZodUnion",(t,e)=>{Ct.init(t,e),ut(t._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),ut(t._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),ut(t._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),ut(t._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${i.map(a=>Fg(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(i,a)=>{if(n)return r(i,a);let u=!1;const h=[];for(const f of e.options){const m=f._zod.run({value:i.value,issues:[]},a);if(m instanceof Promise)h.push(m),u=!0;else{if(m.issues.length===0)return m;h.push(m)}}return u?Promise.all(h).then(f=>Y0(f,i,t,a)):Y0(h,i,t,a)}}),r2=ee("$ZodIntersection",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{const i=n.value,a=e.left._zod.run({value:i,issues:[]},r),u=e.right._zod.run({value:i,issues:[]},r);return a instanceof Promise||u instanceof Promise?Promise.all([a,u]).then(([f,m])=>X0(n,f,m)):X0(n,a,u)}});function Am(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Ru(t)&&Ru(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),i={...t,...e};for(const a of r){const u=Am(t[a],e[a]);if(!u.valid)return{valid:!1,mergeErrorPath:[a,...u.mergeErrorPath]};i[a]=u.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const i=t[r],a=e[r],u=Am(i,a);if(!u.valid)return{valid:!1,mergeErrorPath:[r,...u.mergeErrorPath]};n.push(u.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function X0(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),La(t))return t;const r=Am(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const s2=ee("$ZodEnum",(t,e)=>{Ct.init(t,e);const n=vI(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(i=>yN.has(typeof i)).map(i=>typeof i=="string"?$h(i):i.toString()).join("|")})$`),t._zod.parse=(i,a)=>{const u=i.value;return r.has(u)||i.issues.push({code:"invalid_value",values:n,input:u,inst:t}),i}}),i2=ee("$ZodTransform",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new gI(t.constructor.name);const i=e.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(u=>(n.value=u,n));if(i instanceof Promise)throw new Ba;return n.value=i,n}});function ew(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const o2=ee("$ZodOptional",(t,e)=>{Ct.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ut(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ut(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Fg(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>ew(a,n.value)):ew(i,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),a2=ee("$ZodNullable",(t,e)=>{Ct.init(t,e),ut(t._zod,"optin",()=>e.innerType._zod.optin),ut(t._zod,"optout",()=>e.innerType._zod.optout),ut(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Fg(n.source)}|null)$`):void 0}),ut(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),l2=ee("$ZodDefault",(t,e)=>{Ct.init(t,e),t._zod.optin="optional",ut(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>tw(a,e)):tw(i,e)}});function tw(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const u2=ee("$ZodPrefault",(t,e)=>{Ct.init(t,e),t._zod.optin="optional",ut(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),c2=ee("$ZodNonOptional",(t,e)=>{Ct.init(t,e),ut(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>nw(a,t)):nw(i,t)}});function nw(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const d2=ee("$ZodCatch",(t,e)=>{Ct.init(t,e),ut(t._zod,"optin",()=>e.innerType._zod.optin),ut(t._zod,"optout",()=>e.innerType._zod.optout),ut(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(u=>zo(u,r,Fo()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(a=>zo(a,r,Fo()))},input:n.value}),n.issues=[]),n)}}),h2=ee("$ZodPipe",(t,e)=>{Ct.init(t,e),ut(t._zod,"values",()=>e.in._zod.values),ut(t._zod,"optin",()=>e.in._zod.optin),ut(t._zod,"optout",()=>e.out._zod.optout),ut(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(u=>bd(u,e.in,r)):bd(a,e.in,r)}const i=e.in._zod.run(n,r);return i instanceof Promise?i.then(a=>bd(a,e.out,r)):bd(i,e.out,r)}});function bd(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const f2=ee("$ZodReadonly",(t,e)=>{Ct.init(t,e),ut(t._zod,"propValues",()=>e.innerType._zod.propValues),ut(t._zod,"values",()=>e.innerType._zod.values),ut(t._zod,"optin",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),ut(t._zod,"optout",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(rw):rw(i)}});function rw(t){return t.value=Object.freeze(t.value),t}const p2=ee("$ZodCustom",(t,e)=>{Zn.init(t,e),Ct.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,i=e.fn(r);if(i instanceof Promise)return i.then(a=>sw(a,n,r,t));sw(i,n,r,t)}});function sw(t,e,n,r){if(!t){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(Pu(i))}}var iw;class m2{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function g2(){return new m2}(iw=globalThis).__zod_globalRegistry??(iw.__zod_globalRegistry=g2());const lu=globalThis.__zod_globalRegistry;function y2(t,e){return new t({type:"string",...be(e)})}function v2(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...be(e)})}function ow(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...be(e)})}function _2(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...be(e)})}function w2(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...be(e)})}function E2(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...be(e)})}function T2(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...be(e)})}function I2(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...be(e)})}function b2(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...be(e)})}function k2(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...be(e)})}function S2(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...be(e)})}function x2(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...be(e)})}function A2(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...be(e)})}function C2(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...be(e)})}function R2(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...be(e)})}function P2(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...be(e)})}function N2(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...be(e)})}function D2(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...be(e)})}function O2(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...be(e)})}function M2(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...be(e)})}function L2(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...be(e)})}function V2(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...be(e)})}function j2(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...be(e)})}function F2(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...be(e)})}function z2(t,e){return new t({type:"string",format:"date",check:"string_format",...be(e)})}function U2(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...be(e)})}function $2(t,e){return new t({type:"string",format:"duration",check:"string_format",...be(e)})}function B2(t,e){return new t({type:"number",checks:[],...be(e)})}function q2(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...be(e)})}function W2(t){return new t({type:"unknown"})}function H2(t,e){return new t({type:"never",...be(e)})}function K2(t,e){return new t({type:"date",...be(e)})}function aw(t,e){return new CI({check:"less_than",...be(e),value:t,inclusive:!1})}function $d(t,e){return new CI({check:"less_than",...be(e),value:t,inclusive:!0})}function lw(t,e){return new RI({check:"greater_than",...be(e),value:t,inclusive:!1})}function Bd(t,e){return new RI({check:"greater_than",...be(e),value:t,inclusive:!0})}function uw(t,e){return new cD({check:"multiple_of",...be(e),value:t})}function MI(t,e){return new hD({check:"max_length",...be(e),maximum:t})}function uh(t,e){return new fD({check:"min_length",...be(e),minimum:t})}function LI(t,e){return new pD({check:"length_equals",...be(e),length:t})}function G2(t,e){return new mD({check:"string_format",format:"regex",...be(e),pattern:t})}function Q2(t){return new gD({check:"string_format",format:"lowercase",...be(t)})}function Z2(t){return new yD({check:"string_format",format:"uppercase",...be(t)})}function J2(t,e){return new vD({check:"string_format",format:"includes",...be(e),includes:t})}function Y2(t,e){return new _D({check:"string_format",format:"starts_with",...be(e),prefix:t})}function X2(t,e){return new wD({check:"string_format",format:"ends_with",...be(e),suffix:t})}function ml(t){return new ED({check:"overwrite",tx:t})}function eO(t){return ml(e=>e.normalize(t))}function tO(){return ml(t=>t.trim())}function nO(){return ml(t=>t.toLowerCase())}function rO(){return ml(t=>t.toUpperCase())}function sO(){return ml(t=>mN(t))}function iO(t,e,n){return new t({type:"array",element:e,...be(n)})}function oO(t,e,n){return new t({type:"custom",check:"custom",fn:e,...be(n)})}function aO(t){const e=lO(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Pu(r,n.value,e._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),n.issues.push(Pu(i))}},t(n.value,n)));return e}function lO(t,e){const n=new Zn({check:"custom",...be(e)});return n._zod.check=t,n}function VI(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??lu,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function pn(t,e,n={path:[],schemaPath:[]}){var v,w;var r;const i=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const u={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,u);const h=(w=(v=t._zod).toJSONSchema)==null?void 0:w.call(v);if(h)u.schema=h;else{const I={...n,schemaPath:[...n.schemaPath,t],path:n.path},S=t._zod.parent;if(S)u.ref=S,pn(S,e,I),e.seen.get(S).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,u.schema,I);else{const V=u.schema,P=e.processors[i.type];if(!P)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${i.type}`);P(t,e,V,I)}}const f=e.metadataRegistry.get(t);return f&&Object.assign(u.schema,f),e.io==="input"&&Dn(t)&&(delete u.schema.examples,delete u.schema.default),e.io==="input"&&u.schema._prefault&&((r=u.schema).default??(r.default=u.schema._prefault)),delete u.schema._prefault,e.seen.get(t).schema}function jI(t,e){var a,u,h;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=f=>{var S;const m=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const V=(S=t.external.registry.get(f[0]))==null?void 0:S.id,P=t.external.uri??(q=>q);if(V)return{ref:P(V)};const N=f[1].defId??f[1].schema.id??`schema${t.counter++}`;return f[1].defId=N,{defId:N,ref:`${P("__shared")}#/${m}/${N}`}}if(f[1]===n)return{ref:"#"};const w=`#/${m}/`,I=f[1].schema.id??`__schema${t.counter++}`;return{defId:I,ref:w+I}},i=f=>{if(f[1].schema.$ref)return;const m=f[1],{ref:v,defId:w}=r(f);m.def={...m.schema},w&&(m.defId=w);const I=m.schema;for(const S in I)delete I[S];I.$ref=v};if(t.cycles==="throw")for(const f of t.seen.entries()){const m=f[1];if(m.cycle)throw new Error(`Cycle detected: #/${(a=m.cycle)==null?void 0:a.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const f of t.seen.entries()){const m=f[1];if(e===f[0]){i(f);continue}if(t.external){const w=(u=t.external.registry.get(f[0]))==null?void 0:u.id;if(e!==f[0]&&w){i(f);continue}}if((h=t.metadataRegistry.get(f[0]))==null?void 0:h.id){i(f);continue}if(m.cycle){i(f);continue}if(m.count>1&&t.reused==="ref"){i(f);continue}}}function FI(t,e){var u,h,f;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=m=>{const v=t.seen.get(m),w=v.def??v.schema,I={...w};if(v.ref===null)return;const S=v.ref;if(v.ref=null,S){r(S);const V=t.seen.get(S).schema;V.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(w.allOf=w.allOf??[],w.allOf.push(V)):(Object.assign(w,V),Object.assign(w,I))}v.isParent||t.override({zodSchema:m,jsonSchema:w,path:v.path??[]})};for(const m of[...t.seen.entries()].reverse())r(m[0]);const i={};if(t.target==="draft-2020-12"?i.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?i.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?i.$schema="http://json-schema.org/draft-04/schema#":t.target,(u=t.external)!=null&&u.uri){const m=(h=t.external.registry.get(e))==null?void 0:h.id;if(!m)throw new Error("Schema is missing an `id` property");i.$id=t.external.uri(m)}Object.assign(i,n.def??n.schema);const a=((f=t.external)==null?void 0:f.defs)??{};for(const m of t.seen.entries()){const v=m[1];v.def&&v.defId&&(a[v.defId]=v.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?i.$defs=a:i.definitions=a);try{const m=JSON.parse(JSON.stringify(i));return Object.defineProperty(m,"~standard",{value:{...e["~standard"],jsonSchema:{input:ch(e,"input"),output:ch(e,"output")}},enumerable:!1,writable:!1}),m}catch{throw new Error("Error converting schema to JSON.")}}function Dn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Dn(r.element,n);if(r.type==="set")return Dn(r.valueType,n);if(r.type==="lazy")return Dn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Dn(r.innerType,n);if(r.type==="intersection")return Dn(r.left,n)||Dn(r.right,n);if(r.type==="record"||r.type==="map")return Dn(r.keyType,n)||Dn(r.valueType,n);if(r.type==="pipe")return Dn(r.in,n)||Dn(r.out,n);if(r.type==="object"){for(const i in r.shape)if(Dn(r.shape[i],n))return!0;return!1}if(r.type==="union"){for(const i of r.options)if(Dn(i,n))return!0;return!1}if(r.type==="tuple"){for(const i of r.items)if(Dn(i,n))return!0;return!!(r.rest&&Dn(r.rest,n))}return!1}const uO=(t,e={})=>n=>{const r=VI({...n,processors:e});return pn(t,r),jI(r,t),FI(r,t)},ch=(t,e)=>n=>{const{libraryOptions:r,target:i}=n??{},a=VI({...r??{},target:i,io:e,processors:{}});return pn(t,a),jI(a,t),FI(a,t)},cO={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},dO=(t,e,n,r)=>{const i=n;i.type="string";const{minimum:a,maximum:u,format:h,patterns:f,contentEncoding:m}=t._zod.bag;if(typeof a=="number"&&(i.minLength=a),typeof u=="number"&&(i.maxLength=u),h&&(i.format=cO[h]??h,i.format===""&&delete i.format),m&&(i.contentEncoding=m),f&&f.size>0){const v=[...f];v.length===1?i.pattern=v[0].source:v.length>1&&(i.allOf=[...v.map(w=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:w.source}))])}},hO=(t,e,n,r)=>{const i=n,{minimum:a,maximum:u,format:h,multipleOf:f,exclusiveMaximum:m,exclusiveMinimum:v}=t._zod.bag;typeof h=="string"&&h.includes("int")?i.type="integer":i.type="number",typeof v=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(i.minimum=v,i.exclusiveMinimum=!0):i.exclusiveMinimum=v),typeof a=="number"&&(i.minimum=a,typeof v=="number"&&e.target!=="draft-04"&&(v>=a?delete i.minimum:delete i.exclusiveMinimum)),typeof m=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(i.maximum=m,i.exclusiveMaximum=!0):i.exclusiveMaximum=m),typeof u=="number"&&(i.maximum=u,typeof m=="number"&&e.target!=="draft-04"&&(m<=u?delete i.maximum:delete i.exclusiveMaximum)),typeof f=="number"&&(i.multipleOf=f)},fO=(t,e,n,r)=>{n.not={}},pO=(t,e,n,r)=>{},mO=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},gO=(t,e,n,r)=>{const i=t._zod.def,a=vI(i.entries);a.every(u=>typeof u=="number")&&(n.type="number"),a.every(u=>typeof u=="string")&&(n.type="string"),n.enum=a},yO=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},vO=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},_O=(t,e,n,r)=>{const i=n,a=t._zod.def,{minimum:u,maximum:h}=t._zod.bag;typeof u=="number"&&(i.minItems=u),typeof h=="number"&&(i.maxItems=h),i.type="array",i.items=pn(a.element,e,{...r,path:[...r.path,"items"]})},wO=(t,e,n,r)=>{var m;const i=n,a=t._zod.def;i.type="object",i.properties={};const u=a.shape;for(const v in u)i.properties[v]=pn(u[v],e,{...r,path:[...r.path,"properties",v]});const h=new Set(Object.keys(u)),f=new Set([...h].filter(v=>{const w=a.shape[v]._zod;return e.io==="input"?w.optin===void 0:w.optout===void 0}));f.size>0&&(i.required=Array.from(f)),((m=a.catchall)==null?void 0:m._zod.def.type)==="never"?i.additionalProperties=!1:a.catchall?a.catchall&&(i.additionalProperties=pn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(i.additionalProperties=!1)},EO=(t,e,n,r)=>{const i=t._zod.def,a=i.inclusive===!1,u=i.options.map((h,f)=>pn(h,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=u:n.anyOf=u},TO=(t,e,n,r)=>{const i=t._zod.def,a=pn(i.left,e,{...r,path:[...r.path,"allOf",0]}),u=pn(i.right,e,{...r,path:[...r.path,"allOf",1]}),h=m=>"allOf"in m&&Object.keys(m).length===1,f=[...h(a)?a.allOf:[a],...h(u)?u.allOf:[u]];n.allOf=f},IO=(t,e,n,r)=>{const i=t._zod.def,a=pn(i.innerType,e,r),u=e.seen.get(t);e.target==="openapi-3.0"?(u.ref=i.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},bO=(t,e,n,r)=>{const i=t._zod.def;pn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType},kO=(t,e,n,r)=>{const i=t._zod.def;pn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType,n.default=JSON.parse(JSON.stringify(i.defaultValue))},SO=(t,e,n,r)=>{const i=t._zod.def;pn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(i.defaultValue)))},xO=(t,e,n,r)=>{const i=t._zod.def;pn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType;let u;try{u=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=u},AO=(t,e,n,r)=>{const i=t._zod.def,a=e.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;pn(a,e,r);const u=e.seen.get(t);u.ref=a},CO=(t,e,n,r)=>{const i=t._zod.def;pn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType,n.readOnly=!0},RO=(t,e,n,r)=>{const i=t._zod.def;pn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType},PO=ee("ZodISODateTime",(t,e)=>{MD.init(t,e),Et.init(t,e)});function NO(t){return F2(PO,t)}const DO=ee("ZodISODate",(t,e)=>{LD.init(t,e),Et.init(t,e)});function OO(t){return z2(DO,t)}const MO=ee("ZodISOTime",(t,e)=>{VD.init(t,e),Et.init(t,e)});function LO(t){return U2(MO,t)}const VO=ee("ZodISODuration",(t,e)=>{jD.init(t,e),Et.init(t,e)});function jO(t){return $2(VO,t)}const FO=(t,e)=>{II.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>AN(t,n)},flatten:{value:n=>xN(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,xm,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,xm,2)}},isEmpty:{get(){return t.issues.length===0}}})},br=ee("ZodError",FO,{Parent:Error}),zO=Ug(br),UO=$g(br),$O=Bh(br),BO=qh(br),qO=PN(br),WO=NN(br),HO=DN(br),KO=ON(br),GO=MN(br),QO=LN(br),ZO=VN(br),JO=jN(br),zt=ee("ZodType",(t,e)=>(Ct.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:ch(t,"input"),output:ch(t,"output")}}),t.toJSONSchema=uO(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Wo(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>Wi(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>zO(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>$O(t,n,r),t.parseAsync=async(n,r)=>UO(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>BO(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>qO(t,n,r),t.decode=(n,r)=>WO(t,n,r),t.encodeAsync=async(n,r)=>HO(t,n,r),t.decodeAsync=async(n,r)=>KO(t,n,r),t.safeEncode=(n,r)=>GO(t,n,r),t.safeDecode=(n,r)=>QO(t,n,r),t.safeEncodeAsync=async(n,r)=>ZO(t,n,r),t.safeDecodeAsync=async(n,r)=>JO(t,n,r),t.refine=(n,r)=>t.check(zM(n,r)),t.superRefine=n=>t.check(UM(n)),t.overwrite=n=>t.check(ml(n)),t.optional=()=>fw(t),t.nullable=()=>pw(t),t.nullish=()=>fw(pw(t)),t.nonoptional=n=>OM(t,n),t.array=()=>Wg(t),t.or=n=>$I([t,n]),t.and=n=>SM(t,n),t.transform=n=>mw(t,AM(n)),t.default=n=>PM(t,n),t.prefault=n=>DM(t,n),t.catch=n=>LM(t,n),t.pipe=n=>mw(t,n),t.readonly=()=>FM(t),t.describe=n=>{const r=t.clone();return lu.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=lu.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return lu.get(t);const r=t.clone();return lu.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),zI=ee("_ZodString",(t,e)=>{Bg.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(r,i,a)=>dO(t,r,i);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(G2(...r)),t.includes=(...r)=>t.check(J2(...r)),t.startsWith=(...r)=>t.check(Y2(...r)),t.endsWith=(...r)=>t.check(X2(...r)),t.min=(...r)=>t.check(uh(...r)),t.max=(...r)=>t.check(MI(...r)),t.length=(...r)=>t.check(LI(...r)),t.nonempty=(...r)=>t.check(uh(1,...r)),t.lowercase=r=>t.check(Q2(r)),t.uppercase=r=>t.check(Z2(r)),t.trim=()=>t.check(tO()),t.normalize=(...r)=>t.check(eO(...r)),t.toLowerCase=()=>t.check(nO()),t.toUpperCase=()=>t.check(rO()),t.slugify=()=>t.check(sO())}),YO=ee("ZodString",(t,e)=>{Bg.init(t,e),zI.init(t,e),t.email=n=>t.check(v2(XO,n)),t.url=n=>t.check(I2(eM,n)),t.jwt=n=>t.check(j2(mM,n)),t.emoji=n=>t.check(b2(tM,n)),t.guid=n=>t.check(ow(cw,n)),t.uuid=n=>t.check(_2(kd,n)),t.uuidv4=n=>t.check(w2(kd,n)),t.uuidv6=n=>t.check(E2(kd,n)),t.uuidv7=n=>t.check(T2(kd,n)),t.nanoid=n=>t.check(k2(nM,n)),t.guid=n=>t.check(ow(cw,n)),t.cuid=n=>t.check(S2(rM,n)),t.cuid2=n=>t.check(x2(sM,n)),t.ulid=n=>t.check(A2(iM,n)),t.base64=n=>t.check(M2(hM,n)),t.base64url=n=>t.check(L2(fM,n)),t.xid=n=>t.check(C2(oM,n)),t.ksuid=n=>t.check(R2(aM,n)),t.ipv4=n=>t.check(P2(lM,n)),t.ipv6=n=>t.check(N2(uM,n)),t.cidrv4=n=>t.check(D2(cM,n)),t.cidrv6=n=>t.check(O2(dM,n)),t.e164=n=>t.check(V2(pM,n)),t.datetime=n=>t.check(NO(n)),t.date=n=>t.check(OO(n)),t.time=n=>t.check(LO(n)),t.duration=n=>t.check(jO(n))});function lt(t){return y2(YO,t)}const Et=ee("ZodStringFormat",(t,e)=>{gt.init(t,e),zI.init(t,e)}),XO=ee("ZodEmail",(t,e)=>{SD.init(t,e),Et.init(t,e)}),cw=ee("ZodGUID",(t,e)=>{bD.init(t,e),Et.init(t,e)}),kd=ee("ZodUUID",(t,e)=>{kD.init(t,e),Et.init(t,e)}),eM=ee("ZodURL",(t,e)=>{xD.init(t,e),Et.init(t,e)}),tM=ee("ZodEmoji",(t,e)=>{AD.init(t,e),Et.init(t,e)}),nM=ee("ZodNanoID",(t,e)=>{CD.init(t,e),Et.init(t,e)}),rM=ee("ZodCUID",(t,e)=>{RD.init(t,e),Et.init(t,e)}),sM=ee("ZodCUID2",(t,e)=>{PD.init(t,e),Et.init(t,e)}),iM=ee("ZodULID",(t,e)=>{ND.init(t,e),Et.init(t,e)}),oM=ee("ZodXID",(t,e)=>{DD.init(t,e),Et.init(t,e)}),aM=ee("ZodKSUID",(t,e)=>{OD.init(t,e),Et.init(t,e)}),lM=ee("ZodIPv4",(t,e)=>{FD.init(t,e),Et.init(t,e)}),uM=ee("ZodIPv6",(t,e)=>{zD.init(t,e),Et.init(t,e)}),cM=ee("ZodCIDRv4",(t,e)=>{UD.init(t,e),Et.init(t,e)}),dM=ee("ZodCIDRv6",(t,e)=>{$D.init(t,e),Et.init(t,e)}),hM=ee("ZodBase64",(t,e)=>{BD.init(t,e),Et.init(t,e)}),fM=ee("ZodBase64URL",(t,e)=>{WD.init(t,e),Et.init(t,e)}),pM=ee("ZodE164",(t,e)=>{HD.init(t,e),Et.init(t,e)}),mM=ee("ZodJWT",(t,e)=>{GD.init(t,e),Et.init(t,e)}),UI=ee("ZodNumber",(t,e)=>{NI.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(r,i,a)=>hO(t,r,i),t.gt=(r,i)=>t.check(lw(r,i)),t.gte=(r,i)=>t.check(Bd(r,i)),t.min=(r,i)=>t.check(Bd(r,i)),t.lt=(r,i)=>t.check(aw(r,i)),t.lte=(r,i)=>t.check($d(r,i)),t.max=(r,i)=>t.check($d(r,i)),t.int=r=>t.check(dw(r)),t.safe=r=>t.check(dw(r)),t.positive=r=>t.check(lw(0,r)),t.nonnegative=r=>t.check(Bd(0,r)),t.negative=r=>t.check(aw(0,r)),t.nonpositive=r=>t.check($d(0,r)),t.multipleOf=(r,i)=>t.check(uw(r,i)),t.step=(r,i)=>t.check(uw(r,i)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function qg(t){return B2(UI,t)}const gM=ee("ZodNumberFormat",(t,e)=>{QD.init(t,e),UI.init(t,e)});function dw(t){return q2(gM,t)}const yM=ee("ZodUnknown",(t,e)=>{ZD.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>pO()});function hw(){return W2(yM)}const vM=ee("ZodNever",(t,e)=>{JD.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>fO(t,n,r)});function _M(t){return H2(vM,t)}const wM=ee("ZodDate",(t,e)=>{YD.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(r,i,a)=>mO(t,r),t.min=(r,i)=>t.check(Bd(r,i)),t.max=(r,i)=>t.check($d(r,i));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function EM(t){return K2(wM,t)}const TM=ee("ZodArray",(t,e)=>{XD.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>_O(t,n,r,i),t.element=e.element,t.min=(n,r)=>t.check(uh(n,r)),t.nonempty=n=>t.check(uh(1,n)),t.max=(n,r)=>t.check(MI(n,r)),t.length=(n,r)=>t.check(LI(n,r)),t.unwrap=()=>t.element});function Wg(t,e){return iO(TM,t,e)}const IM=ee("ZodObject",(t,e)=>{t2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>wO(t,n,r,i),ut(t,"shape",()=>e.shape),t.keyof=()=>Hg(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:hw()}),t.loose=()=>t.clone({...t._zod.def,catchall:hw()}),t.strict=()=>t.clone({...t._zod.def,catchall:_M()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>TN(t,n),t.safeExtend=n=>IN(t,n),t.merge=n=>bN(t,n),t.pick=n=>wN(t,n),t.omit=n=>EN(t,n),t.partial=(...n)=>kN(BI,t,n[0]),t.required=(...n)=>SN(qI,t,n[0])});function Ho(t,e){const n={type:"object",shape:t??{},...be(e)};return new IM(n)}const bM=ee("ZodUnion",(t,e)=>{n2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>EO(t,n,r,i),t.options=e.options});function $I(t,e){return new bM({type:"union",options:t,...be(e)})}const kM=ee("ZodIntersection",(t,e)=>{r2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>TO(t,n,r,i)});function SM(t,e){return new kM({type:"intersection",left:t,right:e})}const Cm=ee("ZodEnum",(t,e)=>{s2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(r,i,a)=>gO(t,r,i),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,i)=>{const a={};for(const u of r)if(n.has(u))a[u]=e.entries[u];else throw new Error(`Key ${u} not found in enum`);return new Cm({...e,checks:[],...be(i),entries:a})},t.exclude=(r,i)=>{const a={...e.entries};for(const u of r)if(n.has(u))delete a[u];else throw new Error(`Key ${u} not found in enum`);return new Cm({...e,checks:[],...be(i),entries:a})}});function Hg(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Cm({type:"enum",entries:n,...be(e)})}const xM=ee("ZodTransform",(t,e)=>{i2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>vO(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new gI(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Pu(a,n.value,e));else{const u=a;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=n.value),u.inst??(u.inst=t),n.issues.push(Pu(u))}};const i=e.transform(n.value,n);return i instanceof Promise?i.then(a=>(n.value=a,n)):(n.value=i,n)}});function AM(t){return new xM({type:"transform",transform:t})}const BI=ee("ZodOptional",(t,e)=>{o2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>RO(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function fw(t){return new BI({type:"optional",innerType:t})}const CM=ee("ZodNullable",(t,e)=>{a2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>IO(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function pw(t){return new CM({type:"nullable",innerType:t})}const RM=ee("ZodDefault",(t,e)=>{l2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>kO(t,n,r,i),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function PM(t,e){return new RM({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():wI(e)}})}const NM=ee("ZodPrefault",(t,e)=>{u2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>SO(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function DM(t,e){return new NM({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():wI(e)}})}const qI=ee("ZodNonOptional",(t,e)=>{c2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>bO(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function OM(t,e){return new qI({type:"nonoptional",innerType:t,...be(e)})}const MM=ee("ZodCatch",(t,e)=>{d2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>xO(t,n,r,i),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function LM(t,e){return new MM({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const VM=ee("ZodPipe",(t,e)=>{h2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>AO(t,n,r,i),t.in=e.in,t.out=e.out});function mw(t,e){return new VM({type:"pipe",in:t,out:e})}const jM=ee("ZodReadonly",(t,e)=>{f2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>CO(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function FM(t){return new jM({type:"readonly",innerType:t})}const WI=ee("ZodCustom",(t,e)=>{p2.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,i)=>yO(t,n)});function zM(t,e={}){return oO(WI,t,e)}function UM(t){return aO(t)}function $M(t,e={error:`Input not instance of ${t.name}`}){const n=new WI({type:"custom",check:"custom",fn:r=>r instanceof t,abort:!0,...be(e)});return n._zod.bag.Class=t,n}const No=$I([EM(),$M(_t),lt()]).nullable().optional(),BM=Ho({type:Hg(["none","daily","weekly","weekdays","monthly"]).nullable(),days:Wg(qg()).optional()}).nullable().optional();Ho({id:lt().optional(),title:lt().min(1,"Title is required"),description:lt().nullable().optional(),status:Hg(["todo","completed","archived"]).default("todo"),dueDate:No,completedAt:No,createdAt:No,ownerId:lt(),projectId:lt().nullable().optional(),labelIds:Wg(lt()).optional(),timeBlockId:lt().nullable().optional(),duration:qg().optional(),recurrence:BM});Ho({id:lt().optional(),name:lt().min(1,"Project name is required"),color:lt().optional(),ownerId:lt(),createdAt:No});Ho({id:lt().optional(),name:lt().min(1,"Label name is required"),color:lt().optional(),ownerId:lt(),createdAt:No});const qM=Ho({id:lt().optional(),name:lt().min(1,"Workspace name is required"),createdAt:No});Ho({id:lt().optional(),name:lt().min(1),query:lt(),createdAt:No});Ho({id:lt().optional(),name:lt(),start:lt(),end:lt(),color:lt().optional(),order:qg().optional()});const Rm="currentWorkspaceId",WM=fN.WORKSPACE_CHANGED;let HI=[];function HM(){return HI}function Ws(){return localStorage.getItem(Rm)}function KM(t){!t||localStorage.getItem(Rm)===t||(localStorage.setItem(Rm,t),GM(t,HI))}function GM(t,e){const n=new CustomEvent(WM,{detail:{workspaceId:t,workspaces:e}});document.dispatchEvent(n)}async function QM(t){try{qM.pick({name:!0}).parse({name:t});const e=Qn.currentUser;if(!e)throw new Error("Authentication required");const n=Ft.workspaces(e.uid);return{id:(await Ju(qs(jt,n),{name:t,createdAt:qi()})).id,name:t}}catch(e){throw console.error("[Workspace] Add error:",e),Uh(""),e}}async function ZM(t,e){try{const n=Qn.currentUser;if(!n)throw new Error("Authentication required");const r=Ft.workspaces(n.uid);await pl(Ir(jt,r,t),{name:e})}catch(n){console.error("[Workspace] Update error:",n),Uh("")}}function JM(t,e,n){const r=Ft.projects(t,e),i=Vh(qs(jt,r),cI("createdAt","asc"));return Fh(i,a=>{const u=a.docs.map(h=>({id:h.id,...h.data()}));n(u)},a=>{console.error("Error subscribing to projects:",a),n([])})}async function YM(t,e,n){const r=Ft.projects(t,e);await Ju(qs(jt,r),{name:n,ownerId:t,createdAt:qi()})}async function XM(t,e,n,r){const i=Ft.projects(t,e),a=Ir(jt,i,n);return pl(a,r)}async function eL(t,e,n){const r=Ft.projects(t,e);await jh(Ir(jt,r,n))}function KI(){var n;const t=(n=Qn.currentUser)==null?void 0:n.uid,e=Ws();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}const tL=(t,e)=>{const n=typeof t=="function"?t:e,r=typeof t=="string"?t:Ws(),i=Qn.currentUser;return i&&r&&typeof n=="function"?JM(i.uid,r,n):(typeof n=="function"&&n([]),()=>{})},nL=async(t,e=null)=>{const n=Qn.currentUser;if(!n)throw new Error("Authentication required.");const r=e||Ws();if(!r)throw new Error("Workspace selection required.");return YM(n.uid,r,t)},rL=async(t,e)=>{const{userId:n,workspaceId:r}=KI();return XM(n,r,t,e)},sL=async t=>{const{userId:e,workspaceId:n}=KI();return eL(e,n,t)},Hh=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!0),i=Ws();return F.useEffect(()=>{if(!i){r(!1);return}const a=tL(i,u=>{e(u),r(!1)});return()=>a()},[i]),{projects:t,loading:n}};let Va=[];const iL=[{id:"tb_morning",name:"06:00 - 09:00",start:"06:00",end:"09:00",color:"#EF4444",order:0},{id:"tb_afternoon",name:"13:00 - 17:00",start:"13:00",end:"17:00",color:"#3B82F6",order:1},{id:"tb_night",name:"20:00 - 22:00",start:"20:00",end:"22:00",color:"#8B5CF6",order:2}];function oL(t,e){var a;const n=(a=Qn.currentUser)==null?void 0:a.uid;if(!n)return Va=[...iL],typeof e=="function"&&e(Va),()=>{};const r=Ft.timeblocks(n),i=Vh(qs(jt,r),cI("order","asc"));return Fh(i,u=>{Va=u.docs.map(h=>({id:h.id,...h.data()})),typeof e=="function"&&e(Va)},u=>{console.error("[TimeBlocks] Subscription error:",u)})}function aL(){return[...Va]}async function lL(t){var n;const e=(n=Qn.currentUser)==null?void 0:n.uid;if(!e){Uh("");return}try{const r=Ft.timeblocks(e),i=t.id||crypto.randomUUID(),a=t.order!==void 0?t.order:Math.max(...Va.map(h=>h.order||0),-1)+1,u={name:t.name,start:t.start,end:t.end,color:t.color,order:a,updatedAt:qi()};return await aN(Ir(jt,r,i),u,{merge:!0}),!0}catch(r){console.error("[TimeBlocks] Save error:",r)}}async function uL(t){var n;const e=(n=Qn.currentUser)==null?void 0:n.uid;if(e)try{const r=Ft.timeblocks(e);return await jh(Ir(jt,r,t)),!0}catch(r){console.error("[TimeBlocks] Delete error:",r)}}const Kg=()=>{const[t,e]=F.useState(()=>aL()),[n,r]=F.useState(!0),i=Ws();return F.useEffect(()=>{if(!i){r(!1);return}const a=oL(i,u=>{e(u),r(!1)});return()=>a()},[i]),{timeBlocks:t,loading:n}},qp=t=>t instanceof _t?t.toDate():t instanceof Date?t:void 0,GI=t=>t instanceof Date?_t.fromDate(t):t;function cL(t,e){const n=e.recurrence||null;return{id:t,...e,createdAt:qp(e.createdAt)||void 0,dueDate:qp(e.dueDate)||void 0,recurrence:n,completedAt:qp(e.completedAt)||void 0,ownerId:e.ownerId||"",title:e.title||""}}const gw=new Map;function dL(t,e,n){const r=u=>{typeof n=="function"&&n(u)};if(!t||!e)return r([]),()=>{};const i=Ft.tasks(t,e),a=Vh(qs(jt,i));return Fh(a,u=>{const h=u.docs.map(f=>cL(f.id,f.data()));gw.set(e,h),r(h)},u=>{console.error("[Tasks] Subscription error:",u),gw.set(e,[]),r([])})}async function hL(t,e,n){try{const r=Ft.tasks(t,e),i={...n};return i.dueDate&&(i.dueDate=GI(i.dueDate)),delete i.id,await Ju(qs(jt,r),{...i,ownerId:t,status:"todo",createdAt:qi()})}catch(r){throw console.error("[Tasks] addTaskRaw failed:",r),r}}async function fL(t,e,n,r){try{const i=Ft.tasks(t,e),a={status:r};r==="completed"?a.completedAt=qi():a.completedAt=null,await pl(Ir(jt,i,n),a)}catch(i){throw console.error("[Tasks] updateTaskStatusRaw failed:",i),i}}async function pL(t,e,n,r){try{const i=Ft.tasks(t,e),a={...r};a.dueDate!==void 0&&(a.dueDate=GI(a.dueDate)),await pl(Ir(jt,i,n),a)}catch(i){throw console.error("[Tasks] updateTaskRaw failed:",i),i}}async function mL(t,e,n){try{const r=Ft.tasks(t,e);await jh(Ir(jt,r,n))}catch(r){throw console.error("[Tasks] deleteTaskRaw failed:",r),r}}async function gL(t){var a;const e=(a=Qn.currentUser)==null?void 0:a.uid;if(!e)throw new Error("Authentication required");const n=Ft.filters(e),{id:r,...i}=t;await Ju(qs(jt,n),{...i,ownerId:e,createdAt:qi()})}async function yL(t,e){var u;const n=(u=Qn.currentUser)==null?void 0:u.uid;if(!n)throw new Error("Authentication required");const r=Ft.filters(n),{id:i,...a}=e;await pl(Ir(jt,r,t),{...a,updatedAt:qi()})}function Kh(){var n;const t=(n=Qn.currentUser)==null?void 0:n.uid,e=Ws();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}async function QI(t){const{userId:e,workspaceId:n}=Kh();return hL(e,n,t)}async function vL(t,e){const{userId:n,workspaceId:r}=Kh();return pL(n,r,t,e)}async function _L(t){const{userId:e,workspaceId:n}=Kh();return mL(e,n,t)}async function wL(t,e){const{userId:n,workspaceId:r}=Kh();return fL(n,r,t,e==="completed"?"todo":"completed")}function EL(t,e){if(!t)return e([]),()=>{};const n=Ft.labels(t),r=Vh(qs(jt,n));return Fh(r,i=>{const a=i.docs.map(u=>({id:u.id,...u.data()}));e(a)},i=>{console.error("[Labels] Subscription error:",i),e([])})}async function TL(t,e,n){const r=Ft.labels(t);await Ju(qs(jt,r),{name:e,color:n,ownerId:t,createdAt:qi()})}async function IL(t,e,n){const r=Ft.labels(t),i=Ir(jt,r,e);return pl(i,n)}async function bL(t,e){const n=Ft.labels(t);await jh(Ir(jt,n,e))}function Gg(){var e;const t=(e=Qn.currentUser)==null?void 0:e.uid;if(!t)throw Uh("","error"),new Error("Authentication required.");return t}function kL(t,e){var i;const n=typeof t=="function"?t:e,r=(i=Qn.currentUser)==null?void 0:i.uid;return r&&typeof n=="function"?EL(r,n):(typeof n=="function"&&n([]),()=>{})}async function SL(t,e){const n=Gg();return TL(n,t,e)}async function xL(t,e){const n=Gg();return IL(n,t,e)}async function AL(t){const e=Gg();return bL(e,t)}function CL(t,e){const n=Qn.currentUser;return!n||!t?(typeof e=="function"&&e([]),()=>{}):dL(n.uid,t,e)}const yw=t=>{let e;const n=new Set,r=(m,v)=>{const w=typeof m=="function"?m(e):m;if(!Object.is(w,e)){const I=e;e=v??(typeof w!="object"||w===null)?w:Object.assign({},e,w),n.forEach(S=>S(e,I))}},i=()=>e,h={setState:r,getState:i,getInitialState:()=>f,subscribe:m=>(n.add(m),()=>n.delete(m))},f=e=t(r,i,h);return h},RL=(t=>t?yw(t):yw),PL=t=>t;function NL(t,e=PL){const n=Gt.useSyncExternalStore(t.subscribe,Gt.useCallback(()=>e(t.getState()),[t,e]),Gt.useCallback(()=>e(t.getInitialState()),[t,e]));return Gt.useDebugValue(n),n}const vw=t=>{const e=RL(t),n=r=>NL(e,r);return Object.assign(n,e),n},Qg=(t=>t?vw(t):vw),Hs=Qg(t=>({activeModal:null,modalData:null,openModal:(e,n=null)=>t({activeModal:e,modalData:n}),closeModal:()=>t({activeModal:null,modalData:null})}));var ja=rE();function ZI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=ZI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function DL(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=ZI(t))&&(r&&(r+=" "),r+=e);return r}const OL=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},ML=(t,e)=>({classGroupId:t,validator:e}),JI=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),dh="-",_w=[],LL="arbitrary..",VL=t=>{const e=FL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return jL(u);const h=u.split(dh),f=h[0]===""&&h.length>1?1:0;return YI(h,f,e)},getConflictingClassGroupIds:(u,h)=>{if(h){const f=r[u],m=n[u];return f?m?OL(m,f):f:m||_w}return n[u]||_w}}},YI=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],a=n.nextPart.get(i);if(a){const m=YI(t,e+1,a);if(m)return m}const u=n.validators;if(u===null)return;const h=e===0?t.join(dh):t.slice(e).join(dh),f=u.length;for(let m=0;m<f;m++){const v=u[m];if(v.validator(h))return v.classGroupId}},jL=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?LL+r:void 0})(),FL=t=>{const{theme:e,classGroups:n}=t;return zL(n,e)},zL=(t,e)=>{const n=JI();for(const r in t){const i=t[r];Zg(i,n,r,e)}return n},Zg=(t,e,n,r)=>{const i=t.length;for(let a=0;a<i;a++){const u=t[a];UL(u,e,n,r)}},UL=(t,e,n,r)=>{if(typeof t=="string"){$L(t,e,n);return}if(typeof t=="function"){BL(t,e,n,r);return}qL(t,e,n,r)},$L=(t,e,n)=>{const r=t===""?e:XI(e,t);r.classGroupId=n},BL=(t,e,n,r)=>{if(WL(t)){Zg(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(ML(n,t))},qL=(t,e,n,r)=>{const i=Object.entries(t),a=i.length;for(let u=0;u<a;u++){const[h,f]=i[u];Zg(f,XI(e,h),n,r)}},XI=(t,e)=>{let n=t;const r=e.split(dh),i=r.length;for(let a=0;a<i;a++){const u=r[a];let h=n.nextPart.get(u);h||(h=JI(),n.nextPart.set(u,h)),n=h}return n},WL=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,HL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(a,u)=>{n[a]=u,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(a){let u=n[a];if(u!==void 0)return u;if((u=r[a])!==void 0)return i(a,u),u},set(a,u){a in n?n[a]=u:i(a,u)}}},Pm="!",ww=":",KL=[],Ew=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),GL=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const a=[];let u=0,h=0,f=0,m;const v=i.length;for(let P=0;P<v;P++){const N=i[P];if(u===0&&h===0){if(N===ww){a.push(i.slice(f,P)),f=P+1;continue}if(N==="/"){m=P;continue}}N==="["?u++:N==="]"?u--:N==="("?h++:N===")"&&h--}const w=a.length===0?i:i.slice(f);let I=w,S=!1;w.endsWith(Pm)?(I=w.slice(0,-1),S=!0):w.startsWith(Pm)&&(I=w.slice(1),S=!0);const V=m&&m>f?m-f:void 0;return Ew(a,S,I,V)};if(e){const i=e+ww,a=r;r=u=>u.startsWith(i)?a(u.slice(i.length)):Ew(KL,!1,u,void 0,!0)}if(n){const i=r;r=a=>n({className:a,parseClassName:i})}return r},QL=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let a=0;a<n.length;a++){const u=n[a],h=u[0]==="[",f=e.has(u);h||f?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(u)):i.push(u)}return i.length>0&&(i.sort(),r.push(...i)),r}},ZL=t=>({cache:HL(t.cacheSize),parseClassName:GL(t),sortModifiers:QL(t),...VL(t)}),JL=/\s+/,YL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=e,u=[],h=t.trim().split(JL);let f="";for(let m=h.length-1;m>=0;m-=1){const v=h[m],{isExternal:w,modifiers:I,hasImportantModifier:S,baseClassName:V,maybePostfixModifierPosition:P}=n(v);if(w){f=v+(f.length>0?" "+f:f);continue}let N=!!P,q=r(N?V.substring(0,P):V);if(!q){if(!N){f=v+(f.length>0?" "+f:f);continue}if(q=r(V),!q){f=v+(f.length>0?" "+f:f);continue}N=!1}const U=I.length===0?"":I.length===1?I[0]:a(I).join(":"),H=S?U+Pm:U,J=H+q;if(u.indexOf(J)>-1)continue;u.push(J);const Y=i(q,N);for(let te=0;te<Y.length;++te){const C=Y[te];u.push(H+C)}f=v+(f.length>0?" "+f:f)}return f},XL=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=eb(n))&&(i&&(i+=" "),i+=r);return i},eb=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=eb(t[r]))&&(n&&(n+=" "),n+=e);return n},eV=(t,...e)=>{let n,r,i,a;const u=f=>{const m=e.reduce((v,w)=>w(v),t());return n=ZL(m),r=n.cache.get,i=n.cache.set,a=h,h(f)},h=f=>{const m=r(f);if(m)return m;const v=YL(f,n);return i(f,v),v};return a=u,(...f)=>a(XL(...f))},tV=[],Ht=t=>{const e=n=>n[t]||tV;return e.isThemeGetter=!0,e},tb=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,nb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,nV=/^\d+\/\d+$/,rV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,oV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ra=t=>nV.test(t),ze=t=>!!t&&!Number.isNaN(Number(t)),Ei=t=>!!t&&Number.isInteger(Number(t)),Wp=t=>t.endsWith("%")&&ze(t.slice(0,-1)),Ns=t=>rV.test(t),lV=()=>!0,uV=t=>sV.test(t)&&!iV.test(t),rb=()=>!1,cV=t=>oV.test(t),dV=t=>aV.test(t),hV=t=>!ye(t)&&!ve(t),fV=t=>gl(t,ob,rb),ye=t=>tb.test(t),wo=t=>gl(t,ab,uV),Hp=t=>gl(t,vV,ze),Tw=t=>gl(t,sb,rb),pV=t=>gl(t,ib,dV),Sd=t=>gl(t,lb,cV),ve=t=>nb.test(t),ru=t=>yl(t,ab),mV=t=>yl(t,_V),Iw=t=>yl(t,sb),gV=t=>yl(t,ob),yV=t=>yl(t,ib),xd=t=>yl(t,lb,!0),gl=(t,e,n)=>{const r=tb.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},yl=(t,e,n=!1)=>{const r=nb.exec(t);return r?r[1]?e(r[1]):n:!1},sb=t=>t==="position"||t==="percentage",ib=t=>t==="image"||t==="url",ob=t=>t==="length"||t==="size"||t==="bg-size",ab=t=>t==="length",vV=t=>t==="number",_V=t=>t==="family-name",lb=t=>t==="shadow",wV=()=>{const t=Ht("color"),e=Ht("font"),n=Ht("text"),r=Ht("font-weight"),i=Ht("tracking"),a=Ht("leading"),u=Ht("breakpoint"),h=Ht("container"),f=Ht("spacing"),m=Ht("radius"),v=Ht("shadow"),w=Ht("inset-shadow"),I=Ht("text-shadow"),S=Ht("drop-shadow"),V=Ht("blur"),P=Ht("perspective"),N=Ht("aspect"),q=Ht("ease"),U=Ht("animate"),H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Y=()=>[...J(),ve,ye],te=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],T=()=>[ve,ye,f],x=()=>[Ra,"full","auto",...T()],O=()=>[Ei,"none","subgrid",ve,ye],D=()=>["auto",{span:["full",Ei,ve,ye]},Ei,ve,ye],L=()=>[Ei,"auto",ve,ye],R=()=>["auto","min","max","fr",ve,ye],Ue=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],et=()=>["start","end","center","stretch","center-safe","end-safe"],Ze=()=>["auto",...T()],re=()=>[Ra,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],G=()=>[t,ve,ye],he=()=>[...J(),Iw,Tw,{position:[ve,ye]}],ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",gV,fV,{size:[ve,ye]}],Z=()=>[Wp,ru,wo],de=()=>["","none","full",m,ve,ye],Ee=()=>["",ze,ru,wo],Re=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ie=()=>[ze,Wp,Iw,Tw],Ve=()=>["","none",V,ve,ye],je=()=>["none",ze,ve,ye],Se=()=>["none",ze,ve,ye],Ut=()=>[ze,ve,ye],Tt=()=>[Ra,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ns],breakpoint:[Ns],color:[lV],container:[Ns],"drop-shadow":[Ns],ease:["in","out","in-out"],font:[hV],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ns],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ns],shadow:[Ns],spacing:["px",ze],text:[Ns],"text-shadow":[Ns],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ra,ye,ve,N]}],container:["container"],columns:[{columns:[ze,ye,ve,h]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Y()}],overflow:[{overflow:te()}],"overflow-x":[{"overflow-x":te()}],"overflow-y":[{"overflow-y":te()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:x()}],"inset-x":[{"inset-x":x()}],"inset-y":[{"inset-y":x()}],start:[{start:x()}],end:[{end:x()}],top:[{top:x()}],right:[{right:x()}],bottom:[{bottom:x()}],left:[{left:x()}],visibility:["visible","invisible","collapse"],z:[{z:[Ei,"auto",ve,ye]}],basis:[{basis:[Ra,"full","auto",h,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ze,Ra,"auto","initial","none",ye]}],grow:[{grow:["",ze,ve,ye]}],shrink:[{shrink:["",ze,ve,ye]}],order:[{order:[Ei,"first","last","none",ve,ye]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...Ue(),"normal"]}],"justify-items":[{"justify-items":[...et(),"normal"]}],"justify-self":[{"justify-self":["auto",...et()]}],"align-content":[{content:["normal",...Ue()]}],"align-items":[{items:[...et(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...et(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ue()}],"place-items":[{"place-items":[...et(),"baseline"]}],"place-self":[{"place-self":["auto",...et()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:Ze()}],mx:[{mx:Ze()}],my:[{my:Ze()}],ms:[{ms:Ze()}],me:[{me:Ze()}],mt:[{mt:Ze()}],mr:[{mr:Ze()}],mb:[{mb:Ze()}],ml:[{ml:Ze()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[h,"screen",...re()]}],"min-w":[{"min-w":[h,"screen","none",...re()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...re()]}],h:[{h:["screen","lh",...re()]}],"min-h":[{"min-h":["screen","lh","none",...re()]}],"max-h":[{"max-h":["screen","lh",...re()]}],"font-size":[{text:["base",n,ru,wo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ve,Hp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Wp,ye]}],"font-family":[{font:[mV,ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,ve,ye]}],"line-clamp":[{"line-clamp":[ze,"none",ve,Hp]}],leading:[{leading:[a,...T()]}],"list-image":[{"list-image":["none",ve,ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ve,ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Re(),"wavy"]}],"text-decoration-thickness":[{decoration:[ze,"from-font","auto",ve,wo]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[ze,"auto",ve,ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve,ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve,ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:he()}],"bg-repeat":[{bg:ue()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ei,ve,ye],radial:["",ve,ye],conic:[Ei,ve,ye]},yV,pV]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:de()}],"rounded-s":[{"rounded-s":de()}],"rounded-e":[{"rounded-e":de()}],"rounded-t":[{"rounded-t":de()}],"rounded-r":[{"rounded-r":de()}],"rounded-b":[{"rounded-b":de()}],"rounded-l":[{"rounded-l":de()}],"rounded-ss":[{"rounded-ss":de()}],"rounded-se":[{"rounded-se":de()}],"rounded-ee":[{"rounded-ee":de()}],"rounded-es":[{"rounded-es":de()}],"rounded-tl":[{"rounded-tl":de()}],"rounded-tr":[{"rounded-tr":de()}],"rounded-br":[{"rounded-br":de()}],"rounded-bl":[{"rounded-bl":de()}],"border-w":[{border:Ee()}],"border-w-x":[{"border-x":Ee()}],"border-w-y":[{"border-y":Ee()}],"border-w-s":[{"border-s":Ee()}],"border-w-e":[{"border-e":Ee()}],"border-w-t":[{"border-t":Ee()}],"border-w-r":[{"border-r":Ee()}],"border-w-b":[{"border-b":Ee()}],"border-w-l":[{"border-l":Ee()}],"divide-x":[{"divide-x":Ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Re(),"hidden","none"]}],"divide-style":[{divide:[...Re(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...Re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ze,ve,ye]}],"outline-w":[{outline:["",ze,ru,wo]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",v,xd,Sd]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",w,xd,Sd]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:Ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[ze,wo]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":Ee()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",I,xd,Sd]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[ze,ve,ye]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ze]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ie()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ie()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":Ie()}],"mask-image-t-to-pos":[{"mask-t-to":Ie()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":Ie()}],"mask-image-r-to-pos":[{"mask-r-to":Ie()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":Ie()}],"mask-image-b-to-pos":[{"mask-b-to":Ie()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":Ie()}],"mask-image-l-to-pos":[{"mask-l-to":Ie()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":Ie()}],"mask-image-x-to-pos":[{"mask-x-to":Ie()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":Ie()}],"mask-image-y-to-pos":[{"mask-y-to":Ie()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[ve,ye]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ie()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ie()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":J()}],"mask-image-conic-pos":[{"mask-conic":[ze]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ie()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ie()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:he()}],"mask-repeat":[{mask:ue()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ve,ye]}],filter:[{filter:["","none",ve,ye]}],blur:[{blur:Ve()}],brightness:[{brightness:[ze,ve,ye]}],contrast:[{contrast:[ze,ve,ye]}],"drop-shadow":[{"drop-shadow":["","none",S,xd,Sd]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",ze,ve,ye]}],"hue-rotate":[{"hue-rotate":[ze,ve,ye]}],invert:[{invert:["",ze,ve,ye]}],saturate:[{saturate:[ze,ve,ye]}],sepia:[{sepia:["",ze,ve,ye]}],"backdrop-filter":[{"backdrop-filter":["","none",ve,ye]}],"backdrop-blur":[{"backdrop-blur":Ve()}],"backdrop-brightness":[{"backdrop-brightness":[ze,ve,ye]}],"backdrop-contrast":[{"backdrop-contrast":[ze,ve,ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ze,ve,ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ze,ve,ye]}],"backdrop-invert":[{"backdrop-invert":["",ze,ve,ye]}],"backdrop-opacity":[{"backdrop-opacity":[ze,ve,ye]}],"backdrop-saturate":[{"backdrop-saturate":[ze,ve,ye]}],"backdrop-sepia":[{"backdrop-sepia":["",ze,ve,ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ve,ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ze,"initial",ve,ye]}],ease:[{ease:["linear","initial",q,ve,ye]}],delay:[{delay:[ze,ve,ye]}],animate:[{animate:["none",U,ve,ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[P,ve,ye]}],"perspective-origin":[{"perspective-origin":Y()}],rotate:[{rotate:je()}],"rotate-x":[{"rotate-x":je()}],"rotate-y":[{"rotate-y":je()}],"rotate-z":[{"rotate-z":je()}],scale:[{scale:Se()}],"scale-x":[{"scale-x":Se()}],"scale-y":[{"scale-y":Se()}],"scale-z":[{"scale-z":Se()}],"scale-3d":["scale-3d"],skew:[{skew:Ut()}],"skew-x":[{"skew-x":Ut()}],"skew-y":[{"skew-y":Ut()}],transform:[{transform:[ve,ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:Y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Tt()}],"translate-x":[{"translate-x":Tt()}],"translate-y":[{"translate-y":Tt()}],"translate-z":[{"translate-z":Tt()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve,ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve,ye]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[ze,ru,wo,Hp]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},EV=eV(wV);function qr(...t){return EV(DL(t))}const Ko=({isOpen:t,onClose:e,title:n,children:r,className:i})=>(F.useEffect(()=>{const a=u=>{u.key==="Escape"&&e()};return t&&window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[t,e]),t?ja.createPortal(k.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6 animate-fade-in",children:[k.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:e}),k.jsxs("div",{className:qr("relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col transform transition-all animate-scale-in",i),children:[n&&k.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[k.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:n}),k.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:k.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),k.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:r})]})]}),document.body):null),qd="none",TV=t=>{const e={project:[],timeblock:[],duration:[],date:[]};return t&&t.split(/\s+/).forEach(n=>{if(!n.includes(":"))return;const[r,i]=n.split(":");if(Object.prototype.hasOwnProperty.call(e,r)){const a=i.split(",").map(u=>r==="timeblock"&&(u==="null"||u==="none")?qd:u);e[r]=[...e[r],...a]}}),e},IV=[30,45,60,75,90],bV=[{id:"today",name:""},{id:"tomorrow",name:""},{id:"week",name:""},{id:"next-week",name:""}],kV=()=>{const{activeModal:t,modalData:e,closeModal:n}=Hs(),r=t==="filter-edit",i=e,a=!!(i!=null&&i.id),{projects:u}=Hh(),{timeBlocks:h}=Kg(),[f,m]=F.useState(""),[v,w]=F.useState({project:[],timeblock:[],duration:[],date:[]}),[I,S]=F.useState(!1),[V,P]=F.useState(null);F.useEffect(()=>{r&&(m((i==null?void 0:i.name)||""),w(TV((i==null?void 0:i.query)||"")),P(null),S(!1))},[r,i]);const N=(U,H)=>{w(J=>{const Y=J[U],te=Y.includes(H)?Y.filter(C=>C!==H):[...Y,H];return{...J,[U]:te}})},q=F.useCallback(async()=>{const U=f.trim();if(!U){P("");return}const H={project:v.project,timeblock:v.timeblock.map(te=>te===qd?"null":te),duration:v.duration,date:v.date},J=Object.entries(H).filter(([te,C])=>C.length>0).map(([te,C])=>`${te}:${C.join(",")}`);if(J.length===0){P("1");return}const Y=J.join(" ");S(!0),P(null);try{const te={name:U,query:Y,type:"custom"};a&&(i!=null&&i.id)?await yL(i.id,te):await gL(te),document.dispatchEvent(new CustomEvent("filters-updated")),n()}catch(te){P(": "+(te.message||"")),S(!1)}},[f,v,a,i,n]);return r?k.jsx(Ko,{isOpen:r,onClose:n,title:a?"":"",className:"max-w-4xl",children:k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),k.jsx("input",{type:"text",value:f,onChange:U=>m(U.target.value),placeholder:": ",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg outline-none focus:ring-2 focus:ring-blue-500/20 dark:text-white",autoFocus:!0})]}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[k.jsx(Ad,{title:"",items:u,selectedItems:v.project,onToggle:U=>N("project",U)}),k.jsx(Ad,{title:"",items:[...h,{id:qd,name:""}],selectedItems:v.timeblock,onToggle:U=>N("timeblock",U),labelFn:U=>U.id===qd||!U.start?U.name:`${U.start}-${U.end}`}),k.jsx(Ad,{title:"",items:IV.map(U=>({id:U.toString(),name:`${U} min`})),selectedItems:v.duration,onToggle:U=>N("duration",U)}),k.jsx(Ad,{title:"",items:bV,selectedItems:v.date,onToggle:U=>N("date",U)})]}),V&&k.jsx("p",{className:"text-sm text-red-500 text-center",children:V}),k.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[k.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition",children:""}),k.jsx("button",{onClick:q,disabled:I,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50",children:I?"...":a?"":""})]})]})}):null},Ad=({title:t,items:e,selectedItems:n,onToggle:r,labelFn:i=a=>a.name})=>k.jsxs("div",{className:"flex flex-col h-64 border border-gray-100 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-900",children:[k.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700 text-xs font-bold text-gray-500 uppercase tracking-wider",children:t}),k.jsx("div",{className:"p-2 overflow-y-auto space-y-1 custom-scrollbar",children:e.map(a=>{const u=a.id||a.toString(),h=n.includes(u);return k.jsxs("div",{className:"flex items-center px-2 py-1.5 rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",onClick:()=>r(u),children:[k.jsx("input",{type:"checkbox",checked:h,onChange:()=>{},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer"}),k.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300 truncate flex-1",children:i(a)})]},u)})})]}),SV=()=>{const{activeModal:t,modalData:e,closeModal:n}=Hs(),r=t==="label-edit",i=e,a=!!(i!=null&&i.id),[u,h]=F.useState(""),[f,m]=F.useState(!1),[v,w]=F.useState(null);F.useEffect(()=>{r&&(h((i==null?void 0:i.name)||""),w(null),m(!1))},[r,i]);const I=F.useCallback(async()=>{const P=u.trim();if(!P){w("");return}m(!0),w(null);try{if(a&&(i!=null&&i.id))await xL(i.id,{name:P});else{const N=`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`;await SL(P,N)}n()}catch(N){w(": "+(N.message||"")),m(!1)}},[u,a,i,n]),S=F.useCallback(async()=>{if(i!=null&&i.id&&confirm(`${i.name}`)){m(!0);try{await AL(i.id),n()}catch{w(""),m(!1)}}},[i,n]),V=P=>{P.key==="Enter"&&!P.nativeEvent.isComposing&&I()};return r?k.jsx(Ko,{isOpen:r,onClose:n,className:"max-w-md",children:k.jsxs("div",{className:"flex flex-col gap-6",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0",style:{backgroundColor:(i==null?void 0:i.color)||"#3B82F6"}}),k.jsx("input",{type:"text",value:u,onChange:P=>h(P.target.value),onKeyDown:V,placeholder:a?"":"",className:"flex-1 text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-400",autoFocus:!0})]}),k.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:a?"":""}),v&&k.jsx("p",{className:"text-sm text-red-500 text-center",children:v}),k.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[a?k.jsxs("button",{onClick:S,disabled:f,className:"text-gray-400 hover:text-red-500 text-sm font-medium flex items-center gap-1.5 px-3 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50",children:[k.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),""]}):k.jsx("span",{}),k.jsxs("div",{className:"flex gap-3",children:[k.jsx("button",{onClick:n,disabled:f,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 transition disabled:opacity-50",children:""}),k.jsx("button",{onClick:I,disabled:f,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"...":a?"":""})]})]})]})}):null},xV=()=>{const{activeModal:t,modalData:e,closeModal:n}=Hs(),r=t==="project-edit",i=e,a=!!(i!=null&&i.id),[u,h]=F.useState(""),[f,m]=F.useState(!1),[v,w]=F.useState(null);F.useEffect(()=>{r&&(h((i==null?void 0:i.name)||""),w(null),m(!1))},[r,i]);const I=F.useCallback(async()=>{const P=u.trim();if(!P){w("");return}m(!0),w(null);try{if(a&&(i!=null&&i.id))await rL(i.id,{name:P});else{const N=Ws();if(!N)throw new Error("");await nL(P,N)}n()}catch(N){w(": "+(N.message||"")),m(!1)}},[u,a,i,n]),S=F.useCallback(async()=>{if(i!=null&&i.id&&confirm(`${i.name}`)){m(!0);try{await sL(i.id),n()}catch{w(""),m(!1)}}},[i,n]),V=P=>{P.key==="Enter"&&!P.nativeEvent.isComposing&&I()};return r?k.jsx(Ko,{isOpen:r,onClose:n,className:"max-w-md",children:k.jsxs("div",{className:"flex flex-col gap-6",children:[k.jsx("div",{children:k.jsx("input",{type:"text",value:u,onChange:P=>h(P.target.value),onKeyDown:V,placeholder:a?"":"",className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-400",autoFocus:!0})}),k.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:a?"":""}),v&&k.jsx("p",{className:"text-sm text-red-500 text-center",children:v}),k.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[a?k.jsxs("button",{onClick:S,disabled:f,className:"text-gray-400 hover:text-red-500 text-sm font-medium flex items-center gap-1.5 px-3 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50",children:[k.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),""]}):k.jsx("span",{}),k.jsxs("div",{className:"flex gap-3",children:[k.jsx("button",{onClick:n,disabled:f,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 transition disabled:opacity-50",children:""}),k.jsx("button",{onClick:I,disabled:f,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"...":a?"":""})]})]})]})}):null};function AV(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const u=f=>f===null?null:JSON.parse(f,void 0),h=(a=n.getItem(i))!=null?a:null;return h instanceof Promise?h.then(u):u(h)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const Nm=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Nm(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Nm(r)(n)}}}},CV=(t,e)=>(n,r,i)=>{let a={storage:AV(()=>localStorage),partialize:P=>P,version:0,merge:(P,N)=>({...N,...P}),...e},u=!1;const h=new Set,f=new Set;let m=a.storage;if(!m)return t((...P)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...P)},r,i);const v=()=>{const P=a.partialize({...r()});return m.setItem(a.name,{state:P,version:a.version})},w=i.setState;i.setState=(P,N)=>(w(P,N),v());const I=t((...P)=>(n(...P),v()),r,i);i.getInitialState=()=>I;let S;const V=()=>{var P,N;if(!m)return;u=!1,h.forEach(U=>{var H;return U((H=r())!=null?H:I)});const q=((N=a.onRehydrateStorage)==null?void 0:N.call(a,(P=r())!=null?P:I))||void 0;return Nm(m.getItem.bind(m))(a.name).then(U=>{if(U)if(typeof U.version=="number"&&U.version!==a.version){if(a.migrate){const H=a.migrate(U.state,U.version);return H instanceof Promise?H.then(J=>[!0,J]):[!0,H]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,U.state];return[!1,void 0]}).then(U=>{var H;const[J,Y]=U;if(S=a.merge(Y,(H=r())!=null?H:I),n(S,!0),J)return v()}).then(()=>{q==null||q(S,void 0),S=r(),u=!0,f.forEach(U=>U(S))}).catch(U=>{q==null||q(void 0,U)})};return i.persist={setOptions:P=>{a={...a,...P},P.storage&&(m=P.storage)},clearStorage:()=>{m==null||m.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>V(),hasHydrated:()=>u,onHydrate:P=>(h.add(P),()=>{h.delete(P)}),onFinishHydration:P=>(f.add(P),()=>{f.delete(P)})},a.skipHydration||V(),S||I},RV=CV,Jg=Qg()(RV(t=>({sidebarWidth:280,isSidebarOpen:!0,sidebarDensity:"normal",setSidebarWidth:e=>t({sidebarWidth:e}),toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),setSidebarOpen:e=>t({isSidebarOpen:e}),setSidebarDensity:e=>t({sidebarDensity:e})}),{name:"ui-storage",partialize:t=>({sidebarWidth:t.sidebarWidth,sidebarDensity:t.sidebarDensity,isSidebarOpen:t.isSidebarOpen})})),PV=()=>{const{activeModal:t,closeModal:e}=Hs(),{sidebarDensity:n,setSidebarDensity:r}=Jg(),[i,a]=F.useState("appearance"),u=t==="settings",h=f=>{f==="dark"?(document.documentElement.classList.add("dark"),localStorage.theme="dark"):(document.documentElement.classList.remove("dark"),localStorage.theme="light")};return k.jsx(Ko,{isOpen:u,onClose:e,title:"",className:"max-w-2xl h-[600px]",children:k.jsxs("div",{className:"flex h-full -m-6",children:[k.jsxs("div",{className:"w-48 bg-gray-50 dark:bg-gray-800/50 border-r border-gray-100 dark:border-gray-700/50 p-4 space-y-1",children:[k.jsx(Kp,{active:i==="general",onClick:()=>a("general"),label:"",icon:""}),k.jsx(Kp,{active:i==="appearance",onClick:()=>a("appearance"),label:"",icon:""}),k.jsx(Kp,{active:i==="account",onClick:()=>a("account"),label:"",icon:""})]}),k.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[i==="appearance"&&k.jsxs("div",{className:"space-y-6",children:[k.jsxs("section",{children:[k.jsx("h4",{className:"text-sm font-bold mb-3 text-gray-700 dark:text-gray-300",children:""}),k.jsxs("div",{className:"flex gap-4",children:[k.jsx("button",{onClick:()=>h("light"),className:"p-4 border rounded-lg hover:border-blue-500 bg-white shadow-sm w-32 text-center",children:"Light"}),k.jsx("button",{onClick:()=>h("dark"),className:"p-4 border rounded-lg hover:border-blue-500 bg-gray-900 text-white shadow-sm w-32 text-center",children:"Dark"})]})]}),k.jsxs("section",{children:[k.jsx("h4",{className:"text-sm font-bold mb-3 text-gray-700 dark:text-gray-300",children:""}),k.jsx("div",{className:"space-y-2",children:["compact","normal","comfortable","spacious"].map(f=>k.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[k.jsx("input",{type:"radio",name:"density",checked:n===f,onChange:()=>r(f),className:"text-blue-600"}),k.jsx("span",{className:"capitalize text-sm",children:f})]},f))})]})]}),i==="general"&&k.jsx("div",{className:"text-gray-500 text-sm",children:""}),i==="account"&&k.jsx("div",{className:"text-gray-500 text-sm",children:""})]})]})})},Kp=({active:t,onClick:e,label:n,icon:r})=>k.jsxs("button",{onClick:e,className:qr("w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors text-left",t?"bg-white dark:bg-gray-700 shadow-sm text-blue-600 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[k.jsx("span",{children:r}),k.jsx("span",{children:n})]}),Yg=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!0),i=Ws();return F.useEffect(()=>{const a=kL(i||"",u=>{e(u),r(!1)});return()=>a()},[i]),{labels:t,loading:n}};function ub(t){if(!t)return null;if(t instanceof Date)return t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();const e=new Date(t);return isNaN(e.getTime())?null:e}function NV(t=new Date){const e=ub(t)||new Date,n=new Date(e);return n.setHours(0,0,0,0),n}function DV(t){const e=NV(new Date);if(!(t!=null&&t.type)||t.type==="daily"||t.type==="monthly")return e;if(t.type==="weekly"&&t.days&&t.days.length>0){const n=e.getDay();for(let r=0;r<=6;r++)if(t.days.includes((n+r)%7))return e.setDate(e.getDate()+r),e}if(t.type==="weekdays"){for(;e.getDay()===0||e.getDay()===6;)e.setDate(e.getDate()+1);return e}return e}function OV(t){return t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e]||e)}function MV(t){if(!t)return"";const e=t.split(`
`);let n=[],r=null;return e.forEach(i=>{const a=i.trimStart(),u=a.startsWith("* ")||a.startsWith("- "),h=/^\d+\.\s/.test(a),f=u||h;if(f){const m=h?"ol":"ul";if(r!==m){r&&n.push(`</${r}>`);const v=h?"list-decimal":"list-disc";n.push(`<${m} class="${v} ml-5 space-y-1">`),r=m}}else r&&(n.push(`</${r}>`),r=null);if(f){let m="";u?m=a.substring(2):m=a.replace(/^\d+\.\s/,"");const v=bw(m);n.push(`<li>${v}</li>`)}else i.trim()?n.push(`<p class="mb-2">${bw(i)}</p>`):r&&(n.push(`</${r}>`),r=null)}),r&&n.push(`</${r}>`),n.join(`
`)}function bw(t){return OV(t).replace(/\[(.*?)\]\((.*?)\)/g,(n,r,i)=>`<a href="${i.replace(/"/g,"&quot;")}" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300 underline font-medium">${r}</a>`)}const LV=[15,30,45,60,75,90,120],VV=[{value:"none",label:""},{value:"daily",label:""},{value:"weekdays",label:""},{value:"weekly",label:""},{value:"monthly",label:""}],jV=["","","","","","",""],FV=t=>{if(!t)return"";const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},zV=t=>{if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e},UV=()=>{const{activeModal:t,modalData:e,closeModal:n}=Hs(),r=t==="task-detail",i=e,a=!(i!=null&&i.id)||i.id==="temp-new-task",{projects:u}=Hh();Yg();const{timeBlocks:h}=Kg(),[f,m]=F.useState(""),[v,w]=F.useState(""),[I,S]=F.useState(null),[V,P]=F.useState("todo"),[N,q]=F.useState(null),[U,H]=F.useState({type:"none",days:[]}),[J,Y]=F.useState(null),[te,C]=F.useState(null),[T,x]=F.useState(!1),[O,D]=F.useState(!1);F.useEffect(()=>{var re;if(i){m(i.title||""),w(i.description||""),S(i.projectId||null),P(i.status||"todo"),Y(i.timeBlockId||null),C(i.duration||null);const G=ub(i.dueDate);q(G);const he=i.recurrence||{type:"none",days:[]};H(he),he!=null&&he.type&&he.type!=="none"&&!G&&q(DV(he));const ue=!!(G||(he==null?void 0:he.type)!=="none"||i.timeBlockId||i.duration);D(ue),x(!!((re=i.description)!=null&&re.trim()))}},[i]);const L=F.useCallback(async()=>{if(!f.trim()){alert("");return}if((U==null?void 0:U.type)==="weekly"&&(!U.days||U.days.length===0)){alert("");return}const re={title:f.trim(),description:v.trim()||null,projectId:I==="none"?null:I,status:V,dueDate:N?_t.fromDate(N):null,recurrence:(U==null?void 0:U.type)==="none"?null:U,timeBlockId:J||null,duration:te||void 0};try{a?await QI({...re,title:re.title}):await vL(i.id,re),n()}catch(G){console.error("Failed to save task",G),alert("")}},[f,v,I,V,N,U,J,te,a,i,n]),R=F.useCallback(async()=>{if(!(!(i!=null&&i.id)||a)&&confirm(""))try{await _L(i.id),n()}catch(re){console.error("Failed to delete task",re),alert("")}},[i,a,n]),Ue=re=>{H({type:re,days:re==="weekly"?(U==null?void 0:U.days)||[]:[]})},et=re=>{const G=(U==null?void 0:U.days)||[],he=G.includes(re)?G.filter(ue=>ue!==re):[...G,re].sort((ue,z)=>ue-z);H({type:(U==null?void 0:U.type)||"weekly",days:he})},Ze=F.useMemo(()=>MV(v),[v]);return r?k.jsx(Ko,{isOpen:r,onClose:n,className:"max-w-4xl h-[85vh]",children:k.jsxs("div",{className:"flex flex-col h-full",children:[k.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 shrink-0",children:[k.jsx("input",{type:"text",value:f,onChange:re=>m(re.target.value),placeholder:"",className:"flex-1 text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder:text-gray-400",autoFocus:!0}),k.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:k.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),k.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 h-full",children:[k.jsxs("div",{className:"md:col-span-8 flex flex-col h-full bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[k.jsxs("div",{className:"flex justify-between items-center mb-2",children:[k.jsxs("label",{className:"text-xs font-semibold text-gray-500 flex items-center gap-2 uppercase",children:[k.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})," (Markdown)"]}),k.jsx("button",{type:"button",onClick:()=>x(!T),className:"text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 px-2 py-0.5 rounded transition-colors text-xs font-medium",children:T?"":""})]}),k.jsx("div",{className:"flex-1 relative min-h-[200px]",children:T?k.jsx("div",{onClick:()=>x(!1),className:"w-full h-full p-4 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm overflow-y-auto cursor-text prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:Ze||'<span class="text-gray-400">...</span>'}}):k.jsx("textarea",{value:v,onChange:re=>w(re.target.value),onBlur:()=>v.trim()&&x(!0),placeholder:"...",className:"w-full h-full p-3 bg-gray-50 dark:bg-gray-900/50 border-0 rounded-lg outline-none text-sm transition-all resize-none leading-relaxed focus:ring-1 focus:ring-blue-500/50 text-gray-800 dark:text-gray-200 font-mono",autoFocus:!v})})]}),k.jsxs("div",{className:"md:col-span-4 space-y-4",children:[k.jsxs("details",{open:O,onToggle:re=>D(re.currentTarget.open),className:"group border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[k.jsxs("summary",{className:"flex items-center justify-between px-4 py-3 cursor-pointer list-none outline-none bg-gray-50 dark:bg-gray-700/30 rounded-t-lg group-[:not([open])]:rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700/50",children:[k.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[k.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),""]}),k.jsx("span",{className:"transform group-open:rotate-180 transition-transform text-gray-400",children:k.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),k.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"task-due-date",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),k.jsx("input",{type:"date",id:"task-due-date",value:FV(N),onChange:re=>q(zV(re.target.value)),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm"})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"task-recurrence",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),k.jsx("select",{id:"task-recurrence",value:(U==null?void 0:U.type)||"none",onChange:re=>Ue(re.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:VV.map(re=>k.jsx("option",{value:re.value,children:re.label},re.value))})]}),(U==null?void 0:U.type)==="weekly"&&k.jsxs("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700",children:[k.jsx("span",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:""}),k.jsx("div",{className:"flex flex-wrap gap-2",children:jV.map((re,G)=>{var he;return k.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[k.jsx("input",{type:"checkbox",checked:((he=U.days)==null?void 0:he.includes(G))||!1,onChange:()=>et(G),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),k.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:re})]},G)})})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"task-timeblock",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),k.jsxs("select",{id:"task-timeblock",value:J||"",onChange:re=>Y(re.target.value||null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[k.jsx("option",{value:"",children:""}),h.map(re=>k.jsxs("option",{value:re.id,children:[re.start," - ",re.end]},re.id))]})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"task-duration",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),k.jsxs("select",{id:"task-duration",value:te||"",onChange:re=>C(re.target.value?parseInt(re.target.value,10):null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[k.jsx("option",{value:"",children:""}),LV.map(re=>k.jsxs("option",{value:re,children:[re," min"]},re))]})]})]})]}),k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[k.jsx("label",{htmlFor:"task-project",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),k.jsxs("select",{id:"task-project",value:I||"none",onChange:re=>S(re.target.value==="none"?null:re.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[k.jsx("option",{value:"none",children:""}),u.map(re=>k.jsx("option",{value:re.id,children:re.name},re.id))]})]}),k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[k.jsx("label",{htmlFor:"task-status",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),k.jsxs("select",{id:"task-status",value:V,onChange:re=>P(re.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[k.jsx("option",{value:"todo",children:"To Do"}),k.jsx("option",{value:"completed",children:""})]})]})]})]})}),k.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center shrink-0",children:[!a&&k.jsxs("button",{onClick:R,className:"px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition flex items-center gap-1.5",children:[k.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),""]}),k.jsxs("div",{className:`flex gap-2 ${a?"ml-auto":""}`,children:[k.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition",children:""}),k.jsx("button",{onClick:L,className:"px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium shadow-md transition transform active:scale-95",children:a?"":""})]})]})]})}):null};function $V(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return F.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Gh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Xg(t){return"nodeType"in t}function Jn(t){var e,n;return t?vl(t)?t:Xg(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function ey(t){const{Document:e}=Jn(t);return t instanceof e}function Yu(t){return vl(t)?!1:t instanceof Jn(t).HTMLElement}function cb(t){return t instanceof Jn(t).SVGElement}function _l(t){return t?vl(t)?t.document:Xg(t)?ey(t)?t:Yu(t)||cb(t)?t.ownerDocument:document:document:document}const ms=Gh?F.useLayoutEffect:F.useEffect;function ty(t){const e=F.useRef(t);return ms(()=>{e.current=t}),F.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function BV(){const t=F.useRef(null),e=F.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=F.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Nu(t,e){e===void 0&&(e=[t]);const n=F.useRef(t);return ms(()=>{n.current!==t&&(n.current=t)},e),n}function Xu(t,e){const n=F.useRef();return F.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function hh(t){const e=ty(t),n=F.useRef(null),r=F.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Dm(t){const e=F.useRef();return F.useEffect(()=>{e.current=t},[t]),e.current}let Gp={};function ec(t,e){return F.useMemo(()=>{if(e)return e;const n=Gp[t]==null?0:Gp[t]+1;return Gp[t]=n,t+"-"+n},[t,e])}function db(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((a,u)=>{const h=Object.entries(u);for(const[f,m]of h){const v=a[f];v!=null&&(a[f]=v+t*m)}return a},{...e})}}const qa=db(1),Du=db(-1);function qV(t){return"clientX"in t&&"clientY"in t}function ny(t){if(!t)return!1;const{KeyboardEvent:e}=Jn(t.target);return e&&t instanceof e}function WV(t){if(!t)return!1;const{TouchEvent:e}=Jn(t.target);return e&&t instanceof e}function Om(t){if(WV(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return qV(t)?{x:t.clientX,y:t.clientY}:null}const Ou=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ou.Translate.toString(t),Ou.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),kw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function HV(t){return t.matches(kw)?t:t.querySelector(kw)}const KV={display:"none"};function GV(t){let{id:e,value:n}=t;return Gt.createElement("div",{id:e,style:KV},n)}function QV(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Gt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function ZV(){const[t,e]=F.useState("");return{announce:F.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const hb=F.createContext(null);function JV(t){const e=F.useContext(hb);F.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function YV(){const[t]=F.useState(()=>new Set),e=F.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[F.useCallback(r=>{let{type:i,event:a}=r;t.forEach(u=>{var h;return(h=u[i])==null?void 0:h.call(u,a)})},[t]),e]}const XV={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},e4={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function t4(t){let{announcements:e=e4,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=XV}=t;const{announce:a,announcement:u}=ZV(),h=ec("DndLiveRegion"),[f,m]=F.useState(!1);if(F.useEffect(()=>{m(!0)},[]),JV(F.useMemo(()=>({onDragStart(w){let{active:I}=w;a(e.onDragStart({active:I}))},onDragMove(w){let{active:I,over:S}=w;e.onDragMove&&a(e.onDragMove({active:I,over:S}))},onDragOver(w){let{active:I,over:S}=w;a(e.onDragOver({active:I,over:S}))},onDragEnd(w){let{active:I,over:S}=w;a(e.onDragEnd({active:I,over:S}))},onDragCancel(w){let{active:I,over:S}=w;a(e.onDragCancel({active:I,over:S}))}}),[a,e])),!f)return null;const v=Gt.createElement(Gt.Fragment,null,Gt.createElement(GV,{id:r,value:i.draggable}),Gt.createElement(QV,{id:h,announcement:u}));return n?ja.createPortal(v,n):v}var Kt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Kt||(Kt={}));function fh(){}function ph(t,e){return F.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function fb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return F.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Hr=Object.freeze({x:0,y:0});function pb(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function mb(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function n4(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Sw(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function gb(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function xw(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const yb=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=xw(e,e.left,e.top),a=[];for(const u of r){const{id:h}=u,f=n.get(h);if(f){const m=pb(xw(f),i);a.push({id:h,data:{droppableContainer:u,value:m}})}}return a.sort(mb)},r4=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=Sw(e),a=[];for(const u of r){const{id:h}=u,f=n.get(h);if(f){const m=Sw(f),v=i.reduce((I,S,V)=>I+pb(m[V],S),0),w=Number((v/4).toFixed(4));a.push({id:h,data:{droppableContainer:u,value:w}})}}return a.sort(mb)};function s4(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),u=i-r,h=a-n;if(r<i&&n<a){const f=e.width*e.height,m=t.width*t.height,v=u*h,w=v/(f+m-v);return Number(w.toFixed(4))}return 0}const i4=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const a of r){const{id:u}=a,h=n.get(u);if(h){const f=s4(h,e);f>0&&i.push({id:u,data:{droppableContainer:a,value:f}})}}return i.sort(n4)};function o4(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function vb(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Hr}function a4(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i.reduce((u,h)=>({...u,top:u.top+t*h.y,bottom:u.bottom+t*h.y,left:u.left+t*h.x,right:u.right+t*h.x}),{...n})}}const l4=a4(1);function u4(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function c4(t,e,n){const r=u4(e);if(!r)return t;const{scaleX:i,scaleY:a,x:u,y:h}=r,f=t.left-u-(1-i)*parseFloat(n),m=t.top-h-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),v=i?t.width/i:t.width,w=a?t.height/a:t.height;return{width:v,height:w,top:m,right:f+v,bottom:m+w,left:f}}const d4={ignoreTransform:!1};function wl(t,e){e===void 0&&(e=d4);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:v}=Jn(t).getComputedStyle(t);m&&(n=c4(n,m,v))}const{top:r,left:i,width:a,height:u,bottom:h,right:f}=n;return{top:r,left:i,width:a,height:u,bottom:h,right:f}}function Aw(t){return wl(t,{ignoreTransform:!0})}function h4(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function f4(t,e){return e===void 0&&(e=Jn(t).getComputedStyle(t)),e.position==="fixed"}function p4(t,e){e===void 0&&(e=Jn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=e[i];return typeof a=="string"?n.test(a):!1})}function Qh(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(ey(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Yu(i)||cb(i)||n.includes(i))return n;const a=Jn(t).getComputedStyle(i);return i!==t&&p4(i,a)&&n.push(i),f4(i,a)?n:r(i.parentNode)}return t?r(t):n}function _b(t){const[e]=Qh(t,1);return e??null}function Qp(t){return!Gh||!t?null:vl(t)?t:Xg(t)?ey(t)||t===_l(t).scrollingElement?window:Yu(t)?t:null:null}function wb(t){return vl(t)?t.scrollX:t.scrollLeft}function Eb(t){return vl(t)?t.scrollY:t.scrollTop}function Mm(t){return{x:wb(t),y:Eb(t)}}var nn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(nn||(nn={}));function Tb(t){return!Gh||!t?!1:t===document.scrollingElement}function Ib(t){const e={x:0,y:0},n=Tb(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,u=t.scrollTop>=r.y,h=t.scrollLeft>=r.x;return{isTop:i,isLeft:a,isBottom:u,isRight:h,maxScroll:r,minScroll:e}}const m4={x:.2,y:.2};function g4(t,e,n,r,i){let{top:a,left:u,right:h,bottom:f}=n;r===void 0&&(r=10),i===void 0&&(i=m4);const{isTop:m,isBottom:v,isLeft:w,isRight:I}=Ib(t),S={x:0,y:0},V={x:0,y:0},P={height:e.height*i.y,width:e.width*i.x};return!m&&a<=e.top+P.height?(S.y=nn.Backward,V.y=r*Math.abs((e.top+P.height-a)/P.height)):!v&&f>=e.bottom-P.height&&(S.y=nn.Forward,V.y=r*Math.abs((e.bottom-P.height-f)/P.height)),!I&&h>=e.right-P.width?(S.x=nn.Forward,V.x=r*Math.abs((e.right-P.width-h)/P.width)):!w&&u<=e.left+P.width&&(S.x=nn.Backward,V.x=r*Math.abs((e.left+P.width-u)/P.width)),{direction:S,speed:V}}function y4(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:u}=window;return{top:0,left:0,right:a,bottom:u,width:a,height:u}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function bb(t){return t.reduce((e,n)=>qa(e,Mm(n)),Hr)}function v4(t){return t.reduce((e,n)=>e+wb(n),0)}function _4(t){return t.reduce((e,n)=>e+Eb(n),0)}function w4(t,e){if(e===void 0&&(e=wl),!t)return;const{top:n,left:r,bottom:i,right:a}=e(t);_b(t)&&(i<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const E4=[["x",["left","right"],v4],["y",["top","bottom"],_4]];class ry{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Qh(n),i=bb(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,u,h]of E4)for(const f of u)Object.defineProperty(this,f,{get:()=>{const m=h(r),v=i[a]-m;return this.rect[f]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class pu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function T4(t){const{EventTarget:e}=Jn(t);return t instanceof e?t:_l(t)}function Zp(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Er;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Er||(Er={}));function Cw(t){t.preventDefault()}function I4(t){t.stopPropagation()}var He;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(He||(He={}));const kb={start:[He.Space,He.Enter],cancel:[He.Esc],end:[He.Space,He.Enter,He.Tab]},b4=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case He.Right:return{...n,x:n.x+25};case He.Left:return{...n,x:n.x-25};case He.Down:return{...n,y:n.y+25};case He.Up:return{...n,y:n.y-25}}};class Zh{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new pu(_l(n)),this.windowListeners=new pu(Jn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Er.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&w4(r),n(Hr)}handleKeyDown(e){if(ny(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:a=kb,coordinateGetter:u=b4,scrollBehavior:h="smooth"}=i,{code:f}=e;if(a.end.includes(f)){this.handleEnd(e);return}if(a.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:m}=r.current,v=m?{x:m.left,y:m.top}:Hr;this.referenceCoordinates||(this.referenceCoordinates=v);const w=u(e,{active:n,context:r.current,currentCoordinates:v});if(w){const I=Du(w,v),S={x:0,y:0},{scrollableAncestors:V}=r.current;for(const P of V){const N=e.code,{isTop:q,isRight:U,isLeft:H,isBottom:J,maxScroll:Y,minScroll:te}=Ib(P),C=y4(P),T={x:Math.min(N===He.Right?C.right-C.width/2:C.right,Math.max(N===He.Right?C.left:C.left+C.width/2,w.x)),y:Math.min(N===He.Down?C.bottom-C.height/2:C.bottom,Math.max(N===He.Down?C.top:C.top+C.height/2,w.y))},x=N===He.Right&&!U||N===He.Left&&!H,O=N===He.Down&&!J||N===He.Up&&!q;if(x&&T.x!==w.x){const D=P.scrollLeft+I.x,L=N===He.Right&&D<=Y.x||N===He.Left&&D>=te.x;if(L&&!I.y){P.scrollTo({left:D,behavior:h});return}L?S.x=P.scrollLeft-D:S.x=N===He.Right?P.scrollLeft-Y.x:P.scrollLeft-te.x,S.x&&P.scrollBy({left:-S.x,behavior:h});break}else if(O&&T.y!==w.y){const D=P.scrollTop+I.y,L=N===He.Down&&D<=Y.y||N===He.Up&&D>=te.y;if(L&&!I.x){P.scrollTo({top:D,behavior:h});return}L?S.y=P.scrollTop-D:S.y=N===He.Down?P.scrollTop-Y.y:P.scrollTop-te.y,S.y&&P.scrollBy({top:-S.y,behavior:h});break}}this.handleMove(e,qa(Du(w,this.referenceCoordinates),S))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Zh.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=kb,onActivation:i}=e,{active:a}=n;const{code:u}=t.nativeEvent;if(r.start.includes(u)){const h=a.activatorNode.current;return h&&t.target!==h?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function Rw(t){return!!(t&&"distance"in t)}function Pw(t){return!!(t&&"delay"in t)}class sy{constructor(e,n,r){var i;r===void 0&&(r=T4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:a}=e,{target:u}=a;this.props=e,this.events=n,this.document=_l(u),this.documentListeners=new pu(this.document),this.listeners=new pu(r),this.windowListeners=new pu(Jn(u)),this.initialCoordinates=(i=Om(a))!=null?i:Hr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.DragStart,Cw),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),this.windowListeners.add(Er.ContextMenu,Cw),this.documentListeners.add(Er.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Pw(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Rw(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Er.Click,I4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Er.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:a}=this,{onMove:u,options:{activationConstraint:h}}=a;if(!i)return;const f=(n=Om(e))!=null?n:Hr,m=Du(i,f);if(!r&&h){if(Rw(h)){if(h.tolerance!=null&&Zp(m,h.tolerance))return this.handleCancel();if(Zp(m,h.distance))return this.handleStart()}if(Pw(h)&&Zp(m,h.tolerance))return this.handleCancel();this.handlePending(h,m);return}e.cancelable&&e.preventDefault(),u(f)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===He.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const k4={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Jh extends sy{constructor(e){const{event:n}=e,r=_l(n.target);super(e,k4,r)}}Jh.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const S4={move:{name:"mousemove"},end:{name:"mouseup"}};var Lm;(function(t){t[t.RightClick=2]="RightClick"})(Lm||(Lm={}));class x4 extends sy{constructor(e){super(e,S4,_l(e.event.target))}}x4.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Lm.RightClick?!1:(r==null||r({event:n}),!0)}}];const Jp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class A4 extends sy{constructor(e){super(e,Jp)}static setup(){return window.addEventListener(Jp.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Jp.move.name,e)};function e(){}}}A4.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var mu;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(mu||(mu={}));var mh;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(mh||(mh={}));function C4(t){let{acceleration:e,activator:n=mu.Pointer,canScroll:r,draggingRect:i,enabled:a,interval:u=5,order:h=mh.TreeOrder,pointerCoordinates:f,scrollableAncestors:m,scrollableAncestorRects:v,delta:w,threshold:I}=t;const S=P4({delta:w,disabled:!a}),[V,P]=BV(),N=F.useRef({x:0,y:0}),q=F.useRef({x:0,y:0}),U=F.useMemo(()=>{switch(n){case mu.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case mu.DraggableRect:return i}},[n,i,f]),H=F.useRef(null),J=F.useCallback(()=>{const te=H.current;if(!te)return;const C=N.current.x*q.current.x,T=N.current.y*q.current.y;te.scrollBy(C,T)},[]),Y=F.useMemo(()=>h===mh.TreeOrder?[...m].reverse():m,[h,m]);F.useEffect(()=>{if(!a||!m.length||!U){P();return}for(const te of Y){if((r==null?void 0:r(te))===!1)continue;const C=m.indexOf(te),T=v[C];if(!T)continue;const{direction:x,speed:O}=g4(te,T,U,e,I);for(const D of["x","y"])S[D][x[D]]||(O[D]=0,x[D]=0);if(O.x>0||O.y>0){P(),H.current=te,V(J,u),N.current=O,q.current=x;return}}N.current={x:0,y:0},q.current={x:0,y:0},P()},[e,J,r,P,a,u,JSON.stringify(U),JSON.stringify(S),V,m,Y,v,JSON.stringify(I)])}const R4={x:{[nn.Backward]:!1,[nn.Forward]:!1},y:{[nn.Backward]:!1,[nn.Forward]:!1}};function P4(t){let{delta:e,disabled:n}=t;const r=Dm(e);return Xu(i=>{if(n||!r||!i)return R4;const a={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[nn.Backward]:i.x[nn.Backward]||a.x===-1,[nn.Forward]:i.x[nn.Forward]||a.x===1},y:{[nn.Backward]:i.y[nn.Backward]||a.y===-1,[nn.Forward]:i.y[nn.Forward]||a.y===1}}},[n,e,r])}function N4(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Xu(i=>{var a;return e==null?null:(a=r??i)!=null?a:null},[r,e])}function D4(t,e){return F.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,a=i.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,r)}));return[...n,...a]},[]),[t,e])}var Mu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Mu||(Mu={}));var Vm;(function(t){t.Optimized="optimized"})(Vm||(Vm={}));const Nw=new Map;function O4(t,e){let{dragging:n,dependencies:r,config:i}=e;const[a,u]=F.useState(null),{frequency:h,measure:f,strategy:m}=i,v=F.useRef(t),w=N(),I=Nu(w),S=F.useCallback(function(q){q===void 0&&(q=[]),!I.current&&u(U=>U===null?q:U.concat(q.filter(H=>!U.includes(H))))},[I]),V=F.useRef(null),P=Xu(q=>{if(w&&!n)return Nw;if(!q||q===Nw||v.current!==t||a!=null){const U=new Map;for(let H of t){if(!H)continue;if(a&&a.length>0&&!a.includes(H.id)&&H.rect.current){U.set(H.id,H.rect.current);continue}const J=H.node.current,Y=J?new ry(f(J),J):null;H.rect.current=Y,Y&&U.set(H.id,Y)}return U}return q},[t,a,n,w,f]);return F.useEffect(()=>{v.current=t},[t]),F.useEffect(()=>{w||S()},[n,w]),F.useEffect(()=>{a&&a.length>0&&u(null)},[JSON.stringify(a)]),F.useEffect(()=>{w||typeof h!="number"||V.current!==null||(V.current=setTimeout(()=>{S(),V.current=null},h))},[h,w,S,...r]),{droppableRects:P,measureDroppableContainers:S,measuringScheduled:a!=null};function N(){switch(m){case Mu.Always:return!1;case Mu.BeforeDragging:return n;default:return!n}}}function Sb(t,e){return Xu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function M4(t,e){return Sb(t,e)}function L4(t){let{callback:e,disabled:n}=t;const r=ty(e),i=F.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return F.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Yh(t){let{callback:e,disabled:n}=t;const r=ty(e),i=F.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return F.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function V4(t){return new ry(wl(t),t)}function Dw(t,e,n){e===void 0&&(e=V4);const[r,i]=F.useState(null);function a(){i(f=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=f??n)!=null?m:null}const v=e(t);return JSON.stringify(f)===JSON.stringify(v)?f:v})}const u=L4({callback(f){if(t)for(const m of f){const{type:v,target:w}=m;if(v==="childList"&&w instanceof HTMLElement&&w.contains(t)){a();break}}}}),h=Yh({callback:a});return ms(()=>{a(),t?(h==null||h.observe(t),u==null||u.observe(document.body,{childList:!0,subtree:!0})):(h==null||h.disconnect(),u==null||u.disconnect())},[t]),r}function j4(t){const e=Sb(t);return vb(t,e)}const Ow=[];function F4(t){const e=F.useRef(t),n=Xu(r=>t?r&&r!==Ow&&t&&e.current&&t.parentNode===e.current.parentNode?r:Qh(t):Ow,[t]);return F.useEffect(()=>{e.current=t},[t]),n}function z4(t){const[e,n]=F.useState(null),r=F.useRef(t),i=F.useCallback(a=>{const u=Qp(a.target);u&&n(h=>h?(h.set(u,Mm(u)),new Map(h)):null)},[]);return F.useEffect(()=>{const a=r.current;if(t!==a){u(a);const h=t.map(f=>{const m=Qp(f);return m?(m.addEventListener("scroll",i,{passive:!0}),[m,Mm(m)]):null}).filter(f=>f!=null);n(h.length?new Map(h):null),r.current=t}return()=>{u(t),u(a)};function u(h){h.forEach(f=>{const m=Qp(f);m==null||m.removeEventListener("scroll",i)})}},[i,t]),F.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,u)=>qa(a,u),Hr):bb(t):Hr,[t,e])}function Mw(t,e){e===void 0&&(e=[]);const n=F.useRef(null);return F.useEffect(()=>{n.current=null},e),F.useEffect(()=>{const r=t!==Hr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Du(t,n.current):Hr}function U4(t){F.useEffect(()=>{if(!Gh)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function $4(t,e){return F.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:a}=r;return n[i]=u=>{a(u,e)},n},{}),[t,e])}function xb(t){return F.useMemo(()=>t?h4(t):null,[t])}const Lw=[];function B4(t,e){e===void 0&&(e=wl);const[n]=t,r=xb(n?Jn(n):null),[i,a]=F.useState(Lw);function u(){a(()=>t.length?t.map(f=>Tb(f)?r:new ry(e(f),f)):Lw)}const h=Yh({callback:u});return ms(()=>{h==null||h.disconnect(),u(),t.forEach(f=>h==null?void 0:h.observe(f))},[t]),i}function q4(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Yu(e)?e:t}function W4(t){let{measure:e}=t;const[n,r]=F.useState(null),i=F.useCallback(m=>{for(const{target:v}of m)if(Yu(v)){r(w=>{const I=e(v);return w?{...w,width:I.width,height:I.height}:I});break}},[e]),a=Yh({callback:i}),u=F.useCallback(m=>{const v=q4(m);a==null||a.disconnect(),v&&(a==null||a.observe(v)),r(v?e(v):null)},[e,a]),[h,f]=hh(u);return F.useMemo(()=>({nodeRef:h,rect:n,setRef:f}),[n,h,f])}const H4=[{sensor:Jh,options:{}},{sensor:Zh,options:{}}],K4={current:{}},Wd={draggable:{measure:Aw},droppable:{measure:Aw,strategy:Mu.WhileDragging,frequency:Vm.Optimized},dragOverlay:{measure:wl}};class gu extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const G4={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new gu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:fh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Wd,measureDroppableContainers:fh,windowRect:null,measuringScheduled:!1},Q4={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:fh,draggableNodes:new Map,over:null,measureDroppableContainers:fh},Xh=F.createContext(Q4),Ab=F.createContext(G4);function Z4(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new gu}}}function J4(t,e){switch(e.type){case Kt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Kt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Kt.DragEnd:case Kt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Kt.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new gu(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case Kt.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const u=new gu(t.droppable.containers);return u.set(n,{...a,disabled:i}),{...t,droppable:{...t.droppable,containers:u}}}case Kt.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new gu(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function Y4(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=F.useContext(Xh),a=Dm(r),u=Dm(n==null?void 0:n.id);return F.useEffect(()=>{if(!e&&!r&&a&&u!=null){if(!ny(a)||document.activeElement===a.target)return;const h=i.get(u);if(!h)return;const{activatorNode:f,node:m}=h;if(!f.current&&!m.current)return;requestAnimationFrame(()=>{for(const v of[f.current,m.current]){if(!v)continue;const w=HV(v);if(w){w.focus();break}}})}},[r,e,i,u,a]),null}function X4(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,a)=>a({transform:i,...r}),n):n}function ej(t){return F.useMemo(()=>({draggable:{...Wd.draggable,...t==null?void 0:t.draggable},droppable:{...Wd.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Wd.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function tj(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const a=F.useRef(!1),{x:u,y:h}=typeof i=="boolean"?{x:i,y:i}:i;ms(()=>{if(!u&&!h||!e){a.current=!1;return}if(a.current||!r)return;const m=e==null?void 0:e.node.current;if(!m||m.isConnected===!1)return;const v=n(m),w=vb(v,r);if(u||(w.x=0),h||(w.y=0),a.current=!0,Math.abs(w.x)>0||Math.abs(w.y)>0){const I=_b(m);I&&I.scrollBy({top:w.y,left:w.x})}},[e,u,h,r,n])}const Cb=F.createContext({...Hr,scaleX:1,scaleY:1});var Ii;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ii||(Ii={}));const Rb=F.memo(function(e){var n,r,i,a;let{id:u,accessibility:h,autoScroll:f=!0,children:m,sensors:v=H4,collisionDetection:w=i4,measuring:I,modifiers:S,...V}=e;const P=F.useReducer(J4,void 0,Z4),[N,q]=P,[U,H]=YV(),[J,Y]=F.useState(Ii.Uninitialized),te=J===Ii.Initialized,{draggable:{active:C,nodes:T,translate:x},droppable:{containers:O}}=N,D=C!=null?T.get(C):null,L=F.useRef({initial:null,translated:null}),R=F.useMemo(()=>{var rt;return C!=null?{id:C,data:(rt=D==null?void 0:D.data)!=null?rt:K4,rect:L}:null},[C,D]),Ue=F.useRef(null),[et,Ze]=F.useState(null),[re,G]=F.useState(null),he=Nu(V,Object.values(V)),ue=ec("DndDescribedBy",u),z=F.useMemo(()=>O.getEnabled(),[O]),Z=ej(I),{droppableRects:de,measureDroppableContainers:Ee,measuringScheduled:Re}=O4(z,{dragging:te,dependencies:[x.x,x.y],config:Z.droppable}),Ce=N4(T,C),Ie=F.useMemo(()=>re?Om(re):null,[re]),Ve=jn(),je=M4(Ce,Z.draggable.measure);tj({activeNode:C!=null?T.get(C):null,config:Ve.layoutShiftCompensation,initialRect:je,measure:Z.draggable.measure});const Se=Dw(Ce,Z.draggable.measure,je),Ut=Dw(Ce?Ce.parentElement:null),Tt=F.useRef({activatorEvent:null,active:null,activeNode:Ce,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xn=O.getNodeFor((n=Tt.current.over)==null?void 0:n.id),rn=W4({measure:Z.dragOverlay.measure}),Yn=(r=rn.nodeRef.current)!=null?r:Ce,lr=te?(i=rn.rect)!=null?i:Se:null,Ks=!!(rn.nodeRef.current&&rn.rect),Hi=j4(Ks?null:Se),Kr=xb(Yn?Jn(Yn):null),Qt=F4(te?xn??Ce:null),Vn=B4(Qt),Gr=X4(S,{transform:{x:x.x-Hi.x,y:x.y-Hi.y,scaleX:1,scaleY:1},activatorEvent:re,active:R,activeNodeRect:Se,containerNodeRect:Ut,draggingNodeRect:lr,over:Tt.current.over,overlayNodeRect:rn.rect,scrollableAncestors:Qt,scrollableAncestorRects:Vn,windowRect:Kr}),gs=Ie?qa(Ie,x):null,ys=z4(Qt),Ki=Mw(ys),St=Mw(ys,[Se]),it=qa(Gr,Ki),mn=lr?l4(lr,Gr):null,kr=R&&mn?w({active:R,collisionRect:mn,droppableRects:de,droppableContainers:z,pointerCoordinates:gs}):null,Sr=gb(kr,"id"),[gn,Qr]=F.useState(null),Gi=Ks?Gr:qa(Gr,St),Qi=o4(Gi,(a=gn==null?void 0:gn.rect)!=null?a:null,Se),vs=F.useRef(null),Gs=F.useCallback((rt,Rt)=>{let{sensor:ft,options:Fn}=Rt;if(Ue.current==null)return;const Pt=T.get(Ue.current);if(!Pt)return;const $t=rt.nativeEvent,Nt=new ft({active:Ue.current,activeNode:Pt,event:$t,options:Fn,context:Tt,onAbort(Fe){if(!T.get(Fe))return;const{onDragAbort:It}=he.current,sn={id:Fe};It==null||It(sn),U({type:"onDragAbort",event:sn})},onPending(Fe,An,It,sn){if(!T.get(Fe))return;const{onDragPending:cr}=he.current,Dt={id:Fe,constraint:An,initialCoordinates:It,offset:sn};cr==null||cr(Dt),U({type:"onDragPending",event:Dt})},onStart(Fe){const An=Ue.current;if(An==null)return;const It=T.get(An);if(!It)return;const{onDragStart:sn}=he.current,Xn={activatorEvent:$t,active:{id:An,data:It.data,rect:L}};ja.unstable_batchedUpdates(()=>{sn==null||sn(Xn),Y(Ii.Initializing),q({type:Kt.DragStart,initialCoordinates:Fe,active:An}),U({type:"onDragStart",event:Xn}),Ze(vs.current),G($t)})},onMove(Fe){q({type:Kt.DragMove,coordinates:Fe})},onEnd:ur(Kt.DragEnd),onCancel:ur(Kt.DragCancel)});vs.current=Nt;function ur(Fe){return async function(){const{active:It,collisions:sn,over:Xn,scrollAdjustedTranslate:cr}=Tt.current;let Dt=null;if(It&&cr){const{cancelDrop:xr}=he.current;Dt={activatorEvent:$t,active:It,collisions:sn,delta:cr,over:Xn},Fe===Kt.DragEnd&&typeof xr=="function"&&await Promise.resolve(xr(Dt))&&(Fe=Kt.DragCancel)}Ue.current=null,ja.unstable_batchedUpdates(()=>{q({type:Fe}),Y(Ii.Uninitialized),Qr(null),Ze(null),G(null),vs.current=null;const xr=Fe===Kt.DragEnd?"onDragEnd":"onDragCancel";if(Dt){const Ji=he.current[xr];Ji==null||Ji(Dt),U({type:xr,event:Dt})}})}}},[T]),Zi=F.useCallback((rt,Rt)=>(ft,Fn)=>{const Pt=ft.nativeEvent,$t=T.get(Fn);if(Ue.current!==null||!$t||Pt.dndKit||Pt.defaultPrevented)return;const Nt={active:$t};rt(ft,Rt.options,Nt)===!0&&(Pt.dndKit={capturedBy:Rt.sensor},Ue.current=Fn,Gs(ft,Rt))},[T,Gs]),Zr=D4(v,Zi);U4(v),ms(()=>{Se&&J===Ii.Initializing&&Y(Ii.Initialized)},[Se,J]),F.useEffect(()=>{const{onDragMove:rt}=he.current,{active:Rt,activatorEvent:ft,collisions:Fn,over:Pt}=Tt.current;if(!Rt||!ft)return;const $t={active:Rt,activatorEvent:ft,collisions:Fn,delta:{x:it.x,y:it.y},over:Pt};ja.unstable_batchedUpdates(()=>{rt==null||rt($t),U({type:"onDragMove",event:$t})})},[it.x,it.y]),F.useEffect(()=>{const{active:rt,activatorEvent:Rt,collisions:ft,droppableContainers:Fn,scrollAdjustedTranslate:Pt}=Tt.current;if(!rt||Ue.current==null||!Rt||!Pt)return;const{onDragOver:$t}=he.current,Nt=Fn.get(Sr),ur=Nt&&Nt.rect.current?{id:Nt.id,rect:Nt.rect.current,data:Nt.data,disabled:Nt.disabled}:null,Fe={active:rt,activatorEvent:Rt,collisions:ft,delta:{x:Pt.x,y:Pt.y},over:ur};ja.unstable_batchedUpdates(()=>{Qr(ur),$t==null||$t(Fe),U({type:"onDragOver",event:Fe})})},[Sr]),ms(()=>{Tt.current={activatorEvent:re,active:R,activeNode:Ce,collisionRect:mn,collisions:kr,droppableRects:de,draggableNodes:T,draggingNode:Yn,draggingNodeRect:lr,droppableContainers:O,over:gn,scrollableAncestors:Qt,scrollAdjustedTranslate:it},L.current={initial:lr,translated:mn}},[R,Ce,kr,mn,T,Yn,lr,de,O,gn,Qt,it]),C4({...Ve,delta:x,draggingRect:mn,pointerCoordinates:gs,scrollableAncestors:Qt,scrollableAncestorRects:Vn});const Qs=F.useMemo(()=>({active:R,activeNode:Ce,activeNodeRect:Se,activatorEvent:re,collisions:kr,containerNodeRect:Ut,dragOverlay:rn,draggableNodes:T,droppableContainers:O,droppableRects:de,over:gn,measureDroppableContainers:Ee,scrollableAncestors:Qt,scrollableAncestorRects:Vn,measuringConfiguration:Z,measuringScheduled:Re,windowRect:Kr}),[R,Ce,Se,re,kr,Ut,rn,T,O,de,gn,Ee,Qt,Vn,Z,Re,Kr]),Zs=F.useMemo(()=>({activatorEvent:re,activators:Zr,active:R,activeNodeRect:Se,ariaDescribedById:{draggable:ue},dispatch:q,draggableNodes:T,over:gn,measureDroppableContainers:Ee}),[re,Zr,R,Se,q,ue,T,gn,Ee]);return Gt.createElement(hb.Provider,{value:H},Gt.createElement(Xh.Provider,{value:Zs},Gt.createElement(Ab.Provider,{value:Qs},Gt.createElement(Cb.Provider,{value:Qi},m)),Gt.createElement(Y4,{disabled:(h==null?void 0:h.restoreFocus)===!1})),Gt.createElement(t4,{...h,hiddenTextDescribedById:ue}));function jn(){const rt=(et==null?void 0:et.autoScrollEnabled)===!1,Rt=typeof f=="object"?f.enabled===!1:f===!1,ft=te&&!rt&&!Rt;return typeof f=="object"?{...f,enabled:ft}:{enabled:ft}}}),nj=F.createContext(null),Vw="button",rj="Draggable";function sj(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const a=ec(rj),{activators:u,activatorEvent:h,active:f,activeNodeRect:m,ariaDescribedById:v,draggableNodes:w,over:I}=F.useContext(Xh),{role:S=Vw,roleDescription:V="draggable",tabIndex:P=0}=i??{},N=(f==null?void 0:f.id)===e,q=F.useContext(N?Cb:nj),[U,H]=hh(),[J,Y]=hh(),te=$4(u,e),C=Nu(n);ms(()=>(w.set(e,{id:e,key:a,node:U,activatorNode:J,data:C}),()=>{const x=w.get(e);x&&x.key===a&&w.delete(e)}),[w,e]);const T=F.useMemo(()=>({role:S,tabIndex:P,"aria-disabled":r,"aria-pressed":N&&S===Vw?!0:void 0,"aria-roledescription":V,"aria-describedby":v.draggable}),[r,S,P,N,V,v.draggable]);return{active:f,activatorEvent:h,activeNodeRect:m,attributes:T,isDragging:N,listeners:r?void 0:te,node:U,over:I,setNodeRef:H,setActivatorNodeRef:Y,transform:q}}function ij(){return F.useContext(Ab)}const oj="Droppable",aj={timeout:25};function lj(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const a=ec(oj),{active:u,dispatch:h,over:f,measureDroppableContainers:m}=F.useContext(Xh),v=F.useRef({disabled:n}),w=F.useRef(!1),I=F.useRef(null),S=F.useRef(null),{disabled:V,updateMeasurementsFor:P,timeout:N}={...aj,...i},q=Nu(P??r),U=F.useCallback(()=>{if(!w.current){w.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{m(Array.isArray(q.current)?q.current:[q.current]),S.current=null},N)},[N]),H=Yh({callback:U,disabled:V||!u}),J=F.useCallback((T,x)=>{H&&(x&&(H.unobserve(x),w.current=!1),T&&H.observe(T))},[H]),[Y,te]=hh(J),C=Nu(e);return F.useEffect(()=>{!H||!Y.current||(H.disconnect(),w.current=!1,H.observe(Y.current))},[Y,H]),F.useEffect(()=>(h({type:Kt.RegisterDroppable,element:{id:r,key:a,disabled:n,node:Y,rect:I,data:C}}),()=>h({type:Kt.UnregisterDroppable,key:a,id:r})),[r]),F.useEffect(()=>{n!==v.current.disabled&&(h({type:Kt.SetDroppableDisabled,id:r,key:a,disabled:n}),v.current.disabled=n)},[r,a,n,h]),{active:u,rect:I,isOver:(f==null?void 0:f.id)===r,node:Y,over:f,setNodeRef:te}}function iy(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function uj(t,e){return t.reduce((n,r,i)=>{const a=e.get(r);return a&&(n[i]=a),n},Array(t.length))}function Cd(t){return t!==null&&t>=0}function cj(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function dj(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Pb=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const a=iy(e,r,n),u=e[i],h=a[i];return!h||!u?null:{x:h.left-u.left,y:h.top-u.top,scaleX:h.width/u.width,scaleY:h.height/u.height}},Rd={scaleX:1,scaleY:1},Nb=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:a,overIndex:u}=t;const h=(e=a[n])!=null?e:r;if(!h)return null;if(i===n){const m=a[u];return m?{x:0,y:n<u?m.top+m.height-(h.top+h.height):m.top-h.top,...Rd}:null}const f=hj(a,i,n);return i>n&&i<=u?{x:0,y:-h.height-f,...Rd}:i<n&&i>=u?{x:0,y:h.height+f,...Rd}:{x:0,y:0,...Rd}};function hj(t,e,n){const r=t[e],i=t[e-1],a=t[e+1];return r?n<e?i?r.top-(i.top+i.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const Db="Sortable",Ob=Gt.createContext({activeIndex:-1,containerId:Db,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Pb,disabled:{draggable:!1,droppable:!1}});function Mb(t){let{children:e,id:n,items:r,strategy:i=Pb,disabled:a=!1}=t;const{active:u,dragOverlay:h,droppableRects:f,over:m,measureDroppableContainers:v}=ij(),w=ec(Db,n),I=h.rect!==null,S=F.useMemo(()=>r.map(te=>typeof te=="object"&&"id"in te?te.id:te),[r]),V=u!=null,P=u?S.indexOf(u.id):-1,N=m?S.indexOf(m.id):-1,q=F.useRef(S),U=!cj(S,q.current),H=N!==-1&&P===-1||U,J=dj(a);ms(()=>{U&&V&&v(S)},[U,S,V,v]),F.useEffect(()=>{q.current=S},[S]);const Y=F.useMemo(()=>({activeIndex:P,containerId:w,disabled:J,disableTransforms:H,items:S,overIndex:N,useDragOverlay:I,sortedRects:uj(S,f),strategy:i}),[P,w,J.draggable,J.droppable,H,S,N,f,I,i]);return Gt.createElement(Ob.Provider,{value:Y},e)}const fj=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return iy(n,r,i).indexOf(e)},pj=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:a,newIndex:u,previousItems:h,previousContainerId:f,transition:m}=t;return!m||!r||h!==a&&i===u?!1:n?!0:u!==i&&e===f},mj={duration:200,easing:"ease"},Lb="transform",gj=Ou.Transition.toString({property:Lb,duration:0,easing:"linear"}),yj={roleDescription:"sortable"};function vj(t){let{disabled:e,index:n,node:r,rect:i}=t;const[a,u]=F.useState(null),h=F.useRef(n);return ms(()=>{if(!e&&n!==h.current&&r.current){const f=i.current;if(f){const m=wl(r.current,{ignoreTransform:!0}),v={x:f.left-m.left,y:f.top-m.top,scaleX:f.width/m.width,scaleY:f.height/m.height};(v.x||v.y)&&u(v)}}n!==h.current&&(h.current=n)},[e,n,r,i]),F.useEffect(()=>{a&&u(null)},[a]),a}function _j(t){let{animateLayoutChanges:e=pj,attributes:n,disabled:r,data:i,getNewIndex:a=fj,id:u,strategy:h,resizeObserverConfig:f,transition:m=mj}=t;const{items:v,containerId:w,activeIndex:I,disabled:S,disableTransforms:V,sortedRects:P,overIndex:N,useDragOverlay:q,strategy:U}=F.useContext(Ob),H=wj(r,S),J=v.indexOf(u),Y=F.useMemo(()=>({sortable:{containerId:w,index:J,items:v},...i}),[w,i,J,v]),te=F.useMemo(()=>v.slice(v.indexOf(u)),[v,u]),{rect:C,node:T,isOver:x,setNodeRef:O}=lj({id:u,data:Y,disabled:H.droppable,resizeObserverConfig:{updateMeasurementsFor:te,...f}}),{active:D,activatorEvent:L,activeNodeRect:R,attributes:Ue,setNodeRef:et,listeners:Ze,isDragging:re,over:G,setActivatorNodeRef:he,transform:ue}=sj({id:u,data:Y,attributes:{...yj,...n},disabled:H.draggable}),z=$V(O,et),Z=!!D,de=Z&&!V&&Cd(I)&&Cd(N),Ee=!q&&re,Re=Ee&&de?ue:null,Ie=de?Re??(h??U)({rects:P,activeNodeRect:R,activeIndex:I,overIndex:N,index:J}):null,Ve=Cd(I)&&Cd(N)?a({id:u,items:v,activeIndex:I,overIndex:N}):J,je=D==null?void 0:D.id,Se=F.useRef({activeId:je,items:v,newIndex:Ve,containerId:w}),Ut=v!==Se.current.items,Tt=e({active:D,containerId:w,isDragging:re,isSorting:Z,id:u,index:J,items:v,newIndex:Se.current.newIndex,previousItems:Se.current.items,previousContainerId:Se.current.containerId,transition:m,wasDragging:Se.current.activeId!=null}),xn=vj({disabled:!Tt,index:J,node:T,rect:C});return F.useEffect(()=>{Z&&Se.current.newIndex!==Ve&&(Se.current.newIndex=Ve),w!==Se.current.containerId&&(Se.current.containerId=w),v!==Se.current.items&&(Se.current.items=v)},[Z,Ve,w,v]),F.useEffect(()=>{if(je===Se.current.activeId)return;if(je!=null&&Se.current.activeId==null){Se.current.activeId=je;return}const Yn=setTimeout(()=>{Se.current.activeId=je},50);return()=>clearTimeout(Yn)},[je]),{active:D,activeIndex:I,attributes:Ue,data:Y,rect:C,index:J,newIndex:Ve,items:v,isOver:x,isSorting:Z,isDragging:re,listeners:Ze,node:T,overIndex:N,over:G,setNodeRef:z,setActivatorNodeRef:he,setDroppableNodeRef:O,setDraggableNodeRef:et,transform:xn??Ie,transition:rn()};function rn(){if(xn||Ut&&Se.current.newIndex===J)return gj;if(!(Ee&&!ny(L)||!m)&&(Z||Tt))return Ou.Transition.toString({...m,property:Lb})}}function wj(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function gh(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const Ej=[He.Down,He.Right,He.Up,He.Left],Vb=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:a,over:u,scrollableAncestors:h}}=e;if(Ej.includes(t.code)){if(t.preventDefault(),!n||!r)return;const f=[];a.getEnabled().forEach(w=>{if(!w||w!=null&&w.disabled)return;const I=i.get(w.id);if(I)switch(t.code){case He.Down:r.top<I.top&&f.push(w);break;case He.Up:r.top>I.top&&f.push(w);break;case He.Left:r.left>I.left&&f.push(w);break;case He.Right:r.left<I.left&&f.push(w);break}});const m=r4({collisionRect:r,droppableRects:i,droppableContainers:f});let v=gb(m,"id");if(v===(u==null?void 0:u.id)&&m.length>1&&(v=m[1].id),v!=null){const w=a.get(n.id),I=a.get(v),S=I?i.get(I.id):null,V=I==null?void 0:I.node.current;if(V&&S&&w&&I){const N=Qh(V).some((te,C)=>h[C]!==te),q=jb(w,I),U=Tj(w,I),H=N||!q?{x:0,y:0}:{x:U?r.width-S.width:0,y:U?r.height-S.height:0},J={x:S.left,y:S.top};return H.x&&H.y?J:Du(J,H)}}}};function jb(t,e){return!gh(t)||!gh(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function Tj(t,e){return!gh(t)||!gh(e)||!jb(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const Fb=({id:t,children:e})=>{const{attributes:n,listeners:r,setNodeRef:i,transform:a,transition:u,isDragging:h}=_j({id:t}),f={transform:Ou.Transform.toString(a),transition:u,opacity:h?.5:1};return k.jsx("div",{ref:i,style:f,...n,...r,children:e})},jw=Array.from({length:24},(t,e)=>String(e).padStart(2,"0")),Fw=["00","15","30","45"],jm=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6"],Ij=()=>{const{activeModal:t,closeModal:e}=Hs(),n=t==="timeblock-edit",{timeBlocks:r}=Kg(),[i,a]=F.useState([]),[u,h]=F.useState(!1),[f,m]=F.useState(null),v=fb(ph(Jh,{activationConstraint:{distance:5}}),ph(Zh,{coordinateGetter:Vb}));F.useEffect(()=>{n&&(a(r.sort((N,q)=>(N.order||0)-(q.order||0))),m(null),h(!1))},[n,r]);const w=()=>{if(i.length>=10)return;const N={id:`new-${Date.now()}`,start:"09:00",end:"10:00",color:jm[i.length%jm.length],order:i.length};a([...i,N])},I=async N=>{if(!N.startsWith("new-")){if(!confirm(""))return;try{await uL(N)}catch{m("");return}}a(i.filter(q=>q.id!==N))},S=(N,q)=>{a(i.map(U=>U.id===N?{...U,...q}:U))},V=N=>{const{active:q,over:U}=N;U&&q.id!==U.id&&a(H=>{const J=H.findIndex(te=>te.id===q.id),Y=H.findIndex(te=>te.id===U.id);return iy(H,J,Y)})},P=async()=>{h(!0),m(null);try{for(const q of i){if(!q.start||!q.end)continue;const[U,H]=q.start.split(":").map(Number),[J,Y]=q.end.split(":").map(Number);if(U*60+H>=J*60+Y)throw new Error(`: ${q.start}-${q.end}`)}const N=i.map((q,U)=>{var J;const H={...q,id:(J=q.id)!=null&&J.startsWith("new-")?null:q.id,order:U,name:`${q.start}-${q.end}`};return lL(H)});await Promise.all(N),document.dispatchEvent(new CustomEvent("timeblocks-updated")),e()}catch(N){m(N.message||""),h(!1)}};return n?k.jsx(Ko,{isOpen:n,onClose:e,title:"",className:"max-w-2xl h-[600px]",children:k.jsxs("div",{className:"flex flex-col h-full",children:[k.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-3 custom-scrollbar",children:[k.jsx(Rb,{sensors:v,collisionDetection:yb,onDragEnd:V,children:k.jsx(Mb,{items:i.map(N=>N.id),strategy:Nb,children:i.map(N=>k.jsx(Fb,{id:N.id,children:k.jsx(bj,{block:N,onDelete:()=>I(N.id),onUpdate:q=>S(N.id,q)})},N.id))})}),i.length<10?k.jsxs("button",{onClick:w,className:"w-full py-4 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl text-gray-400 hover:border-blue-500 hover:text-blue-500 hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-all font-medium text-sm flex items-center justify-center gap-2 group",children:[k.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),""]}):k.jsx("div",{className:"text-center py-4 text-xs text-gray-400",children:"10"}),k.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/40 rounded-lg flex items-center text-sm text-gray-500 dark:text-gray-400",children:[k.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-gray-400 mr-3 shadow-sm"}),k.jsx("span",{className:"font-bold mr-2 text-gray-700 dark:text-gray-300",children:""}),k.jsx("span",{className:"text-xs opacity-80",children:""})]})]}),f&&k.jsx("p",{className:"text-sm text-red-500 text-center mb-4",children:f}),k.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:k.jsx("button",{onClick:P,disabled:u,className:"px-8 py-2.5 bg-gray-900 hover:bg-gray-800 dark:bg-blue-600 dark:hover:bg-blue-500 text-white rounded-lg font-bold text-sm transition-all active:scale-95 shadow-md disabled:bg-gray-400",children:u?"...":""})})]})}):null},bj=({block:t,onDelete:e,onUpdate:n})=>{const[r,i]=F.useState(!1),a=t.start||"09:00",u=t.end||"10:00",[h,f]=a.split(":"),[m,v]=u.split(":");return k.jsxs("div",{className:"flex items-center gap-4 p-2 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-sm group",children:[k.jsxs("div",{className:"relative",children:[k.jsx("button",{onClick:()=>i(!r),className:"w-6 h-6 rounded-full shadow-sm hover:scale-110 active:scale-95 transition-transform ring-2 ring-transparent focus:ring-blue-400 ring-offset-2 dark:ring-offset-gray-900",style:{backgroundColor:t.color||"#3B82F6"},title:""}),r&&k.jsx("div",{className:"absolute top-full left-0 mt-2 z-50 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-xl shadow-2xl p-3 flex gap-2 w-max animate-fade-in-down",children:jm.map(w=>k.jsx("button",{onClick:()=>{n({color:w}),i(!1)},className:"w-6 h-6 rounded-full hover:scale-110 transition-transform ring-2 ring-transparent hover:ring-blue-400",style:{backgroundColor:w}},w))})]}),k.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[k.jsxs("div",{className:"flex items-center gap-1.5",children:[k.jsx(Pd,{options:jw,value:h,onChange:w=>n({start:`${w}:${f}`})}),k.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),k.jsx(Pd,{options:Fw,value:f,onChange:w=>n({start:`${h}:${w}`})})]}),k.jsx("div",{className:"w-4 h-0.5 bg-gray-200 dark:bg-gray-700 rounded-full"}),k.jsxs("div",{className:"flex items-center gap-1.5",children:[k.jsx(Pd,{options:jw,value:m,onChange:w=>n({end:`${w}:${v}`})}),k.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),k.jsx(Pd,{options:Fw,value:v,onChange:w=>n({end:`${m}:${w}`})})]})]}),k.jsx("button",{onClick:e,className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"",children:k.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},Pd=({options:t,value:e,onChange:n})=>k.jsx("select",{value:e,onChange:r=>n(r.target.value),className:"appearance-none px-2 py-1 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm font-mono font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-100 dark:focus:ring-blue-900 outline-none cursor-pointer",children:t.map(r=>k.jsx("option",{value:r,children:r},r))}),kj=()=>{const{activeModal:t,modalData:e,closeModal:n}=Hs(),r=t==="workspace-edit",i=e,a=!!(i!=null&&i.id),[u,h]=F.useState(""),[f,m]=F.useState(!1),[v,w]=F.useState(null);F.useEffect(()=>{r&&(h((i==null?void 0:i.name)||""),w(null),m(!1))},[r,i]);const I=F.useCallback(async()=>{const V=u.trim();if(!V){w("");return}if(HM().some(q=>q.name===V&&q.id!==(i==null?void 0:i.id))){w("");return}m(!0),w(null);try{if(a&&(i!=null&&i.id))await ZM(i.id,V);else{const q=await QM(V);q!=null&&q.id&&KM(q.id)}n()}catch(q){w(": "+(q.message||"")),m(!1)}},[u,a,i,n]),S=V=>{V.key==="Enter"&&!V.nativeEvent.isComposing&&I()};return r?k.jsx(Ko,{isOpen:r,onClose:n,className:"max-w-md",children:k.jsxs("div",{className:"flex flex-col gap-6",children:[k.jsxs("div",{children:[k.jsx("h2",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:a?"":""}),k.jsx("input",{type:"text",value:u,onChange:V=>h(V.target.value),onKeyDown:S,placeholder:"...",className:"w-full text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600",autoFocus:!0})]}),k.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:a?"":""}),v&&k.jsx("p",{className:"text-sm text-red-500 text-center",children:v}),k.jsxs("div",{className:"flex justify-end items-center pt-4 border-t border-gray-200 dark:border-gray-700 gap-3",children:[k.jsx("button",{onClick:n,disabled:f,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:""}),k.jsx("button",{onClick:I,disabled:f,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95",children:f?a?"...":"...":a?"":""})]})]})}):null},Sj=()=>k.jsxs(k.Fragment,{children:[k.jsx(PV,{}),k.jsx(UV,{}),k.jsx(SV,{}),k.jsx(xV,{}),k.jsx(kj,{}),k.jsx(kV,{}),k.jsx(Ij,{})]}),ef=Qg(t=>({filterType:"inbox",targetId:null,query:"",setFilter:(e,n=null)=>t({filterType:e,targetId:n,query:""}),setSearchQuery:e=>t({query:e,filterType:"search"}),clearFilter:()=>t({filterType:"all",targetId:null,query:""})})),xj=[{id:"inbox",name:"",icon:"",color:"text-blue-500"},{id:"today",name:"",icon:"",color:"text-green-500"},{id:"upcoming",name:"",icon:"",color:"text-purple-500"},{id:"important",name:"",icon:"",color:"text-amber-400"},{id:"all",name:"",icon:"",color:"text-gray-500"}],Aj=()=>{const{filterType:t,setFilter:e}=ef();return k.jsx("ul",{className:"space-y-0.5",children:xj.map(n=>{const r=t===n.id;return k.jsx("li",{children:k.jsxs("button",{onClick:()=>e(n.id),className:qr("w-full flex items-center px-3 py-1.5 text-sm rounded-md transition-colors text-left gap-3",r?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[k.jsx("span",{className:n.color,children:n.icon}),k.jsx("span",{children:n.name})]})},n.id)})})},Cj=()=>{const{labels:t,loading:e}=Yg(),{filterType:n,targetId:r,setFilter:i}=ef();return e?k.jsx("div",{className:"px-4 py-2 text-xs text-gray-400",children:"Loading labels..."}):t.length===0?k.jsx("div",{className:"px-4 py-2 text-xs text-gray-400",children:"No labels found."}):k.jsx("ul",{className:"space-y-0.5",children:t.map(a=>{const u=n==="label"&&r===a.id;return k.jsx("li",{children:k.jsxs("button",{onClick:()=>i("label",a.id),className:qr("w-full flex items-center px-3 py-1.5 text-sm rounded-md transition-colors text-left gap-2 group",u?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[k.jsx("span",{className:"w-3 h-3 rounded-full opacity-75 group-hover:opacity-100",style:{backgroundColor:a.color||"#9ca3af"}}),k.jsx("span",{className:"truncate",children:a.name})]})},a.id)})})},Rj=()=>{const{projects:t,loading:e}=Hh(),n=fb(ph(Jh),ph(Zh,{coordinateGetter:Vb})),r=i=>{const{active:a,over:u}=i;a.id!==(u==null?void 0:u.id)&&console.log("Dragged",a.id,"to",u==null?void 0:u.id)};return e?k.jsx("div",{className:"p-4 text-xs text-gray-400",children:"Loading projects..."}):t.length===0?k.jsx("div",{className:"p-4 text-xs text-gray-400",children:"No projects found."}):k.jsx(Rb,{sensors:n,collisionDetection:yb,onDragEnd:r,children:k.jsx(Mb,{items:t.map(i=>i.id),strategy:Nb,children:k.jsx("div",{className:"space-y-0.5 p-2",children:t.map(i=>k.jsx(Fb,{id:i.id,children:k.jsx(Pj,{project:i})},i.id))})})})},Pj=({project:t})=>{const{filterType:e,targetId:n,setFilter:r}=ef(),i=e==="project"&&n===t.id;return k.jsx("div",{onClick:()=>r("project",t.id),className:qr("group flex items-center justify-between px-2 py-1.5 rounded-md cursor-pointer transition-colors select-none",i?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"),children:k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{className:"text-gray-400 text-xs",children:"#"}),k.jsx("span",{className:"text-sm truncate",children:t.name})]})})},Nj=({children:t})=>{const{sidebarWidth:e,isSidebarOpen:n,sidebarDensity:r}=Jg(),i={compact:"p-1",normal:"p-2",comfortable:"p-4",spacious:"p-6"}[r];return n?k.jsx("aside",{className:qr("h-full bg-gray-50 dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",i),style:{width:`${e}px`},children:k.jsxs("div",{className:"flex flex-col h-full overflow-y-auto",children:[k.jsx("div",{className:"mb-4",children:k.jsx("h2",{className:"text-xl font-bold px-2 text-gray-800 dark:text-gray-100",children:"TaskMg"})}),t]})}):null},zw=({title:t,children:e,defaultExpanded:n=!0})=>{const[r,i]=F.useState(n);return k.jsxs("div",{className:"mb-2",children:[k.jsxs("button",{onClick:()=>i(!r),className:"flex items-center w-full px-2 py-1 text-xs font-semibold text-gray-500 uppercase hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[k.jsx("svg",{className:qr("w-3 h-3 mr-1 transition-transform",r?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),t]}),r&&k.jsx("div",{className:"mt-1",children:e})]})},Dj=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!0),i=Ws();return F.useEffect(()=>{if(!i){r(!1);return}const a=CL(i,u=>{e(u),r(!1)});return()=>a()},[i]),{tasks:t,loading:n}},Oj=({className:t,onCancel:e,placeholder:n="..."})=>{const[r,i]=F.useState(""),[a,u]=F.useState(!1),h=async m=>{if(!(!r.trim()||a)){u(!0);try{await QI({title:r}),i("")}catch(v){console.error(v),alert("Failed to add task")}finally{u(!1)}}},f=m=>{m.key==="Enter"&&!m.shiftKey&&!m.nativeEvent.isComposing&&(m.preventDefault(),h()),m.key==="Escape"&&(e==null||e())};return k.jsxs("div",{className:qr("bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm p-3",t),children:[k.jsx("input",{type:"text",autoFocus:!0,className:"w-full bg-transparent text-sm text-gray-800 dark:text-gray-100 placeholder-gray-400 outline-none mb-2",placeholder:n,value:r,onChange:m=>i(m.target.value),onKeyDown:f,disabled:a}),k.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100 dark:border-gray-700/50",children:[k.jsx("div",{className:"flex gap-2",children:k.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700",children:k.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),k.jsxs("div",{className:"flex gap-2",children:[e&&k.jsx("button",{type:"button",onClick:e,disabled:a,className:"px-3 py-1.5 text-xs font-medium text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition",children:""}),k.jsx("button",{onClick:()=>h(),disabled:!r.trim()||a,className:"px-3 py-1.5 text-xs font-bold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded transition",children:a?"...":""})]})]})]})},Mj=()=>{const[t,e]=F.useState(!1);return t?k.jsx("div",{className:"mb-4",children:k.jsx(Oj,{onCancel:()=>e(!1)})}):k.jsxs("button",{onClick:()=>e(!0),className:"group flex items-center gap-2 w-full text-left py-2 px-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-2",children:[k.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-transparent group-hover:bg-blue-100/50 dark:group-hover:bg-blue-900/30 transition-colors",children:k.jsx("svg",{className:"w-4 h-4 text-inherit",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),k.jsx("span",{className:"text-sm font-medium",children:""})]})},Lj=({task:t})=>{const e=t.status==="completed",{openModal:n}=Hs(),r=async i=>{i.stopPropagation(),t.id&&await wL(t.id,t.status||"todo")};return k.jsxs("li",{onClick:()=>n("task-detail",t),className:"group flex items-start gap-3 p-3 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700/50 rounded-xl hover:shadow-sm hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-200 cursor-pointer",children:[k.jsx("button",{onClick:r,className:qr("mt-0.5 w-5 h-5 rounded-full border flex items-center justify-center transition-colors shrink-0",e?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-blue-400 text-transparent"),"aria-label":e?"Mark as incomplete":"Mark as complete",children:k.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),k.jsxs("div",{className:"flex-1 min-w-0",children:[k.jsx("div",{className:qr("text-sm text-gray-800 dark:text-gray-200 break-words",e&&"line-through text-gray-400 dark:text-gray-500"),children:t.title}),t.description&&k.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:t.description}),k.jsx("div",{className:"flex items-center gap-2 mt-2",children:t.dueDate&&k.jsxs("span",{className:qr("text-xs flex items-center gap-1",e?"text-gray-400":"text-red-500"),children:[" ",typeof t.dueDate=="string"?t.dueDate:"Date"]})})]})]})},Vj=()=>{const{tasks:t,loading:e}=Dj();if(e)return k.jsx("div",{className:"flex items-center justify-center h-full",children:k.jsx("div",{className:"text-gray-400 text-sm",children:"Loading tasks..."})});const n=[...t].sort((r,i)=>0);return k.jsxs("div",{className:"space-y-2 pb-20",children:[k.jsx("div",{className:"mb-4",children:k.jsx(Mj,{})}),t.length===0?k.jsx("div",{className:"text-center text-gray-400 py-10",children:k.jsx("p",{className:"text-sm",children:"No tasks found"})}):k.jsx("ul",{className:"space-y-2",children:n.map(r=>k.jsx(Lj,{task:r},r.id))})]})},jj=()=>{const{toggleSidebar:t}=Jg(),{openModal:e}=Hs(),{filterType:n,targetId:r}=ef(),{projects:i}=Hh(),{labels:a}=Yg(),u=()=>{var h,f;if(n==="project")return((h=i.find(m=>m.id===r))==null?void 0:h.name)||"Project";if(n==="label")return((f=a.find(m=>m.id===r))==null?void 0:f.name)||"Label";switch(n){case"inbox":return"Inbox";case"today":return"Today";case"upcoming":return"Upcoming";case"important":return"Important";case"all":return"All Tasks";default:return"TaskMg"}};return k.jsxs("div",{className:"h-full flex overflow-hidden bg-white dark:bg-gray-900 text-gray-800 dark:text-white",children:[k.jsx(Sj,{}),k.jsx(Nj,{children:k.jsxs("div",{className:"flex flex-col gap-4",children:[k.jsx(Aj,{}),k.jsx(zw,{title:"Projects",children:k.jsx(Rj,{})}),k.jsx(zw,{title:"Labels",defaultExpanded:!1,children:k.jsx(Cj,{})})]})}),k.jsxs("main",{className:"flex-1 flex flex-col relative h-full overflow-hidden",children:[k.jsxs("header",{className:"h-14 border-b border-gray-200 dark:border-gray-800 flex items-center px-4 justify-between bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-10 sticky top-0",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("button",{onClick:t,className:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:k.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),k.jsx("h1",{className:"font-bold text-lg",children:u()})]}),k.jsx("div",{className:"flex items-center gap-2",children:k.jsx("button",{onClick:()=>e("settings"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Settings",children:k.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]}),k.jsx("div",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar",children:k.jsx("div",{className:"max-w-3xl mx-auto",children:k.jsx(Vj,{})})})]})]})},Fj=new _S,zb=document.getElementById("app");if(!zb)throw new Error("Failed to find the root element");xS.createRoot(zb).render(k.jsx(Gt.StrictMode,{children:k.jsx(ES,{client:Fj,children:k.jsx(jj,{})})}));
