var ga=Object.defineProperty;var ma=(e,r,a)=>r in e?ga(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a;var $=(e,r,a)=>ma(e,typeof r!="symbol"?r+"":r,a);import{g as tr,i as ur,a as gr,b as mr,s as At,c as hr,T as Te,q as xe,o as ht,d as B,e as je,f as J,u as De,h as se,j as ie,k as ue,l as pr,m as xr,n as Ft,p as Ot,r as fr,w as pt,t as Be,v as br,E as yr,x as kr}from"./firebase-BS_URcMO.js";import{r as x,j as t,c as Ee,R as q,u as wr,b as ha,a as Bt,d as pa,Q as xa}from"./react-vendor-B_32mifP.js";import{t as fa,b as ba,p as Je,u as vr,d as ya,e as ka,f as _,g as Z,h as ge,j as de,k as ut,l as jr,r as _r,m as wa,q as va,v as Rt,C as Pt,w as xt,x as ke,y as Wt,K as $t,P as ft,D as bt,z as yt,S as kt,A as wt,B as ja,E as vt,F as Xe,T as _a,G as Na}from"./vendor-BCs5uv3r.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();const Ca={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function Sa(){if(typeof window<"u"&&window.GLOBAL_FIREBASE_CONFIG&&window.GLOBAL_FIREBASE_CONFIG.apiKey)return window.GLOBAL_FIREBASE_CONFIG;try{const e=Ca;if(e&&e.VITE_FIREBASE_API_KEY)return{apiKey:e.VITE_FIREBASE_API_KEY,authDomain:e.VITE_FIREBASE_AUTH_DOMAIN,projectId:e.VITE_FIREBASE_PROJECT_ID,storageBucket:e.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:e.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:e.VITE_FIREBASE_APP_ID,measurementId:e.VITE_FIREBASE_MEASUREMENT_ID}}catch{}if(typeof __firebase_config<"u")try{return typeof __firebase_config=="object"?__firebase_config:JSON.parse(__firebase_config)}catch(e){return console.error("[Firebase] Config parse failed (legacy):",e),null}return console.error("[Firebase] All config sources failed. Check index.html injection."),null}const be=Sa();if(!(be!=null&&be.apiKey)||!(be!=null&&be.projectId)){const e="[Firebase] Configuration is missing required fields (apiKey, projectId). Application cannot start.";throw console.error(e,be),new Error(e)}let Tt;tr().length>0?Tt=tr()[0]:Tt=ur(be);const Nr=Tt,A=gr(Nr),L=mr(Nr),Ta=Object.freeze(Object.defineProperty({__proto__:null,EmailAuthProvider:yr,Timestamp:Te,addDoc:se,collection:B,deleteDoc:Be,doc:J,getAuth:gr,getDocs:ue,getFirestore:mr,initializeApp:ur,limit:pr,linkWithCredential:kr,onAuthStateChanged:Ft,onSnapshot:je,orderBy:ht,query:xe,serverTimestamp:ie,setDoc:br,signInAnonymously:hr,signInWithCustomToken:xr,signInWithEmailAndPassword:At,signOut:Ot,updateDoc:De,updatePassword:fr,writeBatch:pt},Symbol.toStringTag,{value:"Module"})),Da=()=>{const[e,r]=x.useState(""),[a,n]=x.useState(""),[s,o]=x.useState(!1),[i,l]=x.useState(null),c=async g=>{g.preventDefault(),l(null),o(!0);try{await At(A,e,a)}catch(u){let m="Login failed.";switch(u.code){case"auth/invalid-email":m="Invalid email format.";break;case"auth/user-disabled":m="User disabled.";break;case"auth/user-not-found":m="User not found.";break;case"auth/wrong-password":m="Wrong password.";break;case"auth/too-many-requests":m="Too many requests. Try again later.";break;case"auth/network-request-failed":m="Network error.";break}l(m)}finally{o(!1)}},d=async()=>{l(null),o(!0);try{await hr(A)}catch(g){l("Guest login failed: "+g.message)}finally{o(!1)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-premium-gradient p-4 antialiased",children:t.jsxs("div",{className:"max-w-md w-full p-6 sm:p-8 bg-white/70 dark:bg-gray-800/60 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 rounded-[2rem] shadow-2xl transition-all duration-300",children:[t.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[t.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-3xl shadow-lg mb-6 animate-float",children:t.jsx("img",{src:"/images/web-app-manifest-512x512.png",alt:"Logo",className:"h-12 w-12"})}),t.jsxs("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:["Task",t.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"ç©¶æ¥µã®ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹"})]}),t.jsxs("form",{onSubmit:c,className:"space-y-5 sm:space-y-6",children:[i&&t.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium animate-in fade-in slide-in-from-top-4 duration-300 shadow-sm",children:i}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"login-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Email"}),t.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:g=>r(g.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"mail@example.com"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"login-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Password"}),t.jsx("input",{id:"login-password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:g=>n(g.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),t.jsx("button",{type:"submit",disabled:s,className:"btn-premium w-full py-4 text-lg shadow-lg hover:shadow-xl active:scale-[0.98] transition-all",children:s?"ã‚µã‚¤ãƒ³ã‚¤ãƒ³ä¸­...":"ã‚µã‚¤ãƒ³ã‚¤ãƒ³"})]}),t.jsxs("div",{className:"mt-8",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-200/50 dark:border-gray-700/50"})}),t.jsx("div",{className:"relative flex justify-center text-xs",children:t.jsx("span",{className:"px-3 bg-transparent text-gray-400 uppercase tracking-widest font-bold",children:"OR"})})]}),t.jsxs("button",{onClick:d,disabled:s,className:"mt-8 w-full py-3.5 bg-gray-100/50 hover:bg-gray-200/70 active:bg-gray-300 dark:bg-gray-700/30 dark:hover:bg-gray-600/50 dark:active:bg-gray-600 text-gray-700 dark:text-gray-200 font-bold rounded-2xl transition-all active:scale-95 flex items-center justify-center gap-3 border border-transparent hover:border-gray-300 dark:hover:border-gray-600",children:[t.jsx("span",{className:"text-xl",children:"ğŸ•µï¸"})," ã‚²ã‚¹ãƒˆã¨ã—ã¦åˆ©ç”¨"]})]})]})})},Ea={success:3e3,info:4e3,error:6e3},at=new Map,La=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,11),lt=Ee(e=>({toasts:[],addToast:(r,a="info")=>{const n=La();e(i=>({toasts:[...i.toasts,{id:n,message:r,type:a}]}));const s=Ea[a],o=setTimeout(()=>{e(i=>({toasts:i.toasts.filter(l=>l.id!==n)})),at.delete(n)},s);at.set(n,o)},removeToast:r=>{const a=at.get(r);a&&(clearTimeout(a),at.delete(r)),e(n=>({toasts:n.toasts.filter(s=>s.id!==r)}))}})),O={success:e=>lt.getState().addToast(e,"success"),error:e=>lt.getState().addToast(e,"error"),info:e=>lt.getState().addToast(e,"info")};function C(...e){return fa(ba(e))}const Ma=()=>{const{toasts:e,removeToast:r}=lt();return e.length===0?null:t.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(a=>t.jsx("div",{onClick:()=>r(a.id),className:C("pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-xl shadow border text-sm font-medium cursor-pointer hover:opacity-90",a.type==="success"&&"bg-white dark:bg-gray-800 text-green-600 dark:text-green-400 border-green-200 dark:border-green-900",a.type==="error"&&"bg-white dark:bg-gray-800 text-red-600 dark:text-red-400 border-red-200 dark:border-red-900",a.type==="info"&&"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700"),children:t.jsxs("div",{className:"flex items-start gap-3",children:[a.type==="success"&&t.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),a.type==="error"&&t.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.type==="info"&&t.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("p",{className:"leading-5 flex-1",children:a.message}),t.jsx("button",{onClick:n=>{n.stopPropagation(),r(a.id)},className:"flex-shrink-0 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"é–‰ã˜ã‚‹",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})},a.id))})},ae=Ee()(Je(e=>({themeMode:"system",fontEn:"Inter",fontJp:"M PLUS 2",fontSize:"md",density:"normal",language:"ja",customDurations:[15,30,45,60,75,90,120],setThemeMode:r=>e({themeMode:r}),setFontEn:r=>e({fontEn:r}),setFontJp:r=>e({fontJp:r}),setFontSize:r=>e({fontSize:r}),setDensity:r=>e({density:r}),setLanguage:r=>e(a=>{const s={ja:{density:"normal",fontSize:"md"},en:{density:"comfortable",fontSize:"base"}}[r];return{language:r,density:s.density,fontSize:s.fontSize}}),setCustomDurations:r=>e({customDurations:r.sort((a,n)=>a-n)})}),{name:"app-settings",partialize:e=>({themeMode:e.themeMode,fontEn:e.fontEn,fontJp:e.fontJp,fontSize:e.fontSize,density:e.density,language:e.language,customDurations:e.customDurations})})),Ia={dashboard:"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",inbox:"ã‚¤ãƒ³ãƒœãƒƒã‚¯ã‚¹",today:"ä»Šæ—¥",upcoming:"ä»Šå¾Œã®äºˆå®š",completed:"å®Œäº†æ¸ˆã¿",trash:"ã‚´ãƒŸç®±",projects:"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ",project:"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ",labels:"ãƒ©ãƒ™ãƒ«",filters:"ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ«ã‚¿",timeblocks:"ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯",durations:"æ‰€è¦æ™‚é–“",targets:"ç›®æ¨™",workspaces:"ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹",settings:"è¨­å®š",edit:"ç·¨é›†",active:"é¸æŠä¸­",add_task:"ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ",search:"æ¤œç´¢",no_tasks:"ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã›ã‚“",loading:"èª­ã¿è¾¼ã¿ä¸­...",saving:"ä¿å­˜ä¸­...",done:"å®Œäº†",error:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",backup_restore:"ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨å¾©å…ƒ",general:"ä¸€èˆ¬",appearance:"å¤–è¦³",account:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ",language:"è¨€èª",important:"é‡è¦",all_tasks:"ã™ã¹ã¦",add:"è¿½åŠ ",close:"é–‰ã˜ã‚‹",clear:"ã‚¯ãƒªã‚¢",backward_map:"ãƒãƒƒã‚¯ãƒ¯ãƒ¼ãƒ‰",woop_board:"WOOP",okr_tree:"OKR",msg:{task:{create_success:"ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã—ã¾ã—ãŸ",create_fail:"ã‚¿ã‚¹ã‚¯ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ",update_success:"ã‚¿ã‚¹ã‚¯ã‚’æ›´æ–°ã—ã¾ã—ãŸ",update_fail:"ã‚¿ã‚¹ã‚¯ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ",delete_success:"ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¾ã—ãŸ",delete_fail:"ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ",complete_success:"ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã—ã¾ã—ãŸ ğŸ‰",status_update_fail:"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ",move_fail:"ã‚¿ã‚¹ã‚¯ã®ç§»å‹•ã«å¤±æ•—ã—ã¾ã—ãŸ"},auth:{login_success:"ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ",logout_success:"ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ"},dnd:{reorderFailed:"ä¸¦ã³æ›¿ãˆã«å¤±æ•—ã—ã¾ã—ãŸ"},project:{reorder_fail:"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸¦ã³æ›¿ãˆã«å¤±æ•—ã—ã¾ã—ãŸ"},confirm_delete:`æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ
å‰Šé™¤ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯å…ƒã«æˆ»ã›ã¾ã›ã‚“ã€‚`},delete:"å‰Šé™¤",timeblock:"ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯",filter:"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼",sidebar:{add_workspace:"ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¿½åŠ ",search_placeholder:"æ¤œç´¢ (/)",target_wizard:"ç›®æ¨™è¨­è¨ˆã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰",target_dashboard:"ç›®æ¨™ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",framework_wiki:"ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯Wiki",unassigned:"æœªå®š",toggle_collapse:"ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’é–‰ã˜ã‚‹",toggle_expand:"ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’é–‹ã",resizer_label:"ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®å¹…èª¿æ•´",resizer_hint:"ãƒ‰ãƒ©ãƒƒã‚°ã¾ãŸã¯çŸ¢å°ã‚­ãƒ¼ã§ãƒªã‚µã‚¤ã‚º",menu_open:"ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã",reorder_section:"ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä¸¦ã³æ›¿ãˆ",no_projects:"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“",duration_format:"{min}åˆ†"},modal:{task_title_placeholder:"ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚¤ãƒˆãƒ«",filter_name_placeholder:"ä¾‹: ä»Šé€±ã®é‡è¦ã‚¿ã‚¹ã‚¯",memo_markdown:"ãƒ¡ãƒ¢ (Markdown)",edit:"ç·¨é›†",preview:"ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼",schedule:"ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«",due_date:"æœŸé™æ—¥",recurrence:"ç¹°ã‚Šè¿”ã—",recurrence_days:"ç¹°ã‚Šè¿”ã™æ›œæ—¥",time_block:"æ™‚é–“å¸¯",duration:"æ‰€è¦æ™‚é–“",no_duration:"æŒ‡å®šãªã—",no_project:"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã—",cancel:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«",save:"ä¿å­˜",create:"ä½œæˆ",ok:"OK",delete:"å‰Šé™¤",delete_confirm:"æœ¬å½“ã«ã“ã®ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ",no_memo:"ãƒ¡ãƒ¢ãŒã‚ã‚Šã¾ã›ã‚“",workspace_edit_title:"ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åã®å¤‰æ›´",workspace_create_title:"æ–°è¦ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹",workspace_name_label:"ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å",workspace_name_placeholder:"ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åã‚’å…¥åŠ›...",workspace_desc_edit:"ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®åå‰ã‚’å¤‰æ›´ã—ã¾ã™ã€‚",workspace_desc_create:"æ–°ã—ã„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ã‚¿ã‚¹ã‚¯ã‚’å€‹åˆ¥ã«ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚",label_name:"ãƒ©ãƒ™ãƒ«å",label_name_placeholder:"ãƒ©ãƒ™ãƒ«å",label_create_placeholder:"æ–°ã—ã„ãƒ©ãƒ™ãƒ«å",project_name:"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå",project_name_placeholder:"åå‰ã‚’å…¥åŠ›...",project_delete_confirm:"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€Œ{name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ",label_delete_confirm:"ãƒ©ãƒ™ãƒ«ã€Œ{name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ",theme_color:"ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼",delete_label:"ãƒ©ãƒ™ãƒ«ã‚’å‰Šé™¤",delete_project:"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å‰Šé™¤"},task_detail:{recurrence_label:"ç¹°ã‚Šè¿”ã—",recurrence_days:"ç¹°ã‚Šè¿”ã™æ›œæ—¥",time_block_label:"æ™‚é–“å¸¯",time_block_unspecified:"æœªå®š",duration_label:"æ‰€è¦æ™‚é–“",duration_none:"æŒ‡å®šãªã—",project_label:"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ",project_none:"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã—",due_date_label:"æœŸé™æ—¥",schedule_label:"ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«",title_placeholder:"ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚¤ãƒˆãƒ«",delete_button:"å‰Šé™¤"},time_block:{add_button:"æ™‚é–“å¸¯ã‚’è¿½åŠ ",max_limit:"æœ€å¤§10å€‹ã¾ã§ç™»éŒ²ã§ãã¾ã™",unspecified:"æœªå®š",default_zone_desc:"ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¾ãƒ¼ãƒ³",change_color:"è‰²ã‚’å¤‰æ›´",error_invalid_time:"æ™‚é–“è¨­å®šãŒä¸æ­£ã§ã™: {start} ï½ {end}",error_overlap:"æ™‚é–“ãŒé‡è¤‡ã—ã¦ã„ã¾ã™: [{range1}] ã¨ [{range2}]",time_select:"æ™‚é–“ã‚’é¸æŠ",delete_confirm:"ã“ã®æ™‚é–“å¸¯ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ",settings_title:"æ™‚é–“å¸¯è¨­å®š"},recurrence:{none:"ãªã—",daily:"æ¯æ—¥",weekdays:"å¹³æ—¥",weekly:"æ¯é€±",monthly:"æ¯æœˆ"},days:{sun:"æ—¥",mon:"æœˆ",tue:"ç«",wed:"æ°´",thu:"æœ¨",fri:"é‡‘",sat:"åœŸ"},colors:{red:"èµ¤",pink:"ãƒ”ãƒ³ã‚¯",purple:"ç´«",deep_purple:"æ¿ƒã„ç´«",indigo:"è—è‰²",blue:"é’",light_blue:"æ°´è‰²",cyan:"ã‚·ã‚¢ãƒ³",teal:"ãƒ†ã‚£ãƒ¼ãƒ«",green:"ç·‘",light_green:"æ˜ã‚‹ã„ç·‘",lime:"ãƒ©ã‚¤ãƒ ",yellow:"é»„",amber:"ç¥ç€è‰²",orange:"ã‚ªãƒ¬ãƒ³ã‚¸",deep_orange:"æ¿ƒã„ã‚ªãƒ¬ãƒ³ã‚¸",brown:"èŒ¶",grey:"ã‚°ãƒ¬ãƒ¼",blue_grey:"ãƒ–ãƒ«ãƒ¼ã‚°ãƒ¬ãƒ¼"},settings_modal:{title:"è¨­å®š",tabs:{general:"ä¸€èˆ¬è¨­å®š",appearance:"å¤–è¦³ãƒ»è¡¨ç¤º",account:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ",advanced:"é«˜åº¦ãªè¨­å®š"},appearance:{theme:"ãƒ†ãƒ¼ãƒ",density:"è¡¨ç¤ºå¯†åº¦",font_size:"æ–‡å­—ã‚µã‚¤ã‚º",fonts:"ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š",font_en:"æ¬§æ–‡ãƒ•ã‚©ãƒ³ãƒˆ",font_jp:"å’Œæ–‡ãƒ•ã‚©ãƒ³ãƒˆ"},backup:{title:"ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨å¾©å…ƒ",description:"ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚¿ã‚¹ã‚¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ãƒ©ãƒ™ãƒ«ã€ç›®æ¨™ã€è¨­å®šãªã©ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚Šã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒã—ãŸã‚Šã§ãã¾ã™ã€‚",create:"ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆ",import:"ã‚¤ãƒ³ãƒãƒ¼ãƒˆ",import_confirm:`ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã‹ï¼Ÿ
æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¿æŒã•ã‚Œã¾ã™ãŒã€é‡è¤‡ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆã‚’é˜²ããŸã‚ä¸€éƒ¨ã®IDãŒå¤‰æ›´ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚`,import_success:`ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚
ã‚¿ã‚¹ã‚¯: {tasks}ä»¶
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: {projects}ä»¶`,import_fail:"ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ãŒæ­£ã—ã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚",create_fail:"ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚"},options:{theme:{light:"ãƒ©ã‚¤ãƒˆ",dark:"ãƒ€ãƒ¼ã‚¯",system:"ã‚·ã‚¹ãƒ†ãƒ "},density:{compact:"ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆ",normal:"é€šå¸¸",comfortable:"ã‚†ã£ãŸã‚Š",spacious:"åºƒã‚"}},language:{title:"è¨€èªè¨­å®š (Language)",description:"UIã®è¨€èªè¨­å®šã‚’å¤‰æ›´ã—ã¾ã™ã€‚"},maintenance:{title:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹",description:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…ã®é‡è¤‡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ¤œå‡ºã—ã€æ•´ç†ã—ã¾ã™ã€‚ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚å®Ÿè¡Œå‰ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚",cleanup_duplicate:"é‡è¤‡ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤ï¼ˆè¦ç¢ºèªï¼‰",confirm_backup:`ã€è­¦å‘Šã€‘é‡è¤‡ã—ãŸã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¾ã™ã€‚
å®Ÿè¡Œå‰ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆã—ã¾ã—ãŸã‹ï¼Ÿ
ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãŒåŒã˜ã‚¿ã‚¹ã‚¯ã®ã†ã¡ã€å¤ã„ã‚‚ã®ã‚’æ®‹ã—ã¦å‰Šé™¤ã—ã¾ã™ï¼‰`,confirm_final:"ã€æœ€çµ‚ç¢ºèªã€‘ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚æœ¬å½“ã«å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ",cleanup_success:"{count} ä»¶ã®é‡è¤‡ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚",cleanup_fail:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {error}"},account:{guest_user:"ã‚²ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼",registered_user:"ç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼",not_logged_in:"ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã¾ã›ã‚“",logout:"ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",logout_confirm:"ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ",persist_account:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æ°¸ç¶šåŒ–",persist_desc:`ç¾åœ¨ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ä¸€æ™‚çš„ãªã‚‚ã®ã§ã™ã€‚
ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç™»éŒ²ã™ã‚‹ã¨ã€åˆ¥ã®ãƒ‡ãƒã‚¤ã‚¹ã§ã‚‚ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å¼•ãç¶™ãã“ã¨ãŒã§ãã¾ã™ã€‚`,register:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç™»éŒ²",registering:"ç™»éŒ²å‡¦ç†ä¸­...",register_success:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¾ã—ãŸï¼",register_fail:"ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ",already_in_use:"ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™",weak_password:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå¼±ã™ãã¾ã™",email_label:"Email",password_label:"Password",hide_password:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’éš ã™",show_password:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¡¨ç¤º",registered_msg:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯æ­£å¸¸ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚"}},inline_input:{placeholder:"ã‚¿ã‚¹ã‚¯åã‚’å…¥åŠ›...",label:"ã‚¿ã‚¹ã‚¯å",tooltip_today:"ä»Šæ—¥ã‚„ã‚‹",tooltip_today_remove:"ä»Šæ—¥ã®è¨­å®šã‚’è§£é™¤",tooltip_important:"é‡è¦",tooltip_important_remove:"é‡è¦ã‚’è§£é™¤",aria_today:"ä»Šæ—¥ã‚„ã‚‹ã‚¿ã‚¹ã‚¯ã«è¨­å®š",aria_today_remove:"ä»Šæ—¥ã®æ—¥ä»˜ã‚’è§£é™¤",aria_important:"é‡è¦ã«è¨­å®š",aria_important_remove:"é‡è¦ã‚’è§£é™¤",adding:"è¿½åŠ ä¸­..."},validation:{required:"å…¥åŠ›ã—ã¦ãã ã•ã„",workspace_name_required:"ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",workspace_duplicate:"ãã®åå‰ã¯æ—¢ã«ä½¿ã‚ã‚Œã¦ã„ã¾ã™",project_name_required:"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",workspace_required:"ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“",filter_name_required:"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",filter_condition_required:"å°‘ãªãã¨ã‚‚1ã¤ã®æ¡ä»¶ã‚’é¸æŠã—ã¦ãã ã•ã„",save_fail:"ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ",delete_fail:"å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ",label_name_required:"åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",label_workspace_required:"ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",workspace_confirm_switch:"æ–°ã—ã„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«åˆ‡ã‚Šæ›¿ãˆã¾ã™ã‹ï¼Ÿ",select_days:"æ›œæ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„"},date_options:{today:"ä»Šæ—¥",tomorrow:"æ˜æ—¥",week:"ä»Šé€±",next_week:"æ¥é€±"},task_list:{searching_results:'æ¤œç´¢çµæœã‚’è¡¨ç¤ºä¸­: "{query}"',sort_manual:"æ‰‹å‹• (ä¸¦ã³æ›¿ãˆ)",sort_created:"ä½œæˆæ—¥é †",sort_due:"æœŸé™ãŒè¿‘ã„é †",sort_important:"é‡è¦åº¦é †",sort_title:"åå‰é †",show_completed:"å®Œäº†ã‚’è¡¨ç¤º",hide_completed:"å®Œäº†ã‚’éè¡¨ç¤º",no_tasks_title:"ã‚¿ã‚¹ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",no_tasks_desc_showing:"ãƒ•ã‚£ãƒ«ã‚¿ã‚’å¤‰æ›´ã™ã‚‹ã‹ã€æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã—ã¦ä¸€æ—¥ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ã€‚",no_tasks_desc_hiding:"å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯ã‚’è¡¨ç¤ºã™ã‚‹ã‹ã€æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚",add_new_task:"æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ",loading:"ã‚¿ã‚¹ã‚¯ã‚’èª­ã¿è¾¼ã¿ä¸­..."},task_stats:{count_label:"COUNT",count_unit:"ä»¶",total_label:"TOTAL",avg_label:"AVG",avg_unit:"/ä»¶",over:"è¶…é",remaining:"æ®‹ã‚Š"},add_task_button:{add_task:"ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ",add_with_title:"ã€Œ{title}ã€ã‚’ã‚¿ã‚¹ã‚¯ã«è¿½åŠ ",aria_label:"æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ "},error_boundary:{title:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",retry:"å†è©¦è¡Œ",reload:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",details:"ã‚¨ãƒ©ãƒ¼è©³ç´°"},search_view:{tips:"ã§ã„ã¤ã§ã‚‚æ¤œç´¢ã‚’é–‹å§‹",results_for:"ã€Œ{query}ã€ã®æ¤œç´¢çµæœ",empty_title:"ã‚¿ã‚¹ã‚¯ã‚’æ¤œç´¢",empty_desc:"ã‚¿ã‚¹ã‚¯åã€èª¬æ˜ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåãªã©ã§<br />ã‚¿ã‚¹ã‚¯ã‚’ç´ æ—©ãè¦‹ã¤ã‘ã‚‰ã‚Œã¾ã™"},wizard:{next:"æ¬¡ã¸",back:"æˆ»ã‚‹",finish:"å®Œäº†ã—ã¦ä½œæˆ",alert_no_workspace:"ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚",alert_create_success:"{label}ã®ç›®æ¨™ãŒä½œæˆã•ã‚Œã¾ã—ãŸï¼ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸ç§»å‹•ã—ã¾ã™ï¼‰",alert_save_fail:"ç›®æ¨™ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚",select_method:"æ‰‹æ³•ã‚’é¸æŠ",select_framework:"ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’é¸æŠ",start_mode:"ã“ã®ãƒ¢ãƒ¼ãƒ‰ã§é–‹å§‹ã™ã‚‹",features:{okr:"æ¸¬å®šå¯èƒ½,é‡å¿ƒçš„ç›®æ¨™,ãƒãƒ¼ãƒ å‘ã‘",woop:"ç§‘å­¦çš„æ ¹æ‹ ,éšœå®³å¯¾ç­–,å€‹äººå‘ã‘",backward:"é€†ç®—æ€è€ƒ,ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³,é•·æœŸè¨ˆç”»"}},wiki:{view_details:"è©³ç´°ã‚’è¦‹ã‚‹",summary:"æ¦‚è¦",details:"è©³ç´°",use_cases:"ä½¿ç”¨ä¾‹",tips:"Tips",use_in_wizard:"ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã§ä½¿ç”¨ã™ã‚‹"},target_dashboard:{title_default:"ç›®æ¨™ã‚’è¨­å®šã—ã¦ã€é€²æ—ã‚’å¯è¦–åŒ–ã—ã¾ã—ã‚‡ã†",kgi_default:"æœªè¨­å®šã®KGI",wish_default:"æœªè¨­å®šã®WISH",obj_default:"æœªè¨­å®šã®Objective",target_default:"ç›®æ¨™",created_at:"ä½œæˆæ—¥: {date}",no_targets:"{mode} ã®ç›®æ¨™ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚",days_left:"æ®‹ã‚Š",days_unit:"æ—¥",loading_error:"ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼",backward:{target_label:"TARGET",now_label:"â† NOW",now_icon:"Now"},okr:{objective_label:"Objective",kr_prefix:"KR #"},woop:{wish_label:"Wish (é¡˜æœ›)",outcome_label:"Outcome (æœ€é«˜ã®çµæœ)",obstacles_header:"Obstacles & If-Then Plans",obstacle_badge:"å£",if_badge:"IF",score_label:"Score",add_obstacle:"+ éšœå®³ã‚’è¿½åŠ ã™ã‚‹"}}},Aa={dashboard:"Dashboard",inbox:"Inbox",today:"Today",upcoming:"Upcoming",completed:"Completed",trash:"Trash",projects:"Projects",project:"Project",labels:"Labels",filters:"Filters",timeblocks:"Time Blocks",durations:"Durations",targets:"Targets",workspaces:"Workspaces",settings:"Settings",edit:"Edit",active:"Active",add_task:"Add Task",search:"Search",no_tasks:"No tasks found",loading:"Loading...",saving:"Saving...",done:"Done",error:"An error occurred",backup_restore:"Backup & Restore",general:"General",appearance:"Appearance",account:"Account",language:"Language",important:"Important",all_tasks:"All Tasks",add:"Add",close:"Close",clear:"Clear",backward_map:"Backward Map",woop_board:"WOOP Board",okr_tree:"OKR Tree",msg:{task:{create_success:"Task created",create_fail:"Failed to create task",update_success:"Task updated",update_fail:"Failed to save task",delete_success:"Task deleted",delete_fail:"Failed to delete task",complete_success:"Task completed ğŸ‰",status_update_fail:"Failed to update status",move_fail:"Failed to move task"},auth:{login_success:"Logged in",logout_success:"Logged out"},dnd:{reorderFailed:"Failed to reorder"},project:{reorder_fail:"Failed to reorder projects"},confirm_delete:`Are you sure you want to delete this item?
This action cannot be undone.`},delete:"Delete",timeblock:"Time Block",filter:"Filter",sidebar:{add_workspace:"Add Workspace",search_placeholder:"Search (/)",target_wizard:"Target Wizard",target_dashboard:"Target Dashboard",framework_wiki:"Framework Wiki",unassigned:"Unassigned",toggle_collapse:"Collapse Sidebar",toggle_expand:"Expand Sidebar",resizer_label:"Resize Sidebar",resizer_hint:"Drag or use arrow keys to resize",menu_open:"Open Menu",reorder_section:"Reorder Section",no_projects:"No projects",duration_format:"{min} min"},modal:{task_title_placeholder:"Task Title",filter_name_placeholder:"e.g. Important tasks this week",memo_markdown:"Memo (Markdown)",edit:"Edit",preview:"Preview",schedule:"Schedule",due_date:"Due Date",recurrence:"Recurrence",recurrence_days:"Repeat Days",time_block:"Time Block",duration:"Duration",no_duration:"Not Set",no_project:"No Project",cancel:"Cancel",save:"Save",create:"Create",ok:"OK",delete:"Delete",delete_confirm:"Are you sure you want to delete this task?",no_memo:"No memo",workspace_edit_title:"Edit Workspace Name",workspace_create_title:"New Workspace",workspace_name_label:"Workspace Name",workspace_name_placeholder:"Enter workspace name...",workspace_desc_edit:"Rename the workspace.",workspace_desc_create:"Create a new workspace to manage projects and tasks separately.",label_name:"Label Name",label_name_placeholder:"Label Name",label_create_placeholder:"New Label Name",project_name:"Project Name",project_name_placeholder:"Enter name...",project_delete_confirm:'Delete project "{name}"?',label_delete_confirm:'Delete label "{name}"?',theme_color:"Theme Color",delete_label:"Delete Label",delete_project:"Delete Project"},task_detail:{recurrence_label:"Recurrence",recurrence_days:"Repeat Days",time_block_label:"Time Block",time_block_unspecified:"Unspecified",duration_label:"Duration",duration_none:"None",project_label:"Project",project_none:"No Project",due_date_label:"Due Date",schedule_label:"Schedule",title_placeholder:"Task Title",delete_button:"Delete"},time_block:{add_button:"Add Time Block",max_limit:"Max 10 blocks allowed",unspecified:"Unspecified",default_zone_desc:"Default Zone",change_color:"Change Color",error_invalid_time:"Invalid Time: {start} - {end}",error_overlap:"Time Overlap: [{range1}] and [{range2}]",time_select:"Select Time",delete_confirm:"Delete this time block?",settings_title:"Time Block Settings"},recurrence:{none:"None",daily:"Daily",weekdays:"Weekdays",weekly:"Weekly",monthly:"Monthly"},days:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},colors:{red:"Red",pink:"Pink",purple:"Purple",deep_purple:"Deep Purple",indigo:"Indigo",blue:"Blue",light_blue:"Light Blue",cyan:"Cyan",teal:"Teal",green:"Green",light_green:"Light Green",lime:"Lime",yellow:"Yellow",amber:"Amber",orange:"Orange",deep_orange:"Deep Orange",brown:"Brown",grey:"Grey",blue_grey:"Blue Grey"},settings_modal:{title:"Settings",tabs:{general:"General",appearance:"Appearance",account:"Account",advanced:"Advanced"},appearance:{theme:"Theme",density:"Density",font_size:"Font Size",fonts:"Fonts",font_en:"English Font",font_jp:"Japanese Font"},backup:{title:"Backup & Restore",description:"Download workspace data (tasks, projects, settings) as JSON or restore from backup.",create:"Create Backup",import:"Import",import_confirm:`Import data into current workspace?
Existing data remains, but some IDs may change to prevent duplicates.`,import_success:`Import completed.
Tasks: {tasks}
Projects: {projects}`,import_fail:"Import failed. Please check the file format.",create_fail:"Failed to create backup."},options:{theme:{light:"Light",dark:"Dark",system:"System"},density:{compact:"Compact",normal:"Normal",comfortable:"Comfortable",spacious:"Spacious"}},language:{title:"Language",description:"Change the UI language."},maintenance:{title:"Database Maintenance",description:"Detect and clean up duplicate data. This action cannot be undone. Please backup before running.",cleanup_duplicate:"Clean Up Duplicates (Confirm)",confirm_backup:`[Warning] Deleting duplicate tasks.
Did you create a backup?
(Older duplicates will be removed)`,confirm_final:"[Final Confirm] This cannot be undone. Execute?",cleanup_success:"Deleted {count} duplicate tasks.",cleanup_fail:"Error occurred: {error}"},account:{guest_user:"Guest User",registered_user:"Registered User",not_logged_in:"Not logged in",logout:"Logout",logout_confirm:"Are you sure you want to logout?",persist_account:"Persist Account",persist_desc:`Your account is temporary.
Register an email to access your data from other devices.`,register:"Register Account",registering:"Registering...",register_success:"Account registered!",register_fail:"Registration failed",already_in_use:"Email already in use",weak_password:"Password is too weak",email_label:"Email",password_label:"Password",hide_password:"Hide Password",show_password:"Show Password",registered_msg:"Account is fully registered."}},inline_input:{placeholder:"Enter task name...",label:"Task Name",tooltip_today:"Do Today",tooltip_today_remove:"Remove Today",tooltip_important:"Mark Important",tooltip_important_remove:"Unmark Important",aria_today:"Set for today",aria_today_remove:"Remove from today",aria_important:"Mark as important",aria_important_remove:"Unmark as important",adding:"Adding..."},validation:{required:"Required",workspace_name_required:"Workspace name is required",workspace_duplicate:"This name is already taken",project_name_required:"Project name is required",workspace_required:"No workspace selected",filter_name_required:"Filter name is required",filter_condition_required:"Please select at least one condition",save_fail:"Failed to save",delete_fail:"Failed to delete",label_name_required:"Name is required",label_workspace_required:"Workspace not found",workspace_confirm_switch:"Switch to new workspace?",select_days:"Please select days"},date_options:{today:"Today",tomorrow:"Tomorrow",week:"This Week",next_week:"Next Week"},task_list:{searching_results:'Showing results for: "{query}"',sort_manual:"Manual (Reorder)",sort_created:"Date Created",sort_due:"Due Date",sort_important:"Importance",sort_title:"Title",show_completed:"Show Completed",hide_completed:"Hide Completed",no_tasks_title:"No tasks found",no_tasks_desc_showing:"Try changing filters or create a new task to start your day.",no_tasks_desc_hiding:"Show completed tasks or add a new task.",add_new_task:"Add New Task",loading:"Loading tasks..."},task_stats:{count_label:"COUNT",count_unit:"",total_label:"TOTAL",avg_label:"AVG",avg_unit:"/task",over:"Over",remaining:"Left"},add_task_button:{add_task:"Add Task",add_with_title:'Add "{title}" as task',aria_label:"Add new task"},error_boundary:{title:"An Error Occurred",description:"Sorry, an unexpected error has occurred.",retry:"Retry",reload:"Reload Page",details:"Error Details"},search_view:{tips:"Start search anytime",results_for:'Results for "{query}"',empty_title:"Search Tasks",empty_desc:"Find tasks quickly by name, description, or project"},wizard:{next:"Next",back:"Back",finish:"Complete & Create",alert_no_workspace:"Workspace is not selected.",alert_create_success:"{label} target created! (Redirecting to Dashboard)",alert_save_fail:"Failed to save target.",select_method:"Select Method",select_framework:"Select Framework",start_mode:"Start with this mode",features:{okr:"Measurable,Ambitious Goals,For Teams",woop:"Scientific,Obstacles,For Individuals",backward:"Backward Thinking,Milestones,Long-term"}},wiki:{view_details:"View Details",summary:"Summary",details:"Details",use_cases:"Use Cases",tips:"Tips",use_in_wizard:"Use in Wizard"},target_dashboard:{title_default:"Set targets and visualize progress",kgi_default:"Undefined KGI",wish_default:"Undefined WISH",obj_default:"Undefined Objective",target_default:"Target",created_at:"Created: {date}",no_targets:"No {mode} targets found.",days_left:"Left",days_unit:"days",loading_error:"Error loading data",backward:{target_label:"TARGET",now_label:"â† NOW",now_icon:"Now"},okr:{objective_label:"Objective",kr_prefix:"KR #"},woop:{wish_label:"Wish",outcome_label:"Outcome",obstacles_header:"Obstacles & If-Then Plans",obstacle_badge:"Obstacle",if_badge:"IF",score_label:"Score",add_obstacle:"+ Add Obstacle"}}},rr={ja:Ia,en:Aa},Re=e=>{function r(a,n){const s=rr[e],o=rr.en,i=(c,d)=>d.split(".").reduce((g,u)=>g&&g[u],c);let l=i(s,a);return l||(l=i(o,a)||a),n?Object.entries(n).reduce((c,[d,g])=>c.replace(`{${d}}`,String(g)),l):l}return{t:r}},F=()=>{const e=ae(a=>a.language);return x.useMemo(()=>Re(e),[e])},z={SIDEBAR_DENSITY:{compact:"py-0.5",normal:"py-1.5",comfortable:"py-2.5",spacious:"py-3.5"},DND:{PREFIX_TASK:"task:",TYPE_PROJECT:"project",TYPE_INBOX:"inbox",TYPE_TIMEBLOCK:"timeblock",TOUCH_DELAY:250},STORAGE_KEYS:{SECTION_ORDER:"sidebar_section_order"},SIDEBAR:{MIN_WIDTH:150,MAX_WIDTH:500,DEFAULT_WIDTH:280,DURATIONS:[30,45,60,75,90]},LAYOUT:{CONTAINER_WIDTH_CLASS:"w-full max-w-full",MOBILE_SIDEBAR_WIDTH_PX:280},FONTS:{EU:[{label:"Google Sans",value:'"Google Sans", Inter, sans-serif'},{label:"Inter",value:"Inter, sans-serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"System UI",value:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}],JP:[{label:"M PLUS 2",value:'"M PLUS 2", sans-serif'},{label:"Noto Sans JP",value:'"Noto Sans JP", sans-serif'},{label:"Hiragino / Yu Gothic",value:'"Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif'}]}},me=[{value:"#EF5350",key:"red"},{value:"#EC407A",key:"pink"},{value:"#AB47BC",key:"purple"},{value:"#7E57C2",key:"deep_purple"},{value:"#5C6BC0",key:"indigo"},{value:"#42A5F5",key:"blue"},{value:"#29B6F6",key:"light_blue"},{value:"#26C6DA",key:"cyan"},{value:"#26A69A",key:"teal"},{value:"#66BB6A",key:"green"},{value:"#9CCC65",key:"light_green"},{value:"#D4E157",key:"lime"},{value:"#FFEE58",key:"yellow"},{value:"#FFCA28",key:"amber"},{value:"#FFA726",key:"orange"},{value:"#FF7043",key:"deep_orange"},{value:"#8D6E63",key:"brown"},{value:"#BDBDBD",key:"grey"},{value:"#78909C",key:"blue_grey"}];me.map(e=>e.value);const Fa=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)}),K=Ee(e=>({stack:[],openModal:(r,a=null)=>{if(!r)return;const s={id:Fa(),type:r,data:a};e(o=>({stack:[...o.stack,s]}))},closeModal:()=>e(r=>r.stack.length===0?r:{stack:r.stack.slice(0,-1)}),closeAllModals:()=>e({stack:[]})})),Oa=1024,zt=Ee()(Je(e=>({sidebarWidth:z.SIDEBAR.DEFAULT_WIDTH,isSidebarOpen:!0,sidebarDensity:"normal",setSidebarWidth:r=>{const a=Math.max(z.SIDEBAR.MIN_WIDTH,Math.min(r,z.SIDEBAR.MAX_WIDTH));e({sidebarWidth:a})},toggleSidebar:()=>e(r=>({isSidebarOpen:!r.isSidebarOpen})),setSidebarOpen:r=>e({isSidebarOpen:r}),setSidebarDensity:r=>e({sidebarDensity:r})}),{name:"ui-storage",partialize:e=>({sidebarWidth:e.sidebarWidth,sidebarDensity:e.sidebarDensity,isSidebarOpen:e.isSidebarOpen}),onRehydrateStorage:()=>e=>{typeof window<"u"&&window.innerWidth<Oa&&(e==null||e.setSidebarOpen(!1))}})),X=(e,r="0 0 24 24")=>({className:a,size:n,strokeWidth:s=2,...o})=>t.jsx("svg",{className:C("w-4 h-4",a),width:n,height:n,fill:"none",stroke:"currentColor",viewBox:r,strokeWidth:s,strokeLinecap:"round",strokeLinejoin:"round",...o,children:e}),Ba=X(t.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})),Ra=X(t.jsx("path",{d:"M18 6L6 18M6 6l12 12"})),gt=X(t.jsx("path",{d:"M12 5v14M5 12h14"})),Pe=X(t.jsxs(t.Fragment,{children:[t.jsx("path",{d:"M3 6h18"}),t.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6"})]})),mt=X(t.jsx("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),"0 0 24 24"),Pa=X(t.jsxs(t.Fragment,{children:[t.jsx("path",{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})),qt=X(t.jsx("path",{d:"M20 6L9 17l-5-5"})),Ut=X(t.jsxs(t.Fragment,{children:[t.jsx("circle",{cx:"11",cy:"11",r:"8"}),t.jsx("path",{d:"M21 21l-4.35-4.35"})]})),Cr=X(t.jsx("path",{d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})),Sr=X(t.jsxs(t.Fragment,{children:[t.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),t.jsx("path",{d:"M14 2v6h6"}),t.jsx("path",{d:"M16 13H8"}),t.jsx("path",{d:"M16 17H8"}),t.jsx("path",{d:"M10 9H8"})]})),Ge=X(t.jsx("path",{d:"M6 9l6 6 6-6"})),Wa=X(t.jsx("path",{d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})),$a=X(t.jsx("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})),za=X(t.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})),qa=X(t.jsx("path",{d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})),Ua=X(t.jsxs(t.Fragment,{children:[t.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),t.jsx("path",{d:"M16 2v4M8 2v4M3 10h18"})]})),Ka=X(t.jsxs(t.Fragment,{children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("path",{d:"M12 6v6l4 2"})]})),Ha=({className:e,size:r,...a})=>t.jsxs("svg",{className:C("animate-spin",e),width:r||16,height:r||16,fill:"none",viewBox:"0 0 24 24",...a,children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ga="/assets/logo-BADOZ29k.png",le=Ee()(Je(e=>({filterType:"inbox",targetId:null,query:"",showCompleted:!1,sortCriteria:"createdAt_desc",setFilter:(r,a=null)=>e({filterType:r,targetId:a,query:""}),setSearchQuery:r=>e({query:r,filterType:"search"}),clearFilter:()=>e({filterType:"inbox",targetId:null,query:""}),setShowCompleted:r=>e({showCompleted:r}),setSortCriteria:r=>e({sortCriteria:r})}),{name:"filter-storage",partialize:e=>({filterType:e.filterType,targetId:e.targetId,query:e.query,showCompleted:e.showCompleted,sortCriteria:e.sortCriteria})})),we=Ee()(Je(e=>({currentView:"tasks",viewData:null,setView:(r,a=null)=>e({currentView:r,viewData:a})}),{name:"view-storage",partialize:e=>({currentView:e.currentView})})),Va=()=>{const{t:e}=F(),{query:r,setFilter:a}=le(),{currentView:n,setView:s}=we(),o=n==="search",i=()=>{a("search"),s("search")};return t.jsxs("button",{onClick:i,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-all duration-200 group ${o?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700/50 text-gray-600 dark:text-gray-400"}`,"aria-label":e("sidebar.search_placeholder"),children:[t.jsx(Ut,{className:`w-4 h-4 transition-colors ${o?"text-blue-600 dark:text-blue-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),t.jsx("span",{className:"flex-1 text-sm font-medium",children:r?`"${r}"`:e("sidebar.search_placeholder")}),t.jsx("span",{className:"text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"/"})]})},Ya=({children:e})=>{const{sidebarWidth:r,isSidebarOpen:a,sidebarDensity:n,toggleSidebar:s,setSidebarWidth:o}=zt(),{t:i}=F(),l={compact:"p-1",normal:"p-2",comfortable:"p-4",spacious:"p-6"}[n];q.useEffect(()=>{const d=u=>{if(!document.body.classList.contains("resizing"))return;const m=Math.max(z.SIDEBAR.MIN_WIDTH,Math.min(z.SIDEBAR.MAX_WIDTH,u.clientX));o(m)},g=()=>{document.body.classList.remove("resizing"),document.body.style.cursor="default"};return document.addEventListener("mousemove",d),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",g)}},[o]);const c=()=>{document.body.classList.add("resizing"),document.body.style.cursor="col-resize"};return t.jsxs("aside",{className:C("h-full transition-all duration-300 flex flex-col group relative","bg-white dark:bg-gray-900 lg:bg-white/70 lg:dark:bg-gray-800/60","lg:backdrop-blur-xl","border-r border-gray-200/50 dark:border-gray-700/30",a?"translate-x-0":"-translate-x-full lg:translate-x-0","fixed lg:relative z-30 lg:z-0 shadow-2xl lg:shadow-none overflow-hidden","w-[var(--sidebar-mobile)] lg:w-[var(--sidebar-desktop)]"),style:{"--sidebar-desktop":`${r}px`,"--sidebar-mobile":a?`${z.LAYOUT.MOBILE_SIDEBAR_WIDTH_PX}px`:"0px",width:a?void 0:"0px"},children:[t.jsxs("div",{className:"h-14 flex items-center px-4 flex-shrink-0 justify-between border-b border-gray-100 dark:border-gray-800/50",children:[t.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition select-none",children:[t.jsx("div",{className:"w-8 h-8 rounded-xl bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20",children:t.jsx("img",{src:Ga,alt:"L",className:"h-5 w-5 invert brightness-0"})}),t.jsxs("span",{className:"text-lg font-black text-gray-900 dark:text-white tracking-tight",children:["Task",t.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]})]}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all active:scale-90",title:i(a?"sidebar.toggle_collapse":"sidebar.toggle_expand"),"aria-label":i(a?"sidebar.toggle_collapse":"sidebar.toggle_expand"),children:t.jsx(Wa,{className:C("w-5 h-5 transition-transform duration-300",!a&&"rotate-180"),strokeWidth:2.5})})]}),t.jsx("div",{className:"px-3 pb-2 pt-2",children:t.jsx(Va,{})}),t.jsx("div",{className:C("flex-1 overflow-y-auto custom-scrollbar pt-2",l),children:e}),t.jsx("div",{role:"separator","aria-orientation":"vertical","aria-label":i("sidebar.resizer_label"),"aria-valuenow":r,"aria-valuemin":z.SIDEBAR.MIN_WIDTH,"aria-valuemax":z.SIDEBAR.MAX_WIDTH,tabIndex:a?0:-1,onMouseDown:c,onKeyDown:d=>{d.key==="ArrowLeft"?o(Math.max(z.SIDEBAR.MIN_WIDTH,r-10)):d.key==="ArrowRight"&&o(Math.min(z.SIDEBAR.MAX_WIDTH,r+10))},className:C("absolute top-0 right-0 w-3 h-full cursor-col-resize z-40 transition-colors hidden lg:flex items-center justify-center outline-none focus:bg-blue-500","hover:bg-blue-500/30 active:bg-blue-600/50 group/resizer"),title:i("sidebar.resizer_hint"),children:t.jsx("div",{className:"absolute w-1 h-12 bg-gray-400 dark:bg-gray-500 rounded-full opacity-0 group-hover/resizer:opacity-100 group-focus/resizer:opacity-100 transition-opacity pointer-events-none"})}),t.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-gray-200/50 dark:bg-gray-700/30 hidden lg:block"})]})},he=vr([ya(),ka(Te),_().datetime({offset:!0}).or(_().datetime())]).nullable().optional(),Ja=Z({type:ut(["none","daily","weekly","weekdays","monthly"]).default("none"),days:ge(de().min(0).max(6)).optional()}).nullable(),Kt=Z({id:_().optional(),title:_().min(1,"ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆã§ã™"),description:_().nullable().optional(),status:ut(["todo","completed","archived"]).default("todo"),dueDate:he,completedAt:he,createdAt:he,ownerId:_(),projectId:_().nullable().optional(),labelIds:ge(_()).optional(),timeBlockId:_().nullable().optional(),duration:de().min(0,"æ‰€è¦æ™‚é–“ã¯0ä»¥ä¸Šã®æ•°å€¤ã§æŒ‡å®šã—ã¦ãã ã•ã„").optional(),isImportant:jr().default(!1),recurrence:Ja,order:de().optional()});Z({id:_().optional(),name:_().min(1,"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã¯å¿…é ˆã§ã™"),color:_().optional(),ownerId:_(),createdAt:he,order:de().optional()});Z({id:_().optional(),name:_().min(1,"ãƒ©ãƒ™ãƒ«åã¯å¿…é ˆã§ã™"),color:_().optional(),ownerId:_(),workspaceId:_().optional(),createdAt:he});const Ht=Z({id:_().optional(),name:_().min(1,"ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åã¯å¿…é ˆã§ã™"),createdAt:he}),Tr=Z({id:_().optional(),name:_().min(1,"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åã¯å¿…é ˆã§ã™"),query:_(),workspaceId:_().optional(),createdAt:he}),ar=_().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,"æ™‚åˆ»ã¯HH:mmå½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹: 09:00, 14:30ï¼‰");Z({id:_().optional(),name:_().min(1,"æ™‚é–“å¸¯ã®åå‰ã¯å¿…é ˆã§ã™"),start:ar,end:ar,color:_().optional(),order:de().optional()});Z({id:_().optional(),mode:_(),data:_r(_(),_()),createdAt:he,updatedAt:he,ownerId:_(),workspaceId:_()});const We=Ee()(Je(e=>({currentWorkspaceId:null,workspaces:[],setCurrentWorkspaceId:r=>e({currentWorkspaceId:r}),setWorkspaces:r=>{const a=r.filter(n=>{const s=Ht.safeParse(n);return s.success?!0:(console.error("Invalid workspace data:",n,s.error),!1)});e({workspaces:a})}}),{name:"workspace-storage",partialize:e=>({currentWorkspaceId:e.currentWorkspaceId})}));function Xa(){return typeof window<"u"&&window.GLOBAL_APP_ID?window.GLOBAL_APP_ID:typeof __app_id<"u"?__app_id:"default-app-id"}function Dt(e){return`artifacts/${Xa()}/users/${e}`}function Ie(e,r){return`${Dt(e)}/workspaces/${r}`}const M={users:e=>Dt(e),workspaces:e=>`${Dt(e)}/workspaces`,filters:(e,r)=>`${Ie(e,r)}/filters`,labels:(e,r)=>`${Ie(e,r)}/labels`,timeblocks:(e,r)=>`${Ie(e,r)}/timeblocks`,tasks:(e,r)=>`${Ie(e,r)}/tasks`,projects:(e,r)=>`${Ie(e,r)}/projects`,targets:(e,r)=>`${Ie(e,r)}/targets`},Qa=["permission-denied","invalid-argument","unauthenticated","not-found","already-exists","failed-precondition"];async function te(e,r={}){const a=typeof r=="number"?{maxRetries:r}:r,{maxRetries:n=3,initialDelay:s=1e3,onError:o,onFinalFailure:i}=a;let l;for(let c=0;c<=n;c++)try{return await e()}catch(d){if(l=d,o&&o(d,c),c===n)break;const g=(d==null?void 0:d.code)||"";if(Qa.some(p=>g.includes(p)))throw i&&i(d),d;const m=s*Math.pow(2,c);await new Promise(p=>setTimeout(p,m))}throw i&&i(l),l}class Za{constructor(){$(this,"cachedWorkspacesMap",new Map);$(this,"listeners",new Map);$(this,"unsubscribes",new Map)}isInitialized(r){return this.cachedWorkspacesMap.has(r)}notifyListeners(r){const a=this.cachedWorkspacesMap.get(r)||[],n=this.listeners.get(r);if(n){const s=[...a];n.forEach(o=>o(s))}}setCache(r,a){this.cachedWorkspacesMap.set(r,a),this.notifyListeners(r)}getWorkspaces(r){return this.cachedWorkspacesMap.get(r)||[]}subscribe(r,a){this.listeners.has(r)||this.listeners.set(r,new Set);const n=this.listeners.get(r);n.add(a);const s=this.cachedWorkspacesMap.get(r);if(s&&queueMicrotask(()=>a([...s])),!this.unsubscribes.has(r)){const o=M.workspaces(r),i=xe(B(L,o),ht("createdAt","asc"));console.log(`[WorkspaceCache] Subscribing to path: ${o}`);const l=je(i,c=>{const d=c.docs.map(u=>({id:u.id,...u.data()}));console.log(`[WorkspaceCache] Received ${d.length} workspaces from Firestore`);const g=d.filter(u=>{const m=Ht.safeParse(u);return m.success?!0:(console.error("[WorkspaceCache] Invalid workspace data:",u,m.error),!1)});this.cachedWorkspacesMap.set(r,g),this.notifyListeners(r)},c=>{console.error("[WorkspaceCache] Subscription error:",c),this.cachedWorkspacesMap.set(r,[]),this.notifyListeners(r)});this.unsubscribes.set(r,l)}return()=>{var o;n.delete(a),n.size===0&&((o=this.unsubscribes.get(r))==null||o(),this.unsubscribes.delete(r),this.listeners.delete(r))}}clearCache(r){var a;this.cachedWorkspacesMap.delete(r),(a=this.unsubscribes.get(r))==null||a(),this.unsubscribes.delete(r),this.listeners.delete(r)}}const pe=new Za,es=e=>pe.isInitialized(e),ts=e=>pe.getWorkspaces(e);function rs(e,r){return pe.subscribe(e,r)}async function Dr(e,r){const a=pe.getWorkspaces(e);Ht.pick({name:!0}).parse({name:r});const n="temp-"+Date.now(),s={id:n,name:r,createdAt:new Date};pe.setCache(e,[...a,s]);const o=M.workspaces(e);console.log(`[WorkspaceCache] Adding workspace to path: ${o}`);let i=n;return await te(async()=>{const l=await se(B(L,o),{name:r,createdAt:ie()});i=l.id,console.log(`[WorkspaceCache] Successfully added workspace with ID: ${l.id}`)},{onFinalFailure:()=>{console.error(`[WorkspaceCache] Failed to add workspace: ${r}`),pe.setCache(e,a),O.error("ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ")}}),{id:i,name:r}}async function as(e,r,a){const n=pe.getWorkspaces(e),s=n.map(o=>o.id===r?{...o,...a}:o);pe.setCache(e,s),await te(async()=>{const o=M.workspaces(e),i=J(L,o,r);await De(i,a)},{onFinalFailure:()=>{pe.setCache(e,n),O.error("ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function ss(e){try{const r=M.workspaces(e);(await ue(xe(B(L,r),pr(1)))).empty&&await Dr(e,"ãƒ¡ã‚¤ãƒ³")}catch(r){console.error("[WorkspaceCache] Failed to ensure default workspace:",r)}}function Er(e){var a;const r=e||((a=A.currentUser)==null?void 0:a.uid);return r?ts(r):[]}function ns(e){var a;const r=e||((a=A.currentUser)==null?void 0:a.uid);return r?es(r):!1}function ce(){return We.getState().currentWorkspaceId}function Lr(e){if(!e)return;const r=We.getState();r.currentWorkspaceId!==e&&r.setCurrentWorkspaceId(e)}function os(e,r){var o;const a=typeof e=="function"?e:r,n=typeof e=="string"?e:(o=A.currentUser)==null?void 0:o.uid;return n?rs(n,i=>{i.length===0?ss(n).catch(l=>console.error("[Workspace] Default creation error:",l)):is(i),typeof a=="function"&&a(i)}):(typeof a=="function"&&a([]),()=>{})}function is(e){if(e.length===0)return null;const r=We.getState();let a=r.currentWorkspaceId;const n=a?e.some(s=>s.id===a):!1;return(!a||!n)&&(a=e[0].id,r.setCurrentWorkspaceId(a)),a}async function ls(e){const r=A.currentUser;if(!r)throw new Error("Authentication required");return Dr(r.uid,e)}async function cs(e,r){const a=A.currentUser;if(!a)throw new Error("Authentication required");return as(a.uid,e,{name:r})}function Ve(e){const r=`[ErrorLogger] [${e.type.toUpperCase()}]`,a=e.stack?`
${e.stack}`:"";e.type==="warn"?console.warn(`${r} ${e.message}${a}`):console.error(`${r} ${e.message}${a}`)}function ds(){window.onerror=(e,r,a,n,s)=>(Ve({timestamp:new Date().toISOString(),type:"error",message:String(e),stack:s==null?void 0:s.stack}),!1),window.onunhandledrejection=e=>{const r=e.reason;Ve({timestamp:new Date().toISOString(),type:"unhandledrejection",message:(r==null?void 0:r.message)||String(r),stack:r==null?void 0:r.stack})},console.info("[ErrorLogger] Initialized")}function us(e,r){Ve({timestamp:new Date().toISOString(),type:"react",message:e.message,stack:e.stack})}class gs{constructor(){$(this,"initialLoginPromise",null)}getCurrentUserId(){var r;return((r=A.currentUser)==null?void 0:r.uid)||null}hasInitialToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return!0;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return!0}catch{}return!1}getInitialAuthToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return window.GLOBAL_INITIAL_AUTH_TOKEN;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return __initial_auth_token}catch{}return null}async tryInitialTokenLogin(){if(this.initialLoginPromise)return this.initialLoginPromise;const r=this.getInitialAuthToken();if(!r){this.initialLoginPromise=Promise.resolve();return}return this.initialLoginPromise=(async()=>{try{await xr(A,r),console.log("[Auth] Initial token login success")}catch(a){Ve({timestamp:new Date().toISOString(),type:"error",message:`Initial token login failed: ${a.message}`,stack:a.stack})}})(),this.initialLoginPromise}initAuthListener(r,a){return this.tryInitialTokenLogin(),Ft(A,s=>{s?r(s):a()})}async loginWithEmail(r,a){return await At(A,r,a)}async logout(){try{await Ot(A)}catch(r){throw Ve({timestamp:new Date().toISOString(),type:"error",message:`Logout failed: ${r.message}`,stack:r.stack}),r}}async updateUserAuthPassword(r){const a=A.currentUser;if(!a)throw new Error("Authentication required: No current user.");await fr(a,r)}}const Et=new gs,ms=(e,r)=>Et.initAuthListener(e,r),ct={TIMEOUT:{AUTH_LOADING:1e4},TIME_BLOCK:{MAX_COUNT:10}},Gt=()=>{var i;const[e,r]=x.useState(((i=A.currentUser)==null?void 0:i.uid)||null),[a,n]=x.useState(A.currentUser),[s,o]=x.useState(!0);return x.useEffect(()=>{const l=new AbortController;let c=()=>{},d=null;const g=async()=>{if(Et.hasInitialToken())try{await Et.tryInitialTokenLogin()}catch(u){console.error("[useAuth] Initial token login failed:",u)}l.signal.aborted||(c=ms(u=>{l.signal.aborted||(r(u.uid),n(u),o(!1),d&&clearTimeout(d))},()=>{l.signal.aborted||(r(null),n(null),o(!1),d&&clearTimeout(d))}))};return d=setTimeout(()=>{l.signal.aborted||(console.warn("[useAuth] Loading timeout reached, forcing loading=false"),o(!1))},ct.TIMEOUT.AUTH_LOADING),g(),()=>{l.abort(),c(),d&&clearTimeout(d)}},[]),{userId:e,user:a,loading:s}},st=new Map;function Le(e,r,a,n){const s=wr(),o=JSON.stringify(e),i=5e3;return x.useEffect(()=>{if(e.some(c=>c==null))return;let l=st.get(o);return l||(l={count:0,unsubscribe:r(d=>{s.setQueryData(e,d)})},st.set(o,l)),l.count++,()=>{const c=st.get(o);c&&(c.count--,c.count===0&&(c.unsubscribe(),st.delete(o)))}},[o]),ha({queryKey:e,queryFn:()=>{const l=s.getQueryData(e);return l!==void 0?Promise.resolve(l):a!==void 0?Promise.resolve(a):new Promise(c=>{const d=setTimeout(()=>{const m=s.getQueryData(e);console.warn(`[FirestoreSub] Timeout waiting for data: ${o}`),c(m??a??null)},i),g=s.getQueryCache().subscribe(m=>{if(m.type==="updated"&&JSON.stringify(m.query.queryKey)===o){const p=m.query.state.data;p!==void 0&&(clearTimeout(d),g(),c(p))}}),u=s.getQueryData(e);u!==void 0&&(clearTimeout(d),g(),c(u))})},initialData:a,staleTime:1/0,gcTime:1e3*60*5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})}const hs=()=>{const{userId:e,loading:r}=Gt(),a=x.useCallback(c=>e?os(e,c):()=>{},[e]),s=(e?ns(e):!1)&&e?Er(e):void 0,{data:o,isPending:i}=Le(["workspaces",e||void 0],a,s);return{workspaces:o||[],loading:r||!!e&&i}},ne=()=>{const e=We(n=>n.currentWorkspaceId),{userId:r,loading:a}=Gt();return{workspaceId:e,userId:r,loading:a}},ps=()=>{const{t:e}=F(),{workspaces:r,loading:a}=hs(),{openModal:n}=K(),[s,o]=x.useState(!1),i=x.useRef(null),{workspaceId:l}=ne(),c=r.find(d=>d.id===l);return x.useEffect(()=>{const d=u=>{i.current&&!i.current.contains(u.target)&&o(!1)},g=u=>{u.key==="Escape"&&o(!1)};return s&&(document.addEventListener("mousedown",d),document.addEventListener("keydown",g)),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("keydown",g)}},[s]),a?t.jsx("div",{className:"h-8 w-32 bg-gray-100 dark:bg-gray-800 animate-pulse rounded"}):t.jsxs("div",{className:"relative",ref:i,children:[t.jsxs("button",{onClick:()=>o(!s),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md px-2 py-1 transition-colors group","aria-expanded":s,"aria-haspopup":"true",children:[t.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 truncate max-w-[120px] sm:max-w-[140px] md:max-w-[180px]",children:c?c.name:e("loading")}),t.jsx(Ge,{className:C("w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-transform duration-200",s?"rotate-180":"")})]}),s&&t.jsxs("div",{className:"absolute left-0 mt-2 w-60 sm:w-64 max-w-[calc(100vw-32px)] origin-top-left rounded-lg shadow-2xl bg-white dark:bg-gray-800 ring-1 ring-black/5 z-50 border border-gray-100 dark:border-gray-700 overflow-hidden animate-scale-in custom-scrollbar",children:[t.jsx("div",{className:"p-1 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50",children:t.jsxs("button",{onClick:()=>{o(!1),n("workspace-edit",null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700/50 transition-colors rounded-md",children:[t.jsx(gt,{className:"w-4 h-4 mr-2"}),e("sidebar.add_workspace")]})}),t.jsx("div",{className:"py-1 max-h-[300px] overflow-y-auto custom-scrollbar",children:r.map(d=>{const g=d.id===l;return t.jsxs("button",{onClick:()=>{d.id&&Lr(d.id),o(!1)},className:C("w-full text-left px-4 py-2 text-sm flex items-center justify-between transition-colors",g?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[t.jsx("span",{className:"truncate block max-w-[140px] sm:max-w-[180px]",children:d.name}),g&&t.jsx(qt,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0 ml-2"})]},d.id)})})]})]})},xs=({sidebarContent:e,title:r,children:a})=>{const{toggleSidebar:n,isSidebarOpen:s}=zt(),{t:o}=F(),{openModal:i}=K();return t.jsxs("div",{className:"w-full h-full flex overflow-hidden bg-premium-gradient text-gray-800 dark:text-white antialiased",children:[s&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-20 lg:hidden transition-opacity duration-300",onClick:n}),t.jsx(Ya,{children:e}),t.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden",id:"main-content",children:[t.jsxs("header",{className:"h-12 border-b border-gray-200 dark:border-gray-800 flex items-center px-4 justify-between bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-10 sticky top-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[!s&&t.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:o("sidebar.menu_open"),"aria-label":o("sidebar.menu_open"),children:t.jsx(Ba,{className:"w-5 h-5"})}),t.jsx(ps,{}),t.jsx("h1",{className:"font-bold text-lg border-l border-gray-300 dark:border-gray-700 pl-3 ml-1 truncate",children:r})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("button",{onClick:()=>i("settings"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Settings","aria-label":"Settings",children:t.jsx(Pa,{className:"w-5 h-5"})})})]}),t.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:t.jsx("div",{className:C("w-full h-full bg-white dark:bg-gray-900 relative flex-1",z.LAYOUT.CONTAINER_WIDTH_CLASS),children:a})})]})]})};function fs(e,r){return e===r?!0:!e||!r||e.length!==r.length?!1:JSON.stringify(e)===JSON.stringify(r)}function bs(e,r){if(e===r)return!0;if(!e||!r||e.length!==r.length)return!1;const a=[...e].sort((s,o)=>(s.id||"").localeCompare(o.id||"")),n=[...r].sort((s,o)=>(s.id||"").localeCompare(o.id||""));for(let s=0;s<a.length;s++){const o=a[s],i=n[s];if(o.id!==i.id||o.status!==i.status||o.title!==i.title||o.description!==i.description||o.projectId!==i.projectId||o.timeBlockId!==i.timeBlockId||o.duration!==i.duration||o.isImportant!==i.isImportant)return!1;const l=c=>c==null?c:c instanceof Date?c.getTime():typeof(c==null?void 0:c.toMillis)=="function"?c.toMillis():c;if(l(o.dueDate)!==l(i.dueDate))return!1}return!0}function ys(e,r){if(e===r)return!0;if(!e||!r||e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(e[a].id!==r[a].id||e[a].name!==r[a].name||e[a].color!==r[a].color)return!1;return!0}class ks{constructor(){$(this,"cachedProjectsMap",new Map);$(this,"listeners",new Map);$(this,"unsubscribes",new Map)}isInitialized(r){return this.cachedProjectsMap.has(r)}notifyListeners(r){const a=this.cachedProjectsMap.get(r)||[],n=this.listeners.get(r);if(n){const s=[...a];n.forEach(o=>o(s))}}setCache(r,a){this.cachedProjectsMap.set(r,a),this.notifyListeners(r)}getProjects(r){return this.cachedProjectsMap.get(r)||[]}subscribe(r,a,n){this.listeners.has(a)||this.listeners.set(a,new Set);const s=this.listeners.get(a);s.add(n);const o=this.cachedProjectsMap.get(a);if(o&&queueMicrotask(()=>n([...o])),!this.unsubscribes.has(a)){const i=M.projects(r,a),l=xe(B(L,i));console.log(`[ProjectCache] Subscribing to path: ${i} for user: ${r}`);const c=je(l,d=>{const g=d.docs.map(m=>({id:m.id,...m.data()}));console.log(`[ProjectCache] Received ${g.length} projects from Firestore for workspace: ${a}`);const u=this.cachedProjectsMap.get(a);if(u&&ys(u,g)){console.log("[ProjectCache] Data identical, skipping update");return}console.log("[ProjectCache] Updating cache and notifying listeners"),this.cachedProjectsMap.set(a,g),this.notifyListeners(a)},d=>{console.error("[ProjectCache] Subscription error:",d),this.cachedProjectsMap.set(a,[]),this.notifyListeners(a)});this.unsubscribes.set(a,c)}return()=>{var i;s.delete(n),s.size===0&&((i=this.unsubscribes.get(a))==null||i(),this.unsubscribes.delete(a),this.listeners.delete(a))}}}const Q=new ks,ws=e=>Q.isInitialized(e),vs=e=>Q.getProjects(e),js=(e,r)=>Q.setCache(e,r);function _s(e,r,a){return Q.subscribe(e,r,a)}async function Ns(e,r,a,n){const s=Q.getProjects(r),i={id:"temp-"+Date.now(),name:a,color:n,ownerId:e,createdAt:new Date};Q.setCache(r,[...s,i]);const l=M.projects(e,r);return console.log(`[ProjectCache] Adding project to path: ${l}`),te(async()=>{const c=await se(B(L,l),{name:a,color:n,ownerId:e,createdAt:ie()});console.log(`[ProjectCache] Successfully added project with ID: ${c.id}`)},{onFinalFailure:()=>{console.error(`[ProjectCache] Failed to add project: ${a}`),Q.setCache(r,s),O.error("ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function Cs(e,r,a,n){const s=Q.getProjects(r),o=s.map(i=>i.id===a?{...i,...n}:i);return Q.setCache(r,o),te(async()=>{const i=M.projects(e,r),l=J(L,i,a);await De(l,n)},{onFinalFailure:()=>{Q.setCache(r,s),O.error("ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function Ss(e,r,a){const n=Q.getProjects(r),s=n.filter(o=>o.id!==a);return Q.setCache(r,s),te(async()=>{const o=M.projects(e,r);await Be(J(L,o,a))},{onFinalFailure:()=>{Q.setCache(r,n),O.error("ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function Ts(e,r,a){const n=Q.getProjects(r);return Q.setCache(r,a),te(async()=>{const s=pt(L),o=M.projects(e,r);a.forEach((i,l)=>{if(i.id&&!i.id.startsWith("temp-")){const c=J(L,o,i.id);s.update(c,{order:l})}}),await s.commit()},{onFinalFailure:()=>{Q.setCache(r,n),O.error("ä¸¦ã³æ›¿ãˆã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}function Vt(){var a;const e=(a=A.currentUser)==null?void 0:a.uid,r=ce();if(!e||!r)throw new Error("Authentication or Workspace required.");return{userId:e,workspaceId:r}}const Ds=e=>{const r=e||ce();return r?vs(r):[]},Es=e=>{const r=e||ce();return r?ws(r):!1},Ls=(e,r)=>{const a=r||ce();a&&js(a,e)},Ms=(e,r)=>{const a=typeof e=="function"?e:r,n=typeof e=="string"?e:ce(),s=A.currentUser;return s&&n&&typeof a=="function"?_s(s.uid,n,a):(typeof a=="function"&&a([]),()=>{})},Is=async(e,r=null,a)=>{const n=A.currentUser;if(!n)throw new Error("Authentication required.");const s=r||ce();if(!s)throw new Error("Workspace selection required.");return Ns(n.uid,s,e,a)},As=async(e,r)=>{const{userId:a,workspaceId:n}=Vt();return Cs(a,n,e,r)},Mr=async e=>{const{userId:r,workspaceId:a}=Vt();return Ss(r,a,e)},Fs=async e=>{const{userId:r,workspaceId:a}=Vt();return Ts(r,a,e)},jt=()=>{const{workspaceId:e,userId:r,loading:a}=ne(),n=wr(),s=x.useCallback(u=>!e||!r?()=>{}:Ms(e,u),[e,r]),i=(e?Es(e):!1)&&e?Ds(e):void 0,{data:l,isPending:c}=Le(["projects",r||void 0,e||void 0],s,i);return{projects:l||[],loading:a||!!e&&c,setProjectsOverride:u=>{e&&(n.setQueryData(["projects",e],u),Ls(u,e))}}},Os=[{id:"tb_morning",name:"06:00 - 09:00",start:"06:00",end:"09:00",color:"#EF4444",order:0},{id:"tb_afternoon",name:"13:00 - 17:00",start:"13:00",end:"17:00",color:"#3B82F6",order:1},{id:"tb_night",name:"20:00 - 22:00",start:"20:00",end:"22:00",color:"#8B5CF6",order:2}],Ne=class Ne{constructor(){$(this,"cacheMap",new Map);$(this,"listeners",new Map);$(this,"unsubscribes",new Map)}static getInstance(){return Ne.instance||(Ne.instance=new Ne),Ne.instance}getBlocks(r){return this.cacheMap.get(r)||[]}isInitialized(r){return this.cacheMap.has(r)}setCache(r,a){this.cacheMap.set(r,a),this.notify(r)}notify(r){const a=this.getBlocks(r),n=this.listeners.get(r);n&&n.forEach(s=>s([...a]))}subscribe(r,a,n){if(!r||!a)return n([]),()=>{};this.listeners.has(a)||this.listeners.set(a,new Set),this.listeners.get(a).add(n);const s=this.cacheMap.get(a);if(s&&queueMicrotask(()=>n([...s])),!this.unsubscribes.has(a)){const o=M.timeblocks(r,a),i=xe(B(L,o),ht("order","asc"));let l=!0;const c=je(i,d=>{const g=d.docs.map(u=>({id:u.id,...u.data()}));if(l&&g.length===0&&!d.metadata.hasPendingWrites){l=!1,Bs(r,a).catch(u=>console.error("[TimeBlocks] Failed to create defaults:",u));return}l=!1,this.cacheMap.set(a,g),this.notify(a)},d=>{console.error("[TimeBlocks] Subscription error:",d)});this.unsubscribes.set(a,c)}return()=>{const o=this.listeners.get(a);o&&o.delete(n)}}};$(Ne,"instance");let Lt=Ne;const _t=Lt.getInstance();async function Bs(e,r){const a=M.timeblocks(e,r),n=pt(L);Os.forEach(s=>{const o=J(L,a,s.id);n.set(o,{name:s.name,start:s.start,end:s.end,color:s.color,order:s.order,updatedAt:ie()})}),await n.commit()}function Rs(e,r){var n;const a=(n=A.currentUser)==null?void 0:n.uid;return _t.subscribe(a,e,r)}function Ps(e){return _t.getBlocks(e)}function Ws(e){return _t.isInitialized(e)}async function $s(e,r){var n;const a=(n=A.currentUser)==null?void 0:n.uid;if(!(!a||!e))try{const s=M.timeblocks(a,e),o=r.id||crypto.randomUUID(),i=_t.getBlocks(e),l=r.order!==void 0?r.order:Math.max(...i.map(d=>d.order||0),-1)+1,c={name:r.name,start:r.start,end:r.end,color:r.color,order:l,updatedAt:ie()};return await br(J(L,s,o),c,{merge:!0}),!0}catch(s){console.error("[TimeBlocks] Save error:",s)}}async function Ir(e,r){var n;const a=(n=A.currentUser)==null?void 0:n.uid;if(!(!a||!e))try{const s=M.timeblocks(a,e);return await Be(J(L,s,r)),!0}catch(s){console.error("[TimeBlocks] Delete error:",s)}}const Qe=()=>{const{workspaceId:e,userId:r,loading:a}=ne(),n=x.useCallback(c=>!e||!r?()=>{}:Rs(e,c),[e,r]),s=e?Ws(e):!1,{data:o,isPending:i}=Le(["timeblocks",r||void 0,e||void 0],n,e&&s?Ps(e):void 0);return{timeBlocks:o||[],loading:a||!!e&&i}};function Yt(e){const r={keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(!e)return r;const a=/(?:-?[a-zA-Z]+:(?:"[^"]*"|[^\s]+))|(?:"[^"]*")|(?:-?[^\s]+)/g,n=e.match(a);if(!n)return r;const s=[];for(let o=0;o<n.length;o++){const i=n[o];if(i==="OR"){const l=s.length-1,c=s[l],d=n[o+1],g=c&&(typeof c=="string"?!c.includes(":"):!0),u=d&&!d.includes(":")&&d!=="OR";if(g&&u){const m=Array.isArray(c)?c:[c];m.push(d.toLowerCase().replace(/^"|"$/g,"")),s[l]=m,o++;continue}}s.push(i)}return s.forEach(o=>{if(Array.isArray(o)){r.keywords.push(o);return}const i=o;if(i.startsWith('"')&&i.endsWith('"')){const l=i.substring(1,i.length-1);l&&r.keywords.push(l.toLowerCase());return}if(i.startsWith("-")&&!i.includes(":")){const l=i.substring(1);l&&r.excludeKeywords.push(l.toLowerCase());return}if(i.includes(":")){let l=!1,c=i;c.startsWith("-")&&(l=!0,c=c.substring(1));const d=c.indexOf(":"),g=c.substring(0,d).toLowerCase();let u=c.substring(d+1);switch(u.startsWith('"')&&u.endsWith('"')&&(u=u.substring(1,u.length-1)),u.toLowerCase(),g){case"project":case"p":l?u.split(",").forEach(h=>r.excludeProjects.push(h)):u.split(",").forEach(h=>r.projects.push(h));break;case"label":case"l":l?u.split(",").forEach(h=>r.excludeLabels.push(h)):u.split(",").forEach(h=>r.labels.push(h));break;case"timeblock":case"tb":l?u.split(",").forEach(h=>r.excludeTimeBlocks.push(h)):u.split(",").forEach(h=>r.timeBlocks.push(h));break;case"duration":case"d":u.split(",").forEach(h=>{const y=parseInt(h,10);isNaN(y)||r.durations.push(y)});break;case"date":case"due":const m=["today","tomorrow","week","upcoming","overdue","next-week"];u.split(",").forEach(h=>{const y=h.toLowerCase();m.includes(y)&&r.dates.push(y)});break;case"status":case"is":const p=["completed","active","todo"];u.split(",").forEach(h=>{const y=h.toLowerCase();p.includes(y)&&(l?r.excludeStatus.push(y):r.status.push(y)),y==="important"&&(r.isImportant=!l),y==="unimportant"&&(r.isImportant=l)});break;default:l?r.excludeKeywords.push(c.toLowerCase()):r.keywords.push(c.toLowerCase());break}}else i!=="OR"&&r.keywords.push(i.toLowerCase())}),r}function zs(e){var a,n,s,o,i,l,c,d,g,u,m,p;const r=[];return(a=e.keywords)!=null&&a.length&&r.push(...e.keywords.map(h=>Array.isArray(h)?h.join(" OR "):h.includes(" ")?`"${h}"`:h)),(n=e.excludeKeywords)!=null&&n.length&&r.push(...e.excludeKeywords.map(h=>`-${h}`)),(s=e.projects)!=null&&s.length&&r.push(`project:${e.projects.join(",")}`),(o=e.excludeProjects)!=null&&o.length&&r.push(`-project:${e.excludeProjects.join(",")}`),(i=e.labels)!=null&&i.length&&r.push(`label:${e.labels.join(",")}`),(l=e.excludeLabels)!=null&&l.length&&r.push(`-label:${e.excludeLabels.join(",")}`),(c=e.timeBlocks)!=null&&c.length&&r.push(`timeblock:${e.timeBlocks.join(",")}`),(d=e.excludeTimeBlocks)!=null&&d.length&&r.push(`-timeblock:${e.excludeTimeBlocks.join(",")}`),(g=e.durations)!=null&&g.length&&r.push(`duration:${e.durations.join(",")}`),(u=e.dates)!=null&&u.length&&r.push(`date:${e.dates.join(",")}`),(m=e.status)!=null&&m.length&&r.push(`status:${e.status.join(",")}`),(p=e.excludeStatus)!=null&&p.length&&r.push(`-status:${e.excludeStatus.join(",")}`),e.isImportant===!0&&r.push("is:important"),e.isImportant===!1&&r.push("is:unimportant"),r.join(" ")}const ye=vr([de(),_(),wa(),va()]),qs=Z({id:_(),title:_().min(1),description:_().nullable().optional(),status:ut(["todo","completed","archived"]).optional(),dueDate:ye,completedAt:ye,createdAt:ye,ownerId:_().optional(),projectId:_().nullable().optional(),labelIds:ge(_()).optional(),timeBlockId:_().nullable().optional(),duration:de().optional(),isImportant:jr().optional(),recurrence:Z({type:ut(["none","daily","weekly","weekdays","monthly"]).optional(),days:ge(de()).optional()}).nullable().optional(),order:de().optional()}).passthrough(),Us=Z({id:_(),name:_().min(1),color:_().optional(),ownerId:_().optional(),createdAt:ye,order:de().optional()}).passthrough(),Ks=Z({id:_(),name:_().min(1),color:_().optional(),ownerId:_().optional(),createdAt:ye}).passthrough(),Hs=Z({id:_(),mode:_(),data:_r(_(),_()),createdAt:ye,updatedAt:ye,ownerId:_().optional(),workspaceId:_().optional()}).passthrough(),Gs=Z({id:_(),name:_().min(1),start:_(),end:_(),color:_().optional(),order:de().optional()}).passthrough(),Vs=Z({id:_(),name:_().min(1),query:_(),createdAt:ye}).passthrough(),Ys=Z({version:_().optional(),exportedAt:_().optional(),userId:_().optional(),workspaceId:_().optional(),tasks:ge(qs).default([]),projects:ge(Us).default([]),labels:ge(Ks).default([]),targets:ge(Hs).default([]),timeBlocks:ge(Gs).default([]),customFilters:ge(Vs).default([])}),Js=e=>e instanceof Date?Te.fromDate(e):e,_e=e=>{if(e!=null){if(typeof e=="number")return new Date(e);if(typeof e=="string")return new Date(e)}};async function Xs(e,r){if(!e||!r)throw new Error("Missing parameters for backup.");try{const a=B(L,M.tasks(e,r)),n=B(L,M.projects(e,r)),s=B(L,M.labels(e,r)),o=B(L,M.targets(e,r)),i=B(L,M.timeblocks(e,r)),l=B(L,M.filters(e,r)),[c,d,g,u,m,p]=await Promise.all([ue(a),ue(n),ue(s),ue(o),ue(i),ue(l)]),h=y=>y.docs.map(f=>{const N=f.data(),b={id:f.id};for(const k in N){const T=N[k];b[k]=T instanceof Te?T.toMillis():T}return b});return{version:"1.4",exportedAt:new Date().toISOString(),userId:e,workspaceId:r,tasks:h(c),projects:h(d),labels:h(g),targets:h(u),timeBlocks:h(m),customFilters:h(p)}}catch(a){throw console.error("[Backup] createBackupData failed:",a),a}}async function Qs(e,r,a){var i;if(!e||!r)throw new Error("Invalid import parameters: userId and workspaceId are required.");if(!a)throw new Error("Invalid import parameters: backupData is required.");const n=Ys.safeParse(a);if(!n.success)throw console.error("[Backup] Validation failed:",n.error.format()),new Error(`ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ãŒä¸æ­£ã§ã™: ${n.error.issues.map(l=>l.message).join(", ")}`);const s=n.data,o=[];try{const{tasks:l,projects:c,labels:d,targets:g,timeBlocks:u,customFilters:m}=s,p=new Map,h=new Map,y=await ue(B(L,M.labels(e,r))),f=new Map;y.forEach(b=>f.set(b.data().name,b.id));for(const b of d)try{const k=(i=b.name)==null?void 0:i.trim();if(!k)continue;if(f.has(k))h.set(b.id,f.get(k));else{const T={...b,name:k};delete T.id;const E=await se(B(L,M.labels(e,r)),T);h.set(b.id,E.id),f.set(k,E.id)}}catch(k){o.push(`ãƒ©ãƒ™ãƒ« "${b.name}" ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}for(const b of c)try{const k={...b};delete k.id,k.createdAt=_e(b.createdAt);const T=await se(B(L,M.projects(e,r)),k);p.set(b.id,T.id)}catch(k){o.push(`ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ "${b.name}" ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}for(const b of u)try{const k={...b};delete k.id,await se(B(L,M.timeblocks(e,r)),k)}catch(k){o.push(`ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ "${b.name}" ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}for(const b of m)try{const k={...b};delete k.id,k.createdAt=_e(b.createdAt),await se(B(L,M.filters(e,r)),k)}catch(k){o.push(`ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ "${b.name}" ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}for(const b of g)try{const k={...b};delete k.id,k.createdAt=_e(b.createdAt),k.updatedAt=_e(b.updatedAt),k.ownerId=e,k.workspaceId=r,await se(B(L,M.targets(e,r)),k)}catch(k){o.push(`ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ (mode: ${b.mode}) ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}const N=l.map(async b=>{try{const k={...b};delete k.id,k.createdAt=_e(b.createdAt);const T=_e(b.dueDate);k.dueDate=T?Js(T):null,k.completedAt=_e(b.completedAt),b.projectId&&p.has(b.projectId)?k.projectId=p.get(b.projectId):k.projectId=null,Array.isArray(b.labelIds)&&(k.labelIds=b.labelIds.map(E=>h.get(E)).filter(E=>!!E)),k.ownerId=e,await se(B(L,M.tasks(e,r)),k)}catch(k){o.push(`ã‚¿ã‚¹ã‚¯ "${b.title}" ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}});return await Promise.all(N),{tasksCount:l.length,projectsCount:c.length,labelsCount:d.length,targetsCount:g.length,timeBlocksCount:u.length,filtersCount:m.length,errors:o}}catch(l){throw console.error("[Backup] importBackupData failed:",l),l}}const He=new Map;function Zs(e){return e?He.get(e)||[]:[]}function en(e){return He.has(e)}function tn(e,r){var o;const a=(o=A.currentUser)==null?void 0:o.uid;if(!a||!e)return He.set(e||"",[]),r([]),()=>{};const n=M.filters(a,e),s=xe(B(L,n));return je(s,i=>{const l=i.docs.map(c=>({id:c.id,...c.data()}));He.set(e,l),r(l)},i=>{console.error("[Filters] Subscription error:",i),He.set(e,[]),r([])})}async function rn(e){var c;const r=(c=A.currentUser)==null?void 0:c.uid;if(!r)throw O.error("èªè¨¼ãŒå¿…è¦ã§ã™"),new Error("Authentication required");const{workspaceId:a,...n}=e;if(!a)throw O.error("ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹IDãŒå¿…è¦ã§ã™"),new Error("Workspace ID required");const s=Tr.pick({name:!0,query:!0}).safeParse(n);if(!s.success){const d=s.error.issues.map(g=>g.message).join(", ");throw console.error("[Filters] Validation failed:",s.error.flatten()),O.error(`ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼: ${d}`),new Error(`Validation failed: ${d}`)}const o=M.filters(r,a),{id:i,...l}=n;await se(B(L,o),{...l,ownerId:r,workspaceId:a,createdAt:ie()})}async function an(e,r,a){var c;const n=(c=A.currentUser)==null?void 0:c.uid;if(!n||!e)throw O.error("èªè¨¼ãŒå¿…è¦ã§ã™"),new Error("Authentication required");const s=Tr.partial().safeParse(a);if(!s.success){const d=s.error.issues.map(g=>g.message).join(", ");throw console.error("[Filters] Validation failed:",s.error.flatten()),O.error(`ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼: ${d}`),new Error(`Validation failed: ${d}`)}const o=M.filters(n,e),{id:i,...l}=a;await De(J(L,o,r),{...l,updatedAt:ie()})}async function sn(e,r){var s;const a=(s=A.currentUser)==null?void 0:s.uid;if(!a||!e)throw O.error("èªè¨¼ãŒå¿…è¦ã§ã™"),new Error("Authentication required");const n=M.filters(a,e);await Be(J(L,n,r))}class nn{constructor(){$(this,"cachedLabelsMap",new Map);$(this,"listeners",new Map);$(this,"unsubscribes",new Map)}isInitialized(r){return this.cachedLabelsMap.has(r)}notifyListeners(r){const a=this.cachedLabelsMap.get(r)||[],n=this.listeners.get(r);if(n){const s=[...a];n.forEach(o=>o(s))}}setCache(r,a){this.cachedLabelsMap.set(r,a),this.notifyListeners(r)}getLabels(r){return this.cachedLabelsMap.get(r)||[]}subscribe(r,a,n){this.listeners.has(a)||this.listeners.set(a,new Set);const s=this.listeners.get(a);s.add(n);const o=this.cachedLabelsMap.get(a);if(o&&queueMicrotask(()=>n([...o])),!this.unsubscribes.has(a)){const i=M.labels(r,a),l=xe(B(L,i));console.log(`[LabelCache] Subscribing to path: ${i}`);const c=je(l,d=>{const g=d.docs.map(u=>({id:u.id,...u.data()}));console.log(`[LabelCache] Received ${g.length} labels from Firestore for workspace: ${a}`),this.cachedLabelsMap.set(a,g),this.notifyListeners(a)},d=>{console.error("[LabelCache] Subscription error:",d),this.cachedLabelsMap.set(a,[]),this.notifyListeners(a)});this.unsubscribes.set(a,c)}return()=>{var i;s.delete(n),s.size===0&&((i=this.unsubscribes.get(a))==null||i(),this.unsubscribes.delete(a),this.listeners.delete(a))}}}const oe=new nn,on=e=>oe.isInitialized(e),ln=e=>oe.getLabels(e);function cn(e,r,a){return!e||!r?(a([]),()=>{}):oe.subscribe(e,r,a)}async function dn(e,r,a,n){const s=oe.getLabels(r),i={id:"temp-"+Date.now(),name:a,color:n,ownerId:e,createdAt:new Date};oe.setCache(r,[...s,i]);const l=M.labels(e,r);return console.log(`[LabelCache] Adding label to path: ${l}`),te(async()=>{await se(B(L,l),{name:a,color:n,ownerId:e,workspaceId:r,createdAt:ie()})},{onFinalFailure:()=>{console.error(`[LabelCache] Failed to add label: ${a}`),oe.setCache(r,s),O.error("ãƒ©ãƒ™ãƒ«ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function un(e,r,a,n){const s=oe.getLabels(r),o=s.map(i=>i.id===a?{...i,...n}:i);return oe.setCache(r,o),te(async()=>{const i=M.labels(e,r),l=J(L,i,a);await De(l,n)},{onFinalFailure:()=>{oe.setCache(r,s),O.error("ãƒ©ãƒ™ãƒ«ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function gn(e,r,a){const n=oe.getLabels(r),s=n.filter(o=>o.id!==a);return oe.setCache(r,s),te(async()=>{const o=M.labels(e,r);await Be(J(L,o,a))},{onFinalFailure:()=>{oe.setCache(r,n),O.error("ãƒ©ãƒ™ãƒ«ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}const mn=ln,hn=e=>e?on(e):!1;function Jt(){var r;const e=(r=A.currentUser)==null?void 0:r.uid;if(!e)throw console.error("Authentication required for label operation."),new Error("Authentication required.");return e}function pn(e,r){var n;const a=(n=A.currentUser)==null?void 0:n.uid;return a&&e?cn(a,e,r):(r([]),()=>{})}async function xn(e,r,a){const n=Jt();if(!e)throw new Error("Workspace ID required");return dn(n,e,r,a)}async function fn(e,r,a){const n=Jt();if(!e)throw new Error("Workspace ID required");return un(n,e,r,a)}async function bn(e,r){const a=Jt();if(!e)throw new Error("Workspace ID required");return gn(a,e,r)}const yn="modulepreload",kn=function(e){return"/"+e},sr={},Ar=function(r,a,n){let s=Promise.resolve();if(a&&a.length>0){let i=function(d){return Promise.all(d.map(g=>Promise.resolve(g).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=i(a.map(d=>{if(d=kn(d),d in sr)return;sr[d]=!0;const g=d.endsWith(".css"),u=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${u}`))return;const m=document.createElement("link");if(m.rel=g?"stylesheet":yn,g||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),g)return new Promise((p,h)=>{m.addEventListener("load",p),m.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return r().catch(o)})};async function wn(e){const r=A.currentUser;if(!r)throw new Error("User not authenticated");const a=M.tasks(r.uid,e),s=(await ue(B(L,a))).docs.map(l=>({id:l.id,...l.data()})),o=new Map;for(const l of s){if(!l.title)continue;const c=l.title.trim(),d=o.get(c)||[];d.push(l),o.set(c,d)}const i=[];for(const[l,c]of o.entries())if(c.length>1){c.sort((g,u)=>{const m=y=>{if(!y)return 0;if(typeof y=="object"&&"toDate"in y&&typeof y.toDate=="function")return y.toDate().getTime();const f=new Date(y);return isNaN(f.getTime())?0:f.getTime()},p=m(g.createdAt),h=m(u.createdAt);return p-h});const d=c.slice(1);for(const g of d)g.id&&i.push(g.id)}if(i.length>0){const{writeBatch:l}=await Ar(async()=>{const{writeBatch:c}=await Promise.resolve().then(()=>Ta);return{writeBatch:c}},void 0);for(let c=0;c<i.length;c+=500){const d=l(L),g=i.slice(c,c+500);for(const u of g)d.delete(J(L,a,u));await d.commit()}}return i.length}class vn{constructor(){$(this,"cachedTargetsMap",new Map);$(this,"listeners",new Map);$(this,"unsubscribes",new Map)}isInitialized(r){return this.cachedTargetsMap.has(r)}notifyListeners(r){const a=this.cachedTargetsMap.get(r)||[],n=this.listeners.get(r);if(n){const s=[...a];n.forEach(o=>o(s))}}setCache(r,a){this.cachedTargetsMap.set(r,a),this.notifyListeners(r)}getTargets(r){return this.cachedTargetsMap.get(r)||[]}subscribe(r,a,n){this.listeners.has(a)||this.listeners.set(a,new Set);const s=this.listeners.get(a);s.add(n);const o=this.cachedTargetsMap.get(a);if(o&&queueMicrotask(()=>n([...o])),!this.unsubscribes.has(a)){const i=M.targets(r,a),l=xe(B(L,i),ht("createdAt","desc"));console.log(`[TargetCache] Subscribing to path: ${i}`);const c=je(l,d=>{const g=d.docs.map(m=>({id:m.id,...m.data()})),u=this.cachedTargetsMap.get(a);u&&fs(u,g)||(console.log(`[TargetCache] Received ${g.length} targets from Firestore for workspace: ${a}`),this.cachedTargetsMap.set(a,g),this.notifyListeners(a))},d=>{console.error("[TargetCache] Subscription error:",d),this.cachedTargetsMap.set(a,[]),this.notifyListeners(a)});this.unsubscribes.set(a,c)}return()=>{var i;s.delete(n),s.size===0&&((i=this.unsubscribes.get(a))==null||i(),this.unsubscribes.delete(a),this.listeners.delete(a))}}}const Ae=new vn,jn=e=>Ae.isInitialized(e),_n=e=>Ae.getTargets(e);function Nn(e,r,a,n){return!e||!r?(a([]),()=>{}):Ae.subscribe(e,r,s=>{a(s)})}async function Cn(e,r,a){const n=Ae.getTargets(r),o={id:"temp-"+Date.now(),mode:a.mode||"",data:a.data||{},ownerId:e,workspaceId:r,createdAt:new Date,updatedAt:new Date,...a};return Ae.setCache(r,[o,...n]),te(async()=>{const i=M.targets(e,r),l={...a,ownerId:e,workspaceId:r,createdAt:ie(),updatedAt:ie()};delete l.id,await se(B(L,i),l)},{onFinalFailure:()=>{console.error("[TargetCache] Failed to add target"),Ae.setCache(r,n),O.error("ç›®æ¨™ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}function Sn(){var r;const e=(r=A.currentUser)==null?void 0:r.uid;if(!e)throw new Error("Authentication required.");return e}const Tn=e=>{const r=e||ce();return r?_n(r):[]},Dn=e=>{const r=e||ce();return r?jn(r):!1},En=(e,r,a)=>{let n,s;typeof e=="function"?(n=e,s=ce()||void 0):(s=e,n=r);const o=A.currentUser;return o&&s&&typeof n=="function"?Nn(o.uid,s,n):(typeof n=="function"&&n([]),()=>{})},Ln=async(e,r)=>{const a=Sn();if(!e)throw new Error("Workspace ID required.");return Cn(a,e,r)},Ct=e=>e instanceof Te?e.toDate():e instanceof Date?e:void 0,Fr=e=>e instanceof Date?Te.fromDate(e):e;function Mn(e,r){if(!r||typeof r!="object")return console.warn(`[deserializeTask] Invalid data for task ${e}:`,r),{id:e,title:"Invalid Task",status:"todo",ownerId:""};const a=r.recurrence||null,n={id:e,title:String(r.title||"Untitled"),description:r.description?String(r.description):null,status:r.status==="completed"||r.status==="todo"||r.status==="archived"?r.status:"todo",dueDate:Ct(r.dueDate)||void 0,createdAt:Ct(r.createdAt)||void 0,completedAt:Ct(r.completedAt)||void 0,ownerId:String(r.ownerId||""),projectId:r.projectId?String(r.projectId):null,labelIds:Array.isArray(r.labelIds)?r.labelIds.map(String):[],timeBlockId:r.timeBlockId?String(r.timeBlockId):null,duration:typeof r.duration=="number"?r.duration:null,isImportant:!!r.isImportant,recurrence:a};return Kt.safeParse(n).success,n}const Ce=class Ce{constructor(){$(this,"cachedTasksMap",new Map);$(this,"listeners",new Map);$(this,"unsubscribes",new Map);$(this,"currentWorkspaceId",null)}static getInstance(){return Ce.instance||(Ce.instance=new Ce),Ce.instance}notifyListeners(r){const a=this.cachedTasksMap.get(r)||[],n=this.listeners.get(r);if(n){const s=[...a];n.forEach(o=>o(s))}}reset(r){var a;r?((a=this.unsubscribes.get(r))==null||a(),this.unsubscribes.delete(r),this.listeners.delete(r),this.cachedTasksMap.delete(r)):(this.unsubscribes.forEach(n=>n()),this.unsubscribes.clear(),this.listeners.clear(),this.cachedTasksMap.clear()),this.currentWorkspaceId=null}getTask(r,a){const n=this.cachedTasksMap.get(r);return n==null?void 0:n.find(s=>s.id===a)}getTasks(r){return this.cachedTasksMap.get(r)||[]}isInitialized(r){return this.cachedTasksMap.has(r)}setCache(r,a){this.cachedTasksMap.set(r,a),this.notifyListeners(r)}subscribe(r,a,n,s){if(!r||!a)return n([]),()=>{};this.currentWorkspaceId=a,this.listeners.has(a)||this.listeners.set(a,new Set);const o=this.listeners.get(a);o.add(n);const i=this.cachedTasksMap.get(a);if(i&&queueMicrotask(()=>n([...i])),!this.unsubscribes.has(a)){const l=M.tasks(r,a),c=xe(B(L,l)),d=je(c,g=>{const u=g.docs.map(p=>Mn(p.id,p.data())),m=this.cachedTasksMap.get(a);m&&bs(m,u)||(this.cachedTasksMap.set(a,u),this.notifyListeners(a))},g=>{console.error("[Tasks] Subscription error:",g),s&&s(g)});this.unsubscribes.set(a,d)}return()=>{if(o.delete(n),o.size===0){const l=this.unsubscribes.get(a);l&&(l(),this.unsubscribes.delete(a))}}}};$(Ce,"instance");let Mt=Ce;const ee=Mt.getInstance();function Or(e,r){return ee.getTask(e,r)}function In(e){return ee.getTasks(e)}function An(e){return ee.isInitialized(e)}function Fn(e,r,a,n){return ee.subscribe(e,r,a,n)}function Br(e){return Object.fromEntries(Object.entries(e).filter(([r,a])=>a!==void 0))}async function On(e,r,a){const n=new Map;a.forEach((o,i)=>n.set(o,i));const s=ee.getTasks(r);if(s&&s.length>0){const o=s.map(i=>{const l=n.get(i.id);return l!==void 0?{...i,order:l}:i});o.sort((i,l)=>{const c=i.order??Number.MAX_SAFE_INTEGER,d=l.order??Number.MAX_SAFE_INTEGER;return c-d}),ee.setCache(r,o)}return te(async()=>{const o=M.tasks(e,r),i=[];for(let l=0;l<a.length;l+=500)i.push(a.slice(l,l+500));for(const l of i){const c=pt(L);l.forEach(d=>{const g=n.get(d),u=J(L,o,d);c.update(u,{order:g})}),await c.commit()}})}async function Rr(e,r,a){return te(async()=>{const n=M.tasks(e,r),s=Br({...a});return s.dueDate&&(s.dueDate=Fr(s.dueDate)),delete s.id,await se(B(L,n),{...s,ownerId:e,status:"todo",createdAt:ie()})})}async function Bn(e,r,a,n){const s=ee.getTasks(r);if(s==null||s.find(o=>o.id===a),s){const o=s.map(i=>i.id===a?{...i,status:n,completedAt:n==="completed"?new Date:void 0}:i);ee.setCache(r,o)}return te(async()=>{const o=M.tasks(e,r),i={status:n};n==="completed"?i.completedAt=ie():i.completedAt=null,await De(J(L,o,a),i)},{onFinalFailure:()=>{s&&ee.setCache(r,s),O.error("ã‚¿ã‚¹ã‚¯ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function Rn(e,r,a,n){const s=ee.getTasks(r);if(s){const o=s.map(i=>i.id===a?{...i,...n}:i);ee.setCache(r,o)}return te(async()=>{const o=M.tasks(e,r),i=Br({...n});i.dueDate!==void 0&&(i.dueDate=Fr(i.dueDate)),await De(J(L,o,a),i)},{onFinalFailure:()=>{s&&ee.setCache(r,s),O.error("ã‚¿ã‚¹ã‚¯ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function Pn(e,r,a){const n=ee.getTasks(r);if(n){const s=n.filter(o=>o.id!==a);ee.setCache(r,s)}return te(async()=>{const s=M.tasks(e,r);await Be(J(L,s,a))},{onFinalFailure:()=>{n&&ee.setCache(r,n),O.error("ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}const ve=()=>Re(ae.getState().language).t;function $e(){var a;const e=(a=A.currentUser)==null?void 0:a.uid,r=ce();if(!e||!r)throw new Error("Authentication or Workspace required.");return{userId:e,workspaceId:r}}async function Pr(e){try{const{userId:r,workspaceId:a}=$e(),s=Kt.partial().required({title:!0}).safeParse(e);s.success||console.warn("[addTask] Validation warning:",s.error.flatten()),await Rr(r,a,e)}catch(r){throw console.error("Failed to add task:",r),O.error(ve()("msg.task.create_fail")),r}}async function Wn(e,r){try{const{userId:a,workspaceId:n}=$e();if(r==="completed"){const s=Or(n,e);if(s!=null&&s.recurrence&&s.recurrence.type!=="none"){const{getNextRecurrenceDate:o}=await Ar(async()=>{const{getNextRecurrenceDate:l}=await Promise.resolve().then(()=>to);return{getNextRecurrenceDate:l}},void 0),i=o(s.dueDate??null,s.recurrence);if(i){const l={title:s.title,description:s.description,projectId:s.projectId,labelIds:s.labelIds,timeBlockId:s.timeBlockId,duration:s.duration,isImportant:s.isImportant,recurrence:s.recurrence,dueDate:i,status:"todo"};Rr(a,n,l).catch(c=>console.error("Failed to create recurring task:",c))}}}await Bn(a,n,e,r)}catch(a){throw console.error("Failed to update status:",a),O.error(ve()("msg.task.status_update_fail")),a}}async function Xt(e,r){try{const{userId:a,workspaceId:n}=$e(),s=Kt.partial().safeParse(r);s.success||console.warn("[updateTask] Validation warning:",s.error.flatten()),await Rn(a,n,e,r)}catch(a){throw console.error("Failed to update task:",a),O.error(ve()("msg.task.update_fail")),a}}async function $n(e){try{const{userId:r,workspaceId:a}=$e();await On(r,a,e)}catch(r){throw console.error("Failed to reorder tasks:",r),O.error(ve()("msg.task.update_fail")),r}}async function zn(e){try{const{userId:r,workspaceId:a}=$e();await Pn(r,a,e),O.success(ve()("msg.task.delete_success"))}catch(r){throw console.error("Failed to delete task:",r),O.error(ve()("msg.task.delete_fail")),r}}async function qn(e,r){try{const{userId:a,workspaceId:n}=$e(),s=Or(n,e),i=((s==null?void 0:s.status)||r||"todo")==="completed"?"todo":"completed";await Wn(e,i),i==="completed"&&O.success(ve()("msg.task.complete_success"))}catch(a){throw console.error("Failed to toggle status:",a),O.error(ve()("msg.task.status_update_fail")),a}}function Un(e,r,a){const n=A.currentUser;return!n||!e?(typeof r=="function"&&r([]),()=>{}):Fn(n.uid,e,r,a)}const Kn=e=>{const r=e||ce();return r?In(r):[]},Hn=e=>{const r=e||ce();return r?An(r):!1},ze=({message:e,id:r,className:a})=>e?t.jsxs("div",{id:r,role:"alert",className:`p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center justify-center gap-2 ${a||""}`,children:[t.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.jsx("span",{children:e})]}):null,nr='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',fe=({isOpen:e,onClose:r,title:a,children:n,className:s,overlayClassName:o,zIndex:i=100,size:l="md"})=>{const{t:c}=F(),d=x.useRef(null),g={sm:"max-w-full sm:max-w-sm",md:"max-w-full sm:max-w-lg",lg:"max-w-full sm:max-w-3xl",xl:"max-w-full sm:max-w-5xl",full:"max-w-full m-0 sm:m-4 h-[100dvh] sm:h-[calc(100vh-2rem)]"};return x.useEffect(()=>{const u=p=>{p.key==="Escape"&&r()},m=p=>{if(p.key!=="Tab"||!d.current)return;const h=d.current.querySelectorAll(nr);if(h.length===0){p.preventDefault();return}const y=h[0],f=h[h.length-1];p.shiftKey?document.activeElement===y&&(p.preventDefault(),f.focus()):document.activeElement===f&&(p.preventDefault(),y.focus())};if(e){window.addEventListener("keydown",u),window.addEventListener("keydown",m),document.body.style.overflow="hidden";const p=setTimeout(()=>{var y;const h=(y=d.current)==null?void 0:y.querySelectorAll(nr);h&&h.length>0?h[0].focus():d.current&&d.current.focus()},50);return()=>clearTimeout(p)}return()=>{window.removeEventListener("keydown",u),window.removeEventListener("keydown",m),document.body.style.overflow=""}},[e,r]),e?Bt.createPortal(t.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-0 sm:p-4",style:{zIndex:i},role:"dialog","aria-modal":"true","aria-labelledby":a?"modal-title":void 0,children:[t.jsx("div",{className:C("fixed inset-0 backdrop-blur-sm transition-opacity",o??"bg-black/50"),onClick:r,"aria-hidden":"true"}),t.jsxs("div",{ref:d,tabIndex:-1,className:C("relative bg-white dark:bg-gray-800 rounded-none sm:rounded-xl shadow-md w-full overflow-hidden flex flex-col outline-none max-h-[100dvh] sm:max-h-[90vh]",g[l],s),children:[a&&t.jsxs("div",{className:"px-3 py-2 sm:px-modal sm:py-3 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[t.jsx("h3",{id:"modal-title",className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white truncate",children:a}),t.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 shrink-0","aria-label":c("close"),children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-modal custom-scrollbar",children:n})]})]}),document.body):null};function nt({title:e,items:r,selectedItems:a,onToggle:n,labelFn:s=o=>o.name??o.id??String(o)}){return t.jsxs("div",{className:"flex flex-col min-h-[10rem] max-h-64 border border-gray-100 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-900",children:[t.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700 text-xs font-bold text-gray-500 uppercase tracking-wider shrink-0",children:e}),t.jsx("div",{className:"p-2 overflow-y-auto space-y-1 custom-scrollbar flex-1",children:r.map(o=>{const i=o.id||o.toString(),l=a.includes(i),c=`filter-${e.replace(/ /g,"-")}-${i}`,d=s(o);return t.jsxs("div",{className:"flex items-center px-2 py-1.5 rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",onClick:()=>n(i),children:[t.jsx("input",{id:c,type:"checkbox",checked:l,onChange:()=>{},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer","aria-label":`${e}: ${d}`}),t.jsx("label",{htmlFor:c,className:"ml-2 text-sm text-gray-700 dark:text-gray-300 truncate flex-1 cursor-pointer pointer-events-none",children:d})]},i)})})]})}const dt="none",Gn=e=>{const r=Yt(e);return{project:r.projects,timeblock:r.timeBlocks.map(a=>a==="null"||a==="none"?dt:a),duration:r.durations.map(a=>a.toString()),date:r.dates}},Vn=[30,45,60,75,90],Yn=({isOpen:e,data:r,zIndex:a,overlayClassName:n})=>{const{t:s}=F(),{closeModal:o}=K(),i=!!e,l=r,c=!!(l!=null&&l.id),{projects:d}=jt(),{timeBlocks:g}=Qe(),{workspaceId:u}=ne(),[m,p]=x.useState(""),[h,y]=x.useState({project:[],timeblock:[],duration:[],date:[]}),[f,N]=x.useState(!1),[b,k]=x.useState(null),T=q.useRef(null);x.useEffect(()=>{i&&(p((l==null?void 0:l.name)||""),y(Gn((l==null?void 0:l.query)||"")),k(null),N(!1))},[i,l]),x.useEffect(()=>{var w;b&&((w=T.current)==null||w.focus())},[b]);const E=(w,v)=>{y(I=>{const D=I[w],P=D.includes(v)?D.filter(U=>U!==v):[...D,v];return{...I,[w]:P}})},R=x.useCallback(async()=>{const w=m.trim();if(!w){k(s("validation.filter_name_required"));return}const v=zs({projects:h.project,timeBlocks:h.timeblock.map(I=>I===dt?"null":I),durations:h.duration.map(Number),dates:h.date});if(!v){k(s("validation.filter_condition_required"));return}N(!0),k(null);try{if(!u){k(s("validation.workspace_required")),N(!1);return}const I={name:w,query:v,type:"custom"};c&&(l!=null&&l.id)?await an(u,l.id,I):await rn({...I,workspaceId:u}),o()}catch(I){k(s("validation.save_fail")+": "+(I.message||"Error")),N(!1)}},[m,h,c,l,o,s]),S=w=>{w.key==="Enter"&&!w.nativeEvent.isComposing&&(!f&&m.trim()&&R(),w.preventDefault())};return i?t.jsx(fe,{isOpen:i,onClose:o,title:s(c?"modal.edit":"modal.create"),className:"max-w-4xl",zIndex:a,overlayClassName:n,children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"filter-name-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s("filter")}),t.jsx("input",{ref:T,id:"filter-name-input",name:"filterName",type:"text",value:m,onChange:w=>p(w.target.value),onKeyDown:S,placeholder:s("modal.filter_name_placeholder"),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg outline-none focus:ring-2 focus:ring-blue-500/20 dark:text-white",autoFocus:!0})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(nt,{title:s("project"),items:d,selectedItems:h.project,onToggle:w=>E("project",w)}),t.jsx(nt,{title:s("timeblock"),items:[...g,{id:dt,name:s("sidebar.unassigned")}],selectedItems:h.timeblock,onToggle:w=>E("timeblock",w),labelFn:w=>w.id===dt||!w.start?w.name:`${w.start}-${w.end}`}),t.jsx(nt,{title:s("modal.duration"),items:Vn.map(w=>({id:w.toString(),name:`${w} min`})),selectedItems:h.duration,onToggle:w=>E("duration",w)}),t.jsx(nt,{title:s("modal.due_date"),items:[{id:"today",name:s("date_options.today")},{id:"tomorrow",name:s("date_options.tomorrow")},{id:"week",name:s("date_options.week")},{id:"next-week",name:s("date_options.next_week")}],selectedItems:h.date,onToggle:w=>E("date",w)})]}),t.jsx(ze,{message:b}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[t.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition",children:s("modal.cancel")}),t.jsx("button",{onClick:R,disabled:f,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg transition-colors disabled:opacity-50",children:f?"...":s(c?"modal.save":"modal.create")})]})]})}):null},Y=x.forwardRef(({className:e,variant:r="primary",size:a="md",isLoading:n,leftIcon:s,rightIcon:o,children:i,disabled:l,...c},d)=>{const g={primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg shadow-blue-500/30 border border-transparent",secondary:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 border border-transparent",danger:"bg-red-500 hover:bg-red-600 text-white shadow-md shadow-red-500/30 border border-transparent",ghost:"bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",outline:"bg-transparent border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800",premium:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg shadow-blue-500/40 border border-transparent"},u={sm:"text-xs px-3 py-1.5 rounded-lg gap-1.5",md:"text-sm px-4 py-2 rounded-lg gap-2",lg:"text-base px-6 py-3 rounded-xl gap-2.5",icon:"p-2 rounded-full aspect-square flex items-center justify-center"};return t.jsxs("button",{ref:d,className:C("flex items-center justify-center font-bold transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",g[r],u[a],e),disabled:l||n,...c,children:[n&&t.jsx(Ha,{className:"-ml-1 text-currentColor",size:16}),!n&&s,i,!n&&o]})});Y.displayName="Button";const Ye=x.forwardRef(({className:e,label:r,error:a,leftIcon:n,rightIcon:s,containerClassName:o,id:i,...l},c)=>t.jsxs("div",{className:C("flex flex-col gap-1.5",o),children:[r&&t.jsx("label",{htmlFor:i,className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:r}),t.jsxs("div",{className:"relative group",children:[n&&t.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 z-10 pointer-events-none",children:n}),t.jsx("input",{ref:c,id:i,className:C("w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border rounded-xl px-4 py-2.5 outline-none transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600","focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",a?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 group-hover:border-gray-300 dark:group-hover:border-gray-600",n&&"pl-10",s&&"pr-10",e),"aria-invalid":!!a,"aria-describedby":a&&i?`${i}-error`:void 0,...l}),s&&t.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 z-10 pointer-events-none",children:s})]}),a&&t.jsx("p",{id:i?`${i}-error`:void 0,className:"text-xs text-red-500 font-medium animate-fade-in-down",children:a})]}));Ye.displayName="Input";const Jn=({isOpen:e,data:r,zIndex:a,overlayClassName:n})=>{const{t:s}=F(),{closeModal:o,openModal:i}=K(),l=!!e,c=r,d=!!(c!=null&&c.id),{workspaceId:g}=ne(),[u,m]=x.useState(""),[p,h]=x.useState("#42A5F5"),[y,f]=x.useState(!1),[N,b]=x.useState(null),k=q.useRef(null);x.useEffect(()=>{l&&(m((c==null?void 0:c.name)||""),h((c==null?void 0:c.color)||me[Math.floor(Math.random()*me.length)].value),b(null),f(!1))},[l,c]),x.useEffect(()=>{var S;N&&((S=k.current)==null||S.focus())},[N]);const T=x.useCallback(async()=>{const S=u.trim();if(!S){b(s("validation.label_name_required"));return}f(!0),b(null);try{if(!g){b(s("validation.label_workspace_required")),f(!1);return}d&&(c!=null&&c.id)?await fn(g,c.id,{name:S,color:p}):await xn(g,S,p),o()}catch(w){b(s("validation.save_fail")+": "+(w.message||"Error")),f(!1)}},[u,p,d,c,o,s]),E=x.useCallback(async()=>{c!=null&&c.id&&i("confirmation",{title:s("delete"),message:s("modal.label_delete_confirm").replace("{name}",c.name),confirmLabel:s("delete"),variant:"danger",onConfirm:async()=>{f(!0);try{g&&(c!=null&&c.id)&&await bn(g,c.id),o()}catch{b(s("validation.delete_fail")),f(!1)}}})},[c,o,i,g,s]),R=S=>{S.key==="Enter"&&!S.nativeEvent.isComposing&&(!y&&u.trim()&&T(),S.preventDefault())};return l?t.jsx(fe,{isOpen:l,onClose:o,className:"max-w-sm",zIndex:a,overlayClassName:n,children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex-shrink-0 border-2 border-gray-100 dark:border-gray-700 shadow-sm",style:{backgroundColor:p}}),t.jsx("div",{className:"flex-1",children:t.jsx(Ye,{ref:k,id:"label-name-input",name:"labelName",type:"text",label:s("modal.label_name"),value:u,onChange:S=>m(S.target.value),onKeyDown:R,placeholder:s(d?"modal.label_name_placeholder":"modal.label_create_placeholder"),className:"bg-transparent border-none text-lg font-bold p-0 focus:ring-0 focus:border-transparent px-0 py-0 rounded-none h-auto",containerClassName:"gap-0",autoFocus:!0,"aria-invalid":!!N,"aria-describedby":N?"label-error-msg":void 0})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:s("modal.theme_color")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:me.map(S=>t.jsx("button",{type:"button",onClick:()=>h(S.value),className:C("w-6 h-6 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",p===S.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800":""),style:{backgroundColor:S.value},"aria-label":s(`colors.${S.key}`),"aria-pressed":p===S.value},S.value))})]}),t.jsx(ze,{message:N}),t.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"flex items-center gap-2",children:d&&t.jsx(Y,{onClick:E,disabled:y,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20","aria-label":s("modal.delete_label"),title:s("modal.delete_label"),children:t.jsx(Pe,{size:20})})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(Y,{onClick:o,disabled:y,variant:"ghost",children:s("modal.cancel")}),t.jsx(Y,{onClick:T,disabled:y||!u.trim(),isLoading:y,variant:"primary",children:s(d?"modal.save":"modal.create")})]})]})]})}):null},Xn=({isOpen:e,data:r,zIndex:a,overlayClassName:n})=>{const{t:s}=F(),{closeModal:o,openModal:i}=K(),{currentWorkspaceId:l}=We(),c=!!e,d=r,g=!!(d!=null&&d.id),[u,m]=x.useState(""),[p,h]=x.useState("#7E57C2"),[y,f]=x.useState(!1),[N,b]=x.useState(null),k=q.useRef(null);x.useEffect(()=>{c&&(m((d==null?void 0:d.name)||""),h((d==null?void 0:d.color)||me[3].value),b(null),f(!1))},[c,d]),x.useEffect(()=>{var S;N&&((S=k.current)==null||S.focus())},[N]);const T=x.useCallback(async()=>{const S=u.trim();if(!S){b(s("validation.project_name_required"));return}if(!l&&!g){b(s("validation.workspace_required"));return}f(!0),b(null);try{g&&(d!=null&&d.id)?await As(d.id,{name:S,color:p}):l&&await Is(S,l,p),o()}catch(w){b(s("validation.save_fail")+": "+(w.message||"Error")),f(!1)}},[u,p,g,d,l,o,s]),E=x.useCallback(async()=>{d!=null&&d.id&&i("confirmation",{title:s("delete"),message:s("modal.project_delete_confirm").replace("{name}",d.name),confirmLabel:s("delete"),variant:"danger",onConfirm:async()=>{f(!0);try{await Mr(d.id),o()}catch{b(s("validation.delete_fail")),f(!1)}}})},[d,o,i,s]),R=S=>{S.key==="Enter"&&!S.nativeEvent.isComposing&&(!y&&u.trim()&&T(),S.preventDefault())};return c?t.jsx(fe,{isOpen:c,onClose:o,className:"max-w-sm",zIndex:a,overlayClassName:n,children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-500 shrink-0",children:t.jsx(Sr,{size:20})}),t.jsx("div",{className:"flex-1",children:t.jsx(Ye,{ref:k,id:"project-name-input",name:"projectName",type:"text",label:s("modal.project_name"),value:u,onChange:S=>m(S.target.value),onKeyDown:R,placeholder:s("modal.project_name_placeholder"),className:"bg-transparent border-none text-lg font-bold p-0 focus:ring-0 focus:border-transparent px-0 py-0 rounded-none h-auto",containerClassName:"gap-0",autoFocus:!0,"aria-describedby":N?"project-error-msg":void 0})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:s("modal.theme_color")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:me.map(S=>t.jsx("button",{type:"button",onClick:()=>h(S.value),className:C("w-6 h-6 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",p===S.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800":""),style:{backgroundColor:S.value},"aria-label":s(`colors.${S.key}`),"aria-pressed":p===S.value},S.value))})]}),t.jsx(ze,{message:N,id:"project-error-msg"}),t.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"flex items-center gap-2",children:g&&t.jsx("button",{onClick:E,disabled:y,className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50","aria-label":s("modal.delete_project"),title:s("modal.delete_project"),children:t.jsx(Pe,{size:20})})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(Y,{onClick:o,disabled:y,variant:"ghost",children:s("modal.cancel")}),t.jsx(Y,{onClick:T,disabled:y,isLoading:y,variant:"primary",children:s(g?"modal.save":"modal.create")})]})]})]})}):null},Ue=({title:e,children:r,defaultOpen:a=!1,icon:n,className:s})=>{const[o,i]=x.useState(a);return t.jsxs("section",{className:C("border border-gray-200 dark:border-gray-700/50 rounded-xl overflow-hidden",s),children:[t.jsxs("button",{onClick:()=>i(!o),className:"w-full flex items-center justify-between p-4 bg-gray-50/50 dark:bg-gray-800/30 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors text-left",type:"button","aria-expanded":o,"aria-controls":`accordion-panel-${e.replace(/\s+/g,"-").toLowerCase()}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[n&&t.jsx("span",{className:"text-lg",children:n}),t.jsx("h4",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:e})]}),t.jsx("svg",{className:C("w-4 h-4 text-gray-400 transition-transform duration-200",o&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsx("div",{id:`accordion-panel-${e.replace(/\s+/g,"-").toLowerCase()}`,className:C("transition-all duration-100 ease-in-out overflow-hidden bg-white dark:bg-transparent",o?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"),children:t.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700/30",children:r})})]})},Qn=()=>{const{t:e}=F(),{user:r}=Gt(),{openModal:a}=K(),[n,s]=x.useState(""),[o,i]=x.useState(""),[l,c]=x.useState(!1),[d,g]=x.useState(!1),[u,m]=x.useState(null);if(!r)return t.jsx("div",{className:"text-center text-gray-500",children:e("settings_modal.account.not_logged_in")});const p=r.isAnonymous,h=async f=>{f.preventDefault(),g(!0),m(null);try{const N=yr.credential(n,o);await kr(r,N),O.success(e("settings_modal.account.register_success"))}catch(N){console.error("Link account error:",N);let b=e("settings_modal.account.register_fail");N.code==="auth/email-already-in-use"&&(b=e("settings_modal.account.already_in_use")),N.code==="auth/weak-password"&&(b=e("settings_modal.account.weak_password")),m(b)}finally{g(!1)}},y=()=>{a("confirmation",{title:e("settings_modal.account.logout"),message:e("settings_modal.account.logout_confirm"),confirmLabel:e("settings_modal.account.logout"),variant:"danger",onConfirm:async()=>{await Ot(A),window.location.reload()}})};return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-2xl p-6 flex flex-col sm:flex-row items-center gap-8 sm:gap-6 border border-gray-100 dark:border-gray-700",children:[t.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-3xl shrink-0",children:p?"ğŸ•µï¸":"ğŸ‘¤"}),t.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:p?e("settings_modal.account.guest_user"):r.displayName||e("settings_modal.account.registered_user")}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono mb-4 break-all",children:p?`ID: ${r.uid.slice(0,8)}...`:r.email}),!p&&t.jsx("button",{onClick:y,className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 text-sm font-bold px-4 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border border-transparent hover:border-red-100 dark:hover:border-red-900/30",children:e("settings_modal.account.logout")})]})]}),p?t.jsxs("div",{className:"border border-blue-200 dark:border-blue-800 bg-blue-50/50 dark:bg-blue-900/10 rounded-2xl p-8 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:t.jsx("svg",{className:"w-32 h-32 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),t.jsxs("div",{className:"relative",children:[t.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ”"})," ",e("settings_modal.account.persist_account")]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6 leading-relaxed whitespace-pre-wrap",children:e("settings_modal.account.persist_desc")}),t.jsxs("form",{onSubmit:h,className:"space-y-4 max-w-md",children:[u&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-lg font-medium",children:u}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"account-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:e("settings_modal.account.email_label")}),t.jsx("input",{id:"account-email",type:"email",required:!0,value:n,onChange:f=>s(f.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"mail@example.com",autoComplete:"email"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"account-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:e("settings_modal.account.password_label")}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:"account-password",type:l?"text":"password",required:!0,minLength:6,value:o,onChange:f=>i(f.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all pr-12",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",autoComplete:"new-password"}),t.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none p-1","aria-label":e(l?"settings_modal.account.hide_password":"settings_modal.account.show_password"),children:l?t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),t.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-colors flex items-center justify-center gap-2",children:d?e("settings_modal.account.registering"):t.jsxs(t.Fragment,{children:[e("settings_modal.account.register"),t.jsx("span",{children:"â†’"})]})})]})]})]}):t.jsx("div",{className:"text-center py-8 text-gray-400",children:t.jsx("p",{children:e("settings_modal.account.registered_msg")})})]})},ot=({active:e,onClick:r,label:a,icon:n})=>t.jsxs("button",{onClick:r,className:C("flex items-center gap-2 px-4 py-2 text-sm rounded-lg transition-all whitespace-nowrap min-w-0","md:w-full md:justify-start md:text-left md:py-2","flex-col w-full justify-center py-3 text-[10px] gap-1 rounded-none md:rounded-lg md:text-sm md:flex-row md:gap-3",e?"bg-white dark:bg-gray-800 shadow-sm text-blue-600 dark:text-blue-400 font-bold border-t-2 md:border-t-0 md:border md:border-gray-100 dark:md:border-gray-700 border-blue-500 md:border-transparent":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-200 border-t-2 md:border-t-0 border-transparent"),children:[t.jsx("span",{className:"text-lg md:text-base",children:n}),t.jsx("span",{className:"truncate font-medium",children:a})]}),Zn=({isOpen:e,zIndex:r,overlayClassName:a})=>{const{t:n}=F(),{closeModal:s,openModal:o}=K(),{themeMode:i,setThemeMode:l,density:c,setDensity:d,fontSize:g,setFontSize:u,fontEn:m,setFontEn:p,fontJp:h,setFontJp:y,language:f,setLanguage:N}=ae(),{currentWorkspaceId:b}=We(),[k,T]=x.useState("appearance"),[E,R]=x.useState(!1),S=!!e;return t.jsx(fe,{isOpen:S,onClose:s,title:n("settings_modal.title"),className:"w-full max-w-4xl h-[90vh] md:h-[85vh] p-0 overflow-hidden",zIndex:r,overlayClassName:a,children:t.jsxs("div",{className:"flex flex-col md:flex-row h-full",children:[t.jsx("div",{className:"order-last md:order-first w-full md:w-64 bg-white dark:bg-gray-900 md:bg-gray-50/50 md:dark:bg-gray-900/50 border-t md:border-t-0 md:border-r border-gray-200 dark:border-gray-700 shrink-0 z-10",children:t.jsxs("div",{className:"flex flex-row md:flex-col justify-around md:justify-start md:p-4 md:space-y-2 pb-safe md:pb-4",children:[t.jsx(ot,{active:k==="general",onClick:()=>T("general"),label:n("settings_modal.tabs.general"),icon:"âš™ï¸"}),t.jsx(ot,{active:k==="appearance",onClick:()=>T("appearance"),label:n("settings_modal.tabs.appearance"),icon:"ğŸ¨"}),t.jsx(ot,{active:k==="account",onClick:()=>T("account"),label:n("settings_modal.tabs.account"),icon:"ğŸ‘¤"}),t.jsx(ot,{active:k==="advanced",onClick:()=>T("advanced"),label:n("settings_modal.tabs.advanced"),icon:"âš¡"})]})}),t.jsxs("div",{className:"flex-1 p-4 md:p-8 overflow-y-auto custom-scrollbar bg-white dark:bg-gray-900 order-first md:order-last relative",children:[k==="appearance"&&t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx(Ue,{title:n("settings_modal.appearance.theme"),icon:"ğŸŒ“",defaultOpen:!1,children:t.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","system"].map(w=>t.jsx("button",{onClick:()=>l(w),className:C("p-3 border rounded-xl text-sm font-medium transition-all",i===w?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-white dark:hover:bg-gray-800 bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400"),children:t.jsx("span",{className:"capitalize",children:n(`settings_modal.options.theme.${w}`)})},w))})}),t.jsx(Ue,{title:n("settings_modal.appearance.density"),icon:"ğŸ“",defaultOpen:!1,children:t.jsx("div",{className:"space-y-3",children:["compact","normal","comfortable","spacious"].map(w=>t.jsxs("label",{htmlFor:`density-${w}`,className:C("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors",c===w?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-transparent hover:bg-white dark:hover:bg-gray-800"),children:[t.jsx("div",{className:C("w-4 h-4 rounded-full border flex items-center justify-center",c===w?"border-blue-500 bg-blue-500":"border-gray-300"),children:c===w&&t.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),t.jsx("input",{id:`density-${w}`,type:"radio",name:"density",checked:c===w,onChange:()=>d(w),className:"hidden"}),t.jsx("span",{className:"capitalize text-sm font-medium text-gray-700 dark:text-gray-300",children:n(`settings_modal.options.density.${w}`)})]},w))})}),t.jsx(Ue,{title:n("settings_modal.appearance.font_size"),icon:"Aa",defaultOpen:!1,children:t.jsx("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:["sm","base","md","lg","xl"].map(w=>t.jsx("button",{onClick:()=>u(w),className:C("flex-1 py-1.5 px-3 rounded text-sm font-medium transition-all",g===w?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:w},w))})}),t.jsx(Ue,{title:n("settings_modal.appearance.fonts"),icon:"Tt",defaultOpen:!1,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"settings-font-en",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:n("settings_modal.appearance.font_en")}),t.jsxs("div",{className:"relative",children:[t.jsx("select",{id:"settings-font-en",name:"fontEn",value:m,onChange:w=>p(w.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none relative z-10 bg-transparent",children:z.FONTS.EU.map(w=>t.jsx("option",{value:w.value,children:w.label},w.value))}),t.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 z-0",children:t.jsx(Ge,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"settings-font-jp",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:n("settings_modal.appearance.font_jp")}),t.jsxs("div",{className:"relative",children:[t.jsx("select",{id:"settings-font-jp",name:"fontJp",value:h,onChange:w=>y(w.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none relative z-10 bg-transparent",children:z.FONTS.JP.map(w=>t.jsx("option",{value:w.value,children:w.label},w.value))}),t.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 z-0",children:t.jsx(Ge,{className:"w-4 h-4"})})]})]})]})})]}),k==="general"&&t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-800",children:[t.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ’¾"})," ",n("settings_modal.backup.title")]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:n("settings_modal.backup.description")}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[t.jsx(Y,{onClick:async()=>{if(!(!A.currentUser||!b))try{const w=await Xs(A.currentUser.uid,b),v=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),I=URL.createObjectURL(v),D=document.createElement("a");D.href=I,D.download=`taskmg-backup-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(I)}catch(w){console.error(w),alert(n("settings_modal.backup.create_fail"))}},variant:"premium",leftIcon:t.jsx(gt,{className:"w-4 h-4"}),className:"w-full sm:w-auto",children:n("settings_modal.backup.create")}),t.jsxs("div",{className:"relative w-full sm:w-auto",children:[t.jsx("input",{type:"file",accept:".json",className:"hidden",id:"backup-import-input",onChange:w=>{var I;const v=(I=w.target.files)==null?void 0:I[0];!v||!A.currentUser||!b||(w.target.value="",o("confirmation",{title:n("settings_modal.backup.import"),message:n("settings_modal.backup.import_confirm"),confirmLabel:n("modal.ok"),variant:"danger",onConfirm:()=>{const D=new FileReader;D.onload=async P=>{var U;try{const G=JSON.parse((U=P.target)==null?void 0:U.result),V=await Qs(A.currentUser.uid,b,G);alert(n("settings_modal.backup.import_success").replace("{tasks}",String(V.tasksCount)).replace("{projects}",String(V.projectsCount))),window.location.reload()}catch(G){console.error(G),alert(n("settings_modal.backup.import_fail"))}},D.readAsText(v)}}))}}),t.jsxs("label",{htmlFor:"backup-import-input",className:"w-full sm:w-auto px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-bold rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer shadow-sm text-sm flex items-center justify-center gap-2 transition-colors",children:[t.jsx(gt,{className:"w-4 h-4"}),n("settings_modal.backup.import")]})]})]})]}),t.jsx(Ue,{title:n("settings_modal.language.title"),icon:"ğŸŒ",defaultOpen:!1,children:t.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{code:"ja",label:"æ—¥æœ¬èª"},{code:"en",label:"English"}].map(w=>t.jsxs("button",{onClick:()=>N(w.code),className:C("p-3 border rounded-xl text-sm font-medium transition-all",f===w.code?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-white dark:hover:bg-gray-800 bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400"),children:[t.jsx("span",{className:"text-xl mr-2",children:w.code==="ja"?"ğŸ‡¯ğŸ‡µ":"ğŸ‡ºğŸ‡¸"}),w.label]},w.code))})})]}),k==="account"&&t.jsx(Qn,{}),k==="advanced"&&t.jsx("div",{className:"flex flex-col gap-4",children:t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-xl border border-red-100 dark:border-red-900/30",children:[t.jsxs("h4",{className:"font-bold text-red-700 dark:text-red-400 mb-2 flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ§¹"})," ",n("settings_modal.maintenance.title")]}),t.jsx("p",{className:"text-sm text-red-600/80 dark:text-red-400/80 mb-4",children:n("settings_modal.maintenance.description")}),t.jsxs("label",{htmlFor:"backup-confirm-checkbox",className:"flex items-center gap-2 mb-4 cursor-pointer",children:[t.jsx("input",{id:"backup-confirm-checkbox",name:"backupConfirmed",type:"checkbox",className:"w-4 h-4 text-red-600 rounded border-red-300 focus:ring-red-500",checked:E,onChange:w=>R(w.target.checked)}),t.jsx("span",{className:"text-sm font-bold text-red-700 dark:text-red-400",children:n("settings_modal.maintenance.confirm_backup")||"ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆã—ã¾ã—ãŸï¼ˆå¿…é ˆï¼‰"})]}),t.jsx(Y,{onClick:()=>{b&&o("confirmation",{title:n("settings_modal.maintenance.title"),message:n("settings_modal.maintenance.confirm_final"),confirmLabel:n("settings_modal.maintenance.cleanup_duplicate"),variant:"danger",onConfirm:async()=>{try{const w=await wn(b);alert(n("settings_modal.maintenance.cleanup_success").replace("{count}",String(w))),w>0&&window.location.reload()}catch(w){console.error(w),alert(n("settings_modal.maintenance.cleanup_fail").replace("{error}",w.message))}}})},disabled:!E,variant:"danger",children:n("settings_modal.maintenance.cleanup_duplicate")})]})})]})]})})};function H(e){if(!e)return null;if(e instanceof Date)return e;if(e.toDate&&typeof e.toDate=="function")return e.toDate();const r=new Date(e);return isNaN(r.getTime())?null:r}const It=(e,r)=>{const a=H(e),n=H(r);return!a||!n?!1:a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()&&a.getDate()===n.getDate()},Wr=e=>{const r=H(e);if(!r)return!1;const a=new Date;return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()&&r.getDate()===a.getDate()},$r=(e,r=7)=>{const a=H(e);if(!a)return!1;const n=new Date;n.setHours(0,0,0,0);const s=new Date(n);s.setDate(n.getDate()+1);const o=new Date(n);return o.setDate(n.getDate()+r+1),a>=s&&a<o};function Ze(e=new Date){const r=H(e)||new Date,a=new Date(r);return a.setHours(0,0,0,0),a}function zr(e=new Date,r=1){const a=H(e)||new Date,n=a.getDay(),s=a.getDate()-n+(n<r?r-7:r),o=new Date(a);return o.setDate(s),Ze(o)}function qr(e){const r=H(e);if(!r)return"";const a=new Date,n=Ze(a),s=Math.round((r.getTime()-n.getTime())/(1e3*60*60*24));if(s===0)return"ä»Šæ—¥";if(s===1)return"æ˜æ—¥";if(s===-1)return"æ˜¨æ—¥";const o=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0");return o!==a.getFullYear()?`${o}/${i}/${l}`:`${i}/${l}`}const Ur=e=>{const r=H(e);if(!r)return"";const a=r.getFullYear(),n=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0");return`${a}-${n}-${s}`},Kr=e=>{if(!e)return null;const r=new Date(e);return isNaN(r.getTime())?null:r};function Hr(e){const r=H(e);if(!r)return"text-gray-500";const a=Ze(new Date),n=Math.round((r.getTime()-a.getTime())/(1e3*60*60*24));return n<0?"text-red-500 font-bold":n===0?"text-green-600 dark:text-green-400 font-medium":n===1?"text-orange-500 dark:text-orange-400 font-medium":"text-gray-500 dark:text-gray-400"}function eo(e,r){var n;if(!e||!(r!=null&&r.type))return null;const a=new Date(H(e));switch(r.type){case"daily":return a.setDate(a.getDate()+1),a;case"weekly":{if(!((n=r.days)!=null&&n.length))return null;const s=a.getDay();for(let o=1;o<=7;o++){const i=(s+o)%7;if(r.days.includes(i))return a.setDate(a.getDate()+o),a}return null}case"weekdays":do a.setDate(a.getDate()+1);while(a.getDay()===0||a.getDay()===6);return a;case"monthly":return a.setMonth(a.getMonth()+1),a;default:return null}}function Gr(e){const r=Ze(new Date);if(!(e!=null&&e.type)||e.type==="daily"||e.type==="monthly")return r;if(e.type==="weekly"&&e.days&&e.days.length>0){const a=r.getDay();for(let n=0;n<=6;n++)if(e.days.includes((a+n)%7))return r.setDate(r.getDate()+n),r}if(e.type==="weekdays"){for(;r.getDay()===0||r.getDay()===6;)r.setDate(r.getDate()+1);return r}return r}function Vr(e,r){if(!e||!r)return 0;const[a,n]=e.split(":").map(Number),[s,o]=r.split(":").map(Number);if(isNaN(a)||isNaN(n)||isNaN(s)||isNaN(o))return 0;const i=a*60+n;let l=s*60+o;return l<i&&(l+=1440),l-i}const to=Object.freeze(Object.defineProperty({__proto__:null,calculateDurationMinutes:Vr,formatDateCompact:qr,formatDateForInput:Ur,getInitialDueDateFromRecurrence:Gr,getNextRecurrenceDate:eo,getStartOfDay:Ze,getStartOfWeek:zr,getTaskDateColor:Hr,isSameDay:It,isToday:Wr,isUpcoming:$r,parseDateInput:Kr,toDate:H},Symbol.toStringTag,{value:"Module"})),ro={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ao(e){return e.replace(/[&<>"']/g,r=>ro[r]||r)}function so(e){if(!e)return"";const r=e.split(`
`);let a=[],n=null;return r.forEach(s=>{const o=s.trimStart(),i=o.startsWith("* ")||o.startsWith("- "),l=/^\d+\.\s/.test(o),c=i||l;if(c){const d=l?"ol":"ul";if(n!==d){n&&a.push(`</${n}>`);const g=l?"list-decimal":"list-disc";a.push(`<${d} class="${g} ml-5 space-y-1">`),n=d}}else n&&(a.push(`</${n}>`),n=null);if(c){let d="";i?d=o.substring(2):d=o.replace(/^\d+\.\s/,"");const g=St(d);a.push(`<li>${g}</li>`)}else if(s.trim()){const d=s.match(/^(#{1,6})\s+(.+)$/);if(d){const g=d[1].length,u=St(d[2]),m={1:"text-2xl font-bold mb-3",2:"text-xl font-bold mb-2",3:"text-lg font-semibold mb-2",4:"text-base font-semibold mb-1",5:"text-sm font-semibold mb-1",6:"text-xs font-semibold mb-1"};a.push(`<h${g} class="${m[g]}">${u}</h${g}>`)}else a.push(`<p class="mb-2">${St(s)}</p>`)}else n&&(a.push(`</${n}>`),n=null)}),n&&a.push(`</${n}>`),a.join(`
`)}function St(e){return ao(e).replace(/\[(.*?)\]\((.*?)\)/g,(a,n,s)=>`<a href="${s.replace(/"/g,"&quot;")}" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300 underline font-medium">${n}</a>`)}const Ke=x.forwardRef(({className:e,label:r,error:a,containerClassName:n,options:s,children:o,id:i,...l},c)=>t.jsxs("div",{className:C("flex flex-col gap-1.5",n),children:[r&&t.jsx("label",{htmlFor:i,className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:r}),t.jsxs("div",{className:"relative group",children:[t.jsx("select",{ref:c,id:i,className:C("w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border rounded-xl pl-4 pr-10 py-2.5 outline-none transition-all appearance-none cursor-pointer placeholder:text-gray-300 dark:placeholder:text-gray-600","focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",a?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 text-gray-500 hover:border-gray-300 dark:hover:border-gray-600",e),"aria-invalid":!!a,"aria-describedby":a&&i?`${i}-error`:void 0,...l,children:o||(s==null?void 0:s.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value)))}),t.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors",children:t.jsx(Ge,{size:16})})]}),a&&t.jsx("p",{id:i?`${i}-error`:void 0,className:"text-xs text-red-500 font-medium animate-fade-in-down",children:a})]}));Ke.displayName="Select";const Yr=x.forwardRef(({className:e,label:r,error:a,containerClassName:n,id:s,...o},i)=>t.jsxs("div",{className:C("flex flex-col gap-1.5 h-full",n),children:[r&&t.jsx("label",{htmlFor:s,className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:r}),t.jsx("textarea",{ref:i,id:s,className:C("w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border rounded-xl px-4 py-3 outline-none transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600 resize-none","focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",a?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600",e),"aria-invalid":!!a,"aria-describedby":a&&s?`${s}-error`:void 0,...o}),a&&t.jsx("p",{id:s?`${s}-error`:void 0,className:"text-xs text-red-500 font-medium animate-fade-in-down",children:a})]}));Yr.displayName="Textarea";const or={TODO:"todo"},no=({isOpen:e,data:r,zIndex:a,overlayClassName:n})=>{const{t:s}=F(),{closeModal:o,openModal:i}=K(),l=!!e,c=r,d=!(c!=null&&c.id)||c.id.startsWith("temp-"),{projects:g}=jt(),{timeBlocks:u}=Qe(),{customDurations:m}=ae(),[p,h]=x.useState(""),[y,f]=x.useState(""),[N,b]=x.useState(null),[k,T]=x.useState(or.TODO),[E,R]=x.useState(!1),[S,w]=x.useState(null),[v,I]=x.useState({type:"none",days:[]}),[D,P]=x.useState(null),[U,G]=x.useState(null),[V,tt]=x.useState(!1),[rt,er]=x.useState(!1),ra=x.useMemo(()=>[{value:"none",label:s("recurrence.none")},{value:"daily",label:s("recurrence.daily")},{value:"weekdays",label:s("recurrence.weekdays")},{value:"weekly",label:s("recurrence.weekly")},{value:"monthly",label:s("recurrence.monthly")}],[s]),aa=x.useMemo(()=>[s("days.sun"),s("days.mon"),s("days.tue"),s("days.wed"),s("days.thu"),s("days.fri"),s("days.sat")],[s]),[sa,Me]=x.useState(null);x.useEffect(()=>{var j;if(c){h(c.title||""),f(c.description||""),b(c.projectId||null),T(c.status||or.TODO),R(!!c.isImportant),P(c.timeBlockId||null),G(c.duration||null);const W=H(c.dueDate);w(W);const re=c.recurrence||{type:"none",days:[]};I(re),re!=null&&re.type&&re.type!=="none"&&!W&&w(Gr(re));const qe=!!(W||(re==null?void 0:re.type)!=="none"||c.timeBlockId||c.duration);er(qe||d),tt(!!((j=c.description)!=null&&j.trim()))}},[c,l]);const Nt=x.useCallback(async()=>{if(Me(null),!p.trim()){Me(s("validation.required"));return}if((v==null?void 0:v.type)==="weekly"&&(!v.days||v.days.length===0)){Me(s("validation.select_days"));return}const j={title:p.trim(),description:y.trim()??null,projectId:N==="none"?null:N,status:k,isImportant:E,dueDate:S?Te.fromDate(S):null,recurrence:(v==null?void 0:v.type)==="none"?null:v,timeBlockId:D??null,duration:U??void 0};try{d?await Pr(j):await Xt(c.id,j),o()}catch(W){console.error("Failed to save task",W),Me(s("validation.save_fail"))}},[p,y,N,k,E,S,v,D,U,d,c,o,s]),na=x.useCallback(async j=>{j==null||j.preventDefault(),j==null||j.stopPropagation(),Me(null),!(!(c!=null&&c.id)||d)&&(!(c!=null&&c.id)||d||i("confirmation",{title:s("delete"),message:s("modal.delete_confirm"),confirmLabel:s("delete"),variant:"danger",onConfirm:async()=>{try{await zn(c.id),o()}catch(W){console.error("Failed to delete task",W),Me(s("validation.delete_fail"))}}}))},[c==null?void 0:c.id,d,o,i,s]),oa=x.useCallback(j=>{let W=[];j==="weekly"?W=(v==null?void 0:v.days)||[]:j==="weekdays"&&(W=[1,2,3,4,5]),I({type:j,days:W})},[v==null?void 0:v.days]),ia=x.useCallback(j=>{const W=(v==null?void 0:v.days)||[],re=W.includes(j)?W.filter(qe=>qe!==j):[...W,j].sort((qe,ua)=>qe-ua);I({type:"weekly",days:re})},[v==null?void 0:v.days]),la=x.useMemo(()=>so(y),[y]),ca=j=>{j.key==="Enter"&&!j.nativeEvent.isComposing&&(j.preventDefault(),Nt())},da=j=>{(j.metaKey||j.ctrlKey)&&j.key==="Enter"&&(j.preventDefault(),Nt())};return l?t.jsx(fe,{isOpen:l,onClose:o,zIndex:a,className:"max-w-4xl h-[95vh] sm:h-[85vh] w-full mx-2 sm:mx-auto mt-4 sm:mt-0 pb-safe",overlayClassName:n,children:t.jsxs("div",{className:"flex flex-col h-full",onKeyDown:da,children:[t.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-700 flex items-center gap-3 shrink-0",children:[t.jsx("div",{className:"flex-1",children:t.jsx(Ye,{id:"task-title",name:"title",type:"text",value:p,onChange:j=>h(j.target.value),onKeyDown:ca,placeholder:s("task_detail.title_placeholder"),className:"text-xl font-bold bg-transparent border-none focus:ring-0 px-0 py-0 shadow-none h-auto rounded-none",containerClassName:"gap-0",autoFocus:!0,"aria-label":s("task_detail.title_placeholder")})}),t.jsx(Y,{onClick:()=>R(!E),variant:"ghost",size:"icon",className:C("transition-colors",E?"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 hover:bg-yellow-100 dark:hover:bg-yellow-900/30":"text-gray-400"),title:E?"é‡è¦åº¦ã‚’è§£é™¤":"é‡è¦ã¨ã—ã¦ãƒãƒ¼ã‚¯",children:t.jsx(Cr,{className:"w-6 h-6",fill:E?"currentColor":"none"})}),t.jsx(Y,{onClick:o,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"é–‰ã˜ã‚‹",children:t.jsx(Ra,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[t.jsx(ze,{message:sa,className:"mb-3"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 h-full",children:[t.jsxs("div",{className:"md:col-span-8 flex flex-col h-full min-h-[300px] bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("label",{className:"text-xs font-semibold text-gray-500 flex items-center gap-2 uppercase",children:[t.jsx(Sr,{size:16}),"ãƒ¡ãƒ¢ (Markdown)"]}),t.jsx(Y,{type:"button",onClick:()=>tt(!V),size:"sm",variant:"ghost",className:"text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 font-medium h-auto py-1 px-3","aria-label":V?"ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ":"ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ",children:V?"ç·¨é›†":"ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼"})]}),t.jsx("div",{className:"flex-1 relative",children:V?t.jsx("div",{className:"w-full h-full p-4 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm overflow-y-auto prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:la||'<span class="text-gray-400">ãƒ¡ãƒ¢ãŒã‚ã‚Šã¾ã›ã‚“</span>'}}):t.jsx(Yr,{id:"task-description",name:"description",value:y,onChange:j=>f(j.target.value),placeholder:"è©³ç´°ã‚’å…¥åŠ›...",className:"h-full bg-gray-50 dark:bg-gray-900/50 border-0 rounded-lg focus:ring-1 focus:ring-blue-500/50 text-gray-800 dark:text-gray-200 font-mono",containerClassName:"h-full",autoFocus:!y,"aria-label":"è©³ç´°ãƒ¡ãƒ¢"})})]}),t.jsxs("div",{className:"md:col-span-4 space-y-4",children:[t.jsxs("details",{open:rt,onToggle:j=>er(j.currentTarget.open),className:"group border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800",children:[t.jsxs("summary",{className:"flex items-center justify-between px-4 py-3 cursor-pointer list-none outline-none bg-gray-50 dark:bg-gray-700/30 rounded-t-lg group-[:not([open])]:rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700/50 focus:ring-2 focus:ring-inset focus:ring-blue-500",role:"button","aria-expanded":rt,children:[t.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[t.jsx(Ua,{className:"text-blue-500",size:16}),s("task_detail.schedule_label")]}),t.jsx("span",{className:"transform group-open:rotate-180 transition-transform text-gray-400",children:t.jsx(Ge,{size:20})})]}),t.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[t.jsx("div",{children:t.jsx("div",{className:"relative cursor-pointer",onClick:()=>{var W;const j=document.getElementById("task-due-date");(W=j==null?void 0:j.showPicker)==null||W.call(j)},children:t.jsx(Ye,{type:"date",id:"task-due-date",label:s("task_detail.due_date_label"),value:Ur(S),onChange:j=>w(Kr(j.target.value)),className:"cursor-pointer bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"})})}),t.jsx("div",{children:t.jsx(Ke,{id:"task-recurrence",label:s("task_detail.recurrence_label"),value:(v==null?void 0:v.type)||"none",onChange:j=>oa(j.target.value),className:"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700",options:ra})}),((v==null?void 0:v.type)==="weekly"||(v==null?void 0:v.type)==="weekdays")&&t.jsxs("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700 animate-in fade-in slide-in-from-top-1 duration-200",children:[t.jsx("span",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:s("task_detail.recurrence_days")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:aa.map((j,W)=>{var re;return t.jsxs("label",{htmlFor:`recurrence-day-${W}`,className:"flex items-center gap-1 cursor-pointer select-none",children:[t.jsx("input",{id:`recurrence-day-${W}`,name:`recurrenceDay${W}`,type:"checkbox",checked:((re=v.days)==null?void 0:re.includes(W))||!1,onChange:()=>ia(W),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:j})]},W)})})]}),t.jsx("div",{children:t.jsxs(Ke,{id:"task-timeblock",label:s("task_detail.time_block_label"),value:D||"",onChange:j=>P(j.target.value||null),className:"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700",children:[t.jsx("option",{value:"",children:s("task_detail.time_block_unspecified")}),u.map(j=>t.jsxs("option",{value:j.id,children:[j.start," - ",j.end]},j.id))]})}),t.jsx("div",{children:t.jsxs(Ke,{id:"task-duration",label:s("task_detail.duration_label"),value:U||"",onChange:j=>G(j.target.value?parseInt(j.target.value,10):null),className:"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700",children:[t.jsx("option",{value:"",children:s("task_detail.duration_none")}),m.map(j=>t.jsxs("option",{value:j,children:[j," min"]},j))]})})]})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:t.jsxs(Ke,{id:"task-project",label:s("task_detail.project_label"),value:N||"none",onChange:j=>b(j.target.value==="none"?null:j.target.value),className:"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600",containerClassName:"gap-2",children:[t.jsx("option",{value:"none",children:s("task_detail.project_none")}),g.map(j=>t.jsx("option",{value:j.id,children:j.name},j.id))]})})]})]})]}),t.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center shrink-0",children:[!d&&t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(Y,{type:"button",onClick:na,variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 px-4",leftIcon:t.jsx(Pe,{size:16}),children:s("task_detail.delete_button")})}),t.jsxs("div",{className:`flex gap-2 ${d?"ml-auto":""}`,children:[t.jsx(Y,{type:"button",onClick:o,variant:"ghost",children:s("modal.cancel")}),t.jsx(Y,{type:"button",onClick:Nt,variant:"primary",children:s(d?"modal.create":"modal.save")})]})]})]})}):null};class oo extends x.Component{constructor(a){super(a);$(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,n){us(a,n.componentStack??void 0)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const a=ae.getState().language,{t:n}=Re(a);return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:t.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),t.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:n("error_boundary.title")}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:n("error_boundary.description")}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[t.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:n("error_boundary.retry")}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:n("error_boundary.reload")})]}),!1]})})}return this.props.children}}const io=({children:e,containerId:r="portal-root"})=>{const a=document.getElementById(r)??document.body;return Bt.createPortal(e,a)},Jr=()=>t.jsxs("div",{className:"space-y-2 p-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),t.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),t.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),Xr=({id:e,children:r})=>{const{attributes:a,listeners:n,setNodeRef:s,transform:o,transition:i,isDragging:l}=Rt({id:e}),c={transform:Pt.Transform.toString(o),transition:i,opacity:l?.5:1};return t.jsx("div",{ref:s,style:c,...a,...n,children:r})},ir=Array.from({length:24},(e,r)=>String(r).padStart(2,"0")),lr=["00","15","30","45"],lo=({isOpen:e,zIndex:r,overlayClassName:a})=>{const{t:n}=F(),{closeModal:s,openModal:o}=K(),i=!!e,{timeBlocks:l}=Qe(),{workspaceId:c}=ne(),[d,g]=x.useState([]),[u,m]=x.useState(!1),[p,h]=x.useState(null),[y,f]=x.useState(null),N=xt(ke(ft,{activationConstraint:{distance:5}}),ke($t,{coordinateGetter:Wt}));x.useEffect(()=>{i&&(g(l.sort((v,I)=>(v.order||0)-(I.order||0))),h(null),m(!1))},[i,l]);const b=()=>{if(d.length>=ct.TIME_BLOCK.MAX_COUNT)return;let v="09:00",I="10:00";if(d.length>0){const P=d[d.length-1];if(P.end){const[U,G]=P.end.split(":").map(Number);v=P.end;const V=(U+1)%24;I=`${String(V).padStart(2,"0")}:${String(G).padStart(2,"0")}`}}const D={id:`new-${Date.now()}`,start:v,end:I,color:me[d.length%me.length].value,order:d.length};g([...d,D])},k=async v=>{if(!v.startsWith("new-")){o("confirmation",{title:n("delete"),message:n("time_block.delete_confirm"),confirmLabel:n("delete"),variant:"danger",onConfirm:async()=>{try{c&&(await Ir(c,v),g(I=>I.filter(D=>D.id!==v)))}catch{h(n("validation.delete_fail"))}}});return}g(d.filter(I=>I.id!==v))},T=(v,I)=>{g(d.map(D=>D.id===v?{...D,...I}:D))},E=v=>{f(v.active.id)},R=v=>{const{active:I,over:D}=v;f(null),D&&I.id!==D.id&&g(P=>{const U=P.findIndex(V=>V.id===I.id),G=P.findIndex(V=>V.id===D.id);return vt(P,U,G)})},S=async()=>{m(!0),h(null);try{for(const D of d){if(!D.start||!D.end)continue;const[P,U]=D.start.split(":").map(Number),[G,V]=D.end.split(":").map(Number);if(P*60+U>=G*60+V)throw new Error(n("time_block.error_invalid_time",{start:D.start,end:D.end}))}const v=[...d].sort((D,P)=>(D.start||"").localeCompare(P.start||""));for(let D=0;D<v.length-1;D++){const P=v[D],U=v[D+1];if(!P.end||!U.start)continue;const[G,V]=P.end.split(":").map(Number),[tt,rt]=U.start.split(":").map(Number);if(tt*60+rt<G*60+V)throw new Error(n("time_block.error_overlap",{range1:`${P.start}-${P.end}`,range2:`${U.start}-${U.end}`}))}const I=d.map((D,P)=>{var G;const U={...D,id:(G=D.id)!=null&&G.startsWith("new-")?null:D.id,order:P,name:`${D.start}-${D.end}`};if(!c)throw new Error("No workspace");return $s(c,U)});await Promise.all(I),await Promise.all(I),s()}catch(v){h(v.message||n("validation.save_fail")),m(!1)}};if(!i)return null;const w=y?d.find(v=>v.id===y):null;return t.jsx(fe,{isOpen:i,onClose:s,title:n("time_block.settings_title"),className:"max-w-2xl h-[600px]",zIndex:r,overlayClassName:a,children:t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-3 custom-scrollbar",children:[t.jsxs(bt,{sensors:N,collisionDetection:yt,onDragStart:E,onDragEnd:R,children:[t.jsx(kt,{items:d.map(v=>v.id),strategy:wt,children:d.map(v=>t.jsx(Xr,{id:v.id,children:t.jsx(cr,{block:v,onDelete:()=>k(v.id),onUpdate:I=>T(v.id,I),isOverlay:!1})},v.id))}),t.jsx(ja,{dropAnimation:null,modifiers:[],children:w?t.jsx("div",{style:{opacity:.9},children:t.jsx(cr,{block:w,onDelete:()=>{},onUpdate:()=>{},isOverlay:!0})}):null})]}),d.length<ct.TIME_BLOCK.MAX_COUNT?t.jsx(Y,{onClick:b,disabled:d.length>=ct.TIME_BLOCK.MAX_COUNT,variant:"ghost",className:"w-full py-4 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl text-gray-400 hover:border-blue-500 hover:text-blue-500 hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-all font-medium text-sm flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed shadow-none",leftIcon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),children:n("time_block.add_button")}):t.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400 text-sm rounded-lg flex items-center justify-center gap-2 border border-yellow-100 dark:border-yellow-900/30",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),n("time_block.max_limit")]}),t.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/40 rounded-lg flex items-center text-sm text-gray-500 dark:text-gray-400",children:[t.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-gray-400 mr-3 shadow-sm"}),t.jsx("span",{className:"font-bold mr-2 text-gray-700 dark:text-gray-300",children:n("time_block.unspecified")}),t.jsx("span",{className:"text-xs opacity-80",children:n("time_block.default_zone_desc")})]})]}),t.jsx(ze,{message:p,className:"mb-4"}),t.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:t.jsx(Y,{onClick:S,disabled:u,isLoading:u,variant:"primary",className:"px-8 py-2.5 bg-gray-900 hover:bg-gray-800 dark:bg-blue-600 dark:hover:bg-blue-500",children:n(u?"saving":"done")})})]})})},cr=({block:e,onDelete:r,onUpdate:a,isOverlay:n})=>{const{t:s}=F(),[o,i]=x.useState(!1),l=e.start||"09:00",c=e.end||"10:00",[d,g]=l.split(":"),[u,m]=c.split(":");return t.jsxs("div",{className:`flex items-center gap-4 p-2 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-sm group ${n?"shadow ring-2 ring-blue-500 opacity-90 cursor-grabbing":""}`,children:[t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>i(!o),className:"w-6 h-6 rounded-full shadow-sm ring-2 ring-transparent focus:ring-blue-400 ring-offset-2 dark:ring-offset-gray-900",style:{backgroundColor:e.color||"#3B82F6"},title:s("time_block.change_color")}),o&&t.jsxs(io,{children:[t.jsx("div",{className:"fixed inset-0 z-[9999] bg-transparent",onClick:()=>i(!1)}),t.jsxs("div",{className:"fixed z-[10000] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow p-4 w-[280px]",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[t.jsx("h4",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase mb-3 tracking-wider",children:s("modal.theme_color")}),t.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:me.map(p=>t.jsx("button",{onClick:()=>{a({color:p.value}),i(!1)},className:C("w-8 h-8 rounded-full ring-2 ring-transparent hover:ring-blue-400 focus:outline-none",e.color===p.value&&"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800"),style:{backgroundColor:p.value},"aria-label":s(`colors.${p.key}`),"aria-pressed":e.color===p.value},p.value))})]})]})]}),t.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(it,{options:ir,value:d,onChange:p=>a({start:`${p}:${g}`})}),t.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),t.jsx(it,{options:lr,value:g,onChange:p=>a({start:`${d}:${p}`})})]}),t.jsx("div",{className:"w-4 h-0.5 bg-gray-200 dark:bg-gray-700 rounded-full"}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(it,{options:ir,value:u,onChange:p=>a({end:`${p}:${m}`})}),t.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),t.jsx(it,{options:lr,value:m,onChange:p=>a({end:`${u}:${p}`})})]})]}),t.jsx(Y,{onClick:r,variant:"ghost",size:"icon",className:"text-gray-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",title:s("modal.delete"),children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},it=({options:e,value:r,onChange:a,label:n})=>{const{t:s}=F();return t.jsx("select",{value:r,onChange:o=>a(o.target.value),className:"appearance-none px-2 py-1 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm font-mono font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-100 dark:focus:ring-blue-900 outline-none cursor-pointer","aria-label":n||s("time_block.time_select"),children:e.map(o=>t.jsx("option",{value:o,children:o},o))})},co=({isOpen:e,data:r,zIndex:a})=>{const{t:n}=F(),{closeModal:s,openModal:o}=K(),i=!!e,l=r,c=!!(l!=null&&l.id),[d,g]=x.useState(""),[u,m]=x.useState(!1),[p,h]=x.useState(null),y=q.useRef(null);x.useEffect(()=>{i&&(g((l==null?void 0:l.name)||""),h(null),m(!1))},[i,l]),x.useEffect(()=>{var b;p&&((b=y.current)==null||b.focus())},[p]);const f=x.useCallback(async()=>{const b=d.trim();if(!b){h(n("validation.workspace_name_required"));return}if(Er().some(E=>E.name===b&&E.id!==(l==null?void 0:l.id))){h(n("validation.workspace_duplicate"));return}m(!0),h(null);try{if(c&&(l!=null&&l.id))await cs(l.id,b),s();else{const E=await ls(b);E!=null&&E.id?(s(),o("confirmation",{title:n("modal.workspace_create_title"),message:n("validation.workspace_confirm_switch"),confirmLabel:n("modal.ok"),onConfirm:()=>Lr(E.id)})):s()}}catch(E){h(n("validation.save_fail")+": "+(E.message||"Error")),m(!1)}},[d,c,l,s,o,n]),N=b=>{b.key==="Enter"&&!b.nativeEvent.isComposing&&f()};return i?t.jsx(fe,{isOpen:i,onClose:s,className:"max-w-md",children:t.jsxs("div",{className:"flex flex-col gap-6 max-h-[85vh] overflow-y-auto p-1",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"workspace-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:n(c?"modal.workspace_edit_title":"modal.workspace_create_title")}),t.jsx("input",{ref:y,id:"workspace-name-input",name:"workspaceName",type:"text",value:d,onChange:b=>g(b.target.value),onKeyDown:N,placeholder:n("modal.workspace_name_placeholder"),className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600",autoFocus:!0})]}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:n(c?"modal.workspace_desc_edit":"modal.workspace_desc_create")}),t.jsx(ze,{message:p}),t.jsxs("div",{className:"flex justify-end items-center pt-4 border-t border-gray-200 dark:border-gray-700 gap-3",children:[t.jsx("button",{onClick:s,disabled:u,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:n("modal.cancel")}),t.jsx("button",{onClick:f,disabled:u,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95",children:n(u?"saving":c?"modal.save":"modal.create")})]})]})}):null},uo=({isOpen:e,data:r,zIndex:a})=>{const{closeModal:n}=K(),{t:s}=F(),o=!!e,i=r,l=x.useCallback(()=>{we.getState().setView("wizard",{mode:i.id}),n()},[i,n]);return!o||!i?null:t.jsx(fe,{isOpen:o,onClose:n,className:"max-w-3xl max-h-[90vh] p-0 overflow-hidden bg-transparent shadow-none",children:t.jsxs("div",{className:"w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[t.jsx("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-4xl animate-bounce-slow",children:i.icon}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:i.title}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.subTitle})]})]})}),t.jsxs("div",{className:"p-6 overflow-y-auto flex-1 custom-scrollbar",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("h3",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider mb-3 flex items-center",children:[t.jsx("span",{className:"w-1 h-4 bg-blue-600 dark:bg-blue-400 mr-2 rounded-full"}),s("wiki.summary")]}),t.jsx("p",{className:"text-base text-gray-700 dark:text-gray-300 leading-relaxed bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:i.concept.summary})]}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[t.jsx("span",{className:"w-1 h-4 bg-gray-400 mr-2 rounded-full"}),s("wiki.details")]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed mb-3",children:i.concept.detail})]}),Array.isArray(i.useCases)&&i.useCases.length>0&&t.jsxs("div",{className:"mb-8",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[t.jsx("span",{className:"w-1 h-4 bg-purple-500 mr-2 rounded-full"}),s("wiki.use_cases")]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.useCases.map((c,d)=>t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/40 rounded-lg p-5 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 transition-colors",children:[t.jsxs("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center",children:[t.jsx("span",{className:"text-purple-500 mr-2",children:"#"}),c.title]}),t.jsx("div",{className:"mb-3",children:t.jsxs("div",{className:"flex items-start mb-1",children:[t.jsx("span",{className:"text-[10px] font-bold text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"Before"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.before})]})}),t.jsx("div",{children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("span",{className:"text-[10px] font-bold text-blue-600 bg-blue-100 dark:bg-blue-900/40 dark:text-blue-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"After"}),t.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-300 font-medium",children:c.after})]})})]},d))})]}),i.tips&&i.tips.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[t.jsx("span",{className:"w-1 h-4 bg-amber-500 mr-2 rounded-full"}),s("wiki.tips")]}),t.jsx("div",{className:"space-y-3",children:i.tips.map((c,d)=>t.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-lg border border-amber-100 dark:border-amber-900/30",children:[t.jsxs("p",{className:"font-bold text-amber-800 dark:text-amber-400 mb-1",children:["Q. ",c.q]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["A. ",c.a]})]},d))})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[t.jsx("button",{onClick:n,className:"px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s("close")}),t.jsxs("button",{onClick:l,className:"group relative px-6 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg shadow-md transition-all transform hover:scale-105 active:scale-95 overflow-hidden",children:[t.jsxs("span",{className:"relative z-10 flex items-center",children:[s("wiki.use_in_wizard"),t.jsx("svg",{className:"w-4 h-4 ml-2 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})]}),t.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 skew-y-12"})]})]})]})})},go=({isOpen:e,data:r,zIndex:a,overlayClassName:n})=>{const{closeModal:s}=K(),{t:o}=F();if(!r)return null;const{title:i,message:l,onConfirm:c,confirmLabel:d=o("modal.create"),cancelLabel:g=o("modal.cancel"),variant:u="primary"}=r,m=()=>{c(),s()},p=u==="danger";return t.jsx(fe,{isOpen:e,onClose:s,title:i,size:"sm",zIndex:a,overlayClassName:n,className:"animate-fade-in-up",children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx("div",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed",children:l}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[t.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:g}),t.jsx("button",{onClick:m,className:`px-6 py-2 text-sm font-bold text-white rounded-lg shadow-md transition-transform active:scale-95 ${p?"bg-red-500 hover:bg-red-600 shadow-red-500/30":"bg-blue-600 hover:bg-blue-700 shadow-blue-500/30"}`,autoFocus:!0,children:d})]})]})})},mo=()=>{const{stack:e}=K();return e.length===0?null:t.jsx(t.Fragment,{children:e.map((r,a)=>{const s=a===0?void 0:"bg-black/30",o={isOpen:!0,data:r.data,zIndex:100+a*10,overlayClassName:s};switch(r.type){case"settings":return t.jsx(Zn,{...o},r.id);case"task-detail":return t.jsx(no,{...o},r.id);case"label-edit":return t.jsx(Jn,{...o},r.id);case"project-edit":return t.jsx(Xn,{...o},r.id);case"workspace-edit":return t.jsx(co,{...o},r.id);case"filter-edit":return t.jsx(Yn,{...o},r.id);case"timeblock-edit":return t.jsx(lo,{...o},r.id);case"wiki-framework":return t.jsx(uo,{...o},r.id);case"confirmation":return t.jsx(go,{...o},r.id);default:return null}})})},et=()=>{const{workspaceId:e,userId:r,loading:a}=ne(),n=x.useCallback(c=>!e||!r?()=>{}:Un(e,d=>c(d),d=>console.error("Task subscription error:",d)),[e,r]),s=e?Hn(e):!1,{data:o,isPending:i}=Le(["tasks",r||void 0,e||void 0],n,e&&s?Kn(e):void 0);return{tasks:o||[],loading:a||!!e&&!s&&i}};function ho(){const{tasks:e}=et(),{showCompleted:r,query:a}=le();return x.useMemo(()=>{var i,l;const s={inbox:0,today:0,upcoming:0,important:0,all:0,search:0},o=a?a.toLowerCase().trim():"";for(const c of e){if(o){const g=(i=c.title)==null?void 0:i.toLowerCase().includes(o),u=(l=c.description)==null?void 0:l.toLowerCase().includes(o);(g||u)&&s.search++}c.status==="archived"||c.status==="completed"||(s.all++,(!c.projectId||c.projectId==="unassigned"||c.projectId==="none")&&s.inbox++,c.isImportant&&s.important++,c.dueDate&&(Wr(c.dueDate)?s.today++:$r(c.dueDate)&&s.upcoming++))}return s},[e,a])}const po=e=>e in z.SIDEBAR_DENSITY,Qt=e=>po(e)?z.SIDEBAR_DENSITY[e]:z.SIDEBAR_DENSITY.normal,xo=[{id:"inbox",i18nKey:"inbox",icon:"ğŸ“¥",color:"text-blue-500",droppable:!0},{id:"today",i18nKey:"today",icon:"ğŸ“…",color:"text-green-500"},{id:"upcoming",i18nKey:"upcoming",icon:"ğŸ—“ï¸",color:"text-purple-500"},{id:"important",i18nKey:"important",icon:"â­",color:"text-amber-400"},{id:"custom",i18nKey:"all_tasks",icon:"ğŸ“‹",color:"text-gray-500"}],fo=()=>{const{language:e}=ae(),{t:r}=Re(e),a=ho();return t.jsx("ul",{className:"space-y-0.5",children:xo.map(n=>t.jsx(bo,{item:n,label:r(n.i18nKey),count:a[n.id]||0},n.id))})},bo=({item:e,label:r,count:a})=>{const{filterType:n,setFilter:s}=le(),{setView:o}=we(),{density:i}=ae(),c=we(m=>m.currentView)==="tasks"&&n===e.id,{setNodeRef:d,isOver:g}=Xe({id:`filter:${e.id}`,disabled:!e.droppable,data:{type:e.id==="inbox"?"inbox":"filter",value:e.id}}),u=()=>{e.id==="search"?(o("tasks"),s("search")):(o("tasks"),s(e.id))};return t.jsx("li",{ref:d,children:t.jsxs("button",{onClick:u,className:C("w-full flex items-center px-3 text-sm rounded-md transition-colors text-left gap-3 group/item",Qt(i),c?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",g&&e.droppable&&"bg-blue-50 dark:bg-blue-900/30"),children:[t.jsx("span",{className:e.color,children:e.icon}),t.jsx("span",{className:"flex-1",children:r}),e.id!=="search"&&a>0&&t.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:a})]})})},yo=()=>{const{workspaceId:e,userId:r,loading:a}=ne(),n=x.useCallback(c=>!e||!r?()=>{}:tn(e,c),[e,r]),s=e?en(e):!1,{data:o,isPending:i}=Le(["filters",r||void 0,e||void 0],n,e&&s?Zs(e):void 0);return{filters:o,loading:a||!!e&&i}};function ko(e,r="createdAt_desc"){if(!Array.isArray(e))return[];const[a,n]=r.split("_"),o=n==="desc"?-1:1;return[...e].sort((i,l)=>{var g,u,m,p,h,y;let c,d;switch(a){case"dueDate":c=(g=H(i.dueDate))==null?void 0:g.getTime(),d=(u=H(l.dueDate))==null?void 0:u.getTime();break;case"createdAt":c=(m=H(i.createdAt))==null?void 0:m.getTime(),d=(p=H(l.createdAt))==null?void 0:p.getTime();break;case"title":c=i.title.toLowerCase(),d=l.title.toLowerCase();break;case"duration":c=i.duration||0,d=l.duration||0;break;case"important":c=i.isImportant?1:0,d=l.isImportant?1:0;break;case"manual":c=i.order!==void 0?i.order:Number.MAX_SAFE_INTEGER,d=l.order!==void 0?l.order:Number.MAX_SAFE_INTEGER;break;default:c=(h=H(i.createdAt))==null?void 0:h.getTime(),d=(y=H(l.createdAt))==null?void 0:y.getTime()}return wo(c,d)*o})}function wo(e,r){return e===r?0:e==null?1:r==null?-1:e>r?1:e<r?-1:0}function vo(){const e=new Date;e.setHours(0,0,0,0);const r=new Date(e);r.setDate(r.getDate()+1);const a=zr(e),n=new Date(a);n.setDate(n.getDate()+7);const s=new Date(r);return s.setDate(s.getDate()+7),{now:e,tomorrow:r,weekStart:a,weekEnd:n,upcomingEnd:s}}function jo(e,r,a,n){const{now:s,tomorrow:o,weekStart:i,weekEnd:l,upcomingEnd:c}=a;switch(r){case"today":return It(e,s);case"tomorrow":return It(e,o);case"week":return e>=i&&e<l;case"upcoming":return e>=o&&e<c;case"overdue":return e<s&&n!=="completed";default:return!1}}function dr(e,r){if(!r)return e;const a=typeof r=="string"?Yt(r):r,n=a.dates.length>0?vo():null;return e.filter(s=>{if(a.status.length>0){const i=s.status||"todo";if(!a.status.some(c=>c==="active"&&i==="todo"?!0:c===i))return!1}if(a.excludeStatus.length>0){const i=s.status||"todo";if(a.excludeStatus.some(c=>c==="active"&&i==="todo"?!0:c===i))return!1}if(a.isImportant===!0&&!s.isImportant||a.isImportant===!1&&s.isImportant||a.projects.length>0&&!a.projects.some(l=>l==="unassigned"?!s.projectId||s.projectId==="unassigned"||s.projectId==="none":s.projectId===l)||a.excludeProjects.length>0&&a.excludeProjects.some(i=>s.projectId===i)||a.labels.length>0&&(!s.labelIds||!a.labels.some(i=>{var l;return(l=s.labelIds)==null?void 0:l.includes(i)}))||a.excludeLabels.length>0&&s.labelIds&&a.excludeLabels.some(i=>{var l;return(l=s.labelIds)==null?void 0:l.includes(i)})||a.timeBlocks.length>0&&!a.timeBlocks.some(l=>l==="unassigned"?!s.timeBlockId:s.timeBlockId===l)||a.excludeTimeBlocks.length>0&&a.excludeTimeBlocks.some(i=>s.timeBlockId===i))return!1;if(a.durations.length>0){const i=s.duration||0;if(!a.durations.includes(i))return!1}if(n&&a.dates.length>0){const i=H(s.dueDate);if(!i||!a.dates.some(c=>jo(i,c,n,s.status||"todo")))return!1}const o=`${s.title} ${s.description||""}`.toLowerCase();return!(a.keywords.length>0&&!a.keywords.every(l=>Array.isArray(l)?l.some(c=>o.includes(c)):o.includes(l))||a.excludeKeywords.length>0&&a.excludeKeywords.some(l=>o.includes(l)))})}function _o(e){const{keyword:r,showCompleted:a,projectId:n,labelId:s,timeBlockId:o,duration:i,filterType:l}=e,c=r?Yt(r):{keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(n&&c.projects.push(n),s&&c.labels.push(s),o&&c.timeBlocks.push(o),i){const d=typeof i=="number"?i:parseInt(i,10);isNaN(d)||c.durations.push(d)}return l==="today"&&c.dates.push("today"),l==="upcoming"&&c.dates.push("upcoming"),l==="important"&&(c.isImportant=!0),a||c.status.length===0&&c.status.push("active"),c}function Qr(e,r){const{savedFilter:a,sortCriteria:n}=r,s=_o(r);let o=dr(e,s);return a&&a.query&&(o=dr(o,a.query)),ko(o,n||"createdAt_desc")}const Zt=({x:e,y:r,onClose:a,children:n})=>{const s=x.useRef(null);return x.useEffect(()=>{const o=l=>{s.current&&!s.current.contains(l.target)&&a()},i=()=>a();return document.addEventListener("mousedown",o),window.addEventListener("scroll",i,!0),()=>{document.removeEventListener("mousedown",o),window.removeEventListener("scroll",i,!0)}},[a]),Bt.createPortal(t.jsx("div",{ref:s,className:"fixed z-50 min-w-[160px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-100",style:{top:r,left:e},onContextMenu:o=>o.preventDefault(),children:n}),document.body)},Oe=({onClick:e,children:r,className:a,icon:n,variant:s="default"})=>t.jsxs("button",{onClick:o=>{o.stopPropagation(),e()},className:C("w-full text-left px-3 py-2 text-sm flex items-center gap-2 transition-colors",s==="danger"?"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",a),children:[n&&t.jsx("span",{className:C("w-4 h-4",s==="danger"?"text-red-500":"text-gray-400"),children:n}),r]}),Se=({icon:e,label:r,count:a,isActive:n,isOver:s,onClick:o,onContextMenu:i,showZero:l=!1})=>{const{density:c}=ae();return t.jsxs("button",{type:"button",onClick:o,onContextMenu:i,className:C("w-full text-left group flex items-center justify-between px-2 ml-1 rounded-md transition-colors select-none outline-none focus:ring-2 focus:ring-blue-500/50",Qt(c),n?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",s&&"bg-blue-50 dark:bg-blue-900/30"),children:[t.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e&&t.jsx("span",{className:"flex-shrink-0 w-5 flex justify-center text-sm",children:e}),t.jsx("span",{className:"text-sm truncate",children:r})]}),a!==void 0&&(a>0||l&&a===0)&&t.jsx("span",{className:C("text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700/50",n?"text-blue-700 dark:text-blue-300 bg-white":"text-gray-400"),children:a})]})},No=()=>{const{filters:e,loading:r}=yo(),{tasks:a}=et(),{workspaceId:n}=ne();return r?null:t.jsx("div",{className:"space-y-0.5 py-1",children:e.map(s=>t.jsx(Co,{filter:s,tasks:a,workspaceId:n},s.id))})},Co=({filter:e,tasks:r,workspaceId:a})=>{const{t:n}=F(),{filterType:s,targetId:o,setFilter:i}=le(),{openModal:l}=K(),c=s==="custom"&&o===e.id,[d,g]=x.useState(null),u=q.useMemo(()=>{try{return Qr(r,{savedFilter:e,showCompleted:!1}).length}catch(y){return console.warn("[CustomFilterItem] Count error:",y),0}},[r,e]),m=()=>{g(null),l("filter-edit",e)},p=()=>{g(null),l("confirmation",{title:n("delete"),message:`${n("filter")}: ${e.name}
${n("msg.confirm_delete")}`,confirmLabel:n("delete"),variant:"danger",onConfirm:async()=>{e.id&&a&&await sn(a,e.id)}})},h=y=>{y.preventDefault(),y.stopPropagation(),g({x:y.clientX,y:y.clientY})};return t.jsxs(t.Fragment,{children:[t.jsx("div",{onContextMenu:h,children:t.jsx(Se,{label:e.name,icon:t.jsx(Ut,{size:16}),count:u,isActive:c,onClick:()=>i("custom",e.id)})}),d&&t.jsxs(Zt,{x:d.x,y:d.y,onClose:()=>g(null),children:[t.jsx(Oe,{onClick:m,icon:t.jsx(mt,{size:16}),children:n("edit")}),t.jsx(Oe,{onClick:p,variant:"danger",icon:t.jsx(Pe,{size:16}),children:n("delete")})]})]})},So=q.memo(({mins:e,count:r})=>{const{t:a}=F(),{filterType:n,targetId:s,setFilter:o}=le(),i=n==="duration"&&s===e.toString(),{setNodeRef:l,isOver:c}=Xe({id:`duration:${e}`,data:{type:"duration",value:e.toString()}});return t.jsx("div",{ref:l,children:t.jsx(Se,{label:a("sidebar.duration_format",{min:e}),icon:t.jsx(Ka,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),count:r,isActive:i,isOver:c,onClick:()=>o("duration",e.toString())})})}),To=()=>{const{tasks:e}=et(),{customDurations:r}=ae(),a=(r==null?void 0:r.length)>0?r:z.SIDEBAR.DURATIONS,n=x.useMemo(()=>{const s=new Map;return e.forEach(o=>{if(o.status!=="completed"&&o.duration){const i=Number(o.duration);isNaN(i)||s.set(i,(s.get(i)||0)+1)}}),s},[e]);return t.jsx("div",{className:"space-y-0.5 py-1",children:a.map(s=>t.jsx(So,{mins:s,count:n.get(s)||0},s))})},Do=q.memo(({project:e})=>{const{t:r}=F(),{filterType:a,targetId:n,setFilter:s}=le(),{density:o}=ae(),{openModal:i}=K(),l=a==="project"&&n===e.id,[c,d]=x.useState(null),{setNodeRef:g,isOver:u}=Xe({id:`project:${e.id}`,data:{type:"project",value:e.id}}),m=y=>{y==null||y.stopPropagation(),d(null),i("project-edit",e)},p=()=>{d(null),i("confirmation",{title:r("delete"),message:`${r("project")}: ${e.name}
${r("msg.confirm_delete")}`,confirmLabel:r("delete"),variant:"danger",onConfirm:async()=>{e.id&&await Mr(e.id)}})},h=y=>{y.preventDefault(),y.stopPropagation(),d({x:y.clientX,y:y.clientY})};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{ref:g,onClick:()=>s("project",e.id),onContextMenu:h,className:C("group flex items-center justify-between px-2 rounded-md cursor-pointer transition-colors select-none",Qt(o),l?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",u&&"bg-blue-50 dark:bg-blue-900/30"),role:"button",tabIndex:0,"aria-selected":l,"aria-label":`${r("project")}: ${e.name}${l?` (${r("active")})`:""}`,children:[t.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t.jsx("span",{className:C("text-xs shrink-0 transition-colors",l?"text-blue-500":"text-gray-400 group-hover:text-gray-500"),children:t.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),t.jsx("span",{className:"text-sm truncate",children:e.name})]}),t.jsx("button",{onClick:m,className:C("p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-opacity",l?"opacity-100":"opacity-0 sm:group-hover:opacity-100 focus:opacity-100"),"aria-label":r("edit"),title:r("edit"),children:t.jsx(mt,{className:"w-3.5 h-3.5 text-gray-500 dark:text-gray-400"})})]}),c&&t.jsxs(Zt,{x:c.x,y:c.y,onClose:()=>d(null),children:[t.jsx(Oe,{onClick:m,icon:t.jsx(mt,{size:16}),children:r("edit")}),t.jsx(Oe,{onClick:p,variant:"danger",icon:t.jsx(Pe,{size:16}),children:r("delete")})]})]})}),Eo=()=>{const{t:e}=F(),{projects:r,loading:a}=jt();return a?t.jsx(Jr,{}):r.length===0?t.jsx("div",{className:"p-4 text-xs text-gray-400",children:e("sidebar.no_projects")}):t.jsx(kt,{items:r.map(n=>n.id),strategy:wt,children:t.jsx("div",{className:"space-y-0.5 p-2",children:r.map(n=>t.jsx(Xr,{id:n.id,children:t.jsx(Do,{project:n})},n.id))})})},Lo=({title:e,children:r,defaultExpanded:a=!0,action:n,dragHandleProps:s})=>{const{t:o}=F(),[i,l]=x.useState(()=>typeof window<"u"&&window.innerWidth<768?!1:a),d=`section-${encodeURIComponent(e.replace(/\s+/g,"-").toLowerCase())}`;return t.jsxs("div",{className:"mb-2 group/section",children:[t.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[t.jsxs("button",{...s,onClick:()=>l(!i),"aria-expanded":i,"aria-controls":d,className:"flex items-center flex-1 text-xs font-semibold text-gray-500 uppercase hover:text-gray-700 dark:hover:text-gray-300 transition-colors text-left cursor-grab active:cursor-grabbing touch-none select-none",title:o("sidebar.reorder_section"),children:[t.jsx("svg",{className:C("w-3 h-3 mr-1 transition-transform",i?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),e]}),n&&t.jsx("div",{className:"opacity-100 transition-opacity",onClick:g=>g.stopPropagation(),children:n})]}),i&&t.jsx("div",{className:"mt-1",id:d,children:r})]})},Mo=()=>{const{t:e}=F(),{currentView:r,setView:a}=we();return t.jsxs("div",{className:"space-y-0.5 py-1",children:[t.jsx(Se,{label:e("sidebar.target_wizard"),icon:t.jsx(za,{}),isActive:r==="wizard",onClick:()=>a("wizard")}),t.jsx(Se,{label:e("sidebar.target_dashboard"),icon:t.jsx($a,{}),isActive:r==="target-dashboard",onClick:()=>a("target-dashboard")}),t.jsx(Se,{label:e("sidebar.framework_wiki"),icon:t.jsx(qa,{}),isActive:r==="wiki",onClick:()=>a("wiki")})]})},Io=()=>{const{timeBlocks:e,loading:r}=Qe(),{tasks:a}=et(),{workspaceId:n}=ne(),s=q.useMemo(()=>{const o=new Map;let i=0;return a.forEach(l=>{l.status!=="completed"&&(!l.timeBlockId||l.timeBlockId==="unassigned"||l.timeBlockId==="null"?i++:o.set(l.timeBlockId,(o.get(l.timeBlockId)||0)+1))}),{map:o,unassignedCount:i}},[a]);return r?t.jsx(Jr,{}):t.jsxs("div",{className:"space-y-0.5 py-1",children:[e.map(o=>t.jsx(Ao,{block:o,count:s.map.get(o.id||"")||0,workspaceId:n},o.id)),t.jsx(Fo,{count:s.unassignedCount})]})},Ao=({block:e,count:r,workspaceId:a})=>{const{t:n}=F(),{filterType:s,targetId:o,setFilter:i}=le(),{openModal:l}=K(),c=s==="timeblock"&&o===e.id,[d,g]=x.useState(null),{setNodeRef:u,isOver:m}=Xe({id:`timeblock:${e.id}`,data:{type:"timeblock",value:e.id}}),p=()=>{g(null),l("timeblock-edit",e)},h=()=>{g(null),l("confirmation",{title:n("delete"),message:`${n("timeblock")}: ${e.start} - ${e.end}
${n("msg.confirm_delete")}`,confirmLabel:n("delete"),variant:"danger",onConfirm:async()=>{e.id&&a&&await Ir(a,e.id)}})},y=f=>{f.preventDefault(),f.stopPropagation(),g({x:f.clientX,y:f.clientY})};return t.jsxs("div",{ref:u,onContextMenu:y,children:[t.jsx(Se,{label:`${e.start} - ${e.end}`,icon:t.jsx("span",{className:"w-2 rounded-full aspect-square",style:{backgroundColor:e.color}}),count:r,isActive:c,isOver:m,onClick:()=>i("timeblock",e.id||"")}),d&&t.jsxs(Zt,{x:d.x,y:d.y,onClose:()=>g(null),children:[t.jsx(Oe,{onClick:p,icon:t.jsx(mt,{size:16}),children:n("edit")}),t.jsx(Oe,{onClick:h,variant:"danger",icon:t.jsx(Pe,{size:16}),children:n("delete")})]})]})},Fo=({count:e})=>{const{t:r}=F(),{filterType:a,targetId:n,setFilter:s}=le(),o=a==="timeblock"&&n==="unassigned",{setNodeRef:i,isOver:l}=Xe({id:"timeblock:unassigned",data:{type:"timeblock",value:"unassigned"}});return t.jsx("div",{ref:i,children:t.jsx(Se,{label:r("sidebar.unassigned"),icon:t.jsx("span",{className:"w-2 rounded-full aspect-square bg-gray-400"}),count:e,isActive:o,isOver:l,onClick:()=>s("timeblock","unassigned")})})},Oo=({id:e,section:r})=>{const{attributes:a,listeners:n,setNodeRef:s,transform:o,transition:i,isDragging:l}=Rt({id:e}),c={transform:Pt.Transform.toString(o),transition:i,opacity:l?.5:1};return t.jsx("div",{ref:s,style:c,...a,children:t.jsx(Lo,{title:r.title,defaultExpanded:r.defaultExpanded,action:r.action,dragHandleProps:n,children:r.component})})},Bo=["general","projects","targets","timeblocks","durations","filters"],Ro=()=>{const{t:e}=F(),{openModal:r}=K(),[a,n]=q.useState(()=>{const l=localStorage.getItem(z.STORAGE_KEYS.SECTION_ORDER);if(l)try{const c=JSON.parse(l);if(Array.isArray(c)&&c.every(d=>typeof d=="string"))return c}catch{}return Bo});x.useEffect(()=>{localStorage.setItem(z.STORAGE_KEYS.SECTION_ORDER,JSON.stringify(a))},[a]);const s=xt(ke(ft,{activationConstraint:{distance:8}}),ke($t,{coordinateGetter:Wt})),o=l=>{const{active:c,over:d}=l;d&&c.id!==d.id&&n(g=>{const u=g.indexOf(c.id),m=g.indexOf(d.id);return vt(g,u,m)})},i=q.useMemo(()=>({general:{id:"general",title:e("general"),component:t.jsx(t.Fragment,{children:t.jsx(fo,{})}),defaultExpanded:!0},projects:{id:"projects",title:e("projects"),component:t.jsx(Eo,{}),defaultExpanded:!0,action:t.jsx("button",{onClick:()=>r("project-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},targets:{id:"targets",title:e("targets"),component:t.jsx(Mo,{}),defaultExpanded:!1,action:t.jsx("button",{onClick:()=>r("wiki-framework"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},timeblocks:{id:"timeblocks",title:e("timeblocks"),component:t.jsx(Io,{}),defaultExpanded:!1,action:t.jsx("button",{onClick:()=>r("timeblock-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},durations:{id:"durations",title:e("durations"),component:t.jsx(To,{}),defaultExpanded:!1},filters:{id:"filters",title:e("filters"),component:t.jsx(No,{}),defaultExpanded:!1,action:t.jsx("button",{onClick:()=>r("filter-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})}}),[e,r]);return t.jsx(bt,{sensors:s,collisionDetection:yt,onDragEnd:o,children:t.jsx(kt,{items:a,strategy:wt,children:t.jsx("div",{className:"flex flex-col gap-4",children:a.map(l=>{const c=i[l];return c?t.jsx(Oo,{id:c.id,section:c},c.id):null})})})})},Po=({className:e,onCancel:r,onSuccess:a,placeholder:n,initialValue:s=""})=>{const{t:o}=F(),i=n||o("inline_input.placeholder"),[l,c]=x.useState(s),[d,g]=x.useState(!1),[u,m]=x.useState(!1),[p,h]=x.useState(!1),y=async b=>{if(!(!l.trim()||p)){h(!0);try{await Pr({title:l,isImportant:d,dueDate:u?new Date:void 0}),c(""),g(!1),m(!1),a==null||a()}catch(k){console.error(k),O.error(o("msg.task.create_fail"))}finally{h(!1)}}},f=b=>{b.key==="Enter"&&!b.shiftKey&&!b.nativeEvent.isComposing&&(b.preventDefault(),y()),b.key==="Escape"&&(r==null||r())},N=q.useRef(null);return q.useEffect(()=>{const b=T=>{N.current&&!N.current.contains(T.target)&&(l.trim()||r==null||r())},k=setTimeout(()=>{document.addEventListener("mousedown",b)},100);return()=>{clearTimeout(k),document.removeEventListener("mousedown",b)}},[r,l]),t.jsxs("div",{ref:N,className:C("glass-effect rounded-xl shadow-xl p-3 sm:p-4 border border-blue-500/30 dark:border-blue-400/30 animate-in slide-in-from-top-2 duration-300 w-full",e),children:[t.jsx("label",{htmlFor:"inline-task-input",className:"sr-only",children:o("inline_input.label")}),t.jsx("input",{id:"inline-task-input",type:"text",autoFocus:!0,className:"w-full bg-white/50 dark:bg-gray-800/50 text-base sm:text-lg font-medium text-gray-800 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 outline-none mb-3 sm:mb-4 focus:bg-white/80 dark:focus:bg-gray-800/80 p-3 rounded-lg transition-all border border-transparent focus:border-blue-500/30 focus:ring-2 focus:ring-blue-500/20",placeholder:i,value:l,onChange:b=>c(b.target.value),onKeyDown:f,disabled:p}),t.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100 dark:border-gray-700/50",children:[t.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[t.jsx("button",{type:"button",onClick:()=>m(!u),className:C("transition-colors p-2 rounded-lg",u?"text-blue-600 bg-blue-50 hover:bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30 dark:hover:bg-blue-900/50":"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":o(u?"inline_input.aria_today_remove":"inline_input.aria_today"),title:o(u?"inline_input.tooltip_today_remove":"inline_input.tooltip_today"),children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),t.jsx("button",{type:"button",onClick:()=>g(!d),className:C("transition-colors p-2 rounded-lg",d?"text-amber-500 bg-amber-50 hover:bg-amber-100 dark:text-amber-400 dark:bg-amber-900/30 dark:hover:bg-amber-900/50":"text-gray-400 hover:text-amber-500 dark:hover:text-amber-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":o(d?"inline_input.aria_important_remove":"inline_input.aria_important"),title:o(d?"inline_input.tooltip_important_remove":"inline_input.tooltip_important"),children:t.jsx("svg",{className:C("w-5 h-5",d&&"fill-current"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]}),t.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[r&&t.jsx("button",{type:"button",onClick:r,disabled:p,className:"px-3 py-2 sm:px-4 sm:py-2 text-sm font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all","aria-label":o("modal.cancel"),children:o("modal.cancel")}),t.jsx("button",{onClick:()=>y(),disabled:!l.trim()||p,className:"px-4 py-2 sm:px-5 sm:py-2 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl shadow-lg shadow-blue-500/20 transition-all active:scale-95 flex items-center gap-1","aria-label":o("add_task"),children:o(p?"inline_input.adding":"add")})]})]})]})},Wo=({initialValue:e=""})=>{const{t:r}=F(),[a,n]=x.useState(!1);if(q.useEffect(()=>{if(!a)return;const o=i=>{i.key==="Escape"&&n(!1)};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[a]),a)return t.jsx("div",{className:"mb-2",children:t.jsx(Po,{onCancel:()=>n(!1),onSuccess:()=>n(!1),initialValue:e})});const s=e?r("add_task_button.add_with_title",{title:e}):r("add_task_button.add_task");return t.jsxs("button",{onClick:()=>n(!0),"aria-label":r("add_task_button.aria_label"),className:"group flex items-center gap-2 w-full text-left py-2 px-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-2",children:[t.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-transparent group-hover:bg-blue-100/50 dark:group-hover:bg-blue-900/30 transition-colors",children:t.jsx("svg",{className:"w-4 h-4 text-inherit",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),t.jsx("span",{className:"text-sm font-medium",children:s})]})},Zr=q.memo(({task:e,style:r,className:a,dragHandleProps:n})=>{const s=e.status==="completed",o=!!e.isImportant,{openModal:i}=K(),l=async d=>{d.stopPropagation(),e.id&&await qn(e.id,e.status||"todo")},c=async d=>{d.stopPropagation(),e.id&&await Xt(e.id,{isImportant:!o})};return t.jsxs("li",{style:r,onClick:()=>i("task-detail",e),className:C("group flex items-start gap-3 p-[var(--task-p)] bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700/50 rounded-xl hover:shadow-sm hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-200 cursor-pointer hover-lift",a),...n,children:[t.jsx("button",{onClick:l,className:C("mt-0.5 w-5 h-5 rounded-full border flex items-center justify-center transition-colors shrink-0",s?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-blue-400 text-transparent"),"aria-label":s?"Mark as incomplete":"Mark as complete",children:t.jsx(qt,{className:"w-3 h-3",strokeWidth:3})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:C("text-sm text-gray-800 dark:text-gray-200 break-words",s&&"line-through text-gray-400 dark:text-gray-500"),children:e.title}),e.description&&t.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-[var(--task-line-clamp)]",children:e.description}),t.jsx("div",{className:"flex items-center gap-3 mt-2",children:e.dueDate&&t.jsxs("span",{className:C("text-xs flex items-center gap-1",s?"text-gray-400":Hr(e.dueDate)),children:["ğŸ“… ",qr(e.dueDate)]})})]}),t.jsx("div",{className:C("flex items-center gap-1 transition-opacity",o?"opacity-100":"opacity-30 group-hover:opacity-100"),children:t.jsx("button",{onClick:c,className:C("p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",o?"text-yellow-500":"text-gray-400"),title:o?"é‡è¦åº¦ã‚’è§£é™¤":"é‡è¦ã¨ã—ã¦ãƒãƒ¼ã‚¯",children:t.jsx(Cr,{className:"w-4 h-4",fill:o?"currentColor":"none"})})})]})},(e,r)=>{const a=s=>s?s instanceof Date?s.getTime():typeof s.toDate=="function"?s.toDate().getTime():typeof s.getTime=="function"?s.getTime():null:null,n=(s,o)=>{const i=a(s),l=a(o);return i===l};return e.task.id===r.task.id&&e.task.status===r.task.status&&e.task.title===r.task.title&&e.task.description===r.task.description&&e.task.isImportant===r.task.isImportant&&n(e.task.dueDate,r.task.dueDate)}),$o=({tasks:e,timeBlockId:r})=>{const{t:a}=F(),{timeBlocks:n}=Qe(),s=e.reduce((u,m)=>{const p=m.duration,h=typeof p=="number"?p:Number(p);return u+(isNaN(h)?0:h)},0),o=u=>(u/60).toFixed(2)+"h",i=r?n.find(u=>u.id===r):null;if(i&&i.start&&i.end){const u=Vr(i.start,i.end);if(u<=0)return null;const m=(u/60).toFixed(2),p=(s/60).toFixed(2),h=s/u*100,y=Math.min(h,100),f=u-s,N=f<0,b=(Math.abs(f)/60).toFixed(2),k=h>100;return t.jsxs("div",{className:"glass-card flex items-center gap-4 py-3 px-4 my-2",children:[t.jsx("div",{className:"flex-shrink-0 w-24 truncate text-xs font-bold text-gray-500 dark:text-gray-400",title:i.name,children:i.name}),t.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 dark:text-gray-400 tabular-nums",children:[t.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300 w-[4.5ch] text-right inline-block",children:[p,"h"]}),t.jsx("span",{className:"text-gray-400 mx-0.5",children:"/"}),t.jsxs("span",{className:"w-[4.5ch] inline-block",children:[m,"h"]})]}),t.jsx("div",{className:"flex-1 relative h-3 bg-gray-200 dark:bg-gray-700/50 rounded-full overflow-hidden min-w-[100px]",children:t.jsx("div",{className:C("h-full rounded-full transition-all duration-500 ease-out shadow-sm",k?"bg-red-500":"bg-gradient-to-r from-blue-500 to-indigo-600"),style:{width:k?"100%":`${y}%`}})}),t.jsxs("div",{className:"flex-shrink-0 flex items-center justify-end gap-3 min-w-[140px]",children:[t.jsxs("div",{className:C("text-lg font-bold tabular-nums text-right w-[3.5ch]",k?"text-red-500":"text-blue-500"),children:[Math.round(h),t.jsx("span",{className:"text-xs font-normal opacity-70",children:"%"})]}),t.jsxs("div",{className:C("text-xs whitespace-nowrap text-right w-[100px]",N?"text-red-500":"text-green-500"),children:["(",a(N?"task_stats.over":"task_stats.remaining")," ",b,"h)"]})]})]})}const l=e.length,c=l>0?s/l:0,d=a("task_stats.count_unit"),g=a("task_stats.avg_unit");return t.jsxs("div",{className:"glass-card flex items-center justify-evenly py-3 px-4 my-2",children:[t.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[t.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:a("task_stats.count_label")}),t.jsxs("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:[l,d&&t.jsx("span",{className:"text-xs font-normal ml-0.5 text-gray-400",children:d})]})]}),t.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),t.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[t.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:a("task_stats.total_label")}),t.jsx("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200 text-blue-600 dark:text-blue-400",children:o(s)})]}),t.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),t.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[t.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:a("task_stats.avg_label")}),t.jsxs("span",{className:"font-medium text-sm",children:[o(c),t.jsx("span",{className:"text-xs ml-0.5",children:g})]})]})]})},zo=({task:e,className:r})=>{const{attributes:a,listeners:n,setNodeRef:s,transform:o,transition:i,isDragging:l}=Rt({id:e.id||""}),c={transform:Pt.Transform.toString(o),transition:i,zIndex:l?50:"auto",position:"relative"};return t.jsx("div",{ref:s,style:c,className:"touch-manipulation",children:t.jsx(Zr,{task:e,className:C(r,l&&"opacity-80 shadow-lg border-blue-400 bg-blue-50/50"),dragHandleProps:{...a,...n}})})},ea=()=>{const{t:e}=F(),{tasks:r,loading:a}=et(),{filterType:n,targetId:s,query:o,showCompleted:i,sortCriteria:l,setShowCompleted:c,setSortCriteria:d}=le(),{density:g}=ae(),{openModal:u}=K(),m=x.useMemo(()=>o&&o.trim().length>0?{keyword:o,showCompleted:i,projectId:null,labelId:null,timeBlockId:null,duration:null,filterType:"all_tasks",savedFilter:null,sortCriteria:l}:{keyword:o,showCompleted:i,projectId:n==="inbox"?"unassigned":n==="project"?s:null,labelId:n==="label"?s:null,timeBlockId:n==="timeblock"?s:null,duration:n==="duration"?s:null,filterType:n,savedFilter:null,sortCriteria:l},[n,s,o,i,l]),p=x.useMemo(()=>Qr(r,m),[r,m]),h={compact:"space-y-1",normal:"space-y-2",comfortable:"space-y-3",spacious:"space-y-4"}[g],y=xt(ke(ft,{activationConstraint:{distance:8}}),ke($t,{coordinateGetter:Wt})),f=async T=>{const{active:E,over:R}=T;if(!R||E.id===R.id)return;const S=p.findIndex(v=>v.id===E.id),w=p.findIndex(v=>v.id===R.id);if(S!==-1&&w!==-1){const I=vt(p,S,w).map(D=>D.id).filter(Boolean);await $n(I)}},N=!!(o&&o.trim().length>0);if(a&&!N&&r.length===0)return t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("div",{className:"text-gray-400 text-sm animate-pulse",children:e("task_list.loading")})});const k=l==="manual";return t.jsxs("div",{className:"flex flex-col h-full overflow-hidden relative",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-1 pb-24",children:[t.jsxs("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm pt-2 pb-4 mb-4 flex items-center gap-2",children:[t.jsx("div",{className:"flex-1",children:N?t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[t.jsx(Ut,{className:"w-4 h-4"}),e("task_list.searching_results",{query:o||""})]}):t.jsx(Wo,{initialValue:""})}),t.jsx("div",{className:"flex items-center gap-2 px-1",children:t.jsxs("select",{value:l,onChange:T=>d(T.target.value),className:"text-xs bg-transparent border-none outline-none text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer font-medium",children:[t.jsx("option",{value:"manual",children:e("task_list.sort_manual")}),t.jsx("option",{value:"createdAt_desc",children:e("task_list.sort_created")}),t.jsx("option",{value:"dueDate_asc",children:e("task_list.sort_due")}),t.jsx("option",{value:"important_desc",children:e("task_list.sort_important")}),t.jsx("option",{value:"title_asc",children:e("task_list.sort_title")})]})}),t.jsx("button",{onClick:()=>c(!i),className:C("px-3 py-2 rounded-lg text-xs font-medium border transition-colors shrink-0",i?"bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-300":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"),title:e(i?"task_list.hide_completed":"task_list.show_completed"),children:e(i?"task_list.hide_completed":"task_list.show_completed")})]}),p.length===0?t.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center min-h-[60vh]",children:[t.jsxs("div",{className:"relative mb-8",children:[t.jsx("div",{className:"absolute -inset-4 bg-blue-500/10 dark:bg-blue-400/10 blur-3xl rounded-full"}),t.jsx("div",{className:"relative",children:t.jsx(qt,{className:"w-24 h-24 text-blue-200 dark:text-blue-900/50",strokeWidth:1.5})})]}),t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:e("task_list.no_tasks_title")}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs mb-8",children:e(i?"task_list.no_tasks_desc_showing":"task_list.no_tasks_desc_hiding")}),t.jsxs("button",{onClick:()=>u("task-detail",{title:""}),className:"btn-premium flex items-center gap-2",children:[t.jsx(gt,{className:"w-5 h-5"}),e("task_list.add_new_task")]})]}):k?t.jsx(bt,{sensors:y,collisionDetection:yt,onDragEnd:f,children:t.jsx(kt,{items:p.map(T=>T.id||""),strategy:wt,children:t.jsx("div",{className:C("transition-all duration-200",h),children:p.map(T=>t.jsx(zo,{task:T},T.id))})})}):t.jsx("ul",{className:C("transition-all duration-200",h),children:p.map(T=>t.jsx(Zr,{task:T},T.id))})]}),t.jsx("div",{className:"flex-none mt-auto pt-2 border-t border-gray-100 dark:border-gray-800 bg-white/50 dark:bg-gray-900/50 backdrop-blur pb-[calc(0.5rem+env(safe-area-inset-bottom))]",children:t.jsx($o,{tasks:p,timeBlockId:m.timeBlockId})})]})},qo=()=>{const{t:e}=F(),{query:r,setSearchQuery:a,setFilter:n}=le(),{setView:s}=we(),[o,i]=x.useState(r),l=x.useRef(null);x.useEffect(()=>{var u;(u=l.current)==null||u.focus()},[]),x.useEffect(()=>{r!==o&&i(r)},[r]),x.useEffect(()=>{const u=setTimeout(()=>{o!==r&&a(o)},150);return()=>{clearTimeout(u)}},[o,r,a]);const c=u=>{i(u.target.value)},d=()=>{var u;i(""),a(""),(u=l.current)==null||u.focus()},g=()=>{a(""),n("inbox"),s("tasks")};return t.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-50 via-white to-blue-50/30 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:[t.jsxs("div",{className:"relative p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800",children:[t.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full blur-3xl -z-0"}),t.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all hover:scale-105 active:scale-95","aria-label":e("close"),children:t.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),t.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("sidebar.search_placeholder")})]}),t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-2xl blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"}),t.jsx("div",{className:"relative bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 rounded-2xl shadow-lg shadow-gray-200/50 dark:shadow-black/20 overflow-hidden",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"pl-4 text-gray-400",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("input",{ref:l,id:"search-input",name:"search",type:"text",value:o,onChange:c,placeholder:e("sidebar.search_placeholder"),className:"w-full bg-transparent py-4 px-3 text-base text-gray-800 dark:text-gray-100 placeholder-gray-400 outline-none"}),o&&t.jsx("button",{type:"button",onClick:d,className:"p-2 mr-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":e("clear"),children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})]}),!o&&t.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[t.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 font-mono",children:"/"}),t.jsx("span",{children:e("search_view.tips")})]}),o&&t.jsxs("p",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),e("search_view.results_for",{query:o})]})]})]}),t.jsx("div",{className:"flex-1 overflow-hidden",children:o?t.jsx(ea,{}):t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 dark:text-gray-500 p-8",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-full blur-2xl"}),t.jsx("div",{className:"relative w-24 h-24 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center mb-6",children:t.jsx("svg",{className:"w-12 h-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),t.jsx("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-300 mb-2",children:e("search_view.empty_title")}),t.jsx("p",{className:"text-sm text-center max-w-xs opacity-75",dangerouslySetInnerHTML:{__html:e("search_view.empty_desc")}})]})})]})},Uo=()=>{const{workspaceId:e,userId:r,loading:a}=ne(),n=x.useCallback(c=>!e||!r?()=>{}:En(e,c),[e,r]),s=e?Dn(e):!1,{data:o,isPending:i}=Le(["targets",r||void 0,e||void 0],n,e&&s?Tn(e):void 0);return{targets:o||[],loading:a||!!e&&i}},Ko=q.memo(({kgi:e,currentTab:r,onTabChange:a,collapsed:n,onToggleCollapse:s})=>{const{language:o}=ae(),{t:i}=Re(o),l={good:"text-emerald-500",warning:"text-amber-500",danger:"text-red-500"},c={good:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-red-500"},d=l[e.status]||"text-gray-500",g=c[e.status]||"bg-gray-500",u=[{id:"backward",label:i("backward_map"),icon:"ğŸ—ºï¸"},{id:"woop",label:i("woop_board"),icon:"âœ¨"},{id:"okr",label:i("okr_tree"),icon:"ğŸ¯"}];return t.jsx("div",{className:`mb-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg transition-all duration-300 mx-4 mt-4 ${n?"py-2":"py-4"}`,children:t.jsxs("div",{className:"px-6 flex items-center justify-between gap-6",children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("h1",{className:`font-bold text-gray-900 dark:text-white truncate transition-all duration-300 ${n?"text-sm opacity-50":"text-base"}`,children:e.title})}),t.jsx("div",{className:"flex-1 max-w-md hidden sm:block",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"h-3 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:t.jsx("div",{style:{width:`${e.progress}%`},className:`h-full ${g} transition-all duration-1000 ease-out rounded-full`})})}),t.jsxs("span",{className:`font-black ${d} tabular-nums text-sm whitespace-nowrap`,children:[e.progress,"%"]})]})}),t.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0",children:[t.jsxs("div",{className:"text-center hidden sm:block",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:i("target_dashboard.days_left")}),t.jsxs("div",{className:`font-black ${d} tabular-nums`,children:[e.daysLeft,t.jsx("span",{className:"text-xs font-medium ml-0.5 text-gray-400",children:i("target_dashboard.days_unit")})]})]}),t.jsx("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-900/50 p-1 rounded-lg",children:u.map(m=>t.jsxs("button",{onClick:()=>a(m.id),className:`group px-3 py-1.5 rounded-md text-xs font-bold transition-all flex flex-col sm:flex-row items-center gap-1 sm:gap-2 ${r===m.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,title:m.label,children:[t.jsx("span",{className:"text-sm sm:text-base leading-none",children:m.icon}),t.jsx("span",{className:"text-[10px] sm:text-xs leading-none",children:m.label})]},m.id))}),t.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:n?"Expand Header":"Collapse Header",children:t.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform duration-300 ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})})})]})]})})}),Ho=q.memo(({data:e})=>{const{t:r}=F();return!e||!e.milestones?t.jsx("div",{className:"p-4 text-center text-gray-500",children:r("target_dashboard.loading_error")}):t.jsxs("div",{className:"max-w-4xl mx-auto relative pb-10",children:[t.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 -translate-x-1/2"}),e.milestones.map((a,n)=>{const s=a.type==="goal",o=a.type==="current",i=a.completed;let l,c="";return s?(l=t.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-400 text-white flex items-center justify-center text-base shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:"ğŸ†"}),c="bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"):o?(l=t.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 animate-pulse relative",children:r("target_dashboard.backward.now_icon")}),c="border-blue-500 border-2 shadow-md"):i?(l=t.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs shadow ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:"âœ“"}),c="bg-gray-50 dark:bg-gray-800 opacity-70"):(l=t.jsx("div",{className:"w-5 h-5 rounded-full bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative"}),c="bg-white dark:bg-gray-800"),t.jsxs("div",{className:"relative flex items-center mb-4 animate-fade-in group",style:{animationDelay:`${n*50}ms`},children:[t.jsx("div",{className:"w-16 flex-shrink-0 flex justify-center items-center z-10",children:l}),t.jsx("div",{className:"flex-1 pr-4 min-w-0",children:t.jsx("div",{className:`px-3 py-3 rounded-lg border ${o&&!c.includes("border-2")?"border-2 border-blue-500":o?"":"border-gray-200 dark:border-gray-700"} ${c} shadow-sm transition-all hover:shadow-md hover:translate-x-1 cursor-pointer`,children:t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsx("span",{className:`text-xs font-bold ${o?"text-blue-600":"text-gray-500"} flex-shrink-0 font-mono`,children:a.date}),t.jsx("h3",{className:"font-bold text-gray-900 dark:text-white flex-1 truncate text-sm md:text-base",children:a.title}),s&&t.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-bold flex-shrink-0",children:r("target_dashboard.backward.target_label")}),o&&t.jsx("span",{className:"text-[10px] text-blue-500 font-bold flex-shrink-0",children:r("target_dashboard.backward.now_label")})]})})})]},a.id||`milestone-${n}`)})]})}),Go=q.memo(({data:e})=>{const{t:r}=F();if(!e||!e.keyResults)return t.jsx("div",{className:"p-4 text-center text-gray-500",children:r("target_dashboard.loading_error")});const a=n=>n==="high"?"bg-emerald-500":n==="medium"?"bg-amber-500":"bg-red-500";return t.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border-2 border-blue-100 dark:border-blue-900 shadow-lg text-center mb-12 relative z-10 transition-transform hover:scale-[1.01]",children:[t.jsx("div",{className:"absolute top-[-15px] left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-md",children:r("target_dashboard.okr.objective_label")}),t.jsxs("h2",{className:"font-black text-2xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 leading-tight",children:['"',e.objective,'"']}),t.jsx("div",{className:"absolute bottom-[-50px] left-1/2 w-1 h-[50px] bg-gray-200 dark:bg-gray-700 z-0"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative",children:[t.jsx("div",{className:"hidden md:block absolute top-[-25px] left-[16.66%] right-[16.66%] h-1 bg-gray-200 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 rounded-t-xl z-0"}),e.keyResults.map(n=>{const s=n.target>0?Math.round(n.current/n.target*100):0,o=a(n.confidence);return t.jsxs("div",{className:"relative pt-6",children:[t.jsx("div",{className:"absolute top-[-25px] left-1/2 w-1 h-[25px] bg-gray-200 dark:bg-gray-700 md:block hidden"}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-700 transition-all group h-full flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[r("target_dashboard.okr.kr_prefix"),n.id]}),t.jsx("div",{className:`w-3 h-3 rounded-full ${o}`,title:`Confidence: ${n.confidence}`})]}),t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-4 h-12 line-clamp-2",children:n.text}),t.jsxs("div",{className:"space-y-1 mt-auto",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-500 dark:text-gray-400",children:[t.jsx("span",{children:n.current}),t.jsx("span",{children:n.target})]}),t.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-900 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${s}%`}})}),t.jsxs("div",{className:"text-right text-sm font-black text-blue-600 mt-1",children:[s,"%"]})]})]})]},n.id)})]})]})}),Vo=q.memo(({data:e})=>{const{t:r}=F();return!e||!e.obstacles?t.jsx("div",{className:"p-4 text-center text-gray-500",children:r("target_dashboard.loading_error")}):t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto animate-fade-in",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/30 dark:to-blue-900/30 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800 shadow-sm hover:shadow-md transition-shadow",children:[t.jsx("h3",{className:"text-sm font-bold text-indigo-500 uppercase mb-2",children:r("target_dashboard.woop.wish_label")}),t.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',e.wish,'"']})]}),t.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/30 dark:to-rose-900/30 p-6 rounded-2xl border border-pink-100 dark:border-pink-800 shadow-sm hover:shadow-md transition-shadow",children:[t.jsx("h3",{className:"text-sm font-bold text-pink-500 uppercase mb-2",children:r("target_dashboard.woop.outcome_label")}),t.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',e.outcome,'"']})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-2 flex items-center",children:[t.jsx("span",{className:"mr-2",children:"ğŸš§"})," ",r("target_dashboard.woop.obstacles_header")]}),e.obstacles.map(a=>t.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all overflow-hidden relative",children:[t.jsx("div",{className:"p-5 border-l-4 border-gray-400 bg-gray-50 dark:bg-gray-800 relative z-10 transition-transform group-hover:translate-x-1",children:t.jsxs("h4",{className:"font-bold text-gray-700 dark:text-gray-300 flex items-center",children:[t.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-xs px-2 py-1 rounded mr-3 text-gray-600 dark:text-gray-400",children:r("target_dashboard.woop.obstacle_badge")}),a.text]})}),t.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border-t border-gray-100 dark:border-gray-700 flex items-start",children:[t.jsx("div",{className:"flex-shrink-0 mt-1",children:t.jsx("span",{className:"block w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs font-bold",children:r("target_dashboard.woop.if_badge")})}),t.jsx("div",{className:"ml-3 flex-1",children:t.jsxs("p",{className:"text-emerald-800 dark:text-emerald-300 font-bold text-sm",children:["â†’ ",a.plan]})}),t.jsxs("div",{className:"ml-2 flex flex-col items-center",children:[t.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:r("target_dashboard.woop.score_label")}),t.jsx("span",{className:"text-lg font-black text-emerald-500 leading-none",children:a.overcomeCount})]})]})]},a.id)),t.jsx("button",{className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl text-gray-400 hover:border-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition flex items-center justify-center font-bold text-sm",children:r("target_dashboard.woop.add_obstacle")})]})]})}),Yo=()=>{var y;const{t:e}=F(),{targets:r}=Uo(),[a,n]=x.useState("backward"),[s,o]=x.useState(!1),i=r.filter(f=>{var N;return((N=f.mode)==null?void 0:N.toLowerCase())===a.toLowerCase()}),l=f=>({milestones:[{date:"Future",title:f.data.goal_kgi||"Undefined Goal",type:"goal",completed:!1},{date:"Milestone",title:f.data.milestone_minus_1mo||"",type:"milestone",completed:!1},{date:"Today",title:"Current Status",type:"current",completed:!0},{date:"Now",title:f.data.first_action||"",type:"action",completed:!1}]}),c=f=>({wish:f.data.wish||"",outcome:f.data.outcome||"",obstacles:[{id:1,text:f.data.obstacle||"",plan:f.data.plan||"",overcomeCount:0}]}),d=f=>({objective:f.data.objective||"",keyResults:[{id:1,text:f.data.kr_1||"KR 1",current:0,target:100,confidence:"medium"},{id:2,text:f.data.kr_2||"KR 2",current:0,target:100,confidence:"medium"},{id:3,text:f.data.kr_3||"KR 3",current:0,target:100,confidence:"medium"}]}),g=f=>f?typeof f.toDate=="function"?f.toDate().toLocaleDateString():f instanceof Date?f.toLocaleDateString():String(f):"Unknown",u=()=>i.length===0?t.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500 dark:text-gray-400",children:t.jsx("p",{className:"mb-4",children:e("target_dashboard.no_targets",{mode:a.toUpperCase()})})}):t.jsx("div",{className:"space-y-12",children:i.map(f=>t.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-12 last:border-0",children:[t.jsx("div",{className:"mb-4 text-xs text-gray-400 flex justify-end",children:e("target_dashboard.created_at",{date:g(f.createdAt)})}),a==="backward"&&t.jsx(Ho,{data:l(f)}),a==="woop"&&t.jsx(Vo,{data:c(f)}),a==="okr"&&t.jsx(Go,{data:d(f)})]},f.id))}),m=i[0],h={title:((f,N)=>f?N==="backward"?f.data.goal_kgi||e("target_dashboard.kgi_default"):N==="woop"?f.data.wish||e("target_dashboard.wish_default"):N==="okr"?f.data.objective||e("target_dashboard.obj_default"):e("target_dashboard.target_default"):e("target_dashboard.title_default"))(m,a),progress:Number(((y=m==null?void 0:m.data)==null?void 0:y.progress)||0),daysLeft:0,status:"good"};return t.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[t.jsx(Ko,{kgi:h,currentTab:a,onTabChange:n,collapsed:s,onToggleCollapse:()=>o(!s)}),t.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 pb-6 pt-4",children:u()})]})},Jo=[{id:"okr",title:"OKR (Objectives and Key Results)",subTitle:"é‡å¿ƒçš„ãªç›®æ¨™ã¨æˆæœæŒ‡æ¨™",color:"blue",icon:"ğŸ¯",concept:{summary:"ã€Œä½•ã‚’é”æˆã—ãŸã„ã‹ï¼ˆObjectiveï¼‰ã€ã¨ã€Œã©ã†ã‚„ã£ã¦é”æˆã‚’æ¸¬ã‚‹ã‹ï¼ˆKey Resultsï¼‰ã€ã‚’ã‚»ãƒƒãƒˆã§ç®¡ç†ã™ã‚‹æ‰‹æ³•ã€‚",detail:"Googleã‚„Intelã‚‚æ¡ç”¨ã™ã‚‹ç›®æ¨™ç®¡ç†ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚60-70%ã®é”æˆåº¦ã§æˆåŠŸã¨ã¿ãªã™ã€Œãƒ ãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã€ãªç›®æ¨™è¨­å®šãŒç‰¹å¾´ã§ã€ç¾çŠ¶ç¶­æŒã§ã¯ãªãé£›èºçš„ãªæˆé•·ã‚’ä¿ƒã—ã¾ã™ã€‚"},useCases:[{title:"ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å€‹äººã®ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—",before:"æ¼ ç„¶ã¨ã€ŒæŠ€è¡“åŠ›ã‚’ä¸Šã’ãŸã„ã€ã¨è€ƒãˆã€æ‰‹å½“ãŸã‚Šæ¬¡ç¬¬ã«æœ¬ã‚’èª­ã‚€ãŒèº«ã«ã¤ã‹ãªã„ã€‚",after:"O:ã€Œãƒãƒ¼ãƒ ã®Rustç§»è¡Œã‚’ãƒªãƒ¼ãƒ‰ã™ã‚‹å­˜åœ¨ã«ãªã‚‹ã€ KR:ã€ŒRustã§ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’1ã¤å®Ÿè£…ã™ã‚‹ã€ã€Œç¤¾å†…å‹‰å¼·ä¼šã‚’3å›é–‹å‚¬ã™ã‚‹ã€ã¨è¨­å®šã—ã€å­¦ç¿’ã®ç„¦ç‚¹ãŒå®šã¾ã£ãŸã€‚"},{title:"å‰¯æ¥­ãƒ»å€‹äººé–‹ç™º",before:"ã€Œã„ã¤ã‹ã‚¢ãƒ—ãƒªã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã„ã€ã¨æ€ã„ã¤ã¤ã€ãƒ€ãƒ©ãƒ€ãƒ©ã¨é–‹ç™ºã‚’ç¶šã‘ã¦ã—ã¾ã†ã€‚",after:"O:ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ„›ã•ã‚Œã‚‹MVPã‚’ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã€ KR:ã€Œ3æœˆæœ«ã¾ã§ã«ã‚¹ãƒˆã‚¢å…¬é–‹ã€ã€ŒåˆæœŸãƒ¦ãƒ¼ã‚¶ãƒ¼100äººç²å¾—ã€ã€Œé€±æ¬¡ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ç‡30%é”æˆã€ã¨æœŸé™ã¨æ•°å­—ã§ã‚³ãƒŸãƒƒãƒˆã—ãŸã€‚"}],tips:[{q:"ç›®æ¨™ãŒé«˜ã™ãã¦ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒç¶šãã¾ã›ã‚“ã€‚",a:"OKRã¯ã€Œé”æˆã§ããªãã¦ã‚‚ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒãªã„ã€ã®ãŒå‰æã§ã™ã€‚60%é”æˆã§ãã‚Œã°å¾¡ã®å­—ã¨è€ƒãˆã€å¤±æ•—ã‚’æã‚Œãšã«æŒ‘æˆ¦ã™ã‚‹ã“ã¨è‡ªä½“ã‚’è©•ä¾¡ã—ã¾ã—ã‚‡ã†ã€‚é€²æ—ã¯é€±æ¬¡ã§ãƒã‚§ãƒƒã‚¯ã—ï¼ˆWinã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰ã€å°ã•ãªå‰é€²ã‚’ç¥ã†ã“ã¨ãŒé‡è¦ã§ã™ã€‚"},{q:"KRï¼ˆæˆæœæŒ‡æ¨™ï¼‰ã®æ•°å­—ã¯ã©ã†æ±ºã‚ã‚Œã°ã„ã„ã§ã™ã‹ï¼Ÿ",a:"ã€Œé ‘å¼µã‚Œã°é”æˆã§ãã‚‹ï¼ˆ50%ï¼‰ã€ã¨ã€Œã‹ãªã‚Šé‹ãŒè‰¯ããªã„ã¨ç„¡ç†ï¼ˆ100%ï¼‰ã€ã®é–“ã€ã€Œå°‘ã—èƒŒä¼¸ã³ãŒå¿…è¦ï¼ˆ70%ï¼‰ã€ãªãƒ©ã‚¤ãƒ³ã‚’ç‹™ã„ã¾ã—ã‚‡ã†ã€‚è¨ˆæ¸¬ä¸å¯èƒ½ãªã€Œã€œã‚’é ‘å¼µã‚‹ã€ã¯NGã§ã™ã€‚"}]},{id:"woop",title:"WOOP (Wish, Outcome, Obstacle, Plan)",subTitle:"ç§‘å­¦çš„ãªé¡˜æœ›å®Ÿç¾ãƒ¡ã‚½ãƒƒãƒ‰",color:"amber",icon:"âœ¨",concept:{summary:"ã€Œæœ€é«˜ã®æœªæ¥ã€ã¨ã€Œç¾å®Ÿã®éšœå®³ã€ã‚’å¯¾æ¯”ã•ã›ã€è„³ã‚’æœ¬æ°—ã«ã•ã›ã‚‹ï¼ˆãƒ¡ãƒ³ã‚¿ãƒ«ãƒ»ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒ†ã‚£ãƒ³ã‚°ï¼‰ã€‚",detail:"ãŸã ãƒã‚¸ãƒ†ã‚£ãƒ–ã«è€ƒãˆã‚‹ã ã‘ã§ãªãã€ãã‚Œã‚’é˜»ã‚€è‡ªåˆ†ã®å†…é¢ã®éšœå®³ã‚’ç›´è¦–ã—ã€ã€ŒIf-Thenãƒ—ãƒ©ãƒ³ï¼ˆã‚‚ã—XãŒèµ·ããŸã‚‰Yã™ã‚‹ï¼‰ã€ã‚’äº‹å‰ã«ç”¨æ„ã™ã‚‹ã“ã¨ã§ã€å®Ÿè¡Œç‡ã‚’é£›èºçš„ã«é«˜ã‚ã¾ã™ã€‚"},useCases:[{title:"æ¯æ—¥ã®é‹å‹•ç¿’æ…£",before:"ã€Œç—©ã›ãŸã„ã€ã¨æ€ã†ã ã‘ã§ã€ä»•äº‹ã§ç–²ã‚Œã‚‹ã¨ã€Œä»Šæ—¥ã¯ã„ã„ã‚„ã€ã¨ã‚µãƒœã£ã¦ã—ã¾ã†ã€‚",after:"W:ã€Œæ¯æ—¥30åˆ†èµ°ã‚‹ã€ O:ã€Œä½“ãŒè»½ããªã‚Šã€è‡ªä¿¡ãŒã¤ãã€ Obs:ã€Œä»•äº‹å¸°ã‚Šã®ç–²åŠ´æ„Ÿã€ Plan:ã€Œã‚‚ã—ã€ç–²ã‚ŒãŸã€ã¨æ„Ÿã˜ãŸã‚‰ã€ã€ã¨ã‚Šã‚ãˆãšã‚¦ã‚§ã‚¢ã«ç€æ›¿ãˆã‚‹ã€ã€ã¨æ±ºã‚ã¦ãŠãã“ã¨ã§ã€è‡ªå‹•çš„ã«è¡Œå‹•ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚"},{title:"è³‡æ ¼è©¦é¨“ã®å‹‰å¼·",before:"ã‚¹ãƒãƒ›ã®é€šçŸ¥ãŒæ°—ã«ãªã£ã¦é›†ä¸­åŠ›ãŒé€”åˆ‡ã‚Œã¦ã—ã¾ã†ã€‚",after:"Obs:ã€Œã‚¹ãƒãƒ›ã‚’è¦‹ã¦ã—ã¾ã†ç™–ã€ Plan:ã€Œã‚‚ã—ã€å‹‰å¼·ã‚’å§‹ã‚ã‚‹ã€æ™‚ã¯ã€ã€ã‚¹ãƒãƒ›ã‚’åˆ¥ã®éƒ¨å±‹ã«ç½®ãã€ã€ã¨ã„ã†ã‚»ãƒƒãƒˆè¡Œå‹•ã‚’å¾¹åº•ã—ã€é›†ä¸­æ™‚é–“ã‚’ç¢ºä¿ã—ãŸã€‚"}],tips:[{q:"éšœå®³ï¼ˆObstacleï¼‰ã«ã¯ä½•ã‚’æ›¸ã‘ã°ã„ã„ã§ã™ã‹ï¼Ÿ",a:"ã€Œæ™‚é–“ãŒãªã„ã€ã€ŒãŠé‡‘ãŒãªã„ã€ã¨ã„ã£ãŸå¤–éƒ¨è¦å› ã§ã¯ãªãã€ã€Œã¤ã„ãƒ€ãƒ©ãƒ€ãƒ©ã—ã¦ã—ã¾ã†ã€ã€Œå¤±æ•—ã™ã‚‹ã®ãŒæ€–ã„ã€ã¨ã„ã£ãŸã€è‡ªåˆ†ã®å†…é¢ã«ã‚ã‚‹æ„Ÿæƒ…ã‚„ç™–ã€ã‚’æ¢ã‚Šã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã“ããŒã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«å¯èƒ½ãªçœŸã®éšœå®³ã§ã™ã€‚"},{q:"è¨ˆç”»ï¼ˆPlanï¼‰ãŒã†ã¾ãæ©Ÿèƒ½ã—ã¾ã›ã‚“ã€‚",a:"ã€Œã‚‚ã—ã€œãªã‚‰ã€ã®æ¡ä»¶ï¼ˆãƒˆãƒªã‚¬ãƒ¼ï¼‰ã‚’ã‚‚ã£ã¨å…·ä½“çš„ã«ã—ã¾ã—ã‚‡ã†ã€‚ã€Œç–²ã‚ŒãŸã‚‰ã€ã‚ˆã‚Šã‚‚ã€Œå¸°å®…ã—ã¦ã‚½ãƒ•ã‚¡ã‚’è¦‹ãŸç¬é–“ã€ã®æ–¹ãŒè„³ã¯åå¿œã—ã‚„ã™ããªã‚Šã¾ã™ã€‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚‚ã€Œé ‘å¼µã‚‹ã€ã§ã¯ãªãã€Œ5åˆ†ã ã‘ã‚„ã‚‹ã€ãªã©ãƒãƒ¼ãƒ‰ãƒ«ã‚’æ¥µé™ã¾ã§ä¸‹ã’ã¦ã¿ã¦ãã ã•ã„ã€‚"}]},{id:"backward",title:"Backward Design (é€†ç®—æ€è€ƒ)",subTitle:"ã‚´ãƒ¼ãƒ«ã‹ã‚‰ç¾åœ¨åœ°ã¸ã®æ¶ã‘æ©‹",color:"purple",icon:"ğŸ—ºï¸",concept:{summary:"ã€Œã‚ã‚ŠãŸã„å§¿ï¼ˆã‚´ãƒ¼ãƒ«ï¼‰ã€ã‹ã‚‰æ™‚é–“ã‚’å·»ãæˆ»ã—ã¦ã€ä»Šã‚„ã‚‹ã¹ãã“ã¨ã‚’æ±ºå®šã™ã‚‹ã€‚",detail:"ç¾åœ¨ã‹ã‚‰ã®ç©ã¿ä¸Šã’ï¼ˆForecastingï¼‰ã§ã¯ãªãã€æœªæ¥ã‹ã‚‰ã®é€†ç®—ï¼ˆBackcastingï¼‰ã‚’è¡Œã†ã“ã¨ã§ã€ç¾çŠ¶ã®å»¶é•·ç·šä¸Šã«ã¯ãªã„é£›èºçš„ãªæˆæœã‚„ã€ç„¡é§„ã®ãªã„æœ€çŸ­ãƒ«ãƒ¼ãƒˆãŒè¦‹ãˆã¦ãã¾ã™ã€‚é•·æœŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿…é ˆã®è¦–ç‚¹ã§ã™ã€‚"},useCases:[{title:"åŠå¹´å¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆä¸»å‚¬",before:"ã¨ã‚Šã‚ãˆãšä¼šå ´ã ã‘æŠ¼ã•ãˆã¦ã€é›†å®¢ã‚„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ç›´å‰ã«ãªã£ã¦æ…Œã¦ã¦æº–å‚™ã™ã‚‹ã€‚",after:"Goal:ã€Œã‚¤ãƒ™ãƒ³ãƒˆæˆåŠŸã€â†’ 1ãƒ¶æœˆå‰:ã€Œæº€å¸­ã€â†’ 3ãƒ¶æœˆå‰:ã€Œå‘ŠçŸ¥é–‹å§‹ãƒ»LPå®Œæˆã€â†’ ä»Š:ã€Œã‚³ãƒ³ã‚»ãƒ—ãƒˆæ±ºå®šãƒ»ç™»å£‡è€…ã‚ªãƒ•ã‚¡ãƒ¼ã€ã¨ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã‚’ç½®ãã€ä»Šæœˆã®å¿…é ˆã‚¿ã‚¹ã‚¯ã‚’æ´—ã„å‡ºã—ãŸã€‚"},{title:"ã‚­ãƒ£ãƒªã‚¢ãƒã‚§ãƒ³ã‚¸",before:"ä»Šã®ä»•äº‹ãŒå«Œã§è»¢è·ã‚µã‚¤ãƒˆã‚’çœºã‚ã‚‹ãŒã€ç‰¹ã«ã‚¹ã‚­ãƒ«ã‚‚ãªãå‹•ã‘ãªã„ã€‚",after:"Goal:ã€Œ3å¹´å¾Œã«ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ç‹¬ç«‹ã€â†’ 2å¹´å¾Œ:ã€Œå‰¯æ¥­æœˆå20ä¸‡ã€â†’ 1å¹´å¾Œ:ã€Œã‚¹ã‚­ãƒ«ç¿’å¾—ãƒ»ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªå®Œæˆã€â†’ ä»Š:ã€Œã‚¹ã‚¯ãƒ¼ãƒ«é¸ã³ãƒ»å­¦ç¿’æ™‚é–“ã®ç¢ºä¿ã€ã¨é€†ç®—ã—ã€å…·ä½“çš„ãªä¸€æ­©ã‚’è¸ã¿å‡ºã—ãŸã€‚"}],tips:[{q:"é ã„æœªæ¥ã™ãã¦ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒæ¹§ãã¾ã›ã‚“ã€‚",a:"ç„¡ç†ã«è©³ç´°ã‚’æ±ºã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ã€Œçµ¶å¯¾ã«ã“ã†ãªã£ã¦ã„ãŸã„ã€ã¨ã„ã†çŠ¶æ…‹ï¼ˆKGIï¼‰ã¨æœŸé™ã‚’æ±ºã‚ã€ãã“ã‹ã‚‰ã€Œãã®ç›´å‰ã¯ã©ã†ãªã£ã¦ã„ã‚‹ã¯ãšã‹ï¼Ÿã€ã¨1ã‚¹ãƒ†ãƒƒãƒ—ãšã¤æˆ»ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ç›´è¿‘ã®ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã ã‘è©³ç´°ã§ã‚ã‚Œã°OKã§ã™ã€‚"},{q:"è¨ˆç”»é€šã‚Šã«é€²ã¾ãªã„æ™‚ã¯ï¼Ÿ",a:"é€†ç®—æ€è€ƒã§ä½œã£ãŸè¨ˆç”»ã¯ã€Œä»®èª¬ã€ã§ã™ã€‚çŠ¶æ³ãŒå¤‰ã‚ã‚Œã°ãƒªãƒ«ãƒ¼ãƒˆï¼ˆå†è¨ˆç®—ï¼‰ã™ã‚Œã°è‰¯ã„ã®ã§ã™ã€‚é‡è¦ãªã®ã¯ã€Œã‚´ãƒ¼ãƒ«ã‚’è¦‹å¤±ã‚ãªã„ã“ã¨ã€ã€‚ç¾åœ¨åœ°ãŒå¤‰ã‚ã£ã¦ã‚‚ã€ãƒŠãƒ“ãŒç›®çš„åœ°ã¸ã®ãƒ«ãƒ¼ãƒˆã‚’å¼•ãç›´ã™ã‚ˆã†ã«ã€è¨ˆç”»ã‚’ä¿®æ­£ã—ç¶šã‘ã¾ã—ã‚‡ã†ã€‚"}]}],Xo=q.memo(({framework:e,onClick:r})=>{const{t:a}=F();return t.jsxs("div",{className:"framework-card cursor-pointer bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-6 transition-all duration-300 hover:border-blue-500 hover:shadow-lg hover:scale-105 group",onClick:()=>r(e),role:"button",tabIndex:0,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&r(e)},children:[t.jsx("div",{className:"text-4xl mb-3 transform transition-transform group-hover:scale-110 duration-300",children:e.icon}),t.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:e.title}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 h-10",children:e.concept.summary}),t.jsxs("div",{className:"mt-4 flex items-center text-xs text-blue-600 dark:text-blue-400 font-medium opacity-80 group-hover:opacity-100 transition-opacity",children:[t.jsx("span",{children:a("wiki.view_details")}),t.jsx("svg",{className:"w-4 h-4 ml-1 transform transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})}),Qo=()=>{const{openModal:e}=K(),{t:r}=F();return t.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-900 overflow-y-auto custom-scrollbar",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 animate-fade-in",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-8 flex items-center",children:[t.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500 mr-3",children:t.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),t.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-gray-300",children:r("sidebar.framework_wiki")})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Jo.map(a=>t.jsx(Xo,{framework:a,onClick:n=>e("wiki-framework",n)},a.id))})]})})},Fe={backward:{id:"backward",label:"Backward Design",description:"ã‚´ãƒ¼ãƒ«ã‹ã‚‰é€†ç®—ã—ã¦ã€ç€å®Ÿãªã‚¿ã‚¹ã‚¯ã‚’è¨­è¨ˆã—ã¾ã™ã€‚é•·æœŸçš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æœ€é©ã§ã™ã€‚",steps:[{title:"Goal / KGI",description:"æœ€çµ‚ã‚´ãƒ¼ãƒ«ã®æ—¥ä»˜ã¨çŠ¶æ…‹ï¼ˆKGIï¼‰ã‚’å®šç¾©ã—ã¾ã—ã‚‡ã†ã€‚",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼š2025å¹´3æœˆ31æ—¥ã¾ã§ã«ã€æœˆé–“ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼1ä¸‡äººã‚’é”æˆã™ã‚‹ã€‚",key:"goal_kgi"}]},{title:"Milestone",description:"ã‚´ãƒ¼ãƒ«ã®1ãƒ¶æœˆå‰ã«åˆ°é”ã™ã¹ãçŠ¶æ…‹ã¯ï¼Ÿ",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šã‚³ã‚¢æ©Ÿèƒ½ã®å®Ÿè£…ãŒå®Œäº†ã—ã€ãƒ™ãƒ¼ã‚¿ç‰ˆã‚’100äººã«é…å¸ƒæ¸ˆã¿ã§ã‚ã‚‹ã€‚",key:"milestone_minus_1mo"}]},{title:"First Action",description:"ä»Šã™ãå§‹ã‚ã‚‹ã¹ãæœ€åˆã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ï¼Ÿ",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šç«¶åˆã‚¢ãƒ—ãƒªã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’åˆ†æã—ã¦æ©Ÿèƒ½ãƒªã‚¹ãƒˆã‚’ä½œã‚‹ã€‚",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"é¡˜æœ›ã¨éšœå®³ã‚’å¯¾æ¯”ã•ã›ã€å®Ÿè¡Œè¨ˆç”»ã‚’è‡ªå‹•åŒ–ã—ã¾ã™ã€‚ç¿’æ…£åŒ–ã‚„å›°é›£ãªç›®æ¨™ã«æœ‰åŠ¹ã§ã™ã€‚",steps:[{title:"Wish (é¡˜æœ›)",description:"é”æˆã—ãŸã„ã“ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿï¼ˆæŒ‘æˆ¦çš„ã ãŒé”æˆå¯èƒ½ãªã‚‚ã®ï¼‰",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šæ¯æ—¥30åˆ†ã€è‹±èªã®å‹‰å¼·ã‚’ã™ã‚‹ã€‚",key:"wish"}]},{title:"Outcome (çµæœ)",description:"ãã‚ŒãŒé”æˆã§ããŸæ™‚ã®ã€Œæœ€é«˜ã®ãƒ¡ãƒªãƒƒãƒˆã€ã‚„æ„Ÿæƒ…ã‚’è©³ã—ãã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã¦ãã ã•ã„ã€‚",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šå­—å¹•ãªã—ã§æµ·å¤–ãƒ‰ãƒ©ãƒã‚’æ¥½ã—ã‚ã‚‹ã‚ˆã†ã«ãªã‚Šã€è‡ªä¿¡ãŒã¤ãã€‚",key:"outcome"}]},{title:"Obstacle (éšœå®³)",description:"ãã‚Œã‚’é‚ªé­”ã™ã‚‹ã€ã‚ãªãŸè‡ªèº«ã®ã€Œå†…é¢ã®éšœå®³ã€ï¼ˆæ„Ÿæƒ…ãƒ»ç™–ãƒ»æ€ã„è¾¼ã¿ï¼‰ã¯ä½•ã§ã™ã‹ï¼Ÿ",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šä»•äº‹ã§ç–²ã‚Œã¦å¸°ã£ã¦ãã‚‹ã¨ã€ã¤ã„ã‚¹ãƒãƒ›ã§SNSã‚’è¦‹ã¦ã—ã¾ã†ã€‚",key:"obstacle"}]},{title:"Plan (è¨ˆç”»)",description:"ã€Œã‚‚ã—ï¼ˆéšœå®³ï¼‰ãŒèµ·ããŸã‚‰ã€ï¼ˆè¡Œå‹•ï¼‰ã™ã‚‹ã€ã¨ã„ã†å½¢ã§è¨ˆç”»ã‚’ç«‹ã¦ã¾ã—ã‚‡ã†ã€‚",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šã‚‚ã—ã€Œç–²ã‚Œã¦ã‚½ãƒ•ã‚¡ã«åº§ã‚Šãã†ã€ã«ãªã£ãŸã‚‰ã€ã€Œã™ãã«ãƒ†ã‚­ã‚¹ãƒˆã‚’é–‹ãã€ã¨ã™ã‚‹ã€‚",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"é‡å¿ƒçš„ãªç›®æ¨™(O)ã¨ã€æ¸¬å®šå¯èƒ½ãªæˆæœ(KR)ã‚’çµ„ã¿åˆã‚ã›ã¾ã™ã€‚çµ„ç¹”ã‚„ãƒãƒ¼ãƒ ã€é«˜ã„æˆé•·ã‚’ç›®æŒ‡ã™å€‹äººã«ã€‚",steps:[{title:"Objective",description:"å®šæ€§çš„ã§ãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹ã‚ˆã†ãªç›®æ¨™ã‚’1ã¤æ±ºã‚ã¦ãã ã•ã„ã€‚",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šä¸–ç•Œä¸­ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«æ„›ã•ã‚Œã‚‹é–‹ç™ºãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚‹ï¼",key:"objective"}]},{title:"Key Results",description:"ç›®æ¨™é”æˆã‚’æ¸¬ã‚‹ãŸã‚ã®ã€3ã¤ã®å…·ä½“çš„ãªæ•°å­—ï¼ˆæŒ‡æ¨™ï¼‰ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚",inputs:[{type:"text",placeholder:"KR 1 (ä¾‹: GitHubã‚¹ã‚¿ãƒ¼æ•° 1,000åˆ°é”)",key:"kr_1"},{type:"text",placeholder:"KR 2 (ä¾‹: é€±é–“ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•° 500å›)",key:"kr_2"},{type:"text",placeholder:"KR 3 (ä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¶™ç¶šç‡ 40%ç¶­æŒ)",key:"kr_3"}]}]}},Zo=({mode:e,currentStep:r})=>{const a=Fe[e],n=a.steps.length;return t.jsx("div",{className:"flex items-center justify-between mb-8 max-w-2xl mx-auto",children:t.jsx("div",{className:"flex items-center space-x-1 mx-auto w-full justify-center",children:a.steps.map((s,o)=>{const i=o+1,l=r>i,c=r===i,d=r<i;return t.jsxs(q.Fragment,{children:[t.jsxs("div",{className:"flex flex-col items-center relative z-10 w-16",children:[t.jsx("div",{className:C("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold",c&&"bg-blue-600 text-white ring-4 ring-blue-100 dark:ring-blue-900",l&&"bg-green-500 text-white",d&&"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:l?"âœ“":i}),t.jsx("div",{className:C("text-[10px] mt-1 font-medium text-center w-20 truncate",c?"text-blue-600 dark:text-blue-400":"text-gray-400"),children:s.title})]}),o<n-1&&t.jsx("div",{className:C("h-1 flex-1 mx-[-10px] mt-[-14px] z-0 transition-all duration-500 rounded-full",r>i?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},o)})})})},ei=({mode:e,step:r,onBack:a,onNext:n,onFinish:s})=>{const{t:o}=F(),i=Fe[e],l=r-1,c=i.steps[l],d=i.steps.length,[g,u]=x.useState({}),m=(h,y)=>{u(f=>({...f,[h]:y}))},p=()=>{const h=c.inputs.reduce((y,f,N)=>{const b=g[N]||"";return f.key&&(y[f.key]=b),y},{});r<d?n(h):s(h)};return t.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[t.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:[i.label," Mode"]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-8 min-h-[500px] flex flex-col",children:[t.jsx(Zo,{mode:e,currentStep:r}),t.jsxs("div",{className:"flex-1 animate-fade-in",children:[t.jsxs("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-100",children:["Q",r,". ",c.title]}),t.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:c.description}),t.jsx("div",{className:"mb-8 space-y-4",children:c.inputs.map((h,y)=>t.jsx("div",{children:h.type==="textarea"?t.jsx("textarea",{className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",rows:5,placeholder:h.placeholder,value:g[y]||"",onChange:f=>m(y,f.target.value)}):t.jsx("input",{type:"text",className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",placeholder:h.placeholder,value:g[y]||"",onChange:f=>m(y,f.target.value)})},h.key||y))})]}),t.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[t.jsx("button",{onClick:a,className:"px-6 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition font-medium",children:o("wizard.back")}),r<d?t.jsxs("button",{onClick:p,className:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-md transition font-medium flex items-center",children:[o("wizard.next"),t.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]}):t.jsxs("button",{onClick:p,className:"px-8 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 shadow-lg transition font-medium flex items-center transform hover:scale-105",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),o("wizard.finish")]})]})]})]})},ti=({currentMode:e,onModeChange:r,onStart:a})=>{const{t:n}=F(),s=Fe[e],o=(n(`wizard.features.${e}`)||"").split(",");return t.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-full max-h-[700px] flex flex-col py-6",children:[t.jsx("div",{className:"mb-4 flex-shrink-0",children:t.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[t.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),t.jsx("span",{className:"font-medium",children:n("sidebar.target_wizard")}),t.jsx("svg",{className:"w-3 h-3 mx-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),t.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:n("wizard.select_method")})]})}),t.jsxs("div",{className:"mb-6 flex-shrink-0",children:[t.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:n("wizard.select_framework")}),t.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:Object.keys(Fe).map(i=>t.jsx("button",{onClick:()=>r(i),className:C("flex-1 py-2 text-xs font-bold rounded-lg transition-all",e===i?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:Fe[i].label},i))})]}),t.jsx("div",{className:"flex-1 mb-6 min-h-0",children:t.jsx("div",{className:"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden shadow-xl",children:t.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mb-4 shadow-lg flex-shrink-0",children:t.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 text-xl",children:s.label}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-2xl leading-relaxed",children:s.description}),t.jsx("div",{className:"mt-6 flex flex-wrap gap-2 justify-center",children:o.map(i=>t.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300 shadow-sm",children:i.trim()},i))})]})})}),t.jsx("div",{className:"flex justify-center pb-4 flex-shrink-0",children:t.jsxs("button",{onClick:a,className:"group inline-flex items-center px-6 py-3 border-2 border-transparent shadow-xl font-bold rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition-all transform hover:scale-105 active:scale-95",children:[t.jsx("span",{children:n("wizard.start_mode")}),t.jsx("svg",{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},ri=()=>{const[e,r]=x.useState("backward"),[a,n]=x.useState(0),[s,o]=x.useState({}),{setView:i,viewData:l}=we(),{workspaceId:c}=ne(),{t:d}=F();x.useEffect(()=>{l!=null&&l.mode&&(r(l.mode),n(0))},[l]);const g=p=>{o(h=>({...h,...p})),n(h=>h+1)},u=async p=>{const h={...s,...p};if(!c){O.error(d("wizard.alert_no_workspace"));return}try{await Ln(c,{mode:e,data:h}),console.log("Wizard Completed, Saved to Firestore",h),O.success(d("wizard.alert_create_success",{label:Fe[e].label})),n(0),o({}),i("target-dashboard")}catch(y){console.error("Failed to save wizard target:",y),O.error(d("wizard.alert_save_fail"))}},m=()=>{n(p=>Math.max(0,p-1))};return a===0?t.jsx(ti,{currentMode:e,onModeChange:r,onStart:()=>n(1)}):t.jsx(ei,{mode:e,step:a,onBack:m,onNext:g,onFinish:u})},ai=(e,r)=>{const a=xt(ke(ft,{activationConstraint:{distance:5}}),ke(_a,{activationConstraint:{delay:z.DND.TOUCH_DELAY,tolerance:5}})),{language:n}=ae(),{t:s}=Re(n),o=x.useRef(e),i=x.useCallback(()=>{o.current=e},[e]),l=x.useCallback(async c=>{var y,f,N,b;const{active:d,over:g}=c;if(!g)return;const u=String(d.id),m=String(g.id),h=(k=>k.startsWith(z.DND.PREFIX_TASK)?k.split(":")[1]:null)(u);if(h){const k=(y=g.data.current)==null?void 0:y.type,T=(f=g.data.current)==null?void 0:f.value,E={};if(k===z.DND.TYPE_PROJECT&&(E.projectId=T),k===z.DND.TYPE_INBOX&&(E.projectId=null),k===z.DND.TYPE_TIMEBLOCK&&(E.timeBlockId=T==="unassigned"?null:T),Object.keys(E).length>0)try{await Xt(h,E)}catch(R){console.error("Failed to update task via dnd",R),O.error(s("msg.dnd.reorderFailed")||s("error"))}}if(u!==m&&!h){const k=o.current,T=k.findIndex(R=>R.id===u),E=k.findIndex(R=>R.id===m);if(T!==-1&&E!==-1){const R=vt(k,T,E);(N=r==null?void 0:r.onOptimisticReorder)==null||N.call(r,R);try{await Fs(R)}catch(S){console.error("Failed to update project order",S),O.error(s("msg.dnd.reorderFailed")||s("error")),(b=r==null?void 0:r.onRevertReorder)==null||b.call(r,k)}}}},[e,r,s]);return{sensors:a,handleDragEnd:l,handleDragStart:i}},si=()=>{const{workspaceId:e,userId:r,loading:a}=ne(),n=x.useCallback(c=>!e||!r?()=>{}:pn(e,c),[e,r]),s=e?hn(e):!1,{data:o,isPending:i}=Le(["labels",r||void 0,e||void 0],n,e&&s?mn(e):void 0);return{labels:o||[],loading:a||!!e&&i}},ni=()=>{const{fontEn:e,fontJp:r,fontSize:a,density:n,themeMode:s}=ae(),{setSidebarDensity:o}=zt();x.useLayoutEffect(()=>{const i=document.documentElement,l=document.body;s==="dark"?i.classList.add("dark"):s==="light"?i.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?i.classList.add("dark"):i.classList.remove("dark"),i.style.setProperty("--font-en",`"${e}"`),i.style.setProperty("--font-jp",`"${r}"`);const c=["font-app-sm","font-app-base","font-app-md","font-app-lg","font-app-xl"];l.classList.remove(...c),l.classList.add(`font-app-${a}`);const d=["app-density-compact","app-density-normal","app-density-comfortable","app-density-spacious"];l.classList.remove(...d),l.classList.add(`app-density-${n}`),o(n);const g=window.matchMedia("(prefers-color-scheme: dark)"),u=()=>{s==="system"&&(g.matches?i.classList.add("dark"):i.classList.remove("dark"))};return g.addEventListener("change",u),()=>g.removeEventListener("change",u)},[s,e,r,a,n,o])},oi=()=>{ni();const{filterType:e,targetId:r,query:a}=le(),{currentView:n,setView:s}=we(),{setFilter:o}=le(),{projects:i,setProjectsOverride:l}=jt(),{labels:c}=si(),[d,g]=q.useState({user:A.currentUser,loading:!A.currentUser}),u=x.useCallback(f=>{const N=f.target,b=["INPUT","TEXTAREA"].includes(N.tagName)||N.closest("[contenteditable]"),k=document.querySelector('[role="dialog"]');f.key==="/"&&!b&&!k&&(f.preventDefault(),o("search"),s("search"))},[o,s]);q.useEffect(()=>{const f=Ft(A,N=>{g({user:N,loading:!1})});return document.addEventListener("keydown",u),()=>{f(),document.removeEventListener("keydown",u)}},[u]);const{sensors:m,handleDragEnd:p,handleDragStart:h}=ai(i,{onOptimisticReorder:l,onRevertReorder:l}),y=x.useMemo(()=>{var f,N;if(n==="wizard")return"Goal Wizard";if(n==="target-dashboard")return"Target Dashboard";if(n==="wiki")return"Framework Wiki";if(n==="search")return a?`"${a}" ã®æ¤œç´¢çµæœ`:"æ¤œç´¢";if(e==="project")return((f=i.find(b=>b.id===r))==null?void 0:f.name)||"Project";if(e==="label")return((N=c.find(b=>b.id===r))==null?void 0:N.name)||"Label";if(e==="search")return a?`"${a}" ã®æ¤œç´¢çµæœ`:"æ¤œç´¢";switch(e){case"inbox":return"Inbox";case"today":return"Today";case"upcoming":return"Upcoming";case"important":return"Important";case"custom":return"All Tasks";default:return"TaskMg"}},[n,a,e,r,i,c]);return d.loading?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"èª­ã¿è¾¼ã¿ä¸­..."})]})}):d.user?t.jsxs(bt,{sensors:m,collisionDetection:yt,onDragEnd:p,onDragStart:h,children:[t.jsx(Ma,{}),t.jsx(mo,{}),t.jsx(xs,{sidebarContent:t.jsx(Ro,{}),title:y,children:n==="wizard"?t.jsx(ri,{}):n==="target-dashboard"?t.jsx(Yo,{}):n==="wiki"?t.jsx(Qo,{}):n==="search"?t.jsx(qo,{}):t.jsx(ea,{})})]}):t.jsx(Da,{})},ii=new Na({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1,retry:!1}}});ds();const ta=document.getElementById("app");if(!ta)throw new Error("Failed to find the root element");const li=t.jsx(oo,{children:t.jsx(xa,{client:ii,children:t.jsx(oi,{})})});pa.createRoot(ta).render(li);
