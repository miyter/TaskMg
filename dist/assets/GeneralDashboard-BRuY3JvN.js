import{d as h,l as N,m as w,n as _,q as M,u as O,v as D,x as p,y,z as C,A as S,B as T,C as I,D as B,E as Q,j as e}from"./vendor-j1jwJuCp.js";import{u as k,K as $,S as W,o as q,L as A,M as E,N as P,O as R,P as z,Q as G,R as f}from"./main-SGyarJqL.js";import{u as K}from"./i18n-DnoxxtLm.js";import"./firebase-CTDNBn9D.js";const L=({tasks:s})=>{const{t:r}=k(),[l,i]=h.useState("day"),x=h.useMemo(()=>s.filter(a=>a.status==="completed"&&a.completedAt),[s]),m=h.useMemo(()=>{const a=new Date,n=[];for(let d=3;d>=0;d--){let o,u,g;const c=l==="day"?N(a,d):l==="week"?w(a,d):l==="month"?_(a,d):M(a,d);l==="day"?(o=O(c),u=D(c),g=p(o,"M/d",{locale:y})):l==="week"?(o=C(c,{weekStartsOn:1}),u=S(c,{weekStartsOn:1}),g=`${p(o,"M/d",{locale:y})}~`):l==="month"?(o=T(c),u=I(c),g=p(o,"Mæœˆ",{locale:y})):(o=B(c),u=Q(c),g=`Q${Math.floor(o.getMonth()/3)+1}`);const j=x.filter(v=>{const b=$(v.completedAt);return b&&b>=o&&b<=u}).length;n.push({label:g,count:j,date:o})}return n},[x,l]),t=Math.max(...m.map(a=>a.count),1);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-100 dark:border-gray-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“Š"})," ",r("general_dashboard.completion_chart")||"Completion Stats"]}),e.jsx(W,{value:l,onChange:a=>i(a.target.value),className:"w-24 text-xs h-7 py-0",options:[{value:"day",label:r("date_options.day")||"Day"},{value:"week",label:r("date_options.week")||"Week"},{value:"month",label:r("date_options.month")||"Month"},{value:"quarter",label:r("date_options.quarter")||"Quarter"}]})]}),e.jsx("div",{className:"flex items-end justify-between h-32 gap-2 pt-2 pb-1",children:m.map((a,n)=>{const d=Math.round(a.count/t*100);return e.jsxs("div",{className:"flex flex-col items-center flex-1 gap-2 group",children:[e.jsx("div",{className:"relative w-full flex justify-center items-end h-full",children:e.jsx("div",{className:q("w-full max-w-[20px] rounded-t-sm transition-all duration-500 ease-out","bg-blue-200 dark:bg-blue-900/40 group-hover:bg-blue-400 dark:group-hover:bg-blue-700",n===3&&"bg-blue-500 dark:bg-blue-600"),style:{height:`${d}%`},children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-6 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-[10px] py-0.5 px-1.5 rounded pointer-events-none transition-opacity font-mono",children:a.count})})}),e.jsx("span",{className:"text-[10px] text-gray-400 font-medium truncate w-full text-center",children:a.label})]},n)})})]})},V=()=>{const{t:s}=k(),{tasks:r}=A(),{timeBlocks:l}=E(),i=P(),{density:x}=K();r.length,r.filter(t=>t.status==="completed").length;const m=[{id:"inbox",label:s("inbox"),count:i.inbox,icon:R,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{id:"today",label:s("today"),count:i.today,icon:z,color:"text-green-500",bg:"bg-green-50 dark:bg-green-900/20"},{id:"upcoming",label:s("upcoming"),count:i.upcoming,icon:G,color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-900/20"}];return e.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar p-4 md:p-6 space-y-6",children:[e.jsxs("header",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:s("dashboard")}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:[s("general_dashboard.overall_stats")," & ",s("general_dashboard.time_block_usage")]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:m.map(t=>e.jsxs("div",{className:"p-4 rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-800 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:t.label}),e.jsx("p",{className:"text-2xl font-black text-gray-800 dark:text-gray-100 tabular-nums",children:t.count})]}),e.jsx("div",{className:`p-3 rounded-lg ${t.bg}`,children:e.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})})]},t.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(L,{tasks:r}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h2",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:s("general_dashboard.overall_stats")}),e.jsx(f,{tasks:r.filter(t=>t.status!=="completed"),timeBlockId:null})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:s("general_dashboard.time_block_usage")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(t=>{const a=r.filter(n=>n.timeBlockId===t.id&&n.status!=="completed");return e.jsx("div",{className:"p-4 rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-800 shadow-sm",children:e.jsx(f,{tasks:a,timeBlockId:t.id||null})},t.id)})})]})]})};export{V as GeneralDashboard};
