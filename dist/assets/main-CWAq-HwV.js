const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FilterEditModal-Ro_AX8ek.js","assets/react-vendor-S0ejyqQM.js","assets/vendor-ByXwcMJ3.js","assets/vendor-C78Dafum.css","assets/i18n-CheCVeOO.js","assets/firebase-DFuLlbUP.js","assets/ErrorMessage-3xOT1wGQ.js","assets/Modal-CkAe2OHX.js","assets/dnd-Bm4qqyTz.js","assets/date-fns-C4HQ7vGy.js","assets/LabelEditModal-B3W47-R3.js","assets/ProjectEditModal-rl9ud3Ee.js","assets/SettingsModal-1HjvzEkC.js","assets/TaskDetailModal-DR6LfAoJ.js","assets/TimeBlockEditModal-7-L29V_K.js","assets/WorkspaceEditModal-CCwLz_jS.js","assets/WikiFrameworkModal-BGbXAQ6r.js","assets/ConfirmationModal-DqhiPbAV.js"])))=>i.map(i=>d[i]);
var zr=Object.defineProperty;var qr=(e,t,s)=>t in e?zr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var ne=(e,t,s)=>qr(e,typeof t!="symbol"?t+"":t,s);import{r as w,j as r,c as ve,R as M,d as Zt,e as Ur,a as Kr,f as Vr,Q as Hr}from"./react-vendor-S0ejyqQM.js";import{e as We,f as jt,C as Ze,S as vt,v as Nt,d as gt,g as Gr,u as Xr,a as zt,T as Yr,P as Jr,D as Qr,p as Zr,r as es,c as ts}from"./dnd-Bm4qqyTz.js";import{b as qt,i as rs,e as ss,f as as,h as ns,j as os,k as er,m as is,T as $e,q as he,o as _t,c as F,n as Ne,p as tr,a as ls,g as de,r as V,t as Z,d as $,u as Se,v as Ae,x as cs,y as ds,s as us,z as gs,w as It,A as rr}from"./firebase-DFuLlbUP.js";import{u as O,g as Me,t as Ut,i as hs}from"./i18n-CheCVeOO.js";import{t as ms,h as ps,p as et,u as sr,j as xs,k as fs,l as y,m as q,q as oe,r as G,v as Ye,x as ht,y as ar,z as bs,A as ys,B as Ct,C as ks}from"./vendor-ByXwcMJ3.js";import{f as mt,a as nr,t as ws,i as js,b as Re,c as or,d as ir,e as vs,g as Ns,h as _s,j as He,s as Is,k as Cs,l as Ts,m as Ds,n as Es,o as dt,p as Ss,q as As,r as Ms,u as Fs,v as Ls}from"./date-fns-C4HQ7vGy.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const Rs="modulepreload",Ps=function(e){return"/"+e},Kt={},ie=function(t,s,a){let n=Promise.resolve();if(s&&s.length>0){let i=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=i(s.map(d=>{if(d=Ps(d),d in Kt)return;Kt[d]=!0;const u=d.endsWith(".css"),g=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Rs,u||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),u)return new Promise((x,f)=>{m.addEventListener("load",x),m.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},Os={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function Bs(){if(typeof window<"u"&&window.GLOBAL_FIREBASE_CONFIG&&window.GLOBAL_FIREBASE_CONFIG.apiKey)return window.GLOBAL_FIREBASE_CONFIG;try{const e=Os;if(e&&e.VITE_FIREBASE_API_KEY)return{apiKey:e.VITE_FIREBASE_API_KEY,authDomain:e.VITE_FIREBASE_AUTH_DOMAIN,projectId:e.VITE_FIREBASE_PROJECT_ID,storageBucket:e.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:e.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:e.VITE_FIREBASE_APP_ID,measurementId:e.VITE_FIREBASE_MEASUREMENT_ID}}catch{}if(typeof __firebase_config<"u")try{return typeof __firebase_config=="object"?__firebase_config:JSON.parse(__firebase_config)}catch(e){return console.error("[Firebase] Config parse failed (legacy):",e),null}return console.error("[Firebase] All config sources failed. Check index.html injection."),null}const pe=Bs();if(!(pe!=null&&pe.apiKey)||!(pe!=null&&pe.projectId)){const e="[Firebase] Configuration is missing required fields (apiKey, projectId). Application cannot start.";throw console.error(e,pe),new Error(e)}let pt;qt().length>0?pt=qt()[0]:pt=rs(pe);const lr=pt,A=ss(lr,{persistence:os,popupRedirectResolver:ns}),j=as(lr),S=()=>{const e=O(s=>s.language);return w.useMemo(()=>Me(e),[e])},Ws=()=>{const{t:e}=S(),[t,s]=w.useState(""),[a,n]=w.useState(""),[o,i]=w.useState(!1),[l,c]=w.useState(null),d=async g=>{g.preventDefault(),c(null),i(!0);try{await er(A,t,a)}catch(m){let x=e("login.error.login_fail");switch(m.code){case"auth/invalid-email":x=e("login.error.invalid_email");break;case"auth/user-disabled":x=e("login.error.user_disabled");break;case"auth/user-not-found":x=e("login.error.user_not_found");break;case"auth/wrong-password":x=e("login.error.wrong_password");break;case"auth/too-many-requests":x=e("login.error.too_many_requests");break;case"auth/network-request-failed":x=e("login.error.network_error");break}c(x)}finally{i(!1)}},u=async()=>{c(null),i(!0);try{await is(A)}catch(g){c(e("login.error.guest_fail").replace("{message}",g.message))}finally{i(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-premium-gradient p-4 antialiased",children:r.jsxs("div",{className:"max-w-md w-full p-6 sm:p-8 bg-white/70 dark:bg-gray-800/60 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 rounded-[2rem] shadow-2xl transition-all duration-300",children:[r.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[r.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-3xl shadow-lg mb-6 animate-float",children:r.jsx("img",{src:"/images/web-app-manifest-512x512.png",alt:"Logo",className:"h-12 w-12"})}),r.jsxs("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:["Task",r.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:e("login.tagline")})]}),r.jsxs("form",{onSubmit:d,className:"space-y-5 sm:space-y-6",children:[l&&r.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium animate-in fade-in slide-in-from-top-4 duration-300 shadow-sm",children:l}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"login-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:e("login.email_label")}),r.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:g=>s(g.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"mail@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"login-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:e("login.password_label")}),r.jsx("input",{id:"login-password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:g=>n(g.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),r.jsx("button",{type:"submit",disabled:o,className:"btn-premium w-full py-4 text-lg shadow-lg hover:shadow-xl active:scale-[0.98] transition-all",children:e(o?"login.signing_in":"login.signin")})]}),r.jsxs("div",{className:"mt-8",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-200/50 dark:border-gray-700/50"})}),r.jsx("div",{className:"relative flex justify-center text-xs",children:r.jsx("span",{className:"px-3 bg-transparent text-gray-400 uppercase tracking-widest font-bold",children:e("login.or")})})]}),r.jsxs("button",{onClick:u,disabled:o,className:"mt-8 w-full py-3.5 bg-gray-100/50 hover:bg-gray-200/70 active:bg-gray-300 dark:bg-gray-700/30 dark:hover:bg-gray-600/50 dark:active:bg-gray-600 text-gray-700 dark:text-gray-200 font-bold rounded-2xl transition-all active:scale-95 flex items-center justify-center gap-3 border border-transparent hover:border-gray-300 dark:hover:border-gray-600",children:[r.jsx("span",{className:"text-xl",children:"ðŸ•µï¸"})," ",e("login.guest_login")]})]})]})})},$s={success:3e3,info:4e3,error:6e3},Ke=new Map,zs=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,11),Ge=ve(e=>({toasts:[],addToast:(t,s="info")=>{const a=zs();e(i=>({toasts:[...i.toasts,{id:a,message:t,type:s}]}));const n=$s[s],o=setTimeout(()=>{e(i=>({toasts:i.toasts.filter(l=>l.id!==a)})),Ke.delete(a)},n);Ke.set(a,o)},removeToast:t=>{const s=Ke.get(t);s&&(clearTimeout(s),Ke.delete(t)),e(a=>({toasts:a.toasts.filter(n=>n.id!==t)}))}})),D={success:e=>Ge.getState().addToast(e,"success"),error:e=>Ge.getState().addToast(e,"error"),info:e=>Ge.getState().addToast(e,"info")};function I(...e){return ms(ps(e))}const qs=()=>{const{t:e}=S(),{toasts:t,removeToast:s}=Ge();return t.length===0?null:r.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:t.map(a=>r.jsx("div",{onClick:()=>s(a.id),className:I("pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-xl shadow border text-sm font-medium cursor-pointer hover:opacity-90",a.type==="success"&&"bg-white dark:bg-gray-800 text-green-600 dark:text-green-400 border-green-200 dark:border-green-900",a.type==="error"&&"bg-white dark:bg-gray-800 text-red-600 dark:text-red-400 border-red-200 dark:border-red-900",a.type==="info"&&"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700"),children:r.jsxs("div",{className:"flex items-start gap-3",children:[a.type==="success"&&r.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),a.type==="error"&&r.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.type==="info"&&r.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"leading-5 flex-1",children:a.message}),r.jsx("button",{onClick:n=>{n.stopPropagation(),s(a.id)},className:"flex-shrink-0 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":e("close"),children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})},a.id))})},v={Z_INDEX:{BASE:0,SIDEBAR_BACKDROP:20,SIDEBAR_MOBILE:30,SIDEBAR_RESIZER:40,DROPDOWN:50,STICKY:100,MODAL_BACKDROP:9990,MODAL:9991,POPOVER_BACKDROP:9998,POPOVER:9999,TOOLTIP:1e4,TOAST:10001},DEFAULT_COLORS:{PROJECT:"#7E57C2",PROJECT_INACTIVE:"#cccccc",LABEL:"#42A5F5",TIME_BLOCK:"#3B82F6",TIME_BLOCK_INACTIVE:"#cccccc",LABEL_INACTIVE:"#9ca3af"},DENSITY_CLASSES:{compact:"py-0.5",normal:"py-1.5",comfortable:"py-2.5",spacious:"py-3.5"},SIDEBAR_DENSITY:{compact:"py-0.5",normal:"py-1.5",comfortable:"py-2.5",spacious:"py-3.5"},DND:{PREFIX_TASK:"task:",PREFIX_PROJECT:"project:",PREFIX_FILTER:"filter:",TYPE_PROJECT:"project",TYPE_INBOX:"inbox",TYPE_TIMEBLOCK:"timeblock",TYPE_LABEL:"label",TOUCH_DELAY:250},STORAGE_KEYS:{WIDTH:"sidebarWidth",DENSITY:"sidebar_density",SECTION_PREFIX:"sidebar-section:",SECTION_ORDER:"sidebar_section_order",FONT_EN:"font_family_en",FONT_JP:"font_family_jp",FONT_SIZE:"fontSize"},SIDEBAR:{MIN_WIDTH:150,MAX_WIDTH:500,DEFAULT_WIDTH:280,BREAKPOINT_MD:768,DURATIONS:[30,45,60,75,90]},TIME_BLOCK:{MAX_COUNT:10,DEFAULTS:[{id:"tb_morning",name:"06:00 - 09:00",start:"06:00",end:"09:00",color:"#EF4444",order:0},{id:"tb_afternoon",name:"13:00 - 17:00",start:"13:00",end:"17:00",color:"#3B82F6",order:1},{id:"tb_night",name:"20:00 - 22:00",start:"20:00",end:"22:00",color:"#8B5CF6",order:2}]},LAYOUT:{CONTAINER_WIDTH_CLASS:"w-full max-w-full",MOBILE_SIDEBAR_WIDTH_PX:280},FONTS:{EU:[{label:"Google Sans",value:'"Google Sans", Inter, sans-serif'},{label:"Inter",value:"Inter, sans-serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"System UI",value:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}],JP:[{label:"M PLUS 2",value:'"M PLUS 2", sans-serif'},{label:"Noto Sans JP",value:'"Noto Sans JP", sans-serif'},{label:"Hiragino / Yu Gothic",value:'"Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif'}]}},Us=[{value:"#EF5350",key:"red"},{value:"#EC407A",key:"pink"},{value:"#AB47BC",key:"purple"},{value:"#7E57C2",key:"deep_purple"},{value:"#5C6BC0",key:"indigo"},{value:"#42A5F5",key:"blue"},{value:"#29B6F6",key:"light_blue"},{value:"#26C6DA",key:"cyan"},{value:"#26A69A",key:"teal"},{value:"#66BB6A",key:"green"},{value:"#9CCC65",key:"light_green"},{value:"#D4E157",key:"lime"},{value:"#FFEE58",key:"yellow"},{value:"#FFCA28",key:"amber"},{value:"#FFA726",key:"orange"},{value:"#FF7043",key:"deep_orange"},{value:"#8D6E63",key:"brown"},{value:"#BDBDBD",key:"grey"},{value:"#78909C",key:"blue_grey"}];Us.map(e=>e.value);const Ks=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),le=ve(e=>({stack:[],openModal:(t,s=null)=>{if(!t)return;const n={id:Ks(),type:t,data:s};e(o=>({stack:[...o.stack,n]}))},closeModal:()=>e(t=>t.stack.length===0?t:{stack:t.stack.slice(0,-1)}),closeAllModals:()=>e({stack:[]})})),Vs=1024,ze=ve()(et(e=>({sidebarWidth:v.SIDEBAR.DEFAULT_WIDTH,isSidebarOpen:!0,sidebarDensity:"normal",sidebarSections:["general","projects","targets","timeblocks","durations","filters"],setSidebarWidth:t=>{const s=Math.max(v.SIDEBAR.MIN_WIDTH,Math.min(t,v.SIDEBAR.MAX_WIDTH));e({sidebarWidth:s})},toggleSidebar:()=>e(t=>({isSidebarOpen:!t.isSidebarOpen})),setSidebarOpen:t=>e({isSidebarOpen:t}),setSidebarDensity:t=>e({sidebarDensity:t}),setSidebarSections:t=>e({sidebarSections:t})}),{name:"ui-storage",partialize:e=>({sidebarWidth:e.sidebarWidth,sidebarDensity:e.sidebarDensity,isSidebarOpen:e.isSidebarOpen,sidebarSections:e.sidebarSections}),onRehydrateStorage:()=>e=>{typeof window<"u"&&window.innerWidth<Vs&&(e==null||e.setSidebarOpen(!1));const t=["general","projects","targets","timeblocks","durations","filters"];if(e&&(!e.sidebarSections||!Array.isArray(e.sidebarSections)||e.sidebarSections.length===0))e.sidebarSections=t;else if(e){const s=new Set(e.sidebarSections),a=t.filter(n=>!s.has(n));a.length>0&&(a.includes("general")?e.sidebarSections=["general",...e.sidebarSections]:e.sidebarSections=[...e.sidebarSections,...a])}}})),E=(e,t="0 0 24 24")=>({className:s,size:a,strokeWidth:n=2,...o})=>r.jsx("svg",{className:I("w-4 h-4",s),width:a,height:a,fill:"none",stroke:"currentColor",viewBox:t,strokeWidth:n,strokeLinecap:"round",strokeLinejoin:"round",...o,children:e}),Hs=E(r.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})),Gs=E(r.jsx("path",{d:"M18 6L6 18M6 6l12 12"})),cr=E(r.jsx("path",{d:"M12 5v14M5 12h14"})),De=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M3 6h18"}),r.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6"})]})),Ee=E(r.jsx("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),"0 0 24 24"),Xs=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]})),qe=E(r.jsx("path",{d:"M20 6L9 17l-5-5"})),Pe=E(r.jsxs(r.Fragment,{children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("path",{d:"M21 21l-4.35-4.35"})]})),Pi=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),r.jsx("path",{d:"M12 9v4M12 17h.01"})]})),Oi=E(r.jsx("path",{d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})),Bi=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),r.jsx("path",{d:"M14 2v6h6"}),r.jsx("path",{d:"M16 13H8"}),r.jsx("path",{d:"M16 17H8"}),r.jsx("path",{d:"M10 9H8"})]})),Ys=E(r.jsx("path",{d:"M15 18l-6-6 6-6"})),Oe=E(r.jsx("path",{d:"M9 18l6-6-6-6"})),dr=E(r.jsx("path",{d:"M6 9l6 6 6-6"})),Js=E(r.jsx("path",{d:"M18 15l-6-6-6 6"})),Qs=E(r.jsx("path",{d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})),ur=E(r.jsx("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})),gr=E(r.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})),hr=E(r.jsx("path",{d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})),Zs=E(r.jsxs(r.Fragment,{children:[r.jsx("circle",{cx:"9",cy:"12",r:"1"}),r.jsx("circle",{cx:"9",cy:"5",r:"1"}),r.jsx("circle",{cx:"9",cy:"19",r:"1"}),r.jsx("circle",{cx:"15",cy:"12",r:"1"}),r.jsx("circle",{cx:"15",cy:"5",r:"1"}),r.jsx("circle",{cx:"15",cy:"19",r:"1"})]})),Je=E(r.jsxs(r.Fragment,{children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.jsx("path",{d:"M16 2v4M8 2v4M3 10h18"})]})),mr=E(r.jsxs(r.Fragment,{children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.jsx("path",{d:"M16 2v4M8 2v4M3 10h18"}),r.jsx("path",{d:"M8 14h.01"}),r.jsx("path",{d:"M12 14h.01"}),r.jsx("path",{d:"M16 14h.01"}),r.jsx("path",{d:"M8 18h.01"}),r.jsx("path",{d:"M12 18h.01"}),r.jsx("path",{d:"M16 18h.01"})]})),pr=E(r.jsxs(r.Fragment,{children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 6v6l4 2"})]})),ea=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M17 1l4 4-4 4"}),r.jsx("path",{d:"M3 11V9a4 4 0 014-4h14"}),r.jsx("path",{d:"M7 23l-4-4 4-4"}),r.jsx("path",{d:"M21 13v2a4 4 0 01-4 4H3"})]})),xr=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M4 11V4h16v7"}),r.jsx("path",{d:"M4 11h5.8a2.2 2.2 0 004.4 0H20v8a1 1 0 01-1 1H5a1 1 0 01-1-1v-8z"})]})),Wi=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]})),$i=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),r.jsx("path",{d:"M1 1l22 22"})]})),zi=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M6 4h8a4 4 0 014 4 4 4 0 01-4 4H6z"}),r.jsx("path",{d:"M6 12h9a4 4 0 014 4 4 4 0 01-4 4H6z"})]})),qi=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M19 4h-9"}),r.jsx("path",{d:"M14 20H5"}),r.jsx("path",{d:"M15 4L9 20"})]})),Ui=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M8 6h13"}),r.jsx("path",{d:"M8 12h13"}),r.jsx("path",{d:"M8 18h13"}),r.jsx("path",{d:"M3 6h.01"}),r.jsx("path",{d:"M3 12h.01"}),r.jsx("path",{d:"M3 18h.01"})]})),Ki=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M10 6h11"}),r.jsx("path",{d:"M10 12h11"}),r.jsx("path",{d:"M10 18h11"}),r.jsx("path",{d:"M4 6h1v4"}),r.jsx("path",{d:"M4 10h2"}),r.jsx("path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"})]})),Vi=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M9 11l3 3L22 4"}),r.jsx("path",{d:"M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"})]})),Hi=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M16 18l6-6-6-6"}),r.jsx("path",{d:"M8 6l-6 6 6 6"})]})),Gi=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M6 4v16"}),r.jsx("path",{d:"M18 4v16"}),r.jsx("path",{d:"M6 12h12"})]})),Xi=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"}),r.jsx("path",{d:"M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"})]})),Yi=E(r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2.5 2h-1c-.5 0-1 .5-1 1v1c0 .5.5 1 1 1z"}),r.jsx("path",{d:"M16 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2.5 2h-1c-.5 0-1 .5-1 1v1c0 .5.5 1 1 1z"})]})),ta=({className:e,size:t,...s})=>r.jsxs("svg",{className:I("animate-spin",e),width:t||16,height:t||16,fill:"none",viewBox:"0 0 24 24",...s,children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ra="/assets/logo-BADOZ29k.png",ee=ve()(et(e=>({filterType:"inbox",targetId:null,query:"",showCompleted:!1,sortCriteria:"createdAt_desc",setFilter:(t,s=null)=>e({filterType:t,targetId:s,query:""}),setSearchQuery:t=>e({query:t,filterType:"search"}),clearFilter:()=>e({filterType:"inbox",targetId:null,query:""}),setShowCompleted:t=>e({showCompleted:t}),setSortCriteria:t=>e({sortCriteria:t})}),{name:"filter-storage",partialize:e=>({filterType:e.filterType,targetId:e.targetId,query:e.query,showCompleted:e.showCompleted,sortCriteria:e.sortCriteria})})),te=ve()(et(e=>({currentView:"tasks",viewData:null,setView:(t,s=null)=>e({currentView:t,viewData:s})}),{name:"view-storage",partialize:e=>({currentView:e.currentView})})),sa=()=>{const{t:e}=S(),{query:t,setFilter:s}=ee(),{currentView:a,setView:n}=te(),o=a==="search",i=()=>{s("search"),n("search")};return r.jsxs("button",{onClick:i,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-all duration-200 group ${o?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700/50 text-gray-600 dark:text-gray-400"}`,"aria-label":e("sidebar.search_placeholder"),children:[r.jsx(Pe,{className:`w-4 h-4 transition-colors ${o?"text-blue-600 dark:text-blue-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),r.jsx("span",{className:"flex-1 text-sm font-medium",children:t?`"${t}"`:e("sidebar.search_placeholder")}),r.jsx("span",{className:"text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"/"})]})},aa=({children:e})=>{const{sidebarWidth:t,isSidebarOpen:s,sidebarDensity:a,toggleSidebar:n,setSidebarWidth:o}=ze(),{t:i}=S(),l={compact:"p-1",normal:"p-2",comfortable:"p-4",spacious:"p-6"}[a];M.useEffect(()=>{const d=g=>{if(!document.body.classList.contains("resizing"))return;const m=Math.max(v.SIDEBAR.MIN_WIDTH,Math.min(v.SIDEBAR.MAX_WIDTH,g.clientX));o(m)},u=()=>{document.body.classList.remove("resizing"),document.body.style.cursor="default"};return document.addEventListener("mousemove",d),document.addEventListener("mouseup",u),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)}},[o]);const c=()=>{document.body.classList.add("resizing"),document.body.style.cursor="col-resize"};return r.jsxs("aside",{className:I("h-full transition-all duration-300 flex flex-col group relative","bg-white dark:bg-gray-900 lg:bg-white/70 lg:dark:bg-gray-800/60","lg:backdrop-blur-xl","border-r border-gray-200/50 dark:border-gray-700/30",s?"translate-x-0":"-translate-x-full lg:translate-x-0","fixed lg:relative lg:z-0 shadow-2xl lg:shadow-none overflow-hidden","w-[var(--sidebar-mobile)] lg:w-[var(--sidebar-desktop)]"),style:{"--sidebar-desktop":`${t}px`,"--sidebar-mobile":s?`${v.LAYOUT.MOBILE_SIDEBAR_WIDTH_PX}px`:"0px",width:s?void 0:"0px",zIndex:window.innerWidth<1024?v.Z_INDEX.SIDEBAR_MOBILE:void 0},children:[r.jsxs("div",{className:"flex items-center px-4 flex-shrink-0 justify-between border-b border-gray-100 dark:border-gray-800/50",style:{height:"calc(3.5rem + env(safe-area-inset-top, 0px))",paddingTop:"env(safe-area-inset-top, 0px)"},children:[r.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition select-none",children:[r.jsx("div",{className:"w-8 h-8 rounded-xl bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20",children:r.jsx("img",{src:ra,alt:"L",className:"h-5 w-5 invert brightness-0"})}),r.jsxs("span",{className:"text-lg font-black text-gray-900 dark:text-white tracking-tight",children:["Task",r.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]})]}),r.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all active:scale-90",title:i(s?"sidebar.toggle_collapse":"sidebar.toggle_expand"),"aria-label":i(s?"sidebar.toggle_collapse":"sidebar.toggle_expand"),children:r.jsx(Qs,{className:I("w-5 h-5 transition-transform duration-300",!s&&"rotate-180"),strokeWidth:2.5})})]}),r.jsx("div",{className:"px-3 pb-2 pt-2",children:r.jsx(sa,{})}),r.jsx("div",{className:I("flex-1 overflow-y-auto custom-scrollbar pt-2",l),style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:e}),r.jsx("div",{role:"separator","aria-orientation":"vertical","aria-label":i("sidebar.resizer_label"),"aria-valuenow":t,"aria-valuemin":v.SIDEBAR.MIN_WIDTH,"aria-valuemax":v.SIDEBAR.MAX_WIDTH,tabIndex:s?0:-1,onMouseDown:c,onKeyDown:d=>{d.key==="ArrowLeft"?o(Math.max(v.SIDEBAR.MIN_WIDTH,t-10)):d.key==="ArrowRight"&&o(Math.min(v.SIDEBAR.MAX_WIDTH,t+10))},className:I("absolute top-0 right-0 w-3 h-full cursor-col-resize transition-colors hidden lg:flex items-center justify-center outline-none focus:bg-blue-500","hover:bg-blue-500/30 active:bg-blue-600/50 group/resizer"),style:{zIndex:v.Z_INDEX.SIDEBAR_RESIZER},title:i("sidebar.resizer_hint"),children:r.jsx("div",{className:"absolute w-1 h-12 bg-gray-400 dark:bg-gray-500 rounded-full opacity-0 group-hover/resizer:opacity-100 group-focus/resizer:opacity-100 transition-opacity pointer-events-none"})}),r.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-gray-200/50 dark:bg-gray-700/30 hidden lg:block"})]})},ue=sr([xs(),fs($e),y().datetime({offset:!0}).or(y().datetime())]).nullable().optional(),na=q({type:Ye(["none","daily","weekly","weekdays","monthly"]).default("none"),days:oe(G().min(0).max(6)).optional()}).nullable(),Tt=q({id:y().optional(),title:y().refine(e=>e.length>=1,{params:{i18n:"validation.title_required"}}).pipe(y().max(15)),description:y().max(200).nullable().optional(),status:Ye(["todo","completed","archived"]).default("todo"),dueDate:ue,completedAt:ue,createdAt:ue,ownerId:y(),projectId:y().nullable().optional(),labelIds:oe(y()).optional(),timeBlockId:y().nullable().optional(),duration:G().refine(e=>e>=0,{params:{i18n:"validation.duration_invalid"}}).optional(),isImportant:ht().default(!1),recurrence:na,order:G().optional(),isDetailPurged:ht().optional()}),fr=q({id:y().optional(),name:y().refine(e=>e.length>=1,{params:{i18n:"validation.project_name_required"}}).pipe(y().max(10)),color:y().optional(),ownerId:y(),createdAt:ue,order:G().optional()}),br=q({id:y().optional(),name:y().refine(e=>e.length>=1,{params:{i18n:"validation.label_name_required"}}).pipe(y().max(20)),color:y().optional(),ownerId:y(),workspaceId:y().optional(),createdAt:ue,order:G().optional()}),Dt=q({id:y().optional(),name:y().refine(e=>e.length>=1,{params:{i18n:"validation.workspace_name_required"}}).pipe(y().max(30)),createdAt:ue}),yr=q({id:y().optional(),name:y().refine(e=>e.length>=1,{params:{i18n:"validation.filter_name_required"}}).pipe(y().max(10)),query:y(),workspaceId:y().optional(),ownerId:y().optional(),createdAt:ue}),Vt=y().refine(e=>/^([01]\d|2[0-3]):([0-5]\d)$/.test(e),{params:{i18n:"validation.time_format_invalid"}}),oa=q({id:y().optional(),name:y().refine(e=>e.length>=1,{params:{i18n:"validation.timeblock_name_required"}}).pipe(y().max(20)),start:Vt,end:Vt,color:y().optional(),order:G().optional()});q({id:y().optional(),mode:y(),data:ar(y(),y()),createdAt:ue,updatedAt:ue,ownerId:y(),workspaceId:y()});const tt=ve()(et(e=>({currentWorkspaceId:null,workspaces:[],setCurrentWorkspaceId:t=>e({currentWorkspaceId:t}),setWorkspaces:t=>{const s=t.filter(a=>{const n=Dt.safeParse(a);return n.success?!0:(console.error("Invalid workspace data:",a,n.error),!1)});e({workspaces:s})}}),{name:"workspace-storage",partialize:e=>({currentWorkspaceId:e.currentWorkspaceId})}));function ia(){return typeof window<"u"&&window.GLOBAL_APP_ID?window.GLOBAL_APP_ID:typeof __app_id<"u"?__app_id:"default-app-id"}function xt(e){return`artifacts/${ia()}/users/${e}`}function Ce(e,t){return`${xt(e)}/workspaces/${t}`}const _={users:e=>xt(e),workspaces:e=>`${xt(e)}/workspaces`,filters:(e,t)=>`${Ce(e,t)}/filters`,labels:(e,t)=>`${Ce(e,t)}/labels`,timeblocks:(e,t)=>`${Ce(e,t)}/timeblocks`,tasks:(e,t)=>`${Ce(e,t)}/tasks`,projects:(e,t)=>`${Ce(e,t)}/projects`,targets:(e,t)=>`${Ce(e,t)}/targets`},la=["permission-denied","invalid-argument","unauthenticated","not-found","already-exists","failed-precondition"];async function L(e,t={}){const s=typeof t=="number"?{maxRetries:t}:t,{maxRetries:a=3,initialDelay:n=1e3,onError:o,onFinalFailure:i}=s;let l;for(let c=0;c<=a;c++)try{return await e()}catch(d){if(l=d,o&&o(d,c),c===a)break;const u=d,g=(u==null?void 0:u.code)||"";if(la.some(f=>g.includes(f)))throw i&&i(d),d;const x=n*Math.pow(2,c);await new Promise(f=>setTimeout(f,x))}throw i&&i(l),l}class _e{constructor(t){ne(this,"cacheMap",new Map);ne(this,"listeners",new Map);ne(this,"unsubscribes",new Map);ne(this,"config");this.config=t}isInitialized(t){return this.cacheMap.has(t)}getItems(t){return this.cacheMap.get(t)||[]}setCache(t,s){this.cacheMap.set(t,s),this.notifyListeners(t)}clearCache(t){var s;t?(this.cacheMap.delete(t),(s=this.unsubscribes.get(t))==null||s(),this.unsubscribes.delete(t),this.listeners.delete(t)):(this.unsubscribes.forEach(a=>a()),this.cacheMap.clear(),this.unsubscribes.clear(),this.listeners.clear())}notifyListeners(t){const s=this.cacheMap.get(t)||[],a=this.listeners.get(t);if(a){const n=[...s];a.forEach(o=>o(n))}}registerListener(t,s){this.listeners.has(t)||this.listeners.set(t,new Set);const a=this.listeners.get(t);a.add(s);const n=this.cacheMap.get(t);return n&&queueMicrotask(()=>s([...n])),()=>{var o;a.delete(s),a.size===0&&((o=this.unsubscribes.get(t))==null||o(),this.unsubscribes.delete(t),this.listeners.delete(t))}}setFirestoreSubscription(t,s){this.unsubscribes.has(t)||this.unsubscribes.set(t,s)}hasFirestoreSubscription(t){return this.unsubscribes.has(t)}}class ca extends _e{constructor(){super({logPrefix:"[WorkspaceCache]"})}getWorkspaces(t){return this.getItems(t)}subscribe(t,s){const a=this.registerListener(t,s);if(!this.hasFirestoreSubscription(t)){const n=_.workspaces(t),o=he(F(j,n),_t("createdAt","asc")),i=Ne(o,l=>{const d=l.docs.map(u=>({id:u.id,...u.data()})).filter(u=>{const g=Dt.safeParse(u);return g.success?!0:(console.error(`${this.config.logPrefix} Invalid workspace data:`,u,g.error),!1)});this.setCache(t,d)},l=>{console.error(`${this.config.logPrefix} Subscription error:`,l),this.setCache(t,[])});this.setFirestoreSubscription(t,i)}return a}}const X=new ca,da=e=>X.isInitialized(e),ua=e=>X.getWorkspaces(e);function ga(e,t){return X.subscribe(e,t)}async function kr(e,t){const s=X.getWorkspaces(e);Dt.pick({name:!0}).parse({name:t});const a="temp-"+Date.now(),n={id:a,name:t,createdAt:new Date};X.setCache(e,[...s,n]);const o=_.workspaces(e);let i=a;return await L(async()=>{const l=await V(F(j,o),{name:t,createdAt:Z()});i=l.id,i=l.id},{onFinalFailure:()=>{console.error(`[WorkspaceCache] Failed to add workspace: ${t}`),X.setCache(e,s),D.error("ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ")}}),{id:i,name:t}}async function ha(e,t,s=null){const a=_.workspaces(e),n=he(F(j,a),ls("name","==",t),tr(5));return(await de(n)).docs.some(i=>i.id!==s)}async function ma(e,t,s){const a=X.getWorkspaces(e),n=a.map(o=>o.id===t?{...o,...s}:o);X.setCache(e,n),await L(async()=>{const o=_.workspaces(e),i=$(j,o,t);await Se(i,s)},{onFinalFailure:()=>{X.setCache(e,a),D.error("ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function pa(e,t){const s=X.getWorkspaces(e),a=s.filter(n=>n.id!==t);X.setCache(e,a),await L(async()=>{const n=_.workspaces(e);await Ae($(j,n,t))},{onFinalFailure:()=>{X.setCache(e,s),D.error("ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function xa(e){try{const t=_.workspaces(e);(await de(he(F(j,t),tr(1)))).empty&&await kr(e,"ãƒ¡ã‚¤ãƒ³")}catch(t){console.error("[WorkspaceCache] Failed to ensure default workspace:",t)}}function fa(e){var s;const t=e||((s=A.currentUser)==null?void 0:s.uid);return t?ua(t):[]}function ba(e){var s;const t=e||((s=A.currentUser)==null?void 0:s.uid);return t?da(t):!1}function ce(){return tt.getState().currentWorkspaceId}function ya(e){if(!e)return;const t=tt.getState();t.currentWorkspaceId!==e&&t.setCurrentWorkspaceId(e)}function ka(e,t){var o;const s=typeof e=="function"?e:t,a=typeof e=="string"?e:(o=A.currentUser)==null?void 0:o.uid;return a?ga(a,i=>{i.length===0?xa(a).catch(l=>console.error("[Workspace] Default creation error:",l)):wa(i),typeof s=="function"&&s(i)}):(typeof s=="function"&&s([]),()=>{})}function wa(e){if(e.length===0)return null;const t=tt.getState();let s=t.currentWorkspaceId;const a=s?e.some(n=>n.id===s):!1;return(!s||!a)&&(s=e[0].id,t.setCurrentWorkspaceId(s)),s}async function Ji(e){const t=A.currentUser;if(!t)throw new Error("Authentication required");return kr(t.uid,e)}async function Qi(e,t=null){const s=A.currentUser;return s?ha(s.uid,e,t):!1}async function Zi(e,t){const s=A.currentUser;if(!s)throw new Error("Authentication required");return ma(s.uid,e,{name:t})}async function Ht(e){const t=A.currentUser;if(!t)throw new Error("Authentication required");return pa(t.uid,e)}function Be(e){const t=`[ErrorLogger] [${e.type.toUpperCase()}]`,s=e.stack?`
${e.stack}`:"";e.type==="warn"?console.warn(`${t} ${e.message}${s}`):console.error(`${t} ${e.message}${s}`)}function ja(){window.onerror=(e,t,s,a,n)=>(Be({timestamp:new Date().toISOString(),type:"error",message:String(e),stack:n==null?void 0:n.stack}),!1),window.onunhandledrejection=e=>{const t=e.reason;Be({timestamp:new Date().toISOString(),type:"unhandledrejection",message:(t==null?void 0:t.message)||String(t),stack:t==null?void 0:t.stack})},console.info("[ErrorLogger] Initialized")}function va(e,t){Be({timestamp:new Date().toISOString(),type:"react",message:e.message,stack:e.stack})}class Na{constructor(){ne(this,"initialLoginPromise",null)}getCurrentUserId(){var t;return((t=A.currentUser)==null?void 0:t.uid)||null}hasInitialToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return!0;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return!0}catch{}return!1}getInitialAuthToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return window.GLOBAL_INITIAL_AUTH_TOKEN;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return __initial_auth_token}catch{}return null}async tryInitialTokenLogin(){if(this.initialLoginPromise)return this.initialLoginPromise;const t=this.getInitialAuthToken();if(!t){this.initialLoginPromise=Promise.resolve();return}return this.initialLoginPromise=(async()=>{try{await cs(A,t)}catch(s){Be({timestamp:new Date().toISOString(),type:"error",message:`Initial token login failed: ${s.message}`,stack:s.stack})}})(),this.initialLoginPromise}initAuthListener(t,s){return this.tryInitialTokenLogin(),ds(A,n=>{n?t(n):s()})}async loginWithEmail(t,s){return await er(A,t,s)}async logout(){try{await us(A)}catch(t){throw Be({timestamp:new Date().toISOString(),type:"error",message:`Logout failed: ${t.message}`,stack:t.stack}),t}}async updateUserAuthPassword(t){const s=A.currentUser;if(!s)throw new Error("Authentication required: No current user.");await gs(s,t)}}const Xe=new Na,_a=(e,t)=>Xe.initAuthListener(e,t),Ia={TIMEOUT:{AUTH_LOADING:1e4}},Et=()=>{var i;const[e,t]=w.useState(((i=A.currentUser)==null?void 0:i.uid)||null),[s,a]=w.useState(A.currentUser),[n,o]=w.useState(()=>Xe.hasInitialToken()?!0:!A.currentUser);return w.useEffect(()=>{const l=new AbortController;let c=()=>{},d=null;const u=async()=>{if(Xe.hasInitialToken())try{await Xe.tryInitialTokenLogin()}catch(g){console.error("[useAuth] Initial token login failed:",g)}l.signal.aborted||(c=_a(g=>{l.signal.aborted||(t(g.uid),a(g),o(!1),d&&clearTimeout(d))},()=>{l.signal.aborted||(t(null),a(null),o(!1),d&&clearTimeout(d))}))};return d=setTimeout(()=>{l.signal.aborted||(console.warn("[useAuth] Loading timeout reached, forcing loading=false"),o(!1))},Ia.TIMEOUT.AUTH_LOADING),u(),()=>{l.abort(),c(),d&&clearTimeout(d)}},[]),{userId:e,user:s,loading:n}},Ve=new Map;function wr(e,t,s,a){const n=Zt(),o=JSON.stringify(e),i=15e3;return w.useEffect(()=>{if(e.some(c=>c==null))return;let l=Ve.get(o);return l||(l={count:0,unsubscribe:t(d=>{n.setQueryData(e,d)})},Ve.set(o,l)),l.count++,()=>{const c=Ve.get(o);c&&(c.count--,c.count===0&&(c.unsubscribe(),Ve.delete(o)))}},[o]),Ur({queryKey:e,queryFn:()=>{const l=n.getQueryData(e);return l!==void 0?Promise.resolve(l):s!==void 0?Promise.resolve(s):new Promise(c=>{const d=setTimeout(()=>{const m=n.getQueryData(e);console.debug(`[FirestoreSub] Timeout waiting for data (monitor): ${o}`),c(m??s??null)},i),u=n.getQueryCache().subscribe(m=>{if(m.type==="updated"&&JSON.stringify(m.query.queryKey)===o){const x=m.query.state.data;x!==void 0&&(clearTimeout(d),u(),c(x))}}),g=n.getQueryData(e);g!==void 0&&(clearTimeout(d),u(),c(g))})},initialData:s,staleTime:1/0,gcTime:1e3*60*5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})}const Ca=()=>{const{userId:e,loading:t}=Et(),s=w.useCallback(c=>e?ka(e,c):()=>{},[e]),n=(e?ba(e):!1)&&e?fa(e):void 0,{data:o,isPending:i}=wr(["workspaces",e||void 0],s,n);return{workspaces:o||[],loading:t||!!e&&i}},Fe=()=>{const e=tt(a=>a.currentWorkspaceId),{userId:t,loading:s}=Et();return{workspaceId:e,userId:t,loading:s}},Ta=()=>{const{t:e}=S(),{workspaces:t,loading:s}=Ca(),{openModal:a}=le(),[n,o]=w.useState(!1),i=w.useRef(null),{workspaceId:l}=Fe(),c=t.find(h=>h.id===l),[d,u]=w.useState({visible:!1,x:0,y:0,workspace:null}),g=w.useRef(null);w.useEffect(()=>{const h=N=>{i.current&&!i.current.contains(N.target)&&o(!1),g.current&&!g.current.contains(N.target)&&u(p=>({...p,visible:!1}))},b=N=>{N.key==="Escape"&&(o(!1),u(p=>({...p,visible:!1})))};return document.addEventListener("mousedown",h),document.addEventListener("keydown",b),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",b)}},[]);const m=(h,b)=>{h.preventDefault(),h.stopPropagation(),u({visible:!0,x:h.clientX,y:h.clientY,workspace:b})},x=()=>{d.workspace&&(o(!1),u(h=>({...h,visible:!1})),a("workspace-edit",d.workspace))},f=()=>{const h=d.workspace;if(h!=null&&h.id){if(t.length<=1){o(!1),u(b=>({...b,visible:!1}));return}u(b=>({...b,visible:!1})),o(!1),a("confirmation",{title:e("delete"),message:e("msg.confirm_delete_workspace")||`ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã€Œ${h.name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`,confirmLabel:e("delete"),variant:"danger",onConfirm:async()=>{try{await Ht(h.id)}catch(b){console.error("Failed to delete workspace:",b)}}})}};return s?r.jsx("div",{className:"h-8 w-32 bg-gray-100 dark:bg-gray-800 animate-pulse rounded"}):r.jsxs("div",{className:"relative",ref:i,children:[r.jsxs("button",{onClick:()=>o(!n),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md px-2 py-1 transition-colors group","aria-expanded":n,"aria-haspopup":"true",children:[r.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 truncate max-w-[120px] sm:max-w-[140px] md:max-w-[180px]",children:c?c.name:e("loading")}),r.jsx(dr,{className:I("w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-transform duration-200",n?"rotate-180":"")})]}),n&&r.jsxs("div",{className:"absolute left-0 mt-2 w-64 max-w-[calc(100vw-32px)] origin-top-left rounded-2xl shadow-2xl glass-effect overflow-hidden animate-scale-in custom-scrollbar",style:{zIndex:v.Z_INDEX.DROPDOWN},children:[r.jsx("div",{className:"p-2 border-b border-gray-200/50 dark:border-gray-700/30",children:r.jsxs("button",{onClick:()=>{o(!1),a("workspace-edit",null)},className:"flex items-center w-full px-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50/50 dark:hover:bg-blue-500/10 transition-all rounded-xl group/add",children:[r.jsx("div",{className:"w-6 h-6 rounded-lg bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center mr-2 group-hover/add:scale-110 transition-transform",children:r.jsx(cr,{className:"w-4 h-4"})}),e("sidebar.add_workspace")]})}),r.jsx("div",{className:"py-2 max-h-[300px] overflow-y-auto custom-scrollbar",children:t.map(h=>{const b=h.id===l;return r.jsx("div",{className:"px-2",children:r.jsxs("div",{className:I("flex items-center group/item px-3 py-2.5 rounded-xl transition-all cursor-pointer relative",b?"bg-blue-50/50 dark:bg-blue-500/10":"hover:bg-gray-100/50 dark:hover:bg-gray-700/30"),onClick:()=>{h.id&&ya(h.id),o(!1)},onContextMenu:N=>m(N,h),children:[r.jsx("div",{className:I("w-2 h-2 rounded-full mr-3",b?"bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]":"bg-transparent")}),r.jsx("span",{className:I("flex-1 text-sm truncate mr-2",b?"text-blue-700 dark:text-blue-300 font-bold":"text-gray-700 dark:text-gray-300"),children:h.name}),r.jsxs("div",{className:"flex items-center gap-1 opacity-100 lg:opacity-0 lg:group-hover/item:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:N=>{N.stopPropagation(),o(!1),a("workspace-edit",h)},className:"p-1.5 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400 transition-colors",title:e("edit"),children:r.jsx(Ee,{className:"w-3.5 h-3.5"})}),t.length>1&&r.jsx("button",{onClick:N=>{var p;N.stopPropagation(),u({visible:!1,x:0,y:0,workspace:h}),o(!1),a("confirmation",{title:e("delete"),message:((p=e("msg.confirm_delete_workspace"))==null?void 0:p.replace("{name}",h.name))||`ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã€Œ${h.name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`,confirmLabel:e("delete"),variant:"danger",onConfirm:async()=>{await Ht(h.id)}})},className:"p-1.5 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:e("delete"),children:r.jsx(De,{className:"w-3.5 h-3.5"})})]}),b&&!d.visible&&r.jsx("div",{className:"absolute right-3 opacity-100 group-hover/item:opacity-0 transition-opacity",children:r.jsx(qe,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})})]})},h.id)})}),r.jsx("div",{className:"px-4 py-2 bg-gray-50/30 dark:bg-gray-800/20 border-t border-gray-200/50 dark:border-gray-700/30",children:r.jsx("p",{className:"text-[10px] uppercase tracking-wider font-semibold text-gray-400 dark:text-gray-500",children:e("workspaces")})})]}),d.visible&&d.workspace&&r.jsxs("div",{ref:g,className:"fixed rounded-xl shadow-2xl glass-effect py-1.5 min-w-[140px] animate-scale-in",style:{left:d.x,top:d.y,zIndex:v.Z_INDEX.MODAL},children:[r.jsxs("button",{onClick:x,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100/50 dark:hover:bg-gray-700/50 transition-colors",children:[r.jsx(Ee,{className:"w-4 h-4 mr-3 text-gray-500"}),e("edit")]}),r.jsxs("button",{onClick:f,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[r.jsx(De,{className:"w-4 h-4 mr-3"}),e("delete")]})]})]})},Da=({sidebarContent:e,title:t,children:s})=>{const{toggleSidebar:a,isSidebarOpen:n}=ze(),{t:o}=S(),{openModal:i}=le();return r.jsxs("div",{className:"w-full h-[100dvh] flex overflow-hidden bg-premium-gradient text-gray-800 dark:text-white antialiased",children:[n&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm lg:hidden transition-opacity duration-300",style:{zIndex:v.Z_INDEX.SIDEBAR_BACKDROP},onClick:a}),r.jsx(aa,{children:e}),r.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[r.jsxs("header",{className:"border-b border-gray-200 dark:border-gray-800 flex items-center px-4 justify-between bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-10 sticky top-0",style:{height:"calc(3rem + env(safe-area-inset-top, 0px))",paddingTop:"env(safe-area-inset-top, 0px)"},children:[r.jsxs("div",{className:"flex items-center gap-3",children:[!n&&r.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:o("sidebar.menu_open"),"aria-label":o("sidebar.menu_open"),children:r.jsx(Hs,{className:"w-5 h-5"})}),r.jsx(Ta,{}),r.jsx("h1",{className:"font-bold text-lg border-l border-gray-300 dark:border-gray-700 pl-3 ml-1 truncate",children:t})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:()=>i("settings"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:o("settings"),"aria-label":o("settings"),children:r.jsx(Xs,{className:"w-5 h-5"})})})]}),r.jsx("main",{className:"flex-1 overflow-hidden flex flex-col",id:"main-content",children:r.jsx("div",{className:I("w-full h-full bg-white dark:bg-gray-900 relative flex-1",v.LAYOUT.CONTAINER_WIDTH_CLASS),children:s})})]})]})},Ea=M.lazy(()=>ie(()=>import("./FilterEditModal-Ro_AX8ek.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(e=>({default:e.FilterEditModal}))),Sa=M.lazy(()=>ie(()=>import("./LabelEditModal-B3W47-R3.js"),__vite__mapDeps([10,1,2,3,6,7,8,5,4,9])).then(e=>({default:e.LabelEditModal}))),Aa=M.lazy(()=>ie(()=>import("./ProjectEditModal-rl9ud3Ee.js"),__vite__mapDeps([11,1,2,3,6,7,8,5,4,9])).then(e=>({default:e.ProjectEditModal}))),Ma=M.lazy(()=>ie(()=>import("./SettingsModal-1HjvzEkC.js"),__vite__mapDeps([12,1,2,3,4,7,5,9,8])).then(e=>({default:e.SettingsModal}))),Fa=M.lazy(()=>ie(()=>import("./TaskDetailModal-DR6LfAoJ.js"),__vite__mapDeps([13,1,2,3,5,4,6,7,8,9])).then(e=>({default:e.TaskDetailModal}))),La=M.lazy(()=>ie(()=>import("./TimeBlockEditModal-7-L29V_K.js"),__vite__mapDeps([14,1,2,3,8,4,6,7,5,9])).then(e=>({default:e.TimeBlockEditModal}))),Ra=M.lazy(()=>ie(()=>import("./WorkspaceEditModal-CCwLz_jS.js"),__vite__mapDeps([15,1,2,3,6,7,8,5,4,9])).then(e=>({default:e.WorkspaceEditModal}))),Pa=M.lazy(()=>ie(()=>import("./WikiFrameworkModal-BGbXAQ6r.js"),__vite__mapDeps([16,1,2,3,7,4,8,5,9])).then(e=>({default:e.WikiFrameworkModal}))),Oa=M.lazy(()=>ie(()=>import("./ConfirmationModal-DqhiPbAV.js"),__vite__mapDeps([17,1,2,3,7,8,5,4,9])).then(e=>({default:e.ConfirmationModal}))),Ba=()=>{const{stack:e}=le();return e.length===0?null:r.jsx(w.Suspense,{fallback:null,children:e.map((t,s)=>{const n=s===0?void 0:"bg-black/30",o={isOpen:!0,data:t.data,zIndex:v.Z_INDEX.MODAL+s*10,overlayClassName:n};switch(t.type){case"settings":return r.jsx(Ma,{...o},t.id);case"task-detail":return r.jsx(Fa,{...o},t.id);case"label-edit":return r.jsx(Sa,{...o},t.id);case"project-edit":return r.jsx(Aa,{...o},t.id);case"workspace-edit":return r.jsx(Ra,{...o},t.id);case"filter-edit":return r.jsx(Ea,{...o},t.id);case"timeblock-edit":return r.jsx(La,{...o},t.id);case"wiki-framework":return r.jsx(Pa,{...o},t.id);case"confirmation":return r.jsx(Oa,{...o},t.id);default:return null}})})};function St(e){const t={keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(!e)return t;const s=/(?:-?[a-zA-Z]+:(?:"[^"]*"|[^\s]+))|(?:"[^"]*")|(?:-?[^\s]+)/g,a=e.match(s);if(!a)return t;const n=[];for(let o=0;o<a.length;o++){const i=a[o];if(i==="OR"){const l=n.length-1,c=n[l],d=a[o+1],u=c&&(typeof c=="string"?!c.includes(":"):!0),g=d&&!d.includes(":")&&d!=="OR";if(u&&g){const m=Array.isArray(c)?c:[c];m.push(d.toLowerCase().replace(/^"|"$/g,"")),n[l]=m,o++;continue}}n.push(i)}return n.forEach(o=>{if(Array.isArray(o)){t.keywords.push(o);return}const i=o;if(i.startsWith('"')&&i.endsWith('"')){const l=i.substring(1,i.length-1);l&&t.keywords.push(l.toLowerCase());return}if(i.startsWith("-")&&!i.includes(":")){const l=i.substring(1);l&&t.excludeKeywords.push(l.toLowerCase());return}if(i.includes(":")){let l=!1,c=i;c.startsWith("-")&&(l=!0,c=c.substring(1));const d=c.indexOf(":"),u=c.substring(0,d).toLowerCase();let g=c.substring(d+1);switch(g.startsWith('"')&&g.endsWith('"')&&(g=g.substring(1,g.length-1)),g.toLowerCase(),u){case"project":case"p":l?g.split(",").forEach(f=>t.excludeProjects.push(f)):g.split(",").forEach(f=>t.projects.push(f));break;case"label":case"l":l?g.split(",").forEach(f=>t.excludeLabels.push(f)):g.split(",").forEach(f=>t.labels.push(f));break;case"timeblock":case"tb":l?g.split(",").forEach(f=>t.excludeTimeBlocks.push(f)):g.split(",").forEach(f=>t.timeBlocks.push(f));break;case"duration":case"d":g.split(",").forEach(f=>{const h=parseInt(f,10);isNaN(h)||t.durations.push(h)});break;case"date":case"due":const m=["today","tomorrow","week","upcoming","overdue","next-week"];g.split(",").forEach(f=>{const h=f.toLowerCase();m.includes(h)&&t.dates.push(h)});break;case"status":case"is":const x=["completed","active","todo"];g.split(",").forEach(f=>{const h=f.toLowerCase();x.includes(h)&&(l?t.excludeStatus.push(h):t.status.push(h)),h==="important"&&(t.isImportant=!l),h==="unimportant"&&(t.isImportant=l)});break;default:l?t.excludeKeywords.push(c.toLowerCase()):t.keywords.push(c.toLowerCase());break}}else i!=="OR"&&t.keywords.push(i.toLowerCase())}),t}function el(e){var s,a,n,o,i,l,c,d,u,g,m,x;const t=[];return(s=e.keywords)!=null&&s.length&&t.push(...e.keywords.map(f=>Array.isArray(f)?f.join(" OR "):f.includes(" ")?`"${f}"`:f)),(a=e.excludeKeywords)!=null&&a.length&&t.push(...e.excludeKeywords.map(f=>`-${f}`)),(n=e.projects)!=null&&n.length&&t.push(`project:${e.projects.join(",")}`),(o=e.excludeProjects)!=null&&o.length&&t.push(`-project:${e.excludeProjects.join(",")}`),(i=e.labels)!=null&&i.length&&t.push(`label:${e.labels.join(",")}`),(l=e.excludeLabels)!=null&&l.length&&t.push(`-label:${e.excludeLabels.join(",")}`),(c=e.timeBlocks)!=null&&c.length&&t.push(`timeblock:${e.timeBlocks.join(",")}`),(d=e.excludeTimeBlocks)!=null&&d.length&&t.push(`-timeblock:${e.excludeTimeBlocks.join(",")}`),(u=e.durations)!=null&&u.length&&t.push(`duration:${e.durations.join(",")}`),(g=e.dates)!=null&&g.length&&t.push(`date:${e.dates.join(",")}`),(m=e.status)!=null&&m.length&&t.push(`status:${e.status.join(",")}`),(x=e.excludeStatus)!=null&&x.length&&t.push(`-status:${e.excludeStatus.join(",")}`),e.isImportant===!0&&t.push("is:important"),e.isImportant===!1&&t.push("is:unimportant"),t.join(" ")}const Gt=()=>{const{language:e}=O.getState();return e==="en"?_s:He},Wa=()=>{const{language:e}=O.getState();return Ut[e]||Ut.ja};function Qe(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function K(e){return ws(e,Qe())}function At(e=new Date){const t=K(e);return nr(t)}function $a(e=new Date,t=1){const s=K(e);return or(s,{weekStartsOn:t})}function jr(e){return js(K(e))}function za(e){return vs(K(e))}function qa(e){return Ns(K(e))}function Xt(e){const t=Wa();if(jr(e))return t.date_options.today;if(za(e))return t.date_options.tomorrow;if(qa(e))return t.date_options.yesterday;const s=new Date,a=K(e),n=K(s);return a.getFullYear()!==n.getFullYear()?mt(e,Qe(),"yyyy/MM/dd",{locale:Gt()}):mt(e,Qe(),"MM/dd",{locale:Gt()})}function tl(e){return mt(e,Qe(),"yyyy-MM-dd")}function B(e){if(e==null)return null;if(e instanceof Date)return e;if(typeof e=="object"&&"toDate"in e&&typeof e.toDate=="function")return e.toDate();const t=new Date(e);return isNaN(t.getTime())?null:t}function Ua(e){const t=B(e);if(!t)return"text-gray-500 dark:text-gray-400";const s=K(t),a=K(new Date);s.setHours(0,0,0,0),a.setHours(0,0,0,0);const n=ir(s,a);return n<0?"text-red-500 font-bold":n===0?"text-green-600 dark:text-green-400 font-medium":n===1?"text-orange-500 dark:text-orange-400 font-medium":"text-gray-500 dark:text-gray-400"}const rl=e=>{if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t};function Ka(e,t){var n;if(!e||!(t!=null&&t.type))return null;const s=B(e);if(!s)return null;const a=new Date(s);switch(t.type){case"daily":return a.setDate(a.getDate()+1),a;case"weekly":{if(!((n=t.days)!=null&&n.length))return null;const o=a.getDay();for(let i=1;i<=7;i++){const l=(o+i)%7;if(t.days.includes(l))return a.setDate(a.getDate()+i),a}return null}case"weekdays":do a.setDate(a.getDate()+1);while(a.getDay()===0||a.getDay()===6);return a;case"monthly":return a.setMonth(a.getMonth()+1),a;default:return null}}function sl(e){const t=At(new Date);if(!(e!=null&&e.type)||e.type==="daily"||e.type==="monthly")return t;if(e.type==="weekly"&&e.days&&e.days.length>0){const s=t.getDay();for(let a=0;a<=6;a++)if(e.days.includes((s+a)%7))return t.setDate(t.getDate()+a),t}if(e.type==="weekdays"){for(;t.getDay()===0||t.getDay()===6;)t.setDate(t.getDate()+1);return t}return t}function Va(e,t){if(!e||!t)return 0;const[s,a]=e.split(":").map(Number),[n,o]=t.split(":").map(Number);if(isNaN(s)||isNaN(a)||isNaN(n)||isNaN(o))return 0;const i=s*60+a;let l=n*60+o;return l<i&&(l+=1440),l-i}const Yt=(e,t)=>{const s=B(e),a=B(t);if(!s||!a)return!1;const n=K(s),o=K(a);return ir(n,o)===0},Ha=(e,t=7)=>{const s=B(e);if(!s)return!1;const n=K(new Date);n.setHours(0,0,0,0);const o=Re(n,1),i=Re(n,t+1),l=K(s);return l>=o&&l<i};function Ga(e,t="createdAt_desc"){if(!Array.isArray(e))return[];const[s,a]=t.split("_"),o=a==="desc"?-1:1;return[...e].sort((i,l)=>{var u,g,m,x,f,h;let c,d;switch(s){case"dueDate":c=(u=B(i.dueDate))==null?void 0:u.getTime(),d=(g=B(l.dueDate))==null?void 0:g.getTime();break;case"createdAt":c=(m=B(i.createdAt))==null?void 0:m.getTime(),d=(x=B(l.createdAt))==null?void 0:x.getTime();break;case"title":c=i.title.toLowerCase(),d=l.title.toLowerCase();break;case"duration":c=i.duration||0,d=l.duration||0;break;case"important":c=i.isImportant?1:0,d=l.isImportant?1:0;break;case"manual":c=i.order!==void 0?i.order:Number.MAX_SAFE_INTEGER,d=l.order!==void 0?l.order:Number.MAX_SAFE_INTEGER;break;default:c=(f=B(i.createdAt))==null?void 0:f.getTime(),d=(h=B(l.createdAt))==null?void 0:h.getTime()}return Xa(c,d)*o})}function Xa(e,t){return e===t?0:e==null?1:t==null?-1:e>t?1:e<t?-1:0}function ft(){const e=At(new Date),t=Re(e,1),s=$a(new Date),a=Re(s,7),n=Re(t,7);return{now:e,tomorrow:t,weekStart:s,weekEnd:a,upcomingEnd:n}}function Ya(e,t,s,a){const{now:n,tomorrow:o,weekStart:i,weekEnd:l,upcomingEnd:c}=s;switch(t){case"today":return Yt(e,n)||e<n&&a!=="completed";case"tomorrow":return Yt(e,o);case"week":return e>=i&&e<l;case"upcoming":return e>=o&&e<c;case"overdue":return e<n&&a!=="completed";default:return!1}}function vr(e,t,s=null){if(!s&&t.dates.length>0&&(s=ft()),t.status.length>0){const n=e.status||"todo";if(!t.status.some(i=>i==="active"&&n==="todo"?!0:i===n))return!1}if(t.excludeStatus.length>0){const n=e.status||"todo";if(t.excludeStatus.some(i=>i==="active"&&n==="todo"?!0:i===n))return!1}if(t.isImportant===!0&&!e.isImportant||t.isImportant===!1&&e.isImportant||t.projects.length>0&&!t.projects.some(o=>o==="unassigned"?!e.projectId||e.projectId==="unassigned"||e.projectId==="none":e.projectId===o)||t.excludeProjects.length>0&&t.excludeProjects.some(n=>e.projectId===n)||t.labels.length>0&&(!e.labelIds||!t.labels.some(n=>{var o;return(o=e.labelIds)==null?void 0:o.includes(n)}))||t.excludeLabels.length>0&&e.labelIds&&t.excludeLabels.some(n=>{var o;return(o=e.labelIds)==null?void 0:o.includes(n)})||t.timeBlocks.length>0&&!t.timeBlocks.some(o=>o==="unassigned"?!e.timeBlockId:e.timeBlockId===o)||t.excludeTimeBlocks.length>0&&t.excludeTimeBlocks.some(n=>e.timeBlockId===n))return!1;if(t.durations.length>0){const n=e.duration||0;if(!t.durations.includes(n))return!1}if(t.dates.length>0){const n=s||ft(),o=B(e.dueDate);if(!o||!t.dates.some(l=>Ya(o,l,n,e.status||"todo")))return!1}const a=`${e.title} ${e.description||""}`.toLowerCase();return!(t.keywords.length>0&&!t.keywords.every(o=>Array.isArray(o)?o.some(i=>a.includes(i)):a.includes(o))||t.excludeKeywords.length>0&&t.excludeKeywords.some(o=>a.includes(o)))}function Jt(e,t){if(!t)return e;const s=typeof t=="string"?St(t):t,a=s.dates.length>0?ft():null;return e.filter(n=>vr(n,s,a))}function Ja(e){const{keyword:t,showCompleted:s,projectId:a,labelId:n,timeBlockId:o,duration:i,filterType:l}=e,c=t?St(t):{keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(a&&c.projects.push(a),n&&c.labels.push(n),o&&c.timeBlocks.push(o),i){const d=typeof i=="number"?i:parseInt(i,10);isNaN(d)||c.durations.push(d)}return l==="today"&&c.dates.push("today"),l==="upcoming"&&c.dates.push("upcoming"),l==="important"&&(c.isImportant=!0),s||c.status.length===0&&c.status.push("active"),c}function Qa(e,t){const{savedFilter:s,sortCriteria:a}=t,n=Ja(t);let o=Jt(e,n);return s&&s.query&&(o=Jt(o,s.query)),Ga(o,a||"createdAt_desc")}const ye=class ye extends _e{constructor(){super({logPrefix:"[FilterCache]"})}static getInstance(){return ye.instance||(ye.instance=new ye),ye.instance}getFilters(t){return this.getItems(t)}subscribe(t,s,a){if(!t||!s)return a([]),()=>{};const n=this.registerListener(s,a);if(!this.hasFirestoreSubscription(s)){const o=_.filters(t,s),i=he(F(j,o)),l=Ne(i,c=>{const d=c.docs.map(u=>({id:u.id,...u.data()}));this.setCache(s,d)},c=>{console.error(`${this.config.logPrefix} Subscription error:`,c),this.setCache(s,[])});this.setFirestoreSubscription(s,l)}return n}};ne(ye,"instance");let bt=ye;const Y=bt.getInstance();function Za(e,t,s){return Y.subscribe(e,t,s)}function en(e){return Y.getFilters(e)}function tn(e){return Y.isInitialized(e)}async function rn(e,t,s){const a=Y.getFilters(t),n="temp_"+Date.now(),o={...s,id:n,createdAt:new Date};Y.setCache(t,[...a,o]);const i=_.filters(e,t);return L(async()=>(await V(F(j,i),{...s,createdAt:Z()})).id,{onFinalFailure:()=>{Y.setCache(t,a),D.error("ãƒ•ã‚£ãƒ«ã‚¿ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function sn(e,t,s,a){const n=Y.getFilters(t),o=n.map(l=>l.id===s?{...l,...a}:l);Y.setCache(t,o);const i=_.filters(e,t);return L(async()=>{await Se($(j,i,s),{...a,updatedAt:Z()})},{onFinalFailure:()=>{Y.setCache(t,n),D.error("ãƒ•ã‚£ãƒ«ã‚¿ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function an(e,t,s){const a=Y.getFilters(t),n=a.filter(i=>i.id!==s);Y.setCache(t,n);const o=_.filters(e,t);return L(async()=>{await Ae($(j,o,s))},{onFinalFailure:()=>{Y.setCache(t,a),D.error("ãƒ•ã‚£ãƒ«ã‚¿ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}const Mt=()=>Me(O.getState().language).t;function nn(e){return e?en(e):[]}function on(e){return tn(e)}function ln(e,t){var a;const s=(a=A.currentUser)==null?void 0:a.uid;return!s||!e?(t([]),()=>{}):Za(s,e,t)}async function al(e){var c;const t=Mt(),s=(c=A.currentUser)==null?void 0:c.uid;if(!s)throw D.error(t("validation.auth_required")),new Error("Authentication required");const{workspaceId:a,...n}=e;if(!a)throw D.error(t("validation.workspace_required")),new Error("Workspace ID required");const o=yr.pick({name:!0,query:!0}).safeParse(n);if(!o.success){const d=o.error.issues.map(u=>u.message).join(", ");throw console.error("[Filters] Validation failed:",o.error.flatten()),D.error(`${t("validation.validation_error")}: ${d}`),new Error(`Validation failed: ${d}`)}const{id:i,...l}=n;await rn(s,a,{name:l.name,query:l.query,workspaceId:a,ownerId:s})}async function nl(e,t,s){var c;const a=Mt(),n=(c=A.currentUser)==null?void 0:c.uid;if(!n||!e)throw D.error(a("validation.auth_required")),new Error("Authentication required");const o=yr.partial().safeParse(s);if(!o.success){const d=o.error.issues.map(u=>u.message).join(", ");throw console.error("[Filters] Validation failed:",o.error.flatten()),D.error(`${a("validation.validation_error")}: ${d}`),new Error(`Validation failed: ${d}`)}const{id:i,...l}=s;await sn(n,e,t,l)}async function cn(e,t){var n;const s=Mt(),a=(n=A.currentUser)==null?void 0:n.uid;if(!a||!e)throw D.error(s("validation.auth_required")),new Error("Authentication required");await an(a,e,t)}const Le=({entityName:e,subscribeFn:t,getCacheFn:s,isInitializedFn:a})=>{const{workspaceId:n,userId:o,loading:i}=Fe(),l=Zt(),c=w.useCallback(h=>!n||!o?()=>{}:t(n,h),[n,o,t]),d=n?a(n):!1,u=[e,o||void 0,n||void 0],{data:g,isPending:m}=wr(u,c,n&&d?s(n):void 0),x=i||!!n&&!d&&m,f=w.useCallback(h=>{n&&o&&l.setQueryData(u,h)},[l,u,n,o]);return{entities:g||[],loading:x,setEntitiesOverride:f}},Nr=()=>{const{entities:e,loading:t}=Le({entityName:"filters",subscribeFn:(s,a)=>ln(s,a),getCacheFn:nn,isInitializedFn:on});return{filters:e,loading:t}},xe=sr([G(),y(),bs(),ys()]),dn=q({id:y(),title:y().min(1),description:y().nullable().optional(),status:Ye(["todo","completed","archived"]).optional(),dueDate:xe,completedAt:xe,createdAt:xe,ownerId:y().optional(),projectId:y().nullable().optional(),labelIds:oe(y()).optional(),timeBlockId:y().nullable().optional(),duration:G().optional(),isImportant:ht().optional(),recurrence:q({type:Ye(["none","daily","weekly","weekdays","monthly"]).optional(),days:oe(G()).optional()}).nullable().optional(),order:G().optional()}).passthrough(),un=q({id:y(),name:y().min(1),color:y().optional(),ownerId:y().optional(),createdAt:xe,order:G().optional()}).passthrough(),gn=q({id:y(),name:y().min(1),color:y().optional(),ownerId:y().optional(),createdAt:xe}).passthrough(),hn=q({id:y(),mode:y(),data:ar(y(),y()),createdAt:xe,updatedAt:xe,ownerId:y().optional(),workspaceId:y().optional()}).passthrough(),mn=q({id:y(),name:y().min(1),start:y(),end:y(),color:y().optional(),order:G().optional()}).passthrough(),pn=q({id:y(),name:y().min(1),query:y(),createdAt:xe}).passthrough(),xn=q({version:y().optional(),exportedAt:y().optional(),userId:y().optional(),workspaceId:y().optional(),tasks:oe(dn).default([]),projects:oe(un).default([]),labels:oe(gn).default([]),targets:oe(hn).default([]),timeBlocks:oe(mn).default([]),customFilters:oe(pn).default([])}),fn=e=>e instanceof Date?$e.fromDate(e):e,be=e=>{if(e!=null){if(typeof e=="number")return new Date(e);if(typeof e=="string")return new Date(e)}};async function ol(e,t){if(!e||!t)throw new Error("Missing parameters for backup.");try{const s=F(j,_.tasks(e,t)),a=F(j,_.projects(e,t)),n=F(j,_.labels(e,t)),o=F(j,_.targets(e,t)),i=F(j,_.timeblocks(e,t)),l=F(j,_.filters(e,t)),[c,d,u,g,m,x]=await Promise.all([de(s),de(a),de(n),de(o),de(i),de(l)]),f=h=>h.docs.map(b=>{const N=b.data(),p={id:b.id};for(const k in N){const C=N[k];p[k]=C instanceof $e?C.toMillis():C}return p});return{version:"1.4",exportedAt:new Date().toISOString(),userId:e,workspaceId:t,tasks:f(c),projects:f(d),labels:f(u),targets:f(g),timeBlocks:f(m),customFilters:f(x)}}catch(s){throw console.error("[Backup] createBackupData failed:",s),s}}async function il(e,t,s){var i;if(!e||!t)throw new Error("Invalid import parameters: userId and workspaceId are required.");if(!s)throw new Error("Invalid import parameters: backupData is required.");const a=xn.safeParse(s);if(!a.success)throw console.error("[Backup] Validation failed:",a.error.format()),new Error(`ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ãŒä¸æ­£ã§ã™: ${a.error.issues.map(l=>l.message).join(", ")}`);const n=a.data,o=[];try{const{tasks:l,projects:c,labels:d,targets:u,timeBlocks:g,customFilters:m}=n,x=new Map,f=new Map,h=await de(F(j,_.labels(e,t))),b=new Map;h.forEach(p=>b.set(p.data().name,p.id));for(const p of d)try{const k=(i=p.name)==null?void 0:i.trim();if(!k)continue;if(b.has(k))f.set(p.id,b.get(k));else{const C={...p,name:k};delete C.id;const T=await V(F(j,_.labels(e,t)),C);f.set(p.id,T.id),b.set(k,T.id)}}catch(k){o.push(`ãƒ©ãƒ™ãƒ« "${p.name}" ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}for(const p of c)try{const k={...p};delete k.id,k.createdAt=be(p.createdAt);const C=await V(F(j,_.projects(e,t)),k);x.set(p.id,C.id)}catch(k){o.push(`ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ "${p.name}" ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}for(const p of g)try{const k={...p};delete k.id,await V(F(j,_.timeblocks(e,t)),k)}catch(k){o.push(`ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ "${p.name}" ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}for(const p of m)try{const k={...p};delete k.id,k.createdAt=be(p.createdAt),await V(F(j,_.filters(e,t)),k)}catch(k){o.push(`ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ "${p.name}" ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}for(const p of u)try{const k={...p};delete k.id,k.createdAt=be(p.createdAt),k.updatedAt=be(p.updatedAt),k.ownerId=e,k.workspaceId=t,await V(F(j,_.targets(e,t)),k)}catch(k){o.push(`ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ (mode: ${p.mode}) ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}const N=l.map(async p=>{try{const k={...p};delete k.id,k.createdAt=be(p.createdAt);const C=be(p.dueDate);k.dueDate=C?fn(C):null,k.completedAt=be(p.completedAt),p.projectId&&x.has(p.projectId)?k.projectId=x.get(p.projectId):k.projectId=null,Array.isArray(p.labelIds)&&(k.labelIds=p.labelIds.map(T=>f.get(T)).filter(T=>!!T)),k.ownerId=e,await V(F(j,_.tasks(e,t)),k)}catch(k){o.push(`ã‚¿ã‚¹ã‚¯ "${p.title}" ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—: ${k}`)}});return await Promise.all(N),{tasksCount:l.length,projectsCount:c.length,labelsCount:d.length,targetsCount:u.length,timeBlocksCount:g.length,filtersCount:m.length,errors:o}}catch(l){throw console.error("[Backup] importBackupData failed:",l),l}}class bn extends _e{constructor(){super({logPrefix:"[LabelCache]"})}getLabels(t){return this.getItems(t)}subscribe(t,s,a){const n=this.registerListener(s,a);if(!this.hasFirestoreSubscription(s)){const o=_.labels(t,s),i=he(F(j,o)),l=Ne(i,c=>{const d=c.docs.map(u=>({id:u.id,...u.data()}));this.setCache(s,d)},c=>{console.error(`${this.config.logPrefix} Subscription error:`,c),this.setCache(s,[])});this.setFirestoreSubscription(s,l)}return n}}const J=new bn,yn=e=>J.isInitialized(e),kn=e=>J.getLabels(e);function wn(e,t,s){return!e||!t?(s([]),()=>{}):J.subscribe(e,t,s)}async function jn(e,t,s,a){const n=J.getLabels(t),i={id:"temp-"+Date.now(),name:s,color:a,ownerId:e,createdAt:new Date};J.setCache(t,[...n,i]);const l=_.labels(e,t);return L(async()=>{await V(F(j,l),{name:s,color:a,ownerId:e,workspaceId:t,createdAt:Z()})},{onFinalFailure:()=>{console.error(`[LabelCache] Failed to add label: ${s}`),J.setCache(t,n),D.error("ãƒ©ãƒ™ãƒ«ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function vn(e,t,s,a){const n=J.getLabels(t),o=n.map(i=>i.id===s?{...i,...a}:i);return J.setCache(t,o),L(async()=>{const i=_.labels(e,t),l=$(j,i,s);await Se(l,a)},{onFinalFailure:()=>{J.setCache(t,n),D.error("ãƒ©ãƒ™ãƒ«ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function Nn(e,t,s){const a=J.getLabels(t),n=a.filter(o=>o.id!==s);return J.setCache(t,n),L(async()=>{const o=_.labels(e,t);await Ae($(j,o,s))},{onFinalFailure:()=>{J.setCache(t,a),D.error("ãƒ©ãƒ™ãƒ«ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}function Ft(){var t;const e=(t=A.currentUser)==null?void 0:t.uid;if(!e)throw new Error("Authentication required.");return e}function me(){var s;const e=(s=A.currentUser)==null?void 0:s.uid,t=ce();if(!e||!t)throw new Error("Authentication or Workspace required.");return{userId:e,workspaceId:t}}function Lt(){return Me(O.getState().language).t}function _n(e,t,s=!0){const a=e.safeParse(t);if(a.success)return{success:!0,data:a.data};const n=In(a.error);if(s){const o=Lt();D.error(`${o("validation.validation_error")}: ${n}`)}return{success:!1,errorMessage:n}}function In(e){return e.issues.map(t=>t.message).join(", ")}function rt(e,t,s=!0){const a=_n(e,t,s);if(!a.success)throw new Error(`Validation failed: ${a.errorMessage}`);return a.data}async function re(e,t,s={}){var i;const{successMessageKey:a,rethrow:n=!0}=s,o=Lt();try{const l=await e();return a&&D.success(o(a)),l}catch(l){if(console.error(`[Store] ${t}:`,l),(i=l.message)!=null&&i.includes("Validation")||D.error(o(t)),n)throw l;return}}const Cn=kn,Tn=e=>e?yn(e):!1;function Dn(e,t){var a;const s=(a=A.currentUser)==null?void 0:a.uid;return s&&e?wn(s,e,t):(t([]),()=>{})}async function ll(e,t,s){const a=Ft();if(!e)throw new Error("Workspace ID required");const n={name:t,color:s,ownerId:a};return rt(br.pick({name:!0,color:!0,ownerId:!0}),n),re(()=>jn(a,e,t,s),"msg.label.create_fail")}async function cl(e,t,s){const a=Ft();if(!e)throw new Error("Workspace ID required");return rt(br.partial(),s),re(()=>vn(a,e,t,s),"msg.label.update_fail")}async function dl(e,t){const s=Ft();if(!e)throw new Error("Workspace ID required");return re(()=>Nn(s,e,t),"msg.label.delete_fail",{successMessageKey:"msg.label.delete_success"})}function En(e,t){return Ct(e,t)}function Sn(e,t){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;const s=[...e].sort((n,o)=>(n.id||"").localeCompare(o.id||"")),a=[...t].sort((n,o)=>(n.id||"").localeCompare(o.id||""));return Ct(s,a)}function An(e,t){return Ct(e,t)}class Mn extends _e{constructor(){super({logPrefix:"[ProjectCache]"})}getProjects(t){return this.getItems(t)}subscribe(t,s,a){const n=this.registerListener(s,a);if(!this.hasFirestoreSubscription(s)){const o=_.projects(t,s),i=he(F(j,o)),l=Ne(i,c=>{const d=c.docs.map(g=>({id:g.id,...g.data()})),u=this.getItems(s);u.length>0&&An(u,d)||this.setCache(s,d)},c=>{console.error(`${this.config.logPrefix} Subscription error:`,c),this.setCache(s,[])});this.setFirestoreSubscription(s,l)}return n}}const z=new Mn,Fn=e=>z.isInitialized(e),Ln=e=>z.getProjects(e),Rn=(e,t)=>z.setCache(e,t);function Pn(e,t,s){return z.subscribe(e,t,s)}async function On(e,t,s,a){const n=z.getProjects(t),i={id:"temp-"+Date.now(),name:s,color:a,ownerId:e,createdAt:new Date};z.setCache(t,[...n,i]);const l=_.projects(e,t);return L(async()=>{const c=await V(F(j,l),{name:s,color:a,ownerId:e,createdAt:Z()})},{onFinalFailure:()=>{console.error(`[ProjectCache] Failed to add project: ${s}`),z.setCache(t,n),D.error("ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function Bn(e,t,s,a){const n=z.getProjects(t),o=n.map(i=>i.id===s?{...i,...a}:i);return z.setCache(t,o),L(async()=>{const i=_.projects(e,t),l=$(j,i,s);await Se(l,a)},{onFinalFailure:()=>{z.setCache(t,n),D.error("ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function Wn(e,t,s){const a=z.getProjects(t),n=a.filter(o=>o.id!==s);return z.setCache(t,n),L(async()=>{const o=_.projects(e,t);await Ae($(j,o,s))},{onFinalFailure:()=>{z.setCache(t,a),D.error("ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function $n(e,t,s){const a=z.getProjects(t),n=new Map;s.forEach((i,l)=>n.set(i,l));const o=a.map(i=>{const l=n.get(i.id);return l!==void 0?{...i,order:l}:i});return o.sort((i,l)=>{const c=i.order??Number.MAX_SAFE_INTEGER,d=l.order??Number.MAX_SAFE_INTEGER;return c-d}),z.setCache(t,o),L(async()=>{const i=It(j),l=_.projects(e,t);s.forEach((c,d)=>{if(c&&!c.startsWith("temp-")){const u=$(j,l,c);i.update(u,{order:d})}}),await i.commit()},{onFinalFailure:()=>{z.setCache(t,a),D.error("ä¸¦ã³æ›¿ãˆã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}const zn=e=>{const t=e||ce();return t?Ln(t):[]},qn=e=>{const t=e||ce();return t?Fn(t):!1},Un=(e,t)=>{const s=t||ce();s&&Rn(s,e)},Kn=(e,t)=>{const s=typeof e=="function"?e:t,a=typeof e=="string"?e:ce(),n=A.currentUser;return n&&a&&typeof s=="function"?Pn(n.uid,a,s):(typeof s=="function"&&s([]),()=>{})},ul=async(e,t=null,s)=>{const a=A.currentUser;if(!a)throw new Error("Authentication required.");const n=t||ce();if(!n)throw new Error("Workspace selection required.");const o={name:e,color:s,ownerId:a.uid};return rt(fr.pick({name:!0,color:!0,ownerId:!0}),o),re(()=>On(a.uid,n,e,s),"msg.project.create_fail")},gl=async(e,t)=>{const{userId:s,workspaceId:a}=me();return rt(fr.partial(),t),re(()=>Bn(s,a,e,t),"msg.project.update_fail")},Vn=async e=>{const{userId:t,workspaceId:s}=me();return re(()=>Wn(t,s,e),"msg.project.delete_fail",{successMessageKey:"msg.project.delete_success"})},Hn=async e=>{const{userId:t,workspaceId:s}=me();return re(()=>$n(t,s,e),"msg.project.reorder_fail")};class Gn extends _e{constructor(){super({logPrefix:"[TargetCache]"})}getTargets(t){return this.getItems(t)}subscribe(t,s,a){const n=this.registerListener(s,a);if(!this.hasFirestoreSubscription(s)){const o=_.targets(t,s),i=he(F(j,o),_t("createdAt","desc")),l=Ne(i,c=>{const d=c.docs.map(g=>({id:g.id,...g.data()})),u=this.getItems(s);u.length>0&&En(u,d)||this.setCache(s,d)},c=>{console.error(`${this.config.logPrefix} Subscription error:`,c),this.setCache(s,[])});this.setFirestoreSubscription(s,l)}return n}}const Te=new Gn,Xn=e=>Te.isInitialized(e),Yn=e=>Te.getTargets(e);function Jn(e,t,s,a){return!e||!t?(s([]),()=>{}):Te.subscribe(e,t,n=>{s(n)})}async function Qn(e,t,s){const a=Te.getTargets(t),o={id:"temp-"+Date.now(),mode:s.mode||"",data:s.data||{},ownerId:e,workspaceId:t,createdAt:new Date,updatedAt:new Date,...s};return Te.setCache(t,[o,...a]),L(async()=>{const i=_.targets(e,t),l={...s,ownerId:e,workspaceId:t,createdAt:Z(),updatedAt:Z()};delete l.id,await V(F(j,i),l)},{onFinalFailure:()=>{console.error("[TargetCache] Failed to add target"),Te.setCache(t,a),D.error("ç›®æ¨™ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}function Zn(){var t;const e=(t=A.currentUser)==null?void 0:t.uid;if(!e)throw new Error("Authentication required.");return e}const eo=e=>{const t=e||ce();return t?Yn(t):[]},to=e=>{const t=e||ce();return t?Xn(t):!1},ro=(e,t,s)=>{const a=A.currentUser;return a&&e&&typeof t=="function"?Jn(a.uid,e,t):(typeof t=="function"&&t([]),()=>{})},so=async(e,t)=>{const s=Zn();if(!e)throw new Error("Workspace ID required.");return Qn(s,e,t)},ut=e=>{if(e instanceof $e||typeof e=="object"&&e!==null&&"toDate"in e&&typeof e.toDate=="function")return e.toDate();if(e instanceof Date)return e},_r=e=>e instanceof Date?$e.fromDate(e):e;function ao(e,t){if(!t||typeof t!="object")return console.warn(`[deserializeTask] Invalid data for task ${e}:`,t),{id:e,title:"Invalid Task",status:"todo",ownerId:""};const s=t.recurrence;let a=null;s&&typeof s=="object"&&"type"in s&&(a={type:s.type,days:Array.isArray(s.days)?s.days:void 0});const n={id:e,title:String(t.title||"Untitled"),description:t.description?String(t.description):null,status:t.status==="completed"||t.status==="todo"||t.status==="archived"?t.status:"todo",dueDate:ut(t.dueDate)||void 0,createdAt:ut(t.createdAt)||void 0,completedAt:ut(t.completedAt)||void 0,ownerId:String(t.ownerId||""),projectId:t.projectId?String(t.projectId):null,labelIds:Array.isArray(t.labelIds)?t.labelIds.map(String):[],timeBlockId:t.timeBlockId?String(t.timeBlockId):null,duration:typeof t.duration=="number"?t.duration:void 0,isImportant:!!t.isImportant,recurrence:a};return Tt.safeParse(n).success,n}const ke=class ke extends _e{constructor(){super({logPrefix:"[TaskCache]"});ne(this,"currentWorkspaceId",null)}static getInstance(){return ke.instance||(ke.instance=new ke),ke.instance}getTasks(s){return this.getItems(s)}getTask(s,a){return this.getItems(s).find(o=>o.id===a)}reset(s){this.clearCache(s),this.currentWorkspaceId=null}subscribe(s,a,n,o){if(!s||!a)return n([]),()=>{};this.currentWorkspaceId=a;const i=this.registerListener(a,n);if(!this.hasFirestoreSubscription(a)){const l=_.tasks(s,a),c=he(F(j,l)),d=Ne(c,u=>{const g=u.docs.map(x=>ao(x.id,x.data())),m=this.getItems(a);m.length>0&&Sn(m,g)||this.setCache(a,g)},u=>{console.error(`${this.config.logPrefix} Subscription error:`,u),o&&o(u)});this.setFirestoreSubscription(a,d)}return i}};ne(ke,"instance");let yt=ke;const W=yt.getInstance();function Ir(e,t){return W.getTask(e,t)}function no(e){return W.getTasks(e)}function oo(e){return W.isInitialized(e)}function io(e,t,s,a){return W.subscribe(e,t,s,a)}function Cr(e){return Object.fromEntries(Object.entries(e).filter(([t,s])=>s!==void 0))}async function lo(e,t,s){const a=new Map;s.forEach((o,i)=>a.set(o,i));const n=W.getTasks(t);if(n&&n.length>0){const o=n.map(i=>{const l=a.get(i.id);return l!==void 0?{...i,order:l}:i});o.sort((i,l)=>{const c=i.order??Number.MAX_SAFE_INTEGER,d=l.order??Number.MAX_SAFE_INTEGER;return c-d}),W.setCache(t,o)}return L(async()=>{const o=_.tasks(e,t),i=[];for(let l=0;l<s.length;l+=500)i.push(s.slice(l,l+500));for(const l of i){const c=It(j);l.forEach(d=>{const u=a.get(d),g=$(j,o,d);c.update(g,{order:u})}),await c.commit()}})}async function Tr(e,t,s){const a=W.getTasks(t),o={id:"temp-"+Date.now(),title:s.title||"Untitled",description:s.description||null,status:"todo",dueDate:s.dueDate,createdAt:new Date,ownerId:e,projectId:s.projectId||null,labelIds:s.labelIds||[],timeBlockId:s.timeBlockId||null,duration:s.duration||null,isImportant:s.isImportant||!1,recurrence:s.recurrence||null};return W.setCache(t,[...a,o]),L(async()=>{const i=_.tasks(e,t),l=Cr({...s});return l.dueDate&&(l.dueDate=_r(l.dueDate)),delete l.id,await V(F(j,i),{...l,ownerId:e,status:"todo",createdAt:Z()})},{onFinalFailure:()=>{console.error(`[TaskCache] Failed to add task: ${s.title}`),W.setCache(t,a),D.error("ã‚¿ã‚¹ã‚¯ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function co(e,t,s,a){const n=W.getTasks(t);if(n==null||n.find(o=>o.id===s),n){const o=n.map(i=>i.id===s?{...i,status:a,completedAt:a==="completed"?new Date:void 0}:i);W.setCache(t,o)}return L(async()=>{const o=_.tasks(e,t),i={status:a,completedAt:null};a==="completed"&&(i.completedAt=Z()),await Se($(j,o,s),i)},{onFinalFailure:()=>{n&&W.setCache(t,n),D.error("ã‚¿ã‚¹ã‚¯ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function uo(e,t,s,a){const n=W.getTasks(t);if(n){const o=n.map(i=>i.id===s?{...i,...a}:i);W.setCache(t,o)}return L(async()=>{const o=_.tasks(e,t),i=Cr({...a});i.dueDate!==void 0&&(i.dueDate=_r(i.dueDate)),await Se($(j,o,s),i)},{onFinalFailure:()=>{n&&W.setCache(t,n),D.error("ã‚¿ã‚¹ã‚¯ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function go(e,t,s){const a=W.getTasks(t);if(a){const n=a.filter(o=>o.id!==s);W.setCache(t,n)}return L(async()=>{const n=_.tasks(e,t);await Ae($(j,n,s))},{onFinalFailure:()=>{a&&W.setCache(t,a),D.error("ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function hl(e){const{userId:t,workspaceId:s}=me(),n=Tt.partial().required({title:!0}).safeParse(e);return n.success||console.warn("[addTask] Validation warning:",n.error.flatten()),re(()=>Tr(t,s,e),"msg.task.create_fail")}async function ho(e,t){const{userId:s,workspaceId:a}=me();if(t==="completed"){const n=Ir(a,e);if(n!=null&&n.recurrence&&n.recurrence.type!=="none"){const o=Ka(n.dueDate??null,n.recurrence);if(o){const i={title:n.title,description:n.description,projectId:n.projectId,labelIds:n.labelIds,timeBlockId:n.timeBlockId,duration:n.duration,isImportant:n.isImportant,recurrence:n.recurrence,dueDate:o,status:"todo"};Tr(s,a,i).catch(l=>console.error("Failed to create recurring task:",l))}}}return re(()=>co(s,a,e,t),"msg.task.status_update_fail")}async function Dr(e,t){const{userId:s,workspaceId:a}=me(),n=Tt.partial().safeParse(t);return n.success||console.warn("[updateTask] Validation warning:",n.error.flatten()),re(()=>uo(s,a,e,t),"msg.task.update_fail")}async function mo(e){const{userId:t,workspaceId:s}=me();return re(()=>lo(t,s,e),"msg.task.update_fail")}async function po(e){const{userId:t,workspaceId:s}=me();return re(()=>go(t,s,e),"msg.task.delete_fail",{successMessageKey:"msg.task.delete_success"})}async function xo(e,t){const{workspaceId:s}=me(),a=Lt(),n=Ir(s,e),i=((n==null?void 0:n.status)||t)==="completed"?"todo":"completed";await ho(e,i),i==="completed"&&D.success(a("msg.task.complete_success"))}function fo(e,t,s){const a=A.currentUser;return!a||!e?(typeof t=="function"&&t([]),()=>{}):io(a.uid,e,t,s)}const bo=e=>{const t=e||ce();return t?no(t):[]},yo=e=>{const t=e||ce();return t?oo(t):!1},ko=v.TIME_BLOCK.DEFAULTS.map(e=>({...e})),we=class we extends _e{constructor(){super({logPrefix:"[TimeBlockCache]"})}static getInstance(){return we.instance||(we.instance=new we),we.instance}getBlocks(t){return this.getItems(t)}subscribe(t,s,a){if(!t||!s)return a([]),()=>{};const n=this.registerListener(s,a);if(!this.hasFirestoreSubscription(s)){const o=_.timeblocks(t,s),i=he(F(j,o),_t("order","asc"));let l=!0;const c=Ne(i,d=>{const u=d.docs.map(g=>({id:g.id,...g.data()}));if(l&&u.length===0&&!d.metadata.hasPendingWrites){l=!1,wo(t,s).catch(g=>console.error(`${this.config.logPrefix} Failed to create defaults:`,g));return}l=!1,this.setCache(s,u)},d=>{console.error(`${this.config.logPrefix} Subscription error:`,d)});this.setFirestoreSubscription(s,c)}return n}};ne(we,"instance");let kt=we;const Q=kt.getInstance();async function wo(e,t){const s=_.timeblocks(e,t),a=It(j);ko.forEach(n=>{const o=$(j,s,n.id);a.set(o,{name:n.name,start:n.start,end:n.end,color:n.color,order:n.order,updatedAt:Z()})}),await a.commit()}function jo(e,t,s){return Q.subscribe(e,t,s)}function vo(e){return Q.getBlocks(e)}function No(e){return Q.isInitialized(e)}async function _o(e,t,s){const a=Q.getBlocks(t),n=[...a,s].sort((l,c)=>(l.order||0)-(c.order||0));Q.setCache(t,n);const o=_.timeblocks(e,t),i=s.id||crypto.randomUUID();return L(async()=>{await rr($(j,o,i),{...s,updatedAt:Z()})},{onFinalFailure:()=>{Q.setCache(t,a),D.error("ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function Io(e,t,s,a){const n=Q.getBlocks(t),o=n.map(l=>l.id===s?{...l,...a}:l).sort((l,c)=>(l.order||0)-(c.order||0));Q.setCache(t,o);const i=_.timeblocks(e,t);return L(async()=>{await rr($(j,i,s),{...a,updatedAt:Z()},{merge:!0})},{onFinalFailure:()=>{Q.setCache(t,n),D.error("ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}async function Co(e,t,s){const a=Q.getBlocks(t),n=a.filter(i=>i.id!==s);Q.setCache(t,n);const o=_.timeblocks(e,t);return L(async()=>{await Ae($(j,o,s))},{onFinalFailure:()=>{Q.setCache(t,a),D.error("ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}const To=()=>Me(O.getState().language).t;function Er(e){var s;const t=(s=A.currentUser)==null?void 0:s.uid;if(!t||!e)throw new Error("Authentication and Workspace are required.");return t}function Do(e,t){var a;const s=(a=A.currentUser)==null?void 0:a.uid;return s?jo(s,e,t):(t([]),()=>{})}function Sr(e){return vo(e)}function Eo(e){return No(e)}async function ml(e,t){const s=Er(e),a=To();try{const n=t.id||crypto.randomUUID(),o=Sr(e),i=t.order!==void 0?t.order:Math.max(...o.map(u=>u.order||0),-1)+1,l={id:n,name:t.name||"",start:t.start||"09:00",end:t.end||"10:00",color:t.color||v.DEFAULT_COLORS.TIME_BLOCK_INACTIVE,order:i},c=oa.safeParse(l);if(!c.success){const u=c.error.issues.map(g=>g.message).join(", ");return console.error("[TimeBlocks] Validation error:",c.error),D.error(`${a("validation.validation_error")}: ${u}`),!1}return o.some(u=>u.id===n)?await Io(s,e,n,l):await _o(s,e,l),!0}catch(n){return console.error("[TimeBlocks] Save error:",n),!1}}async function So(e,t){const s=Er(e);try{return await Co(s,e,t),!0}catch(a){return console.error("[TimeBlocks] Delete error:",a),!1}}const Ue=()=>{const{entities:e,loading:t}=Le({entityName:"tasks",subscribeFn:(s,a)=>fo(s,a,n=>console.error("Task subscription error:",n)),getCacheFn:bo,isInitializedFn:yo});return{tasks:e,loading:t}};function st(){const{tasks:e}=Ue(),{filters:t}=Nr(),{showCompleted:s,query:a}=ee();return w.useMemo(()=>{var c,d;const o={inbox:0,today:0,upcoming:0,important:0,all:0,search:0,projects:{},customFilters:{}},i=a?a.toLowerCase().trim():"",l=t.map(u=>({id:u.id,conditions:St(u.query)}));for(const u of e){if(i){const m=(c=u.title)==null?void 0:c.toLowerCase().includes(i),x=(d=u.description)==null?void 0:d.toLowerCase().includes(i);(m||x)&&o.search++}if(u.status==="archived")continue;const g=u.status==="completed";if(!g)for(const{id:m,conditions:x}of l)vr(u,x)&&(o.customFilters[m]=(o.customFilters[m]||0)+1);if(!g&&(o.all++,u.projectId&&(o.projects[u.projectId]=(o.projects[u.projectId]||0)+1),(!u.projectId||u.projectId==="unassigned"||u.projectId==="none")&&o.inbox++,u.isImportant&&o.important++,u.dueDate)){const m=B(u.dueDate);if(m){const x=At(new Date);m<x||jr(m)?o.today++:Ha(m)&&o.upcoming++}}}return o},[e,a,t])}const Ao=e=>e in v.SIDEBAR_DENSITY,at=e=>Ao(e)?v.SIDEBAR_DENSITY[e]:v.SIDEBAR_DENSITY.normal,Mo=[{id:"inbox",i18nKey:"inbox",Icon:xr,color:"text-blue-500",droppable:!0},{id:"today",i18nKey:"today",Icon:Je,color:"text-green-500"},{id:"upcoming",i18nKey:"upcoming",Icon:mr,color:"text-purple-500"}],Fo=()=>{const{language:e,density:t}=O(),{t:s}=Me(e),a=st(),{setView:n,currentView:o}=te(),i=o==="dashboard";return r.jsxs("ul",{className:"space-y-0.5",children:[r.jsx("li",{children:r.jsxs("button",{onClick:()=>n("dashboard"),className:I("w-full flex items-center px-3 text-sm rounded-md transition-colors text-left gap-3 group/item",at(t),i?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[r.jsx(ur,{className:"w-4 h-4 text-indigo-500"}),r.jsx("span",{className:"flex-1",children:s("dashboard")})]})}),Mo.map(l=>r.jsx(Lo,{item:l,label:s(l.i18nKey),count:a[l.id]||0},l.id))]})},Lo=({item:e,label:t,count:s})=>{const{filterType:a,setFilter:n}=ee(),{setView:o}=te(),{density:i}=O(),c=te(x=>x.currentView)==="tasks"&&a===e.id,d=e.Icon,{setNodeRef:u,isOver:g}=We({id:`filter:${e.id}`,disabled:!e.droppable,data:{type:e.id==="inbox"?"inbox":"filter",value:e.id}}),m=()=>{e.id==="search"?(o("tasks"),n("search")):(o("tasks"),n(e.id))};return r.jsx("li",{ref:u,children:r.jsxs("button",{onClick:m,className:I("w-full flex items-center px-3 text-sm rounded-md transition-colors text-left gap-3 group/item",at(i),c?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",g&&e.droppable&&"bg-blue-50 dark:bg-blue-900/30"),children:[r.jsx(d,{className:I("w-4 h-4",e.color)}),r.jsx("span",{className:"flex-1",children:t}),e.id!=="search"&&s>0&&r.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:s})]})})},nt=({x:e,y:t,onClose:s,children:a})=>{const n=w.useRef(null);return w.useEffect(()=>{const o=l=>{n.current&&!n.current.contains(l.target)&&s()},i=()=>s();return document.addEventListener("mousedown",o),window.addEventListener("scroll",i,!0),()=>{document.removeEventListener("mousedown",o),window.removeEventListener("scroll",i,!0)}},[s]),Kr.createPortal(r.jsx("div",{ref:n,className:"fixed min-w-[160px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 py-1 animate-in fade-in zoom-in-95 duration-100",style:{top:t,left:e,zIndex:v.Z_INDEX.POPOVER},onContextMenu:o=>o.preventDefault(),children:a}),document.body)},Ro=({label:e,icon:t,children:s})=>{const[a,n]=M.useState(!1);return r.jsxs("div",{className:"relative w-full",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[r.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm flex items-center justify-between gap-2 transition-colors text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[t&&r.jsx("span",{className:"w-4 h-4 text-gray-400",children:t}),e]}),r.jsx(Oe,{className:"w-3 h-3 text-gray-400"})]}),a&&r.jsx("div",{className:"absolute left-full top-0 ml-1 min-w-[140px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 py-1 animate-in fade-in zoom-in-95 duration-100",style:{zIndex:v.Z_INDEX.POPOVER},children:s})]})},H=({onClick:e,children:t,className:s,icon:a,variant:n="default"})=>r.jsxs("button",{onClick:o=>{o.stopPropagation(),e()},className:I("w-full text-left px-3 py-2 text-sm flex items-center gap-2 transition-colors",n==="danger"?"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",s),children:[a&&r.jsx("span",{className:I("w-4 h-4",n==="danger"?"text-red-500":"text-gray-400"),children:a}),t]}),je=({icon:e,label:t,count:s,isActive:a,isOver:n,onClick:o,onContextMenu:i,showZero:l=!1})=>{const{density:c}=O();return r.jsxs("button",{type:"button",onClick:o,onContextMenu:i,className:I("w-full text-left group flex items-center justify-between px-2 ml-1 rounded-md transition-colors select-none outline-none focus:ring-2 focus:ring-blue-500/50",at(c),a?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",n&&"bg-blue-50 dark:bg-blue-900/30"),children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e&&r.jsx("span",{className:"flex-shrink-0 w-5 flex justify-center text-sm",children:e}),r.jsx("span",{className:"text-sm truncate",children:t})]}),s!==void 0&&(s>0||l&&s===0)&&r.jsx("span",{className:I("text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700/50",a?"text-blue-700 dark:text-blue-300 bg-white":"text-gray-400"),children:s})]})},Po=()=>{const{filters:e,loading:t}=Nr(),{workspaceId:s}=Fe(),a=st();return t?null:r.jsx("div",{className:"space-y-0.5 py-1",children:e.map(n=>r.jsx(Oo,{filter:n,workspaceId:s,count:a.customFilters[n.id]||0},n.id))})},Oo=({filter:e,workspaceId:t,count:s})=>{const{t:a}=S(),{filterType:n,targetId:o,setFilter:i}=ee(),{openModal:l}=le(),c=n==="custom"&&o===e.id,[d,u]=w.useState(null),g=()=>{u(null),l("filter-edit",e)},m=()=>{u(null),l("confirmation",{title:a("delete"),message:`${a("filter")}: ${e.name}
${a("msg.confirm_delete")}`,confirmLabel:a("delete"),variant:"danger",onConfirm:async()=>{e.id&&t&&await cn(t,e.id)}})},x=f=>{f.preventDefault(),f.stopPropagation(),u({x:f.clientX,y:f.clientY})};return r.jsxs(r.Fragment,{children:[r.jsx("div",{onContextMenu:x,children:r.jsx(je,{label:e.name,icon:r.jsx(Pe,{size:16}),count:s,isActive:c,onClick:()=>i("custom",e.id)})}),d&&r.jsxs(nt,{x:d.x,y:d.y,onClose:()=>u(null),children:[r.jsx(H,{onClick:g,icon:r.jsx(Ee,{size:16}),children:a("edit")}),r.jsx(H,{onClick:m,variant:"danger",icon:r.jsx(De,{size:16}),children:a("delete")})]})]})},Bo=M.memo(({mins:e,count:t})=>{const{t:s}=S(),{filterType:a,targetId:n,setFilter:o}=ee(),{setView:i}=te(),l=a==="duration"&&n===e.toString(),{setNodeRef:c,isOver:d}=We({id:`duration:${e}`,data:{type:"duration",value:e.toString()}});return r.jsx("div",{ref:c,children:r.jsx(je,{label:s("sidebar.duration_format",{min:e}),icon:r.jsx(pr,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),count:t,isActive:l,isOver:d,onClick:()=>{i("tasks"),o("duration",e.toString())}})})}),Wo=()=>{const{tasks:e}=Ue(),{customDurations:t}=O(),s=(t==null?void 0:t.length)>0?t:v.SIDEBAR.DURATIONS,a=w.useMemo(()=>{const n=new Map;return e.forEach(o=>{if(o.status!=="completed"&&o.duration){const i=Number(o.duration);isNaN(i)||n.set(i,(n.get(i)||0)+1)}}),n},[e]);return r.jsx("div",{className:"space-y-0.5 py-1",children:s.map(n=>r.jsx(Bo,{mins:n,count:a.get(n)||0},n))})},Rt=()=>{const{entities:e,loading:t,setEntitiesOverride:s}=Le({entityName:"projects",subscribeFn:(o,i)=>Kn(o,i),getCacheFn:zn,isInitializedFn:qn}),{workspaceId:a}=Fe();return{projects:e,loading:t,setProjectsOverride:o=>{s(o),a&&Un(o,a)}}},$o=({id:e,children:t,className:s=""})=>{const{attributes:a,listeners:n,setNodeRef:o,transform:i,transition:l,isDragging:c,isOver:d}=jt({id:e}),u={transform:Ze.Transform.toString(i),transition:l},g=[c&&"opacity-50 scale-[1.02] shadow-lg z-50",d&&"ring-2 ring-indigo-500/50"].filter(Boolean).join(" ");return r.jsx("div",{ref:o,style:u,className:`${g} ${s}`.trim(),...a,...n,children:t})},Ar=()=>r.jsxs("div",{className:"space-y-2 p-2",children:[r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),zo=M.memo(({project:e})=>{const{t}=S(),{filterType:s,targetId:a,setFilter:n}=ee(),{density:o}=O(),{openModal:i}=le(),{setView:l}=te(),c=s==="project"&&a===e.id,[d,u]=w.useState(null),{setNodeRef:g,isOver:m}=We({id:`project:${e.id}`,data:{type:"project",value:e.id}}),x=p=>{p==null||p.stopPropagation(),u(null),i("project-edit",e)},f=()=>{u(null),i("confirmation",{title:t("delete"),message:`${t("project")}: ${e.name}
${t("msg.confirm_delete")}`,confirmLabel:t("delete"),variant:"danger",onConfirm:async()=>{e.id&&await Vn(e.id)}})},h=p=>{p.preventDefault(),p.stopPropagation(),u({x:p.clientX,y:p.clientY})},b=()=>{n("project",e.id),l("tasks")},N=st().projects[e.id]||0;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{ref:g,onClick:b,onContextMenu:h,className:I("group flex items-center justify-between px-2 rounded-md cursor-pointer transition-colors select-none",at(o),c?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",m&&"bg-blue-50 dark:bg-blue-900/30"),role:"button",tabIndex:0,"aria-selected":c,"aria-label":`${t("project")}: ${e.name}${c?` (${t("active")})`:""}`,children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx("span",{className:I("text-xs shrink-0 transition-colors",c?"text-blue-500":"text-gray-400 group-hover:text-gray-500"),children:r.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),r.jsx("span",{className:"text-sm truncate",children:e.name})]}),N>0&&r.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:N})]}),d&&r.jsxs(nt,{x:d.x,y:d.y,onClose:()=>u(null),children:[r.jsx(H,{onClick:x,icon:r.jsx(Ee,{size:16}),children:t("edit")}),r.jsx(H,{onClick:f,variant:"danger",icon:r.jsx(De,{size:16}),children:t("delete")})]})]})}),qo=()=>{const{t:e}=S(),{projects:t,loading:s}=Rt();return s?r.jsx(Ar,{}):t.length===0?r.jsx("div",{className:"p-4 text-xs text-gray-400",children:e("sidebar.no_projects")}):r.jsx(vt,{items:t.map(a=>`${v.DND.PREFIX_PROJECT}${a.id}`),strategy:Nt,children:r.jsx("div",{className:"space-y-0.5 p-2",children:t.map(a=>r.jsx($o,{id:`${v.DND.PREFIX_PROJECT}${a.id}`,children:r.jsx(zo,{project:a})},a.id))})})},Uo=({title:e,children:t,defaultExpanded:s=!0,action:a,dragHandleProps:n})=>{const{t:o}=S(),[i,l]=w.useState(()=>typeof window<"u"&&window.innerWidth<768?!1:s),d=`section-${encodeURIComponent(e.replace(/\s+/g,"-").toLowerCase())}`;return r.jsxs("div",{className:"mb-2 group/section",children:[r.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[r.jsxs("button",{...n,onClick:()=>l(!i),"aria-expanded":i,"aria-controls":d,className:"flex items-center flex-1 text-xs font-semibold text-gray-500 uppercase hover:text-gray-700 dark:hover:text-gray-300 transition-colors text-left cursor-grab active:cursor-grabbing touch-none select-none",title:o("sidebar.reorder_section"),children:[r.jsx("svg",{className:I("w-3 h-3 mr-1 transition-transform",i?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),e]}),a&&r.jsx("div",{className:"opacity-100 transition-opacity",onClick:u=>u.stopPropagation(),children:a})]}),i&&r.jsx("div",{className:"mt-1",id:d,children:t})]})},Ko=()=>{const{t:e}=S(),{currentView:t,setView:s}=te();return r.jsxs("div",{className:"space-y-0.5 py-1",children:[r.jsx(je,{label:e("sidebar.target_wizard"),icon:r.jsx(gr,{}),isActive:t==="wizard",onClick:()=>s("wizard")}),r.jsx(je,{label:e("sidebar.target_dashboard"),icon:r.jsx(ur,{}),isActive:t==="target-dashboard",onClick:()=>s("target-dashboard")}),r.jsx(je,{label:e("sidebar.framework_wiki"),icon:r.jsx(hr,{}),isActive:t==="wiki",onClick:()=>s("wiki")})]})},ot=()=>{const{entities:e,loading:t}=Le({entityName:"timeblocks",subscribeFn:(s,a)=>Do(s,a),getCacheFn:Sr,isInitializedFn:Eo});return{timeBlocks:e,loading:t}},Vo=()=>{const{timeBlocks:e,loading:t}=ot(),{tasks:s}=Ue(),{workspaceId:a}=Fe(),n=M.useMemo(()=>{const o=new Map;let i=0;return s.forEach(l=>{l.status!=="completed"&&(!l.timeBlockId||l.timeBlockId==="unassigned"||l.timeBlockId==="null"?i++:o.set(l.timeBlockId,(o.get(l.timeBlockId)||0)+1))}),{map:o,unassignedCount:i}},[s]);return t?r.jsx(Ar,{}):r.jsxs("div",{className:"space-y-0.5 py-1",children:[e.map(o=>r.jsx(Ho,{block:o,count:n.map.get(o.id||"")||0,workspaceId:a},o.id)),r.jsx(Go,{count:n.unassignedCount})]})},Ho=({block:e,count:t,workspaceId:s})=>{const{t:a}=S(),{filterType:n,targetId:o,setFilter:i}=ee(),{openModal:l}=le(),c=n==="timeblock"&&o===e.id,{setView:d}=te(),[u,g]=w.useState(null),{setNodeRef:m,isOver:x}=We({id:`timeblock:${e.id}`,data:{type:"timeblock",value:e.id}}),f=()=>{g(null),l("timeblock-edit",e)},h=()=>{g(null),l("confirmation",{title:a("delete"),message:`${a("timeblock")}: ${e.start} - ${e.end}
${a("msg.confirm_delete")}`,confirmLabel:a("delete"),variant:"danger",onConfirm:async()=>{e.id&&s&&await So(s,e.id)}})},b=p=>{p.preventDefault(),p.stopPropagation(),g({x:p.clientX,y:p.clientY})},N=()=>{i("timeblock",e.id||""),d("tasks")};return r.jsxs("div",{ref:m,onContextMenu:b,children:[r.jsx(je,{label:`${e.start} - ${e.end}`,icon:r.jsx("span",{className:"w-2 rounded-full aspect-square",style:{backgroundColor:e.color}}),count:t,isActive:c,isOver:x,onClick:N}),u&&r.jsxs(nt,{x:u.x,y:u.y,onClose:()=>g(null),children:[r.jsx(H,{onClick:f,icon:r.jsx(Ee,{size:16}),children:a("edit")}),r.jsx(H,{onClick:h,variant:"danger",icon:r.jsx(De,{size:16}),children:a("delete")})]})]})},Go=({count:e})=>{const{t}=S(),{filterType:s,targetId:a,setFilter:n}=ee(),{setView:o}=te(),i=s==="timeblock"&&a==="unassigned",{setNodeRef:l,isOver:c}=We({id:"timeblock:unassigned",data:{type:"timeblock",value:"unassigned"}}),d=()=>{n("timeblock","unassigned"),o("tasks")};return r.jsx("div",{ref:l,children:r.jsx(je,{label:t("sidebar.unassigned"),icon:r.jsx("span",{className:"w-2 rounded-full aspect-square bg-gray-400"}),count:e,isActive:i,isOver:c,onClick:d})})},Xo=({id:e,section:t})=>{const{attributes:s,listeners:a,setNodeRef:n,transform:o,transition:i,isDragging:l}=jt({id:e}),c={transform:Ze.Transform.toString(o),transition:i,opacity:l?.5:1};return r.jsx("div",{ref:n,style:c,...s,children:r.jsx(Uo,{title:t.title,defaultExpanded:t.defaultExpanded,action:t.action,dragHandleProps:a,children:t.component})})},Yo=()=>{const{t:e}=S(),{openModal:t}=le(),{sidebarSections:s}=ze(),a=s&&s.length>0?s:["general","projects","targets","timeblocks","durations","filters"],n=M.useMemo(()=>({general:{id:"general",title:e("general"),component:r.jsx(r.Fragment,{children:r.jsx(Fo,{})}),defaultExpanded:!0},projects:{id:"projects",title:e("projects"),component:r.jsx(qo,{}),defaultExpanded:!0,action:r.jsx("button",{onClick:()=>t("project-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},targets:{id:"targets",title:e("targets"),component:r.jsx(Ko,{}),defaultExpanded:!1,action:r.jsx("button",{onClick:()=>t("wiki-framework"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},timeblocks:{id:"timeblocks",title:e("timeblocks"),component:r.jsx(Vo,{}),defaultExpanded:!1,action:r.jsx("button",{onClick:()=>t("timeblock-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},durations:{id:"durations",title:e("durations"),component:r.jsx(Wo,{}),defaultExpanded:!1},filters:{id:"filters",title:e("filters"),component:r.jsx(Po,{}),defaultExpanded:!1,action:r.jsx("button",{onClick:()=>t("filter-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})}}),[e,t]);return r.jsx(vt,{items:a,strategy:Nt,children:r.jsx("div",{className:"flex flex-col gap-4",children:a.map(o=>{const i=n[o];return i?r.jsx(Xo,{id:i.id,section:i},i.id):null})})})},Mr=ve(e=>({onTasksReorder:null,setTasksReorderHandler:t=>e({onTasksReorder:t})})),ge=w.forwardRef(({className:e,variant:t="primary",size:s="md",isLoading:a,leftIcon:n,rightIcon:o,children:i,disabled:l,...c},d)=>{const u={primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg shadow-blue-500/30 border border-transparent",secondary:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 border border-transparent",danger:"bg-red-500 hover:bg-red-600 text-white shadow-md shadow-red-500/30 border border-transparent",ghost:"bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",outline:"bg-transparent border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800",premium:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg shadow-blue-500/40 border border-transparent"},g={sm:"text-xs px-3 py-1.5 rounded-lg gap-1.5",md:"text-sm px-4 py-2 rounded-lg gap-2",lg:"text-base px-6 py-3 rounded-xl gap-2.5",icon:"p-2 rounded-full aspect-square flex items-center justify-center"};return r.jsxs("button",{ref:d,className:I("flex items-center justify-center font-bold transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",u[t],g[s],e),disabled:l||a,...c,children:[a&&r.jsx(ta,{className:"-ml-1 text-currentColor",size:16}),!a&&n,i,!a&&o]})});ge.displayName="Button";const Pt=w.forwardRef(({className:e,label:t,error:s,containerClassName:a,options:n,children:o,id:i,...l},c)=>{const d=w.useId(),u=i||d;return r.jsxs("div",{className:I("flex flex-col gap-1.5",a),children:[t&&r.jsx("label",{htmlFor:u,className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t}),r.jsxs("div",{className:"relative group",children:[r.jsx("select",{ref:c,id:u,className:I("w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border rounded-xl pl-4 pr-10 py-2.5 outline-none transition-all appearance-none cursor-pointer placeholder:text-gray-300 dark:placeholder:text-gray-600","focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",s?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 text-gray-500 hover:border-gray-300 dark:hover:border-gray-600",e),"aria-invalid":!!s,"aria-describedby":s?`${u}-error`:void 0,...l,children:o||(n==null?void 0:n.map(g=>r.jsx("option",{value:g.value,children:g.label},g.value)))}),r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors",children:r.jsx(dr,{size:16})})]}),s&&r.jsx("p",{id:`${u}-error`,className:"text-xs text-red-500 font-medium animate-fade-in-down",children:s})]})});Pt.displayName="Select";const Jo=e=>{if(!e)return"";const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},Fr=M.memo(({task:e,style:t,className:s,dragHandleProps:a})=>{const{t:n}=S(),o=e.status==="completed",{openModal:i}=le(),{projects:l}=Rt(),{timeBlocks:c}=ot(),[d,u]=w.useState(null),g=async T=>{T.stopPropagation(),e.id&&await xo(e.id,e.status||"todo")},m=T=>{T.preventDefault(),T.stopPropagation(),u({x:T.clientX,y:T.clientY})},x=()=>{u(null),i("task-detail",e)},f=()=>{u(null),i("confirmation",{title:n("delete"),message:`${n("task")}: ${e.title}
${n("msg.confirm_delete")}`,confirmLabel:n("delete"),variant:"danger",onConfirm:async()=>{e.id&&await po(e.id)}})},h=async T=>{if(u(null),!e.id)return;let R=null;const P=new Date;switch(P.setHours(0,0,0,0),T){case"today":R=new Date;break;case"tomorrow":R=new Date(P),R.setDate(P.getDate()+1);break;case"next_week":R=new Date(P),R.setDate(P.getDate()+7);break;case"no_date":R=null;break}await Dr(e.id,{dueDate:R})},b=e.projectId?l.find(T=>T.id===e.projectId):null,N=e.timeBlockId?c.find(T=>T.id===e.timeBlockId):null,p=!!(e.recurrence&&e.recurrence.type!=="none"),k=!!e.dueDate,C=B(e.dueDate);return r.jsxs(r.Fragment,{children:[r.jsxs("li",{style:t,onClick:()=>i("task-detail",e),onContextMenu:m,className:I("group flex items-center gap-3 p-[var(--task-p)] bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700/50 rounded-xl hover:shadow-sm hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-200 cursor-default hover-lift",s),children:[a&&r.jsx("div",{...a,className:"cursor-move text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 p-1 -ml-1 flex-shrink-0 touch-none",children:r.jsx(Zs,{className:"w-4 h-4"})}),r.jsx("button",{onClick:g,className:I("w-5 h-5 rounded-full border flex items-center justify-center transition-colors shrink-0 cursor-pointer",o?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-blue-400 text-transparent"),"aria-label":o?"Mark as incomplete":"Mark as complete",children:r.jsx(qe,{className:"w-3 h-3",strokeWidth:3})}),r.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[r.jsx("div",{className:I("text-sm text-gray-800 dark:text-gray-200 break-words",o&&"line-through text-gray-400 dark:text-gray-500"),children:e.title}),e.description&&r.jsx("div",{className:"text-xs text-gray-500 line-clamp-1 truncate",children:Jo(e.description)})]}),r.jsxs("div",{className:"hidden sm:grid grid-cols-[90px_110px_50px_80px] gap-2 text-xs shrink-0 items-center",children:[r.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-md bg-gray-50 dark:bg-gray-700/50 text-gray-600 dark:text-gray-300 overflow-hidden",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full shrink-0",style:{backgroundColor:(b==null?void 0:b.color)||v.DEFAULT_COLORS.PROJECT_INACTIVE}}),r.jsx("span",{className:"truncate",children:b?b.name:"PJãªã—"})]}),r.jsx("div",{className:"flex items-center gap-1 text-gray-400 dark:text-gray-500 overflow-hidden",children:N?r.jsxs(r.Fragment,{children:[r.jsx(pr,{className:"w-3.5 h-3.5 shrink-0"}),r.jsx("span",{className:"truncate",children:N.name})]}):r.jsx("span",{className:"text-[10px] text-gray-300 dark:text-gray-600 truncate",children:"æ™‚é–“å¸¯ãªã—"})}),r.jsx("div",{className:"text-gray-400 dark:text-gray-500 tabular-nums text-right overflow-hidden",children:e.duration?`${e.duration}m`:""}),r.jsx("div",{className:I("flex items-center justify-end gap-1 overflow-hidden",p||k?o?"text-gray-400":Ua(e.dueDate):"text-gray-400 dark:text-gray-500 opacity-50"),children:p?r.jsxs(r.Fragment,{children:[r.jsx(ea,{className:"w-3.5 h-3.5 shrink-0"}),C&&r.jsx("span",{className:"truncate",children:Xt(C)})]}):k&&C?r.jsxs(r.Fragment,{children:[r.jsx(Je,{className:"w-3.5 h-3.5 shrink-0"}),r.jsx("span",{className:"truncate",children:Xt(C)})]}):r.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:n("no_date")})})]})]}),d&&r.jsxs(nt,{x:d.x,y:d.y,onClose:()=>u(null),children:[r.jsxs(Ro,{label:n("date_change")||"æ—¥ä»˜å¤‰æ›´",icon:r.jsx(Je,{}),children:[r.jsx(H,{onClick:()=>h("today"),children:n("today")}),r.jsx(H,{onClick:()=>h("tomorrow"),children:n("tomorrow")}),r.jsx(H,{onClick:()=>h("next_week"),children:n("next_week")||"æ¥é€±"}),r.jsx(H,{onClick:()=>h("no_date"),children:n("no_date")||"æœŸé™ãªã—"})]}),r.jsx(H,{onClick:x,icon:r.jsx(Ee,{}),children:n("edit")}),r.jsx(H,{onClick:f,variant:"danger",icon:r.jsx(De,{}),children:n("delete")})]})]})},(e,t)=>{const s=(a,n)=>{var l,c;const o=(l=B(a))==null?void 0:l.getTime(),i=(c=B(n))==null?void 0:c.getTime();return o===i};return e.task.id===t.task.id&&e.task.status===t.task.status&&e.task.title===t.task.title&&e.task.description===t.task.description&&e.task.projectId===t.task.projectId&&e.task.timeBlockId===t.task.timeBlockId&&e.task.duration===t.task.duration&&e.task.recurrence===t.task.recurrence&&s(e.task.dueDate,t.task.dueDate)}),wt=({tasks:e,timeBlockId:t})=>{const{t:s,formatNumber:a}=S(),{timeBlocks:n}=ot(),o=e.reduce((m,x)=>{const f=x.duration,h=typeof f=="number"?f:Number(f);return m+(isNaN(h)?0:h)},0),i=m=>a(m/60,{minimumFractionDigits:2,maximumFractionDigits:2})+"h",l=t?n.find(m=>m.id===t):null;if(l&&l.start&&l.end){const m=Va(l.start,l.end);if(m<=0)return null;const x=a(m/60,{minimumFractionDigits:2,maximumFractionDigits:2}),f=a(o/60,{minimumFractionDigits:2,maximumFractionDigits:2}),h=o/m*100,b=Math.min(h,100),N=m-o,p=N<0,k=a(Math.abs(N)/60,{minimumFractionDigits:2,maximumFractionDigits:2}),C=h>100;return r.jsxs("div",{className:"flex items-center gap-3 py-2 px-3 my-1 border border-gray-100 dark:border-gray-800 rounded-lg bg-gray-50/30 dark:bg-gray-800/20",children:[r.jsx("div",{className:"flex-shrink-0 w-20 truncate text-[10px] font-bold text-gray-400 uppercase tracking-tight",title:l.name,children:l.name}),r.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 dark:text-gray-400 tabular-nums min-w-[70px]",children:[r.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:[f,"h"]}),r.jsx("span",{className:"text-gray-400 mx-0.5",children:"/"}),r.jsxs("span",{children:[x,"h"]})]}),r.jsx("div",{className:"flex-1 relative h-2 bg-gray-200 dark:bg-gray-700/50 rounded-full overflow-hidden min-w-[60px]",children:r.jsx("div",{className:I("h-full rounded-full transition-all duration-500 ease-out",C?"bg-red-500":"bg-blue-500"),style:{width:C?"100%":`${b}%`}})}),r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2 tabular-nums",children:[r.jsxs("span",{className:I("text-xs font-bold w-[4ch] text-right",C?"text-red-500 dark:text-red-400":"text-blue-500 dark:text-blue-400"),children:[Math.round(h),"%"]}),r.jsxs("span",{className:I("text-[10px] hidden sm:inline",p?"text-red-400 dark:text-red-300":"text-gray-400 dark:text-gray-500"),children:["(",p?"+":"-",k,"h)"]})]})]})}const c=e.length,d=c>0?o/c:0,u=s("task_stats.count_unit"),g=s("task_stats.avg_unit");return r.jsxs("div",{className:"glass-card flex items-center justify-evenly py-3 px-4 my-2",children:[r.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[r.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:s("task_stats.count_label")}),r.jsxs("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:[a(c),u&&r.jsx("span",{className:"text-xs font-normal ml-0.5 text-gray-400",children:u})]})]}),r.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),r.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[r.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:s("task_stats.total_label")}),r.jsx("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200 text-blue-600 dark:text-blue-400",children:i(o)})]}),r.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),r.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[r.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:s("task_stats.avg_label")}),r.jsxs("span",{className:"font-medium text-sm",children:[i(d),r.jsx("span",{className:"text-xs ml-0.5",children:g})]})]})]})},Qo=({task:e,className:t})=>{const{attributes:s,listeners:a,setNodeRef:n,transform:o,transition:i,isDragging:l}=jt({id:`${v.DND.PREFIX_TASK}${e.id||""}`,data:{type:"task",task:e}}),c={transform:Ze.Transform.toString(o),transition:i,zIndex:l?50:"auto",position:"relative"};return r.jsx("div",{ref:n,style:c,className:"touch-manipulation",children:r.jsx(Fr,{task:e,className:I(t,l&&"opacity-80 shadow-lg border-blue-400 bg-blue-50/50"),dragHandleProps:{...s,...a}})})},Zo=({task:e,className:t})=>{const{attributes:s,listeners:a,setNodeRef:n,transform:o,isDragging:i}=Gr({id:`${v.DND.PREFIX_TASK}${e.id||""}`,data:{type:"task",task:e}}),l={transform:Ze.Translate.toString(o),zIndex:i?50:"auto",position:"relative"};return r.jsx("div",{ref:n,style:l,className:"touch-manipulation",children:r.jsx(Fr,{task:e,className:I(t,i&&"opacity-80 shadow-lg border-blue-400 bg-blue-50/50"),dragHandleProps:{...s,...a}})})},Lr=()=>{const{t:e}=S(),{tasks:t,loading:s}=Ue(),{filterType:a,targetId:n,query:o,showCompleted:i,sortCriteria:l,setShowCompleted:c,setSortCriteria:d}=ee(),{density:u}=O(),{openModal:g}=le(),m=w.useMemo(()=>o&&o.trim().length>0?{keyword:o,showCompleted:i,projectId:null,labelId:null,timeBlockId:null,duration:null,filterType:"all_tasks",savedFilter:null,sortCriteria:l}:{keyword:o,showCompleted:i,projectId:a==="inbox"?"unassigned":a==="project"?n:null,labelId:a==="label"?n:null,timeBlockId:a==="timeblock"?n:null,duration:a==="duration"?n:null,filterType:a,savedFilter:null,sortCriteria:l},[a,n,o,i,l]),x=w.useMemo(()=>Qa(t,m),[t,m]),f={compact:"space-y-1",normal:"space-y-2",comfortable:"space-y-3",spacious:"space-y-4"}[u],{setTasksReorderHandler:h}=Mr(),[b,N]=M.useState(null);M.useEffect(()=>{N(null)},[t,m]);const p=b||x,k=M.useRef({localOrderedTasks:b,processedTasks:x,sortCriteria:l});M.useEffect(()=>{k.current={localOrderedTasks:b,processedTasks:x,sortCriteria:l}});const C=M.useCallback(async(U,Bt)=>{const{localOrderedTasks:Or,processedTasks:Br,sortCriteria:Wr}=k.current;if(Wr!=="manual")return;const lt=Or||Br,Wt=lt.findIndex(Ie=>Ie.id===U),$t=lt.findIndex(Ie=>Ie.id===Bt);if(Wt!==-1&&$t!==-1){const Ie=gt(lt,Wt,$t);N(Ie);const $r=Ie.map(ct=>ct.id).filter(Boolean);try{await mo($r)}catch(ct){console.error("Failed to reorder tasks",ct),N(null)}}},[]),T=M.useRef(0),R=M.useRef(Date.now());M.useEffect(()=>{const U=Date.now();if(U-R.current>1e3&&(T.current=0),R.current=U,T.current++,T.current>10){console.error("[TaskList] Infinite loop detected in setTasksReorderHandler effect. Aborting registration.");return}return h(C),()=>h(null)},[C,h]);const P=p.length===0,se=!!(o&&o.trim().length>0);if(s&&!se&&t.length===0)return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-gray-400 text-sm animate-pulse",children:e("task_list.loading")})});const fe=l==="manual";return r.jsxs("div",{className:"flex flex-col h-full overflow-hidden relative",children:[r.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-1 pb-24",children:[r.jsxs("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm pt-2 pb-4 mb-4 flex items-center gap-2",children:[r.jsx("div",{className:"flex-1",children:se&&r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[r.jsx(Pe,{className:"w-4 h-4"}),e("task_list.searching_results",{query:o||""})]})}),r.jsx("div",{className:"flex items-center gap-2 px-1",children:r.jsxs(Pt,{name:"sortCriteria","aria-label":e("task_list.sort_options")||"Sort Options",value:l,onChange:U=>d(U.target.value),className:"font-medium text-xs py-1.5 h-auto",children:[r.jsx("option",{value:"manual",children:e("task_list.sort_manual")}),r.jsx("option",{value:"createdAt_desc",children:e("task_list.sort_created")}),r.jsx("option",{value:"dueDate_asc",children:e("task_list.sort_due")}),r.jsx("option",{value:"important_desc",children:e("task_list.sort_important")}),r.jsx("option",{value:"title_asc",children:e("task_list.sort_title")})]})}),r.jsx(ge,{variant:i?"primary":"outline",size:"sm",onClick:()=>c(!i),title:e(i?"task_list.hide_completed":"task_list.show_completed"),className:"shrink-0",children:e(i?"task_list.hide_completed":"task_list.show_completed")})]}),P?r.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center min-h-[60vh]",children:[r.jsxs("div",{className:"relative mb-8",children:[r.jsx("div",{className:"absolute -inset-4 bg-blue-500/10 dark:bg-blue-400/10 blur-3xl rounded-full"}),r.jsx("div",{className:"relative",children:r.jsx(qe,{className:"w-24 h-24 text-blue-200 dark:text-blue-900/50",strokeWidth:1.5})})]}),r.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:e("task_list.no_tasks_title")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs mb-8",children:e(i?"task_list.no_tasks_desc_showing":"task_list.no_tasks_desc_hiding")}),r.jsx(ge,{variant:"premium",onClick:()=>g("task-detail",{title:""}),leftIcon:r.jsx(cr,{className:"w-5 h-5"}),children:e("task_list.add_new_task")})]}):fe?r.jsx(vt,{items:p.map(U=>`${v.DND.PREFIX_TASK}${U.id||""}`),strategy:Nt,children:r.jsx("div",{className:I("transition-all duration-200",f),children:p.map(U=>r.jsx(Qo,{task:U},U.id))})}):r.jsx("div",{className:I("transition-all duration-200",f),children:p.map(U=>r.jsx(Zo,{task:U},U.id))})]}),r.jsx("div",{className:"flex-none mt-auto pt-2 border-t border-gray-100 dark:border-gray-800 bg-white/50 dark:bg-gray-900/50 backdrop-blur pb-[calc(0.5rem+env(safe-area-inset-bottom))]",children:r.jsx(wt,{tasks:p,timeBlockId:m.timeBlockId})})]})},ei=({tasks:e})=>{const{t}=S(),[s,a]=w.useState("day"),n=w.useMemo(()=>e.filter(l=>l.status==="completed"&&l.completedAt),[e]),o=w.useMemo(()=>{const l=new Date,c=[];for(let d=3;d>=0;d--){let u,g,m;const x=s==="day"?Is(l,d):s==="week"?Cs(l,d):s==="month"?Ts(l,d):Ds(l,d);s==="day"?(u=nr(x),g=Es(x),m=dt(u,"M/d",{locale:He})):s==="week"?(u=or(x,{weekStartsOn:1}),g=Ss(x,{weekStartsOn:1}),m=`${dt(u,"M/d",{locale:He})}~`):s==="month"?(u=As(x),g=Ms(x),m=dt(u,"Mæœˆ",{locale:He})):(u=Fs(x),g=Ls(x),m=`Q${Math.floor(u.getMonth()/3)+1}`);const f=n.filter(h=>{const b=B(h.completedAt);return b&&b>=u&&b<=g}).length;c.push({label:m,count:f,date:u})}return c},[n,s]),i=Math.max(...o.map(l=>l.count),1);return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-100 dark:border-gray-800 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx("span",{children:"ðŸ“Š"})," ",t("general_dashboard.completion_chart")||"Completion Stats"]}),r.jsx(Pt,{value:s,onChange:l=>a(l.target.value),className:"w-24 text-xs h-7 py-0",options:[{value:"day",label:t("date_options.day")||"Day"},{value:"week",label:t("date_options.week")||"Week"},{value:"month",label:t("date_options.month")||"Month"},{value:"quarter",label:t("date_options.quarter")||"Quarter"}]})]}),r.jsx("div",{className:"flex items-end justify-between h-32 gap-2 pt-2 pb-1",children:o.map((l,c)=>{const d=Math.round(l.count/i*100);return r.jsxs("div",{className:"flex flex-col items-center flex-1 gap-2 group",children:[r.jsx("div",{className:"relative w-full flex justify-center items-end h-full",children:r.jsx("div",{className:I("w-full max-w-[20px] rounded-t-sm transition-all duration-500 ease-out","bg-blue-200 dark:bg-blue-900/40 group-hover:bg-blue-400 dark:group-hover:bg-blue-700",c===3&&"bg-blue-500 dark:bg-blue-600"),style:{height:`${d}%`},children:r.jsx("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-6 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-[10px] py-0.5 px-1.5 rounded pointer-events-none transition-opacity font-mono",children:l.count})})}),r.jsx("span",{className:"text-[10px] text-gray-400 font-medium truncate w-full text-center",children:l.label})]},c)})})]})},ti=()=>{const{t:e}=S(),{tasks:t}=Ue(),{timeBlocks:s}=ot(),a=st(),{density:n}=O();t.length,t.filter(i=>i.status==="completed").length;const o=[{id:"inbox",label:e("inbox"),count:a.inbox,icon:xr,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{id:"today",label:e("today"),count:a.today,icon:Je,color:"text-green-500",bg:"bg-green-50 dark:bg-green-900/20"},{id:"upcoming",label:e("upcoming"),count:a.upcoming,icon:mr,color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-900/20"}];return r.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar p-4 md:p-6 space-y-6",children:[r.jsxs("header",{className:"mb-4",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:e("dashboard")}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:[e("general_dashboard.overall_stats")," & ",e("general_dashboard.time_block_usage")]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:o.map(i=>r.jsxs("div",{className:"p-4 rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-800 shadow-sm flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:i.label}),r.jsx("p",{className:"text-2xl font-black text-gray-800 dark:text-gray-100 tabular-nums",children:i.count})]}),r.jsx("div",{className:`p-3 rounded-lg ${i.bg}`,children:r.jsx(i.icon,{className:`w-6 h-6 ${i.color}`})})]},i.id))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(ei,{tasks:t}),r.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[r.jsx("h2",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:e("general_dashboard.overall_stats")}),r.jsx(wt,{tasks:t.filter(i=>i.status!=="completed"),timeBlockId:null})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e("general_dashboard.time_block_usage")}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(i=>{const l=t.filter(c=>c.timeBlockId===i.id&&c.status!=="completed");return r.jsx("div",{className:"p-4 rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-800 shadow-sm",children:r.jsx(wt,{tasks:l,timeBlockId:i.id||null})},i.id)})})]})]})},Ot=w.forwardRef(({className:e,label:t,error:s,leftIcon:a,rightIcon:n,containerClassName:o,id:i,...l},c)=>{const d=w.useId(),u=i||d;return r.jsxs("div",{className:I("flex flex-col gap-1.5",o),children:[t&&r.jsx("label",{htmlFor:u,className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t}),r.jsxs("div",{className:"relative group",children:[a&&r.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 z-10 pointer-events-none",children:a}),r.jsx("input",{ref:c,id:u,className:I("w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border rounded-xl px-4 py-2.5 outline-none transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600","focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",s?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 group-hover:border-gray-300 dark:group-hover:border-gray-600",a&&"pl-10",n&&"pr-10",e),"aria-invalid":!!s,"aria-describedby":s?`${u}-error`:void 0,...l}),n&&r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 z-10 pointer-events-none",children:n})]}),s&&r.jsx("p",{id:`${u}-error`,className:"text-xs text-red-500 font-medium animate-fade-in-down",children:s})]})});Ot.displayName="Input";const ri=()=>{const{t:e}=S(),{query:t,setSearchQuery:s,setFilter:a}=ee(),{setView:n}=te(),[o,i]=w.useState(t),l=w.useRef(null);w.useEffect(()=>{var g;(g=l.current)==null||g.focus()},[]),w.useEffect(()=>{t!==o&&i(t)},[t]),w.useEffect(()=>{const g=setTimeout(()=>{o!==t&&s(o)},150);return()=>{clearTimeout(g)}},[o,t,s]);const c=g=>{i(g.target.value)},d=()=>{var g;i(""),s(""),(g=l.current)==null||g.focus()},u=()=>{s(""),a("inbox"),n("tasks")};return r.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-50 via-white to-blue-50/30 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:[r.jsxs("div",{className:"relative p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800",children:[r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full blur-3xl -z-0"}),r.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(ge,{variant:"ghost",size:"icon",onClick:u,className:"rounded-xl transition-all hover:scale-105 active:scale-95","aria-label":e("close"),children:r.jsx(Ys,{className:"w-5 h-5 text-gray-500"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("sidebar.search_placeholder")})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-2xl blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-300 pointer-events-none"}),r.jsx(Ot,{ref:l,id:"search-input",name:"search",type:"text",value:o,onChange:c,placeholder:e("sidebar.search_placeholder"),className:"py-4 text-base bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl border-gray-200/50 dark:border-gray-700/50 rounded-2xl shadow-lg shadow-gray-200/50 dark:shadow-black/20",leftIcon:r.jsx(Pe,{className:"w-5 h-5"}),rightIcon:o?r.jsx("button",{type:"button",onClick:d,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors pointer-events-auto","aria-label":e("clear"),children:r.jsx(Gs,{className:"w-5 h-5"})}):void 0})]}),!o&&r.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[r.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 font-mono",children:"/"}),r.jsx("span",{children:e("search_view.tips")})]}),o&&r.jsxs("p",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),e("search_view.results_for",{query:o})]})]})]}),r.jsx("div",{className:"flex-1 overflow-hidden",children:o?r.jsx(Lr,{}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 dark:text-gray-500 p-8",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-full blur-2xl"}),r.jsx("div",{className:"relative w-24 h-24 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center mb-6",children:r.jsx(Pe,{className:"w-12 h-12 text-gray-400 dark:text-gray-500",strokeWidth:1.5})})]}),r.jsx("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-300 mb-2",children:e("search_view.empty_title")}),r.jsx("p",{className:"text-sm text-center max-w-xs opacity-75",dangerouslySetInnerHTML:{__html:e("search_view.empty_desc")}})]})})]})},si=()=>{const{entities:e,loading:t}=Le({entityName:"targets",subscribeFn:(s,a)=>ro(s,a),getCacheFn:eo,isInitializedFn:to});return{targets:e,loading:t}},ai=M.memo(({kgi:e,currentTab:t,onTabChange:s,collapsed:a,onToggleCollapse:n})=>{const{t:o}=S(),i={good:"text-emerald-500",warning:"text-amber-500",danger:"text-red-500"},l={good:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-red-500"},c=i[e.status]||"text-gray-500",d=l[e.status]||"bg-gray-500",u=[{id:"backward",label:o("backward_map"),icon:"ðŸ—ºï¸"},{id:"woop",label:o("woop_board"),icon:"âœ¨"},{id:"okr",label:o("okr_tree"),icon:"ðŸŽ¯"}];return r.jsx("div",{className:`mb-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg transition-all duration-300 mx-4 mt-4 ${a?"py-2":"py-4"}`,children:r.jsxs("div",{className:"px-6 flex items-center justify-between gap-6",children:[r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("h1",{className:`font-bold text-gray-900 dark:text-white truncate transition-all duration-300 ${a?"text-sm opacity-50":"text-base"}`,children:e.title})}),r.jsx("div",{className:"flex-1 max-w-md hidden sm:block",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:"h-3 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:r.jsx("div",{style:{width:`${e.progress}%`},className:`h-full ${d} transition-all duration-1000 ease-out rounded-full`})})}),r.jsxs("span",{className:`font-black ${c} tabular-nums text-sm whitespace-nowrap`,children:[e.progress,"%"]})]})}),r.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0",children:[r.jsxs("div",{className:"text-center hidden sm:block",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:o("target_dashboard.days_left")}),r.jsxs("div",{className:`font-black ${c} tabular-nums`,children:[e.daysLeft,r.jsx("span",{className:"text-xs font-medium ml-0.5 text-gray-400",children:o("target_dashboard.days_unit")})]})]}),r.jsx("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-900/50 p-1 rounded-lg",children:u.map(g=>r.jsxs("button",{onClick:()=>s(g.id),className:`group px-3 py-1.5 rounded-md text-xs font-bold transition-all flex flex-col sm:flex-row items-center gap-1 sm:gap-2 ${t===g.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,title:g.label,children:[r.jsx("span",{className:"text-sm sm:text-base leading-none",children:g.icon}),r.jsx("span",{className:"text-[10px] sm:text-xs leading-none",children:g.label})]},g.id))}),r.jsx(ge,{variant:"ghost",size:"icon",onClick:n,title:o(a?"target_dashboard.header_expand":"target_dashboard.header_collapse"),className:"rounded-lg",children:r.jsx(Js,{className:`w-4 h-4 text-gray-500 transition-transform duration-300 ${a?"rotate-180":""}`})})]})]})})}),ni=M.memo(({data:e})=>{const{t}=S();return!e||!e.milestones?r.jsx("div",{className:"p-4 text-center text-gray-500",children:t("target_dashboard.loading_error")}):r.jsxs("div",{className:"max-w-4xl mx-auto relative pb-10",children:[r.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 -translate-x-1/2"}),e.milestones.map((s,a)=>{const n=s.type==="goal",o=s.type==="current",i=s.completed;let l,c="";return n?(l=r.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-400 text-white flex items-center justify-center text-base shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:"ðŸ†"}),c="bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"):o?(l=r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 animate-pulse relative",children:t("target_dashboard.backward.now_icon")}),c="border-blue-500 border-2 shadow-md"):i?(l=r.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs shadow ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:"âœ“"}),c="bg-gray-50 dark:bg-gray-800 opacity-70"):(l=r.jsx("div",{className:"w-5 h-5 rounded-full bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative"}),c="bg-white dark:bg-gray-800"),r.jsxs("div",{className:"relative flex items-center mb-4 animate-fade-in group",style:{animationDelay:`${a*50}ms`},children:[r.jsx("div",{className:"w-16 flex-shrink-0 flex justify-center items-center z-10",children:l}),r.jsx("div",{className:"flex-1 pr-4 min-w-0",children:r.jsx("div",{className:`px-3 py-3 rounded-lg border ${o&&!c.includes("border-2")?"border-2 border-blue-500":o?"":"border-gray-200 dark:border-gray-700"} ${c} shadow-sm transition-all hover:shadow-md hover:translate-x-1 cursor-pointer`,children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("span",{className:`text-xs font-bold ${o?"text-blue-600":"text-gray-500"} flex-shrink-0 font-mono`,children:s.date}),r.jsx("h3",{className:"font-bold text-gray-900 dark:text-white flex-1 truncate text-sm md:text-base",children:s.title}),n&&r.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-bold flex-shrink-0",children:t("target_dashboard.backward.target_label")}),o&&r.jsx("span",{className:"text-[10px] text-blue-500 font-bold flex-shrink-0",children:t("target_dashboard.backward.now_label")})]})})})]},s.id||`milestone-${a}`)})]})}),oi=M.memo(({data:e})=>{const{t}=S();if(!e||!e.keyResults)return r.jsx("div",{className:"p-4 text-center text-gray-500",children:t("target_dashboard.loading_error")});const s=a=>a==="high"?"bg-emerald-500":a==="medium"?"bg-amber-500":"bg-red-500";return r.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border-2 border-blue-100 dark:border-blue-900 shadow-lg text-center mb-12 relative z-10 transition-transform hover:scale-[1.01]",children:[r.jsx("div",{className:"absolute top-[-15px] left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-md",children:t("target_dashboard.okr.objective_label")}),r.jsxs("h2",{className:"font-black text-2xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 leading-tight",children:['"',e.objective,'"']}),r.jsx("div",{className:"absolute bottom-[-50px] left-1/2 w-1 h-[50px] bg-gray-200 dark:bg-gray-700 z-0"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative",children:[r.jsx("div",{className:"hidden md:block absolute top-[-25px] left-[16.66%] right-[16.66%] h-1 bg-gray-200 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 rounded-t-xl z-0"}),e.keyResults.map(a=>{const n=a.target>0?Math.round(a.current/a.target*100):0,o=s(a.confidence);return r.jsxs("div",{className:"relative pt-6",children:[r.jsx("div",{className:"absolute top-[-25px] left-1/2 w-1 h-[25px] bg-gray-200 dark:bg-gray-700 md:block hidden"}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-700 transition-all group h-full flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[t("target_dashboard.okr.kr_prefix"),a.id]}),r.jsx("div",{className:`w-3 h-3 rounded-full ${o}`,title:`Confidence: ${a.confidence}`})]}),r.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-4 h-12 line-clamp-2",children:a.text}),r.jsxs("div",{className:"space-y-1 mt-auto",children:[r.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-500 dark:text-gray-400",children:[r.jsx("span",{children:a.current}),r.jsx("span",{children:a.target})]}),r.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-900 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${n}%`}})}),r.jsxs("div",{className:"text-right text-sm font-black text-blue-600 mt-1",children:[n,"%"]})]})]})]},a.id)})]})]})}),ii=M.memo(({data:e})=>{const{t}=S();return!e||!e.obstacles?r.jsx("div",{className:"p-4 text-center text-gray-500",children:t("target_dashboard.loading_error")}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto animate-fade-in",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/30 dark:to-blue-900/30 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800 shadow-sm hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"text-sm font-bold text-indigo-500 uppercase mb-2",children:t("target_dashboard.woop.wish_label")}),r.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',e.wish,'"']})]}),r.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/30 dark:to-rose-900/30 p-6 rounded-2xl border border-pink-100 dark:border-pink-800 shadow-sm hover:shadow-md transition-shadow",children:[r.jsx("h3",{className:"text-sm font-bold text-pink-500 uppercase mb-2",children:t("target_dashboard.woop.outcome_label")}),r.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',e.outcome,'"']})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-2 flex items-center",children:[r.jsx("span",{className:"mr-2",children:"ðŸš§"})," ",t("target_dashboard.woop.obstacles_header")]}),e.obstacles.map(s=>r.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all overflow-hidden relative",children:[r.jsx("div",{className:"p-5 border-l-4 border-gray-400 bg-gray-50 dark:bg-gray-800 relative z-10 transition-transform group-hover:translate-x-1",children:r.jsxs("h4",{className:"font-bold text-gray-700 dark:text-gray-300 flex items-center",children:[r.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-xs px-2 py-1 rounded mr-3 text-gray-600 dark:text-gray-400",children:t("target_dashboard.woop.obstacle_badge")}),s.text]})}),r.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border-t border-gray-100 dark:border-gray-700 flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 mt-1",children:r.jsx("span",{className:"block w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs font-bold",children:t("target_dashboard.woop.if_badge")})}),r.jsx("div",{className:"ml-3 flex-1",children:r.jsxs("p",{className:"text-emerald-800 dark:text-emerald-300 font-bold text-sm",children:["â†’ ",s.plan]})}),r.jsxs("div",{className:"ml-2 flex flex-col items-center",children:[r.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:t("target_dashboard.woop.score_label")}),r.jsx("span",{className:"text-lg font-black text-emerald-500 leading-none",children:s.overcomeCount})]})]})]},s.id)),r.jsx("button",{className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl text-gray-400 hover:border-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition flex items-center justify-center font-bold text-sm",children:t("target_dashboard.woop.add_obstacle")})]})]})}),li=()=>{var f;const{t:e}=S(),{targets:t}=si(),[s,a]=w.useState("backward"),[n,o]=w.useState(!1),i=t.filter(h=>{var b;return((b=h.mode)==null?void 0:b.toLowerCase())===s.toLowerCase()}),l=h=>({milestones:[{date:e("target_dashboard.backward.timeline.future"),title:h.data.goal_kgi||e("target_dashboard.kgi_default"),type:"goal",completed:!1},{date:e("target_dashboard.backward.timeline.milestone"),title:h.data.milestone_minus_1mo||"",type:"milestone",completed:!1},{date:e("target_dashboard.backward.timeline.today"),title:e("target_dashboard.backward.current_status"),type:"current",completed:!0},{date:e("target_dashboard.backward.timeline.now"),title:h.data.first_action||"",type:"action",completed:!1}]}),c=h=>({wish:h.data.wish||"",outcome:h.data.outcome||"",obstacles:[{id:1,text:h.data.obstacle||"",plan:h.data.plan||"",overcomeCount:0}]}),d=h=>({objective:h.data.objective||"",keyResults:[{id:1,text:h.data.kr_1||`${e("target_dashboard.okr.kr_prefix")}1`,current:0,target:100,confidence:"medium"},{id:2,text:h.data.kr_2||`${e("target_dashboard.okr.kr_prefix")}2`,current:0,target:100,confidence:"medium"},{id:3,text:h.data.kr_3||`${e("target_dashboard.okr.kr_prefix")}3`,current:0,target:100,confidence:"medium"}]}),u=()=>i.length===0?r.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500 dark:text-gray-400",children:r.jsx("p",{className:"mb-4",children:e("target_dashboard.no_targets",{mode:s.toUpperCase()})})}):r.jsx("div",{className:"space-y-12",children:i.map(h=>{var b;return r.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-12 last:border-0",children:[r.jsx("div",{className:"mb-4 text-xs text-gray-400 flex justify-end",children:e("target_dashboard.created_at",{date:((b=B(h.createdAt))==null?void 0:b.toLocaleDateString())||"Unknown"})}),s==="backward"&&r.jsx(ni,{data:l(h)}),s==="woop"&&r.jsx(ii,{data:c(h)}),s==="okr"&&r.jsx(oi,{data:d(h)})]},h.id)})}),g=i[0],x={title:((h,b)=>h?b==="backward"?h.data.goal_kgi||e("target_dashboard.kgi_default"):b==="woop"?h.data.wish||e("target_dashboard.wish_default"):b==="okr"?h.data.objective||e("target_dashboard.obj_default"):e("target_dashboard.target_default"):e("target_dashboard.title_default"))(g,s),progress:Number(((f=g==null?void 0:g.data)==null?void 0:f.progress)||0),daysLeft:0,status:"good"};return r.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[r.jsx(ai,{kgi:x,currentTab:s,onTabChange:a,collapsed:n,onToggleCollapse:()=>o(!n)}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 pb-6 pt-4",children:u()})]})},ci=[{id:"okr",title:"OKR (Objectives and Key Results)",subTitle:"é‡Žå¿ƒçš„ãªç›®æ¨™ã¨æˆæžœæŒ‡æ¨™",color:"blue",icon:"ðŸŽ¯",concept:{summary:"ã€Œä½•ã‚’é”æˆã—ãŸã„ã‹ï¼ˆObjectiveï¼‰ã€ã¨ã€Œã©ã†ã‚„ã£ã¦é”æˆã‚’æ¸¬ã‚‹ã‹ï¼ˆKey Resultsï¼‰ã€ã‚’ã‚»ãƒƒãƒˆã§ç®¡ç†ã™ã‚‹æ‰‹æ³•ã€‚",detail:"Googleã‚„Intelã‚‚æŽ¡ç”¨ã™ã‚‹ç›®æ¨™ç®¡ç†ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚60-70%ã®é”æˆåº¦ã§æˆåŠŸã¨ã¿ãªã™ã€Œãƒ ãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã€ãªç›®æ¨™è¨­å®šãŒç‰¹å¾´ã§ã€ç¾çŠ¶ç¶­æŒã§ã¯ãªãé£›èºçš„ãªæˆé•·ã‚’ä¿ƒã—ã¾ã™ã€‚"},useCases:[{title:"ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å€‹äººã®ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—",before:"æ¼ ç„¶ã¨ã€ŒæŠ€è¡“åŠ›ã‚’ä¸Šã’ãŸã„ã€ã¨è€ƒãˆã€æ‰‹å½“ãŸã‚Šæ¬¡ç¬¬ã«æœ¬ã‚’èª­ã‚€ãŒèº«ã«ã¤ã‹ãªã„ã€‚",after:"O:ã€Œãƒãƒ¼ãƒ ã®Rustç§»è¡Œã‚’ãƒªãƒ¼ãƒ‰ã™ã‚‹å­˜åœ¨ã«ãªã‚‹ã€ KR:ã€ŒRustã§ãƒžã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’1ã¤å®Ÿè£…ã™ã‚‹ã€ã€Œç¤¾å†…å‹‰å¼·ä¼šã‚’3å›žé–‹å‚¬ã™ã‚‹ã€ã¨è¨­å®šã—ã€å­¦ç¿’ã®ç„¦ç‚¹ãŒå®šã¾ã£ãŸã€‚"},{title:"å‰¯æ¥­ãƒ»å€‹äººé–‹ç™º",before:"ã€Œã„ã¤ã‹ã‚¢ãƒ—ãƒªã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã„ã€ã¨æ€ã„ã¤ã¤ã€ãƒ€ãƒ©ãƒ€ãƒ©ã¨é–‹ç™ºã‚’ç¶šã‘ã¦ã—ã¾ã†ã€‚",after:"O:ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ„›ã•ã‚Œã‚‹MVPã‚’ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã€ KR:ã€Œ3æœˆæœ«ã¾ã§ã«ã‚¹ãƒˆã‚¢å…¬é–‹ã€ã€ŒåˆæœŸãƒ¦ãƒ¼ã‚¶ãƒ¼100äººç²å¾—ã€ã€Œé€±æ¬¡ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŽ‡30%é”æˆã€ã¨æœŸé™ã¨æ•°å­—ã§ã‚³ãƒŸãƒƒãƒˆã—ãŸã€‚"}],tips:[{q:"ç›®æ¨™ãŒé«˜ã™ãŽã¦ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒç¶šãã¾ã›ã‚“ã€‚",a:"OKRã¯ã€Œé”æˆã§ããªãã¦ã‚‚ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒãªã„ã€ã®ãŒå‰æã§ã™ã€‚60%é”æˆã§ãã‚Œã°å¾¡ã®å­—ã¨è€ƒãˆã€å¤±æ•—ã‚’æã‚Œãšã«æŒ‘æˆ¦ã™ã‚‹ã“ã¨è‡ªä½“ã‚’è©•ä¾¡ã—ã¾ã—ã‚‡ã†ã€‚é€²æ—ã¯é€±æ¬¡ã§ãƒã‚§ãƒƒã‚¯ã—ï¼ˆWinã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰ã€å°ã•ãªå‰é€²ã‚’ç¥ã†ã“ã¨ãŒé‡è¦ã§ã™ã€‚"},{q:"KRï¼ˆæˆæžœæŒ‡æ¨™ï¼‰ã®æ•°å­—ã¯ã©ã†æ±ºã‚ã‚Œã°ã„ã„ã§ã™ã‹ï¼Ÿ",a:"ã€Œé ‘å¼µã‚Œã°é”æˆã§ãã‚‹ï¼ˆ50%ï¼‰ã€ã¨ã€Œã‹ãªã‚Šé‹ãŒè‰¯ããªã„ã¨ç„¡ç†ï¼ˆ100%ï¼‰ã€ã®é–“ã€ã€Œå°‘ã—èƒŒä¼¸ã³ãŒå¿…è¦ï¼ˆ70%ï¼‰ã€ãªãƒ©ã‚¤ãƒ³ã‚’ç‹™ã„ã¾ã—ã‚‡ã†ã€‚è¨ˆæ¸¬ä¸å¯èƒ½ãªã€Œã€œã‚’é ‘å¼µã‚‹ã€ã¯NGã§ã™ã€‚"}]},{id:"woop",title:"WOOP (Wish, Outcome, Obstacle, Plan)",subTitle:"ç§‘å­¦çš„ãªé¡˜æœ›å®Ÿç¾ãƒ¡ã‚½ãƒƒãƒ‰",color:"amber",icon:"âœ¨",concept:{summary:"ã€Œæœ€é«˜ã®æœªæ¥ã€ã¨ã€Œç¾å®Ÿã®éšœå®³ã€ã‚’å¯¾æ¯”ã•ã›ã€è„³ã‚’æœ¬æ°—ã«ã•ã›ã‚‹ï¼ˆãƒ¡ãƒ³ã‚¿ãƒ«ãƒ»ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒ†ã‚£ãƒ³ã‚°ï¼‰ã€‚",detail:"ãŸã ãƒã‚¸ãƒ†ã‚£ãƒ–ã«è€ƒãˆã‚‹ã ã‘ã§ãªãã€ãã‚Œã‚’é˜»ã‚€è‡ªåˆ†ã®å†…é¢ã®éšœå®³ã‚’ç›´è¦–ã—ã€ã€ŒIf-Thenãƒ—ãƒ©ãƒ³ï¼ˆã‚‚ã—XãŒèµ·ããŸã‚‰Yã™ã‚‹ï¼‰ã€ã‚’äº‹å‰ã«ç”¨æ„ã™ã‚‹ã“ã¨ã§ã€å®Ÿè¡ŒçŽ‡ã‚’é£›èºçš„ã«é«˜ã‚ã¾ã™ã€‚"},useCases:[{title:"æ¯Žæ—¥ã®é‹å‹•ç¿’æ…£",before:"ã€Œç—©ã›ãŸã„ã€ã¨æ€ã†ã ã‘ã§ã€ä»•äº‹ã§ç–²ã‚Œã‚‹ã¨ã€Œä»Šæ—¥ã¯ã„ã„ã‚„ã€ã¨ã‚µãƒœã£ã¦ã—ã¾ã†ã€‚",after:"W:ã€Œæ¯Žæ—¥30åˆ†èµ°ã‚‹ã€ O:ã€Œä½“ãŒè»½ããªã‚Šã€è‡ªä¿¡ãŒã¤ãã€ Obs:ã€Œä»•äº‹å¸°ã‚Šã®ç–²åŠ´æ„Ÿã€ Plan:ã€Œã‚‚ã—ã€Žç–²ã‚ŒãŸã€ã¨æ„Ÿã˜ãŸã‚‰ã€ã€Žã¨ã‚Šã‚ãˆãšã‚¦ã‚§ã‚¢ã«ç€æ›¿ãˆã‚‹ã€ã€ã¨æ±ºã‚ã¦ãŠãã“ã¨ã§ã€è‡ªå‹•çš„ã«è¡Œå‹•ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚"},{title:"è³‡æ ¼è©¦é¨“ã®å‹‰å¼·",before:"ã‚¹ãƒžãƒ›ã®é€šçŸ¥ãŒæ°—ã«ãªã£ã¦é›†ä¸­åŠ›ãŒé€”åˆ‡ã‚Œã¦ã—ã¾ã†ã€‚",after:"Obs:ã€Œã‚¹ãƒžãƒ›ã‚’è¦‹ã¦ã—ã¾ã†ç™–ã€ Plan:ã€Œã‚‚ã—ã€Žå‹‰å¼·ã‚’å§‹ã‚ã‚‹ã€æ™‚ã¯ã€ã€Žã‚¹ãƒžãƒ›ã‚’åˆ¥ã®éƒ¨å±‹ã«ç½®ãã€ã€ã¨ã„ã†ã‚»ãƒƒãƒˆè¡Œå‹•ã‚’å¾¹åº•ã—ã€é›†ä¸­æ™‚é–“ã‚’ç¢ºä¿ã—ãŸã€‚"}],tips:[{q:"éšœå®³ï¼ˆObstacleï¼‰ã«ã¯ä½•ã‚’æ›¸ã‘ã°ã„ã„ã§ã™ã‹ï¼Ÿ",a:"ã€Œæ™‚é–“ãŒãªã„ã€ã€ŒãŠé‡‘ãŒãªã„ã€ã¨ã„ã£ãŸå¤–éƒ¨è¦å› ã§ã¯ãªãã€ã€Œã¤ã„ãƒ€ãƒ©ãƒ€ãƒ©ã—ã¦ã—ã¾ã†ã€ã€Œå¤±æ•—ã™ã‚‹ã®ãŒæ€–ã„ã€ã¨ã„ã£ãŸã€Žè‡ªåˆ†ã®å†…é¢ã«ã‚ã‚‹æ„Ÿæƒ…ã‚„ç™–ã€ã‚’æŽ¢ã‚Šã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã“ããŒã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«å¯èƒ½ãªçœŸã®éšœå®³ã§ã™ã€‚"},{q:"è¨ˆç”»ï¼ˆPlanï¼‰ãŒã†ã¾ãæ©Ÿèƒ½ã—ã¾ã›ã‚“ã€‚",a:"ã€Œã‚‚ã—ã€œãªã‚‰ã€ã®æ¡ä»¶ï¼ˆãƒˆãƒªã‚¬ãƒ¼ï¼‰ã‚’ã‚‚ã£ã¨å…·ä½“çš„ã«ã—ã¾ã—ã‚‡ã†ã€‚ã€Œç–²ã‚ŒãŸã‚‰ã€ã‚ˆã‚Šã‚‚ã€Œå¸°å®…ã—ã¦ã‚½ãƒ•ã‚¡ã‚’è¦‹ãŸçž¬é–“ã€ã®æ–¹ãŒè„³ã¯åå¿œã—ã‚„ã™ããªã‚Šã¾ã™ã€‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚‚ã€Œé ‘å¼µã‚‹ã€ã§ã¯ãªãã€Œ5åˆ†ã ã‘ã‚„ã‚‹ã€ãªã©ãƒãƒ¼ãƒ‰ãƒ«ã‚’æ¥µé™ã¾ã§ä¸‹ã’ã¦ã¿ã¦ãã ã•ã„ã€‚"}]},{id:"backward",title:"Backward Design (é€†ç®—æ€è€ƒ)",subTitle:"ã‚´ãƒ¼ãƒ«ã‹ã‚‰ç¾åœ¨åœ°ã¸ã®æž¶ã‘æ©‹",color:"purple",icon:"ðŸ—ºï¸",concept:{summary:"ã€Œã‚ã‚ŠãŸã„å§¿ï¼ˆã‚´ãƒ¼ãƒ«ï¼‰ã€ã‹ã‚‰æ™‚é–“ã‚’å·»ãæˆ»ã—ã¦ã€ä»Šã‚„ã‚‹ã¹ãã“ã¨ã‚’æ±ºå®šã™ã‚‹ã€‚",detail:"ç¾åœ¨ã‹ã‚‰ã®ç©ã¿ä¸Šã’ï¼ˆForecastingï¼‰ã§ã¯ãªãã€æœªæ¥ã‹ã‚‰ã®é€†ç®—ï¼ˆBackcastingï¼‰ã‚’è¡Œã†ã“ã¨ã§ã€ç¾çŠ¶ã®å»¶é•·ç·šä¸Šã«ã¯ãªã„é£›èºçš„ãªæˆæžœã‚„ã€ç„¡é§„ã®ãªã„æœ€çŸ­ãƒ«ãƒ¼ãƒˆãŒè¦‹ãˆã¦ãã¾ã™ã€‚é•·æœŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿…é ˆã®è¦–ç‚¹ã§ã™ã€‚"},useCases:[{title:"åŠå¹´å¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆä¸»å‚¬",before:"ã¨ã‚Šã‚ãˆãšä¼šå ´ã ã‘æŠ¼ã•ãˆã¦ã€é›†å®¢ã‚„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ç›´å‰ã«ãªã£ã¦æ…Œã¦ã¦æº–å‚™ã™ã‚‹ã€‚",after:"Goal:ã€Œã‚¤ãƒ™ãƒ³ãƒˆæˆåŠŸã€â†’ 1ãƒ¶æœˆå‰:ã€Œæº€å¸­ã€â†’ 3ãƒ¶æœˆå‰:ã€Œå‘ŠçŸ¥é–‹å§‹ãƒ»LPå®Œæˆã€â†’ ä»Š:ã€Œã‚³ãƒ³ã‚»ãƒ—ãƒˆæ±ºå®šãƒ»ç™»å£‡è€…ã‚ªãƒ•ã‚¡ãƒ¼ã€ã¨ãƒžã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã‚’ç½®ãã€ä»Šæœˆã®å¿…é ˆã‚¿ã‚¹ã‚¯ã‚’æ´—ã„å‡ºã—ãŸã€‚"},{title:"ã‚­ãƒ£ãƒªã‚¢ãƒã‚§ãƒ³ã‚¸",before:"ä»Šã®ä»•äº‹ãŒå«Œã§è»¢è·ã‚µã‚¤ãƒˆã‚’çœºã‚ã‚‹ãŒã€ç‰¹ã«ã‚¹ã‚­ãƒ«ã‚‚ãªãå‹•ã‘ãªã„ã€‚",after:"Goal:ã€Œ3å¹´å¾Œã«ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ç‹¬ç«‹ã€â†’ 2å¹´å¾Œ:ã€Œå‰¯æ¥­æœˆåŽ20ä¸‡ã€â†’ 1å¹´å¾Œ:ã€Œã‚¹ã‚­ãƒ«ç¿’å¾—ãƒ»ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªå®Œæˆã€â†’ ä»Š:ã€Œã‚¹ã‚¯ãƒ¼ãƒ«é¸ã³ãƒ»å­¦ç¿’æ™‚é–“ã®ç¢ºä¿ã€ã¨é€†ç®—ã—ã€å…·ä½“çš„ãªä¸€æ­©ã‚’è¸ã¿å‡ºã—ãŸã€‚"}],tips:[{q:"é ã„æœªæ¥ã™ãŽã¦ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒæ¹§ãã¾ã›ã‚“ã€‚",a:"ç„¡ç†ã«è©³ç´°ã‚’æ±ºã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ã€Œçµ¶å¯¾ã«ã“ã†ãªã£ã¦ã„ãŸã„ã€ã¨ã„ã†çŠ¶æ…‹ï¼ˆKGIï¼‰ã¨æœŸé™ã‚’æ±ºã‚ã€ãã“ã‹ã‚‰ã€Œãã®ç›´å‰ã¯ã©ã†ãªã£ã¦ã„ã‚‹ã¯ãšã‹ï¼Ÿã€ã¨1ã‚¹ãƒ†ãƒƒãƒ—ãšã¤æˆ»ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ç›´è¿‘ã®ãƒžã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã ã‘è©³ç´°ã§ã‚ã‚Œã°OKã§ã™ã€‚"},{q:"è¨ˆç”»é€šã‚Šã«é€²ã¾ãªã„æ™‚ã¯ï¼Ÿ",a:"é€†ç®—æ€è€ƒã§ä½œã£ãŸè¨ˆç”»ã¯ã€Œä»®èª¬ã€ã§ã™ã€‚çŠ¶æ³ãŒå¤‰ã‚ã‚Œã°ãƒªãƒ«ãƒ¼ãƒˆï¼ˆå†è¨ˆç®—ï¼‰ã™ã‚Œã°è‰¯ã„ã®ã§ã™ã€‚é‡è¦ãªã®ã¯ã€Œã‚´ãƒ¼ãƒ«ã‚’è¦‹å¤±ã‚ãªã„ã“ã¨ã€ã€‚ç¾åœ¨åœ°ãŒå¤‰ã‚ã£ã¦ã‚‚ã€ãƒŠãƒ“ãŒç›®çš„åœ°ã¸ã®ãƒ«ãƒ¼ãƒˆã‚’å¼•ãç›´ã™ã‚ˆã†ã«ã€è¨ˆç”»ã‚’ä¿®æ­£ã—ç¶šã‘ã¾ã—ã‚‡ã†ã€‚"}]}],di=[{id:"okr",title:"OKR (Objectives and Key Results)",subTitle:"Ambitious Goals and Measurable Outcomes",color:"blue",icon:"ðŸŽ¯",concept:{summary:"A goal-setting framework for defining and tracking objectives and their outcomes.",detail:'Adopted by companies like Google and Intel. Characterized by "Moonshot" goals where 60-70% achievement is considered success, encouraging leap-forward growth rather than just the status quo.'},useCases:[{title:"Individual Skill Development",before:'Vaguely thinking "I want to improve my tech skills" and reading books without a focus.',after:`O: "Become a lead in team's Rust migration" KR: "Implement one microservice in Rust", "Hold 3 internal study sessions". Learning focus became crystal clear.`},{title:"Side Projects",before:'Wishing to release an app "someday" but continuing development without a deadline.',after:'O: "Release a MVP loved by users" KR: "App store release by March", "Gain 100 initial users", "Achieve 30% weekly active rate". Committed with dates and numbers.'}],tips:[{q:"The goals are too high and I lose motivation.",a:'OKR assumes "no penalty for falling short". Consider 60% a success and value the challenge itself. Check progress weekly (Win sessions) to celebrate small wins.'},{q:"How should I determine KR numbers?",a:'Aim for a line between "Achievable with effort (50%)" and "Impossible without extreme luck (100%)", approx the "70% stretch" line. Avoid unmeasurable descriptors like "Try hard".'}]},{id:"woop",title:"WOOP (Wish, Outcome, Obstacle, Plan)",subTitle:"A Scientific Method for Goal Realization",color:"amber",icon:"âœ¨",concept:{summary:'Mental Contrasting: Contrast your "best future" with "inner obstacles" to engage the brain.',detail:'Instead of just positive thinking, directly face your inner obstacles and prepare "If-Then Plans" in advance to dramatically increase execution rates.'},useCases:[{title:"Daily Exercise Habit",before:'Thinking "I want to lose weight" but skipping it when tired from work.',after:'W: "Run 30 mins daily" O: "Feel lighter and gain confidence" Obs: "Fatigue after work" Plan: "IF I feel tired, THEN at least change into workout clothes." Started acting automatically.'},{title:"Studying for Certifications",before:"Losing focus due to smartphone notifications.",after:'Obs: "Habit of checking phone" Plan: "IF I start studying, THEN place the phone in another room." Secured focused time.'}],tips:[{q:"What should I write for Obstacles?",a:'Avoid external factors like "no time". Look for emotions or habits within yourself, like "procrastinating" or "fear of failure". These are the true controllable obstacles.'},{q:"My Plan doesn't seem to work.",a:'Make the trigger more specific. Instead of "when tired", use "the moment I see the sofa after returning home". Keep the action extremely simple, like "do it for just 5 minutes".'}]},{id:"backward",title:"Backward Design",subTitle:"Bridging the Gap from Goal to Today",color:"purple",icon:"ðŸ—ºï¸",concept:{summary:'Determine what to do now by rewinding time from your "Ideal State (Goal)".',detail:"By using Backcasting (from future to present) instead of Forecasting (from present to future), you find shortcuts and results beyond the status quo. Essential for long-term projects."},useCases:[{title:"Organizing a Large Event",before:"Booking a venue first, then scrambling for speakers and content at the last minute.",after:'Goal: "Successful Event" -> 1mo before: "Tickets Sold out" -> 3mo before: "Start Promotion/LP Ready" -> Now: "Define Concept/Offer Speakers". Identified must-have tasks for this month.'},{title:"Career Change",before:"Disliking current job but just browsing sites without acting due to lack of skills.",after:'Goal: "Freelance in 3 years" -> 2yrs later: "200k/mo from side work" -> 1yr later: "Complete portfolio" -> Now: "Choose a school/Save study time". Started with concrete steps.'}],tips:[{q:"The future feels too distant to imagine.",a:'No need to decide every detail. Start with your KGI and deadline, then ask "What should have happened just before that?". Only the nearest milestones need full detail.'},{q:"What if I can't follow the plan?",a:`The backward plan is a hypothesis. Re-route when situations change. The important thing is "don't lose sight of the goal". Recalculate your route just like a GPS navigator.`}]}],ui=(e="ja")=>e==="ja"?ci:di,gi=M.memo(({framework:e,onClick:t})=>{const{t:s}=S();return r.jsxs("div",{className:"cursor-pointer bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 transition-colors hover:border-purple-400 dark:hover:border-purple-500 group",onClick:()=>t(e),role:"button",tabIndex:0,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&t(e)},children:[r.jsx("div",{className:"text-2xl mb-2",children:e.icon}),r.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white mb-1",children:e.title}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:e.concept.summary}),r.jsxs("div",{className:"mt-3 flex items-center text-xs text-purple-600 dark:text-purple-400 font-medium opacity-70 group-hover:opacity-100 transition-opacity",children:[r.jsx("span",{children:s("wiki.view_details")}),r.jsx(Oe,{className:"w-3 h-3 ml-1 transform transition-transform group-hover:translate-x-0.5"})]})]})}),hi=()=>{const{openModal:e}=le(),{t}=S(),{language:s}=O(),a=ui(s);return r.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-900 overflow-y-auto custom-scrollbar",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 animate-fade-in",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-8 flex items-center",children:[r.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500 mr-3",children:r.jsx(hr,{className:"w-8 h-8 text-blue-500"})}),r.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-gray-300",children:t("sidebar.framework_wiki")})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(n=>r.jsx(gi,{framework:n,onClick:o=>e("wiki-framework",o)},n.id))})]})})},mi={backward:{id:"backward",label:"Backward Design",description:"ã‚´ãƒ¼ãƒ«ã‹ã‚‰é€†ç®—ã—ã¦ã€ç€å®Ÿãªã‚¿ã‚¹ã‚¯ã‚’è¨­è¨ˆã—ã¾ã™ã€‚é•·æœŸçš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æœ€é©ã§ã™ã€‚",steps:[{title:"Goal / KGI",description:"æœ€çµ‚ã‚´ãƒ¼ãƒ«ã®æ—¥ä»˜ã¨çŠ¶æ…‹ï¼ˆKGIï¼‰ã‚’å®šç¾©ã—ã¾ã—ã‚‡ã†ã€‚",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼š2025å¹´3æœˆ31æ—¥ã¾ã§ã«ã€æœˆé–“ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼1ä¸‡äººã‚’é”æˆã™ã‚‹ã€‚",key:"goal_kgi"}]},{title:"Milestone",description:"ã‚´ãƒ¼ãƒ«ã®1ãƒ¶æœˆå‰ã«åˆ°é”ã™ã¹ãçŠ¶æ…‹ã¯ï¼Ÿ",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šã‚³ã‚¢æ©Ÿèƒ½ã®å®Ÿè£…ãŒå®Œäº†ã—ã€ãƒ™ãƒ¼ã‚¿ç‰ˆã‚’100äººã«é…å¸ƒæ¸ˆã¿ã§ã‚ã‚‹ã€‚",key:"milestone_minus_1mo"}]},{title:"First Action",description:"ä»Šã™ãå§‹ã‚ã‚‹ã¹ãæœ€åˆã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ï¼Ÿ",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šç«¶åˆã‚¢ãƒ—ãƒªã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’åˆ†æžã—ã¦æ©Ÿèƒ½ãƒªã‚¹ãƒˆã‚’ä½œã‚‹ã€‚",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"é¡˜æœ›ã¨éšœå®³ã‚’å¯¾æ¯”ã•ã›ã€å®Ÿè¡Œè¨ˆç”»ã‚’è‡ªå‹•åŒ–ã—ã¾ã™ã€‚ç¿’æ…£åŒ–ã‚„å›°é›£ãªç›®æ¨™ã«æœ‰åŠ¹ã§ã™ã€‚",steps:[{title:"Wish (é¡˜æœ›)",description:"é”æˆã—ãŸã„ã“ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿï¼ˆæŒ‘æˆ¦çš„ã ãŒé”æˆå¯èƒ½ãªã‚‚ã®ï¼‰",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šæ¯Žæ—¥30åˆ†ã€è‹±èªžã®å‹‰å¼·ã‚’ã™ã‚‹ã€‚",key:"wish"}]},{title:"Outcome (çµæžœ)",description:"ãã‚ŒãŒé”æˆã§ããŸæ™‚ã®ã€Œæœ€é«˜ã®ãƒ¡ãƒªãƒƒãƒˆã€ã‚„æ„Ÿæƒ…ã‚’è©³ã—ãã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã¦ãã ã•ã„ã€‚",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šå­—å¹•ãªã—ã§æµ·å¤–ãƒ‰ãƒ©ãƒžã‚’æ¥½ã—ã‚ã‚‹ã‚ˆã†ã«ãªã‚Šã€è‡ªä¿¡ãŒã¤ãã€‚",key:"outcome"}]},{title:"Obstacle (éšœå®³)",description:"ãã‚Œã‚’é‚ªé­”ã™ã‚‹ã€ã‚ãªãŸè‡ªèº«ã®ã€Œå†…é¢ã®éšœå®³ã€ï¼ˆæ„Ÿæƒ…ãƒ»ç™–ãƒ»æ€ã„è¾¼ã¿ï¼‰ã¯ä½•ã§ã™ã‹ï¼Ÿ",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šä»•äº‹ã§ç–²ã‚Œã¦å¸°ã£ã¦ãã‚‹ã¨ã€ã¤ã„ã‚¹ãƒžãƒ›ã§SNSã‚’è¦‹ã¦ã—ã¾ã†ã€‚",key:"obstacle"}]},{title:"Plan (è¨ˆç”»)",description:"ã€Œã‚‚ã—ï¼ˆéšœå®³ï¼‰ãŒèµ·ããŸã‚‰ã€ï¼ˆè¡Œå‹•ï¼‰ã™ã‚‹ã€ã¨ã„ã†å½¢ã§è¨ˆç”»ã‚’ç«‹ã¦ã¾ã—ã‚‡ã†ã€‚",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šã‚‚ã—ã€Œç–²ã‚Œã¦ã‚½ãƒ•ã‚¡ã«åº§ã‚Šãã†ã€ã«ãªã£ãŸã‚‰ã€ã€Œã™ãã«ãƒ†ã‚­ã‚¹ãƒˆã‚’é–‹ãã€ã¨ã™ã‚‹ã€‚",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"é‡Žå¿ƒçš„ãªç›®æ¨™(O)ã¨ã€æ¸¬å®šå¯èƒ½ãªæˆæžœ(KR)ã‚’çµ„ã¿åˆã‚ã›ã¾ã™ã€‚çµ„ç¹”ã‚„ãƒãƒ¼ãƒ ã€é«˜ã„æˆé•·ã‚’ç›®æŒ‡ã™å€‹äººã«ã€‚",steps:[{title:"Objective",description:"å®šæ€§çš„ã§ãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹ã‚ˆã†ãªç›®æ¨™ã‚’1ã¤æ±ºã‚ã¦ãã ã•ã„ã€‚",inputs:[{type:"textarea",placeholder:"ä¾‹ï¼šä¸–ç•Œä¸­ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«æ„›ã•ã‚Œã‚‹é–‹ç™ºãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚‹ï¼",key:"objective"}]},{title:"Key Results",description:"ç›®æ¨™é”æˆã‚’æ¸¬ã‚‹ãŸã‚ã®ã€3ã¤ã®å…·ä½“çš„ãªæ•°å­—ï¼ˆæŒ‡æ¨™ï¼‰ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚",inputs:[{type:"text",placeholder:"KR 1 (ä¾‹: GitHubã‚¹ã‚¿ãƒ¼æ•° 1,000åˆ°é”)",key:"kr_1"},{type:"text",placeholder:"KR 2 (ä¾‹: é€±é–“ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•° 500å›ž)",key:"kr_2"},{type:"text",placeholder:"KR 3 (ä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¶™ç¶šçŽ‡ 40%ç¶­æŒ)",key:"kr_3"}]}]}},pi={backward:{id:"backward",label:"Backward Design",description:"Design solid tasks by rewinding from your goal. Best for long-term projects.",steps:[{title:"Goal / KGI",description:"Define the date and state (KGI) of your final goal.",inputs:[{type:"textarea",placeholder:"e.g., Reach 10,000 monthly active users by March 31, 2025.",key:"goal_kgi"}]},{title:"Milestone",description:"What should be the state one month before the goal?",inputs:[{type:"textarea",placeholder:"e.g., Core features implemented and beta distributed to 100 users.",key:"milestone_minus_1mo"}]},{title:"First Action",description:"What is the very first action you should start right now?",inputs:[{type:"textarea",placeholder:"e.g., Analyze competitor reviews and create a feature list.",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"Contrast wishes and obstacles to automate your execution plan. Effective for habits and tough goals.",steps:[{title:"Wish",description:"What do you want to achieve? (Challenging but achievable)",inputs:[{type:"textarea",placeholder:"e.g., Study English for 30 minutes every day.",key:"wish"}]},{title:"Outcome",description:`Imagine the "best benefit" or feeling when it's achieved.`,inputs:[{type:"textarea",placeholder:"e.g., Enjoy foreign dramas without subtitles and gain confidence.",key:"outcome"}]},{title:"Obstacle",description:'What is your "inner obstacle" (emotion, habit, belief) that gets in the way?',inputs:[{type:"textarea",placeholder:"e.g., Checking SNS on the phone when returning home tired from work.",key:"obstacle"}]},{title:"Plan",description:'Make a plan in the form of "IF (obstacle) happens, THEN (action)".',inputs:[{type:"textarea",placeholder:"e.g., IF I am about to sit on the sofa tired, THEN I will open the textbook immediately.",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"Combine ambitious objectives (O) with measurable key results (KR). For organizations, teams, or high-growth individuals.",steps:[{title:"Objective",description:"Decide on one qualitative and exciting objective.",inputs:[{type:"textarea",placeholder:"e.g., Build a development tool loved by engineers worldwide!",key:"objective"}]},{title:"Key Results",description:"Set three specific metrics (indices) to measure goal achievement.",inputs:[{type:"text",placeholder:"KR 1 (e.g., Reach 1,000 GitHub stars)",key:"kr_1"},{type:"text",placeholder:"KR 2 (e.g., 500 downloads per week)",key:"kr_2"},{type:"text",placeholder:"KR 3 (e.g., Maintain 40% user retention rate)",key:"kr_3"}]}]}},it=(e="ja")=>e==="ja"?mi:pi,Rr=w.forwardRef(({className:e,label:t,error:s,containerClassName:a,id:n,...o},i)=>{const l=w.useId(),c=n||l;return r.jsxs("div",{className:I("flex flex-col gap-1.5 h-full",a),children:[t&&r.jsx("label",{htmlFor:c,className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t}),r.jsx("textarea",{ref:i,id:c,className:I("w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border rounded-xl px-4 py-3 outline-none transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600 resize-none","focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",s?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600",e),"aria-invalid":!!s,"aria-describedby":s?`${c}-error`:void 0,...o}),s&&r.jsx("p",{id:`${c}-error`,className:"text-xs text-red-500 font-medium animate-fade-in-down",children:s})]})});Rr.displayName="Textarea";const xi=({mode:e,currentStep:t})=>{const{language:s}=O(),a=it(s)[e],n=a.steps.length;return r.jsx("div",{className:"flex items-center justify-between mb-8 max-w-2xl mx-auto",children:r.jsx("div",{className:"flex items-center space-x-1 mx-auto w-full justify-center",children:a.steps.map((o,i)=>{const l=i+1,c=t>l,d=t===l,u=t<l;return r.jsxs(M.Fragment,{children:[r.jsxs("div",{className:"flex flex-col items-center relative z-10 w-16",children:[r.jsx("div",{className:I("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold",d&&"bg-blue-600 text-white ring-4 ring-blue-100 dark:ring-blue-900",c&&"bg-green-500 text-white",u&&"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:c?"âœ“":l}),r.jsx("div",{className:I("text-[10px] mt-1 font-medium text-center w-20 truncate",d?"text-blue-600 dark:text-blue-400":"text-gray-400"),children:o.title})]}),i<n-1&&r.jsx("div",{className:I("h-1 flex-1 mx-[-10px] mt-[-14px] z-0 transition-all duration-500 rounded-full",t>l?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},i)})})})},fi=({mode:e,step:t,onBack:s,onNext:a,onFinish:n})=>{const{t:o}=S(),{language:i}=O(),l=it(i)[e],c=t-1,d=l.steps[c],u=l.steps.length,[g,m]=w.useState({}),x=(h,b)=>{m(N=>({...N,[h]:b}))},f=()=>{const h=(d.inputs??[]).reduce((b,N,p)=>{const k=g[p]||"";return N.key&&(b[N.key]=k),b},{});t<u?a(h):n(h)};return r.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:[l.label," Mode"]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-8 min-h-[500px] flex flex-col",children:[r.jsx(xi,{mode:e,currentStep:t}),r.jsxs("div",{className:"flex-1 animate-fade-in",children:[r.jsxs("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-100",children:["Q",t,". ",d.title]}),r.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:d.description}),r.jsx("div",{className:"mb-8 space-y-4",children:(d.inputs??[]).map((h,b)=>r.jsx("div",{children:h.type==="textarea"?r.jsx(Rr,{name:h.key||`textarea-${b}`,id:h.key||`textarea-${b}`,className:"text-base",rows:5,placeholder:h.placeholder,value:g[b]||"",onChange:N=>x(b,N.target.value),"aria-label":h.placeholder}):r.jsx(Ot,{name:h.key||`input-${b}`,id:h.key||`input-${b}`,className:"text-base",placeholder:h.placeholder,value:g[b]||"",onChange:N=>x(b,N.target.value),"aria-label":h.placeholder})},h.key||b))})]}),r.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[r.jsx(ge,{onClick:s,variant:"ghost",className:"text-gray-600 dark:text-gray-400 font-medium",children:o("wizard.back")}),t<u?r.jsx(ge,{onClick:f,variant:"primary",className:"bg-blue-600 hover:bg-blue-700 shadow-md",rightIcon:r.jsx(Oe,{className:"w-4 h-4 ml-2"}),children:o("wizard.next")}):r.jsx(ge,{onClick:f,variant:"primary",className:"bg-green-600 hover:bg-green-700 shadow-lg transform hover:scale-105",leftIcon:r.jsx(qe,{className:"w-5 h-5 mr-2"}),children:o("wizard.finish")})]})]})]})},bi=({currentMode:e,onModeChange:t,onStart:s})=>{const{t:a}=S(),{language:n}=O(),o=it(n),i=o[e],l=(a(`wizard.features.${e}`)||"").split(",");return r.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-full max-h-[700px] flex flex-col py-6",children:[r.jsx("div",{className:"mb-4 flex-shrink-0",children:r.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[r.jsx(gr,{className:"w-3 h-3 mr-1.5"}),r.jsx("span",{className:"font-medium",children:a("sidebar.target_wizard")}),r.jsx(Oe,{className:"w-3 h-3 mx-1.5"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:a("wizard.select_method")})]})}),r.jsxs("div",{className:"mb-6 flex-shrink-0",children:[r.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:a("wizard.select_framework")}),r.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:Object.keys(o).map(c=>r.jsx("button",{onClick:()=>t(c),className:I("flex-1 py-2 text-xs font-bold rounded-lg transition-all",e===c?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:o[c].label},c))})]}),r.jsx("div",{className:"flex-1 mb-6 min-h-0",children:r.jsx("div",{className:"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden shadow-xl",children:r.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mb-4 shadow-lg flex-shrink-0",children:r.jsx(qe,{className:"w-8 h-8 text-white"})}),r.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 text-xl",children:i.label}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-2xl leading-relaxed",children:i.description}),r.jsx("div",{className:"mt-6 flex flex-wrap gap-2 justify-center",children:l.map(c=>r.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300 shadow-sm",children:c.trim()},c))})]})})}),r.jsx("div",{className:"flex justify-center pb-4 flex-shrink-0",children:r.jsx(ge,{variant:"premium",size:"lg",onClick:s,className:"shadow-xl",rightIcon:r.jsx(Oe,{className:"w-4 h-4"}),children:a("wizard.start_mode")})})]})},yi=()=>{const[e,t]=w.useState("backward"),[s,a]=w.useState(0),[n,o]=w.useState({}),{setView:i,viewData:l}=te(),{workspaceId:c}=Fe(),{t:d}=S(),{language:u}=O(),g=it(u);w.useEffect(()=>{l&&l.mode&&(t(l.mode),a(0))},[l]);const m=h=>{o(b=>({...b,...h})),a(b=>b+1)},x=async h=>{const b={...n,...h};if(!c){D.error(d("wizard.alert_no_workspace"));return}try{await so(c,{mode:e,data:b}),D.success(d("wizard.alert_create_success",{label:g[e].label})),a(0),o({}),i("target-dashboard")}catch(N){console.error("Failed to save wizard target:",N),D.error(d("wizard.alert_save_fail"))}},f=()=>{a(h=>Math.max(0,h-1))};return s===0?r.jsx(bi,{currentMode:e,onModeChange:t,onStart:()=>a(1)}):r.jsx(fi,{mode:e,step:s,onBack:f,onNext:m,onFinish:x})},ki=(e,t)=>{const s=Xr(zt(Jr,{activationConstraint:{distance:5}}),zt(Yr,{activationConstraint:{delay:v.DND.TOUCH_DELAY,tolerance:5}})),{t:a}=S(),n=w.useRef(e),o=w.useCallback(()=>{n.current=e},[e]),i=w.useCallback(async l=>{var h,b,N,p,k;const{active:c,over:d}=l;if(!d)return;const u=String(c.id),g=String(d.id);let m=null;if(c.data.current&&c.data.current.type==="task"&&(m=((h=c.data.current.task)==null?void 0:h.id)||u.replace(v.DND.PREFIX_TASK,"")),m){const C=d.data.current,T=C==null?void 0:C.type,R=C==null?void 0:C.value;if(T&&wi(T)){const P={};if(T===v.DND.TYPE_PROJECT)P.projectId=R;else if(T===v.DND.TYPE_INBOX)P.projectId=null;else if(T===v.DND.TYPE_TIMEBLOCK)P.timeBlockId=R==="unassigned"?null:R;else if(T===v.DND.TYPE_LABEL){const se=(b=c.data.current)==null?void 0:b.task,ae=(se==null?void 0:se.labelIds)??[];R&&(ae.includes(R)?P.labelIds=ae.filter(fe=>fe!==R):P.labelIds=[...ae,R])}if(Object.keys(P).length>0){try{await Dr(m,P)}catch(se){console.error("Failed to update task via dnd",se),D.error(a("msg.dnd.reorderFailed")||a("error"))}return}}if(u!==g&&g.startsWith(v.DND.PREFIX_TASK)){const P=g.replace(v.DND.PREFIX_TASK,"");(N=t==null?void 0:t.onTasksReorder)==null||N.call(t,m,P);return}}if(u!==g&&u.startsWith(v.DND.PREFIX_PROJECT)&&g.startsWith(v.DND.PREFIX_PROJECT)){const C=n.current,T=u.replace(v.DND.PREFIX_PROJECT,""),R=g.replace(v.DND.PREFIX_PROJECT,""),P=C.findIndex(ae=>ae.id===T),se=C.findIndex(ae=>ae.id===R);if(P!==-1&&se!==-1){const ae=gt(C,P,se);(p=t==null?void 0:t.onOptimisticReorder)==null||p.call(t,ae);try{await Hn(ae.map(fe=>fe.id))}catch(fe){console.error("Failed to update project order",fe),D.error(a("msg.dnd.reorderFailed")||a("error")),(k=t==null?void 0:t.onRevertReorder)==null||k.call(t,C)}}return}const{sidebarSections:x,setSidebarSections:f}=ze.getState();if(u!==g&&x.includes(u)&&x.includes(g)){const C=x.indexOf(u),T=x.indexOf(g);C!==-1&&T!==-1&&f(gt(x,C,T));return}},[e,t,a]);return{sensors:s,handleDragEnd:i,handleDragStart:o}};function wi(e){return[v.DND.TYPE_PROJECT,v.DND.TYPE_INBOX,v.DND.TYPE_TIMEBLOCK,v.DND.TYPE_LABEL].includes(e)}const ji=()=>{const{entities:e,loading:t}=Le({entityName:"labels",subscribeFn:(s,a)=>Dn(s,a),getCacheFn:Cn,isInitializedFn:Tn});return{labels:e,loading:t}},vi=()=>{const{fontEn:e,fontJp:t,fontSize:s,density:a,themeMode:n}=O(),{setSidebarDensity:o}=ze();w.useEffect(()=>{const i=document.documentElement,l=document.body;n==="dark"?i.classList.add("dark"):n==="light"?i.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?i.classList.add("dark"):i.classList.remove("dark"),i.style.setProperty("--font-en",e),i.style.setProperty("--font-jp",t);const c=["font-app-sm","font-app-base","font-app-md","font-app-lg","font-app-xl"];l.classList.remove(...c),l.classList.add(`font-app-${s}`);const d=["app-density-compact","app-density-normal","app-density-comfortable","app-density-spacious"];l.classList.remove(...d),l.classList.add(`app-density-${a}`),o(a);const u=window.matchMedia("(prefers-color-scheme: dark)"),g=()=>{n==="system"&&(u.matches?i.classList.add("dark"):i.classList.remove("dark"))};return u.addEventListener("change",g),()=>u.removeEventListener("change",g)},[n,e,t,s,a,o])};function Qt(e){const t=String(e);return t.startsWith("project:")||t==="inbox"||t.startsWith("timeblock:")||t.startsWith("duration:")||t.startsWith("label:")}const Ni=e=>{const s=Zr(e).filter(n=>Qt(n.id));if(s.length>0)return s;const a=e.droppableContainers.filter(n=>Qt(n.id));if(a.length>0){const n={...e,droppableContainers:a},o=es(n);if(o.length>0)return o}return ts(e)},_i=()=>{vi();const{filterType:e,targetId:t,query:s}=ee(),{currentView:a,setView:n}=te(),{setFilter:o}=ee(),{projects:i,setProjectsOverride:l}=Rt(),{labels:c}=ji(),{t:d}=S(),{user:u,loading:g}=Et(),m=w.useCallback(p=>{const k=p.target,C=["INPUT","TEXTAREA"].includes(k.tagName)||k.closest("[contenteditable]"),T=document.querySelector('[role="dialog"]');p.key==="/"&&!C&&!T&&(p.preventDefault(),o("search"),n("search"))},[o,n]);M.useEffect(()=>(document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}),[m]);const{onTasksReorder:x}=Mr(),{sensors:f,handleDragEnd:h,handleDragStart:b}=ki(i,{onOptimisticReorder:l,onRevertReorder:l,onTasksReorder:x||void 0}),N=w.useMemo(()=>{var p,k;if(a==="wizard")return d("sidebar.target_wizard");if(a==="target-dashboard")return d("sidebar.target_dashboard");if(a==="wiki")return d("sidebar.framework_wiki");if(a==="search")return s?d("search_view.results_for",{query:s}):d("search");if(e==="project")return((p=i.find(C=>C.id===t))==null?void 0:p.name)||d("project");if(e==="label")return((k=c.find(C=>C.id===t))==null?void 0:k.name)||d("label");if(e==="search")return s?d("search_view.results_for",{query:s}):d("search");switch(e){case"inbox":return d("inbox");case"today":return d("today");case"upcoming":return d("upcoming");default:return"TaskMg"}},[a,s,e,t,i,c,d]);return g?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"èª­ã¿è¾¼ã¿ä¸­..."})]})}):u?r.jsxs(Qr,{sensors:f,collisionDetection:Ni,onDragEnd:h,onDragStart:b,children:[r.jsx(qs,{}),r.jsx(Ba,{}),r.jsx(Da,{sidebarContent:r.jsx(Yo,{}),title:N,children:a==="wizard"?r.jsx(yi,{}):a==="target-dashboard"?r.jsx(li,{}):a==="wiki"?r.jsx(hi,{}):a==="search"?r.jsx(ri,{}):a==="dashboard"?r.jsx(ti,{}):r.jsx(Lr,{})})]}):r.jsx(Ws,{})};class Ii extends w.Component{constructor(s){super(s);ne(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){va(s,a.componentStack??void 0)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const s=O.getState().language,{t:a}=Me(s);return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:a("error_boundary.title")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:a("error_boundary.description")}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:a("error_boundary.retry")}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:a("error_boundary.reload")})]}),!1]})})}return this.props.children}}const Ci=new ks({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1,retry:!1}}});ie(()=>Promise.resolve().then(()=>Di),void 0);ja();hs();const Pr=document.getElementById("app");if(!Pr)throw new Error("Failed to find the root element");const Ti=r.jsx(Ii,{children:r.jsx(Hr,{client:Ci,children:r.jsx(_i,{})})});Vr.createRoot(Pr).render(Ti);const Di=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{Pt as $,ot as A,ge as B,Us as C,el as D,nl as E,al as F,St as G,zi as H,Ot as I,qi as J,Gi as K,Ui as L,Ki as M,Vi as N,Xi as O,Hi as P,Yi as Q,B as R,sl as S,hl as T,v as U,Dr as V,po as W,Oi as X,Gs as Y,tl as Z,rl as _,le as a,$o as a0,cr as a1,Pi as a2,So as a3,ml as a4,A as a5,_ as a6,j as a7,qe as a8,Ee as a9,Et as aa,$i as ab,Wi as ac,D as ad,Ge as ae,ol as af,il as ag,Fe as b,cl as c,ll as d,dl as e,I as f,De as g,tt as h,gl as i,ul as j,Vn as k,Bi as l,fa as m,Qi as n,Zi as o,Ji as p,Ht as q,ui as r,ya as s,te as t,S as u,Ys as v,Oe as w,gr as x,dr as y,Rt as z};
