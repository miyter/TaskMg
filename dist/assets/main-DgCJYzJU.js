var Jv=t=>{throw TypeError(t)};var hp=(t,e,n)=>e.has(t)||Jv("Cannot "+n);var Z=(t,e,n)=>(hp(t,e,"read from private field"),n?n.call(t):e.get(t)),We=(t,e,n)=>e.has(t)?Jv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ne=(t,e,n,r)=>(hp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),_n=(t,e,n)=>(hp(t,e,"access private method"),n);var ud=(t,e,n,r)=>({set _(s){Ne(t,e,s,n)},get _(){return Z(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Ow(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fp={exports:{}},Gl={},pp={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function Ek(){if(Yv)return $e;Yv=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,N={};function M(F,Q,de){this.props=F,this.context=Q,this.refs=N,this.updater=de||b}M.prototype.isReactComponent={},M.prototype.setState=function(F,Q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Q,"setState")},M.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function J(){}J.prototype=M.prototype;function H(F,Q,de){this.props=F,this.context=Q,this.refs=N,this.updater=de||b}var K=H.prototype=new J;K.constructor=H,z(K,M.prototype),K.isPureReactComponent=!0;var X=Array.isArray,Y=Object.prototype.hasOwnProperty,ae={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(F,Q,de){var Ee,xe={},Ce=null,Ie=null;if(Q!=null)for(Ee in Q.ref!==void 0&&(Ie=Q.ref),Q.key!==void 0&&(Ce=""+Q.key),Q)Y.call(Q,Ee)&&!C.hasOwnProperty(Ee)&&(xe[Ee]=Q[Ee]);var Ve=arguments.length-2;if(Ve===1)xe.children=de;else if(1<Ve){for(var Fe=Array(Ve),be=0;be<Ve;be++)Fe[be]=arguments[be+2];xe.children=Fe}if(F&&F.defaultProps)for(Ee in Ve=F.defaultProps,Ve)xe[Ee]===void 0&&(xe[Ee]=Ve[Ee]);return{$$typeof:t,type:F,key:Ce,ref:Ie,props:xe,_owner:ae.current}}function k(F,Q){return{$$typeof:t,type:F.type,key:Q,ref:F.ref,props:F.props,_owner:F._owner}}function P(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function x(F){var Q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(de){return Q[de]})}var L=/\/+/g;function R(F,Q){return typeof F=="object"&&F!==null&&F.key!=null?x(""+F.key):Q.toString(36)}function Ue(F,Q,de,Ee,xe){var Ce=typeof F;(Ce==="undefined"||Ce==="boolean")&&(F=null);var Ie=!1;if(F===null)Ie=!0;else switch(Ce){case"string":case"number":Ie=!0;break;case"object":switch(F.$$typeof){case t:case e:Ie=!0}}if(Ie)return Ie=F,xe=xe(Ie),F=Ee===""?"."+R(Ie,0):Ee,X(xe)?(de="",F!=null&&(de=F.replace(L,"$&/")+"/"),Ue(xe,Q,de,"",function(be){return be})):xe!=null&&(P(xe)&&(xe=k(xe,de+(!xe.key||Ie&&Ie.key===xe.key?"":(""+xe.key).replace(L,"$&/")+"/")+F)),Q.push(xe)),1;if(Ie=0,Ee=Ee===""?".":Ee+":",X(F))for(var Ve=0;Ve<F.length;Ve++){Ce=F[Ve];var Fe=Ee+R(Ce,Ve);Ie+=Ue(Ce,Q,de,Fe,xe)}else if(Fe=S(F),typeof Fe=="function")for(F=Fe.call(F),Ve=0;!(Ce=F.next()).done;)Ce=Ce.value,Fe=Ee+R(Ce,Ve++),Ie+=Ue(Ce,Q,de,Fe,xe);else if(Ce==="object")throw Q=String(F),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Ie}function et(F,Q,de){if(F==null)return F;var Ee=[],xe=0;return Ue(F,Ee,"","",function(Ce){return Q.call(de,Ce,xe++)}),Ee}function Ze(F){if(F._status===-1){var Q=F._result;Q=Q(),Q.then(function(de){(F._status===0||F._status===-1)&&(F._status=1,F._result=de)},function(de){(F._status===0||F._status===-1)&&(F._status=2,F._result=de)}),F._status===-1&&(F._status=0,F._result=Q)}if(F._status===1)return F._result.default;throw F._result}var ne={current:null},W={transition:null},he={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:W,ReactCurrentOwner:ae};function ue(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:et,forEach:function(F,Q,de){et(F,function(){Q.apply(this,arguments)},de)},count:function(F){var Q=0;return et(F,function(){Q++}),Q},toArray:function(F){return et(F,function(Q){return Q})||[]},only:function(F){if(!P(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},$e.Component=M,$e.Fragment=n,$e.Profiler=s,$e.PureComponent=H,$e.StrictMode=r,$e.Suspense=f,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,$e.act=ue,$e.cloneElement=function(F,Q,de){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ee=z({},F.props),xe=F.key,Ce=F.ref,Ie=F._owner;if(Q!=null){if(Q.ref!==void 0&&(Ce=Q.ref,Ie=ae.current),Q.key!==void 0&&(xe=""+Q.key),F.type&&F.type.defaultProps)var Ve=F.type.defaultProps;for(Fe in Q)Y.call(Q,Fe)&&!C.hasOwnProperty(Fe)&&(Ee[Fe]=Q[Fe]===void 0&&Ve!==void 0?Ve[Fe]:Q[Fe])}var Fe=arguments.length-2;if(Fe===1)Ee.children=de;else if(1<Fe){Ve=Array(Fe);for(var be=0;be<Fe;be++)Ve[be]=arguments[be+2];Ee.children=Ve}return{$$typeof:t,type:F.type,key:xe,ref:Ce,props:Ee,_owner:Ie}},$e.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},$e.createElement=T,$e.createFactory=function(F){var Q=T.bind(null,F);return Q.type=F,Q},$e.createRef=function(){return{current:null}},$e.forwardRef=function(F){return{$$typeof:h,render:F}},$e.isValidElement=P,$e.lazy=function(F){return{$$typeof:v,_payload:{_status:-1,_result:F},_init:Ze}},$e.memo=function(F,Q){return{$$typeof:m,type:F,compare:Q===void 0?null:Q}},$e.startTransition=function(F){var Q=W.transition;W.transition={};try{F()}finally{W.transition=Q}},$e.unstable_act=ue,$e.useCallback=function(F,Q){return ne.current.useCallback(F,Q)},$e.useContext=function(F){return ne.current.useContext(F)},$e.useDebugValue=function(){},$e.useDeferredValue=function(F){return ne.current.useDeferredValue(F)},$e.useEffect=function(F,Q){return ne.current.useEffect(F,Q)},$e.useId=function(){return ne.current.useId()},$e.useImperativeHandle=function(F,Q,de){return ne.current.useImperativeHandle(F,Q,de)},$e.useInsertionEffect=function(F,Q){return ne.current.useInsertionEffect(F,Q)},$e.useLayoutEffect=function(F,Q){return ne.current.useLayoutEffect(F,Q)},$e.useMemo=function(F,Q){return ne.current.useMemo(F,Q)},$e.useReducer=function(F,Q,de){return ne.current.useReducer(F,Q,de)},$e.useRef=function(F){return ne.current.useRef(F)},$e.useState=function(F){return ne.current.useState(F)},$e.useSyncExternalStore=function(F,Q,de){return ne.current.useSyncExternalStore(F,Q,de)},$e.useTransition=function(){return ne.current.useTransition()},$e.version="18.3.1",$e}var Xv;function Im(){return Xv||(Xv=1,pp.exports=Ek()),pp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function Tk(){if(e_)return Gl;e_=1;var t=Im(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,m){var v,E={},S=null,b=null;m!==void 0&&(S=""+m),f.key!==void 0&&(S=""+f.key),f.ref!==void 0&&(b=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(E[v]=f[v]);if(h&&h.defaultProps)for(v in f=h.defaultProps,f)E[v]===void 0&&(E[v]=f[v]);return{$$typeof:e,type:h,key:S,ref:b,props:E,_owner:s.current}}return Gl.Fragment=n,Gl.jsx=u,Gl.jsxs=u,Gl}var t_;function Ik(){return t_||(t_=1,fp.exports=Tk()),fp.exports}var O=Ik(),ah=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Sk={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ws,Tm,kw,kk=(kw=class{constructor(){We(this,ws,Sk);We(this,Tm,!1)}setTimeoutProvider(t){Ne(this,ws,t)}setTimeout(t,e){return Z(this,ws).setTimeout(t,e)}clearTimeout(t){Z(this,ws).clearTimeout(t)}setInterval(t,e){return Z(this,ws).setInterval(t,e)}clearInterval(t){Z(this,ws).clearInterval(t)}},ws=new WeakMap,Tm=new WeakMap,kw),Vp=new kk;function bk(t){setTimeout(t,0)}var lh=typeof window>"u"||"Deno"in globalThis;function Lr(){}function Ak(t,e){return typeof t=="function"?t(e):t}function Rk(t){return typeof t=="number"&&t>=0&&t!==1/0}function Ck(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Fp(t,e){return typeof t=="function"?t(e):t}function xk(t,e){return typeof t=="function"?t(e):t}function n_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:u,stale:h}=t;if(u){if(r){if(e.queryHash!==Sm(u,e.options))return!1}else if(!du(e.queryKey,u))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||s&&s!==e.state.fetchStatus||a&&!a(e))}function r_(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(cu(e.options.mutationKey)!==cu(a))return!1}else if(!du(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Sm(t,e){return((e==null?void 0:e.queryKeyHashFn)||cu)(t)}function cu(t){return JSON.stringify(t,(e,n)=>zp(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function du(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>du(t[n],e[n])):!1}var Pk=Object.prototype.hasOwnProperty;function Mw(t,e){if(t===e)return t;const n=i_(t)&&i_(e);if(!n&&!(zp(t)&&zp(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),u=a.length,h=n?new Array(u):{};let f=0;for(let m=0;m<u;m++){const v=n?m:a[m],E=t[v],S=e[v];if(E===S){h[v]=E,(n?m<s:Pk.call(t,v))&&f++;continue}if(E===null||S===null||typeof E!="object"||typeof S!="object"){h[v]=S;continue}const b=Mw(E,S);h[v]=b,b===E&&f++}return s===u&&f===s?t:h}function i_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function zp(t){if(!s_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!s_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function s_(t){return Object.prototype.toString.call(t)==="[object Object]"}function Nk(t){return new Promise(e=>{Vp.setTimeout(e,t)})}function Dk(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Mw(t,e):e}function Ok(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Mk(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var km=Symbol();function Lw(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===km?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Lk(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var yo,Es,La,bw,Vk=(bw=class extends ah{constructor(){super();We(this,yo);We(this,Es);We(this,La);Ne(this,La,e=>{if(!lh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Z(this,Es)||this.setEventListener(Z(this,La))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,Es))==null||e.call(this),Ne(this,Es,void 0))}setEventListener(e){var n;Ne(this,La,e),(n=Z(this,Es))==null||n.call(this),Ne(this,Es,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Z(this,yo)!==e&&(Ne(this,yo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Z(this,yo)=="boolean"?Z(this,yo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},yo=new WeakMap,Es=new WeakMap,La=new WeakMap,bw),Vw=new Vk;function Fk(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var zk=bk;function jk(){let t=[],e=0,n=h=>{h()},r=h=>{h()},s=zk;const a=h=>{e?t.push(h):s(()=>{n(h)})},u=()=>{const h=t;t=[],h.length&&s(()=>{r(()=>{h.forEach(f=>{n(f)})})})};return{batch:h=>{let f;e++;try{f=h()}finally{e--,e||u()}return f},batchCalls:h=>(...f)=>{a(()=>{h(...f)})},schedule:a,setNotifyFunction:h=>{n=h},setBatchNotifyFunction:h=>{r=h},setScheduler:h=>{s=h}}}var Dn=jk(),Va,Ts,Fa,Aw,Uk=(Aw=class extends ah{constructor(){super();We(this,Va,!0);We(this,Ts);We(this,Fa);Ne(this,Fa,e=>{if(!lh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Z(this,Ts)||this.setEventListener(Z(this,Fa))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,Ts))==null||e.call(this),Ne(this,Ts,void 0))}setEventListener(e){var n;Ne(this,Fa,e),(n=Z(this,Ts))==null||n.call(this),Ne(this,Ts,e(this.setOnline.bind(this)))}setOnline(e){Z(this,Va)!==e&&(Ne(this,Va,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Z(this,Va)}},Va=new WeakMap,Ts=new WeakMap,Fa=new WeakMap,Aw),Vd=new Uk;function $k(t){return Math.min(1e3*2**t,3e4)}function Fw(t){return(t??"online")==="online"?Vd.isOnline():!0}var jp=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function zw(t){let e=!1,n=0,r;const s=Fk(),a=()=>s.status!=="pending",u=N=>{var M;if(!a()){const J=new jp(N);S(J),(M=t.onCancel)==null||M.call(t,J)}},h=()=>{e=!0},f=()=>{e=!1},m=()=>Vw.isFocused()&&(t.networkMode==="always"||Vd.isOnline())&&t.canRun(),v=()=>Fw(t.networkMode)&&t.canRun(),E=N=>{a()||(r==null||r(),s.resolve(N))},S=N=>{a()||(r==null||r(),s.reject(N))},b=()=>new Promise(N=>{var M;r=J=>{(a()||m())&&N(J)},(M=t.onPause)==null||M.call(t)}).then(()=>{var N;r=void 0,a()||(N=t.onContinue)==null||N.call(t)}),z=()=>{if(a())return;let N;const M=n===0?t.initialPromise:void 0;try{N=M??t.fn()}catch(J){N=Promise.reject(J)}Promise.resolve(N).then(E).catch(J=>{var ae;if(a())return;const H=t.retry??(lh?0:3),K=t.retryDelay??$k,X=typeof K=="function"?K(n,J):K,Y=H===!0||typeof H=="number"&&n<H||typeof H=="function"&&H(n,J);if(e||!Y){S(J);return}n++,(ae=t.onFail)==null||ae.call(t,n,J),Nk(X).then(()=>m()?void 0:b()).then(()=>{e?S(J):z()})})};return{promise:s,status:()=>s.status,cancel:u,continue:()=>(r==null||r(),s),cancelRetry:h,continueRetry:f,canStart:v,start:()=>(v()?z():b().then(z),s)}}var vo,Rw,jw=(Rw=class{constructor(){We(this,vo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rk(this.gcTime)&&Ne(this,vo,Vp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(lh?1/0:300*1e3))}clearGcTimeout(){Z(this,vo)&&(Vp.clearTimeout(Z(this,vo)),Ne(this,vo,void 0))}},vo=new WeakMap,Rw),_o,za,yr,wo,Yt,Cu,Eo,Vr,Ri,Cw,Bk=(Cw=class extends jw{constructor(n){super();We(this,Vr);We(this,_o);We(this,za);We(this,yr);We(this,wo);We(this,Yt);We(this,Cu);We(this,Eo);Ne(this,Eo,!1),Ne(this,Cu,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ne(this,wo,n.client),Ne(this,yr,Z(this,wo).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ne(this,_o,a_(this.options)),this.state=n.state??Z(this,_o),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Z(this,Yt))==null?void 0:n.promise}setOptions(n){if(this.options={...Z(this,Cu),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=a_(this.options);r.data!==void 0&&(this.setState(o_(r.data,r.dataUpdatedAt)),Ne(this,_o,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Z(this,yr).remove(this)}setData(n,r){const s=Dk(this.state.data,n,this.options);return _n(this,Vr,Ri).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){_n(this,Vr,Ri).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=Z(this,Yt))==null?void 0:s.promise;return(a=Z(this,Yt))==null||a.cancel(n),r?r.then(Lr).catch(Lr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Z(this,_o))}isActive(){return this.observers.some(n=>xk(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===km||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Fp(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Ck(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Z(this,Yt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Z(this,Yt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Z(this,yr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Z(this,Yt)&&(Z(this,Eo)?Z(this,Yt).cancel({revert:!0}):Z(this,Yt).cancelRetry()),this.scheduleGc()),Z(this,yr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_n(this,Vr,Ri).call(this,{type:"invalidate"})}async fetch(n,r){var m,v,E,S,b,z,N,M,J,H,K,X;if(this.state.fetchStatus!=="idle"&&((m=Z(this,Yt))==null?void 0:m.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Z(this,Yt))return Z(this,Yt).continueRetry(),Z(this,Yt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const Y=this.observers.find(ae=>ae.options.queryFn);Y&&this.setOptions(Y.options)}const s=new AbortController,a=Y=>{Object.defineProperty(Y,"signal",{enumerable:!0,get:()=>(Ne(this,Eo,!0),s.signal)})},u=()=>{const Y=Lw(this.options,r),C=(()=>{const T={client:Z(this,wo),queryKey:this.queryKey,meta:this.meta};return a(T),T})();return Ne(this,Eo,!1),this.options.persister?this.options.persister(Y,C,this):Y(C)},f=(()=>{const Y={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Z(this,wo),state:this.state,fetchFn:u};return a(Y),Y})();(v=this.options.behavior)==null||v.onFetch(f,this),Ne(this,za,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((E=f.fetchOptions)==null?void 0:E.meta))&&_n(this,Vr,Ri).call(this,{type:"fetch",meta:(S=f.fetchOptions)==null?void 0:S.meta}),Ne(this,Yt,zw({initialPromise:r==null?void 0:r.initialPromise,fn:f.fetchFn,onCancel:Y=>{Y instanceof jp&&Y.revert&&this.setState({...Z(this,za),fetchStatus:"idle"}),s.abort()},onFail:(Y,ae)=>{_n(this,Vr,Ri).call(this,{type:"failed",failureCount:Y,error:ae})},onPause:()=>{_n(this,Vr,Ri).call(this,{type:"pause"})},onContinue:()=>{_n(this,Vr,Ri).call(this,{type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0}));try{const Y=await Z(this,Yt).start();if(Y===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(Y),(z=(b=Z(this,yr).config).onSuccess)==null||z.call(b,Y,this),(M=(N=Z(this,yr).config).onSettled)==null||M.call(N,Y,this.state.error,this),Y}catch(Y){if(Y instanceof jp){if(Y.silent)return Z(this,Yt).promise;if(Y.revert){if(this.state.data===void 0)throw Y;return this.state.data}}throw _n(this,Vr,Ri).call(this,{type:"error",error:Y}),(H=(J=Z(this,yr).config).onError)==null||H.call(J,Y,this),(X=(K=Z(this,yr).config).onSettled)==null||X.call(K,this.state.data,Y,this),Y}finally{this.scheduleGc()}}},_o=new WeakMap,za=new WeakMap,yr=new WeakMap,wo=new WeakMap,Yt=new WeakMap,Cu=new WeakMap,Eo=new WeakMap,Vr=new WeakSet,Ri=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...qk(s.data,this.options),fetchMeta:n.meta??null};case"success":const a={...s,...o_(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ne(this,za,n.manual?a:void 0),a;case"error":const u=n.error;return{...s,error:u,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Dn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Z(this,yr).notify({query:this,type:"updated",action:n})})},Cw);function qk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Fw(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function o_(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function a_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function l_(t){return{onFetch:(e,n)=>{var v,E,S,b,z;const r=e.options,s=(S=(E=(v=e.fetchOptions)==null?void 0:v.meta)==null?void 0:E.fetchMore)==null?void 0:S.direction,a=((b=e.state.data)==null?void 0:b.pages)||[],u=((z=e.state.data)==null?void 0:z.pageParams)||[];let h={pages:[],pageParams:[]},f=0;const m=async()=>{let N=!1;const M=K=>{Lk(K,()=>e.signal,()=>N=!0)},J=Lw(e.options,e.fetchOptions),H=async(K,X,Y)=>{if(N)return Promise.reject();if(X==null&&K.pages.length)return Promise.resolve(K);const C=(()=>{const x={client:e.client,queryKey:e.queryKey,pageParam:X,direction:Y?"backward":"forward",meta:e.options.meta};return M(x),x})(),T=await J(C),{maxPages:k}=e.options,P=Y?Mk:Ok;return{pages:P(K.pages,T,k),pageParams:P(K.pageParams,X,k)}};if(s&&a.length){const K=s==="backward",X=K?Wk:u_,Y={pages:a,pageParams:u},ae=X(r,Y);h=await H(Y,ae,K)}else{const K=t??a.length;do{const X=f===0?u[0]??r.initialPageParam:u_(r,h);if(f>0&&X==null)break;h=await H(h,X),f++}while(f<K)}return h};e.options.persister?e.fetchFn=()=>{var N,M;return(M=(N=e.options).persister)==null?void 0:M.call(N,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=m}}}function u_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Wk(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var xu,ni,Nn,To,ri,ps,xw,Hk=(xw=class extends jw{constructor(n){super();We(this,ri);We(this,xu);We(this,ni);We(this,Nn);We(this,To);Ne(this,xu,n.client),this.mutationId=n.mutationId,Ne(this,Nn,n.mutationCache),Ne(this,ni,[]),this.state=n.state||Gk(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Z(this,ni).includes(n)||(Z(this,ni).push(n),this.clearGcTimeout(),Z(this,Nn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ne(this,ni,Z(this,ni).filter(r=>r!==n)),this.scheduleGc(),Z(this,Nn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Z(this,ni).length||(this.state.status==="pending"?this.scheduleGc():Z(this,Nn).remove(this))}continue(){var n;return((n=Z(this,To))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var h,f,m,v,E,S,b,z,N,M,J,H,K,X,Y,ae,C,T,k,P;const r=()=>{_n(this,ri,ps).call(this,{type:"continue"})},s={client:Z(this,xu),meta:this.options.meta,mutationKey:this.options.mutationKey};Ne(this,To,zw({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(x,L)=>{_n(this,ri,ps).call(this,{type:"failed",failureCount:x,error:L})},onPause:()=>{_n(this,ri,ps).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Z(this,Nn).canRun(this)}));const a=this.state.status==="pending",u=!Z(this,To).canStart();try{if(a)r();else{_n(this,ri,ps).call(this,{type:"pending",variables:n,isPaused:u}),await((f=(h=Z(this,Nn).config).onMutate)==null?void 0:f.call(h,n,this,s));const L=await((v=(m=this.options).onMutate)==null?void 0:v.call(m,n,s));L!==this.state.context&&_n(this,ri,ps).call(this,{type:"pending",context:L,variables:n,isPaused:u})}const x=await Z(this,To).start();return await((S=(E=Z(this,Nn).config).onSuccess)==null?void 0:S.call(E,x,n,this.state.context,this,s)),await((z=(b=this.options).onSuccess)==null?void 0:z.call(b,x,n,this.state.context,s)),await((M=(N=Z(this,Nn).config).onSettled)==null?void 0:M.call(N,x,null,this.state.variables,this.state.context,this,s)),await((H=(J=this.options).onSettled)==null?void 0:H.call(J,x,null,n,this.state.context,s)),_n(this,ri,ps).call(this,{type:"success",data:x}),x}catch(x){try{await((X=(K=Z(this,Nn).config).onError)==null?void 0:X.call(K,x,n,this.state.context,this,s))}catch(L){Promise.reject(L)}try{await((ae=(Y=this.options).onError)==null?void 0:ae.call(Y,x,n,this.state.context,s))}catch(L){Promise.reject(L)}try{await((T=(C=Z(this,Nn).config).onSettled)==null?void 0:T.call(C,void 0,x,this.state.variables,this.state.context,this,s))}catch(L){Promise.reject(L)}try{await((P=(k=this.options).onSettled)==null?void 0:P.call(k,void 0,x,n,this.state.context,s))}catch(L){Promise.reject(L)}throw _n(this,ri,ps).call(this,{type:"error",error:x}),x}finally{Z(this,Nn).runNext(this)}}},xu=new WeakMap,ni=new WeakMap,Nn=new WeakMap,To=new WeakMap,ri=new WeakSet,ps=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Dn.batch(()=>{Z(this,ni).forEach(s=>{s.onMutationUpdate(n)}),Z(this,Nn).notify({mutation:this,type:"updated",action:n})})},xw);function Gk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ci,Fr,Pu,Pw,Kk=(Pw=class extends ah{constructor(e={}){super();We(this,Ci);We(this,Fr);We(this,Pu);this.config=e,Ne(this,Ci,new Set),Ne(this,Fr,new Map),Ne(this,Pu,0)}build(e,n,r){const s=new Hk({client:e,mutationCache:this,mutationId:++ud(this,Pu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Z(this,Ci).add(e);const n=cd(e);if(typeof n=="string"){const r=Z(this,Fr).get(n);r?r.push(e):Z(this,Fr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Z(this,Ci).delete(e)){const n=cd(e);if(typeof n=="string"){const r=Z(this,Fr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Z(this,Fr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=cd(e);if(typeof n=="string"){const r=Z(this,Fr).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=cd(e);if(typeof n=="string"){const s=(r=Z(this,Fr).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Dn.batch(()=>{Z(this,Ci).forEach(e=>{this.notify({type:"removed",mutation:e})}),Z(this,Ci).clear(),Z(this,Fr).clear()})}getAll(){return Array.from(Z(this,Ci))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>r_(n,r))}findAll(e={}){return this.getAll().filter(n=>r_(e,n))}notify(e){Dn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Dn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Lr))))}},Ci=new WeakMap,Fr=new WeakMap,Pu=new WeakMap,Pw);function cd(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ii,Nw,Qk=(Nw=class extends ah{constructor(e={}){super();We(this,ii);this.config=e,Ne(this,ii,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??Sm(s,n);let u=this.get(a);return u||(u=new Bk({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(u)),u}add(e){Z(this,ii).has(e.queryHash)||(Z(this,ii).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Z(this,ii).get(e.queryHash);n&&(e.destroy(),n===e&&Z(this,ii).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Dn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Z(this,ii).get(e)}getAll(){return[...Z(this,ii).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>n_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>n_(e,r)):n}notify(e){Dn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Dn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Dn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ii=new WeakMap,Nw),kt,Is,Ss,ja,Ua,ks,$a,Ba,Dw,Zk=(Dw=class{constructor(t={}){We(this,kt);We(this,Is);We(this,Ss);We(this,ja);We(this,Ua);We(this,ks);We(this,$a);We(this,Ba);Ne(this,kt,t.queryCache||new Qk),Ne(this,Is,t.mutationCache||new Kk),Ne(this,Ss,t.defaultOptions||{}),Ne(this,ja,new Map),Ne(this,Ua,new Map),Ne(this,ks,0)}mount(){ud(this,ks)._++,Z(this,ks)===1&&(Ne(this,$a,Vw.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,kt).onFocus())})),Ne(this,Ba,Vd.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,kt).onOnline())})))}unmount(){var t,e;ud(this,ks)._--,Z(this,ks)===0&&((t=Z(this,$a))==null||t.call(this),Ne(this,$a,void 0),(e=Z(this,Ba))==null||e.call(this),Ne(this,Ba,void 0))}isFetching(t){return Z(this,kt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Z(this,Is).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,kt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Z(this,kt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Fp(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Z(this,kt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Z(this,kt).get(r.queryHash),a=s==null?void 0:s.state.data,u=Ak(e,a);if(u!==void 0)return Z(this,kt).build(this,r).setData(u,{...n,manual:!0})}setQueriesData(t,e,n){return Dn.batch(()=>Z(this,kt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,kt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Z(this,kt);Dn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Z(this,kt);return Dn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Dn.batch(()=>Z(this,kt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Lr).catch(Lr)}invalidateQueries(t,e={}){return Dn.batch(()=>(Z(this,kt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Dn.batch(()=>Z(this,kt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Lr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Lr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Z(this,kt).build(this,e);return n.isStaleByTime(Fp(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Lr).catch(Lr)}fetchInfiniteQuery(t){return t.behavior=l_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Lr).catch(Lr)}ensureInfiniteQueryData(t){return t.behavior=l_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Vd.isOnline()?Z(this,Is).resumePausedMutations():Promise.resolve()}getQueryCache(){return Z(this,kt)}getMutationCache(){return Z(this,Is)}getDefaultOptions(){return Z(this,Ss)}setDefaultOptions(t){Ne(this,Ss,t)}setQueryDefaults(t,e){Z(this,ja).set(cu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Z(this,ja).values()],n={};return e.forEach(r=>{du(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Z(this,Ua).set(cu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Z(this,Ua).values()],n={};return e.forEach(r=>{du(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Z(this,Ss).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Sm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===km&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Z(this,Ss).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Z(this,kt).clear(),Z(this,Is).clear()}},kt=new WeakMap,Is=new WeakMap,Ss=new WeakMap,ja=new WeakMap,Ua=new WeakMap,ks=new WeakMap,$a=new WeakMap,Ba=new WeakMap,Dw),$=Im();const Ht=Ow($);var Jk=$.createContext(void 0),Yk=({client:t,children:e})=>($.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),O.jsx(Jk.Provider,{value:t,children:e})),dd={},mp={exports:{}},qn={},gp={exports:{}},yp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function Xk(){return c_||(c_=1,(function(t){function e(W,he){var ue=W.length;W.push(he);e:for(;0<ue;){var F=ue-1>>>1,Q=W[F];if(0<s(Q,he))W[F]=he,W[ue]=Q,ue=F;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var he=W[0],ue=W.pop();if(ue!==he){W[0]=ue;e:for(var F=0,Q=W.length,de=Q>>>1;F<de;){var Ee=2*(F+1)-1,xe=W[Ee],Ce=Ee+1,Ie=W[Ce];if(0>s(xe,ue))Ce<Q&&0>s(Ie,xe)?(W[F]=Ie,W[Ce]=ue,F=Ce):(W[F]=xe,W[Ee]=ue,F=Ee);else if(Ce<Q&&0>s(Ie,ue))W[F]=Ie,W[Ce]=ue,F=Ce;else break e}}return he}function s(W,he){var ue=W.sortIndex-he.sortIndex;return ue!==0?ue:W.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],m=[],v=1,E=null,S=3,b=!1,z=!1,N=!1,M=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(W){for(var he=n(m);he!==null;){if(he.callback===null)r(m);else if(he.startTime<=W)r(m),he.sortIndex=he.expirationTime,e(f,he);else break;he=n(m)}}function X(W){if(N=!1,K(W),!z)if(n(f)!==null)z=!0,Ze(Y);else{var he=n(m);he!==null&&ne(X,he.startTime-W)}}function Y(W,he){z=!1,N&&(N=!1,J(T),T=-1),b=!0;var ue=S;try{for(K(he),E=n(f);E!==null&&(!(E.expirationTime>he)||W&&!x());){var F=E.callback;if(typeof F=="function"){E.callback=null,S=E.priorityLevel;var Q=F(E.expirationTime<=he);he=t.unstable_now(),typeof Q=="function"?E.callback=Q:E===n(f)&&r(f),K(he)}else r(f);E=n(f)}if(E!==null)var de=!0;else{var Ee=n(m);Ee!==null&&ne(X,Ee.startTime-he),de=!1}return de}finally{E=null,S=ue,b=!1}}var ae=!1,C=null,T=-1,k=5,P=-1;function x(){return!(t.unstable_now()-P<k)}function L(){if(C!==null){var W=t.unstable_now();P=W;var he=!0;try{he=C(!0,W)}finally{he?R():(ae=!1,C=null)}}else ae=!1}var R;if(typeof H=="function")R=function(){H(L)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,et=Ue.port2;Ue.port1.onmessage=L,R=function(){et.postMessage(null)}}else R=function(){M(L,0)};function Ze(W){C=W,ae||(ae=!0,R())}function ne(W,he){T=M(function(){W(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){z||b||(z=!0,Ze(Y))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(W){switch(S){case 1:case 2:case 3:var he=3;break;default:he=S}var ue=S;S=he;try{return W()}finally{S=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,he){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ue=S;S=W;try{return he()}finally{S=ue}},t.unstable_scheduleCallback=function(W,he,ue){var F=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?F+ue:F):ue=F,W){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ue+Q,W={id:v++,callback:he,priorityLevel:W,startTime:ue,expirationTime:Q,sortIndex:-1},ue>F?(W.sortIndex=ue,e(m,W),n(f)===null&&W===n(m)&&(N?(J(T),T=-1):N=!0,ne(X,ue-F))):(W.sortIndex=Q,e(f,W),z||b||(z=!0,Ze(Y))),W},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(W){var he=S;return function(){var ue=S;S=he;try{return W.apply(this,arguments)}finally{S=ue}}}})(yp)),yp}var d_;function eb(){return d_||(d_=1,gp.exports=Xk()),gp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function tb(){if(h_)return qn;h_=1;var t=Im(),e=eb();function n(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function S(i){return f.call(E,i)?!0:f.call(v,i)?!1:m.test(i)?E[i]=!0:(v[i]=!0,!1)}function b(i,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function z(i,o,l,d){if(o===null||typeof o>"u"||b(i,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function N(i,o,l,d,p,y,w){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=w}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){M[i]=new N(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];M[o]=new N(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){M[i]=new N(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){M[i]=new N(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){M[i]=new N(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){M[i]=new N(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){M[i]=new N(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){M[i]=new N(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){M[i]=new N(i,5,!1,i.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function H(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(J,H);M[o]=new N(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(J,H);M[o]=new N(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(J,H);M[o]=new N(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){M[i]=new N(i,1,!1,i.toLowerCase(),null,!1,!1)}),M.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){M[i]=new N(i,1,!1,i.toLowerCase(),null,!0,!0)});function K(i,o,l,d){var p=M.hasOwnProperty(o)?M[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(z(o,l,p,d)&&(l=null),d||p===null?S(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,d=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?i.setAttributeNS(d,o,l):i.setAttribute(o,l))))}var X=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),ae=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),x=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),et=Symbol.for("react.memo"),Ze=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),W=Symbol.iterator;function he(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,F;function Q(i){if(F===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);F=o&&o[1]||""}return`
`+F+i}var de=!1;function Ee(i,o){if(!i||de)return"";de=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(q){var d=q}Reflect.construct(i,[],o)}else{try{o.call()}catch(q){d=q}i.call(o.prototype)}else{try{throw Error()}catch(q){d=q}i()}}catch(q){if(q&&d&&typeof q.stack=="string"){for(var p=q.stack.split(`
`),y=d.stack.split(`
`),w=p.length-1,A=y.length-1;1<=w&&0<=A&&p[w]!==y[A];)A--;for(;1<=w&&0<=A;w--,A--)if(p[w]!==y[A]){if(w!==1||A!==1)do if(w--,A--,0>A||p[w]!==y[A]){var D=`
`+p[w].replace(" at new "," at ");return i.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",i.displayName)),D}while(1<=w&&0<=A);break}}}finally{de=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?Q(i):""}function xe(i){switch(i.tag){case 5:return Q(i.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return i=Ee(i.type,!1),i;case 11:return i=Ee(i.type.render,!1),i;case 1:return i=Ee(i.type,!0),i;default:return""}}function Ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case ae:return"Portal";case k:return"Profiler";case T:return"StrictMode";case R:return"Suspense";case Ue:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case x:return(i.displayName||"Context")+".Consumer";case P:return(i._context.displayName||"Context")+".Provider";case L:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case et:return o=i.displayName||null,o!==null?o:Ce(i.type)||"Memo";case Ze:o=i._payload,i=i._init;try{return Ce(i(o))}catch{}}return null}function Ie(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(o);case 8:return o===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ve(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Fe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function be(i){var o=Fe(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(w){d=""+w,y.call(this,w)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function zt(i){i._valueTracker||(i._valueTracker=be(i))}function Tt(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return i&&(d=Fe(i)?i.checked?"true":"false":i.value),i=d,i!==l?(o.setValue(i),!0):!1}function kn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function tn(i,o){var l=o.checked;return ue({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function Qn(i,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=Ve(o.value!=null?o.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function sr(i,o){o=o.checked,o!=null&&K(i,"checked",o,!1)}function zi(i,o){sr(i,o);var l=Ve(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Br(i,o.type,l):o.hasOwnProperty("defaultValue")&&Br(i,o.type,Ve(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function js(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Br(i,o,l){(o!=="number"||kn(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var Gt=Array.isArray;function On(i,o,l,d){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Ve(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function qr(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return ue({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function di(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(n(92));if(Gt(l)){if(1<l.length)throw Error(n(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Ve(l)}}function hi(i,o){var l=Ve(o.value),d=Ve(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function Us(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function bt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function st(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?bt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var fn,wr=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,d,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(fn=fn||document.createElement("div"),fn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=fn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Er(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var pn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wr=["Webkit","ms","Moz","O"];Object.keys(pn).forEach(function(i){Wr.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),pn[o]=pn[i]})});function $s(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||pn.hasOwnProperty(i)&&pn[i]?(""+o).trim():o+"px"}function Bs(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=$s(l,o[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,p):i[l]=p}}var fi=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ji(i,o){if(o){if(fi[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function qs(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hr=null;function Ui(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var $i=null,Mn=null,rt=null;function xt(i){if(i=Nl(i)){if(typeof $i!="function")throw Error(n(280));var o=i.stateNode;o&&(o=Sc(o),$i(i.stateNode,i.type,o))}}function ft(i){Mn?rt?rt.push(i):rt=[i]:Mn=i}function Ln(){if(Mn){var i=Mn,o=rt;if(rt=Mn=null,xt(i),o)for(i=0;i<o.length;i++)xt(o[i])}}function Pt(i,o){return i(o)}function jt(){}var Nt=!1;function or(i,o,l){if(Nt)return i(o,l);Nt=!0;try{return Pt(i,o,l)}finally{Nt=!1,(Mn!==null||rt!==null)&&(jt(),Ln())}}function ze(i,o){var l=i.stateNode;if(l===null)return null;var d=Sc(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,o,typeof l));return l}var bn=!1;if(h)try{var It={};Object.defineProperty(It,"passive",{get:function(){bn=!0}}),window.addEventListener("test",It,It),window.removeEventListener("test",It,It)}catch{bn=!1}function nn(i,o,l,d,p,y,w,A,D){var q=Array.prototype.slice.call(arguments,3);try{o.apply(l,q)}catch(ie){this.onError(ie)}}var Zn=!1,ar=null,Dt=!1,Tr=null,Ws={onError:function(i){Zn=!0,ar=i}};function jo(i,o,l,d,p,y,w,A,D){Zn=!1,ar=null,nn.apply(Ws,arguments)}function Qu(i,o,l,d,p,y,w,A,D){if(jo.apply(this,arguments),Zn){if(Zn){var q=ar;Zn=!1,ar=null}else throw Error(n(198));Dt||(Dt=!0,Tr=q)}}function Ir(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function Hs(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Sr(i){if(Ir(i)!==i)throw Error(n(188))}function Zu(i){var o=i.alternate;if(!o){if(o=Ir(i),o===null)throw Error(n(188));return o!==i?null:i}for(var l=i,d=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Sr(p),i;if(y===d)return Sr(p),o;y=y.sibling}throw Error(n(188))}if(l.return!==d.return)l=p,d=y;else{for(var w=!1,A=p.child;A;){if(A===l){w=!0,l=p,d=y;break}if(A===d){w=!0,d=p,l=y;break}A=A.sibling}if(!w){for(A=y.child;A;){if(A===l){w=!0,l=y,d=p;break}if(A===d){w=!0,d=y,l=p;break}A=A.sibling}if(!w)throw Error(n(189))}}if(l.alternate!==d)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:o}function fl(i){return i=Zu(i),i!==null?Uo(i):null}function Uo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Uo(i);if(o!==null)return o;i=i.sibling}return null}var $o=e.unstable_scheduleCallback,pl=e.unstable_cancelCallback,Ju=e.unstable_shouldYield,jh=e.unstable_requestPaint,ot=e.unstable_now,Yu=e.unstable_getCurrentPriorityLevel,Gs=e.unstable_ImmediatePriority,Bi=e.unstable_UserBlockingPriority,lr=e.unstable_NormalPriority,ml=e.unstable_LowPriority,Xu=e.unstable_IdlePriority,Ks=null,Jn=null;function ec(i){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(Ks,i,void 0,(i.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:nc,gl=Math.log,tc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(gl(i)/tc|0)|0}var Bo=64,qo=4194304;function qi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Qs(i,o){var l=i.pendingLanes;if(l===0)return 0;var d=0,p=i.suspendedLanes,y=i.pingedLanes,w=l&268435455;if(w!==0){var A=w&~p;A!==0?d=qi(A):(y&=w,y!==0&&(d=qi(y)))}else w=l&~p,w!==0?d=qi(w):y!==0&&(d=qi(y));if(d===0)return 0;if(o!==0&&o!==d&&(o&p)===0&&(p=d&-d,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((d&4)!==0&&(d|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)l=31-An(o),p=1<<l,d|=i[l],o&=~p;return d}function Uh(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pi(i,o){for(var l=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var w=31-An(y),A=1<<w,D=p[w];D===-1?((A&l)===0||(A&d)!==0)&&(p[w]=Uh(A,o)):D<=o&&(i.expiredLanes|=A),y&=~A}}function Yn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Zs(){var i=Bo;return Bo<<=1,(Bo&4194240)===0&&(Bo=64),i}function Wi(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function Hi(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-An(o),i[o]=l}function it(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-An(l),y=1<<p;o[p]=0,d[p]=-1,i[p]=-1,l&=~y}}function Gi(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var d=31-An(l),p=1<<d;p&o|i[d]&o&&(i[d]|=o),l&=~p}}var qe=0;function Ki(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var rc,Wo,ic,sc,oc,yl=!1,Gr=[],rn=null,kr=null,br=null,Qi=new Map,ur=new Map,Kr=[],$h="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ac(i,o){switch(i){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Qi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ur.delete(o.pointerId)}}function Vn(i,o,l,d,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Nl(o),o!==null&&Wo(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Bh(i,o,l,d,p){switch(o){case"focusin":return rn=Vn(rn,i,o,l,d,p),!0;case"dragenter":return kr=Vn(kr,i,o,l,d,p),!0;case"mouseover":return br=Vn(br,i,o,l,d,p),!0;case"pointerover":var y=p.pointerId;return Qi.set(y,Vn(Qi.get(y)||null,i,o,l,d,p)),!0;case"gotpointercapture":return y=p.pointerId,ur.set(y,Vn(ur.get(y)||null,i,o,l,d,p)),!0}return!1}function lc(i){var o=to(i.target);if(o!==null){var l=Ir(o);if(l!==null){if(o=l.tag,o===13){if(o=Hs(l),o!==null){i.blockedOn=o,oc(i.priority,function(){ic(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function mi(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Ho(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Hr=d,l.target.dispatchEvent(d),Hr=null}else return o=Nl(l),o!==null&&Wo(o),i.blockedOn=l,!1;o.shift()}return!0}function Js(i,o,l){mi(i)&&l.delete(o)}function uc(){yl=!1,rn!==null&&mi(rn)&&(rn=null),kr!==null&&mi(kr)&&(kr=null),br!==null&&mi(br)&&(br=null),Qi.forEach(Js),ur.forEach(Js)}function Ar(i,o){i.blockedOn===o&&(i.blockedOn=null,yl||(yl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uc)))}function Rr(i){function o(p){return Ar(p,i)}if(0<Gr.length){Ar(Gr[0],i);for(var l=1;l<Gr.length;l++){var d=Gr[l];d.blockedOn===i&&(d.blockedOn=null)}}for(rn!==null&&Ar(rn,i),kr!==null&&Ar(kr,i),br!==null&&Ar(br,i),Qi.forEach(o),ur.forEach(o),l=0;l<Kr.length;l++)d=Kr[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<Kr.length&&(l=Kr[0],l.blockedOn===null);)lc(l),l.blockedOn===null&&Kr.shift()}var gi=X.ReactCurrentBatchConfig,Zi=!0;function pt(i,o,l,d){var p=qe,y=gi.transition;gi.transition=null;try{qe=1,vl(i,o,l,d)}finally{qe=p,gi.transition=y}}function qh(i,o,l,d){var p=qe,y=gi.transition;gi.transition=null;try{qe=4,vl(i,o,l,d)}finally{qe=p,gi.transition=y}}function vl(i,o,l,d){if(Zi){var p=Ho(i,o,l,d);if(p===null)tf(i,o,d,Ys,l),ac(i,d);else if(Bh(p,i,o,l,d))d.stopPropagation();else if(ac(i,d),o&4&&-1<$h.indexOf(i)){for(;p!==null;){var y=Nl(p);if(y!==null&&rc(y),y=Ho(i,o,l,d),y===null&&tf(i,o,d,Ys,l),y===p)break;p=y}p!==null&&d.stopPropagation()}else tf(i,o,d,null,l)}}var Ys=null;function Ho(i,o,l,d){if(Ys=null,i=Ui(d),i=to(i),i!==null)if(o=Ir(i),o===null)i=null;else if(l=o.tag,l===13){if(i=Hs(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Ys=i,null}function _l(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yu()){case Gs:return 1;case Bi:return 4;case lr:case ml:return 16;case Xu:return 536870912;default:return 16}default:return 16}}var Xn=null,Go=null,Fn=null;function wl(){if(Fn)return Fn;var i,o=Go,l=o.length,d,p="value"in Xn?Xn.value:Xn.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var w=l-i;for(d=1;d<=w&&o[l-d]===p[y-d];d++);return Fn=p.slice(i,1<d?1-d:void 0)}function Ko(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Qr(){return!0}function El(){return!1}function sn(i){function o(l,d,p,y,w){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(l=i[A],this[A]=l?l(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Qr:El,this.isPropagationStopped=El,this}return ue(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Qr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Qr)},persist:function(){},isPersistent:Qr}),o}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=sn(Cr),Zr=ue({},Cr,{view:0,detail:0}),Wh=sn(Zr),Zo,yi,Ji,Xs=ue({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ji&&(Ji&&i.type==="mousemove"?(Zo=i.screenX-Ji.screenX,yi=i.screenY-Ji.screenY):yi=Zo=0,Ji=i),Zo)},movementY:function(i){return"movementY"in i?i.movementY:yi}}),Jo=sn(Xs),Tl=ue({},Xs,{dataTransfer:0}),cc=sn(Tl),Yo=ue({},Zr,{relatedTarget:0}),Xo=sn(Yo),dc=ue({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),vi=sn(dc),hc=ue({},Cr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),fc=sn(hc),pc=ue({},Cr,{data:0}),Il=sn(pc),ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=mc[i])?!!o[i]:!1}function Jr(){return gc}var c=ue({},Zr,{key:function(i){if(i.key){var o=ea[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Ko(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Rn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jr,charCode:function(i){return i.type==="keypress"?Ko(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ko(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=sn(c),_=ue({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=sn(_),j=ue({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jr}),G=sn(j),ce=ue({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),tt=sn(ce),Ut=ue({},Xs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ke=sn(Ut),Kt=[9,13,27,32],Ot=h&&"CompositionEvent"in window,cr=null;h&&"documentMode"in document&&(cr=document.documentMode);var er=h&&"TextEvent"in window&&!cr,eo=h&&(!Ot||cr&&8<cr&&11>=cr),ta=" ",Wg=!1;function Hg(i,o){switch(i){case"keyup":return Kt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var na=!1;function vS(i,o){switch(i){case"compositionend":return Gg(o);case"keypress":return o.which!==32?null:(Wg=!0,ta);case"textInput":return i=o.data,i===ta&&Wg?null:i;default:return null}}function _S(i,o){if(na)return i==="compositionend"||!Ot&&Hg(i,o)?(i=wl(),Fn=Go=Xn=null,na=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return eo&&o.locale!=="ko"?null:o.data;default:return null}}var wS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!wS[i.type]:o==="textarea"}function Qg(i,o,l,d){ft(d),o=Ec(o,"onChange"),0<o.length&&(l=new Qo("onChange","change",null,l,d),i.push({event:l,listeners:o}))}var Sl=null,kl=null;function ES(i){fy(i,0)}function yc(i){var o=aa(i);if(Tt(o))return i}function TS(i,o){if(i==="change")return o}var Zg=!1;if(h){var Hh;if(h){var Gh="oninput"in document;if(!Gh){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),Gh=typeof Jg.oninput=="function"}Hh=Gh}else Hh=!1;Zg=Hh&&(!document.documentMode||9<document.documentMode)}function Yg(){Sl&&(Sl.detachEvent("onpropertychange",Xg),kl=Sl=null)}function Xg(i){if(i.propertyName==="value"&&yc(kl)){var o=[];Qg(o,kl,i,Ui(i)),or(ES,o)}}function IS(i,o,l){i==="focusin"?(Yg(),Sl=o,kl=l,Sl.attachEvent("onpropertychange",Xg)):i==="focusout"&&Yg()}function SS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return yc(kl)}function kS(i,o){if(i==="click")return yc(o)}function bS(i,o){if(i==="input"||i==="change")return yc(o)}function AS(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var xr=typeof Object.is=="function"?Object.is:AS;function bl(i,o){if(xr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!f.call(o,p)||!xr(i[p],o[p]))return!1}return!0}function ey(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ty(i,o){var l=ey(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=o&&d>=o)return{node:l,offset:o-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ey(l)}}function ny(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ny(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function ry(){for(var i=window,o=kn();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=kn(i.document)}return o}function Kh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function RS(i){var o=ry(),l=i.focusedElem,d=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&ny(l.ownerDocument.documentElement,l)){if(d!==null&&Kh(l)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!i.extend&&y>d&&(p=d,d=y,y=p),p=ty(l,y);var w=ty(l,d);p&&w&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==w.node||i.focusOffset!==w.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>d?(i.addRange(o),i.extend(w.node,w.offset)):(o.setEnd(w.node,w.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var CS=h&&"documentMode"in document&&11>=document.documentMode,ra=null,Qh=null,Al=null,Zh=!1;function iy(i,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Zh||ra==null||ra!==kn(d)||(d=ra,"selectionStart"in d&&Kh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Al&&bl(Al,d)||(Al=d,d=Ec(Qh,"onSelect"),0<d.length&&(o=new Qo("onSelect","select",null,o,l),i.push({event:o,listeners:d}),o.target=ra)))}function vc(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var ia={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},Jh={},sy={};h&&(sy=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function _c(i){if(Jh[i])return Jh[i];if(!ia[i])return i;var o=ia[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in sy)return Jh[i]=o[l];return i}var oy=_c("animationend"),ay=_c("animationiteration"),ly=_c("animationstart"),uy=_c("transitionend"),cy=new Map,dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(i,o){cy.set(i,o),a(o,[i])}for(var Yh=0;Yh<dy.length;Yh++){var Xh=dy[Yh],xS=Xh.toLowerCase(),PS=Xh[0].toUpperCase()+Xh.slice(1);Yi(xS,"on"+PS)}Yi(oy,"onAnimationEnd"),Yi(ay,"onAnimationIteration"),Yi(ly,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(uy,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function hy(i,o,l){var d=i.type||"unknown-event";i.currentTarget=l,Qu(d,o,void 0,i),i.currentTarget=null}function fy(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],p=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var w=d.length-1;0<=w;w--){var A=d[w],D=A.instance,q=A.currentTarget;if(A=A.listener,D!==y&&p.isPropagationStopped())break e;hy(p,A,q),y=D}else for(w=0;w<d.length;w++){if(A=d[w],D=A.instance,q=A.currentTarget,A=A.listener,D!==y&&p.isPropagationStopped())break e;hy(p,A,q),y=D}}}if(Dt)throw i=Tr,Dt=!1,Tr=null,i}function ct(i,o){var l=o[lf];l===void 0&&(l=o[lf]=new Set);var d=i+"__bubble";l.has(d)||(py(o,i,2,!1),l.add(d))}function ef(i,o,l){var d=0;o&&(d|=4),py(l,i,d,o)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Cl(i){if(!i[wc]){i[wc]=!0,r.forEach(function(l){l!=="selectionchange"&&(NS.has(l)||ef(l,!1,i),ef(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[wc]||(o[wc]=!0,ef("selectionchange",!1,o))}}function py(i,o,l,d){switch(_l(o)){case 1:var p=pt;break;case 4:p=qh;break;default:p=vl}l=p.bind(null,o,l,i),p=void 0,!bn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function tf(i,o,l,d,p){var y=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var A=d.stateNode.containerInfo;if(A===p||A.nodeType===8&&A.parentNode===p)break;if(w===4)for(w=d.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===p||D.nodeType===8&&D.parentNode===p))return;w=w.return}for(;A!==null;){if(w=to(A),w===null)return;if(D=w.tag,D===5||D===6){d=y=w;continue e}A=A.parentNode}}d=d.return}or(function(){var q=y,ie=Ui(l),oe=[];e:{var re=cy.get(i);if(re!==void 0){var fe=Qo,ge=i;switch(i){case"keypress":if(Ko(l)===0)break e;case"keydown":case"keyup":fe=g;break;case"focusin":ge="focus",fe=Xo;break;case"focusout":ge="blur",fe=Xo;break;case"beforeblur":case"afterblur":fe=Xo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=cc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=G;break;case oy:case ay:case ly:fe=vi;break;case uy:fe=tt;break;case"scroll":fe=Wh;break;case"wheel":fe=Ke;break;case"copy":case"cut":case"paste":fe=fc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=I}var _e=(o&4)!==0,At=!_e&&i==="scroll",U=_e?re!==null?re+"Capture":null:re;_e=[];for(var V=q,B;V!==null;){B=V;var le=B.stateNode;if(B.tag===5&&le!==null&&(B=le,U!==null&&(le=ze(V,U),le!=null&&_e.push(xl(V,le,B)))),At)break;V=V.return}0<_e.length&&(re=new fe(re,ge,null,l,ie),oe.push({event:re,listeners:_e}))}}if((o&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",re&&l!==Hr&&(ge=l.relatedTarget||l.fromElement)&&(to(ge)||ge[_i]))break e;if((fe||re)&&(re=ie.window===ie?ie:(re=ie.ownerDocument)?re.defaultView||re.parentWindow:window,fe?(ge=l.relatedTarget||l.toElement,fe=q,ge=ge?to(ge):null,ge!==null&&(At=Ir(ge),ge!==At||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(fe=null,ge=q),fe!==ge)){if(_e=Jo,le="onMouseLeave",U="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(_e=I,le="onPointerLeave",U="onPointerEnter",V="pointer"),At=fe==null?re:aa(fe),B=ge==null?re:aa(ge),re=new _e(le,V+"leave",fe,l,ie),re.target=At,re.relatedTarget=B,le=null,to(ie)===q&&(_e=new _e(U,V+"enter",ge,l,ie),_e.target=B,_e.relatedTarget=At,le=_e),At=le,fe&&ge)t:{for(_e=fe,U=ge,V=0,B=_e;B;B=sa(B))V++;for(B=0,le=U;le;le=sa(le))B++;for(;0<V-B;)_e=sa(_e),V--;for(;0<B-V;)U=sa(U),B--;for(;V--;){if(_e===U||U!==null&&_e===U.alternate)break t;_e=sa(_e),U=sa(U)}_e=null}else _e=null;fe!==null&&my(oe,re,fe,_e,!1),ge!==null&&At!==null&&my(oe,At,ge,_e,!0)}}e:{if(re=q?aa(q):window,fe=re.nodeName&&re.nodeName.toLowerCase(),fe==="select"||fe==="input"&&re.type==="file")var Te=TS;else if(Kg(re))if(Zg)Te=bS;else{Te=SS;var Ae=IS}else(fe=re.nodeName)&&fe.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Te=kS);if(Te&&(Te=Te(i,q))){Qg(oe,Te,l,ie);break e}Ae&&Ae(i,re,q),i==="focusout"&&(Ae=re._wrapperState)&&Ae.controlled&&re.type==="number"&&Br(re,"number",re.value)}switch(Ae=q?aa(q):window,i){case"focusin":(Kg(Ae)||Ae.contentEditable==="true")&&(ra=Ae,Qh=q,Al=null);break;case"focusout":Al=Qh=ra=null;break;case"mousedown":Zh=!0;break;case"contextmenu":case"mouseup":case"dragend":Zh=!1,iy(oe,l,ie);break;case"selectionchange":if(CS)break;case"keydown":case"keyup":iy(oe,l,ie)}var Re;if(Ot)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else na?Hg(i,l)&&(Pe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(eo&&l.locale!=="ko"&&(na||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&na&&(Re=wl()):(Xn=ie,Go="value"in Xn?Xn.value:Xn.textContent,na=!0)),Ae=Ec(q,Pe),0<Ae.length&&(Pe=new Il(Pe,i,null,l,ie),oe.push({event:Pe,listeners:Ae}),Re?Pe.data=Re:(Re=Gg(l),Re!==null&&(Pe.data=Re)))),(Re=er?vS(i,l):_S(i,l))&&(q=Ec(q,"onBeforeInput"),0<q.length&&(ie=new Il("onBeforeInput","beforeinput",null,l,ie),oe.push({event:ie,listeners:q}),ie.data=Re))}fy(oe,o)})}function xl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function Ec(i,o){for(var l=o+"Capture",d=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=ze(i,l),y!=null&&d.unshift(xl(i,y,p)),y=ze(i,o),y!=null&&d.push(xl(i,y,p))),i=i.return}return d}function sa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function my(i,o,l,d,p){for(var y=o._reactName,w=[];l!==null&&l!==d;){var A=l,D=A.alternate,q=A.stateNode;if(D!==null&&D===d)break;A.tag===5&&q!==null&&(A=q,p?(D=ze(l,y),D!=null&&w.unshift(xl(l,D,A))):p||(D=ze(l,y),D!=null&&w.push(xl(l,D,A)))),l=l.return}w.length!==0&&i.push({event:o,listeners:w})}var DS=/\r\n?/g,OS=/\u0000|\uFFFD/g;function gy(i){return(typeof i=="string"?i:""+i).replace(DS,`
`).replace(OS,"")}function Tc(i,o,l){if(o=gy(o),gy(i)!==o&&l)throw Error(n(425))}function Ic(){}var nf=null,rf=null;function sf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,MS=typeof clearTimeout=="function"?clearTimeout:void 0,yy=typeof Promise=="function"?Promise:void 0,LS=typeof queueMicrotask=="function"?queueMicrotask:typeof yy<"u"?function(i){return yy.resolve(null).then(i).catch(VS)}:of;function VS(i){setTimeout(function(){throw i})}function af(i,o){var l=o,d=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){i.removeChild(p),Rr(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);Rr(o)}function Xi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function vy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var oa=Math.random().toString(36).slice(2),Yr="__reactFiber$"+oa,Pl="__reactProps$"+oa,_i="__reactContainer$"+oa,lf="__reactEvents$"+oa,FS="__reactListeners$"+oa,zS="__reactHandles$"+oa;function to(i){var o=i[Yr];if(o)return o;for(var l=i.parentNode;l;){if(o=l[_i]||l[Yr]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=vy(i);i!==null;){if(l=i[Yr])return l;i=vy(i)}return o}i=l,l=i.parentNode}return null}function Nl(i){return i=i[Yr]||i[_i],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function aa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Sc(i){return i[Pl]||null}var uf=[],la=-1;function es(i){return{current:i}}function dt(i){0>la||(i.current=uf[la],uf[la]=null,la--)}function at(i,o){la++,uf[la]=i.current,i.current=o}var ts={},mn=es(ts),zn=es(!1),no=ts;function ua(i,o){var l=i.type.contextTypes;if(!l)return ts;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function jn(i){return i=i.childContextTypes,i!=null}function kc(){dt(zn),dt(mn)}function _y(i,o,l){if(mn.current!==ts)throw Error(n(168));at(mn,o),at(zn,l)}function wy(i,o,l){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(n(108,Ie(i)||"Unknown",p));return ue({},l,d)}function bc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ts,no=mn.current,at(mn,i),at(zn,zn.current),!0}function Ey(i,o,l){var d=i.stateNode;if(!d)throw Error(n(169));l?(i=wy(i,o,no),d.__reactInternalMemoizedMergedChildContext=i,dt(zn),dt(mn),at(mn,i)):dt(zn),at(zn,l)}var wi=null,Ac=!1,cf=!1;function Ty(i){wi===null?wi=[i]:wi.push(i)}function jS(i){Ac=!0,Ty(i)}function ns(){if(!cf&&wi!==null){cf=!0;var i=0,o=qe;try{var l=wi;for(qe=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}wi=null,Ac=!1}catch(p){throw wi!==null&&(wi=wi.slice(i+1)),$o(Gs,ns),p}finally{qe=o,cf=!1}}return null}var ca=[],da=0,Rc=null,Cc=0,dr=[],hr=0,ro=null,Ei=1,Ti="";function io(i,o){ca[da++]=Cc,ca[da++]=Rc,Rc=i,Cc=o}function Iy(i,o,l){dr[hr++]=Ei,dr[hr++]=Ti,dr[hr++]=ro,ro=i;var d=Ei;i=Ti;var p=32-An(d)-1;d&=~(1<<p),l+=1;var y=32-An(o)+p;if(30<y){var w=p-p%5;y=(d&(1<<w)-1).toString(32),d>>=w,p-=w,Ei=1<<32-An(o)+p|l<<p|d,Ti=y+i}else Ei=1<<y|l<<p|d,Ti=i}function df(i){i.return!==null&&(io(i,1),Iy(i,1,0))}function hf(i){for(;i===Rc;)Rc=ca[--da],ca[da]=null,Cc=ca[--da],ca[da]=null;for(;i===ro;)ro=dr[--hr],dr[hr]=null,Ti=dr[--hr],dr[hr]=null,Ei=dr[--hr],dr[hr]=null}var tr=null,nr=null,mt=!1,Pr=null;function Sy(i,o){var l=gr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function ky(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,tr=i,nr=Xi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,tr=i,nr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=ro!==null?{id:Ei,overflow:Ti}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=gr(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,tr=i,nr=null,!0):!1;default:return!1}}function ff(i){return(i.mode&1)!==0&&(i.flags&128)===0}function pf(i){if(mt){var o=nr;if(o){var l=o;if(!ky(i,o)){if(ff(i))throw Error(n(418));o=Xi(l.nextSibling);var d=tr;o&&ky(i,o)?Sy(d,l):(i.flags=i.flags&-4097|2,mt=!1,tr=i)}}else{if(ff(i))throw Error(n(418));i.flags=i.flags&-4097|2,mt=!1,tr=i}}}function by(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;tr=i}function xc(i){if(i!==tr)return!1;if(!mt)return by(i),mt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!sf(i.type,i.memoizedProps)),o&&(o=nr)){if(ff(i))throw Ay(),Error(n(418));for(;o;)Sy(i,o),o=Xi(o.nextSibling)}if(by(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){nr=Xi(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}nr=null}}else nr=tr?Xi(i.stateNode.nextSibling):null;return!0}function Ay(){for(var i=nr;i;)i=Xi(i.nextSibling)}function ha(){nr=tr=null,mt=!1}function mf(i){Pr===null?Pr=[i]:Pr.push(i)}var US=X.ReactCurrentBatchConfig;function Dl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var d=l.stateNode}if(!d)throw Error(n(147,i));var p=d,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(w){var A=p.refs;w===null?delete A[y]:A[y]=w},o._stringRef=y,o)}if(typeof i!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,i))}return i}function Pc(i,o){throw i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Ry(i){var o=i._init;return o(i._payload)}function Cy(i){function o(U,V){if(i){var B=U.deletions;B===null?(U.deletions=[V],U.flags|=16):B.push(V)}}function l(U,V){if(!i)return null;for(;V!==null;)o(U,V),V=V.sibling;return null}function d(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function p(U,V){return U=cs(U,V),U.index=0,U.sibling=null,U}function y(U,V,B){return U.index=B,i?(B=U.alternate,B!==null?(B=B.index,B<V?(U.flags|=2,V):B):(U.flags|=2,V)):(U.flags|=1048576,V)}function w(U){return i&&U.alternate===null&&(U.flags|=2),U}function A(U,V,B,le){return V===null||V.tag!==6?(V=op(B,U.mode,le),V.return=U,V):(V=p(V,B),V.return=U,V)}function D(U,V,B,le){var Te=B.type;return Te===C?ie(U,V,B.props.children,le,B.key):V!==null&&(V.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ze&&Ry(Te)===V.type)?(le=p(V,B.props),le.ref=Dl(U,V,B),le.return=U,le):(le=td(B.type,B.key,B.props,null,U.mode,le),le.ref=Dl(U,V,B),le.return=U,le)}function q(U,V,B,le){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=ap(B,U.mode,le),V.return=U,V):(V=p(V,B.children||[]),V.return=U,V)}function ie(U,V,B,le,Te){return V===null||V.tag!==7?(V=fo(B,U.mode,le,Te),V.return=U,V):(V=p(V,B),V.return=U,V)}function oe(U,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=op(""+V,U.mode,B),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Y:return B=td(V.type,V.key,V.props,null,U.mode,B),B.ref=Dl(U,null,V),B.return=U,B;case ae:return V=ap(V,U.mode,B),V.return=U,V;case Ze:var le=V._init;return oe(U,le(V._payload),B)}if(Gt(V)||he(V))return V=fo(V,U.mode,B,null),V.return=U,V;Pc(U,V)}return null}function re(U,V,B,le){var Te=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return Te!==null?null:A(U,V,""+B,le);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Y:return B.key===Te?D(U,V,B,le):null;case ae:return B.key===Te?q(U,V,B,le):null;case Ze:return Te=B._init,re(U,V,Te(B._payload),le)}if(Gt(B)||he(B))return Te!==null?null:ie(U,V,B,le,null);Pc(U,B)}return null}function fe(U,V,B,le,Te){if(typeof le=="string"&&le!==""||typeof le=="number")return U=U.get(B)||null,A(V,U,""+le,Te);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case Y:return U=U.get(le.key===null?B:le.key)||null,D(V,U,le,Te);case ae:return U=U.get(le.key===null?B:le.key)||null,q(V,U,le,Te);case Ze:var Ae=le._init;return fe(U,V,B,Ae(le._payload),Te)}if(Gt(le)||he(le))return U=U.get(B)||null,ie(V,U,le,Te,null);Pc(V,le)}return null}function ge(U,V,B,le){for(var Te=null,Ae=null,Re=V,Pe=V=0,Jt=null;Re!==null&&Pe<B.length;Pe++){Re.index>Pe?(Jt=Re,Re=null):Jt=Re.sibling;var Ye=re(U,Re,B[Pe],le);if(Ye===null){Re===null&&(Re=Jt);break}i&&Re&&Ye.alternate===null&&o(U,Re),V=y(Ye,V,Pe),Ae===null?Te=Ye:Ae.sibling=Ye,Ae=Ye,Re=Jt}if(Pe===B.length)return l(U,Re),mt&&io(U,Pe),Te;if(Re===null){for(;Pe<B.length;Pe++)Re=oe(U,B[Pe],le),Re!==null&&(V=y(Re,V,Pe),Ae===null?Te=Re:Ae.sibling=Re,Ae=Re);return mt&&io(U,Pe),Te}for(Re=d(U,Re);Pe<B.length;Pe++)Jt=fe(Re,U,Pe,B[Pe],le),Jt!==null&&(i&&Jt.alternate!==null&&Re.delete(Jt.key===null?Pe:Jt.key),V=y(Jt,V,Pe),Ae===null?Te=Jt:Ae.sibling=Jt,Ae=Jt);return i&&Re.forEach(function(ds){return o(U,ds)}),mt&&io(U,Pe),Te}function _e(U,V,B,le){var Te=he(B);if(typeof Te!="function")throw Error(n(150));if(B=Te.call(B),B==null)throw Error(n(151));for(var Ae=Te=null,Re=V,Pe=V=0,Jt=null,Ye=B.next();Re!==null&&!Ye.done;Pe++,Ye=B.next()){Re.index>Pe?(Jt=Re,Re=null):Jt=Re.sibling;var ds=re(U,Re,Ye.value,le);if(ds===null){Re===null&&(Re=Jt);break}i&&Re&&ds.alternate===null&&o(U,Re),V=y(ds,V,Pe),Ae===null?Te=ds:Ae.sibling=ds,Ae=ds,Re=Jt}if(Ye.done)return l(U,Re),mt&&io(U,Pe),Te;if(Re===null){for(;!Ye.done;Pe++,Ye=B.next())Ye=oe(U,Ye.value,le),Ye!==null&&(V=y(Ye,V,Pe),Ae===null?Te=Ye:Ae.sibling=Ye,Ae=Ye);return mt&&io(U,Pe),Te}for(Re=d(U,Re);!Ye.done;Pe++,Ye=B.next())Ye=fe(Re,U,Pe,Ye.value,le),Ye!==null&&(i&&Ye.alternate!==null&&Re.delete(Ye.key===null?Pe:Ye.key),V=y(Ye,V,Pe),Ae===null?Te=Ye:Ae.sibling=Ye,Ae=Ye);return i&&Re.forEach(function(wk){return o(U,wk)}),mt&&io(U,Pe),Te}function At(U,V,B,le){if(typeof B=="object"&&B!==null&&B.type===C&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Y:e:{for(var Te=B.key,Ae=V;Ae!==null;){if(Ae.key===Te){if(Te=B.type,Te===C){if(Ae.tag===7){l(U,Ae.sibling),V=p(Ae,B.props.children),V.return=U,U=V;break e}}else if(Ae.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ze&&Ry(Te)===Ae.type){l(U,Ae.sibling),V=p(Ae,B.props),V.ref=Dl(U,Ae,B),V.return=U,U=V;break e}l(U,Ae);break}else o(U,Ae);Ae=Ae.sibling}B.type===C?(V=fo(B.props.children,U.mode,le,B.key),V.return=U,U=V):(le=td(B.type,B.key,B.props,null,U.mode,le),le.ref=Dl(U,V,B),le.return=U,U=le)}return w(U);case ae:e:{for(Ae=B.key;V!==null;){if(V.key===Ae)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){l(U,V.sibling),V=p(V,B.children||[]),V.return=U,U=V;break e}else{l(U,V);break}else o(U,V);V=V.sibling}V=ap(B,U.mode,le),V.return=U,U=V}return w(U);case Ze:return Ae=B._init,At(U,V,Ae(B._payload),le)}if(Gt(B))return ge(U,V,B,le);if(he(B))return _e(U,V,B,le);Pc(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(l(U,V.sibling),V=p(V,B),V.return=U,U=V):(l(U,V),V=op(B,U.mode,le),V.return=U,U=V),w(U)):l(U,V)}return At}var fa=Cy(!0),xy=Cy(!1),Nc=es(null),Dc=null,pa=null,gf=null;function yf(){gf=pa=Dc=null}function vf(i){var o=Nc.current;dt(Nc),i._currentValue=o}function _f(i,o,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===l)break;i=i.return}}function ma(i,o){Dc=i,gf=pa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Un=!0),i.firstContext=null)}function fr(i){var o=i._currentValue;if(gf!==i)if(i={context:i,memoizedValue:o,next:null},pa===null){if(Dc===null)throw Error(n(308));pa=i,Dc.dependencies={lanes:0,firstContext:i}}else pa=pa.next=i;return o}var so=null;function wf(i){so===null?so=[i]:so.push(i)}function Py(i,o,l,d){var p=o.interleaved;return p===null?(l.next=l,wf(o)):(l.next=p.next,p.next=l),o.interleaved=l,Ii(i,d)}function Ii(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var rs=!1;function Ef(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ny(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Si(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function is(i,o,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Je&2)!==0){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,Ii(i,l)}return p=d.interleaved,p===null?(o.next=o,wf(d)):(o.next=p.next,p.next=o),d.interleaved=o,Ii(i,l)}function Oc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,Gi(i,l)}}function Dy(i,o){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=w:y=y.next=w,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function Mc(i,o,l,d){var p=i.updateQueue;rs=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var D=A,q=D.next;D.next=null,w===null?y=q:w.next=q,w=D;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==w&&(A===null?ie.firstBaseUpdate=q:A.next=q,ie.lastBaseUpdate=D))}if(y!==null){var oe=p.baseState;w=0,ie=q=D=null,A=y;do{var re=A.lane,fe=A.eventTime;if((d&re)===re){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ge=i,_e=A;switch(re=o,fe=l,_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){oe=ge.call(fe,oe,re);break e}oe=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,re=typeof ge=="function"?ge.call(fe,oe,re):ge,re==null)break e;oe=ue({},oe,re);break e;case 2:rs=!0}}A.callback!==null&&A.lane!==0&&(i.flags|=64,re=p.effects,re===null?p.effects=[A]:re.push(A))}else fe={eventTime:fe,lane:re,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(q=ie=fe,D=oe):ie=ie.next=fe,w|=re;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;re=A,A=re.next,re.next=null,p.lastBaseUpdate=re,p.shared.pending=null}}while(!0);if(ie===null&&(D=oe),p.baseState=D,p.firstBaseUpdate=q,p.lastBaseUpdate=ie,o=p.shared.interleaved,o!==null){p=o;do w|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);lo|=w,i.lanes=w,i.memoizedState=oe}}function Oy(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(n(191,p));p.call(d)}}}var Ol={},Xr=es(Ol),Ml=es(Ol),Ll=es(Ol);function oo(i){if(i===Ol)throw Error(n(174));return i}function Tf(i,o){switch(at(Ll,o),at(Ml,i),at(Xr,Ol),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:st(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=st(o,i)}dt(Xr),at(Xr,o)}function ga(){dt(Xr),dt(Ml),dt(Ll)}function My(i){oo(Ll.current);var o=oo(Xr.current),l=st(o,i.type);o!==l&&(at(Ml,i),at(Xr,l))}function If(i){Ml.current===i&&(dt(Xr),dt(Ml))}var yt=es(0);function Lc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Sf=[];function kf(){for(var i=0;i<Sf.length;i++)Sf[i]._workInProgressVersionPrimary=null;Sf.length=0}var Vc=X.ReactCurrentDispatcher,bf=X.ReactCurrentBatchConfig,ao=0,vt=null,$t=null,Qt=null,Fc=!1,Vl=!1,Fl=0,$S=0;function gn(){throw Error(n(321))}function Af(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!xr(i[l],o[l]))return!1;return!0}function Rf(i,o,l,d,p,y){if(ao=y,vt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Vc.current=i===null||i.memoizedState===null?HS:GS,i=l(d,p),Vl){y=0;do{if(Vl=!1,Fl=0,25<=y)throw Error(n(301));y+=1,Qt=$t=null,o.updateQueue=null,Vc.current=KS,i=l(d,p)}while(Vl)}if(Vc.current=Uc,o=$t!==null&&$t.next!==null,ao=0,Qt=$t=vt=null,Fc=!1,o)throw Error(n(300));return i}function Cf(){var i=Fl!==0;return Fl=0,i}function ei(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?vt.memoizedState=Qt=i:Qt=Qt.next=i,Qt}function pr(){if($t===null){var i=vt.alternate;i=i!==null?i.memoizedState:null}else i=$t.next;var o=Qt===null?vt.memoizedState:Qt.next;if(o!==null)Qt=o,$t=i;else{if(i===null)throw Error(n(310));$t=i,i={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Qt===null?vt.memoizedState=Qt=i:Qt=Qt.next=i}return Qt}function zl(i,o){return typeof o=="function"?o(i):o}function xf(i){var o=pr(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var d=$t,p=d.baseQueue,y=l.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}d.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,d=d.baseState;var A=w=null,D=null,q=y;do{var ie=q.lane;if((ao&ie)===ie)D!==null&&(D=D.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),d=q.hasEagerState?q.eagerState:i(d,q.action);else{var oe={lane:ie,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};D===null?(A=D=oe,w=d):D=D.next=oe,vt.lanes|=ie,lo|=ie}q=q.next}while(q!==null&&q!==y);D===null?w=d:D.next=A,xr(d,o.memoizedState)||(Un=!0),o.memoizedState=d,o.baseState=w,o.baseQueue=D,l.lastRenderedState=d}if(i=l.interleaved,i!==null){p=i;do y=p.lane,vt.lanes|=y,lo|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Pf(i){var o=pr(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var d=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var w=p=p.next;do y=i(y,w.action),w=w.next;while(w!==p);xr(y,o.memoizedState)||(Un=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,d]}function Ly(){}function Vy(i,o){var l=vt,d=pr(),p=o(),y=!xr(d.memoizedState,p);if(y&&(d.memoizedState=p,Un=!0),d=d.queue,Nf(jy.bind(null,l,d,i),[i]),d.getSnapshot!==o||y||Qt!==null&&Qt.memoizedState.tag&1){if(l.flags|=2048,jl(9,zy.bind(null,l,d,p,o),void 0,null),Zt===null)throw Error(n(349));(ao&30)!==0||Fy(l,o,p)}return p}function Fy(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=vt.updateQueue,o===null?(o={lastEffect:null,stores:null},vt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function zy(i,o,l,d){o.value=l,o.getSnapshot=d,Uy(o)&&$y(i)}function jy(i,o,l){return l(function(){Uy(o)&&$y(i)})}function Uy(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!xr(i,l)}catch{return!0}}function $y(i){var o=Ii(i,1);o!==null&&Mr(o,i,1,-1)}function By(i){var o=ei();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:i},o.queue=i,i=i.dispatch=WS.bind(null,vt,i),[o.memoizedState,i]}function jl(i,o,l,d){return i={tag:i,create:o,destroy:l,deps:d,next:null},o=vt.updateQueue,o===null?(o={lastEffect:null,stores:null},vt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,o.lastEffect=i)),i}function qy(){return pr().memoizedState}function zc(i,o,l,d){var p=ei();vt.flags|=i,p.memoizedState=jl(1|o,l,void 0,d===void 0?null:d)}function jc(i,o,l,d){var p=pr();d=d===void 0?null:d;var y=void 0;if($t!==null){var w=$t.memoizedState;if(y=w.destroy,d!==null&&Af(d,w.deps)){p.memoizedState=jl(o,l,y,d);return}}vt.flags|=i,p.memoizedState=jl(1|o,l,y,d)}function Wy(i,o){return zc(8390656,8,i,o)}function Nf(i,o){return jc(2048,8,i,o)}function Hy(i,o){return jc(4,2,i,o)}function Gy(i,o){return jc(4,4,i,o)}function Ky(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Qy(i,o,l){return l=l!=null?l.concat([i]):null,jc(4,4,Ky.bind(null,o,i),l)}function Df(){}function Zy(i,o){var l=pr();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&Af(o,d[1])?d[0]:(l.memoizedState=[i,o],i)}function Jy(i,o){var l=pr();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&Af(o,d[1])?d[0]:(i=i(),l.memoizedState=[i,o],i)}function Yy(i,o,l){return(ao&21)===0?(i.baseState&&(i.baseState=!1,Un=!0),i.memoizedState=l):(xr(l,o)||(l=Zs(),vt.lanes|=l,lo|=l,i.baseState=!0),o)}function BS(i,o){var l=qe;qe=l!==0&&4>l?l:4,i(!0);var d=bf.transition;bf.transition={};try{i(!1),o()}finally{qe=l,bf.transition=d}}function Xy(){return pr().memoizedState}function qS(i,o,l){var d=ls(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},ev(i))tv(o,l);else if(l=Py(i,o,l,d),l!==null){var p=xn();Mr(l,i,d,p),nv(l,o,d)}}function WS(i,o,l){var d=ls(i),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(ev(i))tv(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var w=o.lastRenderedState,A=y(w,l);if(p.hasEagerState=!0,p.eagerState=A,xr(A,w)){var D=o.interleaved;D===null?(p.next=p,wf(o)):(p.next=D.next,D.next=p),o.interleaved=p;return}}catch{}finally{}l=Py(i,o,p,d),l!==null&&(p=xn(),Mr(l,i,d,p),nv(l,o,d))}}function ev(i){var o=i.alternate;return i===vt||o!==null&&o===vt}function tv(i,o){Vl=Fc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function nv(i,o,l){if((l&4194240)!==0){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,Gi(i,l)}}var Uc={readContext:fr,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useInsertionEffect:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useSyncExternalStore:gn,useId:gn,unstable_isNewReconciler:!1},HS={readContext:fr,useCallback:function(i,o){return ei().memoizedState=[i,o===void 0?null:o],i},useContext:fr,useEffect:Wy,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,zc(4194308,4,Ky.bind(null,o,i),l)},useLayoutEffect:function(i,o){return zc(4194308,4,i,o)},useInsertionEffect:function(i,o){return zc(4,2,i,o)},useMemo:function(i,o){var l=ei();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var d=ei();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=qS.bind(null,vt,i),[d.memoizedState,i]},useRef:function(i){var o=ei();return i={current:i},o.memoizedState=i},useState:By,useDebugValue:Df,useDeferredValue:function(i){return ei().memoizedState=i},useTransition:function(){var i=By(!1),o=i[0];return i=BS.bind(null,i[1]),ei().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var d=vt,p=ei();if(mt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=o(),Zt===null)throw Error(n(349));(ao&30)!==0||Fy(d,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,Wy(jy.bind(null,d,y,i),[i]),d.flags|=2048,jl(9,zy.bind(null,d,y,l,o),void 0,null),l},useId:function(){var i=ei(),o=Zt.identifierPrefix;if(mt){var l=Ti,d=Ei;l=(d&~(1<<32-An(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=Fl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=$S++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},GS={readContext:fr,useCallback:Zy,useContext:fr,useEffect:Nf,useImperativeHandle:Qy,useInsertionEffect:Hy,useLayoutEffect:Gy,useMemo:Jy,useReducer:xf,useRef:qy,useState:function(){return xf(zl)},useDebugValue:Df,useDeferredValue:function(i){var o=pr();return Yy(o,$t.memoizedState,i)},useTransition:function(){var i=xf(zl)[0],o=pr().memoizedState;return[i,o]},useMutableSource:Ly,useSyncExternalStore:Vy,useId:Xy,unstable_isNewReconciler:!1},KS={readContext:fr,useCallback:Zy,useContext:fr,useEffect:Nf,useImperativeHandle:Qy,useInsertionEffect:Hy,useLayoutEffect:Gy,useMemo:Jy,useReducer:Pf,useRef:qy,useState:function(){return Pf(zl)},useDebugValue:Df,useDeferredValue:function(i){var o=pr();return $t===null?o.memoizedState=i:Yy(o,$t.memoizedState,i)},useTransition:function(){var i=Pf(zl)[0],o=pr().memoizedState;return[i,o]},useMutableSource:Ly,useSyncExternalStore:Vy,useId:Xy,unstable_isNewReconciler:!1};function Nr(i,o){if(i&&i.defaultProps){o=ue({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function Of(i,o,l,d){o=i.memoizedState,l=l(d,o),l=l==null?o:ue({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var $c={isMounted:function(i){return(i=i._reactInternals)?Ir(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var d=xn(),p=ls(i),y=Si(d,p);y.payload=o,l!=null&&(y.callback=l),o=is(i,y,p),o!==null&&(Mr(o,i,p,d),Oc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var d=xn(),p=ls(i),y=Si(d,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=is(i,y,p),o!==null&&(Mr(o,i,p,d),Oc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=xn(),d=ls(i),p=Si(l,d);p.tag=2,o!=null&&(p.callback=o),o=is(i,p,d),o!==null&&(Mr(o,i,d,l),Oc(o,i,d))}};function rv(i,o,l,d,p,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,w):o.prototype&&o.prototype.isPureReactComponent?!bl(l,d)||!bl(p,y):!0}function iv(i,o,l){var d=!1,p=ts,y=o.contextType;return typeof y=="object"&&y!==null?y=fr(y):(p=jn(o)?no:mn.current,d=o.contextTypes,y=(d=d!=null)?ua(i,p):ts),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=$c,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function sv(i,o,l,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==i&&$c.enqueueReplaceState(o,o.state,null)}function Mf(i,o,l,d){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},Ef(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=fr(y):(y=jn(o)?no:mn.current,p.context=ua(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Of(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&$c.enqueueReplaceState(p,p.state,null),Mc(i,l,p,d),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function ya(i,o){try{var l="",d=o;do l+=xe(d),d=d.return;while(d);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function Lf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Vf(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var QS=typeof WeakMap=="function"?WeakMap:Map;function ov(i,o,l){l=Si(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){Qc||(Qc=!0,Yf=d),Vf(i,o)},l}function av(i,o,l){l=Si(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;l.payload=function(){return d(p)},l.callback=function(){Vf(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Vf(i,o),typeof d!="function"&&(os===null?os=new Set([this]):os.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})}),l}function lv(i,o,l){var d=i.pingCache;if(d===null){d=i.pingCache=new QS;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(l)||(p.add(l),i=uk.bind(null,i,o,l),o.then(i,i))}function uv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function cv(i,o,l,d,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Si(-1,1),o.tag=2,is(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var ZS=X.ReactCurrentOwner,Un=!1;function Cn(i,o,l,d){o.child=i===null?xy(o,null,l,d):fa(o,i.child,l,d)}function dv(i,o,l,d,p){l=l.render;var y=o.ref;return ma(o,p),d=Rf(i,o,l,d,y,p),l=Cf(),i!==null&&!Un?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,ki(i,o,p)):(mt&&l&&df(o),o.flags|=1,Cn(i,o,d,p),o.child)}function hv(i,o,l,d,p){if(i===null){var y=l.type;return typeof y=="function"&&!sp(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,fv(i,o,y,d,p)):(i=td(l.type,null,d,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var w=y.memoizedProps;if(l=l.compare,l=l!==null?l:bl,l(w,d)&&i.ref===o.ref)return ki(i,o,p)}return o.flags|=1,i=cs(y,d),i.ref=o.ref,i.return=o,o.child=i}function fv(i,o,l,d,p){if(i!==null){var y=i.memoizedProps;if(bl(y,d)&&i.ref===o.ref)if(Un=!1,o.pendingProps=d=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(Un=!0);else return o.lanes=i.lanes,ki(i,o,p)}return Ff(i,o,l,d,p)}function pv(i,o,l){var d=o.pendingProps,p=d.children,y=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(_a,rr),rr|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,at(_a,rr),rr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,at(_a,rr),rr|=d}else y!==null?(d=y.baseLanes|l,o.memoizedState=null):d=l,at(_a,rr),rr|=d;return Cn(i,o,p,l),o.child}function mv(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Ff(i,o,l,d,p){var y=jn(l)?no:mn.current;return y=ua(o,y),ma(o,p),l=Rf(i,o,l,d,y,p),d=Cf(),i!==null&&!Un?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,ki(i,o,p)):(mt&&d&&df(o),o.flags|=1,Cn(i,o,l,p),o.child)}function gv(i,o,l,d,p){if(jn(l)){var y=!0;bc(o)}else y=!1;if(ma(o,p),o.stateNode===null)qc(i,o),iv(o,l,d),Mf(o,l,d,p),d=!0;else if(i===null){var w=o.stateNode,A=o.memoizedProps;w.props=A;var D=w.context,q=l.contextType;typeof q=="object"&&q!==null?q=fr(q):(q=jn(l)?no:mn.current,q=ua(o,q));var ie=l.getDerivedStateFromProps,oe=typeof ie=="function"||typeof w.getSnapshotBeforeUpdate=="function";oe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==d||D!==q)&&sv(o,w,d,q),rs=!1;var re=o.memoizedState;w.state=re,Mc(o,d,w,p),D=o.memoizedState,A!==d||re!==D||zn.current||rs?(typeof ie=="function"&&(Of(o,l,ie,d),D=o.memoizedState),(A=rs||rv(o,l,A,d,re,D,q))?(oe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=D),w.props=d,w.state=D,w.context=q,d=A):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{w=o.stateNode,Ny(i,o),A=o.memoizedProps,q=o.type===o.elementType?A:Nr(o.type,A),w.props=q,oe=o.pendingProps,re=w.context,D=l.contextType,typeof D=="object"&&D!==null?D=fr(D):(D=jn(l)?no:mn.current,D=ua(o,D));var fe=l.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==oe||re!==D)&&sv(o,w,d,D),rs=!1,re=o.memoizedState,w.state=re,Mc(o,d,w,p);var ge=o.memoizedState;A!==oe||re!==ge||zn.current||rs?(typeof fe=="function"&&(Of(o,l,fe,d),ge=o.memoizedState),(q=rs||rv(o,l,q,d,re,ge,D)||!1)?(ie||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,ge,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,ge,D)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ge),w.props=d,w.state=ge,w.context=D,d=q):(typeof w.componentDidUpdate!="function"||A===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),d=!1)}return zf(i,o,l,d,y,p)}function zf(i,o,l,d,p,y){mv(i,o);var w=(o.flags&128)!==0;if(!d&&!w)return p&&Ey(o,l,!1),ki(i,o,y);d=o.stateNode,ZS.current=o;var A=w&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&w?(o.child=fa(o,i.child,null,y),o.child=fa(o,null,A,y)):Cn(i,o,A,y),o.memoizedState=d.state,p&&Ey(o,l,!0),o.child}function yv(i){var o=i.stateNode;o.pendingContext?_y(i,o.pendingContext,o.pendingContext!==o.context):o.context&&_y(i,o.context,!1),Tf(i,o.containerInfo)}function vv(i,o,l,d,p){return ha(),mf(p),o.flags|=256,Cn(i,o,l,d),o.child}var jf={dehydrated:null,treeContext:null,retryLane:0};function Uf(i){return{baseLanes:i,cachePool:null,transitions:null}}function _v(i,o,l){var d=o.pendingProps,p=yt.current,y=!1,w=(o.flags&128)!==0,A;if((A=w)||(A=i!==null&&i.memoizedState===null?!1:(p&2)!==0),A?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),at(yt,p&1),i===null)return pf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(w=d.children,i=d.fallback,y?(d=o.mode,y=o.child,w={mode:"hidden",children:w},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=nd(w,d,0,null),i=fo(i,d,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Uf(l),o.memoizedState=jf,i):$f(o,w));if(p=i.memoizedState,p!==null&&(A=p.dehydrated,A!==null))return JS(i,o,w,d,A,p,l);if(y){y=d.fallback,w=o.mode,p=i.child,A=p.sibling;var D={mode:"hidden",children:d.children};return(w&1)===0&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=D,o.deletions=null):(d=cs(p,D),d.subtreeFlags=p.subtreeFlags&14680064),A!==null?y=cs(A,y):(y=fo(y,w,l,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,w=i.child.memoizedState,w=w===null?Uf(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=i.childLanes&~l,o.memoizedState=jf,d}return y=i.child,i=y.sibling,d=cs(y,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=l),d.return=o,d.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=d,o.memoizedState=null,d}function $f(i,o){return o=nd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Bc(i,o,l,d){return d!==null&&mf(d),fa(o,i.child,null,l),i=$f(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function JS(i,o,l,d,p,y,w){if(l)return o.flags&256?(o.flags&=-257,d=Lf(Error(n(422))),Bc(i,o,w,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=d.fallback,p=o.mode,d=nd({mode:"visible",children:d.children},p,0,null),y=fo(y,p,w,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,(o.mode&1)!==0&&fa(o,i.child,null,w),o.child.memoizedState=Uf(w),o.memoizedState=jf,y);if((o.mode&1)===0)return Bc(i,o,w,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var A=d.dgst;return d=A,y=Error(n(419)),d=Lf(y,d,void 0),Bc(i,o,w,d)}if(A=(w&i.childLanes)!==0,Un||A){if(d=Zt,d!==null){switch(w&-w){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|w))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Ii(i,p),Mr(d,i,p,-1))}return ip(),d=Lf(Error(n(421))),Bc(i,o,w,d)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=ck.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,nr=Xi(p.nextSibling),tr=o,mt=!0,Pr=null,i!==null&&(dr[hr++]=Ei,dr[hr++]=Ti,dr[hr++]=ro,Ei=i.id,Ti=i.overflow,ro=o),o=$f(o,d.children),o.flags|=4096,o)}function wv(i,o,l){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),_f(i.return,o,l)}function Bf(i,o,l,d,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=p)}function Ev(i,o,l){var d=o.pendingProps,p=d.revealOrder,y=d.tail;if(Cn(i,o,d.children,l),d=yt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wv(i,l,o);else if(i.tag===19)wv(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(at(yt,d),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&Lc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Bf(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&Lc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Bf(o,!0,l,null,y);break;case"together":Bf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function qc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ki(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),lo|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,l=cs(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=cs(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function YS(i,o,l){switch(o.tag){case 3:yv(o),ha();break;case 5:My(o);break;case 1:jn(o.type)&&bc(o);break;case 4:Tf(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;at(Nc,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(at(yt,yt.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?_v(i,o,l):(at(yt,yt.current&1),i=ki(i,o,l),i!==null?i.sibling:null);at(yt,yt.current&1);break;case 19:if(d=(l&o.childLanes)!==0,(i.flags&128)!==0){if(d)return Ev(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),at(yt,yt.current),d)break;return null;case 22:case 23:return o.lanes=0,pv(i,o,l)}return ki(i,o,l)}var Tv,qf,Iv,Sv;Tv=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},qf=function(){},Iv=function(i,o,l,d){var p=i.memoizedProps;if(p!==d){i=o.stateNode,oo(Xr.current);var y=null;switch(l){case"input":p=tn(i,p),d=tn(i,d),y=[];break;case"select":p=ue({},p,{value:void 0}),d=ue({},d,{value:void 0}),y=[];break;case"textarea":p=qr(i,p),d=qr(i,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=Ic)}ji(l,d);var w;l=null;for(q in p)if(!d.hasOwnProperty(q)&&p.hasOwnProperty(q)&&p[q]!=null)if(q==="style"){var A=p[q];for(w in A)A.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(s.hasOwnProperty(q)?y||(y=[]):(y=y||[]).push(q,null));for(q in d){var D=d[q];if(A=p!=null?p[q]:void 0,d.hasOwnProperty(q)&&D!==A&&(D!=null||A!=null))if(q==="style")if(A){for(w in A)!A.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in D)D.hasOwnProperty(w)&&A[w]!==D[w]&&(l||(l={}),l[w]=D[w])}else l||(y||(y=[]),y.push(q,l)),l=D;else q==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,A=A?A.__html:void 0,D!=null&&A!==D&&(y=y||[]).push(q,D)):q==="children"?typeof D!="string"&&typeof D!="number"||(y=y||[]).push(q,""+D):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(s.hasOwnProperty(q)?(D!=null&&q==="onScroll"&&ct("scroll",i),y||A===D||(y=[])):(y=y||[]).push(q,D))}l&&(y=y||[]).push("style",l);var q=y;(o.updateQueue=q)&&(o.flags|=4)}},Sv=function(i,o,l,d){l!==d&&(o.flags|=4)};function Ul(i,o){if(!mt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function yn(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=l,o}function XS(i,o,l){var d=o.pendingProps;switch(hf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(o),null;case 1:return jn(o.type)&&kc(),yn(o),null;case 3:return d=o.stateNode,ga(),dt(zn),dt(mn),kf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(xc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Pr!==null&&(tp(Pr),Pr=null))),qf(i,o),yn(o),null;case 5:If(o);var p=oo(Ll.current);if(l=o.type,i!==null&&o.stateNode!=null)Iv(i,o,l,d,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(n(166));return yn(o),null}if(i=oo(Xr.current),xc(o)){d=o.stateNode,l=o.type;var y=o.memoizedProps;switch(d[Yr]=o,d[Pl]=y,i=(o.mode&1)!==0,l){case"dialog":ct("cancel",d),ct("close",d);break;case"iframe":case"object":case"embed":ct("load",d);break;case"video":case"audio":for(p=0;p<Rl.length;p++)ct(Rl[p],d);break;case"source":ct("error",d);break;case"img":case"image":case"link":ct("error",d),ct("load",d);break;case"details":ct("toggle",d);break;case"input":Qn(d,y),ct("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},ct("invalid",d);break;case"textarea":di(d,y),ct("invalid",d)}ji(l,y),p=null;for(var w in y)if(y.hasOwnProperty(w)){var A=y[w];w==="children"?typeof A=="string"?d.textContent!==A&&(y.suppressHydrationWarning!==!0&&Tc(d.textContent,A,i),p=["children",A]):typeof A=="number"&&d.textContent!==""+A&&(y.suppressHydrationWarning!==!0&&Tc(d.textContent,A,i),p=["children",""+A]):s.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&ct("scroll",d)}switch(l){case"input":zt(d),js(d,y,!0);break;case"textarea":zt(d),Us(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Ic)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{w=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=bt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=w.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=w.createElement(l,{is:d.is}):(i=w.createElement(l),l==="select"&&(w=i,d.multiple?w.multiple=!0:d.size&&(w.size=d.size))):i=w.createElementNS(i,l),i[Yr]=o,i[Pl]=d,Tv(i,o,!1,!1),o.stateNode=i;e:{switch(w=qs(l,d),l){case"dialog":ct("cancel",i),ct("close",i),p=d;break;case"iframe":case"object":case"embed":ct("load",i),p=d;break;case"video":case"audio":for(p=0;p<Rl.length;p++)ct(Rl[p],i);p=d;break;case"source":ct("error",i),p=d;break;case"img":case"image":case"link":ct("error",i),ct("load",i),p=d;break;case"details":ct("toggle",i),p=d;break;case"input":Qn(i,d),p=tn(i,d),ct("invalid",i);break;case"option":p=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},p=ue({},d,{value:void 0}),ct("invalid",i);break;case"textarea":di(i,d),p=qr(i,d),ct("invalid",i);break;default:p=d}ji(l,p),A=p;for(y in A)if(A.hasOwnProperty(y)){var D=A[y];y==="style"?Bs(i,D):y==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&wr(i,D)):y==="children"?typeof D=="string"?(l!=="textarea"||D!=="")&&Er(i,D):typeof D=="number"&&Er(i,""+D):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?D!=null&&y==="onScroll"&&ct("scroll",i):D!=null&&K(i,y,D,w))}switch(l){case"input":zt(i),js(i,d,!1);break;case"textarea":zt(i),Us(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Ve(d.value));break;case"select":i.multiple=!!d.multiple,y=d.value,y!=null?On(i,!!d.multiple,y,!1):d.defaultValue!=null&&On(i,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=Ic)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return yn(o),null;case 6:if(i&&o.stateNode!=null)Sv(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(n(166));if(l=oo(Ll.current),oo(Xr.current),xc(o)){if(d=o.stateNode,l=o.memoizedProps,d[Yr]=o,(y=d.nodeValue!==l)&&(i=tr,i!==null))switch(i.tag){case 3:Tc(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Tc(d.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Yr]=o,o.stateNode=d}return yn(o),null;case 13:if(dt(yt),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(mt&&nr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Ay(),ha(),o.flags|=98560,y=!1;else if(y=xc(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(n(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[Yr]=o}else ha(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yn(o),y=!1}else Pr!==null&&(tp(Pr),Pr=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(yt.current&1)!==0?Bt===0&&(Bt=3):ip())),o.updateQueue!==null&&(o.flags|=4),yn(o),null);case 4:return ga(),qf(i,o),i===null&&Cl(o.stateNode.containerInfo),yn(o),null;case 10:return vf(o.type._context),yn(o),null;case 17:return jn(o.type)&&kc(),yn(o),null;case 19:if(dt(yt),y=o.memoizedState,y===null)return yn(o),null;if(d=(o.flags&128)!==0,w=y.rendering,w===null)if(d)Ul(y,!1);else{if(Bt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=Lc(i),w!==null){for(o.flags|=128,Ul(y,!1),d=w.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)y=l,i=d,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,i=w.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return at(yt,yt.current&1|2),o.child}i=i.sibling}y.tail!==null&&ot()>wa&&(o.flags|=128,d=!0,Ul(y,!1),o.lanes=4194304)}else{if(!d)if(i=Lc(w),i!==null){if(o.flags|=128,d=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Ul(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!mt)return yn(o),null}else 2*ot()-y.renderingStartTime>wa&&l!==1073741824&&(o.flags|=128,d=!0,Ul(y,!1),o.lanes=4194304);y.isBackwards?(w.sibling=o.child,o.child=w):(l=y.last,l!==null?l.sibling=w:o.child=w,y.last=w)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=ot(),o.sibling=null,l=yt.current,at(yt,d?l&1|2:l&1),o):(yn(o),null);case 22:case 23:return rp(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(rr&1073741824)!==0&&(yn(o),o.subtreeFlags&6&&(o.flags|=8192)):yn(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function ek(i,o){switch(hf(o),o.tag){case 1:return jn(o.type)&&kc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ga(),dt(zn),dt(mn),kf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return If(o),null;case 13:if(dt(yt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));ha()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return dt(yt),null;case 4:return ga(),null;case 10:return vf(o.type._context),null;case 22:case 23:return rp(),null;case 24:return null;default:return null}}var Wc=!1,vn=!1,tk=typeof WeakSet=="function"?WeakSet:Set,pe=null;function va(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){St(i,o,d)}else l.current=null}function Wf(i,o,l){try{l()}catch(d){St(i,o,d)}}var kv=!1;function nk(i,o){if(nf=Zi,i=ry(),Kh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var w=0,A=-1,D=-1,q=0,ie=0,oe=i,re=null;t:for(;;){for(var fe;oe!==l||p!==0&&oe.nodeType!==3||(A=w+p),oe!==y||d!==0&&oe.nodeType!==3||(D=w+d),oe.nodeType===3&&(w+=oe.nodeValue.length),(fe=oe.firstChild)!==null;)re=oe,oe=fe;for(;;){if(oe===i)break t;if(re===l&&++q===p&&(A=w),re===y&&++ie===d&&(D=w),(fe=oe.nextSibling)!==null)break;oe=re,re=oe.parentNode}oe=fe}l=A===-1||D===-1?null:{start:A,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(rf={focusedElem:i,selectionRange:l},Zi=!1,pe=o;pe!==null;)if(o=pe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,pe=i;else for(;pe!==null;){o=pe;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var _e=ge.memoizedProps,At=ge.memoizedState,U=o.stateNode,V=U.getSnapshotBeforeUpdate(o.elementType===o.type?_e:Nr(o.type,_e),At);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=o.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(le){St(o,o.return,le)}if(i=o.sibling,i!==null){i.return=o.return,pe=i;break}pe=o.return}return ge=kv,kv=!1,ge}function $l(i,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Wf(o,l,y)}p=p.next}while(p!==d)}}function Hc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function Hf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function bv(i){var o=i.alternate;o!==null&&(i.alternate=null,bv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Yr],delete o[Pl],delete o[lf],delete o[FS],delete o[zS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Av(i){return i.tag===5||i.tag===3||i.tag===4}function Rv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Av(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Gf(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ic));else if(d!==4&&(i=i.child,i!==null))for(Gf(i,o,l),i=i.sibling;i!==null;)Gf(i,o,l),i=i.sibling}function Kf(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Kf(i,o,l),i=i.sibling;i!==null;)Kf(i,o,l),i=i.sibling}var on=null,Dr=!1;function ss(i,o,l){for(l=l.child;l!==null;)Cv(i,o,l),l=l.sibling}function Cv(i,o,l){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(Ks,l)}catch{}switch(l.tag){case 5:vn||va(l,o);case 6:var d=on,p=Dr;on=null,ss(i,o,l),on=d,Dr=p,on!==null&&(Dr?(i=on,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):on.removeChild(l.stateNode));break;case 18:on!==null&&(Dr?(i=on,l=l.stateNode,i.nodeType===8?af(i.parentNode,l):i.nodeType===1&&af(i,l),Rr(i)):af(on,l.stateNode));break;case 4:d=on,p=Dr,on=l.stateNode.containerInfo,Dr=!0,ss(i,o,l),on=d,Dr=p;break;case 0:case 11:case 14:case 15:if(!vn&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&Wf(l,o,w),p=p.next}while(p!==d)}ss(i,o,l);break;case 1:if(!vn&&(va(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(A){St(l,o,A)}ss(i,o,l);break;case 21:ss(i,o,l);break;case 22:l.mode&1?(vn=(d=vn)||l.memoizedState!==null,ss(i,o,l),vn=d):ss(i,o,l);break;default:ss(i,o,l)}}function xv(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new tk),o.forEach(function(d){var p=dk.bind(null,i,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Or(i,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var y=i,w=o,A=w;e:for(;A!==null;){switch(A.tag){case 5:on=A.stateNode,Dr=!1;break e;case 3:on=A.stateNode.containerInfo,Dr=!0;break e;case 4:on=A.stateNode.containerInfo,Dr=!0;break e}A=A.return}if(on===null)throw Error(n(160));Cv(y,w,p),on=null,Dr=!1;var D=p.alternate;D!==null&&(D.return=null),p.return=null}catch(q){St(p,o,q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Pv(o,i),o=o.sibling}function Pv(i,o){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Or(o,i),ti(i),d&4){try{$l(3,i,i.return),Hc(3,i)}catch(_e){St(i,i.return,_e)}try{$l(5,i,i.return)}catch(_e){St(i,i.return,_e)}}break;case 1:Or(o,i),ti(i),d&512&&l!==null&&va(l,l.return);break;case 5:if(Or(o,i),ti(i),d&512&&l!==null&&va(l,l.return),i.flags&32){var p=i.stateNode;try{Er(p,"")}catch(_e){St(i,i.return,_e)}}if(d&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,w=l!==null?l.memoizedProps:y,A=i.type,D=i.updateQueue;if(i.updateQueue=null,D!==null)try{A==="input"&&y.type==="radio"&&y.name!=null&&sr(p,y),qs(A,w);var q=qs(A,y);for(w=0;w<D.length;w+=2){var ie=D[w],oe=D[w+1];ie==="style"?Bs(p,oe):ie==="dangerouslySetInnerHTML"?wr(p,oe):ie==="children"?Er(p,oe):K(p,ie,oe,q)}switch(A){case"input":zi(p,y);break;case"textarea":hi(p,y);break;case"select":var re=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var fe=y.value;fe!=null?On(p,!!y.multiple,fe,!1):re!==!!y.multiple&&(y.defaultValue!=null?On(p,!!y.multiple,y.defaultValue,!0):On(p,!!y.multiple,y.multiple?[]:"",!1))}p[Pl]=y}catch(_e){St(i,i.return,_e)}}break;case 6:if(Or(o,i),ti(i),d&4){if(i.stateNode===null)throw Error(n(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(_e){St(i,i.return,_e)}}break;case 3:if(Or(o,i),ti(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Rr(o.containerInfo)}catch(_e){St(i,i.return,_e)}break;case 4:Or(o,i),ti(i);break;case 13:Or(o,i),ti(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Jf=ot())),d&4&&xv(i);break;case 22:if(ie=l!==null&&l.memoizedState!==null,i.mode&1?(vn=(q=vn)||ie,Or(o,i),vn=q):Or(o,i),ti(i),d&8192){if(q=i.memoizedState!==null,(i.stateNode.isHidden=q)&&!ie&&(i.mode&1)!==0)for(pe=i,ie=i.child;ie!==null;){for(oe=pe=ie;pe!==null;){switch(re=pe,fe=re.child,re.tag){case 0:case 11:case 14:case 15:$l(4,re,re.return);break;case 1:va(re,re.return);var ge=re.stateNode;if(typeof ge.componentWillUnmount=="function"){d=re,l=re.return;try{o=d,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(_e){St(d,l,_e)}}break;case 5:va(re,re.return);break;case 22:if(re.memoizedState!==null){Ov(oe);continue}}fe!==null?(fe.return=re,pe=fe):Ov(oe)}ie=ie.sibling}e:for(ie=null,oe=i;;){if(oe.tag===5){if(ie===null){ie=oe;try{p=oe.stateNode,q?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(A=oe.stateNode,D=oe.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,A.style.display=$s("display",w))}catch(_e){St(i,i.return,_e)}}}else if(oe.tag===6){if(ie===null)try{oe.stateNode.nodeValue=q?"":oe.memoizedProps}catch(_e){St(i,i.return,_e)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===i)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===i)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===i)break e;ie===oe&&(ie=null),oe=oe.return}ie===oe&&(ie=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:Or(o,i),ti(i),d&4&&xv(i);break;case 21:break;default:Or(o,i),ti(i)}}function ti(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(Av(l)){var d=l;break e}l=l.return}throw Error(n(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Er(p,""),d.flags&=-33);var y=Rv(i);Kf(i,y,p);break;case 3:case 4:var w=d.stateNode.containerInfo,A=Rv(i);Gf(i,A,w);break;default:throw Error(n(161))}}catch(D){St(i,i.return,D)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function rk(i,o,l){pe=i,Nv(i)}function Nv(i,o,l){for(var d=(i.mode&1)!==0;pe!==null;){var p=pe,y=p.child;if(p.tag===22&&d){var w=p.memoizedState!==null||Wc;if(!w){var A=p.alternate,D=A!==null&&A.memoizedState!==null||vn;A=Wc;var q=vn;if(Wc=w,(vn=D)&&!q)for(pe=p;pe!==null;)w=pe,D=w.child,w.tag===22&&w.memoizedState!==null?Mv(p):D!==null?(D.return=w,pe=D):Mv(p);for(;y!==null;)pe=y,Nv(y),y=y.sibling;pe=p,Wc=A,vn=q}Dv(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,pe=y):Dv(i)}}function Dv(i){for(;pe!==null;){var o=pe;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:vn||Hc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!vn)if(l===null)d.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Nr(o.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Oy(o,y,d);break;case 3:var w=o.updateQueue;if(w!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Oy(o,w,l)}break;case 5:var A=o.stateNode;if(l===null&&o.flags&4){l=A;var D=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&l.focus();break;case"img":D.src&&(l.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var q=o.alternate;if(q!==null){var ie=q.memoizedState;if(ie!==null){var oe=ie.dehydrated;oe!==null&&Rr(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}vn||o.flags&512&&Hf(o)}catch(re){St(o,o.return,re)}}if(o===i){pe=null;break}if(l=o.sibling,l!==null){l.return=o.return,pe=l;break}pe=o.return}}function Ov(i){for(;pe!==null;){var o=pe;if(o===i){pe=null;break}var l=o.sibling;if(l!==null){l.return=o.return,pe=l;break}pe=o.return}}function Mv(i){for(;pe!==null;){var o=pe;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Hc(4,o)}catch(D){St(o,l,D)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(D){St(o,p,D)}}var y=o.return;try{Hf(o)}catch(D){St(o,y,D)}break;case 5:var w=o.return;try{Hf(o)}catch(D){St(o,w,D)}}}catch(D){St(o,o.return,D)}if(o===i){pe=null;break}var A=o.sibling;if(A!==null){A.return=o.return,pe=A;break}pe=o.return}}var ik=Math.ceil,Gc=X.ReactCurrentDispatcher,Qf=X.ReactCurrentOwner,mr=X.ReactCurrentBatchConfig,Je=0,Zt=null,Mt=null,an=0,rr=0,_a=es(0),Bt=0,Bl=null,lo=0,Kc=0,Zf=0,ql=null,$n=null,Jf=0,wa=1/0,bi=null,Qc=!1,Yf=null,os=null,Zc=!1,as=null,Jc=0,Wl=0,Xf=null,Yc=-1,Xc=0;function xn(){return(Je&6)!==0?ot():Yc!==-1?Yc:Yc=ot()}function ls(i){return(i.mode&1)===0?1:(Je&2)!==0&&an!==0?an&-an:US.transition!==null?(Xc===0&&(Xc=Zs()),Xc):(i=qe,i!==0||(i=window.event,i=i===void 0?16:_l(i.type)),i)}function Mr(i,o,l,d){if(50<Wl)throw Wl=0,Xf=null,Error(n(185));Hi(i,l,d),((Je&2)===0||i!==Zt)&&(i===Zt&&((Je&2)===0&&(Kc|=l),Bt===4&&us(i,an)),Bn(i,d),l===1&&Je===0&&(o.mode&1)===0&&(wa=ot()+500,Ac&&ns()))}function Bn(i,o){var l=i.callbackNode;pi(i,o);var d=Qs(i,i===Zt?an:0);if(d===0)l!==null&&pl(l),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(l!=null&&pl(l),o===1)i.tag===0?jS(Vv.bind(null,i)):Ty(Vv.bind(null,i)),LS(function(){(Je&6)===0&&ns()}),l=null;else{switch(Ki(d)){case 1:l=Gs;break;case 4:l=Bi;break;case 16:l=lr;break;case 536870912:l=Xu;break;default:l=lr}l=Wv(l,Lv.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Lv(i,o){if(Yc=-1,Xc=0,(Je&6)!==0)throw Error(n(327));var l=i.callbackNode;if(Ea()&&i.callbackNode!==l)return null;var d=Qs(i,i===Zt?an:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||o)o=ed(i,d);else{o=d;var p=Je;Je|=2;var y=zv();(Zt!==i||an!==o)&&(bi=null,wa=ot()+500,co(i,o));do try{ak();break}catch(A){Fv(i,A)}while(!0);yf(),Gc.current=y,Je=p,Mt!==null?o=0:(Zt=null,an=0,o=Bt)}if(o!==0){if(o===2&&(p=Yn(i),p!==0&&(d=p,o=ep(i,p))),o===1)throw l=Bl,co(i,0),us(i,d),Bn(i,ot()),l;if(o===6)us(i,d);else{if(p=i.current.alternate,(d&30)===0&&!sk(p)&&(o=ed(i,d),o===2&&(y=Yn(i),y!==0&&(d=y,o=ep(i,y))),o===1))throw l=Bl,co(i,0),us(i,d),Bn(i,ot()),l;switch(i.finishedWork=p,i.finishedLanes=d,o){case 0:case 1:throw Error(n(345));case 2:ho(i,$n,bi);break;case 3:if(us(i,d),(d&130023424)===d&&(o=Jf+500-ot(),10<o)){if(Qs(i,0)!==0)break;if(p=i.suspendedLanes,(p&d)!==d){xn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=of(ho.bind(null,i,$n,bi),o);break}ho(i,$n,bi);break;case 4:if(us(i,d),(d&4194240)===d)break;for(o=i.eventTimes,p=-1;0<d;){var w=31-An(d);y=1<<w,w=o[w],w>p&&(p=w),d&=~y}if(d=p,d=ot()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*ik(d/1960))-d,10<d){i.timeoutHandle=of(ho.bind(null,i,$n,bi),d);break}ho(i,$n,bi);break;case 5:ho(i,$n,bi);break;default:throw Error(n(329))}}}return Bn(i,ot()),i.callbackNode===l?Lv.bind(null,i):null}function ep(i,o){var l=ql;return i.current.memoizedState.isDehydrated&&(co(i,o).flags|=256),i=ed(i,o),i!==2&&(o=$n,$n=l,o!==null&&tp(o)),i}function tp(i){$n===null?$n=i:$n.push.apply($n,i)}function sk(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],y=p.getSnapshot;p=p.value;try{if(!xr(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function us(i,o){for(o&=~Zf,o&=~Kc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-An(o),d=1<<l;i[l]=-1,o&=~d}}function Vv(i){if((Je&6)!==0)throw Error(n(327));Ea();var o=Qs(i,0);if((o&1)===0)return Bn(i,ot()),null;var l=ed(i,o);if(i.tag!==0&&l===2){var d=Yn(i);d!==0&&(o=d,l=ep(i,d))}if(l===1)throw l=Bl,co(i,0),us(i,o),Bn(i,ot()),l;if(l===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,ho(i,$n,bi),Bn(i,ot()),null}function np(i,o){var l=Je;Je|=1;try{return i(o)}finally{Je=l,Je===0&&(wa=ot()+500,Ac&&ns())}}function uo(i){as!==null&&as.tag===0&&(Je&6)===0&&Ea();var o=Je;Je|=1;var l=mr.transition,d=qe;try{if(mr.transition=null,qe=1,i)return i()}finally{qe=d,mr.transition=l,Je=o,(Je&6)===0&&ns()}}function rp(){rr=_a.current,dt(_a)}function co(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,MS(l)),Mt!==null)for(l=Mt.return;l!==null;){var d=l;switch(hf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&kc();break;case 3:ga(),dt(zn),dt(mn),kf();break;case 5:If(d);break;case 4:ga();break;case 13:dt(yt);break;case 19:dt(yt);break;case 10:vf(d.type._context);break;case 22:case 23:rp()}l=l.return}if(Zt=i,Mt=i=cs(i.current,null),an=rr=o,Bt=0,Bl=null,Zf=Kc=lo=0,$n=ql=null,so!==null){for(o=0;o<so.length;o++)if(l=so[o],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,y=l.pending;if(y!==null){var w=y.next;y.next=p,d.next=w}l.pending=d}so=null}return i}function Fv(i,o){do{var l=Mt;try{if(yf(),Vc.current=Uc,Fc){for(var d=vt.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Fc=!1}if(ao=0,Qt=$t=vt=null,Vl=!1,Fl=0,Qf.current=null,l===null||l.return===null){Bt=1,Bl=o,Mt=null;break}e:{var y=i,w=l.return,A=l,D=o;if(o=an,A.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var q=D,ie=A,oe=ie.tag;if((ie.mode&1)===0&&(oe===0||oe===11||oe===15)){var re=ie.alternate;re?(ie.updateQueue=re.updateQueue,ie.memoizedState=re.memoizedState,ie.lanes=re.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=uv(w);if(fe!==null){fe.flags&=-257,cv(fe,w,A,y,o),fe.mode&1&&lv(y,q,o),o=fe,D=q;var ge=o.updateQueue;if(ge===null){var _e=new Set;_e.add(D),o.updateQueue=_e}else ge.add(D);break e}else{if((o&1)===0){lv(y,q,o),ip();break e}D=Error(n(426))}}else if(mt&&A.mode&1){var At=uv(w);if(At!==null){(At.flags&65536)===0&&(At.flags|=256),cv(At,w,A,y,o),mf(ya(D,A));break e}}y=D=ya(D,A),Bt!==4&&(Bt=2),ql===null?ql=[y]:ql.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var U=ov(y,D,o);Dy(y,U);break e;case 1:A=D;var V=y.type,B=y.stateNode;if((y.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(os===null||!os.has(B)))){y.flags|=65536,o&=-o,y.lanes|=o;var le=av(y,A,o);Dy(y,le);break e}}y=y.return}while(y!==null)}Uv(l)}catch(Te){o=Te,Mt===l&&l!==null&&(Mt=l=l.return);continue}break}while(!0)}function zv(){var i=Gc.current;return Gc.current=Uc,i===null?Uc:i}function ip(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Zt===null||(lo&268435455)===0&&(Kc&268435455)===0||us(Zt,an)}function ed(i,o){var l=Je;Je|=2;var d=zv();(Zt!==i||an!==o)&&(bi=null,co(i,o));do try{ok();break}catch(p){Fv(i,p)}while(!0);if(yf(),Je=l,Gc.current=d,Mt!==null)throw Error(n(261));return Zt=null,an=0,Bt}function ok(){for(;Mt!==null;)jv(Mt)}function ak(){for(;Mt!==null&&!Ju();)jv(Mt)}function jv(i){var o=qv(i.alternate,i,rr);i.memoizedProps=i.pendingProps,o===null?Uv(i):Mt=o,Qf.current=null}function Uv(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=XS(l,o,rr),l!==null){Mt=l;return}}else{if(l=ek(l,o),l!==null){l.flags&=32767,Mt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Bt=6,Mt=null;return}}if(o=o.sibling,o!==null){Mt=o;return}Mt=o=i}while(o!==null);Bt===0&&(Bt=5)}function ho(i,o,l){var d=qe,p=mr.transition;try{mr.transition=null,qe=1,lk(i,o,l,d)}finally{mr.transition=p,qe=d}return null}function lk(i,o,l,d){do Ea();while(as!==null);if((Je&6)!==0)throw Error(n(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(it(i,y),i===Zt&&(Mt=Zt=null,an=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Zc||(Zc=!0,Wv(lr,function(){return Ea(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=mr.transition,mr.transition=null;var w=qe;qe=1;var A=Je;Je|=4,Qf.current=null,nk(i,l),Pv(l,i),RS(rf),Zi=!!nf,rf=nf=null,i.current=l,rk(l),jh(),Je=A,qe=w,mr.transition=y}else i.current=l;if(Zc&&(Zc=!1,as=i,Jc=p),y=i.pendingLanes,y===0&&(os=null),ec(l.stateNode),Bn(i,ot()),o!==null)for(d=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(Qc)throw Qc=!1,i=Yf,Yf=null,i;return(Jc&1)!==0&&i.tag!==0&&Ea(),y=i.pendingLanes,(y&1)!==0?i===Xf?Wl++:(Wl=0,Xf=i):Wl=0,ns(),null}function Ea(){if(as!==null){var i=Ki(Jc),o=mr.transition,l=qe;try{if(mr.transition=null,qe=16>i?16:i,as===null)var d=!1;else{if(i=as,as=null,Jc=0,(Je&6)!==0)throw Error(n(331));var p=Je;for(Je|=4,pe=i.current;pe!==null;){var y=pe,w=y.child;if((pe.flags&16)!==0){var A=y.deletions;if(A!==null){for(var D=0;D<A.length;D++){var q=A[D];for(pe=q;pe!==null;){var ie=pe;switch(ie.tag){case 0:case 11:case 15:$l(8,ie,y)}var oe=ie.child;if(oe!==null)oe.return=ie,pe=oe;else for(;pe!==null;){ie=pe;var re=ie.sibling,fe=ie.return;if(bv(ie),ie===q){pe=null;break}if(re!==null){re.return=fe,pe=re;break}pe=fe}}}var ge=y.alternate;if(ge!==null){var _e=ge.child;if(_e!==null){ge.child=null;do{var At=_e.sibling;_e.sibling=null,_e=At}while(_e!==null)}}pe=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,pe=w;else e:for(;pe!==null;){if(y=pe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:$l(9,y,y.return)}var U=y.sibling;if(U!==null){U.return=y.return,pe=U;break e}pe=y.return}}var V=i.current;for(pe=V;pe!==null;){w=pe;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,pe=B;else e:for(w=V;pe!==null;){if(A=pe,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Hc(9,A)}}catch(Te){St(A,A.return,Te)}if(A===w){pe=null;break e}var le=A.sibling;if(le!==null){le.return=A.return,pe=le;break e}pe=A.return}}if(Je=p,ns(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(Ks,i)}catch{}d=!0}return d}finally{qe=l,mr.transition=o}}return!1}function $v(i,o,l){o=ya(l,o),o=ov(i,o,1),i=is(i,o,1),o=xn(),i!==null&&(Hi(i,1,o),Bn(i,o))}function St(i,o,l){if(i.tag===3)$v(i,i,l);else for(;o!==null;){if(o.tag===3){$v(o,i,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(os===null||!os.has(d))){i=ya(l,i),i=av(o,i,1),o=is(o,i,1),i=xn(),o!==null&&(Hi(o,1,i),Bn(o,i));break}}o=o.return}}function uk(i,o,l){var d=i.pingCache;d!==null&&d.delete(o),o=xn(),i.pingedLanes|=i.suspendedLanes&l,Zt===i&&(an&l)===l&&(Bt===4||Bt===3&&(an&130023424)===an&&500>ot()-Jf?co(i,0):Zf|=l),Bn(i,o)}function Bv(i,o){o===0&&((i.mode&1)===0?o=1:(o=qo,qo<<=1,(qo&130023424)===0&&(qo=4194304)));var l=xn();i=Ii(i,o),i!==null&&(Hi(i,o,l),Bn(i,l))}function ck(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),Bv(i,l)}function dk(i,o){var l=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(n(314))}d!==null&&d.delete(o),Bv(i,l)}var qv;qv=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||zn.current)Un=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return Un=!1,YS(i,o,l);Un=(i.flags&131072)!==0}else Un=!1,mt&&(o.flags&1048576)!==0&&Iy(o,Cc,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;qc(i,o),i=o.pendingProps;var p=ua(o,mn.current);ma(o,l),p=Rf(null,o,d,i,p,l);var y=Cf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,jn(d)?(y=!0,bc(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Ef(o),p.updater=$c,o.stateNode=p,p._reactInternals=o,Mf(o,d,i,l),o=zf(null,o,d,!0,y,l)):(o.tag=0,mt&&y&&df(o),Cn(null,o,p,l),o=o.child),o;case 16:d=o.elementType;e:{switch(qc(i,o),i=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=fk(d),i=Nr(d,i),p){case 0:o=Ff(null,o,d,i,l);break e;case 1:o=gv(null,o,d,i,l);break e;case 11:o=dv(null,o,d,i,l);break e;case 14:o=hv(null,o,d,Nr(d.type,i),l);break e}throw Error(n(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Nr(d,p),Ff(i,o,d,p,l);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Nr(d,p),gv(i,o,d,p,l);case 3:e:{if(yv(o),i===null)throw Error(n(387));d=o.pendingProps,y=o.memoizedState,p=y.element,Ny(i,o),Mc(o,d,null,l);var w=o.memoizedState;if(d=w.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=ya(Error(n(423)),o),o=vv(i,o,d,l,p);break e}else if(d!==p){p=ya(Error(n(424)),o),o=vv(i,o,d,l,p);break e}else for(nr=Xi(o.stateNode.containerInfo.firstChild),tr=o,mt=!0,Pr=null,l=xy(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ha(),d===p){o=ki(i,o,l);break e}Cn(i,o,d,l)}o=o.child}return o;case 5:return My(o),i===null&&pf(o),d=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,w=p.children,sf(d,p)?w=null:y!==null&&sf(d,y)&&(o.flags|=32),mv(i,o),Cn(i,o,w,l),o.child;case 6:return i===null&&pf(o),null;case 13:return _v(i,o,l);case 4:return Tf(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=fa(o,null,d,l):Cn(i,o,d,l),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Nr(d,p),dv(i,o,d,p,l);case 7:return Cn(i,o,o.pendingProps,l),o.child;case 8:return Cn(i,o,o.pendingProps.children,l),o.child;case 12:return Cn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,y=o.memoizedProps,w=p.value,at(Nc,d._currentValue),d._currentValue=w,y!==null)if(xr(y.value,w)){if(y.children===p.children&&!zn.current){o=ki(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var A=y.dependencies;if(A!==null){w=y.child;for(var D=A.firstContext;D!==null;){if(D.context===d){if(y.tag===1){D=Si(-1,l&-l),D.tag=2;var q=y.updateQueue;if(q!==null){q=q.shared;var ie=q.pending;ie===null?D.next=D:(D.next=ie.next,ie.next=D),q.pending=D}}y.lanes|=l,D=y.alternate,D!==null&&(D.lanes|=l),_f(y.return,l,o),A.lanes|=l;break}D=D.next}}else if(y.tag===10)w=y.type===o.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(n(341));w.lanes|=l,A=w.alternate,A!==null&&(A.lanes|=l),_f(w,l,o),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===o){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}Cn(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,ma(o,l),p=fr(p),d=d(p),o.flags|=1,Cn(i,o,d,l),o.child;case 14:return d=o.type,p=Nr(d,o.pendingProps),p=Nr(d.type,p),hv(i,o,d,p,l);case 15:return fv(i,o,o.type,o.pendingProps,l);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Nr(d,p),qc(i,o),o.tag=1,jn(d)?(i=!0,bc(o)):i=!1,ma(o,l),iv(o,d,p),Mf(o,d,p,l),zf(null,o,d,!0,i,l);case 19:return Ev(i,o,l);case 22:return pv(i,o,l)}throw Error(n(156,o.tag))};function Wv(i,o){return $o(i,o)}function hk(i,o,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(i,o,l,d){return new hk(i,o,l,d)}function sp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function fk(i){if(typeof i=="function")return sp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===L)return 11;if(i===et)return 14}return 2}function cs(i,o){var l=i.alternate;return l===null?(l=gr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function td(i,o,l,d,p,y){var w=2;if(d=i,typeof i=="function")sp(i)&&(w=1);else if(typeof i=="string")w=5;else e:switch(i){case C:return fo(l.children,p,y,o);case T:w=8,p|=8;break;case k:return i=gr(12,l,o,p|2),i.elementType=k,i.lanes=y,i;case R:return i=gr(13,l,o,p),i.elementType=R,i.lanes=y,i;case Ue:return i=gr(19,l,o,p),i.elementType=Ue,i.lanes=y,i;case ne:return nd(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case P:w=10;break e;case x:w=9;break e;case L:w=11;break e;case et:w=14;break e;case Ze:w=16,d=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return o=gr(w,l,o,p),o.elementType=i,o.type=d,o.lanes=y,o}function fo(i,o,l,d){return i=gr(7,i,d,o),i.lanes=l,i}function nd(i,o,l,d){return i=gr(22,i,d,o),i.elementType=ne,i.lanes=l,i.stateNode={isHidden:!1},i}function op(i,o,l){return i=gr(6,i,null,o),i.lanes=l,i}function ap(i,o,l){return o=gr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function pk(i,o,l,d,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wi(0),this.expirationTimes=Wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function lp(i,o,l,d,p,y,w,A,D){return i=new pk(i,o,l,A,D),o===1?(o=1,y===!0&&(o|=8)):o=0,y=gr(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ef(y),i}function mk(i,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:d==null?null:""+d,children:i,containerInfo:o,implementation:l}}function Hv(i){if(!i)return ts;i=i._reactInternals;e:{if(Ir(i)!==i||i.tag!==1)throw Error(n(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(jn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(i.tag===1){var l=i.type;if(jn(l))return wy(i,l,o)}return o}function Gv(i,o,l,d,p,y,w,A,D){return i=lp(l,d,!0,i,p,y,w,A,D),i.context=Hv(null),l=i.current,d=xn(),p=ls(l),y=Si(d,p),y.callback=o??null,is(l,y,p),i.current.lanes=p,Hi(i,p,d),Bn(i,d),i}function rd(i,o,l,d){var p=o.current,y=xn(),w=ls(p);return l=Hv(l),o.context===null?o.context=l:o.pendingContext=l,o=Si(y,w),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=is(p,o,w),i!==null&&(Mr(i,p,w,y),Oc(i,p,w)),w}function id(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Kv(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function up(i,o){Kv(i,o),(i=i.alternate)&&Kv(i,o)}function gk(){return null}var Qv=typeof reportError=="function"?reportError:function(i){console.error(i)};function cp(i){this._internalRoot=i}sd.prototype.render=cp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));rd(i,o,null,null)},sd.prototype.unmount=cp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;uo(function(){rd(null,i,null,null)}),o[_i]=null}};function sd(i){this._internalRoot=i}sd.prototype.unstable_scheduleHydration=function(i){if(i){var o=sc();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Kr.length&&o!==0&&o<Kr[l].priority;l++);Kr.splice(l,0,i),l===0&&lc(i)}};function dp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function od(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Zv(){}function yk(i,o,l,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var q=id(w);y.call(q)}}var w=Gv(o,d,i,0,null,!1,!1,"",Zv);return i._reactRootContainer=w,i[_i]=w.current,Cl(i.nodeType===8?i.parentNode:i),uo(),w}for(;p=i.lastChild;)i.removeChild(p);if(typeof d=="function"){var A=d;d=function(){var q=id(D);A.call(q)}}var D=lp(i,0,!1,null,null,!1,!1,"",Zv);return i._reactRootContainer=D,i[_i]=D.current,Cl(i.nodeType===8?i.parentNode:i),uo(function(){rd(o,D,l,d)}),D}function ad(i,o,l,d,p){var y=l._reactRootContainer;if(y){var w=y;if(typeof p=="function"){var A=p;p=function(){var D=id(w);A.call(D)}}rd(o,w,i,p)}else w=yk(l,o,i,p,d);return id(w)}rc=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=qi(o.pendingLanes);l!==0&&(Gi(o,l|1),Bn(o,ot()),(Je&6)===0&&(wa=ot()+500,ns()))}break;case 13:uo(function(){var d=Ii(i,1);if(d!==null){var p=xn();Mr(d,i,1,p)}}),up(i,1)}},Wo=function(i){if(i.tag===13){var o=Ii(i,134217728);if(o!==null){var l=xn();Mr(o,i,134217728,l)}up(i,134217728)}},ic=function(i){if(i.tag===13){var o=ls(i),l=Ii(i,o);if(l!==null){var d=xn();Mr(l,i,o,d)}up(i,o)}},sc=function(){return qe},oc=function(i,o){var l=qe;try{return qe=i,o()}finally{qe=l}},$i=function(i,o,l){switch(o){case"input":if(zi(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==i&&d.form===i.form){var p=Sc(d);if(!p)throw Error(n(90));Tt(d),zi(d,p)}}}break;case"textarea":hi(i,l);break;case"select":o=l.value,o!=null&&On(i,!!l.multiple,o,!1)}},Pt=np,jt=uo;var vk={usingClientEntryPoint:!1,Events:[Nl,aa,Sc,ft,Ln,np]},Hl={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_k={bundleType:Hl.bundleType,version:Hl.version,rendererPackageName:Hl.rendererPackageName,rendererConfig:Hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=fl(i),i===null?null:i.stateNode},findFiberByHostInstance:Hl.findFiberByHostInstance||gk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{Ks=ld.inject(_k),Jn=ld}catch{}}return qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk,qn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dp(o))throw Error(n(200));return mk(i,o,null,l)},qn.createRoot=function(i,o){if(!dp(i))throw Error(n(299));var l=!1,d="",p=Qv;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=lp(i,1,!1,null,null,l,!1,d,p),i[_i]=o.current,Cl(i.nodeType===8?i.parentNode:i),new cp(o)},qn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=fl(o),i=i===null?null:i.stateNode,i},qn.flushSync=function(i){return uo(i)},qn.hydrate=function(i,o,l){if(!od(o))throw Error(n(200));return ad(null,i,o,!0,l)},qn.hydrateRoot=function(i,o,l){if(!dp(i))throw Error(n(405));var d=l!=null&&l.hydratedSources||null,p=!1,y="",w=Qv;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),o=Gv(o,null,i,1,l??null,p,!1,y,w),i[_i]=o.current,Cl(i),d)for(i=0;i<d.length;i++)l=d[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new sd(o)},qn.render=function(i,o,l){if(!od(o))throw Error(n(200));return ad(null,i,o,!1,l)},qn.unmountComponentAtNode=function(i){if(!od(i))throw Error(n(40));return i._reactRootContainer?(uo(function(){ad(null,null,i,!1,function(){i._reactRootContainer=null,i[_i]=null})}),!0):!1},qn.unstable_batchedUpdates=np,qn.unstable_renderSubtreeIntoContainer=function(i,o,l,d){if(!od(l))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return ad(i,o,l,!1,d)},qn.version="18.3.1-next-f1338f8080-20240426",qn}var f_;function Uw(){if(f_)return mp.exports;f_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mp.exports=tb(),mp.exports}var p_;function nb(){if(p_)return dd;p_=1;var t=Uw();return dd.createRoot=t.createRoot,dd.hydrateRoot=t.hydrateRoot,dd}var rb=nb();const ib=Ow(rb),m_=t=>{let e;const n=new Set,r=(m,v)=>{const E=typeof m=="function"?m(e):m;if(!Object.is(E,e)){const S=e;e=v??(typeof E!="object"||E===null)?E:Object.assign({},e,E),n.forEach(b=>b(e,S))}},s=()=>e,h={setState:r,getState:s,getInitialState:()=>f,subscribe:m=>(n.add(m),()=>n.delete(m))},f=e=t(r,s,h);return h},sb=(t=>t?m_(t):m_),ob=t=>t;function ab(t,e=ob){const n=Ht.useSyncExternalStore(t.subscribe,Ht.useCallback(()=>e(t.getState()),[t,e]),Ht.useCallback(()=>e(t.getInitialState()),[t,e]));return Ht.useDebugValue(n),n}const g_=t=>{const e=sb(t),n=r=>ab(e,r);return Object.assign(n,e),n},bm=(t=>t?g_(t):g_),uh=bm(t=>({activeModal:null,modalData:null,openModal:(e,n=null)=>t({activeModal:e,modalData:n}),closeModal:()=>t({activeModal:null,modalData:null})}));function lb(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var a;const u=f=>f===null?null:JSON.parse(f,void 0),h=(a=n.getItem(s))!=null?a:null;return h instanceof Promise?h.then(u):u(h)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const Up=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Up(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Up(r)(n)}}}},ub=(t,e)=>(n,r,s)=>{let a={storage:lb(()=>localStorage),partialize:N=>N,version:0,merge:(N,M)=>({...M,...N}),...e},u=!1;const h=new Set,f=new Set;let m=a.storage;if(!m)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...N)},r,s);const v=()=>{const N=a.partialize({...r()});return m.setItem(a.name,{state:N,version:a.version})},E=s.setState;s.setState=(N,M)=>(E(N,M),v());const S=t((...N)=>(n(...N),v()),r,s);s.getInitialState=()=>S;let b;const z=()=>{var N,M;if(!m)return;u=!1,h.forEach(H=>{var K;return H((K=r())!=null?K:S)});const J=((M=a.onRehydrateStorage)==null?void 0:M.call(a,(N=r())!=null?N:S))||void 0;return Up(m.getItem.bind(m))(a.name).then(H=>{if(H)if(typeof H.version=="number"&&H.version!==a.version){if(a.migrate){const K=a.migrate(H.state,H.version);return K instanceof Promise?K.then(X=>[!0,X]):[!0,K]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,H.state];return[!1,void 0]}).then(H=>{var K;const[X,Y]=H;if(b=a.merge(Y,(K=r())!=null?K:S),n(b,!0),X)return v()}).then(()=>{J==null||J(b,void 0),b=r(),u=!0,f.forEach(H=>H(b))}).catch(H=>{J==null||J(void 0,H)})};return s.persist={setOptions:N=>{a={...a,...N},N.storage&&(m=N.storage)},clearStorage:()=>{m==null||m.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>z(),hasHydrated:()=>u,onHydrate:N=>(h.add(N),()=>{h.delete(N)}),onFinishHydration:N=>(f.add(N),()=>{f.delete(N)})},a.skipHydration||z(),b||S},cb=ub,Am=bm()(cb(t=>({sidebarWidth:280,isSidebarOpen:!0,sidebarDensity:"normal",setSidebarWidth:e=>t({sidebarWidth:e}),toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),setSidebarOpen:e=>t({isSidebarOpen:e}),setSidebarDensity:e=>t({sidebarDensity:e})}),{name:"ui-storage",partialize:t=>({sidebarWidth:t.sidebarWidth,sidebarDensity:t.sidebarDensity,isSidebarOpen:t.isSidebarOpen})}));function $w(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=$w(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function db(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=$w(t))&&(r&&(r+=" "),r+=e);return r}const hb=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},fb=(t,e)=>({classGroupId:t,validator:e}),Bw=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Fd="-",y_=[],pb="arbitrary..",mb=t=>{const e=yb(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return gb(u);const h=u.split(Fd),f=h[0]===""&&h.length>1?1:0;return qw(h,f,e)},getConflictingClassGroupIds:(u,h)=>{if(h){const f=r[u],m=n[u];return f?m?hb(m,f):f:m||y_}return n[u]||y_}}},qw=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],a=n.nextPart.get(s);if(a){const m=qw(t,e+1,a);if(m)return m}const u=n.validators;if(u===null)return;const h=e===0?t.join(Fd):t.slice(e).join(Fd),f=u.length;for(let m=0;m<f;m++){const v=u[m];if(v.validator(h))return v.classGroupId}},gb=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?pb+r:void 0})(),yb=t=>{const{theme:e,classGroups:n}=t;return vb(n,e)},vb=(t,e)=>{const n=Bw();for(const r in t){const s=t[r];Rm(s,n,r,e)}return n},Rm=(t,e,n,r)=>{const s=t.length;for(let a=0;a<s;a++){const u=t[a];_b(u,e,n,r)}},_b=(t,e,n,r)=>{if(typeof t=="string"){wb(t,e,n);return}if(typeof t=="function"){Eb(t,e,n,r);return}Tb(t,e,n,r)},wb=(t,e,n)=>{const r=t===""?e:Ww(e,t);r.classGroupId=n},Eb=(t,e,n,r)=>{if(Ib(t)){Rm(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(fb(n,t))},Tb=(t,e,n,r)=>{const s=Object.entries(t),a=s.length;for(let u=0;u<a;u++){const[h,f]=s[u];Rm(f,Ww(e,h),n,r)}},Ww=(t,e)=>{let n=t;const r=e.split(Fd),s=r.length;for(let a=0;a<s;a++){const u=r[a];let h=n.nextPart.get(u);h||(h=Bw(),n.nextPart.set(u,h)),n=h}return n},Ib=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,Sb=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(a,u)=>{n[a]=u,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(a){let u=n[a];if(u!==void 0)return u;if((u=r[a])!==void 0)return s(a,u),u},set(a,u){a in n?n[a]=u:s(a,u)}}},$p="!",v_=":",kb=[],__=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),bb=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const a=[];let u=0,h=0,f=0,m;const v=s.length;for(let N=0;N<v;N++){const M=s[N];if(u===0&&h===0){if(M===v_){a.push(s.slice(f,N)),f=N+1;continue}if(M==="/"){m=N;continue}}M==="["?u++:M==="]"?u--:M==="("?h++:M===")"&&h--}const E=a.length===0?s:s.slice(f);let S=E,b=!1;E.endsWith($p)?(S=E.slice(0,-1),b=!0):E.startsWith($p)&&(S=E.slice(1),b=!0);const z=m&&m>f?m-f:void 0;return __(a,b,S,z)};if(e){const s=e+v_,a=r;r=u=>u.startsWith(s)?a(u.slice(s.length)):__(kb,!1,u,void 0,!0)}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},Ab=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let a=0;a<n.length;a++){const u=n[a],h=u[0]==="[",f=e.has(u);h||f?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(u)):s.push(u)}return s.length>0&&(s.sort(),r.push(...s)),r}},Rb=t=>({cache:Sb(t.cacheSize),parseClassName:bb(t),sortModifiers:Ab(t),...mb(t)}),Cb=/\s+/,xb=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=e,u=[],h=t.trim().split(Cb);let f="";for(let m=h.length-1;m>=0;m-=1){const v=h[m],{isExternal:E,modifiers:S,hasImportantModifier:b,baseClassName:z,maybePostfixModifierPosition:N}=n(v);if(E){f=v+(f.length>0?" "+f:f);continue}let M=!!N,J=r(M?z.substring(0,N):z);if(!J){if(!M){f=v+(f.length>0?" "+f:f);continue}if(J=r(z),!J){f=v+(f.length>0?" "+f:f);continue}M=!1}const H=S.length===0?"":S.length===1?S[0]:a(S).join(":"),K=b?H+$p:H,X=K+J;if(u.indexOf(X)>-1)continue;u.push(X);const Y=s(J,M);for(let ae=0;ae<Y.length;++ae){const C=Y[ae];u.push(K+C)}f=v+(f.length>0?" "+f:f)}return f},Pb=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=Hw(n))&&(s&&(s+=" "),s+=r);return s},Hw=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Hw(t[r]))&&(n&&(n+=" "),n+=e);return n},Nb=(t,...e)=>{let n,r,s,a;const u=f=>{const m=e.reduce((v,E)=>E(v),t());return n=Rb(m),r=n.cache.get,s=n.cache.set,a=h,h(f)},h=f=>{const m=r(f);if(m)return m;const v=xb(f,n);return s(f,v),v};return a=u,(...f)=>a(Pb(...f))},Db=[],qt=t=>{const e=n=>n[t]||Db;return e.isThemeGetter=!0,e},Gw=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Kw=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ob=/^\d+\/\d+$/,Mb=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Lb=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Fb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ta=t=>Ob.test(t),je=t=>!!t&&!Number.isNaN(Number(t)),hs=t=>!!t&&Number.isInteger(Number(t)),vp=t=>t.endsWith("%")&&je(t.slice(0,-1)),Ai=t=>Mb.test(t),jb=()=>!0,Ub=t=>Lb.test(t)&&!Vb.test(t),Qw=()=>!1,$b=t=>Fb.test(t),Bb=t=>zb.test(t),qb=t=>!ye(t)&&!ve(t),Wb=t=>el(t,Yw,Qw),ye=t=>Gw.test(t),po=t=>el(t,Xw,Ub),_p=t=>el(t,Zb,je),w_=t=>el(t,Zw,Qw),Hb=t=>el(t,Jw,Bb),hd=t=>el(t,eE,$b),ve=t=>Kw.test(t),Kl=t=>tl(t,Xw),Gb=t=>tl(t,Jb),E_=t=>tl(t,Zw),Kb=t=>tl(t,Yw),Qb=t=>tl(t,Jw),fd=t=>tl(t,eE,!0),el=(t,e,n)=>{const r=Gw.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},tl=(t,e,n=!1)=>{const r=Kw.exec(t);return r?r[1]?e(r[1]):n:!1},Zw=t=>t==="position"||t==="percentage",Jw=t=>t==="image"||t==="url",Yw=t=>t==="length"||t==="size"||t==="bg-size",Xw=t=>t==="length",Zb=t=>t==="number",Jb=t=>t==="family-name",eE=t=>t==="shadow",Yb=()=>{const t=qt("color"),e=qt("font"),n=qt("text"),r=qt("font-weight"),s=qt("tracking"),a=qt("leading"),u=qt("breakpoint"),h=qt("container"),f=qt("spacing"),m=qt("radius"),v=qt("shadow"),E=qt("inset-shadow"),S=qt("text-shadow"),b=qt("drop-shadow"),z=qt("blur"),N=qt("perspective"),M=qt("aspect"),J=qt("ease"),H=qt("animate"),K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Y=()=>[...X(),ve,ye],ae=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],T=()=>[ve,ye,f],k=()=>[Ta,"full","auto",...T()],P=()=>[hs,"none","subgrid",ve,ye],x=()=>["auto",{span:["full",hs,ve,ye]},hs,ve,ye],L=()=>[hs,"auto",ve,ye],R=()=>["auto","min","max","fr",ve,ye],Ue=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],et=()=>["start","end","center","stretch","center-safe","end-safe"],Ze=()=>["auto",...T()],ne=()=>[Ta,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],W=()=>[t,ve,ye],he=()=>[...X(),E_,w_,{position:[ve,ye]}],ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",Kb,Wb,{size:[ve,ye]}],Q=()=>[vp,Kl,po],de=()=>["","none","full",m,ve,ye],Ee=()=>["",je,Kl,po],xe=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ie=()=>[je,vp,E_,w_],Ve=()=>["","none",z,ve,ye],Fe=()=>["none",je,ve,ye],be=()=>["none",je,ve,ye],zt=()=>[je,ve,ye],Tt=()=>[Ta,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ai],breakpoint:[Ai],color:[jb],container:[Ai],"drop-shadow":[Ai],ease:["in","out","in-out"],font:[qb],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ai],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ai],shadow:[Ai],spacing:["px",je],text:[Ai],"text-shadow":[Ai],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ta,ye,ve,M]}],container:["container"],columns:[{columns:[je,ye,ve,h]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Y()}],overflow:[{overflow:ae()}],"overflow-x":[{"overflow-x":ae()}],"overflow-y":[{"overflow-y":ae()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[hs,"auto",ve,ye]}],basis:[{basis:[Ta,"full","auto",h,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[je,Ta,"auto","initial","none",ye]}],grow:[{grow:["",je,ve,ye]}],shrink:[{shrink:["",je,ve,ye]}],order:[{order:[hs,"first","last","none",ve,ye]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:x()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:x()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...Ue(),"normal"]}],"justify-items":[{"justify-items":[...et(),"normal"]}],"justify-self":[{"justify-self":["auto",...et()]}],"align-content":[{content:["normal",...Ue()]}],"align-items":[{items:[...et(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...et(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ue()}],"place-items":[{"place-items":[...et(),"baseline"]}],"place-self":[{"place-self":["auto",...et()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:Ze()}],mx:[{mx:Ze()}],my:[{my:Ze()}],ms:[{ms:Ze()}],me:[{me:Ze()}],mt:[{mt:Ze()}],mr:[{mr:Ze()}],mb:[{mb:Ze()}],ml:[{ml:Ze()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[h,"screen",...ne()]}],"min-w":[{"min-w":[h,"screen","none",...ne()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...ne()]}],h:[{h:["screen","lh",...ne()]}],"min-h":[{"min-h":["screen","lh","none",...ne()]}],"max-h":[{"max-h":["screen","lh",...ne()]}],"font-size":[{text:["base",n,Kl,po]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ve,_p]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",vp,ye]}],"font-family":[{font:[Gb,ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ve,ye]}],"line-clamp":[{"line-clamp":[je,"none",ve,_p]}],leading:[{leading:[a,...T()]}],"list-image":[{"list-image":["none",ve,ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ve,ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...xe(),"wavy"]}],"text-decoration-thickness":[{decoration:[je,"from-font","auto",ve,po]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[je,"auto",ve,ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve,ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve,ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:he()}],"bg-repeat":[{bg:ue()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},hs,ve,ye],radial:["",ve,ye],conic:[hs,ve,ye]},Qb,Hb]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:de()}],"rounded-s":[{"rounded-s":de()}],"rounded-e":[{"rounded-e":de()}],"rounded-t":[{"rounded-t":de()}],"rounded-r":[{"rounded-r":de()}],"rounded-b":[{"rounded-b":de()}],"rounded-l":[{"rounded-l":de()}],"rounded-ss":[{"rounded-ss":de()}],"rounded-se":[{"rounded-se":de()}],"rounded-ee":[{"rounded-ee":de()}],"rounded-es":[{"rounded-es":de()}],"rounded-tl":[{"rounded-tl":de()}],"rounded-tr":[{"rounded-tr":de()}],"rounded-br":[{"rounded-br":de()}],"rounded-bl":[{"rounded-bl":de()}],"border-w":[{border:Ee()}],"border-w-x":[{"border-x":Ee()}],"border-w-y":[{"border-y":Ee()}],"border-w-s":[{"border-s":Ee()}],"border-w-e":[{"border-e":Ee()}],"border-w-t":[{"border-t":Ee()}],"border-w-r":[{"border-r":Ee()}],"border-w-b":[{"border-b":Ee()}],"border-w-l":[{"border-l":Ee()}],"divide-x":[{"divide-x":Ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...xe(),"hidden","none"]}],"divide-style":[{divide:[...xe(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...xe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[je,ve,ye]}],"outline-w":[{outline:["",je,Kl,po]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",v,fd,hd]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",E,fd,hd]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:Ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[je,po]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":Ee()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",S,fd,hd]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[je,ve,ye]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[je]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ie()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ie()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":Ie()}],"mask-image-t-to-pos":[{"mask-t-to":Ie()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":Ie()}],"mask-image-r-to-pos":[{"mask-r-to":Ie()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":Ie()}],"mask-image-b-to-pos":[{"mask-b-to":Ie()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":Ie()}],"mask-image-l-to-pos":[{"mask-l-to":Ie()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":Ie()}],"mask-image-x-to-pos":[{"mask-x-to":Ie()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":Ie()}],"mask-image-y-to-pos":[{"mask-y-to":Ie()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[ve,ye]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ie()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ie()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":X()}],"mask-image-conic-pos":[{"mask-conic":[je]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ie()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ie()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:he()}],"mask-repeat":[{mask:ue()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ve,ye]}],filter:[{filter:["","none",ve,ye]}],blur:[{blur:Ve()}],brightness:[{brightness:[je,ve,ye]}],contrast:[{contrast:[je,ve,ye]}],"drop-shadow":[{"drop-shadow":["","none",b,fd,hd]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",je,ve,ye]}],"hue-rotate":[{"hue-rotate":[je,ve,ye]}],invert:[{invert:["",je,ve,ye]}],saturate:[{saturate:[je,ve,ye]}],sepia:[{sepia:["",je,ve,ye]}],"backdrop-filter":[{"backdrop-filter":["","none",ve,ye]}],"backdrop-blur":[{"backdrop-blur":Ve()}],"backdrop-brightness":[{"backdrop-brightness":[je,ve,ye]}],"backdrop-contrast":[{"backdrop-contrast":[je,ve,ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",je,ve,ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[je,ve,ye]}],"backdrop-invert":[{"backdrop-invert":["",je,ve,ye]}],"backdrop-opacity":[{"backdrop-opacity":[je,ve,ye]}],"backdrop-saturate":[{"backdrop-saturate":[je,ve,ye]}],"backdrop-sepia":[{"backdrop-sepia":["",je,ve,ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ve,ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[je,"initial",ve,ye]}],ease:[{ease:["linear","initial",J,ve,ye]}],delay:[{delay:[je,ve,ye]}],animate:[{animate:["none",H,ve,ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,ve,ye]}],"perspective-origin":[{"perspective-origin":Y()}],rotate:[{rotate:Fe()}],"rotate-x":[{"rotate-x":Fe()}],"rotate-y":[{"rotate-y":Fe()}],"rotate-z":[{"rotate-z":Fe()}],scale:[{scale:be()}],"scale-x":[{"scale-x":be()}],"scale-y":[{"scale-y":be()}],"scale-z":[{"scale-z":be()}],"scale-3d":["scale-3d"],skew:[{skew:zt()}],"skew-x":[{"skew-x":zt()}],"skew-y":[{"skew-y":zt()}],transform:[{transform:[ve,ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:Y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Tt()}],"translate-x":[{"translate-x":Tt()}],"translate-y":[{"translate-y":Tt()}],"translate-z":[{"translate-z":Tt()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve,ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve,ye]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[je,Kl,po,_p]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Xb=Nb(Yb);function zr(...t){return Xb(db(t))}var Aa=Uw();const tE=({isOpen:t,onClose:e,title:n,children:r,className:s})=>($.useEffect(()=>{const a=u=>{u.key==="Escape"&&e()};return t&&window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[t,e]),t?Aa.createPortal(O.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6 animate-fade-in",children:[O.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:e}),O.jsxs("div",{className:zr("relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col transform transition-all animate-scale-in",s),children:[n&&O.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[O.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:n}),O.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:O.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),O.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:r})]})]}),document.body):null),eA=()=>{const{activeModal:t,closeModal:e}=uh(),{sidebarDensity:n,setSidebarDensity:r}=Am(),[s,a]=$.useState("appearance"),u=t==="settings",h=f=>{f==="dark"?(document.documentElement.classList.add("dark"),localStorage.theme="dark"):(document.documentElement.classList.remove("dark"),localStorage.theme="light")};return O.jsx(tE,{isOpen:u,onClose:e,title:"",className:"max-w-2xl h-[600px]",children:O.jsxs("div",{className:"flex h-full -m-6",children:[O.jsxs("div",{className:"w-48 bg-gray-50 dark:bg-gray-800/50 border-r border-gray-100 dark:border-gray-700/50 p-4 space-y-1",children:[O.jsx(wp,{active:s==="general",onClick:()=>a("general"),label:"",icon:""}),O.jsx(wp,{active:s==="appearance",onClick:()=>a("appearance"),label:"",icon:""}),O.jsx(wp,{active:s==="account",onClick:()=>a("account"),label:"",icon:""})]}),O.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[s==="appearance"&&O.jsxs("div",{className:"space-y-6",children:[O.jsxs("section",{children:[O.jsx("h4",{className:"text-sm font-bold mb-3 text-gray-700 dark:text-gray-300",children:""}),O.jsxs("div",{className:"flex gap-4",children:[O.jsx("button",{onClick:()=>h("light"),className:"p-4 border rounded-lg hover:border-blue-500 bg-white shadow-sm w-32 text-center",children:"Light"}),O.jsx("button",{onClick:()=>h("dark"),className:"p-4 border rounded-lg hover:border-blue-500 bg-gray-900 text-white shadow-sm w-32 text-center",children:"Dark"})]})]}),O.jsxs("section",{children:[O.jsx("h4",{className:"text-sm font-bold mb-3 text-gray-700 dark:text-gray-300",children:""}),O.jsx("div",{className:"space-y-2",children:["compact","normal","comfortable","spacious"].map(f=>O.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[O.jsx("input",{type:"radio",name:"density",checked:n===f,onChange:()=>r(f),className:"text-blue-600"}),O.jsx("span",{className:"capitalize text-sm",children:f})]},f))})]})]}),s==="general"&&O.jsx("div",{className:"text-gray-500 text-sm",children:""}),s==="account"&&O.jsx("div",{className:"text-gray-500 text-sm",children:""})]})]})})},wp=({active:t,onClick:e,label:n,icon:r})=>O.jsxs("button",{onClick:e,className:zr("w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors text-left",t?"bg-white dark:bg-gray-700 shadow-sm text-blue-600 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[O.jsx("span",{children:r}),O.jsx("span",{children:n})]});var T_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},tA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],u=t[n++],h=t[n++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],u=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},rE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],u=s+1<t.length,h=u?t[s+1]:0,f=s+2<t.length,m=f?t[s+2]:0,v=a>>2,E=(a&3)<<4|h>>4;let S=(h&15)<<2|m>>6,b=m&63;f||(b=64,u||(S=64)),r.push(n[v],n[E],n[S],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||h==null||m==null||E==null)throw new nA;const S=a<<2|h>>4;if(r.push(S),m!==64){const b=h<<4&240|m>>2;if(r.push(b),E!==64){const z=m<<6&192|E;r.push(z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rA=function(t){const e=nE(t);return rE.encodeByteArray(e,!0)},zd=function(t){return rA(t).replace(/\./g,"")},iE=function(t){try{return rE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=()=>iA().__FIREBASE_DEFAULTS__,oA=()=>{if(typeof process>"u"||typeof T_>"u")return;const t=T_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iE(t[1]);return e&&JSON.parse(e)},ch=()=>{try{return sA()||oA()||aA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sE=t=>{var e,n;return(n=(e=ch())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},lA=t=>{const e=sE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oE=()=>{var t;return(t=ch())===null||t===void 0?void 0:t.config},aE=t=>{var e;return(e=ch())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zd(JSON.stringify(n)),zd(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function hA(){var t;const e=(t=ch())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gA(){const t=In();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yA(){return!hA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vA(){try{return typeof indexedDB=="object"}catch{return!1}}function _A(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="FirebaseError";class Fi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wA,Object.setPrototypeOf(this,Fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nu.prototype.create)}}class Nu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?EA(a,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new Fi(s,h,r)}}function EA(t,e){return t.replace(TA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const TA=/\{\$([^}]+)}/g;function IA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],u=e[s];if(I_(a)&&I_(u)){if(!jd(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function I_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function SA(t,e){const n=new kA(t,e);return n.subscribe.bind(n)}class kA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ep),s.error===void 0&&(s.error=Ep),s.complete===void 0&&(s.complete=Ep);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t){return t&&t._delegate?t._delegate:t}class Ao{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CA(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RA(t){return t===mo?void 0:t}function CA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const PA={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},NA=Ge.INFO,DA={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},OA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=DA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cm{constructor(e){this.name=e,this._logLevel=NA,this._logHandler=OA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const MA=(t,e)=>e.some(n=>t instanceof n);let S_,k_;function LA(){return S_||(S_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VA(){return k_||(k_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lE=new WeakMap,Bp=new WeakMap,uE=new WeakMap,Tp=new WeakMap,xm=new WeakMap;function FA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(Rs(t.result)),s()},u=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&lE.set(n,t)}).catch(()=>{}),xm.set(e,t),e}function zA(t){if(Bp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),s()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Bp.set(t,e)}let qp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jA(t){qp=t(qp)}function UA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ip(this),e,...n);return uE.set(r,e.sort?e.sort():[e]),Rs(r)}:VA().includes(t)?function(...e){return t.apply(Ip(this),e),Rs(lE.get(this))}:function(...e){return Rs(t.apply(Ip(this),e))}}function $A(t){return typeof t=="function"?UA(t):(t instanceof IDBTransaction&&zA(t),MA(t,LA())?new Proxy(t,qp):t)}function Rs(t){if(t instanceof IDBRequest)return FA(t);if(Tp.has(t))return Tp.get(t);const e=$A(t);return e!==t&&(Tp.set(t,e),xm.set(e,t)),e}const Ip=t=>xm.get(t);function BA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(t,e),h=Rs(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Rs(u.result),f.oldVersion,f.newVersion,Rs(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const qA=["get","getKey","getAll","getAllKeys","count"],WA=["put","add","delete","clear"],Sp=new Map;function b_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sp.get(e))return Sp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=WA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qA.includes(n)))return;const a=async function(u,...h){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),s&&f.done]))[0]};return Sp.set(e,a),a}jA(t=>({...t,get:(e,n,r)=>b_(e,n)||t.get(e,n,r),has:(e,n)=>!!b_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wp="@firebase/app",A_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new Cm("@firebase/app"),KA="@firebase/app-compat",QA="@firebase/analytics-compat",ZA="@firebase/analytics",JA="@firebase/app-check-compat",YA="@firebase/app-check",XA="@firebase/auth",eR="@firebase/auth-compat",tR="@firebase/database",nR="@firebase/data-connect",rR="@firebase/database-compat",iR="@firebase/functions",sR="@firebase/functions-compat",oR="@firebase/installations",aR="@firebase/installations-compat",lR="@firebase/messaging",uR="@firebase/messaging-compat",cR="@firebase/performance",dR="@firebase/performance-compat",hR="@firebase/remote-config",fR="@firebase/remote-config-compat",pR="@firebase/storage",mR="@firebase/storage-compat",gR="@firebase/firestore",yR="@firebase/vertexai-preview",vR="@firebase/firestore-compat",_R="firebase",wR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="[DEFAULT]",ER={[Wp]:"fire-core",[KA]:"fire-core-compat",[ZA]:"fire-analytics",[QA]:"fire-analytics-compat",[YA]:"fire-app-check",[JA]:"fire-app-check-compat",[XA]:"fire-auth",[eR]:"fire-auth-compat",[tR]:"fire-rtdb",[nR]:"fire-data-connect",[rR]:"fire-rtdb-compat",[iR]:"fire-fn",[sR]:"fire-fn-compat",[oR]:"fire-iid",[aR]:"fire-iid-compat",[lR]:"fire-fcm",[uR]:"fire-fcm-compat",[cR]:"fire-perf",[dR]:"fire-perf-compat",[hR]:"fire-rc",[fR]:"fire-rc-compat",[pR]:"fire-gcs",[mR]:"fire-gcs-compat",[gR]:"fire-fst",[vR]:"fire-fst-compat",[yR]:"fire-vertex","fire-js":"fire-js",[_R]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=new Map,TR=new Map,Gp=new Map;function R_(t,e){try{t.container.addComponent(e)}catch(n){Di.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qa(t){const e=t.name;if(Gp.has(e))return Di.debug(`There were multiple attempts to register component ${e}.`),!1;Gp.set(e,t);for(const n of hu.values())R_(n,t);for(const n of TR.values())R_(n,t);return!0}function Pm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cs=new Nu("app","Firebase",IR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=wR;function cE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Cs.create("bad-app-name",{appName:String(s)});if(n||(n=oE()),!n)throw Cs.create("no-options");const a=hu.get(s);if(a){if(jd(n,a.options)&&jd(r,a.config))return a;throw Cs.create("duplicate-app",{appName:s})}const u=new xA(s);for(const f of Gp.values())u.addComponent(f);const h=new SR(n,r,u);return hu.set(s,h),h}function dE(t=Hp){const e=hu.get(t);if(!e&&t===Hp&&oE())return cE();if(!e)throw Cs.create("no-app",{appName:t});return e}function C_(){return Array.from(hu.values())}function xs(t,e,n){var r;let s=(r=ER[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Di.warn(h.join(" "));return}qa(new Ao(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="firebase-heartbeat-database",bR=1,fu="firebase-heartbeat-store";let kp=null;function hE(){return kp||(kp=BA(kR,bR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cs.create("idb-open",{originalErrorMessage:t.message})})),kp}async function AR(t){try{const n=(await hE()).transaction(fu),r=await n.objectStore(fu).get(fE(t));return await n.done,r}catch(e){if(e instanceof Fi)Di.warn(e.message);else{const n=Cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Di.warn(n.message)}}}async function x_(t,e){try{const r=(await hE()).transaction(fu,"readwrite");await r.objectStore(fu).put(e,fE(t)),await r.done}catch(n){if(n instanceof Fi)Di.warn(n.message);else{const r=Cs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Di.warn(r.message)}}}function fE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=1024,CR=720*60*60*1e3;class xR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=P_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=CR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=P_(),{heartbeatsToSend:r,unsentEntries:s}=PR(this._heartbeatsCache.heartbeats),a=zd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Di.warn(n),""}}}function P_(){return new Date().toISOString().substring(0,10)}function PR(t,e=RR){const n=[];let r=t.slice();for(const s of t){const a=n.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),N_(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),N_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vA()?_A().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return x_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return x_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function N_(t){return zd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t){qa(new Ao("platform-logger",e=>new HA(e),"PRIVATE")),qa(new Ao("heartbeat",e=>new xR(e),"PRIVATE")),xs(Wp,A_,t),xs(Wp,A_,"esm2017"),xs("fire-js","")}DR("");var D_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Io,pE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function k(){}k.prototype=T.prototype,C.D=T.prototype,C.prototype=new k,C.prototype.constructor=C,C.C=function(P,x,L){for(var R=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)R[Ue-2]=arguments[Ue];return T.prototype[x].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,T,k){k||(k=0);var P=Array(16);if(typeof T=="string")for(var x=0;16>x;++x)P[x]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(x=0;16>x;++x)P[x]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=C.g[0],k=C.g[1],x=C.g[2];var L=C.g[3],R=T+(L^k&(x^L))+P[0]+3614090360&4294967295;T=k+(R<<7&4294967295|R>>>25),R=L+(x^T&(k^x))+P[1]+3905402710&4294967295,L=T+(R<<12&4294967295|R>>>20),R=x+(k^L&(T^k))+P[2]+606105819&4294967295,x=L+(R<<17&4294967295|R>>>15),R=k+(T^x&(L^T))+P[3]+3250441966&4294967295,k=x+(R<<22&4294967295|R>>>10),R=T+(L^k&(x^L))+P[4]+4118548399&4294967295,T=k+(R<<7&4294967295|R>>>25),R=L+(x^T&(k^x))+P[5]+1200080426&4294967295,L=T+(R<<12&4294967295|R>>>20),R=x+(k^L&(T^k))+P[6]+2821735955&4294967295,x=L+(R<<17&4294967295|R>>>15),R=k+(T^x&(L^T))+P[7]+4249261313&4294967295,k=x+(R<<22&4294967295|R>>>10),R=T+(L^k&(x^L))+P[8]+1770035416&4294967295,T=k+(R<<7&4294967295|R>>>25),R=L+(x^T&(k^x))+P[9]+2336552879&4294967295,L=T+(R<<12&4294967295|R>>>20),R=x+(k^L&(T^k))+P[10]+4294925233&4294967295,x=L+(R<<17&4294967295|R>>>15),R=k+(T^x&(L^T))+P[11]+2304563134&4294967295,k=x+(R<<22&4294967295|R>>>10),R=T+(L^k&(x^L))+P[12]+1804603682&4294967295,T=k+(R<<7&4294967295|R>>>25),R=L+(x^T&(k^x))+P[13]+4254626195&4294967295,L=T+(R<<12&4294967295|R>>>20),R=x+(k^L&(T^k))+P[14]+2792965006&4294967295,x=L+(R<<17&4294967295|R>>>15),R=k+(T^x&(L^T))+P[15]+1236535329&4294967295,k=x+(R<<22&4294967295|R>>>10),R=T+(x^L&(k^x))+P[1]+4129170786&4294967295,T=k+(R<<5&4294967295|R>>>27),R=L+(k^x&(T^k))+P[6]+3225465664&4294967295,L=T+(R<<9&4294967295|R>>>23),R=x+(T^k&(L^T))+P[11]+643717713&4294967295,x=L+(R<<14&4294967295|R>>>18),R=k+(L^T&(x^L))+P[0]+3921069994&4294967295,k=x+(R<<20&4294967295|R>>>12),R=T+(x^L&(k^x))+P[5]+3593408605&4294967295,T=k+(R<<5&4294967295|R>>>27),R=L+(k^x&(T^k))+P[10]+38016083&4294967295,L=T+(R<<9&4294967295|R>>>23),R=x+(T^k&(L^T))+P[15]+3634488961&4294967295,x=L+(R<<14&4294967295|R>>>18),R=k+(L^T&(x^L))+P[4]+3889429448&4294967295,k=x+(R<<20&4294967295|R>>>12),R=T+(x^L&(k^x))+P[9]+568446438&4294967295,T=k+(R<<5&4294967295|R>>>27),R=L+(k^x&(T^k))+P[14]+3275163606&4294967295,L=T+(R<<9&4294967295|R>>>23),R=x+(T^k&(L^T))+P[3]+4107603335&4294967295,x=L+(R<<14&4294967295|R>>>18),R=k+(L^T&(x^L))+P[8]+1163531501&4294967295,k=x+(R<<20&4294967295|R>>>12),R=T+(x^L&(k^x))+P[13]+2850285829&4294967295,T=k+(R<<5&4294967295|R>>>27),R=L+(k^x&(T^k))+P[2]+4243563512&4294967295,L=T+(R<<9&4294967295|R>>>23),R=x+(T^k&(L^T))+P[7]+1735328473&4294967295,x=L+(R<<14&4294967295|R>>>18),R=k+(L^T&(x^L))+P[12]+2368359562&4294967295,k=x+(R<<20&4294967295|R>>>12),R=T+(k^x^L)+P[5]+4294588738&4294967295,T=k+(R<<4&4294967295|R>>>28),R=L+(T^k^x)+P[8]+2272392833&4294967295,L=T+(R<<11&4294967295|R>>>21),R=x+(L^T^k)+P[11]+1839030562&4294967295,x=L+(R<<16&4294967295|R>>>16),R=k+(x^L^T)+P[14]+4259657740&4294967295,k=x+(R<<23&4294967295|R>>>9),R=T+(k^x^L)+P[1]+2763975236&4294967295,T=k+(R<<4&4294967295|R>>>28),R=L+(T^k^x)+P[4]+1272893353&4294967295,L=T+(R<<11&4294967295|R>>>21),R=x+(L^T^k)+P[7]+4139469664&4294967295,x=L+(R<<16&4294967295|R>>>16),R=k+(x^L^T)+P[10]+3200236656&4294967295,k=x+(R<<23&4294967295|R>>>9),R=T+(k^x^L)+P[13]+681279174&4294967295,T=k+(R<<4&4294967295|R>>>28),R=L+(T^k^x)+P[0]+3936430074&4294967295,L=T+(R<<11&4294967295|R>>>21),R=x+(L^T^k)+P[3]+3572445317&4294967295,x=L+(R<<16&4294967295|R>>>16),R=k+(x^L^T)+P[6]+76029189&4294967295,k=x+(R<<23&4294967295|R>>>9),R=T+(k^x^L)+P[9]+3654602809&4294967295,T=k+(R<<4&4294967295|R>>>28),R=L+(T^k^x)+P[12]+3873151461&4294967295,L=T+(R<<11&4294967295|R>>>21),R=x+(L^T^k)+P[15]+530742520&4294967295,x=L+(R<<16&4294967295|R>>>16),R=k+(x^L^T)+P[2]+3299628645&4294967295,k=x+(R<<23&4294967295|R>>>9),R=T+(x^(k|~L))+P[0]+4096336452&4294967295,T=k+(R<<6&4294967295|R>>>26),R=L+(k^(T|~x))+P[7]+1126891415&4294967295,L=T+(R<<10&4294967295|R>>>22),R=x+(T^(L|~k))+P[14]+2878612391&4294967295,x=L+(R<<15&4294967295|R>>>17),R=k+(L^(x|~T))+P[5]+4237533241&4294967295,k=x+(R<<21&4294967295|R>>>11),R=T+(x^(k|~L))+P[12]+1700485571&4294967295,T=k+(R<<6&4294967295|R>>>26),R=L+(k^(T|~x))+P[3]+2399980690&4294967295,L=T+(R<<10&4294967295|R>>>22),R=x+(T^(L|~k))+P[10]+4293915773&4294967295,x=L+(R<<15&4294967295|R>>>17),R=k+(L^(x|~T))+P[1]+2240044497&4294967295,k=x+(R<<21&4294967295|R>>>11),R=T+(x^(k|~L))+P[8]+1873313359&4294967295,T=k+(R<<6&4294967295|R>>>26),R=L+(k^(T|~x))+P[15]+4264355552&4294967295,L=T+(R<<10&4294967295|R>>>22),R=x+(T^(L|~k))+P[6]+2734768916&4294967295,x=L+(R<<15&4294967295|R>>>17),R=k+(L^(x|~T))+P[13]+1309151649&4294967295,k=x+(R<<21&4294967295|R>>>11),R=T+(x^(k|~L))+P[4]+4149444226&4294967295,T=k+(R<<6&4294967295|R>>>26),R=L+(k^(T|~x))+P[11]+3174756917&4294967295,L=T+(R<<10&4294967295|R>>>22),R=x+(T^(L|~k))+P[2]+718787259&4294967295,x=L+(R<<15&4294967295|R>>>17),R=k+(L^(x|~T))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(x+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+x&4294967295,C.g[3]=C.g[3]+L&4294967295}r.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var k=T-this.blockSize,P=this.B,x=this.h,L=0;L<T;){if(x==0)for(;L<=k;)s(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<T;)if(P[x++]=C.charCodeAt(L++),x==this.blockSize){s(this,P),x=0;break}}else for(;L<T;)if(P[x++]=C[L++],x==this.blockSize){s(this,P),x=0;break}}this.h=x,this.o+=T},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var k=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=k&255,k/=256;for(this.u(C),C=Array(16),T=k=0;4>T;++T)for(var P=0;32>P;P+=8)C[k++]=this.g[T]>>>P&255;return C};function a(C,T){var k=h;return Object.prototype.hasOwnProperty.call(k,C)?k[C]:k[C]=T(C)}function u(C,T){this.h=T;for(var k=[],P=!0,x=C.length-1;0<=x;x--){var L=C[x]|0;P&&L==T||(k[x]=L,P=!1)}this.g=k}var h={};function f(C){return-128<=C&&128>C?a(C,function(T){return new u([T|0],0>T?-1:0)}):new u([C|0],0>C?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return E;if(0>C)return M(m(-C));for(var T=[],k=1,P=0;C>=k;P++)T[P]=C/k|0,k*=4294967296;return new u(T,0)}function v(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return M(v(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=m(Math.pow(T,8)),P=E,x=0;x<C.length;x+=8){var L=Math.min(8,C.length-x),R=parseInt(C.substring(x,x+L),T);8>L?(L=m(Math.pow(T,L)),P=P.j(L).add(m(R))):(P=P.j(k),P=P.add(m(R)))}return P}var E=f(0),S=f(1),b=f(16777216);t=u.prototype,t.m=function(){if(N(this))return-M(this).m();for(var C=0,T=1,k=0;k<this.g.length;k++){var P=this.i(k);C+=(0<=P?P:4294967296+P)*T,T*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(z(this))return"0";if(N(this))return"-"+M(this).toString(C);for(var T=m(Math.pow(C,6)),k=this,P="";;){var x=X(k,T).g;k=J(k,x.j(T));var L=((0<k.g.length?k.g[0]:k.h)>>>0).toString(C);if(k=x,z(k))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function z(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function N(C){return C.h==-1}t.l=function(C){return C=J(this,C),N(C)?-1:z(C)?0:1};function M(C){for(var T=C.g.length,k=[],P=0;P<T;P++)k[P]=~C.g[P];return new u(k,~C.h).add(S)}t.abs=function(){return N(this)?M(this):this},t.add=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],P=0,x=0;x<=T;x++){var L=P+(this.i(x)&65535)+(C.i(x)&65535),R=(L>>>16)+(this.i(x)>>>16)+(C.i(x)>>>16);P=R>>>16,L&=65535,R&=65535,k[x]=R<<16|L}return new u(k,k[k.length-1]&-2147483648?-1:0)};function J(C,T){return C.add(M(T))}t.j=function(C){if(z(this)||z(C))return E;if(N(this))return N(C)?M(this).j(M(C)):M(M(this).j(C));if(N(C))return M(this.j(M(C)));if(0>this.l(b)&&0>C.l(b))return m(this.m()*C.m());for(var T=this.g.length+C.g.length,k=[],P=0;P<2*T;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(var x=0;x<C.g.length;x++){var L=this.i(P)>>>16,R=this.i(P)&65535,Ue=C.i(x)>>>16,et=C.i(x)&65535;k[2*P+2*x]+=R*et,H(k,2*P+2*x),k[2*P+2*x+1]+=L*et,H(k,2*P+2*x+1),k[2*P+2*x+1]+=R*Ue,H(k,2*P+2*x+1),k[2*P+2*x+2]+=L*Ue,H(k,2*P+2*x+2)}for(P=0;P<T;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=T;P<2*T;P++)k[P]=0;return new u(k,0)};function H(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function K(C,T){this.g=C,this.h=T}function X(C,T){if(z(T))throw Error("division by zero");if(z(C))return new K(E,E);if(N(C))return T=X(M(C),T),new K(M(T.g),M(T.h));if(N(T))return T=X(C,M(T)),new K(M(T.g),T.h);if(30<C.g.length){if(N(C)||N(T))throw Error("slowDivide_ only works with positive integers.");for(var k=S,P=T;0>=P.l(C);)k=Y(k),P=Y(P);var x=ae(k,1),L=ae(P,1);for(P=ae(P,2),k=ae(k,2);!z(P);){var R=L.add(P);0>=R.l(C)&&(x=x.add(k),L=R),P=ae(P,1),k=ae(k,1)}return T=J(C,x.j(T)),new K(x,T)}for(x=E;0<=C.l(T);){for(k=Math.max(1,Math.floor(C.m()/T.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=m(k),R=L.j(T);N(R)||0<R.l(C);)k-=P,L=m(k),R=L.j(T);z(L)&&(L=S),x=x.add(L),C=J(C,R)}return new K(x,C)}t.A=function(C){return X(this,C).h},t.and=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],P=0;P<T;P++)k[P]=this.i(P)&C.i(P);return new u(k,this.h&C.h)},t.or=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],P=0;P<T;P++)k[P]=this.i(P)|C.i(P);return new u(k,this.h|C.h)},t.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],P=0;P<T;P++)k[P]=this.i(P)^C.i(P);return new u(k,this.h^C.h)};function Y(C){for(var T=C.g.length+1,k=[],P=0;P<T;P++)k[P]=C.i(P)<<1|C.i(P-1)>>>31;return new u(k,C.h)}function ae(C,T){var k=T>>5;T%=32;for(var P=C.g.length-k,x=[],L=0;L<P;L++)x[L]=0<T?C.i(L+k)>>>T|C.i(L+k+1)<<32-T:C.i(L+k);return new u(x,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Io=u}).apply(typeof D_<"u"?D_:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mE,Zl,gE,Sd,Kp,yE,vE,_E;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(c,g){if(g)e:{var _=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var j=c[I];if(!(j in _))break e;_=_[j]}c=c[c.length-1],I=_[c],g=g(I),g!=I&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,I=!1,j={next:function(){if(!I&&_<c.length){var G=_++;return{value:g(G,c[G]),done:!1}}return I=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function E(c,g,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,I),c.apply(g,j)}}return function(){return c.apply(g,arguments)}}function S(c,g,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function b(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function z(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,j,G){for(var ce=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)ce[tt-2]=arguments[tt];return g.prototype[j].apply(I,ce)}}function N(c){const g=c.length;if(0<g){const _=Array(g);for(let I=0;I<g;I++)_[I]=c[I];return _}return[]}function M(c,g){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(f(I)){const j=c.length||0,G=I.length||0;c.length=j+G;for(let ce=0;ce<G;ce++)c[j+ce]=I[ce]}else c.push(I)}}class J{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function H(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function X(c){return X[" "](c),c}X[" "]=function(){};var Y=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function ae(c,g,_){for(const I in c)g.call(_,c[I],I,c)}function C(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function T(c){const g={};for(const _ in c)g[_]=c[_];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,g){let _,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(_ in I)c[_]=I[_];for(let G=0;G<k.length;G++)_=k[G],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function x(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function L(c){h.setTimeout(()=>{throw c},0)}function R(){var c=he;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ue{constructor(){this.h=this.g=null}add(g,_){const I=et.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var et=new J(()=>new Ze,c=>c.reset());class Ze{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,W=!1,he=new Ue,ue=()=>{const c=h.Promise.resolve(void 0);ne=()=>{c.then(F)}};var F=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(_){L(_)}var g=et;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}W=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Ee=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};h.addEventListener("test",_,g),h.removeEventListener("test",_,g)}catch{}return c})();function xe(c,g){if(de.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(Y){e:{try{X(g.nodeName);var j=!0;break e}catch{}j=!1}j||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ce[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&xe.aa.h.call(this)}}z(xe,de);var Ce={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function Fe(c,g,_,I,j){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=j,this.key=++Ve,this.da=this.fa=!1}function be(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function zt(c){this.src=c,this.g={},this.h=0}zt.prototype.add=function(c,g,_,I,j){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var ce=kn(c,g,I,j);return-1<ce?(g=c[ce],_||(g.fa=!1)):(g=new Fe(g,this.src,G,!!I,j),g.fa=_,c.push(g)),g};function Tt(c,g){var _=g.type;if(_ in c.g){var I=c.g[_],j=Array.prototype.indexOf.call(I,g,void 0),G;(G=0<=j)&&Array.prototype.splice.call(I,j,1),G&&(be(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function kn(c,g,_,I){for(var j=0;j<c.length;++j){var G=c[j];if(!G.da&&G.listener==g&&G.capture==!!_&&G.ha==I)return j}return-1}var tn="closure_lm_"+(1e6*Math.random()|0),Qn={};function sr(c,g,_,I,j){if(Array.isArray(g)){for(var G=0;G<g.length;G++)sr(c,g[G],_,I,j);return null}return _=Us(_),c&&c[Ie]?c.K(g,_,m(I)?!!I.capture:!1,j):zi(c,g,_,!1,I,j)}function zi(c,g,_,I,j,G){if(!g)throw Error("Invalid event type");var ce=m(j)?!!j.capture:!!j,tt=di(c);if(tt||(c[tn]=tt=new zt(c)),_=tt.add(g,_,I,ce,G),_.proxy)return _;if(I=js(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)Ee||(j=ce),j===void 0&&(j=!1),c.addEventListener(g.toString(),I,j);else if(c.attachEvent)c.attachEvent(On(g.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function js(){function c(_){return g.call(c.src,c.listener,_)}const g=qr;return c}function Br(c,g,_,I,j){if(Array.isArray(g))for(var G=0;G<g.length;G++)Br(c,g[G],_,I,j);else I=m(I)?!!I.capture:!!I,_=Us(_),c&&c[Ie]?(c=c.i,g=String(g).toString(),g in c.g&&(G=c.g[g],_=kn(G,_,I,j),-1<_&&(be(G[_]),Array.prototype.splice.call(G,_,1),G.length==0&&(delete c.g[g],c.h--)))):c&&(c=di(c))&&(g=c.g[g.toString()],c=-1,g&&(c=kn(g,_,I,j)),(_=-1<c?g[c]:null)&&Gt(_))}function Gt(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Ie])Tt(g.i,c);else{var _=c.type,I=c.proxy;g.removeEventListener?g.removeEventListener(_,I,c.capture):g.detachEvent?g.detachEvent(On(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=di(g))?(Tt(_,c),_.h==0&&(_.src=null,g[tn]=null)):be(c)}}}function On(c){return c in Qn?Qn[c]:Qn[c]="on"+c}function qr(c,g){if(c.da)c=!0;else{g=new xe(g,this);var _=c.listener,I=c.ha||c.src;c.fa&&Gt(c),c=_.call(I,g)}return c}function di(c){return c=c[tn],c instanceof zt?c:null}var hi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Us(c){return typeof c=="function"?c:(c[hi]||(c[hi]=function(g){return c.handleEvent(g)}),c[hi])}function bt(){Q.call(this),this.i=new zt(this),this.M=this,this.F=null}z(bt,Q),bt.prototype[Ie]=!0,bt.prototype.removeEventListener=function(c,g,_,I){Br(this,c,g,_,I)};function st(c,g){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=g.type||g,typeof g=="string")g=new de(g,c);else if(g instanceof de)g.target=g.target||c;else{var j=g;g=new de(I,c),P(g,j)}if(j=!0,_)for(var G=_.length-1;0<=G;G--){var ce=g.g=_[G];j=fn(ce,I,!0,g)&&j}if(ce=g.g=c,j=fn(ce,I,!0,g)&&j,j=fn(ce,I,!1,g)&&j,_)for(G=0;G<_.length;G++)ce=g.g=_[G],j=fn(ce,I,!1,g)&&j}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],I=0;I<_.length;I++)be(_[I]);delete c.g[g],c.h--}}this.F=null},bt.prototype.K=function(c,g,_,I){return this.i.add(String(c),g,!1,_,I)},bt.prototype.L=function(c,g,_,I){return this.i.add(String(c),g,!0,_,I)};function fn(c,g,_,I){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var j=!0,G=0;G<g.length;++G){var ce=g[G];if(ce&&!ce.da&&ce.capture==_){var tt=ce.listener,Ut=ce.ha||ce.src;ce.fa&&Tt(c.i,ce),j=tt.call(Ut,I)!==!1&&j}}return j&&!I.defaultPrevented}function wr(c,g,_){if(typeof c=="function")_&&(c=S(c,_));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function Er(c){c.g=wr(()=>{c.g=null,c.i&&(c.i=!1,Er(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class pn extends Q{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Er(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(c){Q.call(this),this.h=c,this.g={}}z(Wr,Q);var $s=[];function Bs(c){ae(c.g,function(g,_){this.g.hasOwnProperty(_)&&Gt(g)},c),c.g={}}Wr.prototype.N=function(){Wr.aa.N.call(this),Bs(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fi=h.JSON.stringify,ji=h.JSON.parse,qs=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Hr(){}Hr.prototype.h=null;function Ui(c){return c.h||(c.h=c.i())}function $i(){}var Mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rt(){de.call(this,"d")}z(rt,de);function xt(){de.call(this,"c")}z(xt,de);var ft={},Ln=null;function Pt(){return Ln=Ln||new bt}ft.La="serverreachability";function jt(c){de.call(this,ft.La,c)}z(jt,de);function Nt(c){const g=Pt();st(g,new jt(g))}ft.STAT_EVENT="statevent";function or(c,g){de.call(this,ft.STAT_EVENT,c),this.stat=g}z(or,de);function ze(c){const g=Pt();st(g,new or(g,c))}ft.Ma="timingevent";function bn(c,g){de.call(this,ft.Ma,c),this.size=g}z(bn,de);function It(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function nn(){this.g=!0}nn.prototype.xa=function(){this.g=!1};function Zn(c,g,_,I,j,G){c.info(function(){if(c.g)if(G)for(var ce="",tt=G.split("&"),Ut=0;Ut<tt.length;Ut++){var Ke=tt[Ut].split("=");if(1<Ke.length){var Kt=Ke[0];Ke=Ke[1];var Ot=Kt.split("_");ce=2<=Ot.length&&Ot[1]=="type"?ce+(Kt+"="+Ke+"&"):ce+(Kt+"=redacted&")}}else ce=null;else ce=G;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+g+`
`+_+`
`+ce})}function ar(c,g,_,I,j,G,ce){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+g+`
`+_+`
`+G+" "+ce})}function Dt(c,g,_,I){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ws(c,_)+(I?" "+I:"")})}function Tr(c,g){c.info(function(){return"TIMEOUT: "+g})}nn.prototype.info=function(){};function Ws(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var j=I[1];if(Array.isArray(j)&&!(1>j.length)){var G=j[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ce=1;ce<j.length;ce++)j[ce]=""}}}}return fi(_)}catch{return g}}var jo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ir;function Hs(){}z(Hs,Hr),Hs.prototype.g=function(){return new XMLHttpRequest},Hs.prototype.i=function(){return{}},Ir=new Hs;function Sr(c,g,_,I){this.j=c,this.i=g,this.l=_,this.R=I||1,this.U=new Wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zu}function Zu(){this.i=null,this.g="",this.h=!1}var fl={},Uo={};function $o(c,g,_){c.L=1,c.v=Gi(Yn(g)),c.m=_,c.P=!0,pl(c,null)}function pl(c,g){c.F=Date.now(),ot(c),c.A=Yn(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),Qi(_.i,"t",I),c.C=0,_=c.j.J,c.h=new Zu,c.g=pc(c.j,_?g:null,!c.m),0<c.O&&(c.M=new pn(S(c.Y,c,c.g),c.O)),g=c.U,_=c.g,I=c.ca;var j="readystatechange";Array.isArray(j)||(j&&($s[0]=j.toString()),j=$s);for(var G=0;G<j.length;G++){var ce=sr(_,j[G],I||g.handleEvent,!1,g.h||g);if(!ce)break;g.g[ce.key]=ce}g=c.H?T(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Nt(),Zn(c.i,c.u,c.A,c.l,c.R,c.m)}Sr.prototype.ca=function(c){c=c.target;const g=this.M;g&&Fn(c)==3?g.j():this.Y(c)},Sr.prototype.Y=function(c){try{if(c==this.g)e:{const Ot=Fn(this.g);var g=this.g.Ba();const cr=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||wl(this.g)))){this.J||Ot!=4||g==7||(g==8||0>=cr?Nt(3):Nt(2)),Gs(this);var _=this.g.Z();this.X=_;t:if(Ju(this)){var I=wl(this.g);c="";var j=I.length,G=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lr(this),Bi(this);var ce="";break t}this.h.i=new h.TextDecoder}for(g=0;g<j;g++)this.h.h=!0,c+=this.h.i.decode(I[g],{stream:!(G&&g==j-1)});I.length=0,this.h.g+=c,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=_==200,ar(this.i,this.u,this.A,this.l,this.R,Ot,_),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Ut=this.g;if((tt=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(tt)){var Ke=tt;break t}}Ke=null}if(_=Ke)Dt(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ml(this,_);else{this.o=!1,this.s=3,ze(12),lr(this),Bi(this);break e}}if(this.P){_=!0;let er;for(;!this.J&&this.C<ce.length;)if(er=jh(this,ce),er==Uo){Ot==4&&(this.s=4,ze(14),_=!1),Dt(this.i,this.l,null,"[Incomplete Response]");break}else if(er==fl){this.s=4,ze(15),Dt(this.i,this.l,ce,"[Invalid Chunk]"),_=!1;break}else Dt(this.i,this.l,er,null),ml(this,er);if(Ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||ce.length!=0||this.h.h||(this.s=1,ze(16),_=!1),this.o=this.o&&_,!_)Dt(this.i,this.l,ce,"[Invalid Chunked Response]"),lr(this),Bi(this);else if(0<ce.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Tl(Kt),Kt.M=!0,ze(11))}}else Dt(this.i,this.l,ce,null),ml(this,ce);Ot==4&&lr(this),this.o&&!this.J&&(Ot==4?Xo(this.j,this):(this.o=!1,ot(this)))}else Ko(this.g),_==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ze(12)):(this.s=0,ze(13)),lr(this),Bi(this)}}}catch{}finally{}};function Ju(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function jh(c,g){var _=c.C,I=g.indexOf(`
`,_);return I==-1?Uo:(_=Number(g.substring(_,I)),isNaN(_)?fl:(I+=1,I+_>g.length?Uo:(g=g.slice(I,I+_),c.C=I+_,g)))}Sr.prototype.cancel=function(){this.J=!0,lr(this)};function ot(c){c.S=Date.now()+c.I,Yu(c,c.I)}function Yu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=It(S(c.ba,c),g)}function Gs(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Sr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Tr(this.i,this.A),this.L!=2&&(Nt(),ze(17)),lr(this),this.s=2,Bi(this)):Yu(this,this.S-c)};function Bi(c){c.j.G==0||c.J||Xo(c.j,c)}function lr(c){Gs(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Bs(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function ml(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||An(_.h,c))){if(!c.K&&An(_.h,c)&&_.G==3){try{var I=_.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Yo(_),Cr(_);else break e;Jo(_),ze(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=It(S(_.Za,_),6e3));if(1>=ec(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else vi(_,11)}else if((c.K||_.g==c)&&Yo(_),!H(g))for(j=_.Da.g.parse(g),g=0;g<j.length;g++){let Ke=j[g];if(_.T=Ke[0],Ke=Ke[1],_.G==2)if(Ke[0]=="c"){_.K=Ke[1],_.ia=Ke[2];const Kt=Ke[3];Kt!=null&&(_.la=Kt,_.j.info("VER="+_.la));const Ot=Ke[4];Ot!=null&&(_.Aa=Ot,_.j.info("SVER="+_.Aa));const cr=Ke[5];cr!=null&&typeof cr=="number"&&0<cr&&(I=1.5*cr,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const er=c.g;if(er){const eo=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eo){var G=I.h;G.g||eo.indexOf("spdy")==-1&&eo.indexOf("quic")==-1&&eo.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(gl(G,G.h),G.h=null))}if(I.D){const ta=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;ta&&(I.ya=ta,it(I.I,I.D,ta))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var ce=c;if(I.qa=fc(I,I.J?I.ia:null,I.W),ce.K){tc(I.h,ce);var tt=ce,Ut=I.L;Ut&&(tt.I=Ut),tt.B&&(Gs(tt),ot(tt)),I.g=ce}else Xs(I);0<_.i.length&&Zr(_)}else Ke[0]!="stop"&&Ke[0]!="close"||vi(_,7);else _.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?vi(_,7):sn(_):Ke[0]!="noop"&&_.l&&_.l.ta(Ke),_.v=0)}}Nt(4)}catch{}}var Xu=class{constructor(c,g){this.g=c,this.map=g}};function Ks(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ec(c){return c.h?1:c.g?c.g.size:0}function An(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function gl(c,g){c.g?c.g.add(g):c.h=g}function tc(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Ks.prototype.cancel=function(){if(this.i=nc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function nc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return N(c.i)}function Bo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,I=0;I<_;I++)g.push(c[I]);return g}g=[],_=0;for(I in c)g[_++]=c[I];return g}function qo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const I in c)g[_++]=I;return g}}}function qi(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=qo(c),I=Bo(c),j=I.length,G=0;G<j;G++)g.call(void 0,I[G],_&&_[G],c)}var Qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uh(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),j=null;if(0<=I){var G=c[_].substring(0,I);j=c[_].substring(I+1)}else G=c[_];g(G,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function pi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof pi){this.h=c.h,Zs(this,c.j),this.o=c.o,this.g=c.g,Wi(this,c.s),this.l=c.l;var g=c.i,_=new Gr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Hi(this,_),this.m=c.m}else c&&(g=String(c).match(Qs))?(this.h=!1,Zs(this,g[1]||"",!0),this.o=qe(g[2]||""),this.g=qe(g[3]||"",!0),Wi(this,g[4]),this.l=qe(g[5]||"",!0),Hi(this,g[6]||"",!0),this.m=qe(g[7]||"")):(this.h=!1,this.i=new Gr(null,this.h))}pi.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Ki(g,Wo,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Ki(g,Wo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Ki(_,_.charAt(0)=="/"?sc:ic,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Ki(_,yl)),c.join("")};function Yn(c){return new pi(c)}function Zs(c,g,_){c.j=_?qe(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Wi(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Hi(c,g,_){g instanceof Gr?(c.i=g,Kr(c.i,c.h)):(_||(g=Ki(g,oc)),c.i=new Gr(g,c.h))}function it(c,g,_){c.i.set(g,_)}function Gi(c){return it(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function qe(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ki(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,rc),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function rc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Wo=/[#\/\?@]/g,ic=/[#\?:]/g,sc=/[#\?]/g,oc=/[#\?@]/g,yl=/#/g;function Gr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function rn(c){c.g||(c.g=new Map,c.h=0,c.i&&Uh(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=Gr.prototype,t.add=function(c,g){rn(this),this.i=null,c=ur(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function kr(c,g){rn(c),g=ur(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function br(c,g){return rn(c),g=ur(c,g),c.g.has(g)}t.forEach=function(c,g){rn(this),this.g.forEach(function(_,I){_.forEach(function(j){c.call(g,j,I,this)},this)},this)},t.na=function(){rn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let I=0;I<g.length;I++){const j=c[I];for(let G=0;G<j.length;G++)_.push(g[I])}return _},t.V=function(c){rn(this);let g=[];if(typeof c=="string")br(this,c)&&(g=g.concat(this.g.get(ur(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},t.set=function(c,g){return rn(this),this.i=null,c=ur(this,c),br(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Qi(c,g,_){kr(c,g),0<_.length&&(c.i=null,c.g.set(ur(c,g),N(_)),c.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var I=g[_];const G=encodeURIComponent(String(I)),ce=this.V(I);for(I=0;I<ce.length;I++){var j=G;ce[I]!==""&&(j+="="+encodeURIComponent(String(ce[I]))),c.push(j)}}return this.i=c.join("&")};function ur(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Kr(c,g){g&&!c.j&&(rn(c),c.i=null,c.g.forEach(function(_,I){var j=I.toLowerCase();I!=j&&(kr(this,I),Qi(this,j,_))},c)),c.j=g}function $h(c,g){const _=new nn;if(h.Image){const I=new Image;I.onload=b(Vn,_,"TestLoadImage: loaded",!0,g,I),I.onerror=b(Vn,_,"TestLoadImage: error",!1,g,I),I.onabort=b(Vn,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=b(Vn,_,"TestLoadImage: timeout",!1,g,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else g(!1)}function ac(c,g){const _=new nn,I=new AbortController,j=setTimeout(()=>{I.abort(),Vn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:I.signal}).then(G=>{clearTimeout(j),G.ok?Vn(_,"TestPingServer: ok",!0,g):Vn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(j),Vn(_,"TestPingServer: error",!1,g)})}function Vn(c,g,_,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(_)}catch{}}function Bh(){this.g=new qs}function lc(c,g,_){const I=_||"";try{qi(c,function(j,G){let ce=j;m(j)&&(ce=fi(j)),g.push(I+G+"="+encodeURIComponent(ce))})}catch(j){throw g.push(I+"type="+encodeURIComponent("_badmap")),j}}function mi(c){this.l=c.Ub||null,this.j=c.eb||!1}z(mi,Hr),mi.prototype.g=function(){return new Js(this.l,this.j)},mi.prototype.i=(function(c){return function(){return c}})({});function Js(c,g){bt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(Js,bt),t=Js.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Rr(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function uc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Ar(this):Rr(this),this.readyState==3&&uc(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ar(this))},t.Qa=function(c){this.g&&(this.response=c,Ar(this))},t.ga=function(){this.g&&Ar(this)};function Ar(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Rr(c)}t.setRequestHeader=function(c,g){this.u.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Rr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function gi(c){let g="";return ae(c,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function Zi(c,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=gi(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):it(c,g,_))}function pt(c){bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(pt,bt);var qh=/^https?$/i,vl=["POST","PUT"];t=pt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ir.g(),this.v=this.o?Ui(this.o):Ui(Ir),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(G){Ys(this,G);return}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)_.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const G of I.keys())_.set(G,I.get(G));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),j=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(vl,g,void 0))||I||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ce]of _)this.g.setRequestHeader(G,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Go(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){Ys(this,G)}};function Ys(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ho(c),Xn(c)}function Ho(c){c.A||(c.A=!0,st(c,"complete"),st(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,st(this,"complete"),st(this,"abort"),Xn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xn(this,!0)),pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_l(this):this.bb())},t.bb=function(){_l(this)};function _l(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Fn(c)!=4||c.Z()!=2)){if(c.u&&Fn(c)==4)wr(c.Ea,0,c);else if(st(c,"readystatechange"),Fn(c)==4){c.h=!1;try{const ce=c.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=ce===0){var j=String(c.D).match(Qs)[1]||null;!j&&h.self&&h.self.location&&(j=h.self.location.protocol.slice(0,-1)),I=!qh.test(j?j.toLowerCase():"")}_=I}if(_)st(c,"complete"),st(c,"success");else{c.m=6;try{var G=2<Fn(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",Ho(c)}}finally{Xn(c)}}}}function Xn(c,g){if(c.g){Go(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||st(c,"ready");try{_.onreadystatechange=I}catch{}}}function Go(c){c.I&&(h.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Fn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),ji(g)}};function wl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ko(c){const g={};c=(c.g&&2<=Fn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(H(c[I]))continue;var _=x(c[I]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=g[j]||[];g[j]=G,G.push(_)}C(g,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function El(c){this.Aa=0,this.i=[],this.j=new nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qr("baseRetryDelayMs",5e3,c),this.cb=Qr("retryDelaySeedMs",1e4,c),this.Wa=Qr("forwardChannelMaxRetries",2,c),this.wa=Qr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ks(c&&c.concurrentRequestLimit),this.Da=new Bh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=El.prototype,t.la=8,t.G=1,t.connect=function(c,g,_,I){ze(0),this.W=c,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=fc(this,null,this.W),Zr(this)};function sn(c){if(Qo(c),c.G==3){var g=c.U++,_=Yn(c.I);if(it(_,"SID",c.K),it(_,"RID",g),it(_,"TYPE","terminate"),yi(c,_),g=new Sr(c,c.j,g),g.L=2,g.v=Gi(Yn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=g.v,_=!0),_||(g.g=pc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ot(g)}hc(c)}function Cr(c){c.g&&(Tl(c),c.g.cancel(),c.g=null)}function Qo(c){Cr(c),c.u&&(h.clearTimeout(c.u),c.u=null),Yo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function Zr(c){if(!Jn(c.h)&&!c.s){c.s=!0;var g=c.Ga;ne||ue(),W||(ne(),W=!0),he.add(g,c),c.B=0}}function Wh(c,g){return ec(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=It(S(c.Ga,c,g),dc(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new Sr(this,this.j,c);let G=this.o;if(this.S&&(G?(G=T(G),P(G,this.S)):G=this.S),this.m!==null||this.O||(j.H=G,G=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ji(this,j,g),_=Yn(this.I),it(_,"RID",c),it(_,"CVER",22),this.D&&it(_,"X-HTTP-Session-Id",this.D),yi(this,_),G&&(this.O?g="headers="+encodeURIComponent(String(gi(G)))+"&"+g:this.m&&Zi(_,this.m,G)),gl(this.h,j),this.Ua&&it(_,"TYPE","init"),this.P?(it(_,"$req",g),it(_,"SID","null"),j.T=!0,$o(j,_,null)):$o(j,_,g),this.G=2}}else this.G==3&&(c?Zo(this,c):this.i.length==0||Jn(this.h)||Zo(this))};function Zo(c,g){var _;g?_=g.l:_=c.U++;const I=Yn(c.I);it(I,"SID",c.K),it(I,"RID",_),it(I,"AID",c.T),yi(c,I),c.m&&c.o&&Zi(I,c.m,c.o),_=new Sr(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Ji(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),gl(c.h,_),$o(_,I,g)}function yi(c,g){c.H&&ae(c.H,function(_,I){it(g,I,_)}),c.l&&qi({},function(_,I){it(g,I,_)})}function Ji(c,g,_){_=Math.min(c.i.length,_);var I=c.l?S(c.l.Na,c.l,c):null;e:{var j=c.i;let G=-1;for(;;){const ce=["count="+_];G==-1?0<_?(G=j[0].g,ce.push("ofs="+G)):G=0:ce.push("ofs="+G);let tt=!0;for(let Ut=0;Ut<_;Ut++){let Ke=j[Ut].g;const Kt=j[Ut].map;if(Ke-=G,0>Ke)G=Math.max(0,j[Ut].g-100),tt=!1;else try{lc(Kt,ce,"req"+Ke+"_")}catch{I&&I(Kt)}}if(tt){I=ce.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,I}function Xs(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;ne||ue(),W||(ne(),W=!0),he.add(g,c),c.v=0}}function Jo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=It(S(c.Fa,c),dc(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,cc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=It(S(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ze(10),Cr(this),cc(this))};function Tl(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function cc(c){c.g=new Sr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Yn(c.qa);it(g,"RID","rpc"),it(g,"SID",c.K),it(g,"AID",c.T),it(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&it(g,"TO",c.ja),it(g,"TYPE","xmlhttp"),yi(c,g),c.m&&c.o&&Zi(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Gi(Yn(g)),_.m=null,_.P=!0,pl(_,c)}t.Za=function(){this.C!=null&&(this.C=null,Cr(this),Jo(this),ze(19))};function Yo(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Xo(c,g){var _=null;if(c.g==g){Yo(c),Tl(c),c.g=null;var I=2}else if(An(c.h,g))_=g.D,tc(c.h,g),I=1;else return;if(c.G!=0){if(g.o)if(I==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var j=c.B;I=Pt(),st(I,new bn(I,_)),Zr(c)}else Xs(c);else if(j=g.s,j==3||j==0&&0<g.X||!(I==1&&Wh(c,g)||I==2&&Jo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),j){case 1:vi(c,5);break;case 4:vi(c,10);break;case 3:vi(c,6);break;default:vi(c,2)}}}function dc(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function vi(c,g){if(c.j.info("Error code "+g),g==2){var _=S(c.fb,c),I=c.Xa;const j=!I;I=new pi(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Zs(I,"https"),Gi(I),j?$h(I.toString(),_):ac(I.toString(),_)}else ze(2);c.G=0,c.l&&c.l.sa(g),hc(c),Qo(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function hc(c){if(c.G=0,c.ka=[],c.l){const g=nc(c.h);(g.length!=0||c.i.length!=0)&&(M(c.ka,g),M(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function fc(c,g,_){var I=_ instanceof pi?Yn(_):new pi(_);if(I.g!="")g&&(I.g=g+"."+I.g),Wi(I,I.s);else{var j=h.location;I=j.protocol,g=g?g+"."+j.hostname:j.hostname,j=+j.port;var G=new pi(null);I&&Zs(G,I),g&&(G.g=g),j&&Wi(G,j),_&&(G.l=_),I=G}return _=c.D,g=c.ya,_&&g&&it(I,_,g),it(I,"VER",c.la),yi(c,I),I}function pc(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new pt(new mi({eb:_})):new pt(c.pa),g.Ha(c.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Il(){}t=Il.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ea(){}ea.prototype.g=function(c,g){return new Rn(c,g)};function Rn(c,g){bt.call(this),this.g=new El(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!H(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!H(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Jr(this)}z(Rn,bt),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){sn(this.g)},Rn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=fi(c),c=_);g.i.push(new Xu(g.Ya++,c)),g.G==3&&Zr(g)},Rn.prototype.N=function(){this.g.l=null,delete this.j,sn(this.g),delete this.g,Rn.aa.N.call(this)};function mc(c){rt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}z(mc,rt);function gc(){xt.call(this),this.status=1}z(gc,xt);function Jr(c){this.g=c}z(Jr,Il),Jr.prototype.ua=function(){st(this.g,"a")},Jr.prototype.ta=function(c){st(this.g,new mc(c))},Jr.prototype.sa=function(c){st(this.g,new gc)},Jr.prototype.ra=function(){st(this.g,"b")},ea.prototype.createWebChannel=ea.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,_E=function(){return new ea},vE=function(){return Pt()},yE=ft,Kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jo.NO_ERROR=0,jo.TIMEOUT=8,jo.HTTP_ERROR=6,Sd=jo,Qu.COMPLETE="complete",gE=Qu,$i.EventType=Mn,Mn.OPEN="a",Mn.CLOSE="b",Mn.ERROR="c",Mn.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Zl=$i,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,mE=pt}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});const O_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new Cm("@firebase/firestore");function Ql(){return Ro.logLevel}function we(t,...e){if(Ro.logLevel<=Ge.DEBUG){const n=e.map(Nm);Ro.debug(`Firestore (${rl}): ${t}`,...n)}}function Oi(t,...e){if(Ro.logLevel<=Ge.ERROR){const n=e.map(Nm);Ro.error(`Firestore (${rl}): ${t}`,...n)}}function Wa(t,...e){if(Ro.logLevel<=Ge.WARN){const n=e.map(Nm);Ro.warn(`Firestore (${rl}): ${t}`,...n)}}function Nm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t="Unexpected state"){const e=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: `+t;throw Oi(e),new Error(e)}function nt(t,e){t||Oe()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Fi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(En.UNAUTHENTICATED)))}shutdown(){}}class MR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class LR{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new So;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new So,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},h=f=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new So)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string"),new wE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new En(e)}}class VR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new VR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){nt(this.o===void 0);const r=a=>{a.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,we("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(nt(typeof n.token=="string"),this.R=n.token,new zR(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=UR(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function Xe(t,e){return t<e?-1:t>e?1:0}function Ha(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new me(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new _t(0,0))}static max(){return new Me(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Oe(),r===void 0?r=e.length-n:r>e.length-n&&Oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pu?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),u=n.get(s);if(a<u)return-1;if(a>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ht extends pu{construct(e,n,r){return new ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new ht(n)}static emptyPath(){return new ht([])}}const $R=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends pu{construct(e,n,r){return new un(e,n,r)}static isValidIdentifier(e){return $R.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new un(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new me(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new me(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new me(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(a(),s++)}if(a(),u)throw new me(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(n)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(ht.fromString(e))}static fromName(e){return new ke(ht.fromString(e).popFirst(5))}static empty(){return new ke(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new ht(e.slice()))}}function BR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new Ds(s,ke.empty(),e)}function qR(t){return new Ds(t.readTime,t.key,-1)}class Ds{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ds(Me.min(),ke.empty(),-1)}static max(){return new Ds(Me.max(),ke.empty(),-1)}}function WR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==HR)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,r)=>{n(e)}))}static reject(e){return new se(((n,r)=>{r(e)}))}static waitFor(e){return new se(((n,r)=>{let s=0,a=0,u=!1;e.forEach((h=>{++s,h.next((()=>{++a,u&&a===s&&n()}),(f=>r(f)))})),u=!0,a===s&&n()}))}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next((s=>s?se.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,a)=>{r.push(n.call(this,s,a))})),this.waitFor(r)}static mapArray(e,n){return new se(((r,s)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;n(e[m]).next((v=>{u[m]=v,++h,h===a&&r(u)}),(v=>s(v)))}}))}static doWhile(e,n){return new se(((r,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):r()};a()}))}}function KR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Dm.oe=-1;function dh(t){return t==null}function Ud(t){return t===0&&1/t==-1/0}function QR(t){return typeof t=="number"&&Number.isInteger(t)&&!Ud(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??ln.RED,this.left=s??ln.EMPTY,this.right=a??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new ln(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ln.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,n,r,s,a){return this}insert(e,n,r){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new L_(this.data.getIterator())}getIteratorFrom(e){return new L_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new cn(this.comparator);return n.data=e,n}}class L_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new ir([])}unionWith(e){let n=new cn(un.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ir(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ha(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new IE("Invalid base64 string: "+a):a}})(e);return new dn(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const ZR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(t){if(nt(!!t),typeof t=="string"){let e=0;const n=ZR.exec(t);if(nt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(t.seconds),nanos:Rt(t.nanos)}}function Rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Co(t){return typeof t=="string"?dn.fromBase64String(t):dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Mm(t){const e=t.mapValue.fields.__previous_value__;return Om(e)?Mm(e):e}function mu(t){const e=Os(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n,r,s,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m}}class gu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new gu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd={mapValue:{}};function xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Om(t)?4:XR(t)?9007199254740991:YR(t)?10:11:Oe()}function ui(t,e){if(t===e)return!0;const n=xo(t);if(n!==xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mu(t).isEqual(mu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=Os(s.timestampValue),h=Os(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return Co(s.bytesValue).isEqual(Co(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return Rt(s.geoPointValue.latitude)===Rt(a.geoPointValue.latitude)&&Rt(s.geoPointValue.longitude)===Rt(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Rt(s.integerValue)===Rt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Rt(s.doubleValue),h=Rt(a.doubleValue);return u===h?Ud(u)===Ud(h):isNaN(u)&&isNaN(h)}return!1})(t,e);case 9:return Ha(t.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},h=a.mapValue.fields||{};if(M_(u)!==M_(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!ui(u[f],h[f])))return!1;return!0})(t,e);default:return Oe()}}function yu(t,e){return(t.values||[]).find((n=>ui(n,e)))!==void 0}function Ga(t,e){if(t===e)return 0;const n=xo(t),r=xo(e);if(n!==r)return Xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const h=Rt(a.integerValue||a.doubleValue),f=Rt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(t,e);case 3:return V_(t.timestampValue,e.timestampValue);case 4:return V_(mu(t),mu(e));case 5:return Xe(t.stringValue,e.stringValue);case 6:return(function(a,u){const h=Co(a),f=Co(u);return h.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const h=a.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const v=Xe(h[m],f[m]);if(v!==0)return v}return Xe(h.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const h=Xe(Rt(a.latitude),Rt(u.latitude));return h!==0?h:Xe(Rt(a.longitude),Rt(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return F_(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var h,f,m,v;const E=a.fields||{},S=u.fields||{},b=(h=E.value)===null||h===void 0?void 0:h.arrayValue,z=(f=S.value)===null||f===void 0?void 0:f.arrayValue,N=Xe(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((v=z==null?void 0:z.values)===null||v===void 0?void 0:v.length)||0);return N!==0?N:F_(b,z)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===gd.mapValue&&u===gd.mapValue)return 0;if(a===gd.mapValue)return 1;if(u===gd.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let E=0;E<f.length&&E<v.length;++E){const S=Xe(f[E],v[E]);if(S!==0)return S;const b=Ga(h[f[E]],m[v[E]]);if(b!==0)return b}return Xe(f.length,v.length)})(t.mapValue,e.mapValue);default:throw Oe()}}function V_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=Os(t),r=Os(e),s=Xe(n.seconds,r.seconds);return s!==0?s:Xe(n.nanos,r.nanos)}function F_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Ga(n[s],r[s]);if(a)return a}return Xe(n.length,r.length)}function Ka(t){return Qp(t)}function Qp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Os(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Co(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ke.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Qp(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Qp(n.fields[u])}`;return s+"}"})(t.mapValue):Oe()}function z_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Zp(t){return!!t&&"integerValue"in t}function Lm(t){return!!t&&"arrayValue"in t}function j_(t){return!!t&&"nullValue"in t}function U_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kd(t){return!!t&&"mapValue"in t}function YR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function nu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Oo(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=nu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(n)}setAll(e){let n=un.emptyPath(),r={},s=[];e.forEach(((u,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=h.popLast()}u?r[h.lastSegment()]=nu(u):s.push(h.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());kd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];kd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Oo(n,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new Wn(nu(this.value))}}function SE(t){const e=[];return Oo(t.fields,((n,r)=>{const s=new un([n]);if(kd(r)){const a=SE(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,r,s,a,u,h){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Tn(e,0,Me.min(),Me.min(),Me.min(),Wn.empty(),0)}static newFoundDocument(e,n,r,s){return new Tn(e,1,n,Me.min(),r,s,0)}static newNoDocument(e,n){return new Tn(e,2,n,Me.min(),Me.min(),Wn.empty(),0)}static newUnknownDocument(e,n){return new Tn(e,3,n,Me.min(),Me.min(),Wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n){this.position=e,this.inclusive=n}}function $_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],u=t.position[s];if(a.field.isKeyField()?r=ke.comparator(ke.fromName(u.referenceValue),n.key):r=Ga(u,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function B_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ui(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n="asc"){this.field=e,this.dir=n}}function eC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{}class Vt extends kE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nC(e,n,r):n==="array-contains"?new sC(e,r):n==="in"?new oC(e,r):n==="not-in"?new aC(e,r):n==="array-contains-any"?new lC(e,r):new Vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rC(e,r):new iC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ga(n,this.value)):n!==null&&xo(this.value)===xo(n)&&this.matchesComparison(Ga(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ur extends kE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ur(e,n)}matches(e){return bE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bE(t){return t.op==="and"}function AE(t){return tC(t)&&bE(t)}function tC(t){for(const e of t.filters)if(e instanceof Ur)return!1;return!0}function Jp(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+Ka(t.value);if(AE(t))return t.filters.map((e=>Jp(e))).join(",");{const e=t.filters.map((n=>Jp(n))).join(",");return`${t.op}(${e})`}}function RE(t,e){return t instanceof Vt?(function(r,s){return s instanceof Vt&&r.op===s.op&&r.field.isEqual(s.field)&&ui(r.value,s.value)})(t,e):t instanceof Ur?(function(r,s){return s instanceof Ur&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,h)=>a&&RE(u,s.filters[h])),!0):!1})(t,e):void Oe()}function CE(t){return t instanceof Vt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ka(n.value)}`})(t):t instanceof Ur?(function(n){return n.op.toString()+" {"+n.getFilters().map(CE).join(" ,")+"}"})(t):"Filter"}class nC extends Vt{constructor(e,n,r){super(e,n,r),this.key=ke.fromName(r.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class rC extends Vt{constructor(e,n){super(e,"in",n),this.keys=xE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class iC extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=xE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function xE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>ke.fromName(r.referenceValue)))}class sC extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lm(n)&&yu(n.arrayValue,this.value)}}class oC extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yu(this.value.arrayValue,n)}}class aC extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!yu(this.value.arrayValue,n)}}class lC extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>yu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n=null,r=[],s=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=h,this.ue=null}}function q_(t,e=null,n=[],r=[],s=null,a=null,u=null){return new uC(t,e,n,r,s,a,u)}function Vm(t){const e=Le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Jp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),dh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ka(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ka(r))).join(",")),e.ue=n}return e.ue}function Fm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!B_(t.startAt,e.startAt)&&B_(t.endAt,e.endAt)}function Yp(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n=null,r=[],s=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cC(t,e,n,r,s,a,u,h){return new il(t,e,n,r,s,a,u,h)}function zm(t){return new il(t)}function W_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PE(t){return t.collectionGroup!==null}function ru(t){const e=Le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new cn(un.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new vu(a,r))})),n.has(un.keyField().canonicalString())||e.ce.push(new vu(un.keyField(),r))}return e.ce}function si(t){const e=Le(t);return e.le||(e.le=dC(e,ru(t))),e.le}function dC(t,e){if(t.limitType==="F")return q_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new vu(s.field,a)}));const n=t.endAt?new $d(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $d(t.startAt.position,t.startAt.inclusive):null;return q_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xp(t,e){const n=t.filters.concat([e]);return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function em(t,e,n){return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hh(t,e){return Fm(si(t),si(e))&&t.limitType===e.limitType}function NE(t){return`${Vm(si(t))}|lt:${t.limitType}`}function Ia(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>CE(s))).join(", ")}]`),dh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Ka(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Ka(s))).join(",")),`Target(${r})`})(si(t))}; limitType=${t.limitType})`}function fh(t,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ke.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,s){for(const a of ru(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(u,h,f){const m=$_(u,h,f);return u.inclusive?m<=0:m<0})(r.startAt,ru(r),s)||r.endAt&&!(function(u,h,f){const m=$_(u,h,f);return u.inclusive?m>=0:m>0})(r.endAt,ru(r),s))})(t,e)}function hC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DE(t){return(e,n)=>{let r=!1;for(const s of ru(t)){const a=fC(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function fC(t,e,n){const r=t.field.isKeyField()?ke.comparator(e.key,n.key):(function(a,u,h){const f=u.data.field(a),m=h.data.field(a);return f!==null&&m!==null?Ga(f,m):Oe()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,((n,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return TE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new wt(ke.comparator);function Mi(){return pC}const OE=new wt(ke.comparator);function Jl(...t){let e=OE;for(const n of t)e=e.insert(n.key,n);return e}function ME(t){let e=OE;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function go(){return iu()}function LE(){return iu()}function iu(){return new sl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const mC=new wt(ke.comparator),gC=new cn(ke.comparator);function Be(...t){let e=gC;for(const n of t)e=e.add(n);return e}const yC=new cn(Xe);function vC(){return yC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ud(e)?"-0":e}}function VE(t){return{integerValue:""+t}}function _C(t,e){return QR(e)?VE(e):jm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(){this._=void 0}}function wC(t,e,n){return t instanceof _u?(function(s,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Om(a)&&(a=Mm(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(n,e):t instanceof wu?zE(t,e):t instanceof Eu?jE(t,e):(function(s,a){const u=FE(s,a),h=H_(u)+H_(s.Pe);return Zp(u)&&Zp(s.Pe)?VE(h):jm(s.serializer,h)})(t,e)}function EC(t,e,n){return t instanceof wu?zE(t,e):t instanceof Eu?jE(t,e):n}function FE(t,e){return t instanceof Bd?(function(r){return Zp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class _u extends ph{}class wu extends ph{constructor(e){super(),this.elements=e}}function zE(t,e){const n=UE(e);for(const r of t.elements)n.some((s=>ui(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Eu extends ph{constructor(e){super(),this.elements=e}}function jE(t,e){let n=UE(e);for(const r of t.elements)n=n.filter((s=>!ui(s,r)));return{arrayValue:{values:n}}}class Bd extends ph{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function H_(t){return Rt(t.integerValue||t.doubleValue)}function UE(t){return Lm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n){this.field=e,this.transform=n}}function IC(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof wu&&s instanceof wu||r instanceof Eu&&s instanceof Eu?Ha(r.elements,s.elements,ui):r instanceof Bd&&s instanceof Bd?ui(r.Pe,s.Pe):r instanceof _u&&s instanceof _u})(t.transform,e.transform)}class SC{constructor(e,n){this.version=e,this.transformResults=n}}class jr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jr}static exists(e){return new jr(void 0,e)}static updateTime(e){return new jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mh{}function $E(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Um(t.key,jr.none()):new Lu(t.key,t.data,jr.none());{const n=t.data,r=Wn.empty();let s=new cn(un.comparator);for(let a of e.fields)if(!s.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new Ls(t.key,r,new ir(s.toArray()),jr.none())}}function kC(t,e,n){t instanceof Lu?(function(s,a,u){const h=s.value.clone(),f=K_(s.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):t instanceof Ls?(function(s,a,u){if(!bd(s.precondition,a))return void a.convertToUnknownDocument(u.version);const h=K_(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(BE(s)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function su(t,e,n,r){return t instanceof Lu?(function(a,u,h,f){if(!bd(a.precondition,u))return h;const m=a.value.clone(),v=Q_(a.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ls?(function(a,u,h,f){if(!bd(a.precondition,u))return h;const m=Q_(a.fieldTransforms,f,u),v=u.data;return v.setAll(BE(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,r):(function(a,u,h){return bd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(t,e,n)}function bC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=FE(r.transform,s||null);a!=null&&(n===null&&(n=Wn.empty()),n.set(r.field,a))}return n||null}function G_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ha(r,s,((a,u)=>IC(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lu extends mh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ls extends mh{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function BE(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function K_(t,e,n){const r=new Map;nt(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],u=a.transform,h=e.data.field(a.field);r.set(a.field,EC(u,h,n[s]))}return r}function Q_(t,e,n){const r=new Map;for(const s of t){const a=s.transform,u=n.data.field(s.field);r.set(s.field,wC(a,u,e))}return r}class Um extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AC extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&kC(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=LE();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=n.has(s.key)?null:h;const f=$E(u,h);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Me.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Ha(this.mutations,e.mutations,((n,r)=>G_(n,r)))&&Ha(this.baseMutations,e.baseMutations,((n,r)=>G_(n,r)))}}class $m{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){nt(e.mutations.length===r.length);let s=(function(){return mC})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new $m(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Qe;function PC(t){switch(t){default:return Oe();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function qE(t){if(t===void 0)return Oi("GRPC error has no .code"),te.UNKNOWN;switch(t){case Lt.OK:return te.OK;case Lt.CANCELLED:return te.CANCELLED;case Lt.UNKNOWN:return te.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return te.INTERNAL;case Lt.UNAVAILABLE:return te.UNAVAILABLE;case Lt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Lt.NOT_FOUND:return te.NOT_FOUND;case Lt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Lt.ABORTED:return te.ABORTED;case Lt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Lt.DATA_LOSS:return te.DATA_LOSS;default:return Oe()}}(Qe=Lt||(Lt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Io([4294967295,4294967295],0);function Z_(t){const e=NC().encode(t),n=new pE;return n.update(e),new Uint8Array(n.digest())}function J_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Io([n,r],0),new Io([s,a],0)]}class Bm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yl(`Invalid padding: ${n}`);if(r<0)throw new Yl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Io.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Io.fromNumber(r)));return s.compare(DC)===1&&(s=new Io([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Z_(e),[r,s]=J_(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);if(!this.de(u))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Bm(a,s,n);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.Ie===0)return;const n=Z_(e),[r,s]=J_(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);this.Ae(u)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gh(Me.min(),s,new wt(Xe),Mi(),Be())}}class Vu{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vu(r,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class WE{constructor(e,n){this.targetId=e,this.me=n}}class HE{constructor(e,n,r=dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Y_{constructor(){this.fe=0,this.ge=e0(),this.pe=dn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),n=Be(),r=Be();return this.ge.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Oe()}})),new Vu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=e0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class OC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mi(),this.qe=X_(),this.Qe=new wt(Xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Oe()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,s)=>{this.ze(s)&&n(s)}))}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(Yp(a))if(r===0){const u=new ke(a.path);this.Ue(n,u,Tn.newNoDocument(u,Me.min()))}else nt(r===1);else{const u=this.Ye(n);if(u!==r){const h=this.Ze(e),f=h?this.Xe(h,e,u):1;if(f!==0){this.je(n);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let u,h;try{u=Co(r).toUint8Array()}catch(f){if(f instanceof IE)return Wa("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Bm(u,s,a)}catch(f){return Wa(f instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach((a=>{const u=this.Le.tt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,a,null),s++)})),s}rt(e){const n=new Map;this.Be.forEach(((a,u)=>{const h=this.Je(u);if(h){if(a.current&&Yp(h.target)){const f=new ke(h.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,Tn.newNoDocument(f,e))}a.be&&(n.set(u,a.ve()),a.Ce())}}));let r=Be();this.qe.forEach(((a,u)=>{let h=!0;u.forEachWhile((f=>{const m=this.Je(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const s=new gh(e,n,this.Qe,this.ke,r);return this.ke=Mi(),this.qe=X_(),this.Qe=new wt(Xe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Y_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new cn(Xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Y_),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function X_(){return new wt(ke.comparator)}function e0(){return new wt(ke.comparator)}const MC={asc:"ASCENDING",desc:"DESCENDING"},LC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VC={and:"AND",or:"OR"};class FC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tm(t,e){return t.useProto3Json||dh(e)?e:{value:e}}function qd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zC(t,e){return qd(t,e.toTimestamp())}function oi(t){return nt(!!t),Me.fromTimestamp((function(n){const r=Os(n);return new _t(r.seconds,r.nanos)})(t))}function qm(t,e){return nm(t,e).canonicalString()}function nm(t,e){const n=(function(s){return new ht(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function KE(t){const e=ht.fromString(t);return nt(XE(e)),e}function rm(t,e){return qm(t.databaseId,e.path)}function bp(t,e){const n=KE(e);if(n.get(1)!==t.databaseId.projectId)throw new me(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new me(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(ZE(n))}function QE(t,e){return qm(t.databaseId,e)}function jC(t){const e=KE(t);return e.length===4?ht.emptyPath():ZE(e)}function im(t){return new ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ZE(t){return nt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function t0(t,e,n){return{name:rm(t,e),fields:n.value.mapValue.fields}}function UC(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Oe()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(nt(v===void 0||typeof v=="string"),dn.fromBase64String(v||"")):(nt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),dn.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const v=m.code===void 0?te.UNKNOWN:qE(m.code);return new me(v,m.message||"")})(u);n=new HE(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bp(t,r.document.name),a=oi(r.document.updateTime),u=r.document.createTime?oi(r.document.createTime):Me.min(),h=new Wn({mapValue:{fields:r.document.fields}}),f=Tn.newFoundDocument(s,a,u,h),m=r.targetIds||[],v=r.removedTargetIds||[];n=new Ad(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bp(t,r.document),a=r.readTime?oi(r.readTime):Me.min(),u=Tn.newNoDocument(s,a),h=r.removedTargetIds||[];n=new Ad([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bp(t,r.document),a=r.removedTargetIds||[];n=new Ad([],a,s,null)}else{if(!("filter"in e))return Oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new xC(s,a),h=r.targetId;n=new WE(h,u)}}return n}function $C(t,e){let n;if(e instanceof Lu)n={update:t0(t,e.key,e.value)};else if(e instanceof Um)n={delete:rm(t,e.key)};else if(e instanceof Ls)n={update:t0(t,e.key,e.data),updateMask:JC(e.fieldMask)};else{if(!(e instanceof AC))return Oe();n={verify:rm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const h=u.transform;if(h instanceof _u)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof wu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Eu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Bd)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw Oe()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:zC(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Oe()})(t,e.precondition)),n}function BC(t,e){return t&&t.length>0?(nt(e!==void 0),t.map((n=>(function(s,a){let u=s.updateTime?oi(s.updateTime):oi(a);return u.isEqual(Me.min())&&(u=oi(a)),new SC(u,s.transformResults||[])})(n,e)))):[]}function qC(t,e){return{documents:[QE(t,e.path)]}}function WC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QE(t,s);const a=(function(m){if(m.length!==0)return YE(Ur.create(m,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:Sa(S.field),direction:KC(S.dir)}})(v)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=tm(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:n,parent:s}}function HC(t){let e=jC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){nt(r===1);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=(function(E){const S=JE(E);return S instanceof Ur&&AE(S)?S.getFilters():[S]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((S=>(function(z){return new vu(ka(z.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(S)))})(n.orderBy));let h=null;n.limit&&(h=(function(E){let S;return S=typeof E=="object"?E.value:E,dh(S)?null:S})(n.limit));let f=null;n.startAt&&(f=(function(E){const S=!!E.before,b=E.values||[];return new $d(b,S)})(n.startAt));let m=null;return n.endAt&&(m=(function(E){const S=!E.before,b=E.values||[];return new $d(b,S)})(n.endAt)),cC(e,s,u,a,h,"F",f,m)}function GC(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ka(n.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ka(n.unaryFilter.field);return Vt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ka(n.unaryFilter.field);return Vt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ka(n.unaryFilter.field);return Vt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}})(t):t.fieldFilter!==void 0?(function(n){return Vt.create(ka(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ur.create(n.compositeFilter.filters.map((r=>JE(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe()}})(n.compositeFilter.op))})(t):Oe()}function KC(t){return MC[t]}function QC(t){return LC[t]}function ZC(t){return VC[t]}function Sa(t){return{fieldPath:t.canonicalString()}}function ka(t){return un.fromServerFormat(t.fieldPath)}function YE(t){return t instanceof Vt?(function(n){if(n.op==="=="){if(U_(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NAN"}};if(j_(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(U_(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NAN"}};if(j_(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(n.field),op:QC(n.op),value:n.value}}})(t):t instanceof Ur?(function(n){const r=n.getFilters().map((s=>YE(s)));return r.length===1?r[0]:{compositeFilter:{op:ZC(n.op),filters:r}}})(t):Oe()}function JC(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function XE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,s,a=Me.min(),u=Me.min(),h=dn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.ct=e}}function XC(t){const e=HC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?em(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.un=new tx}addToCollectionParentIndex(e,n){return this.un.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Ds.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class tx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new cn(ht.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new cn(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Qa(0)}static kn(){return new Qa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.changes=new sl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&su(r.mutation,s,ir.empty(),_t.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Be()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Be()){const s=go();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((a=>{let u=Jl();return a.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=go();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Be())))}populateOverlays(e,n,r){const s=[];return r.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,h)=>{n.set(u,h)}))}))}computeViews(e,n,r,s){let a=Mi();const u=iu(),h=(function(){return iu()})();return n.forEach(((f,m)=>{const v=r.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof Ls)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),su(v.mutation,m,v.mutation.getFieldMask(),_t.now())):u.set(m.key,ir.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,v)=>u.set(m,v))),n.forEach(((m,v)=>{var E;return h.set(m,new rx(v,(E=u.get(m))!==null&&E!==void 0?E:null))})),h)))}recalculateAndSaveOverlays(e,n){const r=iu();let s=new wt(((u,h)=>u-h)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const h of u)h.keys().forEach((f=>{const m=n.get(f);if(m===null)return;let v=r.get(f)||ir.empty();v=h.applyToLocalView(m,v),r.set(f,v);const E=(s.get(h.batchId)||Be()).add(f);s=s.insert(h.batchId,E)}))})).next((()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,v=f.value,E=LE();v.forEach((S=>{if(!a.has(S)){const b=$E(n.get(S),r.get(S));b!==null&&E.set(S,b),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return se.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(u){return ke.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):se.resolve(go());let h=-1,f=a;return u.next((m=>se.forEach(m,((v,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{f=f.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Be()))).next((v=>({batchId:h,changes:ME(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next((r=>{let s=Jl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let u=Jl();return this.indexManager.getCollectionParents(e,a).next((h=>se.forEach(h,(f=>{const m=(function(E,S){return new il(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,Tn.newInvalidDocument(v)))}));let h=Jl();return u.forEach(((f,m)=>{const v=a.get(f);v!==void 0&&su(v.mutation,m,ir.empty(),_t.now()),fh(n,m)&&(h=h.insert(f,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return se.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:oi(s.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(s){return{name:s.name,query:XC(s.bundledQuery),readTime:oi(s.readTime)}})(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.overlays=new wt(ke.comparator),this.Ir=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=go();return se.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,a)=>{this.ht(e,n,a)})),se.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const s=go(),a=n.length+1,u=new ke(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return se.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new wt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=go(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=go(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,v)=>h.set(m,v))),!(h.size()>=s)););return se.resolve(h)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new CC(n,r));let a=this.Ir.get(n);a===void 0&&(a=Be(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this.Tr=new cn(Xt.Er),this.dr=new cn(Xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Xt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new Xt(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new ke(new ht([])),r=new Xt(n,e),s=new Xt(n,e+1),a=[];return this.dr.forEachInRange([r,s],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ke(new ht([])),r=new Xt(n,e),s=new Xt(n,e+1);let a=Be();return this.dr.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new Xt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ke.comparator(e.key,n.key)||Xe(e.wr,n.wr)}static Ar(e,n){return Xe(e.wr,n.wr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new cn(Xt.Er)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new RC(a,n,r,s);this.mutationQueue.push(u);for(const h of s)this.br=this.br.add(new Xt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,n){return se.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xt(n,0),s=new Xt(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],(u=>{const h=this.Dr(u.wr);a.push(h)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new cn(Xe);return n.forEach((s=>{const a=new Xt(s,0),u=new Xt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(h=>{r=r.add(h.wr)}))})),se.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;ke.isDocumentKey(a)||(a=a.child(""));const u=new Xt(new ke(a),0);let h=new cn(Xe);return this.br.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(f.wr)),!0)}),u),se.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){nt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return se.forEach(n.mutations,(s=>{const a=new Xt(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new Xt(n,0),s=this.br.firstAfterOrEqual(r);return se.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.Mr=e,this.docs=(function(){return new wt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,u=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(e,n){let r=Mi();return n.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Tn.newInvalidDocument(s))})),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Mi();const u=n.path,h=new ke(u.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||WR(qR(v),r)<=0||(s.has(v.key)||fh(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Oe()}Or(e,n){return se.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new cx(this)}getSize(e){return se.resolve(this.size)}}class cx extends nx{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),se.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.persistence=e,this.Nr=new sl((n=>Vm(n)),Fm),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wm,this.targetCount=0,this.kr=Qa.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,s)=>n(s))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),se.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Qa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Kn(n),se.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach(((u,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),se.waitFor(a).next((()=>s))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),se.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Dm(0),this.Kr=!1,this.Kr=!0,this.$r=new ax,this.referenceDelegate=e(this),this.Ur=new dx(this),this.indexManager=new ex,this.remoteDocumentCache=(function(s){return new ux(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new YC(n),this.Gr=new sx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ox,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new lx(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){we("MemoryPersistence","Starting transaction:",e);const s=new fx(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((a=>this.referenceDelegate.jr(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Hr(e,n){return se.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class fx extends GR{constructor(e){super(),this.currentSequenceNumber=e}}class Hm{constructor(e){this.persistence=e,this.Jr=new Wm,this.Yr=null}static Zr(e){return new Hm(e)}get Xr(){if(this.Yr)return this.Yr;throw Oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),se.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Xr,(r=>{const s=ke.fromPath(r);return this.ei(e,s).next((a=>{a||n.removeEntry(s,Me.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return se.or([()=>se.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Be(),s=Be();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Gm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return yA()?8:KR(In())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,n,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new px;return this.Xi(e,n,u).next((h=>{if(a.result=h,this.zi)return this.es(e,n,u,h.size)}))})).next((()=>a.result))}es(e,n,r,s){return r.documentReadCount<this.ji?(Ql()<=Ge.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Ia(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),se.resolve()):(Ql()<=Ge.DEBUG&&we("QueryEngine","Query:",Ia(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ql()<=Ge.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Ia(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(n))):se.resolve())}Yi(e,n){if(W_(n))return se.resolve(null);let r=si(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=em(n,null,"F"),r=si(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Be(...a);return this.Ji.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.ts(n,h);return this.ns(n,m,u,f.readTime)?this.Yi(e,em(n,null,"F")):this.rs(e,m,n,f)}))))})))))}Zi(e,n,r,s){return W_(n)||s.isEqual(Me.min())?se.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const u=this.ts(n,a);return this.ns(n,u,r,s)?se.resolve(null):(Ql()<=Ge.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ia(n)),this.rs(e,u,n,BR(s,-1)).next((h=>h)))}))}ts(e,n){let r=new cn(DE(e));return n.forEach(((s,a)=>{fh(e,a)&&(r=r.add(a))})),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return Ql()<=Ge.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Ia(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ds.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new wt(Xe),this._s=new sl((a=>Vm(a)),Fm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ix(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function yx(t,e,n,r){return new gx(t,e,n,r)}async function eT(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],h=[];let f=Be();for(const m of s){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){h.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return n.localDocuments.getDocuments(r,f).next((m=>({hs:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function vx(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,v){const E=m.batch,S=E.keys();let b=se.resolve();return S.forEach((z=>{b=b.next((()=>v.getEntry(f,z))).next((N=>{const M=m.docVersions.get(z);nt(M!==null),N.version.compareTo(M)<0&&(E.applyToRemoteDocument(N,m),N.isValidDocument()&&(N.setReadTime(m.commitVersion),v.addEntry(N)))}))})),b.next((()=>h.mutationQueue.removeMutationBatch(f,E)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Be();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function tT(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function _x(t,e){const n=Le(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const h=[];e.targetChanges.forEach(((v,E)=>{const S=s.get(E);if(!S)return;h.push(n.Ur.removeMatchingKeys(a,v.removedDocuments,E).next((()=>n.Ur.addMatchingKeys(a,v.addedDocuments,E))));let b=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken(dn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,r)),s=s.insert(E,b),(function(N,M,J){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(S,b,v)&&h.push(n.Ur.updateTargetData(a,b))}));let f=Mi(),m=Be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))})),h.push(wx(a,u,e.documentUpdates).next((v=>{f=v.Ps,m=v.Is}))),!r.isEqual(Me.min())){const v=n.Ur.getLastRemoteSnapshotVersion(a).next((E=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(v)}return se.waitFor(h).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(n.os=s,a)))}function wx(t,e,n){let r=Be(),s=Be();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let u=Mi();return n.forEach(((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(Me.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):we("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{Ps:u,Is:s}}))}function Ex(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Tx(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Ur.getTargetData(r,e).next((a=>a?(s=a,se.resolve(s)):n.Ur.allocateTargetId(r).next((u=>(s=new As(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function sm(t,e,n){const r=Le(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Mu(u))throw u;we("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function n0(t,e,n){const r=Le(t);let s=Me.min(),a=Be();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,v){const E=Le(f),S=E._s.get(v);return S!==void 0?se.resolve(E.os.get(S)):E.Ur.getTargetData(m,v)})(r,u,si(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,h.targetId).next((f=>{a=f}))})).next((()=>r.ss.getDocumentsMatchingQuery(u,e,n?s:Me.min(),n?a:Be()))).next((h=>(Ix(r,hC(e),h),{documents:h,Ts:a})))))}function Ix(t,e,n){let r=t.us.get(e)||Me.min();n.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class r0{constructor(){this.activeTargetIds=vC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sx{constructor(){this.so=new r0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new r0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;function Ap(){return yd===null?yd=(function(){return 268435456+Math.round(2147483648*Math.random())})():yd++,"0x"+yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class Rx extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,u){const h=Ap(),f=this.xo(n,r.toUriEncodedString());we("RestConnection",`Sending RPC '${n}' ${h}:`,f,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,u),this.No(n,f,m,s).then((v=>(we("RestConnection",`Received RPC '${n}' ${h}: `,v),v)),(v=>{throw Wa("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",f,"request:",s),v}))}Lo(n,r,s,a,u,h){return this.Mo(n,r,s,a,u)}Oo(n,r,s){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rl})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,u)=>n[u]=a)),s&&s.headers.forEach(((a,u)=>n[u]=a))}xo(n,r){const s=bx[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=Ap();return new Promise(((u,h)=>{const f=new mE;f.setWithCredentials(!0),f.listenOnce(gE.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Sd.NO_ERROR:const v=f.getResponseJson();we(wn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),u(v);break;case Sd.TIMEOUT:we(wn,`RPC '${e}' ${a} timed out`),h(new me(te.DEADLINE_EXCEEDED,"Request time out"));break;case Sd.HTTP_ERROR:const E=f.getStatus();if(we(wn,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const b=S==null?void 0:S.error;if(b&&b.status&&b.message){const z=(function(M){const J=M.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(J)>=0?J:te.UNKNOWN})(b.status);h(new me(z,b.message))}else h(new me(te.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new me(te.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{we(wn,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(s);we(wn,`RPC '${e}' ${a} sending request:`,s),f.send(n,"POST",m,r,15)}))}Bo(e,n,r){const s=Ap(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=_E(),h=vE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const v=a.join("");we(wn,`Creating RPC '${e}' stream ${s}: ${v}`,f);const E=u.createWebChannel(v,f);let S=!1,b=!1;const z=new Ax({Io:M=>{b?we(wn,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(S||(we(wn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),S=!0),we(wn,`RPC '${e}' stream ${s} sending:`,M),E.send(M))},To:()=>E.close()}),N=(M,J,H)=>{M.listen(J,(K=>{try{H(K)}catch(X){setTimeout((()=>{throw X}),0)}}))};return N(E,Zl.EventType.OPEN,(()=>{b||(we(wn,`RPC '${e}' stream ${s} transport opened.`),z.yo())})),N(E,Zl.EventType.CLOSE,(()=>{b||(b=!0,we(wn,`RPC '${e}' stream ${s} transport closed`),z.So())})),N(E,Zl.EventType.ERROR,(M=>{b||(b=!0,Wa(wn,`RPC '${e}' stream ${s} transport errored:`,M),z.So(new me(te.UNAVAILABLE,"The operation could not be completed")))})),N(E,Zl.EventType.MESSAGE,(M=>{var J;if(!b){const H=M.data[0];nt(!!H);const K=H,X=K.error||((J=K[0])===null||J===void 0?void 0:J.error);if(X){we(wn,`RPC '${e}' stream ${s} received error:`,X);const Y=X.status;let ae=(function(k){const P=Lt[k];if(P!==void 0)return qE(P)})(Y),C=X.message;ae===void 0&&(ae=te.INTERNAL,C="Unknown error status: "+Y+" with message "+X.message),b=!0,z.So(new me(ae,C)),E.close()}else we(wn,`RPC '${e}' stream ${s} received:`,H),z.bo(H)}})),N(h,yE.STAT_EVENT,(M=>{M.stat===Kp.PROXY?we(wn,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===Kp.NOPROXY&&we(wn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{z.wo()}),0),z}}function Rp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t){return new FC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,n,r,s,a,u,h,f){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new nT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Oi(n.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===n&&this.P_(r,s)}),(r=>{e((()=>{const s=new me(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return we("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Cx extends rT{constructor(e,n,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,u),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=UC(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Me.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Me.min():u.readTime?oi(u.readTime):Me.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=im(this.serializer),n.addTarget=(function(a,u){let h;const f=u.target;if(h=Yp(f)?{documents:qC(a,f)}:{query:WC(a,f)._t},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=GE(a,u.resumeToken);const m=tm(a,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Me.min())>0){h.readTime=qd(a,u.snapshotVersion.toTimestamp());const m=tm(a,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=GC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=im(this.serializer),n.removeTarget=e,this.a_(n)}}class xx extends rT{constructor(e,n,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return nt(!!e.streamToken),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=BC(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=im(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>$C(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new me(te.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,nm(n,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(te.UNKNOWN,a.toString())}))}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Lo(e,nm(n,r),s,u,h,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(te.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Nx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Oi(n),this.D_=!1):we("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{r.enqueueAndForget((async()=>{Mo(this)&&(we("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const m=Le(f);m.L_.add(4),await Fu(m),m.q_.set("Unknown"),m.L_.delete(4),await vh(m)})(this))}))})),this.q_=new Nx(r,s)}}async function vh(t){if(Mo(t))for(const e of t.B_)await e(!0)}async function Fu(t){for(const e of t.B_)await e(!1)}function iT(t,e){const n=Le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Jm(n)?Zm(n):ol(n).r_()&&Qm(n,e))}function Km(t,e){const n=Le(t),r=ol(n);n.N_.delete(e),r.r_()&&sT(n,e),n.N_.size===0&&(r.r_()?r.o_():Mo(n)&&n.q_.set("Unknown"))}function Qm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(t).A_(e)}function sT(t,e){t.Q_.xe(e),ol(t).R_(e)}function Zm(t){t.Q_=new OC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ol(t).start(),t.q_.v_()}function Jm(t){return Mo(t)&&!ol(t).n_()&&t.N_.size>0}function Mo(t){return Le(t).L_.size===0}function oT(t){t.Q_=void 0}async function Ox(t){t.q_.set("Online")}async function Mx(t){t.N_.forEach(((e,n)=>{Qm(t,e)}))}async function Lx(t,e){oT(t),Jm(t)?(t.q_.M_(e),Zm(t)):t.q_.set("Unknown")}async function Vx(t,e,n){if(t.q_.set("Online"),e instanceof HE&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const h of a.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.N_.delete(h),s.Q_.removeTarget(h))})(t,e)}catch(r){we("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wd(t,r)}else if(e instanceof Ad?t.Q_.Ke(e):e instanceof WE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Me.min()))try{const r=await tT(t.localStore);n.compareTo(r)>=0&&await(function(a,u){const h=a.Q_.rt(u);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.N_.get(m);v&&a.N_.set(m,v.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,m)=>{const v=a.N_.get(f);if(!v)return;a.N_.set(f,v.withResumeToken(dn.EMPTY_BYTE_STRING,v.snapshotVersion)),sT(a,f);const E=new As(v.target,f,m,v.sequenceNumber);Qm(a,E)})),a.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(r){we("RemoteStore","Failed to raise snapshot:",r),await Wd(t,r)}}async function Wd(t,e,n){if(!Mu(e))throw e;t.L_.add(1),await Fu(t),t.q_.set("Offline"),n||(n=()=>tT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{we("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await vh(t)}))}function aT(t,e){return e().catch((n=>Wd(t,n,e)))}async function _h(t){const e=Le(t),n=Ms(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Fx(e);)try{const s=await Ex(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,zx(e,s)}catch(s){await Wd(e,s)}lT(e)&&uT(e)}function Fx(t){return Mo(t)&&t.O_.length<10}function zx(t,e){t.O_.push(e);const n=Ms(t);n.r_()&&n.V_&&n.m_(e.mutations)}function lT(t){return Mo(t)&&!Ms(t).n_()&&t.O_.length>0}function uT(t){Ms(t).start()}async function jx(t){Ms(t).p_()}async function Ux(t){const e=Ms(t);for(const n of t.O_)e.m_(n.mutations)}async function $x(t,e,n){const r=t.O_.shift(),s=$m.from(r,e,n);await aT(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await _h(t)}async function Bx(t,e){e&&Ms(t).V_&&await(async function(r,s){if((function(u){return PC(u)&&u!==te.ABORTED})(s.code)){const a=r.O_.shift();Ms(r).s_(),await aT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await _h(r)}})(t,e),lT(t)&&uT(t)}async function s0(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const r=Mo(n);n.L_.add(3),await Fu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await vh(n)}async function qx(t,e){const n=Le(t);e?(n.L_.delete(2),await vh(n)):e||(n.L_.add(2),await Fu(n),n.q_.set("Unknown"))}function ol(t){return t.K_||(t.K_=(function(n,r,s){const a=Le(n);return a.w_(),new Cx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Eo:Ox.bind(null,t),Ro:Mx.bind(null,t),mo:Lx.bind(null,t),d_:Vx.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),Jm(t)?Zm(t):t.q_.set("Unknown")):(await t.K_.stop(),oT(t))}))),t.K_}function Ms(t){return t.U_||(t.U_=(function(n,r,s){const a=Le(n);return a.w_(),new xx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jx.bind(null,t),mo:Bx.bind(null,t),f_:Ux.bind(null,t),g_:$x.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await _h(t)):(await t.U_.stop(),t.O_.length>0&&(we("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const u=Date.now()+r,h=new Ym(e,n,u,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xm(t,e){if(Oi("AsyncQueue",`${e}: ${t}`),Mu(t))return new me(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ke.comparator(n.key,r.key):(n,r)=>ke.comparator(n.key,r.key),this.keyedMap=Jl(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new xa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new xa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.W_=new wt(ke.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Za{constructor(e,n,r,s,a,u,h,f,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,s,a){const u=[];return n.forEach((h=>{u.push({type:0,doc:h})})),new Za(e,n,xa.emptySet(n),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Hx{constructor(){this.queries=a0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Le(n),a=s.queries;s.queries=a0(),a.forEach(((u,h)=>{for(const f of h.j_)f.onError(r)}))})(this,new me(te.ABORTED,"Firestore shutting down"))}}function a0(){return new sl((t=>NE(t)),hh)}async function Gx(t,e){const n=Le(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new Wx,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const h=Xm(u,`Initialization of query '${Ia(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&eg(n)}async function Kx(t,e){const n=Le(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Qx(t,e){const n=Le(t);let r=!1;for(const s of e){const a=s.query,u=n.queries.get(a);if(u){for(const h of u.j_)h.X_(s)&&(r=!0);u.z_=s}}r&&eg(n)}function Zx(t,e,n){const r=Le(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function eg(t){t.Y_.forEach((e=>{e.next()}))}var om,l0;(l0=om||(om={})).ea="default",l0.Cache="cache";class Jx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Za(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.key=e}}class dT{constructor(e){this.key=e}}class Yx{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=DE(e),this.Ra=new xa(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new o0,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,u=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,E)=>{const S=s.get(v),b=fh(this.query,E)?E:null,z=!!S&&this.mutatedKeys.has(S.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let M=!1;S&&b?S.data.isEqual(b.data)?z!==N&&(r.track({type:3,doc:b}),M=!0):this.ga(S,b)||(r.track({type:2,doc:b}),M=!0,(f&&this.Aa(b,f)>0||m&&this.Aa(b,m)<0)&&(h=!0)):!S&&b?(r.track({type:0,doc:b}),M=!0):S&&!b&&(r.track({type:1,doc:S}),M=!0,(f||m)&&(h=!0)),M&&(b?(u=u.add(b),a=N?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{Ra:u,fa:r,ns:h,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((v,E)=>(function(b,z){const N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return N(b)-N(z)})(v.type,E.type)||this.Aa(v.doc,E.doc))),this.pa(r),s=s!=null&&s;const h=n&&!s?this.ya():[],f=this.da.size===0&&this.current&&!s?1:0,m=f!==this.Ea;return this.Ea=f,u.length!==0||m?{snapshot:new Za(this.query,e.Ra,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new o0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Be(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new dT(r))})),this.da.forEach((r=>{e.has(r)||n.push(new cT(r))})),n}ba(e){this.Ta=e.Ts,this.da=Be();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Za.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Xx{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eP{constructor(e){this.key=e,this.va=!1}}class tP{constructor(e,n,r,s,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new sl((h=>NE(h)),hh),this.Ma=new Map,this.xa=new Set,this.Oa=new wt(ke.comparator),this.Na=new Map,this.La=new Wm,this.Ba={},this.ka=new Map,this.qa=Qa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nP(t,e,n=!0){const r=yT(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await hT(r,e,n,!0),s}async function rP(t,e){const n=yT(t);await hT(n,e,!0,!1)}async function hT(t,e,n,r){const s=await Tx(t.localStore,si(e)),a=s.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let h;return r&&(h=await iP(t,e,a,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&iT(t.remoteStore,s),h}async function iP(t,e,n,r,s){t.Ka=(E,S,b)=>(async function(N,M,J,H){let K=M.view.ma(J);K.ns&&(K=await n0(N.localStore,M.query,!1).then((({documents:C})=>M.view.ma(C,K))));const X=H&&H.targetChanges.get(M.targetId),Y=H&&H.targetMismatches.get(M.targetId)!=null,ae=M.view.applyChanges(K,N.isPrimaryClient,X,Y);return c0(N,M.targetId,ae.wa),ae.snapshot})(t,E,S,b);const a=await n0(t.localStore,e,!0),u=new Yx(e,a.Ts),h=u.ma(a.documents),f=Vu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),m=u.applyChanges(h,t.isPrimaryClient,f);c0(t,n,m.wa);const v=new Xx(e,n,u);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function sP(t,e,n){const r=Le(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter((u=>!hh(u,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await sm(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Km(r.remoteStore,s.targetId),am(r,s.targetId)})).catch(Ou)):(am(r,s.targetId),await sm(r.localStore,s.targetId,!0))}async function oP(t,e){const n=Le(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Km(n.remoteStore,r.targetId))}async function aP(t,e,n){const r=pP(t);try{const s=await(function(u,h){const f=Le(u),m=_t.now(),v=h.reduce(((b,z)=>b.add(z.key)),Be());let E,S;return f.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let z=Mi(),N=Be();return f.cs.getEntries(b,v).next((M=>{z=M,z.forEach(((J,H)=>{H.isValidDocument()||(N=N.add(J))}))})).next((()=>f.localDocuments.getOverlayedDocuments(b,z))).next((M=>{E=M;const J=[];for(const H of h){const K=bC(H,E.get(H.key).overlayedDocument);K!=null&&J.push(new Ls(H.key,K,SE(K.value.mapValue),jr.exists(!0)))}return f.mutationQueue.addMutationBatch(b,m,J,h)})).next((M=>{S=M;const J=M.applyToLocalDocumentSet(E,N);return f.documentOverlayCache.saveOverlays(b,M.batchId,J)}))})).then((()=>({batchId:S.batchId,changes:ME(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,h,f){let m=u.Ba[u.currentUser.toKey()];m||(m=new wt(Xe)),m=m.insert(h,f),u.Ba[u.currentUser.toKey()]=m})(r,s.batchId,n),await zu(r,s.changes),await _h(r.remoteStore)}catch(s){const a=Xm(s,"Failed to persist write");n.reject(a)}}async function fT(t,e){const n=Le(t);try{const r=await _x(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=n.Na.get(a);u&&(nt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.va=!0:s.modifiedDocuments.size>0?nt(u.va):s.removedDocuments.size>0&&(nt(u.va),u.va=!1))})),await zu(n,r,e)}catch(r){await Ou(r)}}function u0(t,e,n){const r=Le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach(((a,u)=>{const h=u.view.Z_(e);h.snapshot&&s.push(h.snapshot)})),(function(u,h){const f=Le(u);f.onlineState=h;let m=!1;f.queries.forEach(((v,E)=>{for(const S of E.j_)S.Z_(h)&&(m=!0)})),m&&eg(f)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lP(t,e,n){const r=Le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let u=new wt(ke.comparator);u=u.insert(a,Tn.newNoDocument(a,Me.min()));const h=Be().add(a),f=new gh(Me.min(),new Map,new wt(Xe),u,h);await fT(r,f),r.Oa=r.Oa.remove(a),r.Na.delete(e),tg(r)}else await sm(r.localStore,e,!1).then((()=>am(r,e,n))).catch(Ou)}async function uP(t,e){const n=Le(t),r=e.batch.batchId;try{const s=await vx(n.localStore,e);mT(n,r,null),pT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zu(n,s)}catch(s){await Ou(s)}}async function cP(t,e,n){const r=Le(t);try{const s=await(function(u,h){const f=Le(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,h).next((E=>(nt(E!==null),v=E.keys(),f.mutationQueue.removeMutationBatch(m,E)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(r.localStore,e);mT(r,e,n),pT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zu(r,s)}catch(s){await Ou(s)}}function pT(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function mT(t,e,n){const r=Le(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function am(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||gT(t,r)}))}function gT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Km(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),tg(t))}function c0(t,e,n){for(const r of n)r instanceof cT?(t.La.addReference(r.key,e),dP(t,r)):r instanceof dT?(we("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||gT(t,r.key)):Oe()}function dP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(we("SyncEngine","New document in limbo: "+n),t.xa.add(r),tg(t))}function tg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ke(ht.fromString(e)),r=t.qa.next();t.Na.set(r,new eP(n)),t.Oa=t.Oa.insert(n,r),iT(t.remoteStore,new As(si(zm(n.path)),r,"TargetPurposeLimboResolution",Dm.oe))}}async function zu(t,e,n){const r=Le(t),s=[],a=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach(((h,f)=>{u.push(r.Ka(f,e,n).then((m=>{var v;if((m||n)&&r.isPrimaryClient){const E=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(m){s.push(m);const E=Gm.Wi(f.targetId,m);a.push(E)}})))})),await Promise.all(u),r.Ca.d_(s),await(async function(f,m){const v=Le(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(m,(S=>se.forEach(S.$i,(b=>v.persistence.referenceDelegate.addReference(E,S.targetId,b))).next((()=>se.forEach(S.Ui,(b=>v.persistence.referenceDelegate.removeReference(E,S.targetId,b)))))))))}catch(E){if(!Mu(E))throw E;we("LocalStore","Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const b=v.os.get(S),z=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(z);v.os=v.os.insert(S,N)}}})(r.localStore,a))}async function hP(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){we("SyncEngine","User change. New user:",e.toKey());const r=await eT(n.localStore,e);n.currentUser=e,(function(a,u){a.ka.forEach((h=>{h.forEach((f=>{f.reject(new me(te.CANCELLED,u))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zu(n,r.hs)}}function fP(t,e){const n=Le(t),r=n.Na.get(e);if(r&&r.va)return Be().add(r.key);{let s=Be();const a=n.Ma.get(e);if(!a)return s;for(const u of a){const h=n.Fa.get(u);s=s.unionWith(h.view.Va)}return s}}function yT(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lP.bind(null,e),e.Ca.d_=Qx.bind(null,e.eventManager),e.Ca.$a=Zx.bind(null,e.eventManager),e}function pP(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cP.bind(null,e),e}class Hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return yx(this.persistence,new mx,e.initialUser,this.serializer)}Ga(e){return new hx(Hm.Zr,this.serializer)}Wa(e){return new Sx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hd.provider={build:()=>new Hd};class lm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>u0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hP.bind(null,this.syncEngine),await qx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Hx})()}createDatastore(e){const n=yh(e.databaseInfo.databaseId),r=(function(a){return new Rx(a)})(e.databaseInfo);return(function(a,u,h,f){return new Px(a,u,h,f)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,a,u,h){return new Dx(r,s,a,u,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>u0(this.syncEngine,n,0)),(function(){return i0.D()?new i0:new kx})())}createSyncEngine(e,n){return(function(s,a,u,h,f,m,v){const E=new tP(s,a,u,h,f,m);return v&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=Le(s);we("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Fu(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}lm.provider={build:()=>new lm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Oi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=En.UNAUTHENTICATED,this.clientId=EE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{we("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(we("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xm(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Cp(t,e){t.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await eT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function d0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yP(t);we("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>s0(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>s0(e.remoteStore,s))),t._onlineComponents=e}async function yP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Wa("Error using user provided cache. Falling back to memory cache: "+n),await Cp(t,new Hd)}}else we("FirestoreClient","Using default OfflineComponentProvider"),await Cp(t,new Hd);return t._offlineComponents}async function vT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we("FirestoreClient","Using user provided OnlineComponentProvider"),await d0(t,t._uninitializedComponentsProvider._online)):(we("FirestoreClient","Using default OnlineComponentProvider"),await d0(t,new lm))),t._onlineComponents}function vP(t){return vT(t).then((e=>e.syncEngine))}async function h0(t){const e=await vT(t),n=e.eventManager;return n.onListen=nP.bind(null,e.syncEngine),n.onUnlisten=sP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oP.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t,e,n){if(!n)throw new me(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _P(t,e,n,r){if(e===!0&&r===!0)throw new me(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function p0(t){if(!ke.isDocumentKey(t))throw new me(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function m0(t){if(ke.isDocumentKey(t))throw new me(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe()}function Ps(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new me(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wh(t);throw new me(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new me(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_P("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_T((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new me(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g0(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new OR;switch(r.type){case"firstParty":return new FR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=f0.get(n);r&&(we("ComponentProvider","Removing Datastore"),f0.delete(n),r.terminate())})(this),Promise.resolve()}}function wP(t,e,n,r={}){var s;const a=(t=Ps(t,Eh))._getSettings(),u=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=En.MOCK_USER;else{h=cA(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new me(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new En(m)}t._authCredentials=new MR(new wE(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lo(this.firestore,e,this._query)}}class Hn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class Ns extends Lo{constructor(e,n,r){super(e,n,zm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new ke(e))}withConverter(e){return new Ns(this.firestore,e,this._path)}}function ju(t,e,...n){if(t=Sn(t),wT("collection","path",e),t instanceof Eh){const r=ht.fromString(e,...n);return m0(r),new Ns(t,null,r)}{if(!(t instanceof Hn||t instanceof Ns))throw new me(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return m0(r),new Ns(t.firestore,null,r)}}function Th(t,e,...n){if(t=Sn(t),arguments.length===1&&(e=EE.newId()),wT("doc","path",e),t instanceof Eh){const r=ht.fromString(e,...n);return p0(r),new Hn(t,null,new ke(r))}{if(!(t instanceof Hn||t instanceof Ns))throw new me(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return p0(r),new Hn(t.firestore,t instanceof Ns?t.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new nT(this,"async_queue_retry"),this.Vu=()=>{const r=Rp();r&&we("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Rp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Rp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new So;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Mu(e))throw e;we("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h})(r);throw Oi("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ym.createAndSchedule(this,e,n,r,(a=>this.yu(a)));return this.Tu.push(s),s}fu(){this.Eu&&Oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function v0(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Ja extends Eh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new y0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y0(e),this._firestoreClient=void 0,await e}}}function EP(t,e){const n=typeof t=="object"?t:dE(),r=typeof t=="string"?t:"(default)",s=Pm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=lA("firestore");a&&wP(s,...a)}return s}function ET(t){if(t._terminated)throw new me(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TP(t),t._firestoreClient}function TP(t){var e,n,r;const s=t._freezeSettings(),a=(function(h,f,m,v){return new JR(h,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,_T(v.experimentalLongPollingOptions),v.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new gP(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ya(dn.fromBase64String(e))}catch(n){throw new me(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ya(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=/^__.*__$/;class SP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lu(e,this.data,n,this.fieldTransforms)}}class TT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function IT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class ig{constructor(e,n,r,s,a,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ig(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(IT(this.Cu)&&IP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class kP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yh(e)}Qu(e,n,r,s=!1){return new ig({Cu:e,methodName:n,qu:r,path:un.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sg(t){const e=t._freezeSettings(),n=yh(t._databaseId);return new kP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bP(t,e,n,r,s,a={}){const u=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);ag("Data must be an object, but it was:",u,r);const h=ST(r,u);let f,m;if(a.merge)f=new ir(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=um(e,E,n);if(!u.contains(S))throw new me(te.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);bT(v,S)||v.push(S)}f=new ir(v),m=u.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,m=u.fieldTransforms;return new SP(new Wn(h),f,m)}class kh extends Sh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kh}}class og extends Sh{_toFieldTransform(e){return new TC(e.path,new _u)}isEqual(e){return e instanceof og}}function AP(t,e,n,r){const s=t.Qu(1,e,n);ag("Data must be an object, but it was:",s,r);const a=[],u=Wn.empty();Oo(r,((f,m)=>{const v=lg(e,f,n);m=Sn(m);const E=s.Nu(v);if(m instanceof kh)a.push(v);else{const S=Uu(m,E);S!=null&&(a.push(v),u.set(v,S))}}));const h=new ir(a);return new TT(u,h,s.fieldTransforms)}function RP(t,e,n,r,s,a){const u=t.Qu(1,e,n),h=[um(e,r,n)],f=[s];if(a.length%2!=0)throw new me(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)h.push(um(e,a[S])),f.push(a[S+1]);const m=[],v=Wn.empty();for(let S=h.length-1;S>=0;--S)if(!bT(m,h[S])){const b=h[S];let z=f[S];z=Sn(z);const N=u.Nu(b);if(z instanceof kh)m.push(b);else{const M=Uu(z,N);M!=null&&(m.push(b),v.set(b,M))}}const E=new ir(m);return new TT(v,E,u.fieldTransforms)}function CP(t,e,n,r=!1){return Uu(n,t.Qu(r?4:3,e))}function Uu(t,e){if(kT(t=Sn(t)))return ag("Unsupported field value:",e,t),ST(t,e);if(t instanceof Sh)return(function(r,s){if(!IT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const h of r){let f=Uu(h,s.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(t,e)}return(function(r,s){if((r=Sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _C(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=_t.fromDate(r);return{timestampValue:qd(s.serializer,a)}}if(r instanceof _t){const a=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qd(s.serializer,a)}}if(r instanceof ng)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ya)return{bytesValue:GE(s.serializer,r._byteString)};if(r instanceof Hn){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:qm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof rg)return(function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return jm(h.serializer,f)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${wh(r)}`)})(t,e)}function ST(t,e){const n={};return TE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(t,((r,s)=>{const a=Uu(s,e.Mu(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function kT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof ng||t instanceof Ya||t instanceof Hn||t instanceof Sh||t instanceof rg)}function ag(t,e,n){if(!kT(n)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(n)){const r=wh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function um(t,e,n){if((e=Sn(e))instanceof Ih)return e._internalPath;if(typeof e=="string")return lg(t,e);throw Gd("Field path arguments must be of type string or ",t,!1,void 0,n)}const xP=new RegExp("[~\\*/\\[\\]]");function lg(t,e,n){if(e.search(xP)>=0)throw Gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ih(...e.split("."))._internalPath}catch{throw Gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gd(t,e,n,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new me(te.INVALID_ARGUMENT,h+t+f)}function bT(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ug("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PP extends AT{data(){return super.data()}}function ug(t,e){return typeof e=="string"?lg(t,e):e instanceof Ih?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new me(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cg{}class RT extends cg{}function bh(t,e,...n){let r=[];e instanceof cg&&r.push(e),r=r.concat(n),(function(a){const u=a.filter((f=>f instanceof hg)).length,h=a.filter((f=>f instanceof dg)).length;if(u>1||u>0&&h>0)throw new me(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class dg extends RT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new dg(e,n,r)}_apply(e){const n=this._parse(e);return xT(e._query,n),new Lo(e.firestore,e.converter,Xp(e._query,n))}_parse(e){const n=sg(e.firestore);return(function(a,u,h,f,m,v,E){let S;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new me(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){w0(E,v);const b=[];for(const z of E)b.push(_0(f,a,z));S={arrayValue:{values:b}}}else S=_0(f,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||w0(E,v),S=CP(h,u,E,v==="in"||v==="not-in");return Vt.create(m,v,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class hg extends cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ur.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let u=s;const h=a.getFlattenedFilters();for(const f of h)xT(u,f),u=Xp(u,f)})(e._query,n),new Lo(e.firestore,e.converter,Xp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fg extends RT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fg(e,n)}_apply(e){const n=(function(s,a,u){if(s.startAt!==null)throw new me(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new me(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vu(a,u)})(e._query,this._field,this._direction);return new Lo(e.firestore,e.converter,(function(s,a){const u=s.explicitOrderBy.concat([a]);return new il(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function CT(t,e="asc"){const n=e,r=ug("orderBy",t);return fg._create(r,n)}function _0(t,e,n){if(typeof(n=Sn(n))=="string"){if(n==="")throw new me(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PE(e)&&n.indexOf("/")!==-1)throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ht.fromString(n));if(!ke.isDocumentKey(r))throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return z_(t,new ke(r))}if(n instanceof Hn)return z_(t,n._key);throw new me(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wh(n)}.`)}function w0(t,e){if(!Array.isArray(t)||t.length===0)throw new me(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xT(t,e){const n=(function(s,a){for(const u of s)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new me(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class DP{convertValue(e,n="none"){switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Oo(e,((s,a)=>{r[s]=this.convertValue(a,n)})),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>Rt(u.doubleValue)));return new rg(a)}convertGeoPoint(e){return new ng(Rt(e.latitude),Rt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mu(e));default:return null}}convertTimestamp(e){const n=Os(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ht.fromString(e);nt(XE(r));const s=new gu(r.get(1),r.get(3)),a=new ke(r.popFirst(5));return s.isEqual(n)||Oi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class PT extends AT{constructor(e,n,r,s,a,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ug("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Rd extends PT{data(e={}){return super.data(e)}}class MP{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Rd(this._firestore,this._userDataWriter,r.key,r,new Xl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((h=>{const f=new Rd(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Xl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new Rd(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Xl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:LP(h.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function LP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}class NT extends DP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,n)}}function DT(t,e,n,...r){t=Ps(t,Hn);const s=Ps(t.firestore,Ja),a=sg(s);let u;return u=typeof(e=Sn(e))=="string"||e instanceof Ih?RP(a,"updateDoc",t._key,e,n,r):AP(a,"updateDoc",t._key,e),pg(s,[u.toMutation(t._key,jr.exists(!0))])}function VP(t){return pg(Ps(t.firestore,Ja),[new Um(t._key,jr.none())])}function FP(t,e){const n=Ps(t.firestore,Ja),r=Th(t),s=OP(t.converter,e);return pg(n,[bP(sg(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,jr.exists(!1))]).then((()=>r))}function Ah(t,...e){var n,r,s;t=Sn(t);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||v0(e[u])||(a=e[u],u++);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(v0(e[u])){const E=e[u];e[u]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[u+1]=(r=E.error)===null||r===void 0?void 0:r.bind(E),e[u+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let f,m,v;if(t instanceof Hn)m=Ps(t.firestore,Ja),v=zm(t._key.path),f={next:E=>{e[u]&&e[u](zP(m,t,E))},error:e[u+1],complete:e[u+2]};else{const E=Ps(t,Lo);m=Ps(E.firestore,Ja),v=E._query;const S=new NT(m);f={next:b=>{e[u]&&e[u](new MP(m,S,E,b))},error:e[u+1],complete:e[u+2]},NP(t._query)}return(function(S,b,z,N){const M=new mP(N),J=new Jx(b,M,z);return S.asyncQueue.enqueueAndForget((async()=>Gx(await h0(S),J))),()=>{M.Za(),S.asyncQueue.enqueueAndForget((async()=>Kx(await h0(S),J)))}})(ET(m),v,h,f)}function pg(t,e){return(function(r,s){const a=new So;return r.asyncQueue.enqueueAndForget((async()=>aP(await vP(r),s,a))),a.promise})(ET(t),e)}function zP(t,e,n){const r=n.docs.get(e._key),s=new NT(t);return new PT(t,s,e._key,r,new Xl(n.hasPendingWrites,n.fromCache),e.converter)}function OT(){return new og("serverTimestamp")}(function(e,n=!0){(function(s){rl=s})(nl),qa(new Ao("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new Ja(new LR(r.getProvider("auth-internal")),new jR(r.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new me(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(m.options.projectId,v)})(u,s),u);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),xs(O_,"4.7.3",e),xs(O_,"4.7.3","esm2017")})();var jP="firebase",UP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(jP,UP,"app");function mg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function MT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $P=MT,LT=new Nu("auth","Firebase",MT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=new Cm("@firebase/auth");function BP(t,...e){Kd.logLevel<=Ge.WARN&&Kd.warn(`Auth (${nl}): ${t}`,...e)}function Cd(t,...e){Kd.logLevel<=Ge.ERROR&&Kd.error(`Auth (${nl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t,...e){throw gg(t,...e)}function ai(t,...e){return gg(t,...e)}function VT(t,e,n){const r=Object.assign(Object.assign({},$P()),{[e]:n});return new Nu("auth","Firebase",r).create(e,{appName:t.name})}function ko(t){return VT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return LT.create(t,...e)}function De(t,e,...n){if(!t)throw gg(e,...n)}function xi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cd(e),new Error(e)}function Vi(t,e){t||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function qP(){return E0()==="http:"||E0()==="https:"}function E0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qP()||pA()||"connection"in navigator)?navigator.onLine:!0}function HP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vi(n>e,"Short delay should be less than long delay!"),this.isMobile=dA()||mA()}get(){return WP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t,e){Vi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=new $u(3e4,6e4);function vg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function al(t,e,n,r,s={}){return zT(t,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const h=Du(Object.assign({key:t.config.apiKey},u)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:f},a);return fA()||(m.referrerPolicy="no-referrer"),FT.fetch()(jT(t,t.config.apiHost,n,h),m)})}async function zT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},GP),e);try{const s=new ZP(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw vd(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw vd(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw vd(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw vd(t,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw VT(t,v,m);Li(t,v)}}catch(s){if(s instanceof Fi)throw s;Li(t,"network-request-failed",{message:String(s)})}}async function QP(t,e,n,r,s={}){const a=await al(t,e,n,r,s);return"mfaPendingCredential"in a&&Li(t,"multi-factor-auth-required",{_serverResponse:a}),a}function jT(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?yg(t.config,s):`${t.config.apiScheme}://${s}`}class ZP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ai(this.auth,"network-request-failed")),KP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ai(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JP(t,e){return al(t,"POST","/v1/accounts:delete",e)}async function UT(t,e){return al(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YP(t,e=!1){const n=Sn(t),r=await n.getIdToken(e),s=_g(r);De(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:ou(xp(s.auth_time)),issuedAtTime:ou(xp(s.iat)),expirationTime:ou(xp(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function xp(t){return Number(t)*1e3}function _g(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Cd("JWT malformed, contained fewer than 3 sections"),null;try{const s=iE(n);return s?JSON.parse(s):(Cd("Failed to decode base64 JWT payload"),null)}catch(s){return Cd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function T0(t){const e=_g(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fi&&XP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Tu(t,UT(n,{idToken:r}));De(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?$T(a.providerUserInfo):[],h=n1(t.providerData,u),f=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(h!=null&&h.length),v=f?m:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new dm(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(t,E)}async function t1(t){const e=Sn(t);await Qd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function n1(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function $T(t){return t.map(e=>{var{providerId:n}=e,r=mg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(t,e){const n=await zT(t,{},async()=>{const r=Du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,u=jT(t,s,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",FT.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function i1(t,e){return al(t,"POST","/v2/accounts:revokeToken",vg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=T0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await r1(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,u=new Pa;return r&&(De(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(De(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(De(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pa,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pi{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=mg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new e1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new dm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Tu(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YP(this,e)}reload(){return t1(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bs(this.auth.app))return Promise.reject(ko(this.auth));const e=await this.getIdToken();return await Tu(this,JP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,u,h,f,m,v;const E=(r=n.displayName)!==null&&r!==void 0?r:void 0,S=(s=n.email)!==null&&s!==void 0?s:void 0,b=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,z=(u=n.photoURL)!==null&&u!==void 0?u:void 0,N=(h=n.tenantId)!==null&&h!==void 0?h:void 0,M=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,J=(m=n.createdAt)!==null&&m!==void 0?m:void 0,H=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:K,emailVerified:X,isAnonymous:Y,providerData:ae,stsTokenManager:C}=n;De(K&&C,e,"internal-error");const T=Pa.fromJSON(this.name,C);De(typeof K=="string",e,"internal-error"),fs(E,e.name),fs(S,e.name),De(typeof X=="boolean",e,"internal-error"),De(typeof Y=="boolean",e,"internal-error"),fs(b,e.name),fs(z,e.name),fs(N,e.name),fs(M,e.name),fs(J,e.name),fs(H,e.name);const k=new Pi({uid:K,auth:e,email:S,emailVerified:X,displayName:E,isAnonymous:Y,photoURL:z,phoneNumber:b,tenantId:N,stsTokenManager:T,createdAt:J,lastLoginAt:H});return ae&&Array.isArray(ae)&&(k.providerData=ae.map(P=>Object.assign({},P))),M&&(k._redirectEventId=M),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new Pa;s.updateFromServerResponse(n);const a=new Pi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Qd(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];De(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?$T(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),h=new Pa;h.updateFromIdToken(r);const f=new Pi({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new Map;function Ni(t){Vi(t instanceof Function,"Expected a class definition");let e=I0.get(t);return e?(Vi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,I0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BT.type="NONE";const S0=BT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t,e,n){return`firebase:${t}:${e}:${n}`}class Na{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=xd(this.userKey,s.apiKey,a),this.fullPersistenceKey=xd("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Pi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Na(Ni(S0),e,r);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Ni(S0);const u=xd(r,e.config.apiKey,e.name);let h=null;for(const m of n)try{const v=await m._get(u);if(v){const E=Pi._fromJSON(e,v);m!==a&&(h=E),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Na(a,e,r):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Na(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QT(e))return"Blackberry";if(ZT(e))return"Webos";if(WT(e))return"Safari";if((e.includes("chrome/")||HT(e))&&!e.includes("edge/"))return"Chrome";if(KT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qT(t=In()){return/firefox\//i.test(t)}function WT(t=In()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HT(t=In()){return/crios\//i.test(t)}function GT(t=In()){return/iemobile/i.test(t)}function KT(t=In()){return/android/i.test(t)}function QT(t=In()){return/blackberry/i.test(t)}function ZT(t=In()){return/webos/i.test(t)}function wg(t=In()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function s1(t=In()){var e;return wg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function o1(){return gA()&&document.documentMode===10}function JT(t=In()){return wg(t)||KT(t)||ZT(t)||QT(t)||/windows phone/i.test(t)||GT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t,e=[]){let n;switch(t){case"Browser":n=k0(In());break;case"Worker":n=`${k0(In())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${nl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(t,e={}){return al(t,"GET","/v2/passwordPolicy",vg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=6;class c1{constructor(e){var n,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:u1,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b0(this),this.idTokenSubscription=new b0(this),this.beforeStateQueue=new a1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ni(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Na.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await UT(this,{idToken:e}),r=await Pi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(bs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bs(this.app))return Promise.reject(ko(this));const n=e?Sn(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bs(this.app)?Promise.reject(ko(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bs(this.app)?Promise.reject(ko(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await l1(this),n=new c1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await i1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ni(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await Na.create(this,[Ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&BP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Eg(t){return Sn(t)}class b0{constructor(e){this.auth=e,this.observer=null,this.addObserver=SA(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function h1(t){Tg=t}function f1(t){return Tg.loadJS(t)}function p1(){return Tg.gapiScript}function m1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e){const n=Pm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(jd(a,e??{}))return s;Li(s,"already-initialized")}return n.initialize({options:e})}function y1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function v1(t,e,n){const r=Eg(t);De(r._canInitEmulator,r,"emulator-config-failed"),De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=XT(e),{host:u,port:h}=_1(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${a}//${u}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),w1()}function XT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _1(t){const e=XT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:A0(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:A0(u)}}}function A0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function w1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,n){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t,e){return QP(t,"POST","/v1/accounts:signInWithIdp",vg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="http://localhost";class Po extends eI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=mg(n,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Po(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Da(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Da(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Da(e,n)}buildRequest(){const e={requestUri:E1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Du(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends tI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Bu{constructor(){super("facebook.com")}static credential(e){return Po._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Po._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ys.credential(n,r)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Bu{constructor(){super("github.com")}static credential(e){return Po._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.GITHUB_SIGN_IN_METHOD="github.com";vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Bu{constructor(){super("twitter.com")}static credential(e,n){return Po._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _s.credential(n,r)}catch{return null}}}_s.TWITTER_SIGN_IN_METHOD="twitter.com";_s.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Pi._fromIdTokenResponse(e,r,s),u=R0(r);return new Xa({user:a,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=R0(r);return new Xa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function R0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends Fi{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Zd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Zd(e,n,r,s)}}function nI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Zd._fromErrorAndOperation(t,a,e,r):a})}async function T1(t,e,n=!1){const r=await Tu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(t,e,n=!1){const{auth:r}=t;if(bs(r.app))return Promise.reject(ko(r));const s="reauthenticate";try{const a=await Tu(t,nI(r,s,e,t),n);De(a.idToken,r,"internal-error");const u=_g(a.idToken);De(u,r,"internal-error");const{sub:h}=u;return De(t.uid===h,r,"user-mismatch"),Xa._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Li(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(t,e,n=!1){if(bs(t.app))return Promise.reject(ko(t));const r="signIn",s=await nI(t,r,e),a=await Xa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}function k1(t,e,n,r){return Sn(t).onIdTokenChanged(e,n,r)}function b1(t,e,n){return Sn(t).beforeAuthStateChanged(e,n)}const Jd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jd,"1"),this.storage.removeItem(Jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=1e3,R1=10;class iI extends rI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);o1()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,R1):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},A1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iI.type="LOCAL";const C1=iI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI extends rI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sI.type="SESSION";const oI=sI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Rh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async m=>m(n.origin,a)),f=await x1(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const m=Ig("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(S.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return window}function N1(t){li().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function D1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function M1(){return aI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firebaseLocalStorageDb",L1=1,Yd="firebaseLocalStorage",uI="fbase_key";class qu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(t,e){return t.transaction([Yd],e?"readwrite":"readonly").objectStore(Yd)}function V1(){const t=indexedDB.deleteDatabase(lI);return new qu(t).toPromise()}function hm(){const t=indexedDB.open(lI,L1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yd,{keyPath:uI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yd)?e(r):(r.close(),await V1(),e(await hm()))})})}async function C0(t,e,n){const r=Ch(t,!0).put({[uI]:e,value:n});return new qu(r).toPromise()}async function F1(t,e){const n=Ch(t,!1).get(e),r=await new qu(n).toPromise();return r===void 0?null:r.value}function x0(t,e){const n=Ch(t,!0).delete(e);return new qu(n).toPromise()}const z1=800,j1=3;class cI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>j1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rh._getInstance(M1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await D1(),!this.activeServiceWorker)return;this.sender=new P1(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hm();return await C0(e,Jd,"1"),await x0(e,Jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>C0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>F1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>x0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Ch(s,!1).getAll();return new qu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cI.type="LOCAL";const U1=cI;new $u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t,e){return e?Ni(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends eI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Da(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Da(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Da(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function B1(t){return S1(t.auth,new Sg(t),t.bypassAuthState)}function q1(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),I1(n,new Sg(t),t.bypassAuthState)}async function W1(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),T1(n,new Sg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B1;case"linkViaPopup":case"linkViaRedirect":return W1;case"reauthViaPopup":case"reauthViaRedirect":return q1;default:Li(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new $u(2e3,1e4);class Ra extends dI{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Ra.currentPopupAction&&Ra.currentPopupAction.cancel(),Ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=Ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,H1.get())};e()}}Ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="pendingRedirect",Pd=new Map;class K1 extends dI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pd.get(this.auth._key());if(!e){try{const r=await Q1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pd.set(this.auth._key(),e)}return this.bypassAuthState||Pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Q1(t,e){const n=Y1(e),r=J1(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Z1(t,e){Pd.set(t._key(),e)}function J1(t){return Ni(t._redirectPersistence)}function Y1(t){return xd(G1,t.config.apiKey,t.name)}async function X1(t,e,n=!1){if(bs(t.app))return Promise.reject(ko(t));const r=Eg(t),s=$1(r,e),u=await new K1(r,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=600*1e3;class tN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!hI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ai(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eN&&this.cachedEventUids.clear(),this.cachedEventUids.has(P0(e))}saveEventToCache(e){this.cachedEventUids.add(P0(e)),this.lastProcessedEventTime=Date.now()}}function P0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e={}){return al(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sN=/^https?/;async function oN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rN(t);for(const n of e)try{if(aN(n))return}catch{}Li(t,"unauthorized-domain")}function aN(t){const e=cm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!sN.test(n))return!1;if(iN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=new $u(3e4,6e4);function N0(){const t=li().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uN(t){return new Promise((e,n)=>{var r,s,a;function u(){N0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N0(),n(ai(t,"network-request-failed"))},timeout:lN.get()})}if(!((s=(r=li().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=li().gapi)===null||a===void 0)&&a.load)u();else{const h=m1("iframefcb");return li()[h]=()=>{gapi.load?u():n(ai(t,"network-request-failed"))},f1(`${p1()}?onload=${h}`).catch(f=>n(f))}}).catch(e=>{throw Nd=null,e})}let Nd=null;function cN(t){return Nd=Nd||uN(t),Nd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=new $u(5e3,15e3),hN="__/auth/iframe",fN="emulator/auth/iframe",pN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gN(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yg(e,fN):`https://${t.config.authDomain}/${hN}`,r={apiKey:e.apiKey,appName:t.name,v:nl},s=mN.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Du(r).slice(1)}`}async function yN(t){const e=await cN(t),n=li().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:gN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pN,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=ai(t,"network-request-failed"),h=li().setTimeout(()=>{a(u)},dN.get());function f(){li().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_N=500,wN=600,EN="_blank",TN="http://localhost";class D0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IN(t,e,n,r=_N,s=wN){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},vN),{width:r.toString(),height:s.toString(),top:a,left:u}),m=In().toLowerCase();n&&(h=HT(m)?EN:n),qT(m)&&(e=e||TN,f.scrollbars="yes");const v=Object.entries(f).reduce((S,[b,z])=>`${S}${b}=${z},`,"");if(s1(m)&&h!=="_self")return SN(e||"",h),new D0(null);const E=window.open(e||"",h,v);De(E,t,"popup-blocked");try{E.focus()}catch{}return new D0(E)}function SN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="__/auth/handler",bN="emulator/auth/handler",AN=encodeURIComponent("fac");async function O0(t,e,n,r,s,a){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:nl,eventId:s};if(e instanceof tI){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",IA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof Bu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await t._getAppCheckToken(),m=f?`#${AN}=${encodeURIComponent(f)}`:"";return`${RN(t)}?${Du(h).slice(1)}${m}`}function RN({config:t}){return t.emulator?yg(t,bN):`https://${t.authDomain}/${kN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="webStorageSupport";class CN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oI,this._completeRedirectFn=X1,this._overrideRedirectResult=Z1}async _openPopup(e,n,r,s){var a;Vi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await O0(e,n,r,cm(),s);return IN(e,u,Ig())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await O0(e,n,r,cm(),s);return N1(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Vi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yN(e),r=new tN(e);return n.register("authEvent",s=>(De(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pp,{type:Pp},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Pp];u!==void 0&&n(!!u),Li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JT()||WT()||wg()}}const xN=CN;var M0="@firebase/auth",L0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DN(t){qa(new Ao("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;De(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YT(t)},m=new d1(r,s,a,f);return y1(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qa(new Ao("auth-internal",e=>{const n=Eg(e.getProvider("auth").getImmediate());return(r=>new PN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(M0,L0,NN(t)),xs(M0,L0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=300,MN=aE("authIdTokenMaxAge")||ON;let V0=null;const LN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MN)return;const s=n==null?void 0:n.token;V0!==s&&(V0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function VN(t=dE()){const e=Pm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=g1(t,{popupRedirectResolver:xN,persistence:[U1,C1,oI]}),r=aE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=LN(a.toString());b1(n,u,()=>u(n.currentUser)),k1(n,h=>u(h))}}const s=sE("auth");return s&&v1(n,`http://${s}`),n}function FN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}h1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=ai("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",FN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DN("Browser");const F0={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function zN(){if(typeof window<"u"&&window.GLOBAL_FIREBASE_CONFIG&&window.GLOBAL_FIREBASE_CONFIG.apiKey)return window.GLOBAL_FIREBASE_CONFIG;try{if(import.meta&&F0){const t=F0,e={apiKey:t.VITE_FIREBASE_API_KEY,authDomain:t.VITE_FIREBASE_AUTH_DOMAIN,projectId:t.VITE_FIREBASE_PROJECT_ID,storageBucket:t.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:t.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:t.VITE_FIREBASE_APP_ID,measurementId:t.VITE_FIREBASE_MEASUREMENT_ID};if(e.apiKey)return e}}catch{}if(typeof __firebase_config<"u")try{return typeof __firebase_config=="object"?__firebase_config:JSON.parse(__firebase_config)}catch(t){return console.error("[Firebase] Config parse failed (legacy):",t),null}return console.error("[Firebase] All config sources failed. Check index.html injection."),null}const Dd=zN();if(!(Dd!=null&&Dd.apiKey)){const t="[Firebase] Configuration is missing or invalid. Application cannot start.";throw console.error(t),new Error(t)}let fm;C_().length>0?(fm=C_()[0],console.log("[Firebase] Using existing app instance.")):(fm=cE(Dd),console.log("[Firebase] Initialized new app instance."));const fI=fm,Wu=VN(fI),Vs=EP(fI);function jN(){return typeof window<"u"&&window.GLOBAL_APP_ID?window.GLOBAL_APP_ID:typeof __app_id<"u"?__app_id:"default-app-id"}function ba(t){return`artifacts/${jN()}/users/${t}`}function z0(t,e){return`${ba(t)}/workspaces/${e}`}const Fs={users:t=>ba(t),filters:t=>`${ba(t)}/filters`,labels:t=>`${ba(t)}/labels`,workspaces:t=>`${ba(t)}/workspaces`,timeblocks:t=>`${ba(t)}/timeblocks`,tasks:(t,e)=>`${z0(t,e)}/tasks`,projects:(t,e)=>`${z0(t,e)}/projects`};function UN(t,e){if(!t)return e([]),()=>{};const n=Fs.labels(t),r=bh(ju(Vs,n));return Ah(r,s=>{const a=s.docs.map(u=>({id:u.id,...u.data()}));e(a)},s=>{console.error("[Labels] Subscription error:",s),e([])})}function $N(t,e){var s;const n=typeof t=="function"?t:e,r=(s=Wu.currentUser)==null?void 0:s.uid;return r&&typeof n=="function"?UN(r,n):(typeof n=="function"&&n([]),()=>{})}function ee(t,e,n){function r(h,f){if(h._zod||Object.defineProperty(h,"_zod",{value:{def:f,constr:u,traits:new Set},enumerable:!1}),h._zod.traits.has(t))return;h._zod.traits.add(t),e(h,f);const m=u.prototype,v=Object.keys(m);for(let E=0;E<v.length;E++){const S=v[E];S in h||(h[S]=m[S].bind(h))}}const s=(n==null?void 0:n.Parent)??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function u(h){var f;const m=n!=null&&n.Parent?new a:this;r(m,h),(f=m._zod).deferred??(f.deferred=[]);for(const v of m._zod.deferred)v();return m}return Object.defineProperty(u,"init",{value:r}),Object.defineProperty(u,Symbol.hasInstance,{value:h=>{var f,m;return n!=null&&n.Parent&&h instanceof n.Parent?!0:(m=(f=h==null?void 0:h._zod)==null?void 0:f.traits)==null?void 0:m.has(t)}}),Object.defineProperty(u,"name",{value:t}),u}class Oa extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class pI extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const mI={};function No(t){return mI}function gI(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function pm(t,e){return typeof e=="bigint"?e.toString():e}function kg(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function bg(t){return t==null}function Ag(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function BN(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const f=r.match(/\d?e-(\d?)/);f!=null&&f[1]&&(s=Number.parseInt(f[1]))}const a=n>s?n:s,u=Number.parseInt(t.toFixed(a).replace(".","")),h=Number.parseInt(e.toFixed(a).replace(".",""));return u%h/10**a}const j0=Symbol("evaluating");function ut(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==j0)return r===void 0&&(r=j0,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Vo(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Fo(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function U0(t){return JSON.stringify(t)}function qN(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const yI="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Xd(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const WN=kg(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Iu(t){if(Xd(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Xd(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function vI(t){return Iu(t)?{...t}:Array.isArray(t)?[...t]:t}const HN=new Set(["string","number","symbol"]);function xh(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function zs(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function Se(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function GN(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const KN={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function QN(t,e){const n=t._zod.def,r=Fo(t._zod.def,{get shape(){const s={};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(s[a]=n.shape[a])}return Vo(this,"shape",s),s},checks:[]});return zs(t,r)}function ZN(t,e){const n=t._zod.def,r=Fo(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete s[a]}return Vo(this,"shape",s),s},checks:[]});return zs(t,r)}function JN(t,e){if(!Iu(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=Fo(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Vo(this,"shape",a),a},checks:[]});return zs(t,s)}function YN(t,e){if(!Iu(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return Vo(this,"shape",r),r},checks:t._zod.def.checks};return zs(t,n)}function XN(t,e){const n=Fo(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Vo(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return zs(t,n)}function eD(t,e,n){const r=Fo(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const u in n){if(!(u in s))throw new Error(`Unrecognized key: "${u}"`);n[u]&&(a[u]=t?new t({type:"optional",innerType:s[u]}):s[u])}else for(const u in s)a[u]=t?new t({type:"optional",innerType:s[u]}):s[u];return Vo(this,"shape",a),a},checks:[]});return zs(e,r)}function tD(t,e,n){const r=Fo(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const u in n){if(!(u in a))throw new Error(`Unrecognized key: "${u}"`);n[u]&&(a[u]=new t({type:"nonoptional",innerType:s[u]}))}else for(const u in s)a[u]=new t({type:"nonoptional",innerType:s[u]});return Vo(this,"shape",a),a},checks:[]});return zs(e,r)}function Ca(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function _I(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function _d(t){return typeof t=="string"?t:t==null?void 0:t.message}function Do(t,e,n){var s,a,u,h,f,m;const r={...t,path:t.path??[]};if(!t.message){const v=_d((u=(a=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:a.error)==null?void 0:u.call(a,t))??_d((h=e==null?void 0:e.error)==null?void 0:h.call(e,t))??_d((f=n.customError)==null?void 0:f.call(n,t))??_d((m=n.localeError)==null?void 0:m.call(n,t))??"Invalid input";r.message=v}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function Rg(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Su(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const wI=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,pm,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},EI=ee("$ZodError",wI),TI=ee("$ZodError",wI,{Parent:Error});function nD(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function rD(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(u=>r({issues:u}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let u=n,h=0;for(;h<a.path.length;){const f=a.path[h];h===a.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(e(a))):u[f]=u[f]||{_errors:[]},u=u[f],h++}}};return r(t),n}const Cg=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},u=e._zod.run({value:n,issues:[]},a);if(u instanceof Promise)throw new Oa;if(u.issues.length){const h=new((s==null?void 0:s.Err)??t)(u.issues.map(f=>Do(f,a,No())));throw yI(h,s==null?void 0:s.callee),h}return u.value},xg=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let u=e._zod.run({value:n,issues:[]},a);if(u instanceof Promise&&(u=await u),u.issues.length){const h=new((s==null?void 0:s.Err)??t)(u.issues.map(f=>Do(f,a,No())));throw yI(h,s==null?void 0:s.callee),h}return u.value},Ph=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new Oa;return a.issues.length?{success:!1,error:new(t??EI)(a.issues.map(u=>Do(u,s,No())))}:{success:!0,data:a.value}},iD=Ph(TI),Nh=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(u=>Do(u,s,No())))}:{success:!0,data:a.value}},sD=Nh(TI),oD=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Cg(t)(e,n,s)},aD=t=>(e,n,r)=>Cg(t)(e,n,r),lD=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return xg(t)(e,n,s)},uD=t=>async(e,n,r)=>xg(t)(e,n,r),cD=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ph(t)(e,n,s)},dD=t=>(e,n,r)=>Ph(t)(e,n,r),hD=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Nh(t)(e,n,s)},fD=t=>async(e,n,r)=>Nh(t)(e,n,r),pD=/^[cC][^\s-]{8,}$/,mD=/^[0-9a-z]+$/,gD=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,yD=/^[0-9a-vA-V]{20}$/,vD=/^[A-Za-z0-9]{27}$/,_D=/^[a-zA-Z0-9_-]{21}$/,wD=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ED=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,$0=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,TD=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ID="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function SD(){return new RegExp(ID,"u")}const kD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,bD=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,AD=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,RD=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,CD=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,II=/^[A-Za-z0-9_-]*$/,xD=/^\+(?:[0-9]){6,14}[0-9]$/,SI="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",PD=new RegExp(`^${SI}$`);function kI(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function ND(t){return new RegExp(`^${kI(t)}$`)}function DD(t){const e=kI({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${SI}T(?:${r})$`)}const OD=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},MD=/^-?\d+$/,LD=/^-?\d+(?:\.\d+)?/,VD=/^[^A-Z]*$/,FD=/^[^a-z]*$/,Gn=ee("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),bI={number:"number",bigint:"bigint",object:"date"},AI=ee("$ZodCheckLessThan",(t,e)=>{Gn.init(t,e);const n=bI[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,a=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<a&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),RI=ee("$ZodCheckGreaterThan",(t,e)=>{Gn.init(t,e);const n=bI[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,a=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>a&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),zD=ee("$ZodCheckMultipleOf",(t,e)=>{Gn.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):BN(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),jD=ee("$ZodCheckNumberFormat",(t,e)=>{var u;Gn.init(t,e),e.format=e.format||"float64";const n=(u=e.format)==null?void 0:u.includes("int"),r=n?"int":"number",[s,a]=KN[e.format];t._zod.onattach.push(h=>{const f=h._zod.bag;f.format=e.format,f.minimum=s,f.maximum=a,n&&(f.pattern=MD)}),t._zod.check=h=>{const f=h.value;if(n){if(!Number.isInteger(f)){h.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:f,inst:t});return}if(!Number.isSafeInteger(f)){f>0?h.issues.push({input:f,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):h.issues.push({input:f,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}f<s&&h.issues.push({origin:"number",input:f,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),f>a&&h.issues.push({origin:"number",input:f,code:"too_big",maximum:a,inst:t})}}),UD=ee("$ZodCheckMaxLength",(t,e)=>{var n;Gn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!bg(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const u=Rg(s);r.issues.push({origin:u,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),$D=ee("$ZodCheckMinLength",(t,e)=>{var n;Gn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!bg(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const u=Rg(s);r.issues.push({origin:u,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),BD=ee("$ZodCheckLengthEquals",(t,e)=>{var n;Gn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!bg(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const u=Rg(s),h=a>e.length;r.issues.push({origin:u,...h?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Dh=ee("$ZodCheckStringFormat",(t,e)=>{var n,r;Gn.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),qD=ee("$ZodCheckRegex",(t,e)=>{Dh.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),WD=ee("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=VD),Dh.init(t,e)}),HD=ee("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=FD),Dh.init(t,e)}),GD=ee("$ZodCheckIncludes",(t,e)=>{Gn.init(t,e);const n=xh(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),KD=ee("$ZodCheckStartsWith",(t,e)=>{Gn.init(t,e);const n=new RegExp(`^${xh(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),QD=ee("$ZodCheckEndsWith",(t,e)=>{Gn.init(t,e);const n=new RegExp(`.*${xh(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),ZD=ee("$ZodCheckOverwrite",(t,e)=>{Gn.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class JD{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(u=>u),s=Math.min(...r.map(u=>u.length-u.trimStart().length)),a=r.map(u=>u.slice(s)).map(u=>" ".repeat(this.indent*2)+u);for(const u of a)this.content.push(u)}compile(){const e=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const YD={major:4,minor:2,patch:1},Ct=ee("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=YD;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)for(const u of a._zod.onattach)u(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const a=(h,f,m)=>{let v=Ca(h),E;for(const S of f){if(S._zod.def.when){if(!S._zod.def.when(h))continue}else if(v)continue;const b=h.issues.length,z=S._zod.check(h);if(z instanceof Promise&&(m==null?void 0:m.async)===!1)throw new Oa;if(E||z instanceof Promise)E=(E??Promise.resolve()).then(async()=>{await z,h.issues.length!==b&&(v||(v=Ca(h,b)))});else{if(h.issues.length===b)continue;v||(v=Ca(h,b))}}return E?E.then(()=>h):h},u=(h,f,m)=>{if(Ca(h))return h.aborted=!0,h;const v=a(f,r,m);if(v instanceof Promise){if(m.async===!1)throw new Oa;return v.then(E=>t._zod.parse(E,m))}return t._zod.parse(v,m)};t._zod.run=(h,f)=>{if(f.skipChecks)return t._zod.parse(h,f);if(f.direction==="backward"){const v=t._zod.parse({value:h.value,issues:[]},{...f,skipChecks:!0});return v instanceof Promise?v.then(E=>u(E,h,f)):u(v,h,f)}const m=t._zod.parse(h,f);if(m instanceof Promise){if(f.async===!1)throw new Oa;return m.then(v=>a(v,r,f))}return a(m,r,f)}}t["~standard"]={validate:a=>{var u;try{const h=iD(t,a);return h.success?{value:h.data}:{issues:(u=h.error)==null?void 0:u.issues}}catch{return sD(t,a).then(f=>{var m;return f.success?{value:f.data}:{issues:(m=f.error)==null?void 0:m.issues}})}},vendor:"zod",version:1}}),Pg=ee("$ZodString",(t,e)=>{var n;Ct.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??OD(t._zod.bag),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),gt=ee("$ZodStringFormat",(t,e)=>{Dh.init(t,e),Pg.init(t,e)}),XD=ee("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=ED),gt.init(t,e)}),eO=ee("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=$0(r))}else e.pattern??(e.pattern=$0());gt.init(t,e)}),tO=ee("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=TD),gt.init(t,e)}),nO=ee("$ZodURL",(t,e)=>{gt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),rO=ee("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=SD()),gt.init(t,e)}),iO=ee("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=_D),gt.init(t,e)}),sO=ee("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=pD),gt.init(t,e)}),oO=ee("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=mD),gt.init(t,e)}),aO=ee("$ZodULID",(t,e)=>{e.pattern??(e.pattern=gD),gt.init(t,e)}),lO=ee("$ZodXID",(t,e)=>{e.pattern??(e.pattern=yD),gt.init(t,e)}),uO=ee("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=vD),gt.init(t,e)}),cO=ee("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=DD(e)),gt.init(t,e)}),dO=ee("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=PD),gt.init(t,e)}),hO=ee("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=ND(e)),gt.init(t,e)}),fO=ee("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=wD),gt.init(t,e)}),pO=ee("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=kD),gt.init(t,e),t._zod.bag.format="ipv4"}),mO=ee("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=bD),gt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),gO=ee("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=AD),gt.init(t,e)}),yO=ee("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=RD),gt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const u=Number(a);if(`${u}`!==a)throw new Error;if(u<0||u>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function CI(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const vO=ee("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=CD),gt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{CI(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function _O(t){if(!II.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return CI(n)}const wO=ee("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=II),gt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{_O(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),EO=ee("$ZodE164",(t,e)=>{e.pattern??(e.pattern=xD),gt.init(t,e)});function TO(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const IO=ee("$ZodJWT",(t,e)=>{gt.init(t,e),t._zod.check=n=>{TO(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),xI=ee("$ZodNumber",(t,e)=>{Ct.init(t,e),t._zod.pattern=t._zod.bag.pattern??LD,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const a=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...a?{received:a}:{}}),n}}),SO=ee("$ZodNumberFormat",(t,e)=>{jD.init(t,e),xI.init(t,e)}),kO=ee("$ZodUnknown",(t,e)=>{Ct.init(t,e),t._zod.parse=n=>n}),bO=ee("$ZodNever",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),AO=ee("$ZodDate",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const s=n.value,a=s instanceof Date;return a&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...a?{received:"Invalid Date"}:{},inst:t}),n}});function B0(t,e,n){t.issues.length&&e.issues.push(..._I(n,t.issues)),e.value[n]=t.value}const RO=ee("$ZodArray",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let u=0;u<s.length;u++){const h=s[u],f=e.element._zod.run({value:h,issues:[]},r);f instanceof Promise?a.push(f.then(m=>B0(m,n,u))):B0(f,n,u)}return a.length?Promise.all(a).then(()=>n):n}});function eh(t,e,n,r){t.issues.length&&e.issues.push(..._I(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function PI(t){var r,s,a,u;const e=Object.keys(t.shape);for(const h of e)if(!((u=(a=(s=(r=t.shape)==null?void 0:r[h])==null?void 0:s._zod)==null?void 0:a.traits)!=null&&u.has("$ZodType")))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);const n=GN(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function NI(t,e,n,r,s,a){const u=[],h=s.keySet,f=s.catchall._zod,m=f.def.type;for(const v in e){if(h.has(v))continue;if(m==="never"){u.push(v);continue}const E=f.run({value:e[v],issues:[]},r);E instanceof Promise?t.push(E.then(S=>eh(S,n,v,e))):eh(E,n,v,e)}return u.length&&n.issues.push({code:"unrecognized_keys",keys:u,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const CO=ee("$ZodObject",(t,e)=>{Ct.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const h=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...h};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=kg(()=>PI(e));ut(t._zod,"propValues",()=>{const h=e.shape,f={};for(const m in h){const v=h[m]._zod;if(v.values){f[m]??(f[m]=new Set);for(const E of v.values)f[m].add(E)}}return f});const s=Xd,a=e.catchall;let u;t._zod.parse=(h,f)=>{u??(u=r.value);const m=h.value;if(!s(m))return h.issues.push({expected:"object",code:"invalid_type",input:m,inst:t}),h;h.value={};const v=[],E=u.shape;for(const S of u.keys){const z=E[S]._zod.run({value:m[S],issues:[]},f);z instanceof Promise?v.push(z.then(N=>eh(N,h,S,m))):eh(z,h,S,m)}return a?NI(v,m,h,f,r.value,t):v.length?Promise.all(v).then(()=>h):h}}),xO=ee("$ZodObjectJIT",(t,e)=>{CO.init(t,e);const n=t._zod.parse,r=kg(()=>PI(e)),s=S=>{const b=new JD(["shape","payload","ctx"]),z=r.value,N=K=>{const X=U0(K);return`shape[${X}]._zod.run({ value: input[${X}], issues: [] }, ctx)`};b.write("const input = payload.value;");const M=Object.create(null);let J=0;for(const K of z.keys)M[K]=`key_${J++}`;b.write("const newResult = {};");for(const K of z.keys){const X=M[K],Y=U0(K);b.write(`const ${X} = ${N(K)};`),b.write(`
        if (${X}.issues.length) {
          payload.issues = payload.issues.concat(${X}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Y}, ...iss.path] : [${Y}]
          })));
        }
        
        
        if (${X}.value === undefined) {
          if (${Y} in input) {
            newResult[${Y}] = undefined;
          }
        } else {
          newResult[${Y}] = ${X}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");const H=b.compile();return(K,X)=>H(S,K,X)};let a;const u=Xd,h=!mI.jitless,m=h&&WN.value,v=e.catchall;let E;t._zod.parse=(S,b)=>{E??(E=r.value);const z=S.value;return u(z)?h&&m&&(b==null?void 0:b.async)===!1&&b.jitless!==!0?(a||(a=s(e.shape)),S=a(S,b),v?NI([],z,S,b,E,t):S):n(S,b):(S.issues.push({expected:"object",code:"invalid_type",input:z,inst:t}),S)}});function q0(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!Ca(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(u=>Do(u,r,No())))}),e)}const PO=ee("$ZodUnion",(t,e)=>{Ct.init(t,e),ut(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),ut(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),ut(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),ut(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>Ag(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let u=!1;const h=[];for(const f of e.options){const m=f._zod.run({value:s.value,issues:[]},a);if(m instanceof Promise)h.push(m),u=!0;else{if(m.issues.length===0)return m;h.push(m)}}return u?Promise.all(h).then(f=>q0(f,s,t,a)):q0(h,s,t,a)}}),NO=ee("$ZodIntersection",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),u=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||u instanceof Promise?Promise.all([a,u]).then(([f,m])=>W0(n,f,m)):W0(n,a,u)}});function mm(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Iu(t)&&Iu(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const u=mm(t[a],e[a]);if(!u.valid)return{valid:!1,mergeErrorPath:[a,...u.mergeErrorPath]};s[a]=u.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],u=mm(s,a);if(!u.valid)return{valid:!1,mergeErrorPath:[r,...u.mergeErrorPath]};n.push(u.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function W0(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),Ca(t))return t;const r=mm(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const DO=ee("$ZodEnum",(t,e)=>{Ct.init(t,e);const n=gI(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>HN.has(typeof s)).map(s=>typeof s=="string"?xh(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const u=s.value;return r.has(u)||s.issues.push({code:"invalid_value",values:n,input:u,inst:t}),s}}),OO=ee("$ZodTransform",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new pI(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(u=>(n.value=u,n));if(s instanceof Promise)throw new Oa;return n.value=s,n}});function H0(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const MO=ee("$ZodOptional",(t,e)=>{Ct.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ut(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ut(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Ag(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>H0(a,n.value)):H0(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),LO=ee("$ZodNullable",(t,e)=>{Ct.init(t,e),ut(t._zod,"optin",()=>e.innerType._zod.optin),ut(t._zod,"optout",()=>e.innerType._zod.optout),ut(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Ag(n.source)}|null)$`):void 0}),ut(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),VO=ee("$ZodDefault",(t,e)=>{Ct.init(t,e),t._zod.optin="optional",ut(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>G0(a,e)):G0(s,e)}});function G0(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const FO=ee("$ZodPrefault",(t,e)=>{Ct.init(t,e),t._zod.optin="optional",ut(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),zO=ee("$ZodNonOptional",(t,e)=>{Ct.init(t,e),ut(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>K0(a,t)):K0(s,t)}});function K0(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const jO=ee("$ZodCatch",(t,e)=>{Ct.init(t,e),ut(t._zod,"optin",()=>e.innerType._zod.optin),ut(t._zod,"optout",()=>e.innerType._zod.optout),ut(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(u=>Do(u,r,No()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Do(a,r,No()))},input:n.value}),n.issues=[]),n)}}),UO=ee("$ZodPipe",(t,e)=>{Ct.init(t,e),ut(t._zod,"values",()=>e.in._zod.values),ut(t._zod,"optin",()=>e.in._zod.optin),ut(t._zod,"optout",()=>e.out._zod.optout),ut(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(u=>wd(u,e.in,r)):wd(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>wd(a,e.out,r)):wd(s,e.out,r)}});function wd(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const $O=ee("$ZodReadonly",(t,e)=>{Ct.init(t,e),ut(t._zod,"propValues",()=>e.innerType._zod.propValues),ut(t._zod,"values",()=>e.innerType._zod.values),ut(t._zod,"optin",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),ut(t._zod,"optout",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(Q0):Q0(s)}});function Q0(t){return t.value=Object.freeze(t.value),t}const BO=ee("$ZodCustom",(t,e)=>{Gn.init(t,e),Ct.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>Z0(a,n,r,t));Z0(s,n,r,t)}});function Z0(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Su(s))}}var J0;class qO{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function WO(){return new qO}(J0=globalThis).__zod_globalRegistry??(J0.__zod_globalRegistry=WO());const eu=globalThis.__zod_globalRegistry;function HO(t,e){return new t({type:"string",...Se(e)})}function GO(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Se(e)})}function Y0(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Se(e)})}function KO(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Se(e)})}function QO(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Se(e)})}function ZO(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Se(e)})}function JO(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Se(e)})}function YO(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Se(e)})}function XO(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Se(e)})}function e2(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Se(e)})}function t2(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Se(e)})}function n2(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Se(e)})}function r2(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Se(e)})}function i2(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Se(e)})}function s2(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Se(e)})}function o2(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Se(e)})}function a2(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Se(e)})}function l2(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Se(e)})}function u2(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Se(e)})}function c2(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Se(e)})}function d2(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Se(e)})}function h2(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Se(e)})}function f2(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Se(e)})}function p2(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Se(e)})}function m2(t,e){return new t({type:"string",format:"date",check:"string_format",...Se(e)})}function g2(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Se(e)})}function y2(t,e){return new t({type:"string",format:"duration",check:"string_format",...Se(e)})}function v2(t,e){return new t({type:"number",checks:[],...Se(e)})}function _2(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Se(e)})}function w2(t){return new t({type:"unknown"})}function E2(t,e){return new t({type:"never",...Se(e)})}function T2(t,e){return new t({type:"date",...Se(e)})}function X0(t,e){return new AI({check:"less_than",...Se(e),value:t,inclusive:!1})}function Od(t,e){return new AI({check:"less_than",...Se(e),value:t,inclusive:!0})}function ew(t,e){return new RI({check:"greater_than",...Se(e),value:t,inclusive:!1})}function Md(t,e){return new RI({check:"greater_than",...Se(e),value:t,inclusive:!0})}function tw(t,e){return new zD({check:"multiple_of",...Se(e),value:t})}function DI(t,e){return new UD({check:"max_length",...Se(e),maximum:t})}function th(t,e){return new $D({check:"min_length",...Se(e),minimum:t})}function OI(t,e){return new BD({check:"length_equals",...Se(e),length:t})}function I2(t,e){return new qD({check:"string_format",format:"regex",...Se(e),pattern:t})}function S2(t){return new WD({check:"string_format",format:"lowercase",...Se(t)})}function k2(t){return new HD({check:"string_format",format:"uppercase",...Se(t)})}function b2(t,e){return new GD({check:"string_format",format:"includes",...Se(e),includes:t})}function A2(t,e){return new KD({check:"string_format",format:"starts_with",...Se(e),prefix:t})}function R2(t,e){return new QD({check:"string_format",format:"ends_with",...Se(e),suffix:t})}function ll(t){return new ZD({check:"overwrite",tx:t})}function C2(t){return ll(e=>e.normalize(t))}function x2(){return ll(t=>t.trim())}function P2(){return ll(t=>t.toLowerCase())}function N2(){return ll(t=>t.toUpperCase())}function D2(){return ll(t=>qN(t))}function O2(t,e,n){return new t({type:"array",element:e,...Se(n)})}function M2(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Se(n)})}function L2(t){const e=V2(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Su(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Su(s))}},t(n.value,n)));return e}function V2(t,e){const n=new Gn({check:"custom",...Se(e)});return n._zod.check=t,n}function MI(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??eu,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function hn(t,e,n={path:[],schemaPath:[]}){var v,E;var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const u={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,u);const h=(E=(v=t._zod).toJSONSchema)==null?void 0:E.call(v);if(h)u.schema=h;else{const S={...n,schemaPath:[...n.schemaPath,t],path:n.path},b=t._zod.parent;if(b)u.ref=b,hn(b,e,S),e.seen.get(b).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,u.schema,S);else{const z=u.schema,N=e.processors[s.type];if(!N)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);N(t,e,z,S)}}const f=e.metadataRegistry.get(t);return f&&Object.assign(u.schema,f),e.io==="input"&&Pn(t)&&(delete u.schema.examples,delete u.schema.default),e.io==="input"&&u.schema._prefault&&((r=u.schema).default??(r.default=u.schema._prefault)),delete u.schema._prefault,e.seen.get(t).schema}function LI(t,e){var a,u,h;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=f=>{var b;const m=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const z=(b=t.external.registry.get(f[0]))==null?void 0:b.id,N=t.external.uri??(J=>J);if(z)return{ref:N(z)};const M=f[1].defId??f[1].schema.id??`schema${t.counter++}`;return f[1].defId=M,{defId:M,ref:`${N("__shared")}#/${m}/${M}`}}if(f[1]===n)return{ref:"#"};const E=`#/${m}/`,S=f[1].schema.id??`__schema${t.counter++}`;return{defId:S,ref:E+S}},s=f=>{if(f[1].schema.$ref)return;const m=f[1],{ref:v,defId:E}=r(f);m.def={...m.schema},E&&(m.defId=E);const S=m.schema;for(const b in S)delete S[b];S.$ref=v};if(t.cycles==="throw")for(const f of t.seen.entries()){const m=f[1];if(m.cycle)throw new Error(`Cycle detected: #/${(a=m.cycle)==null?void 0:a.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const f of t.seen.entries()){const m=f[1];if(e===f[0]){s(f);continue}if(t.external){const E=(u=t.external.registry.get(f[0]))==null?void 0:u.id;if(e!==f[0]&&E){s(f);continue}}if((h=t.metadataRegistry.get(f[0]))==null?void 0:h.id){s(f);continue}if(m.cycle){s(f);continue}if(m.count>1&&t.reused==="ref"){s(f);continue}}}function VI(t,e){var u,h,f;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=m=>{const v=t.seen.get(m),E=v.def??v.schema,S={...E};if(v.ref===null)return;const b=v.ref;if(v.ref=null,b){r(b);const z=t.seen.get(b).schema;z.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(E.allOf=E.allOf??[],E.allOf.push(z)):(Object.assign(E,z),Object.assign(E,S))}v.isParent||t.override({zodSchema:m,jsonSchema:E,path:v.path??[]})};for(const m of[...t.seen.entries()].reverse())r(m[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,(u=t.external)!=null&&u.uri){const m=(h=t.external.registry.get(e))==null?void 0:h.id;if(!m)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(m)}Object.assign(s,n.def??n.schema);const a=((f=t.external)==null?void 0:f.defs)??{};for(const m of t.seen.entries()){const v=m[1];v.def&&v.defId&&(a[v.defId]=v.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const m=JSON.parse(JSON.stringify(s));return Object.defineProperty(m,"~standard",{value:{...e["~standard"],jsonSchema:{input:nh(e,"input"),output:nh(e,"output")}},enumerable:!1,writable:!1}),m}catch{throw new Error("Error converting schema to JSON.")}}function Pn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Pn(r.element,n);if(r.type==="set")return Pn(r.valueType,n);if(r.type==="lazy")return Pn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Pn(r.innerType,n);if(r.type==="intersection")return Pn(r.left,n)||Pn(r.right,n);if(r.type==="record"||r.type==="map")return Pn(r.keyType,n)||Pn(r.valueType,n);if(r.type==="pipe")return Pn(r.in,n)||Pn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(Pn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(Pn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(Pn(s,n))return!0;return!!(r.rest&&Pn(r.rest,n))}return!1}const F2=(t,e={})=>n=>{const r=MI({...n,processors:e});return hn(t,r),LI(r,t),VI(r,t)},nh=(t,e)=>n=>{const{libraryOptions:r,target:s}=n??{},a=MI({...r??{},target:s,io:e,processors:{}});return hn(t,a),LI(a,t),VI(a,t)},z2={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},j2=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:u,format:h,patterns:f,contentEncoding:m}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof u=="number"&&(s.maxLength=u),h&&(s.format=z2[h]??h,s.format===""&&delete s.format),m&&(s.contentEncoding=m),f&&f.size>0){const v=[...f];v.length===1?s.pattern=v[0].source:v.length>1&&(s.allOf=[...v.map(E=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:E.source}))])}},U2=(t,e,n,r)=>{const s=n,{minimum:a,maximum:u,format:h,multipleOf:f,exclusiveMaximum:m,exclusiveMinimum:v}=t._zod.bag;typeof h=="string"&&h.includes("int")?s.type="integer":s.type="number",typeof v=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=v,s.exclusiveMinimum=!0):s.exclusiveMinimum=v),typeof a=="number"&&(s.minimum=a,typeof v=="number"&&e.target!=="draft-04"&&(v>=a?delete s.minimum:delete s.exclusiveMinimum)),typeof m=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=m,s.exclusiveMaximum=!0):s.exclusiveMaximum=m),typeof u=="number"&&(s.maximum=u,typeof m=="number"&&e.target!=="draft-04"&&(m<=u?delete s.maximum:delete s.exclusiveMaximum)),typeof f=="number"&&(s.multipleOf=f)},$2=(t,e,n,r)=>{n.not={}},B2=(t,e,n,r)=>{},q2=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},W2=(t,e,n,r)=>{const s=t._zod.def,a=gI(s.entries);a.every(u=>typeof u=="number")&&(n.type="number"),a.every(u=>typeof u=="string")&&(n.type="string"),n.enum=a},H2=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},G2=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},K2=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:u,maximum:h}=t._zod.bag;typeof u=="number"&&(s.minItems=u),typeof h=="number"&&(s.maxItems=h),s.type="array",s.items=hn(a.element,e,{...r,path:[...r.path,"items"]})},Q2=(t,e,n,r)=>{var m;const s=n,a=t._zod.def;s.type="object",s.properties={};const u=a.shape;for(const v in u)s.properties[v]=hn(u[v],e,{...r,path:[...r.path,"properties",v]});const h=new Set(Object.keys(u)),f=new Set([...h].filter(v=>{const E=a.shape[v]._zod;return e.io==="input"?E.optin===void 0:E.optout===void 0}));f.size>0&&(s.required=Array.from(f)),((m=a.catchall)==null?void 0:m._zod.def.type)==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=hn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},Z2=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,u=s.options.map((h,f)=>hn(h,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=u:n.anyOf=u},J2=(t,e,n,r)=>{const s=t._zod.def,a=hn(s.left,e,{...r,path:[...r.path,"allOf",0]}),u=hn(s.right,e,{...r,path:[...r.path,"allOf",1]}),h=m=>"allOf"in m&&Object.keys(m).length===1,f=[...h(a)?a.allOf:[a],...h(u)?u.allOf:[u]];n.allOf=f},Y2=(t,e,n,r)=>{const s=t._zod.def,a=hn(s.innerType,e,r),u=e.seen.get(t);e.target==="openapi-3.0"?(u.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},X2=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},eM=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},tM=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},nM=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let u;try{u=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=u},rM=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;hn(a,e,r);const u=e.seen.get(t);u.ref=a},iM=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},sM=(t,e,n,r)=>{const s=t._zod.def;hn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},oM=ee("ZodISODateTime",(t,e)=>{cO.init(t,e),Et.init(t,e)});function aM(t){return p2(oM,t)}const lM=ee("ZodISODate",(t,e)=>{dO.init(t,e),Et.init(t,e)});function uM(t){return m2(lM,t)}const cM=ee("ZodISOTime",(t,e)=>{hO.init(t,e),Et.init(t,e)});function dM(t){return g2(cM,t)}const hM=ee("ZodISODuration",(t,e)=>{fO.init(t,e),Et.init(t,e)});function fM(t){return y2(hM,t)}const pM=(t,e)=>{EI.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>rD(t,n)},flatten:{value:n=>nD(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,pm,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,pm,2)}},isEmpty:{get(){return t.issues.length===0}}})},_r=ee("ZodError",pM,{Parent:Error}),mM=Cg(_r),gM=xg(_r),yM=Ph(_r),vM=Nh(_r),_M=oD(_r),wM=aD(_r),EM=lD(_r),TM=uD(_r),IM=cD(_r),SM=dD(_r),kM=hD(_r),bM=fD(_r),Ft=ee("ZodType",(t,e)=>(Ct.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:nh(t,"input"),output:nh(t,"output")}}),t.toJSONSchema=F2(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Fo(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>zs(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>mM(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>yM(t,n,r),t.parseAsync=async(n,r)=>gM(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>vM(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>_M(t,n,r),t.decode=(n,r)=>wM(t,n,r),t.encodeAsync=async(n,r)=>EM(t,n,r),t.decodeAsync=async(n,r)=>TM(t,n,r),t.safeEncode=(n,r)=>IM(t,n,r),t.safeDecode=(n,r)=>SM(t,n,r),t.safeEncodeAsync=async(n,r)=>kM(t,n,r),t.safeDecodeAsync=async(n,r)=>bM(t,n,r),t.refine=(n,r)=>t.check(mL(n,r)),t.superRefine=n=>t.check(gL(n)),t.overwrite=n=>t.check(ll(n)),t.optional=()=>sw(t),t.nullable=()=>ow(t),t.nullish=()=>sw(ow(t)),t.nonoptional=n=>uL(t,n),t.array=()=>Dg(t),t.or=n=>jI([t,n]),t.and=n=>tL(t,n),t.transform=n=>aw(t,rL(n)),t.default=n=>oL(t,n),t.prefault=n=>lL(t,n),t.catch=n=>dL(t,n),t.pipe=n=>aw(t,n),t.readonly=()=>pL(t),t.describe=n=>{const r=t.clone();return eu.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=eu.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return eu.get(t);const r=t.clone();return eu.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),FI=ee("_ZodString",(t,e)=>{Pg.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(r,s,a)=>j2(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(I2(...r)),t.includes=(...r)=>t.check(b2(...r)),t.startsWith=(...r)=>t.check(A2(...r)),t.endsWith=(...r)=>t.check(R2(...r)),t.min=(...r)=>t.check(th(...r)),t.max=(...r)=>t.check(DI(...r)),t.length=(...r)=>t.check(OI(...r)),t.nonempty=(...r)=>t.check(th(1,...r)),t.lowercase=r=>t.check(S2(r)),t.uppercase=r=>t.check(k2(r)),t.trim=()=>t.check(x2()),t.normalize=(...r)=>t.check(C2(...r)),t.toLowerCase=()=>t.check(P2()),t.toUpperCase=()=>t.check(N2()),t.slugify=()=>t.check(D2())}),AM=ee("ZodString",(t,e)=>{Pg.init(t,e),FI.init(t,e),t.email=n=>t.check(GO(RM,n)),t.url=n=>t.check(YO(CM,n)),t.jwt=n=>t.check(f2(qM,n)),t.emoji=n=>t.check(XO(xM,n)),t.guid=n=>t.check(Y0(nw,n)),t.uuid=n=>t.check(KO(Ed,n)),t.uuidv4=n=>t.check(QO(Ed,n)),t.uuidv6=n=>t.check(ZO(Ed,n)),t.uuidv7=n=>t.check(JO(Ed,n)),t.nanoid=n=>t.check(e2(PM,n)),t.guid=n=>t.check(Y0(nw,n)),t.cuid=n=>t.check(t2(NM,n)),t.cuid2=n=>t.check(n2(DM,n)),t.ulid=n=>t.check(r2(OM,n)),t.base64=n=>t.check(c2(UM,n)),t.base64url=n=>t.check(d2($M,n)),t.xid=n=>t.check(i2(MM,n)),t.ksuid=n=>t.check(s2(LM,n)),t.ipv4=n=>t.check(o2(VM,n)),t.ipv6=n=>t.check(a2(FM,n)),t.cidrv4=n=>t.check(l2(zM,n)),t.cidrv6=n=>t.check(u2(jM,n)),t.e164=n=>t.check(h2(BM,n)),t.datetime=n=>t.check(aM(n)),t.date=n=>t.check(uM(n)),t.time=n=>t.check(dM(n)),t.duration=n=>t.check(fM(n))});function lt(t){return HO(AM,t)}const Et=ee("ZodStringFormat",(t,e)=>{gt.init(t,e),FI.init(t,e)}),RM=ee("ZodEmail",(t,e)=>{tO.init(t,e),Et.init(t,e)}),nw=ee("ZodGUID",(t,e)=>{XD.init(t,e),Et.init(t,e)}),Ed=ee("ZodUUID",(t,e)=>{eO.init(t,e),Et.init(t,e)}),CM=ee("ZodURL",(t,e)=>{nO.init(t,e),Et.init(t,e)}),xM=ee("ZodEmoji",(t,e)=>{rO.init(t,e),Et.init(t,e)}),PM=ee("ZodNanoID",(t,e)=>{iO.init(t,e),Et.init(t,e)}),NM=ee("ZodCUID",(t,e)=>{sO.init(t,e),Et.init(t,e)}),DM=ee("ZodCUID2",(t,e)=>{oO.init(t,e),Et.init(t,e)}),OM=ee("ZodULID",(t,e)=>{aO.init(t,e),Et.init(t,e)}),MM=ee("ZodXID",(t,e)=>{lO.init(t,e),Et.init(t,e)}),LM=ee("ZodKSUID",(t,e)=>{uO.init(t,e),Et.init(t,e)}),VM=ee("ZodIPv4",(t,e)=>{pO.init(t,e),Et.init(t,e)}),FM=ee("ZodIPv6",(t,e)=>{mO.init(t,e),Et.init(t,e)}),zM=ee("ZodCIDRv4",(t,e)=>{gO.init(t,e),Et.init(t,e)}),jM=ee("ZodCIDRv6",(t,e)=>{yO.init(t,e),Et.init(t,e)}),UM=ee("ZodBase64",(t,e)=>{vO.init(t,e),Et.init(t,e)}),$M=ee("ZodBase64URL",(t,e)=>{wO.init(t,e),Et.init(t,e)}),BM=ee("ZodE164",(t,e)=>{EO.init(t,e),Et.init(t,e)}),qM=ee("ZodJWT",(t,e)=>{IO.init(t,e),Et.init(t,e)}),zI=ee("ZodNumber",(t,e)=>{xI.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(r,s,a)=>U2(t,r,s),t.gt=(r,s)=>t.check(ew(r,s)),t.gte=(r,s)=>t.check(Md(r,s)),t.min=(r,s)=>t.check(Md(r,s)),t.lt=(r,s)=>t.check(X0(r,s)),t.lte=(r,s)=>t.check(Od(r,s)),t.max=(r,s)=>t.check(Od(r,s)),t.int=r=>t.check(rw(r)),t.safe=r=>t.check(rw(r)),t.positive=r=>t.check(ew(0,r)),t.nonnegative=r=>t.check(Md(0,r)),t.negative=r=>t.check(X0(0,r)),t.nonpositive=r=>t.check(Od(0,r)),t.multipleOf=(r,s)=>t.check(tw(r,s)),t.step=(r,s)=>t.check(tw(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function Ng(t){return v2(zI,t)}const WM=ee("ZodNumberFormat",(t,e)=>{SO.init(t,e),zI.init(t,e)});function rw(t){return _2(WM,t)}const HM=ee("ZodUnknown",(t,e)=>{kO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>B2()});function iw(){return w2(HM)}const GM=ee("ZodNever",(t,e)=>{bO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>$2(t,n,r)});function KM(t){return E2(GM,t)}const QM=ee("ZodDate",(t,e)=>{AO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(r,s,a)=>q2(t,r),t.min=(r,s)=>t.check(Md(r,s)),t.max=(r,s)=>t.check(Od(r,s));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function ZM(t){return T2(QM,t)}const JM=ee("ZodArray",(t,e)=>{RO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>K2(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(th(n,r)),t.nonempty=n=>t.check(th(1,n)),t.max=(n,r)=>t.check(DI(n,r)),t.length=(n,r)=>t.check(OI(n,r)),t.unwrap=()=>t.element});function Dg(t,e){return O2(JM,t,e)}const YM=ee("ZodObject",(t,e)=>{xO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Q2(t,n,r,s),ut(t,"shape",()=>e.shape),t.keyof=()=>Og(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:iw()}),t.loose=()=>t.clone({...t._zod.def,catchall:iw()}),t.strict=()=>t.clone({...t._zod.def,catchall:KM()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>JN(t,n),t.safeExtend=n=>YN(t,n),t.merge=n=>XN(t,n),t.pick=n=>QN(t,n),t.omit=n=>ZN(t,n),t.partial=(...n)=>eD(UI,t,n[0]),t.required=(...n)=>tD($I,t,n[0])});function zo(t,e){const n={type:"object",shape:t??{},...Se(e)};return new YM(n)}const XM=ee("ZodUnion",(t,e)=>{PO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Z2(t,n,r,s),t.options=e.options});function jI(t,e){return new XM({type:"union",options:t,...Se(e)})}const eL=ee("ZodIntersection",(t,e)=>{NO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>J2(t,n,r,s)});function tL(t,e){return new eL({type:"intersection",left:t,right:e})}const gm=ee("ZodEnum",(t,e)=>{DO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(r,s,a)=>W2(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const u of r)if(n.has(u))a[u]=e.entries[u];else throw new Error(`Key ${u} not found in enum`);return new gm({...e,checks:[],...Se(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const u of r)if(n.has(u))delete a[u];else throw new Error(`Key ${u} not found in enum`);return new gm({...e,checks:[],...Se(s),entries:a})}});function Og(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new gm({type:"enum",entries:n,...Se(e)})}const nL=ee("ZodTransform",(t,e)=>{OO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>G2(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new pI(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Su(a,n.value,e));else{const u=a;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=n.value),u.inst??(u.inst=t),n.issues.push(Su(u))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function rL(t){return new nL({type:"transform",transform:t})}const UI=ee("ZodOptional",(t,e)=>{MO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>sM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function sw(t){return new UI({type:"optional",innerType:t})}const iL=ee("ZodNullable",(t,e)=>{LO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Y2(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function ow(t){return new iL({type:"nullable",innerType:t})}const sL=ee("ZodDefault",(t,e)=>{VO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>eM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function oL(t,e){return new sL({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():vI(e)}})}const aL=ee("ZodPrefault",(t,e)=>{FO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>tM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function lL(t,e){return new aL({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():vI(e)}})}const $I=ee("ZodNonOptional",(t,e)=>{zO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>X2(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function uL(t,e){return new $I({type:"nonoptional",innerType:t,...Se(e)})}const cL=ee("ZodCatch",(t,e)=>{jO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>nM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function dL(t,e){return new cL({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const hL=ee("ZodPipe",(t,e)=>{UO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>rM(t,n,r,s),t.in=e.in,t.out=e.out});function aw(t,e){return new hL({type:"pipe",in:t,out:e})}const fL=ee("ZodReadonly",(t,e)=>{$O.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>iM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function pL(t){return new fL({type:"readonly",innerType:t})}const BI=ee("ZodCustom",(t,e)=>{BO.init(t,e),Ft.init(t,e),t._zod.processJSONSchema=(n,r,s)=>H2(t,n)});function mL(t,e={}){return M2(BI,t,e)}function gL(t){return L2(t)}function yL(t,e={error:`Input not instance of ${t.name}`}){const n=new BI({type:"custom",check:"custom",fn:r=>r instanceof t,abort:!0,...Se(e)});return n._zod.bag.Class=t,n}const bo=jI([ZM(),yL(_t),lt()]).nullable().optional(),vL=zo({type:Og(["none","daily","weekly","weekdays","monthly"]).nullable(),days:Dg(Ng()).optional()}).nullable().optional();zo({id:lt().optional(),title:lt().min(1,"Title is required"),description:lt().nullable().optional(),status:Og(["todo","completed","archived"]).default("todo"),dueDate:bo,completedAt:bo,createdAt:bo,ownerId:lt(),projectId:lt().nullable().optional(),labelIds:Dg(lt()).optional(),timeBlockId:lt().nullable().optional(),duration:Ng().optional(),recurrence:vL});zo({id:lt().optional(),name:lt().min(1,"Project name is required"),color:lt().optional(),ownerId:lt(),createdAt:bo});zo({id:lt().optional(),name:lt().min(1,"Label name is required"),color:lt().optional(),ownerId:lt(),createdAt:bo});zo({id:lt().optional(),name:lt().min(1,"Workspace name is required"),createdAt:bo});zo({id:lt().optional(),name:lt().min(1),query:lt(),createdAt:bo});zo({id:lt().optional(),name:lt(),start:lt(),end:lt(),color:lt().optional(),order:Ng().optional()});const _L="currentWorkspaceId";function ul(){return localStorage.getItem(_L)}const Mg=()=>{const[t,e]=$.useState([]),[n,r]=$.useState(!0),s=ul();return $.useEffect(()=>{const a=$N(s||"",u=>{e(u),r(!1)});return()=>a()},[s]),{labels:t,loading:n}};function wL(t,e,n){const r=Fs.projects(t,e),s=bh(ju(Vs,r),CT("createdAt","asc"));return Ah(s,a=>{const u=a.docs.map(h=>({id:h.id,...h.data()}));n(u)},a=>{console.error("Error subscribing to projects:",a),n([])})}const EL=(t,e)=>{const n=typeof t=="function"?t:e,r=typeof t=="string"?t:ul(),s=Wu.currentUser;return s&&r&&typeof n=="function"?wL(s.uid,r,n):(typeof n=="function"&&n([]),()=>{})},Lg=()=>{const[t,e]=$.useState([]),[n,r]=$.useState(!0),s=ul();return $.useEffect(()=>{if(!s){r(!1);return}const a=EL(s,u=>{e(u),r(!1)});return()=>a()},[s]),{projects:t,loading:n}};let tu=[];const TL=[{id:"tb_morning",name:"06:00 - 09:00",start:"06:00",end:"09:00",color:"#EF4444",order:0},{id:"tb_afternoon",name:"13:00 - 17:00",start:"13:00",end:"17:00",color:"#3B82F6",order:1},{id:"tb_night",name:"20:00 - 22:00",start:"20:00",end:"22:00",color:"#8B5CF6",order:2}];function IL(t,e){var a;const n=(a=Wu.currentUser)==null?void 0:a.uid;if(!n)return tu=[...TL],typeof e=="function"&&e(tu),()=>{};const r=Fs.timeblocks(n),s=bh(ju(Vs,r),CT("order","asc"));return Ah(s,u=>{tu=u.docs.map(h=>({id:h.id,...h.data()})),typeof e=="function"&&e(tu)},u=>{console.error("[TimeBlocks] Subscription error:",u)})}function SL(){return[...tu]}const kL=()=>{const[t,e]=$.useState(()=>SL()),[n,r]=$.useState(!0),s=ul();return $.useEffect(()=>{if(!s){r(!1);return}const a=IL(s,u=>{e(u),r(!1)});return()=>a()},[s]),{timeBlocks:t,loading:n}},Np=t=>t instanceof _t?t.toDate():t instanceof Date?t:void 0,qI=t=>t instanceof Date?_t.fromDate(t):t;function bL(t,e){const n=e.recurrence||null;return{id:t,...e,createdAt:Np(e.createdAt)||void 0,dueDate:Np(e.dueDate)||void 0,recurrence:n,completedAt:Np(e.completedAt)||void 0,ownerId:e.ownerId||"",title:e.title||""}}const lw=new Map;function AL(t,e,n){const r=u=>{typeof n=="function"&&n(u)};if(!t||!e)return r([]),()=>{};const s=Fs.tasks(t,e),a=bh(ju(Vs,s));return Ah(a,u=>{const h=u.docs.map(f=>bL(f.id,f.data()));lw.set(e,h),r(h)},u=>{console.error("[Tasks] Subscription error:",u),lw.set(e,[]),r([])})}async function RL(t,e,n){try{const r=Fs.tasks(t,e),s={...n};return s.dueDate&&(s.dueDate=qI(s.dueDate)),delete s.id,await FP(ju(Vs,r),{...s,ownerId:t,status:"todo",createdAt:OT()})}catch(r){throw console.error("[Tasks] addTaskRaw failed:",r),r}}async function CL(t,e,n,r){try{const s=Fs.tasks(t,e),a={status:r};r==="completed"?a.completedAt=OT():a.completedAt=null,await DT(Th(Vs,s,n),a)}catch(s){throw console.error("[Tasks] updateTaskStatusRaw failed:",s),s}}async function xL(t,e,n,r){try{const s=Fs.tasks(t,e),a={...r};a.dueDate!==void 0&&(a.dueDate=qI(a.dueDate)),await DT(Th(Vs,s,n),a)}catch(s){throw console.error("[Tasks] updateTaskRaw failed:",s),s}}async function PL(t,e,n){try{const r=Fs.tasks(t,e);await VP(Th(Vs,r,n))}catch(r){throw console.error("[Tasks] deleteTaskRaw failed:",r),r}}function Oh(){var n;const t=(n=Wu.currentUser)==null?void 0:n.uid,e=ul();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}async function WI(t){const{userId:e,workspaceId:n}=Oh();return RL(e,n,t)}async function NL(t,e){const{userId:n,workspaceId:r}=Oh();return xL(n,r,t,e)}async function DL(t){const{userId:e,workspaceId:n}=Oh();return PL(e,n,t)}async function OL(t,e){const{userId:n,workspaceId:r}=Oh();return CL(n,r,t,e==="completed"?"todo":"completed")}function ML(t,e){const n=Wu.currentUser;return!n||!t?(typeof e=="function"&&e([]),()=>{}):AL(n.uid,t,e)}function HI(t){if(!t)return null;if(t instanceof Date)return t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();const e=new Date(t);return isNaN(e.getTime())?null:e}function LL(t=new Date){const e=HI(t)||new Date,n=new Date(e);return n.setHours(0,0,0,0),n}function VL(t){const e=LL(new Date);if(!(t!=null&&t.type)||t.type==="daily"||t.type==="monthly")return e;if(t.type==="weekly"&&t.days&&t.days.length>0){const n=e.getDay();for(let r=0;r<=6;r++)if(t.days.includes((n+r)%7))return e.setDate(e.getDate()+r),e}if(t.type==="weekdays"){for(;e.getDay()===0||e.getDay()===6;)e.setDate(e.getDate()+1);return e}return e}function FL(t){return t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e]||e)}function zL(t){if(!t)return"";const e=t.split(`
`);let n=[],r=null;return e.forEach(s=>{const a=s.trimStart(),u=a.startsWith("* ")||a.startsWith("- "),h=/^\d+\.\s/.test(a),f=u||h;if(f){const m=h?"ol":"ul";if(r!==m){r&&n.push(`</${r}>`);const v=h?"list-decimal":"list-disc";n.push(`<${m} class="${v} ml-5 space-y-1">`),r=m}}else r&&(n.push(`</${r}>`),r=null);if(f){let m="";u?m=a.substring(2):m=a.replace(/^\d+\.\s/,"");const v=uw(m);n.push(`<li>${v}</li>`)}else s.trim()?n.push(`<p class="mb-2">${uw(s)}</p>`):r&&(n.push(`</${r}>`),r=null)}),r&&n.push(`</${r}>`),n.join(`
`)}function uw(t){return FL(t).replace(/\[(.*?)\]\((.*?)\)/g,(n,r,s)=>`<a href="${s.replace(/"/g,"&quot;")}" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300 underline font-medium">${r}</a>`)}const jL=[15,30,45,60,75,90,120],UL=[{value:"none",label:""},{value:"daily",label:""},{value:"weekdays",label:""},{value:"weekly",label:""},{value:"monthly",label:""}],$L=["","","","","","",""],BL=t=>{if(!t)return"";const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},qL=t=>{if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e},WL=()=>{const{activeModal:t,modalData:e,closeModal:n}=uh(),r=t==="task-detail",s=e,a=!(s!=null&&s.id)||s.id==="temp-new-task",{projects:u}=Lg();Mg();const{timeBlocks:h}=kL(),[f,m]=$.useState(""),[v,E]=$.useState(""),[S,b]=$.useState(null),[z,N]=$.useState("todo"),[M,J]=$.useState(null),[H,K]=$.useState({type:"none",days:[]}),[X,Y]=$.useState(null),[ae,C]=$.useState(null),[T,k]=$.useState(!1),[P,x]=$.useState(!1);$.useEffect(()=>{var ne;if(s){m(s.title||""),E(s.description||""),b(s.projectId||null),N(s.status||"todo"),Y(s.timeBlockId||null),C(s.duration||null);const W=HI(s.dueDate);J(W);const he=s.recurrence||{type:"none",days:[]};K(he),he!=null&&he.type&&he.type!=="none"&&!W&&J(VL(he));const ue=!!(W||(he==null?void 0:he.type)!=="none"||s.timeBlockId||s.duration);x(ue),k(!!((ne=s.description)!=null&&ne.trim()))}},[s]);const L=$.useCallback(async()=>{if(!f.trim()){alert("");return}if((H==null?void 0:H.type)==="weekly"&&(!H.days||H.days.length===0)){alert("");return}const ne={title:f.trim(),description:v.trim()||null,projectId:S==="none"?null:S,status:z,dueDate:M?_t.fromDate(M):null,recurrence:(H==null?void 0:H.type)==="none"?null:H,timeBlockId:X||null,duration:ae||void 0};try{a?await WI({...ne,title:ne.title}):await NL(s.id,ne),n()}catch(W){console.error("Failed to save task",W),alert("")}},[f,v,S,z,M,H,X,ae,a,s,n]),R=$.useCallback(async()=>{if(!(!(s!=null&&s.id)||a)&&confirm(""))try{await DL(s.id),n()}catch(ne){console.error("Failed to delete task",ne),alert("")}},[s,a,n]),Ue=ne=>{K({type:ne,days:ne==="weekly"?(H==null?void 0:H.days)||[]:[]})},et=ne=>{const W=(H==null?void 0:H.days)||[],he=W.includes(ne)?W.filter(ue=>ue!==ne):[...W,ne].sort((ue,F)=>ue-F);K({type:(H==null?void 0:H.type)||"weekly",days:he})},Ze=$.useMemo(()=>zL(v),[v]);return r?O.jsx(tE,{isOpen:r,onClose:n,className:"max-w-4xl h-[85vh]",children:O.jsxs("div",{className:"flex flex-col h-full",children:[O.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 shrink-0",children:[O.jsx("input",{type:"text",value:f,onChange:ne=>m(ne.target.value),placeholder:"",className:"flex-1 text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder:text-gray-400",autoFocus:!0}),O.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:O.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),O.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 h-full",children:[O.jsxs("div",{className:"md:col-span-8 flex flex-col h-full bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[O.jsxs("div",{className:"flex justify-between items-center mb-2",children:[O.jsxs("label",{className:"text-xs font-semibold text-gray-500 flex items-center gap-2 uppercase",children:[O.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})," (Markdown)"]}),O.jsx("button",{type:"button",onClick:()=>k(!T),className:"text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 px-2 py-0.5 rounded transition-colors text-xs font-medium",children:T?"":""})]}),O.jsx("div",{className:"flex-1 relative min-h-[200px]",children:T?O.jsx("div",{onClick:()=>k(!1),className:"w-full h-full p-4 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm overflow-y-auto cursor-text prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:Ze||'<span class="text-gray-400">...</span>'}}):O.jsx("textarea",{value:v,onChange:ne=>E(ne.target.value),onBlur:()=>v.trim()&&k(!0),placeholder:"...",className:"w-full h-full p-3 bg-gray-50 dark:bg-gray-900/50 border-0 rounded-lg outline-none text-sm transition-all resize-none leading-relaxed focus:ring-1 focus:ring-blue-500/50 text-gray-800 dark:text-gray-200 font-mono",autoFocus:!v})})]}),O.jsxs("div",{className:"md:col-span-4 space-y-4",children:[O.jsxs("details",{open:P,onToggle:ne=>x(ne.currentTarget.open),className:"group border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[O.jsxs("summary",{className:"flex items-center justify-between px-4 py-3 cursor-pointer list-none outline-none bg-gray-50 dark:bg-gray-700/30 rounded-t-lg group-[:not([open])]:rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700/50",children:[O.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[O.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),""]}),O.jsx("span",{className:"transform group-open:rotate-180 transition-transform text-gray-400",children:O.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),O.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"task-due-date",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),O.jsx("input",{type:"date",id:"task-due-date",value:BL(M),onChange:ne=>J(qL(ne.target.value)),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm"})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"task-recurrence",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),O.jsx("select",{id:"task-recurrence",value:(H==null?void 0:H.type)||"none",onChange:ne=>Ue(ne.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:UL.map(ne=>O.jsx("option",{value:ne.value,children:ne.label},ne.value))})]}),(H==null?void 0:H.type)==="weekly"&&O.jsxs("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700",children:[O.jsx("span",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:""}),O.jsx("div",{className:"flex flex-wrap gap-2",children:$L.map((ne,W)=>{var he;return O.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[O.jsx("input",{type:"checkbox",checked:((he=H.days)==null?void 0:he.includes(W))||!1,onChange:()=>et(W),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),O.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:ne})]},W)})})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"task-timeblock",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),O.jsxs("select",{id:"task-timeblock",value:X||"",onChange:ne=>Y(ne.target.value||null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[O.jsx("option",{value:"",children:""}),h.map(ne=>O.jsxs("option",{value:ne.id,children:[ne.start," - ",ne.end]},ne.id))]})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"task-duration",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),O.jsxs("select",{id:"task-duration",value:ae||"",onChange:ne=>C(ne.target.value?parseInt(ne.target.value,10):null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[O.jsx("option",{value:"",children:""}),jL.map(ne=>O.jsxs("option",{value:ne,children:[ne," min"]},ne))]})]})]})]}),O.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[O.jsx("label",{htmlFor:"task-project",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),O.jsxs("select",{id:"task-project",value:S||"none",onChange:ne=>b(ne.target.value==="none"?null:ne.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[O.jsx("option",{value:"none",children:""}),u.map(ne=>O.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),O.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[O.jsx("label",{htmlFor:"task-status",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),O.jsxs("select",{id:"task-status",value:z,onChange:ne=>N(ne.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[O.jsx("option",{value:"todo",children:"To Do"}),O.jsx("option",{value:"completed",children:""})]})]})]})]})}),O.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center shrink-0",children:[!a&&O.jsxs("button",{onClick:R,className:"px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition flex items-center gap-1.5",children:[O.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),""]}),O.jsxs("div",{className:`flex gap-2 ${a?"ml-auto":""}`,children:[O.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition",children:""}),O.jsx("button",{onClick:L,className:"px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium shadow-md transition transform active:scale-95",children:a?"":""})]})]})]})}):null},HL=()=>O.jsxs(O.Fragment,{children:[O.jsx(eA,{}),O.jsx(WL,{})]}),Mh=bm(t=>({filterType:"inbox",targetId:null,query:"",setFilter:(e,n=null)=>t({filterType:e,targetId:n,query:""}),setSearchQuery:e=>t({query:e,filterType:"search"}),clearFilter:()=>t({filterType:"all",targetId:null,query:""})})),GL=[{id:"inbox",name:"",icon:"",color:"text-blue-500"},{id:"today",name:"",icon:"",color:"text-green-500"},{id:"upcoming",name:"",icon:"",color:"text-purple-500"},{id:"important",name:"",icon:"",color:"text-amber-400"},{id:"all",name:"",icon:"",color:"text-gray-500"}],KL=()=>{const{filterType:t,setFilter:e}=Mh();return O.jsx("ul",{className:"space-y-0.5",children:GL.map(n=>{const r=t===n.id;return O.jsx("li",{children:O.jsxs("button",{onClick:()=>e(n.id),className:zr("w-full flex items-center px-3 py-1.5 text-sm rounded-md transition-colors text-left gap-3",r?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[O.jsx("span",{className:n.color,children:n.icon}),O.jsx("span",{children:n.name})]})},n.id)})})},QL=()=>{const{labels:t,loading:e}=Mg(),{filterType:n,targetId:r,setFilter:s}=Mh();return e?O.jsx("div",{className:"px-4 py-2 text-xs text-gray-400",children:"Loading labels..."}):t.length===0?O.jsx("div",{className:"px-4 py-2 text-xs text-gray-400",children:"No labels found."}):O.jsx("ul",{className:"space-y-0.5",children:t.map(a=>{const u=n==="label"&&r===a.id;return O.jsx("li",{children:O.jsxs("button",{onClick:()=>s("label",a.id),className:zr("w-full flex items-center px-3 py-1.5 text-sm rounded-md transition-colors text-left gap-2 group",u?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[O.jsx("span",{className:"w-3 h-3 rounded-full opacity-75 group-hover:opacity-100",style:{backgroundColor:a.color||"#9ca3af"}}),O.jsx("span",{className:"truncate",children:a.name})]})},a.id)})})};function ZL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return $.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Lh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function cl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Vg(t){return"nodeType"in t}function Kn(t){var e,n;return t?cl(t)?t:Vg(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Fg(t){const{Document:e}=Kn(t);return t instanceof e}function Hu(t){return cl(t)?!1:t instanceof Kn(t).HTMLElement}function GI(t){return t instanceof Kn(t).SVGElement}function dl(t){return t?cl(t)?t.document:Vg(t)?Fg(t)?t:Hu(t)||GI(t)?t.ownerDocument:document:document:document}const ci=Lh?$.useLayoutEffect:$.useEffect;function zg(t){const e=$.useRef(t);return ci(()=>{e.current=t}),$.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function JL(){const t=$.useRef(null),e=$.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=$.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function ku(t,e){e===void 0&&(e=[t]);const n=$.useRef(t);return ci(()=>{n.current!==t&&(n.current=t)},e),n}function Gu(t,e){const n=$.useRef();return $.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function rh(t){const e=zg(t),n=$.useRef(null),r=$.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function ym(t){const e=$.useRef();return $.useEffect(()=>{e.current=t},[t]),e.current}let Dp={};function Ku(t,e){return $.useMemo(()=>{if(e)return e;const n=Dp[t]==null?0:Dp[t]+1;return Dp[t]=n,t+"-"+n},[t,e])}function KI(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,u)=>{const h=Object.entries(u);for(const[f,m]of h){const v=a[f];v!=null&&(a[f]=v+t*m)}return a},{...e})}}const Ma=KI(1),bu=KI(-1);function YL(t){return"clientX"in t&&"clientY"in t}function jg(t){if(!t)return!1;const{KeyboardEvent:e}=Kn(t.target);return e&&t instanceof e}function XL(t){if(!t)return!1;const{TouchEvent:e}=Kn(t.target);return e&&t instanceof e}function vm(t){if(XL(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return YL(t)?{x:t.clientX,y:t.clientY}:null}const Au=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Au.Translate.toString(t),Au.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),cw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function eV(t){return t.matches(cw)?t:t.querySelector(cw)}const tV={display:"none"};function nV(t){let{id:e,value:n}=t;return Ht.createElement("div",{id:e,style:tV},n)}function rV(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ht.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function iV(){const[t,e]=$.useState("");return{announce:$.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const QI=$.createContext(null);function sV(t){const e=$.useContext(QI);$.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function oV(){const[t]=$.useState(()=>new Set),e=$.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[$.useCallback(r=>{let{type:s,event:a}=r;t.forEach(u=>{var h;return(h=u[s])==null?void 0:h.call(u,a)})},[t]),e]}const aV={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},lV={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function uV(t){let{announcements:e=lV,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=aV}=t;const{announce:a,announcement:u}=iV(),h=Ku("DndLiveRegion"),[f,m]=$.useState(!1);if($.useEffect(()=>{m(!0)},[]),sV($.useMemo(()=>({onDragStart(E){let{active:S}=E;a(e.onDragStart({active:S}))},onDragMove(E){let{active:S,over:b}=E;e.onDragMove&&a(e.onDragMove({active:S,over:b}))},onDragOver(E){let{active:S,over:b}=E;a(e.onDragOver({active:S,over:b}))},onDragEnd(E){let{active:S,over:b}=E;a(e.onDragEnd({active:S,over:b}))},onDragCancel(E){let{active:S,over:b}=E;a(e.onDragCancel({active:S,over:b}))}}),[a,e])),!f)return null;const v=Ht.createElement(Ht.Fragment,null,Ht.createElement(nV,{id:r,value:s.draggable}),Ht.createElement(rV,{id:h,announcement:u}));return n?Aa.createPortal(v,n):v}var Wt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Wt||(Wt={}));function ih(){}function dw(t,e){return $.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function cV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return $.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const $r=Object.freeze({x:0,y:0});function ZI(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function JI(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function dV(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function hw(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function YI(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function fw(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const hV=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=fw(e,e.left,e.top),a=[];for(const u of r){const{id:h}=u,f=n.get(h);if(f){const m=ZI(fw(f),s);a.push({id:h,data:{droppableContainer:u,value:m}})}}return a.sort(JI)},fV=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=hw(e),a=[];for(const u of r){const{id:h}=u,f=n.get(h);if(f){const m=hw(f),v=s.reduce((S,b,z)=>S+ZI(m[z],b),0),E=Number((v/4).toFixed(4));a.push({id:h,data:{droppableContainer:u,value:E}})}}return a.sort(JI)};function pV(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),u=s-r,h=a-n;if(r<s&&n<a){const f=e.width*e.height,m=t.width*t.height,v=u*h,E=v/(f+m-v);return Number(E.toFixed(4))}return 0}const mV=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const a of r){const{id:u}=a,h=n.get(u);if(h){const f=pV(h,e);f>0&&s.push({id:u,data:{droppableContainer:a,value:f}})}}return s.sort(dV)};function gV(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function XI(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:$r}function yV(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((u,h)=>({...u,top:u.top+t*h.y,bottom:u.bottom+t*h.y,left:u.left+t*h.x,right:u.right+t*h.x}),{...n})}}const vV=yV(1);function _V(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function wV(t,e,n){const r=_V(e);if(!r)return t;const{scaleX:s,scaleY:a,x:u,y:h}=r,f=t.left-u-(1-s)*parseFloat(n),m=t.top-h-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),v=s?t.width/s:t.width,E=a?t.height/a:t.height;return{width:v,height:E,top:m,right:f+v,bottom:m+E,left:f}}const EV={ignoreTransform:!1};function hl(t,e){e===void 0&&(e=EV);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:v}=Kn(t).getComputedStyle(t);m&&(n=wV(n,m,v))}const{top:r,left:s,width:a,height:u,bottom:h,right:f}=n;return{top:r,left:s,width:a,height:u,bottom:h,right:f}}function pw(t){return hl(t,{ignoreTransform:!0})}function TV(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function IV(t,e){return e===void 0&&(e=Kn(t).getComputedStyle(t)),e.position==="fixed"}function SV(t,e){e===void 0&&(e=Kn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=e[s];return typeof a=="string"?n.test(a):!1})}function Vh(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(Fg(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Hu(s)||GI(s)||n.includes(s))return n;const a=Kn(t).getComputedStyle(s);return s!==t&&SV(s,a)&&n.push(s),IV(s,a)?n:r(s.parentNode)}return t?r(t):n}function eS(t){const[e]=Vh(t,1);return e??null}function Op(t){return!Lh||!t?null:cl(t)?t:Vg(t)?Fg(t)||t===dl(t).scrollingElement?window:Hu(t)?t:null:null}function tS(t){return cl(t)?t.scrollX:t.scrollLeft}function nS(t){return cl(t)?t.scrollY:t.scrollTop}function _m(t){return{x:tS(t),y:nS(t)}}var en;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(en||(en={}));function rS(t){return!Lh||!t?!1:t===document.scrollingElement}function iS(t){const e={x:0,y:0},n=rS(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,u=t.scrollTop>=r.y,h=t.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:u,isRight:h,maxScroll:r,minScroll:e}}const kV={x:.2,y:.2};function bV(t,e,n,r,s){let{top:a,left:u,right:h,bottom:f}=n;r===void 0&&(r=10),s===void 0&&(s=kV);const{isTop:m,isBottom:v,isLeft:E,isRight:S}=iS(t),b={x:0,y:0},z={x:0,y:0},N={height:e.height*s.y,width:e.width*s.x};return!m&&a<=e.top+N.height?(b.y=en.Backward,z.y=r*Math.abs((e.top+N.height-a)/N.height)):!v&&f>=e.bottom-N.height&&(b.y=en.Forward,z.y=r*Math.abs((e.bottom-N.height-f)/N.height)),!S&&h>=e.right-N.width?(b.x=en.Forward,z.x=r*Math.abs((e.right-N.width-h)/N.width)):!E&&u<=e.left+N.width&&(b.x=en.Backward,z.x=r*Math.abs((e.left+N.width-u)/N.width)),{direction:b,speed:z}}function AV(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:u}=window;return{top:0,left:0,right:a,bottom:u,width:a,height:u}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function sS(t){return t.reduce((e,n)=>Ma(e,_m(n)),$r)}function RV(t){return t.reduce((e,n)=>e+tS(n),0)}function CV(t){return t.reduce((e,n)=>e+nS(n),0)}function xV(t,e){if(e===void 0&&(e=hl),!t)return;const{top:n,left:r,bottom:s,right:a}=e(t);eS(t)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const PV=[["x",["left","right"],RV],["y",["top","bottom"],CV]];class Ug{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Vh(n),s=sS(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,u,h]of PV)for(const f of u)Object.defineProperty(this,f,{get:()=>{const m=h(r),v=s[a]-m;return this.rect[f]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class au{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function NV(t){const{EventTarget:e}=Kn(t);return t instanceof e?t:dl(t)}function Mp(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var vr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(vr||(vr={}));function mw(t){t.preventDefault()}function DV(t){t.stopPropagation()}var He;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(He||(He={}));const oS={start:[He.Space,He.Enter],cancel:[He.Esc],end:[He.Space,He.Enter,He.Tab]},OV=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case He.Right:return{...n,x:n.x+25};case He.Left:return{...n,x:n.x-25};case He.Down:return{...n,y:n.y+25};case He.Up:return{...n,y:n.y-25}}};class $g{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new au(dl(n)),this.windowListeners=new au(Kn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(vr.Resize,this.handleCancel),this.windowListeners.add(vr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(vr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&xV(r),n($r)}handleKeyDown(e){if(jg(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=oS,coordinateGetter:u=OV,scrollBehavior:h="smooth"}=s,{code:f}=e;if(a.end.includes(f)){this.handleEnd(e);return}if(a.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:m}=r.current,v=m?{x:m.left,y:m.top}:$r;this.referenceCoordinates||(this.referenceCoordinates=v);const E=u(e,{active:n,context:r.current,currentCoordinates:v});if(E){const S=bu(E,v),b={x:0,y:0},{scrollableAncestors:z}=r.current;for(const N of z){const M=e.code,{isTop:J,isRight:H,isLeft:K,isBottom:X,maxScroll:Y,minScroll:ae}=iS(N),C=AV(N),T={x:Math.min(M===He.Right?C.right-C.width/2:C.right,Math.max(M===He.Right?C.left:C.left+C.width/2,E.x)),y:Math.min(M===He.Down?C.bottom-C.height/2:C.bottom,Math.max(M===He.Down?C.top:C.top+C.height/2,E.y))},k=M===He.Right&&!H||M===He.Left&&!K,P=M===He.Down&&!X||M===He.Up&&!J;if(k&&T.x!==E.x){const x=N.scrollLeft+S.x,L=M===He.Right&&x<=Y.x||M===He.Left&&x>=ae.x;if(L&&!S.y){N.scrollTo({left:x,behavior:h});return}L?b.x=N.scrollLeft-x:b.x=M===He.Right?N.scrollLeft-Y.x:N.scrollLeft-ae.x,b.x&&N.scrollBy({left:-b.x,behavior:h});break}else if(P&&T.y!==E.y){const x=N.scrollTop+S.y,L=M===He.Down&&x<=Y.y||M===He.Up&&x>=ae.y;if(L&&!S.x){N.scrollTo({top:x,behavior:h});return}L?b.y=N.scrollTop-x:b.y=M===He.Down?N.scrollTop-Y.y:N.scrollTop-ae.y,b.y&&N.scrollBy({top:-b.y,behavior:h});break}}this.handleMove(e,Ma(bu(E,this.referenceCoordinates),b))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}$g.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=oS,onActivation:s}=e,{active:a}=n;const{code:u}=t.nativeEvent;if(r.start.includes(u)){const h=a.activatorNode.current;return h&&t.target!==h?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function gw(t){return!!(t&&"distance"in t)}function yw(t){return!!(t&&"delay"in t)}class Bg{constructor(e,n,r){var s;r===void 0&&(r=NV(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:a}=e,{target:u}=a;this.props=e,this.events=n,this.document=dl(u),this.documentListeners=new au(this.document),this.listeners=new au(r),this.windowListeners=new au(Kn(u)),this.initialCoordinates=(s=vm(a))!=null?s:$r,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(vr.Resize,this.handleCancel),this.windowListeners.add(vr.DragStart,mw),this.windowListeners.add(vr.VisibilityChange,this.handleCancel),this.windowListeners.add(vr.ContextMenu,mw),this.documentListeners.add(vr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(yw(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(gw(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(vr.Click,DV,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(vr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:u,options:{activationConstraint:h}}=a;if(!s)return;const f=(n=vm(e))!=null?n:$r,m=bu(s,f);if(!r&&h){if(gw(h)){if(h.tolerance!=null&&Mp(m,h.tolerance))return this.handleCancel();if(Mp(m,h.distance))return this.handleStart()}if(yw(h)&&Mp(m,h.tolerance))return this.handleCancel();this.handlePending(h,m);return}e.cancelable&&e.preventDefault(),u(f)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===He.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const MV={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class qg extends Bg{constructor(e){const{event:n}=e,r=dl(n.target);super(e,MV,r)}}qg.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const LV={move:{name:"mousemove"},end:{name:"mouseup"}};var wm;(function(t){t[t.RightClick=2]="RightClick"})(wm||(wm={}));class VV extends Bg{constructor(e){super(e,LV,dl(e.event.target))}}VV.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===wm.RightClick?!1:(r==null||r({event:n}),!0)}}];const Lp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class FV extends Bg{constructor(e){super(e,Lp)}static setup(){return window.addEventListener(Lp.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Lp.move.name,e)};function e(){}}}FV.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var lu;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(lu||(lu={}));var sh;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(sh||(sh={}));function zV(t){let{acceleration:e,activator:n=lu.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:u=5,order:h=sh.TreeOrder,pointerCoordinates:f,scrollableAncestors:m,scrollableAncestorRects:v,delta:E,threshold:S}=t;const b=UV({delta:E,disabled:!a}),[z,N]=JL(),M=$.useRef({x:0,y:0}),J=$.useRef({x:0,y:0}),H=$.useMemo(()=>{switch(n){case lu.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case lu.DraggableRect:return s}},[n,s,f]),K=$.useRef(null),X=$.useCallback(()=>{const ae=K.current;if(!ae)return;const C=M.current.x*J.current.x,T=M.current.y*J.current.y;ae.scrollBy(C,T)},[]),Y=$.useMemo(()=>h===sh.TreeOrder?[...m].reverse():m,[h,m]);$.useEffect(()=>{if(!a||!m.length||!H){N();return}for(const ae of Y){if((r==null?void 0:r(ae))===!1)continue;const C=m.indexOf(ae),T=v[C];if(!T)continue;const{direction:k,speed:P}=bV(ae,T,H,e,S);for(const x of["x","y"])b[x][k[x]]||(P[x]=0,k[x]=0);if(P.x>0||P.y>0){N(),K.current=ae,z(X,u),M.current=P,J.current=k;return}}M.current={x:0,y:0},J.current={x:0,y:0},N()},[e,X,r,N,a,u,JSON.stringify(H),JSON.stringify(b),z,m,Y,v,JSON.stringify(S)])}const jV={x:{[en.Backward]:!1,[en.Forward]:!1},y:{[en.Backward]:!1,[en.Forward]:!1}};function UV(t){let{delta:e,disabled:n}=t;const r=ym(e);return Gu(s=>{if(n||!r||!s)return jV;const a={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[en.Backward]:s.x[en.Backward]||a.x===-1,[en.Forward]:s.x[en.Forward]||a.x===1},y:{[en.Backward]:s.y[en.Backward]||a.y===-1,[en.Forward]:s.y[en.Forward]||a.y===1}}},[n,e,r])}function $V(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Gu(s=>{var a;return e==null?null:(a=r??s)!=null?a:null},[r,e])}function BV(t,e){return $.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,r)}));return[...n,...a]},[]),[t,e])}var Ru;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Ru||(Ru={}));var Em;(function(t){t.Optimized="optimized"})(Em||(Em={}));const vw=new Map;function qV(t,e){let{dragging:n,dependencies:r,config:s}=e;const[a,u]=$.useState(null),{frequency:h,measure:f,strategy:m}=s,v=$.useRef(t),E=M(),S=ku(E),b=$.useCallback(function(J){J===void 0&&(J=[]),!S.current&&u(H=>H===null?J:H.concat(J.filter(K=>!H.includes(K))))},[S]),z=$.useRef(null),N=Gu(J=>{if(E&&!n)return vw;if(!J||J===vw||v.current!==t||a!=null){const H=new Map;for(let K of t){if(!K)continue;if(a&&a.length>0&&!a.includes(K.id)&&K.rect.current){H.set(K.id,K.rect.current);continue}const X=K.node.current,Y=X?new Ug(f(X),X):null;K.rect.current=Y,Y&&H.set(K.id,Y)}return H}return J},[t,a,n,E,f]);return $.useEffect(()=>{v.current=t},[t]),$.useEffect(()=>{E||b()},[n,E]),$.useEffect(()=>{a&&a.length>0&&u(null)},[JSON.stringify(a)]),$.useEffect(()=>{E||typeof h!="number"||z.current!==null||(z.current=setTimeout(()=>{b(),z.current=null},h))},[h,E,b,...r]),{droppableRects:N,measureDroppableContainers:b,measuringScheduled:a!=null};function M(){switch(m){case Ru.Always:return!1;case Ru.BeforeDragging:return n;default:return!n}}}function aS(t,e){return Gu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function WV(t,e){return aS(t,e)}function HV(t){let{callback:e,disabled:n}=t;const r=zg(e),s=$.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return $.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Fh(t){let{callback:e,disabled:n}=t;const r=zg(e),s=$.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return $.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function GV(t){return new Ug(hl(t),t)}function _w(t,e,n){e===void 0&&(e=GV);const[r,s]=$.useState(null);function a(){s(f=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=f??n)!=null?m:null}const v=e(t);return JSON.stringify(f)===JSON.stringify(v)?f:v})}const u=HV({callback(f){if(t)for(const m of f){const{type:v,target:E}=m;if(v==="childList"&&E instanceof HTMLElement&&E.contains(t)){a();break}}}}),h=Fh({callback:a});return ci(()=>{a(),t?(h==null||h.observe(t),u==null||u.observe(document.body,{childList:!0,subtree:!0})):(h==null||h.disconnect(),u==null||u.disconnect())},[t]),r}function KV(t){const e=aS(t);return XI(t,e)}const ww=[];function QV(t){const e=$.useRef(t),n=Gu(r=>t?r&&r!==ww&&t&&e.current&&t.parentNode===e.current.parentNode?r:Vh(t):ww,[t]);return $.useEffect(()=>{e.current=t},[t]),n}function ZV(t){const[e,n]=$.useState(null),r=$.useRef(t),s=$.useCallback(a=>{const u=Op(a.target);u&&n(h=>h?(h.set(u,_m(u)),new Map(h)):null)},[]);return $.useEffect(()=>{const a=r.current;if(t!==a){u(a);const h=t.map(f=>{const m=Op(f);return m?(m.addEventListener("scroll",s,{passive:!0}),[m,_m(m)]):null}).filter(f=>f!=null);n(h.length?new Map(h):null),r.current=t}return()=>{u(t),u(a)};function u(h){h.forEach(f=>{const m=Op(f);m==null||m.removeEventListener("scroll",s)})}},[s,t]),$.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,u)=>Ma(a,u),$r):sS(t):$r,[t,e])}function Ew(t,e){e===void 0&&(e=[]);const n=$.useRef(null);return $.useEffect(()=>{n.current=null},e),$.useEffect(()=>{const r=t!==$r;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?bu(t,n.current):$r}function JV(t){$.useEffect(()=>{if(!Lh)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function YV(t,e){return $.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=u=>{a(u,e)},n},{}),[t,e])}function lS(t){return $.useMemo(()=>t?TV(t):null,[t])}const Tw=[];function XV(t,e){e===void 0&&(e=hl);const[n]=t,r=lS(n?Kn(n):null),[s,a]=$.useState(Tw);function u(){a(()=>t.length?t.map(f=>rS(f)?r:new Ug(e(f),f)):Tw)}const h=Fh({callback:u});return ci(()=>{h==null||h.disconnect(),u(),t.forEach(f=>h==null?void 0:h.observe(f))},[t]),s}function e4(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Hu(e)?e:t}function t4(t){let{measure:e}=t;const[n,r]=$.useState(null),s=$.useCallback(m=>{for(const{target:v}of m)if(Hu(v)){r(E=>{const S=e(v);return E?{...E,width:S.width,height:S.height}:S});break}},[e]),a=Fh({callback:s}),u=$.useCallback(m=>{const v=e4(m);a==null||a.disconnect(),v&&(a==null||a.observe(v)),r(v?e(v):null)},[e,a]),[h,f]=rh(u);return $.useMemo(()=>({nodeRef:h,rect:n,setRef:f}),[n,h,f])}const n4=[{sensor:qg,options:{}},{sensor:$g,options:{}}],r4={current:{}},Ld={draggable:{measure:pw},droppable:{measure:pw,strategy:Ru.WhileDragging,frequency:Em.Optimized},dragOverlay:{measure:hl}};class uu extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const i4={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new uu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ih},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ld,measureDroppableContainers:ih,windowRect:null,measuringScheduled:!1},s4={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ih,draggableNodes:new Map,over:null,measureDroppableContainers:ih},zh=$.createContext(s4),uS=$.createContext(i4);function o4(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new uu}}}function a4(t,e){switch(e.type){case Wt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Wt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Wt.DragEnd:case Wt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Wt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new uu(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Wt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const u=new uu(t.droppable.containers);return u.set(n,{...a,disabled:s}),{...t,droppable:{...t.droppable,containers:u}}}case Wt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const a=new uu(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function l4(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=$.useContext(zh),a=ym(r),u=ym(n==null?void 0:n.id);return $.useEffect(()=>{if(!e&&!r&&a&&u!=null){if(!jg(a)||document.activeElement===a.target)return;const h=s.get(u);if(!h)return;const{activatorNode:f,node:m}=h;if(!f.current&&!m.current)return;requestAnimationFrame(()=>{for(const v of[f.current,m.current]){if(!v)continue;const E=eV(v);if(E){E.focus();break}}})}},[r,e,s,u,a]),null}function u4(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,a)=>a({transform:s,...r}),n):n}function c4(t){return $.useMemo(()=>({draggable:{...Ld.draggable,...t==null?void 0:t.draggable},droppable:{...Ld.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Ld.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function d4(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const a=$.useRef(!1),{x:u,y:h}=typeof s=="boolean"?{x:s,y:s}:s;ci(()=>{if(!u&&!h||!e){a.current=!1;return}if(a.current||!r)return;const m=e==null?void 0:e.node.current;if(!m||m.isConnected===!1)return;const v=n(m),E=XI(v,r);if(u||(E.x=0),h||(E.y=0),a.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const S=eS(m);S&&S.scrollBy({top:E.y,left:E.x})}},[e,u,h,r,n])}const cS=$.createContext({...$r,scaleX:1,scaleY:1});var ms;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ms||(ms={}));const h4=$.memo(function(e){var n,r,s,a;let{id:u,accessibility:h,autoScroll:f=!0,children:m,sensors:v=n4,collisionDetection:E=mV,measuring:S,modifiers:b,...z}=e;const N=$.useReducer(a4,void 0,o4),[M,J]=N,[H,K]=oV(),[X,Y]=$.useState(ms.Uninitialized),ae=X===ms.Initialized,{draggable:{active:C,nodes:T,translate:k},droppable:{containers:P}}=M,x=C!=null?T.get(C):null,L=$.useRef({initial:null,translated:null}),R=$.useMemo(()=>{var rt;return C!=null?{id:C,data:(rt=x==null?void 0:x.data)!=null?rt:r4,rect:L}:null},[C,x]),Ue=$.useRef(null),[et,Ze]=$.useState(null),[ne,W]=$.useState(null),he=ku(z,Object.values(z)),ue=Ku("DndDescribedBy",u),F=$.useMemo(()=>P.getEnabled(),[P]),Q=c4(S),{droppableRects:de,measureDroppableContainers:Ee,measuringScheduled:xe}=qV(F,{dragging:ae,dependencies:[k.x,k.y],config:Q.droppable}),Ce=$V(T,C),Ie=$.useMemo(()=>ne?vm(ne):null,[ne]),Ve=Mn(),Fe=WV(Ce,Q.draggable.measure);d4({activeNode:C!=null?T.get(C):null,config:Ve.layoutShiftCompensation,initialRect:Fe,measure:Q.draggable.measure});const be=_w(Ce,Q.draggable.measure,Fe),zt=_w(Ce?Ce.parentElement:null),Tt=$.useRef({activatorEvent:null,active:null,activeNode:Ce,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),kn=P.getNodeFor((n=Tt.current.over)==null?void 0:n.id),tn=t4({measure:Q.dragOverlay.measure}),Qn=(r=tn.nodeRef.current)!=null?r:Ce,sr=ae?(s=tn.rect)!=null?s:be:null,zi=!!(tn.nodeRef.current&&tn.rect),js=KV(zi?null:be),Br=lS(Qn?Kn(Qn):null),Gt=QV(ae?kn??Ce:null),On=XV(Gt),qr=u4(b,{transform:{x:k.x-js.x,y:k.y-js.y,scaleX:1,scaleY:1},activatorEvent:ne,active:R,activeNodeRect:be,containerNodeRect:zt,draggingNodeRect:sr,over:Tt.current.over,overlayNodeRect:tn.rect,scrollableAncestors:Gt,scrollableAncestorRects:On,windowRect:Br}),di=Ie?Ma(Ie,k):null,hi=ZV(Gt),Us=Ew(hi),bt=Ew(hi,[be]),st=Ma(qr,Us),fn=sr?vV(sr,qr):null,wr=R&&fn?E({active:R,collisionRect:fn,droppableRects:de,droppableContainers:F,pointerCoordinates:di}):null,Er=YI(wr,"id"),[pn,Wr]=$.useState(null),$s=zi?qr:Ma(qr,bt),Bs=gV($s,(a=pn==null?void 0:pn.rect)!=null?a:null,be),fi=$.useRef(null),ji=$.useCallback((rt,xt)=>{let{sensor:ft,options:Ln}=xt;if(Ue.current==null)return;const Pt=T.get(Ue.current);if(!Pt)return;const jt=rt.nativeEvent,Nt=new ft({active:Ue.current,activeNode:Pt,event:jt,options:Ln,context:Tt,onAbort(ze){if(!T.get(ze))return;const{onDragAbort:It}=he.current,nn={id:ze};It==null||It(nn),H({type:"onDragAbort",event:nn})},onPending(ze,bn,It,nn){if(!T.get(ze))return;const{onDragPending:ar}=he.current,Dt={id:ze,constraint:bn,initialCoordinates:It,offset:nn};ar==null||ar(Dt),H({type:"onDragPending",event:Dt})},onStart(ze){const bn=Ue.current;if(bn==null)return;const It=T.get(bn);if(!It)return;const{onDragStart:nn}=he.current,Zn={activatorEvent:jt,active:{id:bn,data:It.data,rect:L}};Aa.unstable_batchedUpdates(()=>{nn==null||nn(Zn),Y(ms.Initializing),J({type:Wt.DragStart,initialCoordinates:ze,active:bn}),H({type:"onDragStart",event:Zn}),Ze(fi.current),W(jt)})},onMove(ze){J({type:Wt.DragMove,coordinates:ze})},onEnd:or(Wt.DragEnd),onCancel:or(Wt.DragCancel)});fi.current=Nt;function or(ze){return async function(){const{active:It,collisions:nn,over:Zn,scrollAdjustedTranslate:ar}=Tt.current;let Dt=null;if(It&&ar){const{cancelDrop:Tr}=he.current;Dt={activatorEvent:jt,active:It,collisions:nn,delta:ar,over:Zn},ze===Wt.DragEnd&&typeof Tr=="function"&&await Promise.resolve(Tr(Dt))&&(ze=Wt.DragCancel)}Ue.current=null,Aa.unstable_batchedUpdates(()=>{J({type:ze}),Y(ms.Uninitialized),Wr(null),Ze(null),W(null),fi.current=null;const Tr=ze===Wt.DragEnd?"onDragEnd":"onDragCancel";if(Dt){const Ws=he.current[Tr];Ws==null||Ws(Dt),H({type:Tr,event:Dt})}})}}},[T]),qs=$.useCallback((rt,xt)=>(ft,Ln)=>{const Pt=ft.nativeEvent,jt=T.get(Ln);if(Ue.current!==null||!jt||Pt.dndKit||Pt.defaultPrevented)return;const Nt={active:jt};rt(ft,xt.options,Nt)===!0&&(Pt.dndKit={capturedBy:xt.sensor},Ue.current=Ln,ji(ft,xt))},[T,ji]),Hr=BV(v,qs);JV(v),ci(()=>{be&&X===ms.Initializing&&Y(ms.Initialized)},[be,X]),$.useEffect(()=>{const{onDragMove:rt}=he.current,{active:xt,activatorEvent:ft,collisions:Ln,over:Pt}=Tt.current;if(!xt||!ft)return;const jt={active:xt,activatorEvent:ft,collisions:Ln,delta:{x:st.x,y:st.y},over:Pt};Aa.unstable_batchedUpdates(()=>{rt==null||rt(jt),H({type:"onDragMove",event:jt})})},[st.x,st.y]),$.useEffect(()=>{const{active:rt,activatorEvent:xt,collisions:ft,droppableContainers:Ln,scrollAdjustedTranslate:Pt}=Tt.current;if(!rt||Ue.current==null||!xt||!Pt)return;const{onDragOver:jt}=he.current,Nt=Ln.get(Er),or=Nt&&Nt.rect.current?{id:Nt.id,rect:Nt.rect.current,data:Nt.data,disabled:Nt.disabled}:null,ze={active:rt,activatorEvent:xt,collisions:ft,delta:{x:Pt.x,y:Pt.y},over:or};Aa.unstable_batchedUpdates(()=>{Wr(or),jt==null||jt(ze),H({type:"onDragOver",event:ze})})},[Er]),ci(()=>{Tt.current={activatorEvent:ne,active:R,activeNode:Ce,collisionRect:fn,collisions:wr,droppableRects:de,draggableNodes:T,draggingNode:Qn,draggingNodeRect:sr,droppableContainers:P,over:pn,scrollableAncestors:Gt,scrollAdjustedTranslate:st},L.current={initial:sr,translated:fn}},[R,Ce,wr,fn,T,Qn,sr,de,P,pn,Gt,st]),zV({...Ve,delta:k,draggingRect:fn,pointerCoordinates:di,scrollableAncestors:Gt,scrollableAncestorRects:On});const Ui=$.useMemo(()=>({active:R,activeNode:Ce,activeNodeRect:be,activatorEvent:ne,collisions:wr,containerNodeRect:zt,dragOverlay:tn,draggableNodes:T,droppableContainers:P,droppableRects:de,over:pn,measureDroppableContainers:Ee,scrollableAncestors:Gt,scrollableAncestorRects:On,measuringConfiguration:Q,measuringScheduled:xe,windowRect:Br}),[R,Ce,be,ne,wr,zt,tn,T,P,de,pn,Ee,Gt,On,Q,xe,Br]),$i=$.useMemo(()=>({activatorEvent:ne,activators:Hr,active:R,activeNodeRect:be,ariaDescribedById:{draggable:ue},dispatch:J,draggableNodes:T,over:pn,measureDroppableContainers:Ee}),[ne,Hr,R,be,J,ue,T,pn,Ee]);return Ht.createElement(QI.Provider,{value:K},Ht.createElement(zh.Provider,{value:$i},Ht.createElement(uS.Provider,{value:Ui},Ht.createElement(cS.Provider,{value:Bs},m)),Ht.createElement(l4,{disabled:(h==null?void 0:h.restoreFocus)===!1})),Ht.createElement(uV,{...h,hiddenTextDescribedById:ue}));function Mn(){const rt=(et==null?void 0:et.autoScrollEnabled)===!1,xt=typeof f=="object"?f.enabled===!1:f===!1,ft=ae&&!rt&&!xt;return typeof f=="object"?{...f,enabled:ft}:{enabled:ft}}}),f4=$.createContext(null),Iw="button",p4="Draggable";function m4(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const a=Ku(p4),{activators:u,activatorEvent:h,active:f,activeNodeRect:m,ariaDescribedById:v,draggableNodes:E,over:S}=$.useContext(zh),{role:b=Iw,roleDescription:z="draggable",tabIndex:N=0}=s??{},M=(f==null?void 0:f.id)===e,J=$.useContext(M?cS:f4),[H,K]=rh(),[X,Y]=rh(),ae=YV(u,e),C=ku(n);ci(()=>(E.set(e,{id:e,key:a,node:H,activatorNode:X,data:C}),()=>{const k=E.get(e);k&&k.key===a&&E.delete(e)}),[E,e]);const T=$.useMemo(()=>({role:b,tabIndex:N,"aria-disabled":r,"aria-pressed":M&&b===Iw?!0:void 0,"aria-roledescription":z,"aria-describedby":v.draggable}),[r,b,N,M,z,v.draggable]);return{active:f,activatorEvent:h,activeNodeRect:m,attributes:T,isDragging:M,listeners:r?void 0:ae,node:H,over:S,setNodeRef:K,setActivatorNodeRef:Y,transform:J}}function g4(){return $.useContext(uS)}const y4="Droppable",v4={timeout:25};function _4(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const a=Ku(y4),{active:u,dispatch:h,over:f,measureDroppableContainers:m}=$.useContext(zh),v=$.useRef({disabled:n}),E=$.useRef(!1),S=$.useRef(null),b=$.useRef(null),{disabled:z,updateMeasurementsFor:N,timeout:M}={...v4,...s},J=ku(N??r),H=$.useCallback(()=>{if(!E.current){E.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{m(Array.isArray(J.current)?J.current:[J.current]),b.current=null},M)},[M]),K=Fh({callback:H,disabled:z||!u}),X=$.useCallback((T,k)=>{K&&(k&&(K.unobserve(k),E.current=!1),T&&K.observe(T))},[K]),[Y,ae]=rh(X),C=ku(e);return $.useEffect(()=>{!K||!Y.current||(K.disconnect(),E.current=!1,K.observe(Y.current))},[Y,K]),$.useEffect(()=>(h({type:Wt.RegisterDroppable,element:{id:r,key:a,disabled:n,node:Y,rect:S,data:C}}),()=>h({type:Wt.UnregisterDroppable,key:a,id:r})),[r]),$.useEffect(()=>{n!==v.current.disabled&&(h({type:Wt.SetDroppableDisabled,id:r,key:a,disabled:n}),v.current.disabled=n)},[r,a,n,h]),{active:u,rect:S,isOver:(f==null?void 0:f.id)===r,node:Y,over:f,setNodeRef:ae}}function dS(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function w4(t,e){return t.reduce((n,r,s)=>{const a=e.get(r);return a&&(n[s]=a),n},Array(t.length))}function Td(t){return t!==null&&t>=0}function E4(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function T4(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const hS=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const a=dS(e,r,n),u=e[s],h=a[s];return!h||!u?null:{x:h.left-u.left,y:h.top-u.top,scaleX:h.width/u.width,scaleY:h.height/u.height}},Id={scaleX:1,scaleY:1},I4=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:a,overIndex:u}=t;const h=(e=a[n])!=null?e:r;if(!h)return null;if(s===n){const m=a[u];return m?{x:0,y:n<u?m.top+m.height-(h.top+h.height):m.top-h.top,...Id}:null}const f=S4(a,s,n);return s>n&&s<=u?{x:0,y:-h.height-f,...Id}:s<n&&s>=u?{x:0,y:h.height+f,...Id}:{x:0,y:0,...Id}};function S4(t,e,n){const r=t[e],s=t[e-1],a=t[e+1];return r?n<e?s?r.top-(s.top+s.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const fS="Sortable",pS=Ht.createContext({activeIndex:-1,containerId:fS,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:hS,disabled:{draggable:!1,droppable:!1}});function k4(t){let{children:e,id:n,items:r,strategy:s=hS,disabled:a=!1}=t;const{active:u,dragOverlay:h,droppableRects:f,over:m,measureDroppableContainers:v}=g4(),E=Ku(fS,n),S=h.rect!==null,b=$.useMemo(()=>r.map(ae=>typeof ae=="object"&&"id"in ae?ae.id:ae),[r]),z=u!=null,N=u?b.indexOf(u.id):-1,M=m?b.indexOf(m.id):-1,J=$.useRef(b),H=!E4(b,J.current),K=M!==-1&&N===-1||H,X=T4(a);ci(()=>{H&&z&&v(b)},[H,b,z,v]),$.useEffect(()=>{J.current=b},[b]);const Y=$.useMemo(()=>({activeIndex:N,containerId:E,disabled:X,disableTransforms:K,items:b,overIndex:M,useDragOverlay:S,sortedRects:w4(b,f),strategy:s}),[N,E,X.draggable,X.droppable,K,b,M,f,S,s]);return Ht.createElement(pS.Provider,{value:Y},e)}const b4=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return dS(n,r,s).indexOf(e)},A4=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:a,newIndex:u,previousItems:h,previousContainerId:f,transition:m}=t;return!m||!r||h!==a&&s===u?!1:n?!0:u!==s&&e===f},R4={duration:200,easing:"ease"},mS="transform",C4=Au.Transition.toString({property:mS,duration:0,easing:"linear"}),x4={roleDescription:"sortable"};function P4(t){let{disabled:e,index:n,node:r,rect:s}=t;const[a,u]=$.useState(null),h=$.useRef(n);return ci(()=>{if(!e&&n!==h.current&&r.current){const f=s.current;if(f){const m=hl(r.current,{ignoreTransform:!0}),v={x:f.left-m.left,y:f.top-m.top,scaleX:f.width/m.width,scaleY:f.height/m.height};(v.x||v.y)&&u(v)}}n!==h.current&&(h.current=n)},[e,n,r,s]),$.useEffect(()=>{a&&u(null)},[a]),a}function N4(t){let{animateLayoutChanges:e=A4,attributes:n,disabled:r,data:s,getNewIndex:a=b4,id:u,strategy:h,resizeObserverConfig:f,transition:m=R4}=t;const{items:v,containerId:E,activeIndex:S,disabled:b,disableTransforms:z,sortedRects:N,overIndex:M,useDragOverlay:J,strategy:H}=$.useContext(pS),K=D4(r,b),X=v.indexOf(u),Y=$.useMemo(()=>({sortable:{containerId:E,index:X,items:v},...s}),[E,s,X,v]),ae=$.useMemo(()=>v.slice(v.indexOf(u)),[v,u]),{rect:C,node:T,isOver:k,setNodeRef:P}=_4({id:u,data:Y,disabled:K.droppable,resizeObserverConfig:{updateMeasurementsFor:ae,...f}}),{active:x,activatorEvent:L,activeNodeRect:R,attributes:Ue,setNodeRef:et,listeners:Ze,isDragging:ne,over:W,setActivatorNodeRef:he,transform:ue}=m4({id:u,data:Y,attributes:{...x4,...n},disabled:K.draggable}),F=ZL(P,et),Q=!!x,de=Q&&!z&&Td(S)&&Td(M),Ee=!J&&ne,xe=Ee&&de?ue:null,Ie=de?xe??(h??H)({rects:N,activeNodeRect:R,activeIndex:S,overIndex:M,index:X}):null,Ve=Td(S)&&Td(M)?a({id:u,items:v,activeIndex:S,overIndex:M}):X,Fe=x==null?void 0:x.id,be=$.useRef({activeId:Fe,items:v,newIndex:Ve,containerId:E}),zt=v!==be.current.items,Tt=e({active:x,containerId:E,isDragging:ne,isSorting:Q,id:u,index:X,items:v,newIndex:be.current.newIndex,previousItems:be.current.items,previousContainerId:be.current.containerId,transition:m,wasDragging:be.current.activeId!=null}),kn=P4({disabled:!Tt,index:X,node:T,rect:C});return $.useEffect(()=>{Q&&be.current.newIndex!==Ve&&(be.current.newIndex=Ve),E!==be.current.containerId&&(be.current.containerId=E),v!==be.current.items&&(be.current.items=v)},[Q,Ve,E,v]),$.useEffect(()=>{if(Fe===be.current.activeId)return;if(Fe!=null&&be.current.activeId==null){be.current.activeId=Fe;return}const Qn=setTimeout(()=>{be.current.activeId=Fe},50);return()=>clearTimeout(Qn)},[Fe]),{active:x,activeIndex:S,attributes:Ue,data:Y,rect:C,index:X,newIndex:Ve,items:v,isOver:k,isSorting:Q,isDragging:ne,listeners:Ze,node:T,overIndex:M,over:W,setNodeRef:F,setActivatorNodeRef:he,setDroppableNodeRef:P,setDraggableNodeRef:et,transform:kn??Ie,transition:tn()};function tn(){if(kn||zt&&be.current.newIndex===X)return C4;if(!(Ee&&!jg(L)||!m)&&(Q||Tt))return Au.Transition.toString({...m,property:mS})}}function D4(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function oh(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const O4=[He.Down,He.Right,He.Up,He.Left],M4=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:a,over:u,scrollableAncestors:h}}=e;if(O4.includes(t.code)){if(t.preventDefault(),!n||!r)return;const f=[];a.getEnabled().forEach(E=>{if(!E||E!=null&&E.disabled)return;const S=s.get(E.id);if(S)switch(t.code){case He.Down:r.top<S.top&&f.push(E);break;case He.Up:r.top>S.top&&f.push(E);break;case He.Left:r.left>S.left&&f.push(E);break;case He.Right:r.left<S.left&&f.push(E);break}});const m=fV({collisionRect:r,droppableRects:s,droppableContainers:f});let v=YI(m,"id");if(v===(u==null?void 0:u.id)&&m.length>1&&(v=m[1].id),v!=null){const E=a.get(n.id),S=a.get(v),b=S?s.get(S.id):null,z=S==null?void 0:S.node.current;if(z&&b&&E&&S){const M=Vh(z).some((ae,C)=>h[C]!==ae),J=gS(E,S),H=L4(E,S),K=M||!J?{x:0,y:0}:{x:H?r.width-b.width:0,y:H?r.height-b.height:0},X={x:b.left,y:b.top};return K.x&&K.y?X:bu(X,K)}}}};function gS(t,e){return!oh(t)||!oh(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function L4(t,e){return!oh(t)||!oh(e)||!gS(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const V4=({id:t,children:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:a,transition:u,isDragging:h}=N4({id:t}),f={transform:Au.Transform.toString(a),transition:u,opacity:h?.5:1};return O.jsx("div",{ref:s,style:f,...n,...r,children:e})},F4=()=>{const{projects:t,loading:e}=Lg(),n=cV(dw(qg),dw($g,{coordinateGetter:M4})),r=s=>{const{active:a,over:u}=s;a.id!==(u==null?void 0:u.id)&&console.log("Dragged",a.id,"to",u==null?void 0:u.id)};return e?O.jsx("div",{className:"p-4 text-xs text-gray-400",children:"Loading projects..."}):t.length===0?O.jsx("div",{className:"p-4 text-xs text-gray-400",children:"No projects found."}):O.jsx(h4,{sensors:n,collisionDetection:hV,onDragEnd:r,children:O.jsx(k4,{items:t.map(s=>s.id),strategy:I4,children:O.jsx("div",{className:"space-y-0.5 p-2",children:t.map(s=>O.jsx(V4,{id:s.id,children:O.jsx(z4,{project:s})},s.id))})})})},z4=({project:t})=>{const{filterType:e,targetId:n,setFilter:r}=Mh(),s=e==="project"&&n===t.id;return O.jsx("div",{onClick:()=>r("project",t.id),className:zr("group flex items-center justify-between px-2 py-1.5 rounded-md cursor-pointer transition-colors select-none",s?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"),children:O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-gray-400 text-xs",children:"#"}),O.jsx("span",{className:"text-sm truncate",children:t.name})]})})},j4=({children:t})=>{const{sidebarWidth:e,isSidebarOpen:n,sidebarDensity:r}=Am(),s={compact:"p-1",normal:"p-2",comfortable:"p-4",spacious:"p-6"}[r];return n?O.jsx("aside",{className:zr("h-full bg-gray-50 dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",s),style:{width:`${e}px`},children:O.jsxs("div",{className:"flex flex-col h-full overflow-y-auto",children:[O.jsx("div",{className:"mb-4",children:O.jsx("h2",{className:"text-xl font-bold px-2 text-gray-800 dark:text-gray-100",children:"TaskMg"})}),t]})}):null},Sw=({title:t,children:e,defaultExpanded:n=!0})=>{const[r,s]=$.useState(n);return O.jsxs("div",{className:"mb-2",children:[O.jsxs("button",{onClick:()=>s(!r),className:"flex items-center w-full px-2 py-1 text-xs font-semibold text-gray-500 uppercase hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[O.jsx("svg",{className:zr("w-3 h-3 mr-1 transition-transform",r?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),t]}),r&&O.jsx("div",{className:"mt-1",children:e})]})},U4=()=>{const[t,e]=$.useState([]),[n,r]=$.useState(!0),s=ul();return $.useEffect(()=>{if(!s){r(!1);return}const a=ML(s,u=>{e(u),r(!1)});return()=>a()},[s]),{tasks:t,loading:n}},$4=({className:t,onCancel:e,placeholder:n="..."})=>{const[r,s]=$.useState(""),[a,u]=$.useState(!1),h=async m=>{if(!(!r.trim()||a)){u(!0);try{await WI({title:r}),s("")}catch(v){console.error(v),alert("Failed to add task")}finally{u(!1)}}},f=m=>{m.key==="Enter"&&!m.shiftKey&&!m.nativeEvent.isComposing&&(m.preventDefault(),h()),m.key==="Escape"&&(e==null||e())};return O.jsxs("div",{className:zr("bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm p-3",t),children:[O.jsx("input",{type:"text",autoFocus:!0,className:"w-full bg-transparent text-sm text-gray-800 dark:text-gray-100 placeholder-gray-400 outline-none mb-2",placeholder:n,value:r,onChange:m=>s(m.target.value),onKeyDown:f,disabled:a}),O.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100 dark:border-gray-700/50",children:[O.jsx("div",{className:"flex gap-2",children:O.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700",children:O.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),O.jsxs("div",{className:"flex gap-2",children:[e&&O.jsx("button",{type:"button",onClick:e,disabled:a,className:"px-3 py-1.5 text-xs font-medium text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition",children:""}),O.jsx("button",{onClick:()=>h(),disabled:!r.trim()||a,className:"px-3 py-1.5 text-xs font-bold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded transition",children:a?"...":""})]})]})]})},B4=()=>{const[t,e]=$.useState(!1);return t?O.jsx("div",{className:"mb-4",children:O.jsx($4,{onCancel:()=>e(!1)})}):O.jsxs("button",{onClick:()=>e(!0),className:"group flex items-center gap-2 w-full text-left py-2 px-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-2",children:[O.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-transparent group-hover:bg-blue-100/50 dark:group-hover:bg-blue-900/30 transition-colors",children:O.jsx("svg",{className:"w-4 h-4 text-inherit",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),O.jsx("span",{className:"text-sm font-medium",children:""})]})},q4=({task:t})=>{const e=t.status==="completed",{openModal:n}=uh(),r=async s=>{s.stopPropagation(),t.id&&await OL(t.id,t.status||"todo")};return O.jsxs("li",{onClick:()=>n("task-detail",t),className:"group flex items-start gap-3 p-3 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700/50 rounded-xl hover:shadow-sm hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-200 cursor-pointer",children:[O.jsx("button",{onClick:r,className:zr("mt-0.5 w-5 h-5 rounded-full border flex items-center justify-center transition-colors shrink-0",e?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-blue-400 text-transparent"),"aria-label":e?"Mark as incomplete":"Mark as complete",children:O.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("div",{className:zr("text-sm text-gray-800 dark:text-gray-200 break-words",e&&"line-through text-gray-400 dark:text-gray-500"),children:t.title}),t.description&&O.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:t.description}),O.jsx("div",{className:"flex items-center gap-2 mt-2",children:t.dueDate&&O.jsxs("span",{className:zr("text-xs flex items-center gap-1",e?"text-gray-400":"text-red-500"),children:[" ",typeof t.dueDate=="string"?t.dueDate:"Date"]})})]})]})},W4=()=>{const{tasks:t,loading:e}=U4();if(e)return O.jsx("div",{className:"flex items-center justify-center h-full",children:O.jsx("div",{className:"text-gray-400 text-sm",children:"Loading tasks..."})});const n=[...t].sort((r,s)=>0);return O.jsxs("div",{className:"space-y-2 pb-20",children:[O.jsx("div",{className:"mb-4",children:O.jsx(B4,{})}),t.length===0?O.jsx("div",{className:"text-center text-gray-400 py-10",children:O.jsx("p",{className:"text-sm",children:"No tasks found"})}):O.jsx("ul",{className:"space-y-2",children:n.map(r=>O.jsx(q4,{task:r},r.id))})]})},H4=()=>{const{toggleSidebar:t}=Am(),{openModal:e}=uh(),{filterType:n,targetId:r}=Mh(),{projects:s}=Lg(),{labels:a}=Mg(),u=()=>{var h,f;if(n==="project")return((h=s.find(m=>m.id===r))==null?void 0:h.name)||"Project";if(n==="label")return((f=a.find(m=>m.id===r))==null?void 0:f.name)||"Label";switch(n){case"inbox":return"Inbox";case"today":return"Today";case"upcoming":return"Upcoming";case"important":return"Important";case"all":return"All Tasks";default:return"TaskMg"}};return O.jsxs("div",{className:"h-full flex overflow-hidden bg-white dark:bg-gray-900 text-gray-800 dark:text-white",children:[O.jsx(HL,{}),O.jsx(j4,{children:O.jsxs("div",{className:"flex flex-col gap-4",children:[O.jsx(KL,{}),O.jsx(Sw,{title:"Projects",children:O.jsx(F4,{})}),O.jsx(Sw,{title:"Labels",defaultExpanded:!1,children:O.jsx(QL,{})})]})}),O.jsxs("main",{className:"flex-1 flex flex-col relative h-full overflow-hidden",children:[O.jsxs("header",{className:"h-14 border-b border-gray-200 dark:border-gray-800 flex items-center px-4 justify-between bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-10 sticky top-0",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{onClick:t,className:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:O.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),O.jsx("h1",{className:"font-bold text-lg",children:u()})]}),O.jsx("div",{className:"flex items-center gap-2",children:O.jsx("button",{onClick:()=>e("settings"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Settings",children:O.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]}),O.jsx("div",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar",children:O.jsx("div",{className:"max-w-3xl mx-auto",children:O.jsx(W4,{})})})]})]})},G4=new Zk,yS=document.getElementById("app");if(!yS)throw new Error("Failed to find the root element");ib.createRoot(yS).render(O.jsx(Ht.StrictMode,{children:O.jsx(Yk,{client:G4,children:O.jsx(H4,{})})}));
