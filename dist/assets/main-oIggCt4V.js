var Zv=t=>{throw TypeError(t)};var im=(t,e,n)=>e.has(t)||Zv("Cannot "+n);var X=(t,e,n)=>(im(t,e,"read from private field"),n?n.call(t):e.get(t)),qe=(t,e,n)=>e.has(t)?Zv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),De=(t,e,n,r)=>(im(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),En=(t,e,n)=>(im(t,e,"access private method"),n);var Fd=(t,e,n,r)=>({set _(s){De(t,e,s,n)},get _(){return X(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Ox(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var om={exports:{}},xu={},am={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function MT(){if(Jv)return $e;Jv=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function b(U){return U===null||typeof U!="object"?null:(U=w&&U[w]||U["@@iterator"],typeof U=="function"?U:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,S={};function P(U,z,oe){this.props=U,this.context=z,this.refs=S,this.updater=oe||E}P.prototype.isReactComponent={},P.prototype.setState=function(U,z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,z,"setState")},P.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function B(){}B.prototype=P.prototype;function q(U,z,oe){this.props=U,this.context=z,this.refs=S,this.updater=oe||E}var K=q.prototype=new B;K.constructor=q,O(K,P.prototype),K.isPureReactComponent=!0;var Y=Array.isArray,J=Object.prototype.hasOwnProperty,te={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I(U,z,oe){var de,ke={},Se=null,Ee=null;if(z!=null)for(de in z.ref!==void 0&&(Ee=z.ref),z.key!==void 0&&(Se=""+z.key),z)J.call(z,de)&&!C.hasOwnProperty(de)&&(ke[de]=z[de]);var Le=arguments.length-2;if(Le===1)ke.children=oe;else if(1<Le){for(var Fe=Array(Le),Ce=0;Ce<Le;Ce++)Fe[Ce]=arguments[Ce+2];ke.children=Fe}if(U&&U.defaultProps)for(de in Le=U.defaultProps,Le)ke[de]===void 0&&(ke[de]=Le[de]);return{$$typeof:t,type:U,key:Se,ref:Ee,props:ke,_owner:te.current}}function A(U,z){return{$$typeof:t,type:U.type,key:z,ref:U.ref,props:U.props,_owner:U._owner}}function j(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function D(U){var z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(oe){return z[oe]})}var V=/\/+/g;function N(U,z){return typeof U=="object"&&U!==null&&U.key!=null?D(""+U.key):z.toString(36)}function Ve(U,z,oe,de,ke){var Se=typeof U;(Se==="undefined"||Se==="boolean")&&(U=null);var Ee=!1;if(U===null)Ee=!0;else switch(Se){case"string":case"number":Ee=!0;break;case"object":switch(U.$$typeof){case t:case e:Ee=!0}}if(Ee)return Ee=U,ke=ke(Ee),U=de===""?"."+N(Ee,0):de,Y(ke)?(oe="",U!=null&&(oe=U.replace(V,"$&/")+"/"),Ve(ke,z,oe,"",function(Ce){return Ce})):ke!=null&&(j(ke)&&(ke=A(ke,oe+(!ke.key||Ee&&Ee.key===ke.key?"":(""+ke.key).replace(V,"$&/")+"/")+U)),z.push(ke)),1;if(Ee=0,de=de===""?".":de+":",Y(U))for(var Le=0;Le<U.length;Le++){Se=U[Le];var Fe=de+N(Se,Le);Ee+=Ve(Se,z,oe,Fe,ke)}else if(Fe=b(U),typeof Fe=="function")for(U=Fe.call(U),Le=0;!(Se=U.next()).done;)Se=Se.value,Fe=de+N(Se,Le++),Ee+=Ve(Se,z,oe,Fe,ke);else if(Se==="object")throw z=String(U),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return Ee}function rt(U,z,oe){if(U==null)return U;var de=[],ke=0;return Ve(U,de,"","",function(Se){return z.call(oe,Se,ke++)}),de}function Ge(U){if(U._status===-1){var z=U._result;z=z(),z.then(function(oe){(U._status===0||U._status===-1)&&(U._status=1,U._result=oe)},function(oe){(U._status===0||U._status===-1)&&(U._status=2,U._result=oe)}),U._status===-1&&(U._status=0,U._result=z)}if(U._status===1)return U._result.default;throw U._result}var Te={current:null},Z={transition:null},fe={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:Z,ReactCurrentOwner:te};function ce(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:rt,forEach:function(U,z,oe){rt(U,function(){z.apply(this,arguments)},oe)},count:function(U){var z=0;return rt(U,function(){z++}),z},toArray:function(U){return rt(U,function(z){return z})||[]},only:function(U){if(!j(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},$e.Component=P,$e.Fragment=n,$e.Profiler=s,$e.PureComponent=q,$e.StrictMode=r,$e.Suspense=f,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,$e.act=ce,$e.cloneElement=function(U,z,oe){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var de=O({},U.props),ke=U.key,Se=U.ref,Ee=U._owner;if(z!=null){if(z.ref!==void 0&&(Se=z.ref,Ee=te.current),z.key!==void 0&&(ke=""+z.key),U.type&&U.type.defaultProps)var Le=U.type.defaultProps;for(Fe in z)J.call(z,Fe)&&!C.hasOwnProperty(Fe)&&(de[Fe]=z[Fe]===void 0&&Le!==void 0?Le[Fe]:z[Fe])}var Fe=arguments.length-2;if(Fe===1)de.children=oe;else if(1<Fe){Le=Array(Fe);for(var Ce=0;Ce<Fe;Ce++)Le[Ce]=arguments[Ce+2];de.children=Le}return{$$typeof:t,type:U.type,key:ke,ref:Se,props:de,_owner:Ee}},$e.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},$e.createElement=I,$e.createFactory=function(U){var z=I.bind(null,U);return z.type=U,z},$e.createRef=function(){return{current:null}},$e.forwardRef=function(U){return{$$typeof:d,render:U}},$e.isValidElement=j,$e.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:Ge}},$e.memo=function(U,z){return{$$typeof:p,type:U,compare:z===void 0?null:z}},$e.startTransition=function(U){var z=Z.transition;Z.transition={};try{U()}finally{Z.transition=z}},$e.unstable_act=ce,$e.useCallback=function(U,z){return Te.current.useCallback(U,z)},$e.useContext=function(U){return Te.current.useContext(U)},$e.useDebugValue=function(){},$e.useDeferredValue=function(U){return Te.current.useDeferredValue(U)},$e.useEffect=function(U,z){return Te.current.useEffect(U,z)},$e.useId=function(){return Te.current.useId()},$e.useImperativeHandle=function(U,z,oe){return Te.current.useImperativeHandle(U,z,oe)},$e.useInsertionEffect=function(U,z){return Te.current.useInsertionEffect(U,z)},$e.useLayoutEffect=function(U,z){return Te.current.useLayoutEffect(U,z)},$e.useMemo=function(U,z){return Te.current.useMemo(U,z)},$e.useReducer=function(U,z,oe){return Te.current.useReducer(U,z,oe)},$e.useRef=function(U){return Te.current.useRef(U)},$e.useState=function(U){return Te.current.useState(U)},$e.useSyncExternalStore=function(U,z,oe){return Te.current.useSyncExternalStore(U,z,oe)},$e.useTransition=function(){return Te.current.useTransition()},$e.version="18.3.1",$e}var Yv;function xg(){return Yv||(Yv=1,am.exports=MT()),am.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function LT(){if(Xv)return xu;Xv=1;var t=xg(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,f,p){var v,w={},b=null,E=null;p!==void 0&&(b=""+p),f.key!==void 0&&(b=""+f.key),f.ref!==void 0&&(E=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(w[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:d,key:b,ref:E,props:w,_owner:s.current}}return xu.Fragment=n,xu.jsx=l,xu.jsxs=l,xu}var e_;function VT(){return e_||(e_=1,om.exports=LT()),om.exports}var g=VT(),Gh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},FT={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Mi,wg,Tx,zT=(Tx=class{constructor(){qe(this,Mi,FT);qe(this,wg,!1)}setTimeoutProvider(t){De(this,Mi,t)}setTimeout(t,e){return X(this,Mi).setTimeout(t,e)}clearTimeout(t){X(this,Mi).clearTimeout(t)}setInterval(t,e){return X(this,Mi).setInterval(t,e)}clearInterval(t){X(this,Mi).clearInterval(t)}},Mi=new WeakMap,wg=new WeakMap,Tx),Dm=new zT;function UT(t){setTimeout(t,0)}var Qh=typeof window>"u"||"Deno"in globalThis;function Kr(){}function $T(t,e){return typeof t=="function"?t(e):t}function BT(t){return typeof t=="number"&&t>=0&&t!==1/0}function WT(t,e){return Math.max(t+(e||0)-Date.now(),0)}function jm(t,e){return typeof t=="function"?t(e):t}function qT(t,e){return typeof t=="function"?t(e):t}function t_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:d}=t;if(l){if(r){if(e.queryHash!==bg(l,e.options))return!1}else if(!zu(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||s&&s!==e.state.fetchStatus||a&&!a(e))}function n_(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Fu(e.options.mutationKey)!==Fu(a))return!1}else if(!zu(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function bg(t,e){return((e==null?void 0:e.queryKeyHashFn)||Fu)(t)}function Fu(t){return JSON.stringify(t,(e,n)=>Om(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function zu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>zu(t[n],e[n])):!1}var HT=Object.prototype.hasOwnProperty;function Mx(t,e){if(t===e)return t;const n=r_(t)&&r_(e);if(!n&&!(Om(t)&&Om(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,d=n?new Array(l):{};let f=0;for(let p=0;p<l;p++){const v=n?p:a[p],w=t[v],b=e[v];if(w===b){d[v]=w,(n?p<s:HT.call(t,v))&&f++;continue}if(w===null||b===null||typeof w!="object"||typeof b!="object"){d[v]=b;continue}const E=Mx(w,b);d[v]=E,E===w&&f++}return s===l&&f===s?t:d}function r_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Om(t){if(!s_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!s_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function s_(t){return Object.prototype.toString.call(t)==="[object Object]"}function KT(t){return new Promise(e=>{Dm.setTimeout(e,t)})}function GT(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Mx(t,e):e}function QT(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function ZT(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var kg=Symbol();function Lx(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===kg?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function JT(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var zo,Li,al,Sx,YT=(Sx=class extends Gh{constructor(){super();qe(this,zo);qe(this,Li);qe(this,al);De(this,al,e=>{if(!Qh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){X(this,Li)||this.setEventListener(X(this,al))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,Li))==null||e.call(this),De(this,Li,void 0))}setEventListener(e){var n;De(this,al,e),(n=X(this,Li))==null||n.call(this),De(this,Li,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){X(this,zo)!==e&&(De(this,zo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof X(this,zo)=="boolean"?X(this,zo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},zo=new WeakMap,Li=new WeakMap,al=new WeakMap,Sx),Vx=new YT;function XT(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var eS=UT;function tS(){let t=[],e=0,n=d=>{d()},r=d=>{d()},s=eS;const a=d=>{e?t.push(d):s(()=>{n(d)})},l=()=>{const d=t;t=[],d.length&&s(()=>{r(()=>{d.forEach(f=>{n(f)})})})};return{batch:d=>{let f;e++;try{f=d()}finally{e--,e||l()}return f},batchCalls:d=>(...f)=>{a(()=>{d(...f)})},schedule:a,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:d=>{s=d}}}var Ln=tS(),ll,Vi,ul,Cx,nS=(Cx=class extends Gh{constructor(){super();qe(this,ll,!0);qe(this,Vi);qe(this,ul);De(this,ul,e=>{if(!Qh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){X(this,Vi)||this.setEventListener(X(this,ul))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,Vi))==null||e.call(this),De(this,Vi,void 0))}setEventListener(e){var n;De(this,ul,e),(n=X(this,Vi))==null||n.call(this),De(this,Vi,e(this.setOnline.bind(this)))}setOnline(e){X(this,ll)!==e&&(De(this,ll,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return X(this,ll)}},ll=new WeakMap,Vi=new WeakMap,ul=new WeakMap,Cx),xh=new nS;function rS(t){return Math.min(1e3*2**t,3e4)}function Fx(t){return(t??"online")==="online"?xh.isOnline():!0}var Mm=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function zx(t){let e=!1,n=0,r;const s=XT(),a=()=>s.status!=="pending",l=S=>{var P;if(!a()){const B=new Mm(S);b(B),(P=t.onCancel)==null||P.call(t,B)}},d=()=>{e=!0},f=()=>{e=!1},p=()=>Vx.isFocused()&&(t.networkMode==="always"||xh.isOnline())&&t.canRun(),v=()=>Fx(t.networkMode)&&t.canRun(),w=S=>{a()||(r==null||r(),s.resolve(S))},b=S=>{a()||(r==null||r(),s.reject(S))},E=()=>new Promise(S=>{var P;r=B=>{(a()||p())&&S(B)},(P=t.onPause)==null||P.call(t)}).then(()=>{var S;r=void 0,a()||(S=t.onContinue)==null||S.call(t)}),O=()=>{if(a())return;let S;const P=n===0?t.initialPromise:void 0;try{S=P??t.fn()}catch(B){S=Promise.reject(B)}Promise.resolve(S).then(w).catch(B=>{var te;if(a())return;const q=t.retry??(Qh?0:3),K=t.retryDelay??rS,Y=typeof K=="function"?K(n,B):K,J=q===!0||typeof q=="number"&&n<q||typeof q=="function"&&q(n,B);if(e||!J){b(B);return}n++,(te=t.onFail)==null||te.call(t,n,B),KT(Y).then(()=>p()?void 0:E()).then(()=>{e?b(B):O()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r==null||r(),s),cancelRetry:d,continueRetry:f,canStart:v,start:()=>(v()?O():E().then(O),s)}}var Uo,Ax,Ux=(Ax=class{constructor(){qe(this,Uo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),BT(this.gcTime)&&De(this,Uo,Dm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Qh?1/0:300*1e3))}clearGcTimeout(){X(this,Uo)&&(Dm.clearTimeout(X(this,Uo)),De(this,Uo,void 0))}},Uo=new WeakMap,Ax),$o,cl,Er,Bo,rn,sc,Wo,Gr,$s,Rx,sS=(Rx=class extends Ux{constructor(n){super();qe(this,Gr);qe(this,$o);qe(this,cl);qe(this,Er);qe(this,Bo);qe(this,rn);qe(this,sc);qe(this,Wo);De(this,Wo,!1),De(this,sc,n.defaultOptions),this.setOptions(n.options),this.observers=[],De(this,Bo,n.client),De(this,Er,X(this,Bo).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,De(this,$o,o_(this.options)),this.state=n.state??X(this,$o),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=X(this,rn))==null?void 0:n.promise}setOptions(n){if(this.options={...X(this,sc),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=o_(this.options);r.data!==void 0&&(this.setState(i_(r.data,r.dataUpdatedAt)),De(this,$o,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&X(this,Er).remove(this)}setData(n,r){const s=GT(this.state.data,n,this.options);return En(this,Gr,$s).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){En(this,Gr,$s).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=X(this,rn))==null?void 0:s.promise;return(a=X(this,rn))==null||a.cancel(n),r?r.then(Kr).catch(Kr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(X(this,$o))}isActive(){return this.observers.some(n=>qT(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===kg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>jm(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!WT(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=X(this,rn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=X(this,rn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),X(this,Er).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(X(this,rn)&&(X(this,Wo)?X(this,rn).cancel({revert:!0}):X(this,rn).cancelRetry()),this.scheduleGc()),X(this,Er).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||En(this,Gr,$s).call(this,{type:"invalidate"})}async fetch(n,r){var p,v,w,b,E,O,S,P,B,q,K,Y;if(this.state.fetchStatus!=="idle"&&((p=X(this,rn))==null?void 0:p.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(X(this,rn))return X(this,rn).continueRetry(),X(this,rn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const J=this.observers.find(te=>te.options.queryFn);J&&this.setOptions(J.options)}const s=new AbortController,a=J=>{Object.defineProperty(J,"signal",{enumerable:!0,get:()=>(De(this,Wo,!0),s.signal)})},l=()=>{const J=Lx(this.options,r),C=(()=>{const I={client:X(this,Bo),queryKey:this.queryKey,meta:this.meta};return a(I),I})();return De(this,Wo,!1),this.options.persister?this.options.persister(J,C,this):J(C)},f=(()=>{const J={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:X(this,Bo),state:this.state,fetchFn:l};return a(J),J})();(v=this.options.behavior)==null||v.onFetch(f,this),De(this,cl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((w=f.fetchOptions)==null?void 0:w.meta))&&En(this,Gr,$s).call(this,{type:"fetch",meta:(b=f.fetchOptions)==null?void 0:b.meta}),De(this,rn,zx({initialPromise:r==null?void 0:r.initialPromise,fn:f.fetchFn,onCancel:J=>{J instanceof Mm&&J.revert&&this.setState({...X(this,cl),fetchStatus:"idle"}),s.abort()},onFail:(J,te)=>{En(this,Gr,$s).call(this,{type:"failed",failureCount:J,error:te})},onPause:()=>{En(this,Gr,$s).call(this,{type:"pause"})},onContinue:()=>{En(this,Gr,$s).call(this,{type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0}));try{const J=await X(this,rn).start();if(J===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(J),(O=(E=X(this,Er).config).onSuccess)==null||O.call(E,J,this),(P=(S=X(this,Er).config).onSettled)==null||P.call(S,J,this.state.error,this),J}catch(J){if(J instanceof Mm){if(J.silent)return X(this,rn).promise;if(J.revert){if(this.state.data===void 0)throw J;return this.state.data}}throw En(this,Gr,$s).call(this,{type:"error",error:J}),(q=(B=X(this,Er).config).onError)==null||q.call(B,J,this),(Y=(K=X(this,Er).config).onSettled)==null||Y.call(K,this.state.data,J,this),J}finally{this.scheduleGc()}}},$o=new WeakMap,cl=new WeakMap,Er=new WeakMap,Bo=new WeakMap,rn=new WeakMap,sc=new WeakMap,Wo=new WeakMap,Gr=new WeakSet,$s=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...iS(s.data,this.options),fetchMeta:n.meta??null};case"success":const a={...s,...i_(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return De(this,cl,n.manual?a:void 0),a;case"error":const l=n.error;return{...s,error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Ln.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),X(this,Er).notify({query:this,type:"updated",action:n})})},Rx);function iS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Fx(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function i_(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function o_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function a_(t){return{onFetch:(e,n)=>{var v,w,b,E,O;const r=e.options,s=(b=(w=(v=e.fetchOptions)==null?void 0:v.meta)==null?void 0:w.fetchMore)==null?void 0:b.direction,a=((E=e.state.data)==null?void 0:E.pages)||[],l=((O=e.state.data)==null?void 0:O.pageParams)||[];let d={pages:[],pageParams:[]},f=0;const p=async()=>{let S=!1;const P=K=>{JT(K,()=>e.signal,()=>S=!0)},B=Lx(e.options,e.fetchOptions),q=async(K,Y,J)=>{if(S)return Promise.reject();if(Y==null&&K.pages.length)return Promise.resolve(K);const C=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:Y,direction:J?"backward":"forward",meta:e.options.meta};return P(D),D})(),I=await B(C),{maxPages:A}=e.options,j=J?ZT:QT;return{pages:j(K.pages,I,A),pageParams:j(K.pageParams,Y,A)}};if(s&&a.length){const K=s==="backward",Y=K?oS:l_,J={pages:a,pageParams:l},te=Y(r,J);d=await q(J,te,K)}else{const K=t??a.length;do{const Y=f===0?l[0]??r.initialPageParam:l_(r,d);if(f>0&&Y==null)break;d=await q(d,Y),f++}while(f<K)}return d};e.options.persister?e.fetchFn=()=>{var S,P;return(P=(S=e.options).persister)==null?void 0:P.call(S,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=p}}}function l_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function oS(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ic,fs,Mn,qo,ps,Ri,Nx,aS=(Nx=class extends Ux{constructor(n){super();qe(this,ps);qe(this,ic);qe(this,fs);qe(this,Mn);qe(this,qo);De(this,ic,n.client),this.mutationId=n.mutationId,De(this,Mn,n.mutationCache),De(this,fs,[]),this.state=n.state||lS(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){X(this,fs).includes(n)||(X(this,fs).push(n),this.clearGcTimeout(),X(this,Mn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){De(this,fs,X(this,fs).filter(r=>r!==n)),this.scheduleGc(),X(this,Mn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){X(this,fs).length||(this.state.status==="pending"?this.scheduleGc():X(this,Mn).remove(this))}continue(){var n;return((n=X(this,qo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var d,f,p,v,w,b,E,O,S,P,B,q,K,Y,J,te,C,I,A,j;const r=()=>{En(this,ps,Ri).call(this,{type:"continue"})},s={client:X(this,ic),meta:this.options.meta,mutationKey:this.options.mutationKey};De(this,qo,zx({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(D,V)=>{En(this,ps,Ri).call(this,{type:"failed",failureCount:D,error:V})},onPause:()=>{En(this,ps,Ri).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>X(this,Mn).canRun(this)}));const a=this.state.status==="pending",l=!X(this,qo).canStart();try{if(a)r();else{En(this,ps,Ri).call(this,{type:"pending",variables:n,isPaused:l}),await((f=(d=X(this,Mn).config).onMutate)==null?void 0:f.call(d,n,this,s));const V=await((v=(p=this.options).onMutate)==null?void 0:v.call(p,n,s));V!==this.state.context&&En(this,ps,Ri).call(this,{type:"pending",context:V,variables:n,isPaused:l})}const D=await X(this,qo).start();return await((b=(w=X(this,Mn).config).onSuccess)==null?void 0:b.call(w,D,n,this.state.context,this,s)),await((O=(E=this.options).onSuccess)==null?void 0:O.call(E,D,n,this.state.context,s)),await((P=(S=X(this,Mn).config).onSettled)==null?void 0:P.call(S,D,null,this.state.variables,this.state.context,this,s)),await((q=(B=this.options).onSettled)==null?void 0:q.call(B,D,null,n,this.state.context,s)),En(this,ps,Ri).call(this,{type:"success",data:D}),D}catch(D){try{await((Y=(K=X(this,Mn).config).onError)==null?void 0:Y.call(K,D,n,this.state.context,this,s))}catch(V){Promise.reject(V)}try{await((te=(J=this.options).onError)==null?void 0:te.call(J,D,n,this.state.context,s))}catch(V){Promise.reject(V)}try{await((I=(C=X(this,Mn).config).onSettled)==null?void 0:I.call(C,void 0,D,this.state.variables,this.state.context,this,s))}catch(V){Promise.reject(V)}try{await((j=(A=this.options).onSettled)==null?void 0:j.call(A,void 0,D,n,this.state.context,s))}catch(V){Promise.reject(V)}throw En(this,ps,Ri).call(this,{type:"error",error:D}),D}finally{X(this,Mn).runNext(this)}}},ic=new WeakMap,fs=new WeakMap,Mn=new WeakMap,qo=new WeakMap,ps=new WeakSet,Ri=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ln.batch(()=>{X(this,fs).forEach(s=>{s.onMutationUpdate(n)}),X(this,Mn).notify({mutation:this,type:"updated",action:n})})},Nx);function lS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bs,Qr,oc,Px,uS=(Px=class extends Gh{constructor(e={}){super();qe(this,Bs);qe(this,Qr);qe(this,oc);this.config=e,De(this,Bs,new Set),De(this,Qr,new Map),De(this,oc,0)}build(e,n,r){const s=new aS({client:e,mutationCache:this,mutationId:++Fd(this,oc)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){X(this,Bs).add(e);const n=zd(e);if(typeof n=="string"){const r=X(this,Qr).get(n);r?r.push(e):X(this,Qr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(X(this,Bs).delete(e)){const n=zd(e);if(typeof n=="string"){const r=X(this,Qr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&X(this,Qr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=zd(e);if(typeof n=="string"){const r=X(this,Qr).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=zd(e);if(typeof n=="string"){const s=(r=X(this,Qr).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ln.batch(()=>{X(this,Bs).forEach(e=>{this.notify({type:"removed",mutation:e})}),X(this,Bs).clear(),X(this,Qr).clear()})}getAll(){return Array.from(X(this,Bs))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>n_(n,r))}findAll(e={}){return this.getAll().filter(n=>n_(e,n))}notify(e){Ln.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ln.batch(()=>Promise.all(e.map(n=>n.continue().catch(Kr))))}},Bs=new WeakMap,Qr=new WeakMap,oc=new WeakMap,Px);function zd(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ms,Dx,cS=(Dx=class extends Gh{constructor(e={}){super();qe(this,ms);this.config=e,De(this,ms,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??bg(s,n);let l=this.get(a);return l||(l=new sS({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){X(this,ms).has(e.queryHash)||(X(this,ms).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=X(this,ms).get(e.queryHash);n&&(e.destroy(),n===e&&X(this,ms).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ln.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return X(this,ms).get(e)}getAll(){return[...X(this,ms).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>t_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>t_(e,r)):n}notify(e){Ln.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ln.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ln.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ms=new WeakMap,Dx),Nt,Fi,zi,dl,hl,Ui,fl,pl,jx,dS=(jx=class{constructor(t={}){qe(this,Nt);qe(this,Fi);qe(this,zi);qe(this,dl);qe(this,hl);qe(this,Ui);qe(this,fl);qe(this,pl);De(this,Nt,t.queryCache||new cS),De(this,Fi,t.mutationCache||new uS),De(this,zi,t.defaultOptions||{}),De(this,dl,new Map),De(this,hl,new Map),De(this,Ui,0)}mount(){Fd(this,Ui)._++,X(this,Ui)===1&&(De(this,fl,Vx.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,Nt).onFocus())})),De(this,pl,xh.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,Nt).onOnline())})))}unmount(){var t,e;Fd(this,Ui)._--,X(this,Ui)===0&&((t=X(this,fl))==null||t.call(this),De(this,fl,void 0),(e=X(this,pl))==null||e.call(this),De(this,pl,void 0))}isFetching(t){return X(this,Nt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return X(this,Fi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,Nt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=X(this,Nt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(jm(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return X(this,Nt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=X(this,Nt).get(r.queryHash),a=s==null?void 0:s.state.data,l=$T(e,a);if(l!==void 0)return X(this,Nt).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Ln.batch(()=>X(this,Nt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,Nt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=X(this,Nt);Ln.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=X(this,Nt);return Ln.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Ln.batch(()=>X(this,Nt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Kr).catch(Kr)}invalidateQueries(t,e={}){return Ln.batch(()=>(X(this,Nt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Ln.batch(()=>X(this,Nt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Kr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Kr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=X(this,Nt).build(this,e);return n.isStaleByTime(jm(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Kr).catch(Kr)}fetchInfiniteQuery(t){return t.behavior=a_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Kr).catch(Kr)}ensureInfiniteQueryData(t){return t.behavior=a_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return xh.isOnline()?X(this,Fi).resumePausedMutations():Promise.resolve()}getQueryCache(){return X(this,Nt)}getMutationCache(){return X(this,Fi)}getDefaultOptions(){return X(this,zi)}setDefaultOptions(t){De(this,zi,t)}setQueryDefaults(t,e){X(this,dl).set(Fu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...X(this,dl).values()],n={};return e.forEach(r=>{zu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){X(this,hl).set(Fu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...X(this,hl).values()],n={};return e.forEach(r=>{zu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...X(this,zi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=bg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===kg&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...X(this,zi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){X(this,Nt).clear(),X(this,Fi).clear()}},Nt=new WeakMap,Fi=new WeakMap,zi=new WeakMap,dl=new WeakMap,hl=new WeakMap,Ui=new WeakMap,fl=new WeakMap,pl=new WeakMap,jx),M=xg();const nt=Ox(M);var hS=M.createContext(void 0),fS=({client:t,children:e})=>(M.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),g.jsx(hS.Provider,{value:t,children:e})),Ud={},lm={exports:{}},Qn={},um={exports:{}},cm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function pS(){return u_||(u_=1,(function(t){function e(Z,fe){var ce=Z.length;Z.push(fe);e:for(;0<ce;){var U=ce-1>>>1,z=Z[U];if(0<s(z,fe))Z[U]=fe,Z[ce]=z,ce=U;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var fe=Z[0],ce=Z.pop();if(ce!==fe){Z[0]=ce;e:for(var U=0,z=Z.length,oe=z>>>1;U<oe;){var de=2*(U+1)-1,ke=Z[de],Se=de+1,Ee=Z[Se];if(0>s(ke,ce))Se<z&&0>s(Ee,ke)?(Z[U]=Ee,Z[Se]=ce,U=Se):(Z[U]=ke,Z[de]=ce,U=de);else if(Se<z&&0>s(Ee,ce))Z[U]=Ee,Z[Se]=ce,U=Se;else break e}}return fe}function s(Z,fe){var ce=Z.sortIndex-fe.sortIndex;return ce!==0?ce:Z.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var f=[],p=[],v=1,w=null,b=3,E=!1,O=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Z){for(var fe=n(p);fe!==null;){if(fe.callback===null)r(p);else if(fe.startTime<=Z)r(p),fe.sortIndex=fe.expirationTime,e(f,fe);else break;fe=n(p)}}function Y(Z){if(S=!1,K(Z),!O)if(n(f)!==null)O=!0,Ge(J);else{var fe=n(p);fe!==null&&Te(Y,fe.startTime-Z)}}function J(Z,fe){O=!1,S&&(S=!1,B(I),I=-1),E=!0;var ce=b;try{for(K(fe),w=n(f);w!==null&&(!(w.expirationTime>fe)||Z&&!D());){var U=w.callback;if(typeof U=="function"){w.callback=null,b=w.priorityLevel;var z=U(w.expirationTime<=fe);fe=t.unstable_now(),typeof z=="function"?w.callback=z:w===n(f)&&r(f),K(fe)}else r(f);w=n(f)}if(w!==null)var oe=!0;else{var de=n(p);de!==null&&Te(Y,de.startTime-fe),oe=!1}return oe}finally{w=null,b=ce,E=!1}}var te=!1,C=null,I=-1,A=5,j=-1;function D(){return!(t.unstable_now()-j<A)}function V(){if(C!==null){var Z=t.unstable_now();j=Z;var fe=!0;try{fe=C(!0,Z)}finally{fe?N():(te=!1,C=null)}}else te=!1}var N;if(typeof q=="function")N=function(){q(V)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,rt=Ve.port2;Ve.port1.onmessage=V,N=function(){rt.postMessage(null)}}else N=function(){P(V,0)};function Ge(Z){C=Z,te||(te=!0,N())}function Te(Z,fe){I=P(function(){Z(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){O||E||(O=!0,Ge(J))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(Z){switch(b){case 1:case 2:case 3:var fe=3;break;default:fe=b}var ce=b;b=fe;try{return Z()}finally{b=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,fe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ce=b;b=Z;try{return fe()}finally{b=ce}},t.unstable_scheduleCallback=function(Z,fe,ce){var U=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?U+ce:U):ce=U,Z){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ce+z,Z={id:v++,callback:fe,priorityLevel:Z,startTime:ce,expirationTime:z,sortIndex:-1},ce>U?(Z.sortIndex=ce,e(p,Z),n(f)===null&&Z===n(p)&&(S?(B(I),I=-1):S=!0,Te(Y,ce-U))):(Z.sortIndex=z,e(f,Z),O||E||(O=!0,Ge(J))),Z},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(Z){var fe=b;return function(){var ce=b;b=fe;try{return Z.apply(this,arguments)}finally{b=ce}}}})(cm)),cm}var c_;function mS(){return c_||(c_=1,um.exports=pS()),um.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function gS(){if(d_)return Qn;d_=1;var t=xg(),e=mS();function n(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function b(i){return f.call(w,i)?!0:f.call(v,i)?!1:p.test(i)?w[i]=!0:(v[i]=!0,!1)}function E(i,o,u,h){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function O(i,o,u,h){if(o===null||typeof o>"u"||E(i,o,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(i,o,u,h,m,_,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=_,this.removeEmptyString=k}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];P[o]=new S(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(B,q);P[o]=new S(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(B,q);P[o]=new S(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(B,q);P[o]=new S(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function K(i,o,u,h){var m=P.hasOwnProperty(o)?P[o]:null;(m!==null?m.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(O(o,u,m,h)&&(u=null),h||m===null?b(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,h=m.attributeNamespace,u===null?i.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,h?i.setAttributeNS(h,o,u):i.setAttribute(o,u))))}var Y=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),te=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),Z=Symbol.iterator;function fe(i){return i===null||typeof i!="object"?null:(i=Z&&i[Z]||i["@@iterator"],typeof i=="function"?i:null)}var ce=Object.assign,U;function z(i){if(U===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var oe=!1;function de(i,o){if(!i||oe)return"";oe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(G){var h=G}Reflect.construct(i,[],o)}else{try{o.call()}catch(G){h=G}i.call(o.prototype)}else{try{throw Error()}catch(G){h=G}i()}}catch(G){if(G&&h&&typeof G.stack=="string"){for(var m=G.stack.split(`
`),_=h.stack.split(`
`),k=m.length-1,R=_.length-1;1<=k&&0<=R&&m[k]!==_[R];)R--;for(;1<=k&&0<=R;k--,R--)if(m[k]!==_[R]){if(k!==1||R!==1)do if(k--,R--,0>R||m[k]!==_[R]){var L=`
`+m[k].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=k&&0<=R);break}}}finally{oe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?z(i):""}function ke(i){switch(i.tag){case 5:return z(i.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return i=de(i.type,!1),i;case 11:return i=de(i.type.render,!1),i;case 1:return i=de(i.type,!0),i;default:return""}}function Se(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case te:return"Portal";case A:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case Ve:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case D:return(i.displayName||"Context")+".Consumer";case j:return(i._context.displayName||"Context")+".Provider";case V:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case rt:return o=i.displayName||null,o!==null?o:Se(i.type)||"Memo";case Ge:o=i._payload,i=i._init;try{return Se(i(o))}catch{}}return null}function Ee(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Se(o);case 8:return o===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Le(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Fe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ce(i){var o=Fe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,_=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(k){h=""+k,_.call(this,k)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(k){h=""+k},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Wt(i){i._valueTracker||(i._valueTracker=Ce(i))}function Ct(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return i&&(h=Fe(i)?i.checked?"true":"false":i.value),i=h,i!==u?(o.setValue(i),!0):!1}function An(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ln(i,o){var u=o.checked;return ce({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function tr(i,o){var u=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;u=Le(o.value!=null?o.value:u),i._wrapperState={initialChecked:h,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function hr(i,o){o=o.checked,o!=null&&K(i,"checked",o,!1)}function ti(i,o){hr(i,o);var u=Le(o.value),h=o.type;if(u!=null)h==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?es(i,o.type,u):o.hasOwnProperty("defaultValue")&&es(i,o.type,Le(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function uo(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function es(i,o,u){(o!=="number"||An(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Yt=Array.isArray;function Fn(i,o,u,h){if(i=i.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=o.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&h&&(i[u].defaultSelected=!0)}else{for(u=""+Le(u),o=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,h&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function ts(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return ce({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Is(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(n(92));if(Yt(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Le(u)}}function Ts(i,o){var u=Le(o.value),h=Le(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),h!=null&&(i.defaultValue=""+h)}function co(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Dt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Dt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var vn,Nr=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,h,m){MSApp.execUnsafeLocalFunction(function(){return i(o,u,h,m)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(vn=vn||document.createElement("div"),vn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=vn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Pr(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var _n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ns=["Webkit","ms","Moz","O"];Object.keys(_n).forEach(function(i){ns.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),_n[o]=_n[i]})});function ho(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||_n.hasOwnProperty(i)&&_n[i]?(""+o).trim():o+"px"}function fo(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var h=u.indexOf("--")===0,m=ho(u,o[u],h);u==="float"&&(u="cssFloat"),h?i.setProperty(u,m):i[u]=m}}var Ss=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ni(i,o){if(o){if(Ss[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function po(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rs=null;function ri(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var si=null,zn=null,ot=null;function Mt(i){if(i=ou(i)){if(typeof si!="function")throw Error(n(280));var o=i.stateNode;o&&(o=ed(o),si(i.stateNode,i.type,o))}}function yt(i){zn?ot?ot.push(i):ot=[i]:zn=i}function Un(){if(zn){var i=zn,o=ot;if(ot=zn=null,Mt(i),o)for(i=0;i<o.length;i++)Mt(o[i])}}function Lt(i,o){return i(o)}function qt(){}var Vt=!1;function fr(i,o,u){if(Vt)return i(o,u);Vt=!0;try{return Lt(i,o,u)}finally{Vt=!1,(zn!==null||ot!==null)&&(qt(),Un())}}function ze(i,o){var u=i.stateNode;if(u===null)return null;var h=ed(u);if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Rn=!1;if(d)try{var At={};Object.defineProperty(At,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",At,At),window.removeEventListener("test",At,At)}catch{Rn=!1}function un(i,o,u,h,m,_,k,R,L){var G=Array.prototype.slice.call(arguments,3);try{o.apply(u,G)}catch(se){this.onError(se)}}var nr=!1,pr=null,Ft=!1,Dr=null,mo={onError:function(i){nr=!0,pr=i}};function aa(i,o,u,h,m,_,k,R,L){nr=!1,pr=null,un.apply(mo,arguments)}function Ic(i,o,u,h,m,_,k,R,L){if(aa.apply(this,arguments),nr){if(nr){var G=pr;nr=!1,pr=null}else throw Error(n(198));Ft||(Ft=!0,Dr=G)}}function jr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function go(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Or(i){if(jr(i)!==i)throw Error(n(188))}function Tc(i){var o=i.alternate;if(!o){if(o=jr(i),o===null)throw Error(n(188));return o!==i?null:i}for(var u=i,h=o;;){var m=u.return;if(m===null)break;var _=m.alternate;if(_===null){if(h=m.return,h!==null){u=h;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===u)return Or(m),i;if(_===h)return Or(m),o;_=_.sibling}throw Error(n(188))}if(u.return!==h.return)u=m,h=_;else{for(var k=!1,R=m.child;R;){if(R===u){k=!0,u=m,h=_;break}if(R===h){k=!0,h=m,u=_;break}R=R.sibling}if(!k){for(R=_.child;R;){if(R===u){k=!0,u=_,h=m;break}if(R===h){k=!0,h=_,u=m;break}R=R.sibling}if(!k)throw Error(n(189))}}if(u.alternate!==h)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:o}function Ul(i){return i=Tc(i),i!==null?la(i):null}function la(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=la(i);if(o!==null)return o;i=i.sibling}return null}var ua=e.unstable_scheduleCallback,$l=e.unstable_cancelCallback,Sc=e.unstable_shouldYield,jf=e.unstable_requestPaint,ut=e.unstable_now,Cc=e.unstable_getCurrentPriorityLevel,yo=e.unstable_ImmediatePriority,ii=e.unstable_UserBlockingPriority,mr=e.unstable_NormalPriority,Bl=e.unstable_LowPriority,Ac=e.unstable_IdlePriority,vo=null,rr=null;function Rc(i){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(vo,i,void 0,(i.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:Pc,Wl=Math.log,Nc=Math.LN2;function Pc(i){return i>>>=0,i===0?32:31-(Wl(i)/Nc|0)|0}var ca=64,da=4194304;function oi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function _o(i,o){var u=i.pendingLanes;if(u===0)return 0;var h=0,m=i.suspendedLanes,_=i.pingedLanes,k=u&268435455;if(k!==0){var R=k&~m;R!==0?h=oi(R):(_&=k,_!==0&&(h=oi(_)))}else k=u&~m,k!==0?h=oi(k):_!==0&&(h=oi(_));if(h===0)return 0;if(o!==0&&o!==h&&(o&m)===0&&(m=h&-h,_=o&-o,m>=_||m===16&&(_&4194240)!==0))return o;if((h&4)!==0&&(h|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)u=31-Nn(o),m=1<<u,h|=i[u],o&=~m;return h}function Of(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cs(i,o){for(var u=i.suspendedLanes,h=i.pingedLanes,m=i.expirationTimes,_=i.pendingLanes;0<_;){var k=31-Nn(_),R=1<<k,L=m[k];L===-1?((R&u)===0||(R&h)!==0)&&(m[k]=Of(R,o)):L<=o&&(i.expiredLanes|=R),_&=~R}}function sr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function wo(){var i=ca;return ca<<=1,(ca&4194240)===0&&(ca=64),i}function ai(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function li(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Nn(o),i[o]=u}function at(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-Nn(u),_=1<<m;o[m]=0,h[m]=-1,i[m]=-1,u&=~_}}function ui(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var h=31-Nn(u),m=1<<h;m&o|i[h]&o&&(i[h]|=o),u&=~m}}var We=0;function ci(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Dc,ha,jc,Oc,Mc,ql=!1,ss=[],cn=null,Mr=null,Lr=null,di=new Map,gr=new Map,is=[],Mf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lc(i,o){switch(i){case"focusin":case"focusout":cn=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":di.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":gr.delete(o.pointerId)}}function $n(i,o,u,h,m,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:_,targetContainers:[m]},o!==null&&(o=ou(o),o!==null&&ha(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function Lf(i,o,u,h,m){switch(o){case"focusin":return cn=$n(cn,i,o,u,h,m),!0;case"dragenter":return Mr=$n(Mr,i,o,u,h,m),!0;case"mouseover":return Lr=$n(Lr,i,o,u,h,m),!0;case"pointerover":var _=m.pointerId;return di.set(_,$n(di.get(_)||null,i,o,u,h,m)),!0;case"gotpointercapture":return _=m.pointerId,gr.set(_,$n(gr.get(_)||null,i,o,u,h,m)),!0}return!1}function Vc(i){var o=Io(i.target);if(o!==null){var u=jr(o);if(u!==null){if(o=u.tag,o===13){if(o=go(u),o!==null){i.blockedOn=o,Mc(i.priority,function(){jc(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function As(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=fa(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var h=new u.constructor(u.type,u);rs=h,u.target.dispatchEvent(h),rs=null}else return o=ou(u),o!==null&&ha(o),i.blockedOn=u,!1;o.shift()}return!0}function xo(i,o,u){As(i)&&u.delete(o)}function Fc(){ql=!1,cn!==null&&As(cn)&&(cn=null),Mr!==null&&As(Mr)&&(Mr=null),Lr!==null&&As(Lr)&&(Lr=null),di.forEach(xo),gr.forEach(xo)}function Vr(i,o){i.blockedOn===o&&(i.blockedOn=null,ql||(ql=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fc)))}function Fr(i){function o(m){return Vr(m,i)}if(0<ss.length){Vr(ss[0],i);for(var u=1;u<ss.length;u++){var h=ss[u];h.blockedOn===i&&(h.blockedOn=null)}}for(cn!==null&&Vr(cn,i),Mr!==null&&Vr(Mr,i),Lr!==null&&Vr(Lr,i),di.forEach(o),gr.forEach(o),u=0;u<is.length;u++)h=is[u],h.blockedOn===i&&(h.blockedOn=null);for(;0<is.length&&(u=is[0],u.blockedOn===null);)Vc(u),u.blockedOn===null&&is.shift()}var Rs=Y.ReactCurrentBatchConfig,hi=!0;function vt(i,o,u,h){var m=We,_=Rs.transition;Rs.transition=null;try{We=1,Hl(i,o,u,h)}finally{We=m,Rs.transition=_}}function Vf(i,o,u,h){var m=We,_=Rs.transition;Rs.transition=null;try{We=4,Hl(i,o,u,h)}finally{We=m,Rs.transition=_}}function Hl(i,o,u,h){if(hi){var m=fa(i,o,u,h);if(m===null)Qf(i,o,h,bo,u),Lc(i,h);else if(Lf(m,i,o,u,h))h.stopPropagation();else if(Lc(i,h),o&4&&-1<Mf.indexOf(i)){for(;m!==null;){var _=ou(m);if(_!==null&&Dc(_),_=fa(i,o,u,h),_===null&&Qf(i,o,h,bo,u),_===m)break;m=_}m!==null&&h.stopPropagation()}else Qf(i,o,h,null,u)}}var bo=null;function fa(i,o,u,h){if(bo=null,i=ri(h),i=Io(i),i!==null)if(o=jr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=go(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return bo=i,null}function Kl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cc()){case yo:return 1;case ii:return 4;case mr:case Bl:return 16;case Ac:return 536870912;default:return 16}default:return 16}}var ir=null,pa=null,Bn=null;function Gl(){if(Bn)return Bn;var i,o=pa,u=o.length,h,m="value"in ir?ir.value:ir.textContent,_=m.length;for(i=0;i<u&&o[i]===m[i];i++);var k=u-i;for(h=1;h<=k&&o[u-h]===m[_-h];h++);return Bn=m.slice(i,1<h?1-h:void 0)}function ma(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function os(){return!0}function Ql(){return!1}function dn(i){function o(u,h,m,_,k){this._reactName=u,this._targetInst=m,this.type=h,this.nativeEvent=_,this.target=k,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(u=i[R],this[R]=u?u(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?os:Ql,this.isPropagationStopped=Ql,this}return ce(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),o}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=dn(zr),as=ce({},zr,{view:0,detail:0}),Ff=dn(as),ya,Ns,fi,ko=ce({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ls,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==fi&&(fi&&i.type==="mousemove"?(ya=i.screenX-fi.screenX,Ns=i.screenY-fi.screenY):Ns=ya=0,fi=i),ya)},movementY:function(i){return"movementY"in i?i.movementY:Ns}}),va=dn(ko),Zl=ce({},ko,{dataTransfer:0}),zc=dn(Zl),_a=ce({},as,{relatedTarget:0}),wa=dn(_a),Uc=ce({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ps=dn(Uc),$c=ce({},zr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Bc=dn($c),Wc=ce({},zr,{data:0}),Jl=dn(Wc),xa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=qc[i])?!!o[i]:!1}function ls(){return Hc}var c=ce({},as,{key:function(i){if(i.key){var o=xa[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=ma(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Pn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ls,charCode:function(i){return i.type==="keypress"?ma(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ma(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),y=dn(c),x=ce({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=dn(x),$=ce({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ls}),Q=dn($),ue=ce({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),st=dn(ue),Ht=ce({},ko,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Qe=dn(Ht),Xt=[9,13,27,32],zt=d&&"CompositionEvent"in window,yr=null;d&&"documentMode"in document&&(yr=document.documentMode);var or=d&&"TextEvent"in window&&!yr,Eo=d&&(!zt||yr&&8<yr&&11>=yr),ba=" ",Wy=!1;function qy(i,o){switch(i){case"keyup":return Xt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ka=!1;function DI(i,o){switch(i){case"compositionend":return Hy(o);case"keypress":return o.which!==32?null:(Wy=!0,ba);case"textInput":return i=o.data,i===ba&&Wy?null:i;default:return null}}function jI(i,o){if(ka)return i==="compositionend"||!zt&&qy(i,o)?(i=Gl(),Bn=pa=ir=null,ka=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Eo&&o.locale!=="ko"?null:o.data;default:return null}}var OI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ky(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!OI[i.type]:o==="textarea"}function Gy(i,o,u,h){yt(h),o=Jc(o,"onChange"),0<o.length&&(u=new ga("onChange","change",null,u,h),i.push({event:u,listeners:o}))}var Yl=null,Xl=null;function MI(i){h0(i,0)}function Kc(i){var o=Ca(i);if(Ct(o))return i}function LI(i,o){if(i==="change")return o}var Qy=!1;if(d){var zf;if(d){var Uf="oninput"in document;if(!Uf){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),Uf=typeof Zy.oninput=="function"}zf=Uf}else zf=!1;Qy=zf&&(!document.documentMode||9<document.documentMode)}function Jy(){Yl&&(Yl.detachEvent("onpropertychange",Yy),Xl=Yl=null)}function Yy(i){if(i.propertyName==="value"&&Kc(Xl)){var o=[];Gy(o,Xl,i,ri(i)),fr(MI,o)}}function VI(i,o,u){i==="focusin"?(Jy(),Yl=o,Xl=u,Yl.attachEvent("onpropertychange",Yy)):i==="focusout"&&Jy()}function FI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Kc(Xl)}function zI(i,o){if(i==="click")return Kc(o)}function UI(i,o){if(i==="input"||i==="change")return Kc(o)}function $I(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Ur=typeof Object.is=="function"?Object.is:$I;function eu(i,o){if(Ur(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var m=u[h];if(!f.call(o,m)||!Ur(i[m],o[m]))return!1}return!0}function Xy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function e0(i,o){var u=Xy(i);i=0;for(var h;u;){if(u.nodeType===3){if(h=i+u.textContent.length,i<=o&&h>=o)return{node:u,offset:o-i};i=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Xy(u)}}function t0(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?t0(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function n0(){for(var i=window,o=An();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=An(i.document)}return o}function $f(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function BI(i){var o=n0(),u=i.focusedElem,h=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&t0(u.ownerDocument.documentElement,u)){if(h!==null&&$f(u)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,_=Math.min(h.start,m);h=h.end===void 0?_:Math.min(h.end,m),!i.extend&&_>h&&(m=h,h=_,_=m),m=e0(u,_);var k=e0(u,h);m&&k&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==k.node||i.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),i.removeAllRanges(),_>h?(i.addRange(o),i.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var WI=d&&"documentMode"in document&&11>=document.documentMode,Ea=null,Bf=null,tu=null,Wf=!1;function r0(i,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Wf||Ea==null||Ea!==An(h)||(h=Ea,"selectionStart"in h&&$f(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),tu&&eu(tu,h)||(tu=h,h=Jc(Bf,"onSelect"),0<h.length&&(o=new ga("onSelect","select",null,o,u),i.push({event:o,listeners:h}),o.target=Ea)))}function Gc(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Ia={animationend:Gc("Animation","AnimationEnd"),animationiteration:Gc("Animation","AnimationIteration"),animationstart:Gc("Animation","AnimationStart"),transitionend:Gc("Transition","TransitionEnd")},qf={},s0={};d&&(s0=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function Qc(i){if(qf[i])return qf[i];if(!Ia[i])return i;var o=Ia[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in s0)return qf[i]=o[u];return i}var i0=Qc("animationend"),o0=Qc("animationiteration"),a0=Qc("animationstart"),l0=Qc("transitionend"),u0=new Map,c0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pi(i,o){u0.set(i,o),a(o,[i])}for(var Hf=0;Hf<c0.length;Hf++){var Kf=c0[Hf],qI=Kf.toLowerCase(),HI=Kf[0].toUpperCase()+Kf.slice(1);pi(qI,"on"+HI)}pi(i0,"onAnimationEnd"),pi(o0,"onAnimationIteration"),pi(a0,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(l0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KI=new Set("cancel close invalid load scroll toggle".split(" ").concat(nu));function d0(i,o,u){var h=i.type||"unknown-event";i.currentTarget=u,Ic(h,o,void 0,i),i.currentTarget=null}function h0(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var h=i[u],m=h.event;h=h.listeners;e:{var _=void 0;if(o)for(var k=h.length-1;0<=k;k--){var R=h[k],L=R.instance,G=R.currentTarget;if(R=R.listener,L!==_&&m.isPropagationStopped())break e;d0(m,R,G),_=L}else for(k=0;k<h.length;k++){if(R=h[k],L=R.instance,G=R.currentTarget,R=R.listener,L!==_&&m.isPropagationStopped())break e;d0(m,R,G),_=L}}}if(Ft)throw i=Dr,Ft=!1,Dr=null,i}function ht(i,o){var u=o[tp];u===void 0&&(u=o[tp]=new Set);var h=i+"__bubble";u.has(h)||(f0(o,i,2,!1),u.add(h))}function Gf(i,o,u){var h=0;o&&(h|=4),f0(u,i,h,o)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function ru(i){if(!i[Zc]){i[Zc]=!0,r.forEach(function(u){u!=="selectionchange"&&(KI.has(u)||Gf(u,!1,i),Gf(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Zc]||(o[Zc]=!0,Gf("selectionchange",!1,o))}}function f0(i,o,u,h){switch(Kl(o)){case 1:var m=vt;break;case 4:m=Vf;break;default:m=Hl}u=m.bind(null,o,u,i),m=void 0,!Rn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),h?m!==void 0?i.addEventListener(o,u,{capture:!0,passive:m}):i.addEventListener(o,u,!0):m!==void 0?i.addEventListener(o,u,{passive:m}):i.addEventListener(o,u,!1)}function Qf(i,o,u,h,m){var _=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var k=h.tag;if(k===3||k===4){var R=h.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(k===4)for(k=h.return;k!==null;){var L=k.tag;if((L===3||L===4)&&(L=k.stateNode.containerInfo,L===m||L.nodeType===8&&L.parentNode===m))return;k=k.return}for(;R!==null;){if(k=Io(R),k===null)return;if(L=k.tag,L===5||L===6){h=_=k;continue e}R=R.parentNode}}h=h.return}fr(function(){var G=_,se=ri(u),ae=[];e:{var re=u0.get(i);if(re!==void 0){var he=ga,ge=i;switch(i){case"keypress":if(ma(u)===0)break e;case"keydown":case"keyup":he=y;break;case"focusin":ge="focus",he=wa;break;case"focusout":ge="blur",he=wa;break;case"beforeblur":case"afterblur":he=wa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=va;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Q;break;case i0:case o0:case a0:he=Ps;break;case l0:he=st;break;case"scroll":he=Ff;break;case"wheel":he=Qe;break;case"copy":case"cut":case"paste":he=Bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=T}var _e=(o&4)!==0,jt=!_e&&i==="scroll",W=_e?re!==null?re+"Capture":null:re;_e=[];for(var F=G,H;F!==null;){H=F;var le=H.stateNode;if(H.tag===5&&le!==null&&(H=le,W!==null&&(le=ze(F,W),le!=null&&_e.push(su(F,le,H)))),jt)break;F=F.return}0<_e.length&&(re=new he(re,ge,null,u,se),ae.push({event:re,listeners:_e}))}}if((o&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",re&&u!==rs&&(ge=u.relatedTarget||u.fromElement)&&(Io(ge)||ge[Ds]))break e;if((he||re)&&(re=se.window===se?se:(re=se.ownerDocument)?re.defaultView||re.parentWindow:window,he?(ge=u.relatedTarget||u.toElement,he=G,ge=ge?Io(ge):null,ge!==null&&(jt=jr(ge),ge!==jt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(he=null,ge=G),he!==ge)){if(_e=va,le="onMouseLeave",W="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(_e=T,le="onPointerLeave",W="onPointerEnter",F="pointer"),jt=he==null?re:Ca(he),H=ge==null?re:Ca(ge),re=new _e(le,F+"leave",he,u,se),re.target=jt,re.relatedTarget=H,le=null,Io(se)===G&&(_e=new _e(W,F+"enter",ge,u,se),_e.target=H,_e.relatedTarget=jt,le=_e),jt=le,he&&ge)t:{for(_e=he,W=ge,F=0,H=_e;H;H=Ta(H))F++;for(H=0,le=W;le;le=Ta(le))H++;for(;0<F-H;)_e=Ta(_e),F--;for(;0<H-F;)W=Ta(W),H--;for(;F--;){if(_e===W||W!==null&&_e===W.alternate)break t;_e=Ta(_e),W=Ta(W)}_e=null}else _e=null;he!==null&&p0(ae,re,he,_e,!1),ge!==null&&jt!==null&&p0(ae,jt,ge,_e,!0)}}e:{if(re=G?Ca(G):window,he=re.nodeName&&re.nodeName.toLowerCase(),he==="select"||he==="input"&&re.type==="file")var xe=LI;else if(Ky(re))if(Qy)xe=UI;else{xe=FI;var Ae=VI}else(he=re.nodeName)&&he.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(xe=zI);if(xe&&(xe=xe(i,G))){Gy(ae,xe,u,se);break e}Ae&&Ae(i,re,G),i==="focusout"&&(Ae=re._wrapperState)&&Ae.controlled&&re.type==="number"&&es(re,"number",re.value)}switch(Ae=G?Ca(G):window,i){case"focusin":(Ky(Ae)||Ae.contentEditable==="true")&&(Ea=Ae,Bf=G,tu=null);break;case"focusout":tu=Bf=Ea=null;break;case"mousedown":Wf=!0;break;case"contextmenu":case"mouseup":case"dragend":Wf=!1,r0(ae,u,se);break;case"selectionchange":if(WI)break;case"keydown":case"keyup":r0(ae,u,se)}var Re;if(zt)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else ka?qy(i,u)&&(Pe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Pe="onCompositionStart");Pe&&(Eo&&u.locale!=="ko"&&(ka||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&ka&&(Re=Gl()):(ir=se,pa="value"in ir?ir.value:ir.textContent,ka=!0)),Ae=Jc(G,Pe),0<Ae.length&&(Pe=new Jl(Pe,i,null,u,se),ae.push({event:Pe,listeners:Ae}),Re?Pe.data=Re:(Re=Hy(u),Re!==null&&(Pe.data=Re)))),(Re=or?DI(i,u):jI(i,u))&&(G=Jc(G,"onBeforeInput"),0<G.length&&(se=new Jl("onBeforeInput","beforeinput",null,u,se),ae.push({event:se,listeners:G}),se.data=Re))}h0(ae,o)})}function su(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Jc(i,o){for(var u=o+"Capture",h=[];i!==null;){var m=i,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=ze(i,u),_!=null&&h.unshift(su(i,_,m)),_=ze(i,o),_!=null&&h.push(su(i,_,m))),i=i.return}return h}function Ta(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function p0(i,o,u,h,m){for(var _=o._reactName,k=[];u!==null&&u!==h;){var R=u,L=R.alternate,G=R.stateNode;if(L!==null&&L===h)break;R.tag===5&&G!==null&&(R=G,m?(L=ze(u,_),L!=null&&k.unshift(su(u,L,R))):m||(L=ze(u,_),L!=null&&k.push(su(u,L,R)))),u=u.return}k.length!==0&&i.push({event:o,listeners:k})}var GI=/\r\n?/g,QI=/\u0000|\uFFFD/g;function m0(i){return(typeof i=="string"?i:""+i).replace(GI,`
`).replace(QI,"")}function Yc(i,o,u){if(o=m0(o),m0(i)!==o&&u)throw Error(n(425))}function Xc(){}var Zf=null,Jf=null;function Yf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Xf=typeof setTimeout=="function"?setTimeout:void 0,ZI=typeof clearTimeout=="function"?clearTimeout:void 0,g0=typeof Promise=="function"?Promise:void 0,JI=typeof queueMicrotask=="function"?queueMicrotask:typeof g0<"u"?function(i){return g0.resolve(null).then(i).catch(YI)}:Xf;function YI(i){setTimeout(function(){throw i})}function ep(i,o){var u=o,h=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(h===0){i.removeChild(m),Fr(o);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=m}while(u);Fr(o)}function mi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function y0(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),us="__reactFiber$"+Sa,iu="__reactProps$"+Sa,Ds="__reactContainer$"+Sa,tp="__reactEvents$"+Sa,XI="__reactListeners$"+Sa,eT="__reactHandles$"+Sa;function Io(i){var o=i[us];if(o)return o;for(var u=i.parentNode;u;){if(o=u[Ds]||u[us]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=y0(i);i!==null;){if(u=i[us])return u;i=y0(i)}return o}i=u,u=i.parentNode}return null}function ou(i){return i=i[us]||i[Ds],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ca(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function ed(i){return i[iu]||null}var np=[],Aa=-1;function gi(i){return{current:i}}function ft(i){0>Aa||(i.current=np[Aa],np[Aa]=null,Aa--)}function ct(i,o){Aa++,np[Aa]=i.current,i.current=o}var yi={},wn=gi(yi),Wn=gi(!1),To=yi;function Ra(i,o){var u=i.type.contextTypes;if(!u)return yi;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in u)m[_]=o[_];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=m),m}function qn(i){return i=i.childContextTypes,i!=null}function td(){ft(Wn),ft(wn)}function v0(i,o,u){if(wn.current!==yi)throw Error(n(168));ct(wn,o),ct(Wn,u)}function _0(i,o,u){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var m in h)if(!(m in o))throw Error(n(108,Ee(i)||"Unknown",m));return ce({},u,h)}function nd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||yi,To=wn.current,ct(wn,i),ct(Wn,Wn.current),!0}function w0(i,o,u){var h=i.stateNode;if(!h)throw Error(n(169));u?(i=_0(i,o,To),h.__reactInternalMemoizedMergedChildContext=i,ft(Wn),ft(wn),ct(wn,i)):ft(Wn),ct(Wn,u)}var js=null,rd=!1,rp=!1;function x0(i){js===null?js=[i]:js.push(i)}function tT(i){rd=!0,x0(i)}function vi(){if(!rp&&js!==null){rp=!0;var i=0,o=We;try{var u=js;for(We=1;i<u.length;i++){var h=u[i];do h=h(!0);while(h!==null)}js=null,rd=!1}catch(m){throw js!==null&&(js=js.slice(i+1)),ua(yo,vi),m}finally{We=o,rp=!1}}return null}var Na=[],Pa=0,sd=null,id=0,vr=[],_r=0,So=null,Os=1,Ms="";function Co(i,o){Na[Pa++]=id,Na[Pa++]=sd,sd=i,id=o}function b0(i,o,u){vr[_r++]=Os,vr[_r++]=Ms,vr[_r++]=So,So=i;var h=Os;i=Ms;var m=32-Nn(h)-1;h&=~(1<<m),u+=1;var _=32-Nn(o)+m;if(30<_){var k=m-m%5;_=(h&(1<<k)-1).toString(32),h>>=k,m-=k,Os=1<<32-Nn(o)+m|u<<m|h,Ms=_+i}else Os=1<<_|u<<m|h,Ms=i}function sp(i){i.return!==null&&(Co(i,1),b0(i,1,0))}function ip(i){for(;i===sd;)sd=Na[--Pa],Na[Pa]=null,id=Na[--Pa],Na[Pa]=null;for(;i===So;)So=vr[--_r],vr[_r]=null,Ms=vr[--_r],vr[_r]=null,Os=vr[--_r],vr[_r]=null}var ar=null,lr=null,_t=!1,$r=null;function k0(i,o){var u=kr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function E0(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,ar=i,lr=mi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,ar=i,lr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=So!==null?{id:Os,overflow:Ms}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=kr(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,ar=i,lr=null,!0):!1;default:return!1}}function op(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ap(i){if(_t){var o=lr;if(o){var u=o;if(!E0(i,o)){if(op(i))throw Error(n(418));o=mi(u.nextSibling);var h=ar;o&&E0(i,o)?k0(h,u):(i.flags=i.flags&-4097|2,_t=!1,ar=i)}}else{if(op(i))throw Error(n(418));i.flags=i.flags&-4097|2,_t=!1,ar=i}}}function I0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ar=i}function od(i){if(i!==ar)return!1;if(!_t)return I0(i),_t=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Yf(i.type,i.memoizedProps)),o&&(o=lr)){if(op(i))throw T0(),Error(n(418));for(;o;)k0(i,o),o=mi(o.nextSibling)}if(I0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){lr=mi(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}lr=null}}else lr=ar?mi(i.stateNode.nextSibling):null;return!0}function T0(){for(var i=lr;i;)i=mi(i.nextSibling)}function Da(){lr=ar=null,_t=!1}function lp(i){$r===null?$r=[i]:$r.push(i)}var nT=Y.ReactCurrentBatchConfig;function au(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(n(309));var h=u.stateNode}if(!h)throw Error(n(147,i));var m=h,_=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(k){var R=m.refs;k===null?delete R[_]:R[_]=k},o._stringRef=_,o)}if(typeof i!="string")throw Error(n(284));if(!u._owner)throw Error(n(290,i))}return i}function ad(i,o){throw i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function S0(i){var o=i._init;return o(i._payload)}function C0(i){function o(W,F){if(i){var H=W.deletions;H===null?(W.deletions=[F],W.flags|=16):H.push(F)}}function u(W,F){if(!i)return null;for(;F!==null;)o(W,F),F=F.sibling;return null}function h(W,F){for(W=new Map;F!==null;)F.key!==null?W.set(F.key,F):W.set(F.index,F),F=F.sibling;return W}function m(W,F){return W=Ti(W,F),W.index=0,W.sibling=null,W}function _(W,F,H){return W.index=H,i?(H=W.alternate,H!==null?(H=H.index,H<F?(W.flags|=2,F):H):(W.flags|=2,F)):(W.flags|=1048576,F)}function k(W){return i&&W.alternate===null&&(W.flags|=2),W}function R(W,F,H,le){return F===null||F.tag!==6?(F=Xp(H,W.mode,le),F.return=W,F):(F=m(F,H),F.return=W,F)}function L(W,F,H,le){var xe=H.type;return xe===C?se(W,F,H.props.children,le,H.key):F!==null&&(F.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Ge&&S0(xe)===F.type)?(le=m(F,H.props),le.ref=au(W,F,H),le.return=W,le):(le=Nd(H.type,H.key,H.props,null,W.mode,le),le.ref=au(W,F,H),le.return=W,le)}function G(W,F,H,le){return F===null||F.tag!==4||F.stateNode.containerInfo!==H.containerInfo||F.stateNode.implementation!==H.implementation?(F=em(H,W.mode,le),F.return=W,F):(F=m(F,H.children||[]),F.return=W,F)}function se(W,F,H,le,xe){return F===null||F.tag!==7?(F=Mo(H,W.mode,le,xe),F.return=W,F):(F=m(F,H),F.return=W,F)}function ae(W,F,H){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Xp(""+F,W.mode,H),F.return=W,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case J:return H=Nd(F.type,F.key,F.props,null,W.mode,H),H.ref=au(W,null,F),H.return=W,H;case te:return F=em(F,W.mode,H),F.return=W,F;case Ge:var le=F._init;return ae(W,le(F._payload),H)}if(Yt(F)||fe(F))return F=Mo(F,W.mode,H,null),F.return=W,F;ad(W,F)}return null}function re(W,F,H,le){var xe=F!==null?F.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return xe!==null?null:R(W,F,""+H,le);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case J:return H.key===xe?L(W,F,H,le):null;case te:return H.key===xe?G(W,F,H,le):null;case Ge:return xe=H._init,re(W,F,xe(H._payload),le)}if(Yt(H)||fe(H))return xe!==null?null:se(W,F,H,le,null);ad(W,H)}return null}function he(W,F,H,le,xe){if(typeof le=="string"&&le!==""||typeof le=="number")return W=W.get(H)||null,R(F,W,""+le,xe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case J:return W=W.get(le.key===null?H:le.key)||null,L(F,W,le,xe);case te:return W=W.get(le.key===null?H:le.key)||null,G(F,W,le,xe);case Ge:var Ae=le._init;return he(W,F,H,Ae(le._payload),xe)}if(Yt(le)||fe(le))return W=W.get(H)||null,se(F,W,le,xe,null);ad(F,le)}return null}function ge(W,F,H,le){for(var xe=null,Ae=null,Re=F,Pe=F=0,nn=null;Re!==null&&Pe<H.length;Pe++){Re.index>Pe?(nn=Re,Re=null):nn=Re.sibling;var Xe=re(W,Re,H[Pe],le);if(Xe===null){Re===null&&(Re=nn);break}i&&Re&&Xe.alternate===null&&o(W,Re),F=_(Xe,F,Pe),Ae===null?xe=Xe:Ae.sibling=Xe,Ae=Xe,Re=nn}if(Pe===H.length)return u(W,Re),_t&&Co(W,Pe),xe;if(Re===null){for(;Pe<H.length;Pe++)Re=ae(W,H[Pe],le),Re!==null&&(F=_(Re,F,Pe),Ae===null?xe=Re:Ae.sibling=Re,Ae=Re);return _t&&Co(W,Pe),xe}for(Re=h(W,Re);Pe<H.length;Pe++)nn=he(Re,W,Pe,H[Pe],le),nn!==null&&(i&&nn.alternate!==null&&Re.delete(nn.key===null?Pe:nn.key),F=_(nn,F,Pe),Ae===null?xe=nn:Ae.sibling=nn,Ae=nn);return i&&Re.forEach(function(Si){return o(W,Si)}),_t&&Co(W,Pe),xe}function _e(W,F,H,le){var xe=fe(H);if(typeof xe!="function")throw Error(n(150));if(H=xe.call(H),H==null)throw Error(n(151));for(var Ae=xe=null,Re=F,Pe=F=0,nn=null,Xe=H.next();Re!==null&&!Xe.done;Pe++,Xe=H.next()){Re.index>Pe?(nn=Re,Re=null):nn=Re.sibling;var Si=re(W,Re,Xe.value,le);if(Si===null){Re===null&&(Re=nn);break}i&&Re&&Si.alternate===null&&o(W,Re),F=_(Si,F,Pe),Ae===null?xe=Si:Ae.sibling=Si,Ae=Si,Re=nn}if(Xe.done)return u(W,Re),_t&&Co(W,Pe),xe;if(Re===null){for(;!Xe.done;Pe++,Xe=H.next())Xe=ae(W,Xe.value,le),Xe!==null&&(F=_(Xe,F,Pe),Ae===null?xe=Xe:Ae.sibling=Xe,Ae=Xe);return _t&&Co(W,Pe),xe}for(Re=h(W,Re);!Xe.done;Pe++,Xe=H.next())Xe=he(Re,W,Pe,Xe.value,le),Xe!==null&&(i&&Xe.alternate!==null&&Re.delete(Xe.key===null?Pe:Xe.key),F=_(Xe,F,Pe),Ae===null?xe=Xe:Ae.sibling=Xe,Ae=Xe);return i&&Re.forEach(function(OT){return o(W,OT)}),_t&&Co(W,Pe),xe}function jt(W,F,H,le){if(typeof H=="object"&&H!==null&&H.type===C&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case J:e:{for(var xe=H.key,Ae=F;Ae!==null;){if(Ae.key===xe){if(xe=H.type,xe===C){if(Ae.tag===7){u(W,Ae.sibling),F=m(Ae,H.props.children),F.return=W,W=F;break e}}else if(Ae.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Ge&&S0(xe)===Ae.type){u(W,Ae.sibling),F=m(Ae,H.props),F.ref=au(W,Ae,H),F.return=W,W=F;break e}u(W,Ae);break}else o(W,Ae);Ae=Ae.sibling}H.type===C?(F=Mo(H.props.children,W.mode,le,H.key),F.return=W,W=F):(le=Nd(H.type,H.key,H.props,null,W.mode,le),le.ref=au(W,F,H),le.return=W,W=le)}return k(W);case te:e:{for(Ae=H.key;F!==null;){if(F.key===Ae)if(F.tag===4&&F.stateNode.containerInfo===H.containerInfo&&F.stateNode.implementation===H.implementation){u(W,F.sibling),F=m(F,H.children||[]),F.return=W,W=F;break e}else{u(W,F);break}else o(W,F);F=F.sibling}F=em(H,W.mode,le),F.return=W,W=F}return k(W);case Ge:return Ae=H._init,jt(W,F,Ae(H._payload),le)}if(Yt(H))return ge(W,F,H,le);if(fe(H))return _e(W,F,H,le);ad(W,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,F!==null&&F.tag===6?(u(W,F.sibling),F=m(F,H),F.return=W,W=F):(u(W,F),F=Xp(H,W.mode,le),F.return=W,W=F),k(W)):u(W,F)}return jt}var ja=C0(!0),A0=C0(!1),ld=gi(null),ud=null,Oa=null,up=null;function cp(){up=Oa=ud=null}function dp(i){var o=ld.current;ft(ld),i._currentValue=o}function hp(i,o,u){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===u)break;i=i.return}}function Ma(i,o){ud=i,up=Oa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Hn=!0),i.firstContext=null)}function wr(i){var o=i._currentValue;if(up!==i)if(i={context:i,memoizedValue:o,next:null},Oa===null){if(ud===null)throw Error(n(308));Oa=i,ud.dependencies={lanes:0,firstContext:i}}else Oa=Oa.next=i;return o}var Ao=null;function fp(i){Ao===null?Ao=[i]:Ao.push(i)}function R0(i,o,u,h){var m=o.interleaved;return m===null?(u.next=u,fp(o)):(u.next=m.next,m.next=u),o.interleaved=u,Ls(i,h)}function Ls(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var _i=!1;function pp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N0(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Vs(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function wi(i,o,u){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Je&2)!==0){var m=h.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),h.pending=o,Ls(i,u)}return m=h.interleaved,m===null?(o.next=o,fp(h)):(o.next=m.next,m.next=o),h.interleaved=o,Ls(i,u)}function cd(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,ui(i,u)}}function P0(i,o){var u=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var m=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var k={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?m=_=k:_=_.next=k,u=u.next}while(u!==null);_===null?m=_=o:_=_.next=o}else m=_=o;u={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:h.shared,effects:h.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function dd(i,o,u,h){var m=i.updateQueue;_i=!1;var _=m.firstBaseUpdate,k=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var L=R,G=L.next;L.next=null,k===null?_=G:k.next=G,k=L;var se=i.alternate;se!==null&&(se=se.updateQueue,R=se.lastBaseUpdate,R!==k&&(R===null?se.firstBaseUpdate=G:R.next=G,se.lastBaseUpdate=L))}if(_!==null){var ae=m.baseState;k=0,se=G=L=null,R=_;do{var re=R.lane,he=R.eventTime;if((h&re)===re){se!==null&&(se=se.next={eventTime:he,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ge=i,_e=R;switch(re=o,he=u,_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){ae=ge.call(he,ae,re);break e}ae=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,re=typeof ge=="function"?ge.call(he,ae,re):ge,re==null)break e;ae=ce({},ae,re);break e;case 2:_i=!0}}R.callback!==null&&R.lane!==0&&(i.flags|=64,re=m.effects,re===null?m.effects=[R]:re.push(R))}else he={eventTime:he,lane:re,tag:R.tag,payload:R.payload,callback:R.callback,next:null},se===null?(G=se=he,L=ae):se=se.next=he,k|=re;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;re=R,R=re.next,re.next=null,m.lastBaseUpdate=re,m.shared.pending=null}}while(!0);if(se===null&&(L=ae),m.baseState=L,m.firstBaseUpdate=G,m.lastBaseUpdate=se,o=m.shared.interleaved,o!==null){m=o;do k|=m.lane,m=m.next;while(m!==o)}else _===null&&(m.shared.lanes=0);Po|=k,i.lanes=k,i.memoizedState=ae}}function D0(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],m=h.callback;if(m!==null){if(h.callback=null,h=u,typeof m!="function")throw Error(n(191,m));m.call(h)}}}var lu={},cs=gi(lu),uu=gi(lu),cu=gi(lu);function Ro(i){if(i===lu)throw Error(n(174));return i}function mp(i,o){switch(ct(cu,o),ct(uu,i),ct(cs,lu),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=lt(o,i)}ft(cs),ct(cs,o)}function La(){ft(cs),ft(uu),ft(cu)}function j0(i){Ro(cu.current);var o=Ro(cs.current),u=lt(o,i.type);o!==u&&(ct(uu,i),ct(cs,u))}function gp(i){uu.current===i&&(ft(cs),ft(uu))}var bt=gi(0);function hd(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var yp=[];function vp(){for(var i=0;i<yp.length;i++)yp[i]._workInProgressVersionPrimary=null;yp.length=0}var fd=Y.ReactCurrentDispatcher,_p=Y.ReactCurrentBatchConfig,No=0,kt=null,Kt=null,en=null,pd=!1,du=!1,hu=0,rT=0;function xn(){throw Error(n(321))}function wp(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Ur(i[u],o[u]))return!1;return!0}function xp(i,o,u,h,m,_){if(No=_,kt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,fd.current=i===null||i.memoizedState===null?aT:lT,i=u(h,m),du){_=0;do{if(du=!1,hu=0,25<=_)throw Error(n(301));_+=1,en=Kt=null,o.updateQueue=null,fd.current=uT,i=u(h,m)}while(du)}if(fd.current=yd,o=Kt!==null&&Kt.next!==null,No=0,en=Kt=kt=null,pd=!1,o)throw Error(n(300));return i}function bp(){var i=hu!==0;return hu=0,i}function ds(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?kt.memoizedState=en=i:en=en.next=i,en}function xr(){if(Kt===null){var i=kt.alternate;i=i!==null?i.memoizedState:null}else i=Kt.next;var o=en===null?kt.memoizedState:en.next;if(o!==null)en=o,Kt=i;else{if(i===null)throw Error(n(310));Kt=i,i={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},en===null?kt.memoizedState=en=i:en=en.next=i}return en}function fu(i,o){return typeof o=="function"?o(i):o}function kp(i){var o=xr(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var h=Kt,m=h.baseQueue,_=u.pending;if(_!==null){if(m!==null){var k=m.next;m.next=_.next,_.next=k}h.baseQueue=m=_,u.pending=null}if(m!==null){_=m.next,h=h.baseState;var R=k=null,L=null,G=_;do{var se=G.lane;if((No&se)===se)L!==null&&(L=L.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),h=G.hasEagerState?G.eagerState:i(h,G.action);else{var ae={lane:se,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};L===null?(R=L=ae,k=h):L=L.next=ae,kt.lanes|=se,Po|=se}G=G.next}while(G!==null&&G!==_);L===null?k=h:L.next=R,Ur(h,o.memoizedState)||(Hn=!0),o.memoizedState=h,o.baseState=k,o.baseQueue=L,u.lastRenderedState=h}if(i=u.interleaved,i!==null){m=i;do _=m.lane,kt.lanes|=_,Po|=_,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Ep(i){var o=xr(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var h=u.dispatch,m=u.pending,_=o.memoizedState;if(m!==null){u.pending=null;var k=m=m.next;do _=i(_,k.action),k=k.next;while(k!==m);Ur(_,o.memoizedState)||(Hn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,h]}function O0(){}function M0(i,o){var u=kt,h=xr(),m=o(),_=!Ur(h.memoizedState,m);if(_&&(h.memoizedState=m,Hn=!0),h=h.queue,Ip(F0.bind(null,u,h,i),[i]),h.getSnapshot!==o||_||en!==null&&en.memoizedState.tag&1){if(u.flags|=2048,pu(9,V0.bind(null,u,h,m,o),void 0,null),tn===null)throw Error(n(349));(No&30)!==0||L0(u,o,m)}return m}function L0(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=kt.updateQueue,o===null?(o={lastEffect:null,stores:null},kt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function V0(i,o,u,h){o.value=u,o.getSnapshot=h,z0(o)&&U0(i)}function F0(i,o,u){return u(function(){z0(o)&&U0(i)})}function z0(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Ur(i,u)}catch{return!0}}function U0(i){var o=Ls(i,1);o!==null&&Hr(o,i,1,-1)}function $0(i){var o=ds();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:i},o.queue=i,i=i.dispatch=oT.bind(null,kt,i),[o.memoizedState,i]}function pu(i,o,u,h){return i={tag:i,create:o,destroy:u,deps:h,next:null},o=kt.updateQueue,o===null?(o={lastEffect:null,stores:null},kt.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(h=u.next,u.next=i,i.next=h,o.lastEffect=i)),i}function B0(){return xr().memoizedState}function md(i,o,u,h){var m=ds();kt.flags|=i,m.memoizedState=pu(1|o,u,void 0,h===void 0?null:h)}function gd(i,o,u,h){var m=xr();h=h===void 0?null:h;var _=void 0;if(Kt!==null){var k=Kt.memoizedState;if(_=k.destroy,h!==null&&wp(h,k.deps)){m.memoizedState=pu(o,u,_,h);return}}kt.flags|=i,m.memoizedState=pu(1|o,u,_,h)}function W0(i,o){return md(8390656,8,i,o)}function Ip(i,o){return gd(2048,8,i,o)}function q0(i,o){return gd(4,2,i,o)}function H0(i,o){return gd(4,4,i,o)}function K0(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function G0(i,o,u){return u=u!=null?u.concat([i]):null,gd(4,4,K0.bind(null,o,i),u)}function Tp(){}function Q0(i,o){var u=xr();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&wp(o,h[1])?h[0]:(u.memoizedState=[i,o],i)}function Z0(i,o){var u=xr();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&wp(o,h[1])?h[0]:(i=i(),u.memoizedState=[i,o],i)}function J0(i,o,u){return(No&21)===0?(i.baseState&&(i.baseState=!1,Hn=!0),i.memoizedState=u):(Ur(u,o)||(u=wo(),kt.lanes|=u,Po|=u,i.baseState=!0),o)}function sT(i,o){var u=We;We=u!==0&&4>u?u:4,i(!0);var h=_p.transition;_p.transition={};try{i(!1),o()}finally{We=u,_p.transition=h}}function Y0(){return xr().memoizedState}function iT(i,o,u){var h=Ei(i);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},X0(i))ev(o,u);else if(u=R0(i,o,u,h),u!==null){var m=jn();Hr(u,i,h,m),tv(u,o,h)}}function oT(i,o,u){var h=Ei(i),m={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(X0(i))ev(o,m);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var k=o.lastRenderedState,R=_(k,u);if(m.hasEagerState=!0,m.eagerState=R,Ur(R,k)){var L=o.interleaved;L===null?(m.next=m,fp(o)):(m.next=L.next,L.next=m),o.interleaved=m;return}}catch{}finally{}u=R0(i,o,m,h),u!==null&&(m=jn(),Hr(u,i,h,m),tv(u,o,h))}}function X0(i){var o=i.alternate;return i===kt||o!==null&&o===kt}function ev(i,o){du=pd=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function tv(i,o,u){if((u&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,ui(i,u)}}var yd={readContext:wr,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useInsertionEffect:xn,useLayoutEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useMutableSource:xn,useSyncExternalStore:xn,useId:xn,unstable_isNewReconciler:!1},aT={readContext:wr,useCallback:function(i,o){return ds().memoizedState=[i,o===void 0?null:o],i},useContext:wr,useEffect:W0,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,md(4194308,4,K0.bind(null,o,i),u)},useLayoutEffect:function(i,o){return md(4194308,4,i,o)},useInsertionEffect:function(i,o){return md(4,2,i,o)},useMemo:function(i,o){var u=ds();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var h=ds();return o=u!==void 0?u(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=iT.bind(null,kt,i),[h.memoizedState,i]},useRef:function(i){var o=ds();return i={current:i},o.memoizedState=i},useState:$0,useDebugValue:Tp,useDeferredValue:function(i){return ds().memoizedState=i},useTransition:function(){var i=$0(!1),o=i[0];return i=sT.bind(null,i[1]),ds().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var h=kt,m=ds();if(_t){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),tn===null)throw Error(n(349));(No&30)!==0||L0(h,o,u)}m.memoizedState=u;var _={value:u,getSnapshot:o};return m.queue=_,W0(F0.bind(null,h,_,i),[i]),h.flags|=2048,pu(9,V0.bind(null,h,_,u,o),void 0,null),u},useId:function(){var i=ds(),o=tn.identifierPrefix;if(_t){var u=Ms,h=Os;u=(h&~(1<<32-Nn(h)-1)).toString(32)+u,o=":"+o+"R"+u,u=hu++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=rT++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},lT={readContext:wr,useCallback:Q0,useContext:wr,useEffect:Ip,useImperativeHandle:G0,useInsertionEffect:q0,useLayoutEffect:H0,useMemo:Z0,useReducer:kp,useRef:B0,useState:function(){return kp(fu)},useDebugValue:Tp,useDeferredValue:function(i){var o=xr();return J0(o,Kt.memoizedState,i)},useTransition:function(){var i=kp(fu)[0],o=xr().memoizedState;return[i,o]},useMutableSource:O0,useSyncExternalStore:M0,useId:Y0,unstable_isNewReconciler:!1},uT={readContext:wr,useCallback:Q0,useContext:wr,useEffect:Ip,useImperativeHandle:G0,useInsertionEffect:q0,useLayoutEffect:H0,useMemo:Z0,useReducer:Ep,useRef:B0,useState:function(){return Ep(fu)},useDebugValue:Tp,useDeferredValue:function(i){var o=xr();return Kt===null?o.memoizedState=i:J0(o,Kt.memoizedState,i)},useTransition:function(){var i=Ep(fu)[0],o=xr().memoizedState;return[i,o]},useMutableSource:O0,useSyncExternalStore:M0,useId:Y0,unstable_isNewReconciler:!1};function Br(i,o){if(i&&i.defaultProps){o=ce({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Sp(i,o,u,h){o=i.memoizedState,u=u(h,o),u=u==null?o:ce({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var vd={isMounted:function(i){return(i=i._reactInternals)?jr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var h=jn(),m=Ei(i),_=Vs(h,m);_.payload=o,u!=null&&(_.callback=u),o=wi(i,_,m),o!==null&&(Hr(o,i,m,h),cd(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var h=jn(),m=Ei(i),_=Vs(h,m);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=wi(i,_,m),o!==null&&(Hr(o,i,m,h),cd(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=jn(),h=Ei(i),m=Vs(u,h);m.tag=2,o!=null&&(m.callback=o),o=wi(i,m,h),o!==null&&(Hr(o,i,h,u),cd(o,i,h))}};function nv(i,o,u,h,m,_,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,k):o.prototype&&o.prototype.isPureReactComponent?!eu(u,h)||!eu(m,_):!0}function rv(i,o,u){var h=!1,m=yi,_=o.contextType;return typeof _=="object"&&_!==null?_=wr(_):(m=qn(o)?To:wn.current,h=o.contextTypes,_=(h=h!=null)?Ra(i,m):yi),o=new o(u,_),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=vd,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=_),o}function sv(i,o,u,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==i&&vd.enqueueReplaceState(o,o.state,null)}function Cp(i,o,u,h){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},pp(i);var _=o.contextType;typeof _=="object"&&_!==null?m.context=wr(_):(_=qn(o)?To:wn.current,m.context=Ra(i,_)),m.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Sp(i,o,_,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&vd.enqueueReplaceState(m,m.state,null),dd(i,u,m,h),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function Va(i,o){try{var u="",h=o;do u+=ke(h),h=h.return;while(h);var m=u}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:o,stack:m,digest:null}}function Ap(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Rp(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var cT=typeof WeakMap=="function"?WeakMap:Map;function iv(i,o,u){u=Vs(-1,u),u.tag=3,u.payload={element:null};var h=o.value;return u.callback=function(){Id||(Id=!0,qp=h),Rp(i,o)},u}function ov(i,o,u){u=Vs(-1,u),u.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var m=o.value;u.payload=function(){return h(m)},u.callback=function(){Rp(i,o)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){Rp(i,o),typeof h!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),u}function av(i,o,u){var h=i.pingCache;if(h===null){h=i.pingCache=new cT;var m=new Set;h.set(o,m)}else m=h.get(o),m===void 0&&(m=new Set,h.set(o,m));m.has(u)||(m.add(u),i=ET.bind(null,i,o,u),o.then(i,i))}function lv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function uv(i,o,u,h,m){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Vs(-1,1),o.tag=2,wi(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var dT=Y.ReactCurrentOwner,Hn=!1;function Dn(i,o,u,h){o.child=i===null?A0(o,null,u,h):ja(o,i.child,u,h)}function cv(i,o,u,h,m){u=u.render;var _=o.ref;return Ma(o,m),h=xp(i,o,u,h,_,m),u=bp(),i!==null&&!Hn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,Fs(i,o,m)):(_t&&u&&sp(o),o.flags|=1,Dn(i,o,h,m),o.child)}function dv(i,o,u,h,m){if(i===null){var _=u.type;return typeof _=="function"&&!Yp(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=_,hv(i,o,_,h,m)):(i=Nd(u.type,null,h,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,(i.lanes&m)===0){var k=_.memoizedProps;if(u=u.compare,u=u!==null?u:eu,u(k,h)&&i.ref===o.ref)return Fs(i,o,m)}return o.flags|=1,i=Ti(_,h),i.ref=o.ref,i.return=o,o.child=i}function hv(i,o,u,h,m){if(i!==null){var _=i.memoizedProps;if(eu(_,h)&&i.ref===o.ref)if(Hn=!1,o.pendingProps=h=_,(i.lanes&m)!==0)(i.flags&131072)!==0&&(Hn=!0);else return o.lanes=i.lanes,Fs(i,o,m)}return Np(i,o,u,h,m)}function fv(i,o,u){var h=o.pendingProps,m=h.children,_=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(za,ur),ur|=u;else{if((u&1073741824)===0)return i=_!==null?_.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,ct(za,ur),ur|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=_!==null?_.baseLanes:u,ct(za,ur),ur|=h}else _!==null?(h=_.baseLanes|u,o.memoizedState=null):h=u,ct(za,ur),ur|=h;return Dn(i,o,m,u),o.child}function pv(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Np(i,o,u,h,m){var _=qn(u)?To:wn.current;return _=Ra(o,_),Ma(o,m),u=xp(i,o,u,h,_,m),h=bp(),i!==null&&!Hn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,Fs(i,o,m)):(_t&&h&&sp(o),o.flags|=1,Dn(i,o,u,m),o.child)}function mv(i,o,u,h,m){if(qn(u)){var _=!0;nd(o)}else _=!1;if(Ma(o,m),o.stateNode===null)wd(i,o),rv(o,u,h),Cp(o,u,h,m),h=!0;else if(i===null){var k=o.stateNode,R=o.memoizedProps;k.props=R;var L=k.context,G=u.contextType;typeof G=="object"&&G!==null?G=wr(G):(G=qn(u)?To:wn.current,G=Ra(o,G));var se=u.getDerivedStateFromProps,ae=typeof se=="function"||typeof k.getSnapshotBeforeUpdate=="function";ae||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(R!==h||L!==G)&&sv(o,k,h,G),_i=!1;var re=o.memoizedState;k.state=re,dd(o,h,k,m),L=o.memoizedState,R!==h||re!==L||Wn.current||_i?(typeof se=="function"&&(Sp(o,u,se,h),L=o.memoizedState),(R=_i||nv(o,u,R,h,re,L,G))?(ae||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=L),k.props=h,k.state=L,k.context=G,h=R):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{k=o.stateNode,N0(i,o),R=o.memoizedProps,G=o.type===o.elementType?R:Br(o.type,R),k.props=G,ae=o.pendingProps,re=k.context,L=u.contextType,typeof L=="object"&&L!==null?L=wr(L):(L=qn(u)?To:wn.current,L=Ra(o,L));var he=u.getDerivedStateFromProps;(se=typeof he=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(R!==ae||re!==L)&&sv(o,k,h,L),_i=!1,re=o.memoizedState,k.state=re,dd(o,h,k,m);var ge=o.memoizedState;R!==ae||re!==ge||Wn.current||_i?(typeof he=="function"&&(Sp(o,u,he,h),ge=o.memoizedState),(G=_i||nv(o,u,G,h,re,ge,L)||!1)?(se||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(h,ge,L),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(h,ge,L)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||R===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ge),k.props=h,k.state=ge,k.context=L,h=G):(typeof k.componentDidUpdate!="function"||R===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),h=!1)}return Pp(i,o,u,h,_,m)}function Pp(i,o,u,h,m,_){pv(i,o);var k=(o.flags&128)!==0;if(!h&&!k)return m&&w0(o,u,!1),Fs(i,o,_);h=o.stateNode,dT.current=o;var R=k&&typeof u.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&k?(o.child=ja(o,i.child,null,_),o.child=ja(o,null,R,_)):Dn(i,o,R,_),o.memoizedState=h.state,m&&w0(o,u,!0),o.child}function gv(i){var o=i.stateNode;o.pendingContext?v0(i,o.pendingContext,o.pendingContext!==o.context):o.context&&v0(i,o.context,!1),mp(i,o.containerInfo)}function yv(i,o,u,h,m){return Da(),lp(m),o.flags|=256,Dn(i,o,u,h),o.child}var Dp={dehydrated:null,treeContext:null,retryLane:0};function jp(i){return{baseLanes:i,cachePool:null,transitions:null}}function vv(i,o,u){var h=o.pendingProps,m=bt.current,_=!1,k=(o.flags&128)!==0,R;if((R=k)||(R=i!==null&&i.memoizedState===null?!1:(m&2)!==0),R?(_=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),ct(bt,m&1),i===null)return ap(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=h.children,i=h.fallback,_?(h=o.mode,_=o.child,k={mode:"hidden",children:k},(h&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=k):_=Pd(k,h,0,null),i=Mo(i,h,u,null),_.return=o,i.return=o,_.sibling=i,o.child=_,o.child.memoizedState=jp(u),o.memoizedState=Dp,i):Op(o,k));if(m=i.memoizedState,m!==null&&(R=m.dehydrated,R!==null))return hT(i,o,k,h,R,m,u);if(_){_=h.fallback,k=o.mode,m=i.child,R=m.sibling;var L={mode:"hidden",children:h.children};return(k&1)===0&&o.child!==m?(h=o.child,h.childLanes=0,h.pendingProps=L,o.deletions=null):(h=Ti(m,L),h.subtreeFlags=m.subtreeFlags&14680064),R!==null?_=Ti(R,_):(_=Mo(_,k,u,null),_.flags|=2),_.return=o,h.return=o,h.sibling=_,o.child=h,h=_,_=o.child,k=i.child.memoizedState,k=k===null?jp(u):{baseLanes:k.baseLanes|u,cachePool:null,transitions:k.transitions},_.memoizedState=k,_.childLanes=i.childLanes&~u,o.memoizedState=Dp,h}return _=i.child,i=_.sibling,h=Ti(_,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=u),h.return=o,h.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=h,o.memoizedState=null,h}function Op(i,o){return o=Pd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function _d(i,o,u,h){return h!==null&&lp(h),ja(o,i.child,null,u),i=Op(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function hT(i,o,u,h,m,_,k){if(u)return o.flags&256?(o.flags&=-257,h=Ap(Error(n(422))),_d(i,o,k,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(_=h.fallback,m=o.mode,h=Pd({mode:"visible",children:h.children},m,0,null),_=Mo(_,m,k,null),_.flags|=2,h.return=o,_.return=o,h.sibling=_,o.child=h,(o.mode&1)!==0&&ja(o,i.child,null,k),o.child.memoizedState=jp(k),o.memoizedState=Dp,_);if((o.mode&1)===0)return _d(i,o,k,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var R=h.dgst;return h=R,_=Error(n(419)),h=Ap(_,h,void 0),_d(i,o,k,h)}if(R=(k&i.childLanes)!==0,Hn||R){if(h=tn,h!==null){switch(k&-k){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|k))!==0?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,Ls(i,m),Hr(h,i,m,-1))}return Jp(),h=Ap(Error(n(421))),_d(i,o,k,h)}return m.data==="$?"?(o.flags|=128,o.child=i.child,o=IT.bind(null,i),m._reactRetry=o,null):(i=_.treeContext,lr=mi(m.nextSibling),ar=o,_t=!0,$r=null,i!==null&&(vr[_r++]=Os,vr[_r++]=Ms,vr[_r++]=So,Os=i.id,Ms=i.overflow,So=o),o=Op(o,h.children),o.flags|=4096,o)}function _v(i,o,u){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),hp(i.return,o,u)}function Mp(i,o,u,h,m){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:m}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=u,_.tailMode=m)}function wv(i,o,u){var h=o.pendingProps,m=h.revealOrder,_=h.tail;if(Dn(i,o,h.children,u),h=bt.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_v(i,u,o);else if(i.tag===19)_v(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(ct(bt,h),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)i=u.alternate,i!==null&&hd(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),Mp(o,!1,m,u,_);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&hd(i)===null){o.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}Mp(o,!0,u,null,_);break;case"together":Mp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function wd(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Fs(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Po|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,u=Ti(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Ti(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function fT(i,o,u){switch(o.tag){case 3:gv(o),Da();break;case 5:j0(o);break;case 1:qn(o.type)&&nd(o);break;case 4:mp(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,m=o.memoizedProps.value;ct(ld,h._currentValue),h._currentValue=m;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(ct(bt,bt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?vv(i,o,u):(ct(bt,bt.current&1),i=Fs(i,o,u),i!==null?i.sibling:null);ct(bt,bt.current&1);break;case 19:if(h=(u&o.childLanes)!==0,(i.flags&128)!==0){if(h)return wv(i,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ct(bt,bt.current),h)break;return null;case 22:case 23:return o.lanes=0,fv(i,o,u)}return Fs(i,o,u)}var xv,Lp,bv,kv;xv=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Lp=function(){},bv=function(i,o,u,h){var m=i.memoizedProps;if(m!==h){i=o.stateNode,Ro(cs.current);var _=null;switch(u){case"input":m=ln(i,m),h=ln(i,h),_=[];break;case"select":m=ce({},m,{value:void 0}),h=ce({},h,{value:void 0}),_=[];break;case"textarea":m=ts(i,m),h=ts(i,h),_=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=Xc)}ni(u,h);var k;u=null;for(G in m)if(!h.hasOwnProperty(G)&&m.hasOwnProperty(G)&&m[G]!=null)if(G==="style"){var R=m[G];for(k in R)R.hasOwnProperty(k)&&(u||(u={}),u[k]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(s.hasOwnProperty(G)?_||(_=[]):(_=_||[]).push(G,null));for(G in h){var L=h[G];if(R=m!=null?m[G]:void 0,h.hasOwnProperty(G)&&L!==R&&(L!=null||R!=null))if(G==="style")if(R){for(k in R)!R.hasOwnProperty(k)||L&&L.hasOwnProperty(k)||(u||(u={}),u[k]="");for(k in L)L.hasOwnProperty(k)&&R[k]!==L[k]&&(u||(u={}),u[k]=L[k])}else u||(_||(_=[]),_.push(G,u)),u=L;else G==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,R=R?R.__html:void 0,L!=null&&R!==L&&(_=_||[]).push(G,L)):G==="children"?typeof L!="string"&&typeof L!="number"||(_=_||[]).push(G,""+L):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(s.hasOwnProperty(G)?(L!=null&&G==="onScroll"&&ht("scroll",i),_||R===L||(_=[])):(_=_||[]).push(G,L))}u&&(_=_||[]).push("style",u);var G=_;(o.updateQueue=G)&&(o.flags|=4)}},kv=function(i,o,u,h){u!==h&&(o.flags|=4)};function mu(i,o){if(!_t)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function bn(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,h=0;if(o)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=h,i.childLanes=u,o}function pT(i,o,u){var h=o.pendingProps;switch(ip(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(o),null;case 1:return qn(o.type)&&td(),bn(o),null;case 3:return h=o.stateNode,La(),ft(Wn),ft(wn),vp(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(od(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,$r!==null&&(Gp($r),$r=null))),Lp(i,o),bn(o),null;case 5:gp(o);var m=Ro(cu.current);if(u=o.type,i!==null&&o.stateNode!=null)bv(i,o,u,h,m),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(n(166));return bn(o),null}if(i=Ro(cs.current),od(o)){h=o.stateNode,u=o.type;var _=o.memoizedProps;switch(h[us]=o,h[iu]=_,i=(o.mode&1)!==0,u){case"dialog":ht("cancel",h),ht("close",h);break;case"iframe":case"object":case"embed":ht("load",h);break;case"video":case"audio":for(m=0;m<nu.length;m++)ht(nu[m],h);break;case"source":ht("error",h);break;case"img":case"image":case"link":ht("error",h),ht("load",h);break;case"details":ht("toggle",h);break;case"input":tr(h,_),ht("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!_.multiple},ht("invalid",h);break;case"textarea":Is(h,_),ht("invalid",h)}ni(u,_),m=null;for(var k in _)if(_.hasOwnProperty(k)){var R=_[k];k==="children"?typeof R=="string"?h.textContent!==R&&(_.suppressHydrationWarning!==!0&&Yc(h.textContent,R,i),m=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(_.suppressHydrationWarning!==!0&&Yc(h.textContent,R,i),m=["children",""+R]):s.hasOwnProperty(k)&&R!=null&&k==="onScroll"&&ht("scroll",h)}switch(u){case"input":Wt(h),uo(h,_,!0);break;case"textarea":Wt(h),co(h);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(h.onclick=Xc)}h=m,o.updateQueue=h,h!==null&&(o.flags|=4)}else{k=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Dt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=k.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=k.createElement(u,{is:h.is}):(i=k.createElement(u),u==="select"&&(k=i,h.multiple?k.multiple=!0:h.size&&(k.size=h.size))):i=k.createElementNS(i,u),i[us]=o,i[iu]=h,xv(i,o,!1,!1),o.stateNode=i;e:{switch(k=po(u,h),u){case"dialog":ht("cancel",i),ht("close",i),m=h;break;case"iframe":case"object":case"embed":ht("load",i),m=h;break;case"video":case"audio":for(m=0;m<nu.length;m++)ht(nu[m],i);m=h;break;case"source":ht("error",i),m=h;break;case"img":case"image":case"link":ht("error",i),ht("load",i),m=h;break;case"details":ht("toggle",i),m=h;break;case"input":tr(i,h),m=ln(i,h),ht("invalid",i);break;case"option":m=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},m=ce({},h,{value:void 0}),ht("invalid",i);break;case"textarea":Is(i,h),m=ts(i,h),ht("invalid",i);break;default:m=h}ni(u,m),R=m;for(_ in R)if(R.hasOwnProperty(_)){var L=R[_];_==="style"?fo(i,L):_==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Nr(i,L)):_==="children"?typeof L=="string"?(u!=="textarea"||L!=="")&&Pr(i,L):typeof L=="number"&&Pr(i,""+L):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?L!=null&&_==="onScroll"&&ht("scroll",i):L!=null&&K(i,_,L,k))}switch(u){case"input":Wt(i),uo(i,h,!1);break;case"textarea":Wt(i),co(i);break;case"option":h.value!=null&&i.setAttribute("value",""+Le(h.value));break;case"select":i.multiple=!!h.multiple,_=h.value,_!=null?Fn(i,!!h.multiple,_,!1):h.defaultValue!=null&&Fn(i,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=Xc)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return bn(o),null;case 6:if(i&&o.stateNode!=null)kv(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(n(166));if(u=Ro(cu.current),Ro(cs.current),od(o)){if(h=o.stateNode,u=o.memoizedProps,h[us]=o,(_=h.nodeValue!==u)&&(i=ar,i!==null))switch(i.tag){case 3:Yc(h.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Yc(h.nodeValue,u,(i.mode&1)!==0)}_&&(o.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[us]=o,o.stateNode=h}return bn(o),null;case 13:if(ft(bt),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(_t&&lr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)T0(),Da(),o.flags|=98560,_=!1;else if(_=od(o),h!==null&&h.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[us]=o}else Da(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;bn(o),_=!1}else $r!==null&&(Gp($r),$r=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(bt.current&1)!==0?Gt===0&&(Gt=3):Jp())),o.updateQueue!==null&&(o.flags|=4),bn(o),null);case 4:return La(),Lp(i,o),i===null&&ru(o.stateNode.containerInfo),bn(o),null;case 10:return dp(o.type._context),bn(o),null;case 17:return qn(o.type)&&td(),bn(o),null;case 19:if(ft(bt),_=o.memoizedState,_===null)return bn(o),null;if(h=(o.flags&128)!==0,k=_.rendering,k===null)if(h)mu(_,!1);else{if(Gt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(k=hd(i),k!==null){for(o.flags|=128,mu(_,!1),h=k.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=u,u=o.child;u!==null;)_=u,i=h,_.flags&=14680066,k=_.alternate,k===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=k.childLanes,_.lanes=k.lanes,_.child=k.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=k.memoizedProps,_.memoizedState=k.memoizedState,_.updateQueue=k.updateQueue,_.type=k.type,i=k.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return ct(bt,bt.current&1|2),o.child}i=i.sibling}_.tail!==null&&ut()>Ua&&(o.flags|=128,h=!0,mu(_,!1),o.lanes=4194304)}else{if(!h)if(i=hd(k),i!==null){if(o.flags|=128,h=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),mu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!k.alternate&&!_t)return bn(o),null}else 2*ut()-_.renderingStartTime>Ua&&u!==1073741824&&(o.flags|=128,h=!0,mu(_,!1),o.lanes=4194304);_.isBackwards?(k.sibling=o.child,o.child=k):(u=_.last,u!==null?u.sibling=k:o.child=k,_.last=k)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=ut(),o.sibling=null,u=bt.current,ct(bt,h?u&1|2:u&1),o):(bn(o),null);case 22:case 23:return Zp(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(ur&1073741824)!==0&&(bn(o),o.subtreeFlags&6&&(o.flags|=8192)):bn(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function mT(i,o){switch(ip(o),o.tag){case 1:return qn(o.type)&&td(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return La(),ft(Wn),ft(wn),vp(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return gp(o),null;case 13:if(ft(bt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Da()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ft(bt),null;case 4:return La(),null;case 10:return dp(o.type._context),null;case 22:case 23:return Zp(),null;case 24:return null;default:return null}}var xd=!1,kn=!1,gT=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Fa(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){Rt(i,o,h)}else u.current=null}function Vp(i,o,u){try{u()}catch(h){Rt(i,o,h)}}var Ev=!1;function yT(i,o){if(Zf=hi,i=n0(),$f(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var m=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var k=0,R=-1,L=-1,G=0,se=0,ae=i,re=null;t:for(;;){for(var he;ae!==u||m!==0&&ae.nodeType!==3||(R=k+m),ae!==_||h!==0&&ae.nodeType!==3||(L=k+h),ae.nodeType===3&&(k+=ae.nodeValue.length),(he=ae.firstChild)!==null;)re=ae,ae=he;for(;;){if(ae===i)break t;if(re===u&&++G===m&&(R=k),re===_&&++se===h&&(L=k),(he=ae.nextSibling)!==null)break;ae=re,re=ae.parentNode}ae=he}u=R===-1||L===-1?null:{start:R,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(Jf={focusedElem:i,selectionRange:u},hi=!1,pe=o;pe!==null;)if(o=pe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,pe=i;else for(;pe!==null;){o=pe;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var _e=ge.memoizedProps,jt=ge.memoizedState,W=o.stateNode,F=W.getSnapshotBeforeUpdate(o.elementType===o.type?_e:Br(o.type,_e),jt);W.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var H=o.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(le){Rt(o,o.return,le)}if(i=o.sibling,i!==null){i.return=o.return,pe=i;break}pe=o.return}return ge=Ev,Ev=!1,ge}function gu(i,o,u){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&i)===i){var _=m.destroy;m.destroy=void 0,_!==void 0&&Vp(o,u,_)}m=m.next}while(m!==h)}}function bd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var h=u.create;u.destroy=h()}u=u.next}while(u!==o)}}function Fp(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function Iv(i){var o=i.alternate;o!==null&&(i.alternate=null,Iv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[us],delete o[iu],delete o[tp],delete o[XI],delete o[eT])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Tv(i){return i.tag===5||i.tag===3||i.tag===4}function Sv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Tv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function zp(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Xc));else if(h!==4&&(i=i.child,i!==null))for(zp(i,o,u),i=i.sibling;i!==null;)zp(i,o,u),i=i.sibling}function Up(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(Up(i,o,u),i=i.sibling;i!==null;)Up(i,o,u),i=i.sibling}var hn=null,Wr=!1;function xi(i,o,u){for(u=u.child;u!==null;)Cv(i,o,u),u=u.sibling}function Cv(i,o,u){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(vo,u)}catch{}switch(u.tag){case 5:kn||Fa(u,o);case 6:var h=hn,m=Wr;hn=null,xi(i,o,u),hn=h,Wr=m,hn!==null&&(Wr?(i=hn,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):hn.removeChild(u.stateNode));break;case 18:hn!==null&&(Wr?(i=hn,u=u.stateNode,i.nodeType===8?ep(i.parentNode,u):i.nodeType===1&&ep(i,u),Fr(i)):ep(hn,u.stateNode));break;case 4:h=hn,m=Wr,hn=u.stateNode.containerInfo,Wr=!0,xi(i,o,u),hn=h,Wr=m;break;case 0:case 11:case 14:case 15:if(!kn&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var _=m,k=_.destroy;_=_.tag,k!==void 0&&((_&2)!==0||(_&4)!==0)&&Vp(u,o,k),m=m.next}while(m!==h)}xi(i,o,u);break;case 1:if(!kn&&(Fa(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(R){Rt(u,o,R)}xi(i,o,u);break;case 21:xi(i,o,u);break;case 22:u.mode&1?(kn=(h=kn)||u.memoizedState!==null,xi(i,o,u),kn=h):xi(i,o,u);break;default:xi(i,o,u)}}function Av(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new gT),o.forEach(function(h){var m=TT.bind(null,i,h);u.has(h)||(u.add(h),h.then(m,m))})}}function qr(i,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];try{var _=i,k=o,R=k;e:for(;R!==null;){switch(R.tag){case 5:hn=R.stateNode,Wr=!1;break e;case 3:hn=R.stateNode.containerInfo,Wr=!0;break e;case 4:hn=R.stateNode.containerInfo,Wr=!0;break e}R=R.return}if(hn===null)throw Error(n(160));Cv(_,k,m),hn=null,Wr=!1;var L=m.alternate;L!==null&&(L.return=null),m.return=null}catch(G){Rt(m,o,G)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Rv(o,i),o=o.sibling}function Rv(i,o){var u=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(qr(o,i),hs(i),h&4){try{gu(3,i,i.return),bd(3,i)}catch(_e){Rt(i,i.return,_e)}try{gu(5,i,i.return)}catch(_e){Rt(i,i.return,_e)}}break;case 1:qr(o,i),hs(i),h&512&&u!==null&&Fa(u,u.return);break;case 5:if(qr(o,i),hs(i),h&512&&u!==null&&Fa(u,u.return),i.flags&32){var m=i.stateNode;try{Pr(m,"")}catch(_e){Rt(i,i.return,_e)}}if(h&4&&(m=i.stateNode,m!=null)){var _=i.memoizedProps,k=u!==null?u.memoizedProps:_,R=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{R==="input"&&_.type==="radio"&&_.name!=null&&hr(m,_),po(R,k);var G=po(R,_);for(k=0;k<L.length;k+=2){var se=L[k],ae=L[k+1];se==="style"?fo(m,ae):se==="dangerouslySetInnerHTML"?Nr(m,ae):se==="children"?Pr(m,ae):K(m,se,ae,G)}switch(R){case"input":ti(m,_);break;case"textarea":Ts(m,_);break;case"select":var re=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var he=_.value;he!=null?Fn(m,!!_.multiple,he,!1):re!==!!_.multiple&&(_.defaultValue!=null?Fn(m,!!_.multiple,_.defaultValue,!0):Fn(m,!!_.multiple,_.multiple?[]:"",!1))}m[iu]=_}catch(_e){Rt(i,i.return,_e)}}break;case 6:if(qr(o,i),hs(i),h&4){if(i.stateNode===null)throw Error(n(162));m=i.stateNode,_=i.memoizedProps;try{m.nodeValue=_}catch(_e){Rt(i,i.return,_e)}}break;case 3:if(qr(o,i),hs(i),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Fr(o.containerInfo)}catch(_e){Rt(i,i.return,_e)}break;case 4:qr(o,i),hs(i);break;case 13:qr(o,i),hs(i),m=i.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(Wp=ut())),h&4&&Av(i);break;case 22:if(se=u!==null&&u.memoizedState!==null,i.mode&1?(kn=(G=kn)||se,qr(o,i),kn=G):qr(o,i),hs(i),h&8192){if(G=i.memoizedState!==null,(i.stateNode.isHidden=G)&&!se&&(i.mode&1)!==0)for(pe=i,se=i.child;se!==null;){for(ae=pe=se;pe!==null;){switch(re=pe,he=re.child,re.tag){case 0:case 11:case 14:case 15:gu(4,re,re.return);break;case 1:Fa(re,re.return);var ge=re.stateNode;if(typeof ge.componentWillUnmount=="function"){h=re,u=re.return;try{o=h,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(_e){Rt(h,u,_e)}}break;case 5:Fa(re,re.return);break;case 22:if(re.memoizedState!==null){Dv(ae);continue}}he!==null?(he.return=re,pe=he):Dv(ae)}se=se.sibling}e:for(se=null,ae=i;;){if(ae.tag===5){if(se===null){se=ae;try{m=ae.stateNode,G?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(R=ae.stateNode,L=ae.memoizedProps.style,k=L!=null&&L.hasOwnProperty("display")?L.display:null,R.style.display=ho("display",k))}catch(_e){Rt(i,i.return,_e)}}}else if(ae.tag===6){if(se===null)try{ae.stateNode.nodeValue=G?"":ae.memoizedProps}catch(_e){Rt(i,i.return,_e)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===i)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===i)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===i)break e;se===ae&&(se=null),ae=ae.return}se===ae&&(se=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:qr(o,i),hs(i),h&4&&Av(i);break;case 21:break;default:qr(o,i),hs(i)}}function hs(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Tv(u)){var h=u;break e}u=u.return}throw Error(n(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(Pr(m,""),h.flags&=-33);var _=Sv(i);Up(i,_,m);break;case 3:case 4:var k=h.stateNode.containerInfo,R=Sv(i);zp(i,R,k);break;default:throw Error(n(161))}}catch(L){Rt(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function vT(i,o,u){pe=i,Nv(i)}function Nv(i,o,u){for(var h=(i.mode&1)!==0;pe!==null;){var m=pe,_=m.child;if(m.tag===22&&h){var k=m.memoizedState!==null||xd;if(!k){var R=m.alternate,L=R!==null&&R.memoizedState!==null||kn;R=xd;var G=kn;if(xd=k,(kn=L)&&!G)for(pe=m;pe!==null;)k=pe,L=k.child,k.tag===22&&k.memoizedState!==null?jv(m):L!==null?(L.return=k,pe=L):jv(m);for(;_!==null;)pe=_,Nv(_),_=_.sibling;pe=m,xd=R,kn=G}Pv(i)}else(m.subtreeFlags&8772)!==0&&_!==null?(_.return=m,pe=_):Pv(i)}}function Pv(i){for(;pe!==null;){var o=pe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:kn||bd(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!kn)if(u===null)h.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:Br(o.type,u.memoizedProps);h.componentDidUpdate(m,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&D0(o,_,h);break;case 3:var k=o.updateQueue;if(k!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}D0(o,k,u)}break;case 5:var R=o.stateNode;if(u===null&&o.flags&4){u=R;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&u.focus();break;case"img":L.src&&(u.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var G=o.alternate;if(G!==null){var se=G.memoizedState;if(se!==null){var ae=se.dehydrated;ae!==null&&Fr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}kn||o.flags&512&&Fp(o)}catch(re){Rt(o,o.return,re)}}if(o===i){pe=null;break}if(u=o.sibling,u!==null){u.return=o.return,pe=u;break}pe=o.return}}function Dv(i){for(;pe!==null;){var o=pe;if(o===i){pe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,pe=u;break}pe=o.return}}function jv(i){for(;pe!==null;){var o=pe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{bd(4,o)}catch(L){Rt(o,u,L)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var m=o.return;try{h.componentDidMount()}catch(L){Rt(o,m,L)}}var _=o.return;try{Fp(o)}catch(L){Rt(o,_,L)}break;case 5:var k=o.return;try{Fp(o)}catch(L){Rt(o,k,L)}}}catch(L){Rt(o,o.return,L)}if(o===i){pe=null;break}var R=o.sibling;if(R!==null){R.return=o.return,pe=R;break}pe=o.return}}var _T=Math.ceil,kd=Y.ReactCurrentDispatcher,$p=Y.ReactCurrentOwner,br=Y.ReactCurrentBatchConfig,Je=0,tn=null,Ut=null,fn=0,ur=0,za=gi(0),Gt=0,yu=null,Po=0,Ed=0,Bp=0,vu=null,Kn=null,Wp=0,Ua=1/0,zs=null,Id=!1,qp=null,bi=null,Td=!1,ki=null,Sd=0,_u=0,Hp=null,Cd=-1,Ad=0;function jn(){return(Je&6)!==0?ut():Cd!==-1?Cd:Cd=ut()}function Ei(i){return(i.mode&1)===0?1:(Je&2)!==0&&fn!==0?fn&-fn:nT.transition!==null?(Ad===0&&(Ad=wo()),Ad):(i=We,i!==0||(i=window.event,i=i===void 0?16:Kl(i.type)),i)}function Hr(i,o,u,h){if(50<_u)throw _u=0,Hp=null,Error(n(185));li(i,u,h),((Je&2)===0||i!==tn)&&(i===tn&&((Je&2)===0&&(Ed|=u),Gt===4&&Ii(i,fn)),Gn(i,h),u===1&&Je===0&&(o.mode&1)===0&&(Ua=ut()+500,rd&&vi()))}function Gn(i,o){var u=i.callbackNode;Cs(i,o);var h=_o(i,i===tn?fn:0);if(h===0)u!==null&&$l(u),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(u!=null&&$l(u),o===1)i.tag===0?tT(Mv.bind(null,i)):x0(Mv.bind(null,i)),JI(function(){(Je&6)===0&&vi()}),u=null;else{switch(ci(h)){case 1:u=yo;break;case 4:u=ii;break;case 16:u=mr;break;case 536870912:u=Ac;break;default:u=mr}u=Wv(u,Ov.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function Ov(i,o){if(Cd=-1,Ad=0,(Je&6)!==0)throw Error(n(327));var u=i.callbackNode;if($a()&&i.callbackNode!==u)return null;var h=_o(i,i===tn?fn:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Rd(i,h);else{o=h;var m=Je;Je|=2;var _=Vv();(tn!==i||fn!==o)&&(zs=null,Ua=ut()+500,jo(i,o));do try{bT();break}catch(R){Lv(i,R)}while(!0);cp(),kd.current=_,Je=m,Ut!==null?o=0:(tn=null,fn=0,o=Gt)}if(o!==0){if(o===2&&(m=sr(i),m!==0&&(h=m,o=Kp(i,m))),o===1)throw u=yu,jo(i,0),Ii(i,h),Gn(i,ut()),u;if(o===6)Ii(i,h);else{if(m=i.current.alternate,(h&30)===0&&!wT(m)&&(o=Rd(i,h),o===2&&(_=sr(i),_!==0&&(h=_,o=Kp(i,_))),o===1))throw u=yu,jo(i,0),Ii(i,h),Gn(i,ut()),u;switch(i.finishedWork=m,i.finishedLanes=h,o){case 0:case 1:throw Error(n(345));case 2:Oo(i,Kn,zs);break;case 3:if(Ii(i,h),(h&130023424)===h&&(o=Wp+500-ut(),10<o)){if(_o(i,0)!==0)break;if(m=i.suspendedLanes,(m&h)!==h){jn(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=Xf(Oo.bind(null,i,Kn,zs),o);break}Oo(i,Kn,zs);break;case 4:if(Ii(i,h),(h&4194240)===h)break;for(o=i.eventTimes,m=-1;0<h;){var k=31-Nn(h);_=1<<k,k=o[k],k>m&&(m=k),h&=~_}if(h=m,h=ut()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*_T(h/1960))-h,10<h){i.timeoutHandle=Xf(Oo.bind(null,i,Kn,zs),h);break}Oo(i,Kn,zs);break;case 5:Oo(i,Kn,zs);break;default:throw Error(n(329))}}}return Gn(i,ut()),i.callbackNode===u?Ov.bind(null,i):null}function Kp(i,o){var u=vu;return i.current.memoizedState.isDehydrated&&(jo(i,o).flags|=256),i=Rd(i,o),i!==2&&(o=Kn,Kn=u,o!==null&&Gp(o)),i}function Gp(i){Kn===null?Kn=i:Kn.push.apply(Kn,i)}function wT(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var m=u[h],_=m.getSnapshot;m=m.value;try{if(!Ur(_(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ii(i,o){for(o&=~Bp,o&=~Ed,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Nn(o),h=1<<u;i[u]=-1,o&=~h}}function Mv(i){if((Je&6)!==0)throw Error(n(327));$a();var o=_o(i,0);if((o&1)===0)return Gn(i,ut()),null;var u=Rd(i,o);if(i.tag!==0&&u===2){var h=sr(i);h!==0&&(o=h,u=Kp(i,h))}if(u===1)throw u=yu,jo(i,0),Ii(i,o),Gn(i,ut()),u;if(u===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Oo(i,Kn,zs),Gn(i,ut()),null}function Qp(i,o){var u=Je;Je|=1;try{return i(o)}finally{Je=u,Je===0&&(Ua=ut()+500,rd&&vi())}}function Do(i){ki!==null&&ki.tag===0&&(Je&6)===0&&$a();var o=Je;Je|=1;var u=br.transition,h=We;try{if(br.transition=null,We=1,i)return i()}finally{We=h,br.transition=u,Je=o,(Je&6)===0&&vi()}}function Zp(){ur=za.current,ft(za)}function jo(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,ZI(u)),Ut!==null)for(u=Ut.return;u!==null;){var h=u;switch(ip(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&td();break;case 3:La(),ft(Wn),ft(wn),vp();break;case 5:gp(h);break;case 4:La();break;case 13:ft(bt);break;case 19:ft(bt);break;case 10:dp(h.type._context);break;case 22:case 23:Zp()}u=u.return}if(tn=i,Ut=i=Ti(i.current,null),fn=ur=o,Gt=0,yu=null,Bp=Ed=Po=0,Kn=vu=null,Ao!==null){for(o=0;o<Ao.length;o++)if(u=Ao[o],h=u.interleaved,h!==null){u.interleaved=null;var m=h.next,_=u.pending;if(_!==null){var k=_.next;_.next=m,h.next=k}u.pending=h}Ao=null}return i}function Lv(i,o){do{var u=Ut;try{if(cp(),fd.current=yd,pd){for(var h=kt.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}pd=!1}if(No=0,en=Kt=kt=null,du=!1,hu=0,$p.current=null,u===null||u.return===null){Gt=1,yu=o,Ut=null;break}e:{var _=i,k=u.return,R=u,L=o;if(o=fn,R.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var G=L,se=R,ae=se.tag;if((se.mode&1)===0&&(ae===0||ae===11||ae===15)){var re=se.alternate;re?(se.updateQueue=re.updateQueue,se.memoizedState=re.memoizedState,se.lanes=re.lanes):(se.updateQueue=null,se.memoizedState=null)}var he=lv(k);if(he!==null){he.flags&=-257,uv(he,k,R,_,o),he.mode&1&&av(_,G,o),o=he,L=G;var ge=o.updateQueue;if(ge===null){var _e=new Set;_e.add(L),o.updateQueue=_e}else ge.add(L);break e}else{if((o&1)===0){av(_,G,o),Jp();break e}L=Error(n(426))}}else if(_t&&R.mode&1){var jt=lv(k);if(jt!==null){(jt.flags&65536)===0&&(jt.flags|=256),uv(jt,k,R,_,o),lp(Va(L,R));break e}}_=L=Va(L,R),Gt!==4&&(Gt=2),vu===null?vu=[_]:vu.push(_),_=k;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var W=iv(_,L,o);P0(_,W);break e;case 1:R=L;var F=_.type,H=_.stateNode;if((_.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(bi===null||!bi.has(H)))){_.flags|=65536,o&=-o,_.lanes|=o;var le=ov(_,R,o);P0(_,le);break e}}_=_.return}while(_!==null)}zv(u)}catch(xe){o=xe,Ut===u&&u!==null&&(Ut=u=u.return);continue}break}while(!0)}function Vv(){var i=kd.current;return kd.current=yd,i===null?yd:i}function Jp(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),tn===null||(Po&268435455)===0&&(Ed&268435455)===0||Ii(tn,fn)}function Rd(i,o){var u=Je;Je|=2;var h=Vv();(tn!==i||fn!==o)&&(zs=null,jo(i,o));do try{xT();break}catch(m){Lv(i,m)}while(!0);if(cp(),Je=u,kd.current=h,Ut!==null)throw Error(n(261));return tn=null,fn=0,Gt}function xT(){for(;Ut!==null;)Fv(Ut)}function bT(){for(;Ut!==null&&!Sc();)Fv(Ut)}function Fv(i){var o=Bv(i.alternate,i,ur);i.memoizedProps=i.pendingProps,o===null?zv(i):Ut=o,$p.current=null}function zv(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=pT(u,o,ur),u!==null){Ut=u;return}}else{if(u=mT(u,o),u!==null){u.flags&=32767,Ut=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Gt=6,Ut=null;return}}if(o=o.sibling,o!==null){Ut=o;return}Ut=o=i}while(o!==null);Gt===0&&(Gt=5)}function Oo(i,o,u){var h=We,m=br.transition;try{br.transition=null,We=1,kT(i,o,u,h)}finally{br.transition=m,We=h}return null}function kT(i,o,u,h){do $a();while(ki!==null);if((Je&6)!==0)throw Error(n(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var _=u.lanes|u.childLanes;if(at(i,_),i===tn&&(Ut=tn=null,fn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Td||(Td=!0,Wv(mr,function(){return $a(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=br.transition,br.transition=null;var k=We;We=1;var R=Je;Je|=4,$p.current=null,yT(i,u),Rv(u,i),BI(Jf),hi=!!Zf,Jf=Zf=null,i.current=u,vT(u),jf(),Je=R,We=k,br.transition=_}else i.current=u;if(Td&&(Td=!1,ki=i,Sd=m),_=i.pendingLanes,_===0&&(bi=null),Rc(u.stateNode),Gn(i,ut()),o!==null)for(h=i.onRecoverableError,u=0;u<o.length;u++)m=o[u],h(m.value,{componentStack:m.stack,digest:m.digest});if(Id)throw Id=!1,i=qp,qp=null,i;return(Sd&1)!==0&&i.tag!==0&&$a(),_=i.pendingLanes,(_&1)!==0?i===Hp?_u++:(_u=0,Hp=i):_u=0,vi(),null}function $a(){if(ki!==null){var i=ci(Sd),o=br.transition,u=We;try{if(br.transition=null,We=16>i?16:i,ki===null)var h=!1;else{if(i=ki,ki=null,Sd=0,(Je&6)!==0)throw Error(n(331));var m=Je;for(Je|=4,pe=i.current;pe!==null;){var _=pe,k=_.child;if((pe.flags&16)!==0){var R=_.deletions;if(R!==null){for(var L=0;L<R.length;L++){var G=R[L];for(pe=G;pe!==null;){var se=pe;switch(se.tag){case 0:case 11:case 15:gu(8,se,_)}var ae=se.child;if(ae!==null)ae.return=se,pe=ae;else for(;pe!==null;){se=pe;var re=se.sibling,he=se.return;if(Iv(se),se===G){pe=null;break}if(re!==null){re.return=he,pe=re;break}pe=he}}}var ge=_.alternate;if(ge!==null){var _e=ge.child;if(_e!==null){ge.child=null;do{var jt=_e.sibling;_e.sibling=null,_e=jt}while(_e!==null)}}pe=_}}if((_.subtreeFlags&2064)!==0&&k!==null)k.return=_,pe=k;else e:for(;pe!==null;){if(_=pe,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:gu(9,_,_.return)}var W=_.sibling;if(W!==null){W.return=_.return,pe=W;break e}pe=_.return}}var F=i.current;for(pe=F;pe!==null;){k=pe;var H=k.child;if((k.subtreeFlags&2064)!==0&&H!==null)H.return=k,pe=H;else e:for(k=F;pe!==null;){if(R=pe,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:bd(9,R)}}catch(xe){Rt(R,R.return,xe)}if(R===k){pe=null;break e}var le=R.sibling;if(le!==null){le.return=R.return,pe=le;break e}pe=R.return}}if(Je=m,vi(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(vo,i)}catch{}h=!0}return h}finally{We=u,br.transition=o}}return!1}function Uv(i,o,u){o=Va(u,o),o=iv(i,o,1),i=wi(i,o,1),o=jn(),i!==null&&(li(i,1,o),Gn(i,o))}function Rt(i,o,u){if(i.tag===3)Uv(i,i,u);else for(;o!==null;){if(o.tag===3){Uv(o,i,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(bi===null||!bi.has(h))){i=Va(u,i),i=ov(o,i,1),o=wi(o,i,1),i=jn(),o!==null&&(li(o,1,i),Gn(o,i));break}}o=o.return}}function ET(i,o,u){var h=i.pingCache;h!==null&&h.delete(o),o=jn(),i.pingedLanes|=i.suspendedLanes&u,tn===i&&(fn&u)===u&&(Gt===4||Gt===3&&(fn&130023424)===fn&&500>ut()-Wp?jo(i,0):Bp|=u),Gn(i,o)}function $v(i,o){o===0&&((i.mode&1)===0?o=1:(o=da,da<<=1,(da&130023424)===0&&(da=4194304)));var u=jn();i=Ls(i,o),i!==null&&(li(i,o,u),Gn(i,u))}function IT(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),$v(i,u)}function TT(i,o){var u=0;switch(i.tag){case 13:var h=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(n(314))}h!==null&&h.delete(o),$v(i,u)}var Bv;Bv=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Wn.current)Hn=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return Hn=!1,fT(i,o,u);Hn=(i.flags&131072)!==0}else Hn=!1,_t&&(o.flags&1048576)!==0&&b0(o,id,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;wd(i,o),i=o.pendingProps;var m=Ra(o,wn.current);Ma(o,u),m=xp(null,o,h,i,m,u);var _=bp();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,qn(h)?(_=!0,nd(o)):_=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,pp(o),m.updater=vd,o.stateNode=m,m._reactInternals=o,Cp(o,h,i,u),o=Pp(null,o,h,!0,_,u)):(o.tag=0,_t&&_&&sp(o),Dn(null,o,m,u),o=o.child),o;case 16:h=o.elementType;e:{switch(wd(i,o),i=o.pendingProps,m=h._init,h=m(h._payload),o.type=h,m=o.tag=CT(h),i=Br(h,i),m){case 0:o=Np(null,o,h,i,u);break e;case 1:o=mv(null,o,h,i,u);break e;case 11:o=cv(null,o,h,i,u);break e;case 14:o=dv(null,o,h,Br(h.type,i),u);break e}throw Error(n(306,h,""))}return o;case 0:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:Br(h,m),Np(i,o,h,m,u);case 1:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:Br(h,m),mv(i,o,h,m,u);case 3:e:{if(gv(o),i===null)throw Error(n(387));h=o.pendingProps,_=o.memoizedState,m=_.element,N0(i,o),dd(o,h,null,u);var k=o.memoizedState;if(h=k.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){m=Va(Error(n(423)),o),o=yv(i,o,h,u,m);break e}else if(h!==m){m=Va(Error(n(424)),o),o=yv(i,o,h,u,m);break e}else for(lr=mi(o.stateNode.containerInfo.firstChild),ar=o,_t=!0,$r=null,u=A0(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Da(),h===m){o=Fs(i,o,u);break e}Dn(i,o,h,u)}o=o.child}return o;case 5:return j0(o),i===null&&ap(o),h=o.type,m=o.pendingProps,_=i!==null?i.memoizedProps:null,k=m.children,Yf(h,m)?k=null:_!==null&&Yf(h,_)&&(o.flags|=32),pv(i,o),Dn(i,o,k,u),o.child;case 6:return i===null&&ap(o),null;case 13:return vv(i,o,u);case 4:return mp(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=ja(o,null,h,u):Dn(i,o,h,u),o.child;case 11:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:Br(h,m),cv(i,o,h,m,u);case 7:return Dn(i,o,o.pendingProps,u),o.child;case 8:return Dn(i,o,o.pendingProps.children,u),o.child;case 12:return Dn(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(h=o.type._context,m=o.pendingProps,_=o.memoizedProps,k=m.value,ct(ld,h._currentValue),h._currentValue=k,_!==null)if(Ur(_.value,k)){if(_.children===m.children&&!Wn.current){o=Fs(i,o,u);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var R=_.dependencies;if(R!==null){k=_.child;for(var L=R.firstContext;L!==null;){if(L.context===h){if(_.tag===1){L=Vs(-1,u&-u),L.tag=2;var G=_.updateQueue;if(G!==null){G=G.shared;var se=G.pending;se===null?L.next=L:(L.next=se.next,se.next=L),G.pending=L}}_.lanes|=u,L=_.alternate,L!==null&&(L.lanes|=u),hp(_.return,u,o),R.lanes|=u;break}L=L.next}}else if(_.tag===10)k=_.type===o.type?null:_.child;else if(_.tag===18){if(k=_.return,k===null)throw Error(n(341));k.lanes|=u,R=k.alternate,R!==null&&(R.lanes|=u),hp(k,u,o),k=_.sibling}else k=_.child;if(k!==null)k.return=_;else for(k=_;k!==null;){if(k===o){k=null;break}if(_=k.sibling,_!==null){_.return=k.return,k=_;break}k=k.return}_=k}Dn(i,o,m.children,u),o=o.child}return o;case 9:return m=o.type,h=o.pendingProps.children,Ma(o,u),m=wr(m),h=h(m),o.flags|=1,Dn(i,o,h,u),o.child;case 14:return h=o.type,m=Br(h,o.pendingProps),m=Br(h.type,m),dv(i,o,h,m,u);case 15:return hv(i,o,o.type,o.pendingProps,u);case 17:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:Br(h,m),wd(i,o),o.tag=1,qn(h)?(i=!0,nd(o)):i=!1,Ma(o,u),rv(o,h,m),Cp(o,h,m,u),Pp(null,o,h,!0,i,u);case 19:return wv(i,o,u);case 22:return fv(i,o,u)}throw Error(n(156,o.tag))};function Wv(i,o){return ua(i,o)}function ST(i,o,u,h){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(i,o,u,h){return new ST(i,o,u,h)}function Yp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function CT(i){if(typeof i=="function")return Yp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===V)return 11;if(i===rt)return 14}return 2}function Ti(i,o){var u=i.alternate;return u===null?(u=kr(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Nd(i,o,u,h,m,_){var k=2;if(h=i,typeof i=="function")Yp(i)&&(k=1);else if(typeof i=="string")k=5;else e:switch(i){case C:return Mo(u.children,m,_,o);case I:k=8,m|=8;break;case A:return i=kr(12,u,o,m|2),i.elementType=A,i.lanes=_,i;case N:return i=kr(13,u,o,m),i.elementType=N,i.lanes=_,i;case Ve:return i=kr(19,u,o,m),i.elementType=Ve,i.lanes=_,i;case Te:return Pd(u,m,_,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:k=10;break e;case D:k=9;break e;case V:k=11;break e;case rt:k=14;break e;case Ge:k=16,h=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return o=kr(k,u,o,m),o.elementType=i,o.type=h,o.lanes=_,o}function Mo(i,o,u,h){return i=kr(7,i,h,o),i.lanes=u,i}function Pd(i,o,u,h){return i=kr(22,i,h,o),i.elementType=Te,i.lanes=u,i.stateNode={isHidden:!1},i}function Xp(i,o,u){return i=kr(6,i,null,o),i.lanes=u,i}function em(i,o,u){return o=kr(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function AT(i,o,u,h,m){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ai(0),this.expirationTimes=ai(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ai(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function tm(i,o,u,h,m,_,k,R,L){return i=new AT(i,o,u,R,L),o===1?(o=1,_===!0&&(o|=8)):o=0,_=kr(3,null,null,o),i.current=_,_.stateNode=i,_.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},pp(_),i}function RT(i,o,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:h==null?null:""+h,children:i,containerInfo:o,implementation:u}}function qv(i){if(!i)return yi;i=i._reactInternals;e:{if(jr(i)!==i||i.tag!==1)throw Error(n(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(qn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(i.tag===1){var u=i.type;if(qn(u))return _0(i,u,o)}return o}function Hv(i,o,u,h,m,_,k,R,L){return i=tm(u,h,!0,i,m,_,k,R,L),i.context=qv(null),u=i.current,h=jn(),m=Ei(u),_=Vs(h,m),_.callback=o??null,wi(u,_,m),i.current.lanes=m,li(i,m,h),Gn(i,h),i}function Dd(i,o,u,h){var m=o.current,_=jn(),k=Ei(m);return u=qv(u),o.context===null?o.context=u:o.pendingContext=u,o=Vs(_,k),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=wi(m,o,k),i!==null&&(Hr(i,m,k,_),cd(i,m,k)),k}function jd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Kv(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function nm(i,o){Kv(i,o),(i=i.alternate)&&Kv(i,o)}function NT(){return null}var Gv=typeof reportError=="function"?reportError:function(i){console.error(i)};function rm(i){this._internalRoot=i}Od.prototype.render=rm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));Dd(i,o,null,null)},Od.prototype.unmount=rm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Do(function(){Dd(null,i,null,null)}),o[Ds]=null}};function Od(i){this._internalRoot=i}Od.prototype.unstable_scheduleHydration=function(i){if(i){var o=Oc();i={blockedOn:null,target:i,priority:o};for(var u=0;u<is.length&&o!==0&&o<is[u].priority;u++);is.splice(u,0,i),u===0&&Vc(i)}};function sm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Md(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Qv(){}function PT(i,o,u,h,m){if(m){if(typeof h=="function"){var _=h;h=function(){var G=jd(k);_.call(G)}}var k=Hv(o,h,i,0,null,!1,!1,"",Qv);return i._reactRootContainer=k,i[Ds]=k.current,ru(i.nodeType===8?i.parentNode:i),Do(),k}for(;m=i.lastChild;)i.removeChild(m);if(typeof h=="function"){var R=h;h=function(){var G=jd(L);R.call(G)}}var L=tm(i,0,!1,null,null,!1,!1,"",Qv);return i._reactRootContainer=L,i[Ds]=L.current,ru(i.nodeType===8?i.parentNode:i),Do(function(){Dd(o,L,u,h)}),L}function Ld(i,o,u,h,m){var _=u._reactRootContainer;if(_){var k=_;if(typeof m=="function"){var R=m;m=function(){var L=jd(k);R.call(L)}}Dd(o,k,i,m)}else k=PT(u,o,i,m,h);return jd(k)}Dc=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=oi(o.pendingLanes);u!==0&&(ui(o,u|1),Gn(o,ut()),(Je&6)===0&&(Ua=ut()+500,vi()))}break;case 13:Do(function(){var h=Ls(i,1);if(h!==null){var m=jn();Hr(h,i,1,m)}}),nm(i,1)}},ha=function(i){if(i.tag===13){var o=Ls(i,134217728);if(o!==null){var u=jn();Hr(o,i,134217728,u)}nm(i,134217728)}},jc=function(i){if(i.tag===13){var o=Ei(i),u=Ls(i,o);if(u!==null){var h=jn();Hr(u,i,o,h)}nm(i,o)}},Oc=function(){return We},Mc=function(i,o){var u=We;try{return We=i,o()}finally{We=u}},si=function(i,o,u){switch(o){case"input":if(ti(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==i&&h.form===i.form){var m=ed(h);if(!m)throw Error(n(90));Ct(h),ti(h,m)}}}break;case"textarea":Ts(i,u);break;case"select":o=u.value,o!=null&&Fn(i,!!u.multiple,o,!1)}},Lt=Qp,qt=Do;var DT={usingClientEntryPoint:!1,Events:[ou,Ca,ed,yt,Un,Qp]},wu={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jT={bundleType:wu.bundleType,version:wu.version,rendererPackageName:wu.rendererPackageName,rendererConfig:wu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Ul(i),i===null?null:i.stateNode},findFiberByHostInstance:wu.findFiberByHostInstance||NT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vd.isDisabled&&Vd.supportsFiber)try{vo=Vd.inject(jT),rr=Vd}catch{}}return Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DT,Qn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sm(o))throw Error(n(200));return RT(i,o,null,u)},Qn.createRoot=function(i,o){if(!sm(i))throw Error(n(299));var u=!1,h="",m=Gv;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=tm(i,1,!1,null,null,u,!1,h,m),i[Ds]=o.current,ru(i.nodeType===8?i.parentNode:i),new rm(o)},Qn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Ul(o),i=i===null?null:i.stateNode,i},Qn.flushSync=function(i){return Do(i)},Qn.hydrate=function(i,o,u){if(!Md(o))throw Error(n(200));return Ld(null,i,o,!0,u)},Qn.hydrateRoot=function(i,o,u){if(!sm(i))throw Error(n(405));var h=u!=null&&u.hydratedSources||null,m=!1,_="",k=Gv;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(k=u.onRecoverableError)),o=Hv(o,null,i,1,u??null,m,!1,_,k),i[Ds]=o.current,ru(i),h)for(i=0;i<h.length;i++)u=h[i],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new Od(o)},Qn.render=function(i,o,u){if(!Md(o))throw Error(n(200));return Ld(null,i,o,!1,u)},Qn.unmountComponentAtNode=function(i){if(!Md(i))throw Error(n(40));return i._reactRootContainer?(Do(function(){Ld(null,null,i,!1,function(){i._reactRootContainer=null,i[Ds]=null})}),!0):!1},Qn.unstable_batchedUpdates=Qp,Qn.unstable_renderSubtreeIntoContainer=function(i,o,u,h){if(!Md(u))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Ld(i,o,u,!1,h)},Qn.version="18.3.1-next-f1338f8080-20240426",Qn}var h_;function $x(){if(h_)return lm.exports;h_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),lm.exports=gS(),lm.exports}var f_;function yS(){if(f_)return Ud;f_=1;var t=$x();return Ud.createRoot=t.createRoot,Ud.hydrateRoot=t.hydrateRoot,Ud}var vS=yS();const _S=Ox(vS);var Qa=$x();function wS(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return M.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Zh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function El(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Eg(t){return"nodeType"in t}function Jn(t){var e,n;return t?El(t)?t:Eg(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Ig(t){const{Document:e}=Jn(t);return t instanceof e}function ac(t){return El(t)?!1:t instanceof Jn(t).HTMLElement}function Bx(t){return t instanceof Jn(t).SVGElement}function Il(t){return t?El(t)?t.document:Eg(t)?Ig(t)?t:ac(t)||Bx(t)?t.ownerDocument:document:document:document}const bs=Zh?M.useLayoutEffect:M.useEffect;function Tg(t){const e=M.useRef(t);return bs(()=>{e.current=t}),M.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function xS(){const t=M.useRef(null),e=M.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=M.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Uu(t,e){e===void 0&&(e=[t]);const n=M.useRef(t);return bs(()=>{n.current!==t&&(n.current=t)},e),n}function lc(t,e){const n=M.useRef();return M.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function bh(t){const e=Tg(t),n=M.useRef(null),r=M.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Lm(t){const e=M.useRef();return M.useEffect(()=>{e.current=t},[t]),e.current}let dm={};function uc(t,e){return M.useMemo(()=>{if(e)return e;const n=dm[t]==null?0:dm[t]+1;return dm[t]=n,t+"-"+n},[t,e])}function Wx(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,l)=>{const d=Object.entries(l);for(const[f,p]of d){const v=a[f];v!=null&&(a[f]=v+t*p)}return a},{...e})}}const el=Wx(1),$u=Wx(-1);function bS(t){return"clientX"in t&&"clientY"in t}function Sg(t){if(!t)return!1;const{KeyboardEvent:e}=Jn(t.target);return e&&t instanceof e}function kS(t){if(!t)return!1;const{TouchEvent:e}=Jn(t.target);return e&&t instanceof e}function Vm(t){if(kS(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return bS(t)?{x:t.clientX,y:t.clientY}:null}const Bu=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Bu.Translate.toString(t),Bu.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),p_="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ES(t){return t.matches(p_)?t:t.querySelector(p_)}const IS={display:"none"};function TS(t){let{id:e,value:n}=t;return nt.createElement("div",{id:e,style:IS},n)}function SS(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return nt.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function CS(){const[t,e]=M.useState("");return{announce:M.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const qx=M.createContext(null);function AS(t){const e=M.useContext(qx);M.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function RS(){const[t]=M.useState(()=>new Set),e=M.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[M.useCallback(r=>{let{type:s,event:a}=r;t.forEach(l=>{var d;return(d=l[s])==null?void 0:d.call(l,a)})},[t]),e]}const NS={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},PS={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function DS(t){let{announcements:e=PS,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=NS}=t;const{announce:a,announcement:l}=CS(),d=uc("DndLiveRegion"),[f,p]=M.useState(!1);if(M.useEffect(()=>{p(!0)},[]),AS(M.useMemo(()=>({onDragStart(w){let{active:b}=w;a(e.onDragStart({active:b}))},onDragMove(w){let{active:b,over:E}=w;e.onDragMove&&a(e.onDragMove({active:b,over:E}))},onDragOver(w){let{active:b,over:E}=w;a(e.onDragOver({active:b,over:E}))},onDragEnd(w){let{active:b,over:E}=w;a(e.onDragEnd({active:b,over:E}))},onDragCancel(w){let{active:b,over:E}=w;a(e.onDragCancel({active:b,over:E}))}}),[a,e])),!f)return null;const v=nt.createElement(nt.Fragment,null,nt.createElement(TS,{id:r,value:s.draggable}),nt.createElement(SS,{id:d,announcement:l}));return n?Qa.createPortal(v,n):v}var Zt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Zt||(Zt={}));function kh(){}function Fm(t,e){return M.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Hx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return M.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Zr=Object.freeze({x:0,y:0});function Kx(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Gx(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function jS(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function m_(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function Qx(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function g_(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Zx=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=g_(e,e.left,e.top),a=[];for(const l of r){const{id:d}=l,f=n.get(d);if(f){const p=Kx(g_(f),s);a.push({id:d,data:{droppableContainer:l,value:p}})}}return a.sort(Gx)},OS=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=m_(e),a=[];for(const l of r){const{id:d}=l,f=n.get(d);if(f){const p=m_(f),v=s.reduce((b,E,O)=>b+Kx(p[O],E),0),w=Number((v/4).toFixed(4));a.push({id:d,data:{droppableContainer:l,value:w}})}}return a.sort(Gx)};function MS(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),l=s-r,d=a-n;if(r<s&&n<a){const f=e.width*e.height,p=t.width*t.height,v=l*d,w=v/(f+p-v);return Number(w.toFixed(4))}return 0}const LS=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const a of r){const{id:l}=a,d=n.get(l);if(d){const f=MS(d,e);f>0&&s.push({id:l,data:{droppableContainer:a,value:f}})}}return s.sort(jS)};function VS(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Jx(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Zr}function FS(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((l,d)=>({...l,top:l.top+t*d.y,bottom:l.bottom+t*d.y,left:l.left+t*d.x,right:l.right+t*d.x}),{...n})}}const zS=FS(1);function US(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function $S(t,e,n){const r=US(e);if(!r)return t;const{scaleX:s,scaleY:a,x:l,y:d}=r,f=t.left-l-(1-s)*parseFloat(n),p=t.top-d-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),v=s?t.width/s:t.width,w=a?t.height/a:t.height;return{width:v,height:w,top:p,right:f+v,bottom:p+w,left:f}}const BS={ignoreTransform:!1};function Tl(t,e){e===void 0&&(e=BS);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:v}=Jn(t).getComputedStyle(t);p&&(n=$S(n,p,v))}const{top:r,left:s,width:a,height:l,bottom:d,right:f}=n;return{top:r,left:s,width:a,height:l,bottom:d,right:f}}function y_(t){return Tl(t,{ignoreTransform:!0})}function WS(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function qS(t,e){return e===void 0&&(e=Jn(t).getComputedStyle(t)),e.position==="fixed"}function HS(t,e){e===void 0&&(e=Jn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=e[s];return typeof a=="string"?n.test(a):!1})}function Jh(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(Ig(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ac(s)||Bx(s)||n.includes(s))return n;const a=Jn(t).getComputedStyle(s);return s!==t&&HS(s,a)&&n.push(s),qS(s,a)?n:r(s.parentNode)}return t?r(t):n}function Yx(t){const[e]=Jh(t,1);return e??null}function hm(t){return!Zh||!t?null:El(t)?t:Eg(t)?Ig(t)||t===Il(t).scrollingElement?window:ac(t)?t:null:null}function Xx(t){return El(t)?t.scrollX:t.scrollLeft}function eb(t){return El(t)?t.scrollY:t.scrollTop}function zm(t){return{x:Xx(t),y:eb(t)}}var on;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(on||(on={}));function tb(t){return!Zh||!t?!1:t===document.scrollingElement}function nb(t){const e={x:0,y:0},n=tb(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,l=t.scrollTop>=r.y,d=t.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:l,isRight:d,maxScroll:r,minScroll:e}}const KS={x:.2,y:.2};function GS(t,e,n,r,s){let{top:a,left:l,right:d,bottom:f}=n;r===void 0&&(r=10),s===void 0&&(s=KS);const{isTop:p,isBottom:v,isLeft:w,isRight:b}=nb(t),E={x:0,y:0},O={x:0,y:0},S={height:e.height*s.y,width:e.width*s.x};return!p&&a<=e.top+S.height?(E.y=on.Backward,O.y=r*Math.abs((e.top+S.height-a)/S.height)):!v&&f>=e.bottom-S.height&&(E.y=on.Forward,O.y=r*Math.abs((e.bottom-S.height-f)/S.height)),!b&&d>=e.right-S.width?(E.x=on.Forward,O.x=r*Math.abs((e.right-S.width-d)/S.width)):!w&&l<=e.left+S.width&&(E.x=on.Backward,O.x=r*Math.abs((e.left+S.width-l)/S.width)),{direction:E,speed:O}}function QS(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:l}=window;return{top:0,left:0,right:a,bottom:l,width:a,height:l}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function rb(t){return t.reduce((e,n)=>el(e,zm(n)),Zr)}function ZS(t){return t.reduce((e,n)=>e+Xx(n),0)}function JS(t){return t.reduce((e,n)=>e+eb(n),0)}function YS(t,e){if(e===void 0&&(e=Tl),!t)return;const{top:n,left:r,bottom:s,right:a}=e(t);Yx(t)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const XS=[["x",["left","right"],ZS],["y",["top","bottom"],JS]];class Cg{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Jh(n),s=rb(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,l,d]of XS)for(const f of l)Object.defineProperty(this,f,{get:()=>{const p=d(r),v=s[a]-p;return this.rect[f]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Nu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function e1(t){const{EventTarget:e}=Jn(t);return t instanceof e?t:Il(t)}function fm(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Ir;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ir||(Ir={}));function v_(t){t.preventDefault()}function t1(t){t.stopPropagation()}var He;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(He||(He={}));const sb={start:[He.Space,He.Enter],cancel:[He.Esc],end:[He.Space,He.Enter,He.Tab]},n1=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case He.Right:return{...n,x:n.x+25};case He.Left:return{...n,x:n.x-25};case He.Down:return{...n,y:n.y+25};case He.Up:return{...n,y:n.y-25}}};class Ag{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Nu(Il(n)),this.windowListeners=new Nu(Jn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ir.Resize,this.handleCancel),this.windowListeners.add(Ir.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ir.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&YS(r),n(Zr)}handleKeyDown(e){if(Sg(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=sb,coordinateGetter:l=n1,scrollBehavior:d="smooth"}=s,{code:f}=e;if(a.end.includes(f)){this.handleEnd(e);return}if(a.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:p}=r.current,v=p?{x:p.left,y:p.top}:Zr;this.referenceCoordinates||(this.referenceCoordinates=v);const w=l(e,{active:n,context:r.current,currentCoordinates:v});if(w){const b=$u(w,v),E={x:0,y:0},{scrollableAncestors:O}=r.current;for(const S of O){const P=e.code,{isTop:B,isRight:q,isLeft:K,isBottom:Y,maxScroll:J,minScroll:te}=nb(S),C=QS(S),I={x:Math.min(P===He.Right?C.right-C.width/2:C.right,Math.max(P===He.Right?C.left:C.left+C.width/2,w.x)),y:Math.min(P===He.Down?C.bottom-C.height/2:C.bottom,Math.max(P===He.Down?C.top:C.top+C.height/2,w.y))},A=P===He.Right&&!q||P===He.Left&&!K,j=P===He.Down&&!Y||P===He.Up&&!B;if(A&&I.x!==w.x){const D=S.scrollLeft+b.x,V=P===He.Right&&D<=J.x||P===He.Left&&D>=te.x;if(V&&!b.y){S.scrollTo({left:D,behavior:d});return}V?E.x=S.scrollLeft-D:E.x=P===He.Right?S.scrollLeft-J.x:S.scrollLeft-te.x,E.x&&S.scrollBy({left:-E.x,behavior:d});break}else if(j&&I.y!==w.y){const D=S.scrollTop+b.y,V=P===He.Down&&D<=J.y||P===He.Up&&D>=te.y;if(V&&!b.x){S.scrollTo({top:D,behavior:d});return}V?E.y=S.scrollTop-D:E.y=P===He.Down?S.scrollTop-J.y:S.scrollTop-te.y,E.y&&S.scrollBy({top:-E.y,behavior:d});break}}this.handleMove(e,el($u(w,this.referenceCoordinates),E))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ag.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=sb,onActivation:s}=e,{active:a}=n;const{code:l}=t.nativeEvent;if(r.start.includes(l)){const d=a.activatorNode.current;return d&&t.target!==d?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function __(t){return!!(t&&"distance"in t)}function w_(t){return!!(t&&"delay"in t)}class Rg{constructor(e,n,r){var s;r===void 0&&(r=e1(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:a}=e,{target:l}=a;this.props=e,this.events=n,this.document=Il(l),this.documentListeners=new Nu(this.document),this.listeners=new Nu(r),this.windowListeners=new Nu(Jn(l)),this.initialCoordinates=(s=Vm(a))!=null?s:Zr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ir.Resize,this.handleCancel),this.windowListeners.add(Ir.DragStart,v_),this.windowListeners.add(Ir.VisibilityChange,this.handleCancel),this.windowListeners.add(Ir.ContextMenu,v_),this.documentListeners.add(Ir.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(w_(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(__(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ir.Click,t1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ir.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:l,options:{activationConstraint:d}}=a;if(!s)return;const f=(n=Vm(e))!=null?n:Zr,p=$u(s,f);if(!r&&d){if(__(d)){if(d.tolerance!=null&&fm(p,d.tolerance))return this.handleCancel();if(fm(p,d.distance))return this.handleStart()}if(w_(d)&&fm(p,d.tolerance))return this.handleCancel();this.handlePending(d,p);return}e.cancelable&&e.preventDefault(),l(f)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===He.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const r1={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Yh extends Rg{constructor(e){const{event:n}=e,r=Il(n.target);super(e,r1,r)}}Yh.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const s1={move:{name:"mousemove"},end:{name:"mouseup"}};var Um;(function(t){t[t.RightClick=2]="RightClick"})(Um||(Um={}));class i1 extends Rg{constructor(e){super(e,s1,Il(e.event.target))}}i1.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Um.RightClick?!1:(r==null||r({event:n}),!0)}}];const pm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class o1 extends Rg{constructor(e){super(e,pm)}static setup(){return window.addEventListener(pm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(pm.move.name,e)};function e(){}}}o1.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Pu;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Pu||(Pu={}));var Eh;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Eh||(Eh={}));function a1(t){let{acceleration:e,activator:n=Pu.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:l=5,order:d=Eh.TreeOrder,pointerCoordinates:f,scrollableAncestors:p,scrollableAncestorRects:v,delta:w,threshold:b}=t;const E=u1({delta:w,disabled:!a}),[O,S]=xS(),P=M.useRef({x:0,y:0}),B=M.useRef({x:0,y:0}),q=M.useMemo(()=>{switch(n){case Pu.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case Pu.DraggableRect:return s}},[n,s,f]),K=M.useRef(null),Y=M.useCallback(()=>{const te=K.current;if(!te)return;const C=P.current.x*B.current.x,I=P.current.y*B.current.y;te.scrollBy(C,I)},[]),J=M.useMemo(()=>d===Eh.TreeOrder?[...p].reverse():p,[d,p]);M.useEffect(()=>{if(!a||!p.length||!q){S();return}for(const te of J){if((r==null?void 0:r(te))===!1)continue;const C=p.indexOf(te),I=v[C];if(!I)continue;const{direction:A,speed:j}=GS(te,I,q,e,b);for(const D of["x","y"])E[D][A[D]]||(j[D]=0,A[D]=0);if(j.x>0||j.y>0){S(),K.current=te,O(Y,l),P.current=j,B.current=A;return}}P.current={x:0,y:0},B.current={x:0,y:0},S()},[e,Y,r,S,a,l,JSON.stringify(q),JSON.stringify(E),O,p,J,v,JSON.stringify(b)])}const l1={x:{[on.Backward]:!1,[on.Forward]:!1},y:{[on.Backward]:!1,[on.Forward]:!1}};function u1(t){let{delta:e,disabled:n}=t;const r=Lm(e);return lc(s=>{if(n||!r||!s)return l1;const a={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[on.Backward]:s.x[on.Backward]||a.x===-1,[on.Forward]:s.x[on.Forward]||a.x===1},y:{[on.Backward]:s.y[on.Backward]||a.y===-1,[on.Forward]:s.y[on.Forward]||a.y===1}}},[n,e,r])}function c1(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return lc(s=>{var a;return e==null?null:(a=r??s)!=null?a:null},[r,e])}function d1(t,e){return M.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,r)}));return[...n,...a]},[]),[t,e])}var Wu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Wu||(Wu={}));var $m;(function(t){t.Optimized="optimized"})($m||($m={}));const x_=new Map;function h1(t,e){let{dragging:n,dependencies:r,config:s}=e;const[a,l]=M.useState(null),{frequency:d,measure:f,strategy:p}=s,v=M.useRef(t),w=P(),b=Uu(w),E=M.useCallback(function(B){B===void 0&&(B=[]),!b.current&&l(q=>q===null?B:q.concat(B.filter(K=>!q.includes(K))))},[b]),O=M.useRef(null),S=lc(B=>{if(w&&!n)return x_;if(!B||B===x_||v.current!==t||a!=null){const q=new Map;for(let K of t){if(!K)continue;if(a&&a.length>0&&!a.includes(K.id)&&K.rect.current){q.set(K.id,K.rect.current);continue}const Y=K.node.current,J=Y?new Cg(f(Y),Y):null;K.rect.current=J,J&&q.set(K.id,J)}return q}return B},[t,a,n,w,f]);return M.useEffect(()=>{v.current=t},[t]),M.useEffect(()=>{w||E()},[n,w]),M.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),M.useEffect(()=>{w||typeof d!="number"||O.current!==null||(O.current=setTimeout(()=>{E(),O.current=null},d))},[d,w,E,...r]),{droppableRects:S,measureDroppableContainers:E,measuringScheduled:a!=null};function P(){switch(p){case Wu.Always:return!1;case Wu.BeforeDragging:return n;default:return!n}}}function ib(t,e){return lc(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function f1(t,e){return ib(t,e)}function p1(t){let{callback:e,disabled:n}=t;const r=Tg(e),s=M.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return M.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Xh(t){let{callback:e,disabled:n}=t;const r=Tg(e),s=M.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return M.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function m1(t){return new Cg(Tl(t),t)}function b_(t,e,n){e===void 0&&(e=m1);const[r,s]=M.useState(null);function a(){s(f=>{if(!t)return null;if(t.isConnected===!1){var p;return(p=f??n)!=null?p:null}const v=e(t);return JSON.stringify(f)===JSON.stringify(v)?f:v})}const l=p1({callback(f){if(t)for(const p of f){const{type:v,target:w}=p;if(v==="childList"&&w instanceof HTMLElement&&w.contains(t)){a();break}}}}),d=Xh({callback:a});return bs(()=>{a(),t?(d==null||d.observe(t),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(d==null||d.disconnect(),l==null||l.disconnect())},[t]),r}function g1(t){const e=ib(t);return Jx(t,e)}const k_=[];function y1(t){const e=M.useRef(t),n=lc(r=>t?r&&r!==k_&&t&&e.current&&t.parentNode===e.current.parentNode?r:Jh(t):k_,[t]);return M.useEffect(()=>{e.current=t},[t]),n}function v1(t){const[e,n]=M.useState(null),r=M.useRef(t),s=M.useCallback(a=>{const l=hm(a.target);l&&n(d=>d?(d.set(l,zm(l)),new Map(d)):null)},[]);return M.useEffect(()=>{const a=r.current;if(t!==a){l(a);const d=t.map(f=>{const p=hm(f);return p?(p.addEventListener("scroll",s,{passive:!0}),[p,zm(p)]):null}).filter(f=>f!=null);n(d.length?new Map(d):null),r.current=t}return()=>{l(t),l(a)};function l(d){d.forEach(f=>{const p=hm(f);p==null||p.removeEventListener("scroll",s)})}},[s,t]),M.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,l)=>el(a,l),Zr):rb(t):Zr,[t,e])}function E_(t,e){e===void 0&&(e=[]);const n=M.useRef(null);return M.useEffect(()=>{n.current=null},e),M.useEffect(()=>{const r=t!==Zr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?$u(t,n.current):Zr}function _1(t){M.useEffect(()=>{if(!Zh)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function w1(t,e){return M.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=l=>{a(l,e)},n},{}),[t,e])}function ob(t){return M.useMemo(()=>t?WS(t):null,[t])}const I_=[];function x1(t,e){e===void 0&&(e=Tl);const[n]=t,r=ob(n?Jn(n):null),[s,a]=M.useState(I_);function l(){a(()=>t.length?t.map(f=>tb(f)?r:new Cg(e(f),f)):I_)}const d=Xh({callback:l});return bs(()=>{d==null||d.disconnect(),l(),t.forEach(f=>d==null?void 0:d.observe(f))},[t]),s}function b1(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ac(e)?e:t}function k1(t){let{measure:e}=t;const[n,r]=M.useState(null),s=M.useCallback(p=>{for(const{target:v}of p)if(ac(v)){r(w=>{const b=e(v);return w?{...w,width:b.width,height:b.height}:b});break}},[e]),a=Xh({callback:s}),l=M.useCallback(p=>{const v=b1(p);a==null||a.disconnect(),v&&(a==null||a.observe(v)),r(v?e(v):null)},[e,a]),[d,f]=bh(l);return M.useMemo(()=>({nodeRef:d,rect:n,setRef:f}),[n,d,f])}const E1=[{sensor:Yh,options:{}},{sensor:Ag,options:{}}],I1={current:{}},sh={draggable:{measure:y_},droppable:{measure:y_,strategy:Wu.WhileDragging,frequency:$m.Optimized},dragOverlay:{measure:Tl}};class Du extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const T1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Du,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:kh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:sh,measureDroppableContainers:kh,windowRect:null,measuringScheduled:!1},S1={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:kh,draggableNodes:new Map,over:null,measureDroppableContainers:kh},ef=M.createContext(S1),ab=M.createContext(T1);function C1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Du}}}function A1(t,e){switch(e.type){case Zt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Zt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Zt.DragEnd:case Zt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Zt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Du(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Zt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const l=new Du(t.droppable.containers);return l.set(n,{...a,disabled:s}),{...t,droppable:{...t.droppable,containers:l}}}case Zt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const a=new Du(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function R1(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=M.useContext(ef),a=Lm(r),l=Lm(n==null?void 0:n.id);return M.useEffect(()=>{if(!e&&!r&&a&&l!=null){if(!Sg(a)||document.activeElement===a.target)return;const d=s.get(l);if(!d)return;const{activatorNode:f,node:p}=d;if(!f.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[f.current,p.current]){if(!v)continue;const w=ES(v);if(w){w.focus();break}}})}},[r,e,s,l,a]),null}function N1(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,a)=>a({transform:s,...r}),n):n}function P1(t){return M.useMemo(()=>({draggable:{...sh.draggable,...t==null?void 0:t.draggable},droppable:{...sh.droppable,...t==null?void 0:t.droppable},dragOverlay:{...sh.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function D1(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const a=M.useRef(!1),{x:l,y:d}=typeof s=="boolean"?{x:s,y:s}:s;bs(()=>{if(!l&&!d||!e){a.current=!1;return}if(a.current||!r)return;const p=e==null?void 0:e.node.current;if(!p||p.isConnected===!1)return;const v=n(p),w=Jx(v,r);if(l||(w.x=0),d||(w.y=0),a.current=!0,Math.abs(w.x)>0||Math.abs(w.y)>0){const b=Yx(p);b&&b.scrollBy({top:w.y,left:w.x})}},[e,l,d,r,n])}const lb=M.createContext({...Zr,scaleX:1,scaleY:1});var Ni;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ni||(Ni={}));const ub=M.memo(function(e){var n,r,s,a;let{id:l,accessibility:d,autoScroll:f=!0,children:p,sensors:v=E1,collisionDetection:w=LS,measuring:b,modifiers:E,...O}=e;const S=M.useReducer(A1,void 0,C1),[P,B]=S,[q,K]=RS(),[Y,J]=M.useState(Ni.Uninitialized),te=Y===Ni.Initialized,{draggable:{active:C,nodes:I,translate:A},droppable:{containers:j}}=P,D=C!=null?I.get(C):null,V=M.useRef({initial:null,translated:null}),N=M.useMemo(()=>{var ot;return C!=null?{id:C,data:(ot=D==null?void 0:D.data)!=null?ot:I1,rect:V}:null},[C,D]),Ve=M.useRef(null),[rt,Ge]=M.useState(null),[Te,Z]=M.useState(null),fe=Uu(O,Object.values(O)),ce=uc("DndDescribedBy",l),U=M.useMemo(()=>j.getEnabled(),[j]),z=P1(b),{droppableRects:oe,measureDroppableContainers:de,measuringScheduled:ke}=h1(U,{dragging:te,dependencies:[A.x,A.y],config:z.droppable}),Se=c1(I,C),Ee=M.useMemo(()=>Te?Vm(Te):null,[Te]),Le=zn(),Fe=f1(Se,z.draggable.measure);D1({activeNode:C!=null?I.get(C):null,config:Le.layoutShiftCompensation,initialRect:Fe,measure:z.draggable.measure});const Ce=b_(Se,z.draggable.measure,Fe),Wt=b_(Se?Se.parentElement:null),Ct=M.useRef({activatorEvent:null,active:null,activeNode:Se,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),An=j.getNodeFor((n=Ct.current.over)==null?void 0:n.id),ln=k1({measure:z.dragOverlay.measure}),tr=(r=ln.nodeRef.current)!=null?r:Se,hr=te?(s=ln.rect)!=null?s:Ce:null,ti=!!(ln.nodeRef.current&&ln.rect),uo=g1(ti?null:Ce),es=ob(tr?Jn(tr):null),Yt=y1(te?An??Se:null),Fn=x1(Yt),ts=N1(E,{transform:{x:A.x-uo.x,y:A.y-uo.y,scaleX:1,scaleY:1},activatorEvent:Te,active:N,activeNodeRect:Ce,containerNodeRect:Wt,draggingNodeRect:hr,over:Ct.current.over,overlayNodeRect:ln.rect,scrollableAncestors:Yt,scrollableAncestorRects:Fn,windowRect:es}),Is=Ee?el(Ee,A):null,Ts=v1(Yt),co=E_(Ts),Dt=E_(Ts,[Ce]),lt=el(ts,co),vn=hr?zS(hr,ts):null,Nr=N&&vn?w({active:N,collisionRect:vn,droppableRects:oe,droppableContainers:U,pointerCoordinates:Is}):null,Pr=Qx(Nr,"id"),[_n,ns]=M.useState(null),ho=ti?ts:el(ts,Dt),fo=VS(ho,(a=_n==null?void 0:_n.rect)!=null?a:null,Ce),Ss=M.useRef(null),ni=M.useCallback((ot,Mt)=>{let{sensor:yt,options:Un}=Mt;if(Ve.current==null)return;const Lt=I.get(Ve.current);if(!Lt)return;const qt=ot.nativeEvent,Vt=new yt({active:Ve.current,activeNode:Lt,event:qt,options:Un,context:Ct,onAbort(ze){if(!I.get(ze))return;const{onDragAbort:At}=fe.current,un={id:ze};At==null||At(un),q({type:"onDragAbort",event:un})},onPending(ze,Rn,At,un){if(!I.get(ze))return;const{onDragPending:pr}=fe.current,Ft={id:ze,constraint:Rn,initialCoordinates:At,offset:un};pr==null||pr(Ft),q({type:"onDragPending",event:Ft})},onStart(ze){const Rn=Ve.current;if(Rn==null)return;const At=I.get(Rn);if(!At)return;const{onDragStart:un}=fe.current,nr={activatorEvent:qt,active:{id:Rn,data:At.data,rect:V}};Qa.unstable_batchedUpdates(()=>{un==null||un(nr),J(Ni.Initializing),B({type:Zt.DragStart,initialCoordinates:ze,active:Rn}),q({type:"onDragStart",event:nr}),Ge(Ss.current),Z(qt)})},onMove(ze){B({type:Zt.DragMove,coordinates:ze})},onEnd:fr(Zt.DragEnd),onCancel:fr(Zt.DragCancel)});Ss.current=Vt;function fr(ze){return async function(){const{active:At,collisions:un,over:nr,scrollAdjustedTranslate:pr}=Ct.current;let Ft=null;if(At&&pr){const{cancelDrop:Dr}=fe.current;Ft={activatorEvent:qt,active:At,collisions:un,delta:pr,over:nr},ze===Zt.DragEnd&&typeof Dr=="function"&&await Promise.resolve(Dr(Ft))&&(ze=Zt.DragCancel)}Ve.current=null,Qa.unstable_batchedUpdates(()=>{B({type:ze}),J(Ni.Uninitialized),ns(null),Ge(null),Z(null),Ss.current=null;const Dr=ze===Zt.DragEnd?"onDragEnd":"onDragCancel";if(Ft){const mo=fe.current[Dr];mo==null||mo(Ft),q({type:Dr,event:Ft})}})}}},[I]),po=M.useCallback((ot,Mt)=>(yt,Un)=>{const Lt=yt.nativeEvent,qt=I.get(Un);if(Ve.current!==null||!qt||Lt.dndKit||Lt.defaultPrevented)return;const Vt={active:qt};ot(yt,Mt.options,Vt)===!0&&(Lt.dndKit={capturedBy:Mt.sensor},Ve.current=Un,ni(yt,Mt))},[I,ni]),rs=d1(v,po);_1(v),bs(()=>{Ce&&Y===Ni.Initializing&&J(Ni.Initialized)},[Ce,Y]),M.useEffect(()=>{const{onDragMove:ot}=fe.current,{active:Mt,activatorEvent:yt,collisions:Un,over:Lt}=Ct.current;if(!Mt||!yt)return;const qt={active:Mt,activatorEvent:yt,collisions:Un,delta:{x:lt.x,y:lt.y},over:Lt};Qa.unstable_batchedUpdates(()=>{ot==null||ot(qt),q({type:"onDragMove",event:qt})})},[lt.x,lt.y]),M.useEffect(()=>{const{active:ot,activatorEvent:Mt,collisions:yt,droppableContainers:Un,scrollAdjustedTranslate:Lt}=Ct.current;if(!ot||Ve.current==null||!Mt||!Lt)return;const{onDragOver:qt}=fe.current,Vt=Un.get(Pr),fr=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,ze={active:ot,activatorEvent:Mt,collisions:yt,delta:{x:Lt.x,y:Lt.y},over:fr};Qa.unstable_batchedUpdates(()=>{ns(fr),qt==null||qt(ze),q({type:"onDragOver",event:ze})})},[Pr]),bs(()=>{Ct.current={activatorEvent:Te,active:N,activeNode:Se,collisionRect:vn,collisions:Nr,droppableRects:oe,draggableNodes:I,draggingNode:tr,draggingNodeRect:hr,droppableContainers:j,over:_n,scrollableAncestors:Yt,scrollAdjustedTranslate:lt},V.current={initial:hr,translated:vn}},[N,Se,Nr,vn,I,tr,hr,oe,j,_n,Yt,lt]),a1({...Le,delta:A,draggingRect:vn,pointerCoordinates:Is,scrollableAncestors:Yt,scrollableAncestorRects:Fn});const ri=M.useMemo(()=>({active:N,activeNode:Se,activeNodeRect:Ce,activatorEvent:Te,collisions:Nr,containerNodeRect:Wt,dragOverlay:ln,draggableNodes:I,droppableContainers:j,droppableRects:oe,over:_n,measureDroppableContainers:de,scrollableAncestors:Yt,scrollableAncestorRects:Fn,measuringConfiguration:z,measuringScheduled:ke,windowRect:es}),[N,Se,Ce,Te,Nr,Wt,ln,I,j,oe,_n,de,Yt,Fn,z,ke,es]),si=M.useMemo(()=>({activatorEvent:Te,activators:rs,active:N,activeNodeRect:Ce,ariaDescribedById:{draggable:ce},dispatch:B,draggableNodes:I,over:_n,measureDroppableContainers:de}),[Te,rs,N,Ce,B,ce,I,_n,de]);return nt.createElement(qx.Provider,{value:K},nt.createElement(ef.Provider,{value:si},nt.createElement(ab.Provider,{value:ri},nt.createElement(lb.Provider,{value:fo},p)),nt.createElement(R1,{disabled:(d==null?void 0:d.restoreFocus)===!1})),nt.createElement(DS,{...d,hiddenTextDescribedById:ce}));function zn(){const ot=(rt==null?void 0:rt.autoScrollEnabled)===!1,Mt=typeof f=="object"?f.enabled===!1:f===!1,yt=te&&!ot&&!Mt;return typeof f=="object"?{...f,enabled:yt}:{enabled:yt}}}),j1=M.createContext(null),T_="button",O1="Draggable";function cb(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const a=uc(O1),{activators:l,activatorEvent:d,active:f,activeNodeRect:p,ariaDescribedById:v,draggableNodes:w,over:b}=M.useContext(ef),{role:E=T_,roleDescription:O="draggable",tabIndex:S=0}=s??{},P=(f==null?void 0:f.id)===e,B=M.useContext(P?lb:j1),[q,K]=bh(),[Y,J]=bh(),te=w1(l,e),C=Uu(n);bs(()=>(w.set(e,{id:e,key:a,node:q,activatorNode:Y,data:C}),()=>{const A=w.get(e);A&&A.key===a&&w.delete(e)}),[w,e]);const I=M.useMemo(()=>({role:E,tabIndex:S,"aria-disabled":r,"aria-pressed":P&&E===T_?!0:void 0,"aria-roledescription":O,"aria-describedby":v.draggable}),[r,E,S,P,O,v.draggable]);return{active:f,activatorEvent:d,activeNodeRect:p,attributes:I,isDragging:P,listeners:r?void 0:te,node:q,over:b,setNodeRef:K,setActivatorNodeRef:J,transform:B}}function M1(){return M.useContext(ab)}const L1="Droppable",V1={timeout:25};function Sl(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const a=uc(L1),{active:l,dispatch:d,over:f,measureDroppableContainers:p}=M.useContext(ef),v=M.useRef({disabled:n}),w=M.useRef(!1),b=M.useRef(null),E=M.useRef(null),{disabled:O,updateMeasurementsFor:S,timeout:P}={...V1,...s},B=Uu(S??r),q=M.useCallback(()=>{if(!w.current){w.current=!0;return}E.current!=null&&clearTimeout(E.current),E.current=setTimeout(()=>{p(Array.isArray(B.current)?B.current:[B.current]),E.current=null},P)},[P]),K=Xh({callback:q,disabled:O||!l}),Y=M.useCallback((I,A)=>{K&&(A&&(K.unobserve(A),w.current=!1),I&&K.observe(I))},[K]),[J,te]=bh(Y),C=Uu(e);return M.useEffect(()=>{!K||!J.current||(K.disconnect(),w.current=!1,K.observe(J.current))},[J,K]),M.useEffect(()=>(d({type:Zt.RegisterDroppable,element:{id:r,key:a,disabled:n,node:J,rect:b,data:C}}),()=>d({type:Zt.UnregisterDroppable,key:a,id:r})),[r]),M.useEffect(()=>{n!==v.current.disabled&&(d({type:Zt.SetDroppableDisabled,id:r,key:a,disabled:n}),v.current.disabled=n)},[r,a,n,d]),{active:l,rect:b,isOver:(f==null?void 0:f.id)===r,node:J,over:f,setNodeRef:te}}var S_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},F1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],d=t[n++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,d=l?t[s+1]:0,f=s+2<t.length,p=f?t[s+2]:0,v=a>>2,w=(a&3)<<4|d>>4;let b=(d&15)<<2|p>>6,E=p&63;f||(E=64,l||(b=64)),r.push(n[v],n[w],n[b],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(db(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):F1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],d=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||d==null||p==null||w==null)throw new z1;const b=a<<2|d>>4;if(r.push(b),p!==64){const E=d<<4&240|p>>2;if(r.push(E),w!==64){const O=p<<6&192|w;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class z1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U1=function(t){const e=db(t);return hb.encodeByteArray(e,!0)},Ih=function(t){return U1(t).replace(/\./g,"")},fb=function(t){try{return hb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=()=>$1().__FIREBASE_DEFAULTS__,W1=()=>{if(typeof process>"u"||typeof S_>"u")return;const t=S_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},q1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fb(t[1]);return e&&JSON.parse(e)},tf=()=>{try{return B1()||W1()||q1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pb=t=>{var e,n;return(n=(e=tf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},H1=t=>{const e=pb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mb=()=>{var t;return(t=tf())===null||t===void 0?void 0:t.config},gb=t=>{var e;return(e=tf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ih(JSON.stringify(n)),Ih(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function Z1(){var t;const e=(t=tf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function X1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eC(){const t=Cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tC(){return!Z1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nC(){try{return typeof indexedDB=="object"}catch{return!1}}function rC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="FirebaseError";class Xs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sC,Object.setPrototypeOf(this,Xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cc.prototype.create)}}class cc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?iC(a,r):"Error",d=`${this.serviceName}: ${l} (${s}).`;return new Xs(s,d,r)}}function iC(t,e){return t.replace(oC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const oC=/\{\$([^}]+)}/g;function aC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Th(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],l=e[s];if(C_(a)&&C_(l)){if(!Th(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function C_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Iu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lC(t,e){const n=new uC(t,e);return n.subscribe.bind(n)}class uC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=mm),s.error===void 0&&(s.error=mm),s.complete===void 0&&(s.complete=mm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t){return t&&t._delegate?t._delegate:t}class Go{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new K1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fC(e))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vo){return this.instances.has(e)}getOptions(e=Vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vo){return this.component?this.component.multipleInstances?e:Vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hC(t){return t===Vo?void 0:t}function fC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const mC={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},gC=Ke.INFO,yC={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},vC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=yC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ng{constructor(e){this.name=e,this._logLevel=gC,this._logHandler=vC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const _C=(t,e)=>e.some(n=>t instanceof n);let A_,R_;function wC(){return A_||(A_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xC(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yb=new WeakMap,Bm=new WeakMap,vb=new WeakMap,gm=new WeakMap,Pg=new WeakMap;function bC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Bi(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&yb.set(n,t)}).catch(()=>{}),Pg.set(e,t),e}function kC(t){if(Bm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Bm.set(t,e)}let Wm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EC(t){Wm=t(Wm)}function IC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ym(this),e,...n);return vb.set(r,e.sort?e.sort():[e]),Bi(r)}:xC().includes(t)?function(...e){return t.apply(ym(this),e),Bi(yb.get(this))}:function(...e){return Bi(t.apply(ym(this),e))}}function TC(t){return typeof t=="function"?IC(t):(t instanceof IDBTransaction&&kC(t),_C(t,wC())?new Proxy(t,Wm):t)}function Bi(t){if(t instanceof IDBRequest)return bC(t);if(gm.has(t))return gm.get(t);const e=TC(t);return e!==t&&(gm.set(t,e),Pg.set(e,t)),e}const ym=t=>Pg.get(t);function SC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),d=Bi(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Bi(l.result),f.oldVersion,f.newVersion,Bi(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const CC=["get","getKey","getAll","getAllKeys","count"],AC=["put","add","delete","clear"],vm=new Map;function N_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vm.get(e))return vm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=AC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||CC.includes(n)))return;const a=async function(l,...d){const f=this.transaction(l,s?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),s&&f.done]))[0]};return vm.set(e,a),a}EC(t=>({...t,get:(e,n,r)=>N_(e,n)||t.get(e,n,r),has:(e,n)=>!!N_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qm="@firebase/app",P_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new Ng("@firebase/app"),PC="@firebase/app-compat",DC="@firebase/analytics-compat",jC="@firebase/analytics",OC="@firebase/app-check-compat",MC="@firebase/app-check",LC="@firebase/auth",VC="@firebase/auth-compat",FC="@firebase/database",zC="@firebase/data-connect",UC="@firebase/database-compat",$C="@firebase/functions",BC="@firebase/functions-compat",WC="@firebase/installations",qC="@firebase/installations-compat",HC="@firebase/messaging",KC="@firebase/messaging-compat",GC="@firebase/performance",QC="@firebase/performance-compat",ZC="@firebase/remote-config",JC="@firebase/remote-config-compat",YC="@firebase/storage",XC="@firebase/storage-compat",eA="@firebase/firestore",tA="@firebase/vertexai-preview",nA="@firebase/firestore-compat",rA="firebase",sA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="[DEFAULT]",iA={[qm]:"fire-core",[PC]:"fire-core-compat",[jC]:"fire-analytics",[DC]:"fire-analytics-compat",[MC]:"fire-app-check",[OC]:"fire-app-check-compat",[LC]:"fire-auth",[VC]:"fire-auth-compat",[FC]:"fire-rtdb",[zC]:"fire-data-connect",[UC]:"fire-rtdb-compat",[$C]:"fire-fn",[BC]:"fire-fn-compat",[WC]:"fire-iid",[qC]:"fire-iid-compat",[HC]:"fire-fcm",[KC]:"fire-fcm-compat",[GC]:"fire-perf",[QC]:"fire-perf-compat",[ZC]:"fire-rc",[JC]:"fire-rc-compat",[YC]:"fire-gcs",[XC]:"fire-gcs-compat",[eA]:"fire-fst",[nA]:"fire-fst-compat",[tA]:"fire-vertex","fire-js":"fire-js",[rA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new Map,oA=new Map,Km=new Map;function D_(t,e){try{t.container.addComponent(e)}catch(n){Qs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ml(t){const e=t.name;if(Km.has(e))return Qs.debug(`There were multiple attempts to register component ${e}.`),!1;Km.set(e,t);for(const n of qu.values())D_(n,t);for(const n of oA.values())D_(n,t);return!0}function Dg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wi=new cc("app","Firebase",aA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Go("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=sA;function _b(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Wi.create("bad-app-name",{appName:String(s)});if(n||(n=mb()),!n)throw Wi.create("no-options");const a=qu.get(s);if(a){if(Th(n,a.options)&&Th(r,a.config))return a;throw Wi.create("duplicate-app",{appName:s})}const l=new pC(s);for(const f of Km.values())l.addComponent(f);const d=new lA(n,r,l);return qu.set(s,d),d}function wb(t=Hm){const e=qu.get(t);if(!e&&t===Hm&&mb())return _b();if(!e)throw Wi.create("no-app",{appName:t});return e}function j_(){return Array.from(qu.values())}function qi(t,e,n){var r;let s=(r=iA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qs.warn(d.join(" "));return}ml(new Go(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="firebase-heartbeat-database",cA=1,Hu="firebase-heartbeat-store";let _m=null;function xb(){return _m||(_m=SC(uA,cA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wi.create("idb-open",{originalErrorMessage:t.message})})),_m}async function dA(t){try{const n=(await xb()).transaction(Hu),r=await n.objectStore(Hu).get(bb(t));return await n.done,r}catch(e){if(e instanceof Xs)Qs.warn(e.message);else{const n=Wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qs.warn(n.message)}}}async function O_(t,e){try{const r=(await xb()).transaction(Hu,"readwrite");await r.objectStore(Hu).put(e,bb(t)),await r.done}catch(n){if(n instanceof Xs)Qs.warn(n.message);else{const r=Wi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qs.warn(r.message)}}}function bb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=1024,fA=720*60*60*1e3;class pA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=M_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const d=new Date(l.date).valueOf();return Date.now()-d<=fA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Qs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=M_(),{heartbeatsToSend:r,unsentEntries:s}=mA(this._heartbeatsCache.heartbeats),a=Ih(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Qs.warn(n),""}}}function M_(){return new Date().toISOString().substring(0,10)}function mA(t,e=hA){const n=[];let r=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),L_(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),L_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nC()?rC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return O_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return O_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function L_(t){return Ih(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){ml(new Go("platform-logger",e=>new RC(e),"PRIVATE")),ml(new Go("heartbeat",e=>new pA(e),"PRIVATE")),qi(qm,P_,t),qi(qm,P_,"esm2017"),qi("fire-js","")}yA("");var vA="firebase",_A="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi(vA,_A,"app");function jg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function kb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wA=kb,Eb=new cc("auth","Firebase",kb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Ng("@firebase/auth");function xA(t,...e){Sh.logLevel<=Ke.WARN&&Sh.warn(`Auth (${Cl}): ${t}`,...e)}function ih(t,...e){Sh.logLevel<=Ke.ERROR&&Sh.error(`Auth (${Cl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,...e){throw Og(t,...e)}function ys(t,...e){return Og(t,...e)}function Ib(t,e,n){const r=Object.assign(Object.assign({},wA()),{[e]:n});return new cc("auth","Firebase",r).create(e,{appName:t.name})}function Ks(t){return Ib(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Eb.create(t,...e)}function Ne(t,e,...n){if(!t)throw Og(e,...n)}function Ws(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ih(e),new Error(e)}function Zs(t,e){t||Ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bA(){return V_()==="http:"||V_()==="https:"}function V_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bA()||Y1()||"connection"in navigator)?navigator.onLine:!0}function EA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zs(n>e,"Short delay should be less than long delay!"),this.isMobile=Q1()||X1()}get(){return kA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e){Zs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new hc(3e4,6e4);function to(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function no(t,e,n,r,s={}){return Sb(t,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=dc(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:f},a);return J1()||(p.referrerPolicy="no-referrer"),Tb.fetch()(Cb(t,t.config.apiHost,n,d),p)})}async function Sb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},IA),e);try{const s=new CA(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw $d(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw $d(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw $d(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw $d(t,"user-disabled",l);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Ib(t,v,p);Jr(t,v)}}catch(s){if(s instanceof Xs)throw s;Jr(t,"network-request-failed",{message:String(s)})}}async function fc(t,e,n,r,s={}){const a=await no(t,e,n,r,s);return"mfaPendingCredential"in a&&Jr(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Cb(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Mg(t.config,s):`${t.config.apiScheme}://${s}`}function SA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ys(this.auth,"network-request-failed")),TA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $d(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ys(t,e,r);return s.customData._tokenResponse=n,s}function F_(t){return t!==void 0&&t.enterprise!==void 0}class AA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return SA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function RA(t,e){return no(t,"GET","/v2/recaptchaConfig",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(t,e){return no(t,"POST","/v1/accounts:delete",e)}async function Ab(t,e){return no(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PA(t,e=!1){const n=an(t),r=await n.getIdToken(e),s=Lg(r);Ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:ju(wm(s.auth_time)),issuedAtTime:ju(wm(s.iat)),expirationTime:ju(wm(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function wm(t){return Number(t)*1e3}function Lg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const s=fb(n);return s?JSON.parse(s):(ih("Failed to decode base64 JWT payload"),null)}catch(s){return ih("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function z_(t){const e=Lg(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xs&&DA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function DA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ku(t,Ab(n,{idToken:r}));Ne(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Rb(a.providerUserInfo):[],d=MA(t.providerData,l),f=t.isAnonymous,p=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),v=f?p:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Qm(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(t,w)}async function OA(t){const e=an(t);await Ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Rb(t){return t.map(e=>{var{providerId:n}=e,r=jg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(t,e){const n=await Sb(t,{},async()=>{const r=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=Cb(t,s,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",Tb.fetch()(l,{method:"POST",headers:d,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VA(t,e){return no(t,"POST","/v2/accounts:revokeToken",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=z_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await LA(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,l=new tl;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Ne(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Ne(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tl,this.toJSON())}_performRefresh(){return Ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=jg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Qm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Ku(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PA(this,e)}reload(){return OA(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ch(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gs(this.auth.app))return Promise.reject(Ks(this.auth));const e=await this.getIdToken();return await Ku(this,NA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,l,d,f,p,v;const w=(r=n.displayName)!==null&&r!==void 0?r:void 0,b=(s=n.email)!==null&&s!==void 0?s:void 0,E=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,O=(l=n.photoURL)!==null&&l!==void 0?l:void 0,S=(d=n.tenantId)!==null&&d!==void 0?d:void 0,P=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,B=(p=n.createdAt)!==null&&p!==void 0?p:void 0,q=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:K,emailVerified:Y,isAnonymous:J,providerData:te,stsTokenManager:C}=n;Ne(K&&C,e,"internal-error");const I=tl.fromJSON(this.name,C);Ne(typeof K=="string",e,"internal-error"),Ci(w,e.name),Ci(b,e.name),Ne(typeof Y=="boolean",e,"internal-error"),Ne(typeof J=="boolean",e,"internal-error"),Ci(E,e.name),Ci(O,e.name),Ci(S,e.name),Ci(P,e.name),Ci(B,e.name),Ci(q,e.name);const A=new qs({uid:K,auth:e,email:b,emailVerified:Y,displayName:w,isAnonymous:J,photoURL:O,phoneNumber:E,tenantId:S,stsTokenManager:I,createdAt:B,lastLoginAt:q});return te&&Array.isArray(te)&&(A.providerData=te.map(j=>Object.assign({},j))),P&&(A._redirectEventId=P),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new tl;s.updateFromServerResponse(n);const a=new qs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ch(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ne(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Rb(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new tl;d.updateFromIdToken(r);const f=new qs({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Qm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;function Hs(t){Zs(t instanceof Function,"Expected a class definition");let e=U_.get(t);return e?(Zs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nb.type="NONE";const $_=Nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t,e,n){return`firebase:${t}:${e}:${n}`}class nl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=oh(this.userKey,s.apiKey,a),this.fullPersistenceKey=oh("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new nl(Hs($_),e,r);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||Hs($_);const l=oh(r,e.config.apiKey,e.name);let d=null;for(const p of n)try{const v=await p._get(l);if(v){const w=qs._fromJSON(e,v);p!==a&&(d=w),a=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new nl(a,e,r):(a=f[0],d&&await a._set(l,d.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new nl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ob(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Pb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Lb(e))return"Blackberry";if(Vb(e))return"Webos";if(Db(e))return"Safari";if((e.includes("chrome/")||jb(e))&&!e.includes("edge/"))return"Chrome";if(Mb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Pb(t=Cn()){return/firefox\//i.test(t)}function Db(t=Cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jb(t=Cn()){return/crios\//i.test(t)}function Ob(t=Cn()){return/iemobile/i.test(t)}function Mb(t=Cn()){return/android/i.test(t)}function Lb(t=Cn()){return/blackberry/i.test(t)}function Vb(t=Cn()){return/webos/i.test(t)}function Vg(t=Cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FA(t=Cn()){var e;return Vg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zA(){return eC()&&document.documentMode===10}function Fb(t=Cn()){return Vg(t)||Mb(t)||Vb(t)||Lb(t)||/windows phone/i.test(t)||Ob(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t,e=[]){let n;switch(t){case"Browser":n=B_(Cn());break;case"Worker":n=`${B_(Cn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,d)=>{try{const f=e(a);l(f)}catch(f){d(f)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(t,e={}){return no(t,"GET","/v2/passwordPolicy",to(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=6;class WA{constructor(e){var n,r,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:BA,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,l,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W_(this),this.idTokenSubscription=new W_(this),this.beforeStateQueue=new UA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await nl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ab(this,{idToken:e}),r=await qs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gs(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ch(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gs(this.app))return Promise.reject(Ks(this));const n=e?an(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gs(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gs(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $A(this),n=new WA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await VA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hs(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await nl.create(this,[Hs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ea(t){return an(t)}class W_{constructor(e){this.auth=e,this.observer=null,this.addObserver=lC(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HA(t){nf=t}function Ub(t){return nf.loadJS(t)}function KA(){return nf.recaptchaEnterpriseScript}function GA(){return nf.gapiScript}function QA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ZA="recaptcha-enterprise",JA="NO_RECAPTCHA";class YA{constructor(e){this.type=ZA,this.auth=ea(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,d)=>{RA(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new AA(f);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(f=>{d(f)})})}function s(a,l,d){const f=window.grecaptcha;F_(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(JA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{r(this.auth).then(d=>{if(!n&&F_(window.grecaptcha))s(d,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=KA();f.length!==0&&(f+=d),Ub(f).then(()=>{s(d,a,l)}).catch(p=>{l(p)})}}).catch(d=>{l(d)})})}}async function q_(t,e,n,r=!1){const s=new YA(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function H_(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await q_(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await q_(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t,e){const n=Dg(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Th(a,e??{}))return s;Jr(s,"already-initialized")}return n.initialize({options:e})}function eR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tR(t,e,n){const r=ea(t);Ne(r._canInitEmulator,r,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=$b(e),{host:l,port:d}=nR(e),f=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${l}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),rR()}function $b(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nR(t){const e=$b(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:K_(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:K_(l)}}}function K_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ws("not implemented")}_getIdTokenResponse(e){return Ws("not implemented")}_linkToIdToken(e,n){return Ws("not implemented")}_getReauthenticationResolver(e){return Ws("not implemented")}}async function sR(t,e){return no(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(t,e){return fc(t,"POST","/v1/accounts:signInWithPassword",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t,e){return fc(t,"POST","/v1/accounts:signInWithEmailLink",to(t,e))}async function aR(t,e){return fc(t,"POST","/v1/accounts:signInWithEmailLink",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends Fg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Gu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return H_(e,n,"signInWithPassword",iR);case"emailLink":return oR(e,{email:this._email,oobCode:this._password});default:Jr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return H_(e,r,"signUpPassword",sR);case"emailLink":return aR(e,{idToken:n,email:this._email,oobCode:this._password});default:Jr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(t,e){return fc(t,"POST","/v1/accounts:signInWithIdp",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="http://localhost";class Qo extends Fg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=jg(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Qo(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return rl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,rl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,rl(e,n)}buildRequest(){const e={requestUri:lR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cR(t){const e=Eu(Iu(t)).link,n=e?Eu(Iu(e)).deep_link_id:null,r=Eu(Iu(t)).deep_link_id;return(r?Eu(Iu(r)).link:null)||r||n||e||t}class zg{constructor(e){var n,r,s,a,l,d;const f=Eu(Iu(e)),p=(n=f.apiKey)!==null&&n!==void 0?n:null,v=(r=f.oobCode)!==null&&r!==void 0?r:null,w=uR((s=f.mode)!==null&&s!==void 0?s:null);Ne(p&&v&&w,"argument-error"),this.apiKey=p,this.operation=w,this.code=v,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=f.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=cR(e);try{return new zg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.providerId=Al.PROVIDER_ID}static credential(e,n){return Gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=zg.parseLink(n);return Ne(r,"argument-error"),Gu._fromEmailAndCode(e,r.code,r.tenantId)}}Al.PROVIDER_ID="password";Al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends Bb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends pc{constructor(){super("facebook.com")}static credential(e){return Qo._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qo._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Di.credential(n,r)}catch{return null}}}Di.GOOGLE_SIGN_IN_METHOD="google.com";Di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends pc{constructor(){super("github.com")}static credential(e){return Qo._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.GITHUB_SIGN_IN_METHOD="github.com";ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends pc{constructor(){super("twitter.com")}static credential(e,n){return Qo._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Oi.credential(n,r)}catch{return null}}}Oi.TWITTER_SIGN_IN_METHOD="twitter.com";Oi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t,e){return fc(t,"POST","/v1/accounts:signUp",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await qs._fromIdTokenResponse(e,r,s),l=G_(r);return new Gi({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=G_(r);return new Gi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function G_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(t){var e;if(gs(t.app))return Promise.reject(Ks(t));const n=ea(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Gi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await dR(n,{returnSecureToken:!0}),s=await Gi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends Xs{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ah(e,n,r,s)}}function Wb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(t,a,e,r):a})}async function fR(t,e,n=!1){const r=await Ku(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Gi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(t,e,n=!1){const{auth:r}=t;if(gs(r.app))return Promise.reject(Ks(r));const s="reauthenticate";try{const a=await Ku(t,Wb(r,s,e,t),n);Ne(a.idToken,r,"internal-error");const l=Lg(a.idToken);Ne(l,r,"internal-error");const{sub:d}=l;return Ne(t.uid===d,r,"user-mismatch"),Gi._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Jr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(t,e,n=!1){if(gs(t.app))return Promise.reject(Ks(t));const r="signIn",s=await Wb(t,r,e),a=await Gi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function mR(t,e){return qb(ea(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(t){const e=ea(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function yR(t,e,n){return gs(t.app)?Promise.reject(Ks(t)):mR(an(t),Al.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gR(t),r})}function vR(t,e,n,r){return an(t).onIdTokenChanged(e,n,r)}function _R(t,e,n){return an(t).beforeAuthStateChanged(e,n)}function Hb(t,e,n,r){return an(t).onAuthStateChanged(e,n,r)}const Rh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rh,"1"),this.storage.removeItem(Rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=1e3,xR=10;class Gb extends Kb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,d,f)=>{this.notifyListeners(l,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);zA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,xR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gb.type="LOCAL";const bR=Gb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb extends Kb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qb.type="SESSION";const Zb=Qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new rf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(l).map(async p=>p(n.origin,a)),f=await kR(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((d,f)=>{const p=Ug("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(w){const b=w;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(b.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(){return window}function IR(t){vs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(){return typeof vs().WorkerGlobalScope<"u"&&typeof vs().importScripts=="function"}async function TR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CR(){return Jb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="firebaseLocalStorageDb",AR=1,Nh="firebaseLocalStorage",Xb="fbase_key";class mc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sf(t,e){return t.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function RR(){const t=indexedDB.deleteDatabase(Yb);return new mc(t).toPromise()}function Zm(){const t=indexedDB.open(Yb,AR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nh,{keyPath:Xb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nh)?e(r):(r.close(),await RR(),e(await Zm()))})})}async function Q_(t,e,n){const r=sf(t,!0).put({[Xb]:e,value:n});return new mc(r).toPromise()}async function NR(t,e){const n=sf(t,!1).get(e),r=await new mc(n).toPromise();return r===void 0?null:r.value}function Z_(t,e){const n=sf(t,!0).delete(e);return new mc(n).toPromise()}const PR=800,DR=3;class ek{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>DR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rf._getInstance(CR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TR(),!this.activeServiceWorker)return;this.sender=new ER(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zm();return await Q_(e,Rh,"1"),await Z_(e,Rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>NR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Z_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=sf(s,!1).getAll();return new mc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ek.type="LOCAL";const jR=ek;new hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t,e){return e?Hs(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends Fg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return rl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MR(t){return qb(t.auth,new $g(t),t.bypassAuthState)}function LR(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),pR(n,new $g(t),t.bypassAuthState)}async function VR(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),fR(n,new $g(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MR;case"linkViaPopup":case"linkViaRedirect":return VR;case"reauthViaPopup":case"reauthViaRedirect":return LR;default:Jr(this.auth,"internal-error")}}resolve(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new hc(2e3,1e4);class Za extends tk{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Za.currentPopupAction&&Za.currentPopupAction.cancel(),Za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Zs(this.filter.length===1,"Popup operations only handle one event");const e=Ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ys(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ys(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Za.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ys(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FR.get())};e()}}Za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="pendingRedirect",ah=new Map;class UR extends tk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ah.get(this.auth._key());if(!e){try{const r=await $R(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ah.set(this.auth._key(),e)}return this.bypassAuthState||ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $R(t,e){const n=qR(e),r=WR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function BR(t,e){ah.set(t._key(),e)}function WR(t){return Hs(t._redirectPersistence)}function qR(t){return oh(zR,t.config.apiKey,t.name)}async function HR(t,e,n=!1){if(gs(t.app))return Promise.reject(Ks(t));const r=ea(t),s=OR(r,e),l=await new UR(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=600*1e3;class GR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nk(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ys(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KR&&this.cachedEventUids.clear(),this.cachedEventUids.has(J_(e))}saveEventToCache(e){this.cachedEventUids.add(J_(e)),this.lastProcessedEventTime=Date.now()}}function J_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(t,e={}){return no(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YR=/^https?/;async function XR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZR(t);for(const n of e)try{if(eN(n))return}catch{}Jr(t,"unauthorized-domain")}function eN(t){const e=Gm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!YR.test(n))return!1;if(JR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new hc(3e4,6e4);function Y_(){const t=vs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nN(t){return new Promise((e,n)=>{var r,s,a;function l(){Y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y_(),n(ys(t,"network-request-failed"))},timeout:tN.get()})}if(!((s=(r=vs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=vs().gapi)===null||a===void 0)&&a.load)l();else{const d=QA("iframefcb");return vs()[d]=()=>{gapi.load?l():n(ys(t,"network-request-failed"))},Ub(`${GA()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw lh=null,e})}let lh=null;function rN(t){return lh=lh||nN(t),lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=new hc(5e3,15e3),iN="__/auth/iframe",oN="emulator/auth/iframe",aN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uN(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mg(e,oN):`https://${t.config.authDomain}/${iN}`,r={apiKey:e.apiKey,appName:t.name,v:Cl},s=lN.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${dc(r).slice(1)}`}async function cN(t){const e=await rN(t),n=vs().gapi;return Ne(n,t,"internal-error"),e.open({where:document.body,url:uN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aN,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=ys(t,"network-request-failed"),d=vs().setTimeout(()=>{a(l)},sN.get());function f(){vs().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hN=500,fN=600,pN="_blank",mN="http://localhost";class X_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gN(t,e,n,r=hN,s=fN){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},dN),{width:r.toString(),height:s.toString(),top:a,left:l}),p=Cn().toLowerCase();n&&(d=jb(p)?pN:n),Pb(p)&&(e=e||mN,f.scrollbars="yes");const v=Object.entries(f).reduce((b,[E,O])=>`${b}${E}=${O},`,"");if(FA(p)&&d!=="_self")return yN(e||"",d),new X_(null);const w=window.open(e||"",d,v);Ne(w,t,"popup-blocked");try{w.focus()}catch{}return new X_(w)}function yN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="__/auth/handler",_N="emulator/auth/handler",wN=encodeURIComponent("fac");async function ew(t,e,n,r,s,a){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Cl,eventId:s};if(e instanceof Bb){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",aC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))l[v]=w}if(e instanceof pc){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await t._getAppCheckToken(),p=f?`#${wN}=${encodeURIComponent(f)}`:"";return`${xN(t)}?${dc(d).slice(1)}${p}`}function xN({config:t}){return t.emulator?Mg(t,_N):`https://${t.authDomain}/${vN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="webStorageSupport";class bN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zb,this._completeRedirectFn=HR,this._overrideRedirectResult=BR}async _openPopup(e,n,r,s){var a;Zs((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await ew(e,n,r,Gm(),s);return gN(e,l,Ug())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await ew(e,n,r,Gm(),s);return IR(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Zs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await cN(e),r=new GR(e);return n.register("authEvent",s=>(Ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xm,{type:xm},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[xm];l!==void 0&&n(!!l),Jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Fb()||Db()||Vg()}}const kN=bN;var tw="@firebase/auth",nw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TN(t){ml(new Go("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;Ne(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zb(t)},p=new qA(r,s,a,f);return eR(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ml(new Go("auth-internal",e=>{const n=ea(e.getProvider("auth").getImmediate());return(r=>new EN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qi(tw,nw,IN(t)),qi(tw,nw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=300,CN=gb("authIdTokenMaxAge")||SN;let rw=null;const AN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>CN)return;const s=n==null?void 0:n.token;rw!==s&&(rw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function RN(t=wb()){const e=Dg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=XA(t,{popupRedirectResolver:kN,persistence:[jR,bR,Zb]}),r=gb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=AN(a.toString());_R(n,l,()=>l(n.currentUser)),vR(n,d=>l(d))}}const s=pb("auth");return s&&tR(n,`http://${s}`),n}function NN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}HA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=ys("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",NN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TN("Browser");var sw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ho,rk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function A(){}A.prototype=I.prototype,C.D=I.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(j,D,V){for(var N=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)N[Ve-2]=arguments[Ve];return I.prototype[D].apply(j,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,I,A){A||(A=0);var j=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)j[D]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(D=0;16>D;++D)j[D]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=C.g[0],A=C.g[1],D=C.g[2];var V=C.g[3],N=I+(V^A&(D^V))+j[0]+3614090360&4294967295;I=A+(N<<7&4294967295|N>>>25),N=V+(D^I&(A^D))+j[1]+3905402710&4294967295,V=I+(N<<12&4294967295|N>>>20),N=D+(A^V&(I^A))+j[2]+606105819&4294967295,D=V+(N<<17&4294967295|N>>>15),N=A+(I^D&(V^I))+j[3]+3250441966&4294967295,A=D+(N<<22&4294967295|N>>>10),N=I+(V^A&(D^V))+j[4]+4118548399&4294967295,I=A+(N<<7&4294967295|N>>>25),N=V+(D^I&(A^D))+j[5]+1200080426&4294967295,V=I+(N<<12&4294967295|N>>>20),N=D+(A^V&(I^A))+j[6]+2821735955&4294967295,D=V+(N<<17&4294967295|N>>>15),N=A+(I^D&(V^I))+j[7]+4249261313&4294967295,A=D+(N<<22&4294967295|N>>>10),N=I+(V^A&(D^V))+j[8]+1770035416&4294967295,I=A+(N<<7&4294967295|N>>>25),N=V+(D^I&(A^D))+j[9]+2336552879&4294967295,V=I+(N<<12&4294967295|N>>>20),N=D+(A^V&(I^A))+j[10]+4294925233&4294967295,D=V+(N<<17&4294967295|N>>>15),N=A+(I^D&(V^I))+j[11]+2304563134&4294967295,A=D+(N<<22&4294967295|N>>>10),N=I+(V^A&(D^V))+j[12]+1804603682&4294967295,I=A+(N<<7&4294967295|N>>>25),N=V+(D^I&(A^D))+j[13]+4254626195&4294967295,V=I+(N<<12&4294967295|N>>>20),N=D+(A^V&(I^A))+j[14]+2792965006&4294967295,D=V+(N<<17&4294967295|N>>>15),N=A+(I^D&(V^I))+j[15]+1236535329&4294967295,A=D+(N<<22&4294967295|N>>>10),N=I+(D^V&(A^D))+j[1]+4129170786&4294967295,I=A+(N<<5&4294967295|N>>>27),N=V+(A^D&(I^A))+j[6]+3225465664&4294967295,V=I+(N<<9&4294967295|N>>>23),N=D+(I^A&(V^I))+j[11]+643717713&4294967295,D=V+(N<<14&4294967295|N>>>18),N=A+(V^I&(D^V))+j[0]+3921069994&4294967295,A=D+(N<<20&4294967295|N>>>12),N=I+(D^V&(A^D))+j[5]+3593408605&4294967295,I=A+(N<<5&4294967295|N>>>27),N=V+(A^D&(I^A))+j[10]+38016083&4294967295,V=I+(N<<9&4294967295|N>>>23),N=D+(I^A&(V^I))+j[15]+3634488961&4294967295,D=V+(N<<14&4294967295|N>>>18),N=A+(V^I&(D^V))+j[4]+3889429448&4294967295,A=D+(N<<20&4294967295|N>>>12),N=I+(D^V&(A^D))+j[9]+568446438&4294967295,I=A+(N<<5&4294967295|N>>>27),N=V+(A^D&(I^A))+j[14]+3275163606&4294967295,V=I+(N<<9&4294967295|N>>>23),N=D+(I^A&(V^I))+j[3]+4107603335&4294967295,D=V+(N<<14&4294967295|N>>>18),N=A+(V^I&(D^V))+j[8]+1163531501&4294967295,A=D+(N<<20&4294967295|N>>>12),N=I+(D^V&(A^D))+j[13]+2850285829&4294967295,I=A+(N<<5&4294967295|N>>>27),N=V+(A^D&(I^A))+j[2]+4243563512&4294967295,V=I+(N<<9&4294967295|N>>>23),N=D+(I^A&(V^I))+j[7]+1735328473&4294967295,D=V+(N<<14&4294967295|N>>>18),N=A+(V^I&(D^V))+j[12]+2368359562&4294967295,A=D+(N<<20&4294967295|N>>>12),N=I+(A^D^V)+j[5]+4294588738&4294967295,I=A+(N<<4&4294967295|N>>>28),N=V+(I^A^D)+j[8]+2272392833&4294967295,V=I+(N<<11&4294967295|N>>>21),N=D+(V^I^A)+j[11]+1839030562&4294967295,D=V+(N<<16&4294967295|N>>>16),N=A+(D^V^I)+j[14]+4259657740&4294967295,A=D+(N<<23&4294967295|N>>>9),N=I+(A^D^V)+j[1]+2763975236&4294967295,I=A+(N<<4&4294967295|N>>>28),N=V+(I^A^D)+j[4]+1272893353&4294967295,V=I+(N<<11&4294967295|N>>>21),N=D+(V^I^A)+j[7]+4139469664&4294967295,D=V+(N<<16&4294967295|N>>>16),N=A+(D^V^I)+j[10]+3200236656&4294967295,A=D+(N<<23&4294967295|N>>>9),N=I+(A^D^V)+j[13]+681279174&4294967295,I=A+(N<<4&4294967295|N>>>28),N=V+(I^A^D)+j[0]+3936430074&4294967295,V=I+(N<<11&4294967295|N>>>21),N=D+(V^I^A)+j[3]+3572445317&4294967295,D=V+(N<<16&4294967295|N>>>16),N=A+(D^V^I)+j[6]+76029189&4294967295,A=D+(N<<23&4294967295|N>>>9),N=I+(A^D^V)+j[9]+3654602809&4294967295,I=A+(N<<4&4294967295|N>>>28),N=V+(I^A^D)+j[12]+3873151461&4294967295,V=I+(N<<11&4294967295|N>>>21),N=D+(V^I^A)+j[15]+530742520&4294967295,D=V+(N<<16&4294967295|N>>>16),N=A+(D^V^I)+j[2]+3299628645&4294967295,A=D+(N<<23&4294967295|N>>>9),N=I+(D^(A|~V))+j[0]+4096336452&4294967295,I=A+(N<<6&4294967295|N>>>26),N=V+(A^(I|~D))+j[7]+1126891415&4294967295,V=I+(N<<10&4294967295|N>>>22),N=D+(I^(V|~A))+j[14]+2878612391&4294967295,D=V+(N<<15&4294967295|N>>>17),N=A+(V^(D|~I))+j[5]+4237533241&4294967295,A=D+(N<<21&4294967295|N>>>11),N=I+(D^(A|~V))+j[12]+1700485571&4294967295,I=A+(N<<6&4294967295|N>>>26),N=V+(A^(I|~D))+j[3]+2399980690&4294967295,V=I+(N<<10&4294967295|N>>>22),N=D+(I^(V|~A))+j[10]+4293915773&4294967295,D=V+(N<<15&4294967295|N>>>17),N=A+(V^(D|~I))+j[1]+2240044497&4294967295,A=D+(N<<21&4294967295|N>>>11),N=I+(D^(A|~V))+j[8]+1873313359&4294967295,I=A+(N<<6&4294967295|N>>>26),N=V+(A^(I|~D))+j[15]+4264355552&4294967295,V=I+(N<<10&4294967295|N>>>22),N=D+(I^(V|~A))+j[6]+2734768916&4294967295,D=V+(N<<15&4294967295|N>>>17),N=A+(V^(D|~I))+j[13]+1309151649&4294967295,A=D+(N<<21&4294967295|N>>>11),N=I+(D^(A|~V))+j[4]+4149444226&4294967295,I=A+(N<<6&4294967295|N>>>26),N=V+(A^(I|~D))+j[11]+3174756917&4294967295,V=I+(N<<10&4294967295|N>>>22),N=D+(I^(V|~A))+j[2]+718787259&4294967295,D=V+(N<<15&4294967295|N>>>17),N=A+(V^(D|~I))+j[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var A=I-this.blockSize,j=this.B,D=this.h,V=0;V<I;){if(D==0)for(;V<=A;)s(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<I;)if(j[D++]=C.charCodeAt(V++),D==this.blockSize){s(this,j),D=0;break}}else for(;V<I;)if(j[D++]=C[V++],D==this.blockSize){s(this,j),D=0;break}}this.h=D,this.o+=I},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var A=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=A&255,A/=256;for(this.u(C),C=Array(16),I=A=0;4>I;++I)for(var j=0;32>j;j+=8)C[A++]=this.g[I]>>>j&255;return C};function a(C,I){var A=d;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=I(C)}function l(C,I){this.h=I;for(var A=[],j=!0,D=C.length-1;0<=D;D--){var V=C[D]|0;j&&V==I||(A[D]=V,j=!1)}this.g=A}var d={};function f(C){return-128<=C&&128>C?a(C,function(I){return new l([I|0],0>I?-1:0)}):new l([C|0],0>C?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return w;if(0>C)return P(p(-C));for(var I=[],A=1,j=0;C>=A;j++)I[j]=C/A|0,A*=4294967296;return new l(I,0)}function v(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return P(v(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(I,8)),j=w,D=0;D<C.length;D+=8){var V=Math.min(8,C.length-D),N=parseInt(C.substring(D,D+V),I);8>V?(V=p(Math.pow(I,V)),j=j.j(V).add(p(N))):(j=j.j(A),j=j.add(p(N)))}return j}var w=f(0),b=f(1),E=f(16777216);t=l.prototype,t.m=function(){if(S(this))return-P(this).m();for(var C=0,I=1,A=0;A<this.g.length;A++){var j=this.i(A);C+=(0<=j?j:4294967296+j)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(O(this))return"0";if(S(this))return"-"+P(this).toString(C);for(var I=p(Math.pow(C,6)),A=this,j="";;){var D=Y(A,I).g;A=B(A,D.j(I));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=D,O(A))return V+j;for(;6>V.length;)V="0"+V;j=V+j}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function O(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function S(C){return C.h==-1}t.l=function(C){return C=B(this,C),S(C)?-1:O(C)?0:1};function P(C){for(var I=C.g.length,A=[],j=0;j<I;j++)A[j]=~C.g[j];return new l(A,~C.h).add(b)}t.abs=function(){return S(this)?P(this):this},t.add=function(C){for(var I=Math.max(this.g.length,C.g.length),A=[],j=0,D=0;D<=I;D++){var V=j+(this.i(D)&65535)+(C.i(D)&65535),N=(V>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);j=N>>>16,V&=65535,N&=65535,A[D]=N<<16|V}return new l(A,A[A.length-1]&-2147483648?-1:0)};function B(C,I){return C.add(P(I))}t.j=function(C){if(O(this)||O(C))return w;if(S(this))return S(C)?P(this).j(P(C)):P(P(this).j(C));if(S(C))return P(this.j(P(C)));if(0>this.l(E)&&0>C.l(E))return p(this.m()*C.m());for(var I=this.g.length+C.g.length,A=[],j=0;j<2*I;j++)A[j]=0;for(j=0;j<this.g.length;j++)for(var D=0;D<C.g.length;D++){var V=this.i(j)>>>16,N=this.i(j)&65535,Ve=C.i(D)>>>16,rt=C.i(D)&65535;A[2*j+2*D]+=N*rt,q(A,2*j+2*D),A[2*j+2*D+1]+=V*rt,q(A,2*j+2*D+1),A[2*j+2*D+1]+=N*Ve,q(A,2*j+2*D+1),A[2*j+2*D+2]+=V*Ve,q(A,2*j+2*D+2)}for(j=0;j<I;j++)A[j]=A[2*j+1]<<16|A[2*j];for(j=I;j<2*I;j++)A[j]=0;return new l(A,0)};function q(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function K(C,I){this.g=C,this.h=I}function Y(C,I){if(O(I))throw Error("division by zero");if(O(C))return new K(w,w);if(S(C))return I=Y(P(C),I),new K(P(I.g),P(I.h));if(S(I))return I=Y(C,P(I)),new K(P(I.g),I.h);if(30<C.g.length){if(S(C)||S(I))throw Error("slowDivide_ only works with positive integers.");for(var A=b,j=I;0>=j.l(C);)A=J(A),j=J(j);var D=te(A,1),V=te(j,1);for(j=te(j,2),A=te(A,2);!O(j);){var N=V.add(j);0>=N.l(C)&&(D=D.add(A),V=N),j=te(j,1),A=te(A,1)}return I=B(C,D.j(I)),new K(D,I)}for(D=w;0<=C.l(I);){for(A=Math.max(1,Math.floor(C.m()/I.m())),j=Math.ceil(Math.log(A)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),V=p(A),N=V.j(I);S(N)||0<N.l(C);)A-=j,V=p(A),N=V.j(I);O(V)&&(V=b),D=D.add(V),C=B(C,N)}return new K(D,C)}t.A=function(C){return Y(this,C).h},t.and=function(C){for(var I=Math.max(this.g.length,C.g.length),A=[],j=0;j<I;j++)A[j]=this.i(j)&C.i(j);return new l(A,this.h&C.h)},t.or=function(C){for(var I=Math.max(this.g.length,C.g.length),A=[],j=0;j<I;j++)A[j]=this.i(j)|C.i(j);return new l(A,this.h|C.h)},t.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),A=[],j=0;j<I;j++)A[j]=this.i(j)^C.i(j);return new l(A,this.h^C.h)};function J(C){for(var I=C.g.length+1,A=[],j=0;j<I;j++)A[j]=C.i(j)<<1|C.i(j-1)>>>31;return new l(A,C.h)}function te(C,I){var A=I>>5;I%=32;for(var j=C.g.length-A,D=[],V=0;V<j;V++)D[V]=0<I?C.i(V+A)>>>I|C.i(V+A+1)<<32-I:C.i(V+A);return new l(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rk=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=v,Ho=l}).apply(typeof sw<"u"?sw:typeof self<"u"?self:typeof window<"u"?window:{});var Bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sk,Tu,ik,uh,Jm,ok,ak,lk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,x){return c==Array.prototype||c==Object.prototype||(c[y]=x.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bd=="object"&&Bd];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function s(c,y){if(y)e:{var x=r;c=c.split(".");for(var T=0;T<c.length-1;T++){var $=c[T];if(!($ in x))break e;x=x[$]}c=c[c.length-1],T=x[c],y=y(T),y!=T&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}function a(c,y){c instanceof String&&(c+="");var x=0,T=!1,$={next:function(){if(!T&&x<c.length){var Q=x++;return{value:y(Q,c[Q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(c){return c||function(){return a(this,function(y,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function f(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function p(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function v(c,y,x){return c.call.apply(c.bind,arguments)}function w(c,y,x){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,T),c.apply(y,$)}}return function(){return c.apply(y,arguments)}}function b(c,y,x){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,b.apply(null,arguments)}function E(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var T=x.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function O(c,y){function x(){}x.prototype=y.prototype,c.aa=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Qb=function(T,$,Q){for(var ue=Array(arguments.length-2),st=2;st<arguments.length;st++)ue[st-2]=arguments[st];return y.prototype[$].apply(T,ue)}}function S(c){const y=c.length;if(0<y){const x=Array(y);for(let T=0;T<y;T++)x[T]=c[T];return x}return[]}function P(c,y){for(let x=1;x<arguments.length;x++){const T=arguments[x];if(f(T)){const $=c.length||0,Q=T.length||0;c.length=$+Q;for(let ue=0;ue<Q;ue++)c[$+ue]=T[ue]}else c.push(T)}}class B{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function Y(c){return Y[" "](c),c}Y[" "]=function(){};var J=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function te(c,y,x){for(const T in c)y.call(x,c[T],T,c)}function C(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function I(c){const y={};for(const x in c)y[x]=c[x];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(c,y){let x,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(x in T)c[x]=T[x];for(let Q=0;Q<A.length;Q++)x=A[Q],Object.prototype.hasOwnProperty.call(T,x)&&(c[x]=T[x])}}function D(c){var y=1;c=c.split(":");const x=[];for(;0<y&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function V(c){d.setTimeout(()=>{throw c},0)}function N(){var c=fe;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ve{constructor(){this.h=this.g=null}add(y,x){const T=rt.get();T.set(y,x),this.h?this.h.next=T:this.g=T,this.h=T}}var rt=new B(()=>new Ge,c=>c.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,Z=!1,fe=new Ve,ce=()=>{const c=d.Promise.resolve(void 0);Te=()=>{c.then(U)}};var U=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(x){V(x)}var y=rt;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}Z=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};d.addEventListener("test",x,y),d.removeEventListener("test",x,y)}catch{}return c})();function ke(c,y){if(oe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var x=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(J){e:{try{Y(y.nodeName);var $=!0;break e}catch{}$=!1}$||(y=null)}}else x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement);this.relatedTarget=y,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Se[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ke.aa.h.call(this)}}O(ke,oe);var Se={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),Le=0;function Fe(c,y,x,T,$){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!T,this.ha=$,this.key=++Le,this.da=this.fa=!1}function Ce(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Wt(c){this.src=c,this.g={},this.h=0}Wt.prototype.add=function(c,y,x,T,$){var Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);var ue=An(c,y,T,$);return-1<ue?(y=c[ue],x||(y.fa=!1)):(y=new Fe(y,this.src,Q,!!T,$),y.fa=x,c.push(y)),y};function Ct(c,y){var x=y.type;if(x in c.g){var T=c.g[x],$=Array.prototype.indexOf.call(T,y,void 0),Q;(Q=0<=$)&&Array.prototype.splice.call(T,$,1),Q&&(Ce(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function An(c,y,x,T){for(var $=0;$<c.length;++$){var Q=c[$];if(!Q.da&&Q.listener==y&&Q.capture==!!x&&Q.ha==T)return $}return-1}var ln="closure_lm_"+(1e6*Math.random()|0),tr={};function hr(c,y,x,T,$){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)hr(c,y[Q],x,T,$);return null}return x=co(x),c&&c[Ee]?c.K(y,x,p(T)?!!T.capture:!1,$):ti(c,y,x,!1,T,$)}function ti(c,y,x,T,$,Q){if(!y)throw Error("Invalid event type");var ue=p($)?!!$.capture:!!$,st=Is(c);if(st||(c[ln]=st=new Wt(c)),x=st.add(y,x,T,ue,Q),x.proxy)return x;if(T=uo(),x.proxy=T,T.src=c,T.listener=x,c.addEventListener)de||($=ue),$===void 0&&($=!1),c.addEventListener(y.toString(),T,$);else if(c.attachEvent)c.attachEvent(Fn(y.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return x}function uo(){function c(x){return y.call(c.src,c.listener,x)}const y=ts;return c}function es(c,y,x,T,$){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)es(c,y[Q],x,T,$);else T=p(T)?!!T.capture:!!T,x=co(x),c&&c[Ee]?(c=c.i,y=String(y).toString(),y in c.g&&(Q=c.g[y],x=An(Q,x,T,$),-1<x&&(Ce(Q[x]),Array.prototype.splice.call(Q,x,1),Q.length==0&&(delete c.g[y],c.h--)))):c&&(c=Is(c))&&(y=c.g[y.toString()],c=-1,y&&(c=An(y,x,T,$)),(x=-1<c?y[c]:null)&&Yt(x))}function Yt(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Ee])Ct(y.i,c);else{var x=c.type,T=c.proxy;y.removeEventListener?y.removeEventListener(x,T,c.capture):y.detachEvent?y.detachEvent(Fn(x),T):y.addListener&&y.removeListener&&y.removeListener(T),(x=Is(y))?(Ct(x,c),x.h==0&&(x.src=null,y[ln]=null)):Ce(c)}}}function Fn(c){return c in tr?tr[c]:tr[c]="on"+c}function ts(c,y){if(c.da)c=!0;else{y=new ke(y,this);var x=c.listener,T=c.ha||c.src;c.fa&&Yt(c),c=x.call(T,y)}return c}function Is(c){return c=c[ln],c instanceof Wt?c:null}var Ts="__closure_events_fn_"+(1e9*Math.random()>>>0);function co(c){return typeof c=="function"?c:(c[Ts]||(c[Ts]=function(y){return c.handleEvent(y)}),c[Ts])}function Dt(){z.call(this),this.i=new Wt(this),this.M=this,this.F=null}O(Dt,z),Dt.prototype[Ee]=!0,Dt.prototype.removeEventListener=function(c,y,x,T){es(this,c,y,x,T)};function lt(c,y){var x,T=c.F;if(T)for(x=[];T;T=T.F)x.push(T);if(c=c.M,T=y.type||y,typeof y=="string")y=new oe(y,c);else if(y instanceof oe)y.target=y.target||c;else{var $=y;y=new oe(T,c),j(y,$)}if($=!0,x)for(var Q=x.length-1;0<=Q;Q--){var ue=y.g=x[Q];$=vn(ue,T,!0,y)&&$}if(ue=y.g=c,$=vn(ue,T,!0,y)&&$,$=vn(ue,T,!1,y)&&$,x)for(Q=0;Q<x.length;Q++)ue=y.g=x[Q],$=vn(ue,T,!1,y)&&$}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var x=c.g[y],T=0;T<x.length;T++)Ce(x[T]);delete c.g[y],c.h--}}this.F=null},Dt.prototype.K=function(c,y,x,T){return this.i.add(String(c),y,!1,x,T)},Dt.prototype.L=function(c,y,x,T){return this.i.add(String(c),y,!0,x,T)};function vn(c,y,x,T){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var $=!0,Q=0;Q<y.length;++Q){var ue=y[Q];if(ue&&!ue.da&&ue.capture==x){var st=ue.listener,Ht=ue.ha||ue.src;ue.fa&&Ct(c.i,ue),$=st.call(Ht,T)!==!1&&$}}return $&&!T.defaultPrevented}function Nr(c,y,x){if(typeof c=="function")x&&(c=b(c,x));else if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(c,y||0)}function Pr(c){c.g=Nr(()=>{c.g=null,c.i&&(c.i=!1,Pr(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class _n extends z{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(c){z.call(this),this.h=c,this.g={}}O(ns,z);var ho=[];function fo(c){te(c.g,function(y,x){this.g.hasOwnProperty(x)&&Yt(y)},c),c.g={}}ns.prototype.N=function(){ns.aa.N.call(this),fo(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ss=d.JSON.stringify,ni=d.JSON.parse,po=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function rs(){}rs.prototype.h=null;function ri(c){return c.h||(c.h=c.i())}function si(){}var zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ot(){oe.call(this,"d")}O(ot,oe);function Mt(){oe.call(this,"c")}O(Mt,oe);var yt={},Un=null;function Lt(){return Un=Un||new Dt}yt.La="serverreachability";function qt(c){oe.call(this,yt.La,c)}O(qt,oe);function Vt(c){const y=Lt();lt(y,new qt(y))}yt.STAT_EVENT="statevent";function fr(c,y){oe.call(this,yt.STAT_EVENT,c),this.stat=y}O(fr,oe);function ze(c){const y=Lt();lt(y,new fr(y,c))}yt.Ma="timingevent";function Rn(c,y){oe.call(this,yt.Ma,c),this.size=y}O(Rn,oe);function At(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},y)}function un(){this.g=!0}un.prototype.xa=function(){this.g=!1};function nr(c,y,x,T,$,Q){c.info(function(){if(c.g)if(Q)for(var ue="",st=Q.split("&"),Ht=0;Ht<st.length;Ht++){var Qe=st[Ht].split("=");if(1<Qe.length){var Xt=Qe[0];Qe=Qe[1];var zt=Xt.split("_");ue=2<=zt.length&&zt[1]=="type"?ue+(Xt+"="+Qe+"&"):ue+(Xt+"=redacted&")}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+y+`
`+x+`
`+ue})}function pr(c,y,x,T,$,Q,ue){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+y+`
`+x+`
`+Q+" "+ue})}function Ft(c,y,x,T){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+mo(c,x)+(T?" "+T:"")})}function Dr(c,y){c.info(function(){return"TIMEOUT: "+y})}un.prototype.info=function(){};function mo(c,y){if(!c.g)return y;if(!y)return null;try{var x=JSON.parse(y);if(x){for(c=0;c<x.length;c++)if(Array.isArray(x[c])){var T=x[c];if(!(2>T.length)){var $=T[1];if(Array.isArray($)&&!(1>$.length)){var Q=$[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ue=1;ue<$.length;ue++)$[ue]=""}}}}return Ss(x)}catch{return y}}var aa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ic={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jr;function go(){}O(go,rs),go.prototype.g=function(){return new XMLHttpRequest},go.prototype.i=function(){return{}},jr=new go;function Or(c,y,x,T){this.j=c,this.i=y,this.l=x,this.R=T||1,this.U=new ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tc}function Tc(){this.i=null,this.g="",this.h=!1}var Ul={},la={};function ua(c,y,x){c.L=1,c.v=ui(sr(y)),c.m=x,c.P=!0,$l(c,null)}function $l(c,y){c.F=Date.now(),ut(c),c.A=sr(c.v);var x=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),di(x.i,"t",T),c.C=0,x=c.j.J,c.h=new Tc,c.g=Wc(c.j,x?y:null,!c.m),0<c.O&&(c.M=new _n(b(c.Y,c,c.g),c.O)),y=c.U,x=c.g,T=c.ca;var $="readystatechange";Array.isArray($)||($&&(ho[0]=$.toString()),$=ho);for(var Q=0;Q<$.length;Q++){var ue=hr(x,$[Q],T||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),Vt(),nr(c.i,c.u,c.A,c.l,c.R,c.m)}Or.prototype.ca=function(c){c=c.target;const y=this.M;y&&Bn(c)==3?y.j():this.Y(c)},Or.prototype.Y=function(c){try{if(c==this.g)e:{const zt=Bn(this.g);var y=this.g.Ba();const yr=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Gl(this.g)))){this.J||zt!=4||y==7||(y==8||0>=yr?Vt(3):Vt(2)),yo(this);var x=this.g.Z();this.X=x;t:if(Sc(this)){var T=Gl(this.g);c="";var $=T.length,Q=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mr(this),ii(this);var ue="";break t}this.h.i=new d.TextDecoder}for(y=0;y<$;y++)this.h.h=!0,c+=this.h.i.decode(T[y],{stream:!(Q&&y==$-1)});T.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=x==200,pr(this.i,this.u,this.A,this.l,this.R,zt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var st,Ht=this.g;if((st=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(st)){var Qe=st;break t}}Qe=null}if(x=Qe)Ft(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bl(this,x);else{this.o=!1,this.s=3,ze(12),mr(this),ii(this);break e}}if(this.P){x=!0;let or;for(;!this.J&&this.C<ue.length;)if(or=jf(this,ue),or==la){zt==4&&(this.s=4,ze(14),x=!1),Ft(this.i,this.l,null,"[Incomplete Response]");break}else if(or==Ul){this.s=4,ze(15),Ft(this.i,this.l,ue,"[Invalid Chunk]"),x=!1;break}else Ft(this.i,this.l,or,null),Bl(this,or);if(Sc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||ue.length!=0||this.h.h||(this.s=1,ze(16),x=!1),this.o=this.o&&x,!x)Ft(this.i,this.l,ue,"[Invalid Chunked Response]"),mr(this),ii(this);else if(0<ue.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Zl(Xt),Xt.M=!0,ze(11))}}else Ft(this.i,this.l,ue,null),Bl(this,ue);zt==4&&mr(this),this.o&&!this.J&&(zt==4?wa(this.j,this):(this.o=!1,ut(this)))}else ma(this.g),x==400&&0<ue.indexOf("Unknown SID")?(this.s=3,ze(12)):(this.s=0,ze(13)),mr(this),ii(this)}}}catch{}finally{}};function Sc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function jf(c,y){var x=c.C,T=y.indexOf(`
`,x);return T==-1?la:(x=Number(y.substring(x,T)),isNaN(x)?Ul:(T+=1,T+x>y.length?la:(y=y.slice(T,T+x),c.C=T+x,y)))}Or.prototype.cancel=function(){this.J=!0,mr(this)};function ut(c){c.S=Date.now()+c.I,Cc(c,c.I)}function Cc(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=At(b(c.ba,c),y)}function yo(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Or.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Dr(this.i,this.A),this.L!=2&&(Vt(),ze(17)),mr(this),this.s=2,ii(this)):Cc(this,this.S-c)};function ii(c){c.j.G==0||c.J||wa(c.j,c)}function mr(c){yo(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,fo(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Bl(c,y){try{var x=c.j;if(x.G!=0&&(x.g==c||Nn(x.h,c))){if(!c.K&&Nn(x.h,c)&&x.G==3){try{var T=x.Da.g.parse(y)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<c.F)_a(x),zr(x);else break e;va(x),ze(18)}}else x.za=$[1],0<x.za-x.T&&37500>$[2]&&x.F&&x.v==0&&!x.C&&(x.C=At(b(x.Za,x),6e3));if(1>=Rc(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Ps(x,11)}else if((c.K||x.g==c)&&_a(x),!q(y))for($=x.Da.g.parse(y),y=0;y<$.length;y++){let Qe=$[y];if(x.T=Qe[0],Qe=Qe[1],x.G==2)if(Qe[0]=="c"){x.K=Qe[1],x.ia=Qe[2];const Xt=Qe[3];Xt!=null&&(x.la=Xt,x.j.info("VER="+x.la));const zt=Qe[4];zt!=null&&(x.Aa=zt,x.j.info("SVER="+x.Aa));const yr=Qe[5];yr!=null&&typeof yr=="number"&&0<yr&&(T=1.5*yr,x.L=T,x.j.info("backChannelRequestTimeoutMs_="+T)),T=x;const or=c.g;if(or){const Eo=or.g?or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eo){var Q=T.h;Q.g||Eo.indexOf("spdy")==-1&&Eo.indexOf("quic")==-1&&Eo.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Wl(Q,Q.h),Q.h=null))}if(T.D){const ba=or.g?or.g.getResponseHeader("X-HTTP-Session-Id"):null;ba&&(T.ya=ba,at(T.I,T.D,ba))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-c.F,x.j.info("Handshake RTT: "+x.R+"ms")),T=x;var ue=c;if(T.qa=Bc(T,T.J?T.ia:null,T.W),ue.K){Nc(T.h,ue);var st=ue,Ht=T.L;Ht&&(st.I=Ht),st.B&&(yo(st),ut(st)),T.g=ue}else ko(T);0<x.i.length&&as(x)}else Qe[0]!="stop"&&Qe[0]!="close"||Ps(x,7);else x.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Ps(x,7):dn(x):Qe[0]!="noop"&&x.l&&x.l.ta(Qe),x.v=0)}}Vt(4)}catch{}}var Ac=class{constructor(c,y){this.g=c,this.map=y}};function vo(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rr(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Rc(c){return c.h?1:c.g?c.g.size:0}function Nn(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Wl(c,y){c.g?c.g.add(y):c.h=y}function Nc(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}vo.prototype.cancel=function(){if(this.i=Pc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Pc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.D);return y}return S(c.i)}function ca(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var y=[],x=c.length,T=0;T<x;T++)y.push(c[T]);return y}y=[],x=0;for(T in c)y[x++]=c[T];return y}function da(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var y=[];c=c.length;for(var x=0;x<c;x++)y.push(x);return y}y=[],x=0;for(const T in c)y[x++]=T;return y}}}function oi(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var x=da(c),T=ca(c),$=T.length,Q=0;Q<$;Q++)y.call(void 0,T[Q],x&&x[Q],c)}var _o=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Of(c,y){if(c){c=c.split("&");for(var x=0;x<c.length;x++){var T=c[x].indexOf("="),$=null;if(0<=T){var Q=c[x].substring(0,T);$=c[x].substring(T+1)}else Q=c[x];y(Q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Cs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Cs){this.h=c.h,wo(this,c.j),this.o=c.o,this.g=c.g,ai(this,c.s),this.l=c.l;var y=c.i,x=new ss;x.i=y.i,y.g&&(x.g=new Map(y.g),x.h=y.h),li(this,x),this.m=c.m}else c&&(y=String(c).match(_o))?(this.h=!1,wo(this,y[1]||"",!0),this.o=We(y[2]||""),this.g=We(y[3]||"",!0),ai(this,y[4]),this.l=We(y[5]||"",!0),li(this,y[6]||"",!0),this.m=We(y[7]||"")):(this.h=!1,this.i=new ss(null,this.h))}Cs.prototype.toString=function(){var c=[],y=this.j;y&&c.push(ci(y,ha,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ci(y,ha,!0),"@"),c.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&c.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(ci(x,x.charAt(0)=="/"?Oc:jc,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",ci(x,ql)),c.join("")};function sr(c){return new Cs(c)}function wo(c,y,x){c.j=x?We(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function ai(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function li(c,y,x){y instanceof ss?(c.i=y,is(c.i,c.h)):(x||(y=ci(y,Mc)),c.i=new ss(y,c.h))}function at(c,y,x){c.i.set(y,x)}function ui(c){return at(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function We(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ci(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,Dc),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Dc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ha=/[#\/\?@]/g,jc=/[#\?:]/g,Oc=/[#\?]/g,Mc=/[#\?@]/g,ql=/#/g;function ss(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function cn(c){c.g||(c.g=new Map,c.h=0,c.i&&Of(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=ss.prototype,t.add=function(c,y){cn(this),this.i=null,c=gr(this,c);var x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function Mr(c,y){cn(c),y=gr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Lr(c,y){return cn(c),y=gr(c,y),c.g.has(y)}t.forEach=function(c,y){cn(this),this.g.forEach(function(x,T){x.forEach(function($){c.call(y,$,T,this)},this)},this)},t.na=function(){cn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),x=[];for(let T=0;T<y.length;T++){const $=c[T];for(let Q=0;Q<$.length;Q++)x.push(y[T])}return x},t.V=function(c){cn(this);let y=[];if(typeof c=="string")Lr(this,c)&&(y=y.concat(this.g.get(gr(this,c))));else{c=Array.from(this.g.values());for(let x=0;x<c.length;x++)y=y.concat(c[x])}return y},t.set=function(c,y){return cn(this),this.i=null,c=gr(this,c),Lr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function di(c,y,x){Mr(c,y),0<x.length&&(c.i=null,c.g.set(gr(c,y),S(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var x=0;x<y.length;x++){var T=y[x];const Q=encodeURIComponent(String(T)),ue=this.V(T);for(T=0;T<ue.length;T++){var $=Q;ue[T]!==""&&($+="="+encodeURIComponent(String(ue[T]))),c.push($)}}return this.i=c.join("&")};function gr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function is(c,y){y&&!c.j&&(cn(c),c.i=null,c.g.forEach(function(x,T){var $=T.toLowerCase();T!=$&&(Mr(this,T),di(this,$,x))},c)),c.j=y}function Mf(c,y){const x=new un;if(d.Image){const T=new Image;T.onload=E($n,x,"TestLoadImage: loaded",!0,y,T),T.onerror=E($n,x,"TestLoadImage: error",!1,y,T),T.onabort=E($n,x,"TestLoadImage: abort",!1,y,T),T.ontimeout=E($n,x,"TestLoadImage: timeout",!1,y,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else y(!1)}function Lc(c,y){const x=new un,T=new AbortController,$=setTimeout(()=>{T.abort(),$n(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:T.signal}).then(Q=>{clearTimeout($),Q.ok?$n(x,"TestPingServer: ok",!0,y):$n(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),$n(x,"TestPingServer: error",!1,y)})}function $n(c,y,x,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(x)}catch{}}function Lf(){this.g=new po}function Vc(c,y,x){const T=x||"";try{oi(c,function($,Q){let ue=$;p($)&&(ue=Ss($)),y.push(T+Q+"="+encodeURIComponent(ue))})}catch($){throw y.push(T+"type="+encodeURIComponent("_badmap")),$}}function As(c){this.l=c.Ub||null,this.j=c.eb||!1}O(As,rs),As.prototype.g=function(){return new xo(this.l,this.j)},As.prototype.i=(function(c){return function(){return c}})({});function xo(c,y){Dt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(xo,Dt),t=xo.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Fr(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vr(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Vr(this):Fr(this),this.readyState==3&&Fc(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Vr(this))},t.Qa=function(c){this.g&&(this.response=c,Vr(this))},t.ga=function(){this.g&&Vr(this)};function Vr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Fr(c)}t.setRequestHeader=function(c,y){this.u.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function Fr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Rs(c){let y="";return te(c,function(x,T){y+=T,y+=":",y+=x,y+=`\r
`}),y}function hi(c,y,x){e:{for(T in x){var T=!1;break e}T=!0}T||(x=Rs(x),typeof c=="string"?x!=null&&encodeURIComponent(String(x)):at(c,y,x))}function vt(c){Dt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(vt,Dt);var Vf=/^https?$/i,Hl=["POST","PUT"];t=vt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,y,x,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jr.g(),this.v=this.o?ri(this.o):ri(jr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){bo(this,Q);return}if(c=x||"",x=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)x.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const Q of T.keys())x.set(Q,T.get(Q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(x.keys()).find(Q=>Q.toLowerCase()=="content-type"),$=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Hl,y,void 0))||T||$||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of x)this.g.setRequestHeader(Q,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pa(this),this.u=!0,this.g.send(c),this.u=!1}catch(Q){bo(this,Q)}};function bo(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,fa(c),ir(c)}function fa(c){c.A||(c.A=!0,lt(c,"complete"),lt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,lt(this,"complete"),lt(this,"abort"),ir(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ir(this,!0)),vt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Kl(this):this.bb())},t.bb=function(){Kl(this)};function Kl(c){if(c.h&&typeof l<"u"&&(!c.v[1]||Bn(c)!=4||c.Z()!=2)){if(c.u&&Bn(c)==4)Nr(c.Ea,0,c);else if(lt(c,"readystatechange"),Bn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var T;if(T=ue===0){var $=String(c.D).match(_o)[1]||null;!$&&d.self&&d.self.location&&($=d.self.location.protocol.slice(0,-1)),T=!Vf.test($?$.toLowerCase():"")}x=T}if(x)lt(c,"complete"),lt(c,"success");else{c.m=6;try{var Q=2<Bn(c)?c.g.statusText:""}catch{Q=""}c.l=Q+" ["+c.Z()+"]",fa(c)}}finally{ir(c)}}}}function ir(c,y){if(c.g){pa(c);const x=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||lt(c,"ready");try{x.onreadystatechange=T}catch{}}}function pa(c){c.I&&(d.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Bn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),ni(y)}};function Gl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ma(c){const y={};c=(c.g&&2<=Bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(q(c[T]))continue;var x=D(c[T]);const $=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Q=y[$]||[];y[$]=Q,Q.push(x)}C(y,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function os(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function Ql(c){this.Aa=0,this.i=[],this.j=new un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=os("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=os("baseRetryDelayMs",5e3,c),this.cb=os("retryDelaySeedMs",1e4,c),this.Wa=os("forwardChannelMaxRetries",2,c),this.wa=os("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new vo(c&&c.concurrentRequestLimit),this.Da=new Lf,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ql.prototype,t.la=8,t.G=1,t.connect=function(c,y,x,T){ze(0),this.W=c,this.H=y||{},x&&T!==void 0&&(this.H.OSID=x,this.H.OAID=T),this.F=this.X,this.I=Bc(this,null,this.W),as(this)};function dn(c){if(ga(c),c.G==3){var y=c.U++,x=sr(c.I);if(at(x,"SID",c.K),at(x,"RID",y),at(x,"TYPE","terminate"),Ns(c,x),y=new Or(c,c.j,y),y.L=2,y.v=ui(sr(x)),x=!1,d.navigator&&d.navigator.sendBeacon)try{x=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!x&&d.Image&&(new Image().src=y.v,x=!0),x||(y.g=Wc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ut(y)}$c(c)}function zr(c){c.g&&(Zl(c),c.g.cancel(),c.g=null)}function ga(c){zr(c),c.u&&(d.clearTimeout(c.u),c.u=null),_a(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function as(c){if(!rr(c.h)&&!c.s){c.s=!0;var y=c.Ga;Te||ce(),Z||(Te(),Z=!0),fe.add(y,c),c.B=0}}function Ff(c,y){return Rc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=At(b(c.Ga,c,y),Uc(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new Or(this,this.j,c);let Q=this.o;if(this.S&&(Q?(Q=I(Q),j(Q,this.S)):Q=this.S),this.m!==null||this.O||($.H=Q,Q=null),this.P)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var T=this.i[x];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(y+=T,4096<y){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=fi(this,$,y),x=sr(this.I),at(x,"RID",c),at(x,"CVER",22),this.D&&at(x,"X-HTTP-Session-Id",this.D),Ns(this,x),Q&&(this.O?y="headers="+encodeURIComponent(String(Rs(Q)))+"&"+y:this.m&&hi(x,this.m,Q)),Wl(this.h,$),this.Ua&&at(x,"TYPE","init"),this.P?(at(x,"$req",y),at(x,"SID","null"),$.T=!0,ua($,x,null)):ua($,x,y),this.G=2}}else this.G==3&&(c?ya(this,c):this.i.length==0||rr(this.h)||ya(this))};function ya(c,y){var x;y?x=y.l:x=c.U++;const T=sr(c.I);at(T,"SID",c.K),at(T,"RID",x),at(T,"AID",c.T),Ns(c,T),c.m&&c.o&&hi(T,c.m,c.o),x=new Or(c,c.j,x,c.B+1),c.m===null&&(x.H=c.o),y&&(c.i=y.D.concat(c.i)),y=fi(c,x,1e3),x.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Wl(c.h,x),ua(x,T,y)}function Ns(c,y){c.H&&te(c.H,function(x,T){at(y,T,x)}),c.l&&oi({},function(x,T){at(y,T,x)})}function fi(c,y,x){x=Math.min(c.i.length,x);var T=c.l?b(c.l.Na,c.l,c):null;e:{var $=c.i;let Q=-1;for(;;){const ue=["count="+x];Q==-1?0<x?(Q=$[0].g,ue.push("ofs="+Q)):Q=0:ue.push("ofs="+Q);let st=!0;for(let Ht=0;Ht<x;Ht++){let Qe=$[Ht].g;const Xt=$[Ht].map;if(Qe-=Q,0>Qe)Q=Math.max(0,$[Ht].g-100),st=!1;else try{Vc(Xt,ue,"req"+Qe+"_")}catch{T&&T(Xt)}}if(st){T=ue.join("&");break e}}}return c=c.i.splice(0,x),y.D=c,T}function ko(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;Te||ce(),Z||(Te(),Z=!0),fe.add(y,c),c.v=0}}function va(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=At(b(c.Fa,c),Uc(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,zc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=At(b(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ze(10),zr(this),zc(this))};function Zl(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function zc(c){c.g=new Or(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=sr(c.qa);at(y,"RID","rpc"),at(y,"SID",c.K),at(y,"AID",c.T),at(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&at(y,"TO",c.ja),at(y,"TYPE","xmlhttp"),Ns(c,y),c.m&&c.o&&hi(y,c.m,c.o),c.L&&(c.g.I=c.L);var x=c.g;c=c.ia,x.L=1,x.v=ui(sr(y)),x.m=null,x.P=!0,$l(x,c)}t.Za=function(){this.C!=null&&(this.C=null,zr(this),va(this),ze(19))};function _a(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function wa(c,y){var x=null;if(c.g==y){_a(c),Zl(c),c.g=null;var T=2}else if(Nn(c.h,y))x=y.D,Nc(c.h,y),T=1;else return;if(c.G!=0){if(y.o)if(T==1){x=y.m?y.m.length:0,y=Date.now()-y.F;var $=c.B;T=Lt(),lt(T,new Rn(T,x)),as(c)}else ko(c);else if($=y.s,$==3||$==0&&0<y.X||!(T==1&&Ff(c,y)||T==2&&va(c)))switch(x&&0<x.length&&(y=c.h,y.i=y.i.concat(x)),$){case 1:Ps(c,5);break;case 4:Ps(c,10);break;case 3:Ps(c,6);break;default:Ps(c,2)}}}function Uc(c,y){let x=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(x*=2),x*y}function Ps(c,y){if(c.j.info("Error code "+y),y==2){var x=b(c.fb,c),T=c.Xa;const $=!T;T=new Cs(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||wo(T,"https"),ui(T),$?Mf(T.toString(),x):Lc(T.toString(),x)}else ze(2);c.G=0,c.l&&c.l.sa(y),$c(c),ga(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function $c(c){if(c.G=0,c.ka=[],c.l){const y=Pc(c.h);(y.length!=0||c.i.length!=0)&&(P(c.ka,y),P(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function Bc(c,y,x){var T=x instanceof Cs?sr(x):new Cs(x);if(T.g!="")y&&(T.g=y+"."+T.g),ai(T,T.s);else{var $=d.location;T=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;var Q=new Cs(null);T&&wo(Q,T),y&&(Q.g=y),$&&ai(Q,$),x&&(Q.l=x),T=Q}return x=c.D,y=c.ya,x&&y&&at(T,x,y),at(T,"VER",c.la),Ns(c,T),T}function Wc(c,y,x){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new vt(new As({eb:x})):new vt(c.pa),y.Ha(c.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jl(){}t=Jl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xa(){}xa.prototype.g=function(c,y){return new Pn(c,y)};function Pn(c,y){Dt.call(this),this.g=new Ql(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!q(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!q(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new ls(this)}O(Pn,Dt),Pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){dn(this.g)},Pn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.u&&(x={},x.__data__=Ss(c),c=x);y.i.push(new Ac(y.Ya++,c)),y.G==3&&as(y)},Pn.prototype.N=function(){this.g.l=null,delete this.j,dn(this.g),delete this.g,Pn.aa.N.call(this)};function qc(c){ot.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}O(qc,ot);function Hc(){Mt.call(this),this.status=1}O(Hc,Mt);function ls(c){this.g=c}O(ls,Jl),ls.prototype.ua=function(){lt(this.g,"a")},ls.prototype.ta=function(c){lt(this.g,new qc(c))},ls.prototype.sa=function(c){lt(this.g,new Hc)},ls.prototype.ra=function(){lt(this.g,"b")},xa.prototype.createWebChannel=xa.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,lk=function(){return new xa},ak=function(){return Lt()},ok=yt,Jm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},aa.NO_ERROR=0,aa.TIMEOUT=8,aa.HTTP_ERROR=6,uh=aa,Ic.COMPLETE="complete",ik=Ic,si.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,Tu=si,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,sk=vt}).apply(typeof Bd<"u"?Bd:typeof self<"u"?self:typeof window<"u"?window:{});const iw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=new Ng("@firebase/firestore");function bu(){return Zo.logLevel}function we(t,...e){if(Zo.logLevel<=Ke.DEBUG){const n=e.map(Bg);Zo.debug(`Firestore (${Rl}): ${t}`,...n)}}function Js(t,...e){if(Zo.logLevel<=Ke.ERROR){const n=e.map(Bg);Zo.error(`Firestore (${Rl}): ${t}`,...n)}}function gl(t,...e){if(Zo.logLevel<=Ke.WARN){const n=e.map(Bg);Zo.warn(`Firestore (${Rl}): ${t}`,...n)}}function Bg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t="Unexpected state"){const e=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: `+t;throw Js(e),new Error(e)}function it(t,e){t||je()}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Xs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Tn.UNAUTHENTICATED)))}shutdown(){}}class DN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class jN{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){it(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Hi,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Hi)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string"),new uk(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new Tn(e)}}class ON{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class MN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new ON(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class LN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){it(this.o===void 0);const r=a=>{a.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,we("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(it(typeof n.token=="string"),this.R=n.token,new LN(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=FN(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function et(t,e){return t<e?-1:t>e?1:0}function yl(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Et(0,0))}static max(){return new Oe(new Et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,r){n===void 0?n=0:n>e.length&&je(),r===void 0?r=e.length-n:r>e.length-n&&je(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qu?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),l=n.get(s);if(a<l)return-1;if(a>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class pt extends Qu{construct(e,n,r){return new pt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new pt(n)}static emptyPath(){return new pt([])}}const zN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends Qu{construct(e,n,r){return new mn(e,n,r)}static isValidIdentifier(e){return zN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(l=!l,s++):d!=="."||l?(r+=d,s++):(a(),s++)}if(a(),l)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(pt.fromString(e))}static fromName(e){return new Ie(pt.fromString(e).popFirst(5))}static empty(){return new Ie(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new pt(e.slice()))}}function UN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(r===1e9?new Et(n+1,0):new Et(n,r));return new Qi(s,Ie.empty(),e)}function $N(t){return new Qi(t.readTime,t.key,-1)}class Qi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qi(Oe.min(),Ie.empty(),-1)}static max(){return new Qi(Oe.max(),Ie.empty(),-1)}}function BN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==WN)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,r)=>{n(e)}))}static reject(e){return new ie(((n,r)=>{r(e)}))}static waitFor(e){return new ie(((n,r)=>{let s=0,a=0,l=!1;e.forEach((d=>{++s,d.next((()=>{++a,l&&a===s&&n()}),(f=>r(f)))})),l=!0,a===s&&n()}))}static or(e){let n=ie.resolve(!1);for(const r of e)n=n.next((s=>s?ie.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,a)=>{r.push(n.call(this,s,a))})),this.waitFor(r)}static mapArray(e,n){return new ie(((r,s)=>{const a=e.length,l=new Array(a);let d=0;for(let f=0;f<a;f++){const p=f;n(e[p]).next((v=>{l[p]=v,++d,d===a&&r(l)}),(v=>s(v)))}}))}static doWhile(e,n){return new ie(((r,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):r()};a()}))}}function HN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wg.oe=-1;function of(t){return t==null}function Ph(t){return t===0&&1/t==-1/0}function KN(t){return typeof t=="number"&&Number.isInteger(t)&&!Ph(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ta(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wd(this.root,e,this.comparator,!0)}}class Wd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??pn.RED,this.left=s??pn.EMPTY,this.right=a??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new pn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return pn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw je();const e=this.left.check();if(e!==this.right.check())throw je();return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw je()}get value(){throw je()}get color(){throw je()}get left(){throw je()}get right(){throw je()}copy(e,n,r,s,a){return this}insert(e,n,r){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aw(this.data.getIterator())}getIteratorFrom(e){return new aw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new gn(this.comparator);return n.data=e,n}}class aw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new cr([])}unionWith(e){let n=new gn(mn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new hk("Invalid base64 string: "+a):a}})(e);return new yn(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const GN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(t){if(it(!!t),typeof t=="string"){let e=0;const n=GN.exec(t);if(it(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ot(t.seconds),nanos:Ot(t.nanos)}}function Ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jo(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hg(t){const e=t.mapValue.fields.__previous_value__;return qg(e)?Hg(e):e}function Zu(t){const e=Zi(t.mapValue.fields.__local_write_time__.timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,r,s,a,l,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p}}class Ju{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ju("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ju&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd={mapValue:{}};function Yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qg(t)?4:JN(t)?9007199254740991:ZN(t)?10:11:je()}function ks(t,e){if(t===e)return!0;const n=Yo(t);if(n!==Yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zu(t).isEqual(Zu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Zi(s.timestampValue),d=Zi(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return Jo(s.bytesValue).isEqual(Jo(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return Ot(s.geoPointValue.latitude)===Ot(a.geoPointValue.latitude)&&Ot(s.geoPointValue.longitude)===Ot(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Ot(s.integerValue)===Ot(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Ot(s.doubleValue),d=Ot(a.doubleValue);return l===d?Ph(l)===Ph(d):isNaN(l)&&isNaN(d)}return!1})(t,e);case 9:return yl(t.arrayValue.values||[],e.arrayValue.values||[],ks);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},d=a.mapValue.fields||{};if(ow(l)!==ow(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(d[f]===void 0||!ks(l[f],d[f])))return!1;return!0})(t,e);default:return je()}}function Yu(t,e){return(t.values||[]).find((n=>ks(n,e)))!==void 0}function vl(t,e){if(t===e)return 0;const n=Yo(t),r=Yo(e);if(n!==r)return et(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return et(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const d=Ot(a.integerValue||a.doubleValue),f=Ot(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(t,e);case 3:return lw(t.timestampValue,e.timestampValue);case 4:return lw(Zu(t),Zu(e));case 5:return et(t.stringValue,e.stringValue);case 6:return(function(a,l){const d=Jo(a),f=Jo(l);return d.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const d=a.split("/"),f=l.split("/");for(let p=0;p<d.length&&p<f.length;p++){const v=et(d[p],f[p]);if(v!==0)return v}return et(d.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const d=et(Ot(a.latitude),Ot(l.latitude));return d!==0?d:et(Ot(a.longitude),Ot(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return uw(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var d,f,p,v;const w=a.fields||{},b=l.fields||{},E=(d=w.value)===null||d===void 0?void 0:d.arrayValue,O=(f=b.value)===null||f===void 0?void 0:f.arrayValue,S=et(((p=E==null?void 0:E.values)===null||p===void 0?void 0:p.length)||0,((v=O==null?void 0:O.values)===null||v===void 0?void 0:v.length)||0);return S!==0?S:uw(E,O)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===qd.mapValue&&l===qd.mapValue)return 0;if(a===qd.mapValue)return 1;if(l===qd.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),p=l.fields||{},v=Object.keys(p);f.sort(),v.sort();for(let w=0;w<f.length&&w<v.length;++w){const b=et(f[w],v[w]);if(b!==0)return b;const E=vl(d[f[w]],p[v[w]]);if(E!==0)return E}return et(f.length,v.length)})(t.mapValue,e.mapValue);default:throw je()}}function lw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return et(t,e);const n=Zi(t),r=Zi(e),s=et(n.seconds,r.seconds);return s!==0?s:et(n.nanos,r.nanos)}function uw(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=vl(n[s],r[s]);if(a)return a}return et(n.length,r.length)}function _l(t){return Ym(t)}function Ym(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Zi(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Jo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ie.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Ym(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${Ym(n.fields[l])}`;return s+"}"})(t.mapValue):je()}function cw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xm(t){return!!t&&"integerValue"in t}function Kg(t){return!!t&&"arrayValue"in t}function dw(t){return!!t&&"nullValue"in t}function hw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ch(t){return!!t&&"mapValue"in t}function ZN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ou(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ta(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ou(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ou(t.arrayValue.values[n]);return e}return Object.assign({},t)}function JN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ch(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ou(n)}setAll(e){let n=mn.emptyPath(),r={},s=[];e.forEach(((l,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=d.popLast()}l?r[d.lastSegment()]=Ou(l):s.push(d.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ks(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ch(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ta(n,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new Zn(Ou(this.value))}}function fk(t){const e=[];return ta(t.fields,((n,r)=>{const s=new mn([n]);if(ch(r)){const a=fk(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n,r,s,a,l,d){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Sn(e,0,Oe.min(),Oe.min(),Oe.min(),Zn.empty(),0)}static newFoundDocument(e,n,r,s){return new Sn(e,1,n,Oe.min(),r,s,0)}static newNoDocument(e,n){return new Sn(e,2,n,Oe.min(),Oe.min(),Zn.empty(),0)}static newUnknownDocument(e,n){return new Sn(e,3,n,Oe.min(),Oe.min(),Zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function fw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?r=Ie.comparator(Ie.fromName(l.referenceValue),n.key):r=vl(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function pw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ks(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n="asc"){this.field=e,this.dir=n}}function YN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{}class Bt extends pk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new eP(e,n,r):n==="array-contains"?new rP(e,r):n==="in"?new sP(e,r):n==="not-in"?new iP(e,r):n==="array-contains-any"?new oP(e,r):new Bt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tP(e,r):new nP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vl(n,this.value)):n!==null&&Yo(this.value)===Yo(n)&&this.matchesComparison(vl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yr extends pk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Yr(e,n)}matches(e){return mk(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function mk(t){return t.op==="and"}function gk(t){return XN(t)&&mk(t)}function XN(t){for(const e of t.filters)if(e instanceof Yr)return!1;return!0}function eg(t){if(t instanceof Bt)return t.field.canonicalString()+t.op.toString()+_l(t.value);if(gk(t))return t.filters.map((e=>eg(e))).join(",");{const e=t.filters.map((n=>eg(n))).join(",");return`${t.op}(${e})`}}function yk(t,e){return t instanceof Bt?(function(r,s){return s instanceof Bt&&r.op===s.op&&r.field.isEqual(s.field)&&ks(r.value,s.value)})(t,e):t instanceof Yr?(function(r,s){return s instanceof Yr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,d)=>a&&yk(l,s.filters[d])),!0):!1})(t,e):void je()}function vk(t){return t instanceof Bt?(function(n){return`${n.field.canonicalString()} ${n.op} ${_l(n.value)}`})(t):t instanceof Yr?(function(n){return n.op.toString()+" {"+n.getFilters().map(vk).join(" ,")+"}"})(t):"Filter"}class eP extends Bt{constructor(e,n,r){super(e,n,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class tP extends Bt{constructor(e,n){super(e,"in",n),this.keys=_k("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class nP extends Bt{constructor(e,n){super(e,"not-in",n),this.keys=_k("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function _k(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>Ie.fromName(r.referenceValue)))}class rP extends Bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kg(n)&&Yu(n.arrayValue,this.value)}}class sP extends Bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yu(this.value.arrayValue,n)}}class iP extends Bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Yu(this.value.arrayValue,n)}}class oP extends Bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Yu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n=null,r=[],s=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=d,this.ue=null}}function mw(t,e=null,n=[],r=[],s=null,a=null,l=null){return new aP(t,e,n,r,s,a,l)}function Gg(t){const e=Me(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>eg(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>_l(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>_l(r))).join(",")),e.ue=n}return e.ue}function Qg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pw(t.startAt,e.startAt)&&pw(t.endAt,e.endAt)}function tg(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n=null,r=[],s=[],a=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function lP(t,e,n,r,s,a,l,d){return new Nl(t,e,n,r,s,a,l,d)}function Zg(t){return new Nl(t)}function gw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wk(t){return t.collectionGroup!==null}function Mu(t){const e=Me(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new gn(mn.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Xu(a,r))})),n.has(mn.keyField().canonicalString())||e.ce.push(new Xu(mn.keyField(),r))}return e.ce}function _s(t){const e=Me(t);return e.le||(e.le=uP(e,Mu(t))),e.le}function uP(t,e){if(t.limitType==="F")return mw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Xu(s.field,a)}));const n=t.endAt?new Dh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Dh(t.startAt.position,t.startAt.inclusive):null;return mw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ng(t,e){const n=t.filters.concat([e]);return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jh(t,e,n){return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function af(t,e){return Qg(_s(t),_s(e))&&t.limitType===e.limitType}function xk(t){return`${Gg(_s(t))}|lt:${t.limitType}`}function qa(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>vk(s))).join(", ")}]`),of(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>_l(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>_l(s))).join(",")),`Target(${r})`})(_s(t))}; limitType=${t.limitType})`}function lf(t,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ie.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,s){for(const a of Mu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(l,d,f){const p=fw(l,d,f);return l.inclusive?p<=0:p<0})(r.startAt,Mu(r),s)||r.endAt&&!(function(l,d,f){const p=fw(l,d,f);return l.inclusive?p>=0:p>0})(r.endAt,Mu(r),s))})(t,e)}function cP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bk(t){return(e,n)=>{let r=!1;for(const s of Mu(t)){const a=dP(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function dP(t,e,n){const r=t.field.isKeyField()?Ie.comparator(e.key,n.key):(function(a,l,d){const f=l.data.field(a),p=d.data.field(a);return f!==null&&p!==null?vl(f,p):je()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return je()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ta(this.inner,((n,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return dk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=new It(Ie.comparator);function Ys(){return hP}const kk=new It(Ie.comparator);function Su(...t){let e=kk;for(const n of t)e=e.insert(n.key,n);return e}function Ek(t){let e=kk;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Fo(){return Lu()}function Ik(){return Lu()}function Lu(){return new Pl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const fP=new It(Ie.comparator),pP=new gn(Ie.comparator);function Be(...t){let e=pP;for(const n of t)e=e.add(n);return e}const mP=new gn(et);function gP(){return mP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function Tk(t){return{integerValue:""+t}}function yP(t,e){return KN(e)?Tk(e):Jg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this._=void 0}}function vP(t,e,n){return t instanceof ec?(function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&qg(a)&&(a=Hg(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}})(n,e):t instanceof tc?Ck(t,e):t instanceof nc?Ak(t,e):(function(s,a){const l=Sk(s,a),d=yw(l)+yw(s.Pe);return Xm(l)&&Xm(s.Pe)?Tk(d):Jg(s.serializer,d)})(t,e)}function _P(t,e,n){return t instanceof tc?Ck(t,e):t instanceof nc?Ak(t,e):n}function Sk(t,e){return t instanceof Oh?(function(r){return Xm(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class ec extends uf{}class tc extends uf{constructor(e){super(),this.elements=e}}function Ck(t,e){const n=Rk(e);for(const r of t.elements)n.some((s=>ks(s,r)))||n.push(r);return{arrayValue:{values:n}}}class nc extends uf{constructor(e){super(),this.elements=e}}function Ak(t,e){let n=Rk(e);for(const r of t.elements)n=n.filter((s=>!ks(s,r)));return{arrayValue:{values:n}}}class Oh extends uf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function yw(t){return Ot(t.integerValue||t.doubleValue)}function Rk(t){return Kg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n){this.field=e,this.transform=n}}function xP(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof tc&&s instanceof tc||r instanceof nc&&s instanceof nc?yl(r.elements,s.elements,ks):r instanceof Oh&&s instanceof Oh?ks(r.Pe,s.Pe):r instanceof ec&&s instanceof ec})(t.transform,e.transform)}class bP{constructor(e,n){this.version=e,this.transformResults=n}}class Tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cf{}function Nk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yg(t.key,Tr.none()):new vc(t.key,t.data,Tr.none());{const n=t.data,r=Zn.empty();let s=new gn(mn.comparator);for(let a of e.fields)if(!s.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new ro(t.key,r,new cr(s.toArray()),Tr.none())}}function kP(t,e,n){t instanceof vc?(function(s,a,l){const d=s.value.clone(),f=_w(s.fieldTransforms,a,l.transformResults);d.setAll(f),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):t instanceof ro?(function(s,a,l){if(!dh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const d=_w(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(Pk(s)),f.setAll(d),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(t,e,n):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Vu(t,e,n,r){return t instanceof vc?(function(a,l,d,f){if(!dh(a.precondition,l))return d;const p=a.value.clone(),v=ww(a.fieldTransforms,f,l);return p.setAll(v),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(t,e,n,r):t instanceof ro?(function(a,l,d,f){if(!dh(a.precondition,l))return d;const p=ww(a.fieldTransforms,f,l),v=l.data;return v.setAll(Pk(a)),v.setAll(p),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(t,e,n,r):(function(a,l,d){return dh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(t,e,n)}function EP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=Sk(r.transform,s||null);a!=null&&(n===null&&(n=Zn.empty()),n.set(r.field,a))}return n||null}function vw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&yl(r,s,((a,l)=>xP(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vc extends cf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ro extends cf{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Pk(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function _w(t,e,n){const r=new Map;it(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,d=e.data.field(a.field);r.set(a.field,_P(l,d,n[s]))}return r}function ww(t,e,n){const r=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);r.set(s.field,vP(a,l,e))}return r}class Yg extends cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IP extends cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&kP(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ik();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=n.has(s.key)?null:d;const f=Nk(l,d);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Oe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Be())}isEqual(e){return this.batchId===e.batchId&&yl(this.mutations,e.mutations,((n,r)=>vw(n,r)))&&yl(this.baseMutations,e.baseMutations,((n,r)=>vw(n,r)))}}class Xg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){it(e.mutations.length===r.length);let s=(function(){return fP})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new Xg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,Ze;function AP(t){switch(t){default:return je();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function Dk(t){if(t===void 0)return Js("GRPC error has no .code"),ne.UNKNOWN;switch(t){case $t.OK:return ne.OK;case $t.CANCELLED:return ne.CANCELLED;case $t.UNKNOWN:return ne.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ne.INTERNAL;case $t.UNAVAILABLE:return ne.UNAVAILABLE;case $t.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case $t.NOT_FOUND:return ne.NOT_FOUND;case $t.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case $t.ABORTED:return ne.ABORTED;case $t.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case $t.DATA_LOSS:return ne.DATA_LOSS;default:return je()}}(Ze=$t||($t={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=new Ho([4294967295,4294967295],0);function xw(t){const e=RP().encode(t),n=new rk;return n.update(e),new Uint8Array(n.digest())}function bw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ho([n,r],0),new Ho([s,a],0)]}class ey{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cu(`Invalid padding: ${n}`);if(r<0)throw new Cu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ho.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ho.fromNumber(r)));return s.compare(NP)===1&&(s=new Ho([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=xw(e),[r,s]=bw(n);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,s,a);if(!this.de(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new ey(a,s,n);return r.forEach((d=>l.insert(d))),l}insert(e){if(this.Ie===0)return;const n=xw(e),[r,s]=bw(n);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,s,a);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,_c.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new df(Oe.min(),s,new It(et),Ys(),Be())}}class _c{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _c(r,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class jk{constructor(e,n){this.targetId=e,this.me=n}}class Ok{constructor(e,n,r=yn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class kw{constructor(){this.fe=0,this.ge=Iw(),this.pe=yn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),n=Be(),r=Be();return this.ge.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:je()}})),new _c(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Iw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,it(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class PP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ys(),this.qe=Ew(),this.Qe=new It(et)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:je()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,s)=>{this.ze(s)&&n(s)}))}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(tg(a))if(r===0){const l=new Ie(a.path);this.Ue(n,l,Sn.newNoDocument(l,Oe.min()))}else it(r===1);else{const l=this.Ye(n);if(l!==r){const d=this.Ze(e),f=d?this.Xe(d,e,l):1;if(f!==0){this.je(n);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let l,d;try{l=Jo(r).toUint8Array()}catch(f){if(f instanceof hk)return gl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new ey(l,s,a)}catch(f){return gl(f instanceof Cu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Ie===0?null:d}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach((a=>{const l=this.Le.tt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(n,a,null),s++)})),s}rt(e){const n=new Map;this.Be.forEach(((a,l)=>{const d=this.Je(l);if(d){if(a.current&&tg(d.target)){const f=new Ie(d.target.path);this.ke.get(f)!==null||this.it(l,f)||this.Ue(l,f,Sn.newNoDocument(f,e))}a.be&&(n.set(l,a.ve()),a.Ce())}}));let r=Be();this.qe.forEach(((a,l)=>{let d=!0;l.forEachWhile((f=>{const p=this.Je(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ke.forEach(((a,l)=>l.setReadTime(e)));const s=new df(e,n,this.Qe,this.ke,r);return this.ke=Ys(),this.qe=Ew(),this.Qe=new It(et),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new kw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new gn(et),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kw),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ew(){return new It(Ie.comparator)}function Iw(){return new It(Ie.comparator)}const DP={asc:"ASCENDING",desc:"DESCENDING"},jP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OP={and:"AND",or:"OR"};class MP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rg(t,e){return t.useProto3Json||of(e)?e:{value:e}}function Mh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LP(t,e){return Mh(t,e.toTimestamp())}function ws(t){return it(!!t),Oe.fromTimestamp((function(n){const r=Zi(n);return new Et(r.seconds,r.nanos)})(t))}function ty(t,e){return sg(t,e).canonicalString()}function sg(t,e){const n=(function(s){return new pt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Lk(t){const e=pt.fromString(t);return it($k(e)),e}function ig(t,e){return ty(t.databaseId,e.path)}function bm(t,e){const n=Lk(e);if(n.get(1)!==t.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(Fk(n))}function Vk(t,e){return ty(t.databaseId,e)}function VP(t){const e=Lk(t);return e.length===4?pt.emptyPath():Fk(e)}function og(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Fk(t){return it(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Tw(t,e,n){return{name:ig(t,e),fields:n.value.mapValue.fields}}function FP(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:je()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(p,v){return p.useProto3Json?(it(v===void 0||typeof v=="string"),yn.fromBase64String(v||"")):(it(v===void 0||v instanceof Buffer||v instanceof Uint8Array),yn.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(p){const v=p.code===void 0?ne.UNKNOWN:Dk(p.code);return new me(v,p.message||"")})(l);n=new Ok(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bm(t,r.document.name),a=ws(r.document.updateTime),l=r.document.createTime?ws(r.document.createTime):Oe.min(),d=new Zn({mapValue:{fields:r.document.fields}}),f=Sn.newFoundDocument(s,a,l,d),p=r.targetIds||[],v=r.removedTargetIds||[];n=new hh(p,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bm(t,r.document),a=r.readTime?ws(r.readTime):Oe.min(),l=Sn.newNoDocument(s,a),d=r.removedTargetIds||[];n=new hh([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bm(t,r.document),a=r.removedTargetIds||[];n=new hh([],a,s,null)}else{if(!("filter"in e))return je();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new CP(s,a),d=r.targetId;n=new jk(d,l)}}return n}function zP(t,e){let n;if(e instanceof vc)n={update:Tw(t,e.key,e.value)};else if(e instanceof Yg)n={delete:ig(t,e.key)};else if(e instanceof ro)n={update:Tw(t,e.key,e.data),updateMask:QP(e.fieldMask)};else{if(!(e instanceof IP))return je();n={verify:ig(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const d=l.transform;if(d instanceof ec)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof nc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Oh)return{fieldPath:l.field.canonicalString(),increment:d.Pe};throw je()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:LP(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:je()})(t,e.precondition)),n}function UP(t,e){return t&&t.length>0?(it(e!==void 0),t.map((n=>(function(s,a){let l=s.updateTime?ws(s.updateTime):ws(a);return l.isEqual(Oe.min())&&(l=ws(a)),new bP(l,s.transformResults||[])})(n,e)))):[]}function $P(t,e){return{documents:[Vk(t,e.path)]}}function BP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Vk(t,s);const a=(function(p){if(p.length!==0)return Uk(Yr.create(p,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((v=>(function(b){return{field:Ha(b.field),direction:HP(b.dir)}})(v)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const d=rg(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{_t:n,parent:s}}function WP(t){let e=VP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){it(r===1);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=(function(w){const b=zk(w);return b instanceof Yr&&gk(b)?b.getFilters():[b]})(n.where));let l=[];n.orderBy&&(l=(function(w){return w.map((b=>(function(O){return new Xu(Ka(O.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(b)))})(n.orderBy));let d=null;n.limit&&(d=(function(w){let b;return b=typeof w=="object"?w.value:w,of(b)?null:b})(n.limit));let f=null;n.startAt&&(f=(function(w){const b=!!w.before,E=w.values||[];return new Dh(E,b)})(n.startAt));let p=null;return n.endAt&&(p=(function(w){const b=!w.before,E=w.values||[];return new Dh(E,b)})(n.endAt)),lP(e,s,l,a,d,"F",f,p)}function qP(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zk(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ka(n.unaryFilter.field);return Bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ka(n.unaryFilter.field);return Bt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ka(n.unaryFilter.field);return Bt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ka(n.unaryFilter.field);return Bt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return je()}})(t):t.fieldFilter!==void 0?(function(n){return Bt.create(Ka(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return je()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Yr.create(n.compositeFilter.filters.map((r=>zk(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return je()}})(n.compositeFilter.op))})(t):je()}function HP(t){return DP[t]}function KP(t){return jP[t]}function GP(t){return OP[t]}function Ha(t){return{fieldPath:t.canonicalString()}}function Ka(t){return mn.fromServerFormat(t.fieldPath)}function Uk(t){return t instanceof Bt?(function(n){if(n.op==="=="){if(hw(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NAN"}};if(dw(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hw(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NAN"}};if(dw(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(n.field),op:KP(n.op),value:n.value}}})(t):t instanceof Yr?(function(n){const r=n.getFilters().map((s=>Uk(s)));return r.length===1?r[0]:{compositeFilter:{op:GP(n.op),filters:r}}})(t):je()}function QP(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function $k(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n,r,s,a=Oe.min(),l=Oe.min(),d=yn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new $i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.ct=e}}function JP(t){const e=WP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.un=new XP}addToCollectionParentIndex(e,n){return this.un.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(Qi.min())}updateCollectionGroup(e,n,r){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class XP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new gn(pt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new gn(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wl(0)}static kn(){return new wl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.changes=new Pl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Vu(r.mutation,s,cr.empty(),Et.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Be()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Be()){const s=Fo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((a=>{let l=Su();return a.forEach(((d,f)=>{l=l.insert(d,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=Fo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Be())))}populateOverlays(e,n,r){const s=[];return r.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,d)=>{n.set(l,d)}))}))}computeViews(e,n,r,s){let a=Ys();const l=Lu(),d=(function(){return Lu()})();return n.forEach(((f,p)=>{const v=r.get(p.key);s.has(p.key)&&(v===void 0||v.mutation instanceof ro)?a=a.insert(p.key,p):v!==void 0?(l.set(p.key,v.mutation.getFieldMask()),Vu(v.mutation,p,v.mutation.getFieldMask(),Et.now())):l.set(p.key,cr.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((p,v)=>l.set(p,v))),n.forEach(((p,v)=>{var w;return d.set(p,new t2(v,(w=l.get(p))!==null&&w!==void 0?w:null))})),d)))}recalculateAndSaveOverlays(e,n){const r=Lu();let s=new It(((l,d)=>l-d)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const d of l)d.keys().forEach((f=>{const p=n.get(f);if(p===null)return;let v=r.get(f)||cr.empty();v=d.applyToLocalView(p,v),r.set(f,v);const w=(s.get(d.batchId)||Be()).add(f);s=s.insert(d.batchId,w)}))})).next((()=>{const l=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,v=f.value,w=Ik();v.forEach((b=>{if(!a.has(b)){const E=Nk(n.get(b),r.get(b));E!==null&&w.set(b,E),a=a.add(b)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,w))}return ie.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(l){return Ie.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):ie.resolve(Fo());let d=-1,f=a;return l.next((p=>ie.forEach(p,((v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next((b=>{f=f.insert(v,b)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,f,p,Be()))).next((v=>({batchId:d,changes:Ek(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next((r=>{let s=Su();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let l=Su();return this.indexManager.getCollectionParents(e,a).next((d=>ie.forEach(d,(f=>{const p=(function(w,b){return new Nl(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((v=>{v.forEach(((w,b)=>{l=l.insert(w,b)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s)))).next((l=>{a.forEach(((f,p)=>{const v=p.getKey();l.get(v)===null&&(l=l.insert(v,Sn.newInvalidDocument(v)))}));let d=Su();return l.forEach(((f,p)=>{const v=a.get(f);v!==void 0&&Vu(v.mutation,p,cr.empty(),Et.now()),lf(n,p)&&(d=d.insert(f,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ie.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:ws(s.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(s){return{name:s.name,query:JP(s.bundledQuery),readTime:ws(s.readTime)}})(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.overlays=new It(Ie.comparator),this.Ir=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fo();return ie.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,a)=>{this.ht(e,n,a)})),ie.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),ie.resolve()}getOverlaysForCollection(e,n,r){const s=Fo(),a=n.length+1,l=new Ie(n.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new It(((p,v)=>p-v));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let v=a.get(p.largestBatchId);v===null&&(v=Fo(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=Fo(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=s)););return ie.resolve(d)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new SP(n,r));let a=this.Ir.get(n);a===void 0&&(a=Be(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.Tr=new gn(sn.Er),this.dr=new gn(sn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new sn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new sn(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new Ie(new pt([])),r=new sn(n,e),s=new sn(n,e+1),a=[];return this.dr.forEachInRange([r,s],(l=>{this.Vr(l),a.push(l.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ie(new pt([])),r=new sn(n,e),s=new sn(n,e+1);let a=Be();return this.dr.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new sn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class sn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ie.comparator(e.key,n.key)||et(e.wr,n.wr)}static Ar(e,n){return et(e.wr,n.wr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new gn(sn.Er)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new TP(a,n,r,s);this.mutationQueue.push(l);for(const d of s)this.br=this.br.add(new sn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,n){return ie.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sn(n,0),s=new sn(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],(l=>{const d=this.Dr(l.wr);a.push(d)})),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gn(et);return n.forEach((s=>{const a=new sn(s,0),l=new sn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,l],(d=>{r=r.add(d.wr)}))})),ie.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Ie.isDocumentKey(a)||(a=a.child(""));const l=new sn(new Ie(a),0);let d=new gn(et);return this.br.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(d=d.add(f.wr)),!0)}),l),ie.resolve(this.Cr(d))}Cr(e){const n=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){it(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ie.forEach(n.mutations,(s=>{const a=new sn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new sn(n,0),s=this.br.firstAfterOrEqual(r);return ie.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.Mr=e,this.docs=(function(){return new It(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ie.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(n))}getEntries(e,n){let r=Ys();return n.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Sn.newInvalidDocument(s))})),ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Ys();const l=n.path,d=new Ie(l.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:v}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||BN($N(v),r)<=0||(s.has(v.key)||lf(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,n,r,s){je()}Or(e,n){return ie.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new l2(this)}getSize(e){return ie.resolve(this.size)}}class l2 extends e2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),ie.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.persistence=e,this.Nr=new Pl((n=>Gg(n)),Qg),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ny,this.targetCount=0,this.kr=wl.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,s)=>n(s))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ie.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new wl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Kn(n),ie.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach(((l,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.Nr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ie.waitFor(a).next((()=>s))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ie.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ie.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),ie.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ie.resolve(r)}containsKey(e,n){return ie.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wg(0),this.Kr=!1,this.Kr=!0,this.$r=new i2,this.referenceDelegate=e(this),this.Ur=new u2(this),this.indexManager=new YP,this.remoteDocumentCache=(function(s){return new a2(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new ZP(n),this.Gr=new r2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new s2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new o2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){we("MemoryPersistence","Starting transaction:",e);const s=new d2(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((a=>this.referenceDelegate.jr(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Hr(e,n){return ie.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class d2 extends qN{constructor(e){super(),this.currentSequenceNumber=e}}class ry{constructor(e){this.persistence=e,this.Jr=new ny,this.Yr=null}static Zr(e){return new ry(e)}get Xr(){if(this.Yr)return this.Yr;throw je()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ie.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Xr,(r=>{const s=Ie.fromPath(r);return this.ei(e,s).next((a=>{a||n.removeEntry(s,Oe.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return ie.or([()=>ie.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Be(),s=Be();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new sy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return tC()?8:HN(Cn())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.Zi(e,n,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new h2;return this.Xi(e,n,l).next((d=>{if(a.result=d,this.zi)return this.es(e,n,l,d.size)}))})).next((()=>a.result))}es(e,n,r,s){return r.documentReadCount<this.ji?(bu()<=Ke.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ie.resolve()):(bu()<=Ke.DEBUG&&we("QueryEngine","Query:",qa(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(bu()<=Ke.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_s(n))):ie.resolve())}Yi(e,n){if(gw(n))return ie.resolve(null);let r=_s(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=jh(n,null,"F"),r=_s(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Be(...a);return this.Ji.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.ts(n,d);return this.ns(n,p,l,f.readTime)?this.Yi(e,jh(n,null,"F")):this.rs(e,p,n,f)}))))})))))}Zi(e,n,r,s){return gw(n)||s.isEqual(Oe.min())?ie.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const l=this.ts(n,a);return this.ns(n,l,r,s)?ie.resolve(null):(bu()<=Ke.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),qa(n)),this.rs(e,l,n,UN(s,-1)).next((d=>d)))}))}ts(e,n){let r=new gn(bk(e));return n.forEach(((s,a)=>{lf(e,a)&&(r=r.add(a))})),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return bu()<=Ke.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",qa(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qi.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new It(et),this._s=new Pl((a=>Gg(a)),Qg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new n2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function m2(t,e,n,r){return new p2(t,e,n,r)}async function Bk(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],d=[];let f=Be();for(const p of s){l.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}for(const p of a){d.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}return n.localDocuments.getDocuments(r,f).next((p=>({hs:p,removedBatchIds:l,addedBatchIds:d})))}))}))}function g2(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(d,f,p,v){const w=p.batch,b=w.keys();let E=ie.resolve();return b.forEach((O=>{E=E.next((()=>v.getEntry(f,O))).next((S=>{const P=p.docVersions.get(O);it(P!==null),S.version.compareTo(P)<0&&(w.applyToRemoteDocument(S,p),S.isValidDocument()&&(S.setReadTime(p.commitVersion),v.addEntry(S)))}))})),E.next((()=>d.mutationQueue.removeMutationBatch(f,w)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=Be();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Wk(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function y2(t,e){const n=Me(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const d=[];e.targetChanges.forEach(((v,w)=>{const b=s.get(w);if(!b)return;d.push(n.Ur.removeMatchingKeys(a,v.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(a,v.addedDocuments,w))));let E=b.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?E=E.withResumeToken(yn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(v.resumeToken,r)),s=s.insert(w,E),(function(S,P,B){return S.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(b,E,v)&&d.push(n.Ur.updateTargetData(a,E))}));let f=Ys(),p=Be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(v2(a,l,e.documentUpdates).next((v=>{f=v.Ps,p=v.Is}))),!r.isEqual(Oe.min())){const v=n.Ur.getLastRemoteSnapshotVersion(a).next((w=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(v)}return ie.waitFor(d).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,f,p))).next((()=>f))})).then((a=>(n.os=s,a)))}function v2(t,e,n){let r=Be(),s=Be();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=Ys();return n.forEach(((d,f)=>{const p=a.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(Oe.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):we("LocalStore","Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)})),{Ps:l,Is:s}}))}function _2(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function w2(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Ur.getTargetData(r,e).next((a=>a?(s=a,ie.resolve(s)):n.Ur.allocateTargetId(r).next((l=>(s=new $i(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function ag(t,e,n){const r=Me(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!yc(l))throw l;we("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Sw(t,e,n){const r=Me(t);let s=Oe.min(),a=Be();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,p,v){const w=Me(f),b=w._s.get(v);return b!==void 0?ie.resolve(w.os.get(b)):w.Ur.getTargetData(p,v)})(r,l,_s(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,d.targetId).next((f=>{a=f}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,n?s:Oe.min(),n?a:Be()))).next((d=>(x2(r,cP(e),d),{documents:d,Ts:a})))))}function x2(t,e,n){let r=t.us.get(e)||Oe.min();n.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class Cw{constructor(){this.activeTargetIds=gP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class b2{constructor(){this.so=new Cw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd=null;function km(){return Hd===null?Hd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hd++,"0x"+Hd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class T2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,l){const d=km(),f=this.xo(n,r.toUriEncodedString());we("RestConnection",`Sending RPC '${n}' ${d}:`,f,s);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,a,l),this.No(n,f,p,s).then((v=>(we("RestConnection",`Received RPC '${n}' ${d}: `,v),v)),(v=>{throw gl("RestConnection",`RPC '${n}' ${d} failed with error: `,v,"url: ",f,"request:",s),v}))}Lo(n,r,s,a,l,d){return this.Mo(n,r,s,a,l)}Oo(n,r,s){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Rl})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,l)=>n[l]=a)),s&&s.headers.forEach(((a,l)=>n[l]=a))}xo(n,r){const s=E2[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=km();return new Promise(((l,d)=>{const f=new sk;f.setWithCredentials(!0),f.listenOnce(ik.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case uh.NO_ERROR:const v=f.getResponseJson();we(In,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),l(v);break;case uh.TIMEOUT:we(In,`RPC '${e}' ${a} timed out`),d(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const w=f.getStatus();if(we(In,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const E=b==null?void 0:b.error;if(E&&E.status&&E.message){const O=(function(P){const B=P.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(B)>=0?B:ne.UNKNOWN})(E.status);d(new me(O,E.message))}else d(new me(ne.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new me(ne.UNAVAILABLE,"Connection failed."));break;default:je()}}finally{we(In,`RPC '${e}' ${a} completed.`)}}));const p=JSON.stringify(s);we(In,`RPC '${e}' ${a} sending request:`,s),f.send(n,"POST",p,r,15)}))}Bo(e,n,r){const s=km(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=lk(),d=ak(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const v=a.join("");we(In,`Creating RPC '${e}' stream ${s}: ${v}`,f);const w=l.createWebChannel(v,f);let b=!1,E=!1;const O=new I2({Io:P=>{E?we(In,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(b||(we(In,`Opening RPC '${e}' stream ${s} transport.`),w.open(),b=!0),we(In,`RPC '${e}' stream ${s} sending:`,P),w.send(P))},To:()=>w.close()}),S=(P,B,q)=>{P.listen(B,(K=>{try{q(K)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return S(w,Tu.EventType.OPEN,(()=>{E||(we(In,`RPC '${e}' stream ${s} transport opened.`),O.yo())})),S(w,Tu.EventType.CLOSE,(()=>{E||(E=!0,we(In,`RPC '${e}' stream ${s} transport closed`),O.So())})),S(w,Tu.EventType.ERROR,(P=>{E||(E=!0,gl(In,`RPC '${e}' stream ${s} transport errored:`,P),O.So(new me(ne.UNAVAILABLE,"The operation could not be completed")))})),S(w,Tu.EventType.MESSAGE,(P=>{var B;if(!E){const q=P.data[0];it(!!q);const K=q,Y=K.error||((B=K[0])===null||B===void 0?void 0:B.error);if(Y){we(In,`RPC '${e}' stream ${s} received error:`,Y);const J=Y.status;let te=(function(A){const j=$t[A];if(j!==void 0)return Dk(j)})(J),C=Y.message;te===void 0&&(te=ne.INTERNAL,C="Unknown error status: "+J+" with message "+Y.message),E=!0,O.So(new me(te,C)),w.close()}else we(In,`RPC '${e}' stream ${s} received:`,q),O.bo(q)}})),S(d,ok.STAT_EVENT,(P=>{P.stat===Jm.PROXY?we(In,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Jm.NOPROXY&&we(In,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{O.wo()}),0),O}}function Em(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t){return new MP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n,r,s,a,l,d,f){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qk(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Js(n.toString()),Js("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===n&&this.P_(r,s)}),(r=>{e((()=>{const s=new me(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return we("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class S2 extends Hk{constructor(e,n,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=FP(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Oe.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Oe.min():l.readTime?ws(l.readTime):Oe.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=og(this.serializer),n.addTarget=(function(a,l){let d;const f=l.target;if(d=tg(f)?{documents:$P(a,f)}:{query:BP(a,f)._t},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=Mk(a,l.resumeToken);const p=rg(a,l.expectedCount);p!==null&&(d.expectedCount=p)}else if(l.snapshotVersion.compareTo(Oe.min())>0){d.readTime=Mh(a,l.snapshotVersion.toTimestamp());const p=rg(a,l.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const r=qP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=og(this.serializer),n.removeTarget=e,this.a_(n)}}class C2 extends Hk{constructor(e,n,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return it(!!e.streamToken),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=UP(e.writeResults,e.commitTime),r=ws(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=og(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>zP(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Mo(e,sg(n,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(ne.UNKNOWN,a.toString())}))}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Lo(e,sg(n,r),s,l,d,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(ne.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class R2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Js(n),this.D_=!1):we("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((l=>{r.enqueueAndForget((async()=>{na(this)&&(we("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const p=Me(f);p.L_.add(4),await wc(p),p.q_.set("Unknown"),p.L_.delete(4),await ff(p)})(this))}))})),this.q_=new R2(r,s)}}async function ff(t){if(na(t))for(const e of t.B_)await e(!0)}async function wc(t){for(const e of t.B_)await e(!1)}function Kk(t,e){const n=Me(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ly(n)?ay(n):Dl(n).r_()&&oy(n,e))}function iy(t,e){const n=Me(t),r=Dl(n);n.N_.delete(e),r.r_()&&Gk(n,e),n.N_.size===0&&(r.r_()?r.o_():na(n)&&n.q_.set("Unknown"))}function oy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Dl(t).A_(e)}function Gk(t,e){t.Q_.xe(e),Dl(t).R_(e)}function ay(t){t.Q_=new PP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Dl(t).start(),t.q_.v_()}function ly(t){return na(t)&&!Dl(t).n_()&&t.N_.size>0}function na(t){return Me(t).L_.size===0}function Qk(t){t.Q_=void 0}async function P2(t){t.q_.set("Online")}async function D2(t){t.N_.forEach(((e,n)=>{oy(t,e)}))}async function j2(t,e){Qk(t),ly(t)?(t.q_.M_(e),ay(t)):t.q_.set("Unknown")}async function O2(t,e,n){if(t.q_.set("Online"),e instanceof Ok&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const d of a.targetIds)s.N_.has(d)&&(await s.remoteSyncer.rejectListen(d,l),s.N_.delete(d),s.Q_.removeTarget(d))})(t,e)}catch(r){we("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lh(t,r)}else if(e instanceof hh?t.Q_.Ke(e):e instanceof jk?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Oe.min()))try{const r=await Wk(t.localStore);n.compareTo(r)>=0&&await(function(a,l){const d=a.Q_.rt(l);return d.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.N_.get(p);v&&a.N_.set(p,v.withResumeToken(f.resumeToken,l))}})),d.targetMismatches.forEach(((f,p)=>{const v=a.N_.get(f);if(!v)return;a.N_.set(f,v.withResumeToken(yn.EMPTY_BYTE_STRING,v.snapshotVersion)),Gk(a,f);const w=new $i(v.target,f,p,v.sequenceNumber);oy(a,w)})),a.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(r){we("RemoteStore","Failed to raise snapshot:",r),await Lh(t,r)}}async function Lh(t,e,n){if(!yc(e))throw e;t.L_.add(1),await wc(t),t.q_.set("Offline"),n||(n=()=>Wk(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{we("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ff(t)}))}function Zk(t,e){return e().catch((n=>Lh(t,n,e)))}async function pf(t){const e=Me(t),n=Ji(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;M2(e);)try{const s=await _2(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,L2(e,s)}catch(s){await Lh(e,s)}Jk(e)&&Yk(e)}function M2(t){return na(t)&&t.O_.length<10}function L2(t,e){t.O_.push(e);const n=Ji(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Jk(t){return na(t)&&!Ji(t).n_()&&t.O_.length>0}function Yk(t){Ji(t).start()}async function V2(t){Ji(t).p_()}async function F2(t){const e=Ji(t);for(const n of t.O_)e.m_(n.mutations)}async function z2(t,e,n){const r=t.O_.shift(),s=Xg.from(r,e,n);await Zk(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await pf(t)}async function U2(t,e){e&&Ji(t).V_&&await(async function(r,s){if((function(l){return AP(l)&&l!==ne.ABORTED})(s.code)){const a=r.O_.shift();Ji(r).s_(),await Zk(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await pf(r)}})(t,e),Jk(t)&&Yk(t)}async function Rw(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const r=na(n);n.L_.add(3),await wc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ff(n)}async function $2(t,e){const n=Me(t);e?(n.L_.delete(2),await ff(n)):e||(n.L_.add(2),await wc(n),n.q_.set("Unknown"))}function Dl(t){return t.K_||(t.K_=(function(n,r,s){const a=Me(n);return a.w_(),new S2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Eo:P2.bind(null,t),Ro:D2.bind(null,t),mo:j2.bind(null,t),d_:O2.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),ly(t)?ay(t):t.q_.set("Unknown")):(await t.K_.stop(),Qk(t))}))),t.K_}function Ji(t){return t.U_||(t.U_=(function(n,r,s){const a=Me(n);return a.w_(),new C2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:V2.bind(null,t),mo:U2.bind(null,t),f_:F2.bind(null,t),g_:z2.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await pf(t)):(await t.U_.stop(),t.O_.length>0&&(we("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const l=Date.now()+r,d=new uy(e,n,l,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cy(t,e){if(Js("AsyncQueue",`${e}: ${t}`),yc(t))return new me(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ie.comparator(n.key,r.key):(n,r)=>Ie.comparator(n.key,r.key),this.keyedMap=Su(),this.sortedSet=new It(this.comparator)}static emptySet(e){return new sl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new sl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.W_=new It(Ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):je():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class xl{constructor(e,n,r,s,a,l,d,f,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,s,a){const l=[];return n.forEach((d=>{l.push({type:0,doc:d})})),new xl(e,n,sl.emptySet(n),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class W2{constructor(){this.queries=Pw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Me(n),a=s.queries;s.queries=Pw(),a.forEach(((l,d)=>{for(const f of d.j_)f.onError(r)}))})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function Pw(){return new Pl((t=>xk(t)),af)}async function Xk(t,e){const n=Me(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new B2,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const d=cy(l,`Initialization of query '${qa(e.query)}' failed`);return void e.onError(d)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&dy(n)}async function eE(t,e){const n=Me(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const l=a.j_.indexOf(e);l>=0&&(a.j_.splice(l,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function q2(t,e){const n=Me(t);let r=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const d of l.j_)d.X_(s)&&(r=!0);l.z_=s}}r&&dy(n)}function H2(t,e,n){const r=Me(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function dy(t){t.Y_.forEach((e=>{e.next()}))}var lg,Dw;(Dw=lg||(lg={})).ea="default",Dw.Cache="cache";class tE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new xl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=xl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==lg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.key=e}}class rE{constructor(e){this.key=e}}class K2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=bk(e),this.Ra=new sl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Nw,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,w)=>{const b=s.get(v),E=lf(this.query,w)?w:null,O=!!b&&this.mutatedKeys.has(b.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let P=!1;b&&E?b.data.isEqual(E.data)?O!==S&&(r.track({type:3,doc:E}),P=!0):this.ga(b,E)||(r.track({type:2,doc:E}),P=!0,(f&&this.Aa(E,f)>0||p&&this.Aa(E,p)<0)&&(d=!0)):!b&&E?(r.track({type:0,doc:E}),P=!0):b&&!E&&(r.track({type:1,doc:b}),P=!0,(f||p)&&(d=!0)),P&&(E?(l=l.add(E),a=S?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{Ra:l,fa:r,ns:d,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((v,w)=>(function(E,O){const S=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je()}};return S(E)-S(O)})(v.type,w.type)||this.Aa(v.doc,w.doc))),this.pa(r),s=s!=null&&s;const d=n&&!s?this.ya():[],f=this.da.size===0&&this.current&&!s?1:0,p=f!==this.Ea;return this.Ea=f,l.length!==0||p?{snapshot:new xl(this.query,e.Ra,a,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Nw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Be(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new rE(r))})),this.da.forEach((r=>{e.has(r)||n.push(new nE(r))})),n}ba(e){this.Ta=e.Ts,this.da=Be();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return xl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class G2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Q2{constructor(e){this.key=e,this.va=!1}}class Z2{constructor(e,n,r,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Pl((d=>xk(d)),af),this.Ma=new Map,this.xa=new Set,this.Oa=new It(Ie.comparator),this.Na=new Map,this.La=new ny,this.Ba={},this.ka=new Map,this.qa=wl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function J2(t,e,n=!0){const r=uE(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await sE(r,e,n,!0),s}async function Y2(t,e){const n=uE(t);await sE(n,e,!0,!1)}async function sE(t,e,n,r){const s=await w2(t.localStore,_s(e)),a=s.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let d;return r&&(d=await X2(t,e,a,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&Kk(t.remoteStore,s),d}async function X2(t,e,n,r,s){t.Ka=(w,b,E)=>(async function(S,P,B,q){let K=P.view.ma(B);K.ns&&(K=await Sw(S.localStore,P.query,!1).then((({documents:C})=>P.view.ma(C,K))));const Y=q&&q.targetChanges.get(P.targetId),J=q&&q.targetMismatches.get(P.targetId)!=null,te=P.view.applyChanges(K,S.isPrimaryClient,Y,J);return Ow(S,P.targetId,te.wa),te.snapshot})(t,w,b,E);const a=await Sw(t.localStore,e,!0),l=new K2(e,a.Ts),d=l.ma(a.documents),f=_c.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),p=l.applyChanges(d,t.isPrimaryClient,f);Ow(t,n,p.wa);const v=new G2(e,n,l);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function eD(t,e,n){const r=Me(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter((l=>!af(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ag(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&iy(r.remoteStore,s.targetId),ug(r,s.targetId)})).catch(gc)):(ug(r,s.targetId),await ag(r.localStore,s.targetId,!0))}async function tD(t,e){const n=Me(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),iy(n.remoteStore,r.targetId))}async function nD(t,e,n){const r=uD(t);try{const s=await(function(l,d){const f=Me(l),p=Et.now(),v=d.reduce(((E,O)=>E.add(O.key)),Be());let w,b;return f.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let O=Ys(),S=Be();return f.cs.getEntries(E,v).next((P=>{O=P,O.forEach(((B,q)=>{q.isValidDocument()||(S=S.add(B))}))})).next((()=>f.localDocuments.getOverlayedDocuments(E,O))).next((P=>{w=P;const B=[];for(const q of d){const K=EP(q,w.get(q.key).overlayedDocument);K!=null&&B.push(new ro(q.key,K,fk(K.value.mapValue),Tr.exists(!0)))}return f.mutationQueue.addMutationBatch(E,p,B,d)})).next((P=>{b=P;const B=P.applyToLocalDocumentSet(w,S);return f.documentOverlayCache.saveOverlays(E,P.batchId,B)}))})).then((()=>({batchId:b.batchId,changes:Ek(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,d,f){let p=l.Ba[l.currentUser.toKey()];p||(p=new It(et)),p=p.insert(d,f),l.Ba[l.currentUser.toKey()]=p})(r,s.batchId,n),await xc(r,s.changes),await pf(r.remoteStore)}catch(s){const a=cy(s,"Failed to persist write");n.reject(a)}}async function iE(t,e){const n=Me(t);try{const r=await y2(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=n.Na.get(a);l&&(it(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?it(l.va):s.removedDocuments.size>0&&(it(l.va),l.va=!1))})),await xc(n,r,e)}catch(r){await gc(r)}}function jw(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach(((a,l)=>{const d=l.view.Z_(e);d.snapshot&&s.push(d.snapshot)})),(function(l,d){const f=Me(l);f.onlineState=d;let p=!1;f.queries.forEach(((v,w)=>{for(const b of w.j_)b.Z_(d)&&(p=!0)})),p&&dy(f)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rD(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let l=new It(Ie.comparator);l=l.insert(a,Sn.newNoDocument(a,Oe.min()));const d=Be().add(a),f=new df(Oe.min(),new Map,new It(et),l,d);await iE(r,f),r.Oa=r.Oa.remove(a),r.Na.delete(e),hy(r)}else await ag(r.localStore,e,!1).then((()=>ug(r,e,n))).catch(gc)}async function sD(t,e){const n=Me(t),r=e.batch.batchId;try{const s=await g2(n.localStore,e);aE(n,r,null),oE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xc(n,s)}catch(s){await gc(s)}}async function iD(t,e,n){const r=Me(t);try{const s=await(function(l,d){const f=Me(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return f.mutationQueue.lookupMutationBatch(p,d).next((w=>(it(w!==null),v=w.keys(),f.mutationQueue.removeMutationBatch(p,w)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>f.localDocuments.getDocuments(p,v)))}))})(r.localStore,e);aE(r,e,n),oE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xc(r,s)}catch(s){await gc(s)}}function oE(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function aE(t,e,n){const r=Me(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function ug(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||lE(t,r)}))}function lE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(iy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),hy(t))}function Ow(t,e,n){for(const r of n)r instanceof nE?(t.La.addReference(r.key,e),oD(t,r)):r instanceof rE?(we("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||lE(t,r.key)):je()}function oD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(we("SyncEngine","New document in limbo: "+n),t.xa.add(r),hy(t))}function hy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ie(pt.fromString(e)),r=t.qa.next();t.Na.set(r,new Q2(n)),t.Oa=t.Oa.insert(n,r),Kk(t.remoteStore,new $i(_s(Zg(n.path)),r,"TargetPurposeLimboResolution",Wg.oe))}}async function xc(t,e,n){const r=Me(t),s=[],a=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((d,f)=>{l.push(r.Ka(f,e,n).then((p=>{var v;if((p||n)&&r.isPrimaryClient){const w=p?!p.fromCache:(v=n==null?void 0:n.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(p){s.push(p);const w=sy.Wi(f.targetId,p);a.push(w)}})))})),await Promise.all(l),r.Ca.d_(s),await(async function(f,p){const v=Me(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ie.forEach(p,(b=>ie.forEach(b.$i,(E=>v.persistence.referenceDelegate.addReference(w,b.targetId,E))).next((()=>ie.forEach(b.Ui,(E=>v.persistence.referenceDelegate.removeReference(w,b.targetId,E)))))))))}catch(w){if(!yc(w))throw w;we("LocalStore","Failed to update sequence numbers: "+w)}for(const w of p){const b=w.targetId;if(!w.fromCache){const E=v.os.get(b),O=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(O);v.os=v.os.insert(b,S)}}})(r.localStore,a))}async function aD(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){we("SyncEngine","User change. New user:",e.toKey());const r=await Bk(n.localStore,e);n.currentUser=e,(function(a,l){a.ka.forEach((d=>{d.forEach((f=>{f.reject(new me(ne.CANCELLED,l))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xc(n,r.hs)}}function lD(t,e){const n=Me(t),r=n.Na.get(e);if(r&&r.va)return Be().add(r.key);{let s=Be();const a=n.Ma.get(e);if(!a)return s;for(const l of a){const d=n.Fa.get(l);s=s.unionWith(d.view.Va)}return s}}function uE(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rD.bind(null,e),e.Ca.d_=q2.bind(null,e.eventManager),e.Ca.$a=H2.bind(null,e.eventManager),e}function uD(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iD.bind(null,e),e}class Vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return m2(this.persistence,new f2,e.initialUser,this.serializer)}Ga(e){return new c2(ry.Zr,this.serializer)}Wa(e){return new b2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vh.provider={build:()=>new Vh};class cg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aD.bind(null,this.syncEngine),await $2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new W2})()}createDatastore(e){const n=hf(e.databaseInfo.databaseId),r=(function(a){return new T2(a)})(e.databaseInfo);return(function(a,l,d,f){return new A2(a,l,d,f)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,a,l,d){return new N2(r,s,a,l,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>jw(this.syncEngine,n,0)),(function(){return Aw.D()?new Aw:new k2})())}createSyncEngine(e,n){return(function(s,a,l,d,f,p,v){const w=new Z2(s,a,l,d,f,p);return v&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=Me(s);we("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await wc(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}cg.provider={build:()=>new cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Js("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tn.UNAUTHENTICATED,this.clientId=ck.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{we("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(we("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=cy(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Im(t,e){t.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Bk(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Mw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dD(t);we("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Rw(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Rw(e.remoteStore,s))),t._onlineComponents=e}async function dD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we("FirestoreClient","Using user provided OfflineComponentProvider");try{await Im(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ne.FAILED_PRECONDITION||s.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;gl("Error using user provided cache. Falling back to memory cache: "+n),await Im(t,new Vh)}}else we("FirestoreClient","Using default OfflineComponentProvider"),await Im(t,new Vh);return t._offlineComponents}async function dE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we("FirestoreClient","Using user provided OnlineComponentProvider"),await Mw(t,t._uninitializedComponentsProvider._online)):(we("FirestoreClient","Using default OnlineComponentProvider"),await Mw(t,new cg))),t._onlineComponents}function hD(t){return dE(t).then((e=>e.syncEngine))}async function dg(t){const e=await dE(t),n=e.eventManager;return n.onListen=J2.bind(null,e.syncEngine),n.onUnlisten=eD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Y2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tD.bind(null,e.syncEngine),n}function fD(t,e,n={}){const r=new Hi;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,f,p){const v=new cE({next:b=>{v.Za(),l.enqueueAndForget((()=>eE(a,w))),b.fromCache&&f.source==="server"?p.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),w=new tE(d,v,{includeMetadataChanges:!0,_a:!0});return Xk(a,w)})(await dg(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t,e,n){if(!n)throw new me(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pD(t,e,n,r){if(e===!0&&r===!0)throw new me(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vw(t){if(!Ie.isDocumentKey(t))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fw(t){if(Ie.isDocumentKey(t))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":je()}function Sr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mf(t);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zw(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new PN;switch(r.type){case"firstParty":return new MN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Lw.get(n);r&&(we("ComponentProvider","Removing Datastore"),Lw.delete(n),r.terminate())})(this),Promise.resolve()}}function mD(t,e,n,r={}){var s;const a=(t=Sr(t,gf))._getSettings(),l=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&gl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=Tn.MOCK_USER;else{d=G1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Tn(p)}t._authCredentials=new DN(new uk(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ei(this.firestore,e,this._query)}}class Vn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class Ki extends ei{constructor(e,n,r){super(e,n,Zg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new Ie(e))}withConverter(e){return new Ki(this.firestore,e,this._path)}}function Yn(t,e,...n){if(t=an(t),fE("collection","path",e),t instanceof gf){const r=pt.fromString(e,...n);return Fw(r),new Ki(t,null,r)}{if(!(t instanceof Vn||t instanceof Ki))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return Fw(r),new Ki(t.firestore,null,r)}}function Cr(t,e,...n){if(t=an(t),arguments.length===1&&(e=ck.newId()),fE("doc","path",e),t instanceof gf){const r=pt.fromString(e,...n);return Vw(r),new Vn(t,null,new Ie(r))}{if(!(t instanceof Vn||t instanceof Ki))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return Vw(r),new Vn(t.firestore,t instanceof Ki?t.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new qk(this,"async_queue_retry"),this.Vu=()=>{const r=Em();r&&we("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Em();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Em();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new Hi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yc(e))throw e;we("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),d})(r);throw Js("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=uy.createAndSchedule(this,e,n,r,(a=>this.yu(a)));return this.Tu.push(s),s}fu(){this.Eu&&je()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function $w(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Yi extends gf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Uw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uw(e),this._firestoreClient=void 0,await e}}}function gD(t,e){const n=typeof t=="object"?t:wb(),r=typeof t=="string"?t:"(default)",s=Dg(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=H1("firestore");a&&mD(s,...a)}return s}function fy(t){if(t._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yD(t),t._firestoreClient}function yD(t){var e,n,r;const s=t._freezeSettings(),a=(function(d,f,p,v){return new QN(d,f,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,hE(v.experimentalLongPollingOptions),v.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new cD(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bl(yn.fromBase64String(e))}catch(n){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bl(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=/^__.*__$/;class _D{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ro(e,this.data,this.fieldMask,n,this.fieldTransforms):new vc(e,this.data,n,this.fieldTransforms)}}class pE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ro(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je()}}class gy{constructor(e,n,r,s,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new gy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Fh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mE(this.Cu)&&vD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hf(e)}Qu(e,n,r,s=!1){return new gy({Cu:e,methodName:n,qu:r,path:mn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _f(t){const e=t._freezeSettings(),n=hf(t._databaseId);return new wD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gE(t,e,n,r,s,a={}){const l=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);vy("Data must be an object, but it was:",l,r);const d=yE(r,l);let f,p;if(a.merge)f=new cr(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const b=hg(e,w,n);if(!l.contains(b))throw new me(ne.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);_E(v,b)||v.push(b)}f=new cr(v),p=l.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,p=l.fieldTransforms;return new _D(new Zn(d),f,p)}class wf extends vf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wf}}class yy extends vf{_toFieldTransform(e){return new wP(e.path,new ec)}isEqual(e){return e instanceof yy}}function xD(t,e,n,r){const s=t.Qu(1,e,n);vy("Data must be an object, but it was:",s,r);const a=[],l=Zn.empty();ta(r,((f,p)=>{const v=_y(e,f,n);p=an(p);const w=s.Nu(v);if(p instanceof wf)a.push(v);else{const b=bc(p,w);b!=null&&(a.push(v),l.set(v,b))}}));const d=new cr(a);return new pE(l,d,s.fieldTransforms)}function bD(t,e,n,r,s,a){const l=t.Qu(1,e,n),d=[hg(e,r,n)],f=[s];if(a.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<a.length;b+=2)d.push(hg(e,a[b])),f.push(a[b+1]);const p=[],v=Zn.empty();for(let b=d.length-1;b>=0;--b)if(!_E(p,d[b])){const E=d[b];let O=f[b];O=an(O);const S=l.Nu(E);if(O instanceof wf)p.push(E);else{const P=bc(O,S);P!=null&&(p.push(E),v.set(E,P))}}const w=new cr(p);return new pE(v,w,l.fieldTransforms)}function kD(t,e,n,r=!1){return bc(n,t.Qu(r?4:3,e))}function bc(t,e){if(vE(t=an(t)))return vy("Unsupported field value:",e,t),yE(t,e);if(t instanceof vf)return(function(r,s){if(!mE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const d of r){let f=bc(d,s.Lu(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,s){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Et.fromDate(r);return{timestampValue:Mh(s.serializer,a)}}if(r instanceof Et){const a=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mh(s.serializer,a)}}if(r instanceof py)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bl)return{bytesValue:Mk(s.serializer,r._byteString)};if(r instanceof Vn){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ty(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof my)return(function(l,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw d.Bu("VectorValues must only contain numeric values.");return Jg(d.serializer,f)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${mf(r)}`)})(t,e)}function yE(t,e){const n={};return dk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ta(t,((r,s)=>{const a=bc(s,e.Mu(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function vE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Et||t instanceof py||t instanceof bl||t instanceof Vn||t instanceof vf||t instanceof my)}function vy(t,e,n){if(!vE(n)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(n)){const r=mf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function hg(t,e,n){if((e=an(e))instanceof yf)return e._internalPath;if(typeof e=="string")return _y(t,e);throw Fh("Field path arguments must be of type string or ",t,!1,void 0,n)}const ED=new RegExp("[~\\*/\\[\\]]");function _y(t,e,n){if(e.search(ED)>=0)throw Fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yf(...e.split("."))._internalPath}catch{throw Fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fh(t,e,n,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new me(ne.INVALID_ARGUMENT,d+t+f)}function _E(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ID(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ID extends wE{data(){return super.data()}}function wy(t,e){return typeof e=="string"?_y(t,e):e instanceof yf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xy{}class by extends xy{}function so(t,e,...n){let r=[];e instanceof xy&&r.push(e),r=r.concat(n),(function(a){const l=a.filter((f=>f instanceof Ey)).length,d=a.filter((f=>f instanceof ky)).length;if(l>1||l>0&&d>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class ky extends by{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ky(e,n,r)}_apply(e){const n=this._parse(e);return bE(e._query,n),new ei(e.firestore,e.converter,ng(e._query,n))}_parse(e){const n=_f(e.firestore);return(function(a,l,d,f,p,v,w){let b;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Ww(w,v);const E=[];for(const O of w)E.push(Bw(f,a,O));b={arrayValue:{values:E}}}else b=Bw(f,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Ww(w,v),b=kD(d,l,w,v==="in"||v==="not-in");return Bt.create(p,v,b)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ey extends xy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ey(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Yr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let l=s;const d=a.getFlattenedFilters();for(const f of d)bE(l,f),l=ng(l,f)})(e._query,n),new ei(e.firestore,e.converter,ng(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Iy extends by{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Iy(e,n)}_apply(e){const n=(function(s,a,l){if(s.startAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xu(a,l)})(e._query,this._field,this._direction);return new ei(e.firestore,e.converter,(function(s,a){const l=s.explicitOrderBy.concat([a]);return new Nl(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function xf(t,e="asc"){const n=e,r=wy("orderBy",t);return Iy._create(r,n)}class Ty extends by{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ty(e,n,r)}_apply(e){return new ei(e.firestore,e.converter,jh(e._query,this._limit,this._limitType))}}function TD(t){return Ty._create("limit",t,"F")}function Bw(t,e,n){if(typeof(n=an(n))=="string"){if(n==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wk(e)&&n.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pt.fromString(n));if(!Ie.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cw(t,new Ie(r))}if(n instanceof Vn)return cw(t,n._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mf(n)}.`)}function Ww(t,e){if(!Array.isArray(t)||t.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bE(t,e){const n=(function(s,a){for(const l of s)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SD{convertValue(e,n="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw je()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ta(e,((s,a)=>{r[s]=this.convertValue(a,n)})),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((l=>Ot(l.doubleValue)));return new my(a)}convertGeoPoint(e){return new py(Ot(e.latitude),Ot(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zu(e));default:return null}}convertTimestamp(e){const n=Zi(e);return new Et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pt.fromString(e);it($k(r));const s=new Ju(r.get(1),r.get(3)),a=new Ie(r.popFirst(5));return s.isEqual(n)||Js(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class EE extends wE{constructor(e,n,r,s,a,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class fh extends EE{data(e={}){return super.data(e)}}class IE{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Au(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new fh(this._firestore,this._userDataWriter,r.key,r,new Au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((d=>{const f=new fh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Au(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new fh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Au(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,v=-1;return d.type!==0&&(p=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),v=l.indexOf(d.doc.key)),{type:CD(d.type),doc:f,oldIndex:p,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function CD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je()}}class Sy extends SD{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,n)}}function AD(t){t=Sr(t,ei);const e=Sr(t.firestore,Yi),n=fy(e),r=new Sy(e);return xE(t._query),fD(n,t._query).then((s=>new IE(e,r,t,s)))}function RD(t,e,n){t=Sr(t,Vn);const r=Sr(t.firestore,Yi),s=kE(t.converter,e,n);return kf(r,[gE(_f(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Tr.none())])}function jl(t,e,n,...r){t=Sr(t,Vn);const s=Sr(t.firestore,Yi),a=_f(s);let l;return l=typeof(e=an(e))=="string"||e instanceof yf?bD(a,"updateDoc",t._key,e,n,r):xD(a,"updateDoc",t._key,e),kf(s,[l.toMutation(t._key,Tr.exists(!0))])}function bf(t){return kf(Sr(t.firestore,Yi),[new Yg(t._key,Tr.none())])}function Ol(t,e){const n=Sr(t.firestore,Yi),r=Cr(t),s=kE(t.converter,e);return kf(n,[gE(_f(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Tr.exists(!1))]).then((()=>r))}function ra(t,...e){var n,r,s;t=an(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||$w(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if($w(e[l])){const w=e[l];e[l]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[l+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let f,p,v;if(t instanceof Vn)p=Sr(t.firestore,Yi),v=Zg(t._key.path),f={next:w=>{e[l]&&e[l](ND(p,t,w))},error:e[l+1],complete:e[l+2]};else{const w=Sr(t,ei);p=Sr(w.firestore,Yi),v=w._query;const b=new Sy(p);f={next:E=>{e[l]&&e[l](new IE(p,b,w,E))},error:e[l+1],complete:e[l+2]},xE(t._query)}return(function(b,E,O,S){const P=new cE(S),B=new tE(E,P,O);return b.asyncQueue.enqueueAndForget((async()=>Xk(await dg(b),B))),()=>{P.Za(),b.asyncQueue.enqueueAndForget((async()=>eE(await dg(b),B)))}})(fy(p),v,d,f)}function kf(t,e){return(function(r,s){const a=new Hi;return r.asyncQueue.enqueueAndForget((async()=>nD(await hD(r),s,a))),a.promise})(fy(t),e)}function ND(t,e,n){const r=n.docs.get(e._key),s=new Sy(t);return new EE(t,s,e._key,r,new Au(n.hasPendingWrites,n.fromCache),e.converter)}function Es(){return new yy("serverTimestamp")}(function(e,n=!0){(function(s){Rl=s})(Cl),ml(new Go("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),d=new Yi(new jN(r.getProvider("auth-internal")),new VN(r.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ju(p.options.projectId,v)})(l,s),l);return a=Object.assign({useFetchStreams:n},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),qi(iw,"4.7.3",e),qi(iw,"4.7.3","esm2017")})();const qw={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function PD(){if(typeof window<"u"&&window.GLOBAL_FIREBASE_CONFIG&&window.GLOBAL_FIREBASE_CONFIG.apiKey)return window.GLOBAL_FIREBASE_CONFIG;try{if(import.meta&&qw){const t=qw,e={apiKey:t.VITE_FIREBASE_API_KEY,authDomain:t.VITE_FIREBASE_AUTH_DOMAIN,projectId:t.VITE_FIREBASE_PROJECT_ID,storageBucket:t.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:t.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:t.VITE_FIREBASE_APP_ID,measurementId:t.VITE_FIREBASE_MEASUREMENT_ID};if(e.apiKey)return e}}catch{}if(typeof __firebase_config<"u")try{return typeof __firebase_config=="object"?__firebase_config:JSON.parse(__firebase_config)}catch(t){return console.error("[Firebase] Config parse failed (legacy):",t),null}return console.error("[Firebase] All config sources failed. Check index.html injection."),null}const ph=PD();if(!(ph!=null&&ph.apiKey)){const t="[Firebase] Configuration is missing or invalid. Application cannot start.";throw console.error(t),new Error(t)}let fg;j_().length>0?(fg=j_()[0],console.log("[Firebase] Using existing app instance.")):(fg=_b(ph),console.log("[Firebase] Initialized new app instance."));const TE=fg,wt=RN(TE),mt=gD(TE),DD=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,a]=M.useState(!1),[l,d]=M.useState(null),f=async v=>{v.preventDefault(),d(null),a(!0);try{await yR(wt,t,n)}catch(w){let b="Login failed.";switch(w.code){case"auth/invalid-email":b="Invalid email format.";break;case"auth/user-disabled":b="User disabled.";break;case"auth/user-not-found":b="User not found.";break;case"auth/wrong-password":b="Wrong password.";break;case"auth/too-many-requests":b="Too many requests. Try again later.";break;case"auth/network-request-failed":b="Network error.";break}d(b)}finally{a(!1)}},p=async()=>{d(null),a(!0);try{await hR(wt)}catch(v){d("Guest login failed: "+v.message)}finally{a(!1)}};return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-premium-gradient p-4 antialiased",children:g.jsxs("div",{className:"max-w-md w-full p-8 bg-white/70 dark:bg-gray-800/60 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 rounded-[2rem] shadow-2xl transition-all duration-300",children:[g.jsxs("div",{className:"text-center mb-10",children:[g.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-3xl shadow-lg mb-6 animate-float",children:g.jsx("img",{src:"/images/web-app-manifest-512x512.png",alt:"Logo",className:"h-12 w-12"})}),g.jsxs("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:["Task",g.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:""})]}),g.jsxs("form",{onSubmit:f,className:"space-y-6",children:[l&&g.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium animate-in slide-in-from-top-2 duration-300",children:l}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Email"}),g.jsx("input",{type:"email",required:!0,value:t,onChange:v=>e(v.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"mail@example.com"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Password"}),g.jsx("input",{type:"password",required:!0,value:n,onChange:v=>r(v.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:""})]}),g.jsx("button",{type:"submit",disabled:s,className:"btn-premium w-full py-4 text-lg",children:s?"...":""})]}),g.jsxs("div",{className:"mt-8",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-gray-200/50 dark:border-gray-700/50"})}),g.jsx("div",{className:"relative flex justify-center text-xs",children:g.jsx("span",{className:"px-3 bg-transparent text-gray-400 uppercase tracking-widest font-bold",children:"OR"})})]}),g.jsxs("button",{onClick:p,disabled:s,className:"mt-8 w-full py-3.5 bg-gray-100/50 hover:bg-gray-200/50 dark:bg-gray-700/30 dark:hover:bg-gray-600/50 text-gray-700 dark:text-gray-200 font-bold rounded-2xl transition-all active:scale-95 flex items-center justify-center gap-3 border border-transparent hover:border-gray-300 dark:hover:border-gray-600",children:[g.jsx("span",{className:"text-xl",children:""})," "]})]})]})})},Hw=t=>{let e;const n=new Set,r=(p,v)=>{const w=typeof p=="function"?p(e):p;if(!Object.is(w,e)){const b=e;e=v??(typeof w!="object"||w===null)?w:Object.assign({},e,w),n.forEach(E=>E(e,b))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p))},f=e=t(r,s,d);return d},jD=(t=>t?Hw(t):Hw),OD=t=>t;function MD(t,e=OD){const n=nt.useSyncExternalStore(t.subscribe,nt.useCallback(()=>e(t.getState()),[t,e]),nt.useCallback(()=>e(t.getInitialState()),[t,e]));return nt.useDebugValue(n),n}const Kw=t=>{const e=jD(t),n=r=>MD(e,r);return Object.assign(n,e),n},Ml=(t=>t?Kw(t):Kw),mh=Ml(t=>({toasts:[],addToast:(e,n="info")=>{const r=Math.random().toString(36).substring(7);t(s=>({toasts:[...s.toasts,{id:r,message:e,type:n}]})),setTimeout(()=>{t(s=>({toasts:s.toasts.filter(a=>a.id!==r)}))},4e3)},removeToast:e=>t(n=>({toasts:n.toasts.filter(r=>r.id!==e)}))})),Xo={success:t=>mh.getState().addToast(t,"success"),error:t=>mh.getState().addToast(t,"error"),info:t=>mh.getState().addToast(t,"info")};function SE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=SE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function LD(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=SE(t))&&(r&&(r+=" "),r+=e);return r}const VD=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},FD=(t,e)=>({classGroupId:t,validator:e}),CE=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),zh="-",Gw=[],zD="arbitrary..",UD=t=>{const e=BD(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return $D(l);const d=l.split(zh),f=d[0]===""&&d.length>1?1:0;return AE(d,f,e)},getConflictingClassGroupIds:(l,d)=>{if(d){const f=r[l],p=n[l];return f?p?VD(p,f):f:p||Gw}return n[l]||Gw}}},AE=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],a=n.nextPart.get(s);if(a){const p=AE(t,e+1,a);if(p)return p}const l=n.validators;if(l===null)return;const d=e===0?t.join(zh):t.slice(e).join(zh),f=l.length;for(let p=0;p<f;p++){const v=l[p];if(v.validator(d))return v.classGroupId}},$D=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?zD+r:void 0})(),BD=t=>{const{theme:e,classGroups:n}=t;return WD(n,e)},WD=(t,e)=>{const n=CE();for(const r in t){const s=t[r];Cy(s,n,r,e)}return n},Cy=(t,e,n,r)=>{const s=t.length;for(let a=0;a<s;a++){const l=t[a];qD(l,e,n,r)}},qD=(t,e,n,r)=>{if(typeof t=="string"){HD(t,e,n);return}if(typeof t=="function"){KD(t,e,n,r);return}GD(t,e,n,r)},HD=(t,e,n)=>{const r=t===""?e:RE(e,t);r.classGroupId=n},KD=(t,e,n,r)=>{if(QD(t)){Cy(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(FD(n,t))},GD=(t,e,n,r)=>{const s=Object.entries(t),a=s.length;for(let l=0;l<a;l++){const[d,f]=s[l];Cy(f,RE(e,d),n,r)}},RE=(t,e)=>{let n=t;const r=e.split(zh),s=r.length;for(let a=0;a<s;a++){const l=r[a];let d=n.nextPart.get(l);d||(d=CE(),n.nextPart.set(l,d)),n=d}return n},QD=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,ZD=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(a,l)=>{n[a]=l,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(a){let l=n[a];if(l!==void 0)return l;if((l=r[a])!==void 0)return s(a,l),l},set(a,l){a in n?n[a]=l:s(a,l)}}},pg="!",Qw=":",JD=[],Zw=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),YD=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const a=[];let l=0,d=0,f=0,p;const v=s.length;for(let S=0;S<v;S++){const P=s[S];if(l===0&&d===0){if(P===Qw){a.push(s.slice(f,S)),f=S+1;continue}if(P==="/"){p=S;continue}}P==="["?l++:P==="]"?l--:P==="("?d++:P===")"&&d--}const w=a.length===0?s:s.slice(f);let b=w,E=!1;w.endsWith(pg)?(b=w.slice(0,-1),E=!0):w.startsWith(pg)&&(b=w.slice(1),E=!0);const O=p&&p>f?p-f:void 0;return Zw(a,E,b,O)};if(e){const s=e+Qw,a=r;r=l=>l.startsWith(s)?a(l.slice(s.length)):Zw(JD,!1,l,void 0,!0)}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},XD=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let a=0;a<n.length;a++){const l=n[a],d=l[0]==="[",f=e.has(l);d||f?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},ej=t=>({cache:ZD(t.cacheSize),parseClassName:YD(t),sortModifiers:XD(t),...UD(t)}),tj=/\s+/,nj=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=e,l=[],d=t.trim().split(tj);let f="";for(let p=d.length-1;p>=0;p-=1){const v=d[p],{isExternal:w,modifiers:b,hasImportantModifier:E,baseClassName:O,maybePostfixModifierPosition:S}=n(v);if(w){f=v+(f.length>0?" "+f:f);continue}let P=!!S,B=r(P?O.substring(0,S):O);if(!B){if(!P){f=v+(f.length>0?" "+f:f);continue}if(B=r(O),!B){f=v+(f.length>0?" "+f:f);continue}P=!1}const q=b.length===0?"":b.length===1?b[0]:a(b).join(":"),K=E?q+pg:q,Y=K+B;if(l.indexOf(Y)>-1)continue;l.push(Y);const J=s(B,P);for(let te=0;te<J.length;++te){const C=J[te];l.push(K+C)}f=v+(f.length>0?" "+f:f)}return f},rj=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=NE(n))&&(s&&(s+=" "),s+=r);return s},NE=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=NE(t[r]))&&(n&&(n+=" "),n+=e);return n},sj=(t,...e)=>{let n,r,s,a;const l=f=>{const p=e.reduce((v,w)=>w(v),t());return n=ej(p),r=n.cache.get,s=n.cache.set,a=d,d(f)},d=f=>{const p=r(f);if(p)return p;const v=nj(f,n);return s(f,v),v};return a=l,(...f)=>a(rj(...f))},ij=[],Qt=t=>{const e=n=>n[t]||ij;return e.isThemeGetter=!0,e},PE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,DE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,oj=/^\d+\/\d+$/,aj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,cj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ba=t=>oj.test(t),Ue=t=>!!t&&!Number.isNaN(Number(t)),Ai=t=>!!t&&Number.isInteger(Number(t)),Tm=t=>t.endsWith("%")&&Ue(t.slice(0,-1)),Us=t=>aj.test(t),hj=()=>!0,fj=t=>lj.test(t)&&!uj.test(t),jE=()=>!1,pj=t=>cj.test(t),mj=t=>dj.test(t),gj=t=>!ye(t)&&!ve(t),yj=t=>Ll(t,LE,jE),ye=t=>PE.test(t),Lo=t=>Ll(t,VE,fj),Sm=t=>Ll(t,bj,Ue),Jw=t=>Ll(t,OE,jE),vj=t=>Ll(t,ME,mj),Kd=t=>Ll(t,FE,pj),ve=t=>DE.test(t),ku=t=>Vl(t,VE),_j=t=>Vl(t,kj),Yw=t=>Vl(t,OE),wj=t=>Vl(t,LE),xj=t=>Vl(t,ME),Gd=t=>Vl(t,FE,!0),Ll=(t,e,n)=>{const r=PE.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Vl=(t,e,n=!1)=>{const r=DE.exec(t);return r?r[1]?e(r[1]):n:!1},OE=t=>t==="position"||t==="percentage",ME=t=>t==="image"||t==="url",LE=t=>t==="length"||t==="size"||t==="bg-size",VE=t=>t==="length",bj=t=>t==="number",kj=t=>t==="family-name",FE=t=>t==="shadow",Ej=()=>{const t=Qt("color"),e=Qt("font"),n=Qt("text"),r=Qt("font-weight"),s=Qt("tracking"),a=Qt("leading"),l=Qt("breakpoint"),d=Qt("container"),f=Qt("spacing"),p=Qt("radius"),v=Qt("shadow"),w=Qt("inset-shadow"),b=Qt("text-shadow"),E=Qt("drop-shadow"),O=Qt("blur"),S=Qt("perspective"),P=Qt("aspect"),B=Qt("ease"),q=Qt("animate"),K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...Y(),ve,ye],te=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],I=()=>[ve,ye,f],A=()=>[Ba,"full","auto",...I()],j=()=>[Ai,"none","subgrid",ve,ye],D=()=>["auto",{span:["full",Ai,ve,ye]},Ai,ve,ye],V=()=>[Ai,"auto",ve,ye],N=()=>["auto","min","max","fr",ve,ye],Ve=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],rt=()=>["start","end","center","stretch","center-safe","end-safe"],Ge=()=>["auto",...I()],Te=()=>[Ba,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],Z=()=>[t,ve,ye],fe=()=>[...Y(),Yw,Jw,{position:[ve,ye]}],ce=()=>["no-repeat",{repeat:["","x","y","space","round"]}],U=()=>["auto","cover","contain",wj,yj,{size:[ve,ye]}],z=()=>[Tm,ku,Lo],oe=()=>["","none","full",p,ve,ye],de=()=>["",Ue,ku,Lo],ke=()=>["solid","dashed","dotted","double"],Se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ee=()=>[Ue,Tm,Yw,Jw],Le=()=>["","none",O,ve,ye],Fe=()=>["none",Ue,ve,ye],Ce=()=>["none",Ue,ve,ye],Wt=()=>[Ue,ve,ye],Ct=()=>[Ba,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Us],breakpoint:[Us],color:[hj],container:[Us],"drop-shadow":[Us],ease:["in","out","in-out"],font:[gj],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Us],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Us],shadow:[Us],spacing:["px",Ue],text:[Us],"text-shadow":[Us],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ba,ye,ve,P]}],container:["container"],columns:[{columns:[Ue,ye,ve,d]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:te()}],"overflow-x":[{"overflow-x":te()}],"overflow-y":[{"overflow-y":te()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Ai,"auto",ve,ye]}],basis:[{basis:[Ba,"full","auto",d,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ue,Ba,"auto","initial","none",ye]}],grow:[{grow:["",Ue,ve,ye]}],shrink:[{shrink:["",Ue,ve,ye]}],order:[{order:[Ai,"first","last","none",ve,ye]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":N()}],"auto-rows":[{"auto-rows":N()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...Ve(),"normal"]}],"justify-items":[{"justify-items":[...rt(),"normal"]}],"justify-self":[{"justify-self":["auto",...rt()]}],"align-content":[{content:["normal",...Ve()]}],"align-items":[{items:[...rt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...rt(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ve()}],"place-items":[{"place-items":[...rt(),"baseline"]}],"place-self":[{"place-self":["auto",...rt()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:Ge()}],mx:[{mx:Ge()}],my:[{my:Ge()}],ms:[{ms:Ge()}],me:[{me:Ge()}],mt:[{mt:Ge()}],mr:[{mr:Ge()}],mb:[{mb:Ge()}],ml:[{ml:Ge()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:Te()}],w:[{w:[d,"screen",...Te()]}],"min-w":[{"min-w":[d,"screen","none",...Te()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[l]},...Te()]}],h:[{h:["screen","lh",...Te()]}],"min-h":[{"min-h":["screen","lh","none",...Te()]}],"max-h":[{"max-h":["screen","lh",...Te()]}],"font-size":[{text:["base",n,ku,Lo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ve,Sm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Tm,ye]}],"font-family":[{font:[_j,ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ve,ye]}],"line-clamp":[{"line-clamp":[Ue,"none",ve,Sm]}],leading:[{leading:[a,...I()]}],"list-image":[{"list-image":["none",ve,ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ve,ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ke(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ue,"from-font","auto",ve,Lo]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[Ue,"auto",ve,ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve,ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve,ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:fe()}],"bg-repeat":[{bg:ce()}],"bg-size":[{bg:U()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ai,ve,ye],radial:["",ve,ye],conic:[Ai,ve,ye]},xj,vj]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:z()}],"gradient-via-pos":[{via:z()}],"gradient-to-pos":[{to:z()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:oe()}],"rounded-s":[{"rounded-s":oe()}],"rounded-e":[{"rounded-e":oe()}],"rounded-t":[{"rounded-t":oe()}],"rounded-r":[{"rounded-r":oe()}],"rounded-b":[{"rounded-b":oe()}],"rounded-l":[{"rounded-l":oe()}],"rounded-ss":[{"rounded-ss":oe()}],"rounded-se":[{"rounded-se":oe()}],"rounded-ee":[{"rounded-ee":oe()}],"rounded-es":[{"rounded-es":oe()}],"rounded-tl":[{"rounded-tl":oe()}],"rounded-tr":[{"rounded-tr":oe()}],"rounded-br":[{"rounded-br":oe()}],"rounded-bl":[{"rounded-bl":oe()}],"border-w":[{border:de()}],"border-w-x":[{"border-x":de()}],"border-w-y":[{"border-y":de()}],"border-w-s":[{"border-s":de()}],"border-w-e":[{"border-e":de()}],"border-w-t":[{"border-t":de()}],"border-w-r":[{"border-r":de()}],"border-w-b":[{"border-b":de()}],"border-w-l":[{"border-l":de()}],"divide-x":[{"divide-x":de()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":de()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ke(),"hidden","none"]}],"divide-style":[{divide:[...ke(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...ke(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ue,ve,ye]}],"outline-w":[{outline:["",Ue,ku,Lo]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",v,Gd,Kd]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",w,Gd,Kd]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[Ue,Lo]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":de()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",b,Gd,Kd]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[Ue,ve,ye]}],"mix-blend":[{"mix-blend":[...Se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ue]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ee()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":Ee()}],"mask-image-t-to-pos":[{"mask-t-to":Ee()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":Ee()}],"mask-image-r-to-pos":[{"mask-r-to":Ee()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":Ee()}],"mask-image-b-to-pos":[{"mask-b-to":Ee()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":Ee()}],"mask-image-l-to-pos":[{"mask-l-to":Ee()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":Ee()}],"mask-image-x-to-pos":[{"mask-x-to":Ee()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":Ee()}],"mask-image-y-to-pos":[{"mask-y-to":Ee()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[ve,ye]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ee()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Y()}],"mask-image-conic-pos":[{"mask-conic":[Ue]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ee()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:fe()}],"mask-repeat":[{mask:ce()}],"mask-size":[{mask:U()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ve,ye]}],filter:[{filter:["","none",ve,ye]}],blur:[{blur:Le()}],brightness:[{brightness:[Ue,ve,ye]}],contrast:[{contrast:[Ue,ve,ye]}],"drop-shadow":[{"drop-shadow":["","none",E,Gd,Kd]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",Ue,ve,ye]}],"hue-rotate":[{"hue-rotate":[Ue,ve,ye]}],invert:[{invert:["",Ue,ve,ye]}],saturate:[{saturate:[Ue,ve,ye]}],sepia:[{sepia:["",Ue,ve,ye]}],"backdrop-filter":[{"backdrop-filter":["","none",ve,ye]}],"backdrop-blur":[{"backdrop-blur":Le()}],"backdrop-brightness":[{"backdrop-brightness":[Ue,ve,ye]}],"backdrop-contrast":[{"backdrop-contrast":[Ue,ve,ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ue,ve,ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ue,ve,ye]}],"backdrop-invert":[{"backdrop-invert":["",Ue,ve,ye]}],"backdrop-opacity":[{"backdrop-opacity":[Ue,ve,ye]}],"backdrop-saturate":[{"backdrop-saturate":[Ue,ve,ye]}],"backdrop-sepia":[{"backdrop-sepia":["",Ue,ve,ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ve,ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ue,"initial",ve,ye]}],ease:[{ease:["linear","initial",B,ve,ye]}],delay:[{delay:[Ue,ve,ye]}],animate:[{animate:["none",q,ve,ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,ve,ye]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:Fe()}],"rotate-x":[{"rotate-x":Fe()}],"rotate-y":[{"rotate-y":Fe()}],"rotate-z":[{"rotate-z":Fe()}],scale:[{scale:Ce()}],"scale-x":[{"scale-x":Ce()}],"scale-y":[{"scale-y":Ce()}],"scale-z":[{"scale-z":Ce()}],"scale-3d":["scale-3d"],skew:[{skew:Wt()}],"skew-x":[{"skew-x":Wt()}],"skew-y":[{"skew-y":Wt()}],transform:[{transform:[ve,ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ct()}],"translate-x":[{"translate-x":Ct()}],"translate-y":[{"translate-y":Ct()}],"translate-z":[{"translate-z":Ct()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve,ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve,ye]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[Ue,ku,Lo,Sm]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Ij=sj(Ej);function Ye(...t){return Ij(LD(t))}const Tj=()=>{const{toasts:t,removeToast:e}=mh();return t.length===0?null:g.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:t.map(n=>g.jsx("div",{onClick:()=>e(n.id),className:Ye("pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-xl shadow-lg border text-sm font-medium transition-all transform animate-in slide-in-from-right-10 fade-in duration-300 cursor-pointer hover:opacity-90",n.type==="success"&&"bg-white dark:bg-gray-800 text-green-600 dark:text-green-400 border-green-200 dark:border-green-900",n.type==="error"&&"bg-white dark:bg-gray-800 text-red-600 dark:text-red-400 border-red-200 dark:border-red-900",n.type==="info"&&"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700"),children:g.jsxs("div",{className:"flex items-start gap-3",children:[n.type==="success"&&g.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),n.type==="error"&&g.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.type==="info"&&g.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),g.jsx("p",{className:"leading-5",children:n.message})]})},n.id))})},Xn=Ml(t=>({stack:[],activeModal:null,modalData:null,openModal:(e,n=null)=>{if(!e)return;const r=Math.random().toString(36).substring(7);t(s=>({stack:[...s.stack,{id:r,type:e,data:n}],activeModal:e,modalData:n}))},closeModal:()=>t(e=>{const n=e.stack.slice(0,-1),r=n[n.length-1];return{stack:n,activeModal:r?r.type:null,modalData:r?r.data:null}}),closeAllModals:()=>t({stack:[],activeModal:null,modalData:null})}));function Sj(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var a;const l=f=>f===null?null:JSON.parse(f,void 0),d=(a=n.getItem(s))!=null?a:null;return d instanceof Promise?d.then(l):l(d)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const mg=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return mg(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return mg(r)(n)}}}},Cj=(t,e)=>(n,r,s)=>{let a={storage:Sj(()=>localStorage),partialize:S=>S,version:0,merge:(S,P)=>({...P,...S}),...e},l=!1;const d=new Set,f=new Set;let p=a.storage;if(!p)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...S)},r,s);const v=()=>{const S=a.partialize({...r()});return p.setItem(a.name,{state:S,version:a.version})},w=s.setState;s.setState=(S,P)=>(w(S,P),v());const b=t((...S)=>(n(...S),v()),r,s);s.getInitialState=()=>b;let E;const O=()=>{var S,P;if(!p)return;l=!1,d.forEach(q=>{var K;return q((K=r())!=null?K:b)});const B=((P=a.onRehydrateStorage)==null?void 0:P.call(a,(S=r())!=null?S:b))||void 0;return mg(p.getItem.bind(p))(a.name).then(q=>{if(q)if(typeof q.version=="number"&&q.version!==a.version){if(a.migrate){const K=a.migrate(q.state,q.version);return K instanceof Promise?K.then(Y=>[!0,Y]):[!0,K]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,q.state];return[!1,void 0]}).then(q=>{var K;const[Y,J]=q;if(E=a.merge(J,(K=r())!=null?K:b),n(E,!0),Y)return v()}).then(()=>{B==null||B(E,void 0),E=r(),l=!0,f.forEach(q=>q(E))}).catch(q=>{B==null||B(void 0,q)})};return s.persist={setOptions:S=>{a={...a,...S},S.storage&&(p=S.storage)},clearStorage:()=>{p==null||p.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>O(),hasHydrated:()=>l,onHydrate:S=>(d.add(S),()=>{d.delete(S)}),onFinishHydration:S=>(f.add(S),()=>{f.delete(S)})},a.skipHydration||O(),E||b},Ef=Cj,Ay=Ml()(Ef(t=>({sidebarWidth:280,isSidebarOpen:!0,sidebarDensity:"normal",setSidebarWidth:e=>t({sidebarWidth:e}),toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),setSidebarOpen:e=>t({isSidebarOpen:e}),setSidebarDensity:e=>t({sidebarDensity:e})}),{name:"ui-storage",partialize:t=>({sidebarWidth:t.sidebarWidth,sidebarDensity:t.sidebarDensity,isSidebarOpen:t.isSidebarOpen})})),Aj="/assets/logo-BADOZ29k.png",Rj=({children:t})=>{const{sidebarWidth:e,isSidebarOpen:n,sidebarDensity:r,toggleSidebar:s,setSidebarWidth:a}=Ay(),l={compact:"p-1",normal:"p-2",comfortable:"p-4",spacious:"p-6"}[r],d=f=>{const p=f.clientX,v=e,w=E=>{const O=Math.max(160,Math.min(480,v+(E.clientX-p)));a(O)},b=()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",b),document.body.style.cursor="default"};document.addEventListener("mousemove",w),document.addEventListener("mouseup",b),document.body.style.cursor="col-resize"};return g.jsxs("aside",{className:Ye("h-full transition-all duration-300 flex flex-col group relative","bg-white dark:bg-gray-900 md:bg-white/50 md:dark:bg-gray-800/50","backdrop-blur-none md:backdrop-blur-xl","border-r border-gray-200 dark:border-gray-700/50",n?"translate-x-0":"-translate-x-full","fixed md:relative z-20 md:z-0 shadow-xl md:shadow-none overflow-hidden"),style:{width:n?`${e}px`:"0px"},children:[g.jsxs("div",{className:"h-14 flex items-center px-4 flex-shrink-0 justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition select-none",children:[g.jsx("img",{src:Aj,alt:"Logo",className:"h-8 w-8 rounded-lg shadow-sm"}),g.jsxs("span",{className:"text-lg font-bold text-gray-800 dark:text-white tracking-tight",children:["Task",g.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]})]}),g.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700",title:"",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),g.jsx("div",{className:Ye("flex-1 overflow-y-auto custom-scrollbar px-2",l),children:t}),g.jsx("div",{onMouseDown:d,className:"absolute top-0 right-[-4px] w-2 h-full cursor-col-resize hover:bg-blue-500/50 transition-colors z-30 opacity-30 hover:opacity-100 hidden md:block",title:""})]})},sa=Ml()(Ef(t=>({currentWorkspaceId:null,workspaces:[],setCurrentWorkspaceId:e=>t({currentWorkspaceId:e}),setWorkspaces:e=>t({workspaces:e})}),{name:"workspace-storage",partialize:t=>({currentWorkspaceId:t.currentWorkspaceId})}));function Nj(){return typeof window<"u"&&window.GLOBAL_APP_ID?window.GLOBAL_APP_ID:typeof __app_id<"u"?__app_id:"default-app-id"}function Ga(t){return`artifacts/${Nj()}/users/${t}`}function Cm(t,e){return`${Ga(t)}/workspaces/${e}`}const gt={users:t=>Ga(t),filters:t=>`${Ga(t)}/filters`,labels:t=>`${Ga(t)}/labels`,workspaces:t=>`${Ga(t)}/workspaces`,timeblocks:t=>`${Ga(t)}/timeblocks`,tasks:(t,e)=>`${Cm(t,e)}/tasks`,projects:(t,e)=>`${Cm(t,e)}/projects`,targets:(t,e)=>`${Cm(t,e)}/targets`},Pj={WORKSPACE_CHANGED:"workspace-changed"};function ee(t,e,n){function r(d,f){if(d._zod||Object.defineProperty(d,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),d._zod.traits.has(t))return;d._zod.traits.add(t),e(d,f);const p=l.prototype,v=Object.keys(p);for(let w=0;w<v.length;w++){const b=v[w];b in d||(d[b]=p[b].bind(d))}}const s=(n==null?void 0:n.Parent)??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(d){var f;const p=n!=null&&n.Parent?new a:this;r(p,d),(f=p._zod).deferred??(f.deferred=[]);for(const v of p._zod.deferred)v();return p}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:d=>{var f,p;return n!=null&&n.Parent&&d instanceof n.Parent?!0:(p=(f=d==null?void 0:d._zod)==null?void 0:f.traits)==null?void 0:p.has(t)}}),Object.defineProperty(l,"name",{value:t}),l}class il extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class zE extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const UE={};function Xi(t){return UE}function $E(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function gg(t,e){return typeof e=="bigint"?e.toString():e}function Ry(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Ny(t){return t==null}function Py(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function Dj(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const f=r.match(/\d?e-(\d?)/);f!=null&&f[1]&&(s=Number.parseInt(f[1]))}const a=n>s?n:s,l=Number.parseInt(t.toFixed(a).replace(".","")),d=Number.parseInt(e.toFixed(a).replace(".",""));return l%d/10**a}const Xw=Symbol("evaluating");function dt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==Xw)return r===void 0&&(r=Xw,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function ia(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function oa(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function ex(t){return JSON.stringify(t)}function jj(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const BE="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Uh(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const Oj=Ry(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function kl(t){if(Uh(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Uh(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function WE(t){return kl(t)?{...t}:Array.isArray(t)?[...t]:t}const Mj=new Set(["string","number","symbol"]);function If(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function io(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function be(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Lj(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const Vj={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Fj(t,e){const n=t._zod.def,r=oa(t._zod.def,{get shape(){const s={};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(s[a]=n.shape[a])}return ia(this,"shape",s),s},checks:[]});return io(t,r)}function zj(t,e){const n=t._zod.def,r=oa(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete s[a]}return ia(this,"shape",s),s},checks:[]});return io(t,r)}function Uj(t,e){if(!kl(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=oa(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return ia(this,"shape",a),a},checks:[]});return io(t,s)}function $j(t,e){if(!kl(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return ia(this,"shape",r),r},checks:t._zod.def.checks};return io(t,n)}function Bj(t,e){const n=oa(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return ia(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return io(t,n)}function Wj(t,e,n){const r=oa(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in s))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=t?new t({type:"optional",innerType:s[l]}):s[l])}else for(const l in s)a[l]=t?new t({type:"optional",innerType:s[l]}):s[l];return ia(this,"shape",a),a},checks:[]});return io(e,r)}function qj(t,e,n){const r=oa(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return ia(this,"shape",a),a},checks:[]});return io(e,r)}function Ja(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Ya(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Qd(t){return typeof t=="string"?t:t==null?void 0:t.message}function eo(t,e,n){var s,a,l,d,f,p;const r={...t,path:t.path??[]};if(!t.message){const v=Qd((l=(a=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:a.error)==null?void 0:l.call(a,t))??Qd((d=e==null?void 0:e.error)==null?void 0:d.call(e,t))??Qd((f=n.customError)==null?void 0:f.call(n,t))??Qd((p=n.localeError)==null?void 0:p.call(n,t))??"Invalid input";r.message=v}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function Dy(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function rc(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const qE=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,gg,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},HE=ee("$ZodError",qE),KE=ee("$ZodError",qE,{Parent:Error});function Hj(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function Kj(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,d=0;for(;d<a.path.length;){const f=a.path[d];d===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],d++}}};return r(t),n}const jy=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new il;if(l.issues.length){const d=new((s==null?void 0:s.Err)??t)(l.issues.map(f=>eo(f,a,Xi())));throw BE(d,s==null?void 0:s.callee),d}return l.value},Oy=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const d=new((s==null?void 0:s.Err)??t)(l.issues.map(f=>eo(f,a,Xi())));throw BE(d,s==null?void 0:s.callee),d}return l.value},Tf=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new il;return a.issues.length?{success:!1,error:new(t??HE)(a.issues.map(l=>eo(l,s,Xi())))}:{success:!0,data:a.value}},Gj=Tf(KE),Sf=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>eo(l,s,Xi())))}:{success:!0,data:a.value}},Qj=Sf(KE),Zj=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return jy(t)(e,n,s)},Jj=t=>(e,n,r)=>jy(t)(e,n,r),Yj=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Oy(t)(e,n,s)},Xj=t=>async(e,n,r)=>Oy(t)(e,n,r),eO=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Tf(t)(e,n,s)},tO=t=>(e,n,r)=>Tf(t)(e,n,r),nO=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Sf(t)(e,n,s)},rO=t=>async(e,n,r)=>Sf(t)(e,n,r),sO=/^[cC][^\s-]{8,}$/,iO=/^[0-9a-z]+$/,oO=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,aO=/^[0-9a-vA-V]{20}$/,lO=/^[A-Za-z0-9]{27}$/,uO=/^[a-zA-Z0-9_-]{21}$/,cO=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,dO=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,tx=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,hO=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,fO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function pO(){return new RegExp(fO,"u")}const mO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gO=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,yO=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,vO=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,_O=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,GE=/^[A-Za-z0-9_-]*$/,wO=/^\+(?:[0-9]){6,14}[0-9]$/,QE="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",xO=new RegExp(`^${QE}$`);function ZE(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function bO(t){return new RegExp(`^${ZE(t)}$`)}function kO(t){const e=ZE({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${QE}T(?:${r})$`)}const EO=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},IO=/^-?\d+$/,TO=/^-?\d+(?:\.\d+)?/,SO=/^(?:true|false)$/i,CO=/^[^A-Z]*$/,AO=/^[^a-z]*$/,er=ee("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),JE={number:"number",bigint:"bigint",object:"date"},YE=ee("$ZodCheckLessThan",(t,e)=>{er.init(t,e);const n=JE[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,a=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<a&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),XE=ee("$ZodCheckGreaterThan",(t,e)=>{er.init(t,e);const n=JE[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,a=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>a&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),RO=ee("$ZodCheckMultipleOf",(t,e)=>{er.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):Dj(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),NO=ee("$ZodCheckNumberFormat",(t,e)=>{var l;er.init(t,e),e.format=e.format||"float64";const n=(l=e.format)==null?void 0:l.includes("int"),r=n?"int":"number",[s,a]=Vj[e.format];t._zod.onattach.push(d=>{const f=d._zod.bag;f.format=e.format,f.minimum=s,f.maximum=a,n&&(f.pattern=IO)}),t._zod.check=d=>{const f=d.value;if(n){if(!Number.isInteger(f)){d.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:f,inst:t});return}if(!Number.isSafeInteger(f)){f>0?d.issues.push({input:f,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):d.issues.push({input:f,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}f<s&&d.issues.push({origin:"number",input:f,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),f>a&&d.issues.push({origin:"number",input:f,code:"too_big",maximum:a,inst:t})}}),PO=ee("$ZodCheckMaxLength",(t,e)=>{var n;er.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!Ny(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=Dy(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),DO=ee("$ZodCheckMinLength",(t,e)=>{var n;er.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!Ny(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=Dy(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),jO=ee("$ZodCheckLengthEquals",(t,e)=>{var n;er.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!Ny(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=Dy(s),d=a>e.length;r.issues.push({origin:l,...d?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Cf=ee("$ZodCheckStringFormat",(t,e)=>{var n,r;er.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),OO=ee("$ZodCheckRegex",(t,e)=>{Cf.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),MO=ee("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=CO),Cf.init(t,e)}),LO=ee("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=AO),Cf.init(t,e)}),VO=ee("$ZodCheckIncludes",(t,e)=>{er.init(t,e);const n=If(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),FO=ee("$ZodCheckStartsWith",(t,e)=>{er.init(t,e);const n=new RegExp(`^${If(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),zO=ee("$ZodCheckEndsWith",(t,e)=>{er.init(t,e);const n=new RegExp(`.*${If(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),UO=ee("$ZodCheckOverwrite",(t,e)=>{er.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class $O{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const BO={major:4,minor:2,patch:1},Tt=ee("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=BO;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)for(const l of a._zod.onattach)l(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const a=(d,f,p)=>{let v=Ja(d),w;for(const b of f){if(b._zod.def.when){if(!b._zod.def.when(d))continue}else if(v)continue;const E=d.issues.length,O=b._zod.check(d);if(O instanceof Promise&&(p==null?void 0:p.async)===!1)throw new il;if(w||O instanceof Promise)w=(w??Promise.resolve()).then(async()=>{await O,d.issues.length!==E&&(v||(v=Ja(d,E)))});else{if(d.issues.length===E)continue;v||(v=Ja(d,E))}}return w?w.then(()=>d):d},l=(d,f,p)=>{if(Ja(d))return d.aborted=!0,d;const v=a(f,r,p);if(v instanceof Promise){if(p.async===!1)throw new il;return v.then(w=>t._zod.parse(w,p))}return t._zod.parse(v,p)};t._zod.run=(d,f)=>{if(f.skipChecks)return t._zod.parse(d,f);if(f.direction==="backward"){const v=t._zod.parse({value:d.value,issues:[]},{...f,skipChecks:!0});return v instanceof Promise?v.then(w=>l(w,d,f)):l(v,d,f)}const p=t._zod.parse(d,f);if(p instanceof Promise){if(f.async===!1)throw new il;return p.then(v=>a(v,r,f))}return a(p,r,f)}}t["~standard"]={validate:a=>{var l;try{const d=Gj(t,a);return d.success?{value:d.data}:{issues:(l=d.error)==null?void 0:l.issues}}catch{return Qj(t,a).then(f=>{var p;return f.success?{value:f.data}:{issues:(p=f.error)==null?void 0:p.issues}})}},vendor:"zod",version:1}}),My=ee("$ZodString",(t,e)=>{var n;Tt.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??EO(t._zod.bag),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),xt=ee("$ZodStringFormat",(t,e)=>{Cf.init(t,e),My.init(t,e)}),WO=ee("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=dO),xt.init(t,e)}),qO=ee("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=tx(r))}else e.pattern??(e.pattern=tx());xt.init(t,e)}),HO=ee("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=hO),xt.init(t,e)}),KO=ee("$ZodURL",(t,e)=>{xt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),GO=ee("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=pO()),xt.init(t,e)}),QO=ee("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=uO),xt.init(t,e)}),ZO=ee("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=sO),xt.init(t,e)}),JO=ee("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=iO),xt.init(t,e)}),YO=ee("$ZodULID",(t,e)=>{e.pattern??(e.pattern=oO),xt.init(t,e)}),XO=ee("$ZodXID",(t,e)=>{e.pattern??(e.pattern=aO),xt.init(t,e)}),e4=ee("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=lO),xt.init(t,e)}),t4=ee("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=kO(e)),xt.init(t,e)}),n4=ee("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=xO),xt.init(t,e)}),r4=ee("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=bO(e)),xt.init(t,e)}),s4=ee("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=cO),xt.init(t,e)}),i4=ee("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=mO),xt.init(t,e),t._zod.bag.format="ipv4"}),o4=ee("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=gO),xt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),a4=ee("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=yO),xt.init(t,e)}),l4=ee("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=vO),xt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function eI(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const u4=ee("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=_O),xt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{eI(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function c4(t){if(!GE.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return eI(n)}const d4=ee("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=GE),xt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{c4(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),h4=ee("$ZodE164",(t,e)=>{e.pattern??(e.pattern=wO),xt.init(t,e)});function f4(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const p4=ee("$ZodJWT",(t,e)=>{xt.init(t,e),t._zod.check=n=>{f4(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),tI=ee("$ZodNumber",(t,e)=>{Tt.init(t,e),t._zod.pattern=t._zod.bag.pattern??TO,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const a=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...a?{received:a}:{}}),n}}),m4=ee("$ZodNumberFormat",(t,e)=>{NO.init(t,e),tI.init(t,e)}),g4=ee("$ZodBoolean",(t,e)=>{Tt.init(t,e),t._zod.pattern=SO,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),n}}),y4=ee("$ZodUnknown",(t,e)=>{Tt.init(t,e),t._zod.parse=n=>n}),v4=ee("$ZodNever",(t,e)=>{Tt.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),_4=ee("$ZodDate",(t,e)=>{Tt.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const s=n.value,a=s instanceof Date;return a&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...a?{received:"Invalid Date"}:{},inst:t}),n}});function nx(t,e,n){t.issues.length&&e.issues.push(...Ya(n,t.issues)),e.value[n]=t.value}const w4=ee("$ZodArray",(t,e)=>{Tt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const d=s[l],f=e.element._zod.run({value:d,issues:[]},r);f instanceof Promise?a.push(f.then(p=>nx(p,n,l))):nx(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function $h(t,e,n,r){t.issues.length&&e.issues.push(...Ya(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function nI(t){var r,s,a,l;const e=Object.keys(t.shape);for(const d of e)if(!((l=(a=(s=(r=t.shape)==null?void 0:r[d])==null?void 0:s._zod)==null?void 0:a.traits)!=null&&l.has("$ZodType")))throw new Error(`Invalid element at key "${d}": expected a Zod schema`);const n=Lj(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function rI(t,e,n,r,s,a){const l=[],d=s.keySet,f=s.catchall._zod,p=f.def.type;for(const v in e){if(d.has(v))continue;if(p==="never"){l.push(v);continue}const w=f.run({value:e[v],issues:[]},r);w instanceof Promise?t.push(w.then(b=>$h(b,n,v,e))):$h(w,n,v,e)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const x4=ee("$ZodObject",(t,e)=>{Tt.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const d=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...d};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=Ry(()=>nI(e));dt(t._zod,"propValues",()=>{const d=e.shape,f={};for(const p in d){const v=d[p]._zod;if(v.values){f[p]??(f[p]=new Set);for(const w of v.values)f[p].add(w)}}return f});const s=Uh,a=e.catchall;let l;t._zod.parse=(d,f)=>{l??(l=r.value);const p=d.value;if(!s(p))return d.issues.push({expected:"object",code:"invalid_type",input:p,inst:t}),d;d.value={};const v=[],w=l.shape;for(const b of l.keys){const O=w[b]._zod.run({value:p[b],issues:[]},f);O instanceof Promise?v.push(O.then(S=>$h(S,d,b,p))):$h(O,d,b,p)}return a?rI(v,p,d,f,r.value,t):v.length?Promise.all(v).then(()=>d):d}}),b4=ee("$ZodObjectJIT",(t,e)=>{x4.init(t,e);const n=t._zod.parse,r=Ry(()=>nI(e)),s=b=>{const E=new $O(["shape","payload","ctx"]),O=r.value,S=K=>{const Y=ex(K);return`shape[${Y}]._zod.run({ value: input[${Y}], issues: [] }, ctx)`};E.write("const input = payload.value;");const P=Object.create(null);let B=0;for(const K of O.keys)P[K]=`key_${B++}`;E.write("const newResult = {};");for(const K of O.keys){const Y=P[K],J=ex(K);E.write(`const ${Y} = ${S(K)};`),E.write(`
        if (${Y}.issues.length) {
          payload.issues = payload.issues.concat(${Y}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${J}, ...iss.path] : [${J}]
          })));
        }
        
        
        if (${Y}.value === undefined) {
          if (${J} in input) {
            newResult[${J}] = undefined;
          }
        } else {
          newResult[${J}] = ${Y}.value;
        }
        
      `)}E.write("payload.value = newResult;"),E.write("return payload;");const q=E.compile();return(K,Y)=>q(b,K,Y)};let a;const l=Uh,d=!UE.jitless,p=d&&Oj.value,v=e.catchall;let w;t._zod.parse=(b,E)=>{w??(w=r.value);const O=b.value;return l(O)?d&&p&&(E==null?void 0:E.async)===!1&&E.jitless!==!0?(a||(a=s(e.shape)),b=a(b,E),v?rI([],O,b,E,w,t):b):n(b,E):(b.issues.push({expected:"object",code:"invalid_type",input:O,inst:t}),b)}});function rx(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!Ja(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>eo(l,r,Xi())))}),e)}const k4=ee("$ZodUnion",(t,e)=>{Tt.init(t,e),dt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),dt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),dt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),dt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>Py(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const d=[];for(const f of e.options){const p=f._zod.run({value:s.value,issues:[]},a);if(p instanceof Promise)d.push(p),l=!0;else{if(p.issues.length===0)return p;d.push(p)}}return l?Promise.all(d).then(f=>rx(f,s,t,a)):rx(d,s,t,a)}}),E4=ee("$ZodIntersection",(t,e)=>{Tt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,p])=>sx(n,f,p)):sx(n,a,l)}});function yg(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(kl(t)&&kl(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=yg(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=yg(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function sx(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),Ja(t))return t;const r=yg(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const I4=ee("$ZodRecord",(t,e)=>{Tt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!kl(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:t}),n;const a=[],l=e.keyType._zod.values;if(l){n.value={};const d=new Set;for(const p of l)if(typeof p=="string"||typeof p=="number"||typeof p=="symbol"){d.add(typeof p=="number"?p.toString():p);const v=e.valueType._zod.run({value:s[p],issues:[]},r);v instanceof Promise?a.push(v.then(w=>{w.issues.length&&n.issues.push(...Ya(p,w.issues)),n.value[p]=w.value})):(v.issues.length&&n.issues.push(...Ya(p,v.issues)),n.value[p]=v.value)}let f;for(const p in s)d.has(p)||(f=f??[],f.push(p));f&&f.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:t,keys:f})}else{n.value={};for(const d of Reflect.ownKeys(s)){if(d==="__proto__")continue;const f=e.keyType._zod.run({value:d,issues:[]},r);if(f instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(f.issues.length){e.mode==="loose"?n.value[d]=s[d]:n.issues.push({code:"invalid_key",origin:"record",issues:f.issues.map(v=>eo(v,r,Xi())),input:d,path:[d],inst:t});continue}const p=e.valueType._zod.run({value:s[d],issues:[]},r);p instanceof Promise?a.push(p.then(v=>{v.issues.length&&n.issues.push(...Ya(d,v.issues)),n.value[f.value]=v.value})):(p.issues.length&&n.issues.push(...Ya(d,p.issues)),n.value[f.value]=p.value)}}return a.length?Promise.all(a).then(()=>n):n}}),T4=ee("$ZodEnum",(t,e)=>{Tt.init(t,e);const n=$E(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>Mj.has(typeof s)).map(s=>typeof s=="string"?If(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),S4=ee("$ZodTransform",(t,e)=>{Tt.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new zE(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new il;return n.value=s,n}});function ix(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const C4=ee("$ZodOptional",(t,e)=>{Tt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",dt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),dt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Py(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>ix(a,n.value)):ix(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),A4=ee("$ZodNullable",(t,e)=>{Tt.init(t,e),dt(t._zod,"optin",()=>e.innerType._zod.optin),dt(t._zod,"optout",()=>e.innerType._zod.optout),dt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Py(n.source)}|null)$`):void 0}),dt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),R4=ee("$ZodDefault",(t,e)=>{Tt.init(t,e),t._zod.optin="optional",dt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>ox(a,e)):ox(s,e)}});function ox(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const N4=ee("$ZodPrefault",(t,e)=>{Tt.init(t,e),t._zod.optin="optional",dt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),P4=ee("$ZodNonOptional",(t,e)=>{Tt.init(t,e),dt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>ax(a,t)):ax(s,t)}});function ax(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const D4=ee("$ZodCatch",(t,e)=>{Tt.init(t,e),dt(t._zod,"optin",()=>e.innerType._zod.optin),dt(t._zod,"optout",()=>e.innerType._zod.optout),dt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>eo(l,r,Xi()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>eo(a,r,Xi()))},input:n.value}),n.issues=[]),n)}}),j4=ee("$ZodPipe",(t,e)=>{Tt.init(t,e),dt(t._zod,"values",()=>e.in._zod.values),dt(t._zod,"optin",()=>e.in._zod.optin),dt(t._zod,"optout",()=>e.out._zod.optout),dt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>Zd(l,e.in,r)):Zd(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>Zd(a,e.out,r)):Zd(s,e.out,r)}});function Zd(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const O4=ee("$ZodReadonly",(t,e)=>{Tt.init(t,e),dt(t._zod,"propValues",()=>e.innerType._zod.propValues),dt(t._zod,"values",()=>e.innerType._zod.values),dt(t._zod,"optin",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),dt(t._zod,"optout",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(lx):lx(s)}});function lx(t){return t.value=Object.freeze(t.value),t}const M4=ee("$ZodCustom",(t,e)=>{er.init(t,e),Tt.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>ux(a,n,r,t));ux(s,n,r,t)}});function ux(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(rc(s))}}var cx;class L4{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function V4(){return new L4}(cx=globalThis).__zod_globalRegistry??(cx.__zod_globalRegistry=V4());const Ru=globalThis.__zod_globalRegistry;function F4(t,e){return new t({type:"string",...be(e)})}function z4(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...be(e)})}function dx(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...be(e)})}function U4(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...be(e)})}function $4(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...be(e)})}function B4(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...be(e)})}function W4(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...be(e)})}function q4(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...be(e)})}function H4(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...be(e)})}function K4(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...be(e)})}function G4(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...be(e)})}function Q4(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...be(e)})}function Z4(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...be(e)})}function J4(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...be(e)})}function Y4(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...be(e)})}function X4(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...be(e)})}function eM(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...be(e)})}function tM(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...be(e)})}function nM(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...be(e)})}function rM(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...be(e)})}function sM(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...be(e)})}function iM(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...be(e)})}function oM(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...be(e)})}function aM(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...be(e)})}function lM(t,e){return new t({type:"string",format:"date",check:"string_format",...be(e)})}function uM(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...be(e)})}function cM(t,e){return new t({type:"string",format:"duration",check:"string_format",...be(e)})}function dM(t,e){return new t({type:"number",checks:[],...be(e)})}function hM(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...be(e)})}function fM(t,e){return new t({type:"boolean",...be(e)})}function pM(t){return new t({type:"unknown"})}function mM(t,e){return new t({type:"never",...be(e)})}function gM(t,e){return new t({type:"date",...be(e)})}function hx(t,e){return new YE({check:"less_than",...be(e),value:t,inclusive:!1})}function gh(t,e){return new YE({check:"less_than",...be(e),value:t,inclusive:!0})}function fx(t,e){return new XE({check:"greater_than",...be(e),value:t,inclusive:!1})}function yh(t,e){return new XE({check:"greater_than",...be(e),value:t,inclusive:!0})}function px(t,e){return new RO({check:"multiple_of",...be(e),value:t})}function sI(t,e){return new PO({check:"max_length",...be(e),maximum:t})}function Bh(t,e){return new DO({check:"min_length",...be(e),minimum:t})}function iI(t,e){return new jO({check:"length_equals",...be(e),length:t})}function yM(t,e){return new OO({check:"string_format",format:"regex",...be(e),pattern:t})}function vM(t){return new MO({check:"string_format",format:"lowercase",...be(t)})}function _M(t){return new LO({check:"string_format",format:"uppercase",...be(t)})}function wM(t,e){return new VO({check:"string_format",format:"includes",...be(e),includes:t})}function xM(t,e){return new FO({check:"string_format",format:"starts_with",...be(e),prefix:t})}function bM(t,e){return new zO({check:"string_format",format:"ends_with",...be(e),suffix:t})}function Fl(t){return new UO({check:"overwrite",tx:t})}function kM(t){return Fl(e=>e.normalize(t))}function EM(){return Fl(t=>t.trim())}function IM(){return Fl(t=>t.toLowerCase())}function TM(){return Fl(t=>t.toUpperCase())}function SM(){return Fl(t=>jj(t))}function CM(t,e,n){return new t({type:"array",element:e,...be(n)})}function AM(t,e,n){return new t({type:"custom",check:"custom",fn:e,...be(n)})}function RM(t){const e=NM(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(rc(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(rc(s))}},t(n.value,n)));return e}function NM(t,e){const n=new er({check:"custom",...be(e)});return n._zod.check=t,n}function oI(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??Ru,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function Jt(t,e,n={path:[],schemaPath:[]}){var v,w;var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const d=(w=(v=t._zod).toJSONSchema)==null?void 0:w.call(v);if(d)l.schema=d;else{const b={...n,schemaPath:[...n.schemaPath,t],path:n.path},E=t._zod.parent;if(E)l.ref=E,Jt(E,e,b),e.seen.get(E).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,b);else{const O=l.schema,S=e.processors[s.type];if(!S)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);S(t,e,O,b)}}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&On(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function aI(t,e){var a,l,d;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=f=>{var E;const p=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const O=(E=t.external.registry.get(f[0]))==null?void 0:E.id,S=t.external.uri??(B=>B);if(O)return{ref:S(O)};const P=f[1].defId??f[1].schema.id??`schema${t.counter++}`;return f[1].defId=P,{defId:P,ref:`${S("__shared")}#/${p}/${P}`}}if(f[1]===n)return{ref:"#"};const w=`#/${p}/`,b=f[1].schema.id??`__schema${t.counter++}`;return{defId:b,ref:w+b}},s=f=>{if(f[1].schema.$ref)return;const p=f[1],{ref:v,defId:w}=r(f);p.def={...p.schema},w&&(p.defId=w);const b=p.schema;for(const E in b)delete b[E];b.$ref=v};if(t.cycles==="throw")for(const f of t.seen.entries()){const p=f[1];if(p.cycle)throw new Error(`Cycle detected: #/${(a=p.cycle)==null?void 0:a.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const f of t.seen.entries()){const p=f[1];if(e===f[0]){s(f);continue}if(t.external){const w=(l=t.external.registry.get(f[0]))==null?void 0:l.id;if(e!==f[0]&&w){s(f);continue}}if((d=t.metadataRegistry.get(f[0]))==null?void 0:d.id){s(f);continue}if(p.cycle){s(f);continue}if(p.count>1&&t.reused==="ref"){s(f);continue}}}function lI(t,e){var l,d,f;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=p=>{const v=t.seen.get(p),w=v.def??v.schema,b={...w};if(v.ref===null)return;const E=v.ref;if(v.ref=null,E){r(E);const O=t.seen.get(E).schema;O.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(w.allOf=w.allOf??[],w.allOf.push(O)):(Object.assign(w,O),Object.assign(w,b))}v.isParent||t.override({zodSchema:p,jsonSchema:w,path:v.path??[]})};for(const p of[...t.seen.entries()].reverse())r(p[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,(l=t.external)!=null&&l.uri){const p=(d=t.external.registry.get(e))==null?void 0:d.id;if(!p)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(p)}Object.assign(s,n.def??n.schema);const a=((f=t.external)==null?void 0:f.defs)??{};for(const p of t.seen.entries()){const v=p[1];v.def&&v.defId&&(a[v.defId]=v.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const p=JSON.parse(JSON.stringify(s));return Object.defineProperty(p,"~standard",{value:{...e["~standard"],jsonSchema:{input:Wh(e,"input"),output:Wh(e,"output")}},enumerable:!1,writable:!1}),p}catch{throw new Error("Error converting schema to JSON.")}}function On(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return On(r.element,n);if(r.type==="set")return On(r.valueType,n);if(r.type==="lazy")return On(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return On(r.innerType,n);if(r.type==="intersection")return On(r.left,n)||On(r.right,n);if(r.type==="record"||r.type==="map")return On(r.keyType,n)||On(r.valueType,n);if(r.type==="pipe")return On(r.in,n)||On(r.out,n);if(r.type==="object"){for(const s in r.shape)if(On(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(On(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(On(s,n))return!0;return!!(r.rest&&On(r.rest,n))}return!1}const PM=(t,e={})=>n=>{const r=oI({...n,processors:e});return Jt(t,r),aI(r,t),lI(r,t)},Wh=(t,e)=>n=>{const{libraryOptions:r,target:s}=n??{},a=oI({...r??{},target:s,io:e,processors:{}});return Jt(t,a),aI(a,t),lI(a,t)},DM={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},jM=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:d,patterns:f,contentEncoding:p}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),d&&(s.format=DM[d]??d,s.format===""&&delete s.format),p&&(s.contentEncoding=p),f&&f.size>0){const v=[...f];v.length===1?s.pattern=v[0].source:v.length>1&&(s.allOf=[...v.map(w=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:w.source}))])}},OM=(t,e,n,r)=>{const s=n,{minimum:a,maximum:l,format:d,multipleOf:f,exclusiveMaximum:p,exclusiveMinimum:v}=t._zod.bag;typeof d=="string"&&d.includes("int")?s.type="integer":s.type="number",typeof v=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=v,s.exclusiveMinimum=!0):s.exclusiveMinimum=v),typeof a=="number"&&(s.minimum=a,typeof v=="number"&&e.target!=="draft-04"&&(v>=a?delete s.minimum:delete s.exclusiveMinimum)),typeof p=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=p,s.exclusiveMaximum=!0):s.exclusiveMaximum=p),typeof l=="number"&&(s.maximum=l,typeof p=="number"&&e.target!=="draft-04"&&(p<=l?delete s.maximum:delete s.exclusiveMaximum)),typeof f=="number"&&(s.multipleOf=f)},MM=(t,e,n,r)=>{n.type="boolean"},LM=(t,e,n,r)=>{n.not={}},VM=(t,e,n,r)=>{},FM=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},zM=(t,e,n,r)=>{const s=t._zod.def,a=$E(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},UM=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},$M=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},BM=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:d}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof d=="number"&&(s.maxItems=d),s.type="array",s.items=Jt(a.element,e,{...r,path:[...r.path,"items"]})},WM=(t,e,n,r)=>{var p;const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const v in l)s.properties[v]=Jt(l[v],e,{...r,path:[...r.path,"properties",v]});const d=new Set(Object.keys(l)),f=new Set([...d].filter(v=>{const w=a.shape[v]._zod;return e.io==="input"?w.optin===void 0:w.optout===void 0}));f.size>0&&(s.required=Array.from(f)),((p=a.catchall)==null?void 0:p._zod.def.type)==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=Jt(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},qM=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((d,f)=>Jt(d,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},HM=(t,e,n,r)=>{const s=t._zod.def,a=Jt(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=Jt(s.right,e,{...r,path:[...r.path,"allOf",1]}),d=p=>"allOf"in p&&Object.keys(p).length===1,f=[...d(a)?a.allOf:[a],...d(l)?l.allOf:[l]];n.allOf=f},KM=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",(e.target==="draft-07"||e.target==="draft-2020-12")&&(s.propertyNames=Jt(a.keyType,e,{...r,path:[...r.path,"propertyNames"]})),s.additionalProperties=Jt(a.valueType,e,{...r,path:[...r.path,"additionalProperties"]})},GM=(t,e,n,r)=>{const s=t._zod.def,a=Jt(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},QM=(t,e,n,r)=>{const s=t._zod.def;Jt(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},ZM=(t,e,n,r)=>{const s=t._zod.def;Jt(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},JM=(t,e,n,r)=>{const s=t._zod.def;Jt(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},YM=(t,e,n,r)=>{const s=t._zod.def;Jt(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},XM=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;Jt(a,e,r);const l=e.seen.get(t);l.ref=a},eL=(t,e,n,r)=>{const s=t._zod.def;Jt(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},tL=(t,e,n,r)=>{const s=t._zod.def;Jt(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},nL=ee("ZodISODateTime",(t,e)=>{t4.init(t,e),St.init(t,e)});function rL(t){return aM(nL,t)}const sL=ee("ZodISODate",(t,e)=>{n4.init(t,e),St.init(t,e)});function iL(t){return lM(sL,t)}const oL=ee("ZodISOTime",(t,e)=>{r4.init(t,e),St.init(t,e)});function aL(t){return uM(oL,t)}const lL=ee("ZodISODuration",(t,e)=>{s4.init(t,e),St.init(t,e)});function uL(t){return cM(lL,t)}const cL=(t,e)=>{HE.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>Kj(t,n)},flatten:{value:n=>Hj(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,gg,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,gg,2)}},isEmpty:{get(){return t.issues.length===0}}})},Ar=ee("ZodError",cL,{Parent:Error}),dL=jy(Ar),hL=Oy(Ar),fL=Tf(Ar),pL=Sf(Ar),mL=Zj(Ar),gL=Jj(Ar),yL=Yj(Ar),vL=Xj(Ar),_L=eO(Ar),wL=tO(Ar),xL=nO(Ar),bL=rO(Ar),Pt=ee("ZodType",(t,e)=>(Tt.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Wh(t,"input"),output:Wh(t,"output")}}),t.toJSONSchema=PM(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(oa(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>io(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>dL(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>fL(t,n,r),t.parseAsync=async(n,r)=>hL(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>pL(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>mL(t,n,r),t.decode=(n,r)=>gL(t,n,r),t.encodeAsync=async(n,r)=>yL(t,n,r),t.decodeAsync=async(n,r)=>vL(t,n,r),t.safeEncode=(n,r)=>_L(t,n,r),t.safeDecode=(n,r)=>wL(t,n,r),t.safeEncodeAsync=async(n,r)=>xL(t,n,r),t.safeDecodeAsync=async(n,r)=>bL(t,n,r),t.refine=(n,r)=>t.check(mV(n,r)),t.superRefine=n=>t.check(gV(n)),t.overwrite=n=>t.check(Fl(n)),t.optional=()=>vx(t),t.nullable=()=>_x(t),t.nullish=()=>vx(_x(t)),t.nonoptional=n=>uV(t,n),t.array=()=>Ly(t),t.or=n=>dI([t,n]),t.and=n=>XL(t,n),t.transform=n=>wx(t,rV(n)),t.default=n=>oV(t,n),t.prefault=n=>lV(t,n),t.catch=n=>dV(t,n),t.pipe=n=>wx(t,n),t.readonly=()=>pV(t),t.describe=n=>{const r=t.clone();return Ru.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=Ru.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Ru.get(t);const r=t.clone();return Ru.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),uI=ee("_ZodString",(t,e)=>{My.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>jM(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(yM(...r)),t.includes=(...r)=>t.check(wM(...r)),t.startsWith=(...r)=>t.check(xM(...r)),t.endsWith=(...r)=>t.check(bM(...r)),t.min=(...r)=>t.check(Bh(...r)),t.max=(...r)=>t.check(sI(...r)),t.length=(...r)=>t.check(iI(...r)),t.nonempty=(...r)=>t.check(Bh(1,...r)),t.lowercase=r=>t.check(vM(r)),t.uppercase=r=>t.check(_M(r)),t.trim=()=>t.check(EM()),t.normalize=(...r)=>t.check(kM(...r)),t.toLowerCase=()=>t.check(IM()),t.toUpperCase=()=>t.check(TM()),t.slugify=()=>t.check(SM())}),kL=ee("ZodString",(t,e)=>{My.init(t,e),uI.init(t,e),t.email=n=>t.check(z4(EL,n)),t.url=n=>t.check(q4(IL,n)),t.jwt=n=>t.check(oM(zL,n)),t.emoji=n=>t.check(H4(TL,n)),t.guid=n=>t.check(dx(mx,n)),t.uuid=n=>t.check(U4(Jd,n)),t.uuidv4=n=>t.check($4(Jd,n)),t.uuidv6=n=>t.check(B4(Jd,n)),t.uuidv7=n=>t.check(W4(Jd,n)),t.nanoid=n=>t.check(K4(SL,n)),t.guid=n=>t.check(dx(mx,n)),t.cuid=n=>t.check(G4(CL,n)),t.cuid2=n=>t.check(Q4(AL,n)),t.ulid=n=>t.check(Z4(RL,n)),t.base64=n=>t.check(rM(LL,n)),t.base64url=n=>t.check(sM(VL,n)),t.xid=n=>t.check(J4(NL,n)),t.ksuid=n=>t.check(Y4(PL,n)),t.ipv4=n=>t.check(X4(DL,n)),t.ipv6=n=>t.check(eM(jL,n)),t.cidrv4=n=>t.check(tM(OL,n)),t.cidrv6=n=>t.check(nM(ML,n)),t.e164=n=>t.check(iM(FL,n)),t.datetime=n=>t.check(rL(n)),t.date=n=>t.check(iL(n)),t.time=n=>t.check(aL(n)),t.duration=n=>t.check(uL(n))});function tt(t){return F4(kL,t)}const St=ee("ZodStringFormat",(t,e)=>{xt.init(t,e),uI.init(t,e)}),EL=ee("ZodEmail",(t,e)=>{HO.init(t,e),St.init(t,e)}),mx=ee("ZodGUID",(t,e)=>{WO.init(t,e),St.init(t,e)}),Jd=ee("ZodUUID",(t,e)=>{qO.init(t,e),St.init(t,e)}),IL=ee("ZodURL",(t,e)=>{KO.init(t,e),St.init(t,e)}),TL=ee("ZodEmoji",(t,e)=>{GO.init(t,e),St.init(t,e)}),SL=ee("ZodNanoID",(t,e)=>{QO.init(t,e),St.init(t,e)}),CL=ee("ZodCUID",(t,e)=>{ZO.init(t,e),St.init(t,e)}),AL=ee("ZodCUID2",(t,e)=>{JO.init(t,e),St.init(t,e)}),RL=ee("ZodULID",(t,e)=>{YO.init(t,e),St.init(t,e)}),NL=ee("ZodXID",(t,e)=>{XO.init(t,e),St.init(t,e)}),PL=ee("ZodKSUID",(t,e)=>{e4.init(t,e),St.init(t,e)}),DL=ee("ZodIPv4",(t,e)=>{i4.init(t,e),St.init(t,e)}),jL=ee("ZodIPv6",(t,e)=>{o4.init(t,e),St.init(t,e)}),OL=ee("ZodCIDRv4",(t,e)=>{a4.init(t,e),St.init(t,e)}),ML=ee("ZodCIDRv6",(t,e)=>{l4.init(t,e),St.init(t,e)}),LL=ee("ZodBase64",(t,e)=>{u4.init(t,e),St.init(t,e)}),VL=ee("ZodBase64URL",(t,e)=>{d4.init(t,e),St.init(t,e)}),FL=ee("ZodE164",(t,e)=>{h4.init(t,e),St.init(t,e)}),zL=ee("ZodJWT",(t,e)=>{p4.init(t,e),St.init(t,e)}),cI=ee("ZodNumber",(t,e)=>{tI.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>OM(t,r,s),t.gt=(r,s)=>t.check(fx(r,s)),t.gte=(r,s)=>t.check(yh(r,s)),t.min=(r,s)=>t.check(yh(r,s)),t.lt=(r,s)=>t.check(hx(r,s)),t.lte=(r,s)=>t.check(gh(r,s)),t.max=(r,s)=>t.check(gh(r,s)),t.int=r=>t.check(gx(r)),t.safe=r=>t.check(gx(r)),t.positive=r=>t.check(fx(0,r)),t.nonnegative=r=>t.check(yh(0,r)),t.negative=r=>t.check(hx(0,r)),t.nonpositive=r=>t.check(gh(0,r)),t.multipleOf=(r,s)=>t.check(px(r,s)),t.step=(r,s)=>t.check(px(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function qh(t){return dM(cI,t)}const UL=ee("ZodNumberFormat",(t,e)=>{m4.init(t,e),cI.init(t,e)});function gx(t){return hM(UL,t)}const $L=ee("ZodBoolean",(t,e)=>{g4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>MM(t,n,r)});function BL(t){return fM($L,t)}const WL=ee("ZodUnknown",(t,e)=>{y4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>VM()});function yx(){return pM(WL)}const qL=ee("ZodNever",(t,e)=>{v4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>LM(t,n,r)});function HL(t){return mM(qL,t)}const KL=ee("ZodDate",(t,e)=>{_4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>FM(t,r),t.min=(r,s)=>t.check(yh(r,s)),t.max=(r,s)=>t.check(gh(r,s));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function GL(t){return gM(KL,t)}const QL=ee("ZodArray",(t,e)=>{w4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>BM(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Bh(n,r)),t.nonempty=n=>t.check(Bh(1,n)),t.max=(n,r)=>t.check(sI(n,r)),t.length=(n,r)=>t.check(iI(n,r)),t.unwrap=()=>t.element});function Ly(t,e){return CM(QL,t,e)}const ZL=ee("ZodObject",(t,e)=>{b4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>WM(t,n,r,s),dt(t,"shape",()=>e.shape),t.keyof=()=>Vy(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:yx()}),t.loose=()=>t.clone({...t._zod.def,catchall:yx()}),t.strict=()=>t.clone({...t._zod.def,catchall:HL()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>Uj(t,n),t.safeExtend=n=>$j(t,n),t.merge=n=>Bj(t,n),t.pick=n=>Fj(t,n),t.omit=n=>zj(t,n),t.partial=(...n)=>Wj(hI,t,n[0]),t.required=(...n)=>qj(fI,t,n[0])});function oo(t,e){const n={type:"object",shape:t??{},...be(e)};return new ZL(n)}const JL=ee("ZodUnion",(t,e)=>{k4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>qM(t,n,r,s),t.options=e.options});function dI(t,e){return new JL({type:"union",options:t,...be(e)})}const YL=ee("ZodIntersection",(t,e)=>{E4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>HM(t,n,r,s)});function XL(t,e){return new YL({type:"intersection",left:t,right:e})}const eV=ee("ZodRecord",(t,e)=>{I4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>KM(t,n,r,s),t.keyType=e.keyType,t.valueType=e.valueType});function tV(t,e,n){return new eV({type:"record",keyType:t,valueType:e,...be(n)})}const vg=ee("ZodEnum",(t,e)=>{T4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>zM(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new vg({...e,checks:[],...be(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new vg({...e,checks:[],...be(s),entries:a})}});function Vy(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new vg({type:"enum",entries:n,...be(e)})}const nV=ee("ZodTransform",(t,e)=>{S4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>$M(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new zE(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(rc(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(rc(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function rV(t){return new nV({type:"transform",transform:t})}const hI=ee("ZodOptional",(t,e)=>{C4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>tL(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function vx(t){return new hI({type:"optional",innerType:t})}const sV=ee("ZodNullable",(t,e)=>{A4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>GM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function _x(t){return new sV({type:"nullable",innerType:t})}const iV=ee("ZodDefault",(t,e)=>{R4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>ZM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function oV(t,e){return new iV({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():WE(e)}})}const aV=ee("ZodPrefault",(t,e)=>{N4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>JM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function lV(t,e){return new aV({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():WE(e)}})}const fI=ee("ZodNonOptional",(t,e)=>{P4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>QM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function uV(t,e){return new fI({type:"nonoptional",innerType:t,...be(e)})}const cV=ee("ZodCatch",(t,e)=>{D4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>YM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function dV(t,e){return new cV({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const hV=ee("ZodPipe",(t,e)=>{j4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>XM(t,n,r,s),t.in=e.in,t.out=e.out});function wx(t,e){return new hV({type:"pipe",in:t,out:e})}const fV=ee("ZodReadonly",(t,e)=>{O4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>eL(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function pV(t){return new fV({type:"readonly",innerType:t})}const pI=ee("ZodCustom",(t,e)=>{M4.init(t,e),Pt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>UM(t,n)});function mV(t,e={}){return AM(pI,t,e)}function gV(t){return RM(t)}function yV(t,e={error:`Input not instance of ${t.name}`}){const n=new pI({type:"custom",check:"custom",fn:r=>r instanceof t,abort:!0,...be(e)});return n._zod.bag.Class=t,n}const Gs=dI([GL(),yV(Et),tt()]).nullable().optional(),vV=oo({type:Vy(["none","daily","weekly","weekdays","monthly"]).nullable(),days:Ly(qh()).optional()}).nullable().optional();oo({id:tt().optional(),title:tt().min(1,"Title is required"),description:tt().nullable().optional(),status:Vy(["todo","completed","archived"]).default("todo"),dueDate:Gs,completedAt:Gs,createdAt:Gs,ownerId:tt(),projectId:tt().nullable().optional(),labelIds:Ly(tt()).optional(),timeBlockId:tt().nullable().optional(),duration:qh().optional(),isImportant:BL().default(!1),recurrence:vV,order:qh().optional()});oo({id:tt().optional(),name:tt().min(1,"Project name is required"),color:tt().optional(),ownerId:tt(),createdAt:Gs});oo({id:tt().optional(),name:tt().min(1,"Label name is required"),color:tt().optional(),ownerId:tt(),createdAt:Gs});const _V=oo({id:tt().optional(),name:tt().min(1,"Workspace name is required"),createdAt:Gs});oo({id:tt().optional(),name:tt().min(1),query:tt(),createdAt:Gs});oo({id:tt().optional(),name:tt(),start:tt(),end:tt(),color:tt().optional(),order:qh().optional()});oo({id:tt().optional(),mode:tt(),data:tV(tt(),tt()),createdAt:Gs,updatedAt:Gs,ownerId:tt(),workspaceId:tt()});const wV=Pj.WORKSPACE_CHANGED;let Yd=null;function xV(){return sa.getState().workspaces}function bV(t,e){if(!t)return e&&e([]),()=>{};Yd&&Yd();const n=gt.workspaces(t),r=so(Yn(mt,n),xf("createdAt","asc")),s=sa.getState();return Yd=ra(r,a=>{const l=a.docs.map(d=>({id:d.id,...d.data()}));if(s.setWorkspaces(l),l.length===0&&!a.metadata.hasPendingWrites)e&&e([]),kV().catch(d=>console.error("[Workspace] Default creation error:",d));else{const d=EV(l);e&&e(l),gI(d,l)}},a=>{console.error("[Workspace] Subscription error:",a),s.setWorkspaces([]),e&&e([])}),Yd}async function kV(){try{const t=wt.currentUser;if(!t)return;const e=gt.workspaces(t.uid);(await AD(so(Yn(mt,e),TD(1)))).empty&&await yI("")}catch(t){console.error("[Workspace] Failed to ensure default workspace:",t)}}function EV(t){if(t.length===0)return null;const e=sa.getState();let n=e.currentWorkspaceId;const r=n?t.some(s=>s.id===n):!1;return(!n||!r)&&(n=t[0].id,e.setCurrentWorkspaceId(n)),n}function Xr(){return sa.getState().currentWorkspaceId}function mI(t){if(!t)return;const e=sa.getState();e.currentWorkspaceId!==t&&(e.setCurrentWorkspaceId(t),gI(t,e.workspaces))}function gI(t,e){const n=new CustomEvent(wV,{detail:{workspaceId:t,workspaces:e}});document.dispatchEvent(n)}async function yI(t){try{_V.pick({name:!0}).parse({name:t});const e=wt.currentUser;if(!e)throw new Error("Authentication required");const n=gt.workspaces(e.uid);return{id:(await Ol(Yn(mt,n),{name:t,createdAt:Es()})).id,name:t}}catch(e){throw console.error("[Workspace] Add error:",e),e}}async function IV(t,e){try{const n=wt.currentUser;if(!n)throw new Error("Authentication required");const r=gt.workspaces(n.uid);await jl(Cr(mt,r,t),{name:e})}catch(n){console.error("[Workspace] Update error:",n)}}const TV=()=>{const t=sa(r=>r.workspaces),[e,n]=M.useState(!0);return M.useEffect(()=>{const r=Hb(wt,s=>{if(s){const a=bV(s.uid,()=>{n(!1)});return()=>a()}else n(!1)});return()=>r()},[]),{workspaces:t,loading:e}},SV=()=>{const{workspaces:t,loading:e}=TV(),{openModal:n}=Xn(),[r,s]=M.useState(!1),a=M.useRef(null),l=Xr(),d=t.find(f=>f.id===l);return M.useEffect(()=>{const f=p=>{a.current&&!a.current.contains(p.target)&&s(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),e?g.jsx("div",{className:"h-8 w-32 bg-gray-100 dark:bg-gray-800 animate-pulse rounded"}):g.jsxs("div",{className:"relative",ref:a,children:[g.jsxs("button",{onClick:()=>s(!r),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md px-2 py-1 transition-colors group",children:[g.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 max-w-[140px] truncate",children:d?d.name:"..."}),g.jsx("svg",{className:Ye("w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-transform",r?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),r&&g.jsxs("div",{className:"absolute left-0 mt-2 w-60 origin-top-left rounded-lg shadow-2xl bg-white dark:bg-gray-800 ring-1 ring-black/5 z-50 border border-gray-100 dark:border-gray-700 overflow-hidden animate-fade-in",children:[g.jsx("div",{className:"py-1 max-h-[300px] overflow-y-auto custom-scrollbar",children:t.map(f=>{const p=f.id===l;return g.jsxs("button",{onClick:()=>{f.id&&mI(f.id),s(!1)},className:Ye("w-full text-left px-4 py-2 text-sm flex items-center justify-between transition-colors",p?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[g.jsx("span",{className:"truncate",children:f.name}),p&&g.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]},f.id)})}),g.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),g.jsx("div",{className:"p-1",children:g.jsxs("button",{onClick:()=>{s(!1),n("workspace-edit",null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700/50 transition-colors rounded-md",children:[g.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),""]})})]})]})},CV=({sidebarContent:t,title:e,children:n})=>{const{toggleSidebar:r,isSidebarOpen:s}=Ay(),{openModal:a}=Xn();return g.jsxs("div",{className:"h-full flex overflow-hidden bg-premium-gradient text-gray-800 dark:text-white antialiased",children:[g.jsx(Rj,{children:t}),g.jsxs("main",{className:"flex-1 flex flex-col relative h-full overflow-hidden",id:"main-content",children:[g.jsxs("header",{className:"h-14 border-b border-gray-200 dark:border-gray-800 flex items-center px-4 justify-between bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-10 sticky top-0",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[!s&&g.jsx("button",{onClick:r,className:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),g.jsx(SV,{}),g.jsx("h1",{className:"font-bold text-lg border-l border-gray-300 dark:border-gray-700 pl-3 ml-1",children:e})]}),g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("button",{onClick:()=>a("settings"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Settings",children:g.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]}),g.jsx("div",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar",children:g.jsx("div",{className:"max-w-4xl mx-auto h-full",children:n})})]})]})};function AV(t,e){return t===e?!0:!t||!e||t.length!==e.length?!1:JSON.stringify(t)===JSON.stringify(e)}function RV(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++){const r=t[n],s=e[n];if(r.id!==s.id||r.status!==s.status||r.title!==s.title||r.description!==s.description||r.projectId!==s.projectId||r.timeBlockId!==s.timeBlockId||r.duration!==s.duration)return!1}return!0}function NV(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].id!==e[n].id||t[n].name!==e[n].name||t[n].color!==e[n].color)return!1;return!0}async function ao(t,e=3,n=1e3){let r;for(let s=0;s<=e;s++)try{return await t()}catch(a){if(r=a,s===e)break;const l=(a==null?void 0:a.code)||"";if(l.includes("permission-denied")||l.includes("invalid-argument"))throw a;const d=n*Math.pow(2,s);console.warn(`[Retry] Attempt ${s+1} failed. Retrying in ${d}ms...`,a),await new Promise(f=>setTimeout(f,d))}throw r}const Am=new Map;function PV(t,e,n){const r=gt.projects(t,e),s=so(Yn(mt,r),xf("createdAt","asc"));let a=!0;return ra(s,l=>{const d=l.docs.map(p=>({id:p.id,...p.data()})),f=Am.get(e);if(f&&NV(f,d)){a&&n(f),a=!1;return}Am.set(e,d),a=!1,n(d)},l=>{console.error("Error subscribing to projects:",l),Am.set(e,[]),n([])})}async function DV(t,e,n){return ao(async()=>{const r=gt.projects(t,e);await Ol(Yn(mt,r),{name:n,ownerId:t,createdAt:Es()})})}async function jV(t,e,n,r){return ao(async()=>{const s=gt.projects(t,e),a=Cr(mt,s,n);await jl(a,r)})}async function OV(t,e,n){return ao(async()=>{const r=gt.projects(t,e);await bf(Cr(mt,r,n))})}function vI(){var n;const t=(n=wt.currentUser)==null?void 0:n.uid,e=Xr();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}const MV=(t,e)=>{const n=typeof t=="function"?t:e,r=typeof t=="string"?t:Xr(),s=wt.currentUser;return s&&r&&typeof n=="function"?PV(s.uid,r,n):(typeof n=="function"&&n([]),()=>{})},LV=async(t,e=null)=>{const n=wt.currentUser;if(!n)throw new Error("Authentication required.");const r=e||Xr();if(!r)throw new Error("Workspace selection required.");return DV(n.uid,r,t)},_I=async(t,e)=>{const{userId:n,workspaceId:r}=vI();return jV(n,r,t,e)},VV=async t=>{const{userId:e,workspaceId:n}=vI();return OV(e,n,t)},Fy=()=>{var a;const t=sa(l=>l.currentWorkspaceId),[e,n]=M.useState(((a=wt.currentUser)==null?void 0:a.uid)||null),[r,s]=M.useState(!0);return M.useEffect(()=>{const l=wt.onAuthStateChanged(d=>{n(d?d.uid:null),s(!1)});return()=>{l()}},[]),{workspaceId:t,userId:e,loading:r}},Af=()=>{const{workspaceId:t,loading:e}=Fy(),[n,r]=M.useState([]),[s,a]=M.useState(!0);return M.useEffect(()=>{if(!t){r([]),e||a(!1);return}a(!0);const l=MV(t,d=>{r(d),a(!1)});return()=>l()},[t,e]),{projects:n,loading:s||e}};let Xa=[];const FV=[{id:"tb_morning",name:"06:00 - 09:00",start:"06:00",end:"09:00",color:"#EF4444",order:0},{id:"tb_afternoon",name:"13:00 - 17:00",start:"13:00",end:"17:00",color:"#3B82F6",order:1},{id:"tb_night",name:"20:00 - 22:00",start:"20:00",end:"22:00",color:"#8B5CF6",order:2}];function zV(t,e){var a;const n=(a=wt.currentUser)==null?void 0:a.uid;if(!n)return Xa=[...FV],typeof e=="function"&&e(Xa),()=>{};const r=gt.timeblocks(n),s=so(Yn(mt,r),xf("order","asc"));return ra(s,l=>{Xa=l.docs.map(d=>({id:d.id,...d.data()})),typeof e=="function"&&e(Xa)},l=>{console.error("[TimeBlocks] Subscription error:",l)})}function UV(){return[...Xa]}async function $V(t){var n;const e=(n=wt.currentUser)==null?void 0:n.uid;if(!e){console.error("Authentication required for TimeBlock operation.");return}try{const r=gt.timeblocks(e),s=t.id||crypto.randomUUID(),a=t.order!==void 0?t.order:Math.max(...Xa.map(d=>d.order||0),-1)+1,l={name:t.name,start:t.start,end:t.end,color:t.color,order:a,updatedAt:Es()};return await RD(Cr(mt,r,s),l,{merge:!0}),!0}catch(r){console.error("[TimeBlocks] Save error:",r)}}async function BV(t){var n;const e=(n=wt.currentUser)==null?void 0:n.uid;if(e)try{const r=gt.timeblocks(e);return await bf(Cr(mt,r,t)),!0}catch(r){console.error("[TimeBlocks] Delete error:",r)}}const kc=()=>{const[t,e]=M.useState(()=>UV()),[n,r]=M.useState(!0),s=Xr();return M.useEffect(()=>{if(!s){r(!1);return}const a=zV(s,l=>{e(l),r(!1)});return()=>a()},[s]),{timeBlocks:t,loading:n}},Rm=t=>t instanceof Et?t.toDate():t instanceof Date?t:void 0,wI=t=>t instanceof Date?Et.fromDate(t):t;function WV(t,e){if(!e||typeof e!="object")return console.warn(`[deserializeTask] Invalid data for task ${t}:`,e),{id:t,title:"Invalid Task",status:"todo",ownerId:""};const n=e.recurrence||null;return{id:t,title:String(e.title||"Untitled"),description:e.description?String(e.description):null,status:e.status==="completed"||e.status==="todo"||e.status==="archived"?e.status:"todo",dueDate:Rm(e.dueDate)||void 0,createdAt:Rm(e.createdAt)||void 0,completedAt:Rm(e.completedAt)||void 0,ownerId:String(e.ownerId||""),projectId:e.projectId?String(e.projectId):null,labelIds:Array.isArray(e.labelIds)?e.labelIds.map(String):[],timeBlockId:e.timeBlockId?String(e.timeBlockId):null,duration:typeof e.duration=="number"?e.duration:void 0,isImportant:!!e.isImportant,recurrence:n}}const xs=new Map,vh=new Map,Xd=new Map;function Rf(t){const e=xs.get(t)||[],n=vh.get(t);n&&n.forEach(r=>r(e))}function qV(t,e,n){if(!t||!e)return n([]),()=>{};vh.has(e)||vh.set(e,new Set);const r=vh.get(e);r.add(n);const s=xs.get(e);if(s&&n(s),!Xd.has(e)){const a=gt.tasks(t,e),l=so(Yn(mt,a)),d=ra(l,f=>{const p=f.docs.map(w=>WV(w.id,w.data())),v=xs.get(e);v&&RV(v,p)||(xs.set(e,p),Rf(e))},f=>{console.error("[Tasks] Subscription error:",f)});Xd.set(e,d)}return()=>{if(r.delete(n),r.size===0){const a=Xd.get(e);a&&(a(),Xd.delete(e))}}}async function HV(t,e,n){return ao(async()=>{const r=gt.tasks(t,e),s={...n};return s.dueDate&&(s.dueDate=wI(s.dueDate)),delete s.id,await Ol(Yn(mt,r),{...s,ownerId:t,status:"todo",createdAt:Es()})})}async function KV(t,e,n,r){const s=xs.get(e);if(s){const a=s.map(l=>l.id===n?{...l,status:r,completedAt:r==="completed"?new Date:void 0}:l);xs.set(e,a),Rf(e)}return ao(async()=>{const a=gt.tasks(t,e),l={status:r};r==="completed"?l.completedAt=Es():l.completedAt=null,await jl(Cr(mt,a,n),l)})}async function GV(t,e,n,r){const s=xs.get(e);if(s){const a=s.map(l=>l.id===n?{...l,...r}:l);xs.set(e,a),Rf(e)}return ao(async()=>{const a=gt.tasks(t,e),l={...r};l.dueDate!==void 0&&(l.dueDate=wI(l.dueDate)),await jl(Cr(mt,a,n),l)})}async function QV(t,e,n){const r=xs.get(e);if(r){const s=r.filter(a=>a.id!==n);xs.set(e,s),Rf(e)}return ao(async()=>{const s=gt.tasks(t,e);await bf(Cr(mt,s,n))})}let _h=[];function ZV(){return _h}function JV(t,e){var l;const n=typeof t=="function"?t:e,r=(l=wt.currentUser)==null?void 0:l.uid;if(!r||typeof n!="function")return _h=[],typeof n=="function"&&n([]),()=>{};const s=gt.filters(r),a=so(Yn(mt,s));return ra(a,d=>{const f=d.docs.map(p=>({id:p.id,...p.data()}));_h=f,n(f)},d=>{console.error("Error subscribing to filters:",d),_h=[],n([])})}async function YV(t){var a;const e=(a=wt.currentUser)==null?void 0:a.uid;if(!e)throw new Error("Authentication required");const n=gt.filters(e),{id:r,...s}=t;await Ol(Yn(mt,n),{...s,ownerId:e,createdAt:Es()})}async function XV(t,e){var l;const n=(l=wt.currentUser)==null?void 0:l.uid;if(!n)throw new Error("Authentication required");const r=gt.filters(n),{id:s,...a}=e;await jl(Cr(mt,r,t),{...a,updatedAt:Es()})}function e5(t,e){if(!t)return e([]),()=>{};const n=gt.labels(t),r=so(Yn(mt,n));return ra(r,s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));e(a)},s=>{console.error("[Labels] Subscription error:",s),e([])})}async function t5(t,e,n){const r=gt.labels(t);await Ol(Yn(mt,r),{name:e,color:n,ownerId:t,createdAt:Es()})}async function n5(t,e,n){const r=gt.labels(t),s=Cr(mt,r,e);return jl(s,n)}async function r5(t,e){const n=gt.labels(t);await bf(Cr(mt,n,e))}function zy(){var e;const t=(e=wt.currentUser)==null?void 0:e.uid;if(!t)throw console.error("Authentication required for label operation."),new Error("Authentication required.");return t}function s5(t,e){var s;const n=typeof t=="function"?t:e,r=(s=wt.currentUser)==null?void 0:s.uid;return r&&typeof n=="function"?e5(r,n):(typeof n=="function"&&n([]),()=>{})}async function i5(t,e){const n=zy();return t5(n,t,e)}async function o5(t,e){const n=zy();return n5(n,t,e)}async function a5(t){const e=zy();return r5(e,t)}const Nm=new Map;function l5(t,e,n){const r=gt.targets(t,e),s=so(Yn(mt,r),xf("createdAt","desc"));let a=!0;return ra(s,l=>{const d=l.docs.map(p=>({id:p.id,...p.data()})),f=Nm.get(e);if(f&&AV(f,d)){a&&n(f),a=!1;return}Nm.set(e,d),a=!1,n(d)},l=>{console.error("Error subscribing to targets:",l),Nm.set(e,[]),n([])})}async function u5(t,e,n){return ao(async()=>{const r=gt.targets(t,e),s={...n,ownerId:t,workspaceId:e,createdAt:Es(),updatedAt:Es()};delete s.id,await Ol(Yn(mt,r),s)})}function c5(){var n;const t=(n=wt.currentUser)==null?void 0:n.uid,e=Xr();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}const d5=(t,e)=>{const n=typeof t=="function"?t:e,r=typeof t=="string"?t:Xr(),s=wt.currentUser;return s&&r&&typeof n=="function"?l5(s.uid,r,n):(typeof n=="function"&&n([]),()=>{})},h5=async t=>{const{userId:e,workspaceId:n}=c5();return u5(e,n,t)};function Nf(){var n;const t=(n=wt.currentUser)==null?void 0:n.uid,e=Xr();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}async function xI(t){try{const{userId:e,workspaceId:n}=Nf();await HV(e,n,t)}catch(e){throw console.error("Failed to add task:",e),Xo.error(""),e}}async function Uy(t,e){try{const{userId:n,workspaceId:r}=Nf();await GV(n,r,t,e),Xo.success("")}catch(n){throw console.error("Failed to update task:",n),Xo.error(""),n}}async function f5(t){try{const{userId:e,workspaceId:n}=Nf();await QV(e,n,t),Xo.success("")}catch(e){throw console.error("Failed to delete task:",e),Xo.error(""),e}}async function p5(t,e){try{const{userId:n,workspaceId:r}=Nf(),s=e==="completed"?"todo":"completed";await KV(n,r,t,s),s==="completed"&&Xo.success(" ")}catch(n){throw console.error("Failed to toggle status:",n),Xo.error(""),n}}function m5(t,e){const n=wt.currentUser;return!n||!t?(typeof e=="function"&&e([]),()=>{}):qV(n.uid,t,e)}const lo=({isOpen:t,onClose:e,title:n,children:r,className:s,zIndex:a=100})=>(M.useEffect(()=>{const l=d=>{d.key==="Escape"&&e()};return t&&(window.addEventListener("keydown",l),document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",l),document.body.style.overflow=""}},[t,e]),t?Qa.createPortal(g.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4 sm:p-6 animate-fade-in",style:{zIndex:a},children:[g.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:e}),g.jsxs("div",{className:Ye("relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col transform transition-all animate-scale-in",s),children:[n&&g.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[g.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:n}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:r})]})]}),document.body):null),wh="none",g5=t=>{const e={project:[],timeblock:[],duration:[],date:[]};return t&&t.split(/\s+/).forEach(n=>{if(!n.includes(":"))return;const[r,s]=n.split(":");if(Object.prototype.hasOwnProperty.call(e,r)){const a=s.split(",").map(l=>r==="timeblock"&&(l==="null"||l==="none")?wh:l);e[r]=[...e[r],...a]}}),e},y5=[30,45,60,75,90],v5=[{id:"today",name:""},{id:"tomorrow",name:""},{id:"week",name:""},{id:"next-week",name:""}],_5=()=>{const{activeModal:t,modalData:e,closeModal:n}=Xn(),r=t==="filter-edit",s=e,a=!!(s!=null&&s.id),{projects:l}=Af(),{timeBlocks:d}=kc(),[f,p]=M.useState(""),[v,w]=M.useState({project:[],timeblock:[],duration:[],date:[]}),[b,E]=M.useState(!1),[O,S]=M.useState(null);M.useEffect(()=>{r&&(p((s==null?void 0:s.name)||""),w(g5((s==null?void 0:s.query)||"")),S(null),E(!1))},[r,s]);const P=(q,K)=>{w(Y=>{const J=Y[q],te=J.includes(K)?J.filter(C=>C!==K):[...J,K];return{...Y,[q]:te}})},B=M.useCallback(async()=>{const q=f.trim();if(!q){S("");return}const K={project:v.project,timeblock:v.timeblock.map(te=>te===wh?"null":te),duration:v.duration,date:v.date},Y=Object.entries(K).filter(([te,C])=>C.length>0).map(([te,C])=>`${te}:${C.join(",")}`);if(Y.length===0){S("1");return}const J=Y.join(" ");E(!0),S(null);try{const te={name:q,query:J,type:"custom"};a&&(s!=null&&s.id)?await XV(s.id,te):await YV(te),document.dispatchEvent(new CustomEvent("filters-updated")),n()}catch(te){S(": "+(te.message||"")),E(!1)}},[f,v,a,s,n]);return r?g.jsx(lo,{isOpen:r,onClose:n,title:a?"":"",className:"max-w-4xl",children:g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),g.jsx("input",{type:"text",value:f,onChange:q=>p(q.target.value),placeholder:": ",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg outline-none focus:ring-2 focus:ring-blue-500/20 dark:text-white",autoFocus:!0})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[g.jsx(eh,{title:"",items:l,selectedItems:v.project,onToggle:q=>P("project",q)}),g.jsx(eh,{title:"",items:[...d,{id:wh,name:""}],selectedItems:v.timeblock,onToggle:q=>P("timeblock",q),labelFn:q=>q.id===wh||!q.start?q.name:`${q.start}-${q.end}`}),g.jsx(eh,{title:"",items:y5.map(q=>({id:q.toString(),name:`${q} min`})),selectedItems:v.duration,onToggle:q=>P("duration",q)}),g.jsx(eh,{title:"",items:v5,selectedItems:v.date,onToggle:q=>P("date",q)})]}),O&&g.jsx("p",{className:"text-sm text-red-500 text-center",children:O}),g.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[g.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition",children:""}),g.jsx("button",{onClick:B,disabled:b,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50",children:b?"...":a?"":""})]})]})}):null},eh=({title:t,items:e,selectedItems:n,onToggle:r,labelFn:s=a=>a.name})=>g.jsxs("div",{className:"flex flex-col h-64 border border-gray-100 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-900",children:[g.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700 text-xs font-bold text-gray-500 uppercase tracking-wider",children:t}),g.jsx("div",{className:"p-2 overflow-y-auto space-y-1 custom-scrollbar",children:e.map(a=>{const l=a.id||a.toString(),d=n.includes(l);return g.jsxs("div",{className:"flex items-center px-2 py-1.5 rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",onClick:()=>r(l),children:[g.jsx("input",{type:"checkbox",checked:d,onChange:()=>{},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer"}),g.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300 truncate flex-1",children:s(a)})]},l)})})]}),w5=()=>{const{activeModal:t,modalData:e,closeModal:n}=Xn(),r=t==="label-edit",s=e,a=!!(s!=null&&s.id),[l,d]=M.useState(""),[f,p]=M.useState(!1),[v,w]=M.useState(null);M.useEffect(()=>{r&&(d((s==null?void 0:s.name)||""),w(null),p(!1))},[r,s]);const b=M.useCallback(async()=>{const S=l.trim();if(!S){w("");return}p(!0),w(null);try{if(a&&(s!=null&&s.id))await o5(s.id,{name:S});else{const P=`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`;await i5(S,P)}n()}catch(P){w(": "+(P.message||"")),p(!1)}},[l,a,s,n]),E=M.useCallback(async()=>{if(s!=null&&s.id&&confirm(`${s.name}`)){p(!0);try{await a5(s.id),n()}catch{w(""),p(!1)}}},[s,n]),O=S=>{S.key==="Enter"&&!S.nativeEvent.isComposing&&b()};return r?g.jsx(lo,{isOpen:r,onClose:n,className:"max-w-md",children:g.jsxs("div",{className:"flex flex-col gap-6",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0",style:{backgroundColor:(s==null?void 0:s.color)||"#3B82F6"}}),g.jsx("input",{type:"text",value:l,onChange:S=>d(S.target.value),onKeyDown:O,placeholder:a?"":"",className:"flex-1 text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-400",autoFocus:!0})]}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:a?"":""}),v&&g.jsx("p",{className:"text-sm text-red-500 text-center",children:v}),g.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[a?g.jsxs("button",{onClick:E,disabled:f,className:"text-gray-400 hover:text-red-500 text-sm font-medium flex items-center gap-1.5 px-3 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),""]}):g.jsx("span",{}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:n,disabled:f,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 transition disabled:opacity-50",children:""}),g.jsx("button",{onClick:b,disabled:f,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"...":a?"":""})]})]})]})}):null},x5=()=>{const{activeModal:t,modalData:e,closeModal:n}=Xn(),r=t==="project-edit",s=e,a=!!(s!=null&&s.id),[l,d]=M.useState(""),[f,p]=M.useState(!1),[v,w]=M.useState(null);M.useEffect(()=>{r&&(d((s==null?void 0:s.name)||""),w(null),p(!1))},[r,s]);const b=M.useCallback(async()=>{const S=l.trim();if(!S){w("");return}p(!0),w(null);try{if(a&&(s!=null&&s.id))await _I(s.id,{name:S});else{const P=Xr();if(!P)throw new Error("");await LV(S,P)}n()}catch(P){w(": "+(P.message||"")),p(!1)}},[l,a,s,n]),E=M.useCallback(async()=>{if(s!=null&&s.id&&confirm(`${s.name}`)){p(!0);try{await VV(s.id),n()}catch{w(""),p(!1)}}},[s,n]),O=S=>{S.key==="Enter"&&!S.nativeEvent.isComposing&&b()};return r?g.jsx(lo,{isOpen:r,onClose:n,className:"max-w-md",children:g.jsxs("div",{className:"flex flex-col gap-6",children:[g.jsx("div",{children:g.jsx("input",{type:"text",value:l,onChange:S=>d(S.target.value),onKeyDown:O,placeholder:a?"":"",className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-400",autoFocus:!0})}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:a?"":""}),v&&g.jsx("p",{className:"text-sm text-red-500 text-center",children:v}),g.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[a?g.jsxs("button",{onClick:E,disabled:f,className:"text-gray-400 hover:text-red-500 text-sm font-medium flex items-center gap-1.5 px-3 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),""]}):g.jsx("span",{}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:n,disabled:f,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 transition disabled:opacity-50",children:""}),g.jsx("button",{onClick:b,disabled:f,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"...":a?"":""})]})]})]})}):null},zl=Ml()(Ef(t=>({themeMode:"system",fontEn:"Inter",fontJp:"M PLUS 2",fontSize:"md",density:"normal",setThemeMode:e=>t({themeMode:e}),setFontEn:e=>t({fontEn:e}),setFontJp:e=>t({fontJp:e}),setFontSize:e=>t({fontSize:e}),setDensity:e=>t({density:e})}),{name:"app-settings",partialize:t=>({themeMode:t.themeMode,fontEn:t.fontEn,fontJp:t.fontJp,fontSize:t.fontSize,density:t.density})})),b5=()=>{const{activeModal:t,closeModal:e}=Xn(),{themeMode:n,setThemeMode:r,density:s,setDensity:a,fontSize:l,setFontSize:d,fontEn:f,setFontEn:p,fontJp:v,setFontJp:w}=zl(),[b,E]=M.useState("appearance"),O=t==="settings";return g.jsx(lo,{isOpen:O,onClose:e,title:"",className:"max-w-3xl h-[650px]",children:g.jsxs("div",{className:"flex h-full -m-6",children:[g.jsxs("div",{className:"w-56 bg-gray-50 dark:bg-gray-800/50 border-r border-gray-100 dark:border-gray-700/50 p-4 space-y-1",children:[g.jsx(Pm,{active:b==="general",onClick:()=>E("general"),label:"",icon:""}),g.jsx(Pm,{active:b==="appearance",onClick:()=>E("appearance"),label:"",icon:""}),g.jsx(Pm,{active:b==="account",onClick:()=>E("account"),label:"",icon:""})]}),g.jsxs("div",{className:"flex-1 p-8 overflow-y-auto custom-scrollbar",children:[b==="appearance"&&g.jsxs("div",{className:"space-y-8",children:[g.jsxs("section",{children:[g.jsxs("h4",{className:"text-base font-bold mb-4 text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[g.jsx("span",{children:""})," "]}),g.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","system"].map(S=>g.jsx("button",{onClick:()=>r(S),className:Ye("p-3 border rounded-xl text-sm font-medium transition-all",n===S?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"),children:g.jsx("span",{className:"capitalize",children:S})},S))})]}),g.jsx("hr",{className:"border-gray-100 dark:border-gray-700/50"}),g.jsxs("section",{children:[g.jsxs("h4",{className:"text-base font-bold mb-4 text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[g.jsx("span",{children:""})," "]}),g.jsx("div",{className:"space-y-3",children:["compact","normal","comfortable","spacious"].map(S=>g.jsxs("label",{className:Ye("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors",s===S?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-transparent hover:bg-gray-50 dark:hover:bg-gray-800"),children:[g.jsx("div",{className:Ye("w-4 h-4 rounded-full border flex items-center justify-center",s===S?"border-blue-500 bg-blue-500":"border-gray-300"),children:s===S&&g.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),g.jsx("input",{type:"radio",name:"density",checked:s===S,onChange:()=>a(S),className:"hidden"}),g.jsx("span",{className:"capitalize text-sm font-medium text-gray-700 dark:text-gray-300",children:S})]},S))})]}),g.jsx("hr",{className:"border-gray-100 dark:border-gray-700/50"}),g.jsxs("section",{children:[g.jsxs("h4",{className:"text-base font-bold mb-4 text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[g.jsx("span",{children:"Aa"})," "]}),g.jsx("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:["sm","base","md","lg","xl"].map(S=>g.jsx("button",{onClick:()=>d(S),className:Ye("flex-1 py-1.5 px-3 rounded text-sm font-medium transition-all",l===S?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:S},S))})]}),g.jsxs("section",{className:"space-y-4",children:[g.jsxs("h4",{className:"text-base font-bold mb-4 text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[g.jsx("span",{children:"Tt"})," "]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:""}),g.jsx("input",{type:"text",value:f,onChange:S=>p(S.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-gray-50 dark:bg-gray-900",placeholder:": Inter, sans-serif"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:""}),g.jsx("input",{type:"text",value:v,onChange:S=>w(S.target.value),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-gray-50 dark:bg-gray-900",placeholder:": 'Not Sans JP', sans-serif"})]})]})]}),b==="general"&&g.jsxs("div",{className:"text-center py-12 text-gray-500",children:[g.jsx("p",{className:"text-lg mb-2",children:" "}),g.jsx("p",{className:"text-sm",children:""})]}),b==="account"&&g.jsxs("div",{className:"text-center py-12 text-gray-500",children:[g.jsx("p",{className:"text-lg mb-2",children:" "}),g.jsx("p",{className:"text-sm",children:""})]})]})]})})},Pm=({active:t,onClick:e,label:n,icon:r})=>g.jsxs("button",{onClick:e,className:Ye("w-full flex items-center gap-3 px-3 py-2.5 text-sm rounded-lg transition-all text-left",t?"bg-white dark:bg-gray-700 shadow-sm text-blue-600 dark:text-blue-400 font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-200"),children:[g.jsx("span",{className:"text-base",children:r}),g.jsx("span",{children:n})]}),$y=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!0),s=Xr();return M.useEffect(()=>{const a=s5(s||"",l=>{e(l),r(!1)});return()=>a()},[s]),{labels:t,loading:n}};function dr(t){if(!t)return null;if(t instanceof Date)return t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();const e=new Date(t);return isNaN(e.getTime())?null:e}const xx=(t,e)=>{const n=dr(t),r=dr(e);return!n||!r?!1:n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()&&n.getDate()===r.getDate()};function Pf(t=new Date){const e=dr(t)||new Date,n=new Date(e);return n.setHours(0,0,0,0),n}function k5(t=new Date){const e=dr(t)||new Date,n=e.getDay(),r=e.getDate()-n+(n===0?-6:1),s=new Date(e);return s.setDate(r),Pf(s)}function E5(t){const e=dr(t);if(!e)return"";const n=new Date,r=Pf(n),s=Math.round((e.getTime()-r.getTime())/(1e3*60*60*24));if(s===0)return"";if(s===1)return"";if(s===-1)return"";const a=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),d=String(e.getDate()).padStart(2,"0");return a!==n.getFullYear()?`${a}/${l}/${d}`:`${l}/${d}`}const I5=t=>{const e=dr(t);if(!e)return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${s}`},T5=t=>{if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e};function S5(t){const e=dr(t);if(!e)return"text-gray-500";const n=Pf(new Date),r=Math.round((e.getTime()-n.getTime())/(1e3*60*60*24));return r<0?"text-red-500 font-bold":r===0?"text-green-600 dark:text-green-400 font-medium":r===1?"text-orange-500 dark:text-orange-400 font-medium":"text-gray-500 dark:text-gray-400"}function C5(t){const e=Pf(new Date);if(!(t!=null&&t.type)||t.type==="daily"||t.type==="monthly")return e;if(t.type==="weekly"&&t.days&&t.days.length>0){const n=e.getDay();for(let r=0;r<=6;r++)if(t.days.includes((n+r)%7))return e.setDate(e.getDate()+r),e}if(t.type==="weekdays"){for(;e.getDay()===0||e.getDay()===6;)e.setDate(e.getDate()+1);return e}return e}function A5(t){return t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e]||e)}function R5(t){if(!t)return"";const e=t.split(`
`);let n=[],r=null;return e.forEach(s=>{const a=s.trimStart(),l=a.startsWith("* ")||a.startsWith("- "),d=/^\d+\.\s/.test(a),f=l||d;if(f){const p=d?"ol":"ul";if(r!==p){r&&n.push(`</${r}>`);const v=d?"list-decimal":"list-disc";n.push(`<${p} class="${v} ml-5 space-y-1">`),r=p}}else r&&(n.push(`</${r}>`),r=null);if(f){let p="";l?p=a.substring(2):p=a.replace(/^\d+\.\s/,"");const v=bx(p);n.push(`<li>${v}</li>`)}else s.trim()?n.push(`<p class="mb-2">${bx(s)}</p>`):r&&(n.push(`</${r}>`),r=null)}),r&&n.push(`</${r}>`),n.join(`
`)}function bx(t){return A5(t).replace(/\[(.*?)\]\((.*?)\)/g,(n,r,s)=>`<a href="${s.replace(/"/g,"&quot;")}" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300 underline font-medium">${r}</a>`)}const N5=[15,30,45,60,75,90,120],P5=[{value:"none",label:""},{value:"daily",label:""},{value:"weekdays",label:""},{value:"weekly",label:""},{value:"monthly",label:""}],D5=["","","","","","",""],j5=({isOpen:t,data:e,zIndex:n})=>{const{activeModal:r,modalData:s,closeModal:a}=Xn(),l=t??r==="task-detail",d=e??s,f=!(d!=null&&d.id)||d.id==="temp-new-task",{projects:p}=Af();$y();const{timeBlocks:v}=kc(),[w,b]=M.useState(""),[E,O]=M.useState(""),[S,P]=M.useState(null),[B,q]=M.useState("todo"),[K,Y]=M.useState(!1),[J,te]=M.useState(null),[C,I]=M.useState({type:"none",days:[]}),[A,j]=M.useState(null),[D,V]=M.useState(null),[N,Ve]=M.useState(!1),[rt,Ge]=M.useState(!1);M.useEffect(()=>{var z;if(d){b(d.title||""),O(d.description||""),P(d.projectId||null),q(d.status||"todo"),Y(!!d.isImportant),j(d.timeBlockId||null),V(d.duration||null);const oe=dr(d.dueDate);te(oe);const de=d.recurrence||{type:"none",days:[]};I(de),de!=null&&de.type&&de.type!=="none"&&!oe&&te(C5(de));const ke=!!(oe||(de==null?void 0:de.type)!=="none"||d.timeBlockId||d.duration);Ge(ke),Ve(!!((z=d.description)!=null&&z.trim()))}},[d]);const Te=M.useCallback(async()=>{if(!w.trim()){alert("");return}if((C==null?void 0:C.type)==="weekly"&&(!C.days||C.days.length===0)){alert("");return}const z={title:w.trim(),description:E.trim()||null,projectId:S==="none"?null:S,status:B,isImportant:K,dueDate:J?Et.fromDate(J):null,recurrence:(C==null?void 0:C.type)==="none"?null:C,timeBlockId:A||null,duration:D||void 0};try{f?await xI({...z,title:z.title}):await Uy(d.id,z),a()}catch(oe){console.error("Failed to save task",oe),alert("")}},[w,E,S,B,J,C,A,D,f,d,a]),Z=M.useCallback(async()=>{if(!(!(d!=null&&d.id)||f)&&confirm(""))try{await f5(d.id),a()}catch(z){console.error("Failed to delete task",z),alert("")}},[d,f,a]),fe=z=>{I({type:z,days:z==="weekly"?(C==null?void 0:C.days)||[]:[]})},ce=z=>{const oe=(C==null?void 0:C.days)||[],de=oe.includes(z)?oe.filter(ke=>ke!==z):[...oe,z].sort((ke,Se)=>ke-Se);I({type:(C==null?void 0:C.type)||"weekly",days:de})},U=M.useMemo(()=>R5(E),[E]);return l?g.jsx(lo,{isOpen:l,onClose:a,zIndex:n,className:"max-w-4xl h-[85vh]",children:g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 shrink-0",children:[g.jsx("input",{type:"text",value:w,onChange:z=>b(z.target.value),placeholder:"",className:"flex-1 text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder:text-gray-400",autoFocus:!0,"aria-label":""}),g.jsx("button",{onClick:()=>Y(!K),className:Ye("p-2 rounded-full transition-colors",K?"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),title:K?"":"",children:g.jsx("svg",{className:"w-6 h-6",fill:K?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),g.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 h-full",children:[g.jsxs("div",{className:"md:col-span-8 flex flex-col h-full bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsxs("label",{className:"text-xs font-semibold text-gray-500 flex items-center gap-2 uppercase",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})," (Markdown)"]}),g.jsx("button",{type:"button",onClick:()=>Ve(!N),className:"text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 px-2 py-0.5 rounded transition-colors text-xs font-medium",children:N?"":""})]}),g.jsx("div",{className:"flex-1 relative min-h-[200px]",children:N?g.jsx("div",{onClick:()=>Ve(!1),className:"w-full h-full p-4 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm overflow-y-auto cursor-text prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:U||'<span class="text-gray-400">...</span>'}}):g.jsx("textarea",{value:E,onChange:z=>O(z.target.value),onBlur:()=>E.trim()&&Ve(!0),placeholder:"...",className:"w-full h-full p-3 bg-gray-50 dark:bg-gray-900/50 border-0 rounded-lg outline-none text-sm transition-all resize-none leading-relaxed focus:ring-1 focus:ring-blue-500/50 text-gray-800 dark:text-gray-200 font-mono",autoFocus:!E,"aria-label":""})})]}),g.jsxs("div",{className:"md:col-span-4 space-y-4",children:[g.jsxs("details",{open:rt,onToggle:z=>Ge(z.currentTarget.open),className:"group border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[g.jsxs("summary",{className:"flex items-center justify-between px-4 py-3 cursor-pointer list-none outline-none bg-gray-50 dark:bg-gray-700/30 rounded-t-lg group-[:not([open])]:rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700/50",children:[g.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),""]}),g.jsx("span",{className:"transform group-open:rotate-180 transition-transform text-gray-400",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),g.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"task-due-date",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),g.jsx("input",{type:"date",id:"task-due-date",value:I5(J),onChange:z=>te(T5(z.target.value)),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"task-recurrence",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),g.jsx("select",{id:"task-recurrence",value:(C==null?void 0:C.type)||"none",onChange:z=>fe(z.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:P5.map(z=>g.jsx("option",{value:z.value,children:z.label},z.value))})]}),(C==null?void 0:C.type)==="weekly"&&g.jsxs("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700",children:[g.jsx("span",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:""}),g.jsx("div",{className:"flex flex-wrap gap-2",children:D5.map((z,oe)=>{var de;return g.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[g.jsx("input",{type:"checkbox",checked:((de=C.days)==null?void 0:de.includes(oe))||!1,onChange:()=>ce(oe),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),g.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:z})]},oe)})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"task-timeblock",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),g.jsxs("select",{id:"task-timeblock",value:A||"",onChange:z=>j(z.target.value||null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[g.jsx("option",{value:"",children:""}),v.map(z=>g.jsxs("option",{value:z.id,children:[z.start," - ",z.end]},z.id))]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"task-duration",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),g.jsxs("select",{id:"task-duration",value:D||"",onChange:z=>V(z.target.value?parseInt(z.target.value,10):null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[g.jsx("option",{value:"",children:""}),N5.map(z=>g.jsxs("option",{value:z,children:[z," min"]},z))]})]})]})]}),g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[g.jsx("label",{htmlFor:"task-project",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),g.jsxs("select",{id:"task-project",value:S||"none",onChange:z=>P(z.target.value==="none"?null:z.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[g.jsx("option",{value:"none",children:""}),p.map(z=>g.jsx("option",{value:z.id,children:z.name},z.id))]})]}),g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[g.jsx("label",{htmlFor:"task-status",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),g.jsxs("select",{id:"task-status",value:B,onChange:z=>q(z.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[g.jsx("option",{value:"todo",children:"To Do"}),g.jsx("option",{value:"completed",children:""})]})]})]})]})}),g.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center shrink-0",children:[!f&&g.jsxs("button",{onClick:Z,className:"px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition flex items-center gap-1.5",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),""]}),g.jsxs("div",{className:`flex gap-2 ${f?"ml-auto":""}`,children:[g.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition",children:""}),g.jsx("button",{onClick:Te,className:"px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium shadow-md transition transform active:scale-95",children:f?"":""})]})]})]})}):null};function Df(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function O5(t,e){return t.reduce((n,r,s)=>{const a=e.get(r);return a&&(n[s]=a),n},Array(t.length))}function th(t){return t!==null&&t>=0}function M5(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function L5(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const bI=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const a=Df(e,r,n),l=e[s],d=a[s];return!d||!l?null:{x:d.left-l.left,y:d.top-l.top,scaleX:d.width/l.width,scaleY:d.height/l.height}},nh={scaleX:1,scaleY:1},kI=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:a,overIndex:l}=t;const d=(e=a[n])!=null?e:r;if(!d)return null;if(s===n){const p=a[l];return p?{x:0,y:n<l?p.top+p.height-(d.top+d.height):p.top-d.top,...nh}:null}const f=V5(a,s,n);return s>n&&s<=l?{x:0,y:-d.height-f,...nh}:s<n&&s>=l?{x:0,y:d.height+f,...nh}:{x:0,y:0,...nh}};function V5(t,e,n){const r=t[e],s=t[e-1],a=t[e+1];return r?n<e?s?r.top-(s.top+s.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const EI="Sortable",II=nt.createContext({activeIndex:-1,containerId:EI,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:bI,disabled:{draggable:!1,droppable:!1}});function TI(t){let{children:e,id:n,items:r,strategy:s=bI,disabled:a=!1}=t;const{active:l,dragOverlay:d,droppableRects:f,over:p,measureDroppableContainers:v}=M1(),w=uc(EI,n),b=d.rect!==null,E=M.useMemo(()=>r.map(te=>typeof te=="object"&&"id"in te?te.id:te),[r]),O=l!=null,S=l?E.indexOf(l.id):-1,P=p?E.indexOf(p.id):-1,B=M.useRef(E),q=!M5(E,B.current),K=P!==-1&&S===-1||q,Y=L5(a);bs(()=>{q&&O&&v(E)},[q,E,O,v]),M.useEffect(()=>{B.current=E},[E]);const J=M.useMemo(()=>({activeIndex:S,containerId:w,disabled:Y,disableTransforms:K,items:E,overIndex:P,useDragOverlay:b,sortedRects:O5(E,f),strategy:s}),[S,w,Y.draggable,Y.droppable,K,E,P,f,b,s]);return nt.createElement(II.Provider,{value:J},e)}const F5=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return Df(n,r,s).indexOf(e)},z5=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:a,newIndex:l,previousItems:d,previousContainerId:f,transition:p}=t;return!p||!r||d!==a&&s===l?!1:n?!0:l!==s&&e===f},U5={duration:200,easing:"ease"},SI="transform",$5=Bu.Transition.toString({property:SI,duration:0,easing:"linear"}),B5={roleDescription:"sortable"};function W5(t){let{disabled:e,index:n,node:r,rect:s}=t;const[a,l]=M.useState(null),d=M.useRef(n);return bs(()=>{if(!e&&n!==d.current&&r.current){const f=s.current;if(f){const p=Tl(r.current,{ignoreTransform:!0}),v={x:f.left-p.left,y:f.top-p.top,scaleX:f.width/p.width,scaleY:f.height/p.height};(v.x||v.y)&&l(v)}}n!==d.current&&(d.current=n)},[e,n,r,s]),M.useEffect(()=>{a&&l(null)},[a]),a}function q5(t){let{animateLayoutChanges:e=z5,attributes:n,disabled:r,data:s,getNewIndex:a=F5,id:l,strategy:d,resizeObserverConfig:f,transition:p=U5}=t;const{items:v,containerId:w,activeIndex:b,disabled:E,disableTransforms:O,sortedRects:S,overIndex:P,useDragOverlay:B,strategy:q}=M.useContext(II),K=H5(r,E),Y=v.indexOf(l),J=M.useMemo(()=>({sortable:{containerId:w,index:Y,items:v},...s}),[w,s,Y,v]),te=M.useMemo(()=>v.slice(v.indexOf(l)),[v,l]),{rect:C,node:I,isOver:A,setNodeRef:j}=Sl({id:l,data:J,disabled:K.droppable,resizeObserverConfig:{updateMeasurementsFor:te,...f}}),{active:D,activatorEvent:V,activeNodeRect:N,attributes:Ve,setNodeRef:rt,listeners:Ge,isDragging:Te,over:Z,setActivatorNodeRef:fe,transform:ce}=cb({id:l,data:J,attributes:{...B5,...n},disabled:K.draggable}),U=wS(j,rt),z=!!D,oe=z&&!O&&th(b)&&th(P),de=!B&&Te,ke=de&&oe?ce:null,Ee=oe?ke??(d??q)({rects:S,activeNodeRect:N,activeIndex:b,overIndex:P,index:Y}):null,Le=th(b)&&th(P)?a({id:l,items:v,activeIndex:b,overIndex:P}):Y,Fe=D==null?void 0:D.id,Ce=M.useRef({activeId:Fe,items:v,newIndex:Le,containerId:w}),Wt=v!==Ce.current.items,Ct=e({active:D,containerId:w,isDragging:Te,isSorting:z,id:l,index:Y,items:v,newIndex:Ce.current.newIndex,previousItems:Ce.current.items,previousContainerId:Ce.current.containerId,transition:p,wasDragging:Ce.current.activeId!=null}),An=W5({disabled:!Ct,index:Y,node:I,rect:C});return M.useEffect(()=>{z&&Ce.current.newIndex!==Le&&(Ce.current.newIndex=Le),w!==Ce.current.containerId&&(Ce.current.containerId=w),v!==Ce.current.items&&(Ce.current.items=v)},[z,Le,w,v]),M.useEffect(()=>{if(Fe===Ce.current.activeId)return;if(Fe!=null&&Ce.current.activeId==null){Ce.current.activeId=Fe;return}const tr=setTimeout(()=>{Ce.current.activeId=Fe},50);return()=>clearTimeout(tr)},[Fe]),{active:D,activeIndex:b,attributes:Ve,data:J,rect:C,index:Y,newIndex:Le,items:v,isOver:A,isSorting:z,isDragging:Te,listeners:Ge,node:I,overIndex:P,over:Z,setNodeRef:U,setActivatorNodeRef:fe,setDroppableNodeRef:j,setDraggableNodeRef:rt,transform:An??Ee,transition:ln()};function ln(){if(An||Wt&&Ce.current.newIndex===Y)return $5;if(!(de&&!Sg(V)||!p)&&(z||Ct))return Bu.Transition.toString({...p,property:SI})}}function H5(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Hh(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const K5=[He.Down,He.Right,He.Up,He.Left],G5=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:a,over:l,scrollableAncestors:d}}=e;if(K5.includes(t.code)){if(t.preventDefault(),!n||!r)return;const f=[];a.getEnabled().forEach(w=>{if(!w||w!=null&&w.disabled)return;const b=s.get(w.id);if(b)switch(t.code){case He.Down:r.top<b.top&&f.push(w);break;case He.Up:r.top>b.top&&f.push(w);break;case He.Left:r.left>b.left&&f.push(w);break;case He.Right:r.left<b.left&&f.push(w);break}});const p=OS({collisionRect:r,droppableRects:s,droppableContainers:f});let v=Qx(p,"id");if(v===(l==null?void 0:l.id)&&p.length>1&&(v=p[1].id),v!=null){const w=a.get(n.id),b=a.get(v),E=b?s.get(b.id):null,O=b==null?void 0:b.node.current;if(O&&E&&w&&b){const P=Jh(O).some((te,C)=>d[C]!==te),B=CI(w,b),q=Q5(w,b),K=P||!B?{x:0,y:0}:{x:q?r.width-E.width:0,y:q?r.height-E.height:0},Y={x:E.left,y:E.top};return K.x&&K.y?Y:$u(Y,K)}}}};function CI(t,e){return!Hh(t)||!Hh(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function Q5(t,e){return!Hh(t)||!Hh(e)||!CI(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const AI=({id:t,children:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:a,transition:l,isDragging:d}=q5({id:t}),f={transform:Bu.Transform.toString(a),transition:l,opacity:d?.5:1};return g.jsx("div",{ref:s,style:f,...n,...r,children:e})},kx=Array.from({length:24},(t,e)=>String(e).padStart(2,"0")),Ex=["00","15","30","45"],_g=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6"],Z5=()=>{const{activeModal:t,closeModal:e}=Xn(),n=t==="timeblock-edit",{timeBlocks:r}=kc(),[s,a]=M.useState([]),[l,d]=M.useState(!1),[f,p]=M.useState(null),v=Hx(Fm(Yh,{activationConstraint:{distance:5}}),Fm(Ag,{coordinateGetter:G5}));M.useEffect(()=>{n&&(a(r.sort((P,B)=>(P.order||0)-(B.order||0))),p(null),d(!1))},[n,r]);const w=()=>{if(s.length>=10)return;const P={id:`new-${Date.now()}`,start:"09:00",end:"10:00",color:_g[s.length%_g.length],order:s.length};a([...s,P])},b=async P=>{if(!P.startsWith("new-")){if(!confirm(""))return;try{await BV(P)}catch{p("");return}}a(s.filter(B=>B.id!==P))},E=(P,B)=>{a(s.map(q=>q.id===P?{...q,...B}:q))},O=P=>{const{active:B,over:q}=P;q&&B.id!==q.id&&a(K=>{const Y=K.findIndex(te=>te.id===B.id),J=K.findIndex(te=>te.id===q.id);return Df(K,Y,J)})},S=async()=>{d(!0),p(null);try{for(const B of s){if(!B.start||!B.end)continue;const[q,K]=B.start.split(":").map(Number),[Y,J]=B.end.split(":").map(Number);if(q*60+K>=Y*60+J)throw new Error(`: ${B.start}-${B.end}`)}const P=s.map((B,q)=>{var Y;const K={...B,id:(Y=B.id)!=null&&Y.startsWith("new-")?null:B.id,order:q,name:`${B.start}-${B.end}`};return $V(K)});await Promise.all(P),document.dispatchEvent(new CustomEvent("timeblocks-updated")),e()}catch(P){p(P.message||""),d(!1)}};return n?g.jsx(lo,{isOpen:n,onClose:e,title:"",className:"max-w-2xl h-[600px]",children:g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-3 custom-scrollbar",children:[g.jsx(ub,{sensors:v,collisionDetection:Zx,onDragEnd:O,children:g.jsx(TI,{items:s.map(P=>P.id),strategy:kI,children:s.map(P=>g.jsx(AI,{id:P.id,children:g.jsx(J5,{block:P,onDelete:()=>b(P.id),onUpdate:B=>E(P.id,B)})},P.id))})}),s.length<10?g.jsxs("button",{onClick:w,className:"w-full py-4 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl text-gray-400 hover:border-blue-500 hover:text-blue-500 hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-all font-medium text-sm flex items-center justify-center gap-2 group",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),""]}):g.jsx("div",{className:"text-center py-4 text-xs text-gray-400",children:"10"}),g.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/40 rounded-lg flex items-center text-sm text-gray-500 dark:text-gray-400",children:[g.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-gray-400 mr-3 shadow-sm"}),g.jsx("span",{className:"font-bold mr-2 text-gray-700 dark:text-gray-300",children:""}),g.jsx("span",{className:"text-xs opacity-80",children:""})]})]}),f&&g.jsx("p",{className:"text-sm text-red-500 text-center mb-4",children:f}),g.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:g.jsx("button",{onClick:S,disabled:l,className:"px-8 py-2.5 bg-gray-900 hover:bg-gray-800 dark:bg-blue-600 dark:hover:bg-blue-500 text-white rounded-lg font-bold text-sm transition-all active:scale-95 shadow-md disabled:bg-gray-400",children:l?"...":""})})]})}):null},J5=({block:t,onDelete:e,onUpdate:n})=>{const[r,s]=M.useState(!1),a=t.start||"09:00",l=t.end||"10:00",[d,f]=a.split(":"),[p,v]=l.split(":");return g.jsxs("div",{className:"flex items-center gap-4 p-2 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-sm group",children:[g.jsxs("div",{className:"relative",children:[g.jsx("button",{onClick:()=>s(!r),className:"w-6 h-6 rounded-full shadow-sm hover:scale-110 active:scale-95 transition-transform ring-2 ring-transparent focus:ring-blue-400 ring-offset-2 dark:ring-offset-gray-900",style:{backgroundColor:t.color||"#3B82F6"},title:""}),r&&g.jsx("div",{className:"absolute top-full left-0 mt-2 z-50 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-xl shadow-2xl p-3 flex gap-2 w-max animate-fade-in-down",children:_g.map(w=>g.jsx("button",{onClick:()=>{n({color:w}),s(!1)},className:"w-6 h-6 rounded-full hover:scale-110 transition-transform ring-2 ring-transparent hover:ring-blue-400",style:{backgroundColor:w}},w))})]}),g.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx(rh,{options:kx,value:d,onChange:w=>n({start:`${w}:${f}`})}),g.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),g.jsx(rh,{options:Ex,value:f,onChange:w=>n({start:`${d}:${w}`})})]}),g.jsx("div",{className:"w-4 h-0.5 bg-gray-200 dark:bg-gray-700 rounded-full"}),g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx(rh,{options:kx,value:p,onChange:w=>n({end:`${w}:${v}`})}),g.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),g.jsx(rh,{options:Ex,value:v,onChange:w=>n({end:`${p}:${w}`})})]})]}),g.jsx("button",{onClick:e,className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},rh=({options:t,value:e,onChange:n})=>g.jsx("select",{value:e,onChange:r=>n(r.target.value),className:"appearance-none px-2 py-1 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm font-mono font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-100 dark:focus:ring-blue-900 outline-none cursor-pointer",children:t.map(r=>g.jsx("option",{value:r,children:r},r))}),Y5=()=>{const{activeModal:t,modalData:e,closeModal:n}=Xn(),r=t==="workspace-edit",s=e,a=!!(s!=null&&s.id),[l,d]=M.useState(""),[f,p]=M.useState(!1),[v,w]=M.useState(null);M.useEffect(()=>{r&&(d((s==null?void 0:s.name)||""),w(null),p(!1))},[r,s]);const b=M.useCallback(async()=>{const O=l.trim();if(!O){w("");return}if(xV().some(B=>B.name===O&&B.id!==(s==null?void 0:s.id))){w("");return}p(!0),w(null);try{if(a&&(s!=null&&s.id))await IV(s.id,O);else{const B=await yI(O);B!=null&&B.id&&mI(B.id)}n()}catch(B){w(": "+(B.message||"")),p(!1)}},[l,a,s,n]),E=O=>{O.key==="Enter"&&!O.nativeEvent.isComposing&&b()};return r?g.jsx(lo,{isOpen:r,onClose:n,className:"max-w-md",children:g.jsxs("div",{className:"flex flex-col gap-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:a?"":""}),g.jsx("input",{type:"text",value:l,onChange:O=>d(O.target.value),onKeyDown:E,placeholder:"...",className:"w-full text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600",autoFocus:!0})]}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:a?"":""}),v&&g.jsx("p",{className:"text-sm text-red-500 text-center",children:v}),g.jsxs("div",{className:"flex justify-end items-center pt-4 border-t border-gray-200 dark:border-gray-700 gap-3",children:[g.jsx("button",{onClick:n,disabled:f,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:""}),g.jsx("button",{onClick:b,disabled:f,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95",children:f?a?"...":"...":a?"":""})]})]})}):null},X5=()=>{const{activeModal:t,modalData:e,closeModal:n}=Xn(),r=t==="wiki-framework",s=e,a=M.useCallback(()=>{window.dispatchEvent(new CustomEvent("change-view",{detail:{view:"wizard",mode:s.id}})),n()},[s,n]);return!r||!s?null:g.jsx(lo,{isOpen:r,onClose:n,className:"max-w-3xl max-h-[90vh] p-0 overflow-hidden bg-transparent shadow-none",children:g.jsxs("div",{className:"w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[g.jsx("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-4xl animate-bounce-slow",children:s.icon}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s.title}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.subTitle})]})]})}),g.jsxs("div",{className:"p-6 overflow-y-auto flex-1 custom-scrollbar",children:[g.jsxs("div",{className:"mb-8",children:[g.jsxs("h3",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider mb-3 flex items-center",children:[g.jsx("span",{className:"w-1 h-4 bg-blue-600 dark:bg-blue-400 mr-2 rounded-full"}),""]}),g.jsx("p",{className:"text-base text-gray-700 dark:text-gray-300 leading-relaxed bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:s.concept.summary})]}),g.jsxs("div",{className:"mb-8",children:[g.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[g.jsx("span",{className:"w-1 h-4 bg-gray-400 mr-2 rounded-full"}),""]}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed mb-3",children:s.concept.detail})]}),Array.isArray(s.useCases)&&s.useCases.length>0&&g.jsxs("div",{className:"mb-8",children:[g.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[g.jsx("span",{className:"w-1 h-4 bg-purple-500 mr-2 rounded-full"}),"Use Cases"]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.useCases.map((l,d)=>g.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/40 rounded-lg p-5 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 transition-colors",children:[g.jsxs("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center",children:[g.jsx("span",{className:"text-purple-500 mr-2",children:"#"}),l.title]}),g.jsx("div",{className:"mb-3",children:g.jsxs("div",{className:"flex items-start mb-1",children:[g.jsx("span",{className:"text-[10px] font-bold text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"Before"}),g.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.before})]})}),g.jsx("div",{children:g.jsxs("div",{className:"flex items-start",children:[g.jsx("span",{className:"text-[10px] font-bold text-blue-600 bg-blue-100 dark:bg-blue-900/40 dark:text-blue-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"After"}),g.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-300 font-medium",children:l.after})]})})]},d))})]}),s.tips&&s.tips.length>0&&g.jsxs("div",{className:"mb-6",children:[g.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[g.jsx("span",{className:"w-1 h-4 bg-amber-500 mr-2 rounded-full"}),"Tips"]}),g.jsx("div",{className:"space-y-3",children:s.tips.map((l,d)=>g.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-lg border border-amber-100 dark:border-amber-900/30",children:[g.jsxs("p",{className:"font-bold text-amber-800 dark:text-amber-400 mb-1",children:["Q. ",l.q]}),g.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["A. ",l.a]})]},d))})]})]}),g.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[g.jsx("button",{onClick:n,className:"px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""}),g.jsxs("button",{onClick:a,className:"group relative px-6 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg shadow-md transition-all transform hover:scale-105 active:scale-95 overflow-hidden",children:[g.jsxs("span",{className:"relative z-10 flex items-center",children:["",g.jsx("svg",{className:"w-4 h-4 ml-2 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})]}),g.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 skew-y-12"})]})]})]})})},eF=()=>{const{stack:t}=Xn();return t.length===0?null:g.jsx(g.Fragment,{children:t.map((e,n)=>{t.length-1;const r={key:e.id,isOpen:!0,data:e.data,zIndex:100+n*10};switch(e.type){case"settings":return g.jsx(b5,{...r});case"task-detail":return g.jsx(j5,{...r});case"label-edit":return g.jsx(w5,{...r});case"project-edit":return g.jsx(x5,{...r});case"workspace-edit":return g.jsx(Y5,{...r});case"filter-edit":return g.jsx(_5,{...r});case"timeblock-edit":return g.jsx(Z5,{...r});case"wiki-framework":return g.jsx(X5,{...r});default:return null}})})},Ec=()=>{const{workspaceId:t,loading:e}=Fy(),[n,r]=M.useState([]),[s,a]=M.useState(!0);return M.useEffect(()=>{let l=!0;if(!t){r([]),e||a(!1);return}a(!0),r([]);const d=m5(t,f=>{l&&(r(f),a(!1))});return()=>{l=!1,d()}},[t,e]),{tasks:n,loading:s||e}},Rr=Ml()(Ef(t=>({filterType:"inbox",targetId:null,query:"",showCompleted:!1,sortCriteria:"createdAt_desc",setFilter:(e,n=null)=>t({filterType:e,targetId:n,query:""}),setSearchQuery:e=>t({query:e,filterType:"search"}),clearFilter:()=>t({filterType:"all",targetId:null,query:""}),setShowCompleted:e=>t({showCompleted:e}),setSortCriteria:e=>t({sortCriteria:e})}),{name:"filter-storage",partialize:t=>({filterType:t.filterType,targetId:t.targetId,showCompleted:t.showCompleted,sortCriteria:t.sortCriteria})})),Kh={DENSITY_LEVELS:{COMPACT:"compact",NORMAL:"normal",COMFORTABLE:"comfortable",SPACIOUS:"spacious"},DENSITY_CLASSES:{compact:"py-0.5",normal:"py-1.5",comfortable:"py-2.5",spacious:"py-3.5"},SIDEBAR:{DURATIONS:[30,45,60,75,90]}},By=t=>Kh.DENSITY_CLASSES[t]||Kh.DENSITY_CLASSES.normal,tF=[{id:"inbox",name:"",icon:"",color:"text-blue-500",droppable:!0},{id:"search",name:"",icon:"",color:"text-gray-500"},{id:"today",name:"",icon:"",color:"text-green-500"},{id:"upcoming",name:"",icon:"",color:"text-purple-500"},{id:"important",name:"",icon:"",color:"text-amber-400"},{id:"all",name:"",icon:"",color:"text-gray-500"}],nF=()=>{const{tasks:t}=Ec();return g.jsx("ul",{className:"space-y-0.5",children:tF.map(e=>g.jsx(rF,{item:e,tasks:t},e.id))})},rF=({item:t,tasks:e})=>{const{filterType:n,setFilter:r}=Rr(),{density:s}=zl(),a=n===t.id,l=e.filter(p=>p.status==="completed"?!1:t.id==="all"?!0:t.id==="inbox"?!p.projectId||String(p.projectId)==="unassigned"||p.projectId==="none":t.id==="important"?!!p.isImportant:!1).length,{setNodeRef:d,isOver:f}=Sl({id:`filter:${t.id}`,disabled:!t.droppable,data:{type:t.id==="inbox"?"inbox":"filter",value:t.id}});return g.jsx("li",{ref:d,children:g.jsxs("button",{onClick:()=>r(t.id),className:Ye("w-full flex items-center px-3 text-sm rounded-md transition-colors text-left gap-3 group/item",By(s),a?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",f&&t.droppable&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),children:[g.jsx("span",{className:t.color,children:t.icon}),g.jsx("span",{className:"flex-1",children:t.name}),l>0&&g.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:l})]})})},sF=()=>{const[t,e]=M.useState(()=>ZV()),[n,r]=M.useState(!0),s=Xr();return M.useEffect(()=>{if(!s){r(!1);return}const a=JV(s,l=>{e(l),r(!1)});return()=>a()},[s]),{filters:t,loading:n}};function RI(t){const e={keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],isImportant:!1};if(!t)return e;const n=/(?:-?[a-zA-Z]+:(?:"[^"]*"|[^\s]+))|(?:"[^"]*")|(?:-?[^\s]+)/g,r=t.match(n);return r&&r.forEach(s=>{if(s.startsWith('"')&&s.endsWith('"')){const a=s.substring(1,s.length-1);a&&e.keywords.push(a.toLowerCase());return}if(s.startsWith("-")&&!s.includes(":")){const a=s.substring(1);a&&e.excludeKeywords.push(a.toLowerCase());return}if(s.includes(":")){let a=!1,l=s;l.startsWith("-")&&(a=!0,l=l.substring(1));const d=l.indexOf(":"),f=l.substring(0,d).toLowerCase();let p=l.substring(d+1);p.startsWith('"')&&p.endsWith('"')&&(p=p.substring(1,p.length-1));const v=p.toLowerCase();switch(f){case"project":case"p":a?e.excludeProjects.push(p):e.projects.push(p);break;case"label":case"l":a?e.excludeLabels.push(p):e.labels.push(p);break;case"timeblock":case"tb":a?e.excludeTimeBlocks.push(p):e.timeBlocks.push(p);break;case"duration":case"d":const w=parseInt(p,10);isNaN(w)||e.durations.push(w);break;case"date":case"due":["today","tomorrow","week","upcoming","overdue"].includes(v)&&e.dates.push(v);break;case"status":case"is":["completed","active","todo"].includes(v)&&e.status.push(v),v==="important"&&(e.isImportant=!0);break;default:a?e.excludeKeywords.push(l.toLowerCase()):e.keywords.push(l.toLowerCase());break}}else e.keywords.push(s.toLowerCase())}),e}function iF(t,e="createdAt_desc"){if(!Array.isArray(t))return[];const[n,r]=e.split("_"),a=r==="desc"?-1:1;return[...t].sort((l,d)=>{var v,w,b,E;let f,p;switch(n){case"dueDate":f=(v=dr(l.dueDate))==null?void 0:v.getTime(),p=(w=dr(d.dueDate))==null?void 0:w.getTime();break;case"createdAt":f=(b=dr(l.createdAt))==null?void 0:b.getTime(),p=(E=dr(d.createdAt))==null?void 0:E.getTime();break;case"title":f=l.title.toLowerCase(),p=d.title.toLowerCase();break;case"duration":f=l.duration||0,p=d.duration||0;break;case"important":f=l.isImportant?1:0,p=d.isImportant?1:0;break;default:f=0,p=0}return oF(f,p)*a})}function oF(t,e){return t===e?0:t==null?1:e==null?-1:t>e?1:t<e?-1:0}function Ix(t,e){if(!e)return t;const n=typeof e=="string"?RI(e):e;return t.filter(r=>{if(n.status.length>0){const a=r.status||"todo";if(!n.status.some(d=>d==="active"&&a==="todo"?!0:d===a))return!1}if(n.isImportant&&!r.isImportant||n.projects.length>0&&!n.projects.some(l=>l==="unassigned"?!r.projectId:r.projectId===l)||n.excludeProjects.length>0&&n.excludeProjects.some(a=>r.projectId===a)||n.labels.length>0&&(!r.labelIds||!n.labels.some(a=>{var l;return(l=r.labelIds)==null?void 0:l.includes(a)}))||n.excludeLabels.length>0&&r.labelIds&&n.excludeLabels.some(a=>{var l;return(l=r.labelIds)==null?void 0:l.includes(a)})||n.timeBlocks.length>0&&!n.timeBlocks.some(l=>l==="unassigned"?!r.timeBlockId:r.timeBlockId===l)||n.excludeTimeBlocks.length>0&&n.excludeTimeBlocks.some(a=>r.timeBlockId===a))return!1;if(n.durations.length>0){const a=r.duration||0;if(!n.durations.includes(a))return!1}if(n.dates.length>0){const a=dr(r.dueDate);if(!a||!n.dates.some(d=>{const f=new Date;if(f.setHours(0,0,0,0),d==="today")return xx(a,f);if(d==="tomorrow"){const p=new Date(f);return p.setDate(p.getDate()+1),xx(a,p)}if(d==="week"){const p=k5(f),v=new Date(p);return v.setDate(v.getDate()+7),a>=p&&a<v}if(d==="upcoming"){const p=new Date(f);p.setDate(p.getDate()+1);const v=new Date(p);return v.setDate(v.getDate()+7),a>=p&&a<v}return d==="overdue"?a<f&&r.status!=="completed":!1}))return!1}const s=`${r.title} ${r.description||""}`.toLowerCase();return!(n.keywords.length>0&&!n.keywords.every(l=>s.includes(l))||n.excludeKeywords.length>0&&n.excludeKeywords.some(l=>s.includes(l)))})}function NI(t,e){const{keyword:n,showCompleted:r,projectId:s,labelId:a,timeBlockId:l,duration:d,savedFilter:f,sortCriteria:p,filterType:v}=e,w=n?RI(n):{keywords:[],projects:[],labels:[],timeBlocks:[],durations:[],dates:[],status:[],isImportant:!1};if(s&&w.projects.push(s),a&&w.labels.push(a),l&&w.timeBlocks.push(l),d){const E=typeof d=="number"?d:parseInt(d,10);isNaN(E)||w.durations.push(E)}v==="today"&&w.dates.push("today"),v==="upcoming"&&w.dates.push("upcoming"),v==="important"&&(w.isImportant=!0),r||w.status.push("active");let b=Ix(t,w);return f&&f.query&&(b=Ix(b,f.query)),iF(b,p||"createdAt_desc")}const Ko=({icon:t,label:e,count:n,isActive:r,isOver:s,onClick:a,onContextMenu:l})=>{const{density:d}=zl();return g.jsxs("div",{onClick:a,onContextMenu:l,className:Ye("group flex items-center justify-between px-2 ml-1 rounded-md cursor-pointer transition-colors select-none",By(d),r?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",s&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),children:[g.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t&&g.jsx("span",{className:"flex-shrink-0 w-5 flex justify-center text-sm",children:t}),g.jsx("span",{className:"text-sm truncate",children:e})]}),n!==void 0&&n>0&&g.jsx("span",{className:"text-gray-400 text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700/50",children:n})]})},aF=()=>{const{filters:t,loading:e}=sF(),{tasks:n}=Ec();return e?null:g.jsx("div",{className:"space-y-0.5 py-1",children:t.map(r=>g.jsx(lF,{filter:r,tasks:n},r.id))})},lF=({filter:t,tasks:e})=>{const{filterType:n,targetId:r,setFilter:s}=Rr(),a=n==="custom"&&r===t.id,l=nt.useMemo(()=>{try{return NI(e,{savedFilter:t,showCompleted:!1}).length}catch(d){return console.warn("[CustomFilterItem] Count error:",d),0}},[e,t]);return g.jsx(Ko,{label:t.name,icon:g.jsx("span",{children:""}),count:l,isActive:a,onClick:()=>s("custom",t.id)})},uF=()=>{const{tasks:t}=Ec(),e=Kh.SIDEBAR.DURATIONS;return g.jsx("div",{className:"space-y-0.5 py-1",children:e.map(n=>g.jsx(cF,{mins:n,tasks:t},n))})},cF=({mins:t,tasks:e})=>{const{filterType:n,targetId:r,setFilter:s}=Rr(),a=n==="duration"&&r===t.toString(),l=e.filter(p=>p.status!=="completed"&&Number(p.duration)===t).length,{setNodeRef:d,isOver:f}=Sl({id:`duration:${t}`,data:{type:"duration",value:t.toString()}});return g.jsx("div",{ref:d,children:g.jsx(Ko,{label:`${t} min`,icon:g.jsx("span",{children:""}),count:l,isActive:a,isOver:f,onClick:()=>s("duration",t.toString())})})},dF=()=>{const{labels:t,loading:e}=$y(),{filterType:n,targetId:r,setFilter:s}=Rr();return e?g.jsx("div",{className:"px-4 py-2 text-xs text-gray-400",children:"Loading labels..."}):t.length===0?g.jsx("div",{className:"px-4 py-2 text-xs text-gray-400",children:"No labels found."}):g.jsx("ul",{className:"space-y-0.5",children:t.map(a=>{const l=n==="label"&&r===a.id;return g.jsx("li",{children:g.jsxs("button",{onClick:()=>s("label",a.id),className:Ye("w-full flex items-center px-3 py-1.5 text-sm rounded-md transition-colors text-left gap-2 group",l?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[g.jsx("span",{className:"w-3 h-3 rounded-full opacity-75 group-hover:opacity-100",style:{backgroundColor:a.color||"#9ca3af"}}),g.jsx("span",{className:"truncate",children:a.name})]})},a.id)})})},hF=()=>{const{projects:t,loading:e}=Af();return e?g.jsx("div",{className:"p-4 text-xs text-gray-400",children:"Loading projects..."}):t.length===0?g.jsx("div",{className:"p-4 text-xs text-gray-400",children:"No projects found."}):g.jsx(TI,{items:t.map(n=>n.id),strategy:kI,children:g.jsx("div",{className:"space-y-0.5 p-2",children:t.map(n=>g.jsx(AI,{id:n.id,children:g.jsx(fF,{project:n})},n.id))})})},fF=nt.memo(({project:t})=>{const{filterType:e,targetId:n,setFilter:r}=Rr(),{density:s}=zl(),a=e==="project"&&n===t.id,{setNodeRef:l,isOver:d}=Sl({id:`project:${t.id}`,data:{type:"project",value:t.id}});return g.jsx("div",{ref:l,onClick:()=>r("project",t.id),className:Ye("group flex items-center justify-between px-2 rounded-md cursor-pointer transition-colors select-none",By(s),a?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",d&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-gray-400 text-xs",children:"#"}),g.jsx("span",{className:"text-sm truncate",children:t.name})]})})},(t,e)=>JSON.stringify(t.project)===JSON.stringify(e.project)),pF=()=>{const{query:t,setSearchQuery:e}=Rr(),[n,r]=M.useState(t),s=M.useRef(null);M.useEffect(()=>{t!==n&&r(t)},[t]),M.useEffect(()=>{const f=setTimeout(()=>{n!==t&&e(n)},300);return()=>{clearTimeout(f)}},[n,t,e]);const a=f=>{f.preventDefault(),e(n)},l=f=>{const p=f.target.value;r(p)},d=()=>{var f;r(""),e(""),(f=s.current)==null||f.focus()};return g.jsx("form",{onSubmit:a,className:"px-3 mb-2",children:g.jsxs("div",{className:"relative group",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none text-gray-400 group-focus-within:text-blue-500 transition-colors",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),g.jsx("label",{htmlFor:"page-search-input",className:"sr-only",children:""}),g.jsx("input",{ref:s,id:"page-search-input",type:"text",placeholder:" (/)",value:n,onChange:l,className:"w-full bg-gray-100 dark:bg-gray-700/50 border border-transparent focus:border-blue-500/50 focus:bg-white dark:focus:bg-gray-700 rounded-lg py-1.5 pl-9 pr-8 text-sm text-gray-800 dark:text-gray-100 placeholder-gray-500 outline-none transition-all"}),n&&g.jsx("button",{type:"button",onClick:d,className:"absolute inset-y-0 right-0 pr-2 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})},Wa=({title:t,children:e,defaultExpanded:n=!0})=>{const[r,s]=M.useState(n);return g.jsxs("div",{className:"mb-2",children:[g.jsxs("button",{onClick:()=>s(!r),className:"flex items-center w-full px-2 py-1 text-xs font-semibold text-gray-500 uppercase hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[g.jsx("svg",{className:Ye("w-3 h-3 mr-1 transition-transform",r?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),t]}),r&&g.jsx("div",{className:"mt-1",children:e})]})},mF=()=>{const{filterType:t,setFilter:e}=Rr();return g.jsxs("div",{className:"space-y-0.5 py-1",children:[g.jsx(Ko,{label:"",icon:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),isActive:t==="wizard",onClick:()=>e("wizard")}),g.jsx(Ko,{label:"",icon:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),isActive:t==="target-dashboard",onClick:()=>e("target-dashboard")}),g.jsx(Ko,{label:"Wiki",icon:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),isActive:t==="wiki",onClick:()=>e("wiki")})]})},gF=()=>{const{timeBlocks:t,loading:e}=kc(),{tasks:n}=Ec();return e?null:g.jsxs("div",{className:"space-y-0.5 py-1",children:[t.map(r=>g.jsx(yF,{block:r,tasks:n},r.id)),g.jsx(vF,{tasks:n})]})},yF=({block:t,tasks:e})=>{const{filterType:n,targetId:r,setFilter:s}=Rr(),a=n==="timeblock"&&r===t.id,l=e.filter(p=>p.status!=="completed"&&p.timeBlockId===t.id).length,{setNodeRef:d,isOver:f}=Sl({id:`timeblock:${t.id}`,data:{type:"timeblock",value:t.id}});return g.jsx("div",{ref:d,children:g.jsx(Ko,{label:`${t.start} - ${t.end}`,icon:g.jsx("span",{className:"w-2 rounded-full aspect-square",style:{backgroundColor:t.color}}),count:l,isActive:a,isOver:f,onClick:()=>s("timeblock",t.id)})})},vF=({tasks:t})=>{const{filterType:e,targetId:n,setFilter:r}=Rr(),s=e==="timeblock"&&n==="unassigned",a=t.filter(f=>f.status!=="completed"&&(!f.timeBlockId||f.timeBlockId==="unassigned"||f.timeBlockId==="null")).length,{setNodeRef:l,isOver:d}=Sl({id:"timeblock:unassigned",data:{type:"timeblock",value:"unassigned"}});return g.jsx("div",{ref:l,children:g.jsx(Ko,{label:"",icon:g.jsx("span",{className:"w-2 rounded-full aspect-square bg-gray-400"}),count:a,isActive:s,isOver:d,onClick:()=>r("timeblock","unassigned")})})},_F=()=>g.jsxs("div",{className:"flex flex-col gap-4",children:[g.jsx(pF,{}),g.jsx(nF,{}),g.jsx(Wa,{title:"Projects",children:g.jsx(hF,{})}),g.jsx(Wa,{title:"Targets",defaultExpanded:!1,children:g.jsx(mF,{})}),g.jsx(Wa,{title:"Labels",defaultExpanded:!1,children:g.jsx(dF,{})}),g.jsx(Wa,{title:"Time Blocks",defaultExpanded:!1,children:g.jsx(gF,{})}),g.jsx(Wa,{title:"Durations",defaultExpanded:!1,children:g.jsx(uF,{})}),g.jsx(Wa,{title:"Filters",defaultExpanded:!1,children:g.jsx(aF,{})})]}),wF=({className:t,onCancel:e,onSuccess:n,placeholder:r="..."})=>{const[s,a]=M.useState(""),[l,d]=M.useState(!1),f=async w=>{if(!(!s.trim()||l)){d(!0);try{await xI({title:s}),a(""),n==null||n()}catch(b){console.error(b),alert("Failed to add task")}finally{d(!1)}}},p=w=>{w.key==="Enter"&&!w.shiftKey&&!w.nativeEvent.isComposing&&(w.preventDefault(),f()),w.key==="Escape"&&(e==null||e())},v=nt.useRef(null);return nt.useEffect(()=>{const w=b=>{v.current&&!v.current.contains(b.target)&&(e==null||e())};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[e,s]),g.jsxs("div",{ref:v,className:Ye("glass-effect rounded-xl shadow-xl p-4 border-blue-500/20 dark:border-blue-400/20 animate-in slide-in-from-top-2 duration-300",t),children:[g.jsx("label",{htmlFor:"inline-task-input",className:"sr-only",children:""}),g.jsx("input",{id:"inline-task-input",type:"text",autoFocus:!0,className:"w-full bg-transparent text-base font-medium text-gray-800 dark:text-gray-100 placeholder-gray-400 outline-none mb-4",placeholder:r,value:s,onChange:w=>a(w.target.value),onKeyDown:p,disabled:l}),g.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100 dark:border-gray-700/50",children:[g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"button",className:"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 transition-colors p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),g.jsx("button",{type:"button",className:"text-gray-400 hover:text-amber-500 dark:hover:text-amber-400 transition-colors p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]}),g.jsxs("div",{className:"flex gap-3",children:[e&&g.jsx("button",{type:"button",onClick:e,disabled:l,className:"px-4 py-2 text-sm font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all",children:""}),g.jsx("button",{onClick:()=>f(),disabled:!s.trim()||l,className:"px-5 py-2 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl shadow-lg shadow-blue-500/20 transition-all active:scale-95",children:l?"...":""})]})]})]})},xF=()=>{const[t,e]=M.useState(!1);return t?g.jsx("div",{className:"mb-4",children:g.jsx(wF,{onCancel:()=>e(!1),onSuccess:()=>e(!1)})}):g.jsxs("button",{onClick:()=>e(!0),"aria-label":"",className:"group flex items-center gap-2 w-full text-left py-2 px-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-2",children:[g.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-transparent group-hover:bg-blue-100/50 dark:group-hover:bg-blue-900/30 transition-colors",children:g.jsx("svg",{className:"w-4 h-4 text-inherit",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),g.jsx("span",{className:"text-sm font-medium",children:""})]})},bF=nt.memo(({task:t})=>{const e=t.status==="completed",n=!!t.isImportant,{openModal:r}=Xn(),{attributes:s,listeners:a,setNodeRef:l,transform:d,isDragging:f}=cb({id:`task:${t.id}`,data:{task:t}}),p=async b=>{b.stopPropagation(),t.id&&await p5(t.id,t.status||"todo")},v=async b=>{b.stopPropagation(),t.id&&await Uy(t.id,{isImportant:!n})},w=d?{transform:`translate3d(${d.x}px, ${d.y}px, 0)`,zIndex:50}:void 0;return g.jsxs("li",{ref:l,style:w,...a,...s,onClick:()=>r("task-detail",t),className:Ye("group flex items-start gap-3 p-[var(--task-p)] bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700/50 rounded-xl hover:shadow-sm hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-200 cursor-pointer hover-lift",f&&"opacity-70 border-blue-500 shadow-lg"),children:[g.jsx("button",{onClick:p,className:Ye("mt-0.5 w-5 h-5 rounded-full border flex items-center justify-center transition-colors shrink-0",e?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-blue-400 text-transparent"),"aria-label":e?"Mark as incomplete":"Mark as complete",children:g.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:Ye("text-sm text-gray-800 dark:text-gray-200 break-words",e&&"line-through text-gray-400 dark:text-gray-500"),children:t.title}),t.description&&g.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-[var(--task-line-clamp)]",children:t.description}),g.jsx("div",{className:"flex items-center gap-3 mt-2",children:t.dueDate&&g.jsxs("span",{className:Ye("text-xs flex items-center gap-1",e?"text-gray-400":S5(t.dueDate)),children:[" ",E5(t.dueDate)]})})]}),g.jsx("div",{className:Ye("flex items-center gap-1 transition-opacity",n?"opacity-100":"opacity-30 group-hover:opacity-100"),children:g.jsx("button",{onClick:v,className:Ye("p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",n?"text-yellow-500":"text-gray-400"),title:n?"":"",children:g.jsx("svg",{className:"w-4 h-4",fill:n?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})})]})},(t,e)=>{const n=(r,s)=>{if(r===s)return!0;if(!r||!s)return!1;const a=r instanceof Date?r.toISOString():r,l=s instanceof Date?s.toISOString():s;return a===l};return t.task.id===e.task.id&&t.task.status===e.task.status&&t.task.title===e.task.title&&t.task.description===e.task.description&&t.task.isImportant===e.task.isImportant&&n(t.task.dueDate,e.task.dueDate)}),kF=({tasks:t,timeBlockId:e})=>{const{timeBlocks:n}=kc(),r=t.reduce((f,p)=>{const v=p.duration||0;return f+Number(v)},0),s=f=>(f/60).toFixed(2)+"h",a=e?n.find(f=>f.id===e):null;if(a&&a.start&&a.end){const p=((q,K)=>{const[Y,J]=q.split(":").map(Number),[te,C]=K.split(":").map(Number);let I=Y*60+J,A=te*60+C;return A<I&&(A+=1440),A-I})(a.start,a.end);if(p<=0)return null;const v=(p/60).toFixed(2),w=(r/60).toFixed(2),b=r/p*100,E=Math.min(b,100),O=p-r,S=O<0,P=(Math.abs(O)/60).toFixed(2),B=b>100;return g.jsxs("div",{className:"glass-card flex items-center gap-4 py-3 px-4 my-2",children:[g.jsx("div",{className:"flex-shrink-0 w-24 truncate text-xs font-bold text-gray-500 dark:text-gray-400",title:a.name,children:a.name}),g.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 dark:text-gray-400 tabular-nums",children:[g.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300 w-[4.5ch] text-right inline-block",children:[w,"h"]}),g.jsx("span",{className:"text-gray-400 mx-0.5",children:"/"}),g.jsxs("span",{className:"w-[4.5ch] inline-block",children:[v,"h"]})]}),g.jsx("div",{className:"flex-1 relative h-3 bg-gray-200 dark:bg-gray-700/50 rounded-full overflow-hidden min-w-[100px]",children:g.jsx("div",{className:Ye("h-full rounded-full transition-all duration-500 ease-out shadow-sm",B?"bg-red-500":"bg-gradient-to-r from-blue-500 to-indigo-600"),style:{width:B?"100%":`${E}%`}})}),g.jsxs("div",{className:"flex-shrink-0 flex items-center justify-end gap-3 min-w-[140px]",children:[g.jsxs("div",{className:Ye("text-lg font-bold tabular-nums text-right w-[3.5ch]",B?"text-red-500":"text-blue-500"),children:[Math.round(b),g.jsx("span",{className:"text-xs font-normal opacity-70",children:"%"})]}),g.jsxs("div",{className:Ye("text-xs whitespace-nowrap text-right w-[100px]",S?"text-red-500":"text-green-500"),children:["(",S?"":""," ",P,"h)"]})]})]})}const l=t.length,d=l>0?r/l:0;return g.jsxs("div",{className:"glass-card flex items-center justify-evenly py-3 px-4 my-2",children:[g.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[g.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:"COUNT"}),g.jsxs("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:[l,g.jsx("span",{className:"text-xs font-normal ml-0.5 text-gray-400",children:""})]})]}),g.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),g.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[g.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:"TOTAL"}),g.jsx("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200 text-blue-600 dark:text-blue-400",children:s(r)})]}),g.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),g.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[g.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:"AVG"}),g.jsxs("span",{className:"font-medium text-sm",children:[s(d),g.jsx("span",{className:"text-xs ml-0.5",children:"/"})]})]})]})},EF=()=>{const{tasks:t,loading:e}=Ec(),{filterType:n,targetId:r,query:s,showCompleted:a,sortCriteria:l,setShowCompleted:d,setSortCriteria:f}=Rr(),{density:p}=zl(),{openModal:v}=Xn(),w=M.useMemo(()=>({keyword:s,showCompleted:a,projectId:n==="inbox"?"unassigned":n==="project"?r:null,labelId:n==="label"?r:null,timeBlockId:n==="timeblock"?r:null,duration:n==="duration"?r:null,filterType:n,savedFilter:null,sortCriteria:l}),[n,r,s,a,l]),b=M.useMemo(()=>NI(t,w),[t,w]),E={compact:"space-y-1",normal:"space-y-2",comfortable:"space-y-3",spacious:"space-y-4"}[p];return e?g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("div",{className:"text-gray-400 text-sm animate-pulse",children:"Loading tasks..."})}):g.jsxs("div",{className:"flex flex-col h-full overflow-hidden relative",children:[g.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-1 pb-20",children:[g.jsxs("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm pt-1 pb-4 mb-4 flex items-center gap-2",children:[g.jsx("div",{className:"flex-1",children:g.jsx(xF,{})}),g.jsx("div",{className:"flex items-center gap-2 px-1",children:g.jsxs("select",{value:l,onChange:O=>f(O.target.value),className:"text-xs bg-transparent border-none outline-none text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer font-medium",children:[g.jsx("option",{value:"createdAt_desc",children:""}),g.jsx("option",{value:"dueDate_asc",children:""}),g.jsx("option",{value:"important_desc",children:""}),g.jsx("option",{value:"title_asc",children:""})]})}),g.jsx("button",{onClick:()=>d(!a),className:Ye("px-3 py-2 rounded-lg text-xs font-medium border transition-colors shrink-0",a?"bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-300":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"),title:a?"Hide completed tasks":"Show completed tasks",children:a?"":""})]}),b.length===0?g.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center min-h-[60vh]",children:[g.jsxs("div",{className:"relative mb-8",children:[g.jsx("div",{className:"absolute -inset-4 bg-blue-500/10 dark:bg-blue-400/10 blur-3xl rounded-full"}),g.jsx("div",{className:"relative",children:g.jsx("svg",{className:"w-24 h-24 text-blue-200 dark:text-blue-900/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})})]}),g.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:""}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs mb-8",children:a?"":""}),g.jsxs("button",{onClick:()=>v("task-detail",{title:""}),className:"btn-premium flex items-center gap-2",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),""]})]}):g.jsx("ul",{className:Ye("transition-all duration-200",E),children:b.map(O=>g.jsx(bF,{task:O},O.id))})]}),g.jsx("div",{className:"flex-none mt-auto pt-2 border-t border-gray-100 dark:border-gray-800 bg-white/50 dark:bg-gray-900/50 backdrop-blur pb-[calc(0.5rem+env(safe-area-inset-bottom))]",children:g.jsx(kF,{tasks:b,timeBlockId:w.timeBlockId})})]})},IF=()=>{const{workspaceId:t,loading:e}=Fy(),[n,r]=M.useState([]),[s,a]=M.useState(!0);return M.useEffect(()=>{if(!t){r([]),e||a(!1);return}a(!0);const l=d5(t,d=>{r(d),a(!1)});return()=>l()},[t,e]),{targets:n,loading:s||e}},TF=nt.memo(({kgi:t,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:s})=>{const a={good:"text-emerald-500",warning:"text-amber-500",danger:"text-red-500"},l={good:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-red-500"},d=a[t.status]||"text-gray-500",f=l[t.status]||"bg-gray-500",p=[{id:"backward",label:"Backward Map",icon:""},{id:"woop",label:"WOOP Board",icon:""},{id:"okr",label:"OKR Tree",icon:""}];return g.jsx("div",{className:`mb-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg transition-all duration-300 mx-4 mt-4 ${r?"py-2":"py-4"}`,children:g.jsxs("div",{className:"px-6 flex items-center justify-between gap-6",children:[g.jsx("div",{className:"flex-1 min-w-0",children:g.jsx("h1",{className:`font-bold text-gray-900 dark:text-white truncate transition-all duration-300 ${r?"text-sm opacity-50":"text-base"}`,children:t.title})}),g.jsx("div",{className:"flex-1 max-w-md",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"flex-1",children:g.jsx("div",{className:"h-3 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:g.jsx("div",{style:{width:`${t.progress}%`},className:`h-full ${f} transition-all duration-1000 ease-out rounded-full`})})}),g.jsxs("span",{className:`font-black ${d} tabular-nums text-sm whitespace-nowrap`,children:[t.progress,"%"]})]})}),g.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),g.jsxs("div",{className:`font-black ${d} tabular-nums`,children:[t.daysLeft,g.jsx("span",{className:"text-xs font-medium ml-0.5 text-gray-400",children:""})]})]}),g.jsx("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-900/50 p-1 rounded-lg",children:p.map(v=>g.jsxs("button",{onClick:()=>n(v.id),className:`group px-3 py-1.5 rounded-md text-xs font-bold transition-all ${e===v.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,title:v.label,children:[g.jsx("span",{className:"hidden sm:inline",children:v.label}),g.jsx("span",{className:"sm:hidden",children:v.icon})]},v.id))}),g.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:r?"Expand Header":"Collapse Header",children:g.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform duration-300 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})})})]})]})})}),SF=nt.memo(({data:t})=>!t||!t.milestones?g.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):g.jsxs("div",{className:"max-w-4xl mx-auto relative pb-10",children:[g.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 -translate-x-1/2"}),t.milestones.map((e,n)=>{const r=e.type==="goal",s=e.type==="current",a=e.completed;let l,d="";return r?(l=g.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-400 text-white flex items-center justify-center text-base shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),d="bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"):s?(l=g.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 animate-pulse relative",children:"Now"}),d="border-blue-500 border-2 shadow-md"):a?(l=g.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs shadow ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),d="bg-gray-50 dark:bg-gray-800 opacity-70"):(l=g.jsx("div",{className:"w-5 h-5 rounded-full bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative"}),d="bg-white dark:bg-gray-800"),g.jsxs("div",{className:"relative flex items-center mb-4 animate-fade-in group",style:{animationDelay:`${n*50}ms`},children:[g.jsx("div",{className:"w-16 flex-shrink-0 flex justify-center items-center z-10",children:l}),g.jsx("div",{className:"flex-1 pr-4 min-w-0",children:g.jsx("div",{className:`px-3 py-3 rounded-lg border ${s&&!d.includes("border-2")?"border-2 border-blue-500":s?"":"border-gray-200 dark:border-gray-700"} ${d} shadow-sm transition-all hover:shadow-md hover:translate-x-1 cursor-pointer`,children:g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsx("span",{className:`text-xs font-bold ${s?"text-blue-600":"text-gray-500"} flex-shrink-0 font-mono`,children:e.date}),g.jsx("h3",{className:"font-bold text-gray-900 dark:text-white flex-1 truncate text-sm md:text-base",children:e.title}),r&&g.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-bold flex-shrink-0",children:"TARGET"}),s&&g.jsx("span",{className:"text-[10px] text-blue-500 font-bold flex-shrink-0",children:" NOW"})]})})})]},n)})]})),CF=nt.memo(({data:t})=>{if(!t||!t.keyResults)return g.jsx("div",{className:"p-4 text-center text-gray-500",children:""});const e=n=>n==="high"?"bg-emerald-500":n==="medium"?"bg-amber-500":"bg-red-500";return g.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[g.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border-2 border-blue-100 dark:border-blue-900 shadow-lg text-center mb-12 relative z-10 transition-transform hover:scale-[1.01]",children:[g.jsx("div",{className:"absolute top-[-15px] left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-md",children:"Objective"}),g.jsxs("h2",{className:"font-black text-2xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 leading-tight",children:['"',t.objective,'"']}),g.jsx("div",{className:"absolute bottom-[-50px] left-1/2 w-1 h-[50px] bg-gray-200 dark:bg-gray-700 z-0"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative",children:[g.jsx("div",{className:"hidden md:block absolute top-[-25px] left-[16.66%] right-[16.66%] h-1 bg-gray-200 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 rounded-t-xl z-0"}),t.keyResults.map(n=>{const r=Math.round(n.current/n.target*100),s=e(n.confidence);return g.jsxs("div",{className:"relative pt-6",children:[g.jsx("div",{className:"absolute top-[-25px] left-1/2 w-1 h-[25px] bg-gray-200 dark:bg-gray-700 md:block hidden"}),g.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-700 transition-all group h-full flex flex-col",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["KR #",n.id]}),g.jsx("div",{className:`w-3 h-3 rounded-full ${s}`,title:`Confidence: ${n.confidence}`})]}),g.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-4 h-12 line-clamp-2",children:n.text}),g.jsxs("div",{className:"space-y-1 mt-auto",children:[g.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-500 dark:text-gray-400",children:[g.jsx("span",{children:n.current}),g.jsx("span",{children:n.target})]}),g.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-900 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${r}%`}})}),g.jsxs("div",{className:"text-right text-sm font-black text-blue-600 mt-1",children:[r,"%"]})]})]})]},n.id)})]})]})}),AF=nt.memo(({data:t})=>!t||!t.obstacles?g.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto animate-fade-in",children:[g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/30 dark:to-blue-900/30 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800 shadow-sm hover:shadow-md transition-shadow",children:[g.jsx("h3",{className:"text-sm font-bold text-indigo-500 uppercase mb-2",children:"Wish ()"}),g.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.wish,'"']})]}),g.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/30 dark:to-rose-900/30 p-6 rounded-2xl border border-pink-100 dark:border-pink-800 shadow-sm hover:shadow-md transition-shadow",children:[g.jsx("h3",{className:"text-sm font-bold text-pink-500 uppercase mb-2",children:"Outcome ()"}),g.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.outcome,'"']})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-2 flex items-center",children:[g.jsx("span",{className:"mr-2",children:""})," Obstacles & If-Then Plans"]}),t.obstacles.map(e=>g.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all overflow-hidden relative",children:[g.jsx("div",{className:"p-5 border-l-4 border-gray-400 bg-gray-50 dark:bg-gray-800 relative z-10 transition-transform group-hover:translate-x-1",children:g.jsxs("h4",{className:"font-bold text-gray-700 dark:text-gray-300 flex items-center",children:[g.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-xs px-2 py-1 rounded mr-3 text-gray-600 dark:text-gray-400",children:""}),e.text]})}),g.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border-t border-gray-100 dark:border-gray-700 flex items-start",children:[g.jsx("div",{className:"flex-shrink-0 mt-1",children:g.jsx("span",{className:"block w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs font-bold",children:"IF"})}),g.jsx("div",{className:"ml-3 flex-1",children:g.jsxs("p",{className:"text-emerald-800 dark:text-emerald-300 font-bold text-sm",children:[" ",e.plan]})}),g.jsxs("div",{className:"ml-2 flex flex-col items-center",children:[g.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Score"}),g.jsx("span",{className:"text-lg font-black text-emerald-500 leading-none",children:e.overcomeCount})]})]})]},e.id)),g.jsx("button",{className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl text-gray-400 hover:border-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition flex items-center justify-center font-bold text-sm",children:"+ "})]})]})),RF=()=>{const{targets:t}=IF(),[e,n]=M.useState("backward"),[r,s]=M.useState(!1),a=t.filter(E=>E.mode===e),l=E=>({milestones:[{date:"Future",title:E.data.goal_kgi||"Undefined Goal",type:"goal",completed:!1},{date:"Milestone",title:E.data.milestone_minus_1mo||"",type:"milestone",completed:!1},{date:"Today",title:"Current Status",type:"current",completed:!0},{date:"Now",title:E.data.first_action||"",type:"action",completed:!1}]}),d=E=>({wish:E.data.wish||"",outcome:E.data.outcome||"",obstacles:[{id:1,text:E.data.obstacle||"",plan:E.data.plan||"",overcomeCount:0}]}),f=E=>({objective:E.data.objective||"",keyResults:[{id:1,text:E.data.kr_1||"KR 1",current:0,target:100,confidence:"medium"},{id:2,text:E.data.kr_2||"KR 2",current:0,target:100,confidence:"medium"},{id:3,text:E.data.kr_3||"KR 3",current:0,target:100,confidence:"medium"}]}),p=E=>E?typeof E.toDate=="function"?E.toDate().toLocaleDateString():E instanceof Date?E.toLocaleDateString():String(E):"Unknown",v=()=>a.length===0?g.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500 dark:text-gray-400",children:g.jsxs("p",{className:"mb-4",children:["No ",e.toUpperCase()," targets found."]})}):g.jsx("div",{className:"space-y-12",children:a.map(E=>g.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-12 last:border-0",children:[g.jsxs("div",{className:"mb-4 text-xs text-gray-400 flex justify-end",children:["Created: ",p(E.createdAt)]}),e==="backward"&&g.jsx(SF,{data:l(E)}),e==="woop"&&g.jsx(AF,{data:d(E)}),e==="okr"&&g.jsx(CF,{data:f(E)})]},E.id))}),w=t.find(E=>E.mode==="backward"),b={title:(w==null?void 0:w.data.goal_kgi)||"",progress:0,daysLeft:0,status:"good"};return g.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[g.jsx(TF,{kgi:b,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:()=>s(!r)}),g.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 pb-6 pt-4",children:v()})]})},NF=[{id:"okr",title:"OKR (Objectives and Key Results)",subTitle:"",color:"blue",icon:"",concept:{summary:"ObjectiveKey Results",detail:"GoogleIntel60-70%"},useCases:[{title:"",before:"",after:"O:Rust KR:Rust13"},{title:"",before:"",after:"O:MVP KR:310030%"}],tips:[{q:"",a:"OKR60%Win"},{q:"KR",a:"50%100%70%NG"}]},{id:"woop",title:"WOOP (Wish, Outcome, Obstacle, Plan)",subTitle:"",color:"amber",icon:"",concept:{summary:"",detail:"If-ThenXY"},useCases:[{title:"",before:"",after:"W:30 O: Obs: Plan:"},{title:"",before:"",after:"Obs: Plan:"}],tips:[{q:"Obstacle",a:""},{q:"Plan",a:"5"}]},{id:"backward",title:"Backward Design ()",subTitle:"",color:"purple",icon:"",concept:{summary:"",detail:"ForecastingBackcasting"},useCases:[{title:"",before:"",after:"Goal: 1: 3:LP :"},{title:"",before:"",after:"Goal:3 2:20 1: :"}],tips:[{q:"",a:"KGI1OK"},{q:"",a:""}]}],PF=nt.memo(({framework:t,onClick:e})=>g.jsxs("div",{className:"framework-card cursor-pointer bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-6 transition-all duration-300 hover:border-blue-500 hover:shadow-lg hover:scale-105 group",onClick:()=>e(t),role:"button",tabIndex:0,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&e(t)},children:[g.jsx("div",{className:"text-4xl mb-3 transform transition-transform group-hover:scale-110 duration-300",children:t.icon}),g.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:t.title}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 h-10",children:t.concept.summary}),g.jsxs("div",{className:"mt-4 flex items-center text-xs text-blue-600 dark:text-blue-400 font-medium opacity-80 group-hover:opacity-100 transition-opacity",children:[g.jsx("span",{children:""}),g.jsx("svg",{className:"w-4 h-4 ml-1 transform transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})),DF=()=>{const{openModal:t}=Xn();return g.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-900 overflow-y-auto custom-scrollbar",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 animate-fade-in",children:[g.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-8 flex items-center",children:[g.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500 mr-3",children:g.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),g.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-gray-300",children:" Wiki"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:NF.map(e=>g.jsx(PF,{framework:e,onClick:n=>t("wiki-framework",n)},e.id))})]})})},ol={backward:{id:"backward",label:"Backward Design",description:"",steps:[{title:"Goal / KGI",description:"KGI",inputs:[{type:"textarea",placeholder:"20253311",key:"goal_kgi"}]},{title:"Milestone",description:"1",inputs:[{type:"textarea",placeholder:"100",key:"milestone_minus_1mo"}]},{title:"First Action",description:"",inputs:[{type:"textarea",placeholder:"",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"",steps:[{title:"Wish ()",description:"",inputs:[{type:"textarea",placeholder:"30",key:"wish"}]},{title:"Outcome ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"outcome"}]},{title:"Obstacle ()",description:"",inputs:[{type:"textarea",placeholder:"SNS",key:"obstacle"}]},{title:"Plan ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"(O)(KR)",steps:[{title:"Objective",description:"1",inputs:[{type:"textarea",placeholder:"",key:"objective"}]},{title:"Key Results",description:"3",inputs:[{type:"text",placeholder:"KR 1 (: GitHub 1,000)",key:"kr_1"},{type:"text",placeholder:"KR 2 (:  500)",key:"kr_2"},{type:"text",placeholder:"KR 3 (:  40%)",key:"kr_3"}]}]}},jF=({mode:t,currentStep:e})=>{const n=ol[t],r=n.steps.length;return g.jsx("div",{className:"flex items-center justify-between mb-8 max-w-2xl mx-auto",children:g.jsx("div",{className:"flex items-center space-x-1 mx-auto w-full justify-center",children:n.steps.map((s,a)=>{const l=a+1,d=e>l,f=e===l,p=e<l;return g.jsxs(nt.Fragment,{children:[g.jsxs("div",{className:"flex flex-col items-center relative z-10 w-16",children:[g.jsx("div",{className:Ye("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold",f&&"bg-blue-600 text-white ring-4 ring-blue-100 dark:ring-blue-900",d&&"bg-green-500 text-white",p&&"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:d?"":l}),g.jsx("div",{className:Ye("text-[10px] mt-1 font-medium text-center w-20 truncate",f?"text-blue-600 dark:text-blue-400":"text-gray-400"),children:s.title})]}),a<r-1&&g.jsx("div",{className:Ye("h-1 flex-1 mx-[-10px] mt-[-14px] z-0 transition-all duration-500 rounded-full",e>l?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},a)})})})},OF=({mode:t,step:e,onBack:n,onNext:r,onFinish:s})=>{const a=ol[t],l=e-1,d=a.steps[l],f=a.steps.length,[p,v]=M.useState({}),w=(E,O)=>{v(S=>({...S,[E]:O}))},b=()=>{const E=d.inputs.reduce((O,S,P)=>{const B=p[P]||"";return S.key&&(O[S.key]=B),O},{});e<f?r(E):s(E)};return g.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[g.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:[a.label," Mode"]}),g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-8 min-h-[500px] flex flex-col",children:[g.jsx(jF,{mode:t,currentStep:e}),g.jsxs("div",{className:"flex-1 animate-fade-in",children:[g.jsxs("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-100",children:["Q",e,". ",d.title]}),g.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:d.description}),g.jsx("div",{className:"mb-8 space-y-4",children:d.inputs.map((E,O)=>g.jsx("div",{children:E.type==="textarea"?g.jsx("textarea",{className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",rows:5,placeholder:E.placeholder,value:p[O]||"",onChange:S=>w(O,S.target.value)}):g.jsx("input",{type:"text",className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",placeholder:E.placeholder,value:p[O]||"",onChange:S=>w(O,S.target.value)})},O))})]}),g.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[g.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition font-medium",children:""}),e<f?g.jsxs("button",{onClick:b,className:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-md transition font-medium flex items-center",children:["",g.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]}):g.jsxs("button",{onClick:b,className:"px-8 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 shadow-lg transition font-medium flex items-center transform hover:scale-105",children:[g.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),""]})]})]})]})},MF=({currentMode:t,onModeChange:e,onStart:n})=>{const r=ol[t],s={okr:["","",""],woop:["","",""],backward:["","",""]};return g.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-full max-h-[700px] flex flex-col py-6",children:[g.jsx("div",{className:"mb-4 flex-shrink-0",children:g.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[g.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),g.jsx("span",{className:"font-medium",children:""}),g.jsx("svg",{className:"w-3 h-3 mx-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),g.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:""})]})}),g.jsxs("div",{className:"mb-6 flex-shrink-0",children:[g.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:""}),g.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:Object.keys(ol).map(a=>g.jsx("button",{onClick:()=>e(a),className:Ye("flex-1 py-2 text-xs font-bold rounded-lg transition-all",t===a?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:ol[a].label},a))})]}),g.jsx("div",{className:"flex-1 mb-6 min-h-0",children:g.jsx("div",{className:"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden shadow-xl",children:g.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[g.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mb-4 shadow-lg flex-shrink-0",children:g.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),g.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 text-xl",children:r.label}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-2xl leading-relaxed",children:r.description}),g.jsx("div",{className:"mt-6 flex flex-wrap gap-2 justify-center",children:(s[t]||[]).map(a=>g.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300 shadow-sm",children:a},a))})]})})}),g.jsx("div",{className:"flex justify-center pb-4 flex-shrink-0",children:g.jsxs("button",{onClick:n,className:"group inline-flex items-center px-6 py-3 border-2 border-transparent shadow-xl font-bold rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition-all transform hover:scale-105 active:scale-95",children:[g.jsx("span",{children:""}),g.jsx("svg",{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},LF=()=>{const[t,e]=M.useState("backward"),[n,r]=M.useState(0),[s,a]=M.useState({}),{setFilter:l}=Rr(),d=v=>{a(w=>({...w,...v})),r(w=>w+1)},f=async v=>{const w={...s,...v};try{await h5({mode:t,data:w}),console.log("Wizard Completed, Saved to Firestore",w),alert(`${ol[t].label}`),r(0),a({}),l("target-dashboard")}catch(b){console.error("Failed to save wizard target:",b),alert("")}},p=()=>{r(v=>Math.max(0,v-1))};return n===0?g.jsx(MF,{currentMode:t,onModeChange:e,onStart:()=>r(1)}):g.jsx(OF,{mode:t,step:n,onBack:p,onNext:d,onFinish:f})},VF=t=>({sensors:Hx(Fm(Yh,{activationConstraint:{distance:5}})),handleDragEnd:async r=>{var f,p;const{active:s,over:a}=r;if(!a)return;const l=String(s.id),d=String(a.id);if(l.startsWith("task:")){const v=l.split(":")[1],w=(f=a.data.current)==null?void 0:f.type,b=(p=a.data.current)==null?void 0:p.value,E={};if(w==="project"&&(E.projectId=b),w==="inbox"&&(E.projectId=null),w==="timeblock"&&(E.timeBlockId=b==="unassigned"?null:b),Object.keys(E).length>0)try{await Uy(v,E)}catch(O){console.error("Failed to update task via dnd",O)}}if(l!==d&&!l.startsWith("task:")){const v=t.findIndex(b=>b.id===l),w=t.findIndex(b=>b.id===d);if(v!==-1&&w!==-1){const b=Df(t,v,w);await Promise.all(b.map((E,O)=>E.id?_I(E.id,{order:O}):Promise.resolve()))}}}}),FF=()=>{const{fontEn:t,fontJp:e,fontSize:n,density:r,themeMode:s}=zl(),{setSidebarDensity:a}=Ay();M.useEffect(()=>{const l=document.documentElement,d=()=>{s==="dark"?l.classList.add("dark"):s==="light"?l.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?l.classList.add("dark"):l.classList.remove("dark")};d();const f=window.matchMedia("(prefers-color-scheme: dark)"),p=()=>{s==="system"&&d()};return f.addEventListener("change",p),()=>f.removeEventListener("change",p)},[s]),M.useEffect(()=>{const l=document.documentElement;l.style.setProperty("--font-en",`"${t}"`),l.style.setProperty("--font-jp",`"${e}"`)},[t,e]),M.useEffect(()=>{const l=["font-app-sm","font-app-base","font-app-md","font-app-lg","font-app-xl"];document.body.classList.remove(...l),document.body.classList.add(`font-app-${n}`)},[n]),M.useEffect(()=>{const d=Object.values(Kh.DENSITY_LEVELS).map(f=>`app-density-${f}`);document.body.classList.remove(...d),document.body.classList.add(`app-density-${r}`),a(r)},[r,a])},zF=()=>{FF();const{filterType:t,targetId:e,query:n}=Rr(),{projects:r}=Af(),{labels:s}=$y(),[a,l]=nt.useState(null);nt.useEffect(()=>{const v=Hb(wt,b=>{l(b)}),w=b=>{const E=b.target,O=["INPUT","TEXTAREA"].includes(E.tagName)||E.closest("[contenteditable]"),S=document.querySelector('[role="dialog"]');if(b.key==="/"&&!O&&!S){const P=document.getElementById("page-search-input");P&&(b.preventDefault(),P.focus())}};return document.addEventListener("keydown",w),()=>{v(),document.removeEventListener("keydown",w)}},[]);const{sensors:d,handleDragEnd:f}=VF(r),p=()=>{var v,w;if(t==="project")return((v=r.find(b=>b.id===e))==null?void 0:v.name)||"Project";if(t==="label")return((w=s.find(b=>b.id===e))==null?void 0:w.name)||"Label";if(t==="search")return n?`"${n}" `:"";switch(t){case"inbox":return"Inbox";case"today":return"Today";case"upcoming":return"Upcoming";case"important":return"Important";case"all":return"All Tasks";default:return"TaskMg"}};return a?g.jsxs(ub,{sensors:d,collisionDetection:Zx,onDragEnd:f,children:[g.jsx(Tj,{}),g.jsx(eF,{}),g.jsx(CV,{sidebarContent:g.jsx(_F,{}),title:p(),children:t==="wizard"?g.jsx(LF,{}):t==="target-dashboard"?g.jsx(RF,{}):t==="wiki"?g.jsx(DF,{}):g.jsx(EF,{})})]}):g.jsx(DD,{})},UF=new dS,PI=document.getElementById("app");if(!PI)throw new Error("Failed to find the root element");_S.createRoot(PI).render(g.jsx(nt.StrictMode,{children:g.jsx(fS,{client:UF,children:g.jsx(zF,{})})}));
