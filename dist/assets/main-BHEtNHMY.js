var cS=Object.defineProperty;var h_=t=>{throw TypeError(t)};var uS=(t,e,n)=>e in t?cS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Fi=(t,e,n)=>uS(t,typeof e!="symbol"?e+"":e,n),ym=(t,e,n)=>e.has(t)||h_("Cannot "+n);var X=(t,e,n)=>(ym(t,e,"read from private field"),n?n.call(t):e.get(t)),Je=(t,e,n)=>e.has(t)?h_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),De=(t,e,n,r)=>(ym(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Sn=(t,e,n)=>(ym(t,e,"access private method"),n);var nh=(t,e,n,r)=>({set _(s){De(t,e,s,n)},get _(){return X(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function nx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vm={exports:{}},Ac={},_m={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function dS(){if(f_)return qe;f_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=w&&B[w]||B["@@iterator"],typeof B=="function"?B:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,E={};function A(B,$,se){this.props=B,this.context=$,this.refs=E,this.updater=se||I}A.prototype.isReactComponent={},A.prototype.setState=function(B,$){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,$,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=A.prototype;function W(B,$,se){this.props=B,this.context=$,this.refs=E,this.updater=se||I}var z=W.prototype=new j;z.constructor=W,C(z,A.prototype),z.isPureReactComponent=!0;var Z=Array.isArray,K=Object.prototype.hasOwnProperty,ne={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function T(B,$,se){var de,ke={},Se=null,Ee=null;if($!=null)for(de in $.ref!==void 0&&(Ee=$.ref),$.key!==void 0&&(Se=""+$.key),$)K.call($,de)&&!R.hasOwnProperty(de)&&(ke[de]=$[de]);var Me=arguments.length-2;if(Me===1)ke.children=se;else if(1<Me){for(var ze=Array(Me),Ce=0;Ce<Me;Ce++)ze[Ce]=arguments[Ce+2];ke.children=ze}if(B&&B.defaultProps)for(de in Me=B.defaultProps,Me)ke[de]===void 0&&(ke[de]=Me[de]);return{$$typeof:t,type:B,key:Se,ref:Ee,props:ke,_owner:ne.current}}function N(B,$){return{$$typeof:t,type:B.type,key:$,ref:B.ref,props:B.props,_owner:B._owner}}function M(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function L(B){var $={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(se){return $[se]})}var F=/\/+/g;function D(B,$){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):$.toString(36)}function $e(B,$,se,de,ke){var Se=typeof B;(Se==="undefined"||Se==="boolean")&&(B=null);var Ee=!1;if(B===null)Ee=!0;else switch(Se){case"string":case"number":Ee=!0;break;case"object":switch(B.$$typeof){case t:case e:Ee=!0}}if(Ee)return Ee=B,ke=ke(Ee),B=de===""?"."+D(Ee,0):de,Z(ke)?(se="",B!=null&&(se=B.replace(F,"$&/")+"/"),$e(ke,$,se,"",function(Ce){return Ce})):ke!=null&&(M(ke)&&(ke=N(ke,se+(!ke.key||Ee&&Ee.key===ke.key?"":(""+ke.key).replace(F,"$&/")+"/")+B)),$.push(ke)),1;if(Ee=0,de=de===""?".":de+":",Z(B))for(var Me=0;Me<B.length;Me++){Se=B[Me];var ze=de+D(Se,Me);Ee+=$e(Se,$,se,ze,ke)}else if(ze=x(B),typeof ze=="function")for(B=ze.call(B),Me=0;!(Se=B.next()).done;)Se=Se.value,ze=de+D(Se,Me++),Ee+=$e(Se,$,se,ze,ke);else if(Se==="object")throw $=String(B),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Ee}function nt(B,$,se){if(B==null)return B;var de=[],ke=0;return $e(B,de,"","",function(Se){return $.call(se,Se,ke++)}),de}function Ke(B){if(B._status===-1){var $=B._result;$=$(),$.then(function(se){(B._status===0||B._status===-1)&&(B._status=1,B._result=se)},function(se){(B._status===0||B._status===-1)&&(B._status=2,B._result=se)}),B._status===-1&&(B._status=0,B._result=$)}if(B._status===1)return B._result.default;throw B._result}var Ie={current:null},Y={transition:null},fe={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:Y,ReactCurrentOwner:ne};function ue(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:nt,forEach:function(B,$,se){nt(B,function(){$.apply(this,arguments)},se)},count:function(B){var $=0;return nt(B,function(){$++}),$},toArray:function(B){return nt(B,function($){return $})||[]},only:function(B){if(!M(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},qe.Component=A,qe.Fragment=n,qe.Profiler=s,qe.PureComponent=W,qe.StrictMode=r,qe.Suspense=h,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,qe.act=ue,qe.cloneElement=function(B,$,se){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var de=C({},B.props),ke=B.key,Se=B.ref,Ee=B._owner;if($!=null){if($.ref!==void 0&&(Se=$.ref,Ee=ne.current),$.key!==void 0&&(ke=""+$.key),B.type&&B.type.defaultProps)var Me=B.type.defaultProps;for(ze in $)K.call($,ze)&&!R.hasOwnProperty(ze)&&(de[ze]=$[ze]===void 0&&Me!==void 0?Me[ze]:$[ze])}var ze=arguments.length-2;if(ze===1)de.children=se;else if(1<ze){Me=Array(ze);for(var Ce=0;Ce<ze;Ce++)Me[Ce]=arguments[Ce+2];de.children=Me}return{$$typeof:t,type:B.type,key:ke,ref:Se,props:de,_owner:Ee}},qe.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},qe.createElement=T,qe.createFactory=function(B){var $=T.bind(null,B);return $.type=B,$},qe.createRef=function(){return{current:null}},qe.forwardRef=function(B){return{$$typeof:u,render:B}},qe.isValidElement=M,qe.lazy=function(B){return{$$typeof:v,_payload:{_status:-1,_result:B},_init:Ke}},qe.memo=function(B,$){return{$$typeof:m,type:B,compare:$===void 0?null:$}},qe.startTransition=function(B){var $=Y.transition;Y.transition={};try{B()}finally{Y.transition=$}},qe.unstable_act=ue,qe.useCallback=function(B,$){return Ie.current.useCallback(B,$)},qe.useContext=function(B){return Ie.current.useContext(B)},qe.useDebugValue=function(){},qe.useDeferredValue=function(B){return Ie.current.useDeferredValue(B)},qe.useEffect=function(B,$){return Ie.current.useEffect(B,$)},qe.useId=function(){return Ie.current.useId()},qe.useImperativeHandle=function(B,$,se){return Ie.current.useImperativeHandle(B,$,se)},qe.useInsertionEffect=function(B,$){return Ie.current.useInsertionEffect(B,$)},qe.useLayoutEffect=function(B,$){return Ie.current.useLayoutEffect(B,$)},qe.useMemo=function(B,$){return Ie.current.useMemo(B,$)},qe.useReducer=function(B,$,se){return Ie.current.useReducer(B,$,se)},qe.useRef=function(B){return Ie.current.useRef(B)},qe.useState=function(B){return Ie.current.useState(B)},qe.useSyncExternalStore=function(B,$,se){return Ie.current.useSyncExternalStore(B,$,se)},qe.useTransition=function(){return Ie.current.useTransition()},qe.version="18.3.1",qe}var p_;function Og(){return p_||(p_=1,_m.exports=dS()),_m.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function hS(){if(m_)return Ac;m_=1;var t=Og(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,m){var v,w={},x=null,I=null;m!==void 0&&(x=""+m),h.key!==void 0&&(x=""+h.key),h.ref!==void 0&&(I=h.ref);for(v in h)r.call(h,v)&&!a.hasOwnProperty(v)&&(w[v]=h[v]);if(u&&u.defaultProps)for(v in h=u.defaultProps,h)w[v]===void 0&&(w[v]=h[v]);return{$$typeof:e,type:u,key:x,ref:I,props:w,_owner:s.current}}return Ac.Fragment=n,Ac.jsx=l,Ac.jsxs=l,Ac}var g_;function fS(){return g_||(g_=1,vm.exports=hS()),vm.exports}var p=fS(),uf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},pS={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Qi,jg,Kb,mS=(Kb=class{constructor(){Je(this,Qi,pS);Je(this,jg,!1)}setTimeoutProvider(t){De(this,Qi,t)}setTimeout(t,e){return X(this,Qi).setTimeout(t,e)}clearTimeout(t){X(this,Qi).clearTimeout(t)}setInterval(t,e){return X(this,Qi).setInterval(t,e)}clearInterval(t){X(this,Qi).clearInterval(t)}},Qi=new WeakMap,jg=new WeakMap,Kb),qm=new mS;function gS(t){setTimeout(t,0)}var df=typeof window>"u"||"Deno"in globalThis;function Zr(){}function yS(t,e){return typeof t=="function"?t(e):t}function vS(t){return typeof t=="number"&&t>=0&&t!==1/0}function _S(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Hm(t,e){return typeof t=="function"?t(e):t}function wS(t,e){return typeof t=="function"?t(e):t}function y_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==Lg(l,e.options))return!1}else if(!Jc(e.queryKey,l))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function v_(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Zc(e.options.mutationKey)!==Zc(a))return!1}else if(!Jc(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Lg(t,e){return((e==null?void 0:e.queryKeyHashFn)||Zc)(t)}function Zc(t){return JSON.stringify(t,(e,n)=>Km(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Jc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Jc(t[n],e[n])):!1}var bS=Object.prototype.hasOwnProperty;function rx(t,e){if(t===e)return t;const n=__(t)&&__(e);if(!n&&!(Km(t)&&Km(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,u=n?new Array(l):{};let h=0;for(let m=0;m<l;m++){const v=n?m:a[m],w=t[v],x=e[v];if(w===x){u[v]=w,(n?m<s:bS.call(t,v))&&h++;continue}if(w===null||x===null||typeof w!="object"||typeof x!="object"){u[v]=x;continue}const I=rx(w,x);u[v]=I,I===w&&h++}return s===l&&h===s?t:u}function __(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Km(t){if(!w_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!w_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function w_(t){return Object.prototype.toString.call(t)==="[object Object]"}function xS(t){return new Promise(e=>{qm.setTimeout(e,t)})}function kS(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?rx(t,e):e}function ES(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function TS(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Mg=Symbol();function sx(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Mg?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function IS(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var Jo,Zi,ml,Gb,SS=(Gb=class extends uf{constructor(){super();Je(this,Jo);Je(this,Zi);Je(this,ml);De(this,ml,e=>{if(!df&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){X(this,Zi)||this.setEventListener(X(this,ml))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,Zi))==null||e.call(this),De(this,Zi,void 0))}setEventListener(e){var n;De(this,ml,e),(n=X(this,Zi))==null||n.call(this),De(this,Zi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){X(this,Jo)!==e&&(De(this,Jo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof X(this,Jo)=="boolean"?X(this,Jo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Jo=new WeakMap,Zi=new WeakMap,ml=new WeakMap,Gb),ix=new SS;function CS(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var AS=gS;function NS(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=AS;const a=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{n(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||l()}return h},batchCalls:u=>(...h)=>{a(()=>{u(...h)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Un=NS(),gl,Ji,yl,Qb,RS=(Qb=class extends uf{constructor(){super();Je(this,gl,!0);Je(this,Ji);Je(this,yl);De(this,yl,e=>{if(!df&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){X(this,Ji)||this.setEventListener(X(this,yl))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,Ji))==null||e.call(this),De(this,Ji,void 0))}setEventListener(e){var n;De(this,yl,e),(n=X(this,Ji))==null||n.call(this),De(this,Ji,e(this.setOnline.bind(this)))}setOnline(e){X(this,gl)!==e&&(De(this,gl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return X(this,gl)}},gl=new WeakMap,Ji=new WeakMap,yl=new WeakMap,Qb),Vh=new RS;function PS(t){return Math.min(1e3*2**t,3e4)}function ox(t){return(t??"online")==="online"?Vh.isOnline():!0}var Gm=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ax(t){let e=!1,n=0,r;const s=CS(),a=()=>s.status!=="pending",l=E=>{var A;if(!a()){const j=new Gm(E);x(j),(A=t.onCancel)==null||A.call(t,j)}},u=()=>{e=!0},h=()=>{e=!1},m=()=>ix.isFocused()&&(t.networkMode==="always"||Vh.isOnline())&&t.canRun(),v=()=>ox(t.networkMode)&&t.canRun(),w=E=>{a()||(r==null||r(),s.resolve(E))},x=E=>{a()||(r==null||r(),s.reject(E))},I=()=>new Promise(E=>{var A;r=j=>{(a()||m())&&E(j)},(A=t.onPause)==null||A.call(t)}).then(()=>{var E;r=void 0,a()||(E=t.onContinue)==null||E.call(t)}),C=()=>{if(a())return;let E;const A=n===0?t.initialPromise:void 0;try{E=A??t.fn()}catch(j){E=Promise.reject(j)}Promise.resolve(E).then(w).catch(j=>{var ne;if(a())return;const W=t.retry??(df?0:3),z=t.retryDelay??PS,Z=typeof z=="function"?z(n,j):z,K=W===!0||typeof W=="number"&&n<W||typeof W=="function"&&W(n,j);if(e||!K){x(j);return}n++,(ne=t.onFail)==null||ne.call(t,n,j),xS(Z).then(()=>m()?void 0:I()).then(()=>{e?x(j):C()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r==null||r(),s),cancelRetry:u,continueRetry:h,canStart:v,start:()=>(v()?C():I().then(C),s)}}var Yo,Zb,lx=(Zb=class{constructor(){Je(this,Yo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vS(this.gcTime)&&De(this,Yo,qm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(df?1/0:300*1e3))}clearGcTimeout(){X(this,Yo)&&(qm.clearTimeout(X(this,Yo)),De(this,Yo,void 0))}},Yo=new WeakMap,Zb),Xo,vl,Nr,ea,an,yu,ta,Jr,Ks,Jb,DS=(Jb=class extends lx{constructor(n){super();Je(this,Jr);Je(this,Xo);Je(this,vl);Je(this,Nr);Je(this,ea);Je(this,an);Je(this,yu);Je(this,ta);De(this,ta,!1),De(this,yu,n.defaultOptions),this.setOptions(n.options),this.observers=[],De(this,ea,n.client),De(this,Nr,X(this,ea).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,De(this,Xo,x_(this.options)),this.state=n.state??X(this,Xo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=X(this,an))==null?void 0:n.promise}setOptions(n){if(this.options={...X(this,yu),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=x_(this.options);r.data!==void 0&&(this.setState(b_(r.data,r.dataUpdatedAt)),De(this,Xo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&X(this,Nr).remove(this)}setData(n,r){const s=kS(this.state.data,n,this.options);return Sn(this,Jr,Ks).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Sn(this,Jr,Ks).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=X(this,an))==null?void 0:s.promise;return(a=X(this,an))==null||a.cancel(n),r?r.then(Zr).catch(Zr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(X(this,Xo))}isActive(){return this.observers.some(n=>wS(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Mg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Hm(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!_S(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=X(this,an))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=X(this,an))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),X(this,Nr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(X(this,an)&&(X(this,ta)?X(this,an).cancel({revert:!0}):X(this,an).cancelRetry()),this.scheduleGc()),X(this,Nr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Sn(this,Jr,Ks).call(this,{type:"invalidate"})}async fetch(n,r){var m,v,w,x,I,C,E,A,j,W,z,Z;if(this.state.fetchStatus!=="idle"&&((m=X(this,an))==null?void 0:m.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(X(this,an))return X(this,an).continueRetry(),X(this,an).promise}if(n&&this.setOptions(n),!this.options.queryFn){const K=this.observers.find(ne=>ne.options.queryFn);K&&this.setOptions(K.options)}const s=new AbortController,a=K=>{Object.defineProperty(K,"signal",{enumerable:!0,get:()=>(De(this,ta,!0),s.signal)})},l=()=>{const K=sx(this.options,r),R=(()=>{const T={client:X(this,ea),queryKey:this.queryKey,meta:this.meta};return a(T),T})();return De(this,ta,!1),this.options.persister?this.options.persister(K,R,this):K(R)},h=(()=>{const K={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:X(this,ea),state:this.state,fetchFn:l};return a(K),K})();(v=this.options.behavior)==null||v.onFetch(h,this),De(this,vl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((w=h.fetchOptions)==null?void 0:w.meta))&&Sn(this,Jr,Ks).call(this,{type:"fetch",meta:(x=h.fetchOptions)==null?void 0:x.meta}),De(this,an,ax({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,onCancel:K=>{K instanceof Gm&&K.revert&&this.setState({...X(this,vl),fetchStatus:"idle"}),s.abort()},onFail:(K,ne)=>{Sn(this,Jr,Ks).call(this,{type:"failed",failureCount:K,error:ne})},onPause:()=>{Sn(this,Jr,Ks).call(this,{type:"pause"})},onContinue:()=>{Sn(this,Jr,Ks).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0}));try{const K=await X(this,an).start();if(K===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(K),(C=(I=X(this,Nr).config).onSuccess)==null||C.call(I,K,this),(A=(E=X(this,Nr).config).onSettled)==null||A.call(E,K,this.state.error,this),K}catch(K){if(K instanceof Gm){if(K.silent)return X(this,an).promise;if(K.revert){if(this.state.data===void 0)throw K;return this.state.data}}throw Sn(this,Jr,Ks).call(this,{type:"error",error:K}),(W=(j=X(this,Nr).config).onError)==null||W.call(j,K,this),(Z=(z=X(this,Nr).config).onSettled)==null||Z.call(z,this.state.data,K,this),K}finally{this.scheduleGc()}}},Xo=new WeakMap,vl=new WeakMap,Nr=new WeakMap,ea=new WeakMap,an=new WeakMap,yu=new WeakMap,ta=new WeakMap,Jr=new WeakSet,Ks=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...jS(s.data,this.options),fetchMeta:n.meta??null};case"success":const a={...s,...b_(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return De(this,vl,n.manual?a:void 0),a;case"error":const l=n.error;return{...s,error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Un.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),X(this,Nr).notify({query:this,type:"updated",action:n})})},Jb);function jS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ox(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function b_(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function x_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function k_(t){return{onFetch:(e,n)=>{var v,w,x,I,C;const r=e.options,s=(x=(w=(v=e.fetchOptions)==null?void 0:v.meta)==null?void 0:w.fetchMore)==null?void 0:x.direction,a=((I=e.state.data)==null?void 0:I.pages)||[],l=((C=e.state.data)==null?void 0:C.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const m=async()=>{let E=!1;const A=z=>{IS(z,()=>e.signal,()=>E=!0)},j=sx(e.options,e.fetchOptions),W=async(z,Z,K)=>{if(E)return Promise.reject();if(Z==null&&z.pages.length)return Promise.resolve(z);const R=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:Z,direction:K?"backward":"forward",meta:e.options.meta};return A(L),L})(),T=await j(R),{maxPages:N}=e.options,M=K?TS:ES;return{pages:M(z.pages,T,N),pageParams:M(z.pageParams,Z,N)}};if(s&&a.length){const z=s==="backward",Z=z?OS:E_,K={pages:a,pageParams:l},ne=Z(r,K);u=await W(K,ne,z)}else{const z=t??a.length;do{const Z=h===0?l[0]??r.initialPageParam:E_(r,u);if(h>0&&Z==null)break;u=await W(u,Z),h++}while(h<z)}return u};e.options.persister?e.fetchFn=()=>{var E,A;return(A=(E=e.options).persister)==null?void 0:A.call(E,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=m}}}function E_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function OS(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var vu,gs,zn,na,ys,$i,Yb,LS=(Yb=class extends lx{constructor(n){super();Je(this,ys);Je(this,vu);Je(this,gs);Je(this,zn);Je(this,na);De(this,vu,n.client),this.mutationId=n.mutationId,De(this,zn,n.mutationCache),De(this,gs,[]),this.state=n.state||MS(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){X(this,gs).includes(n)||(X(this,gs).push(n),this.clearGcTimeout(),X(this,zn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){De(this,gs,X(this,gs).filter(r=>r!==n)),this.scheduleGc(),X(this,zn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){X(this,gs).length||(this.state.status==="pending"?this.scheduleGc():X(this,zn).remove(this))}continue(){var n;return((n=X(this,na))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var u,h,m,v,w,x,I,C,E,A,j,W,z,Z,K,ne,R,T,N,M;const r=()=>{Sn(this,ys,$i).call(this,{type:"continue"})},s={client:X(this,vu),meta:this.options.meta,mutationKey:this.options.mutationKey};De(this,na,ax({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(L,F)=>{Sn(this,ys,$i).call(this,{type:"failed",failureCount:L,error:F})},onPause:()=>{Sn(this,ys,$i).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>X(this,zn).canRun(this)}));const a=this.state.status==="pending",l=!X(this,na).canStart();try{if(a)r();else{Sn(this,ys,$i).call(this,{type:"pending",variables:n,isPaused:l}),await((h=(u=X(this,zn).config).onMutate)==null?void 0:h.call(u,n,this,s));const F=await((v=(m=this.options).onMutate)==null?void 0:v.call(m,n,s));F!==this.state.context&&Sn(this,ys,$i).call(this,{type:"pending",context:F,variables:n,isPaused:l})}const L=await X(this,na).start();return await((x=(w=X(this,zn).config).onSuccess)==null?void 0:x.call(w,L,n,this.state.context,this,s)),await((C=(I=this.options).onSuccess)==null?void 0:C.call(I,L,n,this.state.context,s)),await((A=(E=X(this,zn).config).onSettled)==null?void 0:A.call(E,L,null,this.state.variables,this.state.context,this,s)),await((W=(j=this.options).onSettled)==null?void 0:W.call(j,L,null,n,this.state.context,s)),Sn(this,ys,$i).call(this,{type:"success",data:L}),L}catch(L){try{await((Z=(z=X(this,zn).config).onError)==null?void 0:Z.call(z,L,n,this.state.context,this,s))}catch(F){Promise.reject(F)}try{await((ne=(K=this.options).onError)==null?void 0:ne.call(K,L,n,this.state.context,s))}catch(F){Promise.reject(F)}try{await((T=(R=X(this,zn).config).onSettled)==null?void 0:T.call(R,void 0,L,this.state.variables,this.state.context,this,s))}catch(F){Promise.reject(F)}try{await((M=(N=this.options).onSettled)==null?void 0:M.call(N,void 0,L,n,this.state.context,s))}catch(F){Promise.reject(F)}throw Sn(this,ys,$i).call(this,{type:"error",error:L}),L}finally{X(this,zn).runNext(this)}}},vu=new WeakMap,gs=new WeakMap,zn=new WeakMap,na=new WeakMap,ys=new WeakSet,$i=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Un.batch(()=>{X(this,gs).forEach(s=>{s.onMutationUpdate(n)}),X(this,zn).notify({mutation:this,type:"updated",action:n})})},Yb);function MS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qs,Yr,_u,Xb,VS=(Xb=class extends uf{constructor(e={}){super();Je(this,Qs);Je(this,Yr);Je(this,_u);this.config=e,De(this,Qs,new Set),De(this,Yr,new Map),De(this,_u,0)}build(e,n,r){const s=new LS({client:e,mutationCache:this,mutationId:++nh(this,_u)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){X(this,Qs).add(e);const n=rh(e);if(typeof n=="string"){const r=X(this,Yr).get(n);r?r.push(e):X(this,Yr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(X(this,Qs).delete(e)){const n=rh(e);if(typeof n=="string"){const r=X(this,Yr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&X(this,Yr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=rh(e);if(typeof n=="string"){const r=X(this,Yr).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=rh(e);if(typeof n=="string"){const s=(r=X(this,Yr).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Un.batch(()=>{X(this,Qs).forEach(e=>{this.notify({type:"removed",mutation:e})}),X(this,Qs).clear(),X(this,Yr).clear()})}getAll(){return Array.from(X(this,Qs))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>v_(n,r))}findAll(e={}){return this.getAll().filter(n=>v_(e,n))}notify(e){Un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Un.batch(()=>Promise.all(e.map(n=>n.continue().catch(Zr))))}},Qs=new WeakMap,Yr=new WeakMap,_u=new WeakMap,Xb);function rh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var vs,ex,FS=(ex=class extends uf{constructor(e={}){super();Je(this,vs);this.config=e,De(this,vs,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??Lg(s,n);let l=this.get(a);return l||(l=new DS({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){X(this,vs).has(e.queryHash)||(X(this,vs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=X(this,vs).get(e.queryHash);n&&(e.destroy(),n===e&&X(this,vs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return X(this,vs).get(e)}getAll(){return[...X(this,vs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>y_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>y_(e,r)):n}notify(e){Un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},vs=new WeakMap,ex),Dt,Yi,Xi,_l,wl,eo,bl,xl,tx,zS=(tx=class{constructor(t={}){Je(this,Dt);Je(this,Yi);Je(this,Xi);Je(this,_l);Je(this,wl);Je(this,eo);Je(this,bl);Je(this,xl);De(this,Dt,t.queryCache||new FS),De(this,Yi,t.mutationCache||new VS),De(this,Xi,t.defaultOptions||{}),De(this,_l,new Map),De(this,wl,new Map),De(this,eo,0)}mount(){nh(this,eo)._++,X(this,eo)===1&&(De(this,bl,ix.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,Dt).onFocus())})),De(this,xl,Vh.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,Dt).onOnline())})))}unmount(){var t,e;nh(this,eo)._--,X(this,eo)===0&&((t=X(this,bl))==null||t.call(this),De(this,bl,void 0),(e=X(this,xl))==null||e.call(this),De(this,xl,void 0))}isFetching(t){return X(this,Dt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return X(this,Yi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,Dt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=X(this,Dt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Hm(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return X(this,Dt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=X(this,Dt).get(r.queryHash),a=s==null?void 0:s.state.data,l=yS(e,a);if(l!==void 0)return X(this,Dt).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Un.batch(()=>X(this,Dt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,Dt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=X(this,Dt);Un.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=X(this,Dt);return Un.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Un.batch(()=>X(this,Dt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Zr).catch(Zr)}invalidateQueries(t,e={}){return Un.batch(()=>(X(this,Dt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Un.batch(()=>X(this,Dt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Zr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Zr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=X(this,Dt).build(this,e);return n.isStaleByTime(Hm(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Zr).catch(Zr)}fetchInfiniteQuery(t){return t.behavior=k_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Zr).catch(Zr)}ensureInfiniteQueryData(t){return t.behavior=k_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Vh.isOnline()?X(this,Yi).resumePausedMutations():Promise.resolve()}getQueryCache(){return X(this,Dt)}getMutationCache(){return X(this,Yi)}getDefaultOptions(){return X(this,Xi)}setDefaultOptions(t){De(this,Xi,t)}setQueryDefaults(t,e){X(this,_l).set(Zc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...X(this,_l).values()],n={};return e.forEach(r=>{Jc(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){X(this,wl).set(Zc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...X(this,wl).values()],n={};return e.forEach(r=>{Jc(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...X(this,Xi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Lg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Mg&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...X(this,Xi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){X(this,Dt).clear(),X(this,Yi).clear()}},Dt=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,_l=new WeakMap,wl=new WeakMap,eo=new WeakMap,bl=new WeakMap,xl=new WeakMap,tx),O=Og();const He=nx(O);var US=O.createContext(void 0),$S=({client:t,children:e})=>(O.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(US.Provider,{value:t,children:e})),sh={},wm={exports:{}},tr={},bm={exports:{}},xm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function BS(){return T_||(T_=1,(function(t){function e(Y,fe){var ue=Y.length;Y.push(fe);e:for(;0<ue;){var B=ue-1>>>1,$=Y[B];if(0<s($,fe))Y[B]=fe,Y[ue]=$,ue=B;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var fe=Y[0],ue=Y.pop();if(ue!==fe){Y[0]=ue;e:for(var B=0,$=Y.length,se=$>>>1;B<se;){var de=2*(B+1)-1,ke=Y[de],Se=de+1,Ee=Y[Se];if(0>s(ke,ue))Se<$&&0>s(Ee,ke)?(Y[B]=Ee,Y[Se]=ue,B=Se):(Y[B]=ke,Y[de]=ue,B=de);else if(Se<$&&0>s(Ee,ue))Y[B]=Ee,Y[Se]=ue,B=Se;else break e}}return fe}function s(Y,fe){var ue=Y.sortIndex-fe.sortIndex;return ue!==0?ue:Y.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var h=[],m=[],v=1,w=null,x=3,I=!1,C=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(Y){for(var fe=n(m);fe!==null;){if(fe.callback===null)r(m);else if(fe.startTime<=Y)r(m),fe.sortIndex=fe.expirationTime,e(h,fe);else break;fe=n(m)}}function Z(Y){if(E=!1,z(Y),!C)if(n(h)!==null)C=!0,Ke(K);else{var fe=n(m);fe!==null&&Ie(Z,fe.startTime-Y)}}function K(Y,fe){C=!1,E&&(E=!1,j(T),T=-1),I=!0;var ue=x;try{for(z(fe),w=n(h);w!==null&&(!(w.expirationTime>fe)||Y&&!L());){var B=w.callback;if(typeof B=="function"){w.callback=null,x=w.priorityLevel;var $=B(w.expirationTime<=fe);fe=t.unstable_now(),typeof $=="function"?w.callback=$:w===n(h)&&r(h),z(fe)}else r(h);w=n(h)}if(w!==null)var se=!0;else{var de=n(m);de!==null&&Ie(Z,de.startTime-fe),se=!1}return se}finally{w=null,x=ue,I=!1}}var ne=!1,R=null,T=-1,N=5,M=-1;function L(){return!(t.unstable_now()-M<N)}function F(){if(R!==null){var Y=t.unstable_now();M=Y;var fe=!0;try{fe=R(!0,Y)}finally{fe?D():(ne=!1,R=null)}}else ne=!1}var D;if(typeof W=="function")D=function(){W(F)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,nt=$e.port2;$e.port1.onmessage=F,D=function(){nt.postMessage(null)}}else D=function(){A(F,0)};function Ke(Y){R=Y,ne||(ne=!0,D())}function Ie(Y,fe){T=A(function(){Y(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){C||I||(C=!0,Ke(K))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Y){switch(x){case 1:case 2:case 3:var fe=3;break;default:fe=x}var ue=x;x=fe;try{return Y()}finally{x=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,fe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ue=x;x=Y;try{return fe()}finally{x=ue}},t.unstable_scheduleCallback=function(Y,fe,ue){var B=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?B+ue:B):ue=B,Y){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ue+$,Y={id:v++,callback:fe,priorityLevel:Y,startTime:ue,expirationTime:$,sortIndex:-1},ue>B?(Y.sortIndex=ue,e(m,Y),n(h)===null&&Y===n(m)&&(E?(j(T),T=-1):E=!0,Ie(Z,ue-B))):(Y.sortIndex=$,e(h,Y),C||I||(C=!0,Ke(K))),Y},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(Y){var fe=x;return function(){var ue=x;x=fe;try{return Y.apply(this,arguments)}finally{x=ue}}}})(xm)),xm}var I_;function WS(){return I_||(I_=1,bm.exports=BS()),bm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function qS(){if(S_)return tr;S_=1;var t=Og(),e=WS();function n(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function x(i){return h.call(w,i)?!0:h.call(v,i)?!1:m.test(i)?w[i]=!0:(v[i]=!0,!1)}function I(i,o,c,f){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function C(i,o,c,f){if(o===null||typeof o>"u"||I(i,o,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function E(i,o,c,f,g,_,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=i,this.type=o,this.sanitizeURL=_,this.removeEmptyString=k}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new E(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];A[o]=new E(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new E(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new E(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new E(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new E(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new E(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new E(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new E(i,5,!1,i.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function W(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(j,W);A[o]=new E(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(j,W);A[o]=new E(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(j,W);A[o]=new E(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new E(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new E(i,1,!1,i.toLowerCase(),null,!0,!0)});function z(i,o,c,f){var g=A.hasOwnProperty(o)?A[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(C(o,c,g,f)&&(c=null),f||g===null?x(o)&&(c===null?i.removeAttribute(o):i.setAttribute(o,""+c)):g.mustUseProperty?i[g.propertyName]=c===null?g.type===3?!1:"":c:(o=g.attributeName,f=g.attributeNamespace,c===null?i.removeAttribute(o):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,f?i.setAttributeNS(f,o,c):i.setAttribute(o,c))))}var Z=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),ne=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),nt=Symbol.for("react.memo"),Ke=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),Y=Symbol.iterator;function fe(i){return i===null||typeof i!="object"?null:(i=Y&&i[Y]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,B;function $(i){if(B===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+i}var se=!1;function de(i,o){if(!i||se)return"";se=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Q){var f=Q}Reflect.construct(i,[],o)}else{try{o.call()}catch(Q){f=Q}i.call(o.prototype)}else{try{throw Error()}catch(Q){f=Q}i()}}catch(Q){if(Q&&f&&typeof Q.stack=="string"){for(var g=Q.stack.split(`
`),_=f.stack.split(`
`),k=g.length-1,P=_.length-1;1<=k&&0<=P&&g[k]!==_[P];)P--;for(;1<=k&&0<=P;k--,P--)if(g[k]!==_[P]){if(k!==1||P!==1)do if(k--,P--,0>P||g[k]!==_[P]){var V=`
`+g[k].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=k&&0<=P);break}}}finally{se=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?$(i):""}function ke(i){switch(i.tag){case 5:return $(i.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return i=de(i.type,!1),i;case 11:return i=de(i.type.render,!1),i;case 1:return i=de(i.type,!0),i;default:return""}}function Se(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case ne:return"Portal";case N:return"Profiler";case T:return"StrictMode";case D:return"Suspense";case $e:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case M:return(i._context.displayName||"Context")+".Provider";case F:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case nt:return o=i.displayName||null,o!==null?o:Se(i.type)||"Memo";case Ke:o=i._payload,i=i._init;try{return Se(i(o))}catch{}}return null}function Ee(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Se(o);case 8:return o===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Me(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ze(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ce(i){var o=ze(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,_=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(k){f=""+k,_.call(this,k)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Kt(i){i._valueTracker||(i._valueTracker=Ce(i))}function Nt(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return i&&(f=ze(i)?i.checked?"true":"false":i.value),i=f,i!==c?(o.setValue(i),!0):!1}function Dn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function dn(i,o){var c=o.checked;return ue({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function ar(i,o){var c=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;c=Me(o.value!=null?o.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function vr(i,o){o=o.checked,o!=null&&z(i,"checked",o,!1)}function hi(i,o){vr(i,o);var c=Me(o.value),f=o.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?rs(i,o.type,c):o.hasOwnProperty("defaultValue")&&rs(i,o.type,Me(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function wo(i,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,c||o===i.value||(i.value=o),i.defaultValue=o}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function rs(i,o,c){(o!=="number"||Dn(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var tn=Array.isArray;function qn(i,o,c,f){if(i=i.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=o.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+Me(c),o=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function ss(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return ue({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ns(i,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(n(92));if(tn(c)){if(1<c.length)throw Error(n(93));c=c[0]}o=c}o==null&&(o=""),c=o}i._wrapperState={initialValue:Me(c)}}function Rs(i,o){var c=Me(o.value),f=Me(o.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),o.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function bo(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Ot(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Ot(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var bn,jr=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,f,g){MSApp.execUnsafeLocalFunction(function(){return i(o,c,f,g)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(bn=bn||document.createElement("div"),bn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=bn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Or(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var xn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},is=["Webkit","ms","Moz","O"];Object.keys(xn).forEach(function(i){is.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),xn[o]=xn[i]})});function xo(i,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||xn.hasOwnProperty(i)&&xn[i]?(""+o).trim():o+"px"}function ko(i,o){i=i.style;for(var c in o)if(o.hasOwnProperty(c)){var f=c.indexOf("--")===0,g=xo(c,o[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,g):i[c]=g}}var Ps=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fi(i,o){if(o){if(Ps[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function Eo(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var os=null;function pi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mi=null,Hn=null,ut=null;function Ft(i){if(i=pc(i)){if(typeof mi!="function")throw Error(n(280));var o=i.stateNode;o&&(o=yd(o),mi(i.stateNode,i.type,o))}}function wt(i){Hn?ut?ut.push(i):ut=[i]:Hn=i}function Kn(){if(Hn){var i=Hn,o=ut;if(ut=Hn=null,Ft(i),o)for(i=0;i<o.length;i++)Ft(o[i])}}function zt(i,o){return i(o)}function Gt(){}var Ut=!1;function _r(i,o,c){if(Ut)return i(o,c);Ut=!0;try{return zt(i,o,c)}finally{Ut=!1,(Hn!==null||ut!==null)&&(Gt(),Kn())}}function Be(i,o){var c=i.stateNode;if(c===null)return null;var f=yd(c);if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var jn=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){jn=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{jn=!1}function hn(i,o,c,f,g,_,k,P,V){var Q=Array.prototype.slice.call(arguments,3);try{o.apply(c,Q)}catch(ie){this.onError(ie)}}var lr=!1,wr=null,$t=!1,Lr=null,To={onError:function(i){lr=!0,wr=i}};function ya(i,o,c,f,g,_,k,P,V){lr=!1,wr=null,hn.apply(To,arguments)}function $u(i,o,c,f,g,_,k,P,V){if(ya.apply(this,arguments),lr){if(lr){var Q=wr;lr=!1,wr=null}else throw Error(n(198));$t||($t=!0,Lr=Q)}}function Mr(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function Io(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Vr(i){if(Mr(i)!==i)throw Error(n(188))}function Bu(i){var o=i.alternate;if(!o){if(o=Mr(i),o===null)throw Error(n(188));return o!==i?null:i}for(var c=i,f=o;;){var g=c.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===c)return Vr(g),i;if(_===f)return Vr(g),o;_=_.sibling}throw Error(n(188))}if(c.return!==f.return)c=g,f=_;else{for(var k=!1,P=g.child;P;){if(P===c){k=!0,c=g,f=_;break}if(P===f){k=!0,f=g,c=_;break}P=P.sibling}if(!k){for(P=_.child;P;){if(P===c){k=!0,c=_,f=g;break}if(P===f){k=!0,f=_,c=g;break}P=P.sibling}if(!k)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:o}function Ql(i){return i=Bu(i),i!==null?va(i):null}function va(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=va(i);if(o!==null)return o;i=i.sibling}return null}var _a=e.unstable_scheduleCallback,Zl=e.unstable_cancelCallback,Wu=e.unstable_shouldYield,Hf=e.unstable_requestPaint,ft=e.unstable_now,qu=e.unstable_getCurrentPriorityLevel,So=e.unstable_ImmediatePriority,gi=e.unstable_UserBlockingPriority,br=e.unstable_NormalPriority,Jl=e.unstable_LowPriority,Hu=e.unstable_IdlePriority,Co=null,cr=null;function Ku(i){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Co,i,void 0,(i.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:Qu,Yl=Math.log,Gu=Math.LN2;function Qu(i){return i>>>=0,i===0?32:31-(Yl(i)/Gu|0)|0}var wa=64,ba=4194304;function yi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ao(i,o){var c=i.pendingLanes;if(c===0)return 0;var f=0,g=i.suspendedLanes,_=i.pingedLanes,k=c&268435455;if(k!==0){var P=k&~g;P!==0?f=yi(P):(_&=k,_!==0&&(f=yi(_)))}else k=c&~g,k!==0?f=yi(k):_!==0&&(f=yi(_));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,_=o&-o,g>=_||g===16&&(_&4194240)!==0))return o;if((f&4)!==0&&(f|=c&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)c=31-On(o),g=1<<c,f|=i[c],o&=~g;return f}function Kf(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ds(i,o){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes;0<_;){var k=31-On(_),P=1<<k,V=g[k];V===-1?((P&c)===0||(P&f)!==0)&&(g[k]=Kf(P,o)):V<=o&&(i.expiredLanes|=P),_&=~P}}function ur(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function No(){var i=wa;return wa<<=1,(wa&4194240)===0&&(wa=64),i}function vi(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function _i(i,o,c){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-On(o),i[o]=c}function dt(i,o){var c=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var g=31-On(c),_=1<<g;o[g]=0,f[g]=-1,i[g]=-1,c&=~_}}function wi(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var f=31-On(c),g=1<<f;g&o|i[f]&o&&(i[f]|=o),c&=~g}}var Ze=0;function bi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Zu,xa,Ju,Yu,Xu,Xl=!1,as=[],fn=null,Fr=null,zr=null,xi=new Map,xr=new Map,ls=[],Gf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ed(i,o){switch(i){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":xi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":xr.delete(o.pointerId)}}function Gn(i,o,c,f,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},o!==null&&(o=pc(o),o!==null&&xa(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function Qf(i,o,c,f,g){switch(o){case"focusin":return fn=Gn(fn,i,o,c,f,g),!0;case"dragenter":return Fr=Gn(Fr,i,o,c,f,g),!0;case"mouseover":return zr=Gn(zr,i,o,c,f,g),!0;case"pointerover":var _=g.pointerId;return xi.set(_,Gn(xi.get(_)||null,i,o,c,f,g)),!0;case"gotpointercapture":return _=g.pointerId,xr.set(_,Gn(xr.get(_)||null,i,o,c,f,g)),!0}return!1}function td(i){var o=Oo(i.target);if(o!==null){var c=Mr(o);if(c!==null){if(o=c.tag,o===13){if(o=Io(c),o!==null){i.blockedOn=o,Xu(i.priority,function(){Ju(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function js(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=ka(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);os=f,c.target.dispatchEvent(f),os=null}else return o=pc(c),o!==null&&xa(o),i.blockedOn=c,!1;o.shift()}return!0}function Ro(i,o,c){js(i)&&c.delete(o)}function nd(){Xl=!1,fn!==null&&js(fn)&&(fn=null),Fr!==null&&js(Fr)&&(Fr=null),zr!==null&&js(zr)&&(zr=null),xi.forEach(Ro),xr.forEach(Ro)}function Ur(i,o){i.blockedOn===o&&(i.blockedOn=null,Xl||(Xl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nd)))}function $r(i){function o(g){return Ur(g,i)}if(0<as.length){Ur(as[0],i);for(var c=1;c<as.length;c++){var f=as[c];f.blockedOn===i&&(f.blockedOn=null)}}for(fn!==null&&Ur(fn,i),Fr!==null&&Ur(Fr,i),zr!==null&&Ur(zr,i),xi.forEach(o),xr.forEach(o),c=0;c<ls.length;c++)f=ls[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<ls.length&&(c=ls[0],c.blockedOn===null);)td(c),c.blockedOn===null&&ls.shift()}var Os=Z.ReactCurrentBatchConfig,ki=!0;function bt(i,o,c,f){var g=Ze,_=Os.transition;Os.transition=null;try{Ze=1,ec(i,o,c,f)}finally{Ze=g,Os.transition=_}}function Zf(i,o,c,f){var g=Ze,_=Os.transition;Os.transition=null;try{Ze=4,ec(i,o,c,f)}finally{Ze=g,Os.transition=_}}function ec(i,o,c,f){if(ki){var g=ka(i,o,c,f);if(g===null)ap(i,o,f,Po,c),ed(i,f);else if(Qf(g,i,o,c,f))f.stopPropagation();else if(ed(i,f),o&4&&-1<Gf.indexOf(i)){for(;g!==null;){var _=pc(g);if(_!==null&&Zu(_),_=ka(i,o,c,f),_===null&&ap(i,o,f,Po,c),_===g)break;g=_}g!==null&&f.stopPropagation()}else ap(i,o,f,null,c)}}var Po=null;function ka(i,o,c,f){if(Po=null,i=pi(f),i=Oo(i),i!==null)if(o=Mr(i),o===null)i=null;else if(c=o.tag,c===13){if(i=Io(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Po=i,null}function tc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qu()){case So:return 1;case gi:return 4;case br:case Jl:return 16;case Hu:return 536870912;default:return 16}default:return 16}}var dr=null,Ea=null,Qn=null;function nc(){if(Qn)return Qn;var i,o=Ea,c=o.length,f,g="value"in dr?dr.value:dr.textContent,_=g.length;for(i=0;i<c&&o[i]===g[i];i++);var k=c-i;for(f=1;f<=k&&o[c-f]===g[_-f];f++);return Qn=g.slice(i,1<f?1-f:void 0)}function Ta(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function cs(){return!0}function rc(){return!1}function pn(i){function o(c,f,g,_,k){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=k,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(c=i[P],this[P]=c?c(_):_[P]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?cs:rc,this.isPropagationStopped=rc,this}return ue(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=cs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=cs)},persist:function(){},isPersistent:cs}),o}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ia=pn(Br),us=ue({},Br,{view:0,detail:0}),Jf=pn(us),Sa,Ls,Ei,Do=ue({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ds,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ei&&(Ei&&i.type==="mousemove"?(Sa=i.screenX-Ei.screenX,Ls=i.screenY-Ei.screenY):Ls=Sa=0,Ei=i),Sa)},movementY:function(i){return"movementY"in i?i.movementY:Ls}}),Ca=pn(Do),sc=ue({},Do,{dataTransfer:0}),rd=pn(sc),Aa=ue({},us,{relatedTarget:0}),Na=pn(Aa),sd=ue({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Ms=pn(sd),id=ue({},Br,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),od=pn(id),ad=ue({},Br,{data:0}),ic=pn(ad),Ra={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ld={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cd(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=ld[i])?!!o[i]:!1}function ds(){return cd}var d=ue({},us,{key:function(i){if(i.key){var o=Ra[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Ta(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ln[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ds,charCode:function(i){return i.type==="keypress"?Ta(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ta(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),y=pn(d),b=ue({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=pn(b),q=ue({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ds}),J=pn(q),ce=ue({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),at=pn(ce),Qt=ue({},Do,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),et=pn(Qt),nn=[9,13,27,32],Bt=u&&"CompositionEvent"in window,kr=null;u&&"documentMode"in document&&(kr=document.documentMode);var hr=u&&"TextEvent"in window&&!kr,jo=u&&(!Bt||kr&&8<kr&&11>=kr),Pa=" ",o0=!1;function a0(i,o){switch(i){case"keyup":return nn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Da=!1;function oI(i,o){switch(i){case"compositionend":return l0(o);case"keypress":return o.which!==32?null:(o0=!0,Pa);case"textInput":return i=o.data,i===Pa&&o0?null:i;default:return null}}function aI(i,o){if(Da)return i==="compositionend"||!Bt&&a0(i,o)?(i=nc(),Qn=Ea=dr=null,Da=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return jo&&o.locale!=="ko"?null:o.data;default:return null}}var lI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c0(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!lI[i.type]:o==="textarea"}function u0(i,o,c,f){wt(f),o=pd(o,"onChange"),0<o.length&&(c=new Ia("onChange","change",null,c,f),i.push({event:c,listeners:o}))}var oc=null,ac=null;function cI(i){C0(i,0)}function ud(i){var o=Va(i);if(Nt(o))return i}function uI(i,o){if(i==="change")return o}var d0=!1;if(u){var Yf;if(u){var Xf="oninput"in document;if(!Xf){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),Xf=typeof h0.oninput=="function"}Yf=Xf}else Yf=!1;d0=Yf&&(!document.documentMode||9<document.documentMode)}function f0(){oc&&(oc.detachEvent("onpropertychange",p0),ac=oc=null)}function p0(i){if(i.propertyName==="value"&&ud(ac)){var o=[];u0(o,ac,i,pi(i)),_r(cI,o)}}function dI(i,o,c){i==="focusin"?(f0(),oc=o,ac=c,oc.attachEvent("onpropertychange",p0)):i==="focusout"&&f0()}function hI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ud(ac)}function fI(i,o){if(i==="click")return ud(o)}function pI(i,o){if(i==="input"||i==="change")return ud(o)}function mI(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Wr=typeof Object.is=="function"?Object.is:mI;function lc(i,o){if(Wr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!h.call(o,g)||!Wr(i[g],o[g]))return!1}return!0}function m0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function g0(i,o){var c=m0(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=o&&f>=o)return{node:c,offset:o-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=m0(c)}}function y0(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?y0(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function v0(){for(var i=window,o=Dn();o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Dn(i.document)}return o}function ep(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function gI(i){var o=v0(),c=i.focusedElem,f=i.selectionRange;if(o!==c&&c&&c.ownerDocument&&y0(c.ownerDocument.documentElement,c)){if(f!==null&&ep(c)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(i,c.value.length);else if(i=(o=c.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=c.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!i.extend&&_>f&&(g=f,f=_,_=g),g=g0(c,_);var k=g0(c,f);g&&k&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==k.node||i.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),_>f?(i.addRange(o),i.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),i.addRange(o)))}}for(o=[],i=c;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)i=o[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var yI=u&&"documentMode"in document&&11>=document.documentMode,ja=null,tp=null,cc=null,np=!1;function _0(i,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;np||ja==null||ja!==Dn(f)||(f=ja,"selectionStart"in f&&ep(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),cc&&lc(cc,f)||(cc=f,f=pd(tp,"onSelect"),0<f.length&&(o=new Ia("onSelect","select",null,o,c),i.push({event:o,listeners:f}),o.target=ja)))}function dd(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var Oa={animationend:dd("Animation","AnimationEnd"),animationiteration:dd("Animation","AnimationIteration"),animationstart:dd("Animation","AnimationStart"),transitionend:dd("Transition","TransitionEnd")},rp={},w0={};u&&(w0=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function hd(i){if(rp[i])return rp[i];if(!Oa[i])return i;var o=Oa[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in w0)return rp[i]=o[c];return i}var b0=hd("animationend"),x0=hd("animationiteration"),k0=hd("animationstart"),E0=hd("transitionend"),T0=new Map,I0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(i,o){T0.set(i,o),a(o,[i])}for(var sp=0;sp<I0.length;sp++){var ip=I0[sp],vI=ip.toLowerCase(),_I=ip[0].toUpperCase()+ip.slice(1);Ti(vI,"on"+_I)}Ti(b0,"onAnimationEnd"),Ti(x0,"onAnimationIteration"),Ti(k0,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(E0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wI=new Set("cancel close invalid load scroll toggle".split(" ").concat(uc));function S0(i,o,c){var f=i.type||"unknown-event";i.currentTarget=c,$u(f,o,void 0,i),i.currentTarget=null}function C0(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var k=f.length-1;0<=k;k--){var P=f[k],V=P.instance,Q=P.currentTarget;if(P=P.listener,V!==_&&g.isPropagationStopped())break e;S0(g,P,Q),_=V}else for(k=0;k<f.length;k++){if(P=f[k],V=P.instance,Q=P.currentTarget,P=P.listener,V!==_&&g.isPropagationStopped())break e;S0(g,P,Q),_=V}}}if($t)throw i=Lr,$t=!1,Lr=null,i}function gt(i,o){var c=o[fp];c===void 0&&(c=o[fp]=new Set);var f=i+"__bubble";c.has(f)||(A0(o,i,2,!1),c.add(f))}function op(i,o,c){var f=0;o&&(f|=4),A0(c,i,f,o)}var fd="_reactListening"+Math.random().toString(36).slice(2);function dc(i){if(!i[fd]){i[fd]=!0,r.forEach(function(c){c!=="selectionchange"&&(wI.has(c)||op(c,!1,i),op(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[fd]||(o[fd]=!0,op("selectionchange",!1,o))}}function A0(i,o,c,f){switch(tc(o)){case 1:var g=bt;break;case 4:g=Zf;break;default:g=ec}c=g.bind(null,o,c,i),g=void 0,!jn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,c,{capture:!0,passive:g}):i.addEventListener(o,c,!0):g!==void 0?i.addEventListener(o,c,{passive:g}):i.addEventListener(o,c,!1)}function ap(i,o,c,f,g){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var P=f.stateNode.containerInfo;if(P===g||P.nodeType===8&&P.parentNode===g)break;if(k===4)for(k=f.return;k!==null;){var V=k.tag;if((V===3||V===4)&&(V=k.stateNode.containerInfo,V===g||V.nodeType===8&&V.parentNode===g))return;k=k.return}for(;P!==null;){if(k=Oo(P),k===null)return;if(V=k.tag,V===5||V===6){f=_=k;continue e}P=P.parentNode}}f=f.return}_r(function(){var Q=_,ie=pi(c),ae=[];e:{var re=T0.get(i);if(re!==void 0){var he=Ia,ge=i;switch(i){case"keypress":if(Ta(c)===0)break e;case"keydown":case"keyup":he=y;break;case"focusin":ge="focus",he=Na;break;case"focusout":ge="blur",he=Na;break;case"beforeblur":case"afterblur":he=Na;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Ca;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=J;break;case b0:case x0:case k0:he=Ms;break;case E0:he=at;break;case"scroll":he=Jf;break;case"wheel":he=et;break;case"copy":case"cut":case"paste":he=od;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=S}var _e=(o&4)!==0,Lt=!_e&&i==="scroll",H=_e?re!==null?re+"Capture":null:re;_e=[];for(var U=Q,G;U!==null;){G=U;var le=G.stateNode;if(G.tag===5&&le!==null&&(G=le,H!==null&&(le=Be(U,H),le!=null&&_e.push(hc(U,le,G)))),Lt)break;U=U.return}0<_e.length&&(re=new he(re,ge,null,c,ie),ae.push({event:re,listeners:_e}))}}if((o&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",re&&c!==os&&(ge=c.relatedTarget||c.fromElement)&&(Oo(ge)||ge[Vs]))break e;if((he||re)&&(re=ie.window===ie?ie:(re=ie.ownerDocument)?re.defaultView||re.parentWindow:window,he?(ge=c.relatedTarget||c.toElement,he=Q,ge=ge?Oo(ge):null,ge!==null&&(Lt=Mr(ge),ge!==Lt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(he=null,ge=Q),he!==ge)){if(_e=Ca,le="onMouseLeave",H="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(_e=S,le="onPointerLeave",H="onPointerEnter",U="pointer"),Lt=he==null?re:Va(he),G=ge==null?re:Va(ge),re=new _e(le,U+"leave",he,c,ie),re.target=Lt,re.relatedTarget=G,le=null,Oo(ie)===Q&&(_e=new _e(H,U+"enter",ge,c,ie),_e.target=G,_e.relatedTarget=Lt,le=_e),Lt=le,he&&ge)t:{for(_e=he,H=ge,U=0,G=_e;G;G=La(G))U++;for(G=0,le=H;le;le=La(le))G++;for(;0<U-G;)_e=La(_e),U--;for(;0<G-U;)H=La(H),G--;for(;U--;){if(_e===H||H!==null&&_e===H.alternate)break t;_e=La(_e),H=La(H)}_e=null}else _e=null;he!==null&&N0(ae,re,he,_e,!1),ge!==null&&Lt!==null&&N0(ae,Lt,ge,_e,!0)}}e:{if(re=Q?Va(Q):window,he=re.nodeName&&re.nodeName.toLowerCase(),he==="select"||he==="input"&&re.type==="file")var be=uI;else if(c0(re))if(d0)be=pI;else{be=hI;var Ae=dI}else(he=re.nodeName)&&he.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(be=fI);if(be&&(be=be(i,Q))){u0(ae,be,c,ie);break e}Ae&&Ae(i,re,Q),i==="focusout"&&(Ae=re._wrapperState)&&Ae.controlled&&re.type==="number"&&rs(re,"number",re.value)}switch(Ae=Q?Va(Q):window,i){case"focusin":(c0(Ae)||Ae.contentEditable==="true")&&(ja=Ae,tp=Q,cc=null);break;case"focusout":cc=tp=ja=null;break;case"mousedown":np=!0;break;case"contextmenu":case"mouseup":case"dragend":np=!1,_0(ae,c,ie);break;case"selectionchange":if(yI)break;case"keydown":case"keyup":_0(ae,c,ie)}var Ne;if(Bt)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Da?a0(i,c)&&(Pe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Pe="onCompositionStart");Pe&&(jo&&c.locale!=="ko"&&(Da||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Da&&(Ne=nc()):(dr=ie,Ea="value"in dr?dr.value:dr.textContent,Da=!0)),Ae=pd(Q,Pe),0<Ae.length&&(Pe=new ic(Pe,i,null,c,ie),ae.push({event:Pe,listeners:Ae}),Ne?Pe.data=Ne:(Ne=l0(c),Ne!==null&&(Pe.data=Ne)))),(Ne=hr?oI(i,c):aI(i,c))&&(Q=pd(Q,"onBeforeInput"),0<Q.length&&(ie=new ic("onBeforeInput","beforeinput",null,c,ie),ae.push({event:ie,listeners:Q}),ie.data=Ne))}C0(ae,o)})}function hc(i,o,c){return{instance:i,listener:o,currentTarget:c}}function pd(i,o){for(var c=o+"Capture",f=[];i!==null;){var g=i,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=Be(i,c),_!=null&&f.unshift(hc(i,_,g)),_=Be(i,o),_!=null&&f.push(hc(i,_,g))),i=i.return}return f}function La(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function N0(i,o,c,f,g){for(var _=o._reactName,k=[];c!==null&&c!==f;){var P=c,V=P.alternate,Q=P.stateNode;if(V!==null&&V===f)break;P.tag===5&&Q!==null&&(P=Q,g?(V=Be(c,_),V!=null&&k.unshift(hc(c,V,P))):g||(V=Be(c,_),V!=null&&k.push(hc(c,V,P)))),c=c.return}k.length!==0&&i.push({event:o,listeners:k})}var bI=/\r\n?/g,xI=/\u0000|\uFFFD/g;function R0(i){return(typeof i=="string"?i:""+i).replace(bI,`
`).replace(xI,"")}function md(i,o,c){if(o=R0(o),R0(i)!==o&&c)throw Error(n(425))}function gd(){}var lp=null,cp=null;function up(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var dp=typeof setTimeout=="function"?setTimeout:void 0,kI=typeof clearTimeout=="function"?clearTimeout:void 0,P0=typeof Promise=="function"?Promise:void 0,EI=typeof queueMicrotask=="function"?queueMicrotask:typeof P0<"u"?function(i){return P0.resolve(null).then(i).catch(TI)}:dp;function TI(i){setTimeout(function(){throw i})}function hp(i,o){var c=o,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(f===0){i.removeChild(g),$r(o);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=g}while(c);$r(o)}function Ii(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function D0(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}var Ma=Math.random().toString(36).slice(2),hs="__reactFiber$"+Ma,fc="__reactProps$"+Ma,Vs="__reactContainer$"+Ma,fp="__reactEvents$"+Ma,II="__reactListeners$"+Ma,SI="__reactHandles$"+Ma;function Oo(i){var o=i[hs];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Vs]||c[hs]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=D0(i);i!==null;){if(c=i[hs])return c;i=D0(i)}return o}i=c,c=i.parentNode}return null}function pc(i){return i=i[hs]||i[Vs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Va(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function yd(i){return i[fc]||null}var pp=[],Fa=-1;function Si(i){return{current:i}}function yt(i){0>Fa||(i.current=pp[Fa],pp[Fa]=null,Fa--)}function pt(i,o){Fa++,pp[Fa]=i.current,i.current=o}var Ci={},kn=Si(Ci),Zn=Si(!1),Lo=Ci;function za(i,o){var c=i.type.contextTypes;if(!c)return Ci;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in c)g[_]=o[_];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function Jn(i){return i=i.childContextTypes,i!=null}function vd(){yt(Zn),yt(kn)}function j0(i,o,c){if(kn.current!==Ci)throw Error(n(168));pt(kn,o),pt(Zn,c)}function O0(i,o,c){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(n(108,Ee(i)||"Unknown",g));return ue({},c,f)}function _d(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ci,Lo=kn.current,pt(kn,i),pt(Zn,Zn.current),!0}function L0(i,o,c){var f=i.stateNode;if(!f)throw Error(n(169));c?(i=O0(i,o,Lo),f.__reactInternalMemoizedMergedChildContext=i,yt(Zn),yt(kn),pt(kn,i)):yt(Zn),pt(Zn,c)}var Fs=null,wd=!1,mp=!1;function M0(i){Fs===null?Fs=[i]:Fs.push(i)}function CI(i){wd=!0,M0(i)}function Ai(){if(!mp&&Fs!==null){mp=!0;var i=0,o=Ze;try{var c=Fs;for(Ze=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}Fs=null,wd=!1}catch(g){throw Fs!==null&&(Fs=Fs.slice(i+1)),_a(So,Ai),g}finally{Ze=o,mp=!1}}return null}var Ua=[],$a=0,bd=null,xd=0,Er=[],Tr=0,Mo=null,zs=1,Us="";function Vo(i,o){Ua[$a++]=xd,Ua[$a++]=bd,bd=i,xd=o}function V0(i,o,c){Er[Tr++]=zs,Er[Tr++]=Us,Er[Tr++]=Mo,Mo=i;var f=zs;i=Us;var g=32-On(f)-1;f&=~(1<<g),c+=1;var _=32-On(o)+g;if(30<_){var k=g-g%5;_=(f&(1<<k)-1).toString(32),f>>=k,g-=k,zs=1<<32-On(o)+g|c<<g|f,Us=_+i}else zs=1<<_|c<<g|f,Us=i}function gp(i){i.return!==null&&(Vo(i,1),V0(i,1,0))}function yp(i){for(;i===bd;)bd=Ua[--$a],Ua[$a]=null,xd=Ua[--$a],Ua[$a]=null;for(;i===Mo;)Mo=Er[--Tr],Er[Tr]=null,Us=Er[--Tr],Er[Tr]=null,zs=Er[--Tr],Er[Tr]=null}var fr=null,pr=null,xt=!1,qr=null;function F0(i,o){var c=Ar(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=i,o=i.deletions,o===null?(i.deletions=[c],i.flags|=16):o.push(c)}function z0(i,o){switch(i.tag){case 5:var c=i.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,fr=i,pr=Ii(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,fr=i,pr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=Mo!==null?{id:zs,overflow:Us}:null,i.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=Ar(18,null,null,0),c.stateNode=o,c.return=i,i.child=c,fr=i,pr=null,!0):!1;default:return!1}}function vp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function _p(i){if(xt){var o=pr;if(o){var c=o;if(!z0(i,o)){if(vp(i))throw Error(n(418));o=Ii(c.nextSibling);var f=fr;o&&z0(i,o)?F0(f,c):(i.flags=i.flags&-4097|2,xt=!1,fr=i)}}else{if(vp(i))throw Error(n(418));i.flags=i.flags&-4097|2,xt=!1,fr=i}}}function U0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;fr=i}function kd(i){if(i!==fr)return!1;if(!xt)return U0(i),xt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!up(i.type,i.memoizedProps)),o&&(o=pr)){if(vp(i))throw $0(),Error(n(418));for(;o;)F0(i,o),o=Ii(o.nextSibling)}if(U0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(o===0){pr=Ii(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}i=i.nextSibling}pr=null}}else pr=fr?Ii(i.stateNode.nextSibling):null;return!0}function $0(){for(var i=pr;i;)i=Ii(i.nextSibling)}function Ba(){pr=fr=null,xt=!1}function wp(i){qr===null?qr=[i]:qr.push(i)}var AI=Z.ReactCurrentBatchConfig;function mc(i,o,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var f=c.stateNode}if(!f)throw Error(n(147,i));var g=f,_=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(k){var P=g.refs;k===null?delete P[_]:P[_]=k},o._stringRef=_,o)}if(typeof i!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,i))}return i}function Ed(i,o){throw i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function B0(i){var o=i._init;return o(i._payload)}function W0(i){function o(H,U){if(i){var G=H.deletions;G===null?(H.deletions=[U],H.flags|=16):G.push(U)}}function c(H,U){if(!i)return null;for(;U!==null;)o(H,U),U=U.sibling;return null}function f(H,U){for(H=new Map;U!==null;)U.key!==null?H.set(U.key,U):H.set(U.index,U),U=U.sibling;return H}function g(H,U){return H=Mi(H,U),H.index=0,H.sibling=null,H}function _(H,U,G){return H.index=G,i?(G=H.alternate,G!==null?(G=G.index,G<U?(H.flags|=2,U):G):(H.flags|=2,U)):(H.flags|=1048576,U)}function k(H){return i&&H.alternate===null&&(H.flags|=2),H}function P(H,U,G,le){return U===null||U.tag!==6?(U=dm(G,H.mode,le),U.return=H,U):(U=g(U,G),U.return=H,U)}function V(H,U,G,le){var be=G.type;return be===R?ie(H,U,G.props.children,le,G.key):U!==null&&(U.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ke&&B0(be)===U.type)?(le=g(U,G.props),le.ref=mc(H,U,G),le.return=H,le):(le=Gd(G.type,G.key,G.props,null,H.mode,le),le.ref=mc(H,U,G),le.return=H,le)}function Q(H,U,G,le){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=hm(G,H.mode,le),U.return=H,U):(U=g(U,G.children||[]),U.return=H,U)}function ie(H,U,G,le,be){return U===null||U.tag!==7?(U=Ho(G,H.mode,le,be),U.return=H,U):(U=g(U,G),U.return=H,U)}function ae(H,U,G){if(typeof U=="string"&&U!==""||typeof U=="number")return U=dm(""+U,H.mode,G),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case K:return G=Gd(U.type,U.key,U.props,null,H.mode,G),G.ref=mc(H,null,U),G.return=H,G;case ne:return U=hm(U,H.mode,G),U.return=H,U;case Ke:var le=U._init;return ae(H,le(U._payload),G)}if(tn(U)||fe(U))return U=Ho(U,H.mode,G,null),U.return=H,U;Ed(H,U)}return null}function re(H,U,G,le){var be=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return be!==null?null:P(H,U,""+G,le);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case K:return G.key===be?V(H,U,G,le):null;case ne:return G.key===be?Q(H,U,G,le):null;case Ke:return be=G._init,re(H,U,be(G._payload),le)}if(tn(G)||fe(G))return be!==null?null:ie(H,U,G,le,null);Ed(H,G)}return null}function he(H,U,G,le,be){if(typeof le=="string"&&le!==""||typeof le=="number")return H=H.get(G)||null,P(U,H,""+le,be);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case K:return H=H.get(le.key===null?G:le.key)||null,V(U,H,le,be);case ne:return H=H.get(le.key===null?G:le.key)||null,Q(U,H,le,be);case Ke:var Ae=le._init;return he(H,U,G,Ae(le._payload),be)}if(tn(le)||fe(le))return H=H.get(G)||null,ie(U,H,le,be,null);Ed(U,le)}return null}function ge(H,U,G,le){for(var be=null,Ae=null,Ne=U,Pe=U=0,on=null;Ne!==null&&Pe<G.length;Pe++){Ne.index>Pe?(on=Ne,Ne=null):on=Ne.sibling;var st=re(H,Ne,G[Pe],le);if(st===null){Ne===null&&(Ne=on);break}i&&Ne&&st.alternate===null&&o(H,Ne),U=_(st,U,Pe),Ae===null?be=st:Ae.sibling=st,Ae=st,Ne=on}if(Pe===G.length)return c(H,Ne),xt&&Vo(H,Pe),be;if(Ne===null){for(;Pe<G.length;Pe++)Ne=ae(H,G[Pe],le),Ne!==null&&(U=_(Ne,U,Pe),Ae===null?be=Ne:Ae.sibling=Ne,Ae=Ne);return xt&&Vo(H,Pe),be}for(Ne=f(H,Ne);Pe<G.length;Pe++)on=he(Ne,H,Pe,G[Pe],le),on!==null&&(i&&on.alternate!==null&&Ne.delete(on.key===null?Pe:on.key),U=_(on,U,Pe),Ae===null?be=on:Ae.sibling=on,Ae=on);return i&&Ne.forEach(function(Vi){return o(H,Vi)}),xt&&Vo(H,Pe),be}function _e(H,U,G,le){var be=fe(G);if(typeof be!="function")throw Error(n(150));if(G=be.call(G),G==null)throw Error(n(151));for(var Ae=be=null,Ne=U,Pe=U=0,on=null,st=G.next();Ne!==null&&!st.done;Pe++,st=G.next()){Ne.index>Pe?(on=Ne,Ne=null):on=Ne.sibling;var Vi=re(H,Ne,st.value,le);if(Vi===null){Ne===null&&(Ne=on);break}i&&Ne&&Vi.alternate===null&&o(H,Ne),U=_(Vi,U,Pe),Ae===null?be=Vi:Ae.sibling=Vi,Ae=Vi,Ne=on}if(st.done)return c(H,Ne),xt&&Vo(H,Pe),be;if(Ne===null){for(;!st.done;Pe++,st=G.next())st=ae(H,st.value,le),st!==null&&(U=_(st,U,Pe),Ae===null?be=st:Ae.sibling=st,Ae=st);return xt&&Vo(H,Pe),be}for(Ne=f(H,Ne);!st.done;Pe++,st=G.next())st=he(Ne,H,Pe,st.value,le),st!==null&&(i&&st.alternate!==null&&Ne.delete(st.key===null?Pe:st.key),U=_(st,U,Pe),Ae===null?be=st:Ae.sibling=st,Ae=st);return i&&Ne.forEach(function(lS){return o(H,lS)}),xt&&Vo(H,Pe),be}function Lt(H,U,G,le){if(typeof G=="object"&&G!==null&&G.type===R&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case K:e:{for(var be=G.key,Ae=U;Ae!==null;){if(Ae.key===be){if(be=G.type,be===R){if(Ae.tag===7){c(H,Ae.sibling),U=g(Ae,G.props.children),U.return=H,H=U;break e}}else if(Ae.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ke&&B0(be)===Ae.type){c(H,Ae.sibling),U=g(Ae,G.props),U.ref=mc(H,Ae,G),U.return=H,H=U;break e}c(H,Ae);break}else o(H,Ae);Ae=Ae.sibling}G.type===R?(U=Ho(G.props.children,H.mode,le,G.key),U.return=H,H=U):(le=Gd(G.type,G.key,G.props,null,H.mode,le),le.ref=mc(H,U,G),le.return=H,H=le)}return k(H);case ne:e:{for(Ae=G.key;U!==null;){if(U.key===Ae)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){c(H,U.sibling),U=g(U,G.children||[]),U.return=H,H=U;break e}else{c(H,U);break}else o(H,U);U=U.sibling}U=hm(G,H.mode,le),U.return=H,H=U}return k(H);case Ke:return Ae=G._init,Lt(H,U,Ae(G._payload),le)}if(tn(G))return ge(H,U,G,le);if(fe(G))return _e(H,U,G,le);Ed(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,U!==null&&U.tag===6?(c(H,U.sibling),U=g(U,G),U.return=H,H=U):(c(H,U),U=dm(G,H.mode,le),U.return=H,H=U),k(H)):c(H,U)}return Lt}var Wa=W0(!0),q0=W0(!1),Td=Si(null),Id=null,qa=null,bp=null;function xp(){bp=qa=Id=null}function kp(i){var o=Td.current;yt(Td),i._currentValue=o}function Ep(i,o,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===c)break;i=i.return}}function Ha(i,o){Id=i,bp=qa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Yn=!0),i.firstContext=null)}function Ir(i){var o=i._currentValue;if(bp!==i)if(i={context:i,memoizedValue:o,next:null},qa===null){if(Id===null)throw Error(n(308));qa=i,Id.dependencies={lanes:0,firstContext:i}}else qa=qa.next=i;return o}var Fo=null;function Tp(i){Fo===null?Fo=[i]:Fo.push(i)}function H0(i,o,c,f){var g=o.interleaved;return g===null?(c.next=c,Tp(o)):(c.next=g.next,g.next=c),o.interleaved=c,$s(i,f)}function $s(i,o){i.lanes|=o;var c=i.alternate;for(c!==null&&(c.lanes|=o),c=i,i=i.return;i!==null;)i.childLanes|=o,c=i.alternate,c!==null&&(c.childLanes|=o),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Ni=!1;function Ip(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K0(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Bs(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Ri(i,o,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(rt&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,$s(i,c)}return g=f.interleaved,g===null?(o.next=o,Tp(f)):(o.next=g.next,g.next=o),f.interleaved=o,$s(i,c)}function Sd(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,c|=f,o.lanes=c,wi(i,c)}}function G0(i,o){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var k={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?g=_=k:_=_.next=k,c=c.next}while(c!==null);_===null?g=_=o:_=_.next=o}else g=_=o;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}function Cd(i,o,c,f){var g=i.updateQueue;Ni=!1;var _=g.firstBaseUpdate,k=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var V=P,Q=V.next;V.next=null,k===null?_=Q:k.next=Q,k=V;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,P=ie.lastBaseUpdate,P!==k&&(P===null?ie.firstBaseUpdate=Q:P.next=Q,ie.lastBaseUpdate=V))}if(_!==null){var ae=g.baseState;k=0,ie=Q=V=null,P=_;do{var re=P.lane,he=P.eventTime;if((f&re)===re){ie!==null&&(ie=ie.next={eventTime:he,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var ge=i,_e=P;switch(re=o,he=c,_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){ae=ge.call(he,ae,re);break e}ae=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,re=typeof ge=="function"?ge.call(he,ae,re):ge,re==null)break e;ae=ue({},ae,re);break e;case 2:Ni=!0}}P.callback!==null&&P.lane!==0&&(i.flags|=64,re=g.effects,re===null?g.effects=[P]:re.push(P))}else he={eventTime:he,lane:re,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ie===null?(Q=ie=he,V=ae):ie=ie.next=he,k|=re;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;re=P,P=re.next,re.next=null,g.lastBaseUpdate=re,g.shared.pending=null}}while(!0);if(ie===null&&(V=ae),g.baseState=V,g.firstBaseUpdate=Q,g.lastBaseUpdate=ie,o=g.shared.interleaved,o!==null){g=o;do k|=g.lane,g=g.next;while(g!==o)}else _===null&&(g.shared.lanes=0);$o|=k,i.lanes=k,i.memoizedState=ae}}function Q0(i,o,c){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],g=f.callback;if(g!==null){if(f.callback=null,f=c,typeof g!="function")throw Error(n(191,g));g.call(f)}}}var gc={},fs=Si(gc),yc=Si(gc),vc=Si(gc);function zo(i){if(i===gc)throw Error(n(174));return i}function Sp(i,o){switch(pt(vc,o),pt(yc,i),pt(fs,gc),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ht(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=ht(o,i)}yt(fs),pt(fs,o)}function Ka(){yt(fs),yt(yc),yt(vc)}function Z0(i){zo(vc.current);var o=zo(fs.current),c=ht(o,i.type);o!==c&&(pt(yc,i),pt(fs,c))}function Cp(i){yc.current===i&&(yt(fs),yt(yc))}var Et=Si(0);function Ad(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ap=[];function Np(){for(var i=0;i<Ap.length;i++)Ap[i]._workInProgressVersionPrimary=null;Ap.length=0}var Nd=Z.ReactCurrentDispatcher,Rp=Z.ReactCurrentBatchConfig,Uo=0,Tt=null,Zt=null,rn=null,Rd=!1,_c=!1,wc=0,NI=0;function En(){throw Error(n(321))}function Pp(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Wr(i[c],o[c]))return!1;return!0}function Dp(i,o,c,f,g,_){if(Uo=_,Tt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Nd.current=i===null||i.memoizedState===null?jI:OI,i=c(f,g),_c){_=0;do{if(_c=!1,wc=0,25<=_)throw Error(n(301));_+=1,rn=Zt=null,o.updateQueue=null,Nd.current=LI,i=c(f,g)}while(_c)}if(Nd.current=jd,o=Zt!==null&&Zt.next!==null,Uo=0,rn=Zt=Tt=null,Rd=!1,o)throw Error(n(300));return i}function jp(){var i=wc!==0;return wc=0,i}function ps(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Tt.memoizedState=rn=i:rn=rn.next=i,rn}function Sr(){if(Zt===null){var i=Tt.alternate;i=i!==null?i.memoizedState:null}else i=Zt.next;var o=rn===null?Tt.memoizedState:rn.next;if(o!==null)rn=o,Zt=i;else{if(i===null)throw Error(n(310));Zt=i,i={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},rn===null?Tt.memoizedState=rn=i:rn=rn.next=i}return rn}function bc(i,o){return typeof o=="function"?o(i):o}function Op(i){var o=Sr(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var f=Zt,g=f.baseQueue,_=c.pending;if(_!==null){if(g!==null){var k=g.next;g.next=_.next,_.next=k}f.baseQueue=g=_,c.pending=null}if(g!==null){_=g.next,f=f.baseState;var P=k=null,V=null,Q=_;do{var ie=Q.lane;if((Uo&ie)===ie)V!==null&&(V=V.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),f=Q.hasEagerState?Q.eagerState:i(f,Q.action);else{var ae={lane:ie,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};V===null?(P=V=ae,k=f):V=V.next=ae,Tt.lanes|=ie,$o|=ie}Q=Q.next}while(Q!==null&&Q!==_);V===null?k=f:V.next=P,Wr(f,o.memoizedState)||(Yn=!0),o.memoizedState=f,o.baseState=k,o.baseQueue=V,c.lastRenderedState=f}if(i=c.interleaved,i!==null){g=i;do _=g.lane,Tt.lanes|=_,$o|=_,g=g.next;while(g!==i)}else g===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function Lp(i){var o=Sr(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,_=o.memoizedState;if(g!==null){c.pending=null;var k=g=g.next;do _=i(_,k.action),k=k.next;while(k!==g);Wr(_,o.memoizedState)||(Yn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,f]}function J0(){}function Y0(i,o){var c=Tt,f=Sr(),g=o(),_=!Wr(f.memoizedState,g);if(_&&(f.memoizedState=g,Yn=!0),f=f.queue,Mp(tv.bind(null,c,f,i),[i]),f.getSnapshot!==o||_||rn!==null&&rn.memoizedState.tag&1){if(c.flags|=2048,xc(9,ev.bind(null,c,f,g,o),void 0,null),sn===null)throw Error(n(349));(Uo&30)!==0||X0(c,o,g)}return g}function X0(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=Tt.updateQueue,o===null?(o={lastEffect:null,stores:null},Tt.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function ev(i,o,c,f){o.value=c,o.getSnapshot=f,nv(o)&&rv(i)}function tv(i,o,c){return c(function(){nv(o)&&rv(i)})}function nv(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Wr(i,c)}catch{return!0}}function rv(i){var o=$s(i,1);o!==null&&Qr(o,i,1,-1)}function sv(i){var o=ps();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:i},o.queue=i,i=i.dispatch=DI.bind(null,Tt,i),[o.memoizedState,i]}function xc(i,o,c,f){return i={tag:i,create:o,destroy:c,deps:f,next:null},o=Tt.updateQueue,o===null?(o={lastEffect:null,stores:null},Tt.updateQueue=o,o.lastEffect=i.next=i):(c=o.lastEffect,c===null?o.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,o.lastEffect=i)),i}function iv(){return Sr().memoizedState}function Pd(i,o,c,f){var g=ps();Tt.flags|=i,g.memoizedState=xc(1|o,c,void 0,f===void 0?null:f)}function Dd(i,o,c,f){var g=Sr();f=f===void 0?null:f;var _=void 0;if(Zt!==null){var k=Zt.memoizedState;if(_=k.destroy,f!==null&&Pp(f,k.deps)){g.memoizedState=xc(o,c,_,f);return}}Tt.flags|=i,g.memoizedState=xc(1|o,c,_,f)}function ov(i,o){return Pd(8390656,8,i,o)}function Mp(i,o){return Dd(2048,8,i,o)}function av(i,o){return Dd(4,2,i,o)}function lv(i,o){return Dd(4,4,i,o)}function cv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function uv(i,o,c){return c=c!=null?c.concat([i]):null,Dd(4,4,cv.bind(null,o,i),c)}function Vp(){}function dv(i,o){var c=Sr();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Pp(o,f[1])?f[0]:(c.memoizedState=[i,o],i)}function hv(i,o){var c=Sr();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Pp(o,f[1])?f[0]:(i=i(),c.memoizedState=[i,o],i)}function fv(i,o,c){return(Uo&21)===0?(i.baseState&&(i.baseState=!1,Yn=!0),i.memoizedState=c):(Wr(c,o)||(c=No(),Tt.lanes|=c,$o|=c,i.baseState=!0),o)}function RI(i,o){var c=Ze;Ze=c!==0&&4>c?c:4,i(!0);var f=Rp.transition;Rp.transition={};try{i(!1),o()}finally{Ze=c,Rp.transition=f}}function pv(){return Sr().memoizedState}function PI(i,o,c){var f=Oi(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},mv(i))gv(o,c);else if(c=H0(i,o,c,f),c!==null){var g=Vn();Qr(c,i,f,g),yv(c,o,f)}}function DI(i,o,c){var f=Oi(i),g={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(mv(i))gv(o,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var k=o.lastRenderedState,P=_(k,c);if(g.hasEagerState=!0,g.eagerState=P,Wr(P,k)){var V=o.interleaved;V===null?(g.next=g,Tp(o)):(g.next=V.next,V.next=g),o.interleaved=g;return}}catch{}finally{}c=H0(i,o,g,f),c!==null&&(g=Vn(),Qr(c,i,f,g),yv(c,o,f))}}function mv(i){var o=i.alternate;return i===Tt||o!==null&&o===Tt}function gv(i,o){_c=Rd=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function yv(i,o,c){if((c&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,c|=f,o.lanes=c,wi(i,c)}}var jd={readContext:Ir,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},jI={readContext:Ir,useCallback:function(i,o){return ps().memoizedState=[i,o===void 0?null:o],i},useContext:Ir,useEffect:ov,useImperativeHandle:function(i,o,c){return c=c!=null?c.concat([i]):null,Pd(4194308,4,cv.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Pd(4194308,4,i,o)},useInsertionEffect:function(i,o){return Pd(4,2,i,o)},useMemo:function(i,o){var c=ps();return o=o===void 0?null:o,i=i(),c.memoizedState=[i,o],i},useReducer:function(i,o,c){var f=ps();return o=c!==void 0?c(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=PI.bind(null,Tt,i),[f.memoizedState,i]},useRef:function(i){var o=ps();return i={current:i},o.memoizedState=i},useState:sv,useDebugValue:Vp,useDeferredValue:function(i){return ps().memoizedState=i},useTransition:function(){var i=sv(!1),o=i[0];return i=RI.bind(null,i[1]),ps().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,c){var f=Tt,g=ps();if(xt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),sn===null)throw Error(n(349));(Uo&30)!==0||X0(f,o,c)}g.memoizedState=c;var _={value:c,getSnapshot:o};return g.queue=_,ov(tv.bind(null,f,_,i),[i]),f.flags|=2048,xc(9,ev.bind(null,f,_,c,o),void 0,null),c},useId:function(){var i=ps(),o=sn.identifierPrefix;if(xt){var c=Us,f=zs;c=(f&~(1<<32-On(f)-1)).toString(32)+c,o=":"+o+"R"+c,c=wc++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=NI++,o=":"+o+"r"+c.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},OI={readContext:Ir,useCallback:dv,useContext:Ir,useEffect:Mp,useImperativeHandle:uv,useInsertionEffect:av,useLayoutEffect:lv,useMemo:hv,useReducer:Op,useRef:iv,useState:function(){return Op(bc)},useDebugValue:Vp,useDeferredValue:function(i){var o=Sr();return fv(o,Zt.memoizedState,i)},useTransition:function(){var i=Op(bc)[0],o=Sr().memoizedState;return[i,o]},useMutableSource:J0,useSyncExternalStore:Y0,useId:pv,unstable_isNewReconciler:!1},LI={readContext:Ir,useCallback:dv,useContext:Ir,useEffect:Mp,useImperativeHandle:uv,useInsertionEffect:av,useLayoutEffect:lv,useMemo:hv,useReducer:Lp,useRef:iv,useState:function(){return Lp(bc)},useDebugValue:Vp,useDeferredValue:function(i){var o=Sr();return Zt===null?o.memoizedState=i:fv(o,Zt.memoizedState,i)},useTransition:function(){var i=Lp(bc)[0],o=Sr().memoizedState;return[i,o]},useMutableSource:J0,useSyncExternalStore:Y0,useId:pv,unstable_isNewReconciler:!1};function Hr(i,o){if(i&&i.defaultProps){o=ue({},o),i=i.defaultProps;for(var c in i)o[c]===void 0&&(o[c]=i[c]);return o}return o}function Fp(i,o,c,f){o=i.memoizedState,c=c(f,o),c=c==null?o:ue({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Od={isMounted:function(i){return(i=i._reactInternals)?Mr(i)===i:!1},enqueueSetState:function(i,o,c){i=i._reactInternals;var f=Vn(),g=Oi(i),_=Bs(f,g);_.payload=o,c!=null&&(_.callback=c),o=Ri(i,_,g),o!==null&&(Qr(o,i,g,f),Sd(o,i,g))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var f=Vn(),g=Oi(i),_=Bs(f,g);_.tag=1,_.payload=o,c!=null&&(_.callback=c),o=Ri(i,_,g),o!==null&&(Qr(o,i,g,f),Sd(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=Vn(),f=Oi(i),g=Bs(c,f);g.tag=2,o!=null&&(g.callback=o),o=Ri(i,g,f),o!==null&&(Qr(o,i,f,c),Sd(o,i,f))}};function vv(i,o,c,f,g,_,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,k):o.prototype&&o.prototype.isPureReactComponent?!lc(c,f)||!lc(g,_):!0}function _v(i,o,c){var f=!1,g=Ci,_=o.contextType;return typeof _=="object"&&_!==null?_=Ir(_):(g=Jn(o)?Lo:kn.current,f=o.contextTypes,_=(f=f!=null)?za(i,g):Ci),o=new o(c,_),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Od,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=_),o}function wv(i,o,c,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==i&&Od.enqueueReplaceState(o,o.state,null)}function zp(i,o,c,f){var g=i.stateNode;g.props=c,g.state=i.memoizedState,g.refs={},Ip(i);var _=o.contextType;typeof _=="object"&&_!==null?g.context=Ir(_):(_=Jn(o)?Lo:kn.current,g.context=za(i,_)),g.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Fp(i,o,_,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Od.enqueueReplaceState(g,g.state,null),Cd(i,c,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function Ga(i,o){try{var c="",f=o;do c+=ke(f),f=f.return;while(f);var g=c}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:o,stack:g,digest:null}}function Up(i,o,c){return{value:i,source:null,stack:c??null,digest:o??null}}function $p(i,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var MI=typeof WeakMap=="function"?WeakMap:Map;function bv(i,o,c){c=Bs(-1,c),c.tag=3,c.payload={element:null};var f=o.value;return c.callback=function(){$d||($d=!0,rm=f),$p(i,o)},c}function xv(i,o,c){c=Bs(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;c.payload=function(){return f(g)},c.callback=function(){$p(i,o)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){$p(i,o),typeof f!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),c}function kv(i,o,c){var f=i.pingCache;if(f===null){f=i.pingCache=new MI;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(c)||(g.add(c),i=JI.bind(null,i,o,c),o.then(i,i))}function Ev(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Tv(i,o,c,f,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=Bs(-1,1),o.tag=2,Ri(c,o,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var VI=Z.ReactCurrentOwner,Yn=!1;function Mn(i,o,c,f){o.child=i===null?q0(o,null,c,f):Wa(o,i.child,c,f)}function Iv(i,o,c,f,g){c=c.render;var _=o.ref;return Ha(o,g),f=Dp(i,o,c,f,_,g),c=jp(),i!==null&&!Yn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Ws(i,o,g)):(xt&&c&&gp(o),o.flags|=1,Mn(i,o,f,g),o.child)}function Sv(i,o,c,f,g){if(i===null){var _=c.type;return typeof _=="function"&&!um(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=_,Cv(i,o,_,f,g)):(i=Gd(c.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,(i.lanes&g)===0){var k=_.memoizedProps;if(c=c.compare,c=c!==null?c:lc,c(k,f)&&i.ref===o.ref)return Ws(i,o,g)}return o.flags|=1,i=Mi(_,f),i.ref=o.ref,i.return=o,o.child=i}function Cv(i,o,c,f,g){if(i!==null){var _=i.memoizedProps;if(lc(_,f)&&i.ref===o.ref)if(Yn=!1,o.pendingProps=f=_,(i.lanes&g)!==0)(i.flags&131072)!==0&&(Yn=!0);else return o.lanes=i.lanes,Ws(i,o,g)}return Bp(i,o,c,f,g)}function Av(i,o,c){var f=o.pendingProps,g=f.children,_=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Za,mr),mr|=c;else{if((c&1073741824)===0)return i=_!==null?_.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,pt(Za,mr),mr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:c,pt(Za,mr),mr|=f}else _!==null?(f=_.baseLanes|c,o.memoizedState=null):f=c,pt(Za,mr),mr|=f;return Mn(i,o,g,c),o.child}function Nv(i,o){var c=o.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Bp(i,o,c,f,g){var _=Jn(c)?Lo:kn.current;return _=za(o,_),Ha(o,g),c=Dp(i,o,c,f,_,g),f=jp(),i!==null&&!Yn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Ws(i,o,g)):(xt&&f&&gp(o),o.flags|=1,Mn(i,o,c,g),o.child)}function Rv(i,o,c,f,g){if(Jn(c)){var _=!0;_d(o)}else _=!1;if(Ha(o,g),o.stateNode===null)Md(i,o),_v(o,c,f),zp(o,c,f,g),f=!0;else if(i===null){var k=o.stateNode,P=o.memoizedProps;k.props=P;var V=k.context,Q=c.contextType;typeof Q=="object"&&Q!==null?Q=Ir(Q):(Q=Jn(c)?Lo:kn.current,Q=za(o,Q));var ie=c.getDerivedStateFromProps,ae=typeof ie=="function"||typeof k.getSnapshotBeforeUpdate=="function";ae||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(P!==f||V!==Q)&&wv(o,k,f,Q),Ni=!1;var re=o.memoizedState;k.state=re,Cd(o,f,k,g),V=o.memoizedState,P!==f||re!==V||Zn.current||Ni?(typeof ie=="function"&&(Fp(o,c,ie,f),V=o.memoizedState),(P=Ni||vv(o,c,P,f,re,V,Q))?(ae||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=V),k.props=f,k.state=V,k.context=Q,f=P):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{k=o.stateNode,K0(i,o),P=o.memoizedProps,Q=o.type===o.elementType?P:Hr(o.type,P),k.props=Q,ae=o.pendingProps,re=k.context,V=c.contextType,typeof V=="object"&&V!==null?V=Ir(V):(V=Jn(c)?Lo:kn.current,V=za(o,V));var he=c.getDerivedStateFromProps;(ie=typeof he=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(P!==ae||re!==V)&&wv(o,k,f,V),Ni=!1,re=o.memoizedState,k.state=re,Cd(o,f,k,g);var ge=o.memoizedState;P!==ae||re!==ge||Zn.current||Ni?(typeof he=="function"&&(Fp(o,c,he,f),ge=o.memoizedState),(Q=Ni||vv(o,c,Q,f,re,ge,V)||!1)?(ie||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,ge,V),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,ge,V)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||P===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ge),k.props=f,k.state=ge,k.context=V,f=Q):(typeof k.componentDidUpdate!="function"||P===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),f=!1)}return Wp(i,o,c,f,_,g)}function Wp(i,o,c,f,g,_){Nv(i,o);var k=(o.flags&128)!==0;if(!f&&!k)return g&&L0(o,c,!1),Ws(i,o,_);f=o.stateNode,VI.current=o;var P=k&&typeof c.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&k?(o.child=Wa(o,i.child,null,_),o.child=Wa(o,null,P,_)):Mn(i,o,P,_),o.memoizedState=f.state,g&&L0(o,c,!0),o.child}function Pv(i){var o=i.stateNode;o.pendingContext?j0(i,o.pendingContext,o.pendingContext!==o.context):o.context&&j0(i,o.context,!1),Sp(i,o.containerInfo)}function Dv(i,o,c,f,g){return Ba(),wp(g),o.flags|=256,Mn(i,o,c,f),o.child}var qp={dehydrated:null,treeContext:null,retryLane:0};function Hp(i){return{baseLanes:i,cachePool:null,transitions:null}}function jv(i,o,c){var f=o.pendingProps,g=Et.current,_=!1,k=(o.flags&128)!==0,P;if((P=k)||(P=i!==null&&i.memoizedState===null?!1:(g&2)!==0),P?(_=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),pt(Et,g&1),i===null)return _p(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=f.children,i=f.fallback,_?(f=o.mode,_=o.child,k={mode:"hidden",children:k},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=k):_=Qd(k,f,0,null),i=Ho(i,f,c,null),_.return=o,i.return=o,_.sibling=i,o.child=_,o.child.memoizedState=Hp(c),o.memoizedState=qp,i):Kp(o,k));if(g=i.memoizedState,g!==null&&(P=g.dehydrated,P!==null))return FI(i,o,k,f,P,g,c);if(_){_=f.fallback,k=o.mode,g=i.child,P=g.sibling;var V={mode:"hidden",children:f.children};return(k&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=V,o.deletions=null):(f=Mi(g,V),f.subtreeFlags=g.subtreeFlags&14680064),P!==null?_=Mi(P,_):(_=Ho(_,k,c,null),_.flags|=2),_.return=o,f.return=o,f.sibling=_,o.child=f,f=_,_=o.child,k=i.child.memoizedState,k=k===null?Hp(c):{baseLanes:k.baseLanes|c,cachePool:null,transitions:k.transitions},_.memoizedState=k,_.childLanes=i.childLanes&~c,o.memoizedState=qp,f}return _=i.child,i=_.sibling,f=Mi(_,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=c),f.return=o,f.sibling=null,i!==null&&(c=o.deletions,c===null?(o.deletions=[i],o.flags|=16):c.push(i)),o.child=f,o.memoizedState=null,f}function Kp(i,o){return o=Qd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Ld(i,o,c,f){return f!==null&&wp(f),Wa(o,i.child,null,c),i=Kp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function FI(i,o,c,f,g,_,k){if(c)return o.flags&256?(o.flags&=-257,f=Up(Error(n(422))),Ld(i,o,k,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(_=f.fallback,g=o.mode,f=Qd({mode:"visible",children:f.children},g,0,null),_=Ho(_,g,k,null),_.flags|=2,f.return=o,_.return=o,f.sibling=_,o.child=f,(o.mode&1)!==0&&Wa(o,i.child,null,k),o.child.memoizedState=Hp(k),o.memoizedState=qp,_);if((o.mode&1)===0)return Ld(i,o,k,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var P=f.dgst;return f=P,_=Error(n(419)),f=Up(_,f,void 0),Ld(i,o,k,f)}if(P=(k&i.childLanes)!==0,Yn||P){if(f=sn,f!==null){switch(k&-k){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|k))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,$s(i,g),Qr(f,i,g,-1))}return cm(),f=Up(Error(n(421))),Ld(i,o,k,f)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=YI.bind(null,i),g._reactRetry=o,null):(i=_.treeContext,pr=Ii(g.nextSibling),fr=o,xt=!0,qr=null,i!==null&&(Er[Tr++]=zs,Er[Tr++]=Us,Er[Tr++]=Mo,zs=i.id,Us=i.overflow,Mo=o),o=Kp(o,f.children),o.flags|=4096,o)}function Ov(i,o,c){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),Ep(i.return,o,c)}function Gp(i,o,c,f,g){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=c,_.tailMode=g)}function Lv(i,o,c){var f=o.pendingProps,g=f.revealOrder,_=f.tail;if(Mn(i,o,f.children,c),f=Et.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ov(i,c,o);else if(i.tag===19)Ov(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(pt(Et,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(c=o.child,g=null;c!==null;)i=c.alternate,i!==null&&Ad(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),Gp(o,!1,g,c,_);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Ad(i)===null){o.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Gp(o,!0,c,null,_);break;case"together":Gp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Md(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Ws(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),$o|=o.lanes,(c&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,c=Mi(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Mi(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function zI(i,o,c){switch(o.tag){case 3:Pv(o),Ba();break;case 5:Z0(o);break;case 1:Jn(o.type)&&_d(o);break;case 4:Sp(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;pt(Td,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(pt(Et,Et.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?jv(i,o,c):(pt(Et,Et.current&1),i=Ws(i,o,c),i!==null?i.sibling:null);pt(Et,Et.current&1);break;case 19:if(f=(c&o.childLanes)!==0,(i.flags&128)!==0){if(f)return Lv(i,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),pt(Et,Et.current),f)break;return null;case 22:case 23:return o.lanes=0,Av(i,o,c)}return Ws(i,o,c)}var Mv,Qp,Vv,Fv;Mv=function(i,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Qp=function(){},Vv=function(i,o,c,f){var g=i.memoizedProps;if(g!==f){i=o.stateNode,zo(fs.current);var _=null;switch(c){case"input":g=dn(i,g),f=dn(i,f),_=[];break;case"select":g=ue({},g,{value:void 0}),f=ue({},f,{value:void 0}),_=[];break;case"textarea":g=ss(i,g),f=ss(i,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=gd)}fi(c,f);var k;c=null;for(Q in g)if(!f.hasOwnProperty(Q)&&g.hasOwnProperty(Q)&&g[Q]!=null)if(Q==="style"){var P=g[Q];for(k in P)P.hasOwnProperty(k)&&(c||(c={}),c[k]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(s.hasOwnProperty(Q)?_||(_=[]):(_=_||[]).push(Q,null));for(Q in f){var V=f[Q];if(P=g!=null?g[Q]:void 0,f.hasOwnProperty(Q)&&V!==P&&(V!=null||P!=null))if(Q==="style")if(P){for(k in P)!P.hasOwnProperty(k)||V&&V.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in V)V.hasOwnProperty(k)&&P[k]!==V[k]&&(c||(c={}),c[k]=V[k])}else c||(_||(_=[]),_.push(Q,c)),c=V;else Q==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,P=P?P.__html:void 0,V!=null&&P!==V&&(_=_||[]).push(Q,V)):Q==="children"?typeof V!="string"&&typeof V!="number"||(_=_||[]).push(Q,""+V):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(s.hasOwnProperty(Q)?(V!=null&&Q==="onScroll"&&gt("scroll",i),_||P===V||(_=[])):(_=_||[]).push(Q,V))}c&&(_=_||[]).push("style",c);var Q=_;(o.updateQueue=Q)&&(o.flags|=4)}},Fv=function(i,o,c,f){c!==f&&(o.flags|=4)};function kc(i,o){if(!xt)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Tn(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(o)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,o}function UI(i,o,c){var f=o.pendingProps;switch(yp(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(o),null;case 1:return Jn(o.type)&&vd(),Tn(o),null;case 3:return f=o.stateNode,Ka(),yt(Zn),yt(kn),Np(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(kd(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,qr!==null&&(om(qr),qr=null))),Qp(i,o),Tn(o),null;case 5:Cp(o);var g=zo(vc.current);if(c=o.type,i!==null&&o.stateNode!=null)Vv(i,o,c,f,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Tn(o),null}if(i=zo(fs.current),kd(o)){f=o.stateNode,c=o.type;var _=o.memoizedProps;switch(f[hs]=o,f[fc]=_,i=(o.mode&1)!==0,c){case"dialog":gt("cancel",f),gt("close",f);break;case"iframe":case"object":case"embed":gt("load",f);break;case"video":case"audio":for(g=0;g<uc.length;g++)gt(uc[g],f);break;case"source":gt("error",f);break;case"img":case"image":case"link":gt("error",f),gt("load",f);break;case"details":gt("toggle",f);break;case"input":ar(f,_),gt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},gt("invalid",f);break;case"textarea":Ns(f,_),gt("invalid",f)}fi(c,_),g=null;for(var k in _)if(_.hasOwnProperty(k)){var P=_[k];k==="children"?typeof P=="string"?f.textContent!==P&&(_.suppressHydrationWarning!==!0&&md(f.textContent,P,i),g=["children",P]):typeof P=="number"&&f.textContent!==""+P&&(_.suppressHydrationWarning!==!0&&md(f.textContent,P,i),g=["children",""+P]):s.hasOwnProperty(k)&&P!=null&&k==="onScroll"&&gt("scroll",f)}switch(c){case"input":Kt(f),wo(f,_,!0);break;case"textarea":Kt(f),bo(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=gd)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{k=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ot(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=k.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=k.createElement(c,{is:f.is}):(i=k.createElement(c),c==="select"&&(k=i,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):i=k.createElementNS(i,c),i[hs]=o,i[fc]=f,Mv(i,o,!1,!1),o.stateNode=i;e:{switch(k=Eo(c,f),c){case"dialog":gt("cancel",i),gt("close",i),g=f;break;case"iframe":case"object":case"embed":gt("load",i),g=f;break;case"video":case"audio":for(g=0;g<uc.length;g++)gt(uc[g],i);g=f;break;case"source":gt("error",i),g=f;break;case"img":case"image":case"link":gt("error",i),gt("load",i),g=f;break;case"details":gt("toggle",i),g=f;break;case"input":ar(i,f),g=dn(i,f),gt("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=ue({},f,{value:void 0}),gt("invalid",i);break;case"textarea":Ns(i,f),g=ss(i,f),gt("invalid",i);break;default:g=f}fi(c,g),P=g;for(_ in P)if(P.hasOwnProperty(_)){var V=P[_];_==="style"?ko(i,V):_==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&jr(i,V)):_==="children"?typeof V=="string"?(c!=="textarea"||V!=="")&&Or(i,V):typeof V=="number"&&Or(i,""+V):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?V!=null&&_==="onScroll"&&gt("scroll",i):V!=null&&z(i,_,V,k))}switch(c){case"input":Kt(i),wo(i,f,!1);break;case"textarea":Kt(i),bo(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Me(f.value));break;case"select":i.multiple=!!f.multiple,_=f.value,_!=null?qn(i,!!f.multiple,_,!1):f.defaultValue!=null&&qn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=gd)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Tn(o),null;case 6:if(i&&o.stateNode!=null)Fv(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(c=zo(vc.current),zo(fs.current),kd(o)){if(f=o.stateNode,c=o.memoizedProps,f[hs]=o,(_=f.nodeValue!==c)&&(i=fr,i!==null))switch(i.tag){case 3:md(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&md(f.nodeValue,c,(i.mode&1)!==0)}_&&(o.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[hs]=o,o.stateNode=f}return Tn(o),null;case 13:if(yt(Et),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(xt&&pr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)$0(),Ba(),o.flags|=98560,_=!1;else if(_=kd(o),f!==null&&f.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[hs]=o}else Ba(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Tn(o),_=!1}else qr!==null&&(om(qr),qr=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Et.current&1)!==0?Jt===0&&(Jt=3):cm())),o.updateQueue!==null&&(o.flags|=4),Tn(o),null);case 4:return Ka(),Qp(i,o),i===null&&dc(o.stateNode.containerInfo),Tn(o),null;case 10:return kp(o.type._context),Tn(o),null;case 17:return Jn(o.type)&&vd(),Tn(o),null;case 19:if(yt(Et),_=o.memoizedState,_===null)return Tn(o),null;if(f=(o.flags&128)!==0,k=_.rendering,k===null)if(f)kc(_,!1);else{if(Jt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(k=Ad(i),k!==null){for(o.flags|=128,kc(_,!1),f=k.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=c,c=o.child;c!==null;)_=c,i=f,_.flags&=14680066,k=_.alternate,k===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=k.childLanes,_.lanes=k.lanes,_.child=k.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=k.memoizedProps,_.memoizedState=k.memoizedState,_.updateQueue=k.updateQueue,_.type=k.type,i=k.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return pt(Et,Et.current&1|2),o.child}i=i.sibling}_.tail!==null&&ft()>Ja&&(o.flags|=128,f=!0,kc(_,!1),o.lanes=4194304)}else{if(!f)if(i=Ad(k),i!==null){if(o.flags|=128,f=!0,c=i.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),kc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!k.alternate&&!xt)return Tn(o),null}else 2*ft()-_.renderingStartTime>Ja&&c!==1073741824&&(o.flags|=128,f=!0,kc(_,!1),o.lanes=4194304);_.isBackwards?(k.sibling=o.child,o.child=k):(c=_.last,c!==null?c.sibling=k:o.child=k,_.last=k)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=ft(),o.sibling=null,c=Et.current,pt(Et,f?c&1|2:c&1),o):(Tn(o),null);case 22:case 23:return lm(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(mr&1073741824)!==0&&(Tn(o),o.subtreeFlags&6&&(o.flags|=8192)):Tn(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function $I(i,o){switch(yp(o),o.tag){case 1:return Jn(o.type)&&vd(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ka(),yt(Zn),yt(kn),Np(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Cp(o),null;case 13:if(yt(Et),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Ba()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return yt(Et),null;case 4:return Ka(),null;case 10:return kp(o.type._context),null;case 22:case 23:return lm(),null;case 24:return null;default:return null}}var Vd=!1,In=!1,BI=typeof WeakSet=="function"?WeakSet:Set,me=null;function Qa(i,o){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Pt(i,o,f)}else c.current=null}function Zp(i,o,c){try{c()}catch(f){Pt(i,o,f)}}var zv=!1;function WI(i,o){if(lp=ki,i=v0(),ep(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var k=0,P=-1,V=-1,Q=0,ie=0,ae=i,re=null;t:for(;;){for(var he;ae!==c||g!==0&&ae.nodeType!==3||(P=k+g),ae!==_||f!==0&&ae.nodeType!==3||(V=k+f),ae.nodeType===3&&(k+=ae.nodeValue.length),(he=ae.firstChild)!==null;)re=ae,ae=he;for(;;){if(ae===i)break t;if(re===c&&++Q===g&&(P=k),re===_&&++ie===f&&(V=k),(he=ae.nextSibling)!==null)break;ae=re,re=ae.parentNode}ae=he}c=P===-1||V===-1?null:{start:P,end:V}}else c=null}c=c||{start:0,end:0}}else c=null;for(cp={focusedElem:i,selectionRange:c},ki=!1,me=o;me!==null;)if(o=me,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,me=i;else for(;me!==null;){o=me;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var _e=ge.memoizedProps,Lt=ge.memoizedState,H=o.stateNode,U=H.getSnapshotBeforeUpdate(o.elementType===o.type?_e:Hr(o.type,_e),Lt);H.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var G=o.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(le){Pt(o,o.return,le)}if(i=o.sibling,i!==null){i.return=o.return,me=i;break}me=o.return}return ge=zv,zv=!1,ge}function Ec(i,o,c){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var _=g.destroy;g.destroy=void 0,_!==void 0&&Zp(o,c,_)}g=g.next}while(g!==f)}}function Fd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==o)}}function Jp(i){var o=i.ref;if(o!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof o=="function"?o(i):o.current=i}}function Uv(i){var o=i.alternate;o!==null&&(i.alternate=null,Uv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[hs],delete o[fc],delete o[fp],delete o[II],delete o[SI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function $v(i){return i.tag===5||i.tag===3||i.tag===4}function Bv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||$v(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Yp(i,o,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(i,o):c.insertBefore(i,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(i,c)):(o=c,o.appendChild(i)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=gd));else if(f!==4&&(i=i.child,i!==null))for(Yp(i,o,c),i=i.sibling;i!==null;)Yp(i,o,c),i=i.sibling}function Xp(i,o,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Xp(i,o,c),i=i.sibling;i!==null;)Xp(i,o,c),i=i.sibling}var mn=null,Kr=!1;function Pi(i,o,c){for(c=c.child;c!==null;)Wv(i,o,c),c=c.sibling}function Wv(i,o,c){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Co,c)}catch{}switch(c.tag){case 5:In||Qa(c,o);case 6:var f=mn,g=Kr;mn=null,Pi(i,o,c),mn=f,Kr=g,mn!==null&&(Kr?(i=mn,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):mn.removeChild(c.stateNode));break;case 18:mn!==null&&(Kr?(i=mn,c=c.stateNode,i.nodeType===8?hp(i.parentNode,c):i.nodeType===1&&hp(i,c),$r(i)):hp(mn,c.stateNode));break;case 4:f=mn,g=Kr,mn=c.stateNode.containerInfo,Kr=!0,Pi(i,o,c),mn=f,Kr=g;break;case 0:case 11:case 14:case 15:if(!In&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,k=_.destroy;_=_.tag,k!==void 0&&((_&2)!==0||(_&4)!==0)&&Zp(c,o,k),g=g.next}while(g!==f)}Pi(i,o,c);break;case 1:if(!In&&(Qa(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(P){Pt(c,o,P)}Pi(i,o,c);break;case 21:Pi(i,o,c);break;case 22:c.mode&1?(In=(f=In)||c.memoizedState!==null,Pi(i,o,c),In=f):Pi(i,o,c);break;default:Pi(i,o,c)}}function qv(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new BI),o.forEach(function(f){var g=XI.bind(null,i,f);c.has(f)||(c.add(f),f.then(g,g))})}}function Gr(i,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];try{var _=i,k=o,P=k;e:for(;P!==null;){switch(P.tag){case 5:mn=P.stateNode,Kr=!1;break e;case 3:mn=P.stateNode.containerInfo,Kr=!0;break e;case 4:mn=P.stateNode.containerInfo,Kr=!0;break e}P=P.return}if(mn===null)throw Error(n(160));Wv(_,k,g),mn=null,Kr=!1;var V=g.alternate;V!==null&&(V.return=null),g.return=null}catch(Q){Pt(g,o,Q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Hv(o,i),o=o.sibling}function Hv(i,o){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Gr(o,i),ms(i),f&4){try{Ec(3,i,i.return),Fd(3,i)}catch(_e){Pt(i,i.return,_e)}try{Ec(5,i,i.return)}catch(_e){Pt(i,i.return,_e)}}break;case 1:Gr(o,i),ms(i),f&512&&c!==null&&Qa(c,c.return);break;case 5:if(Gr(o,i),ms(i),f&512&&c!==null&&Qa(c,c.return),i.flags&32){var g=i.stateNode;try{Or(g,"")}catch(_e){Pt(i,i.return,_e)}}if(f&4&&(g=i.stateNode,g!=null)){var _=i.memoizedProps,k=c!==null?c.memoizedProps:_,P=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{P==="input"&&_.type==="radio"&&_.name!=null&&vr(g,_),Eo(P,k);var Q=Eo(P,_);for(k=0;k<V.length;k+=2){var ie=V[k],ae=V[k+1];ie==="style"?ko(g,ae):ie==="dangerouslySetInnerHTML"?jr(g,ae):ie==="children"?Or(g,ae):z(g,ie,ae,Q)}switch(P){case"input":hi(g,_);break;case"textarea":Rs(g,_);break;case"select":var re=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var he=_.value;he!=null?qn(g,!!_.multiple,he,!1):re!==!!_.multiple&&(_.defaultValue!=null?qn(g,!!_.multiple,_.defaultValue,!0):qn(g,!!_.multiple,_.multiple?[]:"",!1))}g[fc]=_}catch(_e){Pt(i,i.return,_e)}}break;case 6:if(Gr(o,i),ms(i),f&4){if(i.stateNode===null)throw Error(n(162));g=i.stateNode,_=i.memoizedProps;try{g.nodeValue=_}catch(_e){Pt(i,i.return,_e)}}break;case 3:if(Gr(o,i),ms(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{$r(o.containerInfo)}catch(_e){Pt(i,i.return,_e)}break;case 4:Gr(o,i),ms(i);break;case 13:Gr(o,i),ms(i),g=i.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(nm=ft())),f&4&&qv(i);break;case 22:if(ie=c!==null&&c.memoizedState!==null,i.mode&1?(In=(Q=In)||ie,Gr(o,i),In=Q):Gr(o,i),ms(i),f&8192){if(Q=i.memoizedState!==null,(i.stateNode.isHidden=Q)&&!ie&&(i.mode&1)!==0)for(me=i,ie=i.child;ie!==null;){for(ae=me=ie;me!==null;){switch(re=me,he=re.child,re.tag){case 0:case 11:case 14:case 15:Ec(4,re,re.return);break;case 1:Qa(re,re.return);var ge=re.stateNode;if(typeof ge.componentWillUnmount=="function"){f=re,c=re.return;try{o=f,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(_e){Pt(f,c,_e)}}break;case 5:Qa(re,re.return);break;case 22:if(re.memoizedState!==null){Qv(ae);continue}}he!==null?(he.return=re,me=he):Qv(ae)}ie=ie.sibling}e:for(ie=null,ae=i;;){if(ae.tag===5){if(ie===null){ie=ae;try{g=ae.stateNode,Q?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(P=ae.stateNode,V=ae.memoizedProps.style,k=V!=null&&V.hasOwnProperty("display")?V.display:null,P.style.display=xo("display",k))}catch(_e){Pt(i,i.return,_e)}}}else if(ae.tag===6){if(ie===null)try{ae.stateNode.nodeValue=Q?"":ae.memoizedProps}catch(_e){Pt(i,i.return,_e)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===i)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===i)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===i)break e;ie===ae&&(ie=null),ae=ae.return}ie===ae&&(ie=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Gr(o,i),ms(i),f&4&&qv(i);break;case 21:break;default:Gr(o,i),ms(i)}}function ms(i){var o=i.flags;if(o&2){try{e:{for(var c=i.return;c!==null;){if($v(c)){var f=c;break e}c=c.return}throw Error(n(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Or(g,""),f.flags&=-33);var _=Bv(i);Xp(i,_,g);break;case 3:case 4:var k=f.stateNode.containerInfo,P=Bv(i);Yp(i,P,k);break;default:throw Error(n(161))}}catch(V){Pt(i,i.return,V)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function qI(i,o,c){me=i,Kv(i)}function Kv(i,o,c){for(var f=(i.mode&1)!==0;me!==null;){var g=me,_=g.child;if(g.tag===22&&f){var k=g.memoizedState!==null||Vd;if(!k){var P=g.alternate,V=P!==null&&P.memoizedState!==null||In;P=Vd;var Q=In;if(Vd=k,(In=V)&&!Q)for(me=g;me!==null;)k=me,V=k.child,k.tag===22&&k.memoizedState!==null?Zv(g):V!==null?(V.return=k,me=V):Zv(g);for(;_!==null;)me=_,Kv(_),_=_.sibling;me=g,Vd=P,In=Q}Gv(i)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,me=_):Gv(i)}}function Gv(i){for(;me!==null;){var o=me;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:In||Fd(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!In)if(c===null)f.componentDidMount();else{var g=o.elementType===o.type?c.memoizedProps:Hr(o.type,c.memoizedProps);f.componentDidUpdate(g,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&Q0(o,_,f);break;case 3:var k=o.updateQueue;if(k!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}Q0(o,k,c)}break;case 5:var P=o.stateNode;if(c===null&&o.flags&4){c=P;var V=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&c.focus();break;case"img":V.src&&(c.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Q=o.alternate;if(Q!==null){var ie=Q.memoizedState;if(ie!==null){var ae=ie.dehydrated;ae!==null&&$r(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}In||o.flags&512&&Jp(o)}catch(re){Pt(o,o.return,re)}}if(o===i){me=null;break}if(c=o.sibling,c!==null){c.return=o.return,me=c;break}me=o.return}}function Qv(i){for(;me!==null;){var o=me;if(o===i){me=null;break}var c=o.sibling;if(c!==null){c.return=o.return,me=c;break}me=o.return}}function Zv(i){for(;me!==null;){var o=me;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{Fd(4,o)}catch(V){Pt(o,c,V)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(V){Pt(o,g,V)}}var _=o.return;try{Jp(o)}catch(V){Pt(o,_,V)}break;case 5:var k=o.return;try{Jp(o)}catch(V){Pt(o,k,V)}}}catch(V){Pt(o,o.return,V)}if(o===i){me=null;break}var P=o.sibling;if(P!==null){P.return=o.return,me=P;break}me=o.return}}var HI=Math.ceil,zd=Z.ReactCurrentDispatcher,em=Z.ReactCurrentOwner,Cr=Z.ReactCurrentBatchConfig,rt=0,sn=null,Wt=null,gn=0,mr=0,Za=Si(0),Jt=0,Tc=null,$o=0,Ud=0,tm=0,Ic=null,Xn=null,nm=0,Ja=1/0,qs=null,$d=!1,rm=null,Di=null,Bd=!1,ji=null,Wd=0,Sc=0,sm=null,qd=-1,Hd=0;function Vn(){return(rt&6)!==0?ft():qd!==-1?qd:qd=ft()}function Oi(i){return(i.mode&1)===0?1:(rt&2)!==0&&gn!==0?gn&-gn:AI.transition!==null?(Hd===0&&(Hd=No()),Hd):(i=Ze,i!==0||(i=window.event,i=i===void 0?16:tc(i.type)),i)}function Qr(i,o,c,f){if(50<Sc)throw Sc=0,sm=null,Error(n(185));_i(i,c,f),((rt&2)===0||i!==sn)&&(i===sn&&((rt&2)===0&&(Ud|=c),Jt===4&&Li(i,gn)),er(i,f),c===1&&rt===0&&(o.mode&1)===0&&(Ja=ft()+500,wd&&Ai()))}function er(i,o){var c=i.callbackNode;Ds(i,o);var f=Ao(i,i===sn?gn:0);if(f===0)c!==null&&Zl(c),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(c!=null&&Zl(c),o===1)i.tag===0?CI(Yv.bind(null,i)):M0(Yv.bind(null,i)),EI(function(){(rt&6)===0&&Ai()}),c=null;else{switch(bi(f)){case 1:c=So;break;case 4:c=gi;break;case 16:c=br;break;case 536870912:c=Hu;break;default:c=br}c=o_(c,Jv.bind(null,i))}i.callbackPriority=o,i.callbackNode=c}}function Jv(i,o){if(qd=-1,Hd=0,(rt&6)!==0)throw Error(n(327));var c=i.callbackNode;if(Ya()&&i.callbackNode!==c)return null;var f=Ao(i,i===sn?gn:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=Kd(i,f);else{o=f;var g=rt;rt|=2;var _=e_();(sn!==i||gn!==o)&&(qs=null,Ja=ft()+500,Wo(i,o));do try{QI();break}catch(P){Xv(i,P)}while(!0);xp(),zd.current=_,rt=g,Wt!==null?o=0:(sn=null,gn=0,o=Jt)}if(o!==0){if(o===2&&(g=ur(i),g!==0&&(f=g,o=im(i,g))),o===1)throw c=Tc,Wo(i,0),Li(i,f),er(i,ft()),c;if(o===6)Li(i,f);else{if(g=i.current.alternate,(f&30)===0&&!KI(g)&&(o=Kd(i,f),o===2&&(_=ur(i),_!==0&&(f=_,o=im(i,_))),o===1))throw c=Tc,Wo(i,0),Li(i,f),er(i,ft()),c;switch(i.finishedWork=g,i.finishedLanes=f,o){case 0:case 1:throw Error(n(345));case 2:qo(i,Xn,qs);break;case 3:if(Li(i,f),(f&130023424)===f&&(o=nm+500-ft(),10<o)){if(Ao(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Vn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=dp(qo.bind(null,i,Xn,qs),o);break}qo(i,Xn,qs);break;case 4:if(Li(i,f),(f&4194240)===f)break;for(o=i.eventTimes,g=-1;0<f;){var k=31-On(f);_=1<<k,k=o[k],k>g&&(g=k),f&=~_}if(f=g,f=ft()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*HI(f/1960))-f,10<f){i.timeoutHandle=dp(qo.bind(null,i,Xn,qs),f);break}qo(i,Xn,qs);break;case 5:qo(i,Xn,qs);break;default:throw Error(n(329))}}}return er(i,ft()),i.callbackNode===c?Jv.bind(null,i):null}function im(i,o){var c=Ic;return i.current.memoizedState.isDehydrated&&(Wo(i,o).flags|=256),i=Kd(i,o),i!==2&&(o=Xn,Xn=c,o!==null&&om(o)),i}function om(i){Xn===null?Xn=i:Xn.push.apply(Xn,i)}function KI(i){for(var o=i;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var g=c[f],_=g.getSnapshot;g=g.value;try{if(!Wr(_(),g))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Li(i,o){for(o&=~tm,o&=~Ud,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var c=31-On(o),f=1<<c;i[c]=-1,o&=~f}}function Yv(i){if((rt&6)!==0)throw Error(n(327));Ya();var o=Ao(i,0);if((o&1)===0)return er(i,ft()),null;var c=Kd(i,o);if(i.tag!==0&&c===2){var f=ur(i);f!==0&&(o=f,c=im(i,f))}if(c===1)throw c=Tc,Wo(i,0),Li(i,o),er(i,ft()),c;if(c===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,qo(i,Xn,qs),er(i,ft()),null}function am(i,o){var c=rt;rt|=1;try{return i(o)}finally{rt=c,rt===0&&(Ja=ft()+500,wd&&Ai())}}function Bo(i){ji!==null&&ji.tag===0&&(rt&6)===0&&Ya();var o=rt;rt|=1;var c=Cr.transition,f=Ze;try{if(Cr.transition=null,Ze=1,i)return i()}finally{Ze=f,Cr.transition=c,rt=o,(rt&6)===0&&Ai()}}function lm(){mr=Za.current,yt(Za)}function Wo(i,o){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,kI(c)),Wt!==null)for(c=Wt.return;c!==null;){var f=c;switch(yp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&vd();break;case 3:Ka(),yt(Zn),yt(kn),Np();break;case 5:Cp(f);break;case 4:Ka();break;case 13:yt(Et);break;case 19:yt(Et);break;case 10:kp(f.type._context);break;case 22:case 23:lm()}c=c.return}if(sn=i,Wt=i=Mi(i.current,null),gn=mr=o,Jt=0,Tc=null,tm=Ud=$o=0,Xn=Ic=null,Fo!==null){for(o=0;o<Fo.length;o++)if(c=Fo[o],f=c.interleaved,f!==null){c.interleaved=null;var g=f.next,_=c.pending;if(_!==null){var k=_.next;_.next=g,f.next=k}c.pending=f}Fo=null}return i}function Xv(i,o){do{var c=Wt;try{if(xp(),Nd.current=jd,Rd){for(var f=Tt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Rd=!1}if(Uo=0,rn=Zt=Tt=null,_c=!1,wc=0,em.current=null,c===null||c.return===null){Jt=1,Tc=o,Wt=null;break}e:{var _=i,k=c.return,P=c,V=o;if(o=gn,P.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var Q=V,ie=P,ae=ie.tag;if((ie.mode&1)===0&&(ae===0||ae===11||ae===15)){var re=ie.alternate;re?(ie.updateQueue=re.updateQueue,ie.memoizedState=re.memoizedState,ie.lanes=re.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var he=Ev(k);if(he!==null){he.flags&=-257,Tv(he,k,P,_,o),he.mode&1&&kv(_,Q,o),o=he,V=Q;var ge=o.updateQueue;if(ge===null){var _e=new Set;_e.add(V),o.updateQueue=_e}else ge.add(V);break e}else{if((o&1)===0){kv(_,Q,o),cm();break e}V=Error(n(426))}}else if(xt&&P.mode&1){var Lt=Ev(k);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),Tv(Lt,k,P,_,o),wp(Ga(V,P));break e}}_=V=Ga(V,P),Jt!==4&&(Jt=2),Ic===null?Ic=[_]:Ic.push(_),_=k;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var H=bv(_,V,o);G0(_,H);break e;case 1:P=V;var U=_.type,G=_.stateNode;if((_.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Di===null||!Di.has(G)))){_.flags|=65536,o&=-o,_.lanes|=o;var le=xv(_,P,o);G0(_,le);break e}}_=_.return}while(_!==null)}n_(c)}catch(be){o=be,Wt===c&&c!==null&&(Wt=c=c.return);continue}break}while(!0)}function e_(){var i=zd.current;return zd.current=jd,i===null?jd:i}function cm(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),sn===null||($o&268435455)===0&&(Ud&268435455)===0||Li(sn,gn)}function Kd(i,o){var c=rt;rt|=2;var f=e_();(sn!==i||gn!==o)&&(qs=null,Wo(i,o));do try{GI();break}catch(g){Xv(i,g)}while(!0);if(xp(),rt=c,zd.current=f,Wt!==null)throw Error(n(261));return sn=null,gn=0,Jt}function GI(){for(;Wt!==null;)t_(Wt)}function QI(){for(;Wt!==null&&!Wu();)t_(Wt)}function t_(i){var o=i_(i.alternate,i,mr);i.memoizedProps=i.pendingProps,o===null?n_(i):Wt=o,em.current=null}function n_(i){var o=i;do{var c=o.alternate;if(i=o.return,(o.flags&32768)===0){if(c=UI(c,o,mr),c!==null){Wt=c;return}}else{if(c=$I(c,o),c!==null){c.flags&=32767,Wt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Jt=6,Wt=null;return}}if(o=o.sibling,o!==null){Wt=o;return}Wt=o=i}while(o!==null);Jt===0&&(Jt=5)}function qo(i,o,c){var f=Ze,g=Cr.transition;try{Cr.transition=null,Ze=1,ZI(i,o,c,f)}finally{Cr.transition=g,Ze=f}return null}function ZI(i,o,c,f){do Ya();while(ji!==null);if((rt&6)!==0)throw Error(n(327));c=i.finishedWork;var g=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var _=c.lanes|c.childLanes;if(dt(i,_),i===sn&&(Wt=sn=null,gn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Bd||(Bd=!0,o_(br,function(){return Ya(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=Cr.transition,Cr.transition=null;var k=Ze;Ze=1;var P=rt;rt|=4,em.current=null,WI(i,c),Hv(c,i),gI(cp),ki=!!lp,cp=lp=null,i.current=c,qI(c),Hf(),rt=P,Ze=k,Cr.transition=_}else i.current=c;if(Bd&&(Bd=!1,ji=i,Wd=g),_=i.pendingLanes,_===0&&(Di=null),Ku(c.stateNode),er(i,ft()),o!==null)for(f=i.onRecoverableError,c=0;c<o.length;c++)g=o[c],f(g.value,{componentStack:g.stack,digest:g.digest});if($d)throw $d=!1,i=rm,rm=null,i;return(Wd&1)!==0&&i.tag!==0&&Ya(),_=i.pendingLanes,(_&1)!==0?i===sm?Sc++:(Sc=0,sm=i):Sc=0,Ai(),null}function Ya(){if(ji!==null){var i=bi(Wd),o=Cr.transition,c=Ze;try{if(Cr.transition=null,Ze=16>i?16:i,ji===null)var f=!1;else{if(i=ji,ji=null,Wd=0,(rt&6)!==0)throw Error(n(331));var g=rt;for(rt|=4,me=i.current;me!==null;){var _=me,k=_.child;if((me.flags&16)!==0){var P=_.deletions;if(P!==null){for(var V=0;V<P.length;V++){var Q=P[V];for(me=Q;me!==null;){var ie=me;switch(ie.tag){case 0:case 11:case 15:Ec(8,ie,_)}var ae=ie.child;if(ae!==null)ae.return=ie,me=ae;else for(;me!==null;){ie=me;var re=ie.sibling,he=ie.return;if(Uv(ie),ie===Q){me=null;break}if(re!==null){re.return=he,me=re;break}me=he}}}var ge=_.alternate;if(ge!==null){var _e=ge.child;if(_e!==null){ge.child=null;do{var Lt=_e.sibling;_e.sibling=null,_e=Lt}while(_e!==null)}}me=_}}if((_.subtreeFlags&2064)!==0&&k!==null)k.return=_,me=k;else e:for(;me!==null;){if(_=me,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Ec(9,_,_.return)}var H=_.sibling;if(H!==null){H.return=_.return,me=H;break e}me=_.return}}var U=i.current;for(me=U;me!==null;){k=me;var G=k.child;if((k.subtreeFlags&2064)!==0&&G!==null)G.return=k,me=G;else e:for(k=U;me!==null;){if(P=me,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Fd(9,P)}}catch(be){Pt(P,P.return,be)}if(P===k){me=null;break e}var le=P.sibling;if(le!==null){le.return=P.return,me=le;break e}me=P.return}}if(rt=g,Ai(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Co,i)}catch{}f=!0}return f}finally{Ze=c,Cr.transition=o}}return!1}function r_(i,o,c){o=Ga(c,o),o=bv(i,o,1),i=Ri(i,o,1),o=Vn(),i!==null&&(_i(i,1,o),er(i,o))}function Pt(i,o,c){if(i.tag===3)r_(i,i,c);else for(;o!==null;){if(o.tag===3){r_(o,i,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Di===null||!Di.has(f))){i=Ga(c,i),i=xv(o,i,1),o=Ri(o,i,1),i=Vn(),o!==null&&(_i(o,1,i),er(o,i));break}}o=o.return}}function JI(i,o,c){var f=i.pingCache;f!==null&&f.delete(o),o=Vn(),i.pingedLanes|=i.suspendedLanes&c,sn===i&&(gn&c)===c&&(Jt===4||Jt===3&&(gn&130023424)===gn&&500>ft()-nm?Wo(i,0):tm|=c),er(i,o)}function s_(i,o){o===0&&((i.mode&1)===0?o=1:(o=ba,ba<<=1,(ba&130023424)===0&&(ba=4194304)));var c=Vn();i=$s(i,o),i!==null&&(_i(i,o,c),er(i,c))}function YI(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),s_(i,c)}function XI(i,o){var c=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(o),s_(i,c)}var i_;i_=function(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps||Zn.current)Yn=!0;else{if((i.lanes&c)===0&&(o.flags&128)===0)return Yn=!1,zI(i,o,c);Yn=(i.flags&131072)!==0}else Yn=!1,xt&&(o.flags&1048576)!==0&&V0(o,xd,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Md(i,o),i=o.pendingProps;var g=za(o,kn.current);Ha(o,c),g=Dp(null,o,f,i,g,c);var _=jp();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Jn(f)?(_=!0,_d(o)):_=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Ip(o),g.updater=Od,o.stateNode=g,g._reactInternals=o,zp(o,f,i,c),o=Wp(null,o,f,!0,_,c)):(o.tag=0,xt&&_&&gp(o),Mn(null,o,g,c),o=o.child),o;case 16:f=o.elementType;e:{switch(Md(i,o),i=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=tS(f),i=Hr(f,i),g){case 0:o=Bp(null,o,f,i,c);break e;case 1:o=Rv(null,o,f,i,c);break e;case 11:o=Iv(null,o,f,i,c);break e;case 14:o=Sv(null,o,f,Hr(f.type,i),c);break e}throw Error(n(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Hr(f,g),Bp(i,o,f,g,c);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Hr(f,g),Rv(i,o,f,g,c);case 3:e:{if(Pv(o),i===null)throw Error(n(387));f=o.pendingProps,_=o.memoizedState,g=_.element,K0(i,o),Cd(o,f,null,c);var k=o.memoizedState;if(f=k.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){g=Ga(Error(n(423)),o),o=Dv(i,o,f,c,g);break e}else if(f!==g){g=Ga(Error(n(424)),o),o=Dv(i,o,f,c,g);break e}else for(pr=Ii(o.stateNode.containerInfo.firstChild),fr=o,xt=!0,qr=null,c=q0(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ba(),f===g){o=Ws(i,o,c);break e}Mn(i,o,f,c)}o=o.child}return o;case 5:return Z0(o),i===null&&_p(o),f=o.type,g=o.pendingProps,_=i!==null?i.memoizedProps:null,k=g.children,up(f,g)?k=null:_!==null&&up(f,_)&&(o.flags|=32),Nv(i,o),Mn(i,o,k,c),o.child;case 6:return i===null&&_p(o),null;case 13:return jv(i,o,c);case 4:return Sp(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=Wa(o,null,f,c):Mn(i,o,f,c),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Hr(f,g),Iv(i,o,f,g,c);case 7:return Mn(i,o,o.pendingProps,c),o.child;case 8:return Mn(i,o,o.pendingProps.children,c),o.child;case 12:return Mn(i,o,o.pendingProps.children,c),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,_=o.memoizedProps,k=g.value,pt(Td,f._currentValue),f._currentValue=k,_!==null)if(Wr(_.value,k)){if(_.children===g.children&&!Zn.current){o=Ws(i,o,c);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var P=_.dependencies;if(P!==null){k=_.child;for(var V=P.firstContext;V!==null;){if(V.context===f){if(_.tag===1){V=Bs(-1,c&-c),V.tag=2;var Q=_.updateQueue;if(Q!==null){Q=Q.shared;var ie=Q.pending;ie===null?V.next=V:(V.next=ie.next,ie.next=V),Q.pending=V}}_.lanes|=c,V=_.alternate,V!==null&&(V.lanes|=c),Ep(_.return,c,o),P.lanes|=c;break}V=V.next}}else if(_.tag===10)k=_.type===o.type?null:_.child;else if(_.tag===18){if(k=_.return,k===null)throw Error(n(341));k.lanes|=c,P=k.alternate,P!==null&&(P.lanes|=c),Ep(k,c,o),k=_.sibling}else k=_.child;if(k!==null)k.return=_;else for(k=_;k!==null;){if(k===o){k=null;break}if(_=k.sibling,_!==null){_.return=k.return,k=_;break}k=k.return}_=k}Mn(i,o,g.children,c),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,Ha(o,c),g=Ir(g),f=f(g),o.flags|=1,Mn(i,o,f,c),o.child;case 14:return f=o.type,g=Hr(f,o.pendingProps),g=Hr(f.type,g),Sv(i,o,f,g,c);case 15:return Cv(i,o,o.type,o.pendingProps,c);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Hr(f,g),Md(i,o),o.tag=1,Jn(f)?(i=!0,_d(o)):i=!1,Ha(o,c),_v(o,f,g),zp(o,f,g,c),Wp(null,o,f,!0,i,c);case 19:return Lv(i,o,c);case 22:return Av(i,o,c)}throw Error(n(156,o.tag))};function o_(i,o){return _a(i,o)}function eS(i,o,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(i,o,c,f){return new eS(i,o,c,f)}function um(i){return i=i.prototype,!(!i||!i.isReactComponent)}function tS(i){if(typeof i=="function")return um(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===nt)return 14}return 2}function Mi(i,o){var c=i.alternate;return c===null?(c=Ar(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Gd(i,o,c,f,g,_){var k=2;if(f=i,typeof i=="function")um(i)&&(k=1);else if(typeof i=="string")k=5;else e:switch(i){case R:return Ho(c.children,g,_,o);case T:k=8,g|=8;break;case N:return i=Ar(12,c,o,g|2),i.elementType=N,i.lanes=_,i;case D:return i=Ar(13,c,o,g),i.elementType=D,i.lanes=_,i;case $e:return i=Ar(19,c,o,g),i.elementType=$e,i.lanes=_,i;case Ie:return Qd(c,g,_,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:k=10;break e;case L:k=9;break e;case F:k=11;break e;case nt:k=14;break e;case Ke:k=16,f=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return o=Ar(k,c,o,g),o.elementType=i,o.type=f,o.lanes=_,o}function Ho(i,o,c,f){return i=Ar(7,i,f,o),i.lanes=c,i}function Qd(i,o,c,f){return i=Ar(22,i,f,o),i.elementType=Ie,i.lanes=c,i.stateNode={isHidden:!1},i}function dm(i,o,c){return i=Ar(6,i,null,o),i.lanes=c,i}function hm(i,o,c){return o=Ar(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function nS(i,o,c,f,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vi(0),this.expirationTimes=vi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function fm(i,o,c,f,g,_,k,P,V){return i=new nS(i,o,c,P,V),o===1?(o=1,_===!0&&(o|=8)):o=0,_=Ar(3,null,null,o),i.current=_,_.stateNode=i,_.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ip(_),i}function rS(i,o,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:f==null?null:""+f,children:i,containerInfo:o,implementation:c}}function a_(i){if(!i)return Ci;i=i._reactInternals;e:{if(Mr(i)!==i||i.tag!==1)throw Error(n(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Jn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(i.tag===1){var c=i.type;if(Jn(c))return O0(i,c,o)}return o}function l_(i,o,c,f,g,_,k,P,V){return i=fm(c,f,!0,i,g,_,k,P,V),i.context=a_(null),c=i.current,f=Vn(),g=Oi(c),_=Bs(f,g),_.callback=o??null,Ri(c,_,g),i.current.lanes=g,_i(i,g,f),er(i,f),i}function Zd(i,o,c,f){var g=o.current,_=Vn(),k=Oi(g);return c=a_(c),o.context===null?o.context=c:o.pendingContext=c,o=Bs(_,k),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Ri(g,o,k),i!==null&&(Qr(i,g,k,_),Sd(i,g,k)),k}function Jd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function c_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function pm(i,o){c_(i,o),(i=i.alternate)&&c_(i,o)}function sS(){return null}var u_=typeof reportError=="function"?reportError:function(i){console.error(i)};function mm(i){this._internalRoot=i}Yd.prototype.render=mm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));Zd(i,o,null,null)},Yd.prototype.unmount=mm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Bo(function(){Zd(null,i,null,null)}),o[Vs]=null}};function Yd(i){this._internalRoot=i}Yd.prototype.unstable_scheduleHydration=function(i){if(i){var o=Yu();i={blockedOn:null,target:i,priority:o};for(var c=0;c<ls.length&&o!==0&&o<ls[c].priority;c++);ls.splice(c,0,i),c===0&&td(i)}};function gm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Xd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function d_(){}function iS(i,o,c,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var Q=Jd(k);_.call(Q)}}var k=l_(o,f,i,0,null,!1,!1,"",d_);return i._reactRootContainer=k,i[Vs]=k.current,dc(i.nodeType===8?i.parentNode:i),Bo(),k}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var P=f;f=function(){var Q=Jd(V);P.call(Q)}}var V=fm(i,0,!1,null,null,!1,!1,"",d_);return i._reactRootContainer=V,i[Vs]=V.current,dc(i.nodeType===8?i.parentNode:i),Bo(function(){Zd(o,V,c,f)}),V}function eh(i,o,c,f,g){var _=c._reactRootContainer;if(_){var k=_;if(typeof g=="function"){var P=g;g=function(){var V=Jd(k);P.call(V)}}Zd(o,k,i,g)}else k=iS(c,o,i,g,f);return Jd(k)}Zu=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var c=yi(o.pendingLanes);c!==0&&(wi(o,c|1),er(o,ft()),(rt&6)===0&&(Ja=ft()+500,Ai()))}break;case 13:Bo(function(){var f=$s(i,1);if(f!==null){var g=Vn();Qr(f,i,1,g)}}),pm(i,1)}},xa=function(i){if(i.tag===13){var o=$s(i,134217728);if(o!==null){var c=Vn();Qr(o,i,134217728,c)}pm(i,134217728)}},Ju=function(i){if(i.tag===13){var o=Oi(i),c=$s(i,o);if(c!==null){var f=Vn();Qr(c,i,o,f)}pm(i,o)}},Yu=function(){return Ze},Xu=function(i,o){var c=Ze;try{return Ze=i,o()}finally{Ze=c}},mi=function(i,o,c){switch(o){case"input":if(hi(i,c),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==i&&f.form===i.form){var g=yd(f);if(!g)throw Error(n(90));Nt(f),hi(f,g)}}}break;case"textarea":Rs(i,c);break;case"select":o=c.value,o!=null&&qn(i,!!c.multiple,o,!1)}},zt=am,Gt=Bo;var oS={usingClientEntryPoint:!1,Events:[pc,Va,yd,wt,Kn,am]},Cc={findFiberByHostInstance:Oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aS={bundleType:Cc.bundleType,version:Cc.version,rendererPackageName:Cc.rendererPackageName,rendererConfig:Cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Ql(i),i===null?null:i.stateNode},findFiberByHostInstance:Cc.findFiberByHostInstance||sS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{Co=th.inject(aS),cr=th}catch{}}return tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oS,tr.createPortal=function(i,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gm(o))throw Error(n(200));return rS(i,o,null,c)},tr.createRoot=function(i,o){if(!gm(i))throw Error(n(299));var c=!1,f="",g=u_;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=fm(i,1,!1,null,null,c,!1,f,g),i[Vs]=o.current,dc(i.nodeType===8?i.parentNode:i),new mm(o)},tr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Ql(o),i=i===null?null:i.stateNode,i},tr.flushSync=function(i){return Bo(i)},tr.hydrate=function(i,o,c){if(!Xd(o))throw Error(n(200));return eh(null,i,o,!0,c)},tr.hydrateRoot=function(i,o,c){if(!gm(i))throw Error(n(405));var f=c!=null&&c.hydratedSources||null,g=!1,_="",k=u_;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),o=l_(o,null,i,1,c??null,g,!1,_,k),i[Vs]=o.current,dc(i),f)for(i=0;i<f.length;i++)c=f[i],g=c._getVersion,g=g(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,g]:o.mutableSourceEagerHydrationData.push(c,g);return new Yd(o)},tr.render=function(i,o,c){if(!Xd(o))throw Error(n(200));return eh(null,i,o,!1,c)},tr.unmountComponentAtNode=function(i){if(!Xd(i))throw Error(n(40));return i._reactRootContainer?(Bo(function(){eh(null,null,i,!1,function(){i._reactRootContainer=null,i[Vs]=null})}),!0):!1},tr.unstable_batchedUpdates=am,tr.unstable_renderSubtreeIntoContainer=function(i,o,c,f){if(!Xd(c))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return eh(i,o,c,!1,f)},tr.version="18.3.1-next-f1338f8080-20240426",tr}var C_;function cx(){if(C_)return wm.exports;C_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wm.exports=qS(),wm.exports}var A_;function HS(){if(A_)return sh;A_=1;var t=cx();return sh.createRoot=t.createRoot,sh.hydrateRoot=t.hydrateRoot,sh}var KS=HS();const GS=nx(KS);var sl=cx();function QS(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const hf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Vg(t){return"nodeType"in t}function rr(t){var e,n;return t?jl(t)?t:Vg(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Fg(t){const{Document:e}=rr(t);return t instanceof e}function wu(t){return jl(t)?!1:t instanceof rr(t).HTMLElement}function ux(t){return t instanceof rr(t).SVGElement}function Ol(t){return t?jl(t)?t.document:Vg(t)?Fg(t)?t:wu(t)||ux(t)?t.ownerDocument:document:document:document}const Es=hf?O.useLayoutEffect:O.useEffect;function zg(t){const e=O.useRef(t);return Es(()=>{e.current=t}),O.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function ZS(){const t=O.useRef(null),e=O.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=O.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Yc(t,e){e===void 0&&(e=[t]);const n=O.useRef(t);return Es(()=>{n.current!==t&&(n.current=t)},e),n}function bu(t,e){const n=O.useRef();return O.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Fh(t){const e=zg(t),n=O.useRef(null),r=O.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Qm(t){const e=O.useRef();return O.useEffect(()=>{e.current=t},[t]),e.current}let km={};function xu(t,e){return O.useMemo(()=>{if(e)return e;const n=km[t]==null?0:km[t]+1;return km[t]=n,t+"-"+n},[t,e])}function dx(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,l)=>{const u=Object.entries(l);for(const[h,m]of u){const v=a[h];v!=null&&(a[h]=v+t*m)}return a},{...e})}}const ll=dx(1),Xc=dx(-1);function JS(t){return"clientX"in t&&"clientY"in t}function Ug(t){if(!t)return!1;const{KeyboardEvent:e}=rr(t.target);return e&&t instanceof e}function YS(t){if(!t)return!1;const{TouchEvent:e}=rr(t.target);return e&&t instanceof e}function Zm(t){if(YS(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return JS(t)?{x:t.clientX,y:t.clientY}:null}const eu=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[eu.Translate.toString(t),eu.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),N_="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function XS(t){return t.matches(N_)?t:t.querySelector(N_)}const e1={display:"none"};function t1(t){let{id:e,value:n}=t;return He.createElement("div",{id:e,style:e1},n)}function n1(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return He.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function r1(){const[t,e]=O.useState("");return{announce:O.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const hx=O.createContext(null);function s1(t){const e=O.useContext(hx);O.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function i1(){const[t]=O.useState(()=>new Set),e=O.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[O.useCallback(r=>{let{type:s,event:a}=r;t.forEach(l=>{var u;return(u=l[s])==null?void 0:u.call(l,a)})},[t]),e]}const o1={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},a1={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function l1(t){let{announcements:e=a1,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=o1}=t;const{announce:a,announcement:l}=r1(),u=xu("DndLiveRegion"),[h,m]=O.useState(!1);if(O.useEffect(()=>{m(!0)},[]),s1(O.useMemo(()=>({onDragStart(w){let{active:x}=w;a(e.onDragStart({active:x}))},onDragMove(w){let{active:x,over:I}=w;e.onDragMove&&a(e.onDragMove({active:x,over:I}))},onDragOver(w){let{active:x,over:I}=w;a(e.onDragOver({active:x,over:I}))},onDragEnd(w){let{active:x,over:I}=w;a(e.onDragEnd({active:x,over:I}))},onDragCancel(w){let{active:x,over:I}=w;a(e.onDragCancel({active:x,over:I}))}}),[a,e])),!h)return null;const v=He.createElement(He.Fragment,null,He.createElement(t1,{id:r,value:s.draggable}),He.createElement(n1,{id:u,announcement:l}));return n?sl.createPortal(v,n):v}var Xt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Xt||(Xt={}));function zh(){}function Uh(t,e){return O.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function fx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const es=Object.freeze({x:0,y:0});function px(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function mx(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function c1(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function R_(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function gx(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function P_(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const yx=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=P_(e,e.left,e.top),a=[];for(const l of r){const{id:u}=l,h=n.get(u);if(h){const m=px(P_(h),s);a.push({id:u,data:{droppableContainer:l,value:m}})}}return a.sort(mx)},u1=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=R_(e),a=[];for(const l of r){const{id:u}=l,h=n.get(u);if(h){const m=R_(h),v=s.reduce((x,I,C)=>x+px(m[C],I),0),w=Number((v/4).toFixed(4));a.push({id:u,data:{droppableContainer:l,value:w}})}}return a.sort(mx)};function d1(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),l=s-r,u=a-n;if(r<s&&n<a){const h=e.width*e.height,m=t.width*t.height,v=l*u,w=v/(h+m-v);return Number(w.toFixed(4))}return 0}const h1=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const a of r){const{id:l}=a,u=n.get(l);if(u){const h=d1(u,e);h>0&&s.push({id:l,data:{droppableContainer:a,value:h}})}}return s.sort(c1)};function f1(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function vx(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:es}function p1(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((l,u)=>({...l,top:l.top+t*u.y,bottom:l.bottom+t*u.y,left:l.left+t*u.x,right:l.right+t*u.x}),{...n})}}const m1=p1(1);function g1(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function y1(t,e,n){const r=g1(e);if(!r)return t;const{scaleX:s,scaleY:a,x:l,y:u}=r,h=t.left-l-(1-s)*parseFloat(n),m=t.top-u-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),v=s?t.width/s:t.width,w=a?t.height/a:t.height;return{width:v,height:w,top:m,right:h+v,bottom:m+w,left:h}}const v1={ignoreTransform:!1};function Ll(t,e){e===void 0&&(e=v1);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:v}=rr(t).getComputedStyle(t);m&&(n=y1(n,m,v))}const{top:r,left:s,width:a,height:l,bottom:u,right:h}=n;return{top:r,left:s,width:a,height:l,bottom:u,right:h}}function D_(t){return Ll(t,{ignoreTransform:!0})}function _1(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function w1(t,e){return e===void 0&&(e=rr(t).getComputedStyle(t)),e.position==="fixed"}function b1(t,e){e===void 0&&(e=rr(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=e[s];return typeof a=="string"?n.test(a):!1})}function ff(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(Fg(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!wu(s)||ux(s)||n.includes(s))return n;const a=rr(t).getComputedStyle(s);return s!==t&&b1(s,a)&&n.push(s),w1(s,a)?n:r(s.parentNode)}return t?r(t):n}function _x(t){const[e]=ff(t,1);return e??null}function Em(t){return!hf||!t?null:jl(t)?t:Vg(t)?Fg(t)||t===Ol(t).scrollingElement?window:wu(t)?t:null:null}function wx(t){return jl(t)?t.scrollX:t.scrollLeft}function bx(t){return jl(t)?t.scrollY:t.scrollTop}function Jm(t){return{x:wx(t),y:bx(t)}}var cn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(cn||(cn={}));function xx(t){return!hf||!t?!1:t===document.scrollingElement}function kx(t){const e={x:0,y:0},n=xx(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,l=t.scrollTop>=r.y,u=t.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:l,isRight:u,maxScroll:r,minScroll:e}}const x1={x:.2,y:.2};function k1(t,e,n,r,s){let{top:a,left:l,right:u,bottom:h}=n;r===void 0&&(r=10),s===void 0&&(s=x1);const{isTop:m,isBottom:v,isLeft:w,isRight:x}=kx(t),I={x:0,y:0},C={x:0,y:0},E={height:e.height*s.y,width:e.width*s.x};return!m&&a<=e.top+E.height?(I.y=cn.Backward,C.y=r*Math.abs((e.top+E.height-a)/E.height)):!v&&h>=e.bottom-E.height&&(I.y=cn.Forward,C.y=r*Math.abs((e.bottom-E.height-h)/E.height)),!x&&u>=e.right-E.width?(I.x=cn.Forward,C.x=r*Math.abs((e.right-E.width-u)/E.width)):!w&&l<=e.left+E.width&&(I.x=cn.Backward,C.x=r*Math.abs((e.left+E.width-l)/E.width)),{direction:I,speed:C}}function E1(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:l}=window;return{top:0,left:0,right:a,bottom:l,width:a,height:l}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Ex(t){return t.reduce((e,n)=>ll(e,Jm(n)),es)}function T1(t){return t.reduce((e,n)=>e+wx(n),0)}function I1(t){return t.reduce((e,n)=>e+bx(n),0)}function S1(t,e){if(e===void 0&&(e=Ll),!t)return;const{top:n,left:r,bottom:s,right:a}=e(t);_x(t)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const C1=[["x",["left","right"],T1],["y",["top","bottom"],I1]];class $g{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ff(n),s=Ex(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,l,u]of C1)for(const h of l)Object.defineProperty(this,h,{get:()=>{const m=u(r),v=s[a]-m;return this.rect[h]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $c{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function A1(t){const{EventTarget:e}=rr(t);return t instanceof e?t:Ol(t)}function Tm(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Rr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Rr||(Rr={}));function j_(t){t.preventDefault()}function N1(t){t.stopPropagation()}var Ye;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Ye||(Ye={}));const Tx={start:[Ye.Space,Ye.Enter],cancel:[Ye.Esc],end:[Ye.Space,Ye.Enter,Ye.Tab]},R1=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ye.Right:return{...n,x:n.x+25};case Ye.Left:return{...n,x:n.x-25};case Ye.Down:return{...n,y:n.y+25};case Ye.Up:return{...n,y:n.y-25}}};class Bg{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new $c(Ol(n)),this.windowListeners=new $c(rr(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Rr.Resize,this.handleCancel),this.windowListeners.add(Rr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Rr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&S1(r),n(es)}handleKeyDown(e){if(Ug(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=Tx,coordinateGetter:l=R1,scrollBehavior:u="smooth"}=s,{code:h}=e;if(a.end.includes(h)){this.handleEnd(e);return}if(a.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:m}=r.current,v=m?{x:m.left,y:m.top}:es;this.referenceCoordinates||(this.referenceCoordinates=v);const w=l(e,{active:n,context:r.current,currentCoordinates:v});if(w){const x=Xc(w,v),I={x:0,y:0},{scrollableAncestors:C}=r.current;for(const E of C){const A=e.code,{isTop:j,isRight:W,isLeft:z,isBottom:Z,maxScroll:K,minScroll:ne}=kx(E),R=E1(E),T={x:Math.min(A===Ye.Right?R.right-R.width/2:R.right,Math.max(A===Ye.Right?R.left:R.left+R.width/2,w.x)),y:Math.min(A===Ye.Down?R.bottom-R.height/2:R.bottom,Math.max(A===Ye.Down?R.top:R.top+R.height/2,w.y))},N=A===Ye.Right&&!W||A===Ye.Left&&!z,M=A===Ye.Down&&!Z||A===Ye.Up&&!j;if(N&&T.x!==w.x){const L=E.scrollLeft+x.x,F=A===Ye.Right&&L<=K.x||A===Ye.Left&&L>=ne.x;if(F&&!x.y){E.scrollTo({left:L,behavior:u});return}F?I.x=E.scrollLeft-L:I.x=A===Ye.Right?E.scrollLeft-K.x:E.scrollLeft-ne.x,I.x&&E.scrollBy({left:-I.x,behavior:u});break}else if(M&&T.y!==w.y){const L=E.scrollTop+x.y,F=A===Ye.Down&&L<=K.y||A===Ye.Up&&L>=ne.y;if(F&&!x.x){E.scrollTo({top:L,behavior:u});return}F?I.y=E.scrollTop-L:I.y=A===Ye.Down?E.scrollTop-K.y:E.scrollTop-ne.y,I.y&&E.scrollBy({top:-I.y,behavior:u});break}}this.handleMove(e,ll(Xc(w,this.referenceCoordinates),I))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Bg.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Tx,onActivation:s}=e,{active:a}=n;const{code:l}=t.nativeEvent;if(r.start.includes(l)){const u=a.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function O_(t){return!!(t&&"distance"in t)}function L_(t){return!!(t&&"delay"in t)}class Wg{constructor(e,n,r){var s;r===void 0&&(r=A1(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:a}=e,{target:l}=a;this.props=e,this.events=n,this.document=Ol(l),this.documentListeners=new $c(this.document),this.listeners=new $c(r),this.windowListeners=new $c(rr(l)),this.initialCoordinates=(s=Zm(a))!=null?s:es,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Rr.Resize,this.handleCancel),this.windowListeners.add(Rr.DragStart,j_),this.windowListeners.add(Rr.VisibilityChange,this.handleCancel),this.windowListeners.add(Rr.ContextMenu,j_),this.documentListeners.add(Rr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(L_(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(O_(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Rr.Click,N1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Rr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:l,options:{activationConstraint:u}}=a;if(!s)return;const h=(n=Zm(e))!=null?n:es,m=Xc(s,h);if(!r&&u){if(O_(u)){if(u.tolerance!=null&&Tm(m,u.tolerance))return this.handleCancel();if(Tm(m,u.distance))return this.handleStart()}if(L_(u)&&Tm(m,u.tolerance))return this.handleCancel();this.handlePending(u,m);return}e.cancelable&&e.preventDefault(),l(h)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Ye.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const P1={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class pf extends Wg{constructor(e){const{event:n}=e,r=Ol(n.target);super(e,P1,r)}}pf.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const D1={move:{name:"mousemove"},end:{name:"mouseup"}};var Ym;(function(t){t[t.RightClick=2]="RightClick"})(Ym||(Ym={}));class j1 extends Wg{constructor(e){super(e,D1,Ol(e.event.target))}}j1.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Ym.RightClick?!1:(r==null||r({event:n}),!0)}}];const Im={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ix extends Wg{constructor(e){super(e,Im)}static setup(){return window.addEventListener(Im.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Im.move.name,e)};function e(){}}}Ix.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Bc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Bc||(Bc={}));var $h;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})($h||($h={}));function O1(t){let{acceleration:e,activator:n=Bc.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:l=5,order:u=$h.TreeOrder,pointerCoordinates:h,scrollableAncestors:m,scrollableAncestorRects:v,delta:w,threshold:x}=t;const I=M1({delta:w,disabled:!a}),[C,E]=ZS(),A=O.useRef({x:0,y:0}),j=O.useRef({x:0,y:0}),W=O.useMemo(()=>{switch(n){case Bc.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Bc.DraggableRect:return s}},[n,s,h]),z=O.useRef(null),Z=O.useCallback(()=>{const ne=z.current;if(!ne)return;const R=A.current.x*j.current.x,T=A.current.y*j.current.y;ne.scrollBy(R,T)},[]),K=O.useMemo(()=>u===$h.TreeOrder?[...m].reverse():m,[u,m]);O.useEffect(()=>{if(!a||!m.length||!W){E();return}for(const ne of K){if((r==null?void 0:r(ne))===!1)continue;const R=m.indexOf(ne),T=v[R];if(!T)continue;const{direction:N,speed:M}=k1(ne,T,W,e,x);for(const L of["x","y"])I[L][N[L]]||(M[L]=0,N[L]=0);if(M.x>0||M.y>0){E(),z.current=ne,C(Z,l),A.current=M,j.current=N;return}}A.current={x:0,y:0},j.current={x:0,y:0},E()},[e,Z,r,E,a,l,JSON.stringify(W),JSON.stringify(I),C,m,K,v,JSON.stringify(x)])}const L1={x:{[cn.Backward]:!1,[cn.Forward]:!1},y:{[cn.Backward]:!1,[cn.Forward]:!1}};function M1(t){let{delta:e,disabled:n}=t;const r=Qm(e);return bu(s=>{if(n||!r||!s)return L1;const a={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[cn.Backward]:s.x[cn.Backward]||a.x===-1,[cn.Forward]:s.x[cn.Forward]||a.x===1},y:{[cn.Backward]:s.y[cn.Backward]||a.y===-1,[cn.Forward]:s.y[cn.Forward]||a.y===1}}},[n,e,r])}function V1(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return bu(s=>{var a;return e==null?null:(a=r??s)!=null?a:null},[r,e])}function F1(t,e){return O.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,r)}));return[...n,...a]},[]),[t,e])}var tu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(tu||(tu={}));var Xm;(function(t){t.Optimized="optimized"})(Xm||(Xm={}));const M_=new Map;function z1(t,e){let{dragging:n,dependencies:r,config:s}=e;const[a,l]=O.useState(null),{frequency:u,measure:h,strategy:m}=s,v=O.useRef(t),w=A(),x=Yc(w),I=O.useCallback(function(j){j===void 0&&(j=[]),!x.current&&l(W=>W===null?j:W.concat(j.filter(z=>!W.includes(z))))},[x]),C=O.useRef(null),E=bu(j=>{if(w&&!n)return M_;if(!j||j===M_||v.current!==t||a!=null){const W=new Map;for(let z of t){if(!z)continue;if(a&&a.length>0&&!a.includes(z.id)&&z.rect.current){W.set(z.id,z.rect.current);continue}const Z=z.node.current,K=Z?new $g(h(Z),Z):null;z.rect.current=K,K&&W.set(z.id,K)}return W}return j},[t,a,n,w,h]);return O.useEffect(()=>{v.current=t},[t]),O.useEffect(()=>{w||I()},[n,w]),O.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),O.useEffect(()=>{w||typeof u!="number"||C.current!==null||(C.current=setTimeout(()=>{I(),C.current=null},u))},[u,w,I,...r]),{droppableRects:E,measureDroppableContainers:I,measuringScheduled:a!=null};function A(){switch(m){case tu.Always:return!1;case tu.BeforeDragging:return n;default:return!n}}}function Sx(t,e){return bu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function U1(t,e){return Sx(t,e)}function $1(t){let{callback:e,disabled:n}=t;const r=zg(e),s=O.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function mf(t){let{callback:e,disabled:n}=t;const r=zg(e),s=O.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function B1(t){return new $g(Ll(t),t)}function V_(t,e,n){e===void 0&&(e=B1);const[r,s]=O.useState(null);function a(){s(h=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=h??n)!=null?m:null}const v=e(t);return JSON.stringify(h)===JSON.stringify(v)?h:v})}const l=$1({callback(h){if(t)for(const m of h){const{type:v,target:w}=m;if(v==="childList"&&w instanceof HTMLElement&&w.contains(t)){a();break}}}}),u=mf({callback:a});return Es(()=>{a(),t?(u==null||u.observe(t),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[t]),r}function W1(t){const e=Sx(t);return vx(t,e)}const F_=[];function q1(t){const e=O.useRef(t),n=bu(r=>t?r&&r!==F_&&t&&e.current&&t.parentNode===e.current.parentNode?r:ff(t):F_,[t]);return O.useEffect(()=>{e.current=t},[t]),n}function H1(t){const[e,n]=O.useState(null),r=O.useRef(t),s=O.useCallback(a=>{const l=Em(a.target);l&&n(u=>u?(u.set(l,Jm(l)),new Map(u)):null)},[]);return O.useEffect(()=>{const a=r.current;if(t!==a){l(a);const u=t.map(h=>{const m=Em(h);return m?(m.addEventListener("scroll",s,{passive:!0}),[m,Jm(m)]):null}).filter(h=>h!=null);n(u.length?new Map(u):null),r.current=t}return()=>{l(t),l(a)};function l(u){u.forEach(h=>{const m=Em(h);m==null||m.removeEventListener("scroll",s)})}},[s,t]),O.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,l)=>ll(a,l),es):Ex(t):es,[t,e])}function z_(t,e){e===void 0&&(e=[]);const n=O.useRef(null);return O.useEffect(()=>{n.current=null},e),O.useEffect(()=>{const r=t!==es;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Xc(t,n.current):es}function K1(t){O.useEffect(()=>{if(!hf)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function G1(t,e){return O.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=l=>{a(l,e)},n},{}),[t,e])}function Cx(t){return O.useMemo(()=>t?_1(t):null,[t])}const U_=[];function Q1(t,e){e===void 0&&(e=Ll);const[n]=t,r=Cx(n?rr(n):null),[s,a]=O.useState(U_);function l(){a(()=>t.length?t.map(h=>xx(h)?r:new $g(e(h),h)):U_)}const u=mf({callback:l});return Es(()=>{u==null||u.disconnect(),l(),t.forEach(h=>u==null?void 0:u.observe(h))},[t]),s}function Z1(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return wu(e)?e:t}function J1(t){let{measure:e}=t;const[n,r]=O.useState(null),s=O.useCallback(m=>{for(const{target:v}of m)if(wu(v)){r(w=>{const x=e(v);return w?{...w,width:x.width,height:x.height}:x});break}},[e]),a=mf({callback:s}),l=O.useCallback(m=>{const v=Z1(m);a==null||a.disconnect(),v&&(a==null||a.observe(v)),r(v?e(v):null)},[e,a]),[u,h]=Fh(l);return O.useMemo(()=>({nodeRef:u,rect:n,setRef:h}),[n,u,h])}const Y1=[{sensor:pf,options:{}},{sensor:Bg,options:{}}],X1={current:{}},Eh={draggable:{measure:D_},droppable:{measure:D_,strategy:tu.WhileDragging,frequency:Xm.Optimized},dragOverlay:{measure:Ll}};class Wc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const eC={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:zh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Eh,measureDroppableContainers:zh,windowRect:null,measuringScheduled:!1},tC={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:zh,draggableNodes:new Map,over:null,measureDroppableContainers:zh},gf=O.createContext(tC),Ax=O.createContext(eC);function nC(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wc}}}function rC(t,e){switch(e.type){case Xt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Xt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Xt.DragEnd:case Xt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Xt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Wc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Xt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const l=new Wc(t.droppable.containers);return l.set(n,{...a,disabled:s}),{...t,droppable:{...t.droppable,containers:l}}}case Xt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const a=new Wc(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function sC(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=O.useContext(gf),a=Qm(r),l=Qm(n==null?void 0:n.id);return O.useEffect(()=>{if(!e&&!r&&a&&l!=null){if(!Ug(a)||document.activeElement===a.target)return;const u=s.get(l);if(!u)return;const{activatorNode:h,node:m}=u;if(!h.current&&!m.current)return;requestAnimationFrame(()=>{for(const v of[h.current,m.current]){if(!v)continue;const w=XS(v);if(w){w.focus();break}}})}},[r,e,s,l,a]),null}function iC(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,a)=>a({transform:s,...r}),n):n}function oC(t){return O.useMemo(()=>({draggable:{...Eh.draggable,...t==null?void 0:t.draggable},droppable:{...Eh.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Eh.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function aC(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const a=O.useRef(!1),{x:l,y:u}=typeof s=="boolean"?{x:s,y:s}:s;Es(()=>{if(!l&&!u||!e){a.current=!1;return}if(a.current||!r)return;const m=e==null?void 0:e.node.current;if(!m||m.isConnected===!1)return;const v=n(m),w=vx(v,r);if(l||(w.x=0),u||(w.y=0),a.current=!0,Math.abs(w.x)>0||Math.abs(w.y)>0){const x=_x(m);x&&x.scrollBy({top:w.y,left:w.x})}},[e,l,u,r,n])}const Nx=O.createContext({...es,scaleX:1,scaleY:1});var Wi;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Wi||(Wi={}));const Rx=O.memo(function(e){var n,r,s,a;let{id:l,accessibility:u,autoScroll:h=!0,children:m,sensors:v=Y1,collisionDetection:w=h1,measuring:x,modifiers:I,...C}=e;const E=O.useReducer(rC,void 0,nC),[A,j]=E,[W,z]=i1(),[Z,K]=O.useState(Wi.Uninitialized),ne=Z===Wi.Initialized,{draggable:{active:R,nodes:T,translate:N},droppable:{containers:M}}=A,L=R!=null?T.get(R):null,F=O.useRef({initial:null,translated:null}),D=O.useMemo(()=>{var ut;return R!=null?{id:R,data:(ut=L==null?void 0:L.data)!=null?ut:X1,rect:F}:null},[R,L]),$e=O.useRef(null),[nt,Ke]=O.useState(null),[Ie,Y]=O.useState(null),fe=Yc(C,Object.values(C)),ue=xu("DndDescribedBy",l),B=O.useMemo(()=>M.getEnabled(),[M]),$=oC(x),{droppableRects:se,measureDroppableContainers:de,measuringScheduled:ke}=z1(B,{dragging:ne,dependencies:[N.x,N.y],config:$.droppable}),Se=V1(T,R),Ee=O.useMemo(()=>Ie?Zm(Ie):null,[Ie]),Me=Hn(),ze=U1(Se,$.draggable.measure);aC({activeNode:R!=null?T.get(R):null,config:Me.layoutShiftCompensation,initialRect:ze,measure:$.draggable.measure});const Ce=V_(Se,$.draggable.measure,ze),Kt=V_(Se?Se.parentElement:null),Nt=O.useRef({activatorEvent:null,active:null,activeNode:Se,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Dn=M.getNodeFor((n=Nt.current.over)==null?void 0:n.id),dn=J1({measure:$.dragOverlay.measure}),ar=(r=dn.nodeRef.current)!=null?r:Se,vr=ne?(s=dn.rect)!=null?s:Ce:null,hi=!!(dn.nodeRef.current&&dn.rect),wo=W1(hi?null:Ce),rs=Cx(ar?rr(ar):null),tn=q1(ne?Dn??Se:null),qn=Q1(tn),ss=iC(I,{transform:{x:N.x-wo.x,y:N.y-wo.y,scaleX:1,scaleY:1},activatorEvent:Ie,active:D,activeNodeRect:Ce,containerNodeRect:Kt,draggingNodeRect:vr,over:Nt.current.over,overlayNodeRect:dn.rect,scrollableAncestors:tn,scrollableAncestorRects:qn,windowRect:rs}),Ns=Ee?ll(Ee,N):null,Rs=H1(tn),bo=z_(Rs),Ot=z_(Rs,[Ce]),ht=ll(ss,bo),bn=vr?m1(vr,ss):null,jr=D&&bn?w({active:D,collisionRect:bn,droppableRects:se,droppableContainers:B,pointerCoordinates:Ns}):null,Or=gx(jr,"id"),[xn,is]=O.useState(null),xo=hi?ss:ll(ss,Ot),ko=f1(xo,(a=xn==null?void 0:xn.rect)!=null?a:null,Ce),Ps=O.useRef(null),fi=O.useCallback((ut,Ft)=>{let{sensor:wt,options:Kn}=Ft;if($e.current==null)return;const zt=T.get($e.current);if(!zt)return;const Gt=ut.nativeEvent,Ut=new wt({active:$e.current,activeNode:zt,event:Gt,options:Kn,context:Nt,onAbort(Be){if(!T.get(Be))return;const{onDragAbort:Rt}=fe.current,hn={id:Be};Rt==null||Rt(hn),W({type:"onDragAbort",event:hn})},onPending(Be,jn,Rt,hn){if(!T.get(Be))return;const{onDragPending:wr}=fe.current,$t={id:Be,constraint:jn,initialCoordinates:Rt,offset:hn};wr==null||wr($t),W({type:"onDragPending",event:$t})},onStart(Be){const jn=$e.current;if(jn==null)return;const Rt=T.get(jn);if(!Rt)return;const{onDragStart:hn}=fe.current,lr={activatorEvent:Gt,active:{id:jn,data:Rt.data,rect:F}};sl.unstable_batchedUpdates(()=>{hn==null||hn(lr),K(Wi.Initializing),j({type:Xt.DragStart,initialCoordinates:Be,active:jn}),W({type:"onDragStart",event:lr}),Ke(Ps.current),Y(Gt)})},onMove(Be){j({type:Xt.DragMove,coordinates:Be})},onEnd:_r(Xt.DragEnd),onCancel:_r(Xt.DragCancel)});Ps.current=Ut;function _r(Be){return async function(){const{active:Rt,collisions:hn,over:lr,scrollAdjustedTranslate:wr}=Nt.current;let $t=null;if(Rt&&wr){const{cancelDrop:Lr}=fe.current;$t={activatorEvent:Gt,active:Rt,collisions:hn,delta:wr,over:lr},Be===Xt.DragEnd&&typeof Lr=="function"&&await Promise.resolve(Lr($t))&&(Be=Xt.DragCancel)}$e.current=null,sl.unstable_batchedUpdates(()=>{j({type:Be}),K(Wi.Uninitialized),is(null),Ke(null),Y(null),Ps.current=null;const Lr=Be===Xt.DragEnd?"onDragEnd":"onDragCancel";if($t){const To=fe.current[Lr];To==null||To($t),W({type:Lr,event:$t})}})}}},[T]),Eo=O.useCallback((ut,Ft)=>(wt,Kn)=>{const zt=wt.nativeEvent,Gt=T.get(Kn);if($e.current!==null||!Gt||zt.dndKit||zt.defaultPrevented)return;const Ut={active:Gt};ut(wt,Ft.options,Ut)===!0&&(zt.dndKit={capturedBy:Ft.sensor},$e.current=Kn,fi(wt,Ft))},[T,fi]),os=F1(v,Eo);K1(v),Es(()=>{Ce&&Z===Wi.Initializing&&K(Wi.Initialized)},[Ce,Z]),O.useEffect(()=>{const{onDragMove:ut}=fe.current,{active:Ft,activatorEvent:wt,collisions:Kn,over:zt}=Nt.current;if(!Ft||!wt)return;const Gt={active:Ft,activatorEvent:wt,collisions:Kn,delta:{x:ht.x,y:ht.y},over:zt};sl.unstable_batchedUpdates(()=>{ut==null||ut(Gt),W({type:"onDragMove",event:Gt})})},[ht.x,ht.y]),O.useEffect(()=>{const{active:ut,activatorEvent:Ft,collisions:wt,droppableContainers:Kn,scrollAdjustedTranslate:zt}=Nt.current;if(!ut||$e.current==null||!Ft||!zt)return;const{onDragOver:Gt}=fe.current,Ut=Kn.get(Or),_r=Ut&&Ut.rect.current?{id:Ut.id,rect:Ut.rect.current,data:Ut.data,disabled:Ut.disabled}:null,Be={active:ut,activatorEvent:Ft,collisions:wt,delta:{x:zt.x,y:zt.y},over:_r};sl.unstable_batchedUpdates(()=>{is(_r),Gt==null||Gt(Be),W({type:"onDragOver",event:Be})})},[Or]),Es(()=>{Nt.current={activatorEvent:Ie,active:D,activeNode:Se,collisionRect:bn,collisions:jr,droppableRects:se,draggableNodes:T,draggingNode:ar,draggingNodeRect:vr,droppableContainers:M,over:xn,scrollableAncestors:tn,scrollAdjustedTranslate:ht},F.current={initial:vr,translated:bn}},[D,Se,jr,bn,T,ar,vr,se,M,xn,tn,ht]),O1({...Me,delta:N,draggingRect:bn,pointerCoordinates:Ns,scrollableAncestors:tn,scrollableAncestorRects:qn});const pi=O.useMemo(()=>({active:D,activeNode:Se,activeNodeRect:Ce,activatorEvent:Ie,collisions:jr,containerNodeRect:Kt,dragOverlay:dn,draggableNodes:T,droppableContainers:M,droppableRects:se,over:xn,measureDroppableContainers:de,scrollableAncestors:tn,scrollableAncestorRects:qn,measuringConfiguration:$,measuringScheduled:ke,windowRect:rs}),[D,Se,Ce,Ie,jr,Kt,dn,T,M,se,xn,de,tn,qn,$,ke,rs]),mi=O.useMemo(()=>({activatorEvent:Ie,activators:os,active:D,activeNodeRect:Ce,ariaDescribedById:{draggable:ue},dispatch:j,draggableNodes:T,over:xn,measureDroppableContainers:de}),[Ie,os,D,Ce,j,ue,T,xn,de]);return He.createElement(hx.Provider,{value:z},He.createElement(gf.Provider,{value:mi},He.createElement(Ax.Provider,{value:pi},He.createElement(Nx.Provider,{value:ko},m)),He.createElement(sC,{disabled:(u==null?void 0:u.restoreFocus)===!1})),He.createElement(l1,{...u,hiddenTextDescribedById:ue}));function Hn(){const ut=(nt==null?void 0:nt.autoScrollEnabled)===!1,Ft=typeof h=="object"?h.enabled===!1:h===!1,wt=ne&&!ut&&!Ft;return typeof h=="object"?{...h,enabled:wt}:{enabled:wt}}}),lC=O.createContext(null),$_="button",cC="Draggable";function Px(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const a=xu(cC),{activators:l,activatorEvent:u,active:h,activeNodeRect:m,ariaDescribedById:v,draggableNodes:w,over:x}=O.useContext(gf),{role:I=$_,roleDescription:C="draggable",tabIndex:E=0}=s??{},A=(h==null?void 0:h.id)===e,j=O.useContext(A?Nx:lC),[W,z]=Fh(),[Z,K]=Fh(),ne=G1(l,e),R=Yc(n);Es(()=>(w.set(e,{id:e,key:a,node:W,activatorNode:Z,data:R}),()=>{const N=w.get(e);N&&N.key===a&&w.delete(e)}),[w,e]);const T=O.useMemo(()=>({role:I,tabIndex:E,"aria-disabled":r,"aria-pressed":A&&I===$_?!0:void 0,"aria-roledescription":C,"aria-describedby":v.draggable}),[r,I,E,A,C,v.draggable]);return{active:h,activatorEvent:u,activeNodeRect:m,attributes:T,isDragging:A,listeners:r?void 0:ne,node:W,over:x,setNodeRef:z,setActivatorNodeRef:K,transform:j}}function uC(){return O.useContext(Ax)}const dC="Droppable",hC={timeout:25};function Ml(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const a=xu(dC),{active:l,dispatch:u,over:h,measureDroppableContainers:m}=O.useContext(gf),v=O.useRef({disabled:n}),w=O.useRef(!1),x=O.useRef(null),I=O.useRef(null),{disabled:C,updateMeasurementsFor:E,timeout:A}={...hC,...s},j=Yc(E??r),W=O.useCallback(()=>{if(!w.current){w.current=!0;return}I.current!=null&&clearTimeout(I.current),I.current=setTimeout(()=>{m(Array.isArray(j.current)?j.current:[j.current]),I.current=null},A)},[A]),z=mf({callback:W,disabled:C||!l}),Z=O.useCallback((T,N)=>{z&&(N&&(z.unobserve(N),w.current=!1),T&&z.observe(T))},[z]),[K,ne]=Fh(Z),R=Yc(e);return O.useEffect(()=>{!z||!K.current||(z.disconnect(),w.current=!1,z.observe(K.current))},[K,z]),O.useEffect(()=>(u({type:Xt.RegisterDroppable,element:{id:r,key:a,disabled:n,node:K,rect:x,data:R}}),()=>u({type:Xt.UnregisterDroppable,key:a,id:r})),[r]),O.useEffect(()=>{n!==v.current.disabled&&(u({type:Xt.SetDroppableDisabled,id:r,key:a,disabled:n}),v.current.disabled=n)},[r,a,n,u]),{active:l,rect:x,isOver:(h==null?void 0:h.id)===r,node:K,over:h,setNodeRef:ne}}var B_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],u=t[n++],h=((s&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},jx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,u=l?t[s+1]:0,h=s+2<t.length,m=h?t[s+2]:0,v=a>>2,w=(a&3)<<4|u>>4;let x=(u&15)<<2|m>>6,I=m&63;h||(I=64,l||(x=64)),r.push(n[v],n[w],n[x],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Dx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||m==null||w==null)throw new pC;const x=a<<2|u>>4;if(r.push(x),m!==64){const I=u<<4&240|m>>2;if(r.push(I),w!==64){const C=m<<6&192|w;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mC=function(t){const e=Dx(t);return jx.encodeByteArray(e,!0)},Bh=function(t){return mC(t).replace(/\./g,"")},Ox=function(t){try{return jx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=()=>gC().__FIREBASE_DEFAULTS__,vC=()=>{if(typeof process>"u"||typeof B_>"u")return;const t=B_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_C=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ox(t[1]);return e&&JSON.parse(e)},yf=()=>{try{return yC()||vC()||_C()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lx=t=>{var e,n;return(n=(e=yf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wC=t=>{const e=Lx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Mx=()=>{var t;return(t=yf())===null||t===void 0?void 0:t.config},Vx=t=>{var e;return(e=yf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bh(JSON.stringify(n)),Bh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function EC(){var t;const e=(t=yf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CC(){const t=Rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AC(){return!EC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NC(){try{return typeof indexedDB=="object"}catch{return!1}}function RC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="FirebaseError";class oi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PC,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ku.prototype.create)}}class ku{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?DC(a,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new oi(s,u,r)}}function DC(t,e){return t.replace(jC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const jC=/\{\$([^}]+)}/g;function OC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],l=e[s];if(W_(a)&&W_(l)){if(!Wh(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function W_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Dc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function jc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LC(t,e){const n=new MC(t,e);return n.subscribe.bind(n)}class MC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Sm),s.error===void 0&&(s.error=Sm),s.complete===void 0&&(s.complete=Sm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class ia{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UC(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Go){return this.instances.has(e)}getOptions(e=Go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Go){return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zC(t){return t===Go?void 0:t}function UC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const BC={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},WC=Xe.INFO,qC={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},HC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=qC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qg{constructor(e){this.name=e,this._logLevel=WC,this._logHandler=HC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const KC=(t,e)=>e.some(n=>t instanceof n);let q_,H_;function GC(){return q_||(q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QC(){return H_||(H_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fx=new WeakMap,eg=new WeakMap,zx=new WeakMap,Cm=new WeakMap,Hg=new WeakMap;function ZC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(ro(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Fx.set(n,t)}).catch(()=>{}),Hg.set(e,t),e}function JC(t){if(eg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});eg.set(t,e)}let tg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return eg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ro(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YC(t){tg=t(tg)}function XC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Am(this),e,...n);return zx.set(r,e.sort?e.sort():[e]),ro(r)}:QC().includes(t)?function(...e){return t.apply(Am(this),e),ro(Fx.get(this))}:function(...e){return ro(t.apply(Am(this),e))}}function eA(t){return typeof t=="function"?XC(t):(t instanceof IDBTransaction&&JC(t),KC(t,GC())?new Proxy(t,tg):t)}function ro(t){if(t instanceof IDBRequest)return ZC(t);if(Cm.has(t))return Cm.get(t);const e=eA(t);return e!==t&&(Cm.set(t,e),Hg.set(e,t)),e}const Am=t=>Hg.get(t);function tA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),u=ro(l);return r&&l.addEventListener("upgradeneeded",h=>{r(ro(l.result),h.oldVersion,h.newVersion,ro(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const nA=["get","getKey","getAll","getAllKeys","count"],rA=["put","add","delete","clear"],Nm=new Map;function K_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=rA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nA.includes(n)))return;const a=async function(l,...u){const h=this.transaction(l,s?"readwrite":"readonly");let m=h.store;return r&&(m=m.index(u.shift())),(await Promise.all([m[n](...u),s&&h.done]))[0]};return Nm.set(e,a),a}YC(t=>({...t,get:(e,n,r)=>K_(e,n)||t.get(e,n,r),has:(e,n)=>!!K_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ng="@firebase/app",G_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new qg("@firebase/app"),oA="@firebase/app-compat",aA="@firebase/analytics-compat",lA="@firebase/analytics",cA="@firebase/app-check-compat",uA="@firebase/app-check",dA="@firebase/auth",hA="@firebase/auth-compat",fA="@firebase/database",pA="@firebase/data-connect",mA="@firebase/database-compat",gA="@firebase/functions",yA="@firebase/functions-compat",vA="@firebase/installations",_A="@firebase/installations-compat",wA="@firebase/messaging",bA="@firebase/messaging-compat",xA="@firebase/performance",kA="@firebase/performance-compat",EA="@firebase/remote-config",TA="@firebase/remote-config-compat",IA="@firebase/storage",SA="@firebase/storage-compat",CA="@firebase/firestore",AA="@firebase/vertexai-preview",NA="@firebase/firestore-compat",RA="firebase",PA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="[DEFAULT]",DA={[ng]:"fire-core",[oA]:"fire-core-compat",[lA]:"fire-analytics",[aA]:"fire-analytics-compat",[uA]:"fire-app-check",[cA]:"fire-app-check-compat",[dA]:"fire-auth",[hA]:"fire-auth-compat",[fA]:"fire-rtdb",[pA]:"fire-data-connect",[mA]:"fire-rtdb-compat",[gA]:"fire-fn",[yA]:"fire-fn-compat",[vA]:"fire-iid",[_A]:"fire-iid-compat",[wA]:"fire-fcm",[bA]:"fire-fcm-compat",[xA]:"fire-perf",[kA]:"fire-perf-compat",[EA]:"fire-rc",[TA]:"fire-rc-compat",[IA]:"fire-gcs",[SA]:"fire-gcs-compat",[CA]:"fire-fst",[NA]:"fire-fst-compat",[AA]:"fire-vertex","fire-js":"fire-js",[RA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new Map,jA=new Map,sg=new Map;function Q_(t,e){try{t.container.addComponent(e)}catch(n){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kl(t){const e=t.name;if(sg.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;sg.set(e,t);for(const n of nu.values())Q_(n,t);for(const n of jA.values())Q_(n,t);return!0}function Kg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},so=new ku("app","Firebase",OA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=PA;function Ux(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw so.create("bad-app-name",{appName:String(s)});if(n||(n=Mx()),!n)throw so.create("no-options");const a=nu.get(s);if(a){if(Wh(n,a.options)&&Wh(r,a.config))return a;throw so.create("duplicate-app",{appName:s})}const l=new $C(s);for(const h of sg.values())l.addComponent(h);const u=new LA(n,r,l);return nu.set(s,u),u}function $x(t=rg){const e=nu.get(t);if(!e&&t===rg&&Mx())return Ux();if(!e)throw so.create("no-app",{appName:t});return e}function Z_(){return Array.from(nu.values())}function io(t,e,n){var r;let s=(r=DA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(u.join(" "));return}kl(new ia(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="firebase-heartbeat-database",VA=1,ru="firebase-heartbeat-store";let Rm=null;function Bx(){return Rm||(Rm=tA(MA,VA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(t=>{throw so.create("idb-open",{originalErrorMessage:t.message})})),Rm}async function FA(t){try{const n=(await Bx()).transaction(ru),r=await n.objectStore(ru).get(Wx(t));return await n.done,r}catch(e){if(e instanceof oi)ei.warn(e.message);else{const n=so.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ei.warn(n.message)}}}async function J_(t,e){try{const r=(await Bx()).transaction(ru,"readwrite");await r.objectStore(ru).put(e,Wx(t)),await r.done}catch(n){if(n instanceof oi)ei.warn(n.message);else{const r=so.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ei.warn(r.message)}}}function Wx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=1024,UA=720*60*60*1e3;class $A{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Y_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const u=new Date(l.date).valueOf();return Date.now()-u<=UA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ei.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Y_(),{heartbeatsToSend:r,unsentEntries:s}=BA(this._heartbeatsCache.heartbeats),a=Bh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ei.warn(n),""}}}function Y_(){return new Date().toISOString().substring(0,10)}function BA(t,e=zA){const n=[];let r=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),X_(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),X_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NC()?RC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return J_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return J_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function X_(t){return Bh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){kl(new ia("platform-logger",e=>new sA(e),"PRIVATE")),kl(new ia("heartbeat",e=>new $A(e),"PRIVATE")),io(ng,G_,t),io(ng,G_,"esm2017"),io("fire-js","")}qA("");var HA="firebase",KA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */io(HA,KA,"app");function Gg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function qx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GA=qx,Hx=new ku("auth","Firebase",qx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new qg("@firebase/auth");function QA(t,...e){qh.logLevel<=Xe.WARN&&qh.warn(`Auth (${Vl}): ${t}`,...e)}function Th(t,...e){qh.logLevel<=Xe.ERROR&&qh.error(`Auth (${Vl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,...e){throw Qg(t,...e)}function _s(t,...e){return Qg(t,...e)}function Kx(t,e,n){const r=Object.assign(Object.assign({},GA()),{[e]:n});return new ku("auth","Firebase",r).create(e,{appName:t.name})}function ws(t){return Kx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Hx.create(t,...e)}function Re(t,e,...n){if(!t)throw Qg(e,...n)}function Zs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Th(e),new Error(e)}function ti(t,e){t||Zs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ZA(){return ew()==="http:"||ew()==="https:"}function ew(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZA()||IC()||"connection"in navigator)?navigator.onLine:!0}function YA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ti(n>e,"Short delay should be less than long delay!"),this.isMobile=kC()||SC()}get(){return JA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e){ti(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=new Tu(3e4,6e4);function ai(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function li(t,e,n,r,s={}){return Qx(t,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const u=Eu(Object.assign({key:t.config.apiKey},l)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:h},a);return TC()||(m.referrerPolicy="no-referrer"),Gx.fetch()(Zx(t,t.config.apiHost,n,u),m)})}async function Qx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},XA),e);try{const s=new nN(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw ih(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[h,m]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw ih(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw ih(t,"user-disabled",l);const v=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Kx(t,v,m);ts(t,v)}}catch(s){if(s instanceof oi)throw s;ts(t,"network-request-failed",{message:String(s)})}}async function Fl(t,e,n,r,s={}){const a=await li(t,e,n,r,s);return"mfaPendingCredential"in a&&ts(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Zx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Zg(t.config,s):`${t.config.apiScheme}://${s}`}function tN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_s(this.auth,"network-request-failed")),eN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ih(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=_s(t,e,r);return s.customData._tokenResponse=n,s}function tw(t){return t!==void 0&&t.enterprise!==void 0}class rN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function sN(t,e){return li(t,"GET","/v2/recaptchaConfig",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(t,e){return li(t,"POST","/v1/accounts:delete",e)}async function Jx(t,e){return li(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oN(t,e=!1){const n=It(t),r=await n.getIdToken(e),s=Jg(r);Re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:qc(Pm(s.auth_time)),issuedAtTime:qc(Pm(s.iat)),expirationTime:qc(Pm(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Pm(t){return Number(t)*1e3}function Jg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Th("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ox(n);return s?JSON.parse(s):(Th("Failed to decode base64 JWT payload"),null)}catch(s){return Th("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function nw(t){const e=Jg(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof oi&&aN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(t){var e;const n=t.auth,r=await t.getIdToken(),s=await El(t,Jx(n,{idToken:r}));Re(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Yx(a.providerUserInfo):[],u=uN(t.providerData,l),h=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(u!=null&&u.length),v=h?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new og(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(t,w)}async function cN(t){const e=It(t);await su(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Yx(t){return t.map(e=>{var{providerId:n}=e,r=Gg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e){const n=await Qx(t,{},async()=>{const r=Eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=Zx(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Gx.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hN(t,e){return li(t,"POST","/v2/accounts:revokeToken",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=nw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await dN(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,l=new cl;return r&&(Re(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Re(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Re(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return Zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Js{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=Gg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new og(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await El(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oN(this,e)}reload(){return cN(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Js(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await su(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xr(this.auth.app))return Promise.reject(ws(this.auth));const e=await this.getIdToken();return await El(this,iN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,l,u,h,m,v;const w=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,I=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,C=(l=n.photoURL)!==null&&l!==void 0?l:void 0,E=(u=n.tenantId)!==null&&u!==void 0?u:void 0,A=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,j=(m=n.createdAt)!==null&&m!==void 0?m:void 0,W=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:z,emailVerified:Z,isAnonymous:K,providerData:ne,stsTokenManager:R}=n;Re(z&&R,e,"internal-error");const T=cl.fromJSON(this.name,R);Re(typeof z=="string",e,"internal-error"),zi(w,e.name),zi(x,e.name),Re(typeof Z=="boolean",e,"internal-error"),Re(typeof K=="boolean",e,"internal-error"),zi(I,e.name),zi(C,e.name),zi(E,e.name),zi(A,e.name),zi(j,e.name),zi(W,e.name);const N=new Js({uid:z,auth:e,email:x,emailVerified:Z,displayName:w,isAnonymous:K,photoURL:C,phoneNumber:I,tenantId:E,stsTokenManager:T,createdAt:j,lastLoginAt:W});return ne&&Array.isArray(ne)&&(N.providerData=ne.map(M=>Object.assign({},M))),A&&(N._redirectEventId=A),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new cl;s.updateFromServerResponse(n);const a=new Js({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await su(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Re(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Yx(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),u=new cl;u.updateFromIdToken(r);const h=new Js({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new og(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,m),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new Map;function Ys(t){ti(t instanceof Function,"Expected a class definition");let e=rw.get(t);return e?(ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Xx.type="NONE";const sw=Xx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t,e,n){return`firebase:${t}:${e}:${n}`}class ul{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Ih(this.userKey,s.apiKey,a),this.fullPersistenceKey=Ih("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Js._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ul(Ys(sw),e,r);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Ys(sw);const l=Ih(r,e.config.apiKey,e.name);let u=null;for(const m of n)try{const v=await m._get(l);if(v){const w=Js._fromJSON(e,v);m!==a&&(u=w),a=m;break}}catch{}const h=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new ul(a,e,r):(a=h[0],u&&await a._set(l,u.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new ul(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ek(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ik(e))return"Blackberry";if(ok(e))return"Webos";if(tk(e))return"Safari";if((e.includes("chrome/")||nk(e))&&!e.includes("edge/"))return"Chrome";if(sk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ek(t=Rn()){return/firefox\//i.test(t)}function tk(t=Rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nk(t=Rn()){return/crios\//i.test(t)}function rk(t=Rn()){return/iemobile/i.test(t)}function sk(t=Rn()){return/android/i.test(t)}function ik(t=Rn()){return/blackberry/i.test(t)}function ok(t=Rn()){return/webos/i.test(t)}function Yg(t=Rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fN(t=Rn()){var e;return Yg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pN(){return CC()&&document.documentMode===10}function ak(t=Rn()){return Yg(t)||sk(t)||ok(t)||ik(t)||/windows phone/i.test(t)||rk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t,e=[]){let n;switch(t){case"Browser":n=iw(Rn());break;case"Worker":n=`${iw(Rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,u)=>{try{const h=e(a);l(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(t,e={}){return li(t,"GET","/v2/passwordPolicy",ai(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=6;class vN{constructor(e){var n,r,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:yN,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,l,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ow(this),this.idTokenSubscription=new ow(this),this.beforeStateQueue=new mN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ys(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ul.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Jx(this,{idToken:e}),r=await Js._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await su(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xr(this.app))return Promise.reject(ws(this));const n=e?It(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xr(this.app)?Promise.reject(ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xr(this.app)?Promise.reject(ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gN(this),n=new vN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ku("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ys(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await ul.create(this,[Ys(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,s);return()=>{l=!0,h()}}else{const h=e.addObserver(n);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&QA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function po(t){return It(t)}class ow{constructor(e){this.auth=e,this.observer=null,this.addObserver=LC(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wN(t){vf=t}function ck(t){return vf.loadJS(t)}function bN(){return vf.recaptchaEnterpriseScript}function xN(){return vf.gapiScript}function kN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const EN="recaptcha-enterprise",TN="NO_RECAPTCHA";class IN{constructor(e){this.type=EN,this.auth=po(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,u)=>{sN(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const m=new rN(h);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,l(m.siteKey)}}).catch(h=>{u(h)})})}function s(a,l,u){const h=window.grecaptcha;tw(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(m=>{l(m)}).catch(()=>{l(TN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{r(this.auth).then(u=>{if(!n&&tw(window.grecaptcha))s(u,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=bN();h.length!==0&&(h+=u),ck(h).then(()=>{s(u,a,l)}).catch(m=>{l(m)})}}).catch(u=>{l(u)})})}}async function aw(t,e,n,r=!1){const s=new IN(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function lw(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await aw(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await aw(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t,e){const n=Kg(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Wh(a,e??{}))return s;ts(s,"already-initialized")}return n.initialize({options:e})}function CN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ys);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function AN(t,e,n){const r=po(t);Re(r._canInitEmulator,r,"emulator-config-failed"),Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=uk(e),{host:l,port:u}=NN(e),h=u===null?"":`:${u}`;r.config.emulator={url:`${a}//${l}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),RN()}function uk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NN(t){const e=uk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:cw(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:cw(l)}}}function cw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zs("not implemented")}_getIdTokenResponse(e){return Zs("not implemented")}_linkToIdToken(e,n){return Zs("not implemented")}_getReauthenticationResolver(e){return Zs("not implemented")}}async function PN(t,e){return li(t,"POST","/v1/accounts:update",e)}async function DN(t,e){return li(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(t,e){return Fl(t,"POST","/v1/accounts:signInWithPassword",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e){return Fl(t,"POST","/v1/accounts:signInWithEmailLink",ai(t,e))}async function LN(t,e){return Fl(t,"POST","/v1/accounts:signInWithEmailLink",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Xg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new iu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new iu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lw(e,n,"signInWithPassword",jN);case"emailLink":return ON(e,{email:this._email,oobCode:this._password});default:ts(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lw(e,r,"signUpPassword",DN);case"emailLink":return LN(e,{idToken:n,email:this._email,oobCode:this._password});default:ts(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(t,e){return Fl(t,"POST","/v1/accounts:signInWithIdp",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="http://localhost";class oa extends Xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ts("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=Gg(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new oa(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return dl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,dl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,dl(e,n)}buildRequest(){const e={requestUri:MN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Eu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FN(t){const e=Dc(jc(t)).link,n=e?Dc(jc(e)).deep_link_id:null,r=Dc(jc(t)).deep_link_id;return(r?Dc(jc(r)).link:null)||r||n||e||t}class ey{constructor(e){var n,r,s,a,l,u;const h=Dc(jc(e)),m=(n=h.apiKey)!==null&&n!==void 0?n:null,v=(r=h.oobCode)!==null&&r!==void 0?r:null,w=VN((s=h.mode)!==null&&s!==void 0?s:null);Re(m&&v&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=v,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=FN(e);try{return new ey(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.providerId=ua.PROVIDER_ID}static credential(e,n){return iu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ey.parseLink(n);return Re(r,"argument-error"),iu._fromEmailAndCode(e,r.code,r.tenantId)}}ua.PROVIDER_ID="password";ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends dk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Iu{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oa._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hi.credential(n,r)}catch{return null}}}Hi.GOOGLE_SIGN_IN_METHOD="google.com";Hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Iu{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.GITHUB_SIGN_IN_METHOD="github.com";Ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Iu{constructor(){super("twitter.com")}static credential(e,n){return oa._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gi.credential(n,r)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e){return Fl(t,"POST","/v1/accounts:signUp",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Js._fromIdTokenResponse(e,r,s),l=uw(r);return new ni({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=uw(r);return new ni({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function uw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t){var e;if(Xr(t.app))return Promise.reject(ws(t));const n=po(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ni({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await zN(n,{returnSecureToken:!0}),s=await ni._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends oi{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Hh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Hh(e,n,r,s)}}function hk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Hh._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function fk(t,e,n=!1){const r=await El(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ni._forOperation(t,"link",r)}async function BN(t,e,n){await su(e);const r=$N(e.providerData);Re(r.has(n)===t,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e,n=!1){const{auth:r}=t;if(Xr(r.app))return Promise.reject(ws(r));const s="reauthenticate";try{const a=await El(t,hk(r,s,e,t),n);Re(a.idToken,r,"internal-error");const l=Jg(a.idToken);Re(l,r,"internal-error");const{sub:u}=l;return Re(t.uid===u,r,"user-mismatch"),ni._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ts(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(t,e,n=!1){if(Xr(t.app))return Promise.reject(ws(t));const r="signIn",s=await hk(t,r,e),a=await ni._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function qN(t,e){return pk(po(t),e)}async function HN(t,e){const n=It(t);return await BN(!1,n,e.providerId),fk(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,e){return Fl(t,"POST","/v1/accounts:signInWithCustomToken",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e){if(Xr(t.app))return Promise.reject(ws(t));const n=po(t),r=await KN(n,{token:e,returnSecureToken:!0}),s=await ni._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t){const e=po(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function mk(t,e,n){return Xr(t.app)?Promise.reject(ws(t)):qN(It(t),ua.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QN(t),r})}function ZN(t,e){return JN(It(t),null,e)}async function JN(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(a.password=n);const l=await El(t,PN(r,a));await t._updateTokensIfNecessary(l,!0)}function YN(t,e,n,r){return It(t).onIdTokenChanged(e,n,r)}function XN(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function ty(t,e,n,r){return It(t).onAuthStateChanged(e,n,r)}function gk(t){return It(t).signOut()}const Kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=1e3,tR=10;class vk extends yk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ak(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);pN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,tR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},eR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vk.type="LOCAL";const nR=vk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k extends yk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_k.type="SESSION";const wk=_k;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _f(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async m=>m(n.origin,a)),h=await rR(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((u,h)=>{const m=ny("",20);s.port1.start();const v=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(w){const x=w;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(x.data.response);break;default:clearTimeout(v),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(){return window}function iR(t){bs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(){return typeof bs().WorkerGlobalScope<"u"&&typeof bs().importScripts=="function"}async function oR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lR(){return bk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="firebaseLocalStorageDb",cR=1,Gh="firebaseLocalStorage",kk="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wf(t,e){return t.transaction([Gh],e?"readwrite":"readonly").objectStore(Gh)}function uR(){const t=indexedDB.deleteDatabase(xk);return new Su(t).toPromise()}function ag(){const t=indexedDB.open(xk,cR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gh,{keyPath:kk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gh)?e(r):(r.close(),await uR(),e(await ag()))})})}async function dw(t,e,n){const r=wf(t,!0).put({[kk]:e,value:n});return new Su(r).toPromise()}async function dR(t,e){const n=wf(t,!1).get(e),r=await new Su(n).toPromise();return r===void 0?null:r.value}function hw(t,e){const n=wf(t,!0).delete(e);return new Su(n).toPromise()}const hR=800,fR=3;class Ek{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ag(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>fR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_f._getInstance(lR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await oR(),!this.activeServiceWorker)return;this.sender=new sR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ag();return await dw(e,Kh,"1"),await hw(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>dR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=wf(s,!1).getAll();return new Su(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ek.type="LOCAL";const pR=Ek;new Tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t,e){return e?Ys(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry extends Xg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return dl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gR(t){return pk(t.auth,new ry(t),t.bypassAuthState)}function yR(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),WN(n,new ry(t),t.bypassAuthState)}async function vR(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),fk(n,new ry(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gR;case"linkViaPopup":case"linkViaRedirect":return vR;case"reauthViaPopup":case"reauthViaRedirect":return yR;default:ts(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=new Tu(2e3,1e4);class il extends Tk{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,il.currentPopupAction&&il.currentPopupAction.cancel(),il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=ny();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_s(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_s(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,il.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_s(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_R.get())};e()}}il.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="pendingRedirect",Sh=new Map;class bR extends Tk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const r=await xR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xR(t,e){const n=TR(e),r=ER(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function kR(t,e){Sh.set(t._key(),e)}function ER(t){return Ys(t._redirectPersistence)}function TR(t){return Ih(wR,t.config.apiKey,t.name)}async function IR(t,e,n=!1){if(Xr(t.app))return Promise.reject(ws(t));const r=po(t),s=mR(r,e),l=await new bR(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=600*1e3;class CR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ik(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_s(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SR&&this.cachedEventUids.clear(),this.cachedEventUids.has(fw(e))}saveEventToCache(e){this.cachedEventUids.add(fw(e)),this.lastProcessedEventTime=Date.now()}}function fw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ik({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ik(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(t,e={}){return li(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PR=/^https?/;async function DR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await NR(t);for(const n of e)try{if(jR(n))return}catch{}ts(t,"unauthorized-domain")}function jR(t){const e=ig(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!PR.test(n))return!1;if(RR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=new Tu(3e4,6e4);function pw(){const t=bs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LR(t){return new Promise((e,n)=>{var r,s,a;function l(){pw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pw(),n(_s(t,"network-request-failed"))},timeout:OR.get()})}if(!((s=(r=bs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=bs().gapi)===null||a===void 0)&&a.load)l();else{const u=kN("iframefcb");return bs()[u]=()=>{gapi.load?l():n(_s(t,"network-request-failed"))},ck(`${xN()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Ch=null,e})}let Ch=null;function MR(t){return Ch=Ch||LR(t),Ch}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new Tu(5e3,15e3),FR="__/auth/iframe",zR="emulator/auth/iframe",UR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$R=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BR(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zg(e,zR):`https://${t.config.authDomain}/${FR}`,r={apiKey:e.apiKey,appName:t.name,v:Vl},s=$R.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Eu(r).slice(1)}`}async function WR(t){const e=await MR(t),n=bs().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:BR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UR,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=_s(t,"network-request-failed"),u=bs().setTimeout(()=>{a(l)},VR.get());function h(){bs().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HR=500,KR=600,GR="_blank",QR="http://localhost";class mw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZR(t,e,n,r=HR,s=KR){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},qR),{width:r.toString(),height:s.toString(),top:a,left:l}),m=Rn().toLowerCase();n&&(u=nk(m)?GR:n),ek(m)&&(e=e||QR,h.scrollbars="yes");const v=Object.entries(h).reduce((x,[I,C])=>`${x}${I}=${C},`,"");if(fN(m)&&u!=="_self")return JR(e||"",u),new mw(null);const w=window.open(e||"",u,v);Re(w,t,"popup-blocked");try{w.focus()}catch{}return new mw(w)}function JR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="__/auth/handler",XR="emulator/auth/handler",e2=encodeURIComponent("fac");async function gw(t,e,n,r,s,a){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vl,eventId:s};if(e instanceof dk){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",OC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))l[v]=w}if(e instanceof Iu){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const v of Object.keys(u))u[v]===void 0&&delete u[v];const h=await t._getAppCheckToken(),m=h?`#${e2}=${encodeURIComponent(h)}`:"";return`${t2(t)}?${Eu(u).slice(1)}${m}`}function t2({config:t}){return t.emulator?Zg(t,XR):`https://${t.authDomain}/${YR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="webStorageSupport";class n2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wk,this._completeRedirectFn=IR,this._overrideRedirectResult=kR}async _openPopup(e,n,r,s){var a;ti((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await gw(e,n,r,ig(),s);return ZR(e,l,ny())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await gw(e,n,r,ig(),s);return iR(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(ti(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await WR(e),r=new CR(e);return n.register("authEvent",s=>(Re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dm,{type:Dm},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Dm];l!==void 0&&n(!!l),ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ak()||tk()||Yg()}}const r2=n2;var yw="@firebase/auth",vw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o2(t){kl(new ia("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Re(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lk(t)},m=new _N(r,s,a,h);return CN(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),kl(new ia("auth-internal",e=>{const n=po(e.getProvider("auth").getImmediate());return(r=>new s2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),io(yw,vw,i2(t)),io(yw,vw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=300,l2=Vx("authIdTokenMaxAge")||a2;let _w=null;const c2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>l2)return;const s=n==null?void 0:n.token;_w!==s&&(_w=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function u2(t=$x()){const e=Kg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=SN(t,{popupRedirectResolver:r2,persistence:[pR,nR,wk]}),r=Vx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=c2(a.toString());XN(n,l,()=>l(n.currentUser)),YN(n,u=>l(u))}}const s=Lx("auth");return s&&AN(n,`http://${s}`),n}function d2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=_s("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",d2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o2("Browser");var ww=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ra,Sk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,T){function N(){}N.prototype=T.prototype,R.D=T.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(M,L,F){for(var D=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)D[$e-2]=arguments[$e];return T.prototype[L].apply(M,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,T,N){N||(N=0);var M=Array(16);if(typeof T=="string")for(var L=0;16>L;++L)M[L]=T.charCodeAt(N++)|T.charCodeAt(N++)<<8|T.charCodeAt(N++)<<16|T.charCodeAt(N++)<<24;else for(L=0;16>L;++L)M[L]=T[N++]|T[N++]<<8|T[N++]<<16|T[N++]<<24;T=R.g[0],N=R.g[1],L=R.g[2];var F=R.g[3],D=T+(F^N&(L^F))+M[0]+3614090360&4294967295;T=N+(D<<7&4294967295|D>>>25),D=F+(L^T&(N^L))+M[1]+3905402710&4294967295,F=T+(D<<12&4294967295|D>>>20),D=L+(N^F&(T^N))+M[2]+606105819&4294967295,L=F+(D<<17&4294967295|D>>>15),D=N+(T^L&(F^T))+M[3]+3250441966&4294967295,N=L+(D<<22&4294967295|D>>>10),D=T+(F^N&(L^F))+M[4]+4118548399&4294967295,T=N+(D<<7&4294967295|D>>>25),D=F+(L^T&(N^L))+M[5]+1200080426&4294967295,F=T+(D<<12&4294967295|D>>>20),D=L+(N^F&(T^N))+M[6]+2821735955&4294967295,L=F+(D<<17&4294967295|D>>>15),D=N+(T^L&(F^T))+M[7]+4249261313&4294967295,N=L+(D<<22&4294967295|D>>>10),D=T+(F^N&(L^F))+M[8]+1770035416&4294967295,T=N+(D<<7&4294967295|D>>>25),D=F+(L^T&(N^L))+M[9]+2336552879&4294967295,F=T+(D<<12&4294967295|D>>>20),D=L+(N^F&(T^N))+M[10]+4294925233&4294967295,L=F+(D<<17&4294967295|D>>>15),D=N+(T^L&(F^T))+M[11]+2304563134&4294967295,N=L+(D<<22&4294967295|D>>>10),D=T+(F^N&(L^F))+M[12]+1804603682&4294967295,T=N+(D<<7&4294967295|D>>>25),D=F+(L^T&(N^L))+M[13]+4254626195&4294967295,F=T+(D<<12&4294967295|D>>>20),D=L+(N^F&(T^N))+M[14]+2792965006&4294967295,L=F+(D<<17&4294967295|D>>>15),D=N+(T^L&(F^T))+M[15]+1236535329&4294967295,N=L+(D<<22&4294967295|D>>>10),D=T+(L^F&(N^L))+M[1]+4129170786&4294967295,T=N+(D<<5&4294967295|D>>>27),D=F+(N^L&(T^N))+M[6]+3225465664&4294967295,F=T+(D<<9&4294967295|D>>>23),D=L+(T^N&(F^T))+M[11]+643717713&4294967295,L=F+(D<<14&4294967295|D>>>18),D=N+(F^T&(L^F))+M[0]+3921069994&4294967295,N=L+(D<<20&4294967295|D>>>12),D=T+(L^F&(N^L))+M[5]+3593408605&4294967295,T=N+(D<<5&4294967295|D>>>27),D=F+(N^L&(T^N))+M[10]+38016083&4294967295,F=T+(D<<9&4294967295|D>>>23),D=L+(T^N&(F^T))+M[15]+3634488961&4294967295,L=F+(D<<14&4294967295|D>>>18),D=N+(F^T&(L^F))+M[4]+3889429448&4294967295,N=L+(D<<20&4294967295|D>>>12),D=T+(L^F&(N^L))+M[9]+568446438&4294967295,T=N+(D<<5&4294967295|D>>>27),D=F+(N^L&(T^N))+M[14]+3275163606&4294967295,F=T+(D<<9&4294967295|D>>>23),D=L+(T^N&(F^T))+M[3]+4107603335&4294967295,L=F+(D<<14&4294967295|D>>>18),D=N+(F^T&(L^F))+M[8]+1163531501&4294967295,N=L+(D<<20&4294967295|D>>>12),D=T+(L^F&(N^L))+M[13]+2850285829&4294967295,T=N+(D<<5&4294967295|D>>>27),D=F+(N^L&(T^N))+M[2]+4243563512&4294967295,F=T+(D<<9&4294967295|D>>>23),D=L+(T^N&(F^T))+M[7]+1735328473&4294967295,L=F+(D<<14&4294967295|D>>>18),D=N+(F^T&(L^F))+M[12]+2368359562&4294967295,N=L+(D<<20&4294967295|D>>>12),D=T+(N^L^F)+M[5]+4294588738&4294967295,T=N+(D<<4&4294967295|D>>>28),D=F+(T^N^L)+M[8]+2272392833&4294967295,F=T+(D<<11&4294967295|D>>>21),D=L+(F^T^N)+M[11]+1839030562&4294967295,L=F+(D<<16&4294967295|D>>>16),D=N+(L^F^T)+M[14]+4259657740&4294967295,N=L+(D<<23&4294967295|D>>>9),D=T+(N^L^F)+M[1]+2763975236&4294967295,T=N+(D<<4&4294967295|D>>>28),D=F+(T^N^L)+M[4]+1272893353&4294967295,F=T+(D<<11&4294967295|D>>>21),D=L+(F^T^N)+M[7]+4139469664&4294967295,L=F+(D<<16&4294967295|D>>>16),D=N+(L^F^T)+M[10]+3200236656&4294967295,N=L+(D<<23&4294967295|D>>>9),D=T+(N^L^F)+M[13]+681279174&4294967295,T=N+(D<<4&4294967295|D>>>28),D=F+(T^N^L)+M[0]+3936430074&4294967295,F=T+(D<<11&4294967295|D>>>21),D=L+(F^T^N)+M[3]+3572445317&4294967295,L=F+(D<<16&4294967295|D>>>16),D=N+(L^F^T)+M[6]+76029189&4294967295,N=L+(D<<23&4294967295|D>>>9),D=T+(N^L^F)+M[9]+3654602809&4294967295,T=N+(D<<4&4294967295|D>>>28),D=F+(T^N^L)+M[12]+3873151461&4294967295,F=T+(D<<11&4294967295|D>>>21),D=L+(F^T^N)+M[15]+530742520&4294967295,L=F+(D<<16&4294967295|D>>>16),D=N+(L^F^T)+M[2]+3299628645&4294967295,N=L+(D<<23&4294967295|D>>>9),D=T+(L^(N|~F))+M[0]+4096336452&4294967295,T=N+(D<<6&4294967295|D>>>26),D=F+(N^(T|~L))+M[7]+1126891415&4294967295,F=T+(D<<10&4294967295|D>>>22),D=L+(T^(F|~N))+M[14]+2878612391&4294967295,L=F+(D<<15&4294967295|D>>>17),D=N+(F^(L|~T))+M[5]+4237533241&4294967295,N=L+(D<<21&4294967295|D>>>11),D=T+(L^(N|~F))+M[12]+1700485571&4294967295,T=N+(D<<6&4294967295|D>>>26),D=F+(N^(T|~L))+M[3]+2399980690&4294967295,F=T+(D<<10&4294967295|D>>>22),D=L+(T^(F|~N))+M[10]+4293915773&4294967295,L=F+(D<<15&4294967295|D>>>17),D=N+(F^(L|~T))+M[1]+2240044497&4294967295,N=L+(D<<21&4294967295|D>>>11),D=T+(L^(N|~F))+M[8]+1873313359&4294967295,T=N+(D<<6&4294967295|D>>>26),D=F+(N^(T|~L))+M[15]+4264355552&4294967295,F=T+(D<<10&4294967295|D>>>22),D=L+(T^(F|~N))+M[6]+2734768916&4294967295,L=F+(D<<15&4294967295|D>>>17),D=N+(F^(L|~T))+M[13]+1309151649&4294967295,N=L+(D<<21&4294967295|D>>>11),D=T+(L^(N|~F))+M[4]+4149444226&4294967295,T=N+(D<<6&4294967295|D>>>26),D=F+(N^(T|~L))+M[11]+3174756917&4294967295,F=T+(D<<10&4294967295|D>>>22),D=L+(T^(F|~N))+M[2]+718787259&4294967295,L=F+(D<<15&4294967295|D>>>17),D=N+(F^(L|~T))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+F&4294967295}r.prototype.u=function(R,T){T===void 0&&(T=R.length);for(var N=T-this.blockSize,M=this.B,L=this.h,F=0;F<T;){if(L==0)for(;F<=N;)s(this,R,F),F+=this.blockSize;if(typeof R=="string"){for(;F<T;)if(M[L++]=R.charCodeAt(F++),L==this.blockSize){s(this,M),L=0;break}}else for(;F<T;)if(M[L++]=R[F++],L==this.blockSize){s(this,M),L=0;break}}this.h=L,this.o+=T},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;var N=8*this.o;for(T=R.length-8;T<R.length;++T)R[T]=N&255,N/=256;for(this.u(R),R=Array(16),T=N=0;4>T;++T)for(var M=0;32>M;M+=8)R[N++]=this.g[T]>>>M&255;return R};function a(R,T){var N=u;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=T(R)}function l(R,T){this.h=T;for(var N=[],M=!0,L=R.length-1;0<=L;L--){var F=R[L]|0;M&&F==T||(N[L]=F,M=!1)}this.g=N}var u={};function h(R){return-128<=R&&128>R?a(R,function(T){return new l([T|0],0>T?-1:0)}):new l([R|0],0>R?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return w;if(0>R)return A(m(-R));for(var T=[],N=1,M=0;R>=N;M++)T[M]=R/N|0,N*=4294967296;return new l(T,0)}function v(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return A(v(R.substring(1),T));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(T,8)),M=w,L=0;L<R.length;L+=8){var F=Math.min(8,R.length-L),D=parseInt(R.substring(L,L+F),T);8>F?(F=m(Math.pow(T,F)),M=M.j(F).add(m(D))):(M=M.j(N),M=M.add(m(D)))}return M}var w=h(0),x=h(1),I=h(16777216);t=l.prototype,t.m=function(){if(E(this))return-A(this).m();for(var R=0,T=1,N=0;N<this.g.length;N++){var M=this.i(N);R+=(0<=M?M:4294967296+M)*T,T*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(E(this))return"-"+A(this).toString(R);for(var T=m(Math.pow(R,6)),N=this,M="";;){var L=Z(N,T).g;N=j(N,L.j(T));var F=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=L,C(N))return F+M;for(;6>F.length;)F="0"+F;M=F+M}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(var T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function E(R){return R.h==-1}t.l=function(R){return R=j(this,R),E(R)?-1:C(R)?0:1};function A(R){for(var T=R.g.length,N=[],M=0;M<T;M++)N[M]=~R.g[M];return new l(N,~R.h).add(x)}t.abs=function(){return E(this)?A(this):this},t.add=function(R){for(var T=Math.max(this.g.length,R.g.length),N=[],M=0,L=0;L<=T;L++){var F=M+(this.i(L)&65535)+(R.i(L)&65535),D=(F>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);M=D>>>16,F&=65535,D&=65535,N[L]=D<<16|F}return new l(N,N[N.length-1]&-2147483648?-1:0)};function j(R,T){return R.add(A(T))}t.j=function(R){if(C(this)||C(R))return w;if(E(this))return E(R)?A(this).j(A(R)):A(A(this).j(R));if(E(R))return A(this.j(A(R)));if(0>this.l(I)&&0>R.l(I))return m(this.m()*R.m());for(var T=this.g.length+R.g.length,N=[],M=0;M<2*T;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(var L=0;L<R.g.length;L++){var F=this.i(M)>>>16,D=this.i(M)&65535,$e=R.i(L)>>>16,nt=R.i(L)&65535;N[2*M+2*L]+=D*nt,W(N,2*M+2*L),N[2*M+2*L+1]+=F*nt,W(N,2*M+2*L+1),N[2*M+2*L+1]+=D*$e,W(N,2*M+2*L+1),N[2*M+2*L+2]+=F*$e,W(N,2*M+2*L+2)}for(M=0;M<T;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=T;M<2*T;M++)N[M]=0;return new l(N,0)};function W(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function z(R,T){this.g=R,this.h=T}function Z(R,T){if(C(T))throw Error("division by zero");if(C(R))return new z(w,w);if(E(R))return T=Z(A(R),T),new z(A(T.g),A(T.h));if(E(T))return T=Z(R,A(T)),new z(A(T.g),T.h);if(30<R.g.length){if(E(R)||E(T))throw Error("slowDivide_ only works with positive integers.");for(var N=x,M=T;0>=M.l(R);)N=K(N),M=K(M);var L=ne(N,1),F=ne(M,1);for(M=ne(M,2),N=ne(N,2);!C(M);){var D=F.add(M);0>=D.l(R)&&(L=L.add(N),F=D),M=ne(M,1),N=ne(N,1)}return T=j(R,L.j(T)),new z(L,T)}for(L=w;0<=R.l(T);){for(N=Math.max(1,Math.floor(R.m()/T.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),F=m(N),D=F.j(T);E(D)||0<D.l(R);)N-=M,F=m(N),D=F.j(T);C(F)&&(F=x),L=L.add(F),R=j(R,D)}return new z(L,R)}t.A=function(R){return Z(this,R).h},t.and=function(R){for(var T=Math.max(this.g.length,R.g.length),N=[],M=0;M<T;M++)N[M]=this.i(M)&R.i(M);return new l(N,this.h&R.h)},t.or=function(R){for(var T=Math.max(this.g.length,R.g.length),N=[],M=0;M<T;M++)N[M]=this.i(M)|R.i(M);return new l(N,this.h|R.h)},t.xor=function(R){for(var T=Math.max(this.g.length,R.g.length),N=[],M=0;M<T;M++)N[M]=this.i(M)^R.i(M);return new l(N,this.h^R.h)};function K(R){for(var T=R.g.length+1,N=[],M=0;M<T;M++)N[M]=R.i(M)<<1|R.i(M-1)>>>31;return new l(N,R.h)}function ne(R,T){var N=T>>5;T%=32;for(var M=R.g.length-N,L=[],F=0;F<M;F++)L[F]=0<T?R.i(F+N)>>>T|R.i(F+N+1)<<32-T:R.i(F+N);return new l(L,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Sk=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=v,ra=l}).apply(typeof ww<"u"?ww:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ck,Oc,Ak,Ah,lg,Nk,Rk,Pk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,b){return d==Array.prototype||d==Object.prototype||(d[y]=b.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var y=0;y<d.length;++y){var b=d[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var b=r;d=d.split(".");for(var S=0;S<d.length-1;S++){var q=d[S];if(!(q in b))break e;b=b[q]}d=d[d.length-1],S=b[d],y=y(S),y!=S&&y!=null&&e(b,d,{configurable:!0,writable:!0,value:y})}}function a(d,y){d instanceof String&&(d+="");var b=0,S=!1,q={next:function(){if(!S&&b<d.length){var J=b++;return{value:y(J,d[J]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(d){return d||function(){return a(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function m(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function v(d,y,b){return d.call.apply(d.bind,arguments)}function w(d,y,b){if(!d)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),d.apply(y,q)}}return function(){return d.apply(y,arguments)}}function x(d,y,b){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,x.apply(null,arguments)}function I(d,y){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function C(d,y){function b(){}b.prototype=y.prototype,d.aa=y.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(S,q,J){for(var ce=Array(arguments.length-2),at=2;at<arguments.length;at++)ce[at-2]=arguments[at];return y.prototype[q].apply(S,ce)}}function E(d){const y=d.length;if(0<y){const b=Array(y);for(let S=0;S<y;S++)b[S]=d[S];return b}return[]}function A(d,y){for(let b=1;b<arguments.length;b++){const S=arguments[b];if(h(S)){const q=d.length||0,J=S.length||0;d.length=q+J;for(let ce=0;ce<J;ce++)d[q+ce]=S[ce]}else d.push(S)}}class j{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function W(d){return/^[\s\xa0]*$/.test(d)}function z(){var d=u.navigator;return d&&(d=d.userAgent)?d:""}function Z(d){return Z[" "](d),d}Z[" "]=function(){};var K=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ne(d,y,b){for(const S in d)y.call(b,d[S],S,d)}function R(d,y){for(const b in d)y.call(void 0,d[b],b,d)}function T(d){const y={};for(const b in d)y[b]=d[b];return y}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(d,y){let b,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(b in S)d[b]=S[b];for(let J=0;J<N.length;J++)b=N[J],Object.prototype.hasOwnProperty.call(S,b)&&(d[b]=S[b])}}function L(d){var y=1;d=d.split(":");const b=[];for(;0<y&&d.length;)b.push(d.shift()),y--;return d.length&&b.push(d.join(":")),b}function F(d){u.setTimeout(()=>{throw d},0)}function D(){var d=fe;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class $e{constructor(){this.h=this.g=null}add(y,b){const S=nt.get();S.set(y,b),this.h?this.h.next=S:this.g=S,this.h=S}}var nt=new j(()=>new Ke,d=>d.reset());class Ke{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,Y=!1,fe=new $e,ue=()=>{const d=u.Promise.resolve(void 0);Ie=()=>{d.then(B)}};var B=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(b){F(b)}var y=nt;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}Y=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};u.addEventListener("test",b,y),u.removeEventListener("test",b,y)}catch{}return d})();function ke(d,y){if(se.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(K){e:{try{Z(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else b=="mouseover"?y=d.fromElement:b=="mouseout"&&(y=d.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Se[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ke.aa.h.call(this)}}C(ke,se);var Se={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),Me=0;function ze(d,y,b,S,q){this.listener=d,this.proxy=null,this.src=y,this.type=b,this.capture=!!S,this.ha=q,this.key=++Me,this.da=this.fa=!1}function Ce(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Kt(d){this.src=d,this.g={},this.h=0}Kt.prototype.add=function(d,y,b,S,q){var J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);var ce=Dn(d,y,S,q);return-1<ce?(y=d[ce],b||(y.fa=!1)):(y=new ze(y,this.src,J,!!S,q),y.fa=b,d.push(y)),y};function Nt(d,y){var b=y.type;if(b in d.g){var S=d.g[b],q=Array.prototype.indexOf.call(S,y,void 0),J;(J=0<=q)&&Array.prototype.splice.call(S,q,1),J&&(Ce(y),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Dn(d,y,b,S){for(var q=0;q<d.length;++q){var J=d[q];if(!J.da&&J.listener==y&&J.capture==!!b&&J.ha==S)return q}return-1}var dn="closure_lm_"+(1e6*Math.random()|0),ar={};function vr(d,y,b,S,q){if(Array.isArray(y)){for(var J=0;J<y.length;J++)vr(d,y[J],b,S,q);return null}return b=bo(b),d&&d[Ee]?d.K(y,b,m(S)?!!S.capture:!1,q):hi(d,y,b,!1,S,q)}function hi(d,y,b,S,q,J){if(!y)throw Error("Invalid event type");var ce=m(q)?!!q.capture:!!q,at=Ns(d);if(at||(d[dn]=at=new Kt(d)),b=at.add(y,b,S,ce,J),b.proxy)return b;if(S=wo(),b.proxy=S,S.src=d,S.listener=b,d.addEventListener)de||(q=ce),q===void 0&&(q=!1),d.addEventListener(y.toString(),S,q);else if(d.attachEvent)d.attachEvent(qn(y.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function wo(){function d(b){return y.call(d.src,d.listener,b)}const y=ss;return d}function rs(d,y,b,S,q){if(Array.isArray(y))for(var J=0;J<y.length;J++)rs(d,y[J],b,S,q);else S=m(S)?!!S.capture:!!S,b=bo(b),d&&d[Ee]?(d=d.i,y=String(y).toString(),y in d.g&&(J=d.g[y],b=Dn(J,b,S,q),-1<b&&(Ce(J[b]),Array.prototype.splice.call(J,b,1),J.length==0&&(delete d.g[y],d.h--)))):d&&(d=Ns(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Dn(y,b,S,q)),(b=-1<d?y[d]:null)&&tn(b))}function tn(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Ee])Nt(y.i,d);else{var b=d.type,S=d.proxy;y.removeEventListener?y.removeEventListener(b,S,d.capture):y.detachEvent?y.detachEvent(qn(b),S):y.addListener&&y.removeListener&&y.removeListener(S),(b=Ns(y))?(Nt(b,d),b.h==0&&(b.src=null,y[dn]=null)):Ce(d)}}}function qn(d){return d in ar?ar[d]:ar[d]="on"+d}function ss(d,y){if(d.da)d=!0;else{y=new ke(y,this);var b=d.listener,S=d.ha||d.src;d.fa&&tn(d),d=b.call(S,y)}return d}function Ns(d){return d=d[dn],d instanceof Kt?d:null}var Rs="__closure_events_fn_"+(1e9*Math.random()>>>0);function bo(d){return typeof d=="function"?d:(d[Rs]||(d[Rs]=function(y){return d.handleEvent(y)}),d[Rs])}function Ot(){$.call(this),this.i=new Kt(this),this.M=this,this.F=null}C(Ot,$),Ot.prototype[Ee]=!0,Ot.prototype.removeEventListener=function(d,y,b,S){rs(this,d,y,b,S)};function ht(d,y){var b,S=d.F;if(S)for(b=[];S;S=S.F)b.push(S);if(d=d.M,S=y.type||y,typeof y=="string")y=new se(y,d);else if(y instanceof se)y.target=y.target||d;else{var q=y;y=new se(S,d),M(y,q)}if(q=!0,b)for(var J=b.length-1;0<=J;J--){var ce=y.g=b[J];q=bn(ce,S,!0,y)&&q}if(ce=y.g=d,q=bn(ce,S,!0,y)&&q,q=bn(ce,S,!1,y)&&q,b)for(J=0;J<b.length;J++)ce=y.g=b[J],q=bn(ce,S,!1,y)&&q}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var b=d.g[y],S=0;S<b.length;S++)Ce(b[S]);delete d.g[y],d.h--}}this.F=null},Ot.prototype.K=function(d,y,b,S){return this.i.add(String(d),y,!1,b,S)},Ot.prototype.L=function(d,y,b,S){return this.i.add(String(d),y,!0,b,S)};function bn(d,y,b,S){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,J=0;J<y.length;++J){var ce=y[J];if(ce&&!ce.da&&ce.capture==b){var at=ce.listener,Qt=ce.ha||ce.src;ce.fa&&Nt(d.i,ce),q=at.call(Qt,S)!==!1&&q}}return q&&!S.defaultPrevented}function jr(d,y,b){if(typeof d=="function")b&&(d=x(d,b));else if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:u.setTimeout(d,y||0)}function Or(d){d.g=jr(()=>{d.g=null,d.i&&(d.i=!1,Or(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class xn extends ${constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Or(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(d){$.call(this),this.h=d,this.g={}}C(is,$);var xo=[];function ko(d){ne(d.g,function(y,b){this.g.hasOwnProperty(b)&&tn(y)},d),d.g={}}is.prototype.N=function(){is.aa.N.call(this),ko(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ps=u.JSON.stringify,fi=u.JSON.parse,Eo=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function os(){}os.prototype.h=null;function pi(d){return d.h||(d.h=d.i())}function mi(){}var Hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ut(){se.call(this,"d")}C(ut,se);function Ft(){se.call(this,"c")}C(Ft,se);var wt={},Kn=null;function zt(){return Kn=Kn||new Ot}wt.La="serverreachability";function Gt(d){se.call(this,wt.La,d)}C(Gt,se);function Ut(d){const y=zt();ht(y,new Gt(y))}wt.STAT_EVENT="statevent";function _r(d,y){se.call(this,wt.STAT_EVENT,d),this.stat=y}C(_r,se);function Be(d){const y=zt();ht(y,new _r(y,d))}wt.Ma="timingevent";function jn(d,y){se.call(this,wt.Ma,d),this.size=y}C(jn,se);function Rt(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},y)}function hn(){this.g=!0}hn.prototype.xa=function(){this.g=!1};function lr(d,y,b,S,q,J){d.info(function(){if(d.g)if(J)for(var ce="",at=J.split("&"),Qt=0;Qt<at.length;Qt++){var et=at[Qt].split("=");if(1<et.length){var nn=et[0];et=et[1];var Bt=nn.split("_");ce=2<=Bt.length&&Bt[1]=="type"?ce+(nn+"="+et+"&"):ce+(nn+"=redacted&")}}else ce=null;else ce=J;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+y+`
`+b+`
`+ce})}function wr(d,y,b,S,q,J,ce){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+y+`
`+b+`
`+J+" "+ce})}function $t(d,y,b,S){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+To(d,b)+(S?" "+S:"")})}function Lr(d,y){d.info(function(){return"TIMEOUT: "+y})}hn.prototype.info=function(){};function To(d,y){if(!d.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var S=b[d];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var J=q[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ce=1;ce<q.length;ce++)q[ce]=""}}}}return Ps(b)}catch{return y}}var ya={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$u={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mr;function Io(){}C(Io,os),Io.prototype.g=function(){return new XMLHttpRequest},Io.prototype.i=function(){return{}},Mr=new Io;function Vr(d,y,b,S){this.j=d,this.i=y,this.l=b,this.R=S||1,this.U=new is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bu}function Bu(){this.i=null,this.g="",this.h=!1}var Ql={},va={};function _a(d,y,b){d.L=1,d.v=wi(ur(y)),d.m=b,d.P=!0,Zl(d,null)}function Zl(d,y){d.F=Date.now(),ft(d),d.A=ur(d.v);var b=d.A,S=d.R;Array.isArray(S)||(S=[String(S)]),xi(b.i,"t",S),d.C=0,b=d.j.J,d.h=new Bu,d.g=ad(d.j,b?y:null,!d.m),0<d.O&&(d.M=new xn(x(d.Y,d,d.g),d.O)),y=d.U,b=d.g,S=d.ca;var q="readystatechange";Array.isArray(q)||(q&&(xo[0]=q.toString()),q=xo);for(var J=0;J<q.length;J++){var ce=vr(b,q[J],S||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),Ut(),lr(d.i,d.u,d.A,d.l,d.R,d.m)}Vr.prototype.ca=function(d){d=d.target;const y=this.M;y&&Qn(d)==3?y.j():this.Y(d)},Vr.prototype.Y=function(d){try{if(d==this.g)e:{const Bt=Qn(this.g);var y=this.g.Ba();const kr=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||nc(this.g)))){this.J||Bt!=4||y==7||(y==8||0>=kr?Ut(3):Ut(2)),So(this);var b=this.g.Z();this.X=b;t:if(Wu(this)){var S=nc(this.g);d="";var q=S.length,J=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){br(this),gi(this);var ce="";break t}this.h.i=new u.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,d+=this.h.i.decode(S[y],{stream:!(J&&y==q-1)});S.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=b==200,wr(this.i,this.u,this.A,this.l,this.R,Bt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Qt=this.g;if((at=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(at)){var et=at;break t}}et=null}if(b=et)$t(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jl(this,b);else{this.o=!1,this.s=3,Be(12),br(this),gi(this);break e}}if(this.P){b=!0;let hr;for(;!this.J&&this.C<ce.length;)if(hr=Hf(this,ce),hr==va){Bt==4&&(this.s=4,Be(14),b=!1),$t(this.i,this.l,null,"[Incomplete Response]");break}else if(hr==Ql){this.s=4,Be(15),$t(this.i,this.l,ce,"[Invalid Chunk]"),b=!1;break}else $t(this.i,this.l,hr,null),Jl(this,hr);if(Wu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||ce.length!=0||this.h.h||(this.s=1,Be(16),b=!1),this.o=this.o&&b,!b)$t(this.i,this.l,ce,"[Invalid Chunked Response]"),br(this),gi(this);else if(0<ce.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),sc(nn),nn.M=!0,Be(11))}}else $t(this.i,this.l,ce,null),Jl(this,ce);Bt==4&&br(this),this.o&&!this.J&&(Bt==4?Na(this.j,this):(this.o=!1,ft(this)))}else Ta(this.g),b==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Be(12)):(this.s=0,Be(13)),br(this),gi(this)}}}catch{}finally{}};function Wu(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Hf(d,y){var b=d.C,S=y.indexOf(`
`,b);return S==-1?va:(b=Number(y.substring(b,S)),isNaN(b)?Ql:(S+=1,S+b>y.length?va:(y=y.slice(S,S+b),d.C=S+b,y)))}Vr.prototype.cancel=function(){this.J=!0,br(this)};function ft(d){d.S=Date.now()+d.I,qu(d,d.I)}function qu(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Rt(x(d.ba,d),y)}function So(d){d.B&&(u.clearTimeout(d.B),d.B=null)}Vr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Lr(this.i,this.A),this.L!=2&&(Ut(),Be(17)),br(this),this.s=2,gi(this)):qu(this,this.S-d)};function gi(d){d.j.G==0||d.J||Na(d.j,d)}function br(d){So(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,ko(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Jl(d,y){try{var b=d.j;if(b.G!=0&&(b.g==d||On(b.h,d))){if(!d.K&&On(b.h,d)&&b.G==3){try{var S=b.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Aa(b),Br(b);else break e;Ca(b),Be(18)}}else b.za=q[1],0<b.za-b.T&&37500>q[2]&&b.F&&b.v==0&&!b.C&&(b.C=Rt(x(b.Za,b),6e3));if(1>=Ku(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Ms(b,11)}else if((d.K||b.g==d)&&Aa(b),!W(y))for(q=b.Da.g.parse(y),y=0;y<q.length;y++){let et=q[y];if(b.T=et[0],et=et[1],b.G==2)if(et[0]=="c"){b.K=et[1],b.ia=et[2];const nn=et[3];nn!=null&&(b.la=nn,b.j.info("VER="+b.la));const Bt=et[4];Bt!=null&&(b.Aa=Bt,b.j.info("SVER="+b.Aa));const kr=et[5];kr!=null&&typeof kr=="number"&&0<kr&&(S=1.5*kr,b.L=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const hr=d.g;if(hr){const jo=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jo){var J=S.h;J.g||jo.indexOf("spdy")==-1&&jo.indexOf("quic")==-1&&jo.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Yl(J,J.h),J.h=null))}if(S.D){const Pa=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;Pa&&(S.ya=Pa,dt(S.I,S.D,Pa))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),S=b;var ce=d;if(S.qa=od(S,S.J?S.ia:null,S.W),ce.K){Gu(S.h,ce);var at=ce,Qt=S.L;Qt&&(at.I=Qt),at.B&&(So(at),ft(at)),S.g=ce}else Do(S);0<b.i.length&&us(b)}else et[0]!="stop"&&et[0]!="close"||Ms(b,7);else b.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Ms(b,7):pn(b):et[0]!="noop"&&b.l&&b.l.ta(et),b.v=0)}}Ut(4)}catch{}}var Hu=class{constructor(d,y){this.g=d,this.map=y}};function Co(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cr(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ku(d){return d.h?1:d.g?d.g.size:0}function On(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Yl(d,y){d.g?d.g.add(y):d.h=y}function Gu(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Co.prototype.cancel=function(){if(this.i=Qu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Qu(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const b of d.g.values())y=y.concat(b.D);return y}return E(d.i)}function wa(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var y=[],b=d.length,S=0;S<b;S++)y.push(d[S]);return y}y=[],b=0;for(S in d)y[b++]=d[S];return y}function ba(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var y=[];d=d.length;for(var b=0;b<d;b++)y.push(b);return y}y=[],b=0;for(const S in d)y[b++]=S;return y}}}function yi(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var b=ba(d),S=wa(d),q=S.length,J=0;J<q;J++)y.call(void 0,S[J],b&&b[J],d)}var Ao=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kf(d,y){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var S=d[b].indexOf("="),q=null;if(0<=S){var J=d[b].substring(0,S);q=d[b].substring(S+1)}else J=d[b];y(J,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Ds(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ds){this.h=d.h,No(this,d.j),this.o=d.o,this.g=d.g,vi(this,d.s),this.l=d.l;var y=d.i,b=new as;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),_i(this,b),this.m=d.m}else d&&(y=String(d).match(Ao))?(this.h=!1,No(this,y[1]||"",!0),this.o=Ze(y[2]||""),this.g=Ze(y[3]||"",!0),vi(this,y[4]),this.l=Ze(y[5]||"",!0),_i(this,y[6]||"",!0),this.m=Ze(y[7]||"")):(this.h=!1,this.i=new as(null,this.h))}Ds.prototype.toString=function(){var d=[],y=this.j;y&&d.push(bi(y,xa,!0),":");var b=this.g;return(b||y=="file")&&(d.push("//"),(y=this.o)&&d.push(bi(y,xa,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(bi(b,b.charAt(0)=="/"?Yu:Ju,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",bi(b,Xl)),d.join("")};function ur(d){return new Ds(d)}function No(d,y,b){d.j=b?Ze(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function vi(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function _i(d,y,b){y instanceof as?(d.i=y,ls(d.i,d.h)):(b||(y=bi(y,Xu)),d.i=new as(y,d.h))}function dt(d,y,b){d.i.set(y,b)}function wi(d){return dt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ze(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function bi(d,y,b){return typeof d=="string"?(d=encodeURI(d).replace(y,Zu),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Zu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var xa=/[#\/\?@]/g,Ju=/[#\?:]/g,Yu=/[#\?]/g,Xu=/[#\?@]/g,Xl=/#/g;function as(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function fn(d){d.g||(d.g=new Map,d.h=0,d.i&&Kf(d.i,function(y,b){d.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}t=as.prototype,t.add=function(d,y){fn(this),this.i=null,d=xr(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(y),this.h+=1,this};function Fr(d,y){fn(d),y=xr(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function zr(d,y){return fn(d),y=xr(d,y),d.g.has(y)}t.forEach=function(d,y){fn(this),this.g.forEach(function(b,S){b.forEach(function(q){d.call(y,q,S,this)},this)},this)},t.na=function(){fn(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let S=0;S<y.length;S++){const q=d[S];for(let J=0;J<q.length;J++)b.push(y[S])}return b},t.V=function(d){fn(this);let y=[];if(typeof d=="string")zr(this,d)&&(y=y.concat(this.g.get(xr(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)y=y.concat(d[b])}return y},t.set=function(d,y){return fn(this),this.i=null,d=xr(this,d),zr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function xi(d,y,b){Fr(d,y),0<b.length&&(d.i=null,d.g.set(xr(d,y),E(b)),d.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var S=y[b];const J=encodeURIComponent(String(S)),ce=this.V(S);for(S=0;S<ce.length;S++){var q=J;ce[S]!==""&&(q+="="+encodeURIComponent(String(ce[S]))),d.push(q)}}return this.i=d.join("&")};function xr(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function ls(d,y){y&&!d.j&&(fn(d),d.i=null,d.g.forEach(function(b,S){var q=S.toLowerCase();S!=q&&(Fr(this,S),xi(this,q,b))},d)),d.j=y}function Gf(d,y){const b=new hn;if(u.Image){const S=new Image;S.onload=I(Gn,b,"TestLoadImage: loaded",!0,y,S),S.onerror=I(Gn,b,"TestLoadImage: error",!1,y,S),S.onabort=I(Gn,b,"TestLoadImage: abort",!1,y,S),S.ontimeout=I(Gn,b,"TestLoadImage: timeout",!1,y,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else y(!1)}function ed(d,y){const b=new hn,S=new AbortController,q=setTimeout(()=>{S.abort(),Gn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:S.signal}).then(J=>{clearTimeout(q),J.ok?Gn(b,"TestPingServer: ok",!0,y):Gn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Gn(b,"TestPingServer: error",!1,y)})}function Gn(d,y,b,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(b)}catch{}}function Qf(){this.g=new Eo}function td(d,y,b){const S=b||"";try{yi(d,function(q,J){let ce=q;m(q)&&(ce=Ps(q)),y.push(S+J+"="+encodeURIComponent(ce))})}catch(q){throw y.push(S+"type="+encodeURIComponent("_badmap")),q}}function js(d){this.l=d.Ub||null,this.j=d.eb||!1}C(js,os),js.prototype.g=function(){return new Ro(this.l,this.j)},js.prototype.i=(function(d){return function(){return d}})({});function Ro(d,y){Ot.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ro,Ot),t=Ro.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,$r(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||u).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ur(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nd(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function nd(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Ur(this):$r(this),this.readyState==3&&nd(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Ur(this))},t.Qa=function(d){this.g&&(this.response=d,Ur(this))},t.ga=function(){this.g&&Ur(this)};function Ur(d){d.readyState=4,d.l=null,d.j=null,d.v=null,$r(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=y.next();return d.join(`\r
`)};function $r(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ro.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Os(d){let y="";return ne(d,function(b,S){y+=S,y+=":",y+=b,y+=`\r
`}),y}function ki(d,y,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Os(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):dt(d,y,b))}function bt(d){Ot.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(bt,Ot);var Zf=/^https?$/i,ec=["POST","PUT"];t=bt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mr.g(),this.v=this.o?pi(this.o):pi(Mr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(J){Po(this,J);return}if(d=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)b.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())b.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(J=>J.toLowerCase()=="content-type"),q=u.FormData&&d instanceof u.FormData,!(0<=Array.prototype.indexOf.call(ec,y,void 0))||S||q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ce]of b)this.g.setRequestHeader(J,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ea(this),this.u=!0,this.g.send(d),this.u=!1}catch(J){Po(this,J)}};function Po(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,ka(d),dr(d)}function ka(d){d.A||(d.A=!0,ht(d,"complete"),ht(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ht(this,"complete"),ht(this,"abort"),dr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dr(this,!0)),bt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tc(this):this.bb())},t.bb=function(){tc(this)};function tc(d){if(d.h&&typeof l<"u"&&(!d.v[1]||Qn(d)!=4||d.Z()!=2)){if(d.u&&Qn(d)==4)jr(d.Ea,0,d);else if(ht(d,"readystatechange"),Qn(d)==4){d.h=!1;try{const ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var S;if(S=ce===0){var q=String(d.D).match(Ao)[1]||null;!q&&u.self&&u.self.location&&(q=u.self.location.protocol.slice(0,-1)),S=!Zf.test(q?q.toLowerCase():"")}b=S}if(b)ht(d,"complete"),ht(d,"success");else{d.m=6;try{var J=2<Qn(d)?d.g.statusText:""}catch{J=""}d.l=J+" ["+d.Z()+"]",ka(d)}}finally{dr(d)}}}}function dr(d,y){if(d.g){Ea(d);const b=d.g,S=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||ht(d,"ready");try{b.onreadystatechange=S}catch{}}}function Ea(d){d.I&&(u.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Qn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),fi(y)}};function nc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ta(d){const y={};d=(d.g&&2<=Qn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(W(d[S]))continue;var b=L(d[S]);const q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const J=y[q]||[];y[q]=J,J.push(b)}R(y,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cs(d,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||y}function rc(d){this.Aa=0,this.i=[],this.j=new hn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cs("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cs("baseRetryDelayMs",5e3,d),this.cb=cs("retryDelaySeedMs",1e4,d),this.Wa=cs("forwardChannelMaxRetries",2,d),this.wa=cs("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Co(d&&d.concurrentRequestLimit),this.Da=new Qf,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=rc.prototype,t.la=8,t.G=1,t.connect=function(d,y,b,S){Be(0),this.W=d,this.H=y||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.I=od(this,null,this.W),us(this)};function pn(d){if(Ia(d),d.G==3){var y=d.U++,b=ur(d.I);if(dt(b,"SID",d.K),dt(b,"RID",y),dt(b,"TYPE","terminate"),Ls(d,b),y=new Vr(d,d.j,y),y.L=2,y.v=wi(ur(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&u.Image&&(new Image().src=y.v,b=!0),b||(y.g=ad(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ft(y)}id(d)}function Br(d){d.g&&(sc(d),d.g.cancel(),d.g=null)}function Ia(d){Br(d),d.u&&(u.clearTimeout(d.u),d.u=null),Aa(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&u.clearTimeout(d.s),d.s=null)}function us(d){if(!cr(d.h)&&!d.s){d.s=!0;var y=d.Ga;Ie||ue(),Y||(Ie(),Y=!0),fe.add(y,d),d.B=0}}function Jf(d,y){return Ku(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Rt(x(d.Ga,d,y),sd(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const q=new Vr(this,this.j,d);let J=this.o;if(this.S&&(J?(J=T(J),M(J,this.S)):J=this.S),this.m!==null||this.O||(q.H=J,J=null),this.P)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=Ei(this,q,y),b=ur(this.I),dt(b,"RID",d),dt(b,"CVER",22),this.D&&dt(b,"X-HTTP-Session-Id",this.D),Ls(this,b),J&&(this.O?y="headers="+encodeURIComponent(String(Os(J)))+"&"+y:this.m&&ki(b,this.m,J)),Yl(this.h,q),this.Ua&&dt(b,"TYPE","init"),this.P?(dt(b,"$req",y),dt(b,"SID","null"),q.T=!0,_a(q,b,null)):_a(q,b,y),this.G=2}}else this.G==3&&(d?Sa(this,d):this.i.length==0||cr(this.h)||Sa(this))};function Sa(d,y){var b;y?b=y.l:b=d.U++;const S=ur(d.I);dt(S,"SID",d.K),dt(S,"RID",b),dt(S,"AID",d.T),Ls(d,S),d.m&&d.o&&ki(S,d.m,d.o),b=new Vr(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),y&&(d.i=y.D.concat(d.i)),y=Ei(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Yl(d.h,b),_a(b,S,y)}function Ls(d,y){d.H&&ne(d.H,function(b,S){dt(y,S,b)}),d.l&&yi({},function(b,S){dt(y,S,b)})}function Ei(d,y,b){b=Math.min(d.i.length,b);var S=d.l?x(d.l.Na,d.l,d):null;e:{var q=d.i;let J=-1;for(;;){const ce=["count="+b];J==-1?0<b?(J=q[0].g,ce.push("ofs="+J)):J=0:ce.push("ofs="+J);let at=!0;for(let Qt=0;Qt<b;Qt++){let et=q[Qt].g;const nn=q[Qt].map;if(et-=J,0>et)J=Math.max(0,q[Qt].g-100),at=!1;else try{td(nn,ce,"req"+et+"_")}catch{S&&S(nn)}}if(at){S=ce.join("&");break e}}}return d=d.i.splice(0,b),y.D=d,S}function Do(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;Ie||ue(),Y||(Ie(),Y=!0),fe.add(y,d),d.v=0}}function Ca(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Rt(x(d.Fa,d),sd(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,rd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Rt(x(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Be(10),Br(this),rd(this))};function sc(d){d.A!=null&&(u.clearTimeout(d.A),d.A=null)}function rd(d){d.g=new Vr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=ur(d.qa);dt(y,"RID","rpc"),dt(y,"SID",d.K),dt(y,"AID",d.T),dt(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&dt(y,"TO",d.ja),dt(y,"TYPE","xmlhttp"),Ls(d,y),d.m&&d.o&&ki(y,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=wi(ur(y)),b.m=null,b.P=!0,Zl(b,d)}t.Za=function(){this.C!=null&&(this.C=null,Br(this),Ca(this),Be(19))};function Aa(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function Na(d,y){var b=null;if(d.g==y){Aa(d),sc(d),d.g=null;var S=2}else if(On(d.h,y))b=y.D,Gu(d.h,y),S=1;else return;if(d.G!=0){if(y.o)if(S==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var q=d.B;S=zt(),ht(S,new jn(S,b)),us(d)}else Do(d);else if(q=y.s,q==3||q==0&&0<y.X||!(S==1&&Jf(d,y)||S==2&&Ca(d)))switch(b&&0<b.length&&(y=d.h,y.i=y.i.concat(b)),q){case 1:Ms(d,5);break;case 4:Ms(d,10);break;case 3:Ms(d,6);break;default:Ms(d,2)}}}function sd(d,y){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*y}function Ms(d,y){if(d.j.info("Error code "+y),y==2){var b=x(d.fb,d),S=d.Xa;const q=!S;S=new Ds(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||No(S,"https"),wi(S),q?Gf(S.toString(),b):ed(S.toString(),b)}else Be(2);d.G=0,d.l&&d.l.sa(y),id(d),Ia(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))};function id(d){if(d.G=0,d.ka=[],d.l){const y=Qu(d.h);(y.length!=0||d.i.length!=0)&&(A(d.ka,y),A(d.ka,d.i),d.h.i.length=0,E(d.i),d.i.length=0),d.l.ra()}}function od(d,y,b){var S=b instanceof Ds?ur(b):new Ds(b);if(S.g!="")y&&(S.g=y+"."+S.g),vi(S,S.s);else{var q=u.location;S=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var J=new Ds(null);S&&No(J,S),y&&(J.g=y),q&&vi(J,q),b&&(J.l=b),S=J}return b=d.D,y=d.ya,b&&y&&dt(S,b,y),dt(S,"VER",d.la),Ls(d,S),S}function ad(d,y,b){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new bt(new js({eb:b})):new bt(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}t=ic.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ra(){}Ra.prototype.g=function(d,y){return new Ln(d,y)};function Ln(d,y){Ot.call(this),this.g=new rc(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!W(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!W(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new ds(this)}C(Ln,Ot),Ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){pn(this.g)},Ln.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=Ps(d),d=b);y.i.push(new Hu(y.Ya++,d)),y.G==3&&us(y)},Ln.prototype.N=function(){this.g.l=null,delete this.j,pn(this.g),delete this.g,Ln.aa.N.call(this)};function ld(d){ut.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const b in y){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}C(ld,ut);function cd(){Ft.call(this),this.status=1}C(cd,Ft);function ds(d){this.g=d}C(ds,ic),ds.prototype.ua=function(){ht(this.g,"a")},ds.prototype.ta=function(d){ht(this.g,new ld(d))},ds.prototype.sa=function(d){ht(this.g,new cd)},ds.prototype.ra=function(){ht(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,Pk=function(){return new Ra},Rk=function(){return zt()},Nk=wt,lg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ya.NO_ERROR=0,ya.TIMEOUT=8,ya.HTTP_ERROR=6,Ah=ya,$u.COMPLETE="complete",Ak=$u,mi.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,Oc=mi,bt.prototype.listenOnce=bt.prototype.L,bt.prototype.getLastError=bt.prototype.Ka,bt.prototype.getLastErrorCode=bt.prototype.Ba,bt.prototype.getStatus=bt.prototype.Z,bt.prototype.getResponseJson=bt.prototype.Oa,bt.prototype.getResponseText=bt.prototype.oa,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Ha,Ck=bt}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const bw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new qg("@firebase/firestore");function Nc(){return aa.logLevel}function we(t,...e){if(aa.logLevel<=Xe.DEBUG){const n=e.map(sy);aa.debug(`Firestore (${zl}): ${t}`,...n)}}function ri(t,...e){if(aa.logLevel<=Xe.ERROR){const n=e.map(sy);aa.error(`Firestore (${zl}): ${t}`,...n)}}function Tl(t,...e){if(aa.logLevel<=Xe.WARN){const n=e.map(sy);aa.warn(`Firestore (${zl}): ${t}`,...n)}}function sy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t="Unexpected state"){const e=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: `+t;throw ri(e),new Error(e)}function lt(t,e){t||je()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(An.UNAUTHENTICATED)))}shutdown(){}}class f2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class p2{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lt(this.o===void 0);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let a=new oo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new oo,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},u=h=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new oo)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string"),new Dk(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string"),new An(e)}}class m2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=An.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class g2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new m2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(An.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class y2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){lt(this.o===void 0);const r=a=>{a.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,we("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(lt(typeof n.token=="string"),this.R=n.token,new y2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=_2(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function it(t,e){return t<e?-1:t>e?1:0}function Il(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new _t(0,0))}static max(){return new Oe(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n,r){n===void 0?n=0:n>e.length&&je(),r===void 0?r=e.length-n:r>e.length-n&&je(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ou.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ou?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),l=n.get(s);if(a<l)return-1;if(a>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class vt extends ou{construct(e,n,r){return new vt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new vt(n)}static emptyPath(){return new vt([])}}const w2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends ou{construct(e,n,r){return new vn(e,n,r)}static isValidIdentifier(e){return w2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(a(),s++)}if(a(),l)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(n)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(vt.fromString(e))}static fromName(e){return new Te(vt.fromString(e).popFirst(5))}static empty(){return new Te(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new vt(e.slice()))}}function b2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new lo(s,Te.empty(),e)}function x2(t){return new lo(t.readTime,t.key,-1)}class lo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new lo(Oe.min(),Te.empty(),-1)}static max(){return new lo(Oe.max(),Te.empty(),-1)}}function k2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(t.documentKey,e.documentKey),n!==0?n:it(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==E2)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,r)=>{n(e)}))}static reject(e){return new oe(((n,r)=>{r(e)}))}static waitFor(e){return new oe(((n,r)=>{let s=0,a=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++a,l&&a===s&&n()}),(h=>r(h)))})),l=!0,a===s&&n()}))}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next((s=>s?oe.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,a)=>{r.push(n.call(this,s,a))})),this.waitFor(r)}static mapArray(e,n){return new oe(((r,s)=>{const a=e.length,l=new Array(a);let u=0;for(let h=0;h<a;h++){const m=h;n(e[m]).next((v=>{l[m]=v,++u,u===a&&r(l)}),(v=>s(v)))}}))}static doWhile(e,n){return new oe(((r,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):r()};a()}))}}function I2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Au(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}iy.oe=-1;function bf(t){return t==null}function Qh(t){return t===0&&1/t==-1/0}function S2(t){return typeof t=="number"&&Number.isInteger(t)&&!Qh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ok(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??yn.RED,this.left=s??yn.EMPTY,this.right=a??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new yn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return yn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw je();const e=this.left.check();if(e!==this.right.check())throw je();return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw je()}get value(){throw je()}get color(){throw je()}get left(){throw je()}get right(){throw je()}copy(e,n,r,s,a){return this}insert(e,n,r){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kw(this.data.getIterator())}getIteratorFrom(e){return new kw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new _n(this.comparator);return n.data=e,n}}class kw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new gr([])}unionWith(e){let n=new _n(vn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Il(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Lk("Invalid base64 string: "+a):a}})(e);return new wn(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const C2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function co(t){if(lt(!!t),typeof t=="string"){let e=0;const n=C2.exec(t);if(lt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mt(t.seconds),nanos:Mt(t.nanos)}}function Mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function la(t){return typeof t=="string"?wn.fromBase64String(t):wn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ay(t){const e=t.mapValue.fields.__previous_value__;return oy(e)?ay(e):e}function au(t){const e=co(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n,r,s,a,l,u,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=m}}class lu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh={mapValue:{}};function ca(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oy(t)?4:R2(t)?9007199254740991:N2(t)?10:11:je()}function Ts(t,e){if(t===e)return!0;const n=ca(t);if(n!==ca(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return au(t).isEqual(au(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=co(s.timestampValue),u=co(a.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return la(s.bytesValue).isEqual(la(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return Mt(s.geoPointValue.latitude)===Mt(a.geoPointValue.latitude)&&Mt(s.geoPointValue.longitude)===Mt(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Mt(s.integerValue)===Mt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Mt(s.doubleValue),u=Mt(a.doubleValue);return l===u?Qh(l)===Qh(u):isNaN(l)&&isNaN(u)}return!1})(t,e);case 9:return Il(t.arrayValue.values||[],e.arrayValue.values||[],Ts);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},u=a.mapValue.fields||{};if(xw(l)!==xw(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!Ts(l[h],u[h])))return!1;return!0})(t,e);default:return je()}}function cu(t,e){return(t.values||[]).find((n=>Ts(n,e)))!==void 0}function Sl(t,e){if(t===e)return 0;const n=ca(t),r=ca(e);if(n!==r)return it(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return it(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const u=Mt(a.integerValue||a.doubleValue),h=Mt(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(t,e);case 3:return Ew(t.timestampValue,e.timestampValue);case 4:return Ew(au(t),au(e));case 5:return it(t.stringValue,e.stringValue);case 6:return(function(a,l){const u=la(a),h=la(l);return u.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const u=a.split("/"),h=l.split("/");for(let m=0;m<u.length&&m<h.length;m++){const v=it(u[m],h[m]);if(v!==0)return v}return it(u.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const u=it(Mt(a.latitude),Mt(l.latitude));return u!==0?u:it(Mt(a.longitude),Mt(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Tw(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var u,h,m,v;const w=a.fields||{},x=l.fields||{},I=(u=w.value)===null||u===void 0?void 0:u.arrayValue,C=(h=x.value)===null||h===void 0?void 0:h.arrayValue,E=it(((m=I==null?void 0:I.values)===null||m===void 0?void 0:m.length)||0,((v=C==null?void 0:C.values)===null||v===void 0?void 0:v.length)||0);return E!==0?E:Tw(I,C)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===lh.mapValue&&l===lh.mapValue)return 0;if(a===lh.mapValue)return 1;if(l===lh.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),m=l.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let w=0;w<h.length&&w<v.length;++w){const x=it(h[w],v[w]);if(x!==0)return x;const I=Sl(u[h[w]],m[v[w]]);if(I!==0)return I}return it(h.length,v.length)})(t.mapValue,e.mapValue);default:throw je()}}function Ew(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return it(t,e);const n=co(t),r=co(e),s=it(n.seconds,r.seconds);return s!==0?s:it(n.nanos,r.nanos)}function Tw(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Sl(n[s],r[s]);if(a)return a}return it(n.length,r.length)}function Cl(t){return cg(t)}function cg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=co(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return la(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Te.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=cg(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${cg(n.fields[l])}`;return s+"}"})(t.mapValue):je()}function Iw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ug(t){return!!t&&"integerValue"in t}function ly(t){return!!t&&"arrayValue"in t}function Sw(t){return!!t&&"nullValue"in t}function Cw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nh(t){return!!t&&"mapValue"in t}function N2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Hc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return da(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Hc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function R2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(n)}setAll(e){let n=vn.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=Hc(l):s.push(u.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Nh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){da(n,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new nr(Hc(this.value))}}function Mk(t){const e=[];return da(t.fields,((n,r)=>{const s=new vn([n]);if(Nh(r)){const a=Mk(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n,r,s,a,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Nn(e,0,Oe.min(),Oe.min(),Oe.min(),nr.empty(),0)}static newFoundDocument(e,n,r,s){return new Nn(e,1,n,Oe.min(),r,s,0)}static newNoDocument(e,n){return new Nn(e,2,n,Oe.min(),Oe.min(),nr.empty(),0)}static newUnknownDocument(e,n){return new Nn(e,3,n,Oe.min(),Oe.min(),nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.position=e,this.inclusive=n}}function Aw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?r=Te.comparator(Te.fromName(l.referenceValue),n.key):r=Sl(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Nw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ts(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n="asc"){this.field=e,this.dir=n}}function P2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{}class Ht extends Vk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new j2(e,n,r):n==="array-contains"?new M2(e,r):n==="in"?new V2(e,r):n==="not-in"?new F2(e,r):n==="array-contains-any"?new z2(e,r):new Ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new O2(e,r):new L2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Sl(n,this.value)):n!==null&&ca(this.value)===ca(n)&&this.matchesComparison(Sl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ns extends Vk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ns(e,n)}matches(e){return Fk(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Fk(t){return t.op==="and"}function zk(t){return D2(t)&&Fk(t)}function D2(t){for(const e of t.filters)if(e instanceof ns)return!1;return!0}function dg(t){if(t instanceof Ht)return t.field.canonicalString()+t.op.toString()+Cl(t.value);if(zk(t))return t.filters.map((e=>dg(e))).join(",");{const e=t.filters.map((n=>dg(n))).join(",");return`${t.op}(${e})`}}function Uk(t,e){return t instanceof Ht?(function(r,s){return s instanceof Ht&&r.op===s.op&&r.field.isEqual(s.field)&&Ts(r.value,s.value)})(t,e):t instanceof ns?(function(r,s){return s instanceof ns&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,u)=>a&&Uk(l,s.filters[u])),!0):!1})(t,e):void je()}function $k(t){return t instanceof Ht?(function(n){return`${n.field.canonicalString()} ${n.op} ${Cl(n.value)}`})(t):t instanceof ns?(function(n){return n.op.toString()+" {"+n.getFilters().map($k).join(" ,")+"}"})(t):"Filter"}class j2 extends Ht{constructor(e,n,r){super(e,n,r),this.key=Te.fromName(r.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class O2 extends Ht{constructor(e,n){super(e,"in",n),this.keys=Bk("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class L2 extends Ht{constructor(e,n){super(e,"not-in",n),this.keys=Bk("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Bk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>Te.fromName(r.referenceValue)))}class M2 extends Ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ly(n)&&cu(n.arrayValue,this.value)}}class V2 extends Ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cu(this.value.arrayValue,n)}}class F2 extends Ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!cu(this.value.arrayValue,n)}}class z2 extends Ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ly(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>cu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n=null,r=[],s=[],a=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=u,this.ue=null}}function Rw(t,e=null,n=[],r=[],s=null,a=null,l=null){return new U2(t,e,n,r,s,a,l)}function cy(t){const e=Le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>dg(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),bf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Cl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Cl(r))).join(",")),e.ue=n}return e.ue}function uy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!P2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Uk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nw(t.startAt,e.startAt)&&Nw(t.endAt,e.endAt)}function hg(t){return Te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n=null,r=[],s=[],a=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=u,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $2(t,e,n,r,s,a,l,u){return new Ul(t,e,n,r,s,a,l,u)}function dy(t){return new Ul(t)}function Pw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Wk(t){return t.collectionGroup!==null}function Kc(t){const e=Le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new _n(vn.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((m=>{m.isInequality()&&(u=u.add(m.field))}))})),u})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new uu(a,r))})),n.has(vn.keyField().canonicalString())||e.ce.push(new uu(vn.keyField(),r))}return e.ce}function xs(t){const e=Le(t);return e.le||(e.le=B2(e,Kc(t))),e.le}function B2(t,e){if(t.limitType==="F")return Rw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new uu(s.field,a)}));const n=t.endAt?new Zh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zh(t.startAt.position,t.startAt.inclusive):null;return Rw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function fg(t,e){const n=t.filters.concat([e]);return new Ul(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jh(t,e,n){return new Ul(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xf(t,e){return uy(xs(t),xs(e))&&t.limitType===e.limitType}function qk(t){return`${cy(xs(t))}|lt:${t.limitType}`}function el(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>$k(s))).join(", ")}]`),bf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Cl(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Cl(s))).join(",")),`Target(${r})`})(xs(t))}; limitType=${t.limitType})`}function kf(t,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Te.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,s){for(const a of Kc(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,h){const m=Aw(l,u,h);return l.inclusive?m<=0:m<0})(r.startAt,Kc(r),s)||r.endAt&&!(function(l,u,h){const m=Aw(l,u,h);return l.inclusive?m>=0:m>0})(r.endAt,Kc(r),s))})(t,e)}function W2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hk(t){return(e,n)=>{let r=!1;for(const s of Kc(t)){const a=q2(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function q2(t,e,n){const r=t.field.isKeyField()?Te.comparator(e.key,n.key):(function(a,l,u){const h=l.data.field(a),m=u.data.field(a);return h!==null&&m!==null?Sl(h,m):je()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return je()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,((n,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return Ok(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=new St(Te.comparator);function si(){return H2}const Kk=new St(Te.comparator);function Lc(...t){let e=Kk;for(const n of t)e=e.insert(n.key,n);return e}function Gk(t){let e=Kk;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Zo(){return Gc()}function Qk(){return Gc()}function Gc(){return new $l((t=>t.toString()),((t,e)=>t.isEqual(e)))}const K2=new St(Te.comparator),G2=new _n(Te.comparator);function Ge(...t){let e=G2;for(const n of t)e=e.add(n);return e}const Q2=new _n(it);function Z2(){return Q2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function Zk(t){return{integerValue:""+t}}function J2(t,e){return S2(e)?Zk(e):hy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(){this._=void 0}}function Y2(t,e,n){return t instanceof du?(function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&oy(a)&&(a=ay(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}})(n,e):t instanceof hu?Yk(t,e):t instanceof fu?Xk(t,e):(function(s,a){const l=Jk(s,a),u=Dw(l)+Dw(s.Pe);return ug(l)&&ug(s.Pe)?Zk(u):hy(s.serializer,u)})(t,e)}function X2(t,e,n){return t instanceof hu?Yk(t,e):t instanceof fu?Xk(t,e):n}function Jk(t,e){return t instanceof Yh?(function(r){return ug(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class du extends Ef{}class hu extends Ef{constructor(e){super(),this.elements=e}}function Yk(t,e){const n=eE(e);for(const r of t.elements)n.some((s=>Ts(s,r)))||n.push(r);return{arrayValue:{values:n}}}class fu extends Ef{constructor(e){super(),this.elements=e}}function Xk(t,e){let n=eE(e);for(const r of t.elements)n=n.filter((s=>!Ts(s,r)));return{arrayValue:{values:n}}}class Yh extends Ef{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Dw(t){return Mt(t.integerValue||t.doubleValue)}function eE(t){return ly(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n){this.field=e,this.transform=n}}function tP(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof hu&&s instanceof hu||r instanceof fu&&s instanceof fu?Il(r.elements,s.elements,Ts):r instanceof Yh&&s instanceof Yh?Ts(r.Pe,s.Pe):r instanceof du&&s instanceof du})(t.transform,e.transform)}class nP{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tf{}function tE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new If(t.key,$n.none()):new Nu(t.key,t.data,$n.none());{const n=t.data,r=nr.empty();let s=new _n(vn.comparator);for(let a of e.fields)if(!s.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new mo(t.key,r,new gr(s.toArray()),$n.none())}}function rP(t,e,n){t instanceof Nu?(function(s,a,l){const u=s.value.clone(),h=Ow(s.fieldTransforms,a,l.transformResults);u.setAll(h),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,n):t instanceof mo?(function(s,a,l){if(!Rh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const u=Ow(s.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(nE(s)),h.setAll(u),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(t,e,n):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Qc(t,e,n,r){return t instanceof Nu?(function(a,l,u,h){if(!Rh(a.precondition,l))return u;const m=a.value.clone(),v=Lw(a.fieldTransforms,h,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(t,e,n,r):t instanceof mo?(function(a,l,u,h){if(!Rh(a.precondition,l))return u;const m=Lw(a.fieldTransforms,h,l),v=l.data;return v.setAll(nE(a)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(t,e,n,r):(function(a,l,u){return Rh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(t,e,n)}function sP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=Jk(r.transform,s||null);a!=null&&(n===null&&(n=nr.empty()),n.set(r.field,a))}return n||null}function jw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Il(r,s,((a,l)=>tP(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nu extends Tf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class mo extends Tf{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function nE(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ow(t,e,n){const r=new Map;lt(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,u=e.data.field(a.field);r.set(a.field,X2(l,u,n[s]))}return r}function Lw(t,e,n){const r=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);r.set(s.field,Y2(a,l,e))}return r}class If extends Tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iP extends Tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&rP(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Qk();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let u=this.applyToLocalView(l,a.mutatedFields);u=n.has(s.key)?null:u;const h=tE(l,u);h!==null&&r.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(Oe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Il(this.mutations,e.mutations,((n,r)=>jw(n,r)))&&Il(this.baseMutations,e.baseMutations,((n,r)=>jw(n,r)))}}class fy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){lt(e.mutations.length===r.length);let s=(function(){return K2})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new fy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,tt;function cP(t){switch(t){default:return je();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function rE(t){if(t===void 0)return ri("GRPC error has no .code"),te.UNKNOWN;switch(t){case qt.OK:return te.OK;case qt.CANCELLED:return te.CANCELLED;case qt.UNKNOWN:return te.UNKNOWN;case qt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case qt.INTERNAL:return te.INTERNAL;case qt.UNAVAILABLE:return te.UNAVAILABLE;case qt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case qt.NOT_FOUND:return te.NOT_FOUND;case qt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case qt.ABORTED:return te.ABORTED;case qt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case qt.DATA_LOSS:return te.DATA_LOSS;default:return je()}}(tt=qt||(qt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new ra([4294967295,4294967295],0);function Mw(t){const e=uP().encode(t),n=new Sk;return n.update(e),new Uint8Array(n.digest())}function Vw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ra([n,r],0),new ra([s,a],0)]}class py{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mc(`Invalid padding: ${n}`);if(r<0)throw new Mc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ra.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ra.fromNumber(r)));return s.compare(dP)===1&&(s=new ra([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Mw(e),[r,s]=Vw(n);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,s,a);if(!this.de(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new py(a,s,n);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.Ie===0)return;const n=Mw(e),[r,s]=Vw(n);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,s,a);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sf(Oe.min(),s,new St(it),si(),Ge())}}class Ru{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ru(r,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class sE{constructor(e,n){this.targetId=e,this.me=n}}class iE{constructor(e,n,r=wn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Fw{constructor(){this.fe=0,this.ge=Uw(),this.pe=wn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ge(),n=Ge(),r=Ge();return this.ge.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:je()}})),new Ru(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Uw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hP{constructor(e){this.Le=e,this.Be=new Map,this.ke=si(),this.qe=zw(),this.Qe=new St(it)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:je()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,s)=>{this.ze(s)&&n(s)}))}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(hg(a))if(r===0){const l=new Te(a.path);this.Ue(n,l,Nn.newNoDocument(l,Oe.min()))}else lt(r===1);else{const l=this.Ye(n);if(l!==r){const u=this.Ze(e),h=u?this.Xe(u,e,l):1;if(h!==0){this.je(n);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let l,u;try{l=la(r).toUint8Array()}catch(h){if(h instanceof Lk)return Tl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new py(l,s,a)}catch(h){return Tl(h instanceof Mc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach((a=>{const l=this.Le.tt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,a,null),s++)})),s}rt(e){const n=new Map;this.Be.forEach(((a,l)=>{const u=this.Je(l);if(u){if(a.current&&hg(u.target)){const h=new Te(u.target.path);this.ke.get(h)!==null||this.it(l,h)||this.Ue(l,h,Nn.newNoDocument(h,e))}a.be&&(n.set(l,a.ve()),a.Ce())}}));let r=Ge();this.qe.forEach(((a,l)=>{let u=!0;l.forEachWhile((h=>{const m=this.Je(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(a))})),this.ke.forEach(((a,l)=>l.setReadTime(e)));const s=new Sf(e,n,this.Qe,this.ke,r);return this.ke=si(),this.qe=zw(),this.Qe=new St(it),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Fw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new _n(it),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Fw),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function zw(){return new St(Te.comparator)}function Uw(){return new St(Te.comparator)}const fP={asc:"ASCENDING",desc:"DESCENDING"},pP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mP={and:"AND",or:"OR"};class gP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pg(t,e){return t.useProto3Json||bf(e)?e:{value:e}}function Xh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yP(t,e){return Xh(t,e.toTimestamp())}function ks(t){return lt(!!t),Oe.fromTimestamp((function(n){const r=co(n);return new _t(r.seconds,r.nanos)})(t))}function my(t,e){return mg(t,e).canonicalString()}function mg(t,e){const n=(function(s){return new vt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function aE(t){const e=vt.fromString(t);return lt(hE(e)),e}function gg(t,e){return my(t.databaseId,e.path)}function jm(t,e){const n=aE(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Te(cE(n))}function lE(t,e){return my(t.databaseId,e)}function vP(t){const e=aE(t);return e.length===4?vt.emptyPath():cE(e)}function yg(t){return new vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cE(t){return lt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $w(t,e,n){return{name:gg(t,e),fields:n.value.mapValue.fields}}function _P(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:je()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(lt(v===void 0||typeof v=="string"),wn.fromBase64String(v||"")):(lt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),wn.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(m){const v=m.code===void 0?te.UNKNOWN:rE(m.code);return new pe(v,m.message||"")})(l);n=new iE(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=jm(t,r.document.name),a=ks(r.document.updateTime),l=r.document.createTime?ks(r.document.createTime):Oe.min(),u=new nr({mapValue:{fields:r.document.fields}}),h=Nn.newFoundDocument(s,a,l,u),m=r.targetIds||[],v=r.removedTargetIds||[];n=new Ph(m,v,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=jm(t,r.document),a=r.readTime?ks(r.readTime):Oe.min(),l=Nn.newNoDocument(s,a),u=r.removedTargetIds||[];n=new Ph([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=jm(t,r.document),a=r.removedTargetIds||[];n=new Ph([],a,s,null)}else{if(!("filter"in e))return je();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new lP(s,a),u=r.targetId;n=new sE(u,l)}}return n}function wP(t,e){let n;if(e instanceof Nu)n={update:$w(t,e.key,e.value)};else if(e instanceof If)n={delete:gg(t,e.key)};else if(e instanceof mo)n={update:$w(t,e.key,e.data),updateMask:AP(e.fieldMask)};else{if(!(e instanceof iP))return je();n={verify:gg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const u=l.transform;if(u instanceof du)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof fu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Yh)return{fieldPath:l.field.canonicalString(),increment:u.Pe};throw je()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:yP(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:je()})(t,e.precondition)),n}function bP(t,e){return t&&t.length>0?(lt(e!==void 0),t.map((n=>(function(s,a){let l=s.updateTime?ks(s.updateTime):ks(a);return l.isEqual(Oe.min())&&(l=ks(a)),new nP(l,s.transformResults||[])})(n,e)))):[]}function xP(t,e){return{documents:[lE(t,e.path)]}}function kP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lE(t,s);const a=(function(m){if(m.length!==0)return dE(ns.create(m,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(m){if(m.length!==0)return m.map((v=>(function(x){return{field:tl(x.field),direction:IP(x.dir)}})(v)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=pg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:n,parent:s}}function EP(t){let e=vP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){lt(r===1);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=(function(w){const x=uE(w);return x instanceof ns&&zk(x)?x.getFilters():[x]})(n.where));let l=[];n.orderBy&&(l=(function(w){return w.map((x=>(function(C){return new uu(nl(C.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(x)))})(n.orderBy));let u=null;n.limit&&(u=(function(w){let x;return x=typeof w=="object"?w.value:w,bf(x)?null:x})(n.limit));let h=null;n.startAt&&(h=(function(w){const x=!!w.before,I=w.values||[];return new Zh(I,x)})(n.startAt));let m=null;return n.endAt&&(m=(function(w){const x=!w.before,I=w.values||[];return new Zh(I,x)})(n.endAt)),$2(e,s,l,a,u,"F",h,m)}function TP(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=nl(n.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=nl(n.unaryFilter.field);return Ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=nl(n.unaryFilter.field);return Ht.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=nl(n.unaryFilter.field);return Ht.create(l,"!=",{nullValue:"NULL_VALUE"});default:return je()}})(t):t.fieldFilter!==void 0?(function(n){return Ht.create(nl(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return je()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ns.create(n.compositeFilter.filters.map((r=>uE(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return je()}})(n.compositeFilter.op))})(t):je()}function IP(t){return fP[t]}function SP(t){return pP[t]}function CP(t){return mP[t]}function tl(t){return{fieldPath:t.canonicalString()}}function nl(t){return vn.fromServerFormat(t.fieldPath)}function dE(t){return t instanceof Ht?(function(n){if(n.op==="=="){if(Cw(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NAN"}};if(Sw(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cw(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NOT_NAN"}};if(Sw(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tl(n.field),op:SP(n.op),value:n.value}}})(t):t instanceof ns?(function(n){const r=n.getFilters().map((s=>dE(s)));return r.length===1?r[0]:{compositeFilter:{op:CP(n.op),filters:r}}})(t):je()}function AP(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function hE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n,r,s,a=Oe.min(),l=Oe.min(),u=wn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new to(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.ct=e}}function RP(t){const e=EP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.un=new DP}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(lo.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(lo.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class DP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _n(vt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _n(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Al(0)}static kn(){return new Al(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.changes=new $l((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Qc(r.mutation,s,gr.empty(),_t.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ge()){const s=Zo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((a=>{let l=Lc();return a.forEach(((u,h)=>{l=l.insert(u,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=Zo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ge())))}populateOverlays(e,n,r){const s=[];return r.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,u)=>{n.set(l,u)}))}))}computeViews(e,n,r,s){let a=si();const l=Gc(),u=(function(){return Gc()})();return n.forEach(((h,m)=>{const v=r.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof mo)?a=a.insert(m.key,m):v!==void 0?(l.set(m.key,v.mutation.getFieldMask()),Qc(v.mutation,m,v.mutation.getFieldMask(),_t.now())):l.set(m.key,gr.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((m,v)=>l.set(m,v))),n.forEach(((m,v)=>{var w;return u.set(m,new OP(v,(w=l.get(m))!==null&&w!==void 0?w:null))})),u)))}recalculateAndSaveOverlays(e,n){const r=Gc();let s=new St(((l,u)=>l-u)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const u of l)u.keys().forEach((h=>{const m=n.get(h);if(m===null)return;let v=r.get(h)||gr.empty();v=u.applyToLocalView(m,v),r.set(h,v);const w=(s.get(u.batchId)||Ge()).add(h);s=s.insert(u.batchId,w)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),m=h.key,v=h.value,w=Qk();v.forEach((x=>{if(!a.has(x)){const I=tE(n.get(x),r.get(x));I!==null&&w.set(x,I),a=a.add(x)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,w))}return oe.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(l){return Te.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Wk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):oe.resolve(Zo());let u=-1,h=a;return l.next((m=>oe.forEach(m,((v,w)=>(u<w.largestBatchId&&(u=w.largestBatchId),a.get(v)?oe.resolve():this.remoteDocumentCache.getEntry(e,v).next((x=>{h=h.insert(v,x)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,h,m,Ge()))).next((v=>({batchId:u,changes:Gk(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((r=>{let s=Lc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let l=Lc();return this.indexManager.getCollectionParents(e,a).next((u=>oe.forEach(u,(h=>{const m=(function(w,x){return new Ul(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((v=>{v.forEach(((w,x)=>{l=l.insert(w,x)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s)))).next((l=>{a.forEach(((h,m)=>{const v=m.getKey();l.get(v)===null&&(l=l.insert(v,Nn.newInvalidDocument(v)))}));let u=Lc();return l.forEach(((h,m)=>{const v=a.get(h);v!==void 0&&Qc(v.mutation,m,gr.empty(),_t.now()),kf(n,m)&&(u=u.insert(h,m))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:ks(s.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(s){return{name:s.name,query:RP(s.bundledQuery),readTime:ks(s.readTime)}})(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.overlays=new St(Te.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zo();return oe.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,a)=>{this.ht(e,n,a)})),oe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const s=Zo(),a=n.length+1,l=new Te(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,m=h.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new St(((m,v)=>m-v));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=Zo(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const u=Zo(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((m,v)=>u.set(m,v))),!(u.size()>=s)););return oe.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new aP(n,r));let a=this.Ir.get(n);a===void 0&&(a=Ge(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.Tr=new _n(ln.Er),this.dr=new _n(ln.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ln(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new ln(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new Te(new vt([])),r=new ln(n,e),s=new ln(n,e+1),a=[];return this.dr.forEachInRange([r,s],(l=>{this.Vr(l),a.push(l.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Te(new vt([])),r=new ln(n,e),s=new ln(n,e+1);let a=Ge();return this.dr.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new ln(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ln{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Te.comparator(e.key,n.key)||it(e.wr,n.wr)}static Ar(e,n){return it(e.wr,n.wr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new _n(ln.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new oP(a,n,r,s);this.mutationQueue.push(l);for(const u of s)this.br=this.br.add(new ln(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ln(n,0),s=new ln(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],(l=>{const u=this.Dr(l.wr);a.push(u)})),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _n(it);return n.forEach((s=>{const a=new ln(s,0),l=new ln(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,l],(u=>{r=r.add(u.wr)}))})),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Te.isDocumentKey(a)||(a=a.child(""));const l=new ln(new Te(a),0);let u=new _n(it);return this.br.forEachWhile((h=>{const m=h.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(u=u.add(h.wr)),!0)}),l),oe.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){lt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(n.mutations,(s=>{const a=new ln(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new ln(n,0),s=this.br.firstAfterOrEqual(r);return oe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.Mr=e,this.docs=(function(){return new St(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(n))}getEntries(e,n){let r=si();return n.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Nn.newInvalidDocument(s))})),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=si();const l=n.path,u=new Te(l.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:v}}=h.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||k2(x2(v),r)<=0||(s.has(v.key)||kf(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,n,r,s){je()}Or(e,n){return oe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new $P(this)}getSize(e){return oe.resolve(this.size)}}class $P extends jP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.persistence=e,this.Nr=new $l((n=>cy(n)),uy),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gy,this.targetCount=0,this.kr=Al.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,s)=>n(s))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Al(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach(((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),oe.waitFor(a).next((()=>s))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),oe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new iy(0),this.Kr=!1,this.Kr=!0,this.$r=new FP,this.referenceDelegate=e(this),this.Ur=new BP(this),this.indexManager=new PP,this.remoteDocumentCache=(function(s){return new UP(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new NP(n),this.Gr=new MP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new zP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){we("MemoryPersistence","Starting transaction:",e);const s=new qP(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((a=>this.referenceDelegate.jr(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Hr(e,n){return oe.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class qP extends T2{constructor(e){super(),this.currentSequenceNumber=e}}class yy{constructor(e){this.persistence=e,this.Jr=new gy,this.Yr=null}static Zr(e){return new yy(e)}get Xr(){if(this.Yr)return this.Yr;throw je()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,(r=>{const s=Te.fromPath(r);return this.ei(e,s).next((a=>{a||n.removeEntry(s,Oe.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ge(),s=Ge();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new vy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return AC()?8:I2(Rn())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.Zi(e,n,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new HP;return this.Xi(e,n,l).next((u=>{if(a.result=u,this.zi)return this.es(e,n,l,u.size)}))})).next((()=>a.result))}es(e,n,r,s){return r.documentReadCount<this.ji?(Nc()<=Xe.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",el(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(Nc()<=Xe.DEBUG&&we("QueryEngine","Query:",el(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Nc()<=Xe.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",el(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xs(n))):oe.resolve())}Yi(e,n){if(Pw(n))return oe.resolve(null);let r=xs(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Jh(n,null,"F"),r=xs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Ge(...a);return this.Ji.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const m=this.ts(n,u);return this.ns(n,m,l,h.readTime)?this.Yi(e,Jh(n,null,"F")):this.rs(e,m,n,h)}))))})))))}Zi(e,n,r,s){return Pw(n)||s.isEqual(Oe.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const l=this.ts(n,a);return this.ns(n,l,r,s)?oe.resolve(null):(Nc()<=Xe.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),el(n)),this.rs(e,l,n,b2(s,-1)).next((u=>u)))}))}ts(e,n){let r=new _n(Hk(e));return n.forEach(((s,a)=>{kf(e,a)&&(r=r.add(a))})),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return Nc()<=Xe.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",el(n)),this.Ji.getDocumentsMatchingQuery(e,n,lo.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new St(it),this._s=new $l((a=>cy(a)),uy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function QP(t,e,n,r){return new GP(t,e,n,r)}async function fE(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],u=[];let h=Ge();for(const m of s){l.push(m.batchId);for(const v of m.mutations)h=h.add(v.key)}for(const m of a){u.push(m.batchId);for(const v of m.mutations)h=h.add(v.key)}return n.localDocuments.getDocuments(r,h).next((m=>({hs:m,removedBatchIds:l,addedBatchIds:u})))}))}))}function ZP(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(u,h,m,v){const w=m.batch,x=w.keys();let I=oe.resolve();return x.forEach((C=>{I=I.next((()=>v.getEntry(h,C))).next((E=>{const A=m.docVersions.get(C);lt(A!==null),E.version.compareTo(A)<0&&(w.applyToRemoteDocument(E,m),E.isValidDocument()&&(E.setReadTime(m.commitVersion),v.addEntry(E)))}))})),I.next((()=>u.mutationQueue.removeMutationBatch(h,w)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=Ge();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function pE(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function JP(t,e){const n=Le(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach(((v,w)=>{const x=s.get(w);if(!x)return;u.push(n.Ur.removeMatchingKeys(a,v.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(a,v.addedDocuments,w))));let I=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?I=I.withResumeToken(wn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,r)),s=s.insert(w,I),(function(E,A,j){return E.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(x,I,v)&&u.push(n.Ur.updateTargetData(a,I))}));let h=si(),m=Ge();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))})),u.push(YP(a,l,e.documentUpdates).next((v=>{h=v.Ps,m=v.Is}))),!r.isEqual(Oe.min())){const v=n.Ur.getLastRemoteSnapshotVersion(a).next((w=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));u.push(v)}return oe.waitFor(u).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,h,m))).next((()=>h))})).then((a=>(n.os=s,a)))}function YP(t,e,n){let r=Ge(),s=Ge();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=si();return n.forEach(((u,h)=>{const m=a.get(u);h.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(Oe.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):we("LocalStore","Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",h.version)})),{Ps:l,Is:s}}))}function XP(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function eD(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Ur.getTargetData(r,e).next((a=>a?(s=a,oe.resolve(s)):n.Ur.allocateTargetId(r).next((l=>(s=new to(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function vg(t,e,n){const r=Le(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Au(l))throw l;we("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Bw(t,e,n){const r=Le(t);let s=Oe.min(),a=Ge();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,m,v){const w=Le(h),x=w._s.get(v);return x!==void 0?oe.resolve(w.os.get(x)):w.Ur.getTargetData(m,v)})(r,l,xs(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,u.targetId).next((h=>{a=h}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,n?s:Oe.min(),n?a:Ge()))).next((u=>(tD(r,W2(e),u),{documents:u,Ts:a})))))}function tD(t,e,n){let r=t.us.get(e)||Oe.min();n.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class Ww{constructor(){this.activeTargetIds=Z2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nD{constructor(){this.so=new Ww,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ww,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function Om(){return ch===null?ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class oD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,l){const u=Om(),h=this.xo(n,r.toUriEncodedString());we("RestConnection",`Sending RPC '${n}' ${u}:`,h,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,l),this.No(n,h,m,s).then((v=>(we("RestConnection",`Received RPC '${n}' ${u}: `,v),v)),(v=>{throw Tl("RestConnection",`RPC '${n}' ${u} failed with error: `,v,"url: ",h,"request:",s),v}))}Lo(n,r,s,a,l,u){return this.Mo(n,r,s,a,l)}Oo(n,r,s){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zl})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,l)=>n[l]=a)),s&&s.headers.forEach(((a,l)=>n[l]=a))}xo(n,r){const s=sD[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=Om();return new Promise(((l,u)=>{const h=new Ck;h.setWithCredentials(!0),h.listenOnce(Ak.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Ah.NO_ERROR:const v=h.getResponseJson();we(Cn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),l(v);break;case Ah.TIMEOUT:we(Cn,`RPC '${e}' ${a} timed out`),u(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Ah.HTTP_ERROR:const w=h.getStatus();if(we(Cn,`RPC '${e}' ${a} failed with status:`,w,"response text:",h.getResponseText()),w>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const I=x==null?void 0:x.error;if(I&&I.status&&I.message){const C=(function(A){const j=A.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(j)>=0?j:te.UNKNOWN})(I.status);u(new pe(C,I.message))}else u(new pe(te.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new pe(te.UNAVAILABLE,"Connection failed."));break;default:je()}}finally{we(Cn,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(s);we(Cn,`RPC '${e}' ${a} sending request:`,s),h.send(n,"POST",m,r,15)}))}Bo(e,n,r){const s=Om(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Pk(),u=Rk(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const v=a.join("");we(Cn,`Creating RPC '${e}' stream ${s}: ${v}`,h);const w=l.createWebChannel(v,h);let x=!1,I=!1;const C=new iD({Io:A=>{I?we(Cn,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(x||(we(Cn,`Opening RPC '${e}' stream ${s} transport.`),w.open(),x=!0),we(Cn,`RPC '${e}' stream ${s} sending:`,A),w.send(A))},To:()=>w.close()}),E=(A,j,W)=>{A.listen(j,(z=>{try{W(z)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return E(w,Oc.EventType.OPEN,(()=>{I||(we(Cn,`RPC '${e}' stream ${s} transport opened.`),C.yo())})),E(w,Oc.EventType.CLOSE,(()=>{I||(I=!0,we(Cn,`RPC '${e}' stream ${s} transport closed`),C.So())})),E(w,Oc.EventType.ERROR,(A=>{I||(I=!0,Tl(Cn,`RPC '${e}' stream ${s} transport errored:`,A),C.So(new pe(te.UNAVAILABLE,"The operation could not be completed")))})),E(w,Oc.EventType.MESSAGE,(A=>{var j;if(!I){const W=A.data[0];lt(!!W);const z=W,Z=z.error||((j=z[0])===null||j===void 0?void 0:j.error);if(Z){we(Cn,`RPC '${e}' stream ${s} received error:`,Z);const K=Z.status;let ne=(function(N){const M=qt[N];if(M!==void 0)return rE(M)})(K),R=Z.message;ne===void 0&&(ne=te.INTERNAL,R="Unknown error status: "+K+" with message "+Z.message),I=!0,C.So(new pe(ne,R)),w.close()}else we(Cn,`RPC '${e}' stream ${s} received:`,W),C.bo(W)}})),E(u,Nk.STAT_EVENT,(A=>{A.stat===lg.PROXY?we(Cn,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===lg.NOPROXY&&we(Cn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.wo()}),0),C}}function Lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t){return new gP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,n,r,s,a,l,u,h){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new mE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(ri(n.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===n&&this.P_(r,s)}),(r=>{e((()=>{const s=new pe(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return we("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aD extends gE{constructor(e,n,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=_P(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Oe.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Oe.min():l.readTime?ks(l.readTime):Oe.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=yg(this.serializer),n.addTarget=(function(a,l){let u;const h=l.target;if(u=hg(h)?{documents:xP(a,h)}:{query:kP(a,h)._t},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=oE(a,l.resumeToken);const m=pg(a,l.expectedCount);m!==null&&(u.expectedCount=m)}else if(l.snapshotVersion.compareTo(Oe.min())>0){u.readTime=Xh(a,l.snapshotVersion.toTimestamp());const m=pg(a,l.expectedCount);m!==null&&(u.expectedCount=m)}return u})(this.serializer,e);const r=TP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=yg(this.serializer),n.removeTarget=e,this.a_(n)}}class lD extends gE{constructor(e,n,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return lt(!!e.streamToken),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=bP(e.writeResults,e.commitTime),r=ks(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=yg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>wP(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Mo(e,mg(n,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new pe(te.UNKNOWN,a.toString())}))}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Lo(e,mg(n,r),s,l,u,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(te.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class uD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ri(n),this.D_=!1):we("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((l=>{r.enqueueAndForget((async()=>{ha(this)&&(we("RemoteStore","Restarting streams for network reachability change."),await(async function(h){const m=Le(h);m.L_.add(4),await Pu(m),m.q_.set("Unknown"),m.L_.delete(4),await Af(m)})(this))}))})),this.q_=new uD(r,s)}}async function Af(t){if(ha(t))for(const e of t.B_)await e(!0)}async function Pu(t){for(const e of t.B_)await e(!1)}function yE(t,e){const n=Le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xy(n)?by(n):Bl(n).r_()&&wy(n,e))}function _y(t,e){const n=Le(t),r=Bl(n);n.N_.delete(e),r.r_()&&vE(n,e),n.N_.size===0&&(r.r_()?r.o_():ha(n)&&n.q_.set("Unknown"))}function wy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bl(t).A_(e)}function vE(t,e){t.Q_.xe(e),Bl(t).R_(e)}function by(t){t.Q_=new hP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Bl(t).start(),t.q_.v_()}function xy(t){return ha(t)&&!Bl(t).n_()&&t.N_.size>0}function ha(t){return Le(t).L_.size===0}function _E(t){t.Q_=void 0}async function hD(t){t.q_.set("Online")}async function fD(t){t.N_.forEach(((e,n)=>{wy(t,e)}))}async function pD(t,e){_E(t),xy(t)?(t.q_.M_(e),by(t)):t.q_.set("Unknown")}async function mD(t,e,n){if(t.q_.set("Online"),e instanceof iE&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const u of a.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.N_.delete(u),s.Q_.removeTarget(u))})(t,e)}catch(r){we("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ef(t,r)}else if(e instanceof Ph?t.Q_.Ke(e):e instanceof sE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Oe.min()))try{const r=await pE(t.localStore);n.compareTo(r)>=0&&await(function(a,l){const u=a.Q_.rt(l);return u.targetChanges.forEach(((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=a.N_.get(m);v&&a.N_.set(m,v.withResumeToken(h.resumeToken,l))}})),u.targetMismatches.forEach(((h,m)=>{const v=a.N_.get(h);if(!v)return;a.N_.set(h,v.withResumeToken(wn.EMPTY_BYTE_STRING,v.snapshotVersion)),vE(a,h);const w=new to(v.target,h,m,v.sequenceNumber);wy(a,w)})),a.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){we("RemoteStore","Failed to raise snapshot:",r),await ef(t,r)}}async function ef(t,e,n){if(!Au(e))throw e;t.L_.add(1),await Pu(t),t.q_.set("Offline"),n||(n=()=>pE(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{we("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Af(t)}))}function wE(t,e){return e().catch((n=>ef(t,n,e)))}async function Nf(t){const e=Le(t),n=uo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;gD(e);)try{const s=await XP(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,yD(e,s)}catch(s){await ef(e,s)}bE(e)&&xE(e)}function gD(t){return ha(t)&&t.O_.length<10}function yD(t,e){t.O_.push(e);const n=uo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function bE(t){return ha(t)&&!uo(t).n_()&&t.O_.length>0}function xE(t){uo(t).start()}async function vD(t){uo(t).p_()}async function _D(t){const e=uo(t);for(const n of t.O_)e.m_(n.mutations)}async function wD(t,e,n){const r=t.O_.shift(),s=fy.from(r,e,n);await wE(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Nf(t)}async function bD(t,e){e&&uo(t).V_&&await(async function(r,s){if((function(l){return cP(l)&&l!==te.ABORTED})(s.code)){const a=r.O_.shift();uo(r).s_(),await wE(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Nf(r)}})(t,e),bE(t)&&xE(t)}async function Hw(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const r=ha(n);n.L_.add(3),await Pu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Af(n)}async function xD(t,e){const n=Le(t);e?(n.L_.delete(2),await Af(n)):e||(n.L_.add(2),await Pu(n),n.q_.set("Unknown"))}function Bl(t){return t.K_||(t.K_=(function(n,r,s){const a=Le(n);return a.w_(),new aD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Eo:hD.bind(null,t),Ro:fD.bind(null,t),mo:pD.bind(null,t),d_:mD.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),xy(t)?by(t):t.q_.set("Unknown")):(await t.K_.stop(),_E(t))}))),t.K_}function uo(t){return t.U_||(t.U_=(function(n,r,s){const a=Le(n);return a.w_(),new lD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:vD.bind(null,t),mo:bD.bind(null,t),f_:_D.bind(null,t),g_:wD.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Nf(t)):(await t.U_.stop(),t.O_.length>0&&(we("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const l=Date.now()+r,u=new ky(e,n,l,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ey(t,e){if(ri("AsyncQueue",`${e}: ${t}`),Au(t))return new pe(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Te.comparator(n.key,r.key):(n,r)=>Te.comparator(n.key,r.key),this.keyedMap=Lc(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new hl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof hl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new hl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.W_=new St(Te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):je():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Nl{constructor(e,n,r,s,a,l,u,h,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,s,a){const l=[];return n.forEach((u=>{l.push({type:0,doc:u})})),new Nl(e,n,hl.emptySet(n),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class ED{constructor(){this.queries=Gw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Le(n),a=s.queries;s.queries=Gw(),a.forEach(((l,u)=>{for(const h of u.j_)h.onError(r)}))})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function Gw(){return new $l((t=>qk(t)),xf)}async function kE(t,e){const n=Le(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new kD,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=Ey(l,`Initialization of query '${el(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Ty(n)}async function EE(t,e){const n=Le(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const l=a.j_.indexOf(e);l>=0&&(a.j_.splice(l,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TD(t,e){const n=Le(t);let r=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const u of l.j_)u.X_(s)&&(r=!0);l.z_=s}}r&&Ty(n)}function ID(t,e,n){const r=Le(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function Ty(t){t.Y_.forEach((e=>{e.next()}))}var _g,Qw;(Qw=_g||(_g={})).ea="default",Qw.Cache="cache";class TE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_g.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.key=e}}class SE{constructor(e){this.key=e}}class SD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ge(),this.mutatedKeys=Ge(),this.Aa=Hk(e),this.Ra=new hl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Kw,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,w)=>{const x=s.get(v),I=kf(this.query,w)?w:null,C=!!x&&this.mutatedKeys.has(x.key),E=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let A=!1;x&&I?x.data.isEqual(I.data)?C!==E&&(r.track({type:3,doc:I}),A=!0):this.ga(x,I)||(r.track({type:2,doc:I}),A=!0,(h&&this.Aa(I,h)>0||m&&this.Aa(I,m)<0)&&(u=!0)):!x&&I?(r.track({type:0,doc:I}),A=!0):x&&!I&&(r.track({type:1,doc:x}),A=!0,(h||m)&&(u=!0)),A&&(I?(l=l.add(I),a=E?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{Ra:l,fa:r,ns:u,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((v,w)=>(function(I,C){const E=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je()}};return E(I)-E(C)})(v.type,w.type)||this.Aa(v.doc,w.doc))),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],h=this.da.size===0&&this.current&&!s?1:0,m=h!==this.Ea;return this.Ea=h,l.length!==0||m?{snapshot:new Nl(this.query,e.Ra,a,l,e.mutatedKeys,h===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Kw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ge(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new SE(r))})),this.da.forEach((r=>{e.has(r)||n.push(new IE(r))})),n}ba(e){this.Ta=e.Ts,this.da=Ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Nl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class CD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AD{constructor(e){this.key=e,this.va=!1}}class ND{constructor(e,n,r,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new $l((u=>qk(u)),xf),this.Ma=new Map,this.xa=new Set,this.Oa=new St(Te.comparator),this.Na=new Map,this.La=new gy,this.Ba={},this.ka=new Map,this.qa=Al.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function RD(t,e,n=!0){const r=DE(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await CE(r,e,n,!0),s}async function PD(t,e){const n=DE(t);await CE(n,e,!0,!1)}async function CE(t,e,n,r){const s=await eD(t.localStore,xs(e)),a=s.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await DD(t,e,a,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&yE(t.remoteStore,s),u}async function DD(t,e,n,r,s){t.Ka=(w,x,I)=>(async function(E,A,j,W){let z=A.view.ma(j);z.ns&&(z=await Bw(E.localStore,A.query,!1).then((({documents:R})=>A.view.ma(R,z))));const Z=W&&W.targetChanges.get(A.targetId),K=W&&W.targetMismatches.get(A.targetId)!=null,ne=A.view.applyChanges(z,E.isPrimaryClient,Z,K);return Jw(E,A.targetId,ne.wa),ne.snapshot})(t,w,x,I);const a=await Bw(t.localStore,e,!0),l=new SD(e,a.Ts),u=l.ma(a.documents),h=Ru.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),m=l.applyChanges(u,t.isPrimaryClient,h);Jw(t,n,m.wa);const v=new CD(e,n,l);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function jD(t,e,n){const r=Le(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter((l=>!xf(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await vg(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_y(r.remoteStore,s.targetId),wg(r,s.targetId)})).catch(Cu)):(wg(r,s.targetId),await vg(r.localStore,s.targetId,!0))}async function OD(t,e){const n=Le(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_y(n.remoteStore,r.targetId))}async function LD(t,e,n){const r=BD(t);try{const s=await(function(l,u){const h=Le(l),m=_t.now(),v=u.reduce(((I,C)=>I.add(C.key)),Ge());let w,x;return h.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let C=si(),E=Ge();return h.cs.getEntries(I,v).next((A=>{C=A,C.forEach(((j,W)=>{W.isValidDocument()||(E=E.add(j))}))})).next((()=>h.localDocuments.getOverlayedDocuments(I,C))).next((A=>{w=A;const j=[];for(const W of u){const z=sP(W,w.get(W.key).overlayedDocument);z!=null&&j.push(new mo(W.key,z,Mk(z.value.mapValue),$n.exists(!0)))}return h.mutationQueue.addMutationBatch(I,m,j,u)})).next((A=>{x=A;const j=A.applyToLocalDocumentSet(w,E);return h.documentOverlayCache.saveOverlays(I,A.batchId,j)}))})).then((()=>({batchId:x.batchId,changes:Gk(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,h){let m=l.Ba[l.currentUser.toKey()];m||(m=new St(it)),m=m.insert(u,h),l.Ba[l.currentUser.toKey()]=m})(r,s.batchId,n),await Du(r,s.changes),await Nf(r.remoteStore)}catch(s){const a=Ey(s,"Failed to persist write");n.reject(a)}}async function AE(t,e){const n=Le(t);try{const r=await JP(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=n.Na.get(a);l&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?lt(l.va):s.removedDocuments.size>0&&(lt(l.va),l.va=!1))})),await Du(n,r,e)}catch(r){await Cu(r)}}function Zw(t,e,n){const r=Le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach(((a,l)=>{const u=l.view.Z_(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const h=Le(l);h.onlineState=u;let m=!1;h.queries.forEach(((v,w)=>{for(const x of w.j_)x.Z_(u)&&(m=!0)})),m&&Ty(h)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MD(t,e,n){const r=Le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let l=new St(Te.comparator);l=l.insert(a,Nn.newNoDocument(a,Oe.min()));const u=Ge().add(a),h=new Sf(Oe.min(),new Map,new St(it),l,u);await AE(r,h),r.Oa=r.Oa.remove(a),r.Na.delete(e),Iy(r)}else await vg(r.localStore,e,!1).then((()=>wg(r,e,n))).catch(Cu)}async function VD(t,e){const n=Le(t),r=e.batch.batchId;try{const s=await ZP(n.localStore,e);RE(n,r,null),NE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Du(n,s)}catch(s){await Cu(s)}}async function FD(t,e,n){const r=Le(t);try{const s=await(function(l,u){const h=Le(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return h.mutationQueue.lookupMutationBatch(m,u).next((w=>(lt(w!==null),v=w.keys(),h.mutationQueue.removeMutationBatch(m,w)))).next((()=>h.mutationQueue.performConsistencyCheck(m))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(m,v,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>h.localDocuments.getDocuments(m,v)))}))})(r.localStore,e);RE(r,e,n),NE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Du(r,s)}catch(s){await Cu(s)}}function NE(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function RE(t,e,n){const r=Le(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function wg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||PE(t,r)}))}function PE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_y(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Iy(t))}function Jw(t,e,n){for(const r of n)r instanceof IE?(t.La.addReference(r.key,e),zD(t,r)):r instanceof SE?(we("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||PE(t,r.key)):je()}function zD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(we("SyncEngine","New document in limbo: "+n),t.xa.add(r),Iy(t))}function Iy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Te(vt.fromString(e)),r=t.qa.next();t.Na.set(r,new AD(n)),t.Oa=t.Oa.insert(n,r),yE(t.remoteStore,new to(xs(dy(n.path)),r,"TargetPurposeLimboResolution",iy.oe))}}async function Du(t,e,n){const r=Le(t),s=[],a=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((u,h)=>{l.push(r.Ka(h,e,n).then((m=>{var v;if((m||n)&&r.isPrimaryClient){const w=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(h.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(h.targetId,w?"current":"not-current")}if(m){s.push(m);const w=vy.Wi(h.targetId,m);a.push(w)}})))})),await Promise.all(l),r.Ca.d_(s),await(async function(h,m){const v=Le(h);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>oe.forEach(m,(x=>oe.forEach(x.$i,(I=>v.persistence.referenceDelegate.addReference(w,x.targetId,I))).next((()=>oe.forEach(x.Ui,(I=>v.persistence.referenceDelegate.removeReference(w,x.targetId,I)))))))))}catch(w){if(!Au(w))throw w;we("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const x=w.targetId;if(!w.fromCache){const I=v.os.get(x),C=I.snapshotVersion,E=I.withLastLimboFreeSnapshotVersion(C);v.os=v.os.insert(x,E)}}})(r.localStore,a))}async function UD(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){we("SyncEngine","User change. New user:",e.toKey());const r=await fE(n.localStore,e);n.currentUser=e,(function(a,l){a.ka.forEach((u=>{u.forEach((h=>{h.reject(new pe(te.CANCELLED,l))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Du(n,r.hs)}}function $D(t,e){const n=Le(t),r=n.Na.get(e);if(r&&r.va)return Ge().add(r.key);{let s=Ge();const a=n.Ma.get(e);if(!a)return s;for(const l of a){const u=n.Fa.get(l);s=s.unionWith(u.view.Va)}return s}}function DE(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$D.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MD.bind(null,e),e.Ca.d_=TD.bind(null,e.eventManager),e.Ca.$a=ID.bind(null,e.eventManager),e}function BD(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FD.bind(null,e),e}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return QP(this.persistence,new KP,e.initialUser,this.serializer)}Ga(e){return new WP(yy.Zr,this.serializer)}Wa(e){return new nD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class bg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UD.bind(null,this.syncEngine),await xD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ED})()}createDatastore(e){const n=Cf(e.databaseInfo.databaseId),r=(function(a){return new oD(a)})(e.databaseInfo);return(function(a,l,u,h){return new cD(a,l,u,h)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,a,l,u){return new dD(r,s,a,l,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>Zw(this.syncEngine,n,0)),(function(){return qw.D()?new qw:new rD})())}createSyncEngine(e,n){return(function(s,a,l,u,h,m,v){const w=new ND(s,a,l,u,h,m);return v&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=Le(s);we("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Pu(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bg.provider={build:()=>new bg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=An.UNAUTHENTICATED,this.clientId=jk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{we("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(we("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ey(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Mm(t,e){t.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await fE(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Yw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qD(t);we("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Hw(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Hw(e.remoteStore,s))),t._onlineComponents=e}async function qD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Tl("Error using user provided cache. Falling back to memory cache: "+n),await Mm(t,new tf)}}else we("FirestoreClient","Using default OfflineComponentProvider"),await Mm(t,new tf);return t._offlineComponents}async function OE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we("FirestoreClient","Using user provided OnlineComponentProvider"),await Yw(t,t._uninitializedComponentsProvider._online)):(we("FirestoreClient","Using default OnlineComponentProvider"),await Yw(t,new bg))),t._onlineComponents}function HD(t){return OE(t).then((e=>e.syncEngine))}async function xg(t){const e=await OE(t),n=e.eventManager;return n.onListen=RD.bind(null,e.syncEngine),n.onUnlisten=jD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OD.bind(null,e.syncEngine),n}function KD(t,e,n={}){const r=new oo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,u,h,m){const v=new jE({next:x=>{v.Za(),l.enqueueAndForget((()=>EE(a,w))),x.fromCache&&h.source==="server"?m.reject(new pe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),w=new TE(u,v,{includeMetadataChanges:!0,_a:!0});return kE(a,w)})(await xg(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t,e,n){if(!n)throw new pe(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GD(t,e,n,r){if(e===!0&&r===!0)throw new pe(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eb(t){if(!Te.isDocumentKey(t))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tb(t){if(Te.isDocumentKey(t))throw new pe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":je()}function yr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rf(t);throw new pe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nb(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new h2;switch(r.type){case"firstParty":return new g2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Xw.get(n);r&&(we("ComponentProvider","Removing Datastore"),Xw.delete(n),r.terminate())})(this),Promise.resolve()}}function QD(t,e,n,r={}){var s;const a=(t=yr(t,Pf))._getSettings(),l=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&Tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=An.MOCK_USER;else{u=xC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new An(m)}t._authCredentials=new f2(new Dk(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ci(this.firestore,e,this._query)}}class Bn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class ao extends ci{constructor(e,n,r){super(e,n,dy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Te(e))}withConverter(e){return new ao(this.firestore,e,this._path)}}function ct(t,e,...n){if(t=It(t),ME("collection","path",e),t instanceof Pf){const r=vt.fromString(e,...n);return tb(r),new ao(t,null,r)}{if(!(t instanceof Bn||t instanceof ao))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(vt.fromString(e,...n));return tb(r),new ao(t.firestore,null,r)}}function sr(t,e,...n){if(t=It(t),arguments.length===1&&(e=jk.newId()),ME("doc","path",e),t instanceof Pf){const r=vt.fromString(e,...n);return eb(r),new Bn(t,null,new Te(r))}{if(!(t instanceof Bn||t instanceof ao))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(vt.fromString(e,...n));return eb(r),new Bn(t.firestore,t instanceof ao?t.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new mE(this,"async_queue_retry"),this.Vu=()=>{const r=Lm();r&&we("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Lm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Lm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new oo;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Au(e))throw e;we("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u})(r);throw ri("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=ky.createAndSchedule(this,e,n,r,(a=>this.yu(a)));return this.Tu.push(s),s}fu(){this.Eu&&je()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function sb(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class ii extends Pf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new rb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rb(e),this._firestoreClient=void 0,await e}}}function ZD(t,e){const n=typeof t=="object"?t:$x(),r=typeof t=="string"?t:"(default)",s=Kg(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=wC("firestore");a&&QD(s,...a)}return s}function Df(t){if(t._terminated)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JD(t),t._firestoreClient}function JD(t){var e,n,r;const s=t._freezeSettings(),a=(function(u,h,m,v){return new A2(u,h,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,LE(v.experimentalLongPollingOptions),v.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new WD(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rl(wn.fromBase64String(e))}catch(n){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rl(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=/^__.*__$/;class XD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nu(e,this.data,n,this.fieldTransforms)}}class VE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new mo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je()}}class Ay{constructor(e,n,r,s,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ay(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(FE(this.Cu)&&YD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ej{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cf(e)}Qu(e,n,r,s=!1){return new Ay({Cu:e,methodName:n,qu:r,path:vn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ou(t){const e=t._freezeSettings(),n=Cf(t._databaseId);return new ej(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ny(t,e,n,r,s,a={}){const l=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);Py("Data must be an object, but it was:",l,r);const u=$E(r,l);let h,m;if(a.merge)h=new gr(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const x=kg(e,w,n);if(!l.contains(x))throw new pe(te.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);WE(v,x)||v.push(x)}h=new gr(v),m=l.fieldTransforms.filter((w=>h.covers(w.field)))}else h=null,m=l.fieldTransforms;return new XD(new nr(u),h,m)}class Of extends jf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Of}}class Ry extends jf{_toFieldTransform(e){return new eP(e.path,new du)}isEqual(e){return e instanceof Ry}}function zE(t,e,n,r){const s=t.Qu(1,e,n);Py("Data must be an object, but it was:",s,r);const a=[],l=nr.empty();da(r,((h,m)=>{const v=Dy(e,h,n);m=It(m);const w=s.Nu(v);if(m instanceof Of)a.push(v);else{const x=Lu(m,w);x!=null&&(a.push(v),l.set(v,x))}}));const u=new gr(a);return new VE(l,u,s.fieldTransforms)}function UE(t,e,n,r,s,a){const l=t.Qu(1,e,n),u=[kg(e,r,n)],h=[s];if(a.length%2!=0)throw new pe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)u.push(kg(e,a[x])),h.push(a[x+1]);const m=[],v=nr.empty();for(let x=u.length-1;x>=0;--x)if(!WE(m,u[x])){const I=u[x];let C=h[x];C=It(C);const E=l.Nu(I);if(C instanceof Of)m.push(I);else{const A=Lu(C,E);A!=null&&(m.push(I),v.set(I,A))}}const w=new gr(m);return new VE(v,w,l.fieldTransforms)}function tj(t,e,n,r=!1){return Lu(n,t.Qu(r?4:3,e))}function Lu(t,e){if(BE(t=It(t)))return Py("Unsupported field value:",e,t),$E(t,e);if(t instanceof jf)return(function(r,s){if(!FE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const u of r){let h=Lu(u,s.Lu(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,s){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return J2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=_t.fromDate(r);return{timestampValue:Xh(s.serializer,a)}}if(r instanceof _t){const a=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xh(s.serializer,a)}}if(r instanceof Sy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rl)return{bytesValue:oE(s.serializer,r._byteString)};if(r instanceof Bn){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:my(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cy)return(function(l,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw u.Bu("VectorValues must only contain numeric values.");return hy(u.serializer,h)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${Rf(r)}`)})(t,e)}function $E(t,e){const n={};return Ok(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(t,((r,s)=>{const a=Lu(s,e.Mu(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function BE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Sy||t instanceof Rl||t instanceof Bn||t instanceof jf||t instanceof Cy)}function Py(t,e,n){if(!BE(n)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(n)){const r=Rf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function kg(t,e,n){if((e=It(e))instanceof ju)return e._internalPath;if(typeof e=="string")return Dy(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const nj=new RegExp("[~\\*/\\[\\]]");function Dy(t,e,n){if(e.search(nj)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ju(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nf(t,e,n,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${r}`),l&&(h+=` in document ${s}`),h+=")"),new pe(te.INVALID_ARGUMENT,u+t+h)}function WE(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rj extends qE{data(){return super.data()}}function jy(t,e){return typeof e=="string"?Dy(t,e):e instanceof ju?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Oy{}class Ly extends Oy{}function go(t,e,...n){let r=[];e instanceof Oy&&r.push(e),r=r.concat(n),(function(a){const l=a.filter((h=>h instanceof Vy)).length,u=a.filter((h=>h instanceof My)).length;if(l>1||l>0&&u>0)throw new pe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class My extends Ly{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new My(e,n,r)}_apply(e){const n=this._parse(e);return KE(e._query,n),new ci(e.firestore,e.converter,fg(e._query,n))}_parse(e){const n=Ou(e.firestore);return(function(a,l,u,h,m,v,w){let x;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){ob(w,v);const I=[];for(const C of w)I.push(ib(h,a,C));x={arrayValue:{values:I}}}else x=ib(h,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||ob(w,v),x=tj(u,l,w,v==="in"||v==="not-in");return Ht.create(m,v,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Vy extends Oy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vy(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ns.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let l=s;const u=a.getFlattenedFilters();for(const h of u)KE(l,h),l=fg(l,h)})(e._query,n),new ci(e.firestore,e.converter,fg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fy extends Ly{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fy(e,n)}_apply(e){const n=(function(s,a,l){if(s.startAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uu(a,l)})(e._query,this._field,this._direction);return new ci(e.firestore,e.converter,(function(s,a){const l=s.explicitOrderBy.concat([a]);return new Ul(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function Lf(t,e="asc"){const n=e,r=jy("orderBy",t);return Fy._create(r,n)}class zy extends Ly{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zy(e,n,r)}_apply(e){return new ci(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}}function sj(t){return zy._create("limit",t,"F")}function ib(t,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new pe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wk(e)&&n.indexOf("/")!==-1)throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(vt.fromString(n));if(!Te.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iw(t,new Te(r))}if(n instanceof Bn)return Iw(t,n._key);throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rf(n)}.`)}function ob(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KE(t,e){const n=(function(s,a){for(const l of s)for(const u of l.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ij{convertValue(e,n="none"){switch(ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(la(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw je()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return da(e,((s,a)=>{r[s]=this.convertValue(a,n)})),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((l=>Mt(l.doubleValue)));return new Cy(a)}convertGeoPoint(e){return new Sy(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ay(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const n=co(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=vt.fromString(e);lt(hE(r));const s=new lu(r.get(1),r.get(3)),a=new Te(r.popFirst(5));return s.isEqual(n)||ri(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class GE extends qE{constructor(e,n,r,s,a,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Dh extends GE{data(e={}){return super.data(e)}}class QE{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Vc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Dh(this._firestore,this._userDataWriter,r.key,r,new Vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const h=new Dh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Vc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const h=new Dh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Vc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return u.type!==0&&(m=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),v=l.indexOf(u.doc.key)),{type:oj(u.type),doc:h,oldIndex:m,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je()}}class $y extends ij{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,n)}}function Gs(t){t=yr(t,ci);const e=yr(t.firestore,ii),n=Df(e),r=new $y(e);return HE(t._query),KD(n,t._query).then((s=>new QE(e,r,t,s)))}function aj(t,e,n){t=yr(t,Bn);const r=yr(t.firestore,ii),s=Uy(t.converter,e,n);return Vu(r,[Ny(Ou(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,$n.none())])}function Wl(t,e,n,...r){t=yr(t,Bn);const s=yr(t.firestore,ii),a=Ou(s);let l;return l=typeof(e=It(e))=="string"||e instanceof ju?UE(a,"updateDoc",t._key,e,n,r):zE(a,"updateDoc",t._key,e),Vu(s,[l.toMutation(t._key,$n.exists(!0))])}function Mu(t){return Vu(yr(t.firestore,ii),[new If(t._key,$n.none())])}function Pr(t,e){const n=yr(t.firestore,ii),r=sr(t),s=Uy(t.converter,e);return Vu(n,[Ny(Ou(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,$n.exists(!1))]).then((()=>r))}function fa(t,...e){var n,r,s;t=It(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||sb(e[l])||(a=e[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(sb(e[l])){const w=e[l];e[l]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[l+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let h,m,v;if(t instanceof Bn)m=yr(t.firestore,ii),v=dy(t._key.path),h={next:w=>{e[l]&&e[l](lj(m,t,w))},error:e[l+1],complete:e[l+2]};else{const w=yr(t,ci);m=yr(w.firestore,ii),v=w._query;const x=new $y(m);h={next:I=>{e[l]&&e[l](new QE(m,x,w,I))},error:e[l+1],complete:e[l+2]},HE(t._query)}return(function(x,I,C,E){const A=new jE(E),j=new TE(I,A,C);return x.asyncQueue.enqueueAndForget((async()=>kE(await xg(x),j))),()=>{A.Za(),x.asyncQueue.enqueueAndForget((async()=>EE(await xg(x),j)))}})(Df(m),v,u,h)}function Vu(t,e){return(function(r,s){const a=new oo;return r.asyncQueue.enqueueAndForget((async()=>LD(await HD(r),s,a))),a.promise})(Df(t),e)}function lj(t,e,n){const r=n.docs.get(e._key),s=new $y(t);return new GE(t,s,e._key,r,new Vc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ou(e)}set(e,n,r){this._verifyNotCommitted();const s=Vm(e,this._firestore),a=Uy(s.converter,n,r),l=Ny(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,$n.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=Vm(e,this._firestore);let l;return l=typeof(n=It(n))=="string"||n instanceof ju?UE(this._dataReader,"WriteBatch.update",a._key,n,r,s):zE(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(l.toMutation(a._key,$n.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Vm(e,this._firestore);return this._mutations=this._mutations.concat(new If(n._key,$n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vm(t,e){if((t=It(t)).firestore!==e)throw new pe(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Is(){return new Ry("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){return Df(t=yr(t,ii)),new cj(t,(e=>Vu(t,e)))}(function(e,n=!0){(function(s){zl=s})(Vl),kl(new ia("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),u=new ii(new p2(r.getProvider("auth-internal")),new v2(r.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(m.options.projectId,v)})(l,s),l);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),io(bw,"4.7.3",e),io(bw,"4.7.3","esm2017")})();const dj={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function hj(){if(typeof window<"u"&&window.GLOBAL_FIREBASE_CONFIG&&window.GLOBAL_FIREBASE_CONFIG.apiKey)return window.GLOBAL_FIREBASE_CONFIG;try{const t=dj;if(t&&t.VITE_FIREBASE_API_KEY)return{apiKey:t.VITE_FIREBASE_API_KEY,authDomain:t.VITE_FIREBASE_AUTH_DOMAIN,projectId:t.VITE_FIREBASE_PROJECT_ID,storageBucket:t.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:t.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:t.VITE_FIREBASE_APP_ID,measurementId:t.VITE_FIREBASE_MEASUREMENT_ID}}catch{}if(typeof __firebase_config<"u")try{return typeof __firebase_config=="object"?__firebase_config:JSON.parse(__firebase_config)}catch(t){return console.error("[Firebase] Config parse failed (legacy):",t),null}return console.error("[Firebase] All config sources failed. Check index.html injection."),null}const Bi=hj();if(!(Bi!=null&&Bi.apiKey)||!(Bi!=null&&Bi.projectId)){const t="[Firebase] Configuration is missing required fields (apiKey, projectId). Application cannot start.";throw console.error(t,Bi),new Error(t)}let Eg;Z_().length>0?(Eg=Z_()[0],console.log("[Firebase] Using existing app instance.")):(Eg=Ux(Bi),console.log("[Firebase] Initialized new app instance."));const ZE=Eg,Qe=u2(ZE),Fe=ZD(ZE),fj=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[s,a]=O.useState(!1),[l,u]=O.useState(null),h=async v=>{v.preventDefault(),u(null),a(!0);try{await mk(Qe,t,n)}catch(w){let x="Login failed.";switch(w.code){case"auth/invalid-email":x="Invalid email format.";break;case"auth/user-disabled":x="User disabled.";break;case"auth/user-not-found":x="User not found.";break;case"auth/wrong-password":x="Wrong password.";break;case"auth/too-many-requests":x="Too many requests. Try again later.";break;case"auth/network-request-failed":x="Network error.";break}u(x)}finally{a(!1)}},m=async()=>{u(null),a(!0);try{await UN(Qe)}catch(v){u("Guest login failed: "+v.message)}finally{a(!1)}};return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-premium-gradient p-4 antialiased",children:p.jsxs("div",{className:"max-w-md w-full p-6 sm:p-8 bg-white/70 dark:bg-gray-800/60 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 rounded-[2rem] shadow-2xl transition-all duration-300",children:[p.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[p.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-3xl shadow-lg mb-6 animate-float",children:p.jsx("img",{src:"/images/web-app-manifest-512x512.png",alt:"Logo",className:"h-12 w-12"})}),p.jsxs("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:["Task",p.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:""})]}),p.jsxs("form",{onSubmit:h,className:"space-y-5 sm:space-y-6",children:[l&&p.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium animate-in fade-in slide-in-from-top-4 duration-300 shadow-sm",children:l}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"login-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Email"}),p.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:v=>e(v.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"mail@example.com"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"login-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Password"}),p.jsx("input",{id:"login-password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:v=>r(v.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:""})]}),p.jsx("button",{type:"submit",disabled:s,className:"btn-premium w-full py-4 text-lg shadow-lg hover:shadow-xl active:scale-[0.98] transition-all",children:s?"...":""})]}),p.jsxs("div",{className:"mt-8",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200/50 dark:border-gray-700/50"})}),p.jsx("div",{className:"relative flex justify-center text-xs",children:p.jsx("span",{className:"px-3 bg-transparent text-gray-400 uppercase tracking-widest font-bold",children:"OR"})})]}),p.jsxs("button",{onClick:m,disabled:s,className:"mt-8 w-full py-3.5 bg-gray-100/50 hover:bg-gray-200/70 active:bg-gray-300 dark:bg-gray-700/30 dark:hover:bg-gray-600/50 dark:active:bg-gray-600 text-gray-700 dark:text-gray-200 font-bold rounded-2xl transition-all active:scale-95 flex items-center justify-center gap-3 border border-transparent hover:border-gray-300 dark:hover:border-gray-600",children:[p.jsx("span",{className:"text-xl",children:""})," "]})]})]})})},ab=t=>{let e;const n=new Set,r=(m,v)=>{const w=typeof m=="function"?m(e):m;if(!Object.is(w,e)){const x=e;e=v??(typeof w!="object"||w===null)?w:Object.assign({},e,w),n.forEach(I=>I(e,x))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>h,subscribe:m=>(n.add(m),()=>n.delete(m))},h=e=t(r,s,u);return u},pj=(t=>t?ab(t):ab),mj=t=>t;function gj(t,e=mj){const n=He.useSyncExternalStore(t.subscribe,He.useCallback(()=>e(t.getState()),[t,e]),He.useCallback(()=>e(t.getInitialState()),[t,e]));return He.useDebugValue(n),n}const lb=t=>{const e=pj(t),n=r=>gj(e,r);return Object.assign(n,e),n},pa=(t=>t?lb(t):lb),yj={success:3e3,info:4e3,error:6e3},uh=new Map,vj=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,11),jh=pa(t=>({toasts:[],addToast:(e,n="info")=>{const r=vj();t(l=>({toasts:[...l.toasts,{id:r,message:e,type:n}]}));const s=yj[n],a=setTimeout(()=>{t(l=>({toasts:l.toasts.filter(u=>u.id!==r)})),uh.delete(r)},s);uh.set(r,a)},removeToast:e=>{const n=uh.get(e);n&&(clearTimeout(n),uh.delete(e)),t(r=>({toasts:r.toasts.filter(s=>s.id!==e)}))}})),Wn={success:t=>jh.getState().addToast(t,"success"),error:t=>jh.getState().addToast(t,"error"),info:t=>jh.getState().addToast(t,"info")};function JE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=JE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _j(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=JE(t))&&(r&&(r+=" "),r+=e);return r}const wj=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},bj=(t,e)=>({classGroupId:t,validator:e}),YE=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),rf="-",cb=[],xj="arbitrary..",kj=t=>{const e=Tj(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return Ej(l);const u=l.split(rf),h=u[0]===""&&u.length>1?1:0;return XE(u,h,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const h=r[l],m=n[l];return h?m?wj(m,h):h:m||cb}return n[l]||cb}}},XE=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],a=n.nextPart.get(s);if(a){const m=XE(t,e+1,a);if(m)return m}const l=n.validators;if(l===null)return;const u=e===0?t.join(rf):t.slice(e).join(rf),h=l.length;for(let m=0;m<h;m++){const v=l[m];if(v.validator(u))return v.classGroupId}},Ej=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?xj+r:void 0})(),Tj=t=>{const{theme:e,classGroups:n}=t;return Ij(n,e)},Ij=(t,e)=>{const n=YE();for(const r in t){const s=t[r];By(s,n,r,e)}return n},By=(t,e,n,r)=>{const s=t.length;for(let a=0;a<s;a++){const l=t[a];Sj(l,e,n,r)}},Sj=(t,e,n,r)=>{if(typeof t=="string"){Cj(t,e,n);return}if(typeof t=="function"){Aj(t,e,n,r);return}Nj(t,e,n,r)},Cj=(t,e,n)=>{const r=t===""?e:eT(e,t);r.classGroupId=n},Aj=(t,e,n,r)=>{if(Rj(t)){By(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(bj(n,t))},Nj=(t,e,n,r)=>{const s=Object.entries(t),a=s.length;for(let l=0;l<a;l++){const[u,h]=s[l];By(h,eT(e,u),n,r)}},eT=(t,e)=>{let n=t;const r=e.split(rf),s=r.length;for(let a=0;a<s;a++){const l=r[a];let u=n.nextPart.get(l);u||(u=YE(),n.nextPart.set(l,u)),n=u}return n},Rj=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,Pj=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(a,l)=>{n[a]=l,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(a){let l=n[a];if(l!==void 0)return l;if((l=r[a])!==void 0)return s(a,l),l},set(a,l){a in n?n[a]=l:s(a,l)}}},Tg="!",ub=":",Dj=[],db=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),jj=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const a=[];let l=0,u=0,h=0,m;const v=s.length;for(let E=0;E<v;E++){const A=s[E];if(l===0&&u===0){if(A===ub){a.push(s.slice(h,E)),h=E+1;continue}if(A==="/"){m=E;continue}}A==="["?l++:A==="]"?l--:A==="("?u++:A===")"&&u--}const w=a.length===0?s:s.slice(h);let x=w,I=!1;w.endsWith(Tg)?(x=w.slice(0,-1),I=!0):w.startsWith(Tg)&&(x=w.slice(1),I=!0);const C=m&&m>h?m-h:void 0;return db(a,I,x,C)};if(e){const s=e+ub,a=r;r=l=>l.startsWith(s)?a(l.slice(s.length)):db(Dj,!1,l,void 0,!0)}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},Oj=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let a=0;a<n.length;a++){const l=n[a],u=l[0]==="[",h=e.has(l);u||h?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},Lj=t=>({cache:Pj(t.cacheSize),parseClassName:jj(t),sortModifiers:Oj(t),...kj(t)}),Mj=/\s+/,Vj=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=e,l=[],u=t.trim().split(Mj);let h="";for(let m=u.length-1;m>=0;m-=1){const v=u[m],{isExternal:w,modifiers:x,hasImportantModifier:I,baseClassName:C,maybePostfixModifierPosition:E}=n(v);if(w){h=v+(h.length>0?" "+h:h);continue}let A=!!E,j=r(A?C.substring(0,E):C);if(!j){if(!A){h=v+(h.length>0?" "+h:h);continue}if(j=r(C),!j){h=v+(h.length>0?" "+h:h);continue}A=!1}const W=x.length===0?"":x.length===1?x[0]:a(x).join(":"),z=I?W+Tg:W,Z=z+j;if(l.indexOf(Z)>-1)continue;l.push(Z);const K=s(j,A);for(let ne=0;ne<K.length;++ne){const R=K[ne];l.push(z+R)}h=v+(h.length>0?" "+h:h)}return h},Fj=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=tT(n))&&(s&&(s+=" "),s+=r);return s},tT=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=tT(t[r]))&&(n&&(n+=" "),n+=e);return n},zj=(t,...e)=>{let n,r,s,a;const l=h=>{const m=e.reduce((v,w)=>w(v),t());return n=Lj(m),r=n.cache.get,s=n.cache.set,a=u,u(h)},u=h=>{const m=r(h);if(m)return m;const v=Vj(h,n);return s(h,v),v};return a=l,(...h)=>a(Fj(...h))},Uj=[],Yt=t=>{const e=n=>n[t]||Uj;return e.isThemeGetter=!0,e},nT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,rT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,$j=/^\d+\/\d+$/,Bj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Wj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Hj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Kj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xa=t=>$j.test(t),We=t=>!!t&&!Number.isNaN(Number(t)),Ui=t=>!!t&&Number.isInteger(Number(t)),Fm=t=>t.endsWith("%")&&We(t.slice(0,-1)),Hs=t=>Bj.test(t),Gj=()=>!0,Qj=t=>Wj.test(t)&&!qj.test(t),sT=()=>!1,Zj=t=>Hj.test(t),Jj=t=>Kj.test(t),Yj=t=>!ye(t)&&!ve(t),Xj=t=>ql(t,aT,sT),ye=t=>nT.test(t),Ko=t=>ql(t,lT,Qj),zm=t=>ql(t,s4,We),hb=t=>ql(t,iT,sT),e4=t=>ql(t,oT,Jj),dh=t=>ql(t,cT,Zj),ve=t=>rT.test(t),Rc=t=>Hl(t,lT),t4=t=>Hl(t,i4),fb=t=>Hl(t,iT),n4=t=>Hl(t,aT),r4=t=>Hl(t,oT),hh=t=>Hl(t,cT,!0),ql=(t,e,n)=>{const r=nT.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Hl=(t,e,n=!1)=>{const r=rT.exec(t);return r?r[1]?e(r[1]):n:!1},iT=t=>t==="position"||t==="percentage",oT=t=>t==="image"||t==="url",aT=t=>t==="length"||t==="size"||t==="bg-size",lT=t=>t==="length",s4=t=>t==="number",i4=t=>t==="family-name",cT=t=>t==="shadow",o4=()=>{const t=Yt("color"),e=Yt("font"),n=Yt("text"),r=Yt("font-weight"),s=Yt("tracking"),a=Yt("leading"),l=Yt("breakpoint"),u=Yt("container"),h=Yt("spacing"),m=Yt("radius"),v=Yt("shadow"),w=Yt("inset-shadow"),x=Yt("text-shadow"),I=Yt("drop-shadow"),C=Yt("blur"),E=Yt("perspective"),A=Yt("aspect"),j=Yt("ease"),W=Yt("animate"),z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],K=()=>[...Z(),ve,ye],ne=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],T=()=>[ve,ye,h],N=()=>[Xa,"full","auto",...T()],M=()=>[Ui,"none","subgrid",ve,ye],L=()=>["auto",{span:["full",Ui,ve,ye]},Ui,ve,ye],F=()=>[Ui,"auto",ve,ye],D=()=>["auto","min","max","fr",ve,ye],$e=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],nt=()=>["start","end","center","stretch","center-safe","end-safe"],Ke=()=>["auto",...T()],Ie=()=>[Xa,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],Y=()=>[t,ve,ye],fe=()=>[...Z(),fb,hb,{position:[ve,ye]}],ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",n4,Xj,{size:[ve,ye]}],$=()=>[Fm,Rc,Ko],se=()=>["","none","full",m,ve,ye],de=()=>["",We,Rc,Ko],ke=()=>["solid","dashed","dotted","double"],Se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ee=()=>[We,Fm,fb,hb],Me=()=>["","none",C,ve,ye],ze=()=>["none",We,ve,ye],Ce=()=>["none",We,ve,ye],Kt=()=>[We,ve,ye],Nt=()=>[Xa,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Hs],breakpoint:[Hs],color:[Gj],container:[Hs],"drop-shadow":[Hs],ease:["in","out","in-out"],font:[Yj],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Hs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Hs],shadow:[Hs],spacing:["px",We],text:[Hs],"text-shadow":[Hs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Xa,ye,ve,A]}],container:["container"],columns:[{columns:[We,ye,ve,u]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:K()}],overflow:[{overflow:ne()}],"overflow-x":[{"overflow-x":ne()}],"overflow-y":[{"overflow-y":ne()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[Ui,"auto",ve,ye]}],basis:[{basis:[Xa,"full","auto",u,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[We,Xa,"auto","initial","none",ye]}],grow:[{grow:["",We,ve,ye]}],shrink:[{shrink:["",We,ve,ye]}],order:[{order:[Ui,"first","last","none",ve,ye]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...$e(),"normal"]}],"justify-items":[{"justify-items":[...nt(),"normal"]}],"justify-self":[{"justify-self":["auto",...nt()]}],"align-content":[{content:["normal",...$e()]}],"align-items":[{items:[...nt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...nt(),{baseline:["","last"]}]}],"place-content":[{"place-content":$e()}],"place-items":[{"place-items":[...nt(),"baseline"]}],"place-self":[{"place-self":["auto",...nt()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:Ke()}],mx:[{mx:Ke()}],my:[{my:Ke()}],ms:[{ms:Ke()}],me:[{me:Ke()}],mt:[{mt:Ke()}],mr:[{mr:Ke()}],mb:[{mb:Ke()}],ml:[{ml:Ke()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ie()}],w:[{w:[u,"screen",...Ie()]}],"min-w":[{"min-w":[u,"screen","none",...Ie()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...Ie()]}],h:[{h:["screen","lh",...Ie()]}],"min-h":[{"min-h":["screen","lh","none",...Ie()]}],"max-h":[{"max-h":["screen","lh",...Ie()]}],"font-size":[{text:["base",n,Rc,Ko]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ve,zm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fm,ye]}],"font-family":[{font:[t4,ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ve,ye]}],"line-clamp":[{"line-clamp":[We,"none",ve,zm]}],leading:[{leading:[a,...T()]}],"list-image":[{"list-image":["none",ve,ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ve,ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Y()}],"text-color":[{text:Y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ke(),"wavy"]}],"text-decoration-thickness":[{decoration:[We,"from-font","auto",ve,Ko]}],"text-decoration-color":[{decoration:Y()}],"underline-offset":[{"underline-offset":[We,"auto",ve,ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve,ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve,ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:fe()}],"bg-repeat":[{bg:ue()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ui,ve,ye],radial:["",ve,ye],conic:[Ui,ve,ye]},r4,e4]}],"bg-color":[{bg:Y()}],"gradient-from-pos":[{from:$()}],"gradient-via-pos":[{via:$()}],"gradient-to-pos":[{to:$()}],"gradient-from":[{from:Y()}],"gradient-via":[{via:Y()}],"gradient-to":[{to:Y()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:de()}],"border-w-x":[{"border-x":de()}],"border-w-y":[{"border-y":de()}],"border-w-s":[{"border-s":de()}],"border-w-e":[{"border-e":de()}],"border-w-t":[{"border-t":de()}],"border-w-r":[{"border-r":de()}],"border-w-b":[{"border-b":de()}],"border-w-l":[{"border-l":de()}],"divide-x":[{"divide-x":de()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":de()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ke(),"hidden","none"]}],"divide-style":[{divide:[...ke(),"hidden","none"]}],"border-color":[{border:Y()}],"border-color-x":[{"border-x":Y()}],"border-color-y":[{"border-y":Y()}],"border-color-s":[{"border-s":Y()}],"border-color-e":[{"border-e":Y()}],"border-color-t":[{"border-t":Y()}],"border-color-r":[{"border-r":Y()}],"border-color-b":[{"border-b":Y()}],"border-color-l":[{"border-l":Y()}],"divide-color":[{divide:Y()}],"outline-style":[{outline:[...ke(),"none","hidden"]}],"outline-offset":[{"outline-offset":[We,ve,ye]}],"outline-w":[{outline:["",We,Rc,Ko]}],"outline-color":[{outline:Y()}],shadow:[{shadow:["","none",v,hh,dh]}],"shadow-color":[{shadow:Y()}],"inset-shadow":[{"inset-shadow":["none",w,hh,dh]}],"inset-shadow-color":[{"inset-shadow":Y()}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Y()}],"ring-offset-w":[{"ring-offset":[We,Ko]}],"ring-offset-color":[{"ring-offset":Y()}],"inset-ring-w":[{"inset-ring":de()}],"inset-ring-color":[{"inset-ring":Y()}],"text-shadow":[{"text-shadow":["none",x,hh,dh]}],"text-shadow-color":[{"text-shadow":Y()}],opacity:[{opacity:[We,ve,ye]}],"mix-blend":[{"mix-blend":[...Se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[We]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ee()}],"mask-image-linear-from-color":[{"mask-linear-from":Y()}],"mask-image-linear-to-color":[{"mask-linear-to":Y()}],"mask-image-t-from-pos":[{"mask-t-from":Ee()}],"mask-image-t-to-pos":[{"mask-t-to":Ee()}],"mask-image-t-from-color":[{"mask-t-from":Y()}],"mask-image-t-to-color":[{"mask-t-to":Y()}],"mask-image-r-from-pos":[{"mask-r-from":Ee()}],"mask-image-r-to-pos":[{"mask-r-to":Ee()}],"mask-image-r-from-color":[{"mask-r-from":Y()}],"mask-image-r-to-color":[{"mask-r-to":Y()}],"mask-image-b-from-pos":[{"mask-b-from":Ee()}],"mask-image-b-to-pos":[{"mask-b-to":Ee()}],"mask-image-b-from-color":[{"mask-b-from":Y()}],"mask-image-b-to-color":[{"mask-b-to":Y()}],"mask-image-l-from-pos":[{"mask-l-from":Ee()}],"mask-image-l-to-pos":[{"mask-l-to":Ee()}],"mask-image-l-from-color":[{"mask-l-from":Y()}],"mask-image-l-to-color":[{"mask-l-to":Y()}],"mask-image-x-from-pos":[{"mask-x-from":Ee()}],"mask-image-x-to-pos":[{"mask-x-to":Ee()}],"mask-image-x-from-color":[{"mask-x-from":Y()}],"mask-image-x-to-color":[{"mask-x-to":Y()}],"mask-image-y-from-pos":[{"mask-y-from":Ee()}],"mask-image-y-to-pos":[{"mask-y-to":Ee()}],"mask-image-y-from-color":[{"mask-y-from":Y()}],"mask-image-y-to-color":[{"mask-y-to":Y()}],"mask-image-radial":[{"mask-radial":[ve,ye]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ee()}],"mask-image-radial-from-color":[{"mask-radial-from":Y()}],"mask-image-radial-to-color":[{"mask-radial-to":Y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Z()}],"mask-image-conic-pos":[{"mask-conic":[We]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ee()}],"mask-image-conic-from-color":[{"mask-conic-from":Y()}],"mask-image-conic-to-color":[{"mask-conic-to":Y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:fe()}],"mask-repeat":[{mask:ue()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ve,ye]}],filter:[{filter:["","none",ve,ye]}],blur:[{blur:Me()}],brightness:[{brightness:[We,ve,ye]}],contrast:[{contrast:[We,ve,ye]}],"drop-shadow":[{"drop-shadow":["","none",I,hh,dh]}],"drop-shadow-color":[{"drop-shadow":Y()}],grayscale:[{grayscale:["",We,ve,ye]}],"hue-rotate":[{"hue-rotate":[We,ve,ye]}],invert:[{invert:["",We,ve,ye]}],saturate:[{saturate:[We,ve,ye]}],sepia:[{sepia:["",We,ve,ye]}],"backdrop-filter":[{"backdrop-filter":["","none",ve,ye]}],"backdrop-blur":[{"backdrop-blur":Me()}],"backdrop-brightness":[{"backdrop-brightness":[We,ve,ye]}],"backdrop-contrast":[{"backdrop-contrast":[We,ve,ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",We,ve,ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[We,ve,ye]}],"backdrop-invert":[{"backdrop-invert":["",We,ve,ye]}],"backdrop-opacity":[{"backdrop-opacity":[We,ve,ye]}],"backdrop-saturate":[{"backdrop-saturate":[We,ve,ye]}],"backdrop-sepia":[{"backdrop-sepia":["",We,ve,ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ve,ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[We,"initial",ve,ye]}],ease:[{ease:["linear","initial",j,ve,ye]}],delay:[{delay:[We,ve,ye]}],animate:[{animate:["none",W,ve,ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[E,ve,ye]}],"perspective-origin":[{"perspective-origin":K()}],rotate:[{rotate:ze()}],"rotate-x":[{"rotate-x":ze()}],"rotate-y":[{"rotate-y":ze()}],"rotate-z":[{"rotate-z":ze()}],scale:[{scale:Ce()}],"scale-x":[{"scale-x":Ce()}],"scale-y":[{"scale-y":Ce()}],"scale-z":[{"scale-z":Ce()}],"scale-3d":["scale-3d"],skew:[{skew:Kt()}],"skew-x":[{"skew-x":Kt()}],"skew-y":[{"skew-y":Kt()}],transform:[{transform:[ve,ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:K()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Nt()}],"translate-x":[{"translate-x":Nt()}],"translate-y":[{"translate-y":Nt()}],"translate-z":[{"translate-z":Nt()}],"translate-none":["translate-none"],accent:[{accent:Y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve,ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve,ye]}],fill:[{fill:["none",...Y()]}],"stroke-w":[{stroke:[We,Rc,Ko,zm]}],stroke:[{stroke:["none",...Y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},a4=zj(o4);function Ve(...t){return a4(_j(t))}const l4=()=>{const{toasts:t,removeToast:e}=jh();return t.length===0?null:p.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:t.map(n=>p.jsx("div",{onClick:()=>e(n.id),className:Ve("pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-xl shadow-lg border text-sm font-medium transition-all transform animate-in slide-in-from-right-10 fade-in duration-300 cursor-pointer hover:opacity-90",n.type==="success"&&"bg-white dark:bg-gray-800 text-green-600 dark:text-green-400 border-green-200 dark:border-green-900",n.type==="error"&&"bg-white dark:bg-gray-800 text-red-600 dark:text-red-400 border-red-200 dark:border-red-900",n.type==="info"&&"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700"),children:p.jsxs("div",{className:"flex items-start gap-3",children:[n.type==="success"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),n.type==="error"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.type==="info"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),p.jsx("p",{className:"leading-5",children:n.message})]})},n.id))})},Vt={DENSITY_CLASSES:{compact:"py-0.5",normal:"py-1.5",comfortable:"py-2.5",spacious:"py-3.5"},DND:{PREFIX_TASK:"task:",TYPE_PROJECT:"project",TYPE_INBOX:"inbox",TYPE_TIMEBLOCK:"timeblock"},SIDEBAR:{MIN_WIDTH:150,MAX_WIDTH:500,DEFAULT_WIDTH:280,DURATIONS:[30,45,60,75,90]},LAYOUT:{CONTAINER_WIDTH_CLASS:"max-w-5xl",MOBILE_SIDEBAR_WIDTH_PX:280},FONTS:{EU:[{label:"Inter",value:"Inter, sans-serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"System UI",value:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}],JP:[{label:"M PLUS 2",value:'"M PLUS 2", sans-serif'},{label:"Noto Sans JP",value:'"Noto Sans JP", sans-serif'},{label:"Hiragino / Yu Gothic",value:'"Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif'}]}},c4=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),Pn=pa(t=>({stack:[],openModal:(e,n=null)=>{if(!e)return;const s={id:c4(),type:e,data:n};t(a=>({stack:[...a.stack,s]}))},closeModal:()=>t(e=>e.stack.length===0?e:{stack:e.stack.slice(0,-1)}),closeAllModals:()=>t({stack:[]})}));function u4(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var a;const l=h=>h===null?null:JSON.parse(h,void 0),u=(a=n.getItem(s))!=null?a:null;return u instanceof Promise?u.then(l):l(u)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const Ig=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Ig(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ig(r)(n)}}}},d4=(t,e)=>(n,r,s)=>{let a={storage:u4(()=>localStorage),partialize:E=>E,version:0,merge:(E,A)=>({...A,...E}),...e},l=!1;const u=new Set,h=new Set;let m=a.storage;if(!m)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...E)},r,s);const v=()=>{const E=a.partialize({...r()});return m.setItem(a.name,{state:E,version:a.version})},w=s.setState;s.setState=(E,A)=>(w(E,A),v());const x=t((...E)=>(n(...E),v()),r,s);s.getInitialState=()=>x;let I;const C=()=>{var E,A;if(!m)return;l=!1,u.forEach(W=>{var z;return W((z=r())!=null?z:x)});const j=((A=a.onRehydrateStorage)==null?void 0:A.call(a,(E=r())!=null?E:x))||void 0;return Ig(m.getItem.bind(m))(a.name).then(W=>{if(W)if(typeof W.version=="number"&&W.version!==a.version){if(a.migrate){const z=a.migrate(W.state,W.version);return z instanceof Promise?z.then(Z=>[!0,Z]):[!0,z]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,W.state];return[!1,void 0]}).then(W=>{var z;const[Z,K]=W;if(I=a.merge(K,(z=r())!=null?z:x),n(I,!0),Z)return v()}).then(()=>{j==null||j(I,void 0),I=r(),l=!0,h.forEach(W=>W(I))}).catch(W=>{j==null||j(void 0,W)})};return s.persist={setOptions:E=>{a={...a,...E},E.storage&&(m=E.storage)},clearStorage:()=>{m==null||m.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>C(),hasHydrated:()=>l,onHydrate:E=>(u.add(E),()=>{u.delete(E)}),onFinishHydration:E=>(h.add(E),()=>{h.delete(E)})},a.skipHydration||C(),I||x},Fu=d4,h4=1024,Wy=pa()(Fu(t=>({sidebarWidth:Vt.SIDEBAR.DEFAULT_WIDTH,isSidebarOpen:!0,sidebarDensity:"normal",setSidebarWidth:e=>{const n=Math.max(Vt.SIDEBAR.MIN_WIDTH,Math.min(e,Vt.SIDEBAR.MAX_WIDTH));t({sidebarWidth:n})},toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),setSidebarOpen:e=>t({isSidebarOpen:e}),setSidebarDensity:e=>t({sidebarDensity:e})}),{name:"ui-storage",partialize:t=>({sidebarWidth:t.sidebarWidth,sidebarDensity:t.sidebarDensity,isSidebarOpen:t.isSidebarOpen}),onRehydrateStorage:()=>t=>{typeof window<"u"&&window.innerWidth<h4&&(t==null||t.setSidebarOpen(!1))}})),f4="/assets/logo-BADOZ29k.png",p4=({children:t})=>{const{sidebarWidth:e,isSidebarOpen:n,sidebarDensity:r,toggleSidebar:s,setSidebarWidth:a}=Wy(),l={compact:"p-1",normal:"p-2",comfortable:"p-4",spacious:"p-6"}[r];He.useEffect(()=>{const h=v=>{if(!document.body.classList.contains("resizing"))return;const w=Math.max(Vt.SIDEBAR.MIN_WIDTH,Math.min(Vt.SIDEBAR.MAX_WIDTH,v.clientX));a(w)},m=()=>{document.body.classList.remove("resizing"),document.body.style.cursor="default"};return document.addEventListener("mousemove",h),document.addEventListener("mouseup",m),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",m)}},[a]);const u=()=>{document.body.classList.add("resizing"),document.body.style.cursor="col-resize"};return p.jsxs("aside",{className:Ve("h-full transition-all duration-300 flex flex-col group relative","bg-white dark:bg-gray-900 lg:bg-white/70 lg:dark:bg-gray-800/60","lg:backdrop-blur-xl","border-r border-gray-200/50 dark:border-gray-700/30",n?"translate-x-0":"-translate-x-full lg:translate-x-0","fixed lg:relative z-30 lg:z-0 shadow-2xl lg:shadow-none overflow-hidden","w-[var(--sidebar-mobile)] lg:w-[var(--sidebar-desktop)]"),style:{"--sidebar-desktop":`${e}px`,"--sidebar-mobile":n?`${Vt.LAYOUT.MOBILE_SIDEBAR_WIDTH_PX}px`:"0px",width:n?void 0:"0px"},children:[p.jsxs("div",{className:"h-14 flex items-center px-4 flex-shrink-0 justify-between border-b border-gray-100 dark:border-gray-800/50",children:[p.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition select-none",children:[p.jsx("div",{className:"w-8 h-8 rounded-xl bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20",children:p.jsx("img",{src:f4,alt:"L",className:"h-5 w-5 invert brightness-0"})}),p.jsxs("span",{className:"text-lg font-black text-gray-900 dark:text-white tracking-tight",children:["Task",p.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]})]}),p.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all active:scale-90",title:n?"":"","aria-label":n?"":"",children:p.jsx("svg",{className:Ve("w-5 h-5 transition-transform duration-300",!n&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),p.jsx("div",{className:Ve("flex-1 overflow-y-auto custom-scrollbar pt-4",l),children:t}),p.jsx("div",{role:"separator","aria-orientation":"vertical","aria-label":"","aria-valuenow":e,"aria-valuemin":Vt.SIDEBAR.MIN_WIDTH,"aria-valuemax":Vt.SIDEBAR.MAX_WIDTH,tabIndex:n?0:-1,onMouseDown:u,onKeyDown:h=>{h.key==="ArrowLeft"?a(Math.max(Vt.SIDEBAR.MIN_WIDTH,e-10)):h.key==="ArrowRight"&&a(Math.min(Vt.SIDEBAR.MAX_WIDTH,e+10))},className:Ve("absolute top-0 right-0 w-1 h-full cursor-col-resize z-40 transition-colors hidden lg:flex items-center justify-center outline-none focus:bg-blue-500","hover:bg-blue-500/50 active:bg-blue-600 group/resizer"),title:"",children:p.jsx("div",{className:"absolute w-1.5 h-8 bg-gray-300 dark:bg-gray-600 rounded-full opacity-0 group-hover/resizer:opacity-100 group-focus/resizer:opacity-100 transition-opacity pointer-events-none"})}),p.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-gray-200/50 dark:bg-gray-700/30 hidden lg:block"})]})};function ee(t,e,n){function r(u,h){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:h,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,h);const m=l.prototype,v=Object.keys(m);for(let w=0;w<v.length;w++){const x=v[w];x in u||(u[x]=m[x].bind(u))}}const s=(n==null?void 0:n.Parent)??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(u){var h;const m=n!=null&&n.Parent?new a:this;r(m,u),(h=m._zod).deferred??(h.deferred=[]);for(const v of m._zod.deferred)v();return m}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>{var h,m;return n!=null&&n.Parent&&u instanceof n.Parent?!0:(m=(h=u==null?void 0:u._zod)==null?void 0:h.traits)==null?void 0:m.has(t)}}),Object.defineProperty(l,"name",{value:t}),l}class fl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class uT extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const dT={};function ho(t){return dT}function hT(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function Sg(t,e){return typeof e=="bigint"?e.toString():e}function qy(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Hy(t){return t==null}function Ky(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function m4(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const h=r.match(/\d?e-(\d?)/);h!=null&&h[1]&&(s=Number.parseInt(h[1]))}const a=n>s?n:s,l=Number.parseInt(t.toFixed(a).replace(".","")),u=Number.parseInt(e.toFixed(a).replace(".",""));return l%u/10**a}const pb=Symbol("evaluating");function mt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==pb)return r===void 0&&(r=pb,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function ma(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ga(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function mb(t){return JSON.stringify(t)}function g4(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const fT="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function sf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const y4=qy(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Pl(t){if(sf(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(sf(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function pT(t){return Pl(t)?{...t}:Array.isArray(t)?[...t]:t}const v4=new Set(["string","number","symbol"]);function Mf(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function yo(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function xe(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function _4(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const w4={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function b4(t,e){const n=t._zod.def,r=ga(t._zod.def,{get shape(){const s={};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(s[a]=n.shape[a])}return ma(this,"shape",s),s},checks:[]});return yo(t,r)}function x4(t,e){const n=t._zod.def,r=ga(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete s[a]}return ma(this,"shape",s),s},checks:[]});return yo(t,r)}function k4(t,e){if(!Pl(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=ga(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return ma(this,"shape",a),a},checks:[]});return yo(t,s)}function E4(t,e){if(!Pl(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return ma(this,"shape",r),r},checks:t._zod.def.checks};return yo(t,n)}function T4(t,e){const n=ga(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return ma(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return yo(t,n)}function I4(t,e,n){const r=ga(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in s))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=t?new t({type:"optional",innerType:s[l]}):s[l])}else for(const l in s)a[l]=t?new t({type:"optional",innerType:s[l]}):s[l];return ma(this,"shape",a),a},checks:[]});return yo(e,r)}function S4(t,e,n){const r=ga(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return ma(this,"shape",a),a},checks:[]});return yo(e,r)}function ol(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function al(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function fh(t){return typeof t=="string"?t:t==null?void 0:t.message}function fo(t,e,n){var s,a,l,u,h,m;const r={...t,path:t.path??[]};if(!t.message){const v=fh((l=(a=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:a.error)==null?void 0:l.call(a,t))??fh((u=e==null?void 0:e.error)==null?void 0:u.call(e,t))??fh((h=n.customError)==null?void 0:h.call(n,t))??fh((m=n.localeError)==null?void 0:m.call(n,t))??"Invalid input";r.message=v}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function Gy(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function pu(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const mT=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Sg,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},gT=ee("$ZodError",mT),yT=ee("$ZodError",mT,{Parent:Error});function C4(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function A4(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,u=0;for(;u<a.path.length;){const h=a.path[u];u===a.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(e(a))):l[h]=l[h]||{_errors:[]},l=l[h],u++}}};return r(t),n}const Qy=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new fl;if(l.issues.length){const u=new((s==null?void 0:s.Err)??t)(l.issues.map(h=>fo(h,a,ho())));throw fT(u,s==null?void 0:s.callee),u}return l.value},Zy=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new((s==null?void 0:s.Err)??t)(l.issues.map(h=>fo(h,a,ho())));throw fT(u,s==null?void 0:s.callee),u}return l.value},Vf=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new fl;return a.issues.length?{success:!1,error:new(t??gT)(a.issues.map(l=>fo(l,s,ho())))}:{success:!0,data:a.value}},N4=Vf(yT),Ff=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>fo(l,s,ho())))}:{success:!0,data:a.value}},R4=Ff(yT),P4=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Qy(t)(e,n,s)},D4=t=>(e,n,r)=>Qy(t)(e,n,r),j4=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Zy(t)(e,n,s)},O4=t=>async(e,n,r)=>Zy(t)(e,n,r),L4=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Vf(t)(e,n,s)},M4=t=>(e,n,r)=>Vf(t)(e,n,r),V4=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ff(t)(e,n,s)},F4=t=>async(e,n,r)=>Ff(t)(e,n,r),z4=/^[cC][^\s-]{8,}$/,U4=/^[0-9a-z]+$/,$4=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,B4=/^[0-9a-vA-V]{20}$/,W4=/^[A-Za-z0-9]{27}$/,q4=/^[a-zA-Z0-9_-]{21}$/,H4=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,K4=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,gb=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,G4=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Q4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Z4(){return new RegExp(Q4,"u")}const J4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Y4=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,X4=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,eO=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tO=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,vT=/^[A-Za-z0-9_-]*$/,nO=/^\+(?:[0-9]){6,14}[0-9]$/,_T="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",rO=new RegExp(`^${_T}$`);function wT(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function sO(t){return new RegExp(`^${wT(t)}$`)}function iO(t){const e=wT({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${_T}T(?:${r})$`)}const oO=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},aO=/^-?\d+$/,lO=/^-?\d+(?:\.\d+)?/,cO=/^(?:true|false)$/i,uO=/^[^A-Z]*$/,dO=/^[^a-z]*$/,ir=ee("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),bT={number:"number",bigint:"bigint",object:"date"},xT=ee("$ZodCheckLessThan",(t,e)=>{ir.init(t,e);const n=bT[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,a=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<a&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),kT=ee("$ZodCheckGreaterThan",(t,e)=>{ir.init(t,e);const n=bT[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,a=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>a&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),hO=ee("$ZodCheckMultipleOf",(t,e)=>{ir.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):m4(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),fO=ee("$ZodCheckNumberFormat",(t,e)=>{var l;ir.init(t,e),e.format=e.format||"float64";const n=(l=e.format)==null?void 0:l.includes("int"),r=n?"int":"number",[s,a]=w4[e.format];t._zod.onattach.push(u=>{const h=u._zod.bag;h.format=e.format,h.minimum=s,h.maximum=a,n&&(h.pattern=aO)}),t._zod.check=u=>{const h=u.value;if(n){if(!Number.isInteger(h)){u.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:h,inst:t});return}if(!Number.isSafeInteger(h)){h>0?u.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):u.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}h<s&&u.issues.push({origin:"number",input:h,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),h>a&&u.issues.push({origin:"number",input:h,code:"too_big",maximum:a,inst:t})}}),pO=ee("$ZodCheckMaxLength",(t,e)=>{var n;ir.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!Hy(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=Gy(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),mO=ee("$ZodCheckMinLength",(t,e)=>{var n;ir.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!Hy(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=Gy(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),gO=ee("$ZodCheckLengthEquals",(t,e)=>{var n;ir.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!Hy(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=Gy(s),u=a>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),zf=ee("$ZodCheckStringFormat",(t,e)=>{var n,r;ir.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),yO=ee("$ZodCheckRegex",(t,e)=>{zf.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),vO=ee("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=uO),zf.init(t,e)}),_O=ee("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=dO),zf.init(t,e)}),wO=ee("$ZodCheckIncludes",(t,e)=>{ir.init(t,e);const n=Mf(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),bO=ee("$ZodCheckStartsWith",(t,e)=>{ir.init(t,e);const n=new RegExp(`^${Mf(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),xO=ee("$ZodCheckEndsWith",(t,e)=>{ir.init(t,e);const n=new RegExp(`.*${Mf(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),kO=ee("$ZodCheckOverwrite",(t,e)=>{ir.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class EO{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const TO={major:4,minor:2,patch:1},Ct=ee("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=TO;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)for(const l of a._zod.onattach)l(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const a=(u,h,m)=>{let v=ol(u),w;for(const x of h){if(x._zod.def.when){if(!x._zod.def.when(u))continue}else if(v)continue;const I=u.issues.length,C=x._zod.check(u);if(C instanceof Promise&&(m==null?void 0:m.async)===!1)throw new fl;if(w||C instanceof Promise)w=(w??Promise.resolve()).then(async()=>{await C,u.issues.length!==I&&(v||(v=ol(u,I)))});else{if(u.issues.length===I)continue;v||(v=ol(u,I))}}return w?w.then(()=>u):u},l=(u,h,m)=>{if(ol(u))return u.aborted=!0,u;const v=a(h,r,m);if(v instanceof Promise){if(m.async===!1)throw new fl;return v.then(w=>t._zod.parse(w,m))}return t._zod.parse(v,m)};t._zod.run=(u,h)=>{if(h.skipChecks)return t._zod.parse(u,h);if(h.direction==="backward"){const v=t._zod.parse({value:u.value,issues:[]},{...h,skipChecks:!0});return v instanceof Promise?v.then(w=>l(w,u,h)):l(v,u,h)}const m=t._zod.parse(u,h);if(m instanceof Promise){if(h.async===!1)throw new fl;return m.then(v=>a(v,r,h))}return a(m,r,h)}}t["~standard"]={validate:a=>{var l;try{const u=N4(t,a);return u.success?{value:u.data}:{issues:(l=u.error)==null?void 0:l.issues}}catch{return R4(t,a).then(h=>{var m;return h.success?{value:h.data}:{issues:(m=h.error)==null?void 0:m.issues}})}},vendor:"zod",version:1}}),Jy=ee("$ZodString",(t,e)=>{var n;Ct.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??oO(t._zod.bag),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),kt=ee("$ZodStringFormat",(t,e)=>{zf.init(t,e),Jy.init(t,e)}),IO=ee("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=K4),kt.init(t,e)}),SO=ee("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=gb(r))}else e.pattern??(e.pattern=gb());kt.init(t,e)}),CO=ee("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=G4),kt.init(t,e)}),AO=ee("$ZodURL",(t,e)=>{kt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),NO=ee("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=Z4()),kt.init(t,e)}),RO=ee("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=q4),kt.init(t,e)}),PO=ee("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=z4),kt.init(t,e)}),DO=ee("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=U4),kt.init(t,e)}),jO=ee("$ZodULID",(t,e)=>{e.pattern??(e.pattern=$4),kt.init(t,e)}),OO=ee("$ZodXID",(t,e)=>{e.pattern??(e.pattern=B4),kt.init(t,e)}),LO=ee("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=W4),kt.init(t,e)}),MO=ee("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=iO(e)),kt.init(t,e)}),VO=ee("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=rO),kt.init(t,e)}),FO=ee("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=sO(e)),kt.init(t,e)}),zO=ee("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=H4),kt.init(t,e)}),UO=ee("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=J4),kt.init(t,e),t._zod.bag.format="ipv4"}),$O=ee("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=Y4),kt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),BO=ee("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=X4),kt.init(t,e)}),WO=ee("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=eO),kt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function ET(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const qO=ee("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=tO),kt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{ET(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function HO(t){if(!vT.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return ET(n)}const KO=ee("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=vT),kt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{HO(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),GO=ee("$ZodE164",(t,e)=>{e.pattern??(e.pattern=nO),kt.init(t,e)});function QO(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const ZO=ee("$ZodJWT",(t,e)=>{kt.init(t,e),t._zod.check=n=>{QO(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),TT=ee("$ZodNumber",(t,e)=>{Ct.init(t,e),t._zod.pattern=t._zod.bag.pattern??lO,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const a=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...a?{received:a}:{}}),n}}),JO=ee("$ZodNumberFormat",(t,e)=>{fO.init(t,e),TT.init(t,e)}),YO=ee("$ZodBoolean",(t,e)=>{Ct.init(t,e),t._zod.pattern=cO,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),n}}),XO=ee("$ZodUnknown",(t,e)=>{Ct.init(t,e),t._zod.parse=n=>n}),eL=ee("$ZodNever",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),tL=ee("$ZodDate",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const s=n.value,a=s instanceof Date;return a&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...a?{received:"Invalid Date"}:{},inst:t}),n}});function yb(t,e,n){t.issues.length&&e.issues.push(...al(n,t.issues)),e.value[n]=t.value}const nL=ee("$ZodArray",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const u=s[l],h=e.element._zod.run({value:u,issues:[]},r);h instanceof Promise?a.push(h.then(m=>yb(m,n,l))):yb(h,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function of(t,e,n,r){t.issues.length&&e.issues.push(...al(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function IT(t){var r,s,a,l;const e=Object.keys(t.shape);for(const u of e)if(!((l=(a=(s=(r=t.shape)==null?void 0:r[u])==null?void 0:s._zod)==null?void 0:a.traits)!=null&&l.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const n=_4(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function ST(t,e,n,r,s,a){const l=[],u=s.keySet,h=s.catchall._zod,m=h.def.type;for(const v in e){if(u.has(v))continue;if(m==="never"){l.push(v);continue}const w=h.run({value:e[v],issues:[]},r);w instanceof Promise?t.push(w.then(x=>of(x,n,v,e))):of(w,n,v,e)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const rL=ee("$ZodObject",(t,e)=>{Ct.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const h={...u};return Object.defineProperty(e,"shape",{value:h}),h}})}const r=qy(()=>IT(e));mt(t._zod,"propValues",()=>{const u=e.shape,h={};for(const m in u){const v=u[m]._zod;if(v.values){h[m]??(h[m]=new Set);for(const w of v.values)h[m].add(w)}}return h});const s=sf,a=e.catchall;let l;t._zod.parse=(u,h)=>{l??(l=r.value);const m=u.value;if(!s(m))return u.issues.push({expected:"object",code:"invalid_type",input:m,inst:t}),u;u.value={};const v=[],w=l.shape;for(const x of l.keys){const C=w[x]._zod.run({value:m[x],issues:[]},h);C instanceof Promise?v.push(C.then(E=>of(E,u,x,m))):of(C,u,x,m)}return a?ST(v,m,u,h,r.value,t):v.length?Promise.all(v).then(()=>u):u}}),sL=ee("$ZodObjectJIT",(t,e)=>{rL.init(t,e);const n=t._zod.parse,r=qy(()=>IT(e)),s=x=>{const I=new EO(["shape","payload","ctx"]),C=r.value,E=z=>{const Z=mb(z);return`shape[${Z}]._zod.run({ value: input[${Z}], issues: [] }, ctx)`};I.write("const input = payload.value;");const A=Object.create(null);let j=0;for(const z of C.keys)A[z]=`key_${j++}`;I.write("const newResult = {};");for(const z of C.keys){const Z=A[z],K=mb(z);I.write(`const ${Z} = ${E(z)};`),I.write(`
        if (${Z}.issues.length) {
          payload.issues = payload.issues.concat(${Z}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${K}, ...iss.path] : [${K}]
          })));
        }
        
        
        if (${Z}.value === undefined) {
          if (${K} in input) {
            newResult[${K}] = undefined;
          }
        } else {
          newResult[${K}] = ${Z}.value;
        }
        
      `)}I.write("payload.value = newResult;"),I.write("return payload;");const W=I.compile();return(z,Z)=>W(x,z,Z)};let a;const l=sf,u=!dT.jitless,m=u&&y4.value,v=e.catchall;let w;t._zod.parse=(x,I)=>{w??(w=r.value);const C=x.value;return l(C)?u&&m&&(I==null?void 0:I.async)===!1&&I.jitless!==!0?(a||(a=s(e.shape)),x=a(x,I),v?ST([],C,x,I,w,t):x):n(x,I):(x.issues.push({expected:"object",code:"invalid_type",input:C,inst:t}),x)}});function vb(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!ol(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>fo(l,r,ho())))}),e)}const iL=ee("$ZodUnion",(t,e)=>{Ct.init(t,e),mt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),mt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),mt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),mt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>Ky(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const u=[];for(const h of e.options){const m=h._zod.run({value:s.value,issues:[]},a);if(m instanceof Promise)u.push(m),l=!0;else{if(m.issues.length===0)return m;u.push(m)}}return l?Promise.all(u).then(h=>vb(h,s,t,a)):vb(u,s,t,a)}}),oL=ee("$ZodIntersection",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([h,m])=>_b(n,h,m)):_b(n,a,l)}});function Cg(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Pl(t)&&Pl(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=Cg(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=Cg(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function _b(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),ol(t))return t;const r=Cg(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const aL=ee("$ZodRecord",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Pl(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:t}),n;const a=[],l=e.keyType._zod.values;if(l){n.value={};const u=new Set;for(const m of l)if(typeof m=="string"||typeof m=="number"||typeof m=="symbol"){u.add(typeof m=="number"?m.toString():m);const v=e.valueType._zod.run({value:s[m],issues:[]},r);v instanceof Promise?a.push(v.then(w=>{w.issues.length&&n.issues.push(...al(m,w.issues)),n.value[m]=w.value})):(v.issues.length&&n.issues.push(...al(m,v.issues)),n.value[m]=v.value)}let h;for(const m in s)u.has(m)||(h=h??[],h.push(m));h&&h.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:t,keys:h})}else{n.value={};for(const u of Reflect.ownKeys(s)){if(u==="__proto__")continue;const h=e.keyType._zod.run({value:u,issues:[]},r);if(h instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(h.issues.length){e.mode==="loose"?n.value[u]=s[u]:n.issues.push({code:"invalid_key",origin:"record",issues:h.issues.map(v=>fo(v,r,ho())),input:u,path:[u],inst:t});continue}const m=e.valueType._zod.run({value:s[u],issues:[]},r);m instanceof Promise?a.push(m.then(v=>{v.issues.length&&n.issues.push(...al(u,v.issues)),n.value[h.value]=v.value})):(m.issues.length&&n.issues.push(...al(u,m.issues)),n.value[h.value]=m.value)}}return a.length?Promise.all(a).then(()=>n):n}}),lL=ee("$ZodEnum",(t,e)=>{Ct.init(t,e);const n=hT(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>v4.has(typeof s)).map(s=>typeof s=="string"?Mf(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),cL=ee("$ZodTransform",(t,e)=>{Ct.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new uT(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new fl;return n.value=s,n}});function wb(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const uL=ee("$ZodOptional",(t,e)=>{Ct.init(t,e),t._zod.optin="optional",t._zod.optout="optional",mt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),mt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Ky(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>wb(a,n.value)):wb(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),dL=ee("$ZodNullable",(t,e)=>{Ct.init(t,e),mt(t._zod,"optin",()=>e.innerType._zod.optin),mt(t._zod,"optout",()=>e.innerType._zod.optout),mt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Ky(n.source)}|null)$`):void 0}),mt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),hL=ee("$ZodDefault",(t,e)=>{Ct.init(t,e),t._zod.optin="optional",mt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>bb(a,e)):bb(s,e)}});function bb(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const fL=ee("$ZodPrefault",(t,e)=>{Ct.init(t,e),t._zod.optin="optional",mt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),pL=ee("$ZodNonOptional",(t,e)=>{Ct.init(t,e),mt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>xb(a,t)):xb(s,t)}});function xb(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const mL=ee("$ZodCatch",(t,e)=>{Ct.init(t,e),mt(t._zod,"optin",()=>e.innerType._zod.optin),mt(t._zod,"optout",()=>e.innerType._zod.optout),mt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>fo(l,r,ho()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>fo(a,r,ho()))},input:n.value}),n.issues=[]),n)}}),gL=ee("$ZodPipe",(t,e)=>{Ct.init(t,e),mt(t._zod,"values",()=>e.in._zod.values),mt(t._zod,"optin",()=>e.in._zod.optin),mt(t._zod,"optout",()=>e.out._zod.optout),mt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>ph(l,e.in,r)):ph(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>ph(a,e.out,r)):ph(s,e.out,r)}});function ph(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const yL=ee("$ZodReadonly",(t,e)=>{Ct.init(t,e),mt(t._zod,"propValues",()=>e.innerType._zod.propValues),mt(t._zod,"values",()=>e.innerType._zod.values),mt(t._zod,"optin",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),mt(t._zod,"optout",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(kb):kb(s)}});function kb(t){return t.value=Object.freeze(t.value),t}const vL=ee("$ZodCustom",(t,e)=>{ir.init(t,e),Ct.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>Eb(a,n,r,t));Eb(s,n,r,t)}});function Eb(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(pu(s))}}var Tb;class _L{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function wL(){return new _L}(Tb=globalThis).__zod_globalRegistry??(Tb.__zod_globalRegistry=wL());const Fc=globalThis.__zod_globalRegistry;function bL(t,e){return new t({type:"string",...xe(e)})}function xL(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...xe(e)})}function Ib(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...xe(e)})}function kL(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...xe(e)})}function EL(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...xe(e)})}function TL(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...xe(e)})}function IL(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...xe(e)})}function SL(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...xe(e)})}function CL(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...xe(e)})}function AL(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...xe(e)})}function NL(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...xe(e)})}function RL(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...xe(e)})}function PL(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...xe(e)})}function DL(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...xe(e)})}function jL(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...xe(e)})}function OL(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...xe(e)})}function LL(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...xe(e)})}function ML(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...xe(e)})}function VL(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...xe(e)})}function FL(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...xe(e)})}function zL(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...xe(e)})}function UL(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...xe(e)})}function $L(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...xe(e)})}function BL(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...xe(e)})}function WL(t,e){return new t({type:"string",format:"date",check:"string_format",...xe(e)})}function qL(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...xe(e)})}function HL(t,e){return new t({type:"string",format:"duration",check:"string_format",...xe(e)})}function KL(t,e){return new t({type:"number",checks:[],...xe(e)})}function GL(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...xe(e)})}function QL(t,e){return new t({type:"boolean",...xe(e)})}function ZL(t){return new t({type:"unknown"})}function JL(t,e){return new t({type:"never",...xe(e)})}function YL(t,e){return new t({type:"date",...xe(e)})}function Sb(t,e){return new xT({check:"less_than",...xe(e),value:t,inclusive:!1})}function Oh(t,e){return new xT({check:"less_than",...xe(e),value:t,inclusive:!0})}function Cb(t,e){return new kT({check:"greater_than",...xe(e),value:t,inclusive:!1})}function Lh(t,e){return new kT({check:"greater_than",...xe(e),value:t,inclusive:!0})}function Ab(t,e){return new hO({check:"multiple_of",...xe(e),value:t})}function CT(t,e){return new pO({check:"max_length",...xe(e),maximum:t})}function af(t,e){return new mO({check:"min_length",...xe(e),minimum:t})}function AT(t,e){return new gO({check:"length_equals",...xe(e),length:t})}function XL(t,e){return new yO({check:"string_format",format:"regex",...xe(e),pattern:t})}function eM(t){return new vO({check:"string_format",format:"lowercase",...xe(t)})}function tM(t){return new _O({check:"string_format",format:"uppercase",...xe(t)})}function nM(t,e){return new wO({check:"string_format",format:"includes",...xe(e),includes:t})}function rM(t,e){return new bO({check:"string_format",format:"starts_with",...xe(e),prefix:t})}function sM(t,e){return new xO({check:"string_format",format:"ends_with",...xe(e),suffix:t})}function Kl(t){return new kO({check:"overwrite",tx:t})}function iM(t){return Kl(e=>e.normalize(t))}function oM(){return Kl(t=>t.trim())}function aM(){return Kl(t=>t.toLowerCase())}function lM(){return Kl(t=>t.toUpperCase())}function cM(){return Kl(t=>g4(t))}function uM(t,e,n){return new t({type:"array",element:e,...xe(n)})}function dM(t,e,n){return new t({type:"custom",check:"custom",fn:e,...xe(n)})}function hM(t){const e=fM(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(pu(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(pu(s))}},t(n.value,n)));return e}function fM(t,e){const n=new ir({check:"custom",...xe(e)});return n._zod.check=t,n}function NT(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??Fc,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function en(t,e,n={path:[],schemaPath:[]}){var v,w;var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=(w=(v=t._zod).toJSONSchema)==null?void 0:w.call(v);if(u)l.schema=u;else{const x={...n,schemaPath:[...n.schemaPath,t],path:n.path},I=t._zod.parent;if(I)l.ref=I,en(I,e,x),e.seen.get(I).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,x);else{const C=l.schema,E=e.processors[s.type];if(!E)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);E(t,e,C,x)}}const h=e.metadataRegistry.get(t);return h&&Object.assign(l.schema,h),e.io==="input"&&Fn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function RT(t,e){var a,l,u;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=h=>{var I;const m=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const C=(I=t.external.registry.get(h[0]))==null?void 0:I.id,E=t.external.uri??(j=>j);if(C)return{ref:E(C)};const A=h[1].defId??h[1].schema.id??`schema${t.counter++}`;return h[1].defId=A,{defId:A,ref:`${E("__shared")}#/${m}/${A}`}}if(h[1]===n)return{ref:"#"};const w=`#/${m}/`,x=h[1].schema.id??`__schema${t.counter++}`;return{defId:x,ref:w+x}},s=h=>{if(h[1].schema.$ref)return;const m=h[1],{ref:v,defId:w}=r(h);m.def={...m.schema},w&&(m.defId=w);const x=m.schema;for(const I in x)delete x[I];x.$ref=v};if(t.cycles==="throw")for(const h of t.seen.entries()){const m=h[1];if(m.cycle)throw new Error(`Cycle detected: #/${(a=m.cycle)==null?void 0:a.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const h of t.seen.entries()){const m=h[1];if(e===h[0]){s(h);continue}if(t.external){const w=(l=t.external.registry.get(h[0]))==null?void 0:l.id;if(e!==h[0]&&w){s(h);continue}}if((u=t.metadataRegistry.get(h[0]))==null?void 0:u.id){s(h);continue}if(m.cycle){s(h);continue}if(m.count>1&&t.reused==="ref"){s(h);continue}}}function PT(t,e){var l,u,h;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=m=>{const v=t.seen.get(m),w=v.def??v.schema,x={...w};if(v.ref===null)return;const I=v.ref;if(v.ref=null,I){r(I);const C=t.seen.get(I).schema;C.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(w.allOf=w.allOf??[],w.allOf.push(C)):(Object.assign(w,C),Object.assign(w,x))}v.isParent||t.override({zodSchema:m,jsonSchema:w,path:v.path??[]})};for(const m of[...t.seen.entries()].reverse())r(m[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,(l=t.external)!=null&&l.uri){const m=(u=t.external.registry.get(e))==null?void 0:u.id;if(!m)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(m)}Object.assign(s,n.def??n.schema);const a=((h=t.external)==null?void 0:h.defs)??{};for(const m of t.seen.entries()){const v=m[1];v.def&&v.defId&&(a[v.defId]=v.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const m=JSON.parse(JSON.stringify(s));return Object.defineProperty(m,"~standard",{value:{...e["~standard"],jsonSchema:{input:lf(e,"input"),output:lf(e,"output")}},enumerable:!1,writable:!1}),m}catch{throw new Error("Error converting schema to JSON.")}}function Fn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Fn(r.element,n);if(r.type==="set")return Fn(r.valueType,n);if(r.type==="lazy")return Fn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Fn(r.innerType,n);if(r.type==="intersection")return Fn(r.left,n)||Fn(r.right,n);if(r.type==="record"||r.type==="map")return Fn(r.keyType,n)||Fn(r.valueType,n);if(r.type==="pipe")return Fn(r.in,n)||Fn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(Fn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(Fn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(Fn(s,n))return!0;return!!(r.rest&&Fn(r.rest,n))}return!1}const pM=(t,e={})=>n=>{const r=NT({...n,processors:e});return en(t,r),RT(r,t),PT(r,t)},lf=(t,e)=>n=>{const{libraryOptions:r,target:s}=n??{},a=NT({...r??{},target:s,io:e,processors:{}});return en(t,a),RT(a,t),PT(a,t)},mM={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},gM=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:u,patterns:h,contentEncoding:m}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),u&&(s.format=mM[u]??u,s.format===""&&delete s.format),m&&(s.contentEncoding=m),h&&h.size>0){const v=[...h];v.length===1?s.pattern=v[0].source:v.length>1&&(s.allOf=[...v.map(w=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:w.source}))])}},yM=(t,e,n,r)=>{const s=n,{minimum:a,maximum:l,format:u,multipleOf:h,exclusiveMaximum:m,exclusiveMinimum:v}=t._zod.bag;typeof u=="string"&&u.includes("int")?s.type="integer":s.type="number",typeof v=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=v,s.exclusiveMinimum=!0):s.exclusiveMinimum=v),typeof a=="number"&&(s.minimum=a,typeof v=="number"&&e.target!=="draft-04"&&(v>=a?delete s.minimum:delete s.exclusiveMinimum)),typeof m=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=m,s.exclusiveMaximum=!0):s.exclusiveMaximum=m),typeof l=="number"&&(s.maximum=l,typeof m=="number"&&e.target!=="draft-04"&&(m<=l?delete s.maximum:delete s.exclusiveMaximum)),typeof h=="number"&&(s.multipleOf=h)},vM=(t,e,n,r)=>{n.type="boolean"},_M=(t,e,n,r)=>{n.not={}},wM=(t,e,n,r)=>{},bM=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},xM=(t,e,n,r)=>{const s=t._zod.def,a=hT(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},kM=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},EM=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},TM=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=en(a.element,e,{...r,path:[...r.path,"items"]})},IM=(t,e,n,r)=>{var m;const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const v in l)s.properties[v]=en(l[v],e,{...r,path:[...r.path,"properties",v]});const u=new Set(Object.keys(l)),h=new Set([...u].filter(v=>{const w=a.shape[v]._zod;return e.io==="input"?w.optin===void 0:w.optout===void 0}));h.size>0&&(s.required=Array.from(h)),((m=a.catchall)==null?void 0:m._zod.def.type)==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=en(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},SM=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((u,h)=>en(u,e,{...r,path:[...r.path,a?"oneOf":"anyOf",h]}));a?n.oneOf=l:n.anyOf=l},CM=(t,e,n,r)=>{const s=t._zod.def,a=en(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=en(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=m=>"allOf"in m&&Object.keys(m).length===1,h=[...u(a)?a.allOf:[a],...u(l)?l.allOf:[l]];n.allOf=h},AM=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",(e.target==="draft-07"||e.target==="draft-2020-12")&&(s.propertyNames=en(a.keyType,e,{...r,path:[...r.path,"propertyNames"]})),s.additionalProperties=en(a.valueType,e,{...r,path:[...r.path,"additionalProperties"]})},NM=(t,e,n,r)=>{const s=t._zod.def,a=en(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},RM=(t,e,n,r)=>{const s=t._zod.def;en(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},PM=(t,e,n,r)=>{const s=t._zod.def;en(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},DM=(t,e,n,r)=>{const s=t._zod.def;en(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},jM=(t,e,n,r)=>{const s=t._zod.def;en(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},OM=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;en(a,e,r);const l=e.seen.get(t);l.ref=a},LM=(t,e,n,r)=>{const s=t._zod.def;en(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},MM=(t,e,n,r)=>{const s=t._zod.def;en(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},VM=ee("ZodISODateTime",(t,e)=>{MO.init(t,e),At.init(t,e)});function FM(t){return BL(VM,t)}const zM=ee("ZodISODate",(t,e)=>{VO.init(t,e),At.init(t,e)});function UM(t){return WL(zM,t)}const $M=ee("ZodISOTime",(t,e)=>{FO.init(t,e),At.init(t,e)});function BM(t){return qL($M,t)}const WM=ee("ZodISODuration",(t,e)=>{zO.init(t,e),At.init(t,e)});function qM(t){return HL(WM,t)}const HM=(t,e)=>{gT.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>A4(t,n)},flatten:{value:n=>C4(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Sg,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Sg,2)}},isEmpty:{get(){return t.issues.length===0}}})},Dr=ee("ZodError",HM,{Parent:Error}),KM=Qy(Dr),GM=Zy(Dr),QM=Vf(Dr),ZM=Ff(Dr),JM=P4(Dr),YM=D4(Dr),XM=j4(Dr),eV=O4(Dr),tV=L4(Dr),nV=M4(Dr),rV=V4(Dr),sV=F4(Dr),jt=ee("ZodType",(t,e)=>(Ct.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:lf(t,"input"),output:lf(t,"output")}}),t.toJSONSchema=pM(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(ga(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>yo(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>KM(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>QM(t,n,r),t.parseAsync=async(n,r)=>GM(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>ZM(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>JM(t,n,r),t.decode=(n,r)=>YM(t,n,r),t.encodeAsync=async(n,r)=>XM(t,n,r),t.decodeAsync=async(n,r)=>eV(t,n,r),t.safeEncode=(n,r)=>tV(t,n,r),t.safeDecode=(n,r)=>nV(t,n,r),t.safeEncodeAsync=async(n,r)=>rV(t,n,r),t.safeDecodeAsync=async(n,r)=>sV(t,n,r),t.refine=(n,r)=>t.check(JV(n,r)),t.superRefine=n=>t.check(YV(n)),t.overwrite=n=>t.check(Kl(n)),t.optional=()=>Db(t),t.nullable=()=>jb(t),t.nullish=()=>Db(jb(t)),t.nonoptional=n=>qV(t,n),t.array=()=>Yy(t),t.or=n=>OT([t,n]),t.and=n=>OV(t,n),t.transform=n=>Ob(t,FV(n)),t.default=n=>$V(t,n),t.prefault=n=>WV(t,n),t.catch=n=>KV(t,n),t.pipe=n=>Ob(t,n),t.readonly=()=>ZV(t),t.describe=n=>{const r=t.clone();return Fc.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=Fc.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Fc.get(t);const r=t.clone();return Fc.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),DT=ee("_ZodString",(t,e)=>{Jy.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>gM(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(XL(...r)),t.includes=(...r)=>t.check(nM(...r)),t.startsWith=(...r)=>t.check(rM(...r)),t.endsWith=(...r)=>t.check(sM(...r)),t.min=(...r)=>t.check(af(...r)),t.max=(...r)=>t.check(CT(...r)),t.length=(...r)=>t.check(AT(...r)),t.nonempty=(...r)=>t.check(af(1,...r)),t.lowercase=r=>t.check(eM(r)),t.uppercase=r=>t.check(tM(r)),t.trim=()=>t.check(oM()),t.normalize=(...r)=>t.check(iM(...r)),t.toLowerCase=()=>t.check(aM()),t.toUpperCase=()=>t.check(lM()),t.slugify=()=>t.check(cM())}),iV=ee("ZodString",(t,e)=>{Jy.init(t,e),DT.init(t,e),t.email=n=>t.check(xL(oV,n)),t.url=n=>t.check(SL(aV,n)),t.jwt=n=>t.check($L(xV,n)),t.emoji=n=>t.check(CL(lV,n)),t.guid=n=>t.check(Ib(Nb,n)),t.uuid=n=>t.check(kL(mh,n)),t.uuidv4=n=>t.check(EL(mh,n)),t.uuidv6=n=>t.check(TL(mh,n)),t.uuidv7=n=>t.check(IL(mh,n)),t.nanoid=n=>t.check(AL(cV,n)),t.guid=n=>t.check(Ib(Nb,n)),t.cuid=n=>t.check(NL(uV,n)),t.cuid2=n=>t.check(RL(dV,n)),t.ulid=n=>t.check(PL(hV,n)),t.base64=n=>t.check(FL(_V,n)),t.base64url=n=>t.check(zL(wV,n)),t.xid=n=>t.check(DL(fV,n)),t.ksuid=n=>t.check(jL(pV,n)),t.ipv4=n=>t.check(OL(mV,n)),t.ipv6=n=>t.check(LL(gV,n)),t.cidrv4=n=>t.check(ML(yV,n)),t.cidrv6=n=>t.check(VL(vV,n)),t.e164=n=>t.check(UL(bV,n)),t.datetime=n=>t.check(FM(n)),t.date=n=>t.check(UM(n)),t.time=n=>t.check(BM(n)),t.duration=n=>t.check(qM(n))});function ot(t){return bL(iV,t)}const At=ee("ZodStringFormat",(t,e)=>{kt.init(t,e),DT.init(t,e)}),oV=ee("ZodEmail",(t,e)=>{CO.init(t,e),At.init(t,e)}),Nb=ee("ZodGUID",(t,e)=>{IO.init(t,e),At.init(t,e)}),mh=ee("ZodUUID",(t,e)=>{SO.init(t,e),At.init(t,e)}),aV=ee("ZodURL",(t,e)=>{AO.init(t,e),At.init(t,e)}),lV=ee("ZodEmoji",(t,e)=>{NO.init(t,e),At.init(t,e)}),cV=ee("ZodNanoID",(t,e)=>{RO.init(t,e),At.init(t,e)}),uV=ee("ZodCUID",(t,e)=>{PO.init(t,e),At.init(t,e)}),dV=ee("ZodCUID2",(t,e)=>{DO.init(t,e),At.init(t,e)}),hV=ee("ZodULID",(t,e)=>{jO.init(t,e),At.init(t,e)}),fV=ee("ZodXID",(t,e)=>{OO.init(t,e),At.init(t,e)}),pV=ee("ZodKSUID",(t,e)=>{LO.init(t,e),At.init(t,e)}),mV=ee("ZodIPv4",(t,e)=>{UO.init(t,e),At.init(t,e)}),gV=ee("ZodIPv6",(t,e)=>{$O.init(t,e),At.init(t,e)}),yV=ee("ZodCIDRv4",(t,e)=>{BO.init(t,e),At.init(t,e)}),vV=ee("ZodCIDRv6",(t,e)=>{WO.init(t,e),At.init(t,e)}),_V=ee("ZodBase64",(t,e)=>{qO.init(t,e),At.init(t,e)}),wV=ee("ZodBase64URL",(t,e)=>{KO.init(t,e),At.init(t,e)}),bV=ee("ZodE164",(t,e)=>{GO.init(t,e),At.init(t,e)}),xV=ee("ZodJWT",(t,e)=>{ZO.init(t,e),At.init(t,e)}),jT=ee("ZodNumber",(t,e)=>{TT.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>yM(t,r,s),t.gt=(r,s)=>t.check(Cb(r,s)),t.gte=(r,s)=>t.check(Lh(r,s)),t.min=(r,s)=>t.check(Lh(r,s)),t.lt=(r,s)=>t.check(Sb(r,s)),t.lte=(r,s)=>t.check(Oh(r,s)),t.max=(r,s)=>t.check(Oh(r,s)),t.int=r=>t.check(Rb(r)),t.safe=r=>t.check(Rb(r)),t.positive=r=>t.check(Cb(0,r)),t.nonnegative=r=>t.check(Lh(0,r)),t.negative=r=>t.check(Sb(0,r)),t.nonpositive=r=>t.check(Oh(0,r)),t.multipleOf=(r,s)=>t.check(Ab(r,s)),t.step=(r,s)=>t.check(Ab(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function mu(t){return KL(jT,t)}const kV=ee("ZodNumberFormat",(t,e)=>{JO.init(t,e),jT.init(t,e)});function Rb(t){return GL(kV,t)}const EV=ee("ZodBoolean",(t,e)=>{YO.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>vM(t,n,r)});function TV(t){return QL(EV,t)}const IV=ee("ZodUnknown",(t,e)=>{XO.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>wM()});function Pb(){return ZL(IV)}const SV=ee("ZodNever",(t,e)=>{eL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>_M(t,n,r)});function CV(t){return JL(SV,t)}const AV=ee("ZodDate",(t,e)=>{tL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>bM(t,r),t.min=(r,s)=>t.check(Lh(r,s)),t.max=(r,s)=>t.check(Oh(r,s));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function NV(t){return YL(AV,t)}const RV=ee("ZodArray",(t,e)=>{nL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>TM(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(af(n,r)),t.nonempty=n=>t.check(af(1,n)),t.max=(n,r)=>t.check(CT(n,r)),t.length=(n,r)=>t.check(AT(n,r)),t.unwrap=()=>t.element});function Yy(t,e){return uM(RV,t,e)}const PV=ee("ZodObject",(t,e)=>{sL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>IM(t,n,r,s),mt(t,"shape",()=>e.shape),t.keyof=()=>Xy(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Pb()}),t.loose=()=>t.clone({...t._zod.def,catchall:Pb()}),t.strict=()=>t.clone({...t._zod.def,catchall:CV()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>k4(t,n),t.safeExtend=n=>E4(t,n),t.merge=n=>T4(t,n),t.pick=n=>b4(t,n),t.omit=n=>x4(t,n),t.partial=(...n)=>I4(LT,t,n[0]),t.required=(...n)=>S4(MT,t,n[0])});function vo(t,e){const n={type:"object",shape:t??{},...xe(e)};return new PV(n)}const DV=ee("ZodUnion",(t,e)=>{iL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>SM(t,n,r,s),t.options=e.options});function OT(t,e){return new DV({type:"union",options:t,...xe(e)})}const jV=ee("ZodIntersection",(t,e)=>{oL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>CM(t,n,r,s)});function OV(t,e){return new jV({type:"intersection",left:t,right:e})}const LV=ee("ZodRecord",(t,e)=>{aL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>AM(t,n,r,s),t.keyType=e.keyType,t.valueType=e.valueType});function MV(t,e,n){return new LV({type:"record",keyType:t,valueType:e,...xe(n)})}const Ag=ee("ZodEnum",(t,e)=>{lL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>xM(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Ag({...e,checks:[],...xe(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new Ag({...e,checks:[],...xe(s),entries:a})}});function Xy(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Ag({type:"enum",entries:n,...xe(e)})}const VV=ee("ZodTransform",(t,e)=>{cL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>EM(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new uT(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(pu(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(pu(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function FV(t){return new VV({type:"transform",transform:t})}const LT=ee("ZodOptional",(t,e)=>{uL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>MM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Db(t){return new LT({type:"optional",innerType:t})}const zV=ee("ZodNullable",(t,e)=>{dL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>NM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function jb(t){return new zV({type:"nullable",innerType:t})}const UV=ee("ZodDefault",(t,e)=>{hL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>PM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function $V(t,e){return new UV({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():pT(e)}})}const BV=ee("ZodPrefault",(t,e)=>{fL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>DM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function WV(t,e){return new BV({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():pT(e)}})}const MT=ee("ZodNonOptional",(t,e)=>{pL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>RM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function qV(t,e){return new MT({type:"nonoptional",innerType:t,...xe(e)})}const HV=ee("ZodCatch",(t,e)=>{mL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>jM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function KV(t,e){return new HV({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const GV=ee("ZodPipe",(t,e)=>{gL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>OM(t,n,r,s),t.in=e.in,t.out=e.out});function Ob(t,e){return new GV({type:"pipe",in:t,out:e})}const QV=ee("ZodReadonly",(t,e)=>{yL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>LM(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function ZV(t){return new QV({type:"readonly",innerType:t})}const VT=ee("ZodCustom",(t,e)=>{vL.init(t,e),jt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>kM(t,n)});function JV(t,e={}){return dM(VT,t,e)}function YV(t){return hM(t)}function XV(t,e={error:`Input not instance of ${t.name}`}){const n=new VT({type:"custom",check:"custom",fn:r=>r instanceof t,abort:!0,...xe(e)});return n._zod.bag.Class=t,n}const Xs=OT([NV(),XV(_t),ot().datetime({offset:!0}).or(ot().datetime())]).nullable().optional(),e5=vo({type:Xy(["none","daily","weekly","weekdays","monthly"]).default("none"),days:Yy(mu().min(0).max(6)).optional()}).nullable(),e0=vo({id:ot().optional(),title:ot().min(1,""),description:ot().nullable().optional(),status:Xy(["todo","completed","archived"]).default("todo"),dueDate:Xs,completedAt:Xs,createdAt:Xs,ownerId:ot(),projectId:ot().nullable().optional(),labelIds:Yy(ot()).optional(),timeBlockId:ot().nullable().optional(),duration:mu().optional(),isImportant:TV().default(!1),recurrence:e5,order:mu().optional()});vo({id:ot().optional(),name:ot().min(1,"Project name is required"),color:ot().optional(),ownerId:ot(),createdAt:Xs,order:mu().optional()});vo({id:ot().optional(),name:ot().min(1,"Label name is required"),color:ot().optional(),ownerId:ot(),createdAt:Xs});const FT=vo({id:ot().optional(),name:ot().min(1,"Workspace name is required"),createdAt:Xs}),zT=vo({id:ot().optional(),name:ot().min(1),query:ot(),createdAt:Xs}),Lb=ot().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,"Time must be in HH:mm format (e.g., 09:00, 14:30)");vo({id:ot().optional(),name:ot(),start:Lb,end:Lb,color:ot().optional(),order:mu().optional()});vo({id:ot().optional(),mode:ot(),data:MV(ot(),ot()),createdAt:Xs,updatedAt:Xs,ownerId:ot(),workspaceId:ot()});const ui=pa()(Fu(t=>({currentWorkspaceId:null,workspaces:[],setCurrentWorkspaceId:e=>t({currentWorkspaceId:e}),setWorkspaces:e=>{const n=e.filter(r=>{const s=FT.safeParse(r);return s.success?!0:(console.error("Invalid workspace data:",r,s.error),!1)});t({workspaces:n})}}),{name:"workspace-storage",partialize:t=>({currentWorkspaceId:t.currentWorkspaceId})}));function t5(){return typeof window<"u"&&window.GLOBAL_APP_ID?window.GLOBAL_APP_ID:typeof __app_id<"u"?__app_id:"default-app-id"}function rl(t){return`artifacts/${t5()}/users/${t}`}function Um(t,e){return`${rl(t)}/workspaces/${e}`}const Ue={users:t=>rl(t),filters:t=>`${rl(t)}/filters`,labels:t=>`${rl(t)}/labels`,workspaces:t=>`${rl(t)}/workspaces`,timeblocks:t=>`${rl(t)}/timeblocks`,tasks:(t,e)=>`${Um(t,e)}/tasks`,projects:(t,e)=>`${Um(t,e)}/projects`,targets:(t,e)=>`${Um(t,e)}/targets`},n5={WORKSPACE_CHANGED:"workspace-changed"},r5=n5.WORKSPACE_CHANGED;let gh=null;function s5(){return ui.getState().workspaces}function i5(t,e){if(!t)return e&&e([]),()=>{};gh&&gh();const n=Ue.workspaces(t),r=go(ct(Fe,n),Lf("createdAt","asc")),s=ui.getState();return gh=fa(r,a=>{const l=a.docs.map(u=>({id:u.id,...u.data()}));if(s.setWorkspaces(l),l.length===0&&!a.metadata.hasPendingWrites)e&&e([]),o5().catch(u=>console.error("[Workspace] Default creation error:",u));else{const u=a5(l);e&&e(l),$T(u,l)}},a=>{console.error("[Workspace] Subscription error:",a),s.setWorkspaces([]),e&&e([])}),gh}async function o5(){try{const t=Qe.currentUser;if(!t)return;const e=Ue.workspaces(t.uid);(await Gs(go(ct(Fe,e),sj(1)))).empty&&await BT("")}catch(t){console.error("[Workspace] Failed to ensure default workspace:",t)}}function a5(t){if(t.length===0)return null;const e=ui.getState();let n=e.currentWorkspaceId;const r=n?t.some(s=>s.id===n):!1;return(!n||!r)&&(n=t[0].id,e.setCurrentWorkspaceId(n)),n}function or(){return ui.getState().currentWorkspaceId}function UT(t){if(!t)return;const e=ui.getState();e.currentWorkspaceId!==t&&(e.setCurrentWorkspaceId(t),$T(t,e.workspaces))}function $T(t,e){const n=new CustomEvent(r5,{detail:{workspaceId:t,workspaces:e}});document.dispatchEvent(n)}async function BT(t){try{FT.pick({name:!0}).parse({name:t});const e=Qe.currentUser;if(!e)throw new Error("Authentication required");const n=Ue.workspaces(e.uid);return{id:(await Pr(ct(Fe,n),{name:t,createdAt:Is()})).id,name:t}}catch(e){throw console.error("[Workspace] Add error:",e),e}}async function l5(t,e){try{const n=Qe.currentUser;if(!n)throw new Error("Authentication required");const r=Ue.workspaces(n.uid);await Wl(sr(Fe,r,t),{name:e})}catch(n){console.error("[Workspace] Update error:",n)}}const c5=()=>{const t=ui(r=>r.workspaces),[e,n]=O.useState(!0);return O.useEffect(()=>{const r=ty(Qe,s=>{if(s){const a=i5(s.uid,()=>{n(!1)});return()=>a()}else n(!1)});return()=>r()},[]),{workspaces:t,loading:e}},u5=()=>{const{workspaces:t,loading:e}=c5(),{openModal:n}=Pn(),[r,s]=O.useState(!1),a=O.useRef(null),l=or(),u=t.find(h=>h.id===l);return O.useEffect(()=>{const h=m=>{a.current&&!a.current.contains(m.target)&&s(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),e?p.jsx("div",{className:"h-8 w-32 bg-gray-100 dark:bg-gray-800 animate-pulse rounded"}):p.jsxs("div",{className:"relative",ref:a,children:[p.jsxs("button",{onClick:()=>s(!r),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md px-2 py-1 transition-colors group",children:[p.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 max-w-[140px] truncate",children:u?u.name:"..."}),p.jsx("svg",{className:Ve("w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-transform",r?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),r&&p.jsxs("div",{className:"absolute left-0 mt-2 w-60 origin-top-left rounded-lg shadow-2xl bg-white dark:bg-gray-800 ring-1 ring-black/5 z-50 border border-gray-100 dark:border-gray-700 overflow-hidden animate-fade-in",children:[p.jsx("div",{className:"py-1 max-h-[300px] overflow-y-auto custom-scrollbar",children:t.map(h=>{const m=h.id===l;return p.jsxs("button",{onClick:()=>{h.id&&UT(h.id),s(!1)},className:Ve("w-full text-left px-4 py-2 text-sm flex items-center justify-between transition-colors",m?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[p.jsx("span",{className:"truncate",children:h.name}),m&&p.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]},h.id)})}),p.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),p.jsx("div",{className:"p-1",children:p.jsxs("button",{onClick:()=>{s(!1),n("workspace-edit",null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700/50 transition-colors rounded-md",children:[p.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),""]})})]})]})},d5=({sidebarContent:t,title:e,children:n})=>{const{toggleSidebar:r,isSidebarOpen:s}=Wy(),{openModal:a}=Pn();return p.jsxs("div",{className:"h-full flex overflow-hidden bg-premium-gradient text-gray-800 dark:text-white antialiased",children:[s&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-20 lg:hidden transition-opacity duration-300",onClick:r}),p.jsx(p4,{children:t}),p.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden",id:"main-content",children:[p.jsxs("header",{className:"h-14 border-b border-gray-200 dark:border-gray-800 flex items-center px-4 justify-between bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-10 sticky top-0",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[!s&&p.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"","aria-label":"",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),p.jsx(u5,{}),p.jsx("h1",{className:"font-bold text-lg border-l border-gray-300 dark:border-gray-700 pl-3 ml-1 truncate",children:e})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("button",{onClick:()=>a("settings"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Settings","aria-label":"Settings",children:p.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]}),p.jsx("div",{className:"flex-1 p-2 md:p-4 lg:p-6 overflow-hidden flex flex-col",children:p.jsx("div",{className:Ve("w-full mx-auto bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm shadow-xl md:shadow-2xl rounded-2xl md:rounded-[2rem] overflow-hidden relative flex-1 border border-white/20 dark:border-gray-700/30",Vt.LAYOUT.CONTAINER_WIDTH_CLASS),children:n})})]})]})};function h5(t,e){return t===e?!0:!t||!e||t.length!==e.length?!1:JSON.stringify(t)===JSON.stringify(e)}function f5(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;const n=[...t].sort((s,a)=>(s.id||"").localeCompare(a.id||"")),r=[...e].sort((s,a)=>(s.id||"").localeCompare(a.id||""));for(let s=0;s<n.length;s++){const a=n[s],l=r[s];if(a.id!==l.id||a.status!==l.status||a.title!==l.title||a.description!==l.description||a.projectId!==l.projectId||a.timeBlockId!==l.timeBlockId||a.duration!==l.duration||a.isImportant!==l.isImportant)return!1;const u=a.dueDate instanceof Date?a.dueDate.getTime():a.dueDate,h=l.dueDate instanceof Date?l.dueDate.getTime():l.dueDate;if(u!==h)return!1}return!0}function p5(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].id!==e[n].id||t[n].name!==e[n].name||t[n].color!==e[n].color)return!1;return!0}const m5=["permission-denied","invalid-argument","unauthenticated","not-found","already-exists","failed-precondition"];async function di(t,e=3,n=1e3,r=!1){let s;for(let a=0;a<=e;a++)try{return await t()}catch(l){if(s=l,a===e)break;const u=(l==null?void 0:l.code)||"";if(m5.some(v=>u.includes(v)))throw l;const m=n*Math.pow(2,a);r&&console.warn(`[Retry] Attempt ${a+1} failed. Retrying in ${m}ms...`,(l==null?void 0:l.message)||l),await new Promise(v=>setTimeout(v,m))}throw s}const no=new Map,zc=new Map,yh=new Map;function g5(t){return no.has(t)}function Ng(t){const e=no.get(t)||[],n=zc.get(t);if(n){const r=[...e];n.forEach(s=>s(r))}}function y5(t,e){no.set(t,e),Ng(t)}function v5(t,e,n){zc.has(e)||zc.set(e,new Set);const r=zc.get(e);r.add(n);const s=no.get(e);if(s&&queueMicrotask(()=>n([...s])),!yh.has(e)){const a=Ue.projects(t,e),l=go(ct(Fe,a),Lf("createdAt","asc")),u=fa(l,h=>{const m=h.docs.map(w=>({id:w.id,...w.data()})),v=no.get(e);v&&p5(v,m)||(no.set(e,m),Ng(e))},h=>{console.error("Error subscribing to projects:",h),no.set(e,[]),Ng(e)});yh.set(e,u)}return()=>{if(r.delete(n),r.size===0){const a=yh.get(e);a&&(a(),yh.delete(e)),zc.delete(e)}}}function _5(t){return no.get(t)||[]}async function w5(t,e,n){return di(async()=>{const r=Ue.projects(t,e);await Pr(ct(Fe,r),{name:n,ownerId:t,createdAt:Is()})})}async function b5(t,e,n,r){return di(async()=>{const s=Ue.projects(t,e),a=sr(Fe,s,n);await Wl(a,r)})}async function x5(t,e,n){return di(async()=>{const r=Ue.projects(t,e);await Mu(sr(Fe,r,n))})}async function k5(t,e,n){return di(async()=>{const r=uj(Fe),s=Ue.projects(t,e);n.forEach((a,l)=>{if(a.id){const u=sr(Fe,s,a.id);r.update(u,{order:l})}}),await r.commit()})}function t0(){var n;const t=(n=Qe.currentUser)==null?void 0:n.uid,e=or();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}const Mb=t=>{const e=t||or();return e?_5(e):[]},Vb=t=>{const e=t||or();return e?g5(e):!1},E5=(t,e)=>{const n=e||or();n&&y5(n,t)},T5=(t,e)=>{const n=typeof t=="function"?t:e,r=typeof t=="string"?t:or(),s=Qe.currentUser;return s&&r&&typeof n=="function"?v5(s.uid,r,n):(typeof n=="function"&&n([]),()=>{})},I5=async(t,e=null)=>{const n=Qe.currentUser;if(!n)throw new Error("Authentication required.");const r=e||or();if(!r)throw new Error("Workspace selection required.");return w5(n.uid,r,t)},S5=async(t,e)=>{const{userId:n,workspaceId:r}=t0();return b5(n,r,t,e)},C5=async t=>{const{userId:e,workspaceId:n}=t0();return x5(e,n,t)},A5=async t=>{const{userId:e,workspaceId:n}=t0();return k5(e,n,t)};function gu(t){console.error("[ErrorLogger]",t)}function N5(){window.onerror=(t,e,n,r,s)=>(gu({timestamp:new Date().toISOString(),type:"error",message:String(t),stack:s==null?void 0:s.stack,url:e,line:n,column:r}),!1),window.onunhandledrejection=t=>{const e=t.reason;gu({timestamp:new Date().toISOString(),type:"unhandledrejection",message:(e==null?void 0:e.message)||String(e),stack:e==null?void 0:e.stack})},console.info("[ErrorLogger] Initialized")}function R5(t,e){gu({timestamp:new Date().toISOString(),type:"react",message:t.message,stack:t.stack,componentStack:e})}class P5{constructor(){Fi(this,"isListenerInitialized",!1)}getCurrentUserId(){var e;return((e=Qe.currentUser)==null?void 0:e.uid)||null}getInitialAuthToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return window.GLOBAL_INITIAL_AUTH_TOKEN;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return __initial_auth_token}catch{}return null}async tryInitialTokenLogin(){if(this.isListenerInitialized)return;this.isListenerInitialized=!0;const e=this.getInitialAuthToken();if(e)try{await GN(Qe,e),console.log("[Auth] Initial token login success")}catch(n){gu({timestamp:new Date().toISOString(),type:"error",message:`Initial token login failed: ${n.message}`,stack:n.stack,url:"auth.ts"})}}initAuthListener(e,n){return this.tryInitialTokenLogin(),ty(Qe,s=>{s?e(s):n()})}async loginWithEmail(e,n){return await mk(Qe,e,n)}async logout(){try{await gk(Qe)}catch(e){throw gu({timestamp:new Date().toISOString(),type:"error",message:`Logout failed: ${e.message}`,stack:e.stack,url:"auth.ts"}),e}}async updateUserAuthPassword(e){const n=Qe.currentUser;if(!n)throw new Error("Authentication required: No current user.");await ZN(n,e)}}const D5=new P5,j5=(t,e)=>D5.initAuthListener(t,e),n0=()=>{var a;const t=ui(l=>l.currentWorkspaceId),[e,n]=O.useState(((a=Qe.currentUser)==null?void 0:a.uid)||null),[r,s]=O.useState(!0);return O.useEffect(()=>{const l=j5(u=>{n(u.uid),s(!1)},()=>{n(null),s(!1)});return()=>{l()}},[]),{workspaceId:t,userId:e,loading:r}},Uf=()=>{const{workspaceId:t,loading:e}=n0(),[n,r]=O.useState(()=>t?Mb(t):[]),[s,a]=O.useState(()=>t?!Vb(t):!0);return O.useEffect(()=>{if(!t){r([]),e||a(!1);return}Vb(t)?(r(Mb(t)),a(!1)):a(!0);let u=!0;const h=T5(t,m=>{u&&(r(m),a(!1))});return()=>{u=!1,h()}},[t,e]),{projects:n,loading:s||e,setProjectsOverride:u=>{t&&(r(u),E5(u,t))}}};let Uc=[];const O5=[{id:"tb_morning",name:"06:00 - 09:00",start:"06:00",end:"09:00",color:"#EF4444",order:0},{id:"tb_afternoon",name:"13:00 - 17:00",start:"13:00",end:"17:00",color:"#3B82F6",order:1},{id:"tb_night",name:"20:00 - 22:00",start:"20:00",end:"22:00",color:"#8B5CF6",order:2}];function L5(t,e){var a;const n=(a=Qe.currentUser)==null?void 0:a.uid;if(!n)return Uc=[...O5],typeof e=="function"&&e(Uc),()=>{};const r=Ue.timeblocks(n),s=go(ct(Fe,r),Lf("order","asc"));return fa(s,l=>{Uc=l.docs.map(u=>({id:u.id,...u.data()})),typeof e=="function"&&e(Uc)},l=>{console.error("[TimeBlocks] Subscription error:",l)})}async function M5(t){var n;const e=(n=Qe.currentUser)==null?void 0:n.uid;if(!e){console.error("Authentication required for TimeBlock operation.");return}try{const r=Ue.timeblocks(e),s=t.id||crypto.randomUUID(),a=t.order!==void 0?t.order:Math.max(...Uc.map(u=>u.order||0),-1)+1,l={name:t.name,start:t.start,end:t.end,color:t.color,order:a,updatedAt:Is()};return await aj(sr(Fe,r,s),l,{merge:!0}),!0}catch(r){console.error("[TimeBlocks] Save error:",r)}}async function V5(t){var n;const e=(n=Qe.currentUser)==null?void 0:n.uid;if(e)try{const r=Ue.timeblocks(e);return await Mu(sr(Fe,r,t)),!0}catch(r){console.error("[TimeBlocks] Delete error:",r)}}const zu=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!0),s=or();return O.useEffect(()=>{if(!s){e([]),r(!1);return}let a=!0;const l=L5(s,u=>{a&&(e(u),r(!1))});return()=>{a=!1,l()}},[s]),{timeBlocks:t,loading:n}},F5=t=>t instanceof Date?_t.fromDate(t):t;async function z5(t,e){if(!t||!e)throw new Error("Missing parameters for backup.");try{const n=ct(Fe,Ue.tasks(t,e)),r=ct(Fe,Ue.projects(t,e)),s=ct(Fe,Ue.labels(t)),a=ct(Fe,Ue.targets(t,e)),l=ct(Fe,Ue.timeblocks(t)),u=ct(Fe,Ue.filters(t)),[h,m,v,w,x,I]=await Promise.all([Gs(n),Gs(r),Gs(s),Gs(a),Gs(l),Gs(u)]),C=E=>E.docs.map(A=>{const j=A.data(),W={id:A.id};for(const z in j)W[z]=j[z]instanceof _t?j[z].toDate().toISOString():j[z];return W});return{version:"1.3",exportedAt:new Date().toISOString(),userId:t,workspaceId:e,tasks:C(h),projects:C(m),labels:C(v),targets:C(w),timeBlocks:C(x),customFilters:C(I)}}catch(n){throw console.error("[Backup] createBackupData failed:",n),n}}async function U5(t,e,n){if(!t||!e||!n)throw new Error("Invalid import parameters.");try{const{tasks:r=[],projects:s=[],labels:a=[],targets:l=[],timeBlocks:u=[],customFilters:h=[]}=n,m=new Map,v=new Map,w=await Gs(ct(Fe,Ue.labels(t))),x=new Map;w.forEach(C=>x.set(C.data().name,C.id));for(const C of a)if(C.name)if(x.has(C.name))v.set(C.id,x.get(C.name));else{const E={...C};delete E.id;const A=await Pr(ct(Fe,Ue.labels(t)),E);v.set(C.id,A.id),x.set(C.name,A.id)}for(const C of s){const E={...C};delete E.id,typeof E.createdAt=="string"&&(E.createdAt=new Date(E.createdAt));const A=await Pr(ct(Fe,Ue.projects(t,e)),E);m.set(C.id,A.id)}for(const C of u){const E={...C};delete E.id,await Pr(ct(Fe,Ue.timeblocks(t)),E)}for(const C of h){const E={...C};delete E.id,typeof E.createdAt=="string"&&(E.createdAt=new Date(E.createdAt)),await Pr(ct(Fe,Ue.filters(t)),E)}for(const C of l){const E={...C};delete E.id,typeof E.createdAt=="string"&&(E.createdAt=new Date(E.createdAt)),typeof E.updatedAt=="string"&&(E.updatedAt=new Date(E.updatedAt)),E.ownerId=t,E.workspaceId=e,await Pr(ct(Fe,Ue.targets(t,e)),E)}const I=r.map(async C=>{const E={...C};return delete E.id,typeof E.createdAt=="string"&&(E.createdAt=new Date(E.createdAt)),typeof E.dueDate=="string"&&(E.dueDate=new Date(E.dueDate)),E.dueDate&&(E.dueDate=F5(E.dueDate)),E.projectId&&m.has(E.projectId)?E.projectId=m.get(E.projectId):E.projectId=null,Array.isArray(E.labelIds)&&(E.labelIds=E.labelIds.map(A=>v.get(A)).filter(A=>A)),E.ownerId=t,Pr(ct(Fe,Ue.tasks(t,e)),E)});return await Promise.all(I),{tasksCount:r.length,projectsCount:s.length,labelsCount:a.length,targetsCount:l.length}}catch(r){throw console.error("[Backup] importBackupData failed:",r),r}}function $5(t,e){var a;const n=(a=Qe.currentUser)==null?void 0:a.uid;if(!n)return e([]),()=>{};const r=Ue.filters(n),s=go(ct(Fe,r));return fa(s,l=>{const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("[Filters] Subscription error:",l),e([])})}async function B5(t){var l;const e=(l=Qe.currentUser)==null?void 0:l.uid;if(!e)throw Wn.error(""),new Error("Authentication required");const n=zT.pick({name:!0,query:!0}).safeParse(t);if(!n.success){const u=n.error.issues.map(h=>h.message).join(", ");throw console.error("[Filters] Validation failed:",n.error.flatten()),Wn.error(`: ${u}`),new Error(`Validation failed: ${u}`)}const r=Ue.filters(e),{id:s,...a}=t;await Pr(ct(Fe,r),{...a,ownerId:e,createdAt:Is()})}async function W5(t,e){var u;const n=(u=Qe.currentUser)==null?void 0:u.uid;if(!n)throw Wn.error(""),new Error("Authentication required");const r=zT.partial().safeParse(e);if(!r.success){const h=r.error.issues.map(m=>m.message).join(", ");throw console.error("[Filters] Validation failed:",r.error.flatten()),Wn.error(`: ${h}`),new Error(`Validation failed: ${h}`)}const s=Ue.filters(n),{id:a,...l}=e;await Wl(sr(Fe,s,t),{...l,updatedAt:Is()})}let Rg=[];function q5(){return Rg}function H5(t,e){if(!t)return e([]),()=>{};const n=Ue.labels(t),r=go(ct(Fe,n));return fa(r,s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));Rg=a,e(a)},s=>{console.error("[Labels] Subscription error:",s),Rg=[],e([])})}async function K5(t,e,n){const r=Ue.labels(t);await Pr(ct(Fe,r),{name:e,color:n,ownerId:t,createdAt:Is()})}async function G5(t,e,n){const r=Ue.labels(t),s=sr(Fe,r,e);return Wl(s,n)}async function Q5(t,e){const n=Ue.labels(t);await Mu(sr(Fe,n,e))}const Z5=q5;function r0(){var e;const t=(e=Qe.currentUser)==null?void 0:e.uid;if(!t)throw console.error("Authentication required for label operation."),new Error("Authentication required.");return t}function J5(t,e){var r;const n=(r=Qe.currentUser)==null?void 0:r.uid;return n?H5(n,e):(e([]),()=>{})}async function Y5(t,e){const n=r0();return K5(n,t,e)}async function X5(t,e){const n=r0();return G5(n,t,e)}async function eF(t){const e=r0();return Q5(e,t)}async function tF(t){const e=Qe.currentUser;if(!e)throw new Error("User not authenticated");const n=Ue.tasks(e.uid,t),s=(await Gs(ct(Fe,n))).docs.map(h=>({id:h.id,...h.data()})),a=new Map;for(const h of s){if(!h.title)continue;const m=h.title.trim(),v=a.get(m)||[];v.push(h),a.set(m,v)}let l=0;const u=[];for(const[h,m]of a.entries())if(m.length>1){m.sort((w,x)=>{const I=A=>{if(!A)return 0;if(typeof A=="object"&&"toDate"in A&&typeof A.toDate=="function")return A.toDate().getTime();const j=new Date(A);return isNaN(j.getTime())?0:j.getTime()},C=I(w.createdAt),E=I(x.createdAt);return C-E});const v=m.slice(1);for(const w of v)w.id&&(console.log(`[Cleanup] Deleting duplicate task: "${w.title}" (${w.id})`),u.push(Mu(sr(Fe,n,w.id))),l++)}return await Promise.all(u),l}const $m=new Map;function nF(t,e,n){const r=Ue.targets(t,e),s=go(ct(Fe,r),Lf("createdAt","desc"));let a=!0;return fa(s,l=>{const u=l.docs.map(m=>({id:m.id,...m.data()})),h=$m.get(e);if(h&&h5(h,u)){a&&n(h),a=!1;return}$m.set(e,u),a=!1,n(u)},l=>{console.error("Error subscribing to targets:",l),$m.set(e,[]),n([])})}async function rF(t,e,n){return di(async()=>{const r=Ue.targets(t,e),s={...n,ownerId:t,workspaceId:e,createdAt:Is(),updatedAt:Is()};delete s.id,await Pr(ct(Fe,r),s)})}function sF(){var n;const t=(n=Qe.currentUser)==null?void 0:n.uid,e=or();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}const iF=(t,e)=>{const n=typeof t=="function"?t:e,r=typeof t=="string"?t:or(),s=Qe.currentUser;return s&&r&&typeof n=="function"?nF(s.uid,r,n):(typeof n=="function"&&n([]),()=>{})},oF=async t=>{const{userId:e,workspaceId:n}=sF();return rF(e,n,t)},Dl={TASK_CREATE_SUCCESS:"",TASK_CREATE_FAIL:"",TASK_UPDATE_SUCCESS:"",TASK_UPDATE_FAIL:"",TASK_DELETE_SUCCESS:"",TASK_DELETE_FAIL:"",TASK_COMPLETE_SUCCESS:" ",TASK_STATUS_UPDATE_FAIL:"",TASK_MOVE_FAIL:"",AUTH_LOGIN_SUCCESS:"",AUTH_LOGIN_FAIL:"",AUTH_LOGOUT_SUCCESS:"",PROJECT_REORDER_FAIL:""};function un(t){if(!t)return null;if(t instanceof Date)return t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();const e=new Date(t);return isNaN(e.getTime())?null:e}const Fb=(t,e)=>{const n=un(t),r=un(e);return!n||!r?!1:n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()&&n.getDate()===r.getDate()},aF=t=>{const e=un(t);if(!e)return!1;const n=new Date;return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()},lF=(t,e=7)=>{const n=un(t);if(!n)return!1;const r=new Date;r.setHours(0,0,0,0);const s=new Date(r);s.setDate(r.getDate()+1);const a=new Date(r);return a.setDate(r.getDate()+e+1),n>=s&&n<a};function $f(t=new Date){const e=un(t)||new Date,n=new Date(e);return n.setHours(0,0,0,0),n}function cF(t=new Date,e=1){const n=un(t)||new Date,r=n.getDay(),s=n.getDate()-r+(r<e?e-7:e),a=new Date(n);return a.setDate(s),$f(a)}function uF(t){const e=un(t);if(!e)return"";const n=new Date,r=$f(n),s=Math.round((e.getTime()-r.getTime())/(1e3*60*60*24));if(s===0)return"";if(s===1)return"";if(s===-1)return"";const a=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),u=String(e.getDate()).padStart(2,"0");return a!==n.getFullYear()?`${a}/${l}/${u}`:`${l}/${u}`}const dF=t=>{const e=un(t);if(!e)return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${s}`},hF=t=>{if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e};function fF(t){const e=un(t);if(!e)return"text-gray-500";const n=$f(new Date),r=Math.round((e.getTime()-n.getTime())/(1e3*60*60*24));return r<0?"text-red-500 font-bold":r===0?"text-green-600 dark:text-green-400 font-medium":r===1?"text-orange-500 dark:text-orange-400 font-medium":"text-gray-500 dark:text-gray-400"}function pF(t,e){var r;if(!t||!(e!=null&&e.type))return null;const n=new Date(un(t));switch(e.type){case"daily":return n.setDate(n.getDate()+1),n;case"weekly":{if(!((r=e.days)!=null&&r.length))return null;const s=n.getDay();for(let a=1;a<=7;a++){const l=(s+a)%7;if(e.days.includes(l))return n.setDate(n.getDate()+a),n}return null}case"weekdays":do n.setDate(n.getDate()+1);while(n.getDay()===0||n.getDay()===6);return n;case"monthly":return n.setMonth(n.getMonth()+1),n;default:return null}}function mF(t){const e=$f(new Date);if(!(t!=null&&t.type)||t.type==="daily"||t.type==="monthly")return e;if(t.type==="weekly"&&t.days&&t.days.length>0){const n=e.getDay();for(let r=0;r<=6;r++)if(t.days.includes((n+r)%7))return e.setDate(e.getDate()+r),e}if(t.type==="weekdays"){for(;e.getDay()===0||e.getDay()===6;)e.setDate(e.getDate()+1);return e}return e}function gF(t,e){if(!t||!e)return 0;const[n,r]=t.split(":").map(Number),[s,a]=e.split(":").map(Number);if(isNaN(n)||isNaN(r)||isNaN(s)||isNaN(a))return 0;const l=n*60+r;let u=s*60+a;return u<l&&(u+=1440),u-l}const Bm=t=>t instanceof _t?t.toDate():t instanceof Date?t:void 0,WT=t=>t instanceof Date?_t.fromDate(t):t;function yF(t,e){if(!e||typeof e!="object")return console.warn(`[deserializeTask] Invalid data for task ${t}:`,e),{id:t,title:"Invalid Task",status:"todo",ownerId:""};const n=e.recurrence||null,r={id:t,title:String(e.title||"Untitled"),description:e.description?String(e.description):null,status:e.status==="completed"||e.status==="todo"||e.status==="archived"?e.status:"todo",dueDate:Bm(e.dueDate)||void 0,createdAt:Bm(e.createdAt)||void 0,completedAt:Bm(e.completedAt)||void 0,ownerId:String(e.ownerId||""),projectId:e.projectId?String(e.projectId):null,labelIds:Array.isArray(e.labelIds)?e.labelIds.map(String):[],timeBlockId:e.timeBlockId?String(e.timeBlockId):null,duration:typeof e.duration=="number"?e.duration:null,isImportant:!!e.isImportant,recurrence:n};return e0.safeParse(r).success,r}const Qo=class Qo{constructor(){Fi(this,"cachedTasksMap",new Map);Fi(this,"listeners",new Map);Fi(this,"unsubscribes",new Map);Fi(this,"currentWorkspaceId",null)}static getInstance(){return Qo.instance||(Qo.instance=new Qo),Qo.instance}notifyListeners(e){const n=this.cachedTasksMap.get(e)||[],r=this.listeners.get(e);if(r){const s=[...n];r.forEach(a=>a(s))}}reset(e){var n;e?((n=this.unsubscribes.get(e))==null||n(),this.unsubscribes.delete(e),this.listeners.delete(e),this.cachedTasksMap.delete(e)):(this.unsubscribes.forEach(r=>r()),this.unsubscribes.clear(),this.listeners.clear(),this.cachedTasksMap.clear()),this.currentWorkspaceId=null}getTask(e,n){const r=this.cachedTasksMap.get(e);return r==null?void 0:r.find(s=>s.id===n)}getTasks(e){return this.cachedTasksMap.get(e)||[]}isInitialized(e){return this.cachedTasksMap.has(e)}setCache(e,n){this.cachedTasksMap.set(e,n),this.notifyListeners(e)}subscribe(e,n,r){if(!e||!n)return r([]),()=>{};this.currentWorkspaceId=n,this.listeners.has(n)||this.listeners.set(n,new Set);const s=this.listeners.get(n);s.add(r);const a=this.cachedTasksMap.get(n);if(a&&queueMicrotask(()=>r([...a])),!this.unsubscribes.has(n)){const l=Ue.tasks(e,n),u=go(ct(Fe,l)),h=fa(u,m=>{const v=m.docs.map(x=>yF(x.id,x.data())),w=this.cachedTasksMap.get(n);w&&f5(w,v)||(this.cachedTasksMap.set(n,v),this.notifyListeners(n))},m=>{console.error("[Tasks] Subscription error:",m)});this.unsubscribes.set(n,h)}return()=>{if(s.delete(r),s.size===0){const l=this.unsubscribes.get(n);l&&(l(),this.unsubscribes.delete(n))}}}};Fi(Qo,"instance");let Pg=Qo;const Ss=Pg.getInstance();function vF(t,e){return Ss.getTask(t,e)}function _F(t){return Ss.getTasks(t)}function wF(t){return Ss.isInitialized(t)}function bF(t,e,n){return Ss.subscribe(t,e,n)}function qT(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!==void 0))}async function HT(t,e,n){return di(async()=>{const r=Ue.tasks(t,e),s=qT({...n});return s.dueDate&&(s.dueDate=WT(s.dueDate)),delete s.id,await Pr(ct(Fe,r),{...s,ownerId:t,status:"todo",createdAt:Is()})})}async function xF(t,e,n,r){const s=Ss.getTasks(e);let a=s==null?void 0:s.find(l=>l.id===n);if(s){const l=s.map(u=>u.id===n?{...u,status:r,completedAt:r==="completed"?new Date:void 0}:u);Ss.setCache(e,l)}if(r==="completed"&&(a!=null&&a.recurrence)&&a.recurrence.type!=="none"){const l=pF(a.dueDate??null,a.recurrence);if(l){const u={title:a.title,description:a.description,projectId:a.projectId,labelIds:a.labelIds,timeBlockId:a.timeBlockId,duration:a.duration,isImportant:a.isImportant,recurrence:a.recurrence,dueDate:l,status:"todo"};HT(t,e,u).catch(h=>console.error("Failed to create recurring task:",h))}}return di(async()=>{const l=Ue.tasks(t,e),u={status:r};r==="completed"?u.completedAt=Is():u.completedAt=null,await Wl(sr(Fe,l,n),u)})}async function kF(t,e,n,r){const s=Ss.getTasks(e);if(s){const a=s.map(l=>l.id===n?{...l,...r}:l);Ss.setCache(e,a)}return di(async()=>{const a=Ue.tasks(t,e),l=qT({...r});l.dueDate!==void 0&&(l.dueDate=WT(l.dueDate)),await Wl(sr(Fe,a,n),l)})}async function EF(t,e,n){const r=Ss.getTasks(e);if(r){const s=r.filter(a=>a.id!==n);Ss.setCache(e,s)}return di(async()=>{const s=Ue.tasks(t,e);await Mu(sr(Fe,s,n))})}function Bf(){var n;const t=(n=Qe.currentUser)==null?void 0:n.uid,e=or();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}async function KT(t){try{const{userId:e,workspaceId:n}=Bf(),s=e0.partial().required({title:!0}).safeParse(t);s.success||console.warn("[addTask] Validation warning:",s.error.flatten()),await HT(e,n,t)}catch(e){throw console.error("Failed to add task:",e),Wn.error(Dl.TASK_CREATE_FAIL),e}}async function s0(t,e){try{const{userId:n,workspaceId:r}=Bf(),s=e0.partial().safeParse(e);s.success||console.warn("[updateTask] Validation warning:",s.error.flatten()),await kF(n,r,t,e)}catch(n){throw console.error("Failed to update task:",n),Wn.error(Dl.TASK_UPDATE_FAIL),n}}async function TF(t){try{const{userId:e,workspaceId:n}=Bf();await EF(e,n,t),Wn.success(Dl.TASK_DELETE_SUCCESS)}catch(e){throw console.error("Failed to delete task:",e),Wn.error(Dl.TASK_DELETE_FAIL),e}}async function IF(t,e){try{const{userId:n,workspaceId:r}=Bf(),s=vF(r,t),l=((s==null?void 0:s.status)||e||"todo")==="completed"?"todo":"completed";await xF(n,r,t,l),l==="completed"&&Wn.success(Dl.TASK_COMPLETE_SUCCESS)}catch(n){throw console.error("Failed to toggle status:",n),Wn.error(Dl.TASK_STATUS_UPDATE_FAIL),n}}function SF(t,e){const n=Qe.currentUser;return!n||!t?(typeof e=="function"&&e([]),()=>{}):bF(n.uid,t,e)}const zb=t=>{const e=t||or();return e?_F(e):[]},Ub=t=>{const e=t||or();return e?wF(e):!1},Cs=pa()(Fu(t=>({filterType:"inbox",targetId:null,query:"",showCompleted:!1,sortCriteria:"createdAt_desc",setFilter:(e,n=null)=>t({filterType:e,targetId:n,query:""}),setSearchQuery:e=>t({query:e,filterType:"search"}),clearFilter:()=>t({filterType:"inbox",targetId:null,query:""}),setShowCompleted:e=>t({showCompleted:e}),setSortCriteria:e=>t({sortCriteria:e})}),{name:"filter-storage",partialize:t=>({filterType:t.filterType,targetId:t.targetId,query:t.query,showCompleted:t.showCompleted,sortCriteria:t.sortCriteria})})),As=pa()(Fu(t=>({themeMode:"system",fontEn:"Inter",fontJp:"M PLUS 2",fontSize:"md",density:"normal",language:"ja",setThemeMode:e=>t({themeMode:e}),setFontEn:e=>t({fontEn:e}),setFontJp:e=>t({fontJp:e}),setFontSize:e=>t({fontSize:e}),setDensity:e=>t({density:e}),setLanguage:e=>t({language:e})}),{name:"app-settings",partialize:t=>({themeMode:t.themeMode,fontEn:t.fontEn,fontJp:t.fontJp,fontSize:t.fontSize,density:t.density,language:t.language})})),Uu=pa()(Fu(t=>({currentView:"tasks",viewData:null,setView:(e,n=null)=>t({currentView:e,viewData:n})}),{name:"view-storage",partialize:t=>({currentView:t.currentView})})),$b='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',_o=({isOpen:t,onClose:e,title:n,children:r,className:s,zIndex:a=100,size:l="md"})=>{const u=O.useRef(null),h={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-3xl",xl:"max-w-5xl",full:"max-w-full m-4 h-[calc(100vh-2rem)]"};return O.useEffect(()=>{const m=w=>{w.key==="Escape"&&e()},v=w=>{if(w.key!=="Tab"||!u.current)return;const x=u.current.querySelectorAll($b);if(x.length===0){w.preventDefault();return}const I=x[0],C=x[x.length-1];w.shiftKey?document.activeElement===I&&(w.preventDefault(),C.focus()):document.activeElement===C&&(w.preventDefault(),I.focus())};if(t){window.addEventListener("keydown",m),window.addEventListener("keydown",v),document.body.style.overflow="hidden";const w=setTimeout(()=>{var I;const x=(I=u.current)==null?void 0:I.querySelectorAll($b);x&&x.length>0?x[0].focus():u.current&&u.current.focus()},50);return()=>clearTimeout(w)}return()=>{window.removeEventListener("keydown",m),window.removeEventListener("keydown",v),document.body.style.overflow=""}},[t,e]),t?sl.createPortal(p.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4 sm:p-6 animate-fade-in",style:{zIndex:a},role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,children:[p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:e,"aria-hidden":"true"}),p.jsxs("div",{ref:u,tabIndex:-1,className:Ve("relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full overflow-hidden flex flex-col transform transition-all animate-scale-in outline-none",h[l],s),children:[n&&p.jsxs("div",{className:"px-modal py-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[p.jsx("h3",{id:"modal-title",className:"text-lg font-bold text-gray-900 dark:text-white",children:n}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-modal custom-scrollbar",children:r})]})]}),document.body):null},Mh="none",CF=t=>{const e={project:[],timeblock:[],duration:[],date:[]};return t&&t.split(/\s+/).forEach(n=>{if(!n.includes(":"))return;const[r,s]=n.split(":");if(Object.prototype.hasOwnProperty.call(e,r)){const a=s.split(",").map(l=>r==="timeblock"&&(l==="null"||l==="none")?Mh:l);e[r]=[...e[r],...a]}}),e},AF=[30,45,60,75,90],NF=[{id:"today",name:""},{id:"tomorrow",name:""},{id:"week",name:""},{id:"next-week",name:""}],RF=({isOpen:t,data:e,zIndex:n})=>{const{closeModal:r}=Pn(),s=!!t,a=e,l=!!(a!=null&&a.id),{projects:u}=Uf(),{timeBlocks:h}=zu(),[m,v]=O.useState(""),[w,x]=O.useState({project:[],timeblock:[],duration:[],date:[]}),[I,C]=O.useState(!1),[E,A]=O.useState(null);O.useEffect(()=>{s&&(v((a==null?void 0:a.name)||""),x(CF((a==null?void 0:a.query)||"")),A(null),C(!1))},[s,a]);const j=(z,Z)=>{x(K=>{const ne=K[z],R=ne.includes(Z)?ne.filter(T=>T!==Z):[...ne,Z];return{...K,[z]:R}})},W=O.useCallback(async()=>{const z=m.trim();if(!z){A("");return}const Z={project:w.project,timeblock:w.timeblock.map(R=>R===Mh?"null":R),duration:w.duration,date:w.date},K=Object.entries(Z).filter(([R,T])=>T.length>0).map(([R,T])=>`${R}:${T.join(",")}`);if(K.length===0){A("1");return}const ne=K.join(" ");C(!0),A(null);try{const R={name:z,query:ne,type:"custom"};l&&(a!=null&&a.id)?await W5(a.id,R):await B5(R),document.dispatchEvent(new CustomEvent("filters-updated")),r()}catch(R){A(": "+(R.message||"")),C(!1)}},[m,w,l,a,r]);return s?p.jsx(_o,{isOpen:s,onClose:r,title:l?"":"",className:"max-w-4xl",children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"filter-name-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),p.jsx("input",{id:"filter-name-input",name:"filterName",type:"text",value:m,onChange:z=>v(z.target.value),placeholder:": ",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg outline-none focus:ring-2 focus:ring-blue-500/20 dark:text-white",autoFocus:!0})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(vh,{title:"",items:u,selectedItems:w.project,onToggle:z=>j("project",z)}),p.jsx(vh,{title:"",items:[...h,{id:Mh,name:""}],selectedItems:w.timeblock,onToggle:z=>j("timeblock",z),labelFn:z=>z.id===Mh||!z.start?z.name:`${z.start}-${z.end}`}),p.jsx(vh,{title:"",items:AF.map(z=>({id:z.toString(),name:`${z} min`})),selectedItems:w.duration,onToggle:z=>j("duration",z)}),p.jsx(vh,{title:"",items:NF,selectedItems:w.date,onToggle:z=>j("date",z)})]}),E&&p.jsx("p",{className:"text-sm text-red-500 text-center",children:E}),p.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[p.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition",children:""}),p.jsx("button",{onClick:W,disabled:I,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50",children:I?"...":l?"":""})]})]})}):null},vh=({title:t,items:e,selectedItems:n,onToggle:r,labelFn:s=a=>a.name})=>p.jsxs("div",{className:"flex flex-col h-64 border border-gray-100 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-900",children:[p.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700 text-xs font-bold text-gray-500 uppercase tracking-wider",children:t}),p.jsx("div",{className:"p-2 overflow-y-auto space-y-1 custom-scrollbar",children:e.map(a=>{const l=a.id||a.toString(),u=n.includes(l),h=`filter-${t}-${l}`;return p.jsxs("div",{className:"flex items-center px-2 py-1.5 rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",onClick:()=>r(l),children:[p.jsx("input",{id:h,type:"checkbox",checked:u,onChange:()=>{},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer","aria-label":`${t}: ${s(a)}`}),p.jsx("label",{htmlFor:h,className:"ml-2 text-sm text-gray-700 dark:text-gray-300 truncate flex-1 cursor-pointer pointer-events-none",children:s(a)})]},l)})})]}),PF=({isOpen:t,data:e,zIndex:n})=>{const{closeModal:r}=Pn(),s=!!t,a=e,l=!!(a!=null&&a.id),[u,h]=O.useState(""),[m,v]=O.useState(!1),[w,x]=O.useState(null);O.useEffect(()=>{s&&(h((a==null?void 0:a.name)||""),x(null),v(!1))},[s,a]);const I=O.useCallback(async()=>{const A=u.trim();if(!A){x("");return}v(!0),x(null);try{if(l&&(a!=null&&a.id))await X5(a.id,{name:A});else{const j=`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`;await Y5(A,j)}r()}catch(j){x(": "+(j.message||"")),v(!1)}},[u,l,a,r]),C=O.useCallback(async()=>{if(a!=null&&a.id&&confirm(`${a.name}`)){v(!0);try{await eF(a.id),r()}catch{x(""),v(!1)}}},[a,r]),E=A=>{A.key==="Enter"&&!A.nativeEvent.isComposing&&I()};return s?p.jsx(_o,{isOpen:s,onClose:r,className:"max-w-md",children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0",style:{backgroundColor:(a==null?void 0:a.color)||"#3B82F6"}}),p.jsx("input",{id:"label-name-input",name:"labelName",type:"text",value:u,onChange:A=>h(A.target.value),onKeyDown:E,placeholder:l?"":"",className:"flex-1 text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-400",autoFocus:!0,"aria-label":"","aria-invalid":!!w,"aria-describedby":w?"label-error-msg":void 0})]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:l?"":""}),w&&p.jsx("p",{id:"label-error-msg",className:"text-sm text-red-500 text-center",role:"alert",children:w}),p.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[l?p.jsxs("button",{onClick:C,disabled:m,className:"text-gray-400 hover:text-red-500 text-sm font-medium flex items-center gap-1.5 px-3 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),""]}):p.jsx("span",{}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:r,disabled:m,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 transition disabled:opacity-50",children:""}),p.jsx("button",{onClick:I,disabled:m,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"...":l?"":""})]})]})]})}):null},DF=({isOpen:t,data:e,zIndex:n})=>{const{closeModal:r}=Pn(),{currentWorkspaceId:s}=ui(),a=!!t,l=e,u=!!(l!=null&&l.id),[h,m]=O.useState(""),[v,w]=O.useState(!1),[x,I]=O.useState(null);O.useEffect(()=>{a&&(m((l==null?void 0:l.name)||""),I(null),w(!1))},[a,l]);const C=O.useCallback(async()=>{const j=h.trim();if(!j){I("");return}if(!s&&!u){I("");return}w(!0),I(null);try{u&&(l!=null&&l.id)?await S5(l.id,{name:j}):s&&await I5(j,s),r()}catch(W){I(": "+(W.message||"")),w(!1)}},[h,u,l,s,r]),E=O.useCallback(async()=>{if(l!=null&&l.id&&confirm(`${l.name}`)){w(!0);try{await C5(l.id),r()}catch{I(""),w(!1)}}},[l,r]),A=j=>{j.key==="Enter"&&!j.nativeEvent.isComposing&&C()};return a?p.jsx(_o,{isOpen:a,onClose:r,className:"max-w-md",children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"project-name-input",className:"sr-only",children:""}),p.jsx("input",{id:"project-name-input",name:"projectName",type:"text",value:h,onChange:j=>m(j.target.value),onKeyDown:A,placeholder:u?"":"",className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-400",autoFocus:!0,"aria-describedby":x?"project-name-error":void 0}),x&&p.jsx("p",{id:"project-name-error",className:"text-sm text-red-500 mt-2",children:x})]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:u?"":""}),p.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[u?p.jsxs("button",{onClick:E,disabled:v,className:"text-gray-400 hover:text-red-500 text-sm font-medium flex items-center gap-1.5 px-3 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),""]}):p.jsx("span",{}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:r,disabled:v,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 transition disabled:opacity-50",children:""}),p.jsx("button",{onClick:C,disabled:v,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"...":u?"":""})]})]})]})}):null},Pc=({title:t,children:e,defaultOpen:n=!0,icon:r,className:s})=>{const[a,l]=O.useState(n);return p.jsxs("section",{className:Ve("border border-gray-200 dark:border-gray-700/50 rounded-xl overflow-hidden",s),children:[p.jsxs("button",{onClick:()=>l(!a),className:"w-full flex items-center justify-between p-4 bg-gray-50/50 dark:bg-gray-800/30 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors text-left",type:"button",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[r&&p.jsx("span",{className:"text-lg",children:r}),p.jsx("h4",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:t})]}),p.jsx("svg",{className:Ve("w-4 h-4 text-gray-400 transition-transform duration-200",a&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p.jsx("div",{className:Ve("transition-all duration-300 ease-in-out overflow-hidden bg-white dark:bg-transparent",a?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"),children:p.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700/30",children:e})})]})},jF=()=>{const t=Qe.currentUser,[e,n]=O.useState(""),[r,s]=O.useState(""),[a,l]=O.useState(!1),[u,h]=O.useState((t==null?void 0:t.isAnonymous)??!1),[m,v]=O.useState(null);if(!t)return p.jsx("div",{className:"text-center text-gray-500",children:""});const w=async I=>{I.preventDefault(),l(!0),v(null);try{const C=ua.credential(e,r);await HN(t,C),Wn.success(""),h(!1)}catch(C){console.error("Link account error:",C);let E="";C.code==="auth/email-already-in-use"&&(E=""),C.code==="auth/weak-password"&&(E=""),v(E),Wn.error(E)}finally{l(!1)}},x=async()=>{confirm("")&&(await gk(Qe),window.location.reload())};return p.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[p.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-2xl p-6 flex flex-col sm:flex-row items-center gap-8 sm:gap-6 border border-gray-100 dark:border-gray-700",children:[p.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-3xl shadow-inner shrink-0",children:u?"":""}),p.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:u?"":t.displayName||""}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono mb-4 break-all",children:u?`ID: ${t.uid.slice(0,8)}...`:t.email}),!u&&p.jsx("button",{onClick:x,className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 text-sm font-bold px-4 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border border-transparent hover:border-red-100 dark:hover:border-red-900/30",children:""})]})]}),u?p.jsxs("div",{className:"border border-blue-200 dark:border-blue-800 bg-blue-50/50 dark:bg-blue-900/10 rounded-2xl p-8 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:p.jsx("svg",{className:"w-32 h-32 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),p.jsxs("div",{className:"relative",children:[p.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," "]}),p.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6 leading-relaxed",children:["",p.jsx("br",{}),""]}),p.jsxs("form",{onSubmit:w,className:"space-y-4 max-w-md",children:[m&&p.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-lg font-medium animate-in slide-in-from-top-2",children:m}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"account-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:"Email"}),p.jsx("input",{id:"account-email",type:"email",required:!0,value:e,onChange:I=>n(I.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"mail@example.com"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"account-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:"Password"}),p.jsx("input",{id:"account-password",type:"password",required:!0,minLength:6,value:r,onChange:I=>s(I.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:""})]}),p.jsx("button",{type:"submit",disabled:a,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all active:scale-95 flex items-center justify-center gap-2 group",children:a?"...":p.jsxs(p.Fragment,{children:["",p.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]})})]})]})]}):p.jsx("div",{className:"text-center py-8 text-gray-400",children:p.jsx("p",{children:""})})]})},OF=({isOpen:t,zIndex:e})=>{const{closeModal:n}=Pn(),{themeMode:r,setThemeMode:s,density:a,setDensity:l,fontSize:u,setFontSize:h,fontEn:m,setFontEn:v,fontJp:w,setFontJp:x}=As(),{currentWorkspaceId:I}=ui(),[C,E]=O.useState("appearance"),A=!!t;return p.jsx(_o,{isOpen:A,onClose:n,title:"",className:"w-full max-w-3xl h-[85vh]",children:p.jsxs("div",{className:"flex flex-col md:flex-row h-full -m-6",children:[p.jsxs("div",{className:"w-full md:w-56 bg-white dark:bg-gray-900 border-b md:border-b-0 md:border-r border-gray-100 dark:border-gray-700/50 p-2 md:p-4 flex md:block overflow-x-auto gap-2 md:gap-1 md:space-y-1 shrink-0 scrollbar-hide",children:[p.jsx(_h,{active:C==="general",onClick:()=>E("general"),label:"",icon:""}),p.jsx(_h,{active:C==="appearance",onClick:()=>E("appearance"),label:"",icon:""}),p.jsx(_h,{active:C==="account",onClick:()=>E("account"),label:"",icon:""}),p.jsx(_h,{active:C==="advanced",onClick:()=>E("advanced"),label:"",icon:""})]}),p.jsxs("div",{className:"flex-1 p-modal overflow-y-auto custom-scrollbar bg-gray-50/50 dark:bg-gray-800/20",children:[C==="appearance"&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx(Pc,{title:"",icon:"",defaultOpen:!0,children:p.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","system"].map(j=>p.jsx("button",{onClick:()=>s(j),className:Ve("p-3 border rounded-xl text-sm font-medium transition-all",r===j?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-white dark:hover:bg-gray-800 bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400"),children:p.jsx("span",{className:"capitalize",children:j})},j))})}),p.jsx(Pc,{title:"",icon:"",defaultOpen:!0,children:p.jsx("div",{className:"space-y-3",children:["compact","normal","comfortable","spacious"].map(j=>p.jsxs("label",{htmlFor:`density-${j}`,className:Ve("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors",a===j?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-transparent hover:bg-white dark:hover:bg-gray-800"),children:[p.jsx("div",{className:Ve("w-4 h-4 rounded-full border flex items-center justify-center",a===j?"border-blue-500 bg-blue-500":"border-gray-300"),children:a===j&&p.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),p.jsx("input",{id:`density-${j}`,type:"radio",name:"density",checked:a===j,onChange:()=>l(j),className:"hidden"}),p.jsx("span",{className:"capitalize text-sm font-medium text-gray-700 dark:text-gray-300",children:j})]},j))})}),p.jsx(Pc,{title:"",icon:"Aa",defaultOpen:!0,children:p.jsx("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:["sm","base","md","lg","xl"].map(j=>p.jsx("button",{onClick:()=>h(j),className:Ve("flex-1 py-1.5 px-3 rounded text-sm font-medium transition-all",u===j?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:j},j))})}),p.jsx(Pc,{title:"",icon:"Tt",defaultOpen:!1,children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"settings-font-en",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:""}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{id:"settings-font-en",name:"fontEn",value:m,onChange:j=>v(j.target.value),className:"w-full pl-3 pr-8 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",children:Vt.FONTS.EU.map(j=>p.jsx("option",{value:j.value,children:j.label},j.value))}),p.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"settings-font-jp",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:""}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{id:"settings-font-jp",name:"fontJp",value:w,onChange:j=>x(j.target.value),className:"w-full pl-3 pr-8 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",children:Vt.FONTS.JP.map(j=>p.jsx("option",{value:j.value,children:j.label},j.value))}),p.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})})]}),C==="general"&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-800",children:[p.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," "]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"JSON"}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("button",{onClick:async()=>{if(!(!Qe.currentUser||!I))try{const j=await z5(Qe.currentUser.uid,I),W=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),z=URL.createObjectURL(W),Z=document.createElement("a");Z.href=z,Z.download=`taskmg-backup-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(z)}catch(j){console.error(j),alert("")}},className:"btn-premium text-sm flex items-center gap-2 bg-white text-blue-600 border border-blue-200 hover:bg-blue-50 shadow-sm",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),p.jsx("span",{className:"hidden sm:inline",children:""}),p.jsx("span",{className:"sm:hidden",children:"DL"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"file",accept:".json",className:"hidden",id:"backup-import-input",onChange:async j=>{var Z;const W=(Z=j.target.files)==null?void 0:Z[0];if(!W||!Qe.currentUser||!I)return;if(!window.confirm(`
ID`)){j.target.value="";return}const z=new FileReader;z.onload=async K=>{var ne;try{const R=JSON.parse((ne=K.target)==null?void 0:ne.result),T=await U5(Qe.currentUser.uid,I,R);alert(`
: ${T.tasksCount}
: ${T.projectsCount}`),window.location.reload()}catch(R){console.error(R),alert("")}},z.readAsText(W),j.target.value=""}}),p.jsxs("label",{htmlFor:"backup-import-input",className:"px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-bold rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer shadow-sm text-sm flex items-center gap-2 transition-colors",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),""]})]})]})]}),p.jsx(Pc,{title:" (Language)",icon:"",defaultOpen:!0,children:p.jsx("div",{className:"text-sm text-gray-500 p-2",children:p.jsx("p",{children:"UI"})})})]}),C==="account"&&p.jsx(jF,{}),C==="advanced"&&p.jsx("div",{className:"flex flex-col gap-4",children:p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-xl border border-red-100 dark:border-red-900/30",children:[p.jsxs("h4",{className:"font-bold text-red-700 dark:text-red-400 mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," "]}),p.jsx("p",{className:"text-sm text-red-600/80 dark:text-red-400/80 mb-4",children:""}),p.jsx("button",{onClick:async()=>{if(I&&window.confirm(`
`))try{const j=await tF(I);alert(`${j} `),j>0&&window.location.reload()}catch(j){console.error(j),alert(`: ${j.message}`)}},className:"px-4 py-2 bg-white text-red-600 border border-red-200 hover:bg-red-50 rounded-lg text-sm font-bold shadow-sm flex items-center gap-2 transition-colors",children:""})]})})]})]})})},_h=({active:t,onClick:e,label:n,icon:r})=>p.jsxs("button",{onClick:e,className:Ve("w-auto md:w-full flex-1 md:flex-none flex items-center gap-2 md:gap-3 px-3 py-2 text-sm rounded-lg transition-all text-left whitespace-nowrap min-w-0 justify-center md:justify-start",t?"bg-white dark:bg-gray-700 shadow-sm text-blue-600 dark:text-blue-400 font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-200"),children:[p.jsx("span",{className:"text-base",children:r}),p.jsx("span",{className:"truncate",children:n})]}),LF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function MF(t){return t.replace(/[&<>"']/g,e=>LF[e]||e)}function VF(t){if(!t)return"";const e=t.split(`
`);let n=[],r=null;return e.forEach(s=>{const a=s.trimStart(),l=a.startsWith("* ")||a.startsWith("- "),u=/^\d+\.\s/.test(a),h=l||u;if(h){const m=u?"ol":"ul";if(r!==m){r&&n.push(`</${r}>`);const v=u?"list-decimal":"list-disc";n.push(`<${m} class="${v} ml-5 space-y-1">`),r=m}}else r&&(n.push(`</${r}>`),r=null);if(h){let m="";l?m=a.substring(2):m=a.replace(/^\d+\.\s/,"");const v=Bb(m);n.push(`<li>${v}</li>`)}else s.trim()?n.push(`<p class="mb-2">${Bb(s)}</p>`):r&&(n.push(`</${r}>`),r=null)}),r&&n.push(`</${r}>`),n.join(`
`)}function Bb(t){return MF(t).replace(/\[(.*?)\]\((.*?)\)/g,(n,r,s)=>`<a href="${s.replace(/"/g,"&quot;")}" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300 underline font-medium">${r}</a>`)}const FF=[15,30,45,60,75,90,120],zF=[{value:"none",label:""},{value:"daily",label:""},{value:"weekdays",label:" (-)"},{value:"weekly",label:""},{value:"monthly",label:""}],UF=["","","","","","",""],wh={TODO:"todo",COMPLETED:"completed"},$F=({isOpen:t,data:e,zIndex:n})=>{const{closeModal:r}=Pn(),s=!!t,a=e,l=!(a!=null&&a.id)||a.id.startsWith("temp-"),{projects:u}=Uf(),{timeBlocks:h}=zu(),[m,v]=O.useState(""),[w,x]=O.useState(""),[I,C]=O.useState(null),[E,A]=O.useState(wh.TODO),[j,W]=O.useState(!1),[z,Z]=O.useState(null),[K,ne]=O.useState({type:"none",days:[]}),[R,T]=O.useState(null),[N,M]=O.useState(null),[L,F]=O.useState(!1),[D,$e]=O.useState(!1),[nt,Ke]=O.useState(!1);O.useEffect(()=>{var $;if(a){v(a.title||""),x(a.description||""),C(a.projectId||null),A(a.status||wh.TODO),W(!!a.isImportant),T(a.timeBlockId||null),M(a.duration||null);const se=un(a.dueDate);Z(se);const de=a.recurrence||{type:"none",days:[]};ne(de),de!=null&&de.type&&de.type!=="none"&&!se&&Z(mF(de));const ke=!!(se||(de==null?void 0:de.type)!=="none"||a.timeBlockId||a.duration);$e(ke),F(!!(($=a.description)!=null&&$.trim())),Ke(!1)}},[a,s]);const Ie=O.useCallback(async()=>{if(!m.trim()){alert("");return}if((K==null?void 0:K.type)==="weekly"&&(!K.days||K.days.length===0)){alert("");return}const $={title:m.trim(),description:w.trim()??null,projectId:I==="none"?null:I,status:E,isImportant:j,dueDate:z?_t.fromDate(z):null,recurrence:(K==null?void 0:K.type)==="none"?null:K,timeBlockId:R??null,duration:N??void 0};try{l?await KT({...$,title:$.title}):await s0(a.id,$),r()}catch(se){console.error("Failed to save task",se),alert("")}},[m,w,I,E,j,z,K,R,N,l,a,r]),Y=O.useCallback(async $=>{if($==null||$.preventDefault(),$==null||$.stopPropagation(),!(!(a!=null&&a.id)||l)){if(!nt){Ke(!0);return}try{await TF(a.id),r()}catch(se){console.error("Failed to delete task",se),alert(""),Ke(!1)}}},[a==null?void 0:a.id,l,nt,r]),fe=O.useCallback($=>{let se=[];$==="weekly"?se=(K==null?void 0:K.days)||[]:$==="weekdays"&&(se=[1,2,3,4,5]),ne({type:$,days:se})},[K==null?void 0:K.days]),ue=O.useCallback($=>{const se=(K==null?void 0:K.days)||[],de=se.includes($)?se.filter(ke=>ke!==$):[...se,$].sort((ke,Se)=>ke-Se);ne({type:"weekly",days:de})},[K==null?void 0:K.days]),B=O.useMemo(()=>VF(w),[w]);return s?p.jsx(_o,{isOpen:s,onClose:r,zIndex:n,className:"max-w-4xl h-[95vh] sm:h-[85vh] w-full mx-2 sm:mx-auto mt-4 sm:mt-0 pb-safe",children:p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 shrink-0",children:[p.jsx("input",{id:"task-title",name:"title",type:"text",value:m,onChange:$=>v($.target.value),placeholder:"",className:"flex-1 text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder:text-gray-400",autoFocus:!0,"aria-label":""}),p.jsx("button",{onClick:()=>W(!j),className:Ve("p-2 rounded-full transition-colors",j?"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),title:j?"":"",children:p.jsx("svg",{className:"w-6 h-6",fill:j?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),p.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 h-full",children:[p.jsxs("div",{className:"md:col-span-8 flex flex-col h-full min-h-[300px] bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("label",{className:"text-xs font-semibold text-gray-500 flex items-center gap-2 uppercase",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})," (Markdown)"]}),p.jsx("button",{type:"button",onClick:()=>F(!L),className:"text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 px-3 py-1 rounded transition-colors text-xs font-medium","aria-label":L?"":"",children:L?"":""})]}),p.jsx("div",{className:"flex-1 relative",children:L?p.jsx("div",{className:"w-full h-full p-4 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm overflow-y-auto prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:B||'<span class="text-gray-400"></span>'}}):p.jsx("textarea",{id:"task-description",name:"description",value:w,onChange:$=>x($.target.value),onBlur:()=>w.trim()&&F(!0),placeholder:"...",className:"w-full h-full p-3 bg-gray-50 dark:bg-gray-900/50 border-0 rounded-lg outline-none text-sm transition-all resize-none leading-relaxed focus:ring-1 focus:ring-blue-500/50 text-gray-800 dark:text-gray-200 font-mono",autoFocus:!w,"aria-label":""})})]}),p.jsxs("div",{className:"md:col-span-4 space-y-4",children:[p.jsxs("details",{open:D,onToggle:$=>$e($.currentTarget.open),className:"group border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[p.jsxs("summary",{className:"flex items-center justify-between px-4 py-3 cursor-pointer list-none outline-none bg-gray-50 dark:bg-gray-700/30 rounded-t-lg group-[:not([open])]:rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700/50 focus:ring-2 focus:ring-inset focus:ring-blue-500",role:"button","aria-expanded":D,children:[p.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),""]}),p.jsx("span",{className:"transform group-open:rotate-180 transition-transform text-gray-400",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),p.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-due-date",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),p.jsx("input",{type:"date",id:"task-due-date",value:dF(z),onChange:$=>Z(hF($.target.value)),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-recurrence",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),p.jsx("select",{id:"task-recurrence",value:(K==null?void 0:K.type)||"none",onChange:$=>fe($.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:zF.map($=>p.jsx("option",{value:$.value,children:$.label},$.value))})]}),((K==null?void 0:K.type)==="weekly"||(K==null?void 0:K.type)==="weekdays")&&p.jsxs("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700 animate-in fade-in slide-in-from-top-1 duration-200",children:[p.jsx("span",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:""}),p.jsx("div",{className:"flex flex-wrap gap-2",children:UF.map(($,se)=>{var de;return p.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[p.jsx("input",{type:"checkbox",checked:((de=K.days)==null?void 0:de.includes(se))||!1,onChange:()=>ue(se),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),p.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:$})]},se)})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-timeblock",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),p.jsxs("select",{id:"task-timeblock",value:R||"",onChange:$=>T($.target.value||null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:""}),h.map($=>p.jsxs("option",{value:$.id,children:[$.start," - ",$.end]},$.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-duration",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),p.jsxs("select",{id:"task-duration",value:N||"",onChange:$=>M($.target.value?parseInt($.target.value,10):null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:""}),FF.map($=>p.jsxs("option",{value:$,children:[$," min"]},$))]})]})]})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[p.jsx("label",{htmlFor:"task-project",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),p.jsxs("select",{id:"task-project",value:I||"none",onChange:$=>C($.target.value==="none"?null:$.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"none",children:""}),u.map($=>p.jsx("option",{value:$.id,children:$.name},$.id))]})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[p.jsx("label",{htmlFor:"task-status",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),p.jsxs("select",{id:"task-status",value:E,onChange:$=>A($.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:wh.TODO,children:"To Do"}),p.jsx("option",{value:wh.COMPLETED,children:""}),p.jsx("option",{value:"archived",children:""})]})]})]})]})}),p.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center shrink-0",children:[!l&&p.jsx("div",{className:"flex items-center gap-2",children:nt?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-sm font-bold text-red-600 animate-pulse",children:""}),p.jsx("button",{type:"button",onClick:Y,className:"px-4 py-2 bg-red-600 text-white hover:bg-red-700 rounded transition font-medium text-sm",children:""}),p.jsx("button",{type:"button",onClick:()=>Ke(!1),className:"px-3 py-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition text-sm",children:""})]}):p.jsxs("button",{type:"button",onClick:Y,className:"px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition flex items-center gap-1.5",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),""]})}),p.jsxs("div",{className:`flex gap-2 ${l?"ml-auto":""}`,children:[p.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition",children:""}),p.jsx("button",{type:"button",onClick:Ie,className:"px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium shadow-md transition transform active:scale-95",children:l?"":""})]})]})]})}):null};function Wf(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function BF(t,e){return t.reduce((n,r,s)=>{const a=e.get(r);return a&&(n[s]=a),n},Array(t.length))}function bh(t){return t!==null&&t>=0}function WF(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function qF(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const GT=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const a=Wf(e,r,n),l=e[s],u=a[s];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},xh={scaleX:1,scaleY:1},QT=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:a,overIndex:l}=t;const u=(e=a[n])!=null?e:r;if(!u)return null;if(s===n){const m=a[l];return m?{x:0,y:n<l?m.top+m.height-(u.top+u.height):m.top-u.top,...xh}:null}const h=HF(a,s,n);return s>n&&s<=l?{x:0,y:-u.height-h,...xh}:s<n&&s>=l?{x:0,y:u.height+h,...xh}:{x:0,y:0,...xh}};function HF(t,e,n){const r=t[e],s=t[e-1],a=t[e+1];return r?n<e?s?r.top-(s.top+s.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const ZT="Sortable",JT=He.createContext({activeIndex:-1,containerId:ZT,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:GT,disabled:{draggable:!1,droppable:!1}});function YT(t){let{children:e,id:n,items:r,strategy:s=GT,disabled:a=!1}=t;const{active:l,dragOverlay:u,droppableRects:h,over:m,measureDroppableContainers:v}=uC(),w=xu(ZT,n),x=u.rect!==null,I=O.useMemo(()=>r.map(ne=>typeof ne=="object"&&"id"in ne?ne.id:ne),[r]),C=l!=null,E=l?I.indexOf(l.id):-1,A=m?I.indexOf(m.id):-1,j=O.useRef(I),W=!WF(I,j.current),z=A!==-1&&E===-1||W,Z=qF(a);Es(()=>{W&&C&&v(I)},[W,I,C,v]),O.useEffect(()=>{j.current=I},[I]);const K=O.useMemo(()=>({activeIndex:E,containerId:w,disabled:Z,disableTransforms:z,items:I,overIndex:A,useDragOverlay:x,sortedRects:BF(I,h),strategy:s}),[E,w,Z.draggable,Z.droppable,z,I,A,h,x,s]);return He.createElement(JT.Provider,{value:K},e)}const KF=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return Wf(n,r,s).indexOf(e)},GF=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:a,newIndex:l,previousItems:u,previousContainerId:h,transition:m}=t;return!m||!r||u!==a&&s===l?!1:n?!0:l!==s&&e===h},QF={duration:200,easing:"ease"},XT="transform",ZF=eu.Transition.toString({property:XT,duration:0,easing:"linear"}),JF={roleDescription:"sortable"};function YF(t){let{disabled:e,index:n,node:r,rect:s}=t;const[a,l]=O.useState(null),u=O.useRef(n);return Es(()=>{if(!e&&n!==u.current&&r.current){const h=s.current;if(h){const m=Ll(r.current,{ignoreTransform:!0}),v={x:h.left-m.left,y:h.top-m.top,scaleX:h.width/m.width,scaleY:h.height/m.height};(v.x||v.y)&&l(v)}}n!==u.current&&(u.current=n)},[e,n,r,s]),O.useEffect(()=>{a&&l(null)},[a]),a}function XF(t){let{animateLayoutChanges:e=GF,attributes:n,disabled:r,data:s,getNewIndex:a=KF,id:l,strategy:u,resizeObserverConfig:h,transition:m=QF}=t;const{items:v,containerId:w,activeIndex:x,disabled:I,disableTransforms:C,sortedRects:E,overIndex:A,useDragOverlay:j,strategy:W}=O.useContext(JT),z=e3(r,I),Z=v.indexOf(l),K=O.useMemo(()=>({sortable:{containerId:w,index:Z,items:v},...s}),[w,s,Z,v]),ne=O.useMemo(()=>v.slice(v.indexOf(l)),[v,l]),{rect:R,node:T,isOver:N,setNodeRef:M}=Ml({id:l,data:K,disabled:z.droppable,resizeObserverConfig:{updateMeasurementsFor:ne,...h}}),{active:L,activatorEvent:F,activeNodeRect:D,attributes:$e,setNodeRef:nt,listeners:Ke,isDragging:Ie,over:Y,setActivatorNodeRef:fe,transform:ue}=Px({id:l,data:K,attributes:{...JF,...n},disabled:z.draggable}),B=QS(M,nt),$=!!L,se=$&&!C&&bh(x)&&bh(A),de=!j&&Ie,ke=de&&se?ue:null,Ee=se?ke??(u??W)({rects:E,activeNodeRect:D,activeIndex:x,overIndex:A,index:Z}):null,Me=bh(x)&&bh(A)?a({id:l,items:v,activeIndex:x,overIndex:A}):Z,ze=L==null?void 0:L.id,Ce=O.useRef({activeId:ze,items:v,newIndex:Me,containerId:w}),Kt=v!==Ce.current.items,Nt=e({active:L,containerId:w,isDragging:Ie,isSorting:$,id:l,index:Z,items:v,newIndex:Ce.current.newIndex,previousItems:Ce.current.items,previousContainerId:Ce.current.containerId,transition:m,wasDragging:Ce.current.activeId!=null}),Dn=YF({disabled:!Nt,index:Z,node:T,rect:R});return O.useEffect(()=>{$&&Ce.current.newIndex!==Me&&(Ce.current.newIndex=Me),w!==Ce.current.containerId&&(Ce.current.containerId=w),v!==Ce.current.items&&(Ce.current.items=v)},[$,Me,w,v]),O.useEffect(()=>{if(ze===Ce.current.activeId)return;if(ze!=null&&Ce.current.activeId==null){Ce.current.activeId=ze;return}const ar=setTimeout(()=>{Ce.current.activeId=ze},50);return()=>clearTimeout(ar)},[ze]),{active:L,activeIndex:x,attributes:$e,data:K,rect:R,index:Z,newIndex:Me,items:v,isOver:N,isSorting:$,isDragging:Ie,listeners:Ke,node:T,overIndex:A,over:Y,setNodeRef:B,setActivatorNodeRef:fe,setDroppableNodeRef:M,setDraggableNodeRef:nt,transform:Dn??Ee,transition:dn()};function dn(){if(Dn||Kt&&Ce.current.newIndex===Z)return ZF;if(!(de&&!Ug(F)||!m)&&($||Nt))return eu.Transition.toString({...m,property:XT})}}function e3(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function cf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const t3=[Ye.Down,Ye.Right,Ye.Up,Ye.Left],n3=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:a,over:l,scrollableAncestors:u}}=e;if(t3.includes(t.code)){if(t.preventDefault(),!n||!r)return;const h=[];a.getEnabled().forEach(w=>{if(!w||w!=null&&w.disabled)return;const x=s.get(w.id);if(x)switch(t.code){case Ye.Down:r.top<x.top&&h.push(w);break;case Ye.Up:r.top>x.top&&h.push(w);break;case Ye.Left:r.left>x.left&&h.push(w);break;case Ye.Right:r.left<x.left&&h.push(w);break}});const m=u1({collisionRect:r,droppableRects:s,droppableContainers:h});let v=gx(m,"id");if(v===(l==null?void 0:l.id)&&m.length>1&&(v=m[1].id),v!=null){const w=a.get(n.id),x=a.get(v),I=x?s.get(x.id):null,C=x==null?void 0:x.node.current;if(C&&I&&w&&x){const A=ff(C).some((ne,R)=>u[R]!==ne),j=eI(w,x),W=r3(w,x),z=A||!j?{x:0,y:0}:{x:W?r.width-I.width:0,y:W?r.height-I.height:0},Z={x:I.left,y:I.top};return z.x&&z.y?Z:Xc(Z,z)}}}};function eI(t,e){return!cf(t)||!cf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function r3(t,e){return!cf(t)||!cf(e)||!eI(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const tI=({id:t,children:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:a,transition:l,isDragging:u}=XF({id:t}),h={transform:eu.Transform.toString(a),transition:l,opacity:u?.5:1};return p.jsx("div",{ref:s,style:h,...n,...r,children:e})},Wb=Array.from({length:24},(t,e)=>String(e).padStart(2,"0")),qb=["00","15","30","45"],Dg=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6"],s3=({isOpen:t,zIndex:e})=>{const{closeModal:n}=Pn(),r=!!t,{timeBlocks:s}=zu(),[a,l]=O.useState([]),[u,h]=O.useState(!1),[m,v]=O.useState(null),w=fx(Uh(pf,{activationConstraint:{distance:5}}),Uh(Bg,{coordinateGetter:n3}));O.useEffect(()=>{r&&(l(s.sort((j,W)=>(j.order||0)-(W.order||0))),v(null),h(!1))},[r,s]);const x=()=>{if(a.length>=10)return;const j={id:`new-${Date.now()}`,start:"09:00",end:"10:00",color:Dg[a.length%Dg.length],order:a.length};l([...a,j])},I=async j=>{if(!j.startsWith("new-")){if(!confirm(""))return;try{await V5(j)}catch{v("");return}}l(a.filter(W=>W.id!==j))},C=(j,W)=>{l(a.map(z=>z.id===j?{...z,...W}:z))},E=j=>{const{active:W,over:z}=j;z&&W.id!==z.id&&l(Z=>{const K=Z.findIndex(R=>R.id===W.id),ne=Z.findIndex(R=>R.id===z.id);return Wf(Z,K,ne)})},A=async()=>{h(!0),v(null);try{for(const W of a){if(!W.start||!W.end)continue;const[z,Z]=W.start.split(":").map(Number),[K,ne]=W.end.split(":").map(Number);if(z*60+Z>=K*60+ne)throw new Error(`: ${W.start}-${W.end}`)}const j=a.map((W,z)=>{var K;const Z={...W,id:(K=W.id)!=null&&K.startsWith("new-")?null:W.id,order:z,name:`${W.start}-${W.end}`};return M5(Z)});await Promise.all(j),document.dispatchEvent(new CustomEvent("timeblocks-updated")),n()}catch(j){v(j.message||""),h(!1)}};return r?p.jsx(_o,{isOpen:r,onClose:n,title:"",className:"max-w-2xl h-[600px]",children:p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-3 custom-scrollbar",children:[p.jsx(Rx,{sensors:w,collisionDetection:yx,onDragEnd:E,children:p.jsx(YT,{items:a.map(j=>j.id),strategy:QT,children:a.map(j=>p.jsx(tI,{id:j.id,children:p.jsx(i3,{block:j,onDelete:()=>I(j.id),onUpdate:W=>C(j.id,W)})},j.id))})}),a.length<10?p.jsxs("button",{onClick:x,className:"w-full py-4 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl text-gray-400 hover:border-blue-500 hover:text-blue-500 hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-all font-medium text-sm flex items-center justify-center gap-2 group",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),""]}):p.jsx("div",{className:"text-center py-4 text-xs text-gray-400",children:"10"}),p.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/40 rounded-lg flex items-center text-sm text-gray-500 dark:text-gray-400",children:[p.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-gray-400 mr-3 shadow-sm"}),p.jsx("span",{className:"font-bold mr-2 text-gray-700 dark:text-gray-300",children:""}),p.jsx("span",{className:"text-xs opacity-80",children:""})]})]}),m&&p.jsx("p",{className:"text-sm text-red-500 text-center mb-4",children:m}),p.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:p.jsx("button",{onClick:A,disabled:u,className:"px-8 py-2.5 bg-gray-900 hover:bg-gray-800 dark:bg-blue-600 dark:hover:bg-blue-500 text-white rounded-lg font-bold text-sm transition-all active:scale-95 shadow-md disabled:bg-gray-400",children:u?"...":""})})]})}):null},i3=({block:t,onDelete:e,onUpdate:n})=>{const[r,s]=O.useState(!1),a=t.start||"09:00",l=t.end||"10:00",[u,h]=a.split(":"),[m,v]=l.split(":");return p.jsxs("div",{className:"flex items-center gap-4 p-2 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-sm group",children:[p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>s(!r),className:"w-6 h-6 rounded-full shadow-sm hover:scale-110 active:scale-95 transition-transform ring-2 ring-transparent focus:ring-blue-400 ring-offset-2 dark:ring-offset-gray-900",style:{backgroundColor:t.color||"#3B82F6"},title:""}),r&&p.jsx("div",{className:"absolute top-full left-0 mt-2 z-50 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-xl shadow-2xl p-3 flex gap-2 w-max animate-fade-in-down",children:Dg.map(w=>p.jsx("button",{onClick:()=>{n({color:w}),s(!1)},className:"w-6 h-6 rounded-full hover:scale-110 transition-transform ring-2 ring-transparent hover:ring-blue-400",style:{backgroundColor:w}},w))})]}),p.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(kh,{options:Wb,value:u,onChange:w=>n({start:`${w}:${h}`})}),p.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),p.jsx(kh,{options:qb,value:h,onChange:w=>n({start:`${u}:${w}`})})]}),p.jsx("div",{className:"w-4 h-0.5 bg-gray-200 dark:bg-gray-700 rounded-full"}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(kh,{options:Wb,value:m,onChange:w=>n({end:`${w}:${v}`})}),p.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),p.jsx(kh,{options:qb,value:v,onChange:w=>n({end:`${m}:${w}`})})]})]}),p.jsx("button",{onClick:e,className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},kh=({options:t,value:e,onChange:n,label:r})=>p.jsx("select",{value:e,onChange:s=>n(s.target.value),className:"appearance-none px-2 py-1 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm font-mono font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-100 dark:focus:ring-blue-900 outline-none cursor-pointer","aria-label":r||"",children:t.map(s=>p.jsx("option",{value:s,children:s},s))}),o3=({isOpen:t,data:e,zIndex:n})=>{const{closeModal:r}=Pn(),s=!!t,a=e,l=!!(a!=null&&a.id),[u,h]=O.useState(""),[m,v]=O.useState(!1),[w,x]=O.useState(null);O.useEffect(()=>{s&&(h((a==null?void 0:a.name)||""),x(null),v(!1))},[s,a]);const I=O.useCallback(async()=>{const E=u.trim();if(!E){x("");return}if(s5().some(W=>W.name===E&&W.id!==(a==null?void 0:a.id))){x("");return}v(!0),x(null);try{if(l&&(a!=null&&a.id))await l5(a.id,E);else{const W=await BT(E);W!=null&&W.id&&UT(W.id)}r()}catch(W){x(": "+(W.message||"")),v(!1)}},[u,l,a,r]),C=E=>{E.key==="Enter"&&!E.nativeEvent.isComposing&&I()};return s?p.jsx(_o,{isOpen:s,onClose:r,className:"max-w-md",children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"workspace-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:l?"":""}),p.jsx("input",{id:"workspace-name-input",name:"workspaceName",type:"text",value:u,onChange:E=>h(E.target.value),onKeyDown:C,placeholder:"...",className:"w-full text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600",autoFocus:!0})]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:l?"":""}),w&&p.jsx("p",{className:"text-sm text-red-500 text-center",children:w}),p.jsxs("div",{className:"flex justify-end items-center pt-4 border-t border-gray-200 dark:border-gray-700 gap-3",children:[p.jsx("button",{onClick:r,disabled:m,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:""}),p.jsx("button",{onClick:I,disabled:m,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95",children:m?l?"...":"...":l?"":""})]})]})}):null},a3=({isOpen:t,data:e,zIndex:n})=>{const{closeModal:r}=Pn(),s=!!t,a=e,l=O.useCallback(()=>{Uu.getState().setView("wizard",{mode:a.id}),r()},[a,r]);return!s||!a?null:p.jsx(_o,{isOpen:s,onClose:r,className:"max-w-3xl max-h-[90vh] p-0 overflow-hidden bg-transparent shadow-none",children:p.jsxs("div",{className:"w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[p.jsx("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-4xl animate-bounce-slow",children:a.icon}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a.title}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.subTitle})]})]})}),p.jsxs("div",{className:"p-6 overflow-y-auto flex-1 custom-scrollbar",children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-blue-600 dark:bg-blue-400 mr-2 rounded-full"}),""]}),p.jsx("p",{className:"text-base text-gray-700 dark:text-gray-300 leading-relaxed bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:a.concept.summary})]}),p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-gray-400 mr-2 rounded-full"}),""]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed mb-3",children:a.concept.detail})]}),Array.isArray(a.useCases)&&a.useCases.length>0&&p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-purple-500 mr-2 rounded-full"}),"Use Cases"]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.useCases.map((u,h)=>p.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/40 rounded-lg p-5 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 transition-colors",children:[p.jsxs("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center",children:[p.jsx("span",{className:"text-purple-500 mr-2",children:"#"}),u.title]}),p.jsx("div",{className:"mb-3",children:p.jsxs("div",{className:"flex items-start mb-1",children:[p.jsx("span",{className:"text-[10px] font-bold text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"Before"}),p.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.before})]})}),p.jsx("div",{children:p.jsxs("div",{className:"flex items-start",children:[p.jsx("span",{className:"text-[10px] font-bold text-blue-600 bg-blue-100 dark:bg-blue-900/40 dark:text-blue-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"After"}),p.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-300 font-medium",children:u.after})]})})]},h))})]}),a.tips&&a.tips.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-amber-500 mr-2 rounded-full"}),"Tips"]}),p.jsx("div",{className:"space-y-3",children:a.tips.map((u,h)=>p.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-lg border border-amber-100 dark:border-amber-900/30",children:[p.jsxs("p",{className:"font-bold text-amber-800 dark:text-amber-400 mb-1",children:["Q. ",u.q]}),p.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["A. ",u.a]})]},h))})]})]}),p.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[p.jsx("button",{onClick:r,className:"px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""}),p.jsxs("button",{onClick:l,className:"group relative px-6 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg shadow-md transition-all transform hover:scale-105 active:scale-95 overflow-hidden",children:[p.jsxs("span",{className:"relative z-10 flex items-center",children:["",p.jsx("svg",{className:"w-4 h-4 ml-2 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})]}),p.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 skew-y-12"})]})]})]})})},l3=()=>{const{stack:t}=Pn();return t.length===0?null:p.jsx(p.Fragment,{children:t.map((e,n)=>{t.length-1;const r={key:e.id,isOpen:!0,data:e.data,zIndex:100+n*10};switch(e.type){case"settings":return p.jsx(OF,{...r});case"task-detail":return p.jsx($F,{...r});case"label-edit":return p.jsx(PF,{...r});case"project-edit":return p.jsx(DF,{...r});case"workspace-edit":return p.jsx(o3,{...r});case"filter-edit":return p.jsx(RF,{...r});case"timeblock-edit":return p.jsx(s3,{...r});case"wiki-framework":return p.jsx(a3,{...r});default:return null}})})},Wm={ja:{dashboard:"",inbox:"",today:"",upcoming:"",completed:"",trash:"",projects:"",labels:"",filters:"",timeblocks:"",durations:"",targets:" (Targets)",workspaces:"",settings:"",add_task:"",search:"",no_tasks:"",loading:"...",error:"",backup_restore:"",general:"",appearance:"",account:"",language:" (Language)",important:"",all_tasks:"",add:"",backward_map:"",woop_board:"WOOP",okr_tree:"OKR"},en:{dashboard:"Dashboard",inbox:"Inbox",today:"Today",upcoming:"Upcoming",completed:"Completed",trash:"Trash",projects:"Projects",labels:"Labels",filters:"Filters",timeblocks:"Time Blocks",durations:"Durations",targets:"Targets",workspaces:"Workspaces",settings:"Settings",add_task:"Add Task",search:"Search",no_tasks:"No tasks found",loading:"Loading...",error:"An error occurred",backup_restore:"Backup & Restore",general:"General",appearance:"Appearance",account:"Account",language:"Language",important:"Important",all_tasks:"All Tasks",add:"Add",backward_map:"Backward Map",woop_board:"WOOP Board",okr_tree:"OKR Tree"}},qf=t=>{function e(n){const r=Wm[t];return r?r[n]||Wm.en[n]||n:Wm.en[n]||n}return{t:e}},c3=()=>{const t=As(e=>e.language);return qf(t)},Gl=()=>{const{workspaceId:t,loading:e}=n0(),[n,r]=O.useState(()=>t?zb(t):[]),[s,a]=O.useState(()=>t?!Ub(t):!0);return O.useLayoutEffect(()=>{let l=!0;if(!t){r([]),e||a(!1);return}Ub(t)?(r(zb(t)),a(!1)):(r([]),a(!0));const u=SF(t,h=>{l&&(r(h),a(!1))});return()=>{l=!1,u()}},[t,e]),{tasks:n,loading:s||e}};function u3(){const{tasks:t}=Gl(),{showCompleted:e,query:n}=Cs();return O.useMemo(()=>{var l;const s={inbox:0,today:0,upcoming:0,important:0,all:0,search:0},a=n?n.toLowerCase().trim():"";for(const u of t)a&&((l=u.title)!=null&&l.toLowerCase().includes(a))&&s.search++,!(u.status==="archived"||u.status==="completed")&&(s.all++,(!u.projectId||u.projectId==="unassigned"||u.projectId==="none")&&s.inbox++,u.isImportant&&s.important++,u.dueDate&&(aF(u.dueDate)?s.today++:lF(u.dueDate)&&s.upcoming++));return s},[t,n])}const d3=t=>t in Vt.DENSITY_CLASSES,i0=t=>d3(t)?Vt.DENSITY_CLASSES[t]:Vt.DENSITY_CLASSES.normal,h3=[{id:"inbox",i18nKey:"inbox",icon:"",color:"text-blue-500",droppable:!0},{id:"search",i18nKey:"search",icon:"",color:"text-gray-500"},{id:"today",i18nKey:"today",icon:"",color:"text-green-500"},{id:"upcoming",i18nKey:"upcoming",icon:"",color:"text-purple-500"},{id:"important",i18nKey:"important",icon:"",color:"text-amber-400"},{id:"custom",i18nKey:"all_tasks",icon:"",color:"text-gray-500"}],f3=()=>{const{tasks:t}=Gl(),{language:e}=As(),{t:n}=qf(e),r=u3();return p.jsx("ul",{className:"space-y-0.5",children:h3.map(s=>p.jsx(p3,{item:s,tasks:t,label:n(s.i18nKey),count:r[s.id]||0},s.id))})},p3=({item:t,tasks:e,label:n,count:r})=>{const{filterType:s,setFilter:a}=Cs(),{currentView:l,setView:u}=Uu(),{density:h}=As(),m=l==="tasks"&&s===t.id,{setNodeRef:v,isOver:w}=Ml({id:`filter:${t.id}`,disabled:!t.droppable,data:{type:t.id==="inbox"?"inbox":"filter",value:t.id}}),x=()=>{t.id==="search"?(u("tasks"),a("search")):(u("tasks"),a(t.id))};return p.jsx("li",{ref:v,children:p.jsxs("button",{onClick:x,className:Ve("w-full flex items-center px-3 text-sm rounded-md transition-colors text-left gap-3 group/item",i0(h),m?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",w&&t.droppable&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),children:[p.jsx("span",{className:t.color,children:t.icon}),p.jsx("span",{className:"flex-1",children:n}),t.id!=="search"&&r>0&&p.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:r})]})})},m3=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!0),s=or();return O.useRef(!1),O.useEffect(()=>{if(!s){e([]),r(!1);return}let a=!0;const l=$5(s,u=>{a&&(e(u),r(!1))});return()=>{a=!1,l()}},[s]),{filters:t,loading:n}};function nI(t){const e={keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(!t)return e;const n=/(?:-?[a-zA-Z]+:(?:"[^"]*"|[^\s]+))|(?:"[^"]*")|(?:-?[^\s]+)/g,r=t.match(n);if(!r)return e;const s=[];for(let a=0;a<r.length;a++){const l=r[a];if(l==="OR"){const u=s.length-1,h=s[u],m=r[a+1],v=h&&(typeof h=="string"?!h.includes(":"):!0),w=m&&!m.includes(":")&&m!=="OR";if(v&&w){const x=Array.isArray(h)?h:[h];x.push(m.toLowerCase().replace(/^"|"$/g,"")),s[u]=x,a++;continue}}s.push(l)}return s.forEach(a=>{if(Array.isArray(a)){e.keywords.push(a);return}const l=a;if(l.startsWith('"')&&l.endsWith('"')){const u=l.substring(1,l.length-1);u&&e.keywords.push(u.toLowerCase());return}if(l.startsWith("-")&&!l.includes(":")){const u=l.substring(1);u&&e.excludeKeywords.push(u.toLowerCase());return}if(l.includes(":")){let u=!1,h=l;h.startsWith("-")&&(u=!0,h=h.substring(1));const m=h.indexOf(":"),v=h.substring(0,m).toLowerCase();let w=h.substring(m+1);w.startsWith('"')&&w.endsWith('"')&&(w=w.substring(1,w.length-1));const x=w.toLowerCase();switch(v){case"project":case"p":u?e.excludeProjects.push(w):e.projects.push(w);break;case"label":case"l":u?e.excludeLabels.push(w):e.labels.push(w);break;case"timeblock":case"tb":u?e.excludeTimeBlocks.push(w):e.timeBlocks.push(w);break;case"duration":case"d":const I=parseInt(w,10);isNaN(I)||e.durations.push(I);break;case"date":case"due":["today","tomorrow","week","upcoming","overdue"].includes(x)&&e.dates.push(x);break;case"status":case"is":["completed","active","todo"].includes(x)&&(u?e.excludeStatus.push(x):e.status.push(x)),x==="important"&&(e.isImportant=!u),x==="unimportant"&&(e.isImportant=u);break;default:u?e.excludeKeywords.push(h.toLowerCase()):e.keywords.push(h.toLowerCase());break}}else l!=="OR"&&e.keywords.push(l.toLowerCase())}),e}function g3(t,e="createdAt_desc"){if(!Array.isArray(t))return[];const[n,r]=e.split("_"),a=r==="desc"?-1:1;return[...t].sort((l,u)=>{var v,w,x,I,C,E;let h,m;switch(n){case"dueDate":h=(v=un(l.dueDate))==null?void 0:v.getTime(),m=(w=un(u.dueDate))==null?void 0:w.getTime();break;case"createdAt":h=(x=un(l.createdAt))==null?void 0:x.getTime(),m=(I=un(u.createdAt))==null?void 0:I.getTime();break;case"title":h=l.title.toLowerCase(),m=u.title.toLowerCase();break;case"duration":h=l.duration||0,m=u.duration||0;break;case"important":h=l.isImportant?1:0,m=u.isImportant?1:0;break;default:console.warn(`[sortTasks] Unknown criteria: ${n}, falling back to createdAt`),h=(C=un(l.createdAt))==null?void 0:C.getTime(),m=(E=un(u.createdAt))==null?void 0:E.getTime()}return y3(h,m)*a})}function y3(t,e){return t===e?0:t==null?1:e==null?-1:t>e?1:t<e?-1:0}function v3(){const t=new Date;t.setHours(0,0,0,0);const e=new Date(t);e.setDate(e.getDate()+1);const n=cF(t),r=new Date(n);r.setDate(r.getDate()+7);const s=new Date(e);return s.setDate(s.getDate()+7),{now:t,tomorrow:e,weekStart:n,weekEnd:r,upcomingEnd:s}}function _3(t,e,n,r){const{now:s,tomorrow:a,weekStart:l,weekEnd:u,upcomingEnd:h}=n;switch(e){case"today":return Fb(t,s);case"tomorrow":return Fb(t,a);case"week":return t>=l&&t<u;case"upcoming":return t>=a&&t<h;case"overdue":return t<s&&r!=="completed";default:return!1}}function Hb(t,e){if(!e)return t;const n=typeof e=="string"?nI(e):e,r=n.dates.length>0?v3():null;return t.filter(s=>{if(n.status.length>0){const l=s.status||"todo";if(!n.status.some(h=>h==="active"&&l==="todo"?!0:h===l))return!1}if(n.excludeStatus.length>0){const l=s.status||"todo";if(n.excludeStatus.some(h=>h==="active"&&l==="todo"?!0:h===l))return!1}if(n.isImportant===!0&&!s.isImportant||n.isImportant===!1&&s.isImportant||n.projects.length>0&&!n.projects.some(u=>u==="unassigned"?!s.projectId||s.projectId==="unassigned"||s.projectId==="none":s.projectId===u)||n.excludeProjects.length>0&&n.excludeProjects.some(l=>s.projectId===l)||n.labels.length>0&&(!s.labelIds||!n.labels.some(l=>{var u;return(u=s.labelIds)==null?void 0:u.includes(l)}))||n.excludeLabels.length>0&&s.labelIds&&n.excludeLabels.some(l=>{var u;return(u=s.labelIds)==null?void 0:u.includes(l)})||n.timeBlocks.length>0&&!n.timeBlocks.some(u=>u==="unassigned"?!s.timeBlockId:s.timeBlockId===u)||n.excludeTimeBlocks.length>0&&n.excludeTimeBlocks.some(l=>s.timeBlockId===l))return!1;if(n.durations.length>0){const l=s.duration||0;if(!n.durations.includes(l))return!1}if(r&&n.dates.length>0){const l=un(s.dueDate);if(!l||!n.dates.some(h=>_3(l,h,r,s.status||"todo")))return!1}const a=`${s.title} ${s.description||""}`.toLowerCase();return!(n.keywords.length>0&&!n.keywords.every(u=>Array.isArray(u)?u.some(h=>a.includes(h)):a.includes(u))||n.excludeKeywords.length>0&&n.excludeKeywords.some(u=>a.includes(u)))})}function w3(t){const{keyword:e,showCompleted:n,projectId:r,labelId:s,timeBlockId:a,duration:l,filterType:u}=t,h=e?nI(e):{keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(r&&h.projects.push(r),s&&h.labels.push(s),a&&h.timeBlocks.push(a),l){const m=typeof l=="number"?l:parseInt(l,10);isNaN(m)||h.durations.push(m)}return u==="today"&&h.dates.push("today"),u==="upcoming"&&h.dates.push("upcoming"),u==="important"&&(h.isImportant=!0),n||h.status.length===0&&h.status.push("active"),h}function rI(t,e){const{savedFilter:n,sortCriteria:r}=e,s=w3(e);let a=Hb(t,s);return n&&n.query&&(a=Hb(a,n.query)),g3(a,r||"createdAt_desc")}const sa=({icon:t,label:e,count:n,isActive:r,isOver:s,onClick:a,onContextMenu:l})=>{const{density:u}=As();return p.jsxs("button",{type:"button",onClick:a,onContextMenu:l,className:Ve("w-full text-left group flex items-center justify-between px-2 ml-1 rounded-md transition-colors select-none outline-none focus:ring-2 focus:ring-blue-500/50",i0(u),r?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",s&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t&&p.jsx("span",{className:"flex-shrink-0 w-5 flex justify-center text-sm",children:t}),p.jsx("span",{className:"text-sm truncate",children:e})]}),n!==void 0&&n>0&&p.jsx("span",{className:"text-gray-400 text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700/50",children:n})]})},b3=()=>{const{filters:t,loading:e}=m3(),{tasks:n}=Gl();return e?null:p.jsx("div",{className:"space-y-0.5 py-1",children:t.map(r=>p.jsx(x3,{filter:r,tasks:n},r.id))})},x3=({filter:t,tasks:e})=>{const{filterType:n,targetId:r,setFilter:s}=Cs(),a=n==="custom"&&r===t.id,l=He.useMemo(()=>{try{return rI(e,{savedFilter:t,showCompleted:!1}).length}catch(u){return console.warn("[CustomFilterItem] Count error:",u),0}},[e,t]);return p.jsx(sa,{label:t.name,icon:p.jsx("span",{children:""}),count:l,isActive:a,onClick:()=>s("custom",t.id)})},k3=()=>{const{tasks:t}=Gl(),e=Vt.SIDEBAR.DURATIONS;return p.jsx("div",{className:"space-y-0.5 py-1",children:e.map(n=>p.jsx(E3,{mins:n,tasks:t},n))})},E3=({mins:t,tasks:e})=>{const{filterType:n,targetId:r,setFilter:s}=Cs(),a=n==="duration"&&r===t.toString(),l=e.filter(m=>m.status!=="completed"&&Number(m.duration)===t).length,{setNodeRef:u,isOver:h}=Ml({id:`duration:${t}`,data:{type:"duration",value:t.toString()}});return p.jsx("div",{ref:u,children:p.jsx(sa,{label:`${t} min`,icon:p.jsx("span",{children:""}),count:l,isActive:a,isOver:h,onClick:()=>s("duration",t.toString())})})},sI=()=>p.jsxs("div",{className:"space-y-2 p-2 animate-pulse",children:[p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),T3=()=>{const{projects:t,loading:e}=Uf();return e?p.jsx(sI,{}):t.length===0?p.jsx("div",{className:"p-4 text-xs text-gray-400",children:""}):p.jsx(YT,{items:t.map(n=>n.id),strategy:QT,children:p.jsx("div",{className:"space-y-0.5 p-2",children:t.map(n=>p.jsx(tI,{id:n.id,children:p.jsx(I3,{project:n})},n.id))})})},I3=He.memo(({project:t})=>{const{filterType:e,targetId:n,setFilter:r}=Cs(),{density:s}=As(),{openModal:a}=Pn(),l=e==="project"&&n===t.id,{setNodeRef:u,isOver:h}=Ml({id:`project:${t.id}`,data:{type:"project",value:t.id}}),m=v=>{v.stopPropagation(),a("project-edit",t)};return p.jsxs("div",{ref:u,onClick:()=>r("project",t.id),className:Ve("group flex items-center justify-between px-2 rounded-md cursor-pointer transition-colors select-none",i0(s),l?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",h&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),role:"button",tabIndex:0,"aria-selected":l,"aria-label":`Project: ${t.name}`,children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[p.jsx("span",{className:Ve("text-xs shrink-0 transition-colors",l?"text-blue-500":"text-gray-400 group-hover:text-gray-500"),children:p.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),p.jsx("span",{className:"text-sm truncate",children:t.name})]}),p.jsx("button",{onClick:m,className:Ve("p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-opacity",l?"opacity-100":"opacity-0 group-hover:opacity-100 focus:opacity-100"),"aria-label":`Edit ${t.name}`,title:"",children:p.jsx("svg",{className:"w-3.5 h-3.5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})]})},(t,e)=>JSON.stringify(t.project)===JSON.stringify(e.project)),S3=()=>{const{query:t,setSearchQuery:e}=Cs(),[n,r]=O.useState(t),s=O.useRef(null);O.useEffect(()=>{t!==n&&r(t)},[t]),O.useEffect(()=>{const h=setTimeout(()=>{n!==t&&e(n)},300);return()=>{clearTimeout(h)}},[n,t,e]);const a=h=>{h.preventDefault(),e(n)},l=h=>{const m=h.target.value;r(m)},u=()=>{var h;r(""),e(""),(h=s.current)==null||h.focus()};return p.jsx("form",{onSubmit:a,className:"px-3 mb-2",children:p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none text-gray-400 group-focus-within:text-blue-500 transition-colors",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),p.jsx("label",{htmlFor:"page-search-input",className:"sr-only",children:""}),p.jsx("input",{ref:s,id:"page-search-input",type:"text",placeholder:" (/)",value:n,onChange:l,className:"w-full bg-gray-100 dark:bg-gray-700/50 border border-transparent focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:bg-white dark:focus:bg-gray-700 rounded-lg py-1.5 pl-9 pr-8 text-sm text-gray-800 dark:text-gray-100 placeholder-gray-500 outline-none transition-all"}),n&&p.jsx("button",{type:"button",onClick:u,className:"absolute inset-y-0 right-0 pr-2 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})},C3=({title:t,children:e,defaultExpanded:n=!0,action:r})=>{const[s,a]=O.useState(n),l=`section-${t.toLowerCase().replace(/\s+/g,"-")}`;return p.jsxs("div",{className:"mb-2 group/section",children:[p.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[p.jsxs("button",{onClick:()=>a(!s),"aria-expanded":s,"aria-controls":l,className:"flex items-center flex-1 text-xs font-semibold text-gray-500 uppercase hover:text-gray-700 dark:hover:text-gray-300 transition-colors text-left",children:[p.jsx("svg",{className:Ve("w-3 h-3 mr-1 transition-transform",s?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),t]}),r&&p.jsx("div",{className:"opacity-0 group-hover/section:opacity-100 transition-opacity",onClick:u=>u.stopPropagation(),children:r})]}),s&&p.jsx("div",{className:"mt-1",id:l,children:e})]})},A3=()=>{const{currentView:t,setView:e}=Uu();return p.jsxs("div",{className:"space-y-0.5 py-1",children:[p.jsx(sa,{label:"",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),isActive:t==="wizard",onClick:()=>e("wizard")}),p.jsx(sa,{label:"",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),isActive:t==="target-dashboard",onClick:()=>e("target-dashboard")}),p.jsx(sa,{label:"Wiki",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),isActive:t==="wiki",onClick:()=>e("wiki")})]})},N3=()=>{const{timeBlocks:t,loading:e}=zu(),{tasks:n}=Gl();return e?p.jsx(sI,{}):p.jsxs("div",{className:"space-y-0.5 py-1",children:[t.map(r=>p.jsx(R3,{block:r,tasks:n},r.id)),p.jsx(P3,{tasks:n})]})},R3=({block:t,tasks:e})=>{const{filterType:n,targetId:r,setFilter:s}=Cs(),a=n==="timeblock"&&r===t.id,l=e.filter(m=>m.status!=="completed"&&m.timeBlockId===t.id).length,{setNodeRef:u,isOver:h}=Ml({id:`timeblock:${t.id}`,data:{type:"timeblock",value:t.id}});return p.jsx("div",{ref:u,children:p.jsx(sa,{label:`${t.start} - ${t.end}`,icon:p.jsx("span",{className:"w-2 rounded-full aspect-square",style:{backgroundColor:t.color}}),count:l,isActive:a,isOver:h,onClick:()=>s("timeblock",t.id)})})},P3=({tasks:t})=>{const{filterType:e,targetId:n,setFilter:r}=Cs(),s=e==="timeblock"&&n==="unassigned",a=t.filter(h=>h.status!=="completed"&&(!h.timeBlockId||h.timeBlockId==="unassigned"||h.timeBlockId==="null")).length,{setNodeRef:l,isOver:u}=Ml({id:"timeblock:unassigned",data:{type:"timeblock",value:"unassigned"}});return p.jsx("div",{ref:l,children:p.jsx(sa,{label:"",icon:p.jsx("span",{className:"w-2 rounded-full aspect-square bg-gray-400"}),count:a,isActive:s,isOver:u,onClick:()=>r("timeblock","unassigned")})})},D3=()=>{const{t}=c3(),{openModal:e}=Pn(),[n,r]=He.useState(["general","projects","targets","timeblocks","durations","filters"]),s=He.useMemo(()=>({general:{id:"general",title:t("general"),component:p.jsxs(p.Fragment,{children:[p.jsx(S3,{}),p.jsx(f3,{})]}),defaultExpanded:!0},projects:{id:"projects",title:t("projects"),component:p.jsx(T3,{}),defaultExpanded:!0,action:p.jsx("button",{onClick:()=>e("project-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},targets:{id:"targets",title:t("targets"),component:p.jsx(A3,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("wiki-framework"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},timeblocks:{id:"timeblocks",title:t("timeblocks"),component:p.jsx(N3,{}),defaultExpanded:!1},durations:{id:"durations",title:t("durations"),component:p.jsx(k3,{}),defaultExpanded:!1},filters:{id:"filters",title:t("filters"),component:p.jsx(b3,{}),defaultExpanded:!1}}),[t,e]);return p.jsx("div",{className:"flex flex-col gap-4",children:n.map(a=>{const l=s[a];return l?p.jsx(He.Fragment,{children:l.title?p.jsx(C3,{title:l.title,defaultExpanded:l.defaultExpanded,action:l.action,children:l.component}):l.component},l.id):null})})},j3=({className:t,onCancel:e,onSuccess:n,placeholder:r="...",initialValue:s=""})=>{const[a,l]=O.useState(s),[u,h]=O.useState(!1),[m,v]=O.useState(!1),[w,x]=O.useState(!1),I=async A=>{if(!(!a.trim()||w)){x(!0);try{await KT({title:a,isImportant:u,dueDate:m?new Date:void 0}),l(""),h(!1),v(!1),n==null||n()}catch(j){console.error(j),Wn.error("")}finally{x(!1)}}},C=A=>{A.key==="Enter"&&!A.shiftKey&&!A.nativeEvent.isComposing&&(A.preventDefault(),I()),A.key==="Escape"&&(e==null||e())},E=He.useRef(null);return He.useEffect(()=>{const A=W=>{E.current&&!E.current.contains(W.target)&&(a.trim()||e==null||e())},j=setTimeout(()=>{document.addEventListener("mousedown",A)},100);return()=>{clearTimeout(j),document.removeEventListener("mousedown",A)}},[e,a]),p.jsxs("div",{ref:E,className:Ve("glass-effect rounded-xl shadow-xl p-3 sm:p-4 border-blue-500/20 dark:border-blue-400/20 animate-in slide-in-from-top-2 duration-300",t),children:[p.jsx("label",{htmlFor:"inline-task-input",className:"sr-only",children:""}),p.jsx("input",{id:"inline-task-input",type:"text",autoFocus:!0,className:"w-full bg-transparent text-base font-medium text-gray-800 dark:text-gray-100 placeholder-gray-400 outline-none mb-3 sm:mb-4 focus:bg-white/50 dark:focus:bg-gray-800/50 p-2 -ml-2 rounded-lg transition-colors border border-transparent focus:border-blue-500/30",placeholder:r,value:a,onChange:A=>l(A.target.value),onKeyDown:C,disabled:w}),p.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100 dark:border-gray-700/50",children:[p.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[p.jsx("button",{type:"button",onClick:()=>v(!m),className:Ve("transition-colors p-1.5 rounded-lg",m?"text-blue-600 bg-blue-50 hover:bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30 dark:hover:bg-blue-900/50":"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":m?"":"",title:m?"":"",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("button",{type:"button",onClick:()=>h(!u),className:Ve("transition-colors p-1.5 rounded-lg",u?"text-amber-500 bg-amber-50 hover:bg-amber-100 dark:text-amber-400 dark:bg-amber-900/30 dark:hover:bg-amber-900/50":"text-gray-400 hover:text-amber-500 dark:hover:text-amber-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":u?"":"",title:u?"":"",children:p.jsx("svg",{className:Ve("w-5 h-5",u&&"fill-current"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]}),p.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e&&p.jsx("button",{type:"button",onClick:e,disabled:w,className:"px-3 py-1.5 sm:px-4 sm:py-2 text-sm font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all","aria-label":"",children:""}),p.jsx("button",{onClick:()=>I(),disabled:!a.trim()||w,className:"px-4 py-1.5 sm:px-5 sm:py-2 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl shadow-lg shadow-blue-500/20 transition-all active:scale-95","aria-label":"",children:w?"...":""})]})]})]})},O3=({initialValue:t=""})=>{const[e,n]=O.useState(!1);return He.useEffect(()=>{if(!e)return;const r=s=>{s.key==="Escape"&&n(!1)};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e]),e?p.jsx("div",{className:"mb-2",children:p.jsx(j3,{onCancel:()=>n(!1),onSuccess:()=>n(!1),initialValue:t})}):p.jsxs("button",{onClick:()=>n(!0),"aria-label":"",className:"group flex items-center gap-2 w-full text-left py-2 px-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-2",children:[p.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-transparent group-hover:bg-blue-100/50 dark:group-hover:bg-blue-900/30 transition-colors",children:p.jsx("svg",{className:"w-4 h-4 text-inherit",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),p.jsx("span",{className:"text-sm font-medium",children:t?`${t}`:""})]})},L3=He.memo(({task:t})=>{const e=t.status==="completed",n=!!t.isImportant,{openModal:r}=Pn(),{attributes:s,listeners:a,setNodeRef:l,transform:u,isDragging:h}=Px({id:`task:${t.id}`,data:{task:t}}),m=async x=>{x.stopPropagation(),t.id&&await IF(t.id,t.status||"todo")},v=async x=>{x.stopPropagation(),t.id&&await s0(t.id,{isImportant:!n})},w=u?{transform:`translate3d(${u.x}px, ${u.y}px, 0)`,zIndex:50}:void 0;return p.jsxs("li",{ref:l,style:w,...a,...s,onClick:()=>r("task-detail",t),className:Ve("group flex items-start gap-3 p-[var(--task-p)] bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700/50 rounded-xl hover:shadow-sm hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-200 cursor-pointer hover-lift",h&&"opacity-70 border-blue-500 shadow-lg"),children:[p.jsx("button",{onClick:m,className:Ve("mt-0.5 w-5 h-5 rounded-full border flex items-center justify-center transition-colors shrink-0",e?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-blue-400 text-transparent"),"aria-label":e?"Mark as incomplete":"Mark as complete",children:p.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:Ve("text-sm text-gray-800 dark:text-gray-200 break-words",e&&"line-through text-gray-400 dark:text-gray-500"),children:t.title}),t.description&&p.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-[var(--task-line-clamp)]",children:t.description}),p.jsx("div",{className:"flex items-center gap-3 mt-2",children:t.dueDate&&p.jsxs("span",{className:Ve("text-xs flex items-center gap-1",e?"text-gray-400":fF(t.dueDate)),children:[" ",uF(t.dueDate)]})})]}),p.jsx("div",{className:Ve("flex items-center gap-1 transition-opacity",n?"opacity-100":"opacity-30 group-hover:opacity-100"),children:p.jsx("button",{onClick:v,className:Ve("p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",n?"text-yellow-500":"text-gray-400"),title:n?"":"",children:p.jsx("svg",{className:"w-4 h-4",fill:n?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})})]})},(t,e)=>{const n=s=>s?s instanceof Date?s.getTime():typeof s.toDate=="function"?s.toDate().getTime():typeof s.getTime=="function"?s.getTime():null:null,r=(s,a)=>{const l=n(s),u=n(a);return l===u};return t.task.id===e.task.id&&t.task.status===e.task.status&&t.task.title===e.task.title&&t.task.description===e.task.description&&t.task.isImportant===e.task.isImportant&&r(t.task.dueDate,e.task.dueDate)}),M3=({tasks:t,timeBlockId:e})=>{const{timeBlocks:n}=zu(),r=t.reduce((h,m)=>{const v=m.duration||0;return h+Number(v)},0),s=h=>(h/60).toFixed(2)+"h",a=e?n.find(h=>h.id===e):null;if(a&&a.start&&a.end){const h=gF(a.start,a.end);if(h<=0)return null;const m=(h/60).toFixed(2),v=(r/60).toFixed(2),w=r/h*100,x=Math.min(w,100),I=h-r,C=I<0,E=(Math.abs(I)/60).toFixed(2),A=w>100;return p.jsxs("div",{className:"glass-card flex items-center gap-4 py-3 px-4 my-2",children:[p.jsx("div",{className:"flex-shrink-0 w-24 truncate text-xs font-bold text-gray-500 dark:text-gray-400",title:a.name,children:a.name}),p.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 dark:text-gray-400 tabular-nums",children:[p.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300 w-[4.5ch] text-right inline-block",children:[v,"h"]}),p.jsx("span",{className:"text-gray-400 mx-0.5",children:"/"}),p.jsxs("span",{className:"w-[4.5ch] inline-block",children:[m,"h"]})]}),p.jsx("div",{className:"flex-1 relative h-3 bg-gray-200 dark:bg-gray-700/50 rounded-full overflow-hidden min-w-[100px]",children:p.jsx("div",{className:Ve("h-full rounded-full transition-all duration-500 ease-out shadow-sm",A?"bg-red-500":"bg-gradient-to-r from-blue-500 to-indigo-600"),style:{width:A?"100%":`${x}%`}})}),p.jsxs("div",{className:"flex-shrink-0 flex items-center justify-end gap-3 min-w-[140px]",children:[p.jsxs("div",{className:Ve("text-lg font-bold tabular-nums text-right w-[3.5ch]",A?"text-red-500":"text-blue-500"),children:[Math.round(w),p.jsx("span",{className:"text-xs font-normal opacity-70",children:"%"})]}),p.jsxs("div",{className:Ve("text-xs whitespace-nowrap text-right w-[100px]",C?"text-red-500":"text-green-500"),children:["(",C?"":""," ",E,"h)"]})]})]})}const l=t.length,u=l>0?r/l:0;return p.jsxs("div",{className:"glass-card flex items-center justify-evenly py-3 px-4 my-2",children:[p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:"COUNT"}),p.jsxs("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:[l,p.jsx("span",{className:"text-xs font-normal ml-0.5 text-gray-400",children:""})]})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:"TOTAL"}),p.jsx("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200 text-blue-600 dark:text-blue-400",children:s(r)})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:"AVG"}),p.jsxs("span",{className:"font-medium text-sm",children:[s(u),p.jsx("span",{className:"text-xs ml-0.5",children:"/"})]})]})]})},V3=()=>{const{tasks:t,loading:e}=Gl(),{filterType:n,targetId:r,query:s,showCompleted:a,sortCriteria:l,setShowCompleted:u,setSortCriteria:h}=Cs(),{density:m}=As(),{openModal:v}=Pn(),w=O.useMemo(()=>s&&s.trim().length>0?{keyword:s,showCompleted:a,projectId:null,labelId:null,timeBlockId:null,duration:null,filterType:"all_tasks",savedFilter:null,sortCriteria:l}:{keyword:s,showCompleted:a,projectId:n==="inbox"?"unassigned":n==="project"?r:null,labelId:n==="label"?r:null,timeBlockId:n==="timeblock"?r:null,duration:n==="duration"?r:null,filterType:n,savedFilter:null,sortCriteria:l},[n,r,s,a,l]),x=O.useMemo(()=>rI(t,w),[t,w]),I={compact:"space-y-1",normal:"space-y-2",comfortable:"space-y-3",spacious:"space-y-4"}[m];if(e)return p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("div",{className:"text-gray-400 text-sm animate-pulse",children:"..."})});const C=!!(s&&s.trim().length>0);return p.jsxs("div",{className:"flex flex-col h-full overflow-hidden relative",children:[p.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-1 pb-24",children:[p.jsxs("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm pt-1 pb-4 mb-4 flex items-center gap-2",children:[p.jsx("div",{className:"flex-1",children:C?p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),': "',s,'"']}):p.jsx(O3,{initialValue:""})}),p.jsx("div",{className:"flex items-center gap-2 px-1",children:p.jsxs("select",{value:l,onChange:E=>h(E.target.value),className:"text-xs bg-transparent border-none outline-none text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer font-medium",children:[p.jsx("option",{value:"createdAt_desc",children:""}),p.jsx("option",{value:"dueDate_asc",children:""}),p.jsx("option",{value:"important_desc",children:""}),p.jsx("option",{value:"title_asc",children:""})]})}),p.jsx("button",{onClick:()=>u(!a),className:Ve("px-3 py-2 rounded-lg text-xs font-medium border transition-colors shrink-0",a?"bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-300":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"),title:a?"Hide completed tasks":"Show completed tasks",children:a?"":""})]}),x.length===0?p.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center min-h-[60vh]",children:[p.jsxs("div",{className:"relative mb-8",children:[p.jsx("div",{className:"absolute -inset-4 bg-blue-500/10 dark:bg-blue-400/10 blur-3xl rounded-full"}),p.jsx("div",{className:"relative",children:p.jsx("svg",{className:"w-24 h-24 text-blue-200 dark:text-blue-900/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})})]}),p.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:""}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs mb-8",children:a?"":""}),p.jsxs("button",{onClick:()=>v("task-detail",{title:""}),className:"btn-premium flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),""]})]}):p.jsx("ul",{className:Ve("transition-all duration-200",I),children:x.map(E=>p.jsx(L3,{task:E},E.id))})]}),p.jsx("div",{className:"flex-none mt-auto pt-2 border-t border-gray-100 dark:border-gray-800 bg-white/50 dark:bg-gray-900/50 backdrop-blur pb-[calc(0.5rem+env(safe-area-inset-bottom))]",children:p.jsx(M3,{tasks:x,timeBlockId:w.timeBlockId})})]})},F3=()=>{const{workspaceId:t,loading:e}=n0(),[n,r]=O.useState([]),[s,a]=O.useState(!0);return O.useEffect(()=>{if(!t){r([]),e||a(!1);return}a(!0);let l=!0;const u=iF(t,h=>{l&&(r(h),a(!1))});return()=>{l=!1,u()}},[t,e]),{targets:n,loading:s||e}},z3=He.memo(({kgi:t,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:s})=>{const{language:a}=As(),{t:l}=qf(a),u={good:"text-emerald-500",warning:"text-amber-500",danger:"text-red-500"},h={good:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-red-500"},m=u[t.status]||"text-gray-500",v=h[t.status]||"bg-gray-500",w=[{id:"backward",label:l("backward_map"),icon:""},{id:"woop",label:l("woop_board"),icon:""},{id:"okr",label:l("okr_tree"),icon:""}];return p.jsx("div",{className:`mb-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg transition-all duration-300 mx-4 mt-4 ${r?"py-2":"py-4"}`,children:p.jsxs("div",{className:"px-6 flex items-center justify-between gap-6",children:[p.jsx("div",{className:"flex-1 min-w-0",children:p.jsx("h1",{className:`font-bold text-gray-900 dark:text-white truncate transition-all duration-300 ${r?"text-sm opacity-50":"text-base"}`,children:t.title})}),p.jsx("div",{className:"flex-1 max-w-md hidden sm:block",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex-1",children:p.jsx("div",{className:"h-3 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:p.jsx("div",{style:{width:`${t.progress}%`},className:`h-full ${v} transition-all duration-1000 ease-out rounded-full`})})}),p.jsxs("span",{className:`font-black ${m} tabular-nums text-sm whitespace-nowrap`,children:[t.progress,"%"]})]})}),p.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0",children:[p.jsxs("div",{className:"text-center hidden sm:block",children:[p.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),p.jsxs("div",{className:`font-black ${m} tabular-nums`,children:[t.daysLeft,p.jsx("span",{className:"text-xs font-medium ml-0.5 text-gray-400",children:""})]})]}),p.jsx("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-900/50 p-1 rounded-lg",children:w.map(x=>p.jsxs("button",{onClick:()=>n(x.id),className:`group px-3 py-1.5 rounded-md text-xs font-bold transition-all flex flex-col sm:flex-row items-center gap-1 sm:gap-2 ${e===x.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,title:x.label,children:[p.jsx("span",{className:"text-sm sm:text-base leading-none",children:x.icon}),p.jsx("span",{className:"text-[10px] sm:text-xs leading-none",children:x.label})]},x.id))}),p.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:r?"Expand Header":"Collapse Header",children:p.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform duration-300 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})})})]})]})})}),U3=He.memo(({data:t})=>!t||!t.milestones?p.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):p.jsxs("div",{className:"max-w-4xl mx-auto relative pb-10",children:[p.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 -translate-x-1/2"}),t.milestones.map((e,n)=>{const r=e.type==="goal",s=e.type==="current",a=e.completed;let l,u="";return r?(l=p.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-400 text-white flex items-center justify-center text-base shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),u="bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"):s?(l=p.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 animate-pulse relative",children:"Now"}),u="border-blue-500 border-2 shadow-md"):a?(l=p.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs shadow ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),u="bg-gray-50 dark:bg-gray-800 opacity-70"):(l=p.jsx("div",{className:"w-5 h-5 rounded-full bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative"}),u="bg-white dark:bg-gray-800"),p.jsxs("div",{className:"relative flex items-center mb-4 animate-fade-in group",style:{animationDelay:`${n*50}ms`},children:[p.jsx("div",{className:"w-16 flex-shrink-0 flex justify-center items-center z-10",children:l}),p.jsx("div",{className:"flex-1 pr-4 min-w-0",children:p.jsx("div",{className:`px-3 py-3 rounded-lg border ${s&&!u.includes("border-2")?"border-2 border-blue-500":s?"":"border-gray-200 dark:border-gray-700"} ${u} shadow-sm transition-all hover:shadow-md hover:translate-x-1 cursor-pointer`,children:p.jsxs("div",{className:"flex items-center justify-between gap-3",children:[p.jsx("span",{className:`text-xs font-bold ${s?"text-blue-600":"text-gray-500"} flex-shrink-0 font-mono`,children:e.date}),p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white flex-1 truncate text-sm md:text-base",children:e.title}),r&&p.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-bold flex-shrink-0",children:"TARGET"}),s&&p.jsx("span",{className:"text-[10px] text-blue-500 font-bold flex-shrink-0",children:" NOW"})]})})})]},e.id||`milestone-${n}`)})]})),$3=He.memo(({data:t})=>{if(!t||!t.keyResults)return p.jsx("div",{className:"p-4 text-center text-gray-500",children:""});const e=n=>n==="high"?"bg-emerald-500":n==="medium"?"bg-amber-500":"bg-red-500";return p.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border-2 border-blue-100 dark:border-blue-900 shadow-lg text-center mb-12 relative z-10 transition-transform hover:scale-[1.01]",children:[p.jsx("div",{className:"absolute top-[-15px] left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-md",children:"Objective"}),p.jsxs("h2",{className:"font-black text-2xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 leading-tight",children:['"',t.objective,'"']}),p.jsx("div",{className:"absolute bottom-[-50px] left-1/2 w-1 h-[50px] bg-gray-200 dark:bg-gray-700 z-0"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative",children:[p.jsx("div",{className:"hidden md:block absolute top-[-25px] left-[16.66%] right-[16.66%] h-1 bg-gray-200 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 rounded-t-xl z-0"}),t.keyResults.map(n=>{const r=n.target>0?Math.round(n.current/n.target*100):0,s=e(n.confidence);return p.jsxs("div",{className:"relative pt-6",children:[p.jsx("div",{className:"absolute top-[-25px] left-1/2 w-1 h-[25px] bg-gray-200 dark:bg-gray-700 md:block hidden"}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-700 transition-all group h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",children:[p.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["KR #",n.id]}),p.jsx("div",{className:`w-3 h-3 rounded-full ${s}`,title:`Confidence: ${n.confidence}`})]}),p.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-4 h-12 line-clamp-2",children:n.text}),p.jsxs("div",{className:"space-y-1 mt-auto",children:[p.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-500 dark:text-gray-400",children:[p.jsx("span",{children:n.current}),p.jsx("span",{children:n.target})]}),p.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-900 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${r}%`}})}),p.jsxs("div",{className:"text-right text-sm font-black text-blue-600 mt-1",children:[r,"%"]})]})]})]},n.id)})]})]})}),B3=He.memo(({data:t})=>!t||!t.obstacles?p.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto animate-fade-in",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/30 dark:to-blue-900/30 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800 shadow-sm hover:shadow-md transition-shadow",children:[p.jsx("h3",{className:"text-sm font-bold text-indigo-500 uppercase mb-2",children:"Wish ()"}),p.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.wish,'"']})]}),p.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/30 dark:to-rose-900/30 p-6 rounded-2xl border border-pink-100 dark:border-pink-800 shadow-sm hover:shadow-md transition-shadow",children:[p.jsx("h3",{className:"text-sm font-bold text-pink-500 uppercase mb-2",children:"Outcome ()"}),p.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.outcome,'"']})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-2 flex items-center",children:[p.jsx("span",{className:"mr-2",children:""})," Obstacles & If-Then Plans"]}),t.obstacles.map(e=>p.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all overflow-hidden relative",children:[p.jsx("div",{className:"p-5 border-l-4 border-gray-400 bg-gray-50 dark:bg-gray-800 relative z-10 transition-transform group-hover:translate-x-1",children:p.jsxs("h4",{className:"font-bold text-gray-700 dark:text-gray-300 flex items-center",children:[p.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-xs px-2 py-1 rounded mr-3 text-gray-600 dark:text-gray-400",children:""}),e.text]})}),p.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border-t border-gray-100 dark:border-gray-700 flex items-start",children:[p.jsx("div",{className:"flex-shrink-0 mt-1",children:p.jsx("span",{className:"block w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs font-bold",children:"IF"})}),p.jsx("div",{className:"ml-3 flex-1",children:p.jsxs("p",{className:"text-emerald-800 dark:text-emerald-300 font-bold text-sm",children:[" ",e.plan]})}),p.jsxs("div",{className:"ml-2 flex flex-col items-center",children:[p.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Score"}),p.jsx("span",{className:"text-lg font-black text-emerald-500 leading-none",children:e.overcomeCount})]})]})]},e.id)),p.jsx("button",{className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl text-gray-400 hover:border-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition flex items-center justify-center font-bold text-sm",children:"+ "})]})]})),W3=()=>{var C;const{targets:t}=F3(),[e,n]=O.useState("backward"),[r,s]=O.useState(!1),a=t.filter(E=>{var A;return((A=E.mode)==null?void 0:A.toLowerCase())===e.toLowerCase()}),l=E=>({milestones:[{date:"Future",title:E.data.goal_kgi||"Undefined Goal",type:"goal",completed:!1},{date:"Milestone",title:E.data.milestone_minus_1mo||"",type:"milestone",completed:!1},{date:"Today",title:"Current Status",type:"current",completed:!0},{date:"Now",title:E.data.first_action||"",type:"action",completed:!1}]}),u=E=>({wish:E.data.wish||"",outcome:E.data.outcome||"",obstacles:[{id:1,text:E.data.obstacle||"",plan:E.data.plan||"",overcomeCount:0}]}),h=E=>({objective:E.data.objective||"",keyResults:[{id:1,text:E.data.kr_1||"KR 1",current:0,target:100,confidence:"medium"},{id:2,text:E.data.kr_2||"KR 2",current:0,target:100,confidence:"medium"},{id:3,text:E.data.kr_3||"KR 3",current:0,target:100,confidence:"medium"}]}),m=E=>E?typeof E.toDate=="function"?E.toDate().toLocaleDateString():E instanceof Date?E.toLocaleDateString():String(E):"Unknown",v=()=>a.length===0?p.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500 dark:text-gray-400",children:p.jsxs("p",{className:"mb-4",children:["No ",e.toUpperCase()," targets found."]})}):p.jsx("div",{className:"space-y-12",children:a.map(E=>p.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-12 last:border-0",children:[p.jsxs("div",{className:"mb-4 text-xs text-gray-400 flex justify-end",children:["Created: ",m(E.createdAt)]}),e==="backward"&&p.jsx(U3,{data:l(E)}),e==="woop"&&p.jsx(B3,{data:u(E)}),e==="okr"&&p.jsx($3,{data:h(E)})]},E.id))}),w=a[0],I={title:((E,A)=>E?A==="backward"?E.data.goal_kgi||"KGI":A==="woop"?E.data.wish||"WISH":A==="okr"?E.data.objective||"Objective":"":"")(w,e),progress:Number(((C=w==null?void 0:w.data)==null?void 0:C.progress)||0),daysLeft:0,status:"good"};return p.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[p.jsx(z3,{kgi:I,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:()=>s(!r)}),p.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 pb-6 pt-4",children:v()})]})},q3=[{id:"okr",title:"OKR (Objectives and Key Results)",subTitle:"",color:"blue",icon:"",concept:{summary:"ObjectiveKey Results",detail:"GoogleIntel60-70%"},useCases:[{title:"",before:"",after:"O:Rust KR:Rust13"},{title:"",before:"",after:"O:MVP KR:310030%"}],tips:[{q:"",a:"OKR60%Win"},{q:"KR",a:"50%100%70%NG"}]},{id:"woop",title:"WOOP (Wish, Outcome, Obstacle, Plan)",subTitle:"",color:"amber",icon:"",concept:{summary:"",detail:"If-ThenXY"},useCases:[{title:"",before:"",after:"W:30 O: Obs: Plan:"},{title:"",before:"",after:"Obs: Plan:"}],tips:[{q:"Obstacle",a:""},{q:"Plan",a:"5"}]},{id:"backward",title:"Backward Design ()",subTitle:"",color:"purple",icon:"",concept:{summary:"",detail:"ForecastingBackcasting"},useCases:[{title:"",before:"",after:"Goal: 1: 3:LP :"},{title:"",before:"",after:"Goal:3 2:20 1: :"}],tips:[{q:"",a:"KGI1OK"},{q:"",a:""}]}],H3=He.memo(({framework:t,onClick:e})=>p.jsxs("div",{className:"framework-card cursor-pointer bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-6 transition-all duration-300 hover:border-blue-500 hover:shadow-lg hover:scale-105 group",onClick:()=>e(t),role:"button",tabIndex:0,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&e(t)},children:[p.jsx("div",{className:"text-4xl mb-3 transform transition-transform group-hover:scale-110 duration-300",children:t.icon}),p.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:t.title}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 h-10",children:t.concept.summary}),p.jsxs("div",{className:"mt-4 flex items-center text-xs text-blue-600 dark:text-blue-400 font-medium opacity-80 group-hover:opacity-100 transition-opacity",children:[p.jsx("span",{children:""}),p.jsx("svg",{className:"w-4 h-4 ml-1 transform transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})),K3=()=>{const{openModal:t}=Pn();return p.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-900 overflow-y-auto custom-scrollbar",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 animate-fade-in",children:[p.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-8 flex items-center",children:[p.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500 mr-3",children:p.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),p.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-gray-300",children:" Wiki"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q3.map(e=>p.jsx(H3,{framework:e,onClick:n=>t("wiki-framework",n)},e.id))})]})})},pl={backward:{id:"backward",label:"Backward Design",description:"",steps:[{title:"Goal / KGI",description:"KGI",inputs:[{type:"textarea",placeholder:"20253311",key:"goal_kgi"}]},{title:"Milestone",description:"1",inputs:[{type:"textarea",placeholder:"100",key:"milestone_minus_1mo"}]},{title:"First Action",description:"",inputs:[{type:"textarea",placeholder:"",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"",steps:[{title:"Wish ()",description:"",inputs:[{type:"textarea",placeholder:"30",key:"wish"}]},{title:"Outcome ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"outcome"}]},{title:"Obstacle ()",description:"",inputs:[{type:"textarea",placeholder:"SNS",key:"obstacle"}]},{title:"Plan ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"(O)(KR)",steps:[{title:"Objective",description:"1",inputs:[{type:"textarea",placeholder:"",key:"objective"}]},{title:"Key Results",description:"3",inputs:[{type:"text",placeholder:"KR 1 (: GitHub 1,000)",key:"kr_1"},{type:"text",placeholder:"KR 2 (:  500)",key:"kr_2"},{type:"text",placeholder:"KR 3 (:  40%)",key:"kr_3"}]}]}},G3=({mode:t,currentStep:e})=>{const n=pl[t],r=n.steps.length;return p.jsx("div",{className:"flex items-center justify-between mb-8 max-w-2xl mx-auto",children:p.jsx("div",{className:"flex items-center space-x-1 mx-auto w-full justify-center",children:n.steps.map((s,a)=>{const l=a+1,u=e>l,h=e===l,m=e<l;return p.jsxs(He.Fragment,{children:[p.jsxs("div",{className:"flex flex-col items-center relative z-10 w-16",children:[p.jsx("div",{className:Ve("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold",h&&"bg-blue-600 text-white ring-4 ring-blue-100 dark:ring-blue-900",u&&"bg-green-500 text-white",m&&"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:u?"":l}),p.jsx("div",{className:Ve("text-[10px] mt-1 font-medium text-center w-20 truncate",h?"text-blue-600 dark:text-blue-400":"text-gray-400"),children:s.title})]}),a<r-1&&p.jsx("div",{className:Ve("h-1 flex-1 mx-[-10px] mt-[-14px] z-0 transition-all duration-500 rounded-full",e>l?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},a)})})})},Q3=({mode:t,step:e,onBack:n,onNext:r,onFinish:s})=>{const a=pl[t],l=e-1,u=a.steps[l],h=a.steps.length,[m,v]=O.useState({}),w=(I,C)=>{v(E=>({...E,[I]:C}))},x=()=>{const I=u.inputs.reduce((C,E,A)=>{const j=m[A]||"";return E.key&&(C[E.key]=j),C},{});e<h?r(I):s(I)};return p.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[p.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:[a.label," Mode"]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-8 min-h-[500px] flex flex-col",children:[p.jsx(G3,{mode:t,currentStep:e}),p.jsxs("div",{className:"flex-1 animate-fade-in",children:[p.jsxs("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-100",children:["Q",e,". ",u.title]}),p.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:u.description}),p.jsx("div",{className:"mb-8 space-y-4",children:u.inputs.map((I,C)=>p.jsx("div",{children:I.type==="textarea"?p.jsx("textarea",{className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",rows:5,placeholder:I.placeholder,value:m[C]||"",onChange:E=>w(C,E.target.value)}):p.jsx("input",{type:"text",className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",placeholder:I.placeholder,value:m[C]||"",onChange:E=>w(C,E.target.value)})},I.key||C))})]}),p.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[p.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition font-medium",children:""}),e<h?p.jsxs("button",{onClick:x,className:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-md transition font-medium flex items-center",children:["",p.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]}):p.jsxs("button",{onClick:x,className:"px-8 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 shadow-lg transition font-medium flex items-center transform hover:scale-105",children:[p.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),""]})]})]})]})},Z3=({currentMode:t,onModeChange:e,onStart:n})=>{const r=pl[t],s={okr:["","",""],woop:["","",""],backward:["","",""]};return p.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-full max-h-[700px] flex flex-col py-6",children:[p.jsx("div",{className:"mb-4 flex-shrink-0",children:p.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[p.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),p.jsx("span",{className:"font-medium",children:""}),p.jsx("svg",{className:"w-3 h-3 mx-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),p.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:""})]})}),p.jsxs("div",{className:"mb-6 flex-shrink-0",children:[p.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:""}),p.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:Object.keys(pl).map(a=>p.jsx("button",{onClick:()=>e(a),className:Ve("flex-1 py-2 text-xs font-bold rounded-lg transition-all",t===a?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:pl[a].label},a))})]}),p.jsx("div",{className:"flex-1 mb-6 min-h-0",children:p.jsx("div",{className:"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden shadow-xl",children:p.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[p.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mb-4 shadow-lg flex-shrink-0",children:p.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 text-xl",children:r.label}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-2xl leading-relaxed",children:r.description}),p.jsx("div",{className:"mt-6 flex flex-wrap gap-2 justify-center",children:(s[t]||[]).map(a=>p.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300 shadow-sm",children:a},a))})]})})}),p.jsx("div",{className:"flex justify-center pb-4 flex-shrink-0",children:p.jsxs("button",{onClick:n,className:"group inline-flex items-center px-6 py-3 border-2 border-transparent shadow-xl font-bold rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition-all transform hover:scale-105 active:scale-95",children:[p.jsx("span",{children:""}),p.jsx("svg",{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},J3=()=>{const[t,e]=O.useState("backward"),[n,r]=O.useState(0),[s,a]=O.useState({}),{setView:l,viewData:u}=Uu();O.useEffect(()=>{u!=null&&u.mode&&(e(u.mode),r(0))},[u]);const h=w=>{a(x=>({...x,...w})),r(x=>x+1)},m=async w=>{const x={...s,...w};try{await oF({mode:t,data:x}),console.log("Wizard Completed, Saved to Firestore",x),alert(`${pl[t].label}`),r(0),a({}),l("target-dashboard")}catch(I){console.error("Failed to save wizard target:",I),alert("")}},v=()=>{r(w=>Math.max(0,w-1))};return n===0?p.jsx(Z3,{currentMode:t,onModeChange:e,onStart:()=>r(1)}):p.jsx(Q3,{mode:t,step:n,onBack:v,onNext:h,onFinish:m})},Y3=(t,e)=>{const n=fx(Uh(pf,{activationConstraint:{distance:5}}),Uh(Ix,{activationConstraint:{delay:250,tolerance:5}})),{language:r}=As(),{t:s}=qf(r),a=O.useCallback(async l=>{var I,C,E,A;const{active:u,over:h}=l;if(!h)return;const m=String(u.id),v=String(h.id),x=(j=>j.startsWith(Vt.DND.PREFIX_TASK)?j.split(":")[1]:null)(m);if(x){const j=(I=h.data.current)==null?void 0:I.type,W=(C=h.data.current)==null?void 0:C.value,z={};if(j===Vt.DND.TYPE_PROJECT&&(z.projectId=W),j===Vt.DND.TYPE_INBOX&&(z.projectId=null),j===Vt.DND.TYPE_TIMEBLOCK&&(z.timeBlockId=W==="unassigned"?null:W),Object.keys(z).length>0)try{await s0(x,z)}catch(Z){console.error("Failed to update task via dnd",Z),Wn.error(s("error"))}}if(m!==v&&!x){const j=t.findIndex(z=>z.id===m),W=t.findIndex(z=>z.id===v);if(j!==-1&&W!==-1){const z=Wf(t,j,W);(E=e==null?void 0:e.onOptimisticReorder)==null||E.call(e,z);try{await A5(z)}catch(Z){console.error("Failed to update project order",Z),Wn.error(s("error")),(A=e==null?void 0:e.onRevertReorder)==null||A.call(e,t)}}}},[t,e,s]);return{sensors:n,handleDragEnd:a}},X3=()=>{const[t,e]=O.useState(()=>Z5()),[n,r]=O.useState(!0);return O.useEffect(()=>{let s=!0;const a=J5("",l=>{s&&(e(l),r(!1))});return()=>{s=!1,a()}},[]),{labels:t,loading:n}},ez=()=>{const{fontEn:t,fontJp:e,fontSize:n,density:r,themeMode:s}=As(),{setSidebarDensity:a}=Wy();O.useEffect(()=>{const l=document.documentElement,u=()=>{s==="dark"?l.classList.add("dark"):s==="light"?l.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?l.classList.add("dark"):l.classList.remove("dark")};u();const h=window.matchMedia("(prefers-color-scheme: dark)"),m=()=>{s==="system"&&u()};return h.addEventListener("change",m),()=>h.removeEventListener("change",m)},[s]),O.useEffect(()=>{const l=document.documentElement;l.style.setProperty("--font-en",`"${t}"`),l.style.setProperty("--font-jp",`"${e}"`)},[t,e]),O.useEffect(()=>{const l=["font-app-sm","font-app-base","font-app-md","font-app-lg","font-app-xl"];document.body.classList.remove(...l),document.body.classList.add(`font-app-${n}`)},[n]),O.useEffect(()=>{const l=["app-density-compact","app-density-normal","app-density-comfortable","app-density-spacious"];document.body.classList.remove(...l),document.body.classList.add(`app-density-${r}`),a(r)},[r,a])},tz=()=>{ez();const{filterType:t,targetId:e,query:n}=Cs(),{currentView:r}=Uu(),{projects:s,setProjectsOverride:a}=Uf(),{labels:l}=X3(),[u,h]=He.useState(null);He.useEffect(()=>{const x=ty(Qe,C=>{h(C)}),I=C=>{const E=C.target,A=["INPUT","TEXTAREA"].includes(E.tagName)||E.closest("[contenteditable]"),j=document.querySelector('[role="dialog"]');if(C.key==="/"&&!A&&!j){const W=document.getElementById("page-search-input");W&&(C.preventDefault(),W.focus())}};return document.addEventListener("keydown",I),()=>{x(),document.removeEventListener("keydown",I)}},[]);const{sensors:m,handleDragEnd:v}=Y3(s,{onOptimisticReorder:a,onRevertReorder:a}),w=()=>{var x,I;if(r==="wizard")return"Goal Wizard";if(r==="target-dashboard")return"Target Dashboard";if(r==="wiki")return"Framework Wiki";if(t==="project")return((x=s.find(C=>C.id===e))==null?void 0:x.name)||"Project";if(t==="label")return((I=l.find(C=>C.id===e))==null?void 0:I.name)||"Label";if(t==="search")return n?`"${n}" `:"";switch(t){case"inbox":return"Inbox";case"today":return"Today";case"upcoming":return"Upcoming";case"important":return"Important";case"custom":return"All Tasks";default:return"TaskMg"}};return u?p.jsxs(Rx,{sensors:m,collisionDetection:yx,onDragEnd:v,children:[p.jsx(l4,{}),p.jsx(l3,{}),p.jsx(d5,{sidebarContent:p.jsx(D3,{}),title:w(),children:r==="wizard"?p.jsx(J3,{}):r==="target-dashboard"?p.jsx(W3,{}):r==="wiki"?p.jsx(K3,{}):p.jsx(V3,{})})]}):p.jsx(fj,{})};class nz extends O.Component{constructor(n){super(n);Fi(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){R5(n,r.componentStack??void 0)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:p.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[p.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:p.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),p.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:""}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:""}),p.jsxs("div",{className:"flex gap-3 justify-center",children:[p.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""}),p.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:""})]}),!1]})}):this.props.children}}N5();const rz=new zS,iI=document.getElementById("app");if(!iI)throw new Error("Failed to find the root element");GS.createRoot(iI).render(p.jsx(He.StrictMode,{children:p.jsx(nz,{children:p.jsx($S,{client:rz,children:p.jsx(tz,{})})})}));
