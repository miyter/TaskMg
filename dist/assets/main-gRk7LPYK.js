var mS=Object.defineProperty;var cw=t=>{throw TypeError(t)};var gS=(t,e,n)=>e in t?mS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Gi=(t,e,n)=>gS(t,typeof e!="symbol"?e+"":e,n),Xm=(t,e,n)=>e.has(t)||cw("Cannot "+n);var z=(t,e,n)=>(Xm(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>e.has(t)?cw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),me=(t,e,n,r)=>(Xm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ye=(t,e,n)=>(Xm(t,e,"access private method"),n);var Lh=(t,e,n,r)=>({set _(s){me(t,e,s,n)},get _(){return z(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function rk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eg={exports:{}},ru={},tg={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function yS(){if(uw)return Ke;uw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function x(W){return W===null||typeof W!="object"?null:(W=w&&W[w]||W["@@iterator"],typeof W=="function"?W:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function R(W,X,ce){this.props=W,this.context=X,this.refs=k,this.updater=ce||E}R.prototype.isReactComponent={},R.prototype.setState=function(W,X){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,X,"setState")},R.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function q(){}q.prototype=R.prototype;function B(W,X,ce){this.props=W,this.context=X,this.refs=k,this.updater=ce||E}var $=B.prototype=new q;$.constructor=B,C($,R.prototype),$.isPureReactComponent=!0;var H=Array.isArray,F=Object.prototype.hasOwnProperty,te={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(W,X,ce){var ee,he={},ve=null,Ee=null;if(X!=null)for(ee in X.ref!==void 0&&(Ee=X.ref),X.key!==void 0&&(ve=""+X.key),X)F.call(X,ee)&&!S.hasOwnProperty(ee)&&(he[ee]=X[ee]);var Fe=arguments.length-2;if(Fe===1)he.children=ce;else if(1<Fe){for(var We=Array(Fe),Ne=0;Ne<Fe;Ne++)We[Ne]=arguments[Ne+2];he.children=We}if(W&&W.defaultProps)for(ee in Fe=W.defaultProps,Fe)he[ee]===void 0&&(he[ee]=Fe[ee]);return{$$typeof:t,type:W,key:ve,ref:Ee,props:he,_owner:te.current}}function N(W,X){return{$$typeof:t,type:W.type,key:X,ref:W.ref,props:W.props,_owner:W._owner}}function P(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function O(W){var X={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(ce){return X[ce]})}var M=/\/+/g;function D(W,X){return typeof W=="object"&&W!==null&&W.key!=null?O(""+W.key):X.toString(36)}function Be(W,X,ce,ee,he){var ve=typeof W;(ve==="undefined"||ve==="boolean")&&(W=null);var Ee=!1;if(W===null)Ee=!0;else switch(ve){case"string":case"number":Ee=!0;break;case"object":switch(W.$$typeof){case t:case e:Ee=!0}}if(Ee)return Ee=W,he=he(Ee),W=ee===""?"."+D(Ee,0):ee,H(he)?(ce="",W!=null&&(ce=W.replace(M,"$&/")+"/"),Be(he,X,ce,"",function(Ne){return Ne})):he!=null&&(P(he)&&(he=N(he,ce+(!he.key||Ee&&Ee.key===he.key?"":(""+he.key).replace(M,"$&/")+"/")+W)),X.push(he)),1;if(Ee=0,ee=ee===""?".":ee+":",H(W))for(var Fe=0;Fe<W.length;Fe++){ve=W[Fe];var We=ee+D(ve,Fe);Ee+=Be(ve,X,ce,We,he)}else if(We=x(W),typeof We=="function")for(W=We.call(W),Fe=0;!(ve=W.next()).done;)ve=ve.value,We=ee+D(ve,Fe++),Ee+=Be(ve,X,ce,We,he);else if(ve==="object")throw X=String(W),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Ee}function tt(W,X,ce){if(W==null)return W;var ee=[],he=0;return Be(W,ee,"","",function(ve){return X.call(ce,ve,he++)}),ee}function nt(W){if(W._status===-1){var X=W._result;X=X(),X.then(function(ce){(W._status===0||W._status===-1)&&(W._status=1,W._result=ce)},function(ce){(W._status===0||W._status===-1)&&(W._status=2,W._result=ce)}),W._status===-1&&(W._status=0,W._result=X)}if(W._status===1)return W._result.default;throw W._result}var Ae={current:null},Y={transition:null},pe={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:Y,ReactCurrentOwner:te};function de(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:tt,forEach:function(W,X,ce){tt(W,function(){X.apply(this,arguments)},ce)},count:function(W){var X=0;return tt(W,function(){X++}),X},toArray:function(W){return tt(W,function(X){return X})||[]},only:function(W){if(!P(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Ke.Component=R,Ke.Fragment=n,Ke.Profiler=s,Ke.PureComponent=B,Ke.StrictMode=r,Ke.Suspense=h,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Ke.act=de,Ke.cloneElement=function(W,X,ce){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var ee=C({},W.props),he=W.key,ve=W.ref,Ee=W._owner;if(X!=null){if(X.ref!==void 0&&(ve=X.ref,Ee=te.current),X.key!==void 0&&(he=""+X.key),W.type&&W.type.defaultProps)var Fe=W.type.defaultProps;for(We in X)F.call(X,We)&&!S.hasOwnProperty(We)&&(ee[We]=X[We]===void 0&&Fe!==void 0?Fe[We]:X[We])}var We=arguments.length-2;if(We===1)ee.children=ce;else if(1<We){Fe=Array(We);for(var Ne=0;Ne<We;Ne++)Fe[Ne]=arguments[Ne+2];ee.children=Fe}return{$$typeof:t,type:W.type,key:he,ref:ve,props:ee,_owner:Ee}},Ke.createContext=function(W){return W={$$typeof:l,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:a,_context:W},W.Consumer=W},Ke.createElement=I,Ke.createFactory=function(W){var X=I.bind(null,W);return X.type=W,X},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(W){return{$$typeof:u,render:W}},Ke.isValidElement=P,Ke.lazy=function(W){return{$$typeof:y,_payload:{_status:-1,_result:W},_init:nt}},Ke.memo=function(W,X){return{$$typeof:m,type:W,compare:X===void 0?null:X}},Ke.startTransition=function(W){var X=Y.transition;Y.transition={};try{W()}finally{Y.transition=X}},Ke.unstable_act=de,Ke.useCallback=function(W,X){return Ae.current.useCallback(W,X)},Ke.useContext=function(W){return Ae.current.useContext(W)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(W){return Ae.current.useDeferredValue(W)},Ke.useEffect=function(W,X){return Ae.current.useEffect(W,X)},Ke.useId=function(){return Ae.current.useId()},Ke.useImperativeHandle=function(W,X,ce){return Ae.current.useImperativeHandle(W,X,ce)},Ke.useInsertionEffect=function(W,X){return Ae.current.useInsertionEffect(W,X)},Ke.useLayoutEffect=function(W,X){return Ae.current.useLayoutEffect(W,X)},Ke.useMemo=function(W,X){return Ae.current.useMemo(W,X)},Ke.useReducer=function(W,X,ce){return Ae.current.useReducer(W,X,ce)},Ke.useRef=function(W){return Ae.current.useRef(W)},Ke.useState=function(W){return Ae.current.useState(W)},Ke.useSyncExternalStore=function(W,X,ce){return Ae.current.useSyncExternalStore(W,X,ce)},Ke.useTransition=function(){return Ae.current.useTransition()},Ke.version="18.3.1",Ke}var dw;function Cy(){return dw||(dw=1,tg.exports=yS()),tg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function vS(){if(hw)return ru;hw=1;var t=Cy(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,m){var y,w={},x=null,E=null;m!==void 0&&(x=""+m),h.key!==void 0&&(x=""+h.key),h.ref!==void 0&&(E=h.ref);for(y in h)r.call(h,y)&&!a.hasOwnProperty(y)&&(w[y]=h[y]);if(u&&u.defaultProps)for(y in h=u.defaultProps,h)w[y]===void 0&&(w[y]=h[y]);return{$$typeof:e,type:u,key:x,ref:E,props:w,_owner:s.current}}return ru.Fragment=n,ru.jsx=l,ru.jsxs=l,ru}var fw;function _S(){return fw||(fw=1,eg.exports=vS()),eg.exports}var p=_S(),Zu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wS={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},so,Sy,Kx,bS=(Kx=class{constructor(){De(this,so,wS);De(this,Sy,!1)}setTimeoutProvider(t){me(this,so,t)}setTimeout(t,e){return z(this,so).setTimeout(t,e)}clearTimeout(t){z(this,so).clearTimeout(t)}setInterval(t,e){return z(this,so).setInterval(t,e)}clearInterval(t){z(this,so).clearInterval(t)}},so=new WeakMap,Sy=new WeakMap,Kx),ca=new bS;function xS(t){setTimeout(t,0)}var ka=typeof window>"u"||"Deno"in globalThis;function lr(){}function kS(t,e){return typeof t=="function"?t(e):t}function Sg(t){return typeof t=="number"&&t>=0&&t!==1/0}function sk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function mo(t,e){return typeof t=="function"?t(e):t}function Lr(t,e){return typeof t=="function"?t(e):t}function pw(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==Ay(l,e.options))return!1}else if(!Iu(e.queryKey,l))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function mw(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Tu(e.options.mutationKey)!==Tu(a))return!1}else if(!Iu(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Ay(t,e){return((e==null?void 0:e.queryKeyHashFn)||Tu)(t)}function Tu(t){return JSON.stringify(t,(e,n)=>Ag(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Iu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Iu(t[n],e[n])):!1}var ES=Object.prototype.hasOwnProperty;function ik(t,e){if(t===e)return t;const n=gw(t)&&gw(e);if(!n&&!(Ag(t)&&Ag(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,u=n?new Array(l):{};let h=0;for(let m=0;m<l;m++){const y=n?m:a[m],w=t[y],x=e[y];if(w===x){u[y]=w,(n?m<s:ES.call(t,y))&&h++;continue}if(w===null||x===null||typeof w!="object"||typeof x!="object"){u[y]=x;continue}const E=ik(w,x);u[y]=E,E===w&&h++}return s===l&&h===s?t:u}function Cg(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function gw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ag(t){if(!yw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!yw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function yw(t){return Object.prototype.toString.call(t)==="[object Object]"}function TS(t){return new Promise(e=>{ca.setTimeout(e,t)})}function Ng(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ik(t,e):e}function IS(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function SS(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Ny=Symbol();function ok(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Ny?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function CS(t,e){return typeof t=="function"?t(...e):!!t}function AS(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var ha,io,Ol,Gx,NS=(Gx=class extends Zu{constructor(){super();De(this,ha);De(this,io);De(this,Ol);me(this,Ol,e=>{if(!ka&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){z(this,io)||this.setEventListener(z(this,Ol))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,io))==null||e.call(this),me(this,io,void 0))}setEventListener(e){var n;me(this,Ol,e),(n=z(this,io))==null||n.call(this),me(this,io,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,ha)!==e&&(me(this,ha,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof z(this,ha)=="boolean"?z(this,ha):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ha=new WeakMap,io=new WeakMap,Ol=new WeakMap,Gx),Ry=new NS;function Rg(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var RS=xS;function PS(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=RS;const a=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{n(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||l()}return h},batchCalls:u=>(...h)=>{a(()=>{u(...h)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var xn=PS(),Ll,oo,Ml,Qx,DS=(Qx=class extends Zu{constructor(){super();De(this,Ll,!0);De(this,oo);De(this,Ml);me(this,Ml,e=>{if(!ka&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,oo)||this.setEventListener(z(this,Ml))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,oo))==null||e.call(this),me(this,oo,void 0))}setEventListener(e){var n;me(this,Ml,e),(n=z(this,oo))==null||n.call(this),me(this,oo,e(this.setOnline.bind(this)))}setOnline(e){z(this,Ll)!==e&&(me(this,Ll,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,Ll)}},Ll=new WeakMap,oo=new WeakMap,Ml=new WeakMap,Qx),_f=new DS;function jS(t){return Math.min(1e3*2**t,3e4)}function ak(t){return(t??"online")==="online"?_f.isOnline():!0}var Pg=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function lk(t){let e=!1,n=0,r;const s=Rg(),a=()=>s.status!=="pending",l=k=>{var R;if(!a()){const q=new Pg(k);x(q),(R=t.onCancel)==null||R.call(t,q)}},u=()=>{e=!0},h=()=>{e=!1},m=()=>Ry.isFocused()&&(t.networkMode==="always"||_f.isOnline())&&t.canRun(),y=()=>ak(t.networkMode)&&t.canRun(),w=k=>{a()||(r==null||r(),s.resolve(k))},x=k=>{a()||(r==null||r(),s.reject(k))},E=()=>new Promise(k=>{var R;r=q=>{(a()||m())&&k(q)},(R=t.onPause)==null||R.call(t)}).then(()=>{var k;r=void 0,a()||(k=t.onContinue)==null||k.call(t)}),C=()=>{if(a())return;let k;const R=n===0?t.initialPromise:void 0;try{k=R??t.fn()}catch(q){k=Promise.reject(q)}Promise.resolve(k).then(w).catch(q=>{var te;if(a())return;const B=t.retry??(ka?0:3),$=t.retryDelay??jS,H=typeof $=="function"?$(n,q):$,F=B===!0||typeof B=="number"&&n<B||typeof B=="function"&&B(n,q);if(e||!F){x(q);return}n++,(te=t.onFail)==null||te.call(t,n,q),TS(H).then(()=>m()?void 0:E()).then(()=>{e?x(q):C()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r==null||r(),s),cancelRetry:u,continueRetry:h,canStart:y,start:()=>(y()?C():E().then(C),s)}}var fa,Zx,ck=(Zx=class{constructor(){De(this,fa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Sg(this.gcTime)&&me(this,fa,ca.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ka?1/0:300*1e3))}clearGcTimeout(){z(this,fa)&&(ca.clearTimeout(z(this,fa)),me(this,fa,void 0))}},fa=new WeakMap,Zx),pa,Vl,Or,ma,un,qu,ga,is,ri,Yx,OS=(Yx=class extends ck{constructor(n){super();De(this,is);De(this,pa);De(this,Vl);De(this,Or);De(this,ma);De(this,un);De(this,qu);De(this,ga);me(this,ga,!1),me(this,qu,n.defaultOptions),this.setOptions(n.options),this.observers=[],me(this,ma,n.client),me(this,Or,z(this,ma).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,me(this,pa,_w(this.options)),this.state=n.state??z(this,pa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=z(this,un))==null?void 0:n.promise}setOptions(n){if(this.options={...z(this,qu),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=_w(this.options);r.data!==void 0&&(this.setState(vw(r.data,r.dataUpdatedAt)),me(this,pa,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,Or).remove(this)}setData(n,r){const s=Ng(this.state.data,n,this.options);return Ye(this,is,ri).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ye(this,is,ri).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=z(this,un))==null?void 0:s.promise;return(a=z(this,un))==null||a.cancel(n),r?r.then(lr).catch(lr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,pa))}isActive(){return this.observers.some(n=>Lr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ny||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>mo(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!sk(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=z(this,un))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=z(this,un))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),z(this,Or).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(z(this,un)&&(z(this,ga)?z(this,un).cancel({revert:!0}):z(this,un).cancelRetry()),this.scheduleGc()),z(this,Or).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ye(this,is,ri).call(this,{type:"invalidate"})}async fetch(n,r){var m,y,w,x,E,C,k,R,q,B,$,H;if(this.state.fetchStatus!=="idle"&&((m=z(this,un))==null?void 0:m.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(z(this,un))return z(this,un).continueRetry(),z(this,un).promise}if(n&&this.setOptions(n),!this.options.queryFn){const F=this.observers.find(te=>te.options.queryFn);F&&this.setOptions(F.options)}const s=new AbortController,a=F=>{Object.defineProperty(F,"signal",{enumerable:!0,get:()=>(me(this,ga,!0),s.signal)})},l=()=>{const F=ok(this.options,r),S=(()=>{const I={client:z(this,ma),queryKey:this.queryKey,meta:this.meta};return a(I),I})();return me(this,ga,!1),this.options.persister?this.options.persister(F,S,this):F(S)},h=(()=>{const F={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:z(this,ma),state:this.state,fetchFn:l};return a(F),F})();(y=this.options.behavior)==null||y.onFetch(h,this),me(this,Vl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((w=h.fetchOptions)==null?void 0:w.meta))&&Ye(this,is,ri).call(this,{type:"fetch",meta:(x=h.fetchOptions)==null?void 0:x.meta}),me(this,un,lk({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,onCancel:F=>{F instanceof Pg&&F.revert&&this.setState({...z(this,Vl),fetchStatus:"idle"}),s.abort()},onFail:(F,te)=>{Ye(this,is,ri).call(this,{type:"failed",failureCount:F,error:te})},onPause:()=>{Ye(this,is,ri).call(this,{type:"pause"})},onContinue:()=>{Ye(this,is,ri).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0}));try{const F=await z(this,un).start();if(F===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(F),(C=(E=z(this,Or).config).onSuccess)==null||C.call(E,F,this),(R=(k=z(this,Or).config).onSettled)==null||R.call(k,F,this.state.error,this),F}catch(F){if(F instanceof Pg){if(F.silent)return z(this,un).promise;if(F.revert){if(this.state.data===void 0)throw F;return this.state.data}}throw Ye(this,is,ri).call(this,{type:"error",error:F}),(B=(q=z(this,Or).config).onError)==null||B.call(q,F,this),(H=($=z(this,Or).config).onSettled)==null||H.call($,this.state.data,F,this),F}finally{this.scheduleGc()}}},pa=new WeakMap,Vl=new WeakMap,Or=new WeakMap,ma=new WeakMap,un=new WeakMap,qu=new WeakMap,ga=new WeakMap,is=new WeakSet,ri=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...uk(s.data,this.options),fetchMeta:n.meta??null};case"success":const a={...s,...vw(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return me(this,Vl,n.manual?a:void 0),a;case"error":const l=n.error;return{...s,error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),xn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),z(this,Or).notify({query:this,type:"updated",action:n})})},Yx);function uk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ak(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function vw(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _w(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ar,Je,Hu,qn,ya,Fl,ii,ao,Ku,zl,Ul,va,_a,lo,Bl,ct,au,Dg,jg,Og,Lg,Mg,Vg,Fg,dk,Jx,LS=(Jx=class extends Zu{constructor(e,n){super();De(this,ct);De(this,ar);De(this,Je);De(this,Hu);De(this,qn);De(this,ya);De(this,Fl);De(this,ii);De(this,ao);De(this,Ku);De(this,zl);De(this,Ul);De(this,va);De(this,_a);De(this,lo);De(this,Bl,new Set);this.options=n,me(this,ar,e),me(this,ao,null),me(this,ii,Rg()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(z(this,Je).addObserver(this),ww(z(this,Je),this.options)?Ye(this,ct,au).call(this):this.updateResult(),Ye(this,ct,Lg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return zg(z(this,Je),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return zg(z(this,Je),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ye(this,ct,Mg).call(this),Ye(this,ct,Vg).call(this),z(this,Je).removeObserver(this)}setOptions(e){const n=this.options,r=z(this,Je);if(this.options=z(this,ar).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Lr(this.options.enabled,z(this,Je))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ye(this,ct,Fg).call(this),z(this,Je).setOptions(this.options),n._defaulted&&!Cg(this.options,n)&&z(this,ar).getQueryCache().notify({type:"observerOptionsUpdated",query:z(this,Je),observer:this});const s=this.hasListeners();s&&bw(z(this,Je),r,this.options,n)&&Ye(this,ct,au).call(this),this.updateResult(),s&&(z(this,Je)!==r||Lr(this.options.enabled,z(this,Je))!==Lr(n.enabled,z(this,Je))||mo(this.options.staleTime,z(this,Je))!==mo(n.staleTime,z(this,Je)))&&Ye(this,ct,Dg).call(this);const a=Ye(this,ct,jg).call(this);s&&(z(this,Je)!==r||Lr(this.options.enabled,z(this,Je))!==Lr(n.enabled,z(this,Je))||a!==z(this,lo))&&Ye(this,ct,Og).call(this,a)}getOptimisticResult(e){const n=z(this,ar).getQueryCache().build(z(this,ar),e),r=this.createResult(n,e);return VS(this,r)&&(me(this,qn,r),me(this,Fl,this.options),me(this,ya,z(this,Je).state)),r}getCurrentResult(){return z(this,qn)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&z(this,ii).status==="pending"&&z(this,ii).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){z(this,Bl).add(e)}getCurrentQuery(){return z(this,Je)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=z(this,ar).defaultQueryOptions(e),r=z(this,ar).getQueryCache().build(z(this,ar),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ye(this,ct,au).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),z(this,qn)))}createResult(e,n){var N;const r=z(this,Je),s=this.options,a=z(this,qn),l=z(this,ya),u=z(this,Fl),m=e!==r?e.state:z(this,Hu),{state:y}=e;let w={...y},x=!1,E;if(n._optimisticResults){const P=this.hasListeners(),O=!P&&ww(e,n),M=P&&bw(e,r,n,s);(O||M)&&(w={...w,...uk(y.data,e.options)}),n._optimisticResults==="isRestoring"&&(w.fetchStatus="idle")}let{error:C,errorUpdatedAt:k,status:R}=w;E=w.data;let q=!1;if(n.placeholderData!==void 0&&E===void 0&&R==="pending"){let P;a!=null&&a.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(P=a.data,q=!0):P=typeof n.placeholderData=="function"?n.placeholderData((N=z(this,Ul))==null?void 0:N.state.data,z(this,Ul)):n.placeholderData,P!==void 0&&(R="success",E=Ng(a==null?void 0:a.data,P,n),x=!0)}if(n.select&&E!==void 0&&!q)if(a&&E===(l==null?void 0:l.data)&&n.select===z(this,Ku))E=z(this,zl);else try{me(this,Ku,n.select),E=n.select(E),E=Ng(a==null?void 0:a.data,E,n),me(this,zl,E),me(this,ao,null)}catch(P){me(this,ao,P)}z(this,ao)&&(C=z(this,ao),E=z(this,zl),k=Date.now(),R="error");const B=w.fetchStatus==="fetching",$=R==="pending",H=R==="error",F=$&&B,te=E!==void 0,I={status:R,fetchStatus:w.fetchStatus,isPending:$,isSuccess:R==="success",isError:H,isInitialLoading:F,isLoading:F,data:E,dataUpdatedAt:w.dataUpdatedAt,error:C,errorUpdatedAt:k,failureCount:w.fetchFailureCount,failureReason:w.fetchFailureReason,errorUpdateCount:w.errorUpdateCount,isFetched:w.dataUpdateCount>0||w.errorUpdateCount>0,isFetchedAfterMount:w.dataUpdateCount>m.dataUpdateCount||w.errorUpdateCount>m.errorUpdateCount,isFetching:B,isRefetching:B&&!$,isLoadingError:H&&!te,isPaused:w.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:H&&te,isStale:Py(e,n),refetch:this.refetch,promise:z(this,ii),isEnabled:Lr(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=D=>{I.status==="error"?D.reject(I.error):I.data!==void 0&&D.resolve(I.data)},O=()=>{const D=me(this,ii,I.promise=Rg());P(D)},M=z(this,ii);switch(M.status){case"pending":e.queryHash===r.queryHash&&P(M);break;case"fulfilled":(I.status==="error"||I.data!==M.value)&&O();break;case"rejected":(I.status!=="error"||I.error!==M.reason)&&O();break}}return I}updateResult(){const e=z(this,qn),n=this.createResult(z(this,Je),this.options);if(me(this,ya,z(this,Je).state),me(this,Fl,this.options),z(this,ya).data!==void 0&&me(this,Ul,z(this,Je)),Cg(n,e))return;me(this,qn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!z(this,Bl).size)return!0;const l=new Set(a??z(this,Bl));return this.options.throwOnError&&l.add("error"),Object.keys(z(this,qn)).some(u=>{const h=u;return z(this,qn)[h]!==e[h]&&l.has(h)})};Ye(this,ct,dk).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ye(this,ct,Lg).call(this)}},ar=new WeakMap,Je=new WeakMap,Hu=new WeakMap,qn=new WeakMap,ya=new WeakMap,Fl=new WeakMap,ii=new WeakMap,ao=new WeakMap,Ku=new WeakMap,zl=new WeakMap,Ul=new WeakMap,va=new WeakMap,_a=new WeakMap,lo=new WeakMap,Bl=new WeakMap,ct=new WeakSet,au=function(e){Ye(this,ct,Fg).call(this);let n=z(this,Je).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(lr)),n},Dg=function(){Ye(this,ct,Mg).call(this);const e=mo(this.options.staleTime,z(this,Je));if(ka||z(this,qn).isStale||!Sg(e))return;const r=sk(z(this,qn).dataUpdatedAt,e)+1;me(this,va,ca.setTimeout(()=>{z(this,qn).isStale||this.updateResult()},r))},jg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(z(this,Je)):this.options.refetchInterval)??!1},Og=function(e){Ye(this,ct,Vg).call(this),me(this,lo,e),!(ka||Lr(this.options.enabled,z(this,Je))===!1||!Sg(z(this,lo))||z(this,lo)===0)&&me(this,_a,ca.setInterval(()=>{(this.options.refetchIntervalInBackground||Ry.isFocused())&&Ye(this,ct,au).call(this)},z(this,lo)))},Lg=function(){Ye(this,ct,Dg).call(this),Ye(this,ct,Og).call(this,Ye(this,ct,jg).call(this))},Mg=function(){z(this,va)&&(ca.clearTimeout(z(this,va)),me(this,va,void 0))},Vg=function(){z(this,_a)&&(ca.clearInterval(z(this,_a)),me(this,_a,void 0))},Fg=function(){const e=z(this,ar).getQueryCache().build(z(this,ar),this.options);if(e===z(this,Je))return;const n=z(this,Je);me(this,Je,e),me(this,Hu,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},dk=function(e){xn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(z(this,qn))}),z(this,ar).getQueryCache().notify({query:z(this,Je),type:"observerResultsUpdated"})})},Jx);function MS(t,e){return Lr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ww(t,e){return MS(t,e)||t.state.data!==void 0&&zg(t,e,e.refetchOnMount)}function zg(t,e,n){if(Lr(e.enabled,t)!==!1&&mo(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Py(t,e)}return!1}function bw(t,e,n,r){return(t!==e||Lr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Py(t,n)}function Py(t,e){return Lr(e.enabled,t)!==!1&&t.isStaleByTime(mo(e.staleTime,t))}function VS(t,e){return!Cg(t.getCurrentResult(),e)}function xw(t){return{onFetch:(e,n)=>{var y,w,x,E,C;const r=e.options,s=(x=(w=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:w.fetchMore)==null?void 0:x.direction,a=((E=e.state.data)==null?void 0:E.pages)||[],l=((C=e.state.data)==null?void 0:C.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const m=async()=>{let k=!1;const R=$=>{AS($,()=>e.signal,()=>k=!0)},q=ok(e.options,e.fetchOptions),B=async($,H,F)=>{if(k)return Promise.reject();if(H==null&&$.pages.length)return Promise.resolve($);const S=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:H,direction:F?"backward":"forward",meta:e.options.meta};return R(O),O})(),I=await q(S),{maxPages:N}=e.options,P=F?SS:IS;return{pages:P($.pages,I,N),pageParams:P($.pageParams,H,N)}};if(s&&a.length){const $=s==="backward",H=$?FS:kw,F={pages:a,pageParams:l},te=H(r,F);u=await B(F,te,$)}else{const $=t??a.length;do{const H=h===0?l[0]??r.initialPageParam:kw(r,u);if(h>0&&H==null)break;u=await B(u,H),h++}while(h<$)}return u};e.options.persister?e.fetchFn=()=>{var k,R;return(R=(k=e.options).persister)==null?void 0:R.call(k,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=m}}}function kw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function FS(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Gu,Is,Hn,wa,Ss,Yi,Xx,zS=(Xx=class extends ck{constructor(n){super();De(this,Ss);De(this,Gu);De(this,Is);De(this,Hn);De(this,wa);me(this,Gu,n.client),this.mutationId=n.mutationId,me(this,Hn,n.mutationCache),me(this,Is,[]),this.state=n.state||US(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){z(this,Is).includes(n)||(z(this,Is).push(n),this.clearGcTimeout(),z(this,Hn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){me(this,Is,z(this,Is).filter(r=>r!==n)),this.scheduleGc(),z(this,Hn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){z(this,Is).length||(this.state.status==="pending"?this.scheduleGc():z(this,Hn).remove(this))}continue(){var n;return((n=z(this,wa))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var u,h,m,y,w,x,E,C,k,R,q,B,$,H,F,te,S,I,N,P;const r=()=>{Ye(this,Ss,Yi).call(this,{type:"continue"})},s={client:z(this,Gu),meta:this.options.meta,mutationKey:this.options.mutationKey};me(this,wa,lk({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(O,M)=>{Ye(this,Ss,Yi).call(this,{type:"failed",failureCount:O,error:M})},onPause:()=>{Ye(this,Ss,Yi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,Hn).canRun(this)}));const a=this.state.status==="pending",l=!z(this,wa).canStart();try{if(a)r();else{Ye(this,Ss,Yi).call(this,{type:"pending",variables:n,isPaused:l}),await((h=(u=z(this,Hn).config).onMutate)==null?void 0:h.call(u,n,this,s));const M=await((y=(m=this.options).onMutate)==null?void 0:y.call(m,n,s));M!==this.state.context&&Ye(this,Ss,Yi).call(this,{type:"pending",context:M,variables:n,isPaused:l})}const O=await z(this,wa).start();return await((x=(w=z(this,Hn).config).onSuccess)==null?void 0:x.call(w,O,n,this.state.context,this,s)),await((C=(E=this.options).onSuccess)==null?void 0:C.call(E,O,n,this.state.context,s)),await((R=(k=z(this,Hn).config).onSettled)==null?void 0:R.call(k,O,null,this.state.variables,this.state.context,this,s)),await((B=(q=this.options).onSettled)==null?void 0:B.call(q,O,null,n,this.state.context,s)),Ye(this,Ss,Yi).call(this,{type:"success",data:O}),O}catch(O){try{await((H=($=z(this,Hn).config).onError)==null?void 0:H.call($,O,n,this.state.context,this,s))}catch(M){Promise.reject(M)}try{await((te=(F=this.options).onError)==null?void 0:te.call(F,O,n,this.state.context,s))}catch(M){Promise.reject(M)}try{await((I=(S=z(this,Hn).config).onSettled)==null?void 0:I.call(S,void 0,O,this.state.variables,this.state.context,this,s))}catch(M){Promise.reject(M)}try{await((P=(N=this.options).onSettled)==null?void 0:P.call(N,void 0,O,n,this.state.context,s))}catch(M){Promise.reject(M)}throw Ye(this,Ss,Yi).call(this,{type:"error",error:O}),O}finally{z(this,Hn).runNext(this)}}},Gu=new WeakMap,Is=new WeakMap,Hn=new WeakMap,wa=new WeakMap,Ss=new WeakSet,Yi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),xn.batch(()=>{z(this,Is).forEach(s=>{s.onMutationUpdate(n)}),z(this,Hn).notify({mutation:this,type:"updated",action:n})})},Xx);function US(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var oi,os,Qu,ek,BS=(ek=class extends Zu{constructor(e={}){super();De(this,oi);De(this,os);De(this,Qu);this.config=e,me(this,oi,new Set),me(this,os,new Map),me(this,Qu,0)}build(e,n,r){const s=new zS({client:e,mutationCache:this,mutationId:++Lh(this,Qu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){z(this,oi).add(e);const n=Mh(e);if(typeof n=="string"){const r=z(this,os).get(n);r?r.push(e):z(this,os).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,oi).delete(e)){const n=Mh(e);if(typeof n=="string"){const r=z(this,os).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&z(this,os).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Mh(e);if(typeof n=="string"){const r=z(this,os).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Mh(e);if(typeof n=="string"){const s=(r=z(this,os).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){xn.batch(()=>{z(this,oi).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,oi).clear(),z(this,os).clear()})}getAll(){return Array.from(z(this,oi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>mw(n,r))}findAll(e={}){return this.getAll().filter(n=>mw(e,n))}notify(e){xn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return xn.batch(()=>Promise.all(e.map(n=>n.continue().catch(lr))))}},oi=new WeakMap,os=new WeakMap,Qu=new WeakMap,ek);function Mh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Cs,tk,$S=(tk=class extends Zu{constructor(e={}){super();De(this,Cs);this.config=e,me(this,Cs,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??Ay(s,n);let l=this.get(a);return l||(l=new OS({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){z(this,Cs).has(e.queryHash)||(z(this,Cs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=z(this,Cs).get(e.queryHash);n&&(e.destroy(),n===e&&z(this,Cs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){xn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,Cs).get(e)}getAll(){return[...z(this,Cs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>pw(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>pw(e,r)):n}notify(e){xn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){xn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){xn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Cs=new WeakMap,tk),Mt,co,uo,$l,Wl,ho,ql,Hl,nk,WS=(nk=class{constructor(t={}){De(this,Mt);De(this,co);De(this,uo);De(this,$l);De(this,Wl);De(this,ho);De(this,ql);De(this,Hl);me(this,Mt,t.queryCache||new $S),me(this,co,t.mutationCache||new BS),me(this,uo,t.defaultOptions||{}),me(this,$l,new Map),me(this,Wl,new Map),me(this,ho,0)}mount(){Lh(this,ho)._++,z(this,ho)===1&&(me(this,ql,Ry.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,Mt).onFocus())})),me(this,Hl,_f.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,Mt).onOnline())})))}unmount(){var t,e;Lh(this,ho)._--,z(this,ho)===0&&((t=z(this,ql))==null||t.call(this),me(this,ql,void 0),(e=z(this,Hl))==null||e.call(this),me(this,Hl,void 0))}isFetching(t){return z(this,Mt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return z(this,co).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,Mt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=z(this,Mt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(mo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return z(this,Mt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=z(this,Mt).get(r.queryHash),a=s==null?void 0:s.state.data,l=kS(e,a);if(l!==void 0)return z(this,Mt).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return xn.batch(()=>z(this,Mt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,Mt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=z(this,Mt);xn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=z(this,Mt);return xn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=xn.batch(()=>z(this,Mt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(lr).catch(lr)}invalidateQueries(t,e={}){return xn.batch(()=>(z(this,Mt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=xn.batch(()=>z(this,Mt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(lr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(lr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=z(this,Mt).build(this,e);return n.isStaleByTime(mo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(lr).catch(lr)}fetchInfiniteQuery(t){return t.behavior=xw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(lr).catch(lr)}ensureInfiniteQueryData(t){return t.behavior=xw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return _f.isOnline()?z(this,co).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,Mt)}getMutationCache(){return z(this,co)}getDefaultOptions(){return z(this,uo)}setDefaultOptions(t){me(this,uo,t)}setQueryDefaults(t,e){z(this,$l).set(Tu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...z(this,$l).values()],n={};return e.forEach(r=>{Iu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){z(this,Wl).set(Tu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...z(this,Wl).values()],n={};return e.forEach(r=>{Iu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...z(this,uo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ay(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ny&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...z(this,uo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){z(this,Mt).clear(),z(this,co).clear()}},Mt=new WeakMap,co=new WeakMap,uo=new WeakMap,$l=new WeakMap,Wl=new WeakMap,ho=new WeakMap,ql=new WeakMap,Hl=new WeakMap,nk),j=Cy();const Le=rk(j);var hk=j.createContext(void 0),Dy=t=>{const e=j.useContext(hk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qS=({client:t,children:e})=>(j.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(hk.Provider,{value:t,children:e})),fk=j.createContext(!1),HS=()=>j.useContext(fk);fk.Provider;function KS(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var GS=j.createContext(KS()),QS=()=>j.useContext(GS),ZS=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},YS=t=>{j.useEffect(()=>{t.clearReset()},[t])},JS=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||CS(n,[t.error,r])),XS=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},eC=(t,e)=>t.isLoading&&t.isFetching&&!e,tC=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ew=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function nC(t,e,n){var w,x,E,C,k;const r=HS(),s=QS(),a=Dy(),l=a.defaultQueryOptions(t);(x=(w=a.getDefaultOptions().queries)==null?void 0:w._experimental_beforeQuery)==null||x.call(w,l),l._optimisticResults=r?"isRestoring":"optimistic",XS(l),ZS(l,s),YS(s);const u=!a.getQueryCache().get(l.queryHash),[h]=j.useState(()=>new e(a,l)),m=h.getOptimisticResult(l),y=!r&&t.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(R=>{const q=y?h.subscribe(xn.batchCalls(R)):lr;return h.updateResult(),q},[h,y]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),j.useEffect(()=>{h.setOptions(l)},[l,h]),tC(l,m))throw Ew(l,h,s);if(JS({result:m,errorResetBoundary:s,throwOnError:l.throwOnError,query:a.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw m.error;if((C=(E=a.getDefaultOptions().queries)==null?void 0:E._experimental_afterQuery)==null||C.call(E,l,m),l.experimental_prefetchInRender&&!ka&&eC(m,r)){const R=u?Ew(l,h,s):(k=a.getQueryCache().get(l.queryHash))==null?void 0:k.promise;R==null||R.catch(lr).finally(()=>{h.updateResult()})}return l.notifyOnChangeProps?m:h.trackResult(m)}function rC(t,e){return nC(t,LS)}var Vh={},ng={exports:{}},or={},rg={exports:{}},sg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw;function sC(){return Tw||(Tw=1,(function(t){function e(Y,pe){var de=Y.length;Y.push(pe);e:for(;0<de;){var W=de-1>>>1,X=Y[W];if(0<s(X,pe))Y[W]=pe,Y[de]=X,de=W;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var pe=Y[0],de=Y.pop();if(de!==pe){Y[0]=de;e:for(var W=0,X=Y.length,ce=X>>>1;W<ce;){var ee=2*(W+1)-1,he=Y[ee],ve=ee+1,Ee=Y[ve];if(0>s(he,de))ve<X&&0>s(Ee,he)?(Y[W]=Ee,Y[ve]=de,W=ve):(Y[W]=he,Y[ee]=de,W=ee);else if(ve<X&&0>s(Ee,de))Y[W]=Ee,Y[ve]=de,W=ve;else break e}}return pe}function s(Y,pe){var de=Y.sortIndex-pe.sortIndex;return de!==0?de:Y.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var h=[],m=[],y=1,w=null,x=3,E=!1,C=!1,k=!1,R=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(Y){for(var pe=n(m);pe!==null;){if(pe.callback===null)r(m);else if(pe.startTime<=Y)r(m),pe.sortIndex=pe.expirationTime,e(h,pe);else break;pe=n(m)}}function H(Y){if(k=!1,$(Y),!C)if(n(h)!==null)C=!0,nt(F);else{var pe=n(m);pe!==null&&Ae(H,pe.startTime-Y)}}function F(Y,pe){C=!1,k&&(k=!1,q(I),I=-1),E=!0;var de=x;try{for($(pe),w=n(h);w!==null&&(!(w.expirationTime>pe)||Y&&!O());){var W=w.callback;if(typeof W=="function"){w.callback=null,x=w.priorityLevel;var X=W(w.expirationTime<=pe);pe=t.unstable_now(),typeof X=="function"?w.callback=X:w===n(h)&&r(h),$(pe)}else r(h);w=n(h)}if(w!==null)var ce=!0;else{var ee=n(m);ee!==null&&Ae(H,ee.startTime-pe),ce=!1}return ce}finally{w=null,x=de,E=!1}}var te=!1,S=null,I=-1,N=5,P=-1;function O(){return!(t.unstable_now()-P<N)}function M(){if(S!==null){var Y=t.unstable_now();P=Y;var pe=!0;try{pe=S(!0,Y)}finally{pe?D():(te=!1,S=null)}}else te=!1}var D;if(typeof B=="function")D=function(){B(M)};else if(typeof MessageChannel<"u"){var Be=new MessageChannel,tt=Be.port2;Be.port1.onmessage=M,D=function(){tt.postMessage(null)}}else D=function(){R(M,0)};function nt(Y){S=Y,te||(te=!0,D())}function Ae(Y,pe){I=R(function(){Y(t.unstable_now())},pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){C||E||(C=!0,nt(F))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Y){switch(x){case 1:case 2:case 3:var pe=3;break;default:pe=x}var de=x;x=pe;try{return Y()}finally{x=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,pe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var de=x;x=Y;try{return pe()}finally{x=de}},t.unstable_scheduleCallback=function(Y,pe,de){var W=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?W+de:W):de=W,Y){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=de+X,Y={id:y++,callback:pe,priorityLevel:Y,startTime:de,expirationTime:X,sortIndex:-1},de>W?(Y.sortIndex=de,e(m,Y),n(h)===null&&Y===n(m)&&(k?(q(I),I=-1):k=!0,Ae(H,de-W))):(Y.sortIndex=X,e(h,Y),C||E||(C=!0,nt(F))),Y},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(Y){var pe=x;return function(){var de=x;x=pe;try{return Y.apply(this,arguments)}finally{x=de}}}})(sg)),sg}var Iw;function iC(){return Iw||(Iw=1,rg.exports=sC()),rg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function oC(){if(Sw)return or;Sw=1;var t=Cy(),e=iC();function n(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function x(i){return h.call(w,i)?!0:h.call(y,i)?!1:m.test(i)?w[i]=!0:(y[i]=!0,!1)}function E(i,o,c,f){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function C(i,o,c,f){if(o===null||typeof o>"u"||E(i,o,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function k(i,o,c,f,g,_,T){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=i,this.type=o,this.sanitizeURL=_,this.removeEmptyString=T}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){R[i]=new k(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];R[o]=new k(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){R[i]=new k(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){R[i]=new k(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){R[i]=new k(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){R[i]=new k(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){R[i]=new k(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){R[i]=new k(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){R[i]=new k(i,5,!1,i.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function B(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(q,B);R[o]=new k(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(q,B);R[o]=new k(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(q,B);R[o]=new k(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){R[i]=new k(i,1,!1,i.toLowerCase(),null,!1,!1)}),R.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){R[i]=new k(i,1,!1,i.toLowerCase(),null,!0,!0)});function $(i,o,c,f){var g=R.hasOwnProperty(o)?R[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(C(o,c,g,f)&&(c=null),f||g===null?x(o)&&(c===null?i.removeAttribute(o):i.setAttribute(o,""+c)):g.mustUseProperty?i[g.propertyName]=c===null?g.type===3?!1:"":c:(o=g.attributeName,f=g.attributeNamespace,c===null?i.removeAttribute(o):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,f?i.setAttributeNS(f,o,c):i.setAttribute(o,c))))}var H=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),te=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),Be=Symbol.for("react.suspense_list"),tt=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),Y=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=Y&&i[Y]||i["@@iterator"],typeof i=="function"?i:null)}var de=Object.assign,W;function X(i){if(W===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);W=o&&o[1]||""}return`
`+W+i}var ce=!1;function ee(i,o){if(!i||ce)return"";ce=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Z){var f=Z}Reflect.construct(i,[],o)}else{try{o.call()}catch(Z){f=Z}i.call(o.prototype)}else{try{throw Error()}catch(Z){f=Z}i()}}catch(Z){if(Z&&f&&typeof Z.stack=="string"){for(var g=Z.stack.split(`
`),_=f.stack.split(`
`),T=g.length-1,L=_.length-1;1<=T&&0<=L&&g[T]!==_[L];)L--;for(;1<=T&&0<=L;T--,L--)if(g[T]!==_[L]){if(T!==1||L!==1)do if(T--,L--,0>L||g[T]!==_[L]){var V=`
`+g[T].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=T&&0<=L);break}}}finally{ce=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?X(i):""}function he(i){switch(i.tag){case 5:return X(i.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return i=ee(i.type,!1),i;case 11:return i=ee(i.type.render,!1),i;case 1:return i=ee(i.type,!0),i;default:return""}}function ve(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case te:return"Portal";case N:return"Profiler";case I:return"StrictMode";case D:return"Suspense";case Be:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case P:return(i._context.displayName||"Context")+".Provider";case M:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case tt:return o=i.displayName||null,o!==null?o:ve(i.type)||"Memo";case nt:o=i._payload,i=i._init;try{return ve(i(o))}catch{}}return null}function Ee(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(o);case 8:return o===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Fe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function We(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ne(i){var o=We(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,_=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,_.call(this,T)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Zt(i){i._valueTracker||(i._valueTracker=Ne(i))}function jt(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return i&&(f=We(i)?i.checked?"true":"false":i.value),i=f,i!==c?(o.setValue(i),!0):!1}function Vn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function mn(i,o){var c=o.checked;return de({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function hr(i,o){var c=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;c=Fe(o.value!=null?o.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function kr(i,o){o=o.checked,o!=null&&$(i,"checked",o,!1)}function bi(i,o){kr(i,o);var c=Fe(o.value),f=o.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?fs(i,o.type,c):o.hasOwnProperty("defaultValue")&&fs(i,o.type,Fe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Do(i,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,c||o===i.value||(i.value=o),i.defaultValue=o}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function fs(i,o,c){(o!=="number"||Vn(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var sn=Array.isArray;function Zn(i,o,c,f){if(i=i.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=o.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+Fe(c),o=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function ps(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return de({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function zs(i,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(n(92));if(sn(c)){if(1<c.length)throw Error(n(93));c=c[0]}o=c}o==null&&(o=""),c=o}i._wrapperState={initialValue:Fe(c)}}function Us(i,o){var c=Fe(o.value),f=Fe(o.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),o.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function jo(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Ft(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Ft(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Sn,$r=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,f,g){MSApp.execUnsafeLocalFunction(function(){return i(o,c,f,g)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Sn=Sn||document.createElement("div"),Sn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Sn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Wr(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var Cn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ms=["Webkit","ms","Moz","O"];Object.keys(Cn).forEach(function(i){ms.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Cn[o]=Cn[i]})});function Oo(i,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||Cn.hasOwnProperty(i)&&Cn[i]?(""+o).trim():o+"px"}function Lo(i,o){i=i.style;for(var c in o)if(o.hasOwnProperty(c)){var f=c.indexOf("--")===0,g=Oo(c,o[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,g):i[c]=g}}var Bs=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xi(i,o){if(o){if(Bs[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function Mo(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gs=null;function ki(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ei=null,Yn=null,ft=null;function Bt(i){if(i=Bc(i)){if(typeof Ei!="function")throw Error(n(280));var o=i.stateNode;o&&(o=Yd(o),Ei(i.stateNode,i.type,o))}}function kt(i){Yn?ft?ft.push(i):ft=[i]:Yn=i}function Jn(){if(Yn){var i=Yn,o=ft;if(ft=Yn=null,Bt(i),o)for(i=0;i<o.length;i++)Bt(o[i])}}function $t(i,o){return i(o)}function Yt(){}var Wt=!1;function Er(i,o,c){if(Wt)return i(o,c);Wt=!0;try{return $t(i,o,c)}finally{Wt=!1,(Yn!==null||ft!==null)&&(Yt(),Jn())}}function qe(i,o){var c=i.stateNode;if(c===null)return null;var f=Yd(c);if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var Fn=!1;if(u)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Fn=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch{Fn=!1}function gn(i,o,c,f,g,_,T,L,V){var Z=Array.prototype.slice.call(arguments,3);try{o.apply(c,Z)}catch(ie){this.onError(ie)}}var fr=!1,Tr=null,qt=!1,qr=null,Vo={onError:function(i){fr=!0,Tr=i}};function Va(i,o,c,f,g,_,T,L,V){fr=!1,Tr=null,gn.apply(Vo,arguments)}function xd(i,o,c,f,g,_,T,L,V){if(Va.apply(this,arguments),fr){if(fr){var Z=Tr;fr=!1,Tr=null}else throw Error(n(198));qt||(qt=!0,qr=Z)}}function Hr(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function Fo(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Kr(i){if(Hr(i)!==i)throw Error(n(188))}function kd(i){var o=i.alternate;if(!o){if(o=Hr(i),o===null)throw Error(n(188));return o!==i?null:i}for(var c=i,f=o;;){var g=c.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===c)return Kr(g),i;if(_===f)return Kr(g),o;_=_.sibling}throw Error(n(188))}if(c.return!==f.return)c=g,f=_;else{for(var T=!1,L=g.child;L;){if(L===c){T=!0,c=g,f=_;break}if(L===f){T=!0,f=g,c=_;break}L=L.sibling}if(!T){for(L=_.child;L;){if(L===c){T=!0,c=_,f=g;break}if(L===f){T=!0,f=_,c=g;break}L=L.sibling}if(!T)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:o}function kc(i){return i=kd(i),i!==null?Fa(i):null}function Fa(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Fa(i);if(o!==null)return o;i=i.sibling}return null}var za=e.unstable_scheduleCallback,Ec=e.unstable_cancelCallback,Ed=e.unstable_shouldYield,Cp=e.unstable_requestPaint,gt=e.unstable_now,Td=e.unstable_getCurrentPriorityLevel,zo=e.unstable_ImmediatePriority,Ti=e.unstable_UserBlockingPriority,Ir=e.unstable_NormalPriority,Tc=e.unstable_LowPriority,Id=e.unstable_IdlePriority,Uo=null,pr=null;function Sd(i){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(Uo,i,void 0,(i.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:Ad,Ic=Math.log,Cd=Math.LN2;function Ad(i){return i>>>=0,i===0?32:31-(Ic(i)/Cd|0)|0}var Ua=64,Ba=4194304;function Ii(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Bo(i,o){var c=i.pendingLanes;if(c===0)return 0;var f=0,g=i.suspendedLanes,_=i.pingedLanes,T=c&268435455;if(T!==0){var L=T&~g;L!==0?f=Ii(L):(_&=T,_!==0&&(f=Ii(_)))}else T=c&~g,T!==0?f=Ii(T):_!==0&&(f=Ii(_));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,_=o&-o,g>=_||g===16&&(_&4194240)!==0))return o;if((f&4)!==0&&(f|=c&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)c=31-zn(o),g=1<<c,f|=i[c],o&=~g;return f}function Ap(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $s(i,o){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes;0<_;){var T=31-zn(_),L=1<<T,V=g[T];V===-1?((L&c)===0||(L&f)!==0)&&(g[T]=Ap(L,o)):V<=o&&(i.expiredLanes|=L),_&=~L}}function mr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function $o(){var i=Ua;return Ua<<=1,(Ua&4194240)===0&&(Ua=64),i}function Si(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Ci(i,o,c){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-zn(o),i[o]=c}function pt(i,o){var c=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var g=31-zn(c),_=1<<g;o[g]=0,f[g]=-1,i[g]=-1,c&=~_}}function Ai(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var f=31-zn(c),g=1<<f;g&o|i[f]&o&&(i[f]|=o),c&=~g}}var Ze=0;function Ni(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Nd,$a,Rd,Pd,Dd,Sc=!1,ys=[],yn=null,Gr=null,Qr=null,Ri=new Map,Sr=new Map,vs=[],Np="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jd(i,o){switch(i){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Ri.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sr.delete(o.pointerId)}}function Xn(i,o,c,f,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},o!==null&&(o=Bc(o),o!==null&&$a(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function Rp(i,o,c,f,g){switch(o){case"focusin":return yn=Xn(yn,i,o,c,f,g),!0;case"dragenter":return Gr=Xn(Gr,i,o,c,f,g),!0;case"mouseover":return Qr=Xn(Qr,i,o,c,f,g),!0;case"pointerover":var _=g.pointerId;return Ri.set(_,Xn(Ri.get(_)||null,i,o,c,f,g)),!0;case"gotpointercapture":return _=g.pointerId,Sr.set(_,Xn(Sr.get(_)||null,i,o,c,f,g)),!0}return!1}function Od(i){var o=Go(i.target);if(o!==null){var c=Hr(o);if(c!==null){if(o=c.tag,o===13){if(o=Fo(c),o!==null){i.blockedOn=o,Dd(i.priority,function(){Rd(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ws(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=Wa(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);gs=f,c.target.dispatchEvent(f),gs=null}else return o=Bc(c),o!==null&&$a(o),i.blockedOn=c,!1;o.shift()}return!0}function Wo(i,o,c){Ws(i)&&c.delete(o)}function Ld(){Sc=!1,yn!==null&&Ws(yn)&&(yn=null),Gr!==null&&Ws(Gr)&&(Gr=null),Qr!==null&&Ws(Qr)&&(Qr=null),Ri.forEach(Wo),Sr.forEach(Wo)}function Zr(i,o){i.blockedOn===o&&(i.blockedOn=null,Sc||(Sc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ld)))}function Yr(i){function o(g){return Zr(g,i)}if(0<ys.length){Zr(ys[0],i);for(var c=1;c<ys.length;c++){var f=ys[c];f.blockedOn===i&&(f.blockedOn=null)}}for(yn!==null&&Zr(yn,i),Gr!==null&&Zr(Gr,i),Qr!==null&&Zr(Qr,i),Ri.forEach(o),Sr.forEach(o),c=0;c<vs.length;c++)f=vs[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<vs.length&&(c=vs[0],c.blockedOn===null);)Od(c),c.blockedOn===null&&vs.shift()}var qs=H.ReactCurrentBatchConfig,Pi=!0;function Et(i,o,c,f){var g=Ze,_=qs.transition;qs.transition=null;try{Ze=1,Cc(i,o,c,f)}finally{Ze=g,qs.transition=_}}function Pp(i,o,c,f){var g=Ze,_=qs.transition;qs.transition=null;try{Ze=4,Cc(i,o,c,f)}finally{Ze=g,qs.transition=_}}function Cc(i,o,c,f){if(Pi){var g=Wa(i,o,c,f);if(g===null)$p(i,o,f,qo,c),jd(i,f);else if(Rp(g,i,o,c,f))f.stopPropagation();else if(jd(i,f),o&4&&-1<Np.indexOf(i)){for(;g!==null;){var _=Bc(g);if(_!==null&&Nd(_),_=Wa(i,o,c,f),_===null&&$p(i,o,f,qo,c),_===g)break;g=_}g!==null&&f.stopPropagation()}else $p(i,o,f,null,c)}}var qo=null;function Wa(i,o,c,f){if(qo=null,i=ki(f),i=Go(i),i!==null)if(o=Hr(i),o===null)i=null;else if(c=o.tag,c===13){if(i=Fo(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return qo=i,null}function Ac(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Td()){case zo:return 1;case Ti:return 4;case Ir:case Tc:return 16;case Id:return 536870912;default:return 16}default:return 16}}var gr=null,qa=null,er=null;function Nc(){if(er)return er;var i,o=qa,c=o.length,f,g="value"in gr?gr.value:gr.textContent,_=g.length;for(i=0;i<c&&o[i]===g[i];i++);var T=c-i;for(f=1;f<=T&&o[c-f]===g[_-f];f++);return er=g.slice(i,1<f?1-f:void 0)}function Ha(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function _s(){return!0}function Rc(){return!1}function vn(i){function o(c,f,g,_,T){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?_s:Rc,this.isPropagationStopped=Rc,this}return de(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=_s)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=_s)},persist:function(){},isPersistent:_s}),o}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ka=vn(Jr),ws=de({},Jr,{view:0,detail:0}),Dp=vn(ws),Ga,Hs,Di,Ho=de({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Di&&(Di&&i.type==="mousemove"?(Ga=i.screenX-Di.screenX,Hs=i.screenY-Di.screenY):Hs=Ga=0,Di=i),Ga)},movementY:function(i){return"movementY"in i?i.movementY:Hs}}),Qa=vn(Ho),Pc=de({},Ho,{dataTransfer:0}),Md=vn(Pc),Za=de({},ws,{relatedTarget:0}),Ya=vn(Za),Vd=de({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ks=vn(Vd),Fd=de({},Jr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),zd=vn(Fd),Ud=de({},Jr,{data:0}),Dc=vn(Ud),Ja={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $d(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Bd[i])?!!o[i]:!1}function bs(){return $d}var d=de({},ws,{key:function(i){if(i.key){var o=Ja[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Ha(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Un[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(i){return i.type==="keypress"?Ha(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ha(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=vn(d),b=de({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=vn(b),K=de({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),J=vn(K),ue=de({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ut=vn(ue),Jt=de({},Ho,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),rt=vn(Jt),on=[9,13,27,32],Ht=u&&"CompositionEvent"in window,Cr=null;u&&"documentMode"in document&&(Cr=document.documentMode);var yr=u&&"TextEvent"in window&&!Cr,Ko=u&&(!Ht||Cr&&8<Cr&&11>=Cr),Xa=" ",rv=!1;function sv(i,o){switch(i){case"keyup":return on.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var el=!1;function h1(i,o){switch(i){case"compositionend":return iv(o);case"keypress":return o.which!==32?null:(rv=!0,Xa);case"textInput":return i=o.data,i===Xa&&rv?null:i;default:return null}}function f1(i,o){if(el)return i==="compositionend"||!Ht&&sv(i,o)?(i=Nc(),er=qa=gr=null,el=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ko&&o.locale!=="ko"?null:o.data;default:return null}}var p1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ov(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!p1[i.type]:o==="textarea"}function av(i,o,c,f){kt(f),o=Gd(o,"onChange"),0<o.length&&(c=new Ka("onChange","change",null,c,f),i.push({event:c,listeners:o}))}var jc=null,Oc=null;function m1(i){Tv(i,0)}function Wd(i){var o=il(i);if(jt(o))return i}function g1(i,o){if(i==="change")return o}var lv=!1;if(u){var jp;if(u){var Op="oninput"in document;if(!Op){var cv=document.createElement("div");cv.setAttribute("oninput","return;"),Op=typeof cv.oninput=="function"}jp=Op}else jp=!1;lv=jp&&(!document.documentMode||9<document.documentMode)}function uv(){jc&&(jc.detachEvent("onpropertychange",dv),Oc=jc=null)}function dv(i){if(i.propertyName==="value"&&Wd(Oc)){var o=[];av(o,Oc,i,ki(i)),Er(m1,o)}}function y1(i,o,c){i==="focusin"?(uv(),jc=o,Oc=c,jc.attachEvent("onpropertychange",dv)):i==="focusout"&&uv()}function v1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Wd(Oc)}function _1(i,o){if(i==="click")return Wd(o)}function w1(i,o){if(i==="input"||i==="change")return Wd(o)}function b1(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Xr=typeof Object.is=="function"?Object.is:b1;function Lc(i,o){if(Xr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!h.call(o,g)||!Xr(i[g],o[g]))return!1}return!0}function hv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function fv(i,o){var c=hv(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=o&&f>=o)return{node:c,offset:o-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=hv(c)}}function pv(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?pv(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function mv(){for(var i=window,o=Vn();o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Vn(i.document)}return o}function Lp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function x1(i){var o=mv(),c=i.focusedElem,f=i.selectionRange;if(o!==c&&c&&c.ownerDocument&&pv(c.ownerDocument.documentElement,c)){if(f!==null&&Lp(c)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(i,c.value.length);else if(i=(o=c.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=c.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!i.extend&&_>f&&(g=f,f=_,_=g),g=fv(c,_);var T=fv(c,f);g&&T&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),_>f?(i.addRange(o),i.extend(T.node,T.offset)):(o.setEnd(T.node,T.offset),i.addRange(o)))}}for(o=[],i=c;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)i=o[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var k1=u&&"documentMode"in document&&11>=document.documentMode,tl=null,Mp=null,Mc=null,Vp=!1;function gv(i,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Vp||tl==null||tl!==Vn(f)||(f=tl,"selectionStart"in f&&Lp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Mc&&Lc(Mc,f)||(Mc=f,f=Gd(Mp,"onSelect"),0<f.length&&(o=new Ka("onSelect","select",null,o,c),i.push({event:o,listeners:f}),o.target=tl)))}function qd(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var nl={animationend:qd("Animation","AnimationEnd"),animationiteration:qd("Animation","AnimationIteration"),animationstart:qd("Animation","AnimationStart"),transitionend:qd("Transition","TransitionEnd")},Fp={},yv={};u&&(yv=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function Hd(i){if(Fp[i])return Fp[i];if(!nl[i])return i;var o=nl[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in yv)return Fp[i]=o[c];return i}var vv=Hd("animationend"),_v=Hd("animationiteration"),wv=Hd("animationstart"),bv=Hd("transitionend"),xv=new Map,kv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(i,o){xv.set(i,o),a(o,[i])}for(var zp=0;zp<kv.length;zp++){var Up=kv[zp],E1=Up.toLowerCase(),T1=Up[0].toUpperCase()+Up.slice(1);ji(E1,"on"+T1)}ji(vv,"onAnimationEnd"),ji(_v,"onAnimationIteration"),ji(wv,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(bv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vc));function Ev(i,o,c){var f=i.type||"unknown-event";i.currentTarget=c,xd(f,o,void 0,i),i.currentTarget=null}function Tv(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var T=f.length-1;0<=T;T--){var L=f[T],V=L.instance,Z=L.currentTarget;if(L=L.listener,V!==_&&g.isPropagationStopped())break e;Ev(g,L,Z),_=V}else for(T=0;T<f.length;T++){if(L=f[T],V=L.instance,Z=L.currentTarget,L=L.listener,V!==_&&g.isPropagationStopped())break e;Ev(g,L,Z),_=V}}}if(qt)throw i=qr,qt=!1,qr=null,i}function _t(i,o){var c=o[Qp];c===void 0&&(c=o[Qp]=new Set);var f=i+"__bubble";c.has(f)||(Iv(o,i,2,!1),c.add(f))}function Bp(i,o,c){var f=0;o&&(f|=4),Iv(c,i,f,o)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Fc(i){if(!i[Kd]){i[Kd]=!0,r.forEach(function(c){c!=="selectionchange"&&(I1.has(c)||Bp(c,!1,i),Bp(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Kd]||(o[Kd]=!0,Bp("selectionchange",!1,o))}}function Iv(i,o,c,f){switch(Ac(o)){case 1:var g=Et;break;case 4:g=Pp;break;default:g=Cc}c=g.bind(null,o,c,i),g=void 0,!Fn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,c,{capture:!0,passive:g}):i.addEventListener(o,c,!0):g!==void 0?i.addEventListener(o,c,{passive:g}):i.addEventListener(o,c,!1)}function $p(i,o,c,f,g){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var L=f.stateNode.containerInfo;if(L===g||L.nodeType===8&&L.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var V=T.tag;if((V===3||V===4)&&(V=T.stateNode.containerInfo,V===g||V.nodeType===8&&V.parentNode===g))return;T=T.return}for(;L!==null;){if(T=Go(L),T===null)return;if(V=T.tag,V===5||V===6){f=_=T;continue e}L=L.parentNode}}f=f.return}Er(function(){var Z=_,ie=ki(c),ae=[];e:{var se=xv.get(i);if(se!==void 0){var fe=Ka,_e=i;switch(i){case"keypress":if(Ha(c)===0)break e;case"keydown":case"keyup":fe=v;break;case"focusin":_e="focus",fe=Ya;break;case"focusout":_e="blur",fe=Ya;break;case"beforeblur":case"afterblur":fe=Ya;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Qa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Md;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=J;break;case vv:case _v:case wv:fe=Ks;break;case bv:fe=ut;break;case"scroll":fe=Dp;break;case"wheel":fe=rt;break;case"copy":case"cut":case"paste":fe=zd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=A}var xe=(o&4)!==0,zt=!xe&&i==="scroll",G=xe?se!==null?se+"Capture":null:se;xe=[];for(var U=Z,Q;U!==null;){Q=U;var le=Q.stateNode;if(Q.tag===5&&le!==null&&(Q=le,G!==null&&(le=qe(U,G),le!=null&&xe.push(zc(U,le,Q)))),zt)break;U=U.return}0<xe.length&&(se=new fe(se,_e,null,c,ie),ae.push({event:se,listeners:xe}))}}if((o&7)===0){e:{if(se=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",se&&c!==gs&&(_e=c.relatedTarget||c.fromElement)&&(Go(_e)||_e[Gs]))break e;if((fe||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(_e=c.relatedTarget||c.toElement,fe=Z,_e=_e?Go(_e):null,_e!==null&&(zt=Hr(_e),_e!==zt||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(fe=null,_e=Z),fe!==_e)){if(xe=Qa,le="onMouseLeave",G="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(xe=A,le="onPointerLeave",G="onPointerEnter",U="pointer"),zt=fe==null?se:il(fe),Q=_e==null?se:il(_e),se=new xe(le,U+"leave",fe,c,ie),se.target=zt,se.relatedTarget=Q,le=null,Go(ie)===Z&&(xe=new xe(G,U+"enter",_e,c,ie),xe.target=Q,xe.relatedTarget=zt,le=xe),zt=le,fe&&_e)t:{for(xe=fe,G=_e,U=0,Q=xe;Q;Q=rl(Q))U++;for(Q=0,le=G;le;le=rl(le))Q++;for(;0<U-Q;)xe=rl(xe),U--;for(;0<Q-U;)G=rl(G),Q--;for(;U--;){if(xe===G||G!==null&&xe===G.alternate)break t;xe=rl(xe),G=rl(G)}xe=null}else xe=null;fe!==null&&Sv(ae,se,fe,xe,!1),_e!==null&&zt!==null&&Sv(ae,zt,_e,xe,!0)}}e:{if(se=Z?il(Z):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var Te=g1;else if(ov(se))if(lv)Te=w1;else{Te=v1;var Re=y1}else(fe=se.nodeName)&&fe.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Te=_1);if(Te&&(Te=Te(i,Z))){av(ae,Te,c,ie);break e}Re&&Re(i,se,Z),i==="focusout"&&(Re=se._wrapperState)&&Re.controlled&&se.type==="number"&&fs(se,"number",se.value)}switch(Re=Z?il(Z):window,i){case"focusin":(ov(Re)||Re.contentEditable==="true")&&(tl=Re,Mp=Z,Mc=null);break;case"focusout":Mc=Mp=tl=null;break;case"mousedown":Vp=!0;break;case"contextmenu":case"mouseup":case"dragend":Vp=!1,gv(ae,c,ie);break;case"selectionchange":if(k1)break;case"keydown":case"keyup":gv(ae,c,ie)}var Pe;if(Ht)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else el?sv(i,c)&&(Oe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Oe="onCompositionStart");Oe&&(Ko&&c.locale!=="ko"&&(el||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&el&&(Pe=Nc()):(gr=ie,qa="value"in gr?gr.value:gr.textContent,el=!0)),Re=Gd(Z,Oe),0<Re.length&&(Oe=new Dc(Oe,i,null,c,ie),ae.push({event:Oe,listeners:Re}),Pe?Oe.data=Pe:(Pe=iv(c),Pe!==null&&(Oe.data=Pe)))),(Pe=yr?h1(i,c):f1(i,c))&&(Z=Gd(Z,"onBeforeInput"),0<Z.length&&(ie=new Dc("onBeforeInput","beforeinput",null,c,ie),ae.push({event:ie,listeners:Z}),ie.data=Pe))}Tv(ae,o)})}function zc(i,o,c){return{instance:i,listener:o,currentTarget:c}}function Gd(i,o){for(var c=o+"Capture",f=[];i!==null;){var g=i,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=qe(i,c),_!=null&&f.unshift(zc(i,_,g)),_=qe(i,o),_!=null&&f.push(zc(i,_,g))),i=i.return}return f}function rl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Sv(i,o,c,f,g){for(var _=o._reactName,T=[];c!==null&&c!==f;){var L=c,V=L.alternate,Z=L.stateNode;if(V!==null&&V===f)break;L.tag===5&&Z!==null&&(L=Z,g?(V=qe(c,_),V!=null&&T.unshift(zc(c,V,L))):g||(V=qe(c,_),V!=null&&T.push(zc(c,V,L)))),c=c.return}T.length!==0&&i.push({event:o,listeners:T})}var S1=/\r\n?/g,C1=/\u0000|\uFFFD/g;function Cv(i){return(typeof i=="string"?i:""+i).replace(S1,`
`).replace(C1,"")}function Qd(i,o,c){if(o=Cv(o),Cv(i)!==o&&c)throw Error(n(425))}function Zd(){}var Wp=null,qp=null;function Hp(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Kp=typeof setTimeout=="function"?setTimeout:void 0,A1=typeof clearTimeout=="function"?clearTimeout:void 0,Av=typeof Promise=="function"?Promise:void 0,N1=typeof queueMicrotask=="function"?queueMicrotask:typeof Av<"u"?function(i){return Av.resolve(null).then(i).catch(R1)}:Kp;function R1(i){setTimeout(function(){throw i})}function Gp(i,o){var c=o,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(f===0){i.removeChild(g),Yr(o);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=g}while(c);Yr(o)}function Oi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Nv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}var sl=Math.random().toString(36).slice(2),xs="__reactFiber$"+sl,Uc="__reactProps$"+sl,Gs="__reactContainer$"+sl,Qp="__reactEvents$"+sl,P1="__reactListeners$"+sl,D1="__reactHandles$"+sl;function Go(i){var o=i[xs];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Gs]||c[xs]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=Nv(i);i!==null;){if(c=i[xs])return c;i=Nv(i)}return o}i=c,c=i.parentNode}return null}function Bc(i){return i=i[xs]||i[Gs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function il(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Yd(i){return i[Uc]||null}var Zp=[],ol=-1;function Li(i){return{current:i}}function wt(i){0>ol||(i.current=Zp[ol],Zp[ol]=null,ol--)}function yt(i,o){ol++,Zp[ol]=i.current,i.current=o}var Mi={},An=Li(Mi),tr=Li(!1),Qo=Mi;function al(i,o){var c=i.type.contextTypes;if(!c)return Mi;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in c)g[_]=o[_];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function nr(i){return i=i.childContextTypes,i!=null}function Jd(){wt(tr),wt(An)}function Rv(i,o,c){if(An.current!==Mi)throw Error(n(168));yt(An,o),yt(tr,c)}function Pv(i,o,c){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(n(108,Ee(i)||"Unknown",g));return de({},c,f)}function Xd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Mi,Qo=An.current,yt(An,i),yt(tr,tr.current),!0}function Dv(i,o,c){var f=i.stateNode;if(!f)throw Error(n(169));c?(i=Pv(i,o,Qo),f.__reactInternalMemoizedMergedChildContext=i,wt(tr),wt(An),yt(An,i)):wt(tr),yt(tr,c)}var Qs=null,eh=!1,Yp=!1;function jv(i){Qs===null?Qs=[i]:Qs.push(i)}function j1(i){eh=!0,jv(i)}function Vi(){if(!Yp&&Qs!==null){Yp=!0;var i=0,o=Ze;try{var c=Qs;for(Ze=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}Qs=null,eh=!1}catch(g){throw Qs!==null&&(Qs=Qs.slice(i+1)),za(zo,Vi),g}finally{Ze=o,Yp=!1}}return null}var ll=[],cl=0,th=null,nh=0,Ar=[],Nr=0,Zo=null,Zs=1,Ys="";function Yo(i,o){ll[cl++]=nh,ll[cl++]=th,th=i,nh=o}function Ov(i,o,c){Ar[Nr++]=Zs,Ar[Nr++]=Ys,Ar[Nr++]=Zo,Zo=i;var f=Zs;i=Ys;var g=32-zn(f)-1;f&=~(1<<g),c+=1;var _=32-zn(o)+g;if(30<_){var T=g-g%5;_=(f&(1<<T)-1).toString(32),f>>=T,g-=T,Zs=1<<32-zn(o)+g|c<<g|f,Ys=_+i}else Zs=1<<_|c<<g|f,Ys=i}function Jp(i){i.return!==null&&(Yo(i,1),Ov(i,1,0))}function Xp(i){for(;i===th;)th=ll[--cl],ll[cl]=null,nh=ll[--cl],ll[cl]=null;for(;i===Zo;)Zo=Ar[--Nr],Ar[Nr]=null,Ys=Ar[--Nr],Ar[Nr]=null,Zs=Ar[--Nr],Ar[Nr]=null}var vr=null,_r=null,Tt=!1,es=null;function Lv(i,o){var c=jr(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=i,o=i.deletions,o===null?(i.deletions=[c],i.flags|=16):o.push(c)}function Mv(i,o){switch(i.tag){case 5:var c=i.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,vr=i,_r=Oi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,vr=i,_r=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=Zo!==null?{id:Zs,overflow:Ys}:null,i.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=jr(18,null,null,0),c.stateNode=o,c.return=i,i.child=c,vr=i,_r=null,!0):!1;default:return!1}}function em(i){return(i.mode&1)!==0&&(i.flags&128)===0}function tm(i){if(Tt){var o=_r;if(o){var c=o;if(!Mv(i,o)){if(em(i))throw Error(n(418));o=Oi(c.nextSibling);var f=vr;o&&Mv(i,o)?Lv(f,c):(i.flags=i.flags&-4097|2,Tt=!1,vr=i)}}else{if(em(i))throw Error(n(418));i.flags=i.flags&-4097|2,Tt=!1,vr=i}}}function Vv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;vr=i}function rh(i){if(i!==vr)return!1;if(!Tt)return Vv(i),Tt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Hp(i.type,i.memoizedProps)),o&&(o=_r)){if(em(i))throw Fv(),Error(n(418));for(;o;)Lv(i,o),o=Oi(o.nextSibling)}if(Vv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(o===0){_r=Oi(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}i=i.nextSibling}_r=null}}else _r=vr?Oi(i.stateNode.nextSibling):null;return!0}function Fv(){for(var i=_r;i;)i=Oi(i.nextSibling)}function ul(){_r=vr=null,Tt=!1}function nm(i){es===null?es=[i]:es.push(i)}var O1=H.ReactCurrentBatchConfig;function $c(i,o,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var f=c.stateNode}if(!f)throw Error(n(147,i));var g=f,_=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(T){var L=g.refs;T===null?delete L[_]:L[_]=T},o._stringRef=_,o)}if(typeof i!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,i))}return i}function sh(i,o){throw i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function zv(i){var o=i._init;return o(i._payload)}function Uv(i){function o(G,U){if(i){var Q=G.deletions;Q===null?(G.deletions=[U],G.flags|=16):Q.push(U)}}function c(G,U){if(!i)return null;for(;U!==null;)o(G,U),U=U.sibling;return null}function f(G,U){for(G=new Map;U!==null;)U.key!==null?G.set(U.key,U):G.set(U.index,U),U=U.sibling;return G}function g(G,U){return G=Hi(G,U),G.index=0,G.sibling=null,G}function _(G,U,Q){return G.index=Q,i?(Q=G.alternate,Q!==null?(Q=Q.index,Q<U?(G.flags|=2,U):Q):(G.flags|=2,U)):(G.flags|=1048576,U)}function T(G){return i&&G.alternate===null&&(G.flags|=2),G}function L(G,U,Q,le){return U===null||U.tag!==6?(U=Km(Q,G.mode,le),U.return=G,U):(U=g(U,Q),U.return=G,U)}function V(G,U,Q,le){var Te=Q.type;return Te===S?ie(G,U,Q.props.children,le,Q.key):U!==null&&(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===nt&&zv(Te)===U.type)?(le=g(U,Q.props),le.ref=$c(G,U,Q),le.return=G,le):(le=Ch(Q.type,Q.key,Q.props,null,G.mode,le),le.ref=$c(G,U,Q),le.return=G,le)}function Z(G,U,Q,le){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=Gm(Q,G.mode,le),U.return=G,U):(U=g(U,Q.children||[]),U.return=G,U)}function ie(G,U,Q,le,Te){return U===null||U.tag!==7?(U=ia(Q,G.mode,le,Te),U.return=G,U):(U=g(U,Q),U.return=G,U)}function ae(G,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Km(""+U,G.mode,Q),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case F:return Q=Ch(U.type,U.key,U.props,null,G.mode,Q),Q.ref=$c(G,null,U),Q.return=G,Q;case te:return U=Gm(U,G.mode,Q),U.return=G,U;case nt:var le=U._init;return ae(G,le(U._payload),Q)}if(sn(U)||pe(U))return U=ia(U,G.mode,Q,null),U.return=G,U;sh(G,U)}return null}function se(G,U,Q,le){var Te=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Te!==null?null:L(G,U,""+Q,le);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case F:return Q.key===Te?V(G,U,Q,le):null;case te:return Q.key===Te?Z(G,U,Q,le):null;case nt:return Te=Q._init,se(G,U,Te(Q._payload),le)}if(sn(Q)||pe(Q))return Te!==null?null:ie(G,U,Q,le,null);sh(G,Q)}return null}function fe(G,U,Q,le,Te){if(typeof le=="string"&&le!==""||typeof le=="number")return G=G.get(Q)||null,L(U,G,""+le,Te);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case F:return G=G.get(le.key===null?Q:le.key)||null,V(U,G,le,Te);case te:return G=G.get(le.key===null?Q:le.key)||null,Z(U,G,le,Te);case nt:var Re=le._init;return fe(G,U,Q,Re(le._payload),Te)}if(sn(le)||pe(le))return G=G.get(Q)||null,ie(U,G,le,Te,null);sh(U,le)}return null}function _e(G,U,Q,le){for(var Te=null,Re=null,Pe=U,Oe=U=0,cn=null;Pe!==null&&Oe<Q.length;Oe++){Pe.index>Oe?(cn=Pe,Pe=null):cn=Pe.sibling;var at=se(G,Pe,Q[Oe],le);if(at===null){Pe===null&&(Pe=cn);break}i&&Pe&&at.alternate===null&&o(G,Pe),U=_(at,U,Oe),Re===null?Te=at:Re.sibling=at,Re=at,Pe=cn}if(Oe===Q.length)return c(G,Pe),Tt&&Yo(G,Oe),Te;if(Pe===null){for(;Oe<Q.length;Oe++)Pe=ae(G,Q[Oe],le),Pe!==null&&(U=_(Pe,U,Oe),Re===null?Te=Pe:Re.sibling=Pe,Re=Pe);return Tt&&Yo(G,Oe),Te}for(Pe=f(G,Pe);Oe<Q.length;Oe++)cn=fe(Pe,G,Oe,Q[Oe],le),cn!==null&&(i&&cn.alternate!==null&&Pe.delete(cn.key===null?Oe:cn.key),U=_(cn,U,Oe),Re===null?Te=cn:Re.sibling=cn,Re=cn);return i&&Pe.forEach(function(Ki){return o(G,Ki)}),Tt&&Yo(G,Oe),Te}function xe(G,U,Q,le){var Te=pe(Q);if(typeof Te!="function")throw Error(n(150));if(Q=Te.call(Q),Q==null)throw Error(n(151));for(var Re=Te=null,Pe=U,Oe=U=0,cn=null,at=Q.next();Pe!==null&&!at.done;Oe++,at=Q.next()){Pe.index>Oe?(cn=Pe,Pe=null):cn=Pe.sibling;var Ki=se(G,Pe,at.value,le);if(Ki===null){Pe===null&&(Pe=cn);break}i&&Pe&&Ki.alternate===null&&o(G,Pe),U=_(Ki,U,Oe),Re===null?Te=Ki:Re.sibling=Ki,Re=Ki,Pe=cn}if(at.done)return c(G,Pe),Tt&&Yo(G,Oe),Te;if(Pe===null){for(;!at.done;Oe++,at=Q.next())at=ae(G,at.value,le),at!==null&&(U=_(at,U,Oe),Re===null?Te=at:Re.sibling=at,Re=at);return Tt&&Yo(G,Oe),Te}for(Pe=f(G,Pe);!at.done;Oe++,at=Q.next())at=fe(Pe,G,Oe,at.value,le),at!==null&&(i&&at.alternate!==null&&Pe.delete(at.key===null?Oe:at.key),U=_(at,U,Oe),Re===null?Te=at:Re.sibling=at,Re=at);return i&&Pe.forEach(function(pS){return o(G,pS)}),Tt&&Yo(G,Oe),Te}function zt(G,U,Q,le){if(typeof Q=="object"&&Q!==null&&Q.type===S&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case F:e:{for(var Te=Q.key,Re=U;Re!==null;){if(Re.key===Te){if(Te=Q.type,Te===S){if(Re.tag===7){c(G,Re.sibling),U=g(Re,Q.props.children),U.return=G,G=U;break e}}else if(Re.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===nt&&zv(Te)===Re.type){c(G,Re.sibling),U=g(Re,Q.props),U.ref=$c(G,Re,Q),U.return=G,G=U;break e}c(G,Re);break}else o(G,Re);Re=Re.sibling}Q.type===S?(U=ia(Q.props.children,G.mode,le,Q.key),U.return=G,G=U):(le=Ch(Q.type,Q.key,Q.props,null,G.mode,le),le.ref=$c(G,U,Q),le.return=G,G=le)}return T(G);case te:e:{for(Re=Q.key;U!==null;){if(U.key===Re)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){c(G,U.sibling),U=g(U,Q.children||[]),U.return=G,G=U;break e}else{c(G,U);break}else o(G,U);U=U.sibling}U=Gm(Q,G.mode,le),U.return=G,G=U}return T(G);case nt:return Re=Q._init,zt(G,U,Re(Q._payload),le)}if(sn(Q))return _e(G,U,Q,le);if(pe(Q))return xe(G,U,Q,le);sh(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,U!==null&&U.tag===6?(c(G,U.sibling),U=g(U,Q),U.return=G,G=U):(c(G,U),U=Km(Q,G.mode,le),U.return=G,G=U),T(G)):c(G,U)}return zt}var dl=Uv(!0),Bv=Uv(!1),ih=Li(null),oh=null,hl=null,rm=null;function sm(){rm=hl=oh=null}function im(i){var o=ih.current;wt(ih),i._currentValue=o}function om(i,o,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===c)break;i=i.return}}function fl(i,o){oh=i,rm=hl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(rr=!0),i.firstContext=null)}function Rr(i){var o=i._currentValue;if(rm!==i)if(i={context:i,memoizedValue:o,next:null},hl===null){if(oh===null)throw Error(n(308));hl=i,oh.dependencies={lanes:0,firstContext:i}}else hl=hl.next=i;return o}var Jo=null;function am(i){Jo===null?Jo=[i]:Jo.push(i)}function $v(i,o,c,f){var g=o.interleaved;return g===null?(c.next=c,am(o)):(c.next=g.next,g.next=c),o.interleaved=c,Js(i,f)}function Js(i,o){i.lanes|=o;var c=i.alternate;for(c!==null&&(c.lanes|=o),c=i,i=i.return;i!==null;)i.childLanes|=o,c=i.alternate,c!==null&&(c.childLanes|=o),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Fi=!1;function lm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Xs(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function zi(i,o,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(ot&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,Js(i,c)}return g=f.interleaved,g===null?(o.next=o,am(f)):(o.next=g.next,g.next=o),f.interleaved=o,Js(i,c)}function ah(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,c|=f,o.lanes=c,Ai(i,c)}}function qv(i,o){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var T={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?g=_=T:_=_.next=T,c=c.next}while(c!==null);_===null?g=_=o:_=_.next=o}else g=_=o;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}function lh(i,o,c,f){var g=i.updateQueue;Fi=!1;var _=g.firstBaseUpdate,T=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var V=L,Z=V.next;V.next=null,T===null?_=Z:T.next=Z,T=V;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,L=ie.lastBaseUpdate,L!==T&&(L===null?ie.firstBaseUpdate=Z:L.next=Z,ie.lastBaseUpdate=V))}if(_!==null){var ae=g.baseState;T=0,ie=Z=V=null,L=_;do{var se=L.lane,fe=L.eventTime;if((f&se)===se){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var _e=i,xe=L;switch(se=o,fe=c,xe.tag){case 1:if(_e=xe.payload,typeof _e=="function"){ae=_e.call(fe,ae,se);break e}ae=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=xe.payload,se=typeof _e=="function"?_e.call(fe,ae,se):_e,se==null)break e;ae=de({},ae,se);break e;case 2:Fi=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,se=g.effects,se===null?g.effects=[L]:se.push(L))}else fe={eventTime:fe,lane:se,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ie===null?(Z=ie=fe,V=ae):ie=ie.next=fe,T|=se;if(L=L.next,L===null){if(L=g.shared.pending,L===null)break;se=L,L=se.next,se.next=null,g.lastBaseUpdate=se,g.shared.pending=null}}while(!0);if(ie===null&&(V=ae),g.baseState=V,g.firstBaseUpdate=Z,g.lastBaseUpdate=ie,o=g.shared.interleaved,o!==null){g=o;do T|=g.lane,g=g.next;while(g!==o)}else _===null&&(g.shared.lanes=0);ta|=T,i.lanes=T,i.memoizedState=ae}}function Hv(i,o,c){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],g=f.callback;if(g!==null){if(f.callback=null,f=c,typeof g!="function")throw Error(n(191,g));g.call(f)}}}var Wc={},ks=Li(Wc),qc=Li(Wc),Hc=Li(Wc);function Xo(i){if(i===Wc)throw Error(n(174));return i}function cm(i,o){switch(yt(Hc,o),yt(qc,i),yt(ks,Wc),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:mt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=mt(o,i)}wt(ks),yt(ks,o)}function pl(){wt(ks),wt(qc),wt(Hc)}function Kv(i){Xo(Hc.current);var o=Xo(ks.current),c=mt(o,i.type);o!==c&&(yt(qc,i),yt(ks,c))}function um(i){qc.current===i&&(wt(ks),wt(qc))}var Ct=Li(0);function ch(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var dm=[];function hm(){for(var i=0;i<dm.length;i++)dm[i]._workInProgressVersionPrimary=null;dm.length=0}var uh=H.ReactCurrentDispatcher,fm=H.ReactCurrentBatchConfig,ea=0,At=null,Xt=null,an=null,dh=!1,Kc=!1,Gc=0,L1=0;function Nn(){throw Error(n(321))}function pm(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Xr(i[c],o[c]))return!1;return!0}function mm(i,o,c,f,g,_){if(ea=_,At=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,uh.current=i===null||i.memoizedState===null?z1:U1,i=c(f,g),Kc){_=0;do{if(Kc=!1,Gc=0,25<=_)throw Error(n(301));_+=1,an=Xt=null,o.updateQueue=null,uh.current=B1,i=c(f,g)}while(Kc)}if(uh.current=ph,o=Xt!==null&&Xt.next!==null,ea=0,an=Xt=At=null,dh=!1,o)throw Error(n(300));return i}function gm(){var i=Gc!==0;return Gc=0,i}function Es(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?At.memoizedState=an=i:an=an.next=i,an}function Pr(){if(Xt===null){var i=At.alternate;i=i!==null?i.memoizedState:null}else i=Xt.next;var o=an===null?At.memoizedState:an.next;if(o!==null)an=o,Xt=i;else{if(i===null)throw Error(n(310));Xt=i,i={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},an===null?At.memoizedState=an=i:an=an.next=i}return an}function Qc(i,o){return typeof o=="function"?o(i):o}function ym(i){var o=Pr(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var f=Xt,g=f.baseQueue,_=c.pending;if(_!==null){if(g!==null){var T=g.next;g.next=_.next,_.next=T}f.baseQueue=g=_,c.pending=null}if(g!==null){_=g.next,f=f.baseState;var L=T=null,V=null,Z=_;do{var ie=Z.lane;if((ea&ie)===ie)V!==null&&(V=V.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),f=Z.hasEagerState?Z.eagerState:i(f,Z.action);else{var ae={lane:ie,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};V===null?(L=V=ae,T=f):V=V.next=ae,At.lanes|=ie,ta|=ie}Z=Z.next}while(Z!==null&&Z!==_);V===null?T=f:V.next=L,Xr(f,o.memoizedState)||(rr=!0),o.memoizedState=f,o.baseState=T,o.baseQueue=V,c.lastRenderedState=f}if(i=c.interleaved,i!==null){g=i;do _=g.lane,At.lanes|=_,ta|=_,g=g.next;while(g!==i)}else g===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function vm(i){var o=Pr(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,_=o.memoizedState;if(g!==null){c.pending=null;var T=g=g.next;do _=i(_,T.action),T=T.next;while(T!==g);Xr(_,o.memoizedState)||(rr=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,f]}function Gv(){}function Qv(i,o){var c=At,f=Pr(),g=o(),_=!Xr(f.memoizedState,g);if(_&&(f.memoizedState=g,rr=!0),f=f.queue,_m(Jv.bind(null,c,f,i),[i]),f.getSnapshot!==o||_||an!==null&&an.memoizedState.tag&1){if(c.flags|=2048,Zc(9,Yv.bind(null,c,f,g,o),void 0,null),ln===null)throw Error(n(349));(ea&30)!==0||Zv(c,o,g)}return g}function Zv(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=At.updateQueue,o===null?(o={lastEffect:null,stores:null},At.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function Yv(i,o,c,f){o.value=c,o.getSnapshot=f,Xv(o)&&e_(i)}function Jv(i,o,c){return c(function(){Xv(o)&&e_(i)})}function Xv(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Xr(i,c)}catch{return!0}}function e_(i){var o=Js(i,1);o!==null&&ss(o,i,1,-1)}function t_(i){var o=Es();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:i},o.queue=i,i=i.dispatch=F1.bind(null,At,i),[o.memoizedState,i]}function Zc(i,o,c,f){return i={tag:i,create:o,destroy:c,deps:f,next:null},o=At.updateQueue,o===null?(o={lastEffect:null,stores:null},At.updateQueue=o,o.lastEffect=i.next=i):(c=o.lastEffect,c===null?o.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,o.lastEffect=i)),i}function n_(){return Pr().memoizedState}function hh(i,o,c,f){var g=Es();At.flags|=i,g.memoizedState=Zc(1|o,c,void 0,f===void 0?null:f)}function fh(i,o,c,f){var g=Pr();f=f===void 0?null:f;var _=void 0;if(Xt!==null){var T=Xt.memoizedState;if(_=T.destroy,f!==null&&pm(f,T.deps)){g.memoizedState=Zc(o,c,_,f);return}}At.flags|=i,g.memoizedState=Zc(1|o,c,_,f)}function r_(i,o){return hh(8390656,8,i,o)}function _m(i,o){return fh(2048,8,i,o)}function s_(i,o){return fh(4,2,i,o)}function i_(i,o){return fh(4,4,i,o)}function o_(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function a_(i,o,c){return c=c!=null?c.concat([i]):null,fh(4,4,o_.bind(null,o,i),c)}function wm(){}function l_(i,o){var c=Pr();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&pm(o,f[1])?f[0]:(c.memoizedState=[i,o],i)}function c_(i,o){var c=Pr();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&pm(o,f[1])?f[0]:(i=i(),c.memoizedState=[i,o],i)}function u_(i,o,c){return(ea&21)===0?(i.baseState&&(i.baseState=!1,rr=!0),i.memoizedState=c):(Xr(c,o)||(c=$o(),At.lanes|=c,ta|=c,i.baseState=!0),o)}function M1(i,o){var c=Ze;Ze=c!==0&&4>c?c:4,i(!0);var f=fm.transition;fm.transition={};try{i(!1),o()}finally{Ze=c,fm.transition=f}}function d_(){return Pr().memoizedState}function V1(i,o,c){var f=Wi(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},h_(i))f_(o,c);else if(c=$v(i,o,c,f),c!==null){var g=$n();ss(c,i,f,g),p_(c,o,f)}}function F1(i,o,c){var f=Wi(i),g={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(h_(i))f_(o,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var T=o.lastRenderedState,L=_(T,c);if(g.hasEagerState=!0,g.eagerState=L,Xr(L,T)){var V=o.interleaved;V===null?(g.next=g,am(o)):(g.next=V.next,V.next=g),o.interleaved=g;return}}catch{}finally{}c=$v(i,o,g,f),c!==null&&(g=$n(),ss(c,i,f,g),p_(c,o,f))}}function h_(i){var o=i.alternate;return i===At||o!==null&&o===At}function f_(i,o){Kc=dh=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function p_(i,o,c){if((c&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,c|=f,o.lanes=c,Ai(i,c)}}var ph={readContext:Rr,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},z1={readContext:Rr,useCallback:function(i,o){return Es().memoizedState=[i,o===void 0?null:o],i},useContext:Rr,useEffect:r_,useImperativeHandle:function(i,o,c){return c=c!=null?c.concat([i]):null,hh(4194308,4,o_.bind(null,o,i),c)},useLayoutEffect:function(i,o){return hh(4194308,4,i,o)},useInsertionEffect:function(i,o){return hh(4,2,i,o)},useMemo:function(i,o){var c=Es();return o=o===void 0?null:o,i=i(),c.memoizedState=[i,o],i},useReducer:function(i,o,c){var f=Es();return o=c!==void 0?c(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=V1.bind(null,At,i),[f.memoizedState,i]},useRef:function(i){var o=Es();return i={current:i},o.memoizedState=i},useState:t_,useDebugValue:wm,useDeferredValue:function(i){return Es().memoizedState=i},useTransition:function(){var i=t_(!1),o=i[0];return i=M1.bind(null,i[1]),Es().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,c){var f=At,g=Es();if(Tt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),ln===null)throw Error(n(349));(ea&30)!==0||Zv(f,o,c)}g.memoizedState=c;var _={value:c,getSnapshot:o};return g.queue=_,r_(Jv.bind(null,f,_,i),[i]),f.flags|=2048,Zc(9,Yv.bind(null,f,_,c,o),void 0,null),c},useId:function(){var i=Es(),o=ln.identifierPrefix;if(Tt){var c=Ys,f=Zs;c=(f&~(1<<32-zn(f)-1)).toString(32)+c,o=":"+o+"R"+c,c=Gc++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=L1++,o=":"+o+"r"+c.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},U1={readContext:Rr,useCallback:l_,useContext:Rr,useEffect:_m,useImperativeHandle:a_,useInsertionEffect:s_,useLayoutEffect:i_,useMemo:c_,useReducer:ym,useRef:n_,useState:function(){return ym(Qc)},useDebugValue:wm,useDeferredValue:function(i){var o=Pr();return u_(o,Xt.memoizedState,i)},useTransition:function(){var i=ym(Qc)[0],o=Pr().memoizedState;return[i,o]},useMutableSource:Gv,useSyncExternalStore:Qv,useId:d_,unstable_isNewReconciler:!1},B1={readContext:Rr,useCallback:l_,useContext:Rr,useEffect:_m,useImperativeHandle:a_,useInsertionEffect:s_,useLayoutEffect:i_,useMemo:c_,useReducer:vm,useRef:n_,useState:function(){return vm(Qc)},useDebugValue:wm,useDeferredValue:function(i){var o=Pr();return Xt===null?o.memoizedState=i:u_(o,Xt.memoizedState,i)},useTransition:function(){var i=vm(Qc)[0],o=Pr().memoizedState;return[i,o]},useMutableSource:Gv,useSyncExternalStore:Qv,useId:d_,unstable_isNewReconciler:!1};function ts(i,o){if(i&&i.defaultProps){o=de({},o),i=i.defaultProps;for(var c in i)o[c]===void 0&&(o[c]=i[c]);return o}return o}function bm(i,o,c,f){o=i.memoizedState,c=c(f,o),c=c==null?o:de({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var mh={isMounted:function(i){return(i=i._reactInternals)?Hr(i)===i:!1},enqueueSetState:function(i,o,c){i=i._reactInternals;var f=$n(),g=Wi(i),_=Xs(f,g);_.payload=o,c!=null&&(_.callback=c),o=zi(i,_,g),o!==null&&(ss(o,i,g,f),ah(o,i,g))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var f=$n(),g=Wi(i),_=Xs(f,g);_.tag=1,_.payload=o,c!=null&&(_.callback=c),o=zi(i,_,g),o!==null&&(ss(o,i,g,f),ah(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=$n(),f=Wi(i),g=Xs(c,f);g.tag=2,o!=null&&(g.callback=o),o=zi(i,g,f),o!==null&&(ss(o,i,f,c),ah(o,i,f))}};function m_(i,o,c,f,g,_,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,T):o.prototype&&o.prototype.isPureReactComponent?!Lc(c,f)||!Lc(g,_):!0}function g_(i,o,c){var f=!1,g=Mi,_=o.contextType;return typeof _=="object"&&_!==null?_=Rr(_):(g=nr(o)?Qo:An.current,f=o.contextTypes,_=(f=f!=null)?al(i,g):Mi),o=new o(c,_),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=mh,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=_),o}function y_(i,o,c,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==i&&mh.enqueueReplaceState(o,o.state,null)}function xm(i,o,c,f){var g=i.stateNode;g.props=c,g.state=i.memoizedState,g.refs={},lm(i);var _=o.contextType;typeof _=="object"&&_!==null?g.context=Rr(_):(_=nr(o)?Qo:An.current,g.context=al(i,_)),g.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(bm(i,o,_,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&mh.enqueueReplaceState(g,g.state,null),lh(i,c,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function ml(i,o){try{var c="",f=o;do c+=he(f),f=f.return;while(f);var g=c}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:o,stack:g,digest:null}}function km(i,o,c){return{value:i,source:null,stack:c??null,digest:o??null}}function Em(i,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var $1=typeof WeakMap=="function"?WeakMap:Map;function v_(i,o,c){c=Xs(-1,c),c.tag=3,c.payload={element:null};var f=o.value;return c.callback=function(){xh||(xh=!0,Fm=f),Em(i,o)},c}function __(i,o,c){c=Xs(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;c.payload=function(){return f(g)},c.callback=function(){Em(i,o)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){Em(i,o),typeof f!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),c}function w_(i,o,c){var f=i.pingCache;if(f===null){f=i.pingCache=new $1;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(c)||(g.add(c),i=rS.bind(null,i,o,c),o.then(i,i))}function b_(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function x_(i,o,c,f,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=Xs(-1,1),o.tag=2,zi(c,o,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var W1=H.ReactCurrentOwner,rr=!1;function Bn(i,o,c,f){o.child=i===null?Bv(o,null,c,f):dl(o,i.child,c,f)}function k_(i,o,c,f,g){c=c.render;var _=o.ref;return fl(o,g),f=mm(i,o,c,f,_,g),c=gm(),i!==null&&!rr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,ei(i,o,g)):(Tt&&c&&Jp(o),o.flags|=1,Bn(i,o,f,g),o.child)}function E_(i,o,c,f,g){if(i===null){var _=c.type;return typeof _=="function"&&!Hm(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=_,T_(i,o,_,f,g)):(i=Ch(c.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,(i.lanes&g)===0){var T=_.memoizedProps;if(c=c.compare,c=c!==null?c:Lc,c(T,f)&&i.ref===o.ref)return ei(i,o,g)}return o.flags|=1,i=Hi(_,f),i.ref=o.ref,i.return=o,o.child=i}function T_(i,o,c,f,g){if(i!==null){var _=i.memoizedProps;if(Lc(_,f)&&i.ref===o.ref)if(rr=!1,o.pendingProps=f=_,(i.lanes&g)!==0)(i.flags&131072)!==0&&(rr=!0);else return o.lanes=i.lanes,ei(i,o,g)}return Tm(i,o,c,f,g)}function I_(i,o,c){var f=o.pendingProps,g=f.children,_=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(yl,wr),wr|=c;else{if((c&1073741824)===0)return i=_!==null?_.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,yt(yl,wr),wr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:c,yt(yl,wr),wr|=f}else _!==null?(f=_.baseLanes|c,o.memoizedState=null):f=c,yt(yl,wr),wr|=f;return Bn(i,o,g,c),o.child}function S_(i,o){var c=o.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Tm(i,o,c,f,g){var _=nr(c)?Qo:An.current;return _=al(o,_),fl(o,g),c=mm(i,o,c,f,_,g),f=gm(),i!==null&&!rr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,ei(i,o,g)):(Tt&&f&&Jp(o),o.flags|=1,Bn(i,o,c,g),o.child)}function C_(i,o,c,f,g){if(nr(c)){var _=!0;Xd(o)}else _=!1;if(fl(o,g),o.stateNode===null)yh(i,o),g_(o,c,f),xm(o,c,f,g),f=!0;else if(i===null){var T=o.stateNode,L=o.memoizedProps;T.props=L;var V=T.context,Z=c.contextType;typeof Z=="object"&&Z!==null?Z=Rr(Z):(Z=nr(c)?Qo:An.current,Z=al(o,Z));var ie=c.getDerivedStateFromProps,ae=typeof ie=="function"||typeof T.getSnapshotBeforeUpdate=="function";ae||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==f||V!==Z)&&y_(o,T,f,Z),Fi=!1;var se=o.memoizedState;T.state=se,lh(o,f,T,g),V=o.memoizedState,L!==f||se!==V||tr.current||Fi?(typeof ie=="function"&&(bm(o,c,ie,f),V=o.memoizedState),(L=Fi||m_(o,c,L,f,se,V,Z))?(ae||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=V),T.props=f,T.state=V,T.context=Z,f=L):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{T=o.stateNode,Wv(i,o),L=o.memoizedProps,Z=o.type===o.elementType?L:ts(o.type,L),T.props=Z,ae=o.pendingProps,se=T.context,V=c.contextType,typeof V=="object"&&V!==null?V=Rr(V):(V=nr(c)?Qo:An.current,V=al(o,V));var fe=c.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==ae||se!==V)&&y_(o,T,f,V),Fi=!1,se=o.memoizedState,T.state=se,lh(o,f,T,g);var _e=o.memoizedState;L!==ae||se!==_e||tr.current||Fi?(typeof fe=="function"&&(bm(o,c,fe,f),_e=o.memoizedState),(Z=Fi||m_(o,c,Z,f,se,_e,V)||!1)?(ie||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,_e,V),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,_e,V)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=_e),T.props=f,T.state=_e,T.context=V,f=Z):(typeof T.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),f=!1)}return Im(i,o,c,f,_,g)}function Im(i,o,c,f,g,_){S_(i,o);var T=(o.flags&128)!==0;if(!f&&!T)return g&&Dv(o,c,!1),ei(i,o,_);f=o.stateNode,W1.current=o;var L=T&&typeof c.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&T?(o.child=dl(o,i.child,null,_),o.child=dl(o,null,L,_)):Bn(i,o,L,_),o.memoizedState=f.state,g&&Dv(o,c,!0),o.child}function A_(i){var o=i.stateNode;o.pendingContext?Rv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Rv(i,o.context,!1),cm(i,o.containerInfo)}function N_(i,o,c,f,g){return ul(),nm(g),o.flags|=256,Bn(i,o,c,f),o.child}var Sm={dehydrated:null,treeContext:null,retryLane:0};function Cm(i){return{baseLanes:i,cachePool:null,transitions:null}}function R_(i,o,c){var f=o.pendingProps,g=Ct.current,_=!1,T=(o.flags&128)!==0,L;if((L=T)||(L=i!==null&&i.memoizedState===null?!1:(g&2)!==0),L?(_=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),yt(Ct,g&1),i===null)return tm(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(T=f.children,i=f.fallback,_?(f=o.mode,_=o.child,T={mode:"hidden",children:T},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=T):_=Ah(T,f,0,null),i=ia(i,f,c,null),_.return=o,i.return=o,_.sibling=i,o.child=_,o.child.memoizedState=Cm(c),o.memoizedState=Sm,i):Am(o,T));if(g=i.memoizedState,g!==null&&(L=g.dehydrated,L!==null))return q1(i,o,T,f,L,g,c);if(_){_=f.fallback,T=o.mode,g=i.child,L=g.sibling;var V={mode:"hidden",children:f.children};return(T&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=V,o.deletions=null):(f=Hi(g,V),f.subtreeFlags=g.subtreeFlags&14680064),L!==null?_=Hi(L,_):(_=ia(_,T,c,null),_.flags|=2),_.return=o,f.return=o,f.sibling=_,o.child=f,f=_,_=o.child,T=i.child.memoizedState,T=T===null?Cm(c):{baseLanes:T.baseLanes|c,cachePool:null,transitions:T.transitions},_.memoizedState=T,_.childLanes=i.childLanes&~c,o.memoizedState=Sm,f}return _=i.child,i=_.sibling,f=Hi(_,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=c),f.return=o,f.sibling=null,i!==null&&(c=o.deletions,c===null?(o.deletions=[i],o.flags|=16):c.push(i)),o.child=f,o.memoizedState=null,f}function Am(i,o){return o=Ah({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function gh(i,o,c,f){return f!==null&&nm(f),dl(o,i.child,null,c),i=Am(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function q1(i,o,c,f,g,_,T){if(c)return o.flags&256?(o.flags&=-257,f=km(Error(n(422))),gh(i,o,T,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(_=f.fallback,g=o.mode,f=Ah({mode:"visible",children:f.children},g,0,null),_=ia(_,g,T,null),_.flags|=2,f.return=o,_.return=o,f.sibling=_,o.child=f,(o.mode&1)!==0&&dl(o,i.child,null,T),o.child.memoizedState=Cm(T),o.memoizedState=Sm,_);if((o.mode&1)===0)return gh(i,o,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var L=f.dgst;return f=L,_=Error(n(419)),f=km(_,f,void 0),gh(i,o,T,f)}if(L=(T&i.childLanes)!==0,rr||L){if(f=ln,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|T))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,Js(i,g),ss(f,i,g,-1))}return qm(),f=km(Error(n(421))),gh(i,o,T,f)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=sS.bind(null,i),g._reactRetry=o,null):(i=_.treeContext,_r=Oi(g.nextSibling),vr=o,Tt=!0,es=null,i!==null&&(Ar[Nr++]=Zs,Ar[Nr++]=Ys,Ar[Nr++]=Zo,Zs=i.id,Ys=i.overflow,Zo=o),o=Am(o,f.children),o.flags|=4096,o)}function P_(i,o,c){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),om(i.return,o,c)}function Nm(i,o,c,f,g){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=c,_.tailMode=g)}function D_(i,o,c){var f=o.pendingProps,g=f.revealOrder,_=f.tail;if(Bn(i,o,f.children,c),f=Ct.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&P_(i,c,o);else if(i.tag===19)P_(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(yt(Ct,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(c=o.child,g=null;c!==null;)i=c.alternate,i!==null&&ch(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),Nm(o,!1,g,c,_);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&ch(i)===null){o.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Nm(o,!0,c,null,_);break;case"together":Nm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function yh(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ei(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),ta|=o.lanes,(c&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,c=Hi(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Hi(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function H1(i,o,c){switch(o.tag){case 3:A_(o),ul();break;case 5:Kv(o);break;case 1:nr(o.type)&&Xd(o);break;case 4:cm(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;yt(ih,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(yt(Ct,Ct.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?R_(i,o,c):(yt(Ct,Ct.current&1),i=ei(i,o,c),i!==null?i.sibling:null);yt(Ct,Ct.current&1);break;case 19:if(f=(c&o.childLanes)!==0,(i.flags&128)!==0){if(f)return D_(i,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),yt(Ct,Ct.current),f)break;return null;case 22:case 23:return o.lanes=0,I_(i,o,c)}return ei(i,o,c)}var j_,Rm,O_,L_;j_=function(i,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Rm=function(){},O_=function(i,o,c,f){var g=i.memoizedProps;if(g!==f){i=o.stateNode,Xo(ks.current);var _=null;switch(c){case"input":g=mn(i,g),f=mn(i,f),_=[];break;case"select":g=de({},g,{value:void 0}),f=de({},f,{value:void 0}),_=[];break;case"textarea":g=ps(i,g),f=ps(i,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Zd)}xi(c,f);var T;c=null;for(Z in g)if(!f.hasOwnProperty(Z)&&g.hasOwnProperty(Z)&&g[Z]!=null)if(Z==="style"){var L=g[Z];for(T in L)L.hasOwnProperty(T)&&(c||(c={}),c[T]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(s.hasOwnProperty(Z)?_||(_=[]):(_=_||[]).push(Z,null));for(Z in f){var V=f[Z];if(L=g!=null?g[Z]:void 0,f.hasOwnProperty(Z)&&V!==L&&(V!=null||L!=null))if(Z==="style")if(L){for(T in L)!L.hasOwnProperty(T)||V&&V.hasOwnProperty(T)||(c||(c={}),c[T]="");for(T in V)V.hasOwnProperty(T)&&L[T]!==V[T]&&(c||(c={}),c[T]=V[T])}else c||(_||(_=[]),_.push(Z,c)),c=V;else Z==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,L=L?L.__html:void 0,V!=null&&L!==V&&(_=_||[]).push(Z,V)):Z==="children"?typeof V!="string"&&typeof V!="number"||(_=_||[]).push(Z,""+V):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(s.hasOwnProperty(Z)?(V!=null&&Z==="onScroll"&&_t("scroll",i),_||L===V||(_=[])):(_=_||[]).push(Z,V))}c&&(_=_||[]).push("style",c);var Z=_;(o.updateQueue=Z)&&(o.flags|=4)}},L_=function(i,o,c,f){c!==f&&(o.flags|=4)};function Yc(i,o){if(!Tt)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Rn(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(o)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,o}function K1(i,o,c){var f=o.pendingProps;switch(Xp(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(o),null;case 1:return nr(o.type)&&Jd(),Rn(o),null;case 3:return f=o.stateNode,pl(),wt(tr),wt(An),hm(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(rh(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,es!==null&&(Bm(es),es=null))),Rm(i,o),Rn(o),null;case 5:um(o);var g=Xo(Hc.current);if(c=o.type,i!==null&&o.stateNode!=null)O_(i,o,c,f,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Rn(o),null}if(i=Xo(ks.current),rh(o)){f=o.stateNode,c=o.type;var _=o.memoizedProps;switch(f[xs]=o,f[Uc]=_,i=(o.mode&1)!==0,c){case"dialog":_t("cancel",f),_t("close",f);break;case"iframe":case"object":case"embed":_t("load",f);break;case"video":case"audio":for(g=0;g<Vc.length;g++)_t(Vc[g],f);break;case"source":_t("error",f);break;case"img":case"image":case"link":_t("error",f),_t("load",f);break;case"details":_t("toggle",f);break;case"input":hr(f,_),_t("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},_t("invalid",f);break;case"textarea":zs(f,_),_t("invalid",f)}xi(c,_),g=null;for(var T in _)if(_.hasOwnProperty(T)){var L=_[T];T==="children"?typeof L=="string"?f.textContent!==L&&(_.suppressHydrationWarning!==!0&&Qd(f.textContent,L,i),g=["children",L]):typeof L=="number"&&f.textContent!==""+L&&(_.suppressHydrationWarning!==!0&&Qd(f.textContent,L,i),g=["children",""+L]):s.hasOwnProperty(T)&&L!=null&&T==="onScroll"&&_t("scroll",f)}switch(c){case"input":Zt(f),Do(f,_,!0);break;case"textarea":Zt(f),jo(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=Zd)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ft(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=T.createElement(c,{is:f.is}):(i=T.createElement(c),c==="select"&&(T=i,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):i=T.createElementNS(i,c),i[xs]=o,i[Uc]=f,j_(i,o,!1,!1),o.stateNode=i;e:{switch(T=Mo(c,f),c){case"dialog":_t("cancel",i),_t("close",i),g=f;break;case"iframe":case"object":case"embed":_t("load",i),g=f;break;case"video":case"audio":for(g=0;g<Vc.length;g++)_t(Vc[g],i);g=f;break;case"source":_t("error",i),g=f;break;case"img":case"image":case"link":_t("error",i),_t("load",i),g=f;break;case"details":_t("toggle",i),g=f;break;case"input":hr(i,f),g=mn(i,f),_t("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=de({},f,{value:void 0}),_t("invalid",i);break;case"textarea":zs(i,f),g=ps(i,f),_t("invalid",i);break;default:g=f}xi(c,g),L=g;for(_ in L)if(L.hasOwnProperty(_)){var V=L[_];_==="style"?Lo(i,V):_==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&$r(i,V)):_==="children"?typeof V=="string"?(c!=="textarea"||V!=="")&&Wr(i,V):typeof V=="number"&&Wr(i,""+V):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?V!=null&&_==="onScroll"&&_t("scroll",i):V!=null&&$(i,_,V,T))}switch(c){case"input":Zt(i),Do(i,f,!1);break;case"textarea":Zt(i),jo(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Fe(f.value));break;case"select":i.multiple=!!f.multiple,_=f.value,_!=null?Zn(i,!!f.multiple,_,!1):f.defaultValue!=null&&Zn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Zd)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Rn(o),null;case 6:if(i&&o.stateNode!=null)L_(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(c=Xo(Hc.current),Xo(ks.current),rh(o)){if(f=o.stateNode,c=o.memoizedProps,f[xs]=o,(_=f.nodeValue!==c)&&(i=vr,i!==null))switch(i.tag){case 3:Qd(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Qd(f.nodeValue,c,(i.mode&1)!==0)}_&&(o.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[xs]=o,o.stateNode=f}return Rn(o),null;case 13:if(wt(Ct),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Tt&&_r!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Fv(),ul(),o.flags|=98560,_=!1;else if(_=rh(o),f!==null&&f.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[xs]=o}else ul(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rn(o),_=!1}else es!==null&&(Bm(es),es=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Ct.current&1)!==0?en===0&&(en=3):qm())),o.updateQueue!==null&&(o.flags|=4),Rn(o),null);case 4:return pl(),Rm(i,o),i===null&&Fc(o.stateNode.containerInfo),Rn(o),null;case 10:return im(o.type._context),Rn(o),null;case 17:return nr(o.type)&&Jd(),Rn(o),null;case 19:if(wt(Ct),_=o.memoizedState,_===null)return Rn(o),null;if(f=(o.flags&128)!==0,T=_.rendering,T===null)if(f)Yc(_,!1);else{if(en!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(T=ch(i),T!==null){for(o.flags|=128,Yc(_,!1),f=T.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=c,c=o.child;c!==null;)_=c,i=f,_.flags&=14680066,T=_.alternate,T===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=T.childLanes,_.lanes=T.lanes,_.child=T.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=T.memoizedProps,_.memoizedState=T.memoizedState,_.updateQueue=T.updateQueue,_.type=T.type,i=T.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return yt(Ct,Ct.current&1|2),o.child}i=i.sibling}_.tail!==null&&gt()>vl&&(o.flags|=128,f=!0,Yc(_,!1),o.lanes=4194304)}else{if(!f)if(i=ch(T),i!==null){if(o.flags|=128,f=!0,c=i.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),Yc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!T.alternate&&!Tt)return Rn(o),null}else 2*gt()-_.renderingStartTime>vl&&c!==1073741824&&(o.flags|=128,f=!0,Yc(_,!1),o.lanes=4194304);_.isBackwards?(T.sibling=o.child,o.child=T):(c=_.last,c!==null?c.sibling=T:o.child=T,_.last=T)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=gt(),o.sibling=null,c=Ct.current,yt(Ct,f?c&1|2:c&1),o):(Rn(o),null);case 22:case 23:return Wm(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(wr&1073741824)!==0&&(Rn(o),o.subtreeFlags&6&&(o.flags|=8192)):Rn(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function G1(i,o){switch(Xp(o),o.tag){case 1:return nr(o.type)&&Jd(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return pl(),wt(tr),wt(An),hm(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return um(o),null;case 13:if(wt(Ct),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));ul()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return wt(Ct),null;case 4:return pl(),null;case 10:return im(o.type._context),null;case 22:case 23:return Wm(),null;case 24:return null;default:return null}}var vh=!1,Pn=!1,Q1=typeof WeakSet=="function"?WeakSet:Set,ye=null;function gl(i,o){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Lt(i,o,f)}else c.current=null}function Pm(i,o,c){try{c()}catch(f){Lt(i,o,f)}}var M_=!1;function Z1(i,o){if(Wp=Pi,i=mv(),Lp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var T=0,L=-1,V=-1,Z=0,ie=0,ae=i,se=null;t:for(;;){for(var fe;ae!==c||g!==0&&ae.nodeType!==3||(L=T+g),ae!==_||f!==0&&ae.nodeType!==3||(V=T+f),ae.nodeType===3&&(T+=ae.nodeValue.length),(fe=ae.firstChild)!==null;)se=ae,ae=fe;for(;;){if(ae===i)break t;if(se===c&&++Z===g&&(L=T),se===_&&++ie===f&&(V=T),(fe=ae.nextSibling)!==null)break;ae=se,se=ae.parentNode}ae=fe}c=L===-1||V===-1?null:{start:L,end:V}}else c=null}c=c||{start:0,end:0}}else c=null;for(qp={focusedElem:i,selectionRange:c},Pi=!1,ye=o;ye!==null;)if(o=ye,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ye=i;else for(;ye!==null;){o=ye;try{var _e=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var xe=_e.memoizedProps,zt=_e.memoizedState,G=o.stateNode,U=G.getSnapshotBeforeUpdate(o.elementType===o.type?xe:ts(o.type,xe),zt);G.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var Q=o.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(le){Lt(o,o.return,le)}if(i=o.sibling,i!==null){i.return=o.return,ye=i;break}ye=o.return}return _e=M_,M_=!1,_e}function Jc(i,o,c){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var _=g.destroy;g.destroy=void 0,_!==void 0&&Pm(o,c,_)}g=g.next}while(g!==f)}}function _h(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==o)}}function Dm(i){var o=i.ref;if(o!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof o=="function"?o(i):o.current=i}}function V_(i){var o=i.alternate;o!==null&&(i.alternate=null,V_(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[xs],delete o[Uc],delete o[Qp],delete o[P1],delete o[D1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function F_(i){return i.tag===5||i.tag===3||i.tag===4}function z_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||F_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function jm(i,o,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(i,o):c.insertBefore(i,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(i,c)):(o=c,o.appendChild(i)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Zd));else if(f!==4&&(i=i.child,i!==null))for(jm(i,o,c),i=i.sibling;i!==null;)jm(i,o,c),i=i.sibling}function Om(i,o,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Om(i,o,c),i=i.sibling;i!==null;)Om(i,o,c),i=i.sibling}var _n=null,ns=!1;function Ui(i,o,c){for(c=c.child;c!==null;)U_(i,o,c),c=c.sibling}function U_(i,o,c){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(Uo,c)}catch{}switch(c.tag){case 5:Pn||gl(c,o);case 6:var f=_n,g=ns;_n=null,Ui(i,o,c),_n=f,ns=g,_n!==null&&(ns?(i=_n,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):_n.removeChild(c.stateNode));break;case 18:_n!==null&&(ns?(i=_n,c=c.stateNode,i.nodeType===8?Gp(i.parentNode,c):i.nodeType===1&&Gp(i,c),Yr(i)):Gp(_n,c.stateNode));break;case 4:f=_n,g=ns,_n=c.stateNode.containerInfo,ns=!0,Ui(i,o,c),_n=f,ns=g;break;case 0:case 11:case 14:case 15:if(!Pn&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,T=_.destroy;_=_.tag,T!==void 0&&((_&2)!==0||(_&4)!==0)&&Pm(c,o,T),g=g.next}while(g!==f)}Ui(i,o,c);break;case 1:if(!Pn&&(gl(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(L){Lt(c,o,L)}Ui(i,o,c);break;case 21:Ui(i,o,c);break;case 22:c.mode&1?(Pn=(f=Pn)||c.memoizedState!==null,Ui(i,o,c),Pn=f):Ui(i,o,c);break;default:Ui(i,o,c)}}function B_(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new Q1),o.forEach(function(f){var g=iS.bind(null,i,f);c.has(f)||(c.add(f),f.then(g,g))})}}function rs(i,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];try{var _=i,T=o,L=T;e:for(;L!==null;){switch(L.tag){case 5:_n=L.stateNode,ns=!1;break e;case 3:_n=L.stateNode.containerInfo,ns=!0;break e;case 4:_n=L.stateNode.containerInfo,ns=!0;break e}L=L.return}if(_n===null)throw Error(n(160));U_(_,T,g),_n=null,ns=!1;var V=g.alternate;V!==null&&(V.return=null),g.return=null}catch(Z){Lt(g,o,Z)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)$_(o,i),o=o.sibling}function $_(i,o){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(rs(o,i),Ts(i),f&4){try{Jc(3,i,i.return),_h(3,i)}catch(xe){Lt(i,i.return,xe)}try{Jc(5,i,i.return)}catch(xe){Lt(i,i.return,xe)}}break;case 1:rs(o,i),Ts(i),f&512&&c!==null&&gl(c,c.return);break;case 5:if(rs(o,i),Ts(i),f&512&&c!==null&&gl(c,c.return),i.flags&32){var g=i.stateNode;try{Wr(g,"")}catch(xe){Lt(i,i.return,xe)}}if(f&4&&(g=i.stateNode,g!=null)){var _=i.memoizedProps,T=c!==null?c.memoizedProps:_,L=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{L==="input"&&_.type==="radio"&&_.name!=null&&kr(g,_),Mo(L,T);var Z=Mo(L,_);for(T=0;T<V.length;T+=2){var ie=V[T],ae=V[T+1];ie==="style"?Lo(g,ae):ie==="dangerouslySetInnerHTML"?$r(g,ae):ie==="children"?Wr(g,ae):$(g,ie,ae,Z)}switch(L){case"input":bi(g,_);break;case"textarea":Us(g,_);break;case"select":var se=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var fe=_.value;fe!=null?Zn(g,!!_.multiple,fe,!1):se!==!!_.multiple&&(_.defaultValue!=null?Zn(g,!!_.multiple,_.defaultValue,!0):Zn(g,!!_.multiple,_.multiple?[]:"",!1))}g[Uc]=_}catch(xe){Lt(i,i.return,xe)}}break;case 6:if(rs(o,i),Ts(i),f&4){if(i.stateNode===null)throw Error(n(162));g=i.stateNode,_=i.memoizedProps;try{g.nodeValue=_}catch(xe){Lt(i,i.return,xe)}}break;case 3:if(rs(o,i),Ts(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Yr(o.containerInfo)}catch(xe){Lt(i,i.return,xe)}break;case 4:rs(o,i),Ts(i);break;case 13:rs(o,i),Ts(i),g=i.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(Vm=gt())),f&4&&B_(i);break;case 22:if(ie=c!==null&&c.memoizedState!==null,i.mode&1?(Pn=(Z=Pn)||ie,rs(o,i),Pn=Z):rs(o,i),Ts(i),f&8192){if(Z=i.memoizedState!==null,(i.stateNode.isHidden=Z)&&!ie&&(i.mode&1)!==0)for(ye=i,ie=i.child;ie!==null;){for(ae=ye=ie;ye!==null;){switch(se=ye,fe=se.child,se.tag){case 0:case 11:case 14:case 15:Jc(4,se,se.return);break;case 1:gl(se,se.return);var _e=se.stateNode;if(typeof _e.componentWillUnmount=="function"){f=se,c=se.return;try{o=f,_e.props=o.memoizedProps,_e.state=o.memoizedState,_e.componentWillUnmount()}catch(xe){Lt(f,c,xe)}}break;case 5:gl(se,se.return);break;case 22:if(se.memoizedState!==null){H_(ae);continue}}fe!==null?(fe.return=se,ye=fe):H_(ae)}ie=ie.sibling}e:for(ie=null,ae=i;;){if(ae.tag===5){if(ie===null){ie=ae;try{g=ae.stateNode,Z?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(L=ae.stateNode,V=ae.memoizedProps.style,T=V!=null&&V.hasOwnProperty("display")?V.display:null,L.style.display=Oo("display",T))}catch(xe){Lt(i,i.return,xe)}}}else if(ae.tag===6){if(ie===null)try{ae.stateNode.nodeValue=Z?"":ae.memoizedProps}catch(xe){Lt(i,i.return,xe)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===i)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===i)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===i)break e;ie===ae&&(ie=null),ae=ae.return}ie===ae&&(ie=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:rs(o,i),Ts(i),f&4&&B_(i);break;case 21:break;default:rs(o,i),Ts(i)}}function Ts(i){var o=i.flags;if(o&2){try{e:{for(var c=i.return;c!==null;){if(F_(c)){var f=c;break e}c=c.return}throw Error(n(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Wr(g,""),f.flags&=-33);var _=z_(i);Om(i,_,g);break;case 3:case 4:var T=f.stateNode.containerInfo,L=z_(i);jm(i,L,T);break;default:throw Error(n(161))}}catch(V){Lt(i,i.return,V)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Y1(i,o,c){ye=i,W_(i)}function W_(i,o,c){for(var f=(i.mode&1)!==0;ye!==null;){var g=ye,_=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||vh;if(!T){var L=g.alternate,V=L!==null&&L.memoizedState!==null||Pn;L=vh;var Z=Pn;if(vh=T,(Pn=V)&&!Z)for(ye=g;ye!==null;)T=ye,V=T.child,T.tag===22&&T.memoizedState!==null?K_(g):V!==null?(V.return=T,ye=V):K_(g);for(;_!==null;)ye=_,W_(_),_=_.sibling;ye=g,vh=L,Pn=Z}q_(i)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,ye=_):q_(i)}}function q_(i){for(;ye!==null;){var o=ye;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Pn||_h(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Pn)if(c===null)f.componentDidMount();else{var g=o.elementType===o.type?c.memoizedProps:ts(o.type,c.memoizedProps);f.componentDidUpdate(g,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&Hv(o,_,f);break;case 3:var T=o.updateQueue;if(T!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}Hv(o,T,c)}break;case 5:var L=o.stateNode;if(c===null&&o.flags&4){c=L;var V=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&c.focus();break;case"img":V.src&&(c.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Z=o.alternate;if(Z!==null){var ie=Z.memoizedState;if(ie!==null){var ae=ie.dehydrated;ae!==null&&Yr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Pn||o.flags&512&&Dm(o)}catch(se){Lt(o,o.return,se)}}if(o===i){ye=null;break}if(c=o.sibling,c!==null){c.return=o.return,ye=c;break}ye=o.return}}function H_(i){for(;ye!==null;){var o=ye;if(o===i){ye=null;break}var c=o.sibling;if(c!==null){c.return=o.return,ye=c;break}ye=o.return}}function K_(i){for(;ye!==null;){var o=ye;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{_h(4,o)}catch(V){Lt(o,c,V)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(V){Lt(o,g,V)}}var _=o.return;try{Dm(o)}catch(V){Lt(o,_,V)}break;case 5:var T=o.return;try{Dm(o)}catch(V){Lt(o,T,V)}}}catch(V){Lt(o,o.return,V)}if(o===i){ye=null;break}var L=o.sibling;if(L!==null){L.return=o.return,ye=L;break}ye=o.return}}var J1=Math.ceil,wh=H.ReactCurrentDispatcher,Lm=H.ReactCurrentOwner,Dr=H.ReactCurrentBatchConfig,ot=0,ln=null,Kt=null,wn=0,wr=0,yl=Li(0),en=0,Xc=null,ta=0,bh=0,Mm=0,eu=null,sr=null,Vm=0,vl=1/0,ti=null,xh=!1,Fm=null,Bi=null,kh=!1,$i=null,Eh=0,tu=0,zm=null,Th=-1,Ih=0;function $n(){return(ot&6)!==0?gt():Th!==-1?Th:Th=gt()}function Wi(i){return(i.mode&1)===0?1:(ot&2)!==0&&wn!==0?wn&-wn:O1.transition!==null?(Ih===0&&(Ih=$o()),Ih):(i=Ze,i!==0||(i=window.event,i=i===void 0?16:Ac(i.type)),i)}function ss(i,o,c,f){if(50<tu)throw tu=0,zm=null,Error(n(185));Ci(i,c,f),((ot&2)===0||i!==ln)&&(i===ln&&((ot&2)===0&&(bh|=c),en===4&&qi(i,wn)),ir(i,f),c===1&&ot===0&&(o.mode&1)===0&&(vl=gt()+500,eh&&Vi()))}function ir(i,o){var c=i.callbackNode;$s(i,o);var f=Bo(i,i===ln?wn:0);if(f===0)c!==null&&Ec(c),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(c!=null&&Ec(c),o===1)i.tag===0?j1(Q_.bind(null,i)):jv(Q_.bind(null,i)),N1(function(){(ot&6)===0&&Vi()}),c=null;else{switch(Ni(f)){case 1:c=zo;break;case 4:c=Ti;break;case 16:c=Ir;break;case 536870912:c=Id;break;default:c=Ir}c=rw(c,G_.bind(null,i))}i.callbackPriority=o,i.callbackNode=c}}function G_(i,o){if(Th=-1,Ih=0,(ot&6)!==0)throw Error(n(327));var c=i.callbackNode;if(_l()&&i.callbackNode!==c)return null;var f=Bo(i,i===ln?wn:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=Sh(i,f);else{o=f;var g=ot;ot|=2;var _=Y_();(ln!==i||wn!==o)&&(ti=null,vl=gt()+500,ra(i,o));do try{tS();break}catch(L){Z_(i,L)}while(!0);sm(),wh.current=_,ot=g,Kt!==null?o=0:(ln=null,wn=0,o=en)}if(o!==0){if(o===2&&(g=mr(i),g!==0&&(f=g,o=Um(i,g))),o===1)throw c=Xc,ra(i,0),qi(i,f),ir(i,gt()),c;if(o===6)qi(i,f);else{if(g=i.current.alternate,(f&30)===0&&!X1(g)&&(o=Sh(i,f),o===2&&(_=mr(i),_!==0&&(f=_,o=Um(i,_))),o===1))throw c=Xc,ra(i,0),qi(i,f),ir(i,gt()),c;switch(i.finishedWork=g,i.finishedLanes=f,o){case 0:case 1:throw Error(n(345));case 2:sa(i,sr,ti);break;case 3:if(qi(i,f),(f&130023424)===f&&(o=Vm+500-gt(),10<o)){if(Bo(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){$n(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=Kp(sa.bind(null,i,sr,ti),o);break}sa(i,sr,ti);break;case 4:if(qi(i,f),(f&4194240)===f)break;for(o=i.eventTimes,g=-1;0<f;){var T=31-zn(f);_=1<<T,T=o[T],T>g&&(g=T),f&=~_}if(f=g,f=gt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*J1(f/1960))-f,10<f){i.timeoutHandle=Kp(sa.bind(null,i,sr,ti),f);break}sa(i,sr,ti);break;case 5:sa(i,sr,ti);break;default:throw Error(n(329))}}}return ir(i,gt()),i.callbackNode===c?G_.bind(null,i):null}function Um(i,o){var c=eu;return i.current.memoizedState.isDehydrated&&(ra(i,o).flags|=256),i=Sh(i,o),i!==2&&(o=sr,sr=c,o!==null&&Bm(o)),i}function Bm(i){sr===null?sr=i:sr.push.apply(sr,i)}function X1(i){for(var o=i;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var g=c[f],_=g.getSnapshot;g=g.value;try{if(!Xr(_(),g))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function qi(i,o){for(o&=~Mm,o&=~bh,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var c=31-zn(o),f=1<<c;i[c]=-1,o&=~f}}function Q_(i){if((ot&6)!==0)throw Error(n(327));_l();var o=Bo(i,0);if((o&1)===0)return ir(i,gt()),null;var c=Sh(i,o);if(i.tag!==0&&c===2){var f=mr(i);f!==0&&(o=f,c=Um(i,f))}if(c===1)throw c=Xc,ra(i,0),qi(i,o),ir(i,gt()),c;if(c===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,sa(i,sr,ti),ir(i,gt()),null}function $m(i,o){var c=ot;ot|=1;try{return i(o)}finally{ot=c,ot===0&&(vl=gt()+500,eh&&Vi())}}function na(i){$i!==null&&$i.tag===0&&(ot&6)===0&&_l();var o=ot;ot|=1;var c=Dr.transition,f=Ze;try{if(Dr.transition=null,Ze=1,i)return i()}finally{Ze=f,Dr.transition=c,ot=o,(ot&6)===0&&Vi()}}function Wm(){wr=yl.current,wt(yl)}function ra(i,o){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,A1(c)),Kt!==null)for(c=Kt.return;c!==null;){var f=c;switch(Xp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Jd();break;case 3:pl(),wt(tr),wt(An),hm();break;case 5:um(f);break;case 4:pl();break;case 13:wt(Ct);break;case 19:wt(Ct);break;case 10:im(f.type._context);break;case 22:case 23:Wm()}c=c.return}if(ln=i,Kt=i=Hi(i.current,null),wn=wr=o,en=0,Xc=null,Mm=bh=ta=0,sr=eu=null,Jo!==null){for(o=0;o<Jo.length;o++)if(c=Jo[o],f=c.interleaved,f!==null){c.interleaved=null;var g=f.next,_=c.pending;if(_!==null){var T=_.next;_.next=g,f.next=T}c.pending=f}Jo=null}return i}function Z_(i,o){do{var c=Kt;try{if(sm(),uh.current=ph,dh){for(var f=At.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}dh=!1}if(ea=0,an=Xt=At=null,Kc=!1,Gc=0,Lm.current=null,c===null||c.return===null){en=1,Xc=o,Kt=null;break}e:{var _=i,T=c.return,L=c,V=o;if(o=wn,L.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var Z=V,ie=L,ae=ie.tag;if((ie.mode&1)===0&&(ae===0||ae===11||ae===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=b_(T);if(fe!==null){fe.flags&=-257,x_(fe,T,L,_,o),fe.mode&1&&w_(_,Z,o),o=fe,V=Z;var _e=o.updateQueue;if(_e===null){var xe=new Set;xe.add(V),o.updateQueue=xe}else _e.add(V);break e}else{if((o&1)===0){w_(_,Z,o),qm();break e}V=Error(n(426))}}else if(Tt&&L.mode&1){var zt=b_(T);if(zt!==null){(zt.flags&65536)===0&&(zt.flags|=256),x_(zt,T,L,_,o),nm(ml(V,L));break e}}_=V=ml(V,L),en!==4&&(en=2),eu===null?eu=[_]:eu.push(_),_=T;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var G=v_(_,V,o);qv(_,G);break e;case 1:L=V;var U=_.type,Q=_.stateNode;if((_.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Bi===null||!Bi.has(Q)))){_.flags|=65536,o&=-o,_.lanes|=o;var le=__(_,L,o);qv(_,le);break e}}_=_.return}while(_!==null)}X_(c)}catch(Te){o=Te,Kt===c&&c!==null&&(Kt=c=c.return);continue}break}while(!0)}function Y_(){var i=wh.current;return wh.current=ph,i===null?ph:i}function qm(){(en===0||en===3||en===2)&&(en=4),ln===null||(ta&268435455)===0&&(bh&268435455)===0||qi(ln,wn)}function Sh(i,o){var c=ot;ot|=2;var f=Y_();(ln!==i||wn!==o)&&(ti=null,ra(i,o));do try{eS();break}catch(g){Z_(i,g)}while(!0);if(sm(),ot=c,wh.current=f,Kt!==null)throw Error(n(261));return ln=null,wn=0,en}function eS(){for(;Kt!==null;)J_(Kt)}function tS(){for(;Kt!==null&&!Ed();)J_(Kt)}function J_(i){var o=nw(i.alternate,i,wr);i.memoizedProps=i.pendingProps,o===null?X_(i):Kt=o,Lm.current=null}function X_(i){var o=i;do{var c=o.alternate;if(i=o.return,(o.flags&32768)===0){if(c=K1(c,o,wr),c!==null){Kt=c;return}}else{if(c=G1(c,o),c!==null){c.flags&=32767,Kt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{en=6,Kt=null;return}}if(o=o.sibling,o!==null){Kt=o;return}Kt=o=i}while(o!==null);en===0&&(en=5)}function sa(i,o,c){var f=Ze,g=Dr.transition;try{Dr.transition=null,Ze=1,nS(i,o,c,f)}finally{Dr.transition=g,Ze=f}return null}function nS(i,o,c,f){do _l();while($i!==null);if((ot&6)!==0)throw Error(n(327));c=i.finishedWork;var g=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var _=c.lanes|c.childLanes;if(pt(i,_),i===ln&&(Kt=ln=null,wn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||kh||(kh=!0,rw(Ir,function(){return _l(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=Dr.transition,Dr.transition=null;var T=Ze;Ze=1;var L=ot;ot|=4,Lm.current=null,Z1(i,c),$_(c,i),x1(qp),Pi=!!Wp,qp=Wp=null,i.current=c,Y1(c),Cp(),ot=L,Ze=T,Dr.transition=_}else i.current=c;if(kh&&(kh=!1,$i=i,Eh=g),_=i.pendingLanes,_===0&&(Bi=null),Sd(c.stateNode),ir(i,gt()),o!==null)for(f=i.onRecoverableError,c=0;c<o.length;c++)g=o[c],f(g.value,{componentStack:g.stack,digest:g.digest});if(xh)throw xh=!1,i=Fm,Fm=null,i;return(Eh&1)!==0&&i.tag!==0&&_l(),_=i.pendingLanes,(_&1)!==0?i===zm?tu++:(tu=0,zm=i):tu=0,Vi(),null}function _l(){if($i!==null){var i=Ni(Eh),o=Dr.transition,c=Ze;try{if(Dr.transition=null,Ze=16>i?16:i,$i===null)var f=!1;else{if(i=$i,$i=null,Eh=0,(ot&6)!==0)throw Error(n(331));var g=ot;for(ot|=4,ye=i.current;ye!==null;){var _=ye,T=_.child;if((ye.flags&16)!==0){var L=_.deletions;if(L!==null){for(var V=0;V<L.length;V++){var Z=L[V];for(ye=Z;ye!==null;){var ie=ye;switch(ie.tag){case 0:case 11:case 15:Jc(8,ie,_)}var ae=ie.child;if(ae!==null)ae.return=ie,ye=ae;else for(;ye!==null;){ie=ye;var se=ie.sibling,fe=ie.return;if(V_(ie),ie===Z){ye=null;break}if(se!==null){se.return=fe,ye=se;break}ye=fe}}}var _e=_.alternate;if(_e!==null){var xe=_e.child;if(xe!==null){_e.child=null;do{var zt=xe.sibling;xe.sibling=null,xe=zt}while(xe!==null)}}ye=_}}if((_.subtreeFlags&2064)!==0&&T!==null)T.return=_,ye=T;else e:for(;ye!==null;){if(_=ye,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Jc(9,_,_.return)}var G=_.sibling;if(G!==null){G.return=_.return,ye=G;break e}ye=_.return}}var U=i.current;for(ye=U;ye!==null;){T=ye;var Q=T.child;if((T.subtreeFlags&2064)!==0&&Q!==null)Q.return=T,ye=Q;else e:for(T=U;ye!==null;){if(L=ye,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:_h(9,L)}}catch(Te){Lt(L,L.return,Te)}if(L===T){ye=null;break e}var le=L.sibling;if(le!==null){le.return=L.return,ye=le;break e}ye=L.return}}if(ot=g,Vi(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(Uo,i)}catch{}f=!0}return f}finally{Ze=c,Dr.transition=o}}return!1}function ew(i,o,c){o=ml(c,o),o=v_(i,o,1),i=zi(i,o,1),o=$n(),i!==null&&(Ci(i,1,o),ir(i,o))}function Lt(i,o,c){if(i.tag===3)ew(i,i,c);else for(;o!==null;){if(o.tag===3){ew(o,i,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Bi===null||!Bi.has(f))){i=ml(c,i),i=__(o,i,1),o=zi(o,i,1),i=$n(),o!==null&&(Ci(o,1,i),ir(o,i));break}}o=o.return}}function rS(i,o,c){var f=i.pingCache;f!==null&&f.delete(o),o=$n(),i.pingedLanes|=i.suspendedLanes&c,ln===i&&(wn&c)===c&&(en===4||en===3&&(wn&130023424)===wn&&500>gt()-Vm?ra(i,0):Mm|=c),ir(i,o)}function tw(i,o){o===0&&((i.mode&1)===0?o=1:(o=Ba,Ba<<=1,(Ba&130023424)===0&&(Ba=4194304)));var c=$n();i=Js(i,o),i!==null&&(Ci(i,o,c),ir(i,c))}function sS(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),tw(i,c)}function iS(i,o){var c=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(o),tw(i,c)}var nw;nw=function(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps||tr.current)rr=!0;else{if((i.lanes&c)===0&&(o.flags&128)===0)return rr=!1,H1(i,o,c);rr=(i.flags&131072)!==0}else rr=!1,Tt&&(o.flags&1048576)!==0&&Ov(o,nh,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;yh(i,o),i=o.pendingProps;var g=al(o,An.current);fl(o,c),g=mm(null,o,f,i,g,c);var _=gm();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,nr(f)?(_=!0,Xd(o)):_=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,lm(o),g.updater=mh,o.stateNode=g,g._reactInternals=o,xm(o,f,i,c),o=Im(null,o,f,!0,_,c)):(o.tag=0,Tt&&_&&Jp(o),Bn(null,o,g,c),o=o.child),o;case 16:f=o.elementType;e:{switch(yh(i,o),i=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=aS(f),i=ts(f,i),g){case 0:o=Tm(null,o,f,i,c);break e;case 1:o=C_(null,o,f,i,c);break e;case 11:o=k_(null,o,f,i,c);break e;case 14:o=E_(null,o,f,ts(f.type,i),c);break e}throw Error(n(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:ts(f,g),Tm(i,o,f,g,c);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:ts(f,g),C_(i,o,f,g,c);case 3:e:{if(A_(o),i===null)throw Error(n(387));f=o.pendingProps,_=o.memoizedState,g=_.element,Wv(i,o),lh(o,f,null,c);var T=o.memoizedState;if(f=T.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){g=ml(Error(n(423)),o),o=N_(i,o,f,c,g);break e}else if(f!==g){g=ml(Error(n(424)),o),o=N_(i,o,f,c,g);break e}else for(_r=Oi(o.stateNode.containerInfo.firstChild),vr=o,Tt=!0,es=null,c=Bv(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ul(),f===g){o=ei(i,o,c);break e}Bn(i,o,f,c)}o=o.child}return o;case 5:return Kv(o),i===null&&tm(o),f=o.type,g=o.pendingProps,_=i!==null?i.memoizedProps:null,T=g.children,Hp(f,g)?T=null:_!==null&&Hp(f,_)&&(o.flags|=32),S_(i,o),Bn(i,o,T,c),o.child;case 6:return i===null&&tm(o),null;case 13:return R_(i,o,c);case 4:return cm(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=dl(o,null,f,c):Bn(i,o,f,c),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:ts(f,g),k_(i,o,f,g,c);case 7:return Bn(i,o,o.pendingProps,c),o.child;case 8:return Bn(i,o,o.pendingProps.children,c),o.child;case 12:return Bn(i,o,o.pendingProps.children,c),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,_=o.memoizedProps,T=g.value,yt(ih,f._currentValue),f._currentValue=T,_!==null)if(Xr(_.value,T)){if(_.children===g.children&&!tr.current){o=ei(i,o,c);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var L=_.dependencies;if(L!==null){T=_.child;for(var V=L.firstContext;V!==null;){if(V.context===f){if(_.tag===1){V=Xs(-1,c&-c),V.tag=2;var Z=_.updateQueue;if(Z!==null){Z=Z.shared;var ie=Z.pending;ie===null?V.next=V:(V.next=ie.next,ie.next=V),Z.pending=V}}_.lanes|=c,V=_.alternate,V!==null&&(V.lanes|=c),om(_.return,c,o),L.lanes|=c;break}V=V.next}}else if(_.tag===10)T=_.type===o.type?null:_.child;else if(_.tag===18){if(T=_.return,T===null)throw Error(n(341));T.lanes|=c,L=T.alternate,L!==null&&(L.lanes|=c),om(T,c,o),T=_.sibling}else T=_.child;if(T!==null)T.return=_;else for(T=_;T!==null;){if(T===o){T=null;break}if(_=T.sibling,_!==null){_.return=T.return,T=_;break}T=T.return}_=T}Bn(i,o,g.children,c),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,fl(o,c),g=Rr(g),f=f(g),o.flags|=1,Bn(i,o,f,c),o.child;case 14:return f=o.type,g=ts(f,o.pendingProps),g=ts(f.type,g),E_(i,o,f,g,c);case 15:return T_(i,o,o.type,o.pendingProps,c);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:ts(f,g),yh(i,o),o.tag=1,nr(f)?(i=!0,Xd(o)):i=!1,fl(o,c),g_(o,f,g),xm(o,f,g,c),Im(null,o,f,!0,i,c);case 19:return D_(i,o,c);case 22:return I_(i,o,c)}throw Error(n(156,o.tag))};function rw(i,o){return za(i,o)}function oS(i,o,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(i,o,c,f){return new oS(i,o,c,f)}function Hm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function aS(i){if(typeof i=="function")return Hm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===M)return 11;if(i===tt)return 14}return 2}function Hi(i,o){var c=i.alternate;return c===null?(c=jr(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Ch(i,o,c,f,g,_){var T=2;if(f=i,typeof i=="function")Hm(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case S:return ia(c.children,g,_,o);case I:T=8,g|=8;break;case N:return i=jr(12,c,o,g|2),i.elementType=N,i.lanes=_,i;case D:return i=jr(13,c,o,g),i.elementType=D,i.lanes=_,i;case Be:return i=jr(19,c,o,g),i.elementType=Be,i.lanes=_,i;case Ae:return Ah(c,g,_,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case P:T=10;break e;case O:T=9;break e;case M:T=11;break e;case tt:T=14;break e;case nt:T=16,f=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return o=jr(T,c,o,g),o.elementType=i,o.type=f,o.lanes=_,o}function ia(i,o,c,f){return i=jr(7,i,f,o),i.lanes=c,i}function Ah(i,o,c,f){return i=jr(22,i,f,o),i.elementType=Ae,i.lanes=c,i.stateNode={isHidden:!1},i}function Km(i,o,c){return i=jr(6,i,null,o),i.lanes=c,i}function Gm(i,o,c){return o=jr(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function lS(i,o,c,f,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Si(0),this.expirationTimes=Si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Qm(i,o,c,f,g,_,T,L,V){return i=new lS(i,o,c,L,V),o===1?(o=1,_===!0&&(o|=8)):o=0,_=jr(3,null,null,o),i.current=_,_.stateNode=i,_.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},lm(_),i}function cS(i,o,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:f==null?null:""+f,children:i,containerInfo:o,implementation:c}}function sw(i){if(!i)return Mi;i=i._reactInternals;e:{if(Hr(i)!==i||i.tag!==1)throw Error(n(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(nr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(i.tag===1){var c=i.type;if(nr(c))return Pv(i,c,o)}return o}function iw(i,o,c,f,g,_,T,L,V){return i=Qm(c,f,!0,i,g,_,T,L,V),i.context=sw(null),c=i.current,f=$n(),g=Wi(c),_=Xs(f,g),_.callback=o??null,zi(c,_,g),i.current.lanes=g,Ci(i,g,f),ir(i,f),i}function Nh(i,o,c,f){var g=o.current,_=$n(),T=Wi(g);return c=sw(c),o.context===null?o.context=c:o.pendingContext=c,o=Xs(_,T),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=zi(g,o,T),i!==null&&(ss(i,g,T,_),ah(i,g,T)),T}function Rh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function ow(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Zm(i,o){ow(i,o),(i=i.alternate)&&ow(i,o)}function uS(){return null}var aw=typeof reportError=="function"?reportError:function(i){console.error(i)};function Ym(i){this._internalRoot=i}Ph.prototype.render=Ym.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));Nh(i,o,null,null)},Ph.prototype.unmount=Ym.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;na(function(){Nh(null,i,null,null)}),o[Gs]=null}};function Ph(i){this._internalRoot=i}Ph.prototype.unstable_scheduleHydration=function(i){if(i){var o=Pd();i={blockedOn:null,target:i,priority:o};for(var c=0;c<vs.length&&o!==0&&o<vs[c].priority;c++);vs.splice(c,0,i),c===0&&Od(i)}};function Jm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Dh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function lw(){}function dS(i,o,c,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var Z=Rh(T);_.call(Z)}}var T=iw(o,f,i,0,null,!1,!1,"",lw);return i._reactRootContainer=T,i[Gs]=T.current,Fc(i.nodeType===8?i.parentNode:i),na(),T}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var L=f;f=function(){var Z=Rh(V);L.call(Z)}}var V=Qm(i,0,!1,null,null,!1,!1,"",lw);return i._reactRootContainer=V,i[Gs]=V.current,Fc(i.nodeType===8?i.parentNode:i),na(function(){Nh(o,V,c,f)}),V}function jh(i,o,c,f,g){var _=c._reactRootContainer;if(_){var T=_;if(typeof g=="function"){var L=g;g=function(){var V=Rh(T);L.call(V)}}Nh(o,T,i,g)}else T=dS(c,o,i,g,f);return Rh(T)}Nd=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var c=Ii(o.pendingLanes);c!==0&&(Ai(o,c|1),ir(o,gt()),(ot&6)===0&&(vl=gt()+500,Vi()))}break;case 13:na(function(){var f=Js(i,1);if(f!==null){var g=$n();ss(f,i,1,g)}}),Zm(i,1)}},$a=function(i){if(i.tag===13){var o=Js(i,134217728);if(o!==null){var c=$n();ss(o,i,134217728,c)}Zm(i,134217728)}},Rd=function(i){if(i.tag===13){var o=Wi(i),c=Js(i,o);if(c!==null){var f=$n();ss(c,i,o,f)}Zm(i,o)}},Pd=function(){return Ze},Dd=function(i,o){var c=Ze;try{return Ze=i,o()}finally{Ze=c}},Ei=function(i,o,c){switch(o){case"input":if(bi(i,c),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==i&&f.form===i.form){var g=Yd(f);if(!g)throw Error(n(90));jt(f),bi(f,g)}}}break;case"textarea":Us(i,c);break;case"select":o=c.value,o!=null&&Zn(i,!!c.multiple,o,!1)}},$t=$m,Yt=na;var hS={usingClientEntryPoint:!1,Events:[Bc,il,Yd,kt,Jn,$m]},nu={findFiberByHostInstance:Go,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fS={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=kc(i),i===null?null:i.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||uS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{Uo=Oh.inject(fS),pr=Oh}catch{}}return or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hS,or.createPortal=function(i,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jm(o))throw Error(n(200));return cS(i,o,null,c)},or.createRoot=function(i,o){if(!Jm(i))throw Error(n(299));var c=!1,f="",g=aw;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=Qm(i,1,!1,null,null,c,!1,f,g),i[Gs]=o.current,Fc(i.nodeType===8?i.parentNode:i),new Ym(o)},or.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=kc(o),i=i===null?null:i.stateNode,i},or.flushSync=function(i){return na(i)},or.hydrate=function(i,o,c){if(!Dh(o))throw Error(n(200));return jh(null,i,o,!0,c)},or.hydrateRoot=function(i,o,c){if(!Jm(i))throw Error(n(405));var f=c!=null&&c.hydratedSources||null,g=!1,_="",T=aw;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),o=iw(o,null,i,1,c??null,g,!1,_,T),i[Gs]=o.current,Fc(i),f)for(i=0;i<f.length;i++)c=f[i],g=c._getVersion,g=g(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,g]:o.mutableSourceEagerHydrationData.push(c,g);return new Ph(o)},or.render=function(i,o,c){if(!Dh(o))throw Error(n(200));return jh(null,i,o,!1,c)},or.unmountComponentAtNode=function(i){if(!Dh(i))throw Error(n(40));return i._reactRootContainer?(na(function(){jh(null,null,i,!1,function(){i._reactRootContainer=null,i[Gs]=null})}),!0):!1},or.unstable_batchedUpdates=$m,or.unstable_renderSubtreeIntoContainer=function(i,o,c,f){if(!Dh(c))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return jh(i,o,c,!1,f)},or.version="18.3.1-next-f1338f8080-20240426",or}var Cw;function pk(){if(Cw)return ng.exports;Cw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ng.exports=oC(),ng.exports}var Aw;function aC(){if(Aw)return Vh;Aw=1;var t=pk();return Vh.createRoot=t.createRoot,Vh.hydrateRoot=t.hydrateRoot,Vh}var lC=aC();const cC=rk(lC);var ua=pk();function uC(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return j.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const qf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sc(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function jy(t){return"nodeType"in t}function Qn(t){var e,n;return t?sc(t)?t:jy(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Oy(t){const{Document:e}=Qn(t);return t instanceof e}function Yu(t){return sc(t)?!1:t instanceof Qn(t).HTMLElement}function mk(t){return t instanceof Qn(t).SVGElement}function ic(t){return t?sc(t)?t.document:jy(t)?Oy(t)?t:Yu(t)||mk(t)?t.ownerDocument:document:document:document}const ls=qf?j.useLayoutEffect:j.useEffect;function Hf(t){const e=j.useRef(t);return ls(()=>{e.current=t}),j.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function dC(){const t=j.useRef(null),e=j.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=j.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Su(t,e){e===void 0&&(e=[t]);const n=j.useRef(t);return ls(()=>{n.current!==t&&(n.current=t)},e),n}function Ju(t,e){const n=j.useRef();return j.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function wf(t){const e=Hf(t),n=j.useRef(null),r=j.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function bf(t){const e=j.useRef();return j.useEffect(()=>{e.current=t},[t]),e.current}let ig={};function Xu(t,e){return j.useMemo(()=>{if(e)return e;const n=ig[t]==null?0:ig[t]+1;return ig[t]=n,t+"-"+n},[t,e])}function gk(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,l)=>{const u=Object.entries(l);for(const[h,m]of u){const y=a[h];y!=null&&(a[h]=y+t*m)}return a},{...e})}}const Cl=gk(1),Cu=gk(-1);function hC(t){return"clientX"in t&&"clientY"in t}function Kf(t){if(!t)return!1;const{KeyboardEvent:e}=Qn(t.target);return e&&t instanceof e}function fC(t){if(!t)return!1;const{TouchEvent:e}=Qn(t.target);return e&&t instanceof e}function xf(t){if(fC(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return hC(t)?{x:t.clientX,y:t.clientY}:null}const js=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[js.Translate.toString(t),js.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Nw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function pC(t){return t.matches(Nw)?t:t.querySelector(Nw)}const mC={display:"none"};function gC(t){let{id:e,value:n}=t;return Le.createElement("div",{id:e,style:mC},n)}function yC(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Le.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function vC(){const[t,e]=j.useState("");return{announce:j.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const yk=j.createContext(null);function _C(t){const e=j.useContext(yk);j.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function wC(){const[t]=j.useState(()=>new Set),e=j.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[j.useCallback(r=>{let{type:s,event:a}=r;t.forEach(l=>{var u;return(u=l[s])==null?void 0:u.call(l,a)})},[t]),e]}const bC={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},xC={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function kC(t){let{announcements:e=xC,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=bC}=t;const{announce:a,announcement:l}=vC(),u=Xu("DndLiveRegion"),[h,m]=j.useState(!1);if(j.useEffect(()=>{m(!0)},[]),_C(j.useMemo(()=>({onDragStart(w){let{active:x}=w;a(e.onDragStart({active:x}))},onDragMove(w){let{active:x,over:E}=w;e.onDragMove&&a(e.onDragMove({active:x,over:E}))},onDragOver(w){let{active:x,over:E}=w;a(e.onDragOver({active:x,over:E}))},onDragEnd(w){let{active:x,over:E}=w;a(e.onDragEnd({active:x,over:E}))},onDragCancel(w){let{active:x,over:E}=w;a(e.onDragCancel({active:x,over:E}))}}),[a,e])),!h)return null;const y=Le.createElement(Le.Fragment,null,Le.createElement(gC,{id:r,value:s.draggable}),Le.createElement(yC,{id:u,announcement:l}));return n?ua.createPortal(y,n):y}var nn;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(nn||(nn={}));function kf(){}function bo(t,e){return j.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Gf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return j.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const cs=Object.freeze({x:0,y:0});function vk(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function EC(t,e){const n=xf(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function _k(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function TC(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Rw(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function wk(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Pw(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Qf=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Pw(e,e.left,e.top),a=[];for(const l of r){const{id:u}=l,h=n.get(u);if(h){const m=vk(Pw(h),s);a.push({id:u,data:{droppableContainer:l,value:m}})}}return a.sort(_k)},IC=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Rw(e),a=[];for(const l of r){const{id:u}=l,h=n.get(u);if(h){const m=Rw(h),y=s.reduce((x,E,C)=>x+vk(m[C],E),0),w=Number((y/4).toFixed(4));a.push({id:u,data:{droppableContainer:l,value:w}})}}return a.sort(_k)};function SC(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),l=s-r,u=a-n;if(r<s&&n<a){const h=e.width*e.height,m=t.width*t.height,y=l*u,w=y/(h+m-y);return Number(w.toFixed(4))}return 0}const CC=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const a of r){const{id:l}=a,u=n.get(l);if(u){const h=SC(u,e);h>0&&s.push({id:l,data:{droppableContainer:a,value:h}})}}return s.sort(TC)};function AC(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function bk(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:cs}function NC(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((l,u)=>({...l,top:l.top+t*u.y,bottom:l.bottom+t*u.y,left:l.left+t*u.x,right:l.right+t*u.x}),{...n})}}const RC=NC(1);function xk(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function PC(t,e,n){const r=xk(e);if(!r)return t;const{scaleX:s,scaleY:a,x:l,y:u}=r,h=t.left-l-(1-s)*parseFloat(n),m=t.top-u-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),y=s?t.width/s:t.width,w=a?t.height/a:t.height;return{width:y,height:w,top:m,right:h+y,bottom:m+w,left:h}}const DC={ignoreTransform:!1};function oc(t,e){e===void 0&&(e=DC);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:y}=Qn(t).getComputedStyle(t);m&&(n=PC(n,m,y))}const{top:r,left:s,width:a,height:l,bottom:u,right:h}=n;return{top:r,left:s,width:a,height:l,bottom:u,right:h}}function Dw(t){return oc(t,{ignoreTransform:!0})}function jC(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function OC(t,e){return e===void 0&&(e=Qn(t).getComputedStyle(t)),e.position==="fixed"}function LC(t,e){e===void 0&&(e=Qn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=e[s];return typeof a=="string"?n.test(a):!1})}function Zf(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(Oy(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Yu(s)||mk(s)||n.includes(s))return n;const a=Qn(t).getComputedStyle(s);return s!==t&&LC(s,a)&&n.push(s),OC(s,a)?n:r(s.parentNode)}return t?r(t):n}function kk(t){const[e]=Zf(t,1);return e??null}function og(t){return!qf||!t?null:sc(t)?t:jy(t)?Oy(t)||t===ic(t).scrollingElement?window:Yu(t)?t:null:null}function Ek(t){return sc(t)?t.scrollX:t.scrollLeft}function Tk(t){return sc(t)?t.scrollY:t.scrollTop}function Ug(t){return{x:Ek(t),y:Tk(t)}}var hn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(hn||(hn={}));function Ik(t){return!qf||!t?!1:t===document.scrollingElement}function Sk(t){const e={x:0,y:0},n=Ik(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,l=t.scrollTop>=r.y,u=t.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:l,isRight:u,maxScroll:r,minScroll:e}}const MC={x:.2,y:.2};function VC(t,e,n,r,s){let{top:a,left:l,right:u,bottom:h}=n;r===void 0&&(r=10),s===void 0&&(s=MC);const{isTop:m,isBottom:y,isLeft:w,isRight:x}=Sk(t),E={x:0,y:0},C={x:0,y:0},k={height:e.height*s.y,width:e.width*s.x};return!m&&a<=e.top+k.height?(E.y=hn.Backward,C.y=r*Math.abs((e.top+k.height-a)/k.height)):!y&&h>=e.bottom-k.height&&(E.y=hn.Forward,C.y=r*Math.abs((e.bottom-k.height-h)/k.height)),!x&&u>=e.right-k.width?(E.x=hn.Forward,C.x=r*Math.abs((e.right-k.width-u)/k.width)):!w&&l<=e.left+k.width&&(E.x=hn.Backward,C.x=r*Math.abs((e.left+k.width-l)/k.width)),{direction:E,speed:C}}function FC(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:l}=window;return{top:0,left:0,right:a,bottom:l,width:a,height:l}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Ck(t){return t.reduce((e,n)=>Cl(e,Ug(n)),cs)}function zC(t){return t.reduce((e,n)=>e+Ek(n),0)}function UC(t){return t.reduce((e,n)=>e+Tk(n),0)}function Ak(t,e){if(e===void 0&&(e=oc),!t)return;const{top:n,left:r,bottom:s,right:a}=e(t);kk(t)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const BC=[["x",["left","right"],zC],["y",["top","bottom"],UC]];class Ly{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Zf(n),s=Ck(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,l,u]of BC)for(const h of l)Object.defineProperty(this,h,{get:()=>{const m=u(r),y=s[a]-m;return this.rect[h]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class yu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function $C(t){const{EventTarget:e}=Qn(t);return t instanceof e?t:ic(t)}function ag(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Mr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Mr||(Mr={}));function jw(t){t.preventDefault()}function WC(t){t.stopPropagation()}var Xe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Xe||(Xe={}));const Nk={start:[Xe.Space,Xe.Enter],cancel:[Xe.Esc],end:[Xe.Space,Xe.Enter,Xe.Tab]},qC=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Xe.Right:return{...n,x:n.x+25};case Xe.Left:return{...n,x:n.x-25};case Xe.Down:return{...n,y:n.y+25};case Xe.Up:return{...n,y:n.y-25}}};class ed{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new yu(ic(n)),this.windowListeners=new yu(Qn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Mr.Resize,this.handleCancel),this.windowListeners.add(Mr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Mr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Ak(r),n(cs)}handleKeyDown(e){if(Kf(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=Nk,coordinateGetter:l=qC,scrollBehavior:u="smooth"}=s,{code:h}=e;if(a.end.includes(h)){this.handleEnd(e);return}if(a.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:m}=r.current,y=m?{x:m.left,y:m.top}:cs;this.referenceCoordinates||(this.referenceCoordinates=y);const w=l(e,{active:n,context:r.current,currentCoordinates:y});if(w){const x=Cu(w,y),E={x:0,y:0},{scrollableAncestors:C}=r.current;for(const k of C){const R=e.code,{isTop:q,isRight:B,isLeft:$,isBottom:H,maxScroll:F,minScroll:te}=Sk(k),S=FC(k),I={x:Math.min(R===Xe.Right?S.right-S.width/2:S.right,Math.max(R===Xe.Right?S.left:S.left+S.width/2,w.x)),y:Math.min(R===Xe.Down?S.bottom-S.height/2:S.bottom,Math.max(R===Xe.Down?S.top:S.top+S.height/2,w.y))},N=R===Xe.Right&&!B||R===Xe.Left&&!$,P=R===Xe.Down&&!H||R===Xe.Up&&!q;if(N&&I.x!==w.x){const O=k.scrollLeft+x.x,M=R===Xe.Right&&O<=F.x||R===Xe.Left&&O>=te.x;if(M&&!x.y){k.scrollTo({left:O,behavior:u});return}M?E.x=k.scrollLeft-O:E.x=R===Xe.Right?k.scrollLeft-F.x:k.scrollLeft-te.x,E.x&&k.scrollBy({left:-E.x,behavior:u});break}else if(P&&I.y!==w.y){const O=k.scrollTop+x.y,M=R===Xe.Down&&O<=F.y||R===Xe.Up&&O>=te.y;if(M&&!x.x){k.scrollTo({top:O,behavior:u});return}M?E.y=k.scrollTop-O:E.y=R===Xe.Down?k.scrollTop-F.y:k.scrollTop-te.y,E.y&&k.scrollBy({top:-E.y,behavior:u});break}}this.handleMove(e,Cl(Cu(w,this.referenceCoordinates),E))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ed.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Nk,onActivation:s}=e,{active:a}=n;const{code:l}=t.nativeEvent;if(r.start.includes(l)){const u=a.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Ow(t){return!!(t&&"distance"in t)}function Lw(t){return!!(t&&"delay"in t)}class My{constructor(e,n,r){var s;r===void 0&&(r=$C(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:a}=e,{target:l}=a;this.props=e,this.events=n,this.document=ic(l),this.documentListeners=new yu(this.document),this.listeners=new yu(r),this.windowListeners=new yu(Qn(l)),this.initialCoordinates=(s=xf(a))!=null?s:cs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Mr.Resize,this.handleCancel),this.windowListeners.add(Mr.DragStart,jw),this.windowListeners.add(Mr.VisibilityChange,this.handleCancel),this.windowListeners.add(Mr.ContextMenu,jw),this.documentListeners.add(Mr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Lw(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ow(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Mr.Click,WC,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Mr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:l,options:{activationConstraint:u}}=a;if(!s)return;const h=(n=xf(e))!=null?n:cs,m=Cu(s,h);if(!r&&u){if(Ow(u)){if(u.tolerance!=null&&ag(m,u.tolerance))return this.handleCancel();if(ag(m,u.distance))return this.handleStart()}if(Lw(u)&&ag(m,u.tolerance))return this.handleCancel();this.handlePending(u,m);return}e.cancelable&&e.preventDefault(),l(h)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Xe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const HC={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ac extends My{constructor(e){const{event:n}=e,r=ic(n.target);super(e,HC,r)}}ac.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const KC={move:{name:"mousemove"},end:{name:"mouseup"}};var Bg;(function(t){t[t.RightClick=2]="RightClick"})(Bg||(Bg={}));class GC extends My{constructor(e){super(e,KC,ic(e.event.target))}}GC.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Bg.RightClick?!1:(r==null||r({event:n}),!0)}}];const lg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Rk extends My{constructor(e){super(e,lg)}static setup(){return window.addEventListener(lg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(lg.move.name,e)};function e(){}}}Rk.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var vu;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(vu||(vu={}));var Ef;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ef||(Ef={}));function QC(t){let{acceleration:e,activator:n=vu.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:l=5,order:u=Ef.TreeOrder,pointerCoordinates:h,scrollableAncestors:m,scrollableAncestorRects:y,delta:w,threshold:x}=t;const E=YC({delta:w,disabled:!a}),[C,k]=dC(),R=j.useRef({x:0,y:0}),q=j.useRef({x:0,y:0}),B=j.useMemo(()=>{switch(n){case vu.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case vu.DraggableRect:return s}},[n,s,h]),$=j.useRef(null),H=j.useCallback(()=>{const te=$.current;if(!te)return;const S=R.current.x*q.current.x,I=R.current.y*q.current.y;te.scrollBy(S,I)},[]),F=j.useMemo(()=>u===Ef.TreeOrder?[...m].reverse():m,[u,m]);j.useEffect(()=>{if(!a||!m.length||!B){k();return}for(const te of F){if((r==null?void 0:r(te))===!1)continue;const S=m.indexOf(te),I=y[S];if(!I)continue;const{direction:N,speed:P}=VC(te,I,B,e,x);for(const O of["x","y"])E[O][N[O]]||(P[O]=0,N[O]=0);if(P.x>0||P.y>0){k(),$.current=te,C(H,l),R.current=P,q.current=N;return}}R.current={x:0,y:0},q.current={x:0,y:0},k()},[e,H,r,k,a,l,JSON.stringify(B),JSON.stringify(E),C,m,F,y,JSON.stringify(x)])}const ZC={x:{[hn.Backward]:!1,[hn.Forward]:!1},y:{[hn.Backward]:!1,[hn.Forward]:!1}};function YC(t){let{delta:e,disabled:n}=t;const r=bf(e);return Ju(s=>{if(n||!r||!s)return ZC;const a={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[hn.Backward]:s.x[hn.Backward]||a.x===-1,[hn.Forward]:s.x[hn.Forward]||a.x===1},y:{[hn.Backward]:s.y[hn.Backward]||a.y===-1,[hn.Forward]:s.y[hn.Forward]||a.y===1}}},[n,e,r])}function JC(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Ju(s=>{var a;return e==null?null:(a=r??s)!=null?a:null},[r,e])}function XC(t,e){return j.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,r)}));return[...n,...a]},[]),[t,e])}var Au;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Au||(Au={}));var $g;(function(t){t.Optimized="optimized"})($g||($g={}));const Mw=new Map;function eA(t,e){let{dragging:n,dependencies:r,config:s}=e;const[a,l]=j.useState(null),{frequency:u,measure:h,strategy:m}=s,y=j.useRef(t),w=R(),x=Su(w),E=j.useCallback(function(q){q===void 0&&(q=[]),!x.current&&l(B=>B===null?q:B.concat(q.filter($=>!B.includes($))))},[x]),C=j.useRef(null),k=Ju(q=>{if(w&&!n)return Mw;if(!q||q===Mw||y.current!==t||a!=null){const B=new Map;for(let $ of t){if(!$)continue;if(a&&a.length>0&&!a.includes($.id)&&$.rect.current){B.set($.id,$.rect.current);continue}const H=$.node.current,F=H?new Ly(h(H),H):null;$.rect.current=F,F&&B.set($.id,F)}return B}return q},[t,a,n,w,h]);return j.useEffect(()=>{y.current=t},[t]),j.useEffect(()=>{w||E()},[n,w]),j.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),j.useEffect(()=>{w||typeof u!="number"||C.current!==null||(C.current=setTimeout(()=>{E(),C.current=null},u))},[u,w,E,...r]),{droppableRects:k,measureDroppableContainers:E,measuringScheduled:a!=null};function R(){switch(m){case Au.Always:return!1;case Au.BeforeDragging:return n;default:return!n}}}function Vy(t,e){return Ju(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function tA(t,e){return Vy(t,e)}function nA(t){let{callback:e,disabled:n}=t;const r=Hf(e),s=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return j.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Yf(t){let{callback:e,disabled:n}=t;const r=Hf(e),s=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return j.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function rA(t){return new Ly(oc(t),t)}function Vw(t,e,n){e===void 0&&(e=rA);const[r,s]=j.useState(null);function a(){s(h=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=h??n)!=null?m:null}const y=e(t);return JSON.stringify(h)===JSON.stringify(y)?h:y})}const l=nA({callback(h){if(t)for(const m of h){const{type:y,target:w}=m;if(y==="childList"&&w instanceof HTMLElement&&w.contains(t)){a();break}}}}),u=Yf({callback:a});return ls(()=>{a(),t?(u==null||u.observe(t),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[t]),r}function sA(t){const e=Vy(t);return bk(t,e)}const Fw=[];function iA(t){const e=j.useRef(t),n=Ju(r=>t?r&&r!==Fw&&t&&e.current&&t.parentNode===e.current.parentNode?r:Zf(t):Fw,[t]);return j.useEffect(()=>{e.current=t},[t]),n}function oA(t){const[e,n]=j.useState(null),r=j.useRef(t),s=j.useCallback(a=>{const l=og(a.target);l&&n(u=>u?(u.set(l,Ug(l)),new Map(u)):null)},[]);return j.useEffect(()=>{const a=r.current;if(t!==a){l(a);const u=t.map(h=>{const m=og(h);return m?(m.addEventListener("scroll",s,{passive:!0}),[m,Ug(m)]):null}).filter(h=>h!=null);n(u.length?new Map(u):null),r.current=t}return()=>{l(t),l(a)};function l(u){u.forEach(h=>{const m=og(h);m==null||m.removeEventListener("scroll",s)})}},[s,t]),j.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,l)=>Cl(a,l),cs):Ck(t):cs,[t,e])}function zw(t,e){e===void 0&&(e=[]);const n=j.useRef(null);return j.useEffect(()=>{n.current=null},e),j.useEffect(()=>{const r=t!==cs;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Cu(t,n.current):cs}function aA(t){j.useEffect(()=>{if(!qf)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function lA(t,e){return j.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=l=>{a(l,e)},n},{}),[t,e])}function Pk(t){return j.useMemo(()=>t?jC(t):null,[t])}const Uw=[];function cA(t,e){e===void 0&&(e=oc);const[n]=t,r=Pk(n?Qn(n):null),[s,a]=j.useState(Uw);function l(){a(()=>t.length?t.map(h=>Ik(h)?r:new Ly(e(h),h)):Uw)}const u=Yf({callback:l});return ls(()=>{u==null||u.disconnect(),l(),t.forEach(h=>u==null?void 0:u.observe(h))},[t]),s}function Dk(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Yu(e)?e:t}function uA(t){let{measure:e}=t;const[n,r]=j.useState(null),s=j.useCallback(m=>{for(const{target:y}of m)if(Yu(y)){r(w=>{const x=e(y);return w?{...w,width:x.width,height:x.height}:x});break}},[e]),a=Yf({callback:s}),l=j.useCallback(m=>{const y=Dk(m);a==null||a.disconnect(),y&&(a==null||a.observe(y)),r(y?e(y):null)},[e,a]),[u,h]=wf(l);return j.useMemo(()=>({nodeRef:u,rect:n,setRef:h}),[n,u,h])}const dA=[{sensor:ac,options:{}},{sensor:ed,options:{}}],hA={current:{}},sf={draggable:{measure:Dw},droppable:{measure:Dw,strategy:Au.WhileDragging,frequency:$g.Optimized},dragOverlay:{measure:oc}};class _u extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const fA={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new _u,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:kf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:sf,measureDroppableContainers:kf,windowRect:null,measuringScheduled:!1},jk={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:kf,draggableNodes:new Map,over:null,measureDroppableContainers:kf},td=j.createContext(jk),Ok=j.createContext(fA);function pA(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new _u}}}function mA(t,e){switch(e.type){case nn.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case nn.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case nn.DragEnd:case nn.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case nn.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new _u(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case nn.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const l=new _u(t.droppable.containers);return l.set(n,{...a,disabled:s}),{...t,droppable:{...t.droppable,containers:l}}}case nn.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const a=new _u(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function gA(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=j.useContext(td),a=bf(r),l=bf(n==null?void 0:n.id);return j.useEffect(()=>{if(!e&&!r&&a&&l!=null){if(!Kf(a)||document.activeElement===a.target)return;const u=s.get(l);if(!u)return;const{activatorNode:h,node:m}=u;if(!h.current&&!m.current)return;requestAnimationFrame(()=>{for(const y of[h.current,m.current]){if(!y)continue;const w=pC(y);if(w){w.focus();break}}})}},[r,e,s,l,a]),null}function Lk(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,a)=>a({transform:s,...r}),n):n}function yA(t){return j.useMemo(()=>({draggable:{...sf.draggable,...t==null?void 0:t.draggable},droppable:{...sf.droppable,...t==null?void 0:t.droppable},dragOverlay:{...sf.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function vA(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const a=j.useRef(!1),{x:l,y:u}=typeof s=="boolean"?{x:s,y:s}:s;ls(()=>{if(!l&&!u||!e){a.current=!1;return}if(a.current||!r)return;const m=e==null?void 0:e.node.current;if(!m||m.isConnected===!1)return;const y=n(m),w=bk(y,r);if(l||(w.x=0),u||(w.y=0),a.current=!0,Math.abs(w.x)>0||Math.abs(w.y)>0){const x=kk(m);x&&x.scrollBy({top:w.y,left:w.x})}},[e,l,u,r,n])}const Jf=j.createContext({...cs,scaleX:1,scaleY:1});var Xi;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Xi||(Xi={}));const Xf=j.memo(function(e){var n,r,s,a;let{id:l,accessibility:u,autoScroll:h=!0,children:m,sensors:y=dA,collisionDetection:w=CC,measuring:x,modifiers:E,...C}=e;const k=j.useReducer(mA,void 0,pA),[R,q]=k,[B,$]=wC(),[H,F]=j.useState(Xi.Uninitialized),te=H===Xi.Initialized,{draggable:{active:S,nodes:I,translate:N},droppable:{containers:P}}=R,O=S!=null?I.get(S):null,M=j.useRef({initial:null,translated:null}),D=j.useMemo(()=>{var ft;return S!=null?{id:S,data:(ft=O==null?void 0:O.data)!=null?ft:hA,rect:M}:null},[S,O]),Be=j.useRef(null),[tt,nt]=j.useState(null),[Ae,Y]=j.useState(null),pe=Su(C,Object.values(C)),de=Xu("DndDescribedBy",l),W=j.useMemo(()=>P.getEnabled(),[P]),X=yA(x),{droppableRects:ce,measureDroppableContainers:ee,measuringScheduled:he}=eA(W,{dragging:te,dependencies:[N.x,N.y],config:X.droppable}),ve=JC(I,S),Ee=j.useMemo(()=>Ae?xf(Ae):null,[Ae]),Fe=Yn(),We=tA(ve,X.draggable.measure);vA({activeNode:S!=null?I.get(S):null,config:Fe.layoutShiftCompensation,initialRect:We,measure:X.draggable.measure});const Ne=Vw(ve,X.draggable.measure,We),Zt=Vw(ve?ve.parentElement:null),jt=j.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:ce,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Vn=P.getNodeFor((n=jt.current.over)==null?void 0:n.id),mn=uA({measure:X.dragOverlay.measure}),hr=(r=mn.nodeRef.current)!=null?r:ve,kr=te?(s=mn.rect)!=null?s:Ne:null,bi=!!(mn.nodeRef.current&&mn.rect),Do=sA(bi?null:Ne),fs=Pk(hr?Qn(hr):null),sn=iA(te?Vn??ve:null),Zn=cA(sn),ps=Lk(E,{transform:{x:N.x-Do.x,y:N.y-Do.y,scaleX:1,scaleY:1},activatorEvent:Ae,active:D,activeNodeRect:Ne,containerNodeRect:Zt,draggingNodeRect:kr,over:jt.current.over,overlayNodeRect:mn.rect,scrollableAncestors:sn,scrollableAncestorRects:Zn,windowRect:fs}),zs=Ee?Cl(Ee,N):null,Us=oA(sn),jo=zw(Us),Ft=zw(Us,[Ne]),mt=Cl(ps,jo),Sn=kr?RC(kr,ps):null,$r=D&&Sn?w({active:D,collisionRect:Sn,droppableRects:ce,droppableContainers:W,pointerCoordinates:zs}):null,Wr=wk($r,"id"),[Cn,ms]=j.useState(null),Oo=bi?ps:Cl(ps,Ft),Lo=AC(Oo,(a=Cn==null?void 0:Cn.rect)!=null?a:null,Ne),Bs=j.useRef(null),xi=j.useCallback((ft,Bt)=>{let{sensor:kt,options:Jn}=Bt;if(Be.current==null)return;const $t=I.get(Be.current);if(!$t)return;const Yt=ft.nativeEvent,Wt=new kt({active:Be.current,activeNode:$t,event:Yt,options:Jn,context:jt,onAbort(qe){if(!I.get(qe))return;const{onDragAbort:Ot}=pe.current,gn={id:qe};Ot==null||Ot(gn),B({type:"onDragAbort",event:gn})},onPending(qe,Fn,Ot,gn){if(!I.get(qe))return;const{onDragPending:Tr}=pe.current,qt={id:qe,constraint:Fn,initialCoordinates:Ot,offset:gn};Tr==null||Tr(qt),B({type:"onDragPending",event:qt})},onStart(qe){const Fn=Be.current;if(Fn==null)return;const Ot=I.get(Fn);if(!Ot)return;const{onDragStart:gn}=pe.current,fr={activatorEvent:Yt,active:{id:Fn,data:Ot.data,rect:M}};ua.unstable_batchedUpdates(()=>{gn==null||gn(fr),F(Xi.Initializing),q({type:nn.DragStart,initialCoordinates:qe,active:Fn}),B({type:"onDragStart",event:fr}),nt(Bs.current),Y(Yt)})},onMove(qe){q({type:nn.DragMove,coordinates:qe})},onEnd:Er(nn.DragEnd),onCancel:Er(nn.DragCancel)});Bs.current=Wt;function Er(qe){return async function(){const{active:Ot,collisions:gn,over:fr,scrollAdjustedTranslate:Tr}=jt.current;let qt=null;if(Ot&&Tr){const{cancelDrop:qr}=pe.current;qt={activatorEvent:Yt,active:Ot,collisions:gn,delta:Tr,over:fr},qe===nn.DragEnd&&typeof qr=="function"&&await Promise.resolve(qr(qt))&&(qe=nn.DragCancel)}Be.current=null,ua.unstable_batchedUpdates(()=>{q({type:qe}),F(Xi.Uninitialized),ms(null),nt(null),Y(null),Bs.current=null;const qr=qe===nn.DragEnd?"onDragEnd":"onDragCancel";if(qt){const Vo=pe.current[qr];Vo==null||Vo(qt),B({type:qr,event:qt})}})}}},[I]),Mo=j.useCallback((ft,Bt)=>(kt,Jn)=>{const $t=kt.nativeEvent,Yt=I.get(Jn);if(Be.current!==null||!Yt||$t.dndKit||$t.defaultPrevented)return;const Wt={active:Yt};ft(kt,Bt.options,Wt)===!0&&($t.dndKit={capturedBy:Bt.sensor},Be.current=Jn,xi(kt,Bt))},[I,xi]),gs=XC(y,Mo);aA(y),ls(()=>{Ne&&H===Xi.Initializing&&F(Xi.Initialized)},[Ne,H]),j.useEffect(()=>{const{onDragMove:ft}=pe.current,{active:Bt,activatorEvent:kt,collisions:Jn,over:$t}=jt.current;if(!Bt||!kt)return;const Yt={active:Bt,activatorEvent:kt,collisions:Jn,delta:{x:mt.x,y:mt.y},over:$t};ua.unstable_batchedUpdates(()=>{ft==null||ft(Yt),B({type:"onDragMove",event:Yt})})},[mt.x,mt.y]),j.useEffect(()=>{const{active:ft,activatorEvent:Bt,collisions:kt,droppableContainers:Jn,scrollAdjustedTranslate:$t}=jt.current;if(!ft||Be.current==null||!Bt||!$t)return;const{onDragOver:Yt}=pe.current,Wt=Jn.get(Wr),Er=Wt&&Wt.rect.current?{id:Wt.id,rect:Wt.rect.current,data:Wt.data,disabled:Wt.disabled}:null,qe={active:ft,activatorEvent:Bt,collisions:kt,delta:{x:$t.x,y:$t.y},over:Er};ua.unstable_batchedUpdates(()=>{ms(Er),Yt==null||Yt(qe),B({type:"onDragOver",event:qe})})},[Wr]),ls(()=>{jt.current={activatorEvent:Ae,active:D,activeNode:ve,collisionRect:Sn,collisions:$r,droppableRects:ce,draggableNodes:I,draggingNode:hr,draggingNodeRect:kr,droppableContainers:P,over:Cn,scrollableAncestors:sn,scrollAdjustedTranslate:mt},M.current={initial:kr,translated:Sn}},[D,ve,$r,Sn,I,hr,kr,ce,P,Cn,sn,mt]),QC({...Fe,delta:N,draggingRect:Sn,pointerCoordinates:zs,scrollableAncestors:sn,scrollableAncestorRects:Zn});const ki=j.useMemo(()=>({active:D,activeNode:ve,activeNodeRect:Ne,activatorEvent:Ae,collisions:$r,containerNodeRect:Zt,dragOverlay:mn,draggableNodes:I,droppableContainers:P,droppableRects:ce,over:Cn,measureDroppableContainers:ee,scrollableAncestors:sn,scrollableAncestorRects:Zn,measuringConfiguration:X,measuringScheduled:he,windowRect:fs}),[D,ve,Ne,Ae,$r,Zt,mn,I,P,ce,Cn,ee,sn,Zn,X,he,fs]),Ei=j.useMemo(()=>({activatorEvent:Ae,activators:gs,active:D,activeNodeRect:Ne,ariaDescribedById:{draggable:de},dispatch:q,draggableNodes:I,over:Cn,measureDroppableContainers:ee}),[Ae,gs,D,Ne,q,de,I,Cn,ee]);return Le.createElement(yk.Provider,{value:$},Le.createElement(td.Provider,{value:Ei},Le.createElement(Ok.Provider,{value:ki},Le.createElement(Jf.Provider,{value:Lo},m)),Le.createElement(gA,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Le.createElement(kC,{...u,hiddenTextDescribedById:de}));function Yn(){const ft=(tt==null?void 0:tt.autoScrollEnabled)===!1,Bt=typeof h=="object"?h.enabled===!1:h===!1,kt=te&&!ft&&!Bt;return typeof h=="object"?{...h,enabled:kt}:{enabled:kt}}}),_A=j.createContext(null),Bw="button",wA="Draggable";function bA(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const a=Xu(wA),{activators:l,activatorEvent:u,active:h,activeNodeRect:m,ariaDescribedById:y,draggableNodes:w,over:x}=j.useContext(td),{role:E=Bw,roleDescription:C="draggable",tabIndex:k=0}=s??{},R=(h==null?void 0:h.id)===e,q=j.useContext(R?Jf:_A),[B,$]=wf(),[H,F]=wf(),te=lA(l,e),S=Su(n);ls(()=>(w.set(e,{id:e,key:a,node:B,activatorNode:H,data:S}),()=>{const N=w.get(e);N&&N.key===a&&w.delete(e)}),[w,e]);const I=j.useMemo(()=>({role:E,tabIndex:k,"aria-disabled":r,"aria-pressed":R&&E===Bw?!0:void 0,"aria-roledescription":C,"aria-describedby":y.draggable}),[r,E,k,R,C,y.draggable]);return{active:h,activatorEvent:u,activeNodeRect:m,attributes:I,isDragging:R,listeners:r?void 0:te,node:B,over:x,setNodeRef:$,setActivatorNodeRef:F,transform:q}}function Mk(){return j.useContext(Ok)}const xA="Droppable",kA={timeout:25};function lc(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const a=Xu(xA),{active:l,dispatch:u,over:h,measureDroppableContainers:m}=j.useContext(td),y=j.useRef({disabled:n}),w=j.useRef(!1),x=j.useRef(null),E=j.useRef(null),{disabled:C,updateMeasurementsFor:k,timeout:R}={...kA,...s},q=Su(k??r),B=j.useCallback(()=>{if(!w.current){w.current=!0;return}E.current!=null&&clearTimeout(E.current),E.current=setTimeout(()=>{m(Array.isArray(q.current)?q.current:[q.current]),E.current=null},R)},[R]),$=Yf({callback:B,disabled:C||!l}),H=j.useCallback((I,N)=>{$&&(N&&($.unobserve(N),w.current=!1),I&&$.observe(I))},[$]),[F,te]=wf(H),S=Su(e);return j.useEffect(()=>{!$||!F.current||($.disconnect(),w.current=!1,$.observe(F.current))},[F,$]),j.useEffect(()=>(u({type:nn.RegisterDroppable,element:{id:r,key:a,disabled:n,node:F,rect:x,data:S}}),()=>u({type:nn.UnregisterDroppable,key:a,id:r})),[r]),j.useEffect(()=>{n!==y.current.disabled&&(u({type:nn.SetDroppableDisabled,id:r,key:a,disabled:n}),y.current.disabled=n)},[r,a,n,u]),{active:l,rect:x,isOver:(h==null?void 0:h.id)===r,node:F,over:h,setNodeRef:te}}function EA(t){let{animation:e,children:n}=t;const[r,s]=j.useState(null),[a,l]=j.useState(null),u=bf(n);return!n&&!r&&u&&s(u),ls(()=>{if(!a)return;const h=r==null?void 0:r.key,m=r==null?void 0:r.props.id;if(h==null||m==null){s(null);return}Promise.resolve(e(m,a)).then(()=>{s(null)})},[e,r,a]),Le.createElement(Le.Fragment,null,n,r?j.cloneElement(r,{ref:l}):null)}const TA={x:0,y:0,scaleX:1,scaleY:1};function IA(t){let{children:e}=t;return Le.createElement(td.Provider,{value:jk},Le.createElement(Jf.Provider,{value:TA},e))}const SA={position:"fixed",touchAction:"none"},CA=t=>Kf(t)?"transform 250ms ease":void 0,AA=j.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:a,className:l,rect:u,style:h,transform:m,transition:y=CA}=t;if(!u)return null;const w=s?m:{...m,scaleX:1,scaleY:1},x={...SA,width:u.width,height:u.height,top:u.top,left:u.left,transform:js.Transform.toString(w),transformOrigin:s&&r?EC(r,u):void 0,transition:typeof y=="function"?y(r):y,...h};return Le.createElement(n,{className:l,style:x,ref:e},a)}),NA=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:a,className:l}=t;if(a!=null&&a.active)for(const[u,h]of Object.entries(a.active))h!==void 0&&(s[u]=n.node.style.getPropertyValue(u),n.node.style.setProperty(u,h));if(a!=null&&a.dragOverlay)for(const[u,h]of Object.entries(a.dragOverlay))h!==void 0&&r.node.style.setProperty(u,h);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[h,m]of Object.entries(s))n.node.style.setProperty(h,m);l!=null&&l.active&&n.node.classList.remove(l.active)}},RA=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:js.Transform.toString(e)},{transform:js.Transform.toString(n)}]},PA={duration:250,easing:"ease",keyframes:RA,sideEffects:NA({styles:{active:{opacity:"0"}}})};function DA(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return Hf((a,l)=>{if(e===null)return;const u=n.get(a);if(!u)return;const h=u.node.current;if(!h)return;const m=Dk(l);if(!m)return;const{transform:y}=Qn(l).getComputedStyle(l),w=xk(y);if(!w)return;const x=typeof e=="function"?e:jA(e);return Ak(h,s.draggable.measure),x({active:{id:a,data:u.data,node:h,rect:s.draggable.measure(h)},draggableNodes:n,dragOverlay:{node:l,rect:s.dragOverlay.measure(m)},droppableContainers:r,measuringConfiguration:s,transform:w})})}function jA(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...PA,...t};return a=>{let{active:l,dragOverlay:u,transform:h,...m}=a;if(!e)return;const y={x:u.rect.left-l.rect.left,y:u.rect.top-l.rect.top},w={scaleX:h.scaleX!==1?l.rect.width*h.scaleX/u.rect.width:1,scaleY:h.scaleY!==1?l.rect.height*h.scaleY/u.rect.height:1},x={x:h.x-y.x,y:h.y-y.y,...w},E=s({...m,active:l,dragOverlay:u,transform:{initial:h,final:x}}),[C]=E,k=E[E.length-1];if(JSON.stringify(C)===JSON.stringify(k))return;const R=r==null?void 0:r({active:l,dragOverlay:u,...m}),q=u.node.animate(E,{duration:e,easing:n,fill:"forwards"});return new Promise(B=>{q.onfinish=()=>{R==null||R(),B()}})}}let $w=0;function OA(t){return j.useMemo(()=>{if(t!=null)return $w++,$w},[t])}const LA=Le.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:a,modifiers:l,wrapperElement:u="div",className:h,zIndex:m=999}=t;const{activatorEvent:y,active:w,activeNodeRect:x,containerNodeRect:E,draggableNodes:C,droppableContainers:k,dragOverlay:R,over:q,measuringConfiguration:B,scrollableAncestors:$,scrollableAncestorRects:H,windowRect:F}=Mk(),te=j.useContext(Jf),S=OA(w==null?void 0:w.id),I=Lk(l,{activatorEvent:y,active:w,activeNodeRect:x,containerNodeRect:E,draggingNodeRect:R.rect,over:q,overlayNodeRect:R.rect,scrollableAncestors:$,scrollableAncestorRects:H,transform:te,windowRect:F}),N=Vy(x),P=DA({config:r,draggableNodes:C,droppableContainers:k,measuringConfiguration:B}),O=N?R.setRef:void 0;return Le.createElement(IA,null,Le.createElement(EA,{animation:P},w&&S?Le.createElement(AA,{key:S,id:w.id,ref:O,as:u,activatorEvent:y,adjustScale:e,className:h,transition:a,rect:N,style:{zIndex:m,...s},transform:I},n):null))});var Ww={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},MA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],u=t[n++],h=((s&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},Fk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,u=l?t[s+1]:0,h=s+2<t.length,m=h?t[s+2]:0,y=a>>2,w=(a&3)<<4|u>>4;let x=(u&15)<<2|m>>6,E=m&63;h||(E=64,l||(x=64)),r.push(n[y],n[w],n[x],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Vk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||m==null||w==null)throw new VA;const x=a<<2|u>>4;if(r.push(x),m!==64){const E=u<<4&240|m>>2;if(r.push(E),w!==64){const C=m<<6&192|w;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FA=function(t){const e=Vk(t);return Fk.encodeByteArray(e,!0)},Tf=function(t){return FA(t).replace(/\./g,"")},zk=function(t){try{return Fk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=()=>zA().__FIREBASE_DEFAULTS__,BA=()=>{if(typeof process>"u"||typeof Ww>"u")return;const t=Ww.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$A=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zk(t[1]);return e&&JSON.parse(e)},ep=()=>{try{return UA()||BA()||$A()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Uk=t=>{var e,n;return(n=(e=ep())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},WA=t=>{const e=Uk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bk=()=>{var t;return(t=ep())===null||t===void 0?void 0:t.config},$k=t=>{var e;return(e=ep())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Tf(JSON.stringify(n)),Tf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function GA(){var t;const e=(t=ep())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JA(){const t=Ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XA(){return!GA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function e2(){try{return typeof indexedDB=="object"}catch{return!1}}function t2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="FirebaseError";class yi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=n2,Object.setPrototypeOf(this,yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nd.prototype.create)}}class nd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?r2(a,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new yi(s,u,r)}}function r2(t,e){return t.replace(s2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const s2=/\{\$([^}]+)}/g;function i2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function If(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],l=e[s];if(qw(a)&&qw(l)){if(!If(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function cu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function o2(t,e){const n=new a2(t,e);return n.subscribe.bind(n)}class a2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");l2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=cg),s.error===void 0&&(s.error=cg),s.complete===void 0&&(s.complete=cg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class Ea{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d2(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:u2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function u2(t){return t===aa?void 0:t}function d2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(et||(et={}));const f2={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},p2=et.INFO,m2={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},g2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=m2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fy{constructor(e){this.name=e,this._logLevel=p2,this._logHandler=g2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const y2=(t,e)=>e.some(n=>t instanceof n);let Hw,Kw;function v2(){return Hw||(Hw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _2(){return Kw||(Kw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wk=new WeakMap,Wg=new WeakMap,qk=new WeakMap,ug=new WeakMap,zy=new WeakMap;function w2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(go(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Wk.set(n,t)}).catch(()=>{}),zy.set(e,t),e}function b2(t){if(Wg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Wg.set(t,e)}let qg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return go(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function x2(t){qg=t(qg)}function k2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dg(this),e,...n);return qk.set(r,e.sort?e.sort():[e]),go(r)}:_2().includes(t)?function(...e){return t.apply(dg(this),e),go(Wk.get(this))}:function(...e){return go(t.apply(dg(this),e))}}function E2(t){return typeof t=="function"?k2(t):(t instanceof IDBTransaction&&b2(t),y2(t,v2())?new Proxy(t,qg):t)}function go(t){if(t instanceof IDBRequest)return w2(t);if(ug.has(t))return ug.get(t);const e=E2(t);return e!==t&&(ug.set(t,e),zy.set(e,t)),e}const dg=t=>zy.get(t);function T2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),u=go(l);return r&&l.addEventListener("upgradeneeded",h=>{r(go(l.result),h.oldVersion,h.newVersion,go(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const I2=["get","getKey","getAll","getAllKeys","count"],S2=["put","add","delete","clear"],hg=new Map;function Gw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hg.get(e))return hg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=S2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||I2.includes(n)))return;const a=async function(l,...u){const h=this.transaction(l,s?"readwrite":"readonly");let m=h.store;return r&&(m=m.index(u.shift())),(await Promise.all([m[n](...u),s&&h.done]))[0]};return hg.set(e,a),a}x2(t=>({...t,get:(e,n,r)=>Gw(e,n)||t.get(e,n,r),has:(e,n)=>!!Gw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function A2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hg="@firebase/app",Qw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new Fy("@firebase/app"),N2="@firebase/app-compat",R2="@firebase/analytics-compat",P2="@firebase/analytics",D2="@firebase/app-check-compat",j2="@firebase/app-check",O2="@firebase/auth",L2="@firebase/auth-compat",M2="@firebase/database",V2="@firebase/data-connect",F2="@firebase/database-compat",z2="@firebase/functions",U2="@firebase/functions-compat",B2="@firebase/installations",$2="@firebase/installations-compat",W2="@firebase/messaging",q2="@firebase/messaging-compat",H2="@firebase/performance",K2="@firebase/performance-compat",G2="@firebase/remote-config",Q2="@firebase/remote-config-compat",Z2="@firebase/storage",Y2="@firebase/storage-compat",J2="@firebase/firestore",X2="@firebase/vertexai-preview",eN="@firebase/firestore-compat",tN="firebase",nN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="[DEFAULT]",rN={[Hg]:"fire-core",[N2]:"fire-core-compat",[P2]:"fire-analytics",[R2]:"fire-analytics-compat",[j2]:"fire-app-check",[D2]:"fire-app-check-compat",[O2]:"fire-auth",[L2]:"fire-auth-compat",[M2]:"fire-rtdb",[V2]:"fire-data-connect",[F2]:"fire-rtdb-compat",[z2]:"fire-fn",[U2]:"fire-fn-compat",[B2]:"fire-iid",[$2]:"fire-iid-compat",[W2]:"fire-fcm",[q2]:"fire-fcm-compat",[H2]:"fire-perf",[K2]:"fire-perf-compat",[G2]:"fire-rc",[Q2]:"fire-rc-compat",[Z2]:"fire-gcs",[Y2]:"fire-gcs-compat",[J2]:"fire-fst",[eN]:"fire-fst-compat",[X2]:"fire-vertex","fire-js":"fire-js",[tN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=new Map,sN=new Map,Gg=new Map;function Zw(t,e){try{t.container.addComponent(e)}catch(n){di.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Kl(t){const e=t.name;if(Gg.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;Gg.set(e,t);for(const n of Nu.values())Zw(n,t);for(const n of sN.values())Zw(n,t);return!0}function Uy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function as(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yo=new nd("app","Firebase",iN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=nN;function Hk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Kg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw yo.create("bad-app-name",{appName:String(s)});if(n||(n=Bk()),!n)throw yo.create("no-options");const a=Nu.get(s);if(a){if(If(n,a.options)&&If(r,a.config))return a;throw yo.create("duplicate-app",{appName:s})}const l=new h2(s);for(const h of Gg.values())l.addComponent(h);const u=new oN(n,r,l);return Nu.set(s,u),u}function Kk(t=Kg){const e=Nu.get(t);if(!e&&t===Kg&&Bk())return Hk();if(!e)throw yo.create("no-app",{appName:t});return e}function Yw(){return Array.from(Nu.values())}function vo(t,e,n){var r;let s=(r=rN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(u.join(" "));return}Kl(new Ea(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="firebase-heartbeat-database",lN=1,Ru="firebase-heartbeat-store";let fg=null;function Gk(){return fg||(fg=T2(aN,lN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ru)}catch(n){console.warn(n)}}}}).catch(t=>{throw yo.create("idb-open",{originalErrorMessage:t.message})})),fg}async function cN(t){try{const n=(await Gk()).transaction(Ru),r=await n.objectStore(Ru).get(Qk(t));return await n.done,r}catch(e){if(e instanceof yi)di.warn(e.message);else{const n=yo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});di.warn(n.message)}}}async function Jw(t,e){try{const r=(await Gk()).transaction(Ru,"readwrite");await r.objectStore(Ru).put(e,Qk(t)),await r.done}catch(n){if(n instanceof yi)di.warn(n.message);else{const r=yo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});di.warn(r.message)}}}function Qk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=1024,dN=720*60*60*1e3;class hN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Xw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const u=new Date(l.date).valueOf();return Date.now()-u<=dN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xw(),{heartbeatsToSend:r,unsentEntries:s}=fN(this._heartbeatsCache.heartbeats),a=Tf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return di.warn(n),""}}}function Xw(){return new Date().toISOString().substring(0,10)}function fN(t,e=uN){const n=[];let r=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),eb(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),eb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return e2()?t2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eb(t){return Tf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){Kl(new Ea("platform-logger",e=>new C2(e),"PRIVATE")),Kl(new Ea("heartbeat",e=>new hN(e),"PRIVATE")),vo(Hg,Qw,t),vo(Hg,Qw,"esm2017"),vo("fire-js","")}mN("");var gN="firebase",yN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vo(gN,yN,"app");function By(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Zk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vN=Zk,Yk=new nd("auth","Firebase",Zk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new Fy("@firebase/auth");function _N(t,...e){Sf.logLevel<=et.WARN&&Sf.warn(`Auth (${cc}): ${t}`,...e)}function of(t,...e){Sf.logLevel<=et.ERROR&&Sf.error(`Auth (${cc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(t,...e){throw $y(t,...e)}function As(t,...e){return $y(t,...e)}function Jk(t,e,n){const r=Object.assign(Object.assign({},vN()),{[e]:n});return new nd("auth","Firebase",r).create(e,{appName:t.name})}function Ns(t){return Jk(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $y(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Yk.create(t,...e)}function je(t,e,...n){if(!t)throw $y(e,...n)}function ai(t){const e="INTERNAL ASSERTION FAILED: "+t;throw of(e),new Error(e)}function hi(t,e){t||ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function wN(){return tb()==="http:"||tb()==="https:"}function tb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wN()||ZA()||"connection"in navigator)?navigator.onLine:!0}function xN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n){this.shortDelay=e,this.longDelay=n,hi(n>e,"Short delay should be less than long delay!"),this.isMobile=KA()||YA()}get(){return bN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(t,e){hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new sd(3e4,6e4);function vi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _i(t,e,n,r,s={}){return eE(t,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const u=rd(Object.assign({key:t.config.apiKey},l)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:h},a);return QA()||(m.referrerPolicy="no-referrer"),Xk.fetch()(tE(t,t.config.apiHost,n,u),m)})}async function eE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},kN),e);try{const s=new IN(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Fh(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[h,m]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fh(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Fh(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw Fh(t,"user-disabled",l);const y=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Jk(t,y,m);us(t,y)}}catch(s){if(s instanceof yi)throw s;us(t,"network-request-failed",{message:String(s)})}}async function uc(t,e,n,r,s={}){const a=await _i(t,e,n,r,s);return"mfaPendingCredential"in a&&us(t,"multi-factor-auth-required",{_serverResponse:a}),a}function tE(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Wy(t.config,s):`${t.config.apiScheme}://${s}`}function TN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(As(this.auth,"network-request-failed")),EN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=As(t,e,r);return s.customData._tokenResponse=n,s}function nb(t){return t!==void 0&&t.enterprise!==void 0}class SN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function CN(t,e){return _i(t,"GET","/v2/recaptchaConfig",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e){return _i(t,"POST","/v1/accounts:delete",e)}async function nE(t,e){return _i(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NN(t,e=!1){const n=Nt(t),r=await n.getIdToken(e),s=qy(r);je(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:wu(pg(s.auth_time)),issuedAtTime:wu(pg(s.iat)),expirationTime:wu(pg(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function pg(t){return Number(t)*1e3}function qy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return of("JWT malformed, contained fewer than 3 sections"),null;try{const s=zk(n);return s?JSON.parse(s):(of("Failed to decode base64 JWT payload"),null)}catch(s){return of("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function rb(t){const e=qy(t);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yi&&RN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function RN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wu(this.lastLoginAt),this.creationTime=wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Gl(t,nE(n,{idToken:r}));je(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?rE(a.providerUserInfo):[],u=jN(t.providerData,l),h=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(u!=null&&u.length),y=h?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Zg(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(t,w)}async function DN(t){const e=Nt(t);await Pu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function rE(t){return t.map(e=>{var{providerId:n}=e,r=By(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e){const n=await eE(t,{},async()=>{const r=rd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=tE(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Xk.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LN(t,e){return _i(t,"POST","/v2/accounts:revokeToken",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){je(e.length!==0,"internal-error");const n=rb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await ON(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,l=new Al;return r&&(je(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(je(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(je(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Al,this.toJSON())}_performRefresh(){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t,e){je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class li{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=By(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Zg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Gl(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NN(this,e)}reload(){return DN(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(as(this.auth.app))return Promise.reject(Ns(this.auth));const e=await this.getIdToken();return await Gl(this,AN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,l,u,h,m,y;const w=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,E=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,C=(l=n.photoURL)!==null&&l!==void 0?l:void 0,k=(u=n.tenantId)!==null&&u!==void 0?u:void 0,R=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,q=(m=n.createdAt)!==null&&m!==void 0?m:void 0,B=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:$,emailVerified:H,isAnonymous:F,providerData:te,stsTokenManager:S}=n;je($&&S,e,"internal-error");const I=Al.fromJSON(this.name,S);je(typeof $=="string",e,"internal-error"),Qi(w,e.name),Qi(x,e.name),je(typeof H=="boolean",e,"internal-error"),je(typeof F=="boolean",e,"internal-error"),Qi(E,e.name),Qi(C,e.name),Qi(k,e.name),Qi(R,e.name),Qi(q,e.name),Qi(B,e.name);const N=new li({uid:$,auth:e,email:x,emailVerified:H,displayName:w,isAnonymous:F,photoURL:C,phoneNumber:E,tenantId:k,stsTokenManager:I,createdAt:q,lastLoginAt:B});return te&&Array.isArray(te)&&(N.providerData=te.map(P=>Object.assign({},P))),R&&(N._redirectEventId=R),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new Al;s.updateFromServerResponse(n);const a=new li({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Pu(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];je(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?rE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),u=new Al;u.updateFromIdToken(r);const h=new li({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Zg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,m),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=new Map;function ci(t){hi(t instanceof Function,"Expected a class definition");let e=sb.get(t);return e?(hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sE.type="NONE";const ib=sE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t,e,n){return`firebase:${t}:${e}:${n}`}class Nl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=af(this.userKey,s.apiKey,a),this.fullPersistenceKey=af("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?li._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Nl(ci(ib),e,r);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||ci(ib);const l=af(r,e.config.apiKey,e.name);let u=null;for(const m of n)try{const y=await m._get(l);if(y){const w=li._fromJSON(e,y);m!==a&&(u=w),a=m;break}}catch{}const h=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Nl(a,e,r):(a=h[0],u&&await a._set(l,u.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new Nl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uE(e))return"Blackberry";if(dE(e))return"Webos";if(oE(e))return"Safari";if((e.includes("chrome/")||aE(e))&&!e.includes("edge/"))return"Chrome";if(cE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function iE(t=Ln()){return/firefox\//i.test(t)}function oE(t=Ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aE(t=Ln()){return/crios\//i.test(t)}function lE(t=Ln()){return/iemobile/i.test(t)}function cE(t=Ln()){return/android/i.test(t)}function uE(t=Ln()){return/blackberry/i.test(t)}function dE(t=Ln()){return/webos/i.test(t)}function Hy(t=Ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MN(t=Ln()){var e;return Hy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VN(){return JA()&&document.documentMode===10}function hE(t=Ln()){return Hy(t)||cE(t)||dE(t)||uE(t)||/windows phone/i.test(t)||lE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t,e=[]){let n;switch(t){case"Browser":n=ob(Ln());break;case"Worker":n=`${ob(Ln())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,u)=>{try{const h=e(a);l(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e={}){return _i(t,"GET","/v2/passwordPolicy",vi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=6;class BN{constructor(e){var n,r,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:UN,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,l,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ab(this),this.idTokenSubscription=new ab(this),this.beforeStateQueue=new FN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ci(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Nl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nE(this,{idToken:e}),r=await li._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(as(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(as(this.app))return Promise.reject(Ns(this));const n=e?Nt(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return as(this.app)?Promise.reject(Ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return as(this.app)?Promise.reject(Ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zN(this),n=new BN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await LN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ci(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await Nl.create(this,[ci(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,s);return()=>{l=!0,h()}}else{const h=e.addObserver(n);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_N(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function So(t){return Nt(t)}class ab{constructor(e){this.auth=e,this.observer=null,this.addObserver=o2(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WN(t){tp=t}function pE(t){return tp.loadJS(t)}function qN(){return tp.recaptchaEnterpriseScript}function HN(){return tp.gapiScript}function KN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const GN="recaptcha-enterprise",QN="NO_RECAPTCHA";class ZN{constructor(e){this.type=GN,this.auth=So(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,u)=>{CN(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const m=new SN(h);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,l(m.siteKey)}}).catch(h=>{u(h)})})}function s(a,l,u){const h=window.grecaptcha;nb(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(m=>{l(m)}).catch(()=>{l(QN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{r(this.auth).then(u=>{if(!n&&nb(window.grecaptcha))s(u,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=qN();h.length!==0&&(h+=u),pE(h).then(()=>{s(u,a,l)}).catch(m=>{l(m)})}}).catch(u=>{l(u)})})}}async function lb(t,e,n,r=!1){const s=new ZN(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function cb(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await lb(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await lb(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t,e){const n=Uy(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(If(a,e??{}))return s;us(s,"already-initialized")}return n.initialize({options:e})}function JN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ci);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function XN(t,e,n){const r=So(t);je(r._canInitEmulator,r,"emulator-config-failed"),je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=mE(e),{host:l,port:u}=eR(e),h=u===null?"":`:${u}`;r.config.emulator={url:`${a}//${l}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),tR()}function mE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eR(t){const e=mE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:ub(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:ub(l)}}}function ub(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,n){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}async function nR(t,e){return _i(t,"POST","/v1/accounts:update",e)}async function rR(t,e){return _i(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t,e){return uc(t,"POST","/v1/accounts:signInWithPassword",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(t,e){return uc(t,"POST","/v1/accounts:signInWithEmailLink",vi(t,e))}async function oR(t,e){return uc(t,"POST","/v1/accounts:signInWithEmailLink",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends Ky{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Du(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Du(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cb(e,n,"signInWithPassword",sR);case"emailLink":return iR(e,{email:this._email,oobCode:this._password});default:us(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cb(e,r,"signUpPassword",rR);case"emailLink":return oR(e,{idToken:n,email:this._email,oobCode:this._password});default:us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(t,e){return uc(t,"POST","/v1/accounts:signInWithIdp",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="http://localhost";class Ta extends Ky{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):us("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=By(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Ta(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Rl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rl(e,n)}buildRequest(){const e={requestUri:aR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cR(t){const e=lu(cu(t)).link,n=e?lu(cu(e)).deep_link_id:null,r=lu(cu(t)).deep_link_id;return(r?lu(cu(r)).link:null)||r||n||e||t}class Gy{constructor(e){var n,r,s,a,l,u;const h=lu(cu(e)),m=(n=h.apiKey)!==null&&n!==void 0?n:null,y=(r=h.oobCode)!==null&&r!==void 0?r:null,w=lR((s=h.mode)!==null&&s!==void 0?s:null);je(m&&y&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=y,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=cR(e);try{return new Gy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.providerId=Na.PROVIDER_ID}static credential(e,n){return Du._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gy.parseLink(n);return je(r,"argument-error"),Du._fromEmailAndCode(e,r.code,r.tenantId)}}Na.PROVIDER_ID="password";Na.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Na.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends gE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends id{constructor(){super("facebook.com")}static credential(e){return Ta._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";eo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ta._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return to.credential(n,r)}catch{return null}}}to.GOOGLE_SIGN_IN_METHOD="google.com";to.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends id{constructor(){super("github.com")}static credential(e){return Ta._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return no.credential(e.oauthAccessToken)}catch{return null}}}no.GITHUB_SIGN_IN_METHOD="github.com";no.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends id{constructor(){super("twitter.com")}static credential(e,n){return Ta._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ro.credential(n,r)}catch{return null}}}ro.TWITTER_SIGN_IN_METHOD="twitter.com";ro.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(t,e){return uc(t,"POST","/v1/accounts:signUp",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await li._fromIdTokenResponse(e,r,s),l=db(r);return new fi({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=db(r);return new fi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function db(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t){var e;if(as(t.app))return Promise.reject(Ns(t));const n=So(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new fi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await uR(n,{returnSecureToken:!0}),s=await fi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends yi{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Cf.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Cf(e,n,r,s)}}function yE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Cf._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function vE(t,e,n=!1){const r=await Gl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fi._forOperation(t,"link",r)}async function fR(t,e,n){await Pu(e);const r=hR(e.providerData);je(r.has(n)===t,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(t,e,n=!1){const{auth:r}=t;if(as(r.app))return Promise.reject(Ns(r));const s="reauthenticate";try{const a=await Gl(t,yE(r,s,e,t),n);je(a.idToken,r,"internal-error");const l=qy(a.idToken);je(l,r,"internal-error");const{sub:u}=l;return je(t.uid===u,r,"user-mismatch"),fi._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&us(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _E(t,e,n=!1){if(as(t.app))return Promise.reject(Ns(t));const r="signIn",s=await yE(t,r,e),a=await fi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function mR(t,e){return _E(So(t),e)}async function gR(t,e){const n=Nt(t);return await fR(!1,n,e.providerId),vE(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(t,e){return uc(t,"POST","/v1/accounts:signInWithCustomToken",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(t,e){if(as(t.app))return Promise.reject(Ns(t));const n=So(t),r=await yR(n,{token:e,returnSecureToken:!0}),s=await fi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(t){const e=So(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function wE(t,e,n){return as(t.app)?Promise.reject(Ns(t)):mR(Nt(t),Na.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_R(t),r})}function wR(t,e){return bR(Nt(t),null,e)}async function bR(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(a.password=n);const l=await Gl(t,nR(r,a));await t._updateTokensIfNecessary(l,!0)}function xR(t,e,n,r){return Nt(t).onIdTokenChanged(e,n,r)}function kR(t,e,n){return Nt(t).beforeAuthStateChanged(e,n)}function bE(t,e,n,r){return Nt(t).onAuthStateChanged(e,n,r)}function xE(t){return Nt(t).signOut()}const Af="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Af,"1"),this.storage.removeItem(Af),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=1e3,TR=10;class EE extends kE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);VN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,TR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ER)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}EE.type="LOCAL";const IR=EE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE extends kE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TE.type="SESSION";const IE=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new np(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async m=>m(n.origin,a)),h=await SR(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}np.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((u,h)=>{const m=Qy("",20);s.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(w){const x=w;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(x.data.response);break;default:clearTimeout(y),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(){return window}function AR(t){Rs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(){return typeof Rs().WorkerGlobalScope<"u"&&typeof Rs().importScripts=="function"}async function NR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PR(){return SE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebaseLocalStorageDb",DR=1,Nf="firebaseLocalStorage",AE="fbase_key";class od{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rp(t,e){return t.transaction([Nf],e?"readwrite":"readonly").objectStore(Nf)}function jR(){const t=indexedDB.deleteDatabase(CE);return new od(t).toPromise()}function Yg(){const t=indexedDB.open(CE,DR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nf,{keyPath:AE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nf)?e(r):(r.close(),await jR(),e(await Yg()))})})}async function hb(t,e,n){const r=rp(t,!0).put({[AE]:e,value:n});return new od(r).toPromise()}async function OR(t,e){const n=rp(t,!1).get(e),r=await new od(n).toPromise();return r===void 0?null:r.value}function fb(t,e){const n=rp(t,!0).delete(e);return new od(n).toPromise()}const LR=800,MR=3;class NE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>MR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=np._getInstance(PR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await NR(),!this.activeServiceWorker)return;this.sender=new CR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yg();return await hb(e,Af,"1"),await fb(e,Af),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>OR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=rp(s,!1).getAll();return new od(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NE.type="LOCAL";const VR=NE;new sd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t,e){return e?ci(e):(je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends Ky{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zR(t){return _E(t.auth,new Zy(t),t.bypassAuthState)}function UR(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),pR(n,new Zy(t),t.bypassAuthState)}async function BR(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),vE(n,new Zy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zR;case"linkViaPopup":case"linkViaRedirect":return BR;case"reauthViaPopup":case"reauthViaRedirect":return UR;default:us(this.auth,"internal-error")}}resolve(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=new sd(2e3,1e4);class Tl extends RE{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Tl.currentPopupAction&&Tl.currentPopupAction.cancel(),Tl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){hi(this.filter.length===1,"Popup operations only handle one event");const e=Qy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(As(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(As(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(As(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$R.get())};e()}}Tl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="pendingRedirect",lf=new Map;class qR extends RE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=lf.get(this.auth._key());if(!e){try{const r=await HR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}lf.set(this.auth._key(),e)}return this.bypassAuthState||lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HR(t,e){const n=QR(e),r=GR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function KR(t,e){lf.set(t._key(),e)}function GR(t){return ci(t._redirectPersistence)}function QR(t){return af(WR,t.config.apiKey,t.name)}async function ZR(t,e,n=!1){if(as(t.app))return Promise.reject(Ns(t));const r=So(t),s=FR(r,e),l=await new qR(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=600*1e3;class JR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!PE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(As(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YR&&this.cachedEventUids.clear(),this.cachedEventUids.has(pb(e))}saveEventToCache(e){this.cachedEventUids.add(pb(e)),this.lastProcessedEventTime=Date.now()}}function pb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eP(t,e={}){return _i(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nP=/^https?/;async function rP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eP(t);for(const n of e)try{if(sP(n))return}catch{}us(t,"unauthorized-domain")}function sP(t){const e=Qg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!nP.test(n))return!1;if(tP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=new sd(3e4,6e4);function mb(){const t=Rs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oP(t){return new Promise((e,n)=>{var r,s,a;function l(){mb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mb(),n(As(t,"network-request-failed"))},timeout:iP.get()})}if(!((s=(r=Rs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Rs().gapi)===null||a===void 0)&&a.load)l();else{const u=KN("iframefcb");return Rs()[u]=()=>{gapi.load?l():n(As(t,"network-request-failed"))},pE(`${HN()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw cf=null,e})}let cf=null;function aP(t){return cf=cf||oP(t),cf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new sd(5e3,15e3),cP="__/auth/iframe",uP="emulator/auth/iframe",dP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fP(t){const e=t.config;je(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wy(e,uP):`https://${t.config.authDomain}/${cP}`,r={apiKey:e.apiKey,appName:t.name,v:cc},s=hP.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${rd(r).slice(1)}`}async function pP(t){const e=await aP(t),n=Rs().gapi;return je(n,t,"internal-error"),e.open({where:document.body,url:fP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dP,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=As(t,"network-request-failed"),u=Rs().setTimeout(()=>{a(l)},lP.get());function h(){Rs().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gP=500,yP=600,vP="_blank",_P="http://localhost";class gb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wP(t,e,n,r=gP,s=yP){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},mP),{width:r.toString(),height:s.toString(),top:a,left:l}),m=Ln().toLowerCase();n&&(u=aE(m)?vP:n),iE(m)&&(e=e||_P,h.scrollbars="yes");const y=Object.entries(h).reduce((x,[E,C])=>`${x}${E}=${C},`,"");if(MN(m)&&u!=="_self")return bP(e||"",u),new gb(null);const w=window.open(e||"",u,y);je(w,t,"popup-blocked");try{w.focus()}catch{}return new gb(w)}function bP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="__/auth/handler",kP="emulator/auth/handler",EP=encodeURIComponent("fac");async function yb(t,e,n,r,s,a){je(t.config.authDomain,t,"auth-domain-config-required"),je(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:cc,eventId:s};if(e instanceof gE){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",i2(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))l[y]=w}if(e instanceof id){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const h=await t._getAppCheckToken(),m=h?`#${EP}=${encodeURIComponent(h)}`:"";return`${TP(t)}?${rd(u).slice(1)}${m}`}function TP({config:t}){return t.emulator?Wy(t,kP):`https://${t.authDomain}/${xP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="webStorageSupport";class IP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IE,this._completeRedirectFn=ZR,this._overrideRedirectResult=KR}async _openPopup(e,n,r,s){var a;hi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await yb(e,n,r,Qg(),s);return wP(e,l,Qy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await yb(e,n,r,Qg(),s);return AR(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(hi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await pP(e),r=new JR(e);return n.register("authEvent",s=>(je(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mg,{type:mg},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[mg];l!==void 0&&n(!!l),us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hE()||oE()||Hy()}}const SP=IP;var vb="@firebase/auth",_b="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NP(t){Kl(new Ea("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;je(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fE(t)},m=new $N(r,s,a,h);return JN(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Kl(new Ea("auth-internal",e=>{const n=So(e.getProvider("auth").getImmediate());return(r=>new CP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vo(vb,_b,AP(t)),vo(vb,_b,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=300,PP=$k("authIdTokenMaxAge")||RP;let wb=null;const DP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>PP)return;const s=n==null?void 0:n.token;wb!==s&&(wb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function jP(t=Kk()){const e=Uy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=YN(t,{popupRedirectResolver:SP,persistence:[VR,IR,IE]}),r=$k("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=DP(a.toString());kR(n,l,()=>l(n.currentUser)),xR(n,u=>l(u))}}const s=Uk("auth");return s&&XN(n,`http://${s}`),n}function OP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}WN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=As("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",OP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NP("Browser");var bb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ba,DE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,I){function N(){}N.prototype=I.prototype,S.D=I.prototype,S.prototype=new N,S.prototype.constructor=S,S.C=function(P,O,M){for(var D=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)D[Be-2]=arguments[Be];return I.prototype[O].apply(P,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,I,N){N||(N=0);var P=Array(16);if(typeof I=="string")for(var O=0;16>O;++O)P[O]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(O=0;16>O;++O)P[O]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=S.g[0],N=S.g[1],O=S.g[2];var M=S.g[3],D=I+(M^N&(O^M))+P[0]+3614090360&4294967295;I=N+(D<<7&4294967295|D>>>25),D=M+(O^I&(N^O))+P[1]+3905402710&4294967295,M=I+(D<<12&4294967295|D>>>20),D=O+(N^M&(I^N))+P[2]+606105819&4294967295,O=M+(D<<17&4294967295|D>>>15),D=N+(I^O&(M^I))+P[3]+3250441966&4294967295,N=O+(D<<22&4294967295|D>>>10),D=I+(M^N&(O^M))+P[4]+4118548399&4294967295,I=N+(D<<7&4294967295|D>>>25),D=M+(O^I&(N^O))+P[5]+1200080426&4294967295,M=I+(D<<12&4294967295|D>>>20),D=O+(N^M&(I^N))+P[6]+2821735955&4294967295,O=M+(D<<17&4294967295|D>>>15),D=N+(I^O&(M^I))+P[7]+4249261313&4294967295,N=O+(D<<22&4294967295|D>>>10),D=I+(M^N&(O^M))+P[8]+1770035416&4294967295,I=N+(D<<7&4294967295|D>>>25),D=M+(O^I&(N^O))+P[9]+2336552879&4294967295,M=I+(D<<12&4294967295|D>>>20),D=O+(N^M&(I^N))+P[10]+4294925233&4294967295,O=M+(D<<17&4294967295|D>>>15),D=N+(I^O&(M^I))+P[11]+2304563134&4294967295,N=O+(D<<22&4294967295|D>>>10),D=I+(M^N&(O^M))+P[12]+1804603682&4294967295,I=N+(D<<7&4294967295|D>>>25),D=M+(O^I&(N^O))+P[13]+4254626195&4294967295,M=I+(D<<12&4294967295|D>>>20),D=O+(N^M&(I^N))+P[14]+2792965006&4294967295,O=M+(D<<17&4294967295|D>>>15),D=N+(I^O&(M^I))+P[15]+1236535329&4294967295,N=O+(D<<22&4294967295|D>>>10),D=I+(O^M&(N^O))+P[1]+4129170786&4294967295,I=N+(D<<5&4294967295|D>>>27),D=M+(N^O&(I^N))+P[6]+3225465664&4294967295,M=I+(D<<9&4294967295|D>>>23),D=O+(I^N&(M^I))+P[11]+643717713&4294967295,O=M+(D<<14&4294967295|D>>>18),D=N+(M^I&(O^M))+P[0]+3921069994&4294967295,N=O+(D<<20&4294967295|D>>>12),D=I+(O^M&(N^O))+P[5]+3593408605&4294967295,I=N+(D<<5&4294967295|D>>>27),D=M+(N^O&(I^N))+P[10]+38016083&4294967295,M=I+(D<<9&4294967295|D>>>23),D=O+(I^N&(M^I))+P[15]+3634488961&4294967295,O=M+(D<<14&4294967295|D>>>18),D=N+(M^I&(O^M))+P[4]+3889429448&4294967295,N=O+(D<<20&4294967295|D>>>12),D=I+(O^M&(N^O))+P[9]+568446438&4294967295,I=N+(D<<5&4294967295|D>>>27),D=M+(N^O&(I^N))+P[14]+3275163606&4294967295,M=I+(D<<9&4294967295|D>>>23),D=O+(I^N&(M^I))+P[3]+4107603335&4294967295,O=M+(D<<14&4294967295|D>>>18),D=N+(M^I&(O^M))+P[8]+1163531501&4294967295,N=O+(D<<20&4294967295|D>>>12),D=I+(O^M&(N^O))+P[13]+2850285829&4294967295,I=N+(D<<5&4294967295|D>>>27),D=M+(N^O&(I^N))+P[2]+4243563512&4294967295,M=I+(D<<9&4294967295|D>>>23),D=O+(I^N&(M^I))+P[7]+1735328473&4294967295,O=M+(D<<14&4294967295|D>>>18),D=N+(M^I&(O^M))+P[12]+2368359562&4294967295,N=O+(D<<20&4294967295|D>>>12),D=I+(N^O^M)+P[5]+4294588738&4294967295,I=N+(D<<4&4294967295|D>>>28),D=M+(I^N^O)+P[8]+2272392833&4294967295,M=I+(D<<11&4294967295|D>>>21),D=O+(M^I^N)+P[11]+1839030562&4294967295,O=M+(D<<16&4294967295|D>>>16),D=N+(O^M^I)+P[14]+4259657740&4294967295,N=O+(D<<23&4294967295|D>>>9),D=I+(N^O^M)+P[1]+2763975236&4294967295,I=N+(D<<4&4294967295|D>>>28),D=M+(I^N^O)+P[4]+1272893353&4294967295,M=I+(D<<11&4294967295|D>>>21),D=O+(M^I^N)+P[7]+4139469664&4294967295,O=M+(D<<16&4294967295|D>>>16),D=N+(O^M^I)+P[10]+3200236656&4294967295,N=O+(D<<23&4294967295|D>>>9),D=I+(N^O^M)+P[13]+681279174&4294967295,I=N+(D<<4&4294967295|D>>>28),D=M+(I^N^O)+P[0]+3936430074&4294967295,M=I+(D<<11&4294967295|D>>>21),D=O+(M^I^N)+P[3]+3572445317&4294967295,O=M+(D<<16&4294967295|D>>>16),D=N+(O^M^I)+P[6]+76029189&4294967295,N=O+(D<<23&4294967295|D>>>9),D=I+(N^O^M)+P[9]+3654602809&4294967295,I=N+(D<<4&4294967295|D>>>28),D=M+(I^N^O)+P[12]+3873151461&4294967295,M=I+(D<<11&4294967295|D>>>21),D=O+(M^I^N)+P[15]+530742520&4294967295,O=M+(D<<16&4294967295|D>>>16),D=N+(O^M^I)+P[2]+3299628645&4294967295,N=O+(D<<23&4294967295|D>>>9),D=I+(O^(N|~M))+P[0]+4096336452&4294967295,I=N+(D<<6&4294967295|D>>>26),D=M+(N^(I|~O))+P[7]+1126891415&4294967295,M=I+(D<<10&4294967295|D>>>22),D=O+(I^(M|~N))+P[14]+2878612391&4294967295,O=M+(D<<15&4294967295|D>>>17),D=N+(M^(O|~I))+P[5]+4237533241&4294967295,N=O+(D<<21&4294967295|D>>>11),D=I+(O^(N|~M))+P[12]+1700485571&4294967295,I=N+(D<<6&4294967295|D>>>26),D=M+(N^(I|~O))+P[3]+2399980690&4294967295,M=I+(D<<10&4294967295|D>>>22),D=O+(I^(M|~N))+P[10]+4293915773&4294967295,O=M+(D<<15&4294967295|D>>>17),D=N+(M^(O|~I))+P[1]+2240044497&4294967295,N=O+(D<<21&4294967295|D>>>11),D=I+(O^(N|~M))+P[8]+1873313359&4294967295,I=N+(D<<6&4294967295|D>>>26),D=M+(N^(I|~O))+P[15]+4264355552&4294967295,M=I+(D<<10&4294967295|D>>>22),D=O+(I^(M|~N))+P[6]+2734768916&4294967295,O=M+(D<<15&4294967295|D>>>17),D=N+(M^(O|~I))+P[13]+1309151649&4294967295,N=O+(D<<21&4294967295|D>>>11),D=I+(O^(N|~M))+P[4]+4149444226&4294967295,I=N+(D<<6&4294967295|D>>>26),D=M+(N^(I|~O))+P[11]+3174756917&4294967295,M=I+(D<<10&4294967295|D>>>22),D=O+(I^(M|~N))+P[2]+718787259&4294967295,O=M+(D<<15&4294967295|D>>>17),D=N+(M^(O|~I))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+M&4294967295}r.prototype.u=function(S,I){I===void 0&&(I=S.length);for(var N=I-this.blockSize,P=this.B,O=this.h,M=0;M<I;){if(O==0)for(;M<=N;)s(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<I;)if(P[O++]=S.charCodeAt(M++),O==this.blockSize){s(this,P),O=0;break}}else for(;M<I;)if(P[O++]=S[M++],O==this.blockSize){s(this,P),O=0;break}}this.h=O,this.o+=I},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;var N=8*this.o;for(I=S.length-8;I<S.length;++I)S[I]=N&255,N/=256;for(this.u(S),S=Array(16),I=N=0;4>I;++I)for(var P=0;32>P;P+=8)S[N++]=this.g[I]>>>P&255;return S};function a(S,I){var N=u;return Object.prototype.hasOwnProperty.call(N,S)?N[S]:N[S]=I(S)}function l(S,I){this.h=I;for(var N=[],P=!0,O=S.length-1;0<=O;O--){var M=S[O]|0;P&&M==I||(N[O]=M,P=!1)}this.g=N}var u={};function h(S){return-128<=S&&128>S?a(S,function(I){return new l([I|0],0>I?-1:0)}):new l([S|0],0>S?-1:0)}function m(S){if(isNaN(S)||!isFinite(S))return w;if(0>S)return R(m(-S));for(var I=[],N=1,P=0;S>=N;P++)I[P]=S/N|0,N*=4294967296;return new l(I,0)}function y(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return R(y(S.substring(1),I));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(I,8)),P=w,O=0;O<S.length;O+=8){var M=Math.min(8,S.length-O),D=parseInt(S.substring(O,O+M),I);8>M?(M=m(Math.pow(I,M)),P=P.j(M).add(m(D))):(P=P.j(N),P=P.add(m(D)))}return P}var w=h(0),x=h(1),E=h(16777216);t=l.prototype,t.m=function(){if(k(this))return-R(this).m();for(var S=0,I=1,N=0;N<this.g.length;N++){var P=this.i(N);S+=(0<=P?P:4294967296+P)*I,I*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C(this))return"0";if(k(this))return"-"+R(this).toString(S);for(var I=m(Math.pow(S,6)),N=this,P="";;){var O=H(N,I).g;N=q(N,O.j(I));var M=((0<N.g.length?N.g[0]:N.h)>>>0).toString(S);if(N=O,C(N))return M+P;for(;6>M.length;)M="0"+M;P=M+P}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function C(S){if(S.h!=0)return!1;for(var I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function k(S){return S.h==-1}t.l=function(S){return S=q(this,S),k(S)?-1:C(S)?0:1};function R(S){for(var I=S.g.length,N=[],P=0;P<I;P++)N[P]=~S.g[P];return new l(N,~S.h).add(x)}t.abs=function(){return k(this)?R(this):this},t.add=function(S){for(var I=Math.max(this.g.length,S.g.length),N=[],P=0,O=0;O<=I;O++){var M=P+(this.i(O)&65535)+(S.i(O)&65535),D=(M>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);P=D>>>16,M&=65535,D&=65535,N[O]=D<<16|M}return new l(N,N[N.length-1]&-2147483648?-1:0)};function q(S,I){return S.add(R(I))}t.j=function(S){if(C(this)||C(S))return w;if(k(this))return k(S)?R(this).j(R(S)):R(R(this).j(S));if(k(S))return R(this.j(R(S)));if(0>this.l(E)&&0>S.l(E))return m(this.m()*S.m());for(var I=this.g.length+S.g.length,N=[],P=0;P<2*I;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var O=0;O<S.g.length;O++){var M=this.i(P)>>>16,D=this.i(P)&65535,Be=S.i(O)>>>16,tt=S.i(O)&65535;N[2*P+2*O]+=D*tt,B(N,2*P+2*O),N[2*P+2*O+1]+=M*tt,B(N,2*P+2*O+1),N[2*P+2*O+1]+=D*Be,B(N,2*P+2*O+1),N[2*P+2*O+2]+=M*Be,B(N,2*P+2*O+2)}for(P=0;P<I;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=I;P<2*I;P++)N[P]=0;return new l(N,0)};function B(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function $(S,I){this.g=S,this.h=I}function H(S,I){if(C(I))throw Error("division by zero");if(C(S))return new $(w,w);if(k(S))return I=H(R(S),I),new $(R(I.g),R(I.h));if(k(I))return I=H(S,R(I)),new $(R(I.g),I.h);if(30<S.g.length){if(k(S)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var N=x,P=I;0>=P.l(S);)N=F(N),P=F(P);var O=te(N,1),M=te(P,1);for(P=te(P,2),N=te(N,2);!C(P);){var D=M.add(P);0>=D.l(S)&&(O=O.add(N),M=D),P=te(P,1),N=te(N,1)}return I=q(S,O.j(I)),new $(O,I)}for(O=w;0<=S.l(I);){for(N=Math.max(1,Math.floor(S.m()/I.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),M=m(N),D=M.j(I);k(D)||0<D.l(S);)N-=P,M=m(N),D=M.j(I);C(M)&&(M=x),O=O.add(M),S=q(S,D)}return new $(O,S)}t.A=function(S){return H(this,S).h},t.and=function(S){for(var I=Math.max(this.g.length,S.g.length),N=[],P=0;P<I;P++)N[P]=this.i(P)&S.i(P);return new l(N,this.h&S.h)},t.or=function(S){for(var I=Math.max(this.g.length,S.g.length),N=[],P=0;P<I;P++)N[P]=this.i(P)|S.i(P);return new l(N,this.h|S.h)},t.xor=function(S){for(var I=Math.max(this.g.length,S.g.length),N=[],P=0;P<I;P++)N[P]=this.i(P)^S.i(P);return new l(N,this.h^S.h)};function F(S){for(var I=S.g.length+1,N=[],P=0;P<I;P++)N[P]=S.i(P)<<1|S.i(P-1)>>>31;return new l(N,S.h)}function te(S,I){var N=I>>5;I%=32;for(var P=S.g.length-N,O=[],M=0;M<P;M++)O[M]=0<I?S.i(M+N)>>>I|S.i(M+N+1)<<32-I:S.i(M+N);return new l(O,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,DE=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,ba=l}).apply(typeof bb<"u"?bb:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jE,uu,OE,uf,Jg,LE,ME,VE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,b){return d==Array.prototype||d==Object.prototype||(d[v]=b.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var v=0;v<d.length;++v){var b=d[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(d,v){if(v)e:{var b=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var K=d[A];if(!(K in b))break e;b=b[K]}d=d[d.length-1],A=b[d],v=v(A),v!=A&&v!=null&&e(b,d,{configurable:!0,writable:!0,value:v})}}function a(d,v){d instanceof String&&(d+="");var b=0,A=!1,K={next:function(){if(!A&&b<d.length){var J=b++;return{value:v(J,d[J]),done:!1}}return A=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}s("Array.prototype.values",function(d){return d||function(){return a(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function m(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function y(d,v,b){return d.call.apply(d.bind,arguments)}function w(d,v,b){if(!d)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,A),d.apply(v,K)}}return function(){return d.apply(v,arguments)}}function x(d,v,b){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:w,x.apply(null,arguments)}function E(d,v){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function C(d,v){function b(){}b.prototype=v.prototype,d.aa=v.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(A,K,J){for(var ue=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)ue[ut-2]=arguments[ut];return v.prototype[K].apply(A,ue)}}function k(d){const v=d.length;if(0<v){const b=Array(v);for(let A=0;A<v;A++)b[A]=d[A];return b}return[]}function R(d,v){for(let b=1;b<arguments.length;b++){const A=arguments[b];if(h(A)){const K=d.length||0,J=A.length||0;d.length=K+J;for(let ue=0;ue<J;ue++)d[K+ue]=A[ue]}else d.push(A)}}class q{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function B(d){return/^[\s\xa0]*$/.test(d)}function $(){var d=u.navigator;return d&&(d=d.userAgent)?d:""}function H(d){return H[" "](d),d}H[" "]=function(){};var F=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function te(d,v,b){for(const A in d)v.call(b,d[A],A,d)}function S(d,v){for(const b in d)v.call(void 0,d[b],b,d)}function I(d){const v={};for(const b in d)v[b]=d[b];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,v){let b,A;for(let K=1;K<arguments.length;K++){A=arguments[K];for(b in A)d[b]=A[b];for(let J=0;J<N.length;J++)b=N[J],Object.prototype.hasOwnProperty.call(A,b)&&(d[b]=A[b])}}function O(d){var v=1;d=d.split(":");const b=[];for(;0<v&&d.length;)b.push(d.shift()),v--;return d.length&&b.push(d.join(":")),b}function M(d){u.setTimeout(()=>{throw d},0)}function D(){var d=pe;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class Be{constructor(){this.h=this.g=null}add(v,b){const A=tt.get();A.set(v,b),this.h?this.h.next=A:this.g=A,this.h=A}}var tt=new q(()=>new nt,d=>d.reset());class nt{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Y=!1,pe=new Be,de=()=>{const d=u.Promise.resolve(void 0);Ae=()=>{d.then(W)}};var W=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(b){M(b)}var v=tt;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}Y=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var ee=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};u.addEventListener("test",b,v),u.removeEventListener("test",b,v)}catch{}return d})();function he(d,v){if(ce.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(F){e:{try{H(v.nodeName);var K=!0;break e}catch{}K=!1}K||(v=null)}}else b=="mouseover"?v=d.fromElement:b=="mouseout"&&(v=d.toElement);this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ve[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&he.aa.h.call(this)}}C(he,ce);var ve={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function We(d,v,b,A,K){this.listener=d,this.proxy=null,this.src=v,this.type=b,this.capture=!!A,this.ha=K,this.key=++Fe,this.da=this.fa=!1}function Ne(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Zt(d){this.src=d,this.g={},this.h=0}Zt.prototype.add=function(d,v,b,A,K){var J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);var ue=Vn(d,v,A,K);return-1<ue?(v=d[ue],b||(v.fa=!1)):(v=new We(v,this.src,J,!!A,K),v.fa=b,d.push(v)),v};function jt(d,v){var b=v.type;if(b in d.g){var A=d.g[b],K=Array.prototype.indexOf.call(A,v,void 0),J;(J=0<=K)&&Array.prototype.splice.call(A,K,1),J&&(Ne(v),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Vn(d,v,b,A){for(var K=0;K<d.length;++K){var J=d[K];if(!J.da&&J.listener==v&&J.capture==!!b&&J.ha==A)return K}return-1}var mn="closure_lm_"+(1e6*Math.random()|0),hr={};function kr(d,v,b,A,K){if(Array.isArray(v)){for(var J=0;J<v.length;J++)kr(d,v[J],b,A,K);return null}return b=jo(b),d&&d[Ee]?d.K(v,b,m(A)?!!A.capture:!1,K):bi(d,v,b,!1,A,K)}function bi(d,v,b,A,K,J){if(!v)throw Error("Invalid event type");var ue=m(K)?!!K.capture:!!K,ut=zs(d);if(ut||(d[mn]=ut=new Zt(d)),b=ut.add(v,b,A,ue,J),b.proxy)return b;if(A=Do(),b.proxy=A,A.src=d,A.listener=b,d.addEventListener)ee||(K=ue),K===void 0&&(K=!1),d.addEventListener(v.toString(),A,K);else if(d.attachEvent)d.attachEvent(Zn(v.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Do(){function d(b){return v.call(d.src,d.listener,b)}const v=ps;return d}function fs(d,v,b,A,K){if(Array.isArray(v))for(var J=0;J<v.length;J++)fs(d,v[J],b,A,K);else A=m(A)?!!A.capture:!!A,b=jo(b),d&&d[Ee]?(d=d.i,v=String(v).toString(),v in d.g&&(J=d.g[v],b=Vn(J,b,A,K),-1<b&&(Ne(J[b]),Array.prototype.splice.call(J,b,1),J.length==0&&(delete d.g[v],d.h--)))):d&&(d=zs(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Vn(v,b,A,K)),(b=-1<d?v[d]:null)&&sn(b))}function sn(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[Ee])jt(v.i,d);else{var b=d.type,A=d.proxy;v.removeEventListener?v.removeEventListener(b,A,d.capture):v.detachEvent?v.detachEvent(Zn(b),A):v.addListener&&v.removeListener&&v.removeListener(A),(b=zs(v))?(jt(b,d),b.h==0&&(b.src=null,v[mn]=null)):Ne(d)}}}function Zn(d){return d in hr?hr[d]:hr[d]="on"+d}function ps(d,v){if(d.da)d=!0;else{v=new he(v,this);var b=d.listener,A=d.ha||d.src;d.fa&&sn(d),d=b.call(A,v)}return d}function zs(d){return d=d[mn],d instanceof Zt?d:null}var Us="__closure_events_fn_"+(1e9*Math.random()>>>0);function jo(d){return typeof d=="function"?d:(d[Us]||(d[Us]=function(v){return d.handleEvent(v)}),d[Us])}function Ft(){X.call(this),this.i=new Zt(this),this.M=this,this.F=null}C(Ft,X),Ft.prototype[Ee]=!0,Ft.prototype.removeEventListener=function(d,v,b,A){fs(this,d,v,b,A)};function mt(d,v){var b,A=d.F;if(A)for(b=[];A;A=A.F)b.push(A);if(d=d.M,A=v.type||v,typeof v=="string")v=new ce(v,d);else if(v instanceof ce)v.target=v.target||d;else{var K=v;v=new ce(A,d),P(v,K)}if(K=!0,b)for(var J=b.length-1;0<=J;J--){var ue=v.g=b[J];K=Sn(ue,A,!0,v)&&K}if(ue=v.g=d,K=Sn(ue,A,!0,v)&&K,K=Sn(ue,A,!1,v)&&K,b)for(J=0;J<b.length;J++)ue=v.g=b[J],K=Sn(ue,A,!1,v)&&K}Ft.prototype.N=function(){if(Ft.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var b=d.g[v],A=0;A<b.length;A++)Ne(b[A]);delete d.g[v],d.h--}}this.F=null},Ft.prototype.K=function(d,v,b,A){return this.i.add(String(d),v,!1,b,A)},Ft.prototype.L=function(d,v,b,A){return this.i.add(String(d),v,!0,b,A)};function Sn(d,v,b,A){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var K=!0,J=0;J<v.length;++J){var ue=v[J];if(ue&&!ue.da&&ue.capture==b){var ut=ue.listener,Jt=ue.ha||ue.src;ue.fa&&jt(d.i,ue),K=ut.call(Jt,A)!==!1&&K}}return K&&!A.defaultPrevented}function $r(d,v,b){if(typeof d=="function")b&&(d=x(d,b));else if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:u.setTimeout(d,v||0)}function Wr(d){d.g=$r(()=>{d.g=null,d.i&&(d.i=!1,Wr(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Cn extends X{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(d){X.call(this),this.h=d,this.g={}}C(ms,X);var Oo=[];function Lo(d){te(d.g,function(v,b){this.g.hasOwnProperty(b)&&sn(v)},d),d.g={}}ms.prototype.N=function(){ms.aa.N.call(this),Lo(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bs=u.JSON.stringify,xi=u.JSON.parse,Mo=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function gs(){}gs.prototype.h=null;function ki(d){return d.h||(d.h=d.i())}function Ei(){}var Yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ft(){ce.call(this,"d")}C(ft,ce);function Bt(){ce.call(this,"c")}C(Bt,ce);var kt={},Jn=null;function $t(){return Jn=Jn||new Ft}kt.La="serverreachability";function Yt(d){ce.call(this,kt.La,d)}C(Yt,ce);function Wt(d){const v=$t();mt(v,new Yt(v))}kt.STAT_EVENT="statevent";function Er(d,v){ce.call(this,kt.STAT_EVENT,d),this.stat=v}C(Er,ce);function qe(d){const v=$t();mt(v,new Er(v,d))}kt.Ma="timingevent";function Fn(d,v){ce.call(this,kt.Ma,d),this.size=v}C(Fn,ce);function Ot(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},v)}function gn(){this.g=!0}gn.prototype.xa=function(){this.g=!1};function fr(d,v,b,A,K,J){d.info(function(){if(d.g)if(J)for(var ue="",ut=J.split("&"),Jt=0;Jt<ut.length;Jt++){var rt=ut[Jt].split("=");if(1<rt.length){var on=rt[0];rt=rt[1];var Ht=on.split("_");ue=2<=Ht.length&&Ht[1]=="type"?ue+(on+"="+rt+"&"):ue+(on+"=redacted&")}}else ue=null;else ue=J;return"XMLHTTP REQ ("+A+") [attempt "+K+"]: "+v+`
`+b+`
`+ue})}function Tr(d,v,b,A,K,J,ue){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+K+"]: "+v+`
`+b+`
`+J+" "+ue})}function qt(d,v,b,A){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Vo(d,b)+(A?" "+A:"")})}function qr(d,v){d.info(function(){return"TIMEOUT: "+v})}gn.prototype.info=function(){};function Vo(d,v){if(!d.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var A=b[d];if(!(2>A.length)){var K=A[1];if(Array.isArray(K)&&!(1>K.length)){var J=K[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ue=1;ue<K.length;ue++)K[ue]=""}}}}return Bs(b)}catch{return v}}var Va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hr;function Fo(){}C(Fo,gs),Fo.prototype.g=function(){return new XMLHttpRequest},Fo.prototype.i=function(){return{}},Hr=new Fo;function Kr(d,v,b,A){this.j=d,this.i=v,this.l=b,this.R=A||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kd}function kd(){this.i=null,this.g="",this.h=!1}var kc={},Fa={};function za(d,v,b){d.L=1,d.v=Ai(mr(v)),d.m=b,d.P=!0,Ec(d,null)}function Ec(d,v){d.F=Date.now(),gt(d),d.A=mr(d.v);var b=d.A,A=d.R;Array.isArray(A)||(A=[String(A)]),Ri(b.i,"t",A),d.C=0,b=d.j.J,d.h=new kd,d.g=Ud(d.j,b?v:null,!d.m),0<d.O&&(d.M=new Cn(x(d.Y,d,d.g),d.O)),v=d.U,b=d.g,A=d.ca;var K="readystatechange";Array.isArray(K)||(K&&(Oo[0]=K.toString()),K=Oo);for(var J=0;J<K.length;J++){var ue=kr(b,K[J],A||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=d.H?I(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Wt(),fr(d.i,d.u,d.A,d.l,d.R,d.m)}Kr.prototype.ca=function(d){d=d.target;const v=this.M;v&&er(d)==3?v.j():this.Y(d)},Kr.prototype.Y=function(d){try{if(d==this.g)e:{const Ht=er(this.g);var v=this.g.Ba();const Cr=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Nc(this.g)))){this.J||Ht!=4||v==7||(v==8||0>=Cr?Wt(3):Wt(2)),zo(this);var b=this.g.Z();this.X=b;t:if(Ed(this)){var A=Nc(this.g);d="";var K=A.length,J=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),Ti(this);var ue="";break t}this.h.i=new u.TextDecoder}for(v=0;v<K;v++)this.h.h=!0,d+=this.h.i.decode(A[v],{stream:!(J&&v==K-1)});A.length=0,this.h.g+=d,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=b==200,Tr(this.i,this.u,this.A,this.l,this.R,Ht,b),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Jt=this.g;if((ut=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ut)){var rt=ut;break t}}rt=null}if(b=rt)qt(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tc(this,b);else{this.o=!1,this.s=3,qe(12),Ir(this),Ti(this);break e}}if(this.P){b=!0;let yr;for(;!this.J&&this.C<ue.length;)if(yr=Cp(this,ue),yr==Fa){Ht==4&&(this.s=4,qe(14),b=!1),qt(this.i,this.l,null,"[Incomplete Response]");break}else if(yr==kc){this.s=4,qe(15),qt(this.i,this.l,ue,"[Invalid Chunk]"),b=!1;break}else qt(this.i,this.l,yr,null),Tc(this,yr);if(Ed(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||ue.length!=0||this.h.h||(this.s=1,qe(16),b=!1),this.o=this.o&&b,!b)qt(this.i,this.l,ue,"[Invalid Chunked Response]"),Ir(this),Ti(this);else if(0<ue.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Pc(on),on.M=!0,qe(11))}}else qt(this.i,this.l,ue,null),Tc(this,ue);Ht==4&&Ir(this),this.o&&!this.J&&(Ht==4?Ya(this.j,this):(this.o=!1,gt(this)))}else Ha(this.g),b==400&&0<ue.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),Ir(this),Ti(this)}}}catch{}finally{}};function Ed(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Cp(d,v){var b=d.C,A=v.indexOf(`
`,b);return A==-1?Fa:(b=Number(v.substring(b,A)),isNaN(b)?kc:(A+=1,A+b>v.length?Fa:(v=v.slice(A,A+b),d.C=A+b,v)))}Kr.prototype.cancel=function(){this.J=!0,Ir(this)};function gt(d){d.S=Date.now()+d.I,Td(d,d.I)}function Td(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ot(x(d.ba,d),v)}function zo(d){d.B&&(u.clearTimeout(d.B),d.B=null)}Kr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(qr(this.i,this.A),this.L!=2&&(Wt(),qe(17)),Ir(this),this.s=2,Ti(this)):Td(this,this.S-d)};function Ti(d){d.j.G==0||d.J||Ya(d.j,d)}function Ir(d){zo(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,Lo(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function Tc(d,v){try{var b=d.j;if(b.G!=0&&(b.g==d||zn(b.h,d))){if(!d.K&&zn(b.h,d)&&b.G==3){try{var A=b.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var K=A;if(K[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Za(b),Jr(b);else break e;Qa(b),qe(18)}}else b.za=K[1],0<b.za-b.T&&37500>K[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ot(x(b.Za,b),6e3));if(1>=Sd(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Ks(b,11)}else if((d.K||b.g==d)&&Za(b),!B(v))for(K=b.Da.g.parse(v),v=0;v<K.length;v++){let rt=K[v];if(b.T=rt[0],rt=rt[1],b.G==2)if(rt[0]=="c"){b.K=rt[1],b.ia=rt[2];const on=rt[3];on!=null&&(b.la=on,b.j.info("VER="+b.la));const Ht=rt[4];Ht!=null&&(b.Aa=Ht,b.j.info("SVER="+b.Aa));const Cr=rt[5];Cr!=null&&typeof Cr=="number"&&0<Cr&&(A=1.5*Cr,b.L=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const yr=d.g;if(yr){const Ko=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ko){var J=A.h;J.g||Ko.indexOf("spdy")==-1&&Ko.indexOf("quic")==-1&&Ko.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ic(J,J.h),J.h=null))}if(A.D){const Xa=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;Xa&&(A.ya=Xa,pt(A.I,A.D,Xa))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),A=b;var ue=d;if(A.qa=zd(A,A.J?A.ia:null,A.W),ue.K){Cd(A.h,ue);var ut=ue,Jt=A.L;Jt&&(ut.I=Jt),ut.B&&(zo(ut),gt(ut)),A.g=ue}else Ho(A);0<b.i.length&&ws(b)}else rt[0]!="stop"&&rt[0]!="close"||Ks(b,7);else b.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Ks(b,7):vn(b):rt[0]!="noop"&&b.l&&b.l.ta(rt),b.v=0)}}Wt(4)}catch{}}var Id=class{constructor(d,v){this.g=d,this.map=v}};function Uo(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pr(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Sd(d){return d.h?1:d.g?d.g.size:0}function zn(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Ic(d,v){d.g?d.g.add(v):d.h=v}function Cd(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Uo.prototype.cancel=function(){if(this.i=Ad(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ad(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const b of d.g.values())v=v.concat(b.D);return v}return k(d.i)}function Ua(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var v=[],b=d.length,A=0;A<b;A++)v.push(d[A]);return v}v=[],b=0;for(A in d)v[b++]=d[A];return v}function Ba(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var v=[];d=d.length;for(var b=0;b<d;b++)v.push(b);return v}v=[],b=0;for(const A in d)v[b++]=A;return v}}}function Ii(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var b=Ba(d),A=Ua(d),K=A.length,J=0;J<K;J++)v.call(void 0,A[J],b&&b[J],d)}var Bo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ap(d,v){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var A=d[b].indexOf("="),K=null;if(0<=A){var J=d[b].substring(0,A);K=d[b].substring(A+1)}else J=d[b];v(J,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function $s(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof $s){this.h=d.h,$o(this,d.j),this.o=d.o,this.g=d.g,Si(this,d.s),this.l=d.l;var v=d.i,b=new ys;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),Ci(this,b),this.m=d.m}else d&&(v=String(d).match(Bo))?(this.h=!1,$o(this,v[1]||"",!0),this.o=Ze(v[2]||""),this.g=Ze(v[3]||"",!0),Si(this,v[4]),this.l=Ze(v[5]||"",!0),Ci(this,v[6]||"",!0),this.m=Ze(v[7]||"")):(this.h=!1,this.i=new ys(null,this.h))}$s.prototype.toString=function(){var d=[],v=this.j;v&&d.push(Ni(v,$a,!0),":");var b=this.g;return(b||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Ni(v,$a,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Ni(b,b.charAt(0)=="/"?Pd:Rd,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Ni(b,Sc)),d.join("")};function mr(d){return new $s(d)}function $o(d,v,b){d.j=b?Ze(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Si(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function Ci(d,v,b){v instanceof ys?(d.i=v,vs(d.i,d.h)):(b||(v=Ni(v,Dd)),d.i=new ys(v,d.h))}function pt(d,v,b){d.i.set(v,b)}function Ai(d){return pt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ze(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ni(d,v,b){return typeof d=="string"?(d=encodeURI(d).replace(v,Nd),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Nd(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var $a=/[#\/\?@]/g,Rd=/[#\?:]/g,Pd=/[#\?]/g,Dd=/[#\?@]/g,Sc=/#/g;function ys(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function yn(d){d.g||(d.g=new Map,d.h=0,d.i&&Ap(d.i,function(v,b){d.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}t=ys.prototype,t.add=function(d,v){yn(this),this.i=null,d=Sr(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(v),this.h+=1,this};function Gr(d,v){yn(d),v=Sr(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Qr(d,v){return yn(d),v=Sr(d,v),d.g.has(v)}t.forEach=function(d,v){yn(this),this.g.forEach(function(b,A){b.forEach(function(K){d.call(v,K,A,this)},this)},this)},t.na=function(){yn(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let A=0;A<v.length;A++){const K=d[A];for(let J=0;J<K.length;J++)b.push(v[A])}return b},t.V=function(d){yn(this);let v=[];if(typeof d=="string")Qr(this,d)&&(v=v.concat(this.g.get(Sr(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)v=v.concat(d[b])}return v},t.set=function(d,v){return yn(this),this.i=null,d=Sr(this,d),Qr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},t.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function Ri(d,v,b){Gr(d,v),0<b.length&&(d.i=null,d.g.set(Sr(d,v),k(b)),d.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var A=v[b];const J=encodeURIComponent(String(A)),ue=this.V(A);for(A=0;A<ue.length;A++){var K=J;ue[A]!==""&&(K+="="+encodeURIComponent(String(ue[A]))),d.push(K)}}return this.i=d.join("&")};function Sr(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function vs(d,v){v&&!d.j&&(yn(d),d.i=null,d.g.forEach(function(b,A){var K=A.toLowerCase();A!=K&&(Gr(this,A),Ri(this,K,b))},d)),d.j=v}function Np(d,v){const b=new gn;if(u.Image){const A=new Image;A.onload=E(Xn,b,"TestLoadImage: loaded",!0,v,A),A.onerror=E(Xn,b,"TestLoadImage: error",!1,v,A),A.onabort=E(Xn,b,"TestLoadImage: abort",!1,v,A),A.ontimeout=E(Xn,b,"TestLoadImage: timeout",!1,v,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else v(!1)}function jd(d,v){const b=new gn,A=new AbortController,K=setTimeout(()=>{A.abort(),Xn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:A.signal}).then(J=>{clearTimeout(K),J.ok?Xn(b,"TestPingServer: ok",!0,v):Xn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(K),Xn(b,"TestPingServer: error",!1,v)})}function Xn(d,v,b,A,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),A(b)}catch{}}function Rp(){this.g=new Mo}function Od(d,v,b){const A=b||"";try{Ii(d,function(K,J){let ue=K;m(K)&&(ue=Bs(K)),v.push(A+J+"="+encodeURIComponent(ue))})}catch(K){throw v.push(A+"type="+encodeURIComponent("_badmap")),K}}function Ws(d){this.l=d.Ub||null,this.j=d.eb||!1}C(Ws,gs),Ws.prototype.g=function(){return new Wo(this.l,this.j)},Ws.prototype.i=(function(d){return function(){return d}})({});function Wo(d,v){Ft.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Wo,Ft),t=Wo.prototype,t.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,Yr(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||u).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Yr(this)),this.g&&(this.readyState=3,Yr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ld(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ld(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Zr(this):Yr(this),this.readyState==3&&Ld(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Zr(this))},t.Qa=function(d){this.g&&(this.response=d,Zr(this))},t.ga=function(){this.g&&Zr(this)};function Zr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Yr(d)}t.setRequestHeader=function(d,v){this.u.append(d,v)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=v.next();return d.join(`\r
`)};function Yr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Wo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function qs(d){let v="";return te(d,function(b,A){v+=A,v+=":",v+=b,v+=`\r
`}),v}function Pi(d,v,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=qs(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):pt(d,v,b))}function Et(d){Ft.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Et,Ft);var Pp=/^https?$/i,Cc=["POST","PUT"];t=Et.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,v,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hr.g(),this.v=this.o?ki(this.o):ki(Hr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(J){qo(this,J);return}if(d=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var K in A)b.set(K,A[K]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())b.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(J=>J.toLowerCase()=="content-type"),K=u.FormData&&d instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Cc,v,void 0))||A||K||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ue]of b)this.g.setRequestHeader(J,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qa(this),this.u=!0,this.g.send(d),this.u=!1}catch(J){qo(this,J)}};function qo(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,Wa(d),gr(d)}function Wa(d){d.A||(d.A=!0,mt(d,"complete"),mt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,mt(this,"complete"),mt(this,"abort"),gr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gr(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ac(this):this.bb())},t.bb=function(){Ac(this)};function Ac(d){if(d.h&&typeof l<"u"&&(!d.v[1]||er(d)!=4||d.Z()!=2)){if(d.u&&er(d)==4)$r(d.Ea,0,d);else if(mt(d,"readystatechange"),er(d)==4){d.h=!1;try{const ue=d.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var A;if(A=ue===0){var K=String(d.D).match(Bo)[1]||null;!K&&u.self&&u.self.location&&(K=u.self.location.protocol.slice(0,-1)),A=!Pp.test(K?K.toLowerCase():"")}b=A}if(b)mt(d,"complete"),mt(d,"success");else{d.m=6;try{var J=2<er(d)?d.g.statusText:""}catch{J=""}d.l=J+" ["+d.Z()+"]",Wa(d)}}finally{gr(d)}}}}function gr(d,v){if(d.g){qa(d);const b=d.g,A=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||mt(d,"ready");try{b.onreadystatechange=A}catch{}}}function qa(d){d.I&&(u.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function er(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),xi(v)}};function Nc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ha(d){const v={};d=(d.g&&2<=er(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(B(d[A]))continue;var b=O(d[A]);const K=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const J=v[K]||[];v[K]=J,J.push(b)}S(v,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(d,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||v}function Rc(d){this.Aa=0,this.i=[],this.j=new gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,d),this.cb=_s("retryDelaySeedMs",1e4,d),this.Wa=_s("forwardChannelMaxRetries",2,d),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Uo(d&&d.concurrentRequestLimit),this.Da=new Rp,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rc.prototype,t.la=8,t.G=1,t.connect=function(d,v,b,A){qe(0),this.W=d,this.H=v||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.I=zd(this,null,this.W),ws(this)};function vn(d){if(Ka(d),d.G==3){var v=d.U++,b=mr(d.I);if(pt(b,"SID",d.K),pt(b,"RID",v),pt(b,"TYPE","terminate"),Hs(d,b),v=new Kr(d,d.j,v),v.L=2,v.v=Ai(mr(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&u.Image&&(new Image().src=v.v,b=!0),b||(v.g=Ud(v.j,null),v.g.ea(v.v)),v.F=Date.now(),gt(v)}Fd(d)}function Jr(d){d.g&&(Pc(d),d.g.cancel(),d.g=null)}function Ka(d){Jr(d),d.u&&(u.clearTimeout(d.u),d.u=null),Za(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&u.clearTimeout(d.s),d.s=null)}function ws(d){if(!pr(d.h)&&!d.s){d.s=!0;var v=d.Ga;Ae||de(),Y||(Ae(),Y=!0),pe.add(v,d),d.B=0}}function Dp(d,v){return Sd(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ot(x(d.Ga,d,v),Vd(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const K=new Kr(this,this.j,d);let J=this.o;if(this.S&&(J?(J=I(J),P(J,this.S)):J=this.S),this.m!==null||this.O||(K.H=J,J=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=Di(this,K,v),b=mr(this.I),pt(b,"RID",d),pt(b,"CVER",22),this.D&&pt(b,"X-HTTP-Session-Id",this.D),Hs(this,b),J&&(this.O?v="headers="+encodeURIComponent(String(qs(J)))+"&"+v:this.m&&Pi(b,this.m,J)),Ic(this.h,K),this.Ua&&pt(b,"TYPE","init"),this.P?(pt(b,"$req",v),pt(b,"SID","null"),K.T=!0,za(K,b,null)):za(K,b,v),this.G=2}}else this.G==3&&(d?Ga(this,d):this.i.length==0||pr(this.h)||Ga(this))};function Ga(d,v){var b;v?b=v.l:b=d.U++;const A=mr(d.I);pt(A,"SID",d.K),pt(A,"RID",b),pt(A,"AID",d.T),Hs(d,A),d.m&&d.o&&Pi(A,d.m,d.o),b=new Kr(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),v&&(d.i=v.D.concat(d.i)),v=Di(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Ic(d.h,b),za(b,A,v)}function Hs(d,v){d.H&&te(d.H,function(b,A){pt(v,A,b)}),d.l&&Ii({},function(b,A){pt(v,A,b)})}function Di(d,v,b){b=Math.min(d.i.length,b);var A=d.l?x(d.l.Na,d.l,d):null;e:{var K=d.i;let J=-1;for(;;){const ue=["count="+b];J==-1?0<b?(J=K[0].g,ue.push("ofs="+J)):J=0:ue.push("ofs="+J);let ut=!0;for(let Jt=0;Jt<b;Jt++){let rt=K[Jt].g;const on=K[Jt].map;if(rt-=J,0>rt)J=Math.max(0,K[Jt].g-100),ut=!1;else try{Od(on,ue,"req"+rt+"_")}catch{A&&A(on)}}if(ut){A=ue.join("&");break e}}}return d=d.i.splice(0,b),v.D=d,A}function Ho(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;Ae||de(),Y||(Ae(),Y=!0),pe.add(v,d),d.v=0}}function Qa(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ot(x(d.Fa,d),Vd(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Md(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ot(x(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qe(10),Jr(this),Md(this))};function Pc(d){d.A!=null&&(u.clearTimeout(d.A),d.A=null)}function Md(d){d.g=new Kr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=mr(d.qa);pt(v,"RID","rpc"),pt(v,"SID",d.K),pt(v,"AID",d.T),pt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&pt(v,"TO",d.ja),pt(v,"TYPE","xmlhttp"),Hs(d,v),d.m&&d.o&&Pi(v,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Ai(mr(v)),b.m=null,b.P=!0,Ec(b,d)}t.Za=function(){this.C!=null&&(this.C=null,Jr(this),Qa(this),qe(19))};function Za(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function Ya(d,v){var b=null;if(d.g==v){Za(d),Pc(d),d.g=null;var A=2}else if(zn(d.h,v))b=v.D,Cd(d.h,v),A=1;else return;if(d.G!=0){if(v.o)if(A==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var K=d.B;A=$t(),mt(A,new Fn(A,b)),ws(d)}else Ho(d);else if(K=v.s,K==3||K==0&&0<v.X||!(A==1&&Dp(d,v)||A==2&&Qa(d)))switch(b&&0<b.length&&(v=d.h,v.i=v.i.concat(b)),K){case 1:Ks(d,5);break;case 4:Ks(d,10);break;case 3:Ks(d,6);break;default:Ks(d,2)}}}function Vd(d,v){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*v}function Ks(d,v){if(d.j.info("Error code "+v),v==2){var b=x(d.fb,d),A=d.Xa;const K=!A;A=new $s(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||$o(A,"https"),Ai(A),K?Np(A.toString(),b):jd(A.toString(),b)}else qe(2);d.G=0,d.l&&d.l.sa(v),Fd(d),Ka(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function Fd(d){if(d.G=0,d.ka=[],d.l){const v=Ad(d.h);(v.length!=0||d.i.length!=0)&&(R(d.ka,v),R(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function zd(d,v,b){var A=b instanceof $s?mr(b):new $s(b);if(A.g!="")v&&(A.g=v+"."+A.g),Si(A,A.s);else{var K=u.location;A=K.protocol,v=v?v+"."+K.hostname:K.hostname,K=+K.port;var J=new $s(null);A&&$o(J,A),v&&(J.g=v),K&&Si(J,K),b&&(J.l=b),A=J}return b=d.D,v=d.ya,b&&v&&pt(A,b,v),pt(A,"VER",d.la),Hs(d,A),A}function Ud(d,v,b){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new Et(new Ws({eb:b})):new Et(d.pa),v.Ha(d.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dc(){}t=Dc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ja(){}Ja.prototype.g=function(d,v){return new Un(d,v)};function Un(d,v){Ft.call(this),this.g=new Rc(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!B(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!B(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new bs(this)}C(Un,Ft),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){vn(this.g)},Un.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=Bs(d),d=b);v.i.push(new Id(v.Ya++,d)),v.G==3&&ws(v)},Un.prototype.N=function(){this.g.l=null,delete this.j,vn(this.g),delete this.g,Un.aa.N.call(this)};function Bd(d){ft.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const b in v){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}C(Bd,ft);function $d(){Bt.call(this),this.status=1}C($d,Bt);function bs(d){this.g=d}C(bs,Dc),bs.prototype.ua=function(){mt(this.g,"a")},bs.prototype.ta=function(d){mt(this.g,new Bd(d))},bs.prototype.sa=function(d){mt(this.g,new $d)},bs.prototype.ra=function(){mt(this.g,"b")},Ja.prototype.createWebChannel=Ja.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,VE=function(){return new Ja},ME=function(){return $t()},LE=kt,Jg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,uf=Va,xd.COMPLETE="complete",OE=xd,Ei.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",Ft.prototype.listen=Ft.prototype.K,uu=Ei,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,jE=Et}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});const xb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=new Fy("@firebase/firestore");function su(){return Ia.logLevel}function ke(t,...e){if(Ia.logLevel<=et.DEBUG){const n=e.map(Yy);Ia.debug(`Firestore (${dc}): ${t}`,...n)}}function pi(t,...e){if(Ia.logLevel<=et.ERROR){const n=e.map(Yy);Ia.error(`Firestore (${dc}): ${t}`,...n)}}function Ql(t,...e){if(Ia.logLevel<=et.WARN){const n=e.map(Yy);Ia.warn(`Firestore (${dc}): ${t}`,...n)}}function Yy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t="Unexpected state"){const e=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: `+t;throw pi(e),new Error(e)}function dt(t,e){t||Ve()}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends yi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(jn.UNAUTHENTICATED)))}shutdown(){}}class MP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class VP{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){dt(this.o===void 0);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let a=new _o;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new _o,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},u=h=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new _o)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt(typeof r.accessToken=="string"),new FE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string"),new jn(e)}}class FP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new FP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class UP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){dt(this.o===void 0);const r=a=>{a.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(dt(typeof n.token=="string"),this.R=n.token,new UP(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=$P(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function lt(t,e){return t<e?-1:t>e?1:0}function Zl(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new xt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ze(e)}static min(){return new ze(new xt(0,0))}static max(){return new ze(new xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ve(),r===void 0?r=e.length-n:r>e.length-n&&Ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ju.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ju?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),l=n.get(s);if(a<l)return-1;if(a>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class bt extends ju{construct(e,n,r){return new bt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const WP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends ju{construct(e,n,r){return new kn(e,n,r)}static isValidIdentifier(e){return WP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(a(),s++)}if(a(),l)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(n)}static emptyPath(){return new kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(bt.fromString(e))}static fromName(e){return new Ce(bt.fromString(e).popFirst(5))}static empty(){return new Ce(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new bt(e.slice()))}}function qP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new xo(s,Ce.empty(),e)}function HP(t){return new xo(t.readTime,t.key,-1)}class xo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xo(ze.min(),Ce.empty(),-1)}static max(){return new xo(ze.max(),Ce.empty(),-1)}}function KP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==GP)throw t;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,r)=>{n(e)}))}static reject(e){return new oe(((n,r)=>{r(e)}))}static waitFor(e){return new oe(((n,r)=>{let s=0,a=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++a,l&&a===s&&n()}),(h=>r(h)))})),l=!0,a===s&&n()}))}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next((s=>s?oe.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,a)=>{r.push(n.call(this,s,a))})),this.waitFor(r)}static mapArray(e,n){return new oe(((r,s)=>{const a=e.length,l=new Array(a);let u=0;for(let h=0;h<a;h++){const m=h;n(e[m]).next((y=>{l[m]=y,++u,u===a&&r(l)}),(y=>s(y)))}}))}static doWhile(e,n){return new oe(((r,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):r()};a()}))}}function ZP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ld(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jy.oe=-1;function sp(t){return t==null}function Rf(t){return t===0&&1/t==-1/0}function YP(t){return typeof t=="number"&&Number.isInteger(t)&&!Rf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ra(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function UE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||bn.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uh(this.root,e,this.comparator,!0)}}class Uh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??bn.RED,this.left=s??bn.EMPTY,this.right=a??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new bn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return bn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ve();const e=this.left.check();if(e!==this.right.check())throw Ve();return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve()}get value(){throw Ve()}get color(){throw Ve()}get left(){throw Ve()}get right(){throw Ve()}copy(e,n,r,s,a){return this}insert(e,n,r){return new bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Eb(this.data.getIterator())}getIteratorFrom(e){return new Eb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new En(this.comparator);return n.data=e,n}}class Eb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new br([])}unionWith(e){let n=new En(kn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new br(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new BE("Invalid base64 string: "+a):a}})(e);return new In(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new In(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}In.EMPTY_BYTE_STRING=new In("");const JP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ko(t){if(dt(!!t),typeof t=="string"){let e=0;const n=JP.exec(t);if(dt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sa(t){return typeof t=="string"?In.fromBase64String(t):In.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function e0(t){const e=t.mapValue.fields.__previous_value__;return Xy(e)?e0(e):e}function Ou(t){const e=ko(t.mapValue.fields.__local_write_time__.timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n,r,s,a,l,u,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=m}}class Lu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Lu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh={mapValue:{}};function Ca(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xy(t)?4:tD(t)?9007199254740991:eD(t)?10:11:Ve()}function Os(t,e){if(t===e)return!0;const n=Ca(t);if(n!==Ca(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ou(t).isEqual(Ou(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=ko(s.timestampValue),u=ko(a.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return Sa(s.bytesValue).isEqual(Sa(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return Ut(s.geoPointValue.latitude)===Ut(a.geoPointValue.latitude)&&Ut(s.geoPointValue.longitude)===Ut(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Ut(s.integerValue)===Ut(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Ut(s.doubleValue),u=Ut(a.doubleValue);return l===u?Rf(l)===Rf(u):isNaN(l)&&isNaN(u)}return!1})(t,e);case 9:return Zl(t.arrayValue.values||[],e.arrayValue.values||[],Os);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},u=a.mapValue.fields||{};if(kb(l)!==kb(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!Os(l[h],u[h])))return!1;return!0})(t,e);default:return Ve()}}function Mu(t,e){return(t.values||[]).find((n=>Os(n,e)))!==void 0}function Yl(t,e){if(t===e)return 0;const n=Ca(t),r=Ca(e);if(n!==r)return lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const u=Ut(a.integerValue||a.doubleValue),h=Ut(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(t,e);case 3:return Tb(t.timestampValue,e.timestampValue);case 4:return Tb(Ou(t),Ou(e));case 5:return lt(t.stringValue,e.stringValue);case 6:return(function(a,l){const u=Sa(a),h=Sa(l);return u.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const u=a.split("/"),h=l.split("/");for(let m=0;m<u.length&&m<h.length;m++){const y=lt(u[m],h[m]);if(y!==0)return y}return lt(u.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const u=lt(Ut(a.latitude),Ut(l.latitude));return u!==0?u:lt(Ut(a.longitude),Ut(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Ib(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var u,h,m,y;const w=a.fields||{},x=l.fields||{},E=(u=w.value)===null||u===void 0?void 0:u.arrayValue,C=(h=x.value)===null||h===void 0?void 0:h.arrayValue,k=lt(((m=E==null?void 0:E.values)===null||m===void 0?void 0:m.length)||0,((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0);return k!==0?k:Ib(E,C)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Bh.mapValue&&l===Bh.mapValue)return 0;if(a===Bh.mapValue)return 1;if(l===Bh.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),m=l.fields||{},y=Object.keys(m);h.sort(),y.sort();for(let w=0;w<h.length&&w<y.length;++w){const x=lt(h[w],y[w]);if(x!==0)return x;const E=Yl(u[h[w]],m[y[w]]);if(E!==0)return E}return lt(h.length,y.length)})(t.mapValue,e.mapValue);default:throw Ve()}}function Tb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lt(t,e);const n=ko(t),r=ko(e),s=lt(n.seconds,r.seconds);return s!==0?s:lt(n.nanos,r.nanos)}function Ib(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Yl(n[s],r[s]);if(a)return a}return lt(n.length,r.length)}function Jl(t){return Xg(t)}function Xg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ko(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Sa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ce.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Xg(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${Xg(n.fields[l])}`;return s+"}"})(t.mapValue):Ve()}function Sb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ey(t){return!!t&&"integerValue"in t}function t0(t){return!!t&&"arrayValue"in t}function Cb(t){return!!t&&"nullValue"in t}function Ab(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function df(t){return!!t&&"mapValue"in t}function eD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function bu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ra(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=bu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.value=e}static empty(){return new cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!df(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bu(n)}setAll(e){let n=kn.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=bu(l):s.push(u.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());df(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Os(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];df(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ra(n,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new cr(bu(this.value))}}function $E(t){const e=[];return Ra(t.fields,((n,r)=>{const s=new kn([n]);if(df(r)){const a=$E(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n,r,s,a,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=u}static newInvalidDocument(e){return new On(e,0,ze.min(),ze.min(),ze.min(),cr.empty(),0)}static newFoundDocument(e,n,r,s){return new On(e,1,n,ze.min(),r,s,0)}static newNoDocument(e,n){return new On(e,2,n,ze.min(),ze.min(),cr.empty(),0)}static newUnknownDocument(e,n){return new On(e,3,n,ze.min(),ze.min(),cr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n){this.position=e,this.inclusive=n}}function Nb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?r=Ce.comparator(Ce.fromName(l.referenceValue),n.key):r=Yl(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Os(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n="asc"){this.field=e,this.dir=n}}function nD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{}class Qt extends WE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sD(e,n,r):n==="array-contains"?new aD(e,r):n==="in"?new lD(e,r):n==="not-in"?new cD(e,r):n==="array-contains-any"?new uD(e,r):new Qt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new iD(e,r):new oD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Yl(n,this.value)):n!==null&&Ca(this.value)===Ca(n)&&this.matchesComparison(Yl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ds extends WE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ds(e,n)}matches(e){return qE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function qE(t){return t.op==="and"}function HE(t){return rD(t)&&qE(t)}function rD(t){for(const e of t.filters)if(e instanceof ds)return!1;return!0}function ty(t){if(t instanceof Qt)return t.field.canonicalString()+t.op.toString()+Jl(t.value);if(HE(t))return t.filters.map((e=>ty(e))).join(",");{const e=t.filters.map((n=>ty(n))).join(",");return`${t.op}(${e})`}}function KE(t,e){return t instanceof Qt?(function(r,s){return s instanceof Qt&&r.op===s.op&&r.field.isEqual(s.field)&&Os(r.value,s.value)})(t,e):t instanceof ds?(function(r,s){return s instanceof ds&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,u)=>a&&KE(l,s.filters[u])),!0):!1})(t,e):void Ve()}function GE(t){return t instanceof Qt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Jl(n.value)}`})(t):t instanceof ds?(function(n){return n.op.toString()+" {"+n.getFilters().map(GE).join(" ,")+"}"})(t):"Filter"}class sD extends Qt{constructor(e,n,r){super(e,n,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class iD extends Qt{constructor(e,n){super(e,"in",n),this.keys=QE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class oD extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=QE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function QE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>Ce.fromName(r.referenceValue)))}class aD extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return t0(n)&&Mu(n.arrayValue,this.value)}}class lD extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mu(this.value.arrayValue,n)}}class cD extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Mu(this.value.arrayValue,n)}}class uD extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!t0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Mu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n=null,r=[],s=[],a=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=u,this.ue=null}}function Pb(t,e=null,n=[],r=[],s=null,a=null,l=null){return new dD(t,e,n,r,s,a,l)}function n0(t){const e=Ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>ty(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),sp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Jl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Jl(r))).join(",")),e.ue=n}return e.ue}function r0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Rb(t.startAt,e.startAt)&&Rb(t.endAt,e.endAt)}function ny(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n=null,r=[],s=[],a=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=u,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hD(t,e,n,r,s,a,l,u){return new hc(t,e,n,r,s,a,l,u)}function s0(t){return new hc(t)}function Db(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZE(t){return t.collectionGroup!==null}function xu(t){const e=Ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new En(kn.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((m=>{m.isInequality()&&(u=u.add(m.field))}))})),u})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Vu(a,r))})),n.has(kn.keyField().canonicalString())||e.ce.push(new Vu(kn.keyField(),r))}return e.ce}function Ps(t){const e=Ue(t);return e.le||(e.le=fD(e,xu(t))),e.le}function fD(t,e){if(t.limitType==="F")return Pb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Vu(s.field,a)}));const n=t.endAt?new Pf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pf(t.startAt.position,t.startAt.inclusive):null;return Pb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ry(t,e){const n=t.filters.concat([e]);return new hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Df(t,e,n){return new hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ip(t,e){return r0(Ps(t),Ps(e))&&t.limitType===e.limitType}function YE(t){return`${n0(Ps(t))}|lt:${t.limitType}`}function xl(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>GE(s))).join(", ")}]`),sp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Jl(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Jl(s))).join(",")),`Target(${r})`})(Ps(t))}; limitType=${t.limitType})`}function op(t,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ce.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,s){for(const a of xu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,h){const m=Nb(l,u,h);return l.inclusive?m<=0:m<0})(r.startAt,xu(r),s)||r.endAt&&!(function(l,u,h){const m=Nb(l,u,h);return l.inclusive?m>=0:m>0})(r.endAt,xu(r),s))})(t,e)}function pD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JE(t){return(e,n)=>{let r=!1;for(const s of xu(t)){const a=mD(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function mD(t,e,n){const r=t.field.isKeyField()?Ce.comparator(e.key,n.key):(function(a,l,u){const h=l.data.field(a),m=u.data.field(a);return h!==null&&m!==null?Yl(h,m):Ve()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,((n,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return UE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=new Rt(Ce.comparator);function mi(){return gD}const XE=new Rt(Ce.comparator);function du(...t){let e=XE;for(const n of t)e=e.insert(n.key,n);return e}function eT(t){let e=XE;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function da(){return ku()}function tT(){return ku()}function ku(){return new fc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const yD=new Rt(Ce.comparator),vD=new En(Ce.comparator);function Ge(...t){let e=vD;for(const n of t)e=e.add(n);return e}const _D=new En(lt);function wD(){return _D}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rf(e)?"-0":e}}function nT(t){return{integerValue:""+t}}function bD(t,e){return YP(e)?nT(e):i0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this._=void 0}}function xD(t,e,n){return t instanceof Fu?(function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Xy(a)&&(a=e0(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}})(n,e):t instanceof zu?sT(t,e):t instanceof Uu?iT(t,e):(function(s,a){const l=rT(s,a),u=jb(l)+jb(s.Pe);return ey(l)&&ey(s.Pe)?nT(u):i0(s.serializer,u)})(t,e)}function kD(t,e,n){return t instanceof zu?sT(t,e):t instanceof Uu?iT(t,e):n}function rT(t,e){return t instanceof jf?(function(r){return ey(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Fu extends ap{}class zu extends ap{constructor(e){super(),this.elements=e}}function sT(t,e){const n=oT(e);for(const r of t.elements)n.some((s=>Os(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Uu extends ap{constructor(e){super(),this.elements=e}}function iT(t,e){let n=oT(e);for(const r of t.elements)n=n.filter((s=>!Os(s,r)));return{arrayValue:{values:n}}}class jf extends ap{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function jb(t){return Ut(t.integerValue||t.doubleValue)}function oT(t){return t0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,n){this.field=e,this.transform=n}}function TD(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof zu&&s instanceof zu||r instanceof Uu&&s instanceof Uu?Zl(r.elements,s.elements,Os):r instanceof jf&&s instanceof jf?Os(r.Pe,s.Pe):r instanceof Fu&&s instanceof Fu})(t.transform,e.transform)}class ID{constructor(e,n){this.version=e,this.transformResults=n}}class Kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lp{}function aT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cp(t.key,Kn.none()):new cd(t.key,t.data,Kn.none());{const n=t.data,r=cr.empty();let s=new En(kn.comparator);for(let a of e.fields)if(!s.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new Co(t.key,r,new br(s.toArray()),Kn.none())}}function SD(t,e,n){t instanceof cd?(function(s,a,l){const u=s.value.clone(),h=Lb(s.fieldTransforms,a,l.transformResults);u.setAll(h),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,n):t instanceof Co?(function(s,a,l){if(!hf(s.precondition,a))return void a.convertToUnknownDocument(l.version);const u=Lb(s.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(lT(s)),h.setAll(u),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(t,e,n):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Eu(t,e,n,r){return t instanceof cd?(function(a,l,u,h){if(!hf(a.precondition,l))return u;const m=a.value.clone(),y=Mb(a.fieldTransforms,h,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(t,e,n,r):t instanceof Co?(function(a,l,u,h){if(!hf(a.precondition,l))return u;const m=Mb(a.fieldTransforms,h,l),y=l.data;return y.setAll(lT(a)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(t,e,n,r):(function(a,l,u){return hf(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(t,e,n)}function CD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=rT(r.transform,s||null);a!=null&&(n===null&&(n=cr.empty()),n.set(r.field,a))}return n||null}function Ob(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Zl(r,s,((a,l)=>TD(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cd extends lp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Co extends lp{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function lT(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Lb(t,e,n){const r=new Map;dt(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,u=e.data.field(a.field);r.set(a.field,kD(l,u,n[s]))}return r}function Mb(t,e,n){const r=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);r.set(s.field,xD(a,l,e))}return r}class cp extends lp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AD extends lp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&SD(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Eu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Eu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tT();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let u=this.applyToLocalView(l,a.mutatedFields);u=n.has(s.key)?null:u;const h=aT(l,u);h!==null&&r.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(ze.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Zl(this.mutations,e.mutations,((n,r)=>Ob(n,r)))&&Zl(this.baseMutations,e.baseMutations,((n,r)=>Ob(n,r)))}}class o0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){dt(e.mutations.length===r.length);let s=(function(){return yD})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new o0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,st;function DD(t){switch(t){default:return Ve();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function cT(t){if(t===void 0)return pi("GRPC error has no .code"),re.UNKNOWN;switch(t){case Gt.OK:return re.OK;case Gt.CANCELLED:return re.CANCELLED;case Gt.UNKNOWN:return re.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return re.INTERNAL;case Gt.UNAVAILABLE:return re.UNAVAILABLE;case Gt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Gt.NOT_FOUND:return re.NOT_FOUND;case Gt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Gt.ABORTED:return re.ABORTED;case Gt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Gt.DATA_LOSS:return re.DATA_LOSS;default:return Ve()}}(st=Gt||(Gt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new ba([4294967295,4294967295],0);function Vb(t){const e=jD().encode(t),n=new DE;return n.update(e),new Uint8Array(n.digest())}function Fb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ba([n,r],0),new ba([s,a],0)]}class a0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hu(`Invalid padding: ${n}`);if(r<0)throw new hu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ba.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ba.fromNumber(r)));return s.compare(OD)===1&&(s=new ba([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Vb(e),[r,s]=Fb(n);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,s,a);if(!this.de(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new a0(a,s,n);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.Ie===0)return;const n=Vb(e),[r,s]=Fb(n);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,s,a);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ud.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new up(ze.min(),s,new Rt(lt),mi(),Ge())}}class ud{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ud(r,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class uT{constructor(e,n){this.targetId=e,this.me=n}}class dT{constructor(e,n,r=In.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class zb{constructor(){this.fe=0,this.ge=Bb(),this.pe=In.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ge(),n=Ge(),r=Ge();return this.ge.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ve()}})),new ud(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Bb()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,dt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class LD{constructor(e){this.Le=e,this.Be=new Map,this.ke=mi(),this.qe=Ub(),this.Qe=new Rt(lt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ve()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,s)=>{this.ze(s)&&n(s)}))}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(ny(a))if(r===0){const l=new Ce(a.path);this.Ue(n,l,On.newNoDocument(l,ze.min()))}else dt(r===1);else{const l=this.Ye(n);if(l!==r){const u=this.Ze(e),h=u?this.Xe(u,e,l):1;if(h!==0){this.je(n);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let l,u;try{l=Sa(r).toUint8Array()}catch(h){if(h instanceof BE)return Ql("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new a0(l,s,a)}catch(h){return Ql(h instanceof hu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach((a=>{const l=this.Le.tt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,a,null),s++)})),s}rt(e){const n=new Map;this.Be.forEach(((a,l)=>{const u=this.Je(l);if(u){if(a.current&&ny(u.target)){const h=new Ce(u.target.path);this.ke.get(h)!==null||this.it(l,h)||this.Ue(l,h,On.newNoDocument(h,e))}a.be&&(n.set(l,a.ve()),a.Ce())}}));let r=Ge();this.qe.forEach(((a,l)=>{let u=!0;l.forEachWhile((h=>{const m=this.Je(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(a))})),this.ke.forEach(((a,l)=>l.setReadTime(e)));const s=new up(e,n,this.Qe,this.ke,r);return this.ke=mi(),this.qe=Ub(),this.Qe=new Rt(lt),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new zb,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new En(lt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zb),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ub(){return new Rt(Ce.comparator)}function Bb(){return new Rt(Ce.comparator)}const MD={asc:"ASCENDING",desc:"DESCENDING"},VD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FD={and:"AND",or:"OR"};class zD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sy(t,e){return t.useProto3Json||sp(e)?e:{value:e}}function Of(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UD(t,e){return Of(t,e.toTimestamp())}function Ds(t){return dt(!!t),ze.fromTimestamp((function(n){const r=ko(n);return new xt(r.seconds,r.nanos)})(t))}function l0(t,e){return iy(t,e).canonicalString()}function iy(t,e){const n=(function(s){return new bt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function fT(t){const e=bt.fromString(t);return dt(vT(e)),e}function oy(t,e){return l0(t.databaseId,e.path)}function gg(t,e){const n=fT(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(mT(n))}function pT(t,e){return l0(t.databaseId,e)}function BD(t){const e=fT(t);return e.length===4?bt.emptyPath():mT(e)}function ay(t){return new bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mT(t){return dt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $b(t,e,n){return{name:oy(t,e),fields:n.value.mapValue.fields}}function $D(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ve()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,y){return m.useProto3Json?(dt(y===void 0||typeof y=="string"),In.fromBase64String(y||"")):(dt(y===void 0||y instanceof Buffer||y instanceof Uint8Array),In.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(m){const y=m.code===void 0?re.UNKNOWN:cT(m.code);return new ge(y,m.message||"")})(l);n=new dT(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=gg(t,r.document.name),a=Ds(r.document.updateTime),l=r.document.createTime?Ds(r.document.createTime):ze.min(),u=new cr({mapValue:{fields:r.document.fields}}),h=On.newFoundDocument(s,a,l,u),m=r.targetIds||[],y=r.removedTargetIds||[];n=new ff(m,y,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=gg(t,r.document),a=r.readTime?Ds(r.readTime):ze.min(),l=On.newNoDocument(s,a),u=r.removedTargetIds||[];n=new ff([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=gg(t,r.document),a=r.removedTargetIds||[];n=new ff([],a,s,null)}else{if(!("filter"in e))return Ve();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new PD(s,a),u=r.targetId;n=new uT(u,l)}}return n}function WD(t,e){let n;if(e instanceof cd)n={update:$b(t,e.key,e.value)};else if(e instanceof cp)n={delete:oy(t,e.key)};else if(e instanceof Co)n={update:$b(t,e.key,e.data),updateMask:XD(e.fieldMask)};else{if(!(e instanceof AD))return Ve();n={verify:oy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const u=l.transform;if(u instanceof Fu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof zu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Uu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof jf)return{fieldPath:l.field.canonicalString(),increment:u.Pe};throw Ve()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:UD(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ve()})(t,e.precondition)),n}function qD(t,e){return t&&t.length>0?(dt(e!==void 0),t.map((n=>(function(s,a){let l=s.updateTime?Ds(s.updateTime):Ds(a);return l.isEqual(ze.min())&&(l=Ds(a)),new ID(l,s.transformResults||[])})(n,e)))):[]}function HD(t,e){return{documents:[pT(t,e.path)]}}function KD(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pT(t,s);const a=(function(m){if(m.length!==0)return yT(ds.create(m,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(m){if(m.length!==0)return m.map((y=>(function(x){return{field:kl(x.field),direction:ZD(x.dir)}})(y)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=sy(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:n,parent:s}}function GD(t){let e=BD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){dt(r===1);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];n.where&&(a=(function(w){const x=gT(w);return x instanceof ds&&HE(x)?x.getFilters():[x]})(n.where));let l=[];n.orderBy&&(l=(function(w){return w.map((x=>(function(C){return new Vu(El(C.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(x)))})(n.orderBy));let u=null;n.limit&&(u=(function(w){let x;return x=typeof w=="object"?w.value:w,sp(x)?null:x})(n.limit));let h=null;n.startAt&&(h=(function(w){const x=!!w.before,E=w.values||[];return new Pf(E,x)})(n.startAt));let m=null;return n.endAt&&(m=(function(w){const x=!w.before,E=w.values||[];return new Pf(E,x)})(n.endAt)),hD(e,s,l,a,u,"F",h,m)}function QD(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=El(n.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=El(n.unaryFilter.field);return Qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=El(n.unaryFilter.field);return Qt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=El(n.unaryFilter.field);return Qt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ve()}})(t):t.fieldFilter!==void 0?(function(n){return Qt.create(El(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ve()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ds.create(n.compositeFilter.filters.map((r=>gT(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ve()}})(n.compositeFilter.op))})(t):Ve()}function ZD(t){return MD[t]}function YD(t){return VD[t]}function JD(t){return FD[t]}function kl(t){return{fieldPath:t.canonicalString()}}function El(t){return kn.fromServerFormat(t.fieldPath)}function yT(t){return t instanceof Qt?(function(n){if(n.op==="=="){if(Ab(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NAN"}};if(Cb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ab(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NAN"}};if(Cb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kl(n.field),op:YD(n.op),value:n.value}}})(t):t instanceof ds?(function(n){const r=n.getFilters().map((s=>yT(s)));return r.length===1?r[0]:{compositeFilter:{op:JD(n.op),filters:r}}})(t):Ve()}function XD(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function vT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,r,s,a=ze.min(),l=ze.min(),u=In.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new fo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.ct=e}}function tj(t){const e=GD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Df(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this.un=new rj}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(xo.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(xo.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class rj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new En(bt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new En(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xl(0)}static kn(){return new Xl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.changes=new fc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Eu(r.mutation,s,br.empty(),xt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ge()){const s=da();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((a=>{let l=du();return a.forEach(((u,h)=>{l=l.insert(u,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=da();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ge())))}populateOverlays(e,n,r){const s=[];return r.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,u)=>{n.set(l,u)}))}))}computeViews(e,n,r,s){let a=mi();const l=ku(),u=(function(){return ku()})();return n.forEach(((h,m)=>{const y=r.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof Co)?a=a.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),Eu(y.mutation,m,y.mutation.getFieldMask(),xt.now())):l.set(m.key,br.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((m,y)=>l.set(m,y))),n.forEach(((m,y)=>{var w;return u.set(m,new ij(y,(w=l.get(m))!==null&&w!==void 0?w:null))})),u)))}recalculateAndSaveOverlays(e,n){const r=ku();let s=new Rt(((l,u)=>l-u)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const u of l)u.keys().forEach((h=>{const m=n.get(h);if(m===null)return;let y=r.get(h)||br.empty();y=u.applyToLocalView(m,y),r.set(h,y);const w=(s.get(u.batchId)||Ge()).add(h);s=s.insert(u.batchId,w)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),m=h.key,y=h.value,w=tT();y.forEach((x=>{if(!a.has(x)){const E=aT(n.get(x),r.get(x));E!==null&&w.set(x,E),a=a.add(x)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,w))}return oe.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(l){return Ce.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):oe.resolve(da());let u=-1,h=a;return l.next((m=>oe.forEach(m,((y,w)=>(u<w.largestBatchId&&(u=w.largestBatchId),a.get(y)?oe.resolve():this.remoteDocumentCache.getEntry(e,y).next((x=>{h=h.insert(y,x)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,h,m,Ge()))).next((y=>({batchId:u,changes:eT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next((r=>{let s=du();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let l=du();return this.indexManager.getCollectionParents(e,a).next((u=>oe.forEach(u,(h=>{const m=(function(w,x){return new hc(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((y=>{y.forEach(((w,x)=>{l=l.insert(w,x)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s)))).next((l=>{a.forEach(((h,m)=>{const y=m.getKey();l.get(y)===null&&(l=l.insert(y,On.newInvalidDocument(y)))}));let u=du();return l.forEach(((h,m)=>{const y=a.get(h);y!==void 0&&Eu(y.mutation,m,br.empty(),xt.now()),op(n,m)&&(u=u.insert(h,m))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ds(s.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(s){return{name:s.name,query:tj(s.bundledQuery),readTime:Ds(s.readTime)}})(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.overlays=new Rt(Ce.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=da();return oe.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,a)=>{this.ht(e,n,a)})),oe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const s=da(),a=n.length+1,l=new Ce(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,m=h.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Rt(((m,y)=>m-y));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=a.get(m.largestBatchId);y===null&&(y=da(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const u=da(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((m,y)=>u.set(m,y))),!(u.size()>=s)););return oe.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new RD(n,r));let a=this.Ir.get(n);a===void 0&&(a=Ge(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.Tr=new En(dn.Er),this.dr=new En(dn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new dn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new dn(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new Ce(new bt([])),r=new dn(n,e),s=new dn(n,e+1),a=[];return this.dr.forEachInRange([r,s],(l=>{this.Vr(l),a.push(l.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ce(new bt([])),r=new dn(n,e),s=new dn(n,e+1);let a=Ge();return this.dr.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new dn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ce.comparator(e.key,n.key)||lt(e.wr,n.wr)}static Ar(e,n){return lt(e.wr,n.wr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new En(dn.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new ND(a,n,r,s);this.mutationQueue.push(l);for(const u of s)this.br=this.br.add(new dn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dn(n,0),s=new dn(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],(l=>{const u=this.Dr(l.wr);a.push(u)})),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new En(lt);return n.forEach((s=>{const a=new dn(s,0),l=new dn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,l],(u=>{r=r.add(u.wr)}))})),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Ce.isDocumentKey(a)||(a=a.child(""));const l=new dn(new Ce(a),0);let u=new En(lt);return this.br.forEachWhile((h=>{const m=h.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(u=u.add(h.wr)),!0)}),l),oe.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){dt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(n.mutations,(s=>{const a=new dn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new dn(n,0),s=this.br.firstAfterOrEqual(r);return oe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.Mr=e,this.docs=(function(){return new Rt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():On.newInvalidDocument(n))}getEntries(e,n){let r=mi();return n.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():On.newInvalidDocument(s))})),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=mi();const l=n.path,u=new Ce(l.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:y}}=h.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||KP(HP(y),r)<=0||(s.has(y.key)||op(n,y))&&(a=a.insert(y.key,y.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Ve()}Or(e,n){return oe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new hj(this)}getSize(e){return oe.resolve(this.size)}}class hj extends sj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.persistence=e,this.Nr=new fc((n=>n0(n)),r0),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.Lr=0,this.Br=new c0,this.targetCount=0,this.kr=Xl.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,s)=>n(s))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Xl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach(((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),oe.waitFor(a).next((()=>s))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),oe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jy(0),this.Kr=!1,this.Kr=!0,this.$r=new cj,this.referenceDelegate=e(this),this.Ur=new fj(this),this.indexManager=new nj,this.remoteDocumentCache=(function(s){return new dj(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new ej(n),this.Gr=new aj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new uj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const s=new mj(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((a=>this.referenceDelegate.jr(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Hr(e,n){return oe.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class mj extends QP{constructor(e){super(),this.currentSequenceNumber=e}}class u0{constructor(e){this.persistence=e,this.Jr=new c0,this.Yr=null}static Zr(e){return new u0(e)}get Xr(){if(this.Yr)return this.Yr;throw Ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,(r=>{const s=Ce.fromPath(r);return this.ei(e,s).next((a=>{a||n.removeEntry(s,ze.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ge(),s=Ge();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new d0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return XA()?8:ZP(Ln())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.Zi(e,n,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new gj;return this.Xi(e,n,l).next((u=>{if(a.result=u,this.zi)return this.es(e,n,l,u.size)}))})).next((()=>a.result))}es(e,n,r,s){return r.documentReadCount<this.ji?(su()<=et.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",xl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(su()<=et.DEBUG&&ke("QueryEngine","Query:",xl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(su()<=et.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",xl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ps(n))):oe.resolve())}Yi(e,n){if(Db(n))return oe.resolve(null);let r=Ps(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Df(n,null,"F"),r=Ps(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Ge(...a);return this.Ji.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const m=this.ts(n,u);return this.ns(n,m,l,h.readTime)?this.Yi(e,Df(n,null,"F")):this.rs(e,m,n,h)}))))})))))}Zi(e,n,r,s){return Db(n)||s.isEqual(ze.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const l=this.ts(n,a);return this.ns(n,l,r,s)?oe.resolve(null):(su()<=et.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xl(n)),this.rs(e,l,n,qP(s,-1)).next((u=>u)))}))}ts(e,n){let r=new En(JE(e));return n.forEach(((s,a)=>{op(e,a)&&(r=r.add(a))})),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return su()<=et.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",xl(n)),this.Ji.getDocumentsMatchingQuery(e,n,xo.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Rt(lt),this._s=new fc((a=>n0(a)),r0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function _j(t,e,n,r){return new vj(t,e,n,r)}async function _T(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],u=[];let h=Ge();for(const m of s){l.push(m.batchId);for(const y of m.mutations)h=h.add(y.key)}for(const m of a){u.push(m.batchId);for(const y of m.mutations)h=h.add(y.key)}return n.localDocuments.getDocuments(r,h).next((m=>({hs:m,removedBatchIds:l,addedBatchIds:u})))}))}))}function wj(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(u,h,m,y){const w=m.batch,x=w.keys();let E=oe.resolve();return x.forEach((C=>{E=E.next((()=>y.getEntry(h,C))).next((k=>{const R=m.docVersions.get(C);dt(R!==null),k.version.compareTo(R)<0&&(w.applyToRemoteDocument(k,m),k.isValidDocument()&&(k.setReadTime(m.commitVersion),y.addEntry(k)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(h,w)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=Ge();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function wT(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function bj(t,e){const n=Ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach(((y,w)=>{const x=s.get(w);if(!x)return;u.push(n.Ur.removeMatchingKeys(a,y.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(a,y.addedDocuments,w))));let E=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?E=E.withResumeToken(In.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):y.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(y.resumeToken,r)),s=s.insert(w,E),(function(k,R,q){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(x,E,y)&&u.push(n.Ur.updateTargetData(a,E))}));let h=mi(),m=Ge();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,y))})),u.push(xj(a,l,e.documentUpdates).next((y=>{h=y.Ps,m=y.Is}))),!r.isEqual(ze.min())){const y=n.Ur.getLastRemoteSnapshotVersion(a).next((w=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));u.push(y)}return oe.waitFor(u).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,h,m))).next((()=>h))})).then((a=>(n.os=s,a)))}function xj(t,e,n){let r=Ge(),s=Ge();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=mi();return n.forEach(((u,h)=>{const m=a.get(u);h.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(ze.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):ke("LocalStore","Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",h.version)})),{Ps:l,Is:s}}))}function kj(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Ej(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Ur.getTargetData(r,e).next((a=>a?(s=a,oe.resolve(s)):n.Ur.allocateTargetId(r).next((l=>(s=new fo(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function ly(t,e,n){const r=Ue(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!ld(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Wb(t,e,n){const r=Ue(t);let s=ze.min(),a=Ge();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,m,y){const w=Ue(h),x=w._s.get(y);return x!==void 0?oe.resolve(w.os.get(x)):w.Ur.getTargetData(m,y)})(r,l,Ps(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,u.targetId).next((h=>{a=h}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,n?s:ze.min(),n?a:Ge()))).next((u=>(Tj(r,pD(e),u),{documents:u,Ts:a})))))}function Tj(t,e,n){let r=t.us.get(e)||ze.min();n.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class qb{constructor(){this.activeTargetIds=wD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ij{constructor(){this.so=new qb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h=null;function yg(){return $h===null?$h=(function(){return 268435456+Math.round(2147483648*Math.random())})():$h++,"0x"+$h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class Nj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,l){const u=yg(),h=this.xo(n,r.toUriEncodedString());ke("RestConnection",`Sending RPC '${n}' ${u}:`,h,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,l),this.No(n,h,m,s).then((y=>(ke("RestConnection",`Received RPC '${n}' ${u}: `,y),y)),(y=>{throw Ql("RestConnection",`RPC '${n}' ${u} failed with error: `,y,"url: ",h,"request:",s),y}))}Lo(n,r,s,a,l,u){return this.Mo(n,r,s,a,l)}Oo(n,r,s){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dc})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,l)=>n[l]=a)),s&&s.headers.forEach(((a,l)=>n[l]=a))}xo(n,r){const s=Cj[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=yg();return new Promise(((l,u)=>{const h=new jE;h.setWithCredentials(!0),h.listenOnce(OE.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case uf.NO_ERROR:const y=h.getResponseJson();ke(Dn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),l(y);break;case uf.TIMEOUT:ke(Dn,`RPC '${e}' ${a} timed out`),u(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case uf.HTTP_ERROR:const w=h.getStatus();if(ke(Dn,`RPC '${e}' ${a} failed with status:`,w,"response text:",h.getResponseText()),w>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const E=x==null?void 0:x.error;if(E&&E.status&&E.message){const C=(function(R){const q=R.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(q)>=0?q:re.UNKNOWN})(E.status);u(new ge(C,E.message))}else u(new ge(re.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ge(re.UNAVAILABLE,"Connection failed."));break;default:Ve()}}finally{ke(Dn,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(s);ke(Dn,`RPC '${e}' ${a} sending request:`,s),h.send(n,"POST",m,r,15)}))}Bo(e,n,r){const s=yg(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=VE(),u=ME(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const y=a.join("");ke(Dn,`Creating RPC '${e}' stream ${s}: ${y}`,h);const w=l.createWebChannel(y,h);let x=!1,E=!1;const C=new Aj({Io:R=>{E?ke(Dn,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(x||(ke(Dn,`Opening RPC '${e}' stream ${s} transport.`),w.open(),x=!0),ke(Dn,`RPC '${e}' stream ${s} sending:`,R),w.send(R))},To:()=>w.close()}),k=(R,q,B)=>{R.listen(q,($=>{try{B($)}catch(H){setTimeout((()=>{throw H}),0)}}))};return k(w,uu.EventType.OPEN,(()=>{E||(ke(Dn,`RPC '${e}' stream ${s} transport opened.`),C.yo())})),k(w,uu.EventType.CLOSE,(()=>{E||(E=!0,ke(Dn,`RPC '${e}' stream ${s} transport closed`),C.So())})),k(w,uu.EventType.ERROR,(R=>{E||(E=!0,Ql(Dn,`RPC '${e}' stream ${s} transport errored:`,R),C.So(new ge(re.UNAVAILABLE,"The operation could not be completed")))})),k(w,uu.EventType.MESSAGE,(R=>{var q;if(!E){const B=R.data[0];dt(!!B);const $=B,H=$.error||((q=$[0])===null||q===void 0?void 0:q.error);if(H){ke(Dn,`RPC '${e}' stream ${s} received error:`,H);const F=H.status;let te=(function(N){const P=Gt[N];if(P!==void 0)return cT(P)})(F),S=H.message;te===void 0&&(te=re.INTERNAL,S="Unknown error status: "+F+" with message "+H.message),E=!0,C.So(new ge(te,S)),w.close()}else ke(Dn,`RPC '${e}' stream ${s} received:`,B),C.bo(B)}})),k(u,LE.STAT_EVENT,(R=>{R.stat===Jg.PROXY?ke(Dn,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Jg.NOPROXY&&ke(Dn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.wo()}),0),C}}function vg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t){return new zD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n,r,s,a,l,u,h){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(pi(n.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===n&&this.P_(r,s)}),(r=>{e((()=>{const s=new ge(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Rj extends xT{constructor(e,n,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=$D(this.serializer,e),r=(function(a){if(!("targetChange"in a))return ze.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?ze.min():l.readTime?Ds(l.readTime):ze.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ay(this.serializer),n.addTarget=(function(a,l){let u;const h=l.target;if(u=ny(h)?{documents:HD(a,h)}:{query:KD(a,h)._t},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=hT(a,l.resumeToken);const m=sy(a,l.expectedCount);m!==null&&(u.expectedCount=m)}else if(l.snapshotVersion.compareTo(ze.min())>0){u.readTime=Of(a,l.snapshotVersion.toTimestamp());const m=sy(a,l.expectedCount);m!==null&&(u.expectedCount=m)}return u})(this.serializer,e);const r=QD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ay(this.serializer),n.removeTarget=e,this.a_(n)}}class Pj extends xT{constructor(e,n,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return dt(!!e.streamToken),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=qD(e.writeResults,e.commitTime),r=Ds(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ay(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>WD(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Mo(e,iy(n,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(re.UNKNOWN,a.toString())}))}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Lo(e,iy(n,r),s,l,u,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(re.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class jj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pi(n),this.D_=!1):ke("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((l=>{r.enqueueAndForget((async()=>{Pa(this)&&(ke("RemoteStore","Restarting streams for network reachability change."),await(async function(h){const m=Ue(h);m.L_.add(4),await dd(m),m.q_.set("Unknown"),m.L_.delete(4),await hp(m)})(this))}))})),this.q_=new jj(r,s)}}async function hp(t){if(Pa(t))for(const e of t.B_)await e(!0)}async function dd(t){for(const e of t.B_)await e(!1)}function kT(t,e){const n=Ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),m0(n)?p0(n):pc(n).r_()&&f0(n,e))}function h0(t,e){const n=Ue(t),r=pc(n);n.N_.delete(e),r.r_()&&ET(n,e),n.N_.size===0&&(r.r_()?r.o_():Pa(n)&&n.q_.set("Unknown"))}function f0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pc(t).A_(e)}function ET(t,e){t.Q_.xe(e),pc(t).R_(e)}function p0(t){t.Q_=new LD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),pc(t).start(),t.q_.v_()}function m0(t){return Pa(t)&&!pc(t).n_()&&t.N_.size>0}function Pa(t){return Ue(t).L_.size===0}function TT(t){t.Q_=void 0}async function Lj(t){t.q_.set("Online")}async function Mj(t){t.N_.forEach(((e,n)=>{f0(t,e)}))}async function Vj(t,e){TT(t),m0(t)?(t.q_.M_(e),p0(t)):t.q_.set("Unknown")}async function Fj(t,e,n){if(t.q_.set("Online"),e instanceof dT&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const u of a.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.N_.delete(u),s.Q_.removeTarget(u))})(t,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lf(t,r)}else if(e instanceof ff?t.Q_.Ke(e):e instanceof uT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ze.min()))try{const r=await wT(t.localStore);n.compareTo(r)>=0&&await(function(a,l){const u=a.Q_.rt(l);return u.targetChanges.forEach(((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const y=a.N_.get(m);y&&a.N_.set(m,y.withResumeToken(h.resumeToken,l))}})),u.targetMismatches.forEach(((h,m)=>{const y=a.N_.get(h);if(!y)return;a.N_.set(h,y.withResumeToken(In.EMPTY_BYTE_STRING,y.snapshotVersion)),ET(a,h);const w=new fo(y.target,h,m,y.sequenceNumber);f0(a,w)})),a.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),await Lf(t,r)}}async function Lf(t,e,n){if(!ld(e))throw e;t.L_.add(1),await dd(t),t.q_.set("Offline"),n||(n=()=>wT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ke("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hp(t)}))}function IT(t,e){return e().catch((n=>Lf(t,n,e)))}async function fp(t){const e=Ue(t),n=Eo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zj(e);)try{const s=await kj(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Uj(e,s)}catch(s){await Lf(e,s)}ST(e)&&CT(e)}function zj(t){return Pa(t)&&t.O_.length<10}function Uj(t,e){t.O_.push(e);const n=Eo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ST(t){return Pa(t)&&!Eo(t).n_()&&t.O_.length>0}function CT(t){Eo(t).start()}async function Bj(t){Eo(t).p_()}async function $j(t){const e=Eo(t);for(const n of t.O_)e.m_(n.mutations)}async function Wj(t,e,n){const r=t.O_.shift(),s=o0.from(r,e,n);await IT(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await fp(t)}async function qj(t,e){e&&Eo(t).V_&&await(async function(r,s){if((function(l){return DD(l)&&l!==re.ABORTED})(s.code)){const a=r.O_.shift();Eo(r).s_(),await IT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await fp(r)}})(t,e),ST(t)&&CT(t)}async function Kb(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Pa(n);n.L_.add(3),await dd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hp(n)}async function Hj(t,e){const n=Ue(t);e?(n.L_.delete(2),await hp(n)):e||(n.L_.add(2),await dd(n),n.q_.set("Unknown"))}function pc(t){return t.K_||(t.K_=(function(n,r,s){const a=Ue(n);return a.w_(),new Rj(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Eo:Lj.bind(null,t),Ro:Mj.bind(null,t),mo:Vj.bind(null,t),d_:Fj.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),m0(t)?p0(t):t.q_.set("Unknown")):(await t.K_.stop(),TT(t))}))),t.K_}function Eo(t){return t.U_||(t.U_=(function(n,r,s){const a=Ue(n);return a.w_(),new Pj(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Bj.bind(null,t),mo:qj.bind(null,t),f_:$j.bind(null,t),g_:Wj.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await fp(t)):(await t.U_.stop(),t.O_.length>0&&(ke("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new _o,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const l=Date.now()+r,u=new g0(e,n,l,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y0(t,e){if(pi("AsyncQueue",`${e}: ${t}`),ld(t))return new ge(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ce.comparator(n.key,r.key):(n,r)=>Ce.comparator(n.key,r.key),this.keyedMap=du(),this.sortedSet=new Rt(this.comparator)}static emptySet(e){return new Pl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.W_=new Rt(Ce.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ec{constructor(e,n,r,s,a,l,u,h,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,s,a){const l=[];return n.forEach((u=>{l.push({type:0,doc:u})})),new ec(e,n,Pl.emptySet(n),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Gj{constructor(){this.queries=Qb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Ue(n),a=s.queries;s.queries=Qb(),a.forEach(((l,u)=>{for(const h of u.j_)h.onError(r)}))})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function Qb(){return new fc((t=>YE(t)),ip)}async function AT(t,e){const n=Ue(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new Kj,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=y0(l,`Initialization of query '${xl(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&v0(n)}async function NT(t,e){const n=Ue(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const l=a.j_.indexOf(e);l>=0&&(a.j_.splice(l,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Qj(t,e){const n=Ue(t);let r=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const u of l.j_)u.X_(s)&&(r=!0);l.z_=s}}r&&v0(n)}function Zj(t,e,n){const r=Ue(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function v0(t){t.Y_.forEach((e=>{e.next()}))}var cy,Zb;(Zb=cy||(cy={})).ea="default",Zb.Cache="cache";class RT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==cy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.key=e}}class DT{constructor(e){this.key=e}}class Yj{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ge(),this.mutatedKeys=Ge(),this.Aa=JE(e),this.Ra=new Pl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Gb,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,w)=>{const x=s.get(y),E=op(this.query,w)?w:null,C=!!x&&this.mutatedKeys.has(x.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;x&&E?x.data.isEqual(E.data)?C!==k&&(r.track({type:3,doc:E}),R=!0):this.ga(x,E)||(r.track({type:2,doc:E}),R=!0,(h&&this.Aa(E,h)>0||m&&this.Aa(E,m)<0)&&(u=!0)):!x&&E?(r.track({type:0,doc:E}),R=!0):x&&!E&&(r.track({type:1,doc:x}),R=!0,(h||m)&&(u=!0)),R&&(E?(l=l.add(E),a=k?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{Ra:l,fa:r,ns:u,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((y,w)=>(function(E,C){const k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve()}};return k(E)-k(C)})(y.type,w.type)||this.Aa(y.doc,w.doc))),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],h=this.da.size===0&&this.current&&!s?1:0,m=h!==this.Ea;return this.Ea=h,l.length!==0||m?{snapshot:new ec(this.query,e.Ra,a,l,e.mutatedKeys,h===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Gb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ge(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new DT(r))})),this.da.forEach((r=>{e.has(r)||n.push(new PT(r))})),n}ba(e){this.Ta=e.Ts,this.da=Ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ec.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Jj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Xj{constructor(e){this.key=e,this.va=!1}}class e4{constructor(e,n,r,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new fc((u=>YE(u)),ip),this.Ma=new Map,this.xa=new Set,this.Oa=new Rt(Ce.comparator),this.Na=new Map,this.La=new c0,this.Ba={},this.ka=new Map,this.qa=Xl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function t4(t,e,n=!0){const r=FT(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await jT(r,e,n,!0),s}async function n4(t,e){const n=FT(t);await jT(n,e,!0,!1)}async function jT(t,e,n,r){const s=await Ej(t.localStore,Ps(e)),a=s.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await r4(t,e,a,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&kT(t.remoteStore,s),u}async function r4(t,e,n,r,s){t.Ka=(w,x,E)=>(async function(k,R,q,B){let $=R.view.ma(q);$.ns&&($=await Wb(k.localStore,R.query,!1).then((({documents:S})=>R.view.ma(S,$))));const H=B&&B.targetChanges.get(R.targetId),F=B&&B.targetMismatches.get(R.targetId)!=null,te=R.view.applyChanges($,k.isPrimaryClient,H,F);return Jb(k,R.targetId,te.wa),te.snapshot})(t,w,x,E);const a=await Wb(t.localStore,e,!0),l=new Yj(e,a.Ts),u=l.ma(a.documents),h=ud.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),m=l.applyChanges(u,t.isPrimaryClient,h);Jb(t,n,m.wa);const y=new Jj(e,n,l);return t.Fa.set(e,y),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function s4(t,e,n){const r=Ue(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter((l=>!ip(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ly(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&h0(r.remoteStore,s.targetId),uy(r,s.targetId)})).catch(ad)):(uy(r,s.targetId),await ly(r.localStore,s.targetId,!0))}async function i4(t,e){const n=Ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),h0(n.remoteStore,r.targetId))}async function o4(t,e,n){const r=f4(t);try{const s=await(function(l,u){const h=Ue(l),m=xt.now(),y=u.reduce(((E,C)=>E.add(C.key)),Ge());let w,x;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let C=mi(),k=Ge();return h.cs.getEntries(E,y).next((R=>{C=R,C.forEach(((q,B)=>{B.isValidDocument()||(k=k.add(q))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,C))).next((R=>{w=R;const q=[];for(const B of u){const $=CD(B,w.get(B.key).overlayedDocument);$!=null&&q.push(new Co(B.key,$,$E($.value.mapValue),Kn.exists(!0)))}return h.mutationQueue.addMutationBatch(E,m,q,u)})).next((R=>{x=R;const q=R.applyToLocalDocumentSet(w,k);return h.documentOverlayCache.saveOverlays(E,R.batchId,q)}))})).then((()=>({batchId:x.batchId,changes:eT(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,h){let m=l.Ba[l.currentUser.toKey()];m||(m=new Rt(lt)),m=m.insert(u,h),l.Ba[l.currentUser.toKey()]=m})(r,s.batchId,n),await hd(r,s.changes),await fp(r.remoteStore)}catch(s){const a=y0(s,"Failed to persist write");n.reject(a)}}async function OT(t,e){const n=Ue(t);try{const r=await bj(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=n.Na.get(a);l&&(dt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?dt(l.va):s.removedDocuments.size>0&&(dt(l.va),l.va=!1))})),await hd(n,r,e)}catch(r){await ad(r)}}function Yb(t,e,n){const r=Ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach(((a,l)=>{const u=l.view.Z_(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const h=Ue(l);h.onlineState=u;let m=!1;h.queries.forEach(((y,w)=>{for(const x of w.j_)x.Z_(u)&&(m=!0)})),m&&v0(h)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a4(t,e,n){const r=Ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let l=new Rt(Ce.comparator);l=l.insert(a,On.newNoDocument(a,ze.min()));const u=Ge().add(a),h=new up(ze.min(),new Map,new Rt(lt),l,u);await OT(r,h),r.Oa=r.Oa.remove(a),r.Na.delete(e),_0(r)}else await ly(r.localStore,e,!1).then((()=>uy(r,e,n))).catch(ad)}async function l4(t,e){const n=Ue(t),r=e.batch.batchId;try{const s=await wj(n.localStore,e);MT(n,r,null),LT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hd(n,s)}catch(s){await ad(s)}}async function c4(t,e,n){const r=Ue(t);try{const s=await(function(l,u){const h=Ue(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return h.mutationQueue.lookupMutationBatch(m,u).next((w=>(dt(w!==null),y=w.keys(),h.mutationQueue.removeMutationBatch(m,w)))).next((()=>h.mutationQueue.performConsistencyCheck(m))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(m,y,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>h.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);MT(r,e,n),LT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hd(r,s)}catch(s){await ad(s)}}function LT(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function MT(t,e,n){const r=Ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function uy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||VT(t,r)}))}function VT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(h0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),_0(t))}function Jb(t,e,n){for(const r of n)r instanceof PT?(t.La.addReference(r.key,e),u4(t,r)):r instanceof DT?(ke("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||VT(t,r.key)):Ve()}function u4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ke("SyncEngine","New document in limbo: "+n),t.xa.add(r),_0(t))}function _0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ce(bt.fromString(e)),r=t.qa.next();t.Na.set(r,new Xj(n)),t.Oa=t.Oa.insert(n,r),kT(t.remoteStore,new fo(Ps(s0(n.path)),r,"TargetPurposeLimboResolution",Jy.oe))}}async function hd(t,e,n){const r=Ue(t),s=[],a=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((u,h)=>{l.push(r.Ka(h,e,n).then((m=>{var y;if((m||n)&&r.isPrimaryClient){const w=m?!m.fromCache:(y=n==null?void 0:n.targetChanges.get(h.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(h.targetId,w?"current":"not-current")}if(m){s.push(m);const w=d0.Wi(h.targetId,m);a.push(w)}})))})),await Promise.all(l),r.Ca.d_(s),await(async function(h,m){const y=Ue(h);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>oe.forEach(m,(x=>oe.forEach(x.$i,(E=>y.persistence.referenceDelegate.addReference(w,x.targetId,E))).next((()=>oe.forEach(x.Ui,(E=>y.persistence.referenceDelegate.removeReference(w,x.targetId,E)))))))))}catch(w){if(!ld(w))throw w;ke("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const x=w.targetId;if(!w.fromCache){const E=y.os.get(x),C=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(C);y.os=y.os.insert(x,k)}}})(r.localStore,a))}async function d4(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=await _T(n.localStore,e);n.currentUser=e,(function(a,l){a.ka.forEach((u=>{u.forEach((h=>{h.reject(new ge(re.CANCELLED,l))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hd(n,r.hs)}}function h4(t,e){const n=Ue(t),r=n.Na.get(e);if(r&&r.va)return Ge().add(r.key);{let s=Ge();const a=n.Ma.get(e);if(!a)return s;for(const l of a){const u=n.Fa.get(l);s=s.unionWith(u.view.Va)}return s}}function FT(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a4.bind(null,e),e.Ca.d_=Qj.bind(null,e.eventManager),e.Ca.$a=Zj.bind(null,e.eventManager),e}function f4(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c4.bind(null,e),e}class Mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return _j(this.persistence,new yj,e.initialUser,this.serializer)}Ga(e){return new pj(u0.Zr,this.serializer)}Wa(e){return new Ij}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mf.provider={build:()=>new Mf};class dy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=d4.bind(null,this.syncEngine),await Hj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Gj})()}createDatastore(e){const n=dp(e.databaseInfo.databaseId),r=(function(a){return new Nj(a)})(e.databaseInfo);return(function(a,l,u,h){return new Dj(a,l,u,h)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,a,l,u){return new Oj(r,s,a,l,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>Yb(this.syncEngine,n,0)),(function(){return Hb.D()?new Hb:new Sj})())}createSyncEngine(e,n){return(function(s,a,l,u,h,m,y){const w=new e4(s,a,l,u,h,m);return y&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=Ue(s);ke("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await dd(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}dy.provider={build:()=>new dy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=jn.UNAUTHENTICATED,this.clientId=zE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{ke("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _o;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=y0(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function _g(t,e){t.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await _T(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Xb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await m4(t);ke("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Kb(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Kb(e.remoteStore,s))),t._onlineComponents=e}async function m4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke("FirestoreClient","Using user provided OfflineComponentProvider");try{await _g(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Ql("Error using user provided cache. Falling back to memory cache: "+n),await _g(t,new Mf)}}else ke("FirestoreClient","Using default OfflineComponentProvider"),await _g(t,new Mf);return t._offlineComponents}async function UT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke("FirestoreClient","Using user provided OnlineComponentProvider"),await Xb(t,t._uninitializedComponentsProvider._online)):(ke("FirestoreClient","Using default OnlineComponentProvider"),await Xb(t,new dy))),t._onlineComponents}function g4(t){return UT(t).then((e=>e.syncEngine))}async function hy(t){const e=await UT(t),n=e.eventManager;return n.onListen=t4.bind(null,e.syncEngine),n.onUnlisten=s4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=n4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=i4.bind(null,e.syncEngine),n}function y4(t,e,n={}){const r=new _o;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,u,h,m){const y=new zT({next:x=>{y.Za(),l.enqueueAndForget((()=>NT(a,w))),x.fromCache&&h.source==="server"?m.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),w=new RT(u,y,{includeMetadataChanges:!0,_a:!0});return AT(a,w)})(await hy(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t,e,n){if(!n)throw new ge(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function v4(t,e,n,r){if(e===!0&&r===!0)throw new ge(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tx(t){if(!Ce.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nx(t){if(Ce.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve()}function xr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pp(t);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rx(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new LP;switch(r.type){case"firstParty":return new zP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=ex.get(n);r&&(ke("ComponentProvider","Removing Datastore"),ex.delete(n),r.terminate())})(this),Promise.resolve()}}function _4(t,e,n,r={}){var s;const a=(t=xr(t,mp))._getSettings(),l=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&Ql("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=jn.MOCK_USER;else{u=HA(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new jn(m)}t._authCredentials=new MP(new FE(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class Gn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}}class wo extends wi{constructor(e,n,r){super(e,n,s0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new Ce(e))}withConverter(e){return new wo(this.firestore,e,this._path)}}function ht(t,e,...n){if(t=Nt(t),$T("collection","path",e),t instanceof mp){const r=bt.fromString(e,...n);return nx(r),new wo(t,null,r)}{if(!(t instanceof Gn||t instanceof wo))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(bt.fromString(e,...n));return nx(r),new wo(t.firestore,null,r)}}function Mn(t,e,...n){if(t=Nt(t),arguments.length===1&&(e=zE.newId()),$T("doc","path",e),t instanceof mp){const r=bt.fromString(e,...n);return tx(r),new Gn(t,null,new Ce(r))}{if(!(t instanceof Gn||t instanceof wo))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(bt.fromString(e,...n));return tx(r),new Gn(t.firestore,t instanceof wo?t.converter:null,new Ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bT(this,"async_queue_retry"),this.Vu=()=>{const r=vg();r&&ke("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=vg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=vg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new _o;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ld(e))throw e;ke("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u})(r);throw pi("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=g0.createAndSchedule(this,e,n,r,(a=>this.yu(a)));return this.Tu.push(s),s}fu(){this.Eu&&Ve()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function ix(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class gi extends mp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new sx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sx(e),this._firestoreClient=void 0,await e}}}function w4(t,e){const n=typeof t=="object"?t:Kk(),r=typeof t=="string"?t:"(default)",s=Uy(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=WA("firestore");a&&_4(s,...a)}return s}function gp(t){if(t._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||b4(t),t._firestoreClient}function b4(t){var e,n,r;const s=t._freezeSettings(),a=(function(u,h,m,y){return new XP(u,h,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,BT(y.experimentalLongPollingOptions),y.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new p4(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tc(In.fromBase64String(e))}catch(n){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new tc(In.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=/^__.*__$/;class k4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Co(e,this.data,this.fieldMask,n,this.fieldTransforms):new cd(e,this.data,n,this.fieldTransforms)}}class WT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Co(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve()}}class x0{constructor(e,n,r,s,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new x0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qT(this.Cu)&&x4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class E4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dp(e)}Qu(e,n,r,s=!1){return new x0({Cu:e,methodName:n,qu:r,path:kn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pd(t){const e=t._freezeSettings(),n=dp(t._databaseId);return new E4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function k0(t,e,n,r,s,a={}){const l=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);T0("Data must be an object, but it was:",l,r);const u=GT(r,l);let h,m;if(a.merge)h=new br(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const w of a.mergeFields){const x=fy(e,w,n);if(!l.contains(x))throw new ge(re.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);ZT(y,x)||y.push(x)}h=new br(y),m=l.fieldTransforms.filter((w=>h.covers(w.field)))}else h=null,m=l.fieldTransforms;return new k4(new cr(u),h,m)}class vp extends yp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vp}}class E0 extends yp{_toFieldTransform(e){return new ED(e.path,new Fu)}isEqual(e){return e instanceof E0}}function HT(t,e,n,r){const s=t.Qu(1,e,n);T0("Data must be an object, but it was:",s,r);const a=[],l=cr.empty();Ra(r,((h,m)=>{const y=I0(e,h,n);m=Nt(m);const w=s.Nu(y);if(m instanceof vp)a.push(y);else{const x=md(m,w);x!=null&&(a.push(y),l.set(y,x))}}));const u=new br(a);return new WT(l,u,s.fieldTransforms)}function KT(t,e,n,r,s,a){const l=t.Qu(1,e,n),u=[fy(e,r,n)],h=[s];if(a.length%2!=0)throw new ge(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)u.push(fy(e,a[x])),h.push(a[x+1]);const m=[],y=cr.empty();for(let x=u.length-1;x>=0;--x)if(!ZT(m,u[x])){const E=u[x];let C=h[x];C=Nt(C);const k=l.Nu(E);if(C instanceof vp)m.push(E);else{const R=md(C,k);R!=null&&(m.push(E),y.set(E,R))}}const w=new br(m);return new WT(y,w,l.fieldTransforms)}function T4(t,e,n,r=!1){return md(n,t.Qu(r?4:3,e))}function md(t,e){if(QT(t=Nt(t)))return T0("Unsupported field value:",e,t),GT(t,e);if(t instanceof yp)return(function(r,s){if(!qT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const u of r){let h=md(u,s.Lu(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,s){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=xt.fromDate(r);return{timestampValue:Of(s.serializer,a)}}if(r instanceof xt){const a=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Of(s.serializer,a)}}if(r instanceof w0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof tc)return{bytesValue:hT(s.serializer,r._byteString)};if(r instanceof Gn){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:l0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof b0)return(function(l,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw u.Bu("VectorValues must only contain numeric values.");return i0(u.serializer,h)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${pp(r)}`)})(t,e)}function GT(t,e){const n={};return UE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(t,((r,s)=>{const a=md(s,e.Mu(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function QT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xt||t instanceof w0||t instanceof tc||t instanceof Gn||t instanceof yp||t instanceof b0)}function T0(t,e,n){if(!QT(n)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(n)){const r=pp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function fy(t,e,n){if((e=Nt(e))instanceof fd)return e._internalPath;if(typeof e=="string")return I0(t,e);throw Vf("Field path arguments must be of type string or ",t,!1,void 0,n)}const I4=new RegExp("[~\\*/\\[\\]]");function I0(t,e,n){if(e.search(I4)>=0)throw Vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fd(...e.split("."))._internalPath}catch{throw Vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vf(t,e,n,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${r}`),l&&(h+=` in document ${s}`),h+=")"),new ge(re.INVALID_ARGUMENT,u+t+h)}function ZT(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new S4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(S0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class S4 extends YT{data(){return super.data()}}function S0(t,e){return typeof e=="string"?I0(t,e):e instanceof fd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class C0{}class A0 extends C0{}function Ao(t,e,...n){let r=[];e instanceof C0&&r.push(e),r=r.concat(n),(function(a){const l=a.filter((h=>h instanceof R0)).length,u=a.filter((h=>h instanceof N0)).length;if(l>1||l>0&&u>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class N0 extends A0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new N0(e,n,r)}_apply(e){const n=this._parse(e);return XT(e._query,n),new wi(e.firestore,e.converter,ry(e._query,n))}_parse(e){const n=pd(e.firestore);return(function(a,l,u,h,m,y,w){let x;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){ax(w,y);const E=[];for(const C of w)E.push(ox(h,a,C));x={arrayValue:{values:E}}}else x=ox(h,a,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||ax(w,y),x=T4(u,l,w,y==="in"||y==="not-in");return Qt.create(m,y,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class R0 extends C0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new R0(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ds.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let l=s;const u=a.getFlattenedFilters();for(const h of u)XT(l,h),l=ry(l,h)})(e._query,n),new wi(e.firestore,e.converter,ry(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class P0 extends A0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new P0(e,n)}_apply(e){const n=(function(s,a,l){if(s.startAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vu(a,l)})(e._query,this._field,this._direction);return new wi(e.firestore,e.converter,(function(s,a){const l=s.explicitOrderBy.concat([a]);return new hc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function _p(t,e="asc"){const n=e,r=S0("orderBy",t);return P0._create(r,n)}class D0 extends A0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new D0(e,n,r)}_apply(e){return new wi(e.firestore,e.converter,Df(e._query,this._limit,this._limitType))}}function C4(t){return D0._create("limit",t,"F")}function ox(t,e,n){if(typeof(n=Nt(n))=="string"){if(n==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZE(e)&&n.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(bt.fromString(n));if(!Ce.isDocumentKey(r))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sb(t,new Ce(r))}if(n instanceof Gn)return Sb(t,n._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pp(n)}.`)}function ax(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XT(t,e){const n=(function(s,a){for(const l of s)for(const u of l.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class A4{convertValue(e,n="none"){switch(Ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ra(e,((s,a)=>{r[s]=this.convertValue(a,n)})),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((l=>Ut(l.doubleValue)));return new b0(a)}convertGeoPoint(e){return new w0(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=e0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ou(e));default:return null}}convertTimestamp(e){const n=ko(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=bt.fromString(e);dt(vT(r));const s=new Lu(r.get(1),r.get(3)),a=new Ce(r.popFirst(5));return s.isEqual(n)||pi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eI extends YT{constructor(e,n,r,s,a,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(S0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class pf extends eI{data(e={}){return super.data(e)}}class tI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new pf(this._firestore,this._userDataWriter,r.key,r,new fu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const h=new pf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new fu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const h=new pf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new fu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return u.type!==0&&(m=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),y=l.indexOf(u.doc.key)),{type:N4(u.type),doc:h,oldIndex:m,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function N4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve()}}class O0 extends A4{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,n)}}function si(t){t=xr(t,wi);const e=xr(t.firestore,gi),n=gp(e),r=new O0(e);return JT(t._query),y4(n,t._query).then((s=>new tI(e,r,t,s)))}function R4(t,e,n){t=xr(t,Gn);const r=xr(t.firestore,gi),s=j0(t.converter,e,n);return gd(r,[k0(pd(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Kn.none())])}function mc(t,e,n,...r){t=xr(t,Gn);const s=xr(t.firestore,gi),a=pd(s);let l;return l=typeof(e=Nt(e))=="string"||e instanceof fd?KT(a,"updateDoc",t._key,e,n,r):HT(a,"updateDoc",t._key,e),gd(s,[l.toMutation(t._key,Kn.exists(!0))])}function gc(t){return gd(xr(t.firestore,gi),[new cp(t._key,Kn.none())])}function Vr(t,e){const n=xr(t.firestore,gi),r=Mn(t),s=j0(t.converter,e);return gd(n,[k0(pd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Kn.exists(!1))]).then((()=>r))}function Da(t,...e){var n,r,s;t=Nt(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||ix(e[l])||(a=e[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(ix(e[l])){const w=e[l];e[l]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[l+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let h,m,y;if(t instanceof Gn)m=xr(t.firestore,gi),y=s0(t._key.path),h={next:w=>{e[l]&&e[l](P4(m,t,w))},error:e[l+1],complete:e[l+2]};else{const w=xr(t,wi);m=xr(w.firestore,gi),y=w._query;const x=new O0(m);h={next:E=>{e[l]&&e[l](new tI(m,x,w,E))},error:e[l+1],complete:e[l+2]},JT(t._query)}return(function(x,E,C,k){const R=new zT(k),q=new RT(E,R,C);return x.asyncQueue.enqueueAndForget((async()=>AT(await hy(x),q))),()=>{R.Za(),x.asyncQueue.enqueueAndForget((async()=>NT(await hy(x),q)))}})(gp(m),y,u,h)}function gd(t,e){return(function(r,s){const a=new _o;return r.asyncQueue.enqueueAndForget((async()=>o4(await g4(r),s,a))),a.promise})(gp(t),e)}function P4(t,e,n){const r=n.docs.get(e._key),s=new O0(t);return new eI(t,s,e._key,r,new fu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=pd(e)}set(e,n,r){this._verifyNotCommitted();const s=wg(e,this._firestore),a=j0(s.converter,n,r),l=k0(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,Kn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=wg(e,this._firestore);let l;return l=typeof(n=Nt(n))=="string"||n instanceof fd?KT(this._dataReader,"WriteBatch.update",a._key,n,r,s):HT(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(l.toMutation(a._key,Kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=wg(e,this._firestore);return this._mutations=this._mutations.concat(new cp(n._key,Kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wg(t,e){if((t=Nt(t)).firestore!==e)throw new ge(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ls(){return new E0("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t){return gp(t=xr(t,gi)),new D4(t,(e=>gd(t,e)))}(function(e,n=!0){(function(s){dc=s})(cc),Kl(new Ea("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),u=new gi(new VP(r.getProvider("auth-internal")),new BP(r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(m.options.projectId,y)})(l,s),l);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),vo(xb,"4.7.3",e),vo(xb,"4.7.3","esm2017")})();const j4={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function O4(){if(typeof window<"u"&&window.GLOBAL_FIREBASE_CONFIG&&window.GLOBAL_FIREBASE_CONFIG.apiKey)return window.GLOBAL_FIREBASE_CONFIG;try{const t=j4;if(t&&t.VITE_FIREBASE_API_KEY)return{apiKey:t.VITE_FIREBASE_API_KEY,authDomain:t.VITE_FIREBASE_AUTH_DOMAIN,projectId:t.VITE_FIREBASE_PROJECT_ID,storageBucket:t.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:t.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:t.VITE_FIREBASE_APP_ID,measurementId:t.VITE_FIREBASE_MEASUREMENT_ID}}catch{}if(typeof __firebase_config<"u")try{return typeof __firebase_config=="object"?__firebase_config:JSON.parse(__firebase_config)}catch(t){return console.error("[Firebase] Config parse failed (legacy):",t),null}return console.error("[Firebase] All config sources failed. Check index.html injection."),null}const Ji=O4();if(!(Ji!=null&&Ji.apiKey)||!(Ji!=null&&Ji.projectId)){const t="[Firebase] Configuration is missing required fields (apiKey, projectId). Application cannot start.";throw console.error(t,Ji),new Error(t)}let my;Yw().length>0?my=Yw()[0]:my=Hk(Ji);const nI=my,Qe=jP(nI),Me=w4(nI),L4=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,a]=j.useState(!1),[l,u]=j.useState(null),h=async y=>{y.preventDefault(),u(null),a(!0);try{await wE(Qe,t,n)}catch(w){let x="Login failed.";switch(w.code){case"auth/invalid-email":x="Invalid email format.";break;case"auth/user-disabled":x="User disabled.";break;case"auth/user-not-found":x="User not found.";break;case"auth/wrong-password":x="Wrong password.";break;case"auth/too-many-requests":x="Too many requests. Try again later.";break;case"auth/network-request-failed":x="Network error.";break}u(x)}finally{a(!1)}},m=async()=>{u(null),a(!0);try{await dR(Qe)}catch(y){u("Guest login failed: "+y.message)}finally{a(!1)}};return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-premium-gradient p-4 antialiased",children:p.jsxs("div",{className:"max-w-md w-full p-6 sm:p-8 bg-white/70 dark:bg-gray-800/60 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 rounded-[2rem] shadow-2xl transition-all duration-300",children:[p.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[p.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-3xl shadow-lg mb-6 animate-float",children:p.jsx("img",{src:"/images/web-app-manifest-512x512.png",alt:"Logo",className:"h-12 w-12"})}),p.jsxs("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:["Task",p.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:""})]}),p.jsxs("form",{onSubmit:h,className:"space-y-5 sm:space-y-6",children:[l&&p.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium animate-in fade-in slide-in-from-top-4 duration-300 shadow-sm",children:l}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"login-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Email"}),p.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:y=>e(y.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"mail@example.com"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"login-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Password"}),p.jsx("input",{id:"login-password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:y=>r(y.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:""})]}),p.jsx("button",{type:"submit",disabled:s,className:"btn-premium w-full py-4 text-lg shadow-lg hover:shadow-xl active:scale-[0.98] transition-all",children:s?"...":""})]}),p.jsxs("div",{className:"mt-8",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200/50 dark:border-gray-700/50"})}),p.jsx("div",{className:"relative flex justify-center text-xs",children:p.jsx("span",{className:"px-3 bg-transparent text-gray-400 uppercase tracking-widest font-bold",children:"OR"})})]}),p.jsxs("button",{onClick:m,disabled:s,className:"mt-8 w-full py-3.5 bg-gray-100/50 hover:bg-gray-200/70 active:bg-gray-300 dark:bg-gray-700/30 dark:hover:bg-gray-600/50 dark:active:bg-gray-600 text-gray-700 dark:text-gray-200 font-bold rounded-2xl transition-all active:scale-95 flex items-center justify-center gap-3 border border-transparent hover:border-gray-300 dark:hover:border-gray-600",children:[p.jsx("span",{className:"text-xl",children:""})," "]})]})]})})},lx=t=>{let e;const n=new Set,r=(m,y)=>{const w=typeof m=="function"?m(e):m;if(!Object.is(w,e)){const x=e;e=y??(typeof w!="object"||w===null)?w:Object.assign({},e,w),n.forEach(E=>E(e,x))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>h,subscribe:m=>(n.add(m),()=>n.delete(m))},h=e=t(r,s,u);return u},M4=(t=>t?lx(t):lx),V4=t=>t;function F4(t,e=V4){const n=Le.useSyncExternalStore(t.subscribe,Le.useCallback(()=>e(t.getState()),[t,e]),Le.useCallback(()=>e(t.getInitialState()),[t,e]));return Le.useDebugValue(n),n}const cx=t=>{const e=M4(t),n=r=>F4(e,r);return Object.assign(n,e),n},ja=(t=>t?cx(t):cx),z4={success:3e3,info:4e3,error:6e3},Wh=new Map,U4=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,11),mf=ja(t=>({toasts:[],addToast:(e,n="info")=>{const r=U4();t(l=>({toasts:[...l.toasts,{id:r,message:e,type:n}]}));const s=z4[n],a=setTimeout(()=>{t(l=>({toasts:l.toasts.filter(u=>u.id!==r)})),Wh.delete(r)},s);Wh.set(r,a)},removeToast:e=>{const n=Wh.get(e);n&&(clearTimeout(n),Wh.delete(e)),t(r=>({toasts:r.toasts.filter(s=>s.id!==e)}))}})),Tn={success:t=>mf.getState().addToast(t,"success"),error:t=>mf.getState().addToast(t,"error"),info:t=>mf.getState().addToast(t,"info")};function rI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=rI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function B4(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=rI(t))&&(r&&(r+=" "),r+=e);return r}const $4=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},W4=(t,e)=>({classGroupId:t,validator:e}),sI=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Ff="-",ux=[],q4="arbitrary..",H4=t=>{const e=G4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return K4(l);const u=l.split(Ff),h=u[0]===""&&u.length>1?1:0;return iI(u,h,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const h=r[l],m=n[l];return h?m?$4(m,h):h:m||ux}return n[l]||ux}}},iI=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],a=n.nextPart.get(s);if(a){const m=iI(t,e+1,a);if(m)return m}const l=n.validators;if(l===null)return;const u=e===0?t.join(Ff):t.slice(e).join(Ff),h=l.length;for(let m=0;m<h;m++){const y=l[m];if(y.validator(u))return y.classGroupId}},K4=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?q4+r:void 0})(),G4=t=>{const{theme:e,classGroups:n}=t;return Q4(n,e)},Q4=(t,e)=>{const n=sI();for(const r in t){const s=t[r];L0(s,n,r,e)}return n},L0=(t,e,n,r)=>{const s=t.length;for(let a=0;a<s;a++){const l=t[a];Z4(l,e,n,r)}},Z4=(t,e,n,r)=>{if(typeof t=="string"){Y4(t,e,n);return}if(typeof t=="function"){J4(t,e,n,r);return}X4(t,e,n,r)},Y4=(t,e,n)=>{const r=t===""?e:oI(e,t);r.classGroupId=n},J4=(t,e,n,r)=>{if(eO(t)){L0(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(W4(n,t))},X4=(t,e,n,r)=>{const s=Object.entries(t),a=s.length;for(let l=0;l<a;l++){const[u,h]=s[l];L0(h,oI(e,u),n,r)}},oI=(t,e)=>{let n=t;const r=e.split(Ff),s=r.length;for(let a=0;a<s;a++){const l=r[a];let u=n.nextPart.get(l);u||(u=sI(),n.nextPart.set(l,u)),n=u}return n},eO=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,tO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(a,l)=>{n[a]=l,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(a){let l=n[a];if(l!==void 0)return l;if((l=r[a])!==void 0)return s(a,l),l},set(a,l){a in n?n[a]=l:s(a,l)}}},gy="!",dx=":",nO=[],hx=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),rO=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const a=[];let l=0,u=0,h=0,m;const y=s.length;for(let k=0;k<y;k++){const R=s[k];if(l===0&&u===0){if(R===dx){a.push(s.slice(h,k)),h=k+1;continue}if(R==="/"){m=k;continue}}R==="["?l++:R==="]"?l--:R==="("?u++:R===")"&&u--}const w=a.length===0?s:s.slice(h);let x=w,E=!1;w.endsWith(gy)?(x=w.slice(0,-1),E=!0):w.startsWith(gy)&&(x=w.slice(1),E=!0);const C=m&&m>h?m-h:void 0;return hx(a,E,x,C)};if(e){const s=e+dx,a=r;r=l=>l.startsWith(s)?a(l.slice(s.length)):hx(nO,!1,l,void 0,!0)}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},sO=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let a=0;a<n.length;a++){const l=n[a],u=l[0]==="[",h=e.has(l);u||h?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},iO=t=>({cache:tO(t.cacheSize),parseClassName:rO(t),sortModifiers:sO(t),...H4(t)}),oO=/\s+/,aO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=e,l=[],u=t.trim().split(oO);let h="";for(let m=u.length-1;m>=0;m-=1){const y=u[m],{isExternal:w,modifiers:x,hasImportantModifier:E,baseClassName:C,maybePostfixModifierPosition:k}=n(y);if(w){h=y+(h.length>0?" "+h:h);continue}let R=!!k,q=r(R?C.substring(0,k):C);if(!q){if(!R){h=y+(h.length>0?" "+h:h);continue}if(q=r(C),!q){h=y+(h.length>0?" "+h:h);continue}R=!1}const B=x.length===0?"":x.length===1?x[0]:a(x).join(":"),$=E?B+gy:B,H=$+q;if(l.indexOf(H)>-1)continue;l.push(H);const F=s(q,R);for(let te=0;te<F.length;++te){const S=F[te];l.push($+S)}h=y+(h.length>0?" "+h:h)}return h},lO=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=aI(n))&&(s&&(s+=" "),s+=r);return s},aI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=aI(t[r]))&&(n&&(n+=" "),n+=e);return n},cO=(t,...e)=>{let n,r,s,a;const l=h=>{const m=e.reduce((y,w)=>w(y),t());return n=iO(m),r=n.cache.get,s=n.cache.set,a=u,u(h)},u=h=>{const m=r(h);if(m)return m;const y=aO(h,n);return s(h,y),y};return a=l,(...h)=>a(lO(...h))},uO=[],tn=t=>{const e=n=>n[t]||uO;return e.isThemeGetter=!0,e},lI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,cI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,dO=/^\d+\/\d+$/,hO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,pO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,mO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wl=t=>dO.test(t),He=t=>!!t&&!Number.isNaN(Number(t)),Zi=t=>!!t&&Number.isInteger(Number(t)),bg=t=>t.endsWith("%")&&He(t.slice(0,-1)),ni=t=>hO.test(t),yO=()=>!0,vO=t=>fO.test(t)&&!pO.test(t),uI=()=>!1,_O=t=>mO.test(t),wO=t=>gO.test(t),bO=t=>!we(t)&&!be(t),xO=t=>yc(t,fI,uI),we=t=>lI.test(t),oa=t=>yc(t,pI,vO),xg=t=>yc(t,SO,He),fx=t=>yc(t,dI,uI),kO=t=>yc(t,hI,wO),qh=t=>yc(t,mI,_O),be=t=>cI.test(t),iu=t=>vc(t,pI),EO=t=>vc(t,CO),px=t=>vc(t,dI),TO=t=>vc(t,fI),IO=t=>vc(t,hI),Hh=t=>vc(t,mI,!0),yc=(t,e,n)=>{const r=lI.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},vc=(t,e,n=!1)=>{const r=cI.exec(t);return r?r[1]?e(r[1]):n:!1},dI=t=>t==="position"||t==="percentage",hI=t=>t==="image"||t==="url",fI=t=>t==="length"||t==="size"||t==="bg-size",pI=t=>t==="length",SO=t=>t==="number",CO=t=>t==="family-name",mI=t=>t==="shadow",AO=()=>{const t=tn("color"),e=tn("font"),n=tn("text"),r=tn("font-weight"),s=tn("tracking"),a=tn("leading"),l=tn("breakpoint"),u=tn("container"),h=tn("spacing"),m=tn("radius"),y=tn("shadow"),w=tn("inset-shadow"),x=tn("text-shadow"),E=tn("drop-shadow"),C=tn("blur"),k=tn("perspective"),R=tn("aspect"),q=tn("ease"),B=tn("animate"),$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],F=()=>[...H(),be,we],te=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],I=()=>[be,we,h],N=()=>[wl,"full","auto",...I()],P=()=>[Zi,"none","subgrid",be,we],O=()=>["auto",{span:["full",Zi,be,we]},Zi,be,we],M=()=>[Zi,"auto",be,we],D=()=>["auto","min","max","fr",be,we],Be=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],tt=()=>["start","end","center","stretch","center-safe","end-safe"],nt=()=>["auto",...I()],Ae=()=>[wl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],Y=()=>[t,be,we],pe=()=>[...H(),px,fx,{position:[be,we]}],de=()=>["no-repeat",{repeat:["","x","y","space","round"]}],W=()=>["auto","cover","contain",TO,xO,{size:[be,we]}],X=()=>[bg,iu,oa],ce=()=>["","none","full",m,be,we],ee=()=>["",He,iu,oa],he=()=>["solid","dashed","dotted","double"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ee=()=>[He,bg,px,fx],Fe=()=>["","none",C,be,we],We=()=>["none",He,be,we],Ne=()=>["none",He,be,we],Zt=()=>[He,be,we],jt=()=>[wl,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ni],breakpoint:[ni],color:[yO],container:[ni],"drop-shadow":[ni],ease:["in","out","in-out"],font:[bO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ni],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ni],shadow:[ni],spacing:["px",He],text:[ni],"text-shadow":[ni],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wl,we,be,R]}],container:["container"],columns:[{columns:[He,we,be,u]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:F()}],overflow:[{overflow:te()}],"overflow-x":[{"overflow-x":te()}],"overflow-y":[{"overflow-y":te()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[Zi,"auto",be,we]}],basis:[{basis:[wl,"full","auto",u,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[He,wl,"auto","initial","none",we]}],grow:[{grow:["",He,be,we]}],shrink:[{shrink:["",He,be,we]}],order:[{order:[Zi,"first","last","none",be,we]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...Be(),"normal"]}],"justify-items":[{"justify-items":[...tt(),"normal"]}],"justify-self":[{"justify-self":["auto",...tt()]}],"align-content":[{content:["normal",...Be()]}],"align-items":[{items:[...tt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...tt(),{baseline:["","last"]}]}],"place-content":[{"place-content":Be()}],"place-items":[{"place-items":[...tt(),"baseline"]}],"place-self":[{"place-self":["auto",...tt()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:nt()}],mx:[{mx:nt()}],my:[{my:nt()}],ms:[{ms:nt()}],me:[{me:nt()}],mt:[{mt:nt()}],mr:[{mr:nt()}],mb:[{mb:nt()}],ml:[{ml:nt()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ae()}],w:[{w:[u,"screen",...Ae()]}],"min-w":[{"min-w":[u,"screen","none",...Ae()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...Ae()]}],h:[{h:["screen","lh",...Ae()]}],"min-h":[{"min-h":["screen","lh","none",...Ae()]}],"max-h":[{"max-h":["screen","lh",...Ae()]}],"font-size":[{text:["base",n,iu,oa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,be,xg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",bg,we]}],"font-family":[{font:[EO,we,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,be,we]}],"line-clamp":[{"line-clamp":[He,"none",be,xg]}],leading:[{leading:[a,...I()]}],"list-image":[{"list-image":["none",be,we]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",be,we]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Y()}],"text-color":[{text:Y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[He,"from-font","auto",be,oa]}],"text-decoration-color":[{decoration:Y()}],"underline-offset":[{"underline-offset":[He,"auto",be,we]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be,we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be,we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:pe()}],"bg-repeat":[{bg:de()}],"bg-size":[{bg:W()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Zi,be,we],radial:["",be,we],conic:[Zi,be,we]},IO,kO]}],"bg-color":[{bg:Y()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:Y()}],"gradient-via":[{via:Y()}],"gradient-to":[{to:Y()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:Y()}],"border-color-x":[{"border-x":Y()}],"border-color-y":[{"border-y":Y()}],"border-color-s":[{"border-s":Y()}],"border-color-e":[{"border-e":Y()}],"border-color-t":[{"border-t":Y()}],"border-color-r":[{"border-r":Y()}],"border-color-b":[{"border-b":Y()}],"border-color-l":[{"border-l":Y()}],"divide-color":[{divide:Y()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[He,be,we]}],"outline-w":[{outline:["",He,iu,oa]}],"outline-color":[{outline:Y()}],shadow:[{shadow:["","none",y,Hh,qh]}],"shadow-color":[{shadow:Y()}],"inset-shadow":[{"inset-shadow":["none",w,Hh,qh]}],"inset-shadow-color":[{"inset-shadow":Y()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Y()}],"ring-offset-w":[{"ring-offset":[He,oa]}],"ring-offset-color":[{"ring-offset":Y()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":Y()}],"text-shadow":[{"text-shadow":["none",x,Hh,qh]}],"text-shadow-color":[{"text-shadow":Y()}],opacity:[{opacity:[He,be,we]}],"mix-blend":[{"mix-blend":[...ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[He]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ee()}],"mask-image-linear-from-color":[{"mask-linear-from":Y()}],"mask-image-linear-to-color":[{"mask-linear-to":Y()}],"mask-image-t-from-pos":[{"mask-t-from":Ee()}],"mask-image-t-to-pos":[{"mask-t-to":Ee()}],"mask-image-t-from-color":[{"mask-t-from":Y()}],"mask-image-t-to-color":[{"mask-t-to":Y()}],"mask-image-r-from-pos":[{"mask-r-from":Ee()}],"mask-image-r-to-pos":[{"mask-r-to":Ee()}],"mask-image-r-from-color":[{"mask-r-from":Y()}],"mask-image-r-to-color":[{"mask-r-to":Y()}],"mask-image-b-from-pos":[{"mask-b-from":Ee()}],"mask-image-b-to-pos":[{"mask-b-to":Ee()}],"mask-image-b-from-color":[{"mask-b-from":Y()}],"mask-image-b-to-color":[{"mask-b-to":Y()}],"mask-image-l-from-pos":[{"mask-l-from":Ee()}],"mask-image-l-to-pos":[{"mask-l-to":Ee()}],"mask-image-l-from-color":[{"mask-l-from":Y()}],"mask-image-l-to-color":[{"mask-l-to":Y()}],"mask-image-x-from-pos":[{"mask-x-from":Ee()}],"mask-image-x-to-pos":[{"mask-x-to":Ee()}],"mask-image-x-from-color":[{"mask-x-from":Y()}],"mask-image-x-to-color":[{"mask-x-to":Y()}],"mask-image-y-from-pos":[{"mask-y-from":Ee()}],"mask-image-y-to-pos":[{"mask-y-to":Ee()}],"mask-image-y-from-color":[{"mask-y-from":Y()}],"mask-image-y-to-color":[{"mask-y-to":Y()}],"mask-image-radial":[{"mask-radial":[be,we]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ee()}],"mask-image-radial-from-color":[{"mask-radial-from":Y()}],"mask-image-radial-to-color":[{"mask-radial-to":Y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":H()}],"mask-image-conic-pos":[{"mask-conic":[He]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ee()}],"mask-image-conic-from-color":[{"mask-conic-from":Y()}],"mask-image-conic-to-color":[{"mask-conic-to":Y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:pe()}],"mask-repeat":[{mask:de()}],"mask-size":[{mask:W()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",be,we]}],filter:[{filter:["","none",be,we]}],blur:[{blur:Fe()}],brightness:[{brightness:[He,be,we]}],contrast:[{contrast:[He,be,we]}],"drop-shadow":[{"drop-shadow":["","none",E,Hh,qh]}],"drop-shadow-color":[{"drop-shadow":Y()}],grayscale:[{grayscale:["",He,be,we]}],"hue-rotate":[{"hue-rotate":[He,be,we]}],invert:[{invert:["",He,be,we]}],saturate:[{saturate:[He,be,we]}],sepia:[{sepia:["",He,be,we]}],"backdrop-filter":[{"backdrop-filter":["","none",be,we]}],"backdrop-blur":[{"backdrop-blur":Fe()}],"backdrop-brightness":[{"backdrop-brightness":[He,be,we]}],"backdrop-contrast":[{"backdrop-contrast":[He,be,we]}],"backdrop-grayscale":[{"backdrop-grayscale":["",He,be,we]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[He,be,we]}],"backdrop-invert":[{"backdrop-invert":["",He,be,we]}],"backdrop-opacity":[{"backdrop-opacity":[He,be,we]}],"backdrop-saturate":[{"backdrop-saturate":[He,be,we]}],"backdrop-sepia":[{"backdrop-sepia":["",He,be,we]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",be,we]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[He,"initial",be,we]}],ease:[{ease:["linear","initial",q,be,we]}],delay:[{delay:[He,be,we]}],animate:[{animate:["none",B,be,we]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[k,be,we]}],"perspective-origin":[{"perspective-origin":F()}],rotate:[{rotate:We()}],"rotate-x":[{"rotate-x":We()}],"rotate-y":[{"rotate-y":We()}],"rotate-z":[{"rotate-z":We()}],scale:[{scale:Ne()}],"scale-x":[{"scale-x":Ne()}],"scale-y":[{"scale-y":Ne()}],"scale-z":[{"scale-z":Ne()}],"scale-3d":["scale-3d"],skew:[{skew:Zt()}],"skew-x":[{"skew-x":Zt()}],"skew-y":[{"skew-y":Zt()}],transform:[{transform:[be,we,"","none","gpu","cpu"]}],"transform-origin":[{origin:F()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:jt()}],"translate-x":[{"translate-x":jt()}],"translate-y":[{"translate-y":jt()}],"translate-z":[{"translate-z":jt()}],"translate-none":["translate-none"],accent:[{accent:Y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be,we]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be,we]}],fill:[{fill:["none",...Y()]}],"stroke-w":[{stroke:[He,iu,oa,xg]}],stroke:[{stroke:["none",...Y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},NO=cO(AO);function Se(...t){return NO(B4(t))}const RO=()=>{const{toasts:t,removeToast:e}=mf();return t.length===0?null:p.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:t.map(n=>p.jsx("div",{onClick:()=>e(n.id),className:Se("pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-xl shadow-lg border text-sm font-medium transition-all transform animate-in slide-in-from-right-10 fade-in duration-300 cursor-pointer hover:opacity-90",n.type==="success"&&"bg-white dark:bg-gray-800 text-green-600 dark:text-green-400 border-green-200 dark:border-green-900",n.type==="error"&&"bg-white dark:bg-gray-800 text-red-600 dark:text-red-400 border-red-200 dark:border-red-900",n.type==="info"&&"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700"),children:p.jsxs("div",{className:"flex items-start gap-3",children:[n.type==="success"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),n.type==="error"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.type==="info"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),p.jsx("p",{className:"leading-5",children:n.message})]})},n.id))})};function PO(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var a;const l=h=>h===null?null:JSON.parse(h,void 0),u=(a=n.getItem(s))!=null?a:null;return u instanceof Promise?u.then(l):l(u)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const yy=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return yy(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return yy(r)(n)}}}},DO=(t,e)=>(n,r,s)=>{let a={storage:PO(()=>localStorage),partialize:k=>k,version:0,merge:(k,R)=>({...R,...k}),...e},l=!1;const u=new Set,h=new Set;let m=a.storage;if(!m)return t((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...k)},r,s);const y=()=>{const k=a.partialize({...r()});return m.setItem(a.name,{state:k,version:a.version})},w=s.setState;s.setState=(k,R)=>(w(k,R),y());const x=t((...k)=>(n(...k),y()),r,s);s.getInitialState=()=>x;let E;const C=()=>{var k,R;if(!m)return;l=!1,u.forEach(B=>{var $;return B(($=r())!=null?$:x)});const q=((R=a.onRehydrateStorage)==null?void 0:R.call(a,(k=r())!=null?k:x))||void 0;return yy(m.getItem.bind(m))(a.name).then(B=>{if(B)if(typeof B.version=="number"&&B.version!==a.version){if(a.migrate){const $=a.migrate(B.state,B.version);return $ instanceof Promise?$.then(H=>[!0,H]):[!0,$]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,B.state];return[!1,void 0]}).then(B=>{var $;const[H,F]=B;if(E=a.merge(F,($=r())!=null?$:x),n(E,!0),H)return y()}).then(()=>{q==null||q(E,void 0),E=r(),l=!0,h.forEach(B=>B(E))}).catch(B=>{q==null||q(void 0,B)})};return s.persist={setOptions:k=>{a={...a,...k},k.storage&&(m=k.storage)},clearStorage:()=>{m==null||m.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>C(),hasHydrated:()=>l,onHydrate:k=>(u.add(k),()=>{u.delete(k)}),onFinishHydration:k=>(h.add(k),()=>{h.delete(k)})},a.skipHydration||C(),E||x},yd=DO,Ur=ja()(yd(t=>({themeMode:"system",fontEn:"Inter",fontJp:"M PLUS 2",fontSize:"md",density:"normal",language:"ja",customDurations:[30,45,60,75,90],setThemeMode:e=>t({themeMode:e}),setFontEn:e=>t({fontEn:e}),setFontJp:e=>t({fontJp:e}),setFontSize:e=>t({fontSize:e}),setDensity:e=>t({density:e}),setLanguage:e=>t(n=>{const s={ja:{density:"normal",fontSize:"md"},en:{density:"comfortable",fontSize:"base"}}[e];return{language:e,density:s.density,fontSize:s.fontSize}}),setCustomDurations:e=>t({customDurations:e.sort((n,r)=>n-r)})}),{name:"app-settings",partialize:t=>({themeMode:t.themeMode,fontEn:t.fontEn,fontJp:t.fontJp,fontSize:t.fontSize,density:t.density,language:t.language,customDurations:t.customDurations})})),jO={dashboard:"",inbox:"",today:"",upcoming:"",completed:"",trash:"",projects:"",project:"",labels:"",filters:"",timeblocks:"",durations:"",targets:"",workspaces:"",settings:"",edit:"",active:"",add_task:"",search:"",no_tasks:"",loading:"...",error:"",backup_restore:"",general:"",appearance:"",account:"",language:"",important:"",all_tasks:"",add:"",close:"",clear:"",backward_map:"",woop_board:"WOOP",okr_tree:"OKR",msg:{task:{create_success:"",create_fail:"",update_success:"",update_fail:"",delete_success:"",delete_fail:"",complete_success:" ",status_update_fail:"",move_fail:""},auth:{login_success:"",login_fail:"",logout_success:""},project:{reorder_fail:""},confirm_delete:`
`},delete:"",timeblock:"",filter:"",sidebar:{add_workspace:"",search_placeholder:" (/)",target_wizard:"",target_dashboard:"",framework_wiki:"Wiki",unassigned:"",toggle_collapse:"",toggle_expand:"",resizer_label:"",resizer_hint:"",menu_open:"",reorder_section:""},modal:{task_title_placeholder:"",memo_markdown:" (Markdown)",edit:"",preview:"",schedule:"",due_date:"",recurrence:"",recurrence_days:"",time_block:"",duration:"",no_duration:"",no_project:"",cancel:"",save:"",create:"",delete:"",delete_confirm:"",no_memo:""},recurrence:{none:"",daily:"",weekdays:"",weekly:"",monthly:""},days:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},settings_modal:{title:"",tabs:{general:"",appearance:"",account:"",advanced:""},appearance:{theme:"",density:"",font_size:"",fonts:"",font_en:"",font_jp:""},backup:{title:"",description:"JSON",create:"",import:"",import_confirm:`
ID`,import_success:`
: {tasks}
: {projects}`,import_fail:"",create_fail:""},options:{theme:{light:"",dark:"",system:""},density:{compact:"",normal:"",comfortable:"",spacious:""}},language:{title:" (Language)",description:"UI"},maintenance:{title:"",description:"",cleanup_duplicate:"",confirm_backup:`

`,confirm_final:"",cleanup_success:"{count} ",cleanup_fail:": {error}"}},inline_input:{placeholder:"...",label:"",tooltip_today:"",tooltip_today_remove:"",tooltip_important:"",tooltip_important_remove:"",aria_today:"",aria_today_remove:"",aria_important:"",aria_important_remove:"",adding:"..."}},OO={dashboard:"Dashboard",inbox:"Inbox",today:"Today",upcoming:"Upcoming",completed:"Completed",trash:"Trash",projects:"Projects",project:"Project",labels:"Labels",filters:"Filters",timeblocks:"Time Blocks",durations:"Durations",targets:"Targets",workspaces:"Workspaces",settings:"Settings",edit:"Edit",active:"Active",add_task:"Add Task",search:"Search",no_tasks:"No tasks found",loading:"Loading...",error:"An error occurred",backup_restore:"Backup & Restore",general:"General",appearance:"Appearance",account:"Account",language:"Language",important:"Important",all_tasks:"All Tasks",add:"Add",close:"Close",clear:"Clear",backward_map:"Backward Map",woop_board:"WOOP Board",okr_tree:"OKR Tree",msg:{task:{create_success:"Task created",create_fail:"Failed to create task",update_success:"Task updated",update_fail:"Failed to save task",delete_success:"Task deleted",delete_fail:"Failed to delete task",complete_success:"Task completed ",status_update_fail:"Failed to update status",move_fail:"Failed to move task"},auth:{login_success:"Logged in",login_fail:"Login failed",logout_success:"Logged out"},project:{reorder_fail:"Failed to reorder projects"},confirm_delete:`Are you sure you want to delete this item?
This action cannot be undone.`},delete:"Delete",timeblock:"Time Block",filter:"Filter",sidebar:{add_workspace:"Add Workspace",search_placeholder:"Search (/)",target_wizard:"Target Wizard",target_dashboard:"Target Dashboard",framework_wiki:"Framework Wiki",unassigned:"Unassigned",toggle_collapse:"Collapse Sidebar",toggle_expand:"Expand Sidebar",resizer_label:"Resize Sidebar",resizer_hint:"Drag or use arrow keys to resize",menu_open:"Open Menu",reorder_section:"Reorder Section"},modal:{task_title_placeholder:"Task Title",memo_markdown:"Memo (Markdown)",edit:"Edit",preview:"Preview",schedule:"Schedule",due_date:"Due Date",recurrence:"Recurrence",recurrence_days:"Repeat Days",time_block:"Time Block",duration:"Duration",no_duration:"Not Set",no_project:"No Project",cancel:"Cancel",save:"Save",create:"Create",delete:"Delete",delete_confirm:"Are you sure you want to delete this task?",no_memo:"No memo"},recurrence:{none:"None",daily:"Daily",weekdays:"Weekdays",weekly:"Weekly",monthly:"Monthly"},days:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},settings_modal:{title:"Settings",tabs:{general:"General",appearance:"Appearance",account:"Account",advanced:"Advanced"},appearance:{theme:"Theme",density:"Density",font_size:"Font Size",fonts:"Fonts",font_en:"English Font",font_jp:"Japanese Font"},backup:{title:"Backup & Restore",description:"Download workspace data (tasks, projects, settings) as JSON or restore from backup.",create:"Create Backup",import:"Import",import_confirm:`Import data into current workspace?
Existing data remains, but some IDs may change to prevent duplicates.`,import_success:`Import completed.
Tasks: {tasks}
Projects: {projects}`,import_fail:"Import failed. Please check the file format.",create_fail:"Failed to create backup."},options:{theme:{light:"Light",dark:"Dark",system:"System"},density:{compact:"Compact",normal:"Normal",comfortable:"Comfortable",spacious:"Spacious"}},language:{title:"Language",description:"Change the UI language."},maintenance:{title:"Database Maintenance",description:"Detect and clean up duplicate data. This action cannot be undone. Please backup before running.",cleanup_duplicate:"Clean Up Duplicates (Confirm)",confirm_backup:`[Warning] Deleting duplicate tasks.
Did you create a backup?
(Older duplicates will be removed)`,confirm_final:"[Final Confirm] This cannot be undone. Execute?",cleanup_success:"Deleted {count} duplicate tasks.",cleanup_fail:"Error occurred: {error}"}},inline_input:{placeholder:"Enter task name...",label:"Task Name",tooltip_today:"Do Today",tooltip_today_remove:"Remove Today",tooltip_important:"Mark Important",tooltip_important_remove:"Unmark Important",aria_today:"Set for today",aria_today_remove:"Remove from today",aria_important:"Mark as important",aria_important_remove:"Unmark as important",adding:"Adding..."}},mx={ja:jO,en:OO},vd=t=>{function e(n){const r=mx[t],s=mx.en,a=(h,m)=>m.split(".").reduce((y,w)=>y&&y[w],h),l=a(r,n);return l||a(s,n)||n}return{t:e}},ur=()=>{const t=Ur(n=>n.language);return j.useMemo(()=>vd(t),[t])},It={SIDEBAR_DENSITY:{compact:"py-0.5",normal:"py-1.5",comfortable:"py-2.5",spacious:"py-3.5"},DND:{PREFIX_TASK:"task:",TYPE_PROJECT:"project",TYPE_INBOX:"inbox",TYPE_TIMEBLOCK:"timeblock",TOUCH_DELAY:250},STORAGE_KEYS:{SECTION_ORDER:"sidebar_section_order"},SIDEBAR:{MIN_WIDTH:150,MAX_WIDTH:500,DEFAULT_WIDTH:280,DURATIONS:[30,45,60,75,90]},LAYOUT:{CONTAINER_WIDTH_CLASS:"w-full max-w-full",MOBILE_SIDEBAR_WIDTH_PX:280},FONTS:{EU:[{label:"Google Sans",value:'"Google Sans", Inter, sans-serif'},{label:"Inter",value:"Inter, sans-serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"System UI",value:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}],JP:[{label:"M PLUS 2",value:'"M PLUS 2", sans-serif'},{label:"Noto Sans JP",value:'"Noto Sans JP", sans-serif'},{label:"Hiragino / Yu Gothic",value:'"Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif'}]}},LO=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),pn=ja(t=>({stack:[],openModal:(e,n=null)=>{if(!e)return;const s={id:LO(),type:e,data:n};t(a=>({stack:[...a.stack,s]}))},closeModal:()=>t(e=>e.stack.length===0?e:{stack:e.stack.slice(0,-1)}),closeAllModals:()=>t({stack:[]})})),MO=1024,M0=ja()(yd(t=>({sidebarWidth:It.SIDEBAR.DEFAULT_WIDTH,isSidebarOpen:!0,sidebarDensity:"normal",setSidebarWidth:e=>{const n=Math.max(It.SIDEBAR.MIN_WIDTH,Math.min(e,It.SIDEBAR.MAX_WIDTH));t({sidebarWidth:n})},toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),setSidebarOpen:e=>t({isSidebarOpen:e}),setSidebarDensity:e=>t({sidebarDensity:e})}),{name:"ui-storage",partialize:t=>({sidebarWidth:t.sidebarWidth,sidebarDensity:t.sidebarDensity,isSidebarOpen:t.isSidebarOpen}),onRehydrateStorage:()=>t=>{typeof window<"u"&&window.innerWidth<MO&&(t==null||t.setSidebarOpen(!1))}})),VO="/assets/logo-BADOZ29k.png",Fr=ja()(yd(t=>({filterType:"inbox",targetId:null,query:"",showCompleted:!1,sortCriteria:"createdAt_desc",setFilter:(e,n=null)=>t({filterType:e,targetId:n,query:""}),setSearchQuery:e=>t({query:e,filterType:"search"}),clearFilter:()=>t({filterType:"inbox",targetId:null,query:""}),setShowCompleted:e=>t({showCompleted:e}),setSortCriteria:e=>t({sortCriteria:e})}),{name:"filter-storage",partialize:t=>({filterType:t.filterType,targetId:t.targetId,query:t.query,showCompleted:t.showCompleted,sortCriteria:t.sortCriteria})})),Oa=ja()(yd(t=>({currentView:"tasks",viewData:null,setView:(e,n=null)=>t({currentView:e,viewData:n})}),{name:"view-storage",partialize:t=>({currentView:t.currentView})})),FO=()=>{const{t}=ur(),{query:e,setFilter:n}=Fr(),{currentView:r,setView:s}=Oa(),a=r==="search",l=()=>{n("search"),s("search")};return p.jsxs("button",{onClick:l,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-all duration-200 group ${a?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700/50 text-gray-600 dark:text-gray-400"}`,"aria-label":t("sidebar.search_placeholder"),children:[p.jsx("svg",{className:`w-4 h-4 transition-colors ${a?"text-blue-600 dark:text-blue-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),p.jsx("span",{className:"flex-1 text-sm font-medium",children:e?`"${e}"`:t("sidebar.search_placeholder")}),p.jsx("span",{className:"text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"/"})]})},zO=({children:t})=>{const{sidebarWidth:e,isSidebarOpen:n,sidebarDensity:r,toggleSidebar:s,setSidebarWidth:a}=M0(),{t:l}=ur(),u={compact:"p-1",normal:"p-2",comfortable:"p-4",spacious:"p-6"}[r];Le.useEffect(()=>{const m=w=>{if(!document.body.classList.contains("resizing"))return;const x=Math.max(It.SIDEBAR.MIN_WIDTH,Math.min(It.SIDEBAR.MAX_WIDTH,w.clientX));a(x)},y=()=>{document.body.classList.remove("resizing"),document.body.style.cursor="default"};return document.addEventListener("mousemove",m),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",y)}},[a]);const h=()=>{document.body.classList.add("resizing"),document.body.style.cursor="col-resize"};return p.jsxs("aside",{className:Se("h-full transition-all duration-300 flex flex-col group relative","bg-white dark:bg-gray-900 lg:bg-white/70 lg:dark:bg-gray-800/60","lg:backdrop-blur-xl","border-r border-gray-200/50 dark:border-gray-700/30",n?"translate-x-0":"-translate-x-full lg:translate-x-0","fixed lg:relative z-30 lg:z-0 shadow-2xl lg:shadow-none overflow-hidden","w-[var(--sidebar-mobile)] lg:w-[var(--sidebar-desktop)]"),style:{"--sidebar-desktop":`${e}px`,"--sidebar-mobile":n?`${It.LAYOUT.MOBILE_SIDEBAR_WIDTH_PX}px`:"0px",width:n?void 0:"0px"},children:[p.jsxs("div",{className:"h-14 flex items-center px-4 flex-shrink-0 justify-between border-b border-gray-100 dark:border-gray-800/50",children:[p.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition select-none",children:[p.jsx("div",{className:"w-8 h-8 rounded-xl bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20",children:p.jsx("img",{src:VO,alt:"L",className:"h-5 w-5 invert brightness-0"})}),p.jsxs("span",{className:"text-lg font-black text-gray-900 dark:text-white tracking-tight",children:["Task",p.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]})]}),p.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all active:scale-90",title:l(n?"sidebar.toggle_collapse":"sidebar.toggle_expand"),"aria-label":l(n?"sidebar.toggle_collapse":"sidebar.toggle_expand"),children:p.jsx("svg",{className:Se("w-5 h-5 transition-transform duration-300",!n&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),p.jsx("div",{className:"px-3 pb-2 pt-2",children:p.jsx(FO,{})}),p.jsx("div",{className:Se("flex-1 overflow-y-auto custom-scrollbar pt-2",u),children:t}),p.jsx("div",{role:"separator","aria-orientation":"vertical","aria-label":l("sidebar.resizer_label"),"aria-valuenow":e,"aria-valuemin":It.SIDEBAR.MIN_WIDTH,"aria-valuemax":It.SIDEBAR.MAX_WIDTH,tabIndex:n?0:-1,onMouseDown:h,onKeyDown:m=>{m.key==="ArrowLeft"?a(Math.max(It.SIDEBAR.MIN_WIDTH,e-10)):m.key==="ArrowRight"&&a(Math.min(It.SIDEBAR.MAX_WIDTH,e+10))},className:Se("absolute top-0 right-0 w-3 h-full cursor-col-resize z-40 transition-colors hidden lg:flex items-center justify-center outline-none focus:bg-blue-500","hover:bg-blue-500/30 active:bg-blue-600/50 group/resizer"),title:l("sidebar.resizer_hint"),children:p.jsx("div",{className:"absolute w-1 h-12 bg-gray-400 dark:bg-gray-500 rounded-full opacity-0 group-hover/resizer:opacity-100 group-focus/resizer:opacity-100 transition-opacity pointer-events-none"})}),p.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-gray-200/50 dark:bg-gray-700/30 hidden lg:block"})]})};function ne(t,e,n){function r(u,h){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:h,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,h);const m=l.prototype,y=Object.keys(m);for(let w=0;w<y.length;w++){const x=y[w];x in u||(u[x]=m[x].bind(u))}}const s=(n==null?void 0:n.Parent)??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(u){var h;const m=n!=null&&n.Parent?new a:this;r(m,u),(h=m._zod).deferred??(h.deferred=[]);for(const y of m._zod.deferred)y();return m}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>{var h,m;return n!=null&&n.Parent&&u instanceof n.Parent?!0:(m=(h=u==null?void 0:u._zod)==null?void 0:h.traits)==null?void 0:m.has(t)}}),Object.defineProperty(l,"name",{value:t}),l}class Dl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class gI extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const yI={};function To(t){return yI}function vI(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function vy(t,e){return typeof e=="bigint"?e.toString():e}function V0(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function F0(t){return t==null}function z0(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function UO(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const h=r.match(/\d?e-(\d?)/);h!=null&&h[1]&&(s=Number.parseInt(h[1]))}const a=n>s?n:s,l=Number.parseInt(t.toFixed(a).replace(".","")),u=Number.parseInt(e.toFixed(a).replace(".",""));return l%u/10**a}const gx=Symbol("evaluating");function vt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==gx)return r===void 0&&(r=gx,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function La(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Ma(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function yx(t){return JSON.stringify(t)}function BO(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const _I="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function zf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const $O=V0(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function nc(t){if(zf(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(zf(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function wI(t){return nc(t)?{...t}:Array.isArray(t)?[...t]:t}const WO=new Set(["string","number","symbol"]);function wp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function No(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function Ie(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function qO(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const HO={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function KO(t,e){const n=t._zod.def,r=Ma(t._zod.def,{get shape(){const s={};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(s[a]=n.shape[a])}return La(this,"shape",s),s},checks:[]});return No(t,r)}function GO(t,e){const n=t._zod.def,r=Ma(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete s[a]}return La(this,"shape",s),s},checks:[]});return No(t,r)}function QO(t,e){if(!nc(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=Ma(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return La(this,"shape",a),a},checks:[]});return No(t,s)}function ZO(t,e){if(!nc(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return La(this,"shape",r),r},checks:t._zod.def.checks};return No(t,n)}function YO(t,e){const n=Ma(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return La(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return No(t,n)}function JO(t,e,n){const r=Ma(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in s))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=t?new t({type:"optional",innerType:s[l]}):s[l])}else for(const l in s)a[l]=t?new t({type:"optional",innerType:s[l]}):s[l];return La(this,"shape",a),a},checks:[]});return No(e,r)}function XO(t,e,n){const r=Ma(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return La(this,"shape",a),a},checks:[]});return No(e,r)}function Il(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Sl(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Kh(t){return typeof t=="string"?t:t==null?void 0:t.message}function Io(t,e,n){var s,a,l,u,h,m;const r={...t,path:t.path??[]};if(!t.message){const y=Kh((l=(a=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:a.error)==null?void 0:l.call(a,t))??Kh((u=e==null?void 0:e.error)==null?void 0:u.call(e,t))??Kh((h=n.customError)==null?void 0:h.call(n,t))??Kh((m=n.localeError)==null?void 0:m.call(n,t))??"Invalid input";r.message=y}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function U0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Bu(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const bI=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,vy,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},xI=ne("$ZodError",bI),kI=ne("$ZodError",bI,{Parent:Error});function eL(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function tL(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,u=0;for(;u<a.path.length;){const h=a.path[u];u===a.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(e(a))):l[h]=l[h]||{_errors:[]},l=l[h],u++}}};return r(t),n}const B0=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new Dl;if(l.issues.length){const u=new((s==null?void 0:s.Err)??t)(l.issues.map(h=>Io(h,a,To())));throw _I(u,s==null?void 0:s.callee),u}return l.value},$0=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new((s==null?void 0:s.Err)??t)(l.issues.map(h=>Io(h,a,To())));throw _I(u,s==null?void 0:s.callee),u}return l.value},bp=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new Dl;return a.issues.length?{success:!1,error:new(t??xI)(a.issues.map(l=>Io(l,s,To())))}:{success:!0,data:a.value}},nL=bp(kI),xp=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Io(l,s,To())))}:{success:!0,data:a.value}},rL=xp(kI),sL=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return B0(t)(e,n,s)},iL=t=>(e,n,r)=>B0(t)(e,n,r),oL=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return $0(t)(e,n,s)},aL=t=>async(e,n,r)=>$0(t)(e,n,r),lL=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return bp(t)(e,n,s)},cL=t=>(e,n,r)=>bp(t)(e,n,r),uL=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return xp(t)(e,n,s)},dL=t=>async(e,n,r)=>xp(t)(e,n,r),hL=/^[cC][^\s-]{8,}$/,fL=/^[0-9a-z]+$/,pL=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,mL=/^[0-9a-vA-V]{20}$/,gL=/^[A-Za-z0-9]{27}$/,yL=/^[a-zA-Z0-9_-]{21}$/,vL=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,_L=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,vx=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,wL=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,bL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function xL(){return new RegExp(bL,"u")}const kL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,EL=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,TL=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,IL=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,SL=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,EI=/^[A-Za-z0-9_-]*$/,CL=/^\+(?:[0-9]){6,14}[0-9]$/,TI="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",AL=new RegExp(`^${TI}$`);function II(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function NL(t){return new RegExp(`^${II(t)}$`)}function RL(t){const e=II({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${TI}T(?:${r})$`)}const PL=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},DL=/^-?\d+$/,jL=/^-?\d+(?:\.\d+)?/,OL=/^(?:true|false)$/i,LL=/^[^A-Z]*$/,ML=/^[^a-z]*$/,dr=ne("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),SI={number:"number",bigint:"bigint",object:"date"},CI=ne("$ZodCheckLessThan",(t,e)=>{dr.init(t,e);const n=SI[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,a=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<a&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),AI=ne("$ZodCheckGreaterThan",(t,e)=>{dr.init(t,e);const n=SI[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,a=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>a&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),VL=ne("$ZodCheckMultipleOf",(t,e)=>{dr.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):UO(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),FL=ne("$ZodCheckNumberFormat",(t,e)=>{var l;dr.init(t,e),e.format=e.format||"float64";const n=(l=e.format)==null?void 0:l.includes("int"),r=n?"int":"number",[s,a]=HO[e.format];t._zod.onattach.push(u=>{const h=u._zod.bag;h.format=e.format,h.minimum=s,h.maximum=a,n&&(h.pattern=DL)}),t._zod.check=u=>{const h=u.value;if(n){if(!Number.isInteger(h)){u.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:h,inst:t});return}if(!Number.isSafeInteger(h)){h>0?u.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):u.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}h<s&&u.issues.push({origin:"number",input:h,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),h>a&&u.issues.push({origin:"number",input:h,code:"too_big",maximum:a,inst:t})}}),zL=ne("$ZodCheckMaxLength",(t,e)=>{var n;dr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!F0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=U0(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),UL=ne("$ZodCheckMinLength",(t,e)=>{var n;dr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!F0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=U0(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),BL=ne("$ZodCheckLengthEquals",(t,e)=>{var n;dr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!F0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=U0(s),u=a>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),kp=ne("$ZodCheckStringFormat",(t,e)=>{var n,r;dr.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),$L=ne("$ZodCheckRegex",(t,e)=>{kp.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),WL=ne("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=LL),kp.init(t,e)}),qL=ne("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=ML),kp.init(t,e)}),HL=ne("$ZodCheckIncludes",(t,e)=>{dr.init(t,e);const n=wp(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),KL=ne("$ZodCheckStartsWith",(t,e)=>{dr.init(t,e);const n=new RegExp(`^${wp(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),GL=ne("$ZodCheckEndsWith",(t,e)=>{dr.init(t,e);const n=new RegExp(`.*${wp(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),QL=ne("$ZodCheckOverwrite",(t,e)=>{dr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class ZL{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const YL={major:4,minor:2,patch:1},Pt=ne("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=YL;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)for(const l of a._zod.onattach)l(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const a=(u,h,m)=>{let y=Il(u),w;for(const x of h){if(x._zod.def.when){if(!x._zod.def.when(u))continue}else if(y)continue;const E=u.issues.length,C=x._zod.check(u);if(C instanceof Promise&&(m==null?void 0:m.async)===!1)throw new Dl;if(w||C instanceof Promise)w=(w??Promise.resolve()).then(async()=>{await C,u.issues.length!==E&&(y||(y=Il(u,E)))});else{if(u.issues.length===E)continue;y||(y=Il(u,E))}}return w?w.then(()=>u):u},l=(u,h,m)=>{if(Il(u))return u.aborted=!0,u;const y=a(h,r,m);if(y instanceof Promise){if(m.async===!1)throw new Dl;return y.then(w=>t._zod.parse(w,m))}return t._zod.parse(y,m)};t._zod.run=(u,h)=>{if(h.skipChecks)return t._zod.parse(u,h);if(h.direction==="backward"){const y=t._zod.parse({value:u.value,issues:[]},{...h,skipChecks:!0});return y instanceof Promise?y.then(w=>l(w,u,h)):l(y,u,h)}const m=t._zod.parse(u,h);if(m instanceof Promise){if(h.async===!1)throw new Dl;return m.then(y=>a(y,r,h))}return a(m,r,h)}}t["~standard"]={validate:a=>{var l;try{const u=nL(t,a);return u.success?{value:u.data}:{issues:(l=u.error)==null?void 0:l.issues}}catch{return rL(t,a).then(h=>{var m;return h.success?{value:h.data}:{issues:(m=h.error)==null?void 0:m.issues}})}},vendor:"zod",version:1}}),W0=ne("$ZodString",(t,e)=>{var n;Pt.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??PL(t._zod.bag),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),St=ne("$ZodStringFormat",(t,e)=>{kp.init(t,e),W0.init(t,e)}),JL=ne("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=_L),St.init(t,e)}),XL=ne("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=vx(r))}else e.pattern??(e.pattern=vx());St.init(t,e)}),eM=ne("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=wL),St.init(t,e)}),tM=ne("$ZodURL",(t,e)=>{St.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),nM=ne("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=xL()),St.init(t,e)}),rM=ne("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=yL),St.init(t,e)}),sM=ne("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=hL),St.init(t,e)}),iM=ne("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=fL),St.init(t,e)}),oM=ne("$ZodULID",(t,e)=>{e.pattern??(e.pattern=pL),St.init(t,e)}),aM=ne("$ZodXID",(t,e)=>{e.pattern??(e.pattern=mL),St.init(t,e)}),lM=ne("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=gL),St.init(t,e)}),cM=ne("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=RL(e)),St.init(t,e)}),uM=ne("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=AL),St.init(t,e)}),dM=ne("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=NL(e)),St.init(t,e)}),hM=ne("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=vL),St.init(t,e)}),fM=ne("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=kL),St.init(t,e),t._zod.bag.format="ipv4"}),pM=ne("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=EL),St.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),mM=ne("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=TL),St.init(t,e)}),gM=ne("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=IL),St.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function NI(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const yM=ne("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=SL),St.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{NI(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function vM(t){if(!EI.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return NI(n)}const _M=ne("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=EI),St.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{vM(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),wM=ne("$ZodE164",(t,e)=>{e.pattern??(e.pattern=CL),St.init(t,e)});function bM(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const xM=ne("$ZodJWT",(t,e)=>{St.init(t,e),t._zod.check=n=>{bM(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),RI=ne("$ZodNumber",(t,e)=>{Pt.init(t,e),t._zod.pattern=t._zod.bag.pattern??jL,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const a=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...a?{received:a}:{}}),n}}),kM=ne("$ZodNumberFormat",(t,e)=>{FL.init(t,e),RI.init(t,e)}),EM=ne("$ZodBoolean",(t,e)=>{Pt.init(t,e),t._zod.pattern=OL,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),n}}),TM=ne("$ZodUnknown",(t,e)=>{Pt.init(t,e),t._zod.parse=n=>n}),IM=ne("$ZodNever",(t,e)=>{Pt.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),SM=ne("$ZodDate",(t,e)=>{Pt.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const s=n.value,a=s instanceof Date;return a&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...a?{received:"Invalid Date"}:{},inst:t}),n}});function _x(t,e,n){t.issues.length&&e.issues.push(...Sl(n,t.issues)),e.value[n]=t.value}const CM=ne("$ZodArray",(t,e)=>{Pt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const u=s[l],h=e.element._zod.run({value:u,issues:[]},r);h instanceof Promise?a.push(h.then(m=>_x(m,n,l))):_x(h,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Uf(t,e,n,r){t.issues.length&&e.issues.push(...Sl(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function PI(t){var r,s,a,l;const e=Object.keys(t.shape);for(const u of e)if(!((l=(a=(s=(r=t.shape)==null?void 0:r[u])==null?void 0:s._zod)==null?void 0:a.traits)!=null&&l.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const n=qO(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function DI(t,e,n,r,s,a){const l=[],u=s.keySet,h=s.catchall._zod,m=h.def.type;for(const y in e){if(u.has(y))continue;if(m==="never"){l.push(y);continue}const w=h.run({value:e[y],issues:[]},r);w instanceof Promise?t.push(w.then(x=>Uf(x,n,y,e))):Uf(w,n,y,e)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const AM=ne("$ZodObject",(t,e)=>{Pt.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const h={...u};return Object.defineProperty(e,"shape",{value:h}),h}})}const r=V0(()=>PI(e));vt(t._zod,"propValues",()=>{const u=e.shape,h={};for(const m in u){const y=u[m]._zod;if(y.values){h[m]??(h[m]=new Set);for(const w of y.values)h[m].add(w)}}return h});const s=zf,a=e.catchall;let l;t._zod.parse=(u,h)=>{l??(l=r.value);const m=u.value;if(!s(m))return u.issues.push({expected:"object",code:"invalid_type",input:m,inst:t}),u;u.value={};const y=[],w=l.shape;for(const x of l.keys){const C=w[x]._zod.run({value:m[x],issues:[]},h);C instanceof Promise?y.push(C.then(k=>Uf(k,u,x,m))):Uf(C,u,x,m)}return a?DI(y,m,u,h,r.value,t):y.length?Promise.all(y).then(()=>u):u}}),NM=ne("$ZodObjectJIT",(t,e)=>{AM.init(t,e);const n=t._zod.parse,r=V0(()=>PI(e)),s=x=>{const E=new ZL(["shape","payload","ctx"]),C=r.value,k=$=>{const H=yx($);return`shape[${H}]._zod.run({ value: input[${H}], issues: [] }, ctx)`};E.write("const input = payload.value;");const R=Object.create(null);let q=0;for(const $ of C.keys)R[$]=`key_${q++}`;E.write("const newResult = {};");for(const $ of C.keys){const H=R[$],F=yx($);E.write(`const ${H} = ${k($)};`),E.write(`
        if (${H}.issues.length) {
          payload.issues = payload.issues.concat(${H}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${F}, ...iss.path] : [${F}]
          })));
        }
        
        
        if (${H}.value === undefined) {
          if (${F} in input) {
            newResult[${F}] = undefined;
          }
        } else {
          newResult[${F}] = ${H}.value;
        }
        
      `)}E.write("payload.value = newResult;"),E.write("return payload;");const B=E.compile();return($,H)=>B(x,$,H)};let a;const l=zf,u=!yI.jitless,m=u&&$O.value,y=e.catchall;let w;t._zod.parse=(x,E)=>{w??(w=r.value);const C=x.value;return l(C)?u&&m&&(E==null?void 0:E.async)===!1&&E.jitless!==!0?(a||(a=s(e.shape)),x=a(x,E),y?DI([],C,x,E,w,t):x):n(x,E):(x.issues.push({expected:"object",code:"invalid_type",input:C,inst:t}),x)}});function wx(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!Il(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Io(l,r,To())))}),e)}const RM=ne("$ZodUnion",(t,e)=>{Pt.init(t,e),vt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),vt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),vt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),vt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>z0(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const u=[];for(const h of e.options){const m=h._zod.run({value:s.value,issues:[]},a);if(m instanceof Promise)u.push(m),l=!0;else{if(m.issues.length===0)return m;u.push(m)}}return l?Promise.all(u).then(h=>wx(h,s,t,a)):wx(u,s,t,a)}}),PM=ne("$ZodIntersection",(t,e)=>{Pt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([h,m])=>bx(n,h,m)):bx(n,a,l)}});function _y(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(nc(t)&&nc(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=_y(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=_y(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function bx(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),Il(t))return t;const r=_y(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const DM=ne("$ZodRecord",(t,e)=>{Pt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!nc(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:t}),n;const a=[],l=e.keyType._zod.values;if(l){n.value={};const u=new Set;for(const m of l)if(typeof m=="string"||typeof m=="number"||typeof m=="symbol"){u.add(typeof m=="number"?m.toString():m);const y=e.valueType._zod.run({value:s[m],issues:[]},r);y instanceof Promise?a.push(y.then(w=>{w.issues.length&&n.issues.push(...Sl(m,w.issues)),n.value[m]=w.value})):(y.issues.length&&n.issues.push(...Sl(m,y.issues)),n.value[m]=y.value)}let h;for(const m in s)u.has(m)||(h=h??[],h.push(m));h&&h.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:t,keys:h})}else{n.value={};for(const u of Reflect.ownKeys(s)){if(u==="__proto__")continue;const h=e.keyType._zod.run({value:u,issues:[]},r);if(h instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(h.issues.length){e.mode==="loose"?n.value[u]=s[u]:n.issues.push({code:"invalid_key",origin:"record",issues:h.issues.map(y=>Io(y,r,To())),input:u,path:[u],inst:t});continue}const m=e.valueType._zod.run({value:s[u],issues:[]},r);m instanceof Promise?a.push(m.then(y=>{y.issues.length&&n.issues.push(...Sl(u,y.issues)),n.value[h.value]=y.value})):(m.issues.length&&n.issues.push(...Sl(u,m.issues)),n.value[h.value]=m.value)}}return a.length?Promise.all(a).then(()=>n):n}}),jM=ne("$ZodEnum",(t,e)=>{Pt.init(t,e);const n=vI(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>WO.has(typeof s)).map(s=>typeof s=="string"?wp(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),OM=ne("$ZodTransform",(t,e)=>{Pt.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new gI(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new Dl;return n.value=s,n}});function xx(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const LM=ne("$ZodOptional",(t,e)=>{Pt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",vt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),vt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${z0(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>xx(a,n.value)):xx(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),MM=ne("$ZodNullable",(t,e)=>{Pt.init(t,e),vt(t._zod,"optin",()=>e.innerType._zod.optin),vt(t._zod,"optout",()=>e.innerType._zod.optout),vt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${z0(n.source)}|null)$`):void 0}),vt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),VM=ne("$ZodDefault",(t,e)=>{Pt.init(t,e),t._zod.optin="optional",vt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>kx(a,e)):kx(s,e)}});function kx(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const FM=ne("$ZodPrefault",(t,e)=>{Pt.init(t,e),t._zod.optin="optional",vt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),zM=ne("$ZodNonOptional",(t,e)=>{Pt.init(t,e),vt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Ex(a,t)):Ex(s,t)}});function Ex(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const UM=ne("$ZodCatch",(t,e)=>{Pt.init(t,e),vt(t._zod,"optin",()=>e.innerType._zod.optin),vt(t._zod,"optout",()=>e.innerType._zod.optout),vt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Io(l,r,To()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Io(a,r,To()))},input:n.value}),n.issues=[]),n)}}),BM=ne("$ZodPipe",(t,e)=>{Pt.init(t,e),vt(t._zod,"values",()=>e.in._zod.values),vt(t._zod,"optin",()=>e.in._zod.optin),vt(t._zod,"optout",()=>e.out._zod.optout),vt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>Gh(l,e.in,r)):Gh(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>Gh(a,e.out,r)):Gh(s,e.out,r)}});function Gh(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const $M=ne("$ZodReadonly",(t,e)=>{Pt.init(t,e),vt(t._zod,"propValues",()=>e.innerType._zod.propValues),vt(t._zod,"values",()=>e.innerType._zod.values),vt(t._zod,"optin",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),vt(t._zod,"optout",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(Tx):Tx(s)}});function Tx(t){return t.value=Object.freeze(t.value),t}const WM=ne("$ZodCustom",(t,e)=>{dr.init(t,e),Pt.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>Ix(a,n,r,t));Ix(s,n,r,t)}});function Ix(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Bu(s))}}var Sx;class qM{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function HM(){return new qM}(Sx=globalThis).__zod_globalRegistry??(Sx.__zod_globalRegistry=HM());const pu=globalThis.__zod_globalRegistry;function KM(t,e){return new t({type:"string",...Ie(e)})}function GM(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Ie(e)})}function Cx(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Ie(e)})}function QM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Ie(e)})}function ZM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ie(e)})}function YM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ie(e)})}function JM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ie(e)})}function XM(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Ie(e)})}function e5(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Ie(e)})}function t5(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ie(e)})}function n5(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Ie(e)})}function r5(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ie(e)})}function s5(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Ie(e)})}function i5(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Ie(e)})}function o5(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ie(e)})}function a5(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ie(e)})}function l5(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ie(e)})}function c5(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ie(e)})}function u5(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ie(e)})}function d5(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Ie(e)})}function h5(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Ie(e)})}function f5(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Ie(e)})}function p5(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Ie(e)})}function m5(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ie(e)})}function g5(t,e){return new t({type:"string",format:"date",check:"string_format",...Ie(e)})}function y5(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Ie(e)})}function v5(t,e){return new t({type:"string",format:"duration",check:"string_format",...Ie(e)})}function _5(t,e){return new t({type:"number",checks:[],...Ie(e)})}function w5(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Ie(e)})}function b5(t,e){return new t({type:"boolean",...Ie(e)})}function x5(t){return new t({type:"unknown"})}function k5(t,e){return new t({type:"never",...Ie(e)})}function E5(t,e){return new t({type:"date",...Ie(e)})}function Ax(t,e){return new CI({check:"less_than",...Ie(e),value:t,inclusive:!1})}function gf(t,e){return new CI({check:"less_than",...Ie(e),value:t,inclusive:!0})}function Nx(t,e){return new AI({check:"greater_than",...Ie(e),value:t,inclusive:!1})}function yf(t,e){return new AI({check:"greater_than",...Ie(e),value:t,inclusive:!0})}function Rx(t,e){return new VL({check:"multiple_of",...Ie(e),value:t})}function jI(t,e){return new zL({check:"max_length",...Ie(e),maximum:t})}function Bf(t,e){return new UL({check:"min_length",...Ie(e),minimum:t})}function OI(t,e){return new BL({check:"length_equals",...Ie(e),length:t})}function T5(t,e){return new $L({check:"string_format",format:"regex",...Ie(e),pattern:t})}function I5(t){return new WL({check:"string_format",format:"lowercase",...Ie(t)})}function S5(t){return new qL({check:"string_format",format:"uppercase",...Ie(t)})}function C5(t,e){return new HL({check:"string_format",format:"includes",...Ie(e),includes:t})}function A5(t,e){return new KL({check:"string_format",format:"starts_with",...Ie(e),prefix:t})}function N5(t,e){return new GL({check:"string_format",format:"ends_with",...Ie(e),suffix:t})}function _c(t){return new QL({check:"overwrite",tx:t})}function R5(t){return _c(e=>e.normalize(t))}function P5(){return _c(t=>t.trim())}function D5(){return _c(t=>t.toLowerCase())}function j5(){return _c(t=>t.toUpperCase())}function O5(){return _c(t=>BO(t))}function L5(t,e,n){return new t({type:"array",element:e,...Ie(n)})}function M5(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Ie(n)})}function V5(t){const e=F5(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Bu(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Bu(s))}},t(n.value,n)));return e}function F5(t,e){const n=new dr({check:"custom",...Ie(e)});return n._zod.check=t,n}function LI(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??pu,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function rn(t,e,n={path:[],schemaPath:[]}){var y,w;var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=(w=(y=t._zod).toJSONSchema)==null?void 0:w.call(y);if(u)l.schema=u;else{const x={...n,schemaPath:[...n.schemaPath,t],path:n.path},E=t._zod.parent;if(E)l.ref=E,rn(E,e,x),e.seen.get(E).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,x);else{const C=l.schema,k=e.processors[s.type];if(!k)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);k(t,e,C,x)}}const h=e.metadataRegistry.get(t);return h&&Object.assign(l.schema,h),e.io==="input"&&Wn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function MI(t,e){var a,l,u;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=h=>{var E;const m=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const C=(E=t.external.registry.get(h[0]))==null?void 0:E.id,k=t.external.uri??(q=>q);if(C)return{ref:k(C)};const R=h[1].defId??h[1].schema.id??`schema${t.counter++}`;return h[1].defId=R,{defId:R,ref:`${k("__shared")}#/${m}/${R}`}}if(h[1]===n)return{ref:"#"};const w=`#/${m}/`,x=h[1].schema.id??`__schema${t.counter++}`;return{defId:x,ref:w+x}},s=h=>{if(h[1].schema.$ref)return;const m=h[1],{ref:y,defId:w}=r(h);m.def={...m.schema},w&&(m.defId=w);const x=m.schema;for(const E in x)delete x[E];x.$ref=y};if(t.cycles==="throw")for(const h of t.seen.entries()){const m=h[1];if(m.cycle)throw new Error(`Cycle detected: #/${(a=m.cycle)==null?void 0:a.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const h of t.seen.entries()){const m=h[1];if(e===h[0]){s(h);continue}if(t.external){const w=(l=t.external.registry.get(h[0]))==null?void 0:l.id;if(e!==h[0]&&w){s(h);continue}}if((u=t.metadataRegistry.get(h[0]))==null?void 0:u.id){s(h);continue}if(m.cycle){s(h);continue}if(m.count>1&&t.reused==="ref"){s(h);continue}}}function VI(t,e){var l,u,h;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=m=>{const y=t.seen.get(m),w=y.def??y.schema,x={...w};if(y.ref===null)return;const E=y.ref;if(y.ref=null,E){r(E);const C=t.seen.get(E).schema;C.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(w.allOf=w.allOf??[],w.allOf.push(C)):(Object.assign(w,C),Object.assign(w,x))}y.isParent||t.override({zodSchema:m,jsonSchema:w,path:y.path??[]})};for(const m of[...t.seen.entries()].reverse())r(m[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,(l=t.external)!=null&&l.uri){const m=(u=t.external.registry.get(e))==null?void 0:u.id;if(!m)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(m)}Object.assign(s,n.def??n.schema);const a=((h=t.external)==null?void 0:h.defs)??{};for(const m of t.seen.entries()){const y=m[1];y.def&&y.defId&&(a[y.defId]=y.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const m=JSON.parse(JSON.stringify(s));return Object.defineProperty(m,"~standard",{value:{...e["~standard"],jsonSchema:{input:$f(e,"input"),output:$f(e,"output")}},enumerable:!1,writable:!1}),m}catch{throw new Error("Error converting schema to JSON.")}}function Wn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Wn(r.element,n);if(r.type==="set")return Wn(r.valueType,n);if(r.type==="lazy")return Wn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Wn(r.innerType,n);if(r.type==="intersection")return Wn(r.left,n)||Wn(r.right,n);if(r.type==="record"||r.type==="map")return Wn(r.keyType,n)||Wn(r.valueType,n);if(r.type==="pipe")return Wn(r.in,n)||Wn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(Wn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(Wn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(Wn(s,n))return!0;return!!(r.rest&&Wn(r.rest,n))}return!1}const z5=(t,e={})=>n=>{const r=LI({...n,processors:e});return rn(t,r),MI(r,t),VI(r,t)},$f=(t,e)=>n=>{const{libraryOptions:r,target:s}=n??{},a=LI({...r??{},target:s,io:e,processors:{}});return rn(t,a),MI(a,t),VI(a,t)},U5={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},B5=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:u,patterns:h,contentEncoding:m}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),u&&(s.format=U5[u]??u,s.format===""&&delete s.format),m&&(s.contentEncoding=m),h&&h.size>0){const y=[...h];y.length===1?s.pattern=y[0].source:y.length>1&&(s.allOf=[...y.map(w=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:w.source}))])}},$5=(t,e,n,r)=>{const s=n,{minimum:a,maximum:l,format:u,multipleOf:h,exclusiveMaximum:m,exclusiveMinimum:y}=t._zod.bag;typeof u=="string"&&u.includes("int")?s.type="integer":s.type="number",typeof y=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=y,s.exclusiveMinimum=!0):s.exclusiveMinimum=y),typeof a=="number"&&(s.minimum=a,typeof y=="number"&&e.target!=="draft-04"&&(y>=a?delete s.minimum:delete s.exclusiveMinimum)),typeof m=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=m,s.exclusiveMaximum=!0):s.exclusiveMaximum=m),typeof l=="number"&&(s.maximum=l,typeof m=="number"&&e.target!=="draft-04"&&(m<=l?delete s.maximum:delete s.exclusiveMaximum)),typeof h=="number"&&(s.multipleOf=h)},W5=(t,e,n,r)=>{n.type="boolean"},q5=(t,e,n,r)=>{n.not={}},H5=(t,e,n,r)=>{},K5=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},G5=(t,e,n,r)=>{const s=t._zod.def,a=vI(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},Q5=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Z5=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Y5=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=rn(a.element,e,{...r,path:[...r.path,"items"]})},J5=(t,e,n,r)=>{var m;const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const y in l)s.properties[y]=rn(l[y],e,{...r,path:[...r.path,"properties",y]});const u=new Set(Object.keys(l)),h=new Set([...u].filter(y=>{const w=a.shape[y]._zod;return e.io==="input"?w.optin===void 0:w.optout===void 0}));h.size>0&&(s.required=Array.from(h)),((m=a.catchall)==null?void 0:m._zod.def.type)==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=rn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},X5=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((u,h)=>rn(u,e,{...r,path:[...r.path,a?"oneOf":"anyOf",h]}));a?n.oneOf=l:n.anyOf=l},e3=(t,e,n,r)=>{const s=t._zod.def,a=rn(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=rn(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=m=>"allOf"in m&&Object.keys(m).length===1,h=[...u(a)?a.allOf:[a],...u(l)?l.allOf:[l]];n.allOf=h},t3=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",(e.target==="draft-07"||e.target==="draft-2020-12")&&(s.propertyNames=rn(a.keyType,e,{...r,path:[...r.path,"propertyNames"]})),s.additionalProperties=rn(a.valueType,e,{...r,path:[...r.path,"additionalProperties"]})},n3=(t,e,n,r)=>{const s=t._zod.def,a=rn(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},r3=(t,e,n,r)=>{const s=t._zod.def;rn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},s3=(t,e,n,r)=>{const s=t._zod.def;rn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},i3=(t,e,n,r)=>{const s=t._zod.def;rn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},o3=(t,e,n,r)=>{const s=t._zod.def;rn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},a3=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;rn(a,e,r);const l=e.seen.get(t);l.ref=a},l3=(t,e,n,r)=>{const s=t._zod.def;rn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},c3=(t,e,n,r)=>{const s=t._zod.def;rn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},u3=ne("ZodISODateTime",(t,e)=>{cM.init(t,e),Dt.init(t,e)});function d3(t){return m5(u3,t)}const h3=ne("ZodISODate",(t,e)=>{uM.init(t,e),Dt.init(t,e)});function f3(t){return g5(h3,t)}const p3=ne("ZodISOTime",(t,e)=>{dM.init(t,e),Dt.init(t,e)});function m3(t){return y5(p3,t)}const g3=ne("ZodISODuration",(t,e)=>{hM.init(t,e),Dt.init(t,e)});function y3(t){return v5(g3,t)}const v3=(t,e)=>{xI.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>tL(t,n)},flatten:{value:n=>eL(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,vy,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,vy,2)}},isEmpty:{get(){return t.issues.length===0}}})},Br=ne("ZodError",v3,{Parent:Error}),_3=B0(Br),w3=$0(Br),b3=bp(Br),x3=xp(Br),k3=sL(Br),E3=iL(Br),T3=oL(Br),I3=aL(Br),S3=lL(Br),C3=cL(Br),A3=uL(Br),N3=dL(Br),Vt=ne("ZodType",(t,e)=>(Pt.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:$f(t,"input"),output:$f(t,"output")}}),t.toJSONSchema=z5(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Ma(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>No(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>_3(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>b3(t,n,r),t.parseAsync=async(n,r)=>w3(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>x3(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>k3(t,n,r),t.decode=(n,r)=>E3(t,n,r),t.encodeAsync=async(n,r)=>T3(t,n,r),t.decodeAsync=async(n,r)=>I3(t,n,r),t.safeEncode=(n,r)=>S3(t,n,r),t.safeDecode=(n,r)=>C3(t,n,r),t.safeEncodeAsync=async(n,r)=>A3(t,n,r),t.safeDecodeAsync=async(n,r)=>N3(t,n,r),t.refine=(n,r)=>t.check(kV(n,r)),t.superRefine=n=>t.check(EV(n)),t.overwrite=n=>t.check(_c(n)),t.optional=()=>Ox(t),t.nullable=()=>Lx(t),t.nullish=()=>Ox(Lx(t)),t.nonoptional=n=>yV(t,n),t.array=()=>q0(t),t.or=n=>UI([t,n]),t.and=n=>aV(t,n),t.transform=n=>Mx(t,dV(n)),t.default=n=>pV(t,n),t.prefault=n=>gV(t,n),t.catch=n=>_V(t,n),t.pipe=n=>Mx(t,n),t.readonly=()=>xV(t),t.describe=n=>{const r=t.clone();return pu.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=pu.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return pu.get(t);const r=t.clone();return pu.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),FI=ne("_ZodString",(t,e)=>{W0.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>B5(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(T5(...r)),t.includes=(...r)=>t.check(C5(...r)),t.startsWith=(...r)=>t.check(A5(...r)),t.endsWith=(...r)=>t.check(N5(...r)),t.min=(...r)=>t.check(Bf(...r)),t.max=(...r)=>t.check(jI(...r)),t.length=(...r)=>t.check(OI(...r)),t.nonempty=(...r)=>t.check(Bf(1,...r)),t.lowercase=r=>t.check(I5(r)),t.uppercase=r=>t.check(S5(r)),t.trim=()=>t.check(P5()),t.normalize=(...r)=>t.check(R5(...r)),t.toLowerCase=()=>t.check(D5()),t.toUpperCase=()=>t.check(j5()),t.slugify=()=>t.check(O5())}),R3=ne("ZodString",(t,e)=>{W0.init(t,e),FI.init(t,e),t.email=n=>t.check(GM(P3,n)),t.url=n=>t.check(XM(D3,n)),t.jwt=n=>t.check(p5(G3,n)),t.emoji=n=>t.check(e5(j3,n)),t.guid=n=>t.check(Cx(Px,n)),t.uuid=n=>t.check(QM(Qh,n)),t.uuidv4=n=>t.check(ZM(Qh,n)),t.uuidv6=n=>t.check(YM(Qh,n)),t.uuidv7=n=>t.check(JM(Qh,n)),t.nanoid=n=>t.check(t5(O3,n)),t.guid=n=>t.check(Cx(Px,n)),t.cuid=n=>t.check(n5(L3,n)),t.cuid2=n=>t.check(r5(M3,n)),t.ulid=n=>t.check(s5(V3,n)),t.base64=n=>t.check(d5(q3,n)),t.base64url=n=>t.check(h5(H3,n)),t.xid=n=>t.check(i5(F3,n)),t.ksuid=n=>t.check(o5(z3,n)),t.ipv4=n=>t.check(a5(U3,n)),t.ipv6=n=>t.check(l5(B3,n)),t.cidrv4=n=>t.check(c5($3,n)),t.cidrv6=n=>t.check(u5(W3,n)),t.e164=n=>t.check(f5(K3,n)),t.datetime=n=>t.check(d3(n)),t.date=n=>t.check(f3(n)),t.time=n=>t.check(m3(n)),t.duration=n=>t.check(y3(n))});function it(t){return KM(R3,t)}const Dt=ne("ZodStringFormat",(t,e)=>{St.init(t,e),FI.init(t,e)}),P3=ne("ZodEmail",(t,e)=>{eM.init(t,e),Dt.init(t,e)}),Px=ne("ZodGUID",(t,e)=>{JL.init(t,e),Dt.init(t,e)}),Qh=ne("ZodUUID",(t,e)=>{XL.init(t,e),Dt.init(t,e)}),D3=ne("ZodURL",(t,e)=>{tM.init(t,e),Dt.init(t,e)}),j3=ne("ZodEmoji",(t,e)=>{nM.init(t,e),Dt.init(t,e)}),O3=ne("ZodNanoID",(t,e)=>{rM.init(t,e),Dt.init(t,e)}),L3=ne("ZodCUID",(t,e)=>{sM.init(t,e),Dt.init(t,e)}),M3=ne("ZodCUID2",(t,e)=>{iM.init(t,e),Dt.init(t,e)}),V3=ne("ZodULID",(t,e)=>{oM.init(t,e),Dt.init(t,e)}),F3=ne("ZodXID",(t,e)=>{aM.init(t,e),Dt.init(t,e)}),z3=ne("ZodKSUID",(t,e)=>{lM.init(t,e),Dt.init(t,e)}),U3=ne("ZodIPv4",(t,e)=>{fM.init(t,e),Dt.init(t,e)}),B3=ne("ZodIPv6",(t,e)=>{pM.init(t,e),Dt.init(t,e)}),$3=ne("ZodCIDRv4",(t,e)=>{mM.init(t,e),Dt.init(t,e)}),W3=ne("ZodCIDRv6",(t,e)=>{gM.init(t,e),Dt.init(t,e)}),q3=ne("ZodBase64",(t,e)=>{yM.init(t,e),Dt.init(t,e)}),H3=ne("ZodBase64URL",(t,e)=>{_M.init(t,e),Dt.init(t,e)}),K3=ne("ZodE164",(t,e)=>{wM.init(t,e),Dt.init(t,e)}),G3=ne("ZodJWT",(t,e)=>{xM.init(t,e),Dt.init(t,e)}),zI=ne("ZodNumber",(t,e)=>{RI.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>$5(t,r,s),t.gt=(r,s)=>t.check(Nx(r,s)),t.gte=(r,s)=>t.check(yf(r,s)),t.min=(r,s)=>t.check(yf(r,s)),t.lt=(r,s)=>t.check(Ax(r,s)),t.lte=(r,s)=>t.check(gf(r,s)),t.max=(r,s)=>t.check(gf(r,s)),t.int=r=>t.check(Dx(r)),t.safe=r=>t.check(Dx(r)),t.positive=r=>t.check(Nx(0,r)),t.nonnegative=r=>t.check(yf(0,r)),t.negative=r=>t.check(Ax(0,r)),t.nonpositive=r=>t.check(gf(0,r)),t.multipleOf=(r,s)=>t.check(Rx(r,s)),t.step=(r,s)=>t.check(Rx(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function $u(t){return _5(zI,t)}const Q3=ne("ZodNumberFormat",(t,e)=>{kM.init(t,e),zI.init(t,e)});function Dx(t){return w5(Q3,t)}const Z3=ne("ZodBoolean",(t,e)=>{EM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>W5(t,n,r)});function Y3(t){return b5(Z3,t)}const J3=ne("ZodUnknown",(t,e)=>{TM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>H5()});function jx(){return x5(J3)}const X3=ne("ZodNever",(t,e)=>{IM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>q5(t,n,r)});function eV(t){return k5(X3,t)}const tV=ne("ZodDate",(t,e)=>{SM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>K5(t,r),t.min=(r,s)=>t.check(yf(r,s)),t.max=(r,s)=>t.check(gf(r,s));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function nV(t){return E5(tV,t)}const rV=ne("ZodArray",(t,e)=>{CM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Y5(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Bf(n,r)),t.nonempty=n=>t.check(Bf(1,n)),t.max=(n,r)=>t.check(jI(n,r)),t.length=(n,r)=>t.check(OI(n,r)),t.unwrap=()=>t.element});function q0(t,e){return L5(rV,t,e)}const sV=ne("ZodObject",(t,e)=>{NM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>J5(t,n,r,s),vt(t,"shape",()=>e.shape),t.keyof=()=>H0(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:jx()}),t.loose=()=>t.clone({...t._zod.def,catchall:jx()}),t.strict=()=>t.clone({...t._zod.def,catchall:eV()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>QO(t,n),t.safeExtend=n=>ZO(t,n),t.merge=n=>YO(t,n),t.pick=n=>KO(t,n),t.omit=n=>GO(t,n),t.partial=(...n)=>JO(BI,t,n[0]),t.required=(...n)=>XO($I,t,n[0])});function Ro(t,e){const n={type:"object",shape:t??{},...Ie(e)};return new sV(n)}const iV=ne("ZodUnion",(t,e)=>{RM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>X5(t,n,r,s),t.options=e.options});function UI(t,e){return new iV({type:"union",options:t,...Ie(e)})}const oV=ne("ZodIntersection",(t,e)=>{PM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>e3(t,n,r,s)});function aV(t,e){return new oV({type:"intersection",left:t,right:e})}const lV=ne("ZodRecord",(t,e)=>{DM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>t3(t,n,r,s),t.keyType=e.keyType,t.valueType=e.valueType});function cV(t,e,n){return new lV({type:"record",keyType:t,valueType:e,...Ie(n)})}const wy=ne("ZodEnum",(t,e)=>{jM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>G5(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new wy({...e,checks:[],...Ie(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new wy({...e,checks:[],...Ie(s),entries:a})}});function H0(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new wy({type:"enum",entries:n,...Ie(e)})}const uV=ne("ZodTransform",(t,e)=>{OM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Z5(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new gI(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Bu(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(Bu(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function dV(t){return new uV({type:"transform",transform:t})}const BI=ne("ZodOptional",(t,e)=>{LM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>c3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Ox(t){return new BI({type:"optional",innerType:t})}const hV=ne("ZodNullable",(t,e)=>{MM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>n3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Lx(t){return new hV({type:"nullable",innerType:t})}const fV=ne("ZodDefault",(t,e)=>{VM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>s3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function pV(t,e){return new fV({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():wI(e)}})}const mV=ne("ZodPrefault",(t,e)=>{FM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>i3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function gV(t,e){return new mV({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():wI(e)}})}const $I=ne("ZodNonOptional",(t,e)=>{zM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>r3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function yV(t,e){return new $I({type:"nonoptional",innerType:t,...Ie(e)})}const vV=ne("ZodCatch",(t,e)=>{UM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>o3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function _V(t,e){return new vV({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const wV=ne("ZodPipe",(t,e)=>{BM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>a3(t,n,r,s),t.in=e.in,t.out=e.out});function Mx(t,e){return new wV({type:"pipe",in:t,out:e})}const bV=ne("ZodReadonly",(t,e)=>{$M.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>l3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function xV(t){return new bV({type:"readonly",innerType:t})}const WI=ne("ZodCustom",(t,e)=>{WM.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Q5(t,n)});function kV(t,e={}){return M5(WI,t,e)}function EV(t){return V5(t)}function TV(t,e={error:`Input not instance of ${t.name}`}){const n=new WI({type:"custom",check:"custom",fn:r=>r instanceof t,abort:!0,...Ie(e)});return n._zod.bag.Class=t,n}const ui=UI([nV(),TV(xt),it().datetime({offset:!0}).or(it().datetime())]).nullable().optional(),IV=Ro({type:H0(["none","daily","weekly","weekdays","monthly"]).default("none"),days:q0($u().min(0).max(6)).optional()}).nullable(),K0=Ro({id:it().optional(),title:it().min(1,""),description:it().nullable().optional(),status:H0(["todo","completed","archived"]).default("todo"),dueDate:ui,completedAt:ui,createdAt:ui,ownerId:it(),projectId:it().nullable().optional(),labelIds:q0(it()).optional(),timeBlockId:it().nullable().optional(),duration:$u().optional(),isImportant:Y3().default(!1),recurrence:IV,order:$u().optional()});Ro({id:it().optional(),name:it().min(1,"Project name is required"),color:it().optional(),ownerId:it(),createdAt:ui,order:$u().optional()});Ro({id:it().optional(),name:it().min(1,"Label name is required"),color:it().optional(),ownerId:it(),workspaceId:it().optional(),createdAt:ui});const qI=Ro({id:it().optional(),name:it().min(1,"Workspace name is required"),createdAt:ui}),HI=Ro({id:it().optional(),name:it().min(1),query:it(),workspaceId:it().optional(),createdAt:ui}),Vx=it().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,"Time must be in HH:mm format (e.g., 09:00, 14:30)");Ro({id:it().optional(),name:it(),start:Vx,end:Vx,color:it().optional(),order:$u().optional()});Ro({id:it().optional(),mode:it(),data:cV(it(),it()),createdAt:ui,updatedAt:ui,ownerId:it(),workspaceId:it()});const Ms=ja()(yd(t=>({currentWorkspaceId:null,workspaces:[],setCurrentWorkspaceId:e=>t({currentWorkspaceId:e}),setWorkspaces:e=>{const n=e.filter(r=>{const s=qI.safeParse(r);return s.success?!0:(console.error("Invalid workspace data:",r,s.error),!1)});t({workspaces:n})}}),{name:"workspace-storage",partialize:t=>({currentWorkspaceId:t.currentWorkspaceId})}));function SV(){return typeof window<"u"&&window.GLOBAL_APP_ID?window.GLOBAL_APP_ID:typeof __app_id<"u"?__app_id:"default-app-id"}function by(t){return`artifacts/${SV()}/users/${t}`}function bl(t,e){return`${by(t)}/workspaces/${e}`}const $e={users:t=>by(t),workspaces:t=>`${by(t)}/workspaces`,filters:(t,e)=>`${bl(t,e)}/filters`,labels:(t,e)=>`${bl(t,e)}/labels`,timeblocks:(t,e)=>`${bl(t,e)}/timeblocks`,tasks:(t,e)=>`${bl(t,e)}/tasks`,projects:(t,e)=>`${bl(t,e)}/projects`,targets:(t,e)=>`${bl(t,e)}/targets`};let Zh=null;function CV(){return Ms.getState().workspaces}function AV(t,e){if(!t)return e&&e([]),()=>{};Zh&&Zh();const n=$e.workspaces(t),r=Ao(ht(Me,n),_p("createdAt","asc")),s=Ms.getState();return Zh=Da(r,a=>{const l=a.docs.map(u=>({id:u.id,...u.data()}));s.setWorkspaces(l),l.length===0&&!a.metadata.hasPendingWrites?(e&&e([]),NV().catch(u=>console.error("[Workspace] Default creation error:",u))):(RV(l),e&&e(l))},a=>{console.error("[Workspace] Subscription error:",a),s.setWorkspaces([]),e&&e([])}),Zh}async function NV(){try{const t=Qe.currentUser;if(!t)return;const e=$e.workspaces(t.uid);(await si(Ao(ht(Me,e),C4(1)))).empty&&await GI("")}catch(t){console.error("[Workspace] Failed to ensure default workspace:",t)}}function RV(t){if(t.length===0)return null;const e=Ms.getState();let n=e.currentWorkspaceId;const r=n?t.some(s=>s.id===n):!1;return(!n||!r)&&(n=t[0].id,e.setCurrentWorkspaceId(n)),n}function hs(){return Ms.getState().currentWorkspaceId}function KI(t){if(!t)return;const e=Ms.getState();e.currentWorkspaceId!==t&&e.setCurrentWorkspaceId(t)}async function GI(t){try{qI.pick({name:!0}).parse({name:t});const e=Qe.currentUser;if(!e)throw new Error("Authentication required");const n=$e.workspaces(e.uid);return{id:(await Vr(ht(Me,n),{name:t,createdAt:Ls()})).id,name:t}}catch(e){throw console.error("[Workspace] Add error:",e),e}}async function PV(t,e){try{const n=Qe.currentUser;if(!n)throw new Error("Authentication required");const r=$e.workspaces(n.uid);await mc(Mn(Me,r,t),{name:e})}catch(n){console.error("[Workspace] Update error:",n)}}function Wu(t){console.error("[ErrorLogger]",t)}function DV(){window.onerror=(t,e,n,r,s)=>(Wu({timestamp:new Date().toISOString(),type:"error",message:String(t),stack:s==null?void 0:s.stack,url:e,line:n,column:r}),!1),window.onunhandledrejection=t=>{const e=t.reason;Wu({timestamp:new Date().toISOString(),type:"unhandledrejection",message:(e==null?void 0:e.message)||String(e),stack:e==null?void 0:e.stack})},console.info("[ErrorLogger] Initialized")}function jV(t,e){Wu({timestamp:new Date().toISOString(),type:"react",message:t.message,stack:t.stack,componentStack:e})}class OV{constructor(){Gi(this,"isListenerInitialized",!1)}getCurrentUserId(){var e;return((e=Qe.currentUser)==null?void 0:e.uid)||null}hasInitialToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return!0;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return!0}catch{}return!1}getInitialAuthToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return window.GLOBAL_INITIAL_AUTH_TOKEN;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return __initial_auth_token}catch{}return null}async tryInitialTokenLogin(){if(this.isListenerInitialized)return;this.isListenerInitialized=!0;const e=this.getInitialAuthToken();if(e)try{await vR(Qe,e),console.log("[Auth] Initial token login success")}catch(n){Wu({timestamp:new Date().toISOString(),type:"error",message:`Initial token login failed: ${n.message}`,stack:n.stack,url:"auth.ts"})}}initAuthListener(e,n){return this.isListenerInitialized||this.tryInitialTokenLogin(),bE(Qe,s=>{s?e(s):n()})}async loginWithEmail(e,n){return await wE(Qe,e,n)}async logout(){try{await xE(Qe)}catch(e){throw Wu({timestamp:new Date().toISOString(),type:"error",message:`Logout failed: ${e.message}`,stack:e.stack,url:"auth.ts"}),e}}async updateUserAuthPassword(e){const n=Qe.currentUser;if(!n)throw new Error("Authentication required: No current user.");await wR(n,e)}}const xy=new OV,LV=(t,e)=>xy.initAuthListener(t,e),G0=()=>{var l;const[t,e]=j.useState(((l=Qe.currentUser)==null?void 0:l.uid)||null),[n,r]=j.useState(Qe.currentUser),[s,a]=j.useState(!0);return j.useEffect(()=>{let u=()=>{};return(async()=>{xy.hasInitialToken()&&await xy.tryInitialTokenLogin(),u=LV(m=>{e(m.uid),r(m),a(!1)},()=>{e(null),r(null),a(!1)})})(),()=>u()},[]),{userId:t,user:n,loading:s}},MV=()=>{const t=Ms(l=>l.workspaces),e=Ms(l=>l.setWorkspaces),{userId:n,loading:r}=G0(),[s,a]=j.useState(!0);return j.useEffect(()=>{if(r)return;if(!n){e([]),a(!1);return}const l=AV(n,()=>{a(!1)});return()=>l()},[n,r,e]),{workspaces:t,loading:s||r}},Vs=()=>{const t=Ms(r=>r.currentWorkspaceId),{userId:e,loading:n}=G0();return{workspaceId:t,userId:e,loading:n}},VV=()=>{const{t}=ur(),{workspaces:e,loading:n}=MV(),{openModal:r}=pn(),[s,a]=j.useState(!1),l=j.useRef(null),{workspaceId:u}=Vs(),h=e.find(m=>m.id===u);return j.useEffect(()=>{const m=w=>{l.current&&!l.current.contains(w.target)&&a(!1)},y=w=>{w.key==="Escape"&&a(!1)};return s&&(document.addEventListener("mousedown",m),document.addEventListener("keydown",y)),()=>{document.removeEventListener("mousedown",m),document.removeEventListener("keydown",y)}},[s]),n?p.jsx("div",{className:"h-8 w-32 bg-gray-100 dark:bg-gray-800 animate-pulse rounded"}):p.jsxs("div",{className:"relative",ref:l,children:[p.jsxs("button",{onClick:()=>a(!s),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md px-2 py-1 transition-colors group","aria-expanded":s,"aria-haspopup":"true",children:[p.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 truncate max-w-[120px] sm:max-w-[140px] md:max-w-[180px]",children:h?h.name:t("loading")}),p.jsx("svg",{className:Se("w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-transform duration-200",s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),s&&p.jsxs("div",{className:"absolute left-0 mt-2 w-60 sm:w-64 max-w-[calc(100vw-32px)] origin-top-left rounded-lg shadow-2xl bg-white dark:bg-gray-800 ring-1 ring-black/5 z-50 border border-gray-100 dark:border-gray-700 overflow-hidden animate-scale-in custom-scrollbar",children:[p.jsx("div",{className:"p-1 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50",children:p.jsxs("button",{onClick:()=>{a(!1),r("workspace-edit",null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700/50 transition-colors rounded-md",children:[p.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),t("sidebar.add_workspace")]})}),p.jsx("div",{className:"py-1 max-h-[300px] overflow-y-auto custom-scrollbar",children:e.map(m=>{const y=m.id===u;return p.jsxs("button",{onClick:()=>{m.id&&KI(m.id),a(!1)},className:Se("w-full text-left px-4 py-2 text-sm flex items-center justify-between transition-colors",y?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[p.jsx("span",{className:"truncate block max-w-[140px] sm:max-w-[180px]",children:m.name}),y&&p.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]},m.id)})})]})]})},FV=({sidebarContent:t,title:e,children:n})=>{const{toggleSidebar:r,isSidebarOpen:s}=M0(),{t:a}=ur(),{openModal:l}=pn();return p.jsxs("div",{className:"w-full h-full flex overflow-hidden bg-premium-gradient text-gray-800 dark:text-white antialiased",children:[s&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-20 lg:hidden transition-opacity duration-300",onClick:r}),p.jsx(zO,{children:t}),p.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden",id:"main-content",children:[p.jsxs("header",{className:"h-12 border-b border-gray-200 dark:border-gray-800 flex items-center px-4 justify-between bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-10 sticky top-0",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[!s&&p.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:a("sidebar.menu_open"),"aria-label":a("sidebar.menu_open"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),p.jsx(VV,{}),p.jsx("h1",{className:"font-bold text-lg border-l border-gray-300 dark:border-gray-700 pl-3 ml-1 truncate",children:e})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("button",{onClick:()=>l("settings"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Settings","aria-label":"Settings",children:p.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]}),p.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:p.jsx("div",{className:Se("w-full h-full bg-white dark:bg-gray-900 relative flex-1",It.LAYOUT.CONTAINER_WIDTH_CLASS),children:n})})]})]})};function zV(t,e){return t===e?!0:!t||!e||t.length!==e.length?!1:JSON.stringify(t)===JSON.stringify(e)}function UV(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;const n=[...t].sort((s,a)=>(s.id||"").localeCompare(a.id||"")),r=[...e].sort((s,a)=>(s.id||"").localeCompare(a.id||""));for(let s=0;s<n.length;s++){const a=n[s],l=r[s];if(a.id!==l.id||a.status!==l.status||a.title!==l.title||a.description!==l.description||a.projectId!==l.projectId||a.timeBlockId!==l.timeBlockId||a.duration!==l.duration||a.isImportant!==l.isImportant)return!1;const u=a.dueDate instanceof Date?a.dueDate.getTime():a.dueDate,h=l.dueDate instanceof Date?l.dueDate.getTime():l.dueDate;if(u!==h)return!1}return!0}function BV(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].id!==e[n].id||t[n].name!==e[n].name||t[n].color!==e[n].color)return!1;return!0}const $V=["permission-denied","invalid-argument","unauthenticated","not-found","already-exists","failed-precondition"];async function Fs(t,e=3,n=1e3,r=!1){let s;for(let a=0;a<=e;a++)try{return await t()}catch(l){if(s=l,a===e)break;const u=(l==null?void 0:l.code)||"";if($V.some(y=>u.includes(y)))throw l;const m=n*Math.pow(2,a);r&&console.warn(`[Retry] Attempt ${a+1} failed. Retrying in ${m}ms...`,(l==null?void 0:l.message)||l),await new Promise(y=>setTimeout(y,m))}throw s}const po=new Map,mu=new Map,Yh=new Map;function WV(t){return po.has(t)}function ky(t){const e=po.get(t)||[],n=mu.get(t);if(n){const r=[...e];n.forEach(s=>s(r))}}function qV(t,e){po.set(t,e),ky(t)}function HV(t,e,n){mu.has(e)||mu.set(e,new Set);const r=mu.get(e);r.add(n);const s=po.get(e);if(s&&queueMicrotask(()=>n([...s])),!Yh.has(e)){const a=$e.projects(t,e),l=Ao(ht(Me,a),_p("createdAt","asc")),u=Da(l,h=>{const m=h.docs.map(w=>({id:w.id,...w.data()})),y=po.get(e);y&&BV(y,m)||(po.set(e,m),ky(e))},h=>{console.error("Error subscribing to projects:",h),po.set(e,[]),ky(e)});Yh.set(e,u)}return()=>{if(r.delete(n),r.size===0){const a=Yh.get(e);a&&(a(),Yh.delete(e)),mu.delete(e)}}}function KV(t){return po.get(t)||[]}async function GV(t,e,n,r){return Fs(async()=>{const s=$e.projects(t,e);await Vr(ht(Me,s),{name:n,color:r,ownerId:t,createdAt:Ls()})})}async function QV(t,e,n,r){return Fs(async()=>{const s=$e.projects(t,e),a=Mn(Me,s,n);await mc(a,r)})}async function ZV(t,e,n){return Fs(async()=>{const r=$e.projects(t,e);await gc(Mn(Me,r,n))})}async function YV(t,e,n){return Fs(async()=>{const r=py(Me),s=$e.projects(t,e);n.forEach((a,l)=>{if(a.id){const u=Mn(Me,s,a.id);r.update(u,{order:l})}}),await r.commit()})}function Q0(){var n;const t=(n=Qe.currentUser)==null?void 0:n.uid,e=hs();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}const JV=t=>{const e=t||hs();return e?KV(e):[]},XV=t=>{const e=t||hs();return e?WV(e):!1},eF=(t,e)=>{const n=e||hs();n&&qV(n,t)},tF=(t,e)=>{const n=typeof t=="function"?t:e,r=typeof t=="string"?t:hs(),s=Qe.currentUser;return s&&r&&typeof n=="function"?HV(s.uid,r,n):(typeof n=="function"&&n([]),()=>{})},nF=async(t,e=null,n)=>{const r=Qe.currentUser;if(!r)throw new Error("Authentication required.");const s=e||hs();if(!s)throw new Error("Workspace selection required.");return GV(r.uid,s,t,n)},rF=async(t,e)=>{const{userId:n,workspaceId:r}=Q0();return QV(n,r,t,e)},QI=async t=>{const{userId:e,workspaceId:n}=Q0();return ZV(e,n,t)},sF=async t=>{const{userId:e,workspaceId:n}=Q0();return YV(e,n,t)},Jh=new Map;function _d(t,e,n){const r=Dy(),s=JSON.stringify(t);return j.useEffect(()=>{if(t.some(l=>l==null))return;let a=Jh.get(s);return a||(a={count:0,unsubscribe:e(u=>{r.setQueryData(t,u)})},Jh.set(s,a)),a.count++,()=>{const l=Jh.get(s);l&&(l.count--,l.count===0&&(l.unsubscribe(),Jh.delete(s)))}},[s]),rC({queryKey:t,queryFn:()=>n||[],initialData:n,staleTime:1/0,gcTime:1e3*60*5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})}const Ep=()=>{const{workspaceId:t,loading:e}=Vs(),n=Dy(),r=j.useCallback(y=>t?tF(t,y):()=>{},[t]),a=(t?XV(t):!1)&&t?JV(t):void 0,{data:l,isPending:u}=_d(["projects",t||void 0],r,a);return{projects:l||[],loading:e||!!t&&u,setProjectsOverride:y=>{t&&(n.setQueryData(["projects",t],y),eF(y,t))}}};let gu=[];function iF(t,e){var a;const n=(a=Qe.currentUser)==null?void 0:a.uid;if(!n||!t)return gu=[],typeof e=="function"&&e(gu),()=>{};const r=$e.timeblocks(n,t),s=Ao(ht(Me,r),_p("order","asc"));return Da(s,l=>{gu=l.docs.map(u=>({id:u.id,...u.data()})),typeof e=="function"&&e(gu)},l=>{console.error("[TimeBlocks] Subscription error:",l)})}async function oF(t,e){var r;const n=(r=Qe.currentUser)==null?void 0:r.uid;if(!n||!t){console.error("Authentication and WorkspaceID required for TimeBlock operation.");return}try{const s=$e.timeblocks(n,t),a=e.id||crypto.randomUUID(),l=e.order!==void 0?e.order:Math.max(...gu.map(h=>h.order||0),-1)+1,u={name:e.name,start:e.start,end:e.end,color:e.color,order:l,updatedAt:Ls()};return await R4(Mn(Me,s,a),u,{merge:!0}),!0}catch(s){console.error("[TimeBlocks] Save error:",s)}}async function ZI(t,e){var r;const n=(r=Qe.currentUser)==null?void 0:r.uid;if(!(!n||!t))try{const s=$e.timeblocks(n,t);return await gc(Mn(Me,s,e)),!0}catch(s){console.error("[TimeBlocks] Delete error:",s)}}const wd=()=>{const{workspaceId:t,loading:e}=Vs(),n=j.useCallback(l=>t?iF(t,l):()=>{},[t]),{data:r,isPending:s}=_d(["timeblocks",t],n,void 0);return{timeBlocks:r||[],loading:e||!!t&&s}};function Z0(t){const e={keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(!t)return e;const n=/(?:-?[a-zA-Z]+:(?:"[^"]*"|[^\s]+))|(?:"[^"]*")|(?:-?[^\s]+)/g,r=t.match(n);if(!r)return e;const s=[];for(let a=0;a<r.length;a++){const l=r[a];if(l==="OR"){const u=s.length-1,h=s[u],m=r[a+1],y=h&&(typeof h=="string"?!h.includes(":"):!0),w=m&&!m.includes(":")&&m!=="OR";if(y&&w){const x=Array.isArray(h)?h:[h];x.push(m.toLowerCase().replace(/^"|"$/g,"")),s[u]=x,a++;continue}}s.push(l)}return s.forEach(a=>{if(Array.isArray(a)){e.keywords.push(a);return}const l=a;if(l.startsWith('"')&&l.endsWith('"')){const u=l.substring(1,l.length-1);u&&e.keywords.push(u.toLowerCase());return}if(l.startsWith("-")&&!l.includes(":")){const u=l.substring(1);u&&e.excludeKeywords.push(u.toLowerCase());return}if(l.includes(":")){let u=!1,h=l;h.startsWith("-")&&(u=!0,h=h.substring(1));const m=h.indexOf(":"),y=h.substring(0,m).toLowerCase();let w=h.substring(m+1);switch(w.startsWith('"')&&w.endsWith('"')&&(w=w.substring(1,w.length-1)),w.toLowerCase(),y){case"project":case"p":u?w.split(",").forEach(C=>e.excludeProjects.push(C)):w.split(",").forEach(C=>e.projects.push(C));break;case"label":case"l":u?w.split(",").forEach(C=>e.excludeLabels.push(C)):w.split(",").forEach(C=>e.labels.push(C));break;case"timeblock":case"tb":u?w.split(",").forEach(C=>e.excludeTimeBlocks.push(C)):w.split(",").forEach(C=>e.timeBlocks.push(C));break;case"duration":case"d":w.split(",").forEach(C=>{const k=parseInt(C,10);isNaN(k)||e.durations.push(k)});break;case"date":case"due":const x=["today","tomorrow","week","upcoming","overdue","next-week"];w.split(",").forEach(C=>{const k=C.toLowerCase();x.includes(k)&&e.dates.push(k)});break;case"status":case"is":const E=["completed","active","todo"];w.split(",").forEach(C=>{const k=C.toLowerCase();E.includes(k)&&(u?e.excludeStatus.push(k):e.status.push(k)),k==="important"&&(e.isImportant=!u),k==="unimportant"&&(e.isImportant=u)});break;default:u?e.excludeKeywords.push(h.toLowerCase()):e.keywords.push(h.toLowerCase());break}}else l!=="OR"&&e.keywords.push(l.toLowerCase())}),e}function aF(t){var n,r,s,a,l,u,h,m,y,w,x,E;const e=[];return(n=t.keywords)!=null&&n.length&&e.push(...t.keywords.map(C=>Array.isArray(C)?C.join(" OR "):C.includes(" ")?`"${C}"`:C)),(r=t.excludeKeywords)!=null&&r.length&&e.push(...t.excludeKeywords.map(C=>`-${C}`)),(s=t.projects)!=null&&s.length&&e.push(`project:${t.projects.join(",")}`),(a=t.excludeProjects)!=null&&a.length&&e.push(`-project:${t.excludeProjects.join(",")}`),(l=t.labels)!=null&&l.length&&e.push(`label:${t.labels.join(",")}`),(u=t.excludeLabels)!=null&&u.length&&e.push(`-label:${t.excludeLabels.join(",")}`),(h=t.timeBlocks)!=null&&h.length&&e.push(`timeblock:${t.timeBlocks.join(",")}`),(m=t.excludeTimeBlocks)!=null&&m.length&&e.push(`-timeblock:${t.excludeTimeBlocks.join(",")}`),(y=t.durations)!=null&&y.length&&e.push(`duration:${t.durations.join(",")}`),(w=t.dates)!=null&&w.length&&e.push(`date:${t.dates.join(",")}`),(x=t.status)!=null&&x.length&&e.push(`status:${t.status.join(",")}`),(E=t.excludeStatus)!=null&&E.length&&e.push(`-status:${t.excludeStatus.join(",")}`),t.isImportant===!0&&e.push("is:important"),t.isImportant===!1&&e.push("is:unimportant"),e.join(" ")}const lF=t=>t instanceof Date?xt.fromDate(t):t;async function cF(t,e){if(!t||!e)throw new Error("Missing parameters for backup.");try{const n=ht(Me,$e.tasks(t,e)),r=ht(Me,$e.projects(t,e)),s=ht(Me,$e.labels(t,e)),a=ht(Me,$e.targets(t,e)),l=ht(Me,$e.timeblocks(t,e)),u=ht(Me,$e.filters(t,e)),[h,m,y,w,x,E]=await Promise.all([si(n),si(r),si(s),si(a),si(l),si(u)]),C=k=>k.docs.map(R=>{const q=R.data(),B={id:R.id};for(const $ in q)B[$]=q[$]instanceof xt?q[$].toDate().toISOString():q[$];return B});return{version:"1.3",exportedAt:new Date().toISOString(),userId:t,workspaceId:e,tasks:C(h),projects:C(m),labels:C(y),targets:C(w),timeBlocks:C(x),customFilters:C(E)}}catch(n){throw console.error("[Backup] createBackupData failed:",n),n}}async function uF(t,e,n){if(!t||!e||!n)throw new Error("Invalid import parameters.");try{const{tasks:r=[],projects:s=[],labels:a=[],targets:l=[],timeBlocks:u=[],customFilters:h=[]}=n,m=new Map,y=new Map,w=await si(ht(Me,$e.labels(t,e))),x=new Map;w.forEach(C=>x.set(C.data().name,C.id));for(const C of a)if(C.name)if(x.has(C.name))y.set(C.id,x.get(C.name));else{const k={...C};delete k.id;const R=await Vr(ht(Me,$e.labels(t,e)),k);y.set(C.id,R.id),x.set(C.name,R.id)}for(const C of s){const k={...C};delete k.id,typeof k.createdAt=="string"&&(k.createdAt=new Date(k.createdAt));const R=await Vr(ht(Me,$e.projects(t,e)),k);m.set(C.id,R.id)}for(const C of u){const k={...C};delete k.id,await Vr(ht(Me,$e.timeblocks(t,e)),k)}for(const C of h){const k={...C};delete k.id,typeof k.createdAt=="string"&&(k.createdAt=new Date(k.createdAt)),await Vr(ht(Me,$e.filters(t,e)),k)}for(const C of l){const k={...C};delete k.id,typeof k.createdAt=="string"&&(k.createdAt=new Date(k.createdAt)),typeof k.updatedAt=="string"&&(k.updatedAt=new Date(k.updatedAt)),k.ownerId=t,k.workspaceId=e,await Vr(ht(Me,$e.targets(t,e)),k)}const E=r.map(async C=>{const k={...C};return delete k.id,typeof k.createdAt=="string"&&(k.createdAt=new Date(k.createdAt)),typeof k.dueDate=="string"&&(k.dueDate=new Date(k.dueDate)),k.dueDate&&(k.dueDate=lF(k.dueDate)),k.projectId&&m.has(k.projectId)?k.projectId=m.get(k.projectId):k.projectId=null,Array.isArray(k.labelIds)&&(k.labelIds=k.labelIds.map(R=>y.get(R)).filter(R=>R)),k.ownerId=t,Vr(ht(Me,$e.tasks(t,e)),k)});return await Promise.all(E),{tasksCount:r.length,projectsCount:s.length,labelsCount:a.length,targetsCount:l.length}}catch(r){throw console.error("[Backup] importBackupData failed:",r),r}}function dF(t,e){var a;const n=(a=Qe.currentUser)==null?void 0:a.uid;if(!n||!t)return e([]),()=>{};const r=$e.filters(n,t),s=Ao(ht(Me,r));return Da(s,l=>{const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("[Filters] Subscription error:",l),e([])})}async function hF(t){var h;const e=(h=Qe.currentUser)==null?void 0:h.uid;if(!e)throw Tn.error(""),new Error("Authentication required");const{workspaceId:n,...r}=t;if(!n)throw Tn.error("ID"),new Error("Workspace ID required");const s=HI.pick({name:!0,query:!0}).safeParse(r);if(!s.success){const m=s.error.issues.map(y=>y.message).join(", ");throw console.error("[Filters] Validation failed:",s.error.flatten()),Tn.error(`: ${m}`),new Error(`Validation failed: ${m}`)}const a=$e.filters(e,n),{id:l,...u}=r;await Vr(ht(Me,a),{...u,ownerId:e,workspaceId:n,createdAt:Ls()})}async function fF(t,e,n){var h;const r=(h=Qe.currentUser)==null?void 0:h.uid;if(!r||!t)throw Tn.error(""),new Error("Authentication required");const s=HI.partial().safeParse(n);if(!s.success){const m=s.error.issues.map(y=>y.message).join(", ");throw console.error("[Filters] Validation failed:",s.error.flatten()),Tn.error(`: ${m}`),new Error(`Validation failed: ${m}`)}const a=$e.filters(r,t),{id:l,...u}=n;await mc(Mn(Me,a,e),{...u,updatedAt:Ls()})}async function pF(t,e){var s;const n=(s=Qe.currentUser)==null?void 0:s.uid;if(!n||!t)throw Tn.error(""),new Error("Authentication required");const r=$e.filters(n,t);await gc(Mn(Me,r,e))}let Ey=[];function mF(){return Ey}function gF(t,e,n){if(!t||!e)return n([]),()=>{};const r=$e.labels(t,e),s=Ao(ht(Me,r));return Da(s,a=>{const l=a.docs.map(u=>({id:u.id,...u.data()}));Ey=l,n(l)},a=>{console.error("[Labels] Subscription error:",a),Ey=[],n([])})}async function yF(t,e,n,r){const s=$e.labels(t,e);await Vr(ht(Me,s),{name:n,color:r,ownerId:t,workspaceId:e,createdAt:Ls()})}async function vF(t,e,n,r){const s=$e.labels(t,e),a=Mn(Me,s,n);return mc(a,r)}async function _F(t,e,n){const r=$e.labels(t,e);await gc(Mn(Me,r,n))}const wF=mF;function Y0(){var e;const t=(e=Qe.currentUser)==null?void 0:e.uid;if(!t)throw console.error("Authentication required for label operation."),new Error("Authentication required.");return t}function bF(t,e){var r;const n=(r=Qe.currentUser)==null?void 0:r.uid;return n&&t?gF(n,t,e):(e([]),()=>{})}async function xF(t,e,n){const r=Y0();if(!t)throw new Error("Workspace ID required");return yF(r,t,e,n)}async function kF(t,e,n){const r=Y0();if(!t)throw new Error("Workspace ID required");return vF(r,t,e,n)}async function EF(t,e){const n=Y0();if(!t)throw new Error("Workspace ID required");return _F(n,t,e)}async function TF(t){const e=Qe.currentUser;if(!e)throw new Error("User not authenticated");const n=$e.tasks(e.uid,t),s=(await si(ht(Me,n))).docs.map(h=>({id:h.id,...h.data()})),a=new Map;for(const h of s){if(!h.title)continue;const m=h.title.trim(),y=a.get(m)||[];y.push(h),a.set(m,y)}let l=0;const u=[];for(const[h,m]of a.entries())if(m.length>1){m.sort((w,x)=>{const E=R=>{if(!R)return 0;if(typeof R=="object"&&"toDate"in R&&typeof R.toDate=="function")return R.toDate().getTime();const q=new Date(R);return isNaN(q.getTime())?0:q.getTime()},C=E(w.createdAt),k=E(x.createdAt);return C-k});const y=m.slice(1);for(const w of y)w.id&&(console.log(`[Cleanup] Deleting duplicate task: "${w.title}" (${w.id})`),u.push(gc(Mn(Me,n,w.id))),l++)}return await Promise.all(u),l}const kg=new Map;function IF(t,e,n,r){const s=$e.targets(t,e),a=Ao(ht(Me,s),_p("createdAt","desc"));let l=!0;return Da(a,u=>{const h=u.docs.map(y=>({id:y.id,...y.data()})),m=kg.get(e);if(m&&zV(m,h)){l&&n(m),l=!1;return}kg.set(e,h),l=!1,n(h)},u=>{console.error("Error subscribing to targets:",u),kg.set(e,[]),n([]),r&&r(u)})}async function SF(t,e,n){return Fs(async()=>{const r=$e.targets(t,e),s={...n,ownerId:t,workspaceId:e,createdAt:Ls(),updatedAt:Ls()};delete s.id,await Vr(ht(Me,r),s)})}function CF(){var n;const t=(n=Qe.currentUser)==null?void 0:n.uid,e=hs();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}const AF=(t,e,n)=>{let r,s,a;typeof t=="function"?(r=t,s=hs()||void 0):(s=t,r=e,a=n);const l=Qe.currentUser;return l&&s&&typeof r=="function"?IF(l.uid,s,r,a):(typeof r=="function"&&r([]),()=>{})},NF=async t=>{const{userId:e,workspaceId:n}=CF();return SF(e,n,t)};function fn(t){if(!t)return null;if(t instanceof Date)return t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();const e=new Date(t);return isNaN(e.getTime())?null:e}const Fx=(t,e)=>{const n=fn(t),r=fn(e);return!n||!r?!1:n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()&&n.getDate()===r.getDate()},RF=t=>{const e=fn(t);if(!e)return!1;const n=new Date;return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()},PF=(t,e=7)=>{const n=fn(t);if(!n)return!1;const r=new Date;r.setHours(0,0,0,0);const s=new Date(r);s.setDate(r.getDate()+1);const a=new Date(r);return a.setDate(r.getDate()+e+1),n>=s&&n<a};function Tp(t=new Date){const e=fn(t)||new Date,n=new Date(e);return n.setHours(0,0,0,0),n}function DF(t=new Date,e=1){const n=fn(t)||new Date,r=n.getDay(),s=n.getDate()-r+(r<e?e-7:e),a=new Date(n);return a.setDate(s),Tp(a)}function jF(t){const e=fn(t);if(!e)return"";const n=new Date,r=Tp(n),s=Math.round((e.getTime()-r.getTime())/(1e3*60*60*24));if(s===0)return"";if(s===1)return"";if(s===-1)return"";const a=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),u=String(e.getDate()).padStart(2,"0");return a!==n.getFullYear()?`${a}/${l}/${u}`:`${l}/${u}`}const OF=t=>{const e=fn(t);if(!e)return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${s}`},LF=t=>{if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e};function MF(t){const e=fn(t);if(!e)return"text-gray-500";const n=Tp(new Date),r=Math.round((e.getTime()-n.getTime())/(1e3*60*60*24));return r<0?"text-red-500 font-bold":r===0?"text-green-600 dark:text-green-400 font-medium":r===1?"text-orange-500 dark:text-orange-400 font-medium":"text-gray-500 dark:text-gray-400"}function VF(t,e){var r;if(!t||!(e!=null&&e.type))return null;const n=new Date(fn(t));switch(e.type){case"daily":return n.setDate(n.getDate()+1),n;case"weekly":{if(!((r=e.days)!=null&&r.length))return null;const s=n.getDay();for(let a=1;a<=7;a++){const l=(s+a)%7;if(e.days.includes(l))return n.setDate(n.getDate()+a),n}return null}case"weekdays":do n.setDate(n.getDate()+1);while(n.getDay()===0||n.getDay()===6);return n;case"monthly":return n.setMonth(n.getMonth()+1),n;default:return null}}function FF(t){const e=Tp(new Date);if(!(t!=null&&t.type)||t.type==="daily"||t.type==="monthly")return e;if(t.type==="weekly"&&t.days&&t.days.length>0){const n=e.getDay();for(let r=0;r<=6;r++)if(t.days.includes((n+r)%7))return e.setDate(e.getDate()+r),e}if(t.type==="weekdays"){for(;e.getDay()===0||e.getDay()===6;)e.setDate(e.getDate()+1);return e}return e}function zF(t,e){if(!t||!e)return 0;const[n,r]=t.split(":").map(Number),[s,a]=e.split(":").map(Number);if(isNaN(n)||isNaN(r)||isNaN(s)||isNaN(a))return 0;const l=n*60+r;let u=s*60+a;return u<l&&(u+=1440),u-l}const Eg=t=>t instanceof xt?t.toDate():t instanceof Date?t:void 0,YI=t=>t instanceof Date?xt.fromDate(t):t;function UF(t,e){if(!e||typeof e!="object")return console.warn(`[deserializeTask] Invalid data for task ${t}:`,e),{id:t,title:"Invalid Task",status:"todo",ownerId:""};const n=e.recurrence||null,r={id:t,title:String(e.title||"Untitled"),description:e.description?String(e.description):null,status:e.status==="completed"||e.status==="todo"||e.status==="archived"?e.status:"todo",dueDate:Eg(e.dueDate)||void 0,createdAt:Eg(e.createdAt)||void 0,completedAt:Eg(e.completedAt)||void 0,ownerId:String(e.ownerId||""),projectId:e.projectId?String(e.projectId):null,labelIds:Array.isArray(e.labelIds)?e.labelIds.map(String):[],timeBlockId:e.timeBlockId?String(e.timeBlockId):null,duration:typeof e.duration=="number"?e.duration:null,isImportant:!!e.isImportant,recurrence:n};return K0.safeParse(r).success,r}const la=class la{constructor(){Gi(this,"cachedTasksMap",new Map);Gi(this,"listeners",new Map);Gi(this,"unsubscribes",new Map);Gi(this,"currentWorkspaceId",null)}static getInstance(){return la.instance||(la.instance=new la),la.instance}notifyListeners(e){const n=this.cachedTasksMap.get(e)||[],r=this.listeners.get(e);if(r){const s=[...n];r.forEach(a=>a(s))}}reset(e){var n;e?((n=this.unsubscribes.get(e))==null||n(),this.unsubscribes.delete(e),this.listeners.delete(e),this.cachedTasksMap.delete(e)):(this.unsubscribes.forEach(r=>r()),this.unsubscribes.clear(),this.listeners.clear(),this.cachedTasksMap.clear()),this.currentWorkspaceId=null}getTask(e,n){const r=this.cachedTasksMap.get(e);return r==null?void 0:r.find(s=>s.id===n)}getTasks(e){return this.cachedTasksMap.get(e)||[]}isInitialized(e){return this.cachedTasksMap.has(e)}setCache(e,n){this.cachedTasksMap.set(e,n),this.notifyListeners(e)}subscribe(e,n,r,s){if(!e||!n)return r([]),()=>{};this.currentWorkspaceId=n,this.listeners.has(n)||this.listeners.set(n,new Set);const a=this.listeners.get(n);a.add(r);const l=this.cachedTasksMap.get(n);if(l&&queueMicrotask(()=>r([...l])),!this.unsubscribes.has(n)){const u=$e.tasks(e,n),h=Ao(ht(Me,u)),m=Da(h,y=>{const w=y.docs.map(E=>UF(E.id,E.data())),x=this.cachedTasksMap.get(n);x&&UV(x,w)||(this.cachedTasksMap.set(n,w),this.notifyListeners(n))},y=>{console.error("[Tasks] Subscription error:",y),s&&s(y)});this.unsubscribes.set(n,m)}return()=>{if(a.delete(r),a.size===0){const u=this.unsubscribes.get(n);u&&(u(),this.unsubscribes.delete(n))}}}};Gi(la,"instance");let Ty=la;const zr=Ty.getInstance();function BF(t,e){return zr.getTask(t,e)}function $F(t){return zr.getTasks(t)}function WF(t){return zr.isInitialized(t)}function qF(t,e,n,r){return zr.subscribe(t,e,n,r)}function JI(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!==void 0))}async function HF(t,e,n){const r=zr.getTasks(e);if(r){const s=r.map(a=>{const l=n.indexOf(a.id);return l!==-1?{...a,order:l}:a});zr.setCache(e,s)}return Fs(async()=>{const s=py(Me),a=$e.tasks(t,e),l=[];for(let u=0;u<n.length;u+=500)l.push(n.slice(u,u+500));for(const u of l){const h=py(Me);u.forEach((m,y)=>{const w=n.indexOf(m),x=Mn(Me,a,m);h.update(x,{order:w})}),await h.commit()}})}async function XI(t,e,n){return Fs(async()=>{const r=$e.tasks(t,e),s=JI({...n});return s.dueDate&&(s.dueDate=YI(s.dueDate)),delete s.id,await Vr(ht(Me,r),{...s,ownerId:t,status:"todo",createdAt:Ls()})})}async function KF(t,e,n,r){const s=zr.getTasks(e);let a=s==null?void 0:s.find(l=>l.id===n);if(s){const l=s.map(u=>u.id===n?{...u,status:r,completedAt:r==="completed"?new Date:void 0}:u);zr.setCache(e,l)}if(r==="completed"&&(a!=null&&a.recurrence)&&a.recurrence.type!=="none"){const l=VF(a.dueDate??null,a.recurrence);if(l){const u={title:a.title,description:a.description,projectId:a.projectId,labelIds:a.labelIds,timeBlockId:a.timeBlockId,duration:a.duration,isImportant:a.isImportant,recurrence:a.recurrence,dueDate:l,status:"todo"};XI(t,e,u).catch(h=>console.error("Failed to create recurring task:",h))}}return Fs(async()=>{const l=$e.tasks(t,e),u={status:r};r==="completed"?u.completedAt=Ls():u.completedAt=null,await mc(Mn(Me,l,n),u)})}async function GF(t,e,n,r){const s=zr.getTasks(e);if(s){const a=s.map(l=>l.id===n?{...l,...r}:l);zr.setCache(e,a)}return Fs(async()=>{const a=$e.tasks(t,e),l=JI({...r});l.dueDate!==void 0&&(l.dueDate=YI(l.dueDate)),await mc(Mn(Me,a,n),l)})}async function QF(t,e,n){const r=zr.getTasks(e);if(r){const s=r.filter(a=>a.id!==n);zr.setCache(e,s)}return Fs(async()=>{const s=$e.tasks(t,e);await gc(Mn(Me,s,n))})}const Aa=()=>vd(Ur.getState().language).t;function bd(){var n;const t=(n=Qe.currentUser)==null?void 0:n.uid,e=hs();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}async function e1(t){try{const{userId:e,workspaceId:n}=bd(),s=K0.partial().required({title:!0}).safeParse(t);s.success||console.warn("[addTask] Validation warning:",s.error.flatten()),await XI(e,n,t)}catch(e){throw console.error("Failed to add task:",e),Tn.error(Aa()("msg.task.create_fail")),e}}async function J0(t,e){try{const{userId:n,workspaceId:r}=bd(),s=K0.partial().safeParse(e);s.success||console.warn("[updateTask] Validation warning:",s.error.flatten()),await GF(n,r,t,e)}catch(n){throw console.error("Failed to update task:",n),Tn.error(Aa()("msg.task.update_fail")),n}}async function ZF(t){try{const{userId:e,workspaceId:n}=bd();await HF(e,n,t)}catch(e){throw console.error("Failed to reorder tasks:",e),Tn.error(Aa()("msg.task.update_fail")),e}}async function YF(t){try{const{userId:e,workspaceId:n}=bd();await QF(e,n,t),Tn.success(Aa()("msg.task.delete_success"))}catch(e){throw console.error("Failed to delete task:",e),Tn.error(Aa()("msg.task.delete_fail")),e}}async function JF(t,e){try{const{userId:n,workspaceId:r}=bd(),s=BF(r,t),l=((s==null?void 0:s.status)||e||"todo")==="completed"?"todo":"completed";await KF(n,r,t,l),l==="completed"&&Tn.success(Aa()("msg.task.complete_success"))}catch(n){throw console.error("Failed to toggle status:",n),Tn.error(Aa()("msg.task.status_update_fail")),n}}function XF(t,e,n){const r=Qe.currentUser;return!r||!t?(typeof e=="function"&&e([]),()=>{}):qF(r.uid,t,e,n)}const e6=t=>{const e=t||hs();return e?$F(e):[]},t6=t=>{const e=t||hs();return e?WF(e):!1},wc=({message:t,id:e,className:n})=>t?p.jsxs("div",{id:e,role:"alert",className:`p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center justify-center gap-2 animate-in slide-in-from-top-1 fade-in duration-200 ${n||""}`,children:[p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),p.jsx("span",{children:t})]}):null,zx='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',Po=({isOpen:t,onClose:e,title:n,children:r,className:s,overlayClassName:a,zIndex:l=100,size:u="md"})=>{const h=j.useRef(null),m={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-3xl",xl:"max-w-5xl",full:"max-w-full m-4 h-[calc(100vh-2rem)]"};return j.useEffect(()=>{const y=x=>{x.key==="Escape"&&e()},w=x=>{if(x.key!=="Tab"||!h.current)return;const E=h.current.querySelectorAll(zx);if(E.length===0){x.preventDefault();return}const C=E[0],k=E[E.length-1];x.shiftKey?document.activeElement===C&&(x.preventDefault(),k.focus()):document.activeElement===k&&(x.preventDefault(),C.focus())};if(t){window.addEventListener("keydown",y),window.addEventListener("keydown",w),document.body.style.overflow="hidden";const x=setTimeout(()=>{var C;const E=(C=h.current)==null?void 0:C.querySelectorAll(zx);E&&E.length>0?E[0].focus():h.current&&h.current.focus()},50);return()=>clearTimeout(x)}return()=>{window.removeEventListener("keydown",y),window.removeEventListener("keydown",w),document.body.style.overflow=""}},[t,e]),t?ua.createPortal(p.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4 sm:p-6 animate-fade-in",style:{zIndex:l},role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,children:[p.jsx("div",{className:Se("fixed inset-0 backdrop-blur-sm transition-opacity",a??"bg-black/50"),onClick:e,"aria-hidden":"true"}),p.jsxs("div",{ref:h,tabIndex:-1,className:Se("relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full overflow-hidden flex flex-col transform transition-all animate-scale-in outline-none",m[u],s),children:[n&&p.jsxs("div",{className:"px-modal py-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[p.jsx("h3",{id:"modal-title",className:"text-lg font-bold text-gray-900 dark:text-white",children:n}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-modal custom-scrollbar",children:r})]})]}),document.body):null},Xh=({title:t,items:e,selectedItems:n,onToggle:r,labelFn:s=a=>a.name})=>p.jsxs("div",{className:"flex flex-col h-64 border border-gray-100 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-900",children:[p.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700 text-xs font-bold text-gray-500 uppercase tracking-wider",children:t}),p.jsx("div",{className:"p-2 overflow-y-auto space-y-1 custom-scrollbar",children:e.map(a=>{const l=a.id||a.toString(),u=n.includes(l),h=`filter-${t.replace(/ /g,"-")}-${l}`;return p.jsxs("div",{className:"flex items-center px-2 py-1.5 rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",onClick:()=>r(l),children:[p.jsx("input",{id:h,type:"checkbox",checked:u,onChange:()=>{},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer","aria-label":`${t}: ${s(a)}`}),p.jsx("label",{htmlFor:h,className:"ml-2 text-sm text-gray-700 dark:text-gray-300 truncate flex-1 cursor-pointer pointer-events-none",children:s(a)})]},l)})})]}),vf="none",n6=t=>{const e=Z0(t);return{project:e.projects,timeblock:e.timeBlocks.map(n=>n==="null"||n==="none"?vf:n),duration:e.durations.map(n=>n.toString()),date:e.dates}},r6=[30,45,60,75,90],s6=[{id:"today",name:""},{id:"tomorrow",name:""},{id:"week",name:""},{id:"next-week",name:""}],i6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{closeModal:s}=pn(),a=!!t,l=e,u=!!(l!=null&&l.id),{projects:h}=Ep(),{timeBlocks:m}=wd(),{workspaceId:y}=Vs(),[w,x]=j.useState(""),[E,C]=j.useState({project:[],timeblock:[],duration:[],date:[]}),[k,R]=j.useState(!1),[q,B]=j.useState(null);j.useEffect(()=>{a&&(x((l==null?void 0:l.name)||""),C(n6((l==null?void 0:l.query)||"")),B(null),R(!1))},[a,l]);const $=(F,te)=>{C(S=>{const I=S[F],N=I.includes(te)?I.filter(P=>P!==te):[...I,te];return{...S,[F]:N}})},H=j.useCallback(async()=>{const F=w.trim();if(!F){B("");return}const te=aF({projects:E.project,timeBlocks:E.timeblock.map(S=>S===vf?"null":S),durations:E.duration.map(Number),dates:E.date});if(!te){B("1");return}R(!0),B(null);try{if(!y){B(""),R(!1);return}const S={name:F,query:te,type:"custom"};u&&(l!=null&&l.id)?await fF(y,l.id,S):await hF({...S,workspaceId:y}),s()}catch(S){B(": "+(S.message||"")),R(!1)}},[w,E,u,l,s]);return a?p.jsx(Po,{isOpen:a,onClose:s,title:u?"":"",className:"max-w-4xl",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"filter-name-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),p.jsx("input",{id:"filter-name-input",name:"filterName",type:"text",value:w,onChange:F=>x(F.target.value),placeholder:": ",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg outline-none focus:ring-2 focus:ring-blue-500/20 dark:text-white",autoFocus:!0})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(Xh,{title:"",items:h,selectedItems:E.project,onToggle:F=>$("project",F)}),p.jsx(Xh,{title:"",items:[...m,{id:vf,name:""}],selectedItems:E.timeblock,onToggle:F=>$("timeblock",F),labelFn:F=>F.id===vf||!F.start?F.name:`${F.start}-${F.end}`}),p.jsx(Xh,{title:"",items:r6.map(F=>({id:F.toString(),name:`${F} min`})),selectedItems:E.duration,onToggle:F=>$("duration",F)}),p.jsx(Xh,{title:"",items:s6,selectedItems:E.date,onToggle:F=>$("date",F)})]}),p.jsx(wc,{message:q}),p.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[p.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition",children:""}),p.jsx("button",{onClick:H,disabled:k,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50",children:k?"...":u?"":""})]})]})}):null},Tg=["#EF5350","#EC407A","#AB47BC","#7E57C2","#5C6BC0","#42A5F5","#29B6F6","#26C6DA","#26A69A","#66BB6A","#9CCC65","#D4E157","#FFEE58","#FFCA28","#FFA726","#FF7043","#8D6E63","#BDBDBD","#78909C"],o6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{closeModal:s}=pn(),a=!!t,l=e,u=!!(l!=null&&l.id),{workspaceId:h}=Vs(),[m,y]=j.useState(""),[w,x]=j.useState("#42A5F5"),[E,C]=j.useState(!1),[k,R]=j.useState(null);j.useEffect(()=>{a&&(y((l==null?void 0:l.name)||""),x((l==null?void 0:l.color)||Tg[Math.floor(Math.random()*Tg.length)]),R(null),C(!1))},[a,l]);const q=j.useCallback(async()=>{const H=m.trim();if(!H){R("");return}C(!0),R(null);try{if(!h){R(""),C(!1);return}u&&(l!=null&&l.id)?await kF(h,l.id,{name:H,color:w}):await xF(h,H,w),s()}catch(F){R(": "+(F.message||"")),C(!1)}},[m,w,u,l,s]),B=j.useCallback(async()=>{if(l!=null&&l.id&&confirm(`${l.name}`)){C(!0);try{h&&(l!=null&&l.id)&&await EF(h,l.id),s()}catch{R(""),C(!1)}}},[l,s]),$=H=>{H.key==="Enter"&&!H.nativeEvent.isComposing&&(!E&&m.trim()&&q(),H.preventDefault())};return a?p.jsx(Po,{isOpen:a,onClose:s,className:"max-w-sm",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full flex-shrink-0 border-2 border-gray-100 dark:border-gray-700 shadow-sm",style:{backgroundColor:w}}),p.jsx("input",{id:"label-name-input",name:"labelName",type:"text",value:m,onChange:H=>y(H.target.value),onKeyDown:$,placeholder:u?"":"",className:"flex-1 text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-400",autoFocus:!0,"aria-label":"","aria-invalid":!!k,"aria-describedby":k?"label-error-msg":void 0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:""}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Tg.map(H=>p.jsx("button",{type:"button",onClick:()=>x(H),className:Se("w-6 h-6 rounded-full transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",w===H?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800 scale-110":""),style:{backgroundColor:H},"aria-label":`: ${H}`,"aria-pressed":w===H},H))})]}),p.jsx(wc,{message:k}),p.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.jsx("div",{className:"flex items-center gap-2",children:u&&p.jsx("button",{onClick:B,disabled:E,className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50","aria-label":"",title:"",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:s,disabled:E,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:""}),p.jsx("button",{onClick:q,disabled:E||!m.trim(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:E?"...":u?"":""})]})]})]})}):null},Ux=["#7E57C2","#5C6BC0","#42A5F5","#29B6F6","#26C6DA","#26A69A","#66BB6A","#9CCC65","#D4E157","#FFEE58","#FFCA28","#FFA726","#FF7043","#8D6E63","#BDBDBD"],a6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{closeModal:s}=pn(),{currentWorkspaceId:a}=Ms(),l=!!t,u=e,h=!!(u!=null&&u.id),[m,y]=j.useState(""),[w,x]=j.useState("#7E57C2"),[E,C]=j.useState(!1),[k,R]=j.useState(null);j.useEffect(()=>{l&&(y((u==null?void 0:u.name)||""),x((u==null?void 0:u.color)||Ux[0]),R(null),C(!1))},[l,u]);const q=j.useCallback(async()=>{const H=m.trim();if(!H){R("");return}if(!a&&!h){R("");return}C(!0),R(null);try{h&&(u!=null&&u.id)?await rF(u.id,{name:H,color:w}):a&&await nF(H,a,w),s()}catch(F){R(": "+(F.message||"")),C(!1)}},[m,w,h,u,a,s]),B=j.useCallback(async()=>{if(u!=null&&u.id&&confirm(`${u.name}`)){C(!0);try{await QI(u.id),s()}catch{R(""),C(!1)}}},[u,s]),$=H=>{H.key==="Enter"&&!H.nativeEvent.isComposing&&(!E&&m.trim()&&q(),H.preventDefault())};return l?p.jsx(Po,{isOpen:l,onClose:s,className:"max-w-sm",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-500 shrink-0",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"project-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1",children:""}),p.jsx("input",{id:"project-name-input",name:"projectName",type:"text",value:m,onChange:H=>y(H.target.value),onKeyDown:$,placeholder:"...",className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600 p-0",autoFocus:!0,"aria-describedby":k?"project-error-msg":void 0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:""}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Ux.map(H=>p.jsx("button",{type:"button",onClick:()=>x(H),className:Se("w-6 h-6 rounded-full transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",w===H?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800 scale-110":""),style:{backgroundColor:H},"aria-label":`: ${H}`,"aria-pressed":w===H},H))})]}),p.jsx(wc,{message:k,id:"project-error-msg"}),p.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.jsx("div",{className:"flex items-center gap-2",children:h&&p.jsx("button",{onClick:B,disabled:E,className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50","aria-label":"",title:"",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),p.jsxs("div",{className:"flex gap-3",children:[h?p.jsx("button",{onClick:s,disabled:E,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:""}):p.jsx("button",{onClick:s,disabled:E,className:"text-sm text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition",children:""}),p.jsx("button",{onClick:q,disabled:E,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"...":h?"":""})]})]})]})}):null},ou=({title:t,children:e,defaultOpen:n=!0,icon:r,className:s})=>{const[a,l]=j.useState(n);return p.jsxs("section",{className:Se("border border-gray-200 dark:border-gray-700/50 rounded-xl overflow-hidden",s),children:[p.jsxs("button",{onClick:()=>l(!a),className:"w-full flex items-center justify-between p-4 bg-gray-50/50 dark:bg-gray-800/30 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors text-left",type:"button",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[r&&p.jsx("span",{className:"text-lg",children:r}),p.jsx("h4",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:t})]}),p.jsx("svg",{className:Se("w-4 h-4 text-gray-400 transition-transform duration-200",a&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p.jsx("div",{className:Se("transition-all duration-300 ease-in-out overflow-hidden bg-white dark:bg-transparent",a?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"),children:p.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700/30",children:e})})]})},l6=()=>{const{user:t}=G0(),[e,n]=j.useState(""),[r,s]=j.useState(""),[a,l]=j.useState(!1),[u,h]=j.useState(null);if(!t)return p.jsx("div",{className:"text-center text-gray-500",children:""});const m=t.isAnonymous,y=async x=>{x.preventDefault(),l(!0),h(null);try{const E=Na.credential(e,r);await gR(t,E),Tn.success("")}catch(E){console.error("Link account error:",E);let C="";E.code==="auth/email-already-in-use"&&(C=""),E.code==="auth/weak-password"&&(C=""),h(C)}finally{l(!1)}},w=async()=>{confirm("")&&(await xE(Qe),window.location.reload())};return p.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[p.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-2xl p-6 flex flex-col sm:flex-row items-center gap-8 sm:gap-6 border border-gray-100 dark:border-gray-700",children:[p.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-3xl shadow-inner shrink-0",children:m?"":""}),p.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:m?"":t.displayName||""}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono mb-4 break-all",children:m?`ID: ${t.uid.slice(0,8)}...`:t.email}),!m&&p.jsx("button",{onClick:w,className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 text-sm font-bold px-4 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border border-transparent hover:border-red-100 dark:hover:border-red-900/30",children:""})]})]}),m?p.jsxs("div",{className:"border border-blue-200 dark:border-blue-800 bg-blue-50/50 dark:bg-blue-900/10 rounded-2xl p-8 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:p.jsx("svg",{className:"w-32 h-32 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),p.jsxs("div",{className:"relative",children:[p.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," "]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6 leading-relaxed whitespace-pre-wrap",children:" "}),p.jsxs("form",{onSubmit:y,className:"space-y-4 max-w-md",children:[u&&p.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-lg font-medium animate-in slide-in-from-top-2",children:u}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"account-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:"Email"}),p.jsx("input",{id:"account-email",type:"email",required:!0,value:e,onChange:x=>n(x.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"mail@example.com",autoComplete:"email"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"account-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:"Password"}),p.jsx("input",{id:"account-password",type:"password",required:!0,minLength:6,value:r,onChange:x=>s(x.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"",autoComplete:"new-password"})]}),p.jsx("button",{type:"submit",disabled:a,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all active:scale-95 flex items-center justify-center gap-2 group",children:a?"...":p.jsxs(p.Fragment,{children:["",p.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]})})]})]})]}):p.jsx("div",{className:"text-center py-8 text-gray-400",children:p.jsx("p",{children:""})})]})},ef=({active:t,onClick:e,label:n,icon:r})=>p.jsxs("button",{onClick:e,className:Se("w-full flex items-center gap-3 px-4 py-3 md:py-2 text-sm rounded-lg transition-all text-left whitespace-nowrap min-w-0 justify-start",t?"bg-white dark:bg-gray-800 shadow-sm text-blue-600 dark:text-blue-400 font-bold border border-gray-100 dark:border-gray-700":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-200"),children:[p.jsx("span",{className:"text-xl md:text-base",children:r}),p.jsx("span",{className:"truncate font-medium",children:n})]}),c6=({isOpen:t,zIndex:e,overlayClassName:n})=>{const{t:r}=ur(),{closeModal:s}=pn(),{themeMode:a,setThemeMode:l,density:u,setDensity:h,fontSize:m,setFontSize:y,fontEn:w,setFontEn:x,fontJp:E,setFontJp:C,language:k,setLanguage:R}=Ur(),{currentWorkspaceId:q}=Ms(),[B,$]=j.useState("appearance"),H=!!t;return p.jsx(Po,{isOpen:H,onClose:s,title:r("settings_modal.title"),className:"w-full max-w-4xl h-[90vh] md:h-[85vh] p-0 overflow-hidden",zIndex:e,overlayClassName:n,children:p.jsxs("div",{className:"flex flex-col md:flex-row h-full",children:[p.jsx("div",{className:"w-full md:w-64 bg-gray-50/50 dark:bg-gray-900/50 border-b md:border-b-0 md:border-r border-gray-200 dark:border-gray-700 p-4 shrink-0 overflow-y-auto custom-scrollbar",children:p.jsxs("div",{className:"space-y-1 md:space-y-2",children:[p.jsx(ef,{active:B==="general",onClick:()=>$("general"),label:r("settings_modal.tabs.general"),icon:""}),p.jsx(ef,{active:B==="appearance",onClick:()=>$("appearance"),label:r("settings_modal.tabs.appearance"),icon:""}),p.jsx(ef,{active:B==="account",onClick:()=>$("account"),label:r("settings_modal.tabs.account"),icon:""}),p.jsx("hr",{className:"my-2 border-gray-200 dark:border-gray-700 md:hidden"}),p.jsx(ef,{active:B==="advanced",onClick:()=>$("advanced"),label:r("settings_modal.tabs.advanced"),icon:""})]})}),p.jsxs("div",{className:"flex-1 p-4 md:p-8 overflow-y-auto custom-scrollbar bg-white dark:bg-gray-900",children:[B==="appearance"&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx(ou,{title:r("settings_modal.appearance.theme"),icon:"",defaultOpen:!0,children:p.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","system"].map(F=>p.jsx("button",{onClick:()=>l(F),className:Se("p-3 border rounded-xl text-sm font-medium transition-all",a===F?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-white dark:hover:bg-gray-800 bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400"),children:p.jsx("span",{className:"capitalize",children:r(`settings_modal.options.theme.${F}`)})},F))})}),p.jsx(ou,{title:r("settings_modal.appearance.density"),icon:"",defaultOpen:!0,children:p.jsx("div",{className:"space-y-3",children:["compact","normal","comfortable","spacious"].map(F=>p.jsxs("label",{htmlFor:`density-${F}`,className:Se("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors",u===F?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-transparent hover:bg-white dark:hover:bg-gray-800"),children:[p.jsx("div",{className:Se("w-4 h-4 rounded-full border flex items-center justify-center",u===F?"border-blue-500 bg-blue-500":"border-gray-300"),children:u===F&&p.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),p.jsx("input",{id:`density-${F}`,type:"radio",name:"density",checked:u===F,onChange:()=>h(F),className:"hidden"}),p.jsx("span",{className:"capitalize text-sm font-medium text-gray-700 dark:text-gray-300",children:r(`settings_modal.options.density.${F}`)})]},F))})}),p.jsx(ou,{title:r("settings_modal.appearance.font_size"),icon:"Aa",defaultOpen:!0,children:p.jsx("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:["sm","base","md","lg","xl"].map(F=>p.jsx("button",{onClick:()=>y(F),className:Se("flex-1 py-1.5 px-3 rounded text-sm font-medium transition-all",m===F?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:F},F))})}),p.jsx(ou,{title:r("settings_modal.appearance.fonts"),icon:"Tt",defaultOpen:!1,children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"settings-font-en",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:r("settings_modal.appearance.font_en")}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{id:"settings-font-en",name:"fontEn",value:w,onChange:F=>x(F.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none relative z-10 bg-transparent",children:It.FONTS.EU.map(F=>p.jsx("option",{value:F.value,children:F.label},F.value))}),p.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 z-0",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"settings-font-jp",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:r("settings_modal.appearance.font_jp")}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{id:"settings-font-jp",name:"fontJp",value:E,onChange:F=>C(F.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none relative z-10 bg-transparent",children:It.FONTS.JP.map(F=>p.jsx("option",{value:F.value,children:F.label},F.value))}),p.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 z-0",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})})]}),B==="general"&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-800",children:[p.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," ",r("settings_modal.backup.title")]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:r("settings_modal.backup.description")}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[p.jsxs("button",{onClick:async()=>{if(!(!Qe.currentUser||!q))try{const F=await cF(Qe.currentUser.uid,q),te=new Blob([JSON.stringify(F,null,2)],{type:"application/json"}),S=URL.createObjectURL(te),I=document.createElement("a");I.href=S,I.download=`taskmg-backup-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(S)}catch(F){console.error(F),alert(r("settings_modal.backup.create_fail"))}},className:"btn-premium w-full sm:w-auto text-sm flex items-center justify-center gap-2 bg-white text-blue-600 border border-blue-200 hover:bg-blue-50 shadow-sm",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),p.jsx("span",{className:"inline",children:r("settings_modal.backup.create")})]}),p.jsxs("div",{className:"relative w-full sm:w-auto",children:[p.jsx("input",{type:"file",accept:".json",className:"hidden",id:"backup-import-input",onChange:async F=>{var I;const te=(I=F.target.files)==null?void 0:I[0];if(!te||!Qe.currentUser||!q)return;if(!window.confirm(r("settings_modal.backup.import_confirm"))){F.target.value="";return}const S=new FileReader;S.onload=async N=>{var P;try{const O=JSON.parse((P=N.target)==null?void 0:P.result),M=await uF(Qe.currentUser.uid,q,O);alert(r("settings_modal.backup.import_success").replace("{tasks}",String(M.tasksCount)).replace("{projects}",String(M.projectsCount))),window.location.reload()}catch(O){console.error(O),alert(r("settings_modal.backup.import_fail"))}},S.readAsText(te),F.target.value=""}}),p.jsxs("label",{htmlFor:"backup-import-input",className:"w-full sm:w-auto px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-bold rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer shadow-sm text-sm flex items-center justify-center gap-2 transition-colors",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),r("settings_modal.backup.import")]})]})]})]}),p.jsx(ou,{title:r("settings_modal.language.title"),icon:"",defaultOpen:!0,children:p.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{code:"ja",label:""},{code:"en",label:"English"}].map(F=>p.jsxs("button",{onClick:()=>R(F.code),className:Se("p-3 border rounded-xl text-sm font-medium transition-all",k===F.code?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-white dark:hover:bg-gray-800 bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400"),children:[p.jsx("span",{className:"text-xl mr-2",children:F.code==="ja"?"":""}),F.label]},F.code))})})]}),B==="account"&&p.jsx(l6,{}),B==="advanced"&&p.jsx("div",{className:"flex flex-col gap-4",children:p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-xl border border-red-100 dark:border-red-900/30",children:[p.jsxs("h4",{className:"font-bold text-red-700 dark:text-red-400 mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," ",r("settings_modal.maintenance.title")]}),p.jsx("p",{className:"text-sm text-red-600/80 dark:text-red-400/80 mb-4",children:r("settings_modal.maintenance.description")}),p.jsx("button",{onClick:async()=>{if(q&&confirm(r("settings_modal.maintenance.confirm_backup"))&&confirm(r("settings_modal.maintenance.confirm_final")))try{const F=await TF(q);alert(r("settings_modal.maintenance.cleanup_success").replace("{count}",String(F))),F>0&&window.location.reload()}catch(F){console.error(F),alert(r("settings_modal.maintenance.cleanup_fail").replace("{error}",F.message))}},className:"px-6 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-bold shadow-md hover:shadow-lg flex items-center justify-center gap-2 transition-all transform active:scale-95",children:r("settings_modal.maintenance.cleanup_duplicate")})]})})]})]})})},u6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function d6(t){return t.replace(/[&<>"']/g,e=>u6[e]||e)}function h6(t){if(!t)return"";const e=t.split(`
`);let n=[],r=null;return e.forEach(s=>{const a=s.trimStart(),l=a.startsWith("* ")||a.startsWith("- "),u=/^\d+\.\s/.test(a),h=l||u;if(h){const m=u?"ol":"ul";if(r!==m){r&&n.push(`</${r}>`);const y=u?"list-decimal":"list-disc";n.push(`<${m} class="${y} ml-5 space-y-1">`),r=m}}else r&&(n.push(`</${r}>`),r=null);if(h){let m="";l?m=a.substring(2):m=a.replace(/^\d+\.\s/,"");const y=Ig(m);n.push(`<li>${y}</li>`)}else if(s.trim()){const m=s.match(/^(#{1,6})\s+(.+)$/);if(m){const y=m[1].length,w=Ig(m[2]),x={1:"text-2xl font-bold mb-3",2:"text-xl font-bold mb-2",3:"text-lg font-semibold mb-2",4:"text-base font-semibold mb-1",5:"text-sm font-semibold mb-1",6:"text-xs font-semibold mb-1"};n.push(`<h${y} class="${x[y]}">${w}</h${y}>`)}else n.push(`<p class="mb-2">${Ig(s)}</p>`)}else r&&(n.push(`</${r}>`),r=null)}),r&&n.push(`</${r}>`),n.join(`
`)}function Ig(t){return d6(t).replace(/\[(.*?)\]\((.*?)\)/g,(n,r,s)=>`<a href="${s.replace(/"/g,"&quot;")}" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300 underline font-medium">${r}</a>`)}const f6=[{value:"none",label:""},{value:"daily",label:""},{value:"weekdays",label:""},{value:"weekly",label:""},{value:"monthly",label:""}],p6=["","","","","","",""],Bx={TODO:"todo"},m6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{closeModal:s}=pn(),a=!!t,l=e,u=!(l!=null&&l.id)||l.id.startsWith("temp-"),{projects:h}=Ep(),{timeBlocks:m}=wd(),{customDurations:y}=Ur(),[w,x]=j.useState(""),[E,C]=j.useState(""),[k,R]=j.useState(null),[q,B]=j.useState(Bx.TODO),[$,H]=j.useState(!1),[F,te]=j.useState(null),[S,I]=j.useState({type:"none",days:[]}),[N,P]=j.useState(null),[O,M]=j.useState(null),[D,Be]=j.useState(!1),[tt,nt]=j.useState(!1),[Ae,Y]=j.useState(null);j.useEffect(()=>{var ee;if(l){x(l.title||""),C(l.description||""),R(l.projectId||null),B(l.status||Bx.TODO),H(!!l.isImportant),P(l.timeBlockId||null),M(l.duration||null);const he=fn(l.dueDate);te(he);const ve=l.recurrence||{type:"none",days:[]};I(ve),ve!=null&&ve.type&&ve.type!=="none"&&!he&&te(FF(ve));const Ee=!!(he||(ve==null?void 0:ve.type)!=="none"||l.timeBlockId||l.duration);nt(Ee||u),Be(!!((ee=l.description)!=null&&ee.trim()))}},[l,a]);const pe=j.useCallback(async()=>{if(Y(null),!w.trim()){Y("");return}if((S==null?void 0:S.type)==="weekly"&&(!S.days||S.days.length===0)){Y("");return}const ee={title:w.trim(),description:E.trim()??null,projectId:k==="none"?null:k,status:q,isImportant:$,dueDate:F?xt.fromDate(F):null,recurrence:(S==null?void 0:S.type)==="none"?null:S,timeBlockId:N??null,duration:O??void 0};try{u?await e1({...ee,title:ee.title}):await J0(l.id,ee),s()}catch(he){console.error("Failed to save task",he),Y("")}},[w,E,k,q,$,F,S,N,O,u,l,s]),de=j.useCallback(async ee=>{if(ee==null||ee.preventDefault(),ee==null||ee.stopPropagation(),Y(null),!(!(l!=null&&l.id)||u)&&confirm(""))try{await YF(l.id),s()}catch(he){console.error("Failed to delete task",he),Y("")}},[l==null?void 0:l.id,u,s]),W=j.useCallback(ee=>{let he=[];ee==="weekly"?he=(S==null?void 0:S.days)||[]:ee==="weekdays"&&(he=[1,2,3,4,5]),I({type:ee,days:he})},[S==null?void 0:S.days]),X=j.useCallback(ee=>{const he=(S==null?void 0:S.days)||[],ve=he.includes(ee)?he.filter(Ee=>Ee!==ee):[...he,ee].sort((Ee,Fe)=>Ee-Fe);I({type:"weekly",days:ve})},[S==null?void 0:S.days]),ce=j.useMemo(()=>h6(E),[E]);return a?p.jsx(Po,{isOpen:a,onClose:s,zIndex:n,className:"max-w-4xl h-[95vh] sm:h-[85vh] w-full mx-2 sm:mx-auto mt-4 sm:mt-0 pb-safe",overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 shrink-0",children:[p.jsx("input",{id:"task-title",name:"title",type:"text",value:w,onChange:ee=>x(ee.target.value),placeholder:"",className:"flex-1 text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder:text-gray-400",autoFocus:!0,"aria-label":""}),p.jsx("button",{onClick:()=>H(!$),className:Se("p-2 rounded-full transition-colors",$?"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),title:$?"":"",children:p.jsx("svg",{className:"w-6 h-6",fill:$?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),p.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[p.jsx(wc,{message:Ae,className:"mb-4"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 h-full",children:[p.jsxs("div",{className:"md:col-span-8 flex flex-col h-full min-h-[300px] bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4 order-last md:order-first",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("label",{className:"text-xs font-semibold text-gray-500 flex items-center gap-2 uppercase",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})," (Markdown)"]}),p.jsx("button",{type:"button",onClick:()=>Be(!D),className:"text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 px-3 py-1 rounded transition-colors text-xs font-medium","aria-label":D?"":"",children:D?"":""})]}),p.jsx("div",{className:"flex-1 relative",children:D?p.jsx("div",{className:"w-full h-full p-4 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm overflow-y-auto prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:ce||'<span class="text-gray-400"></span>'}}):p.jsx("textarea",{id:"task-description",name:"description",value:E,onChange:ee=>C(ee.target.value),onBlur:()=>E.trim()&&Be(!0),placeholder:"...",className:"w-full h-full p-3 bg-gray-50 dark:bg-gray-900/50 border-0 rounded-lg outline-none text-sm transition-all resize-none leading-relaxed focus:ring-1 focus:ring-blue-500/50 text-gray-800 dark:text-gray-200 font-mono",autoFocus:!E,"aria-label":""})})]}),p.jsxs("div",{className:"md:col-span-4 space-y-4 order-first md:order-last",children:[p.jsxs("details",{open:tt,onToggle:ee=>nt(ee.currentTarget.open),className:"group border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[p.jsxs("summary",{className:"flex items-center justify-between px-4 py-3 cursor-pointer list-none outline-none bg-gray-50 dark:bg-gray-700/30 rounded-t-lg group-[:not([open])]:rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700/50 focus:ring-2 focus:ring-inset focus:ring-blue-500",role:"button","aria-expanded":tt,children:[p.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),""]}),p.jsx("span",{className:"transform group-open:rotate-180 transition-transform text-gray-400",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),p.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-due-date",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),p.jsx("div",{className:"relative cursor-pointer",onClick:()=>{var he;const ee=document.getElementById("task-due-date");(he=ee==null?void 0:ee.showPicker)==null||he.call(ee)},children:p.jsx("input",{type:"date",id:"task-due-date",value:OF(F),onChange:ee=>te(LF(ee.target.value)),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm cursor-pointer"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-recurrence",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),p.jsx("select",{id:"task-recurrence",value:(S==null?void 0:S.type)||"none",onChange:ee=>W(ee.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:f6.map(ee=>p.jsx("option",{value:ee.value,children:ee.label},ee.value))})]}),((S==null?void 0:S.type)==="weekly"||(S==null?void 0:S.type)==="weekdays")&&p.jsxs("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700 animate-in fade-in slide-in-from-top-1 duration-200",children:[p.jsx("span",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:""}),p.jsx("div",{className:"flex flex-wrap gap-2",children:p6.map((ee,he)=>{var ve;return p.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[p.jsx("input",{type:"checkbox",checked:((ve=S.days)==null?void 0:ve.includes(he))||!1,onChange:()=>X(he),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),p.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:ee})]},he)})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-timeblock",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),p.jsxs("select",{id:"task-timeblock",value:N||"",onChange:ee=>P(ee.target.value||null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:""}),m.map(ee=>p.jsxs("option",{value:ee.id,children:[ee.start," - ",ee.end]},ee.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-duration",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),p.jsxs("select",{id:"task-duration",value:O||"",onChange:ee=>M(ee.target.value?parseInt(ee.target.value,10):null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:""}),y.map(ee=>p.jsxs("option",{value:ee,children:[ee," min"]},ee))]})]})]})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[p.jsx("label",{htmlFor:"task-project",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:""}),p.jsxs("select",{id:"task-project",value:k||"none",onChange:ee=>R(ee.target.value==="none"?null:ee.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"none",children:""}),h.map(ee=>p.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]})]})]})]}),p.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center shrink-0",children:[!u&&p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("button",{type:"button",onClick:de,className:"px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition flex items-center gap-1.5",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),""]})}),p.jsxs("div",{className:`flex gap-2 ${u?"ml-auto":""}`,children:[p.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition",children:""}),p.jsx("button",{type:"button",onClick:pe,className:"px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium shadow-md transition transform active:scale-95",children:u?"":""})]})]})]})}):null};function bc(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function g6(t,e){return t.reduce((n,r,s)=>{const a=e.get(r);return a&&(n[s]=a),n},Array(t.length))}function tf(t){return t!==null&&t>=0}function y6(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function v6(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const t1=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const a=bc(e,r,n),l=e[s],u=a[s];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},nf={scaleX:1,scaleY:1},Ip=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:a,overIndex:l}=t;const u=(e=a[n])!=null?e:r;if(!u)return null;if(s===n){const m=a[l];return m?{x:0,y:n<l?m.top+m.height-(u.top+u.height):m.top-u.top,...nf}:null}const h=_6(a,s,n);return s>n&&s<=l?{x:0,y:-u.height-h,...nf}:s<n&&s>=l?{x:0,y:u.height+h,...nf}:{x:0,y:0,...nf}};function _6(t,e,n){const r=t[e],s=t[e-1],a=t[e+1];return r?n<e?s?r.top-(s.top+s.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const n1="Sortable",r1=Le.createContext({activeIndex:-1,containerId:n1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:t1,disabled:{draggable:!1,droppable:!1}});function Sp(t){let{children:e,id:n,items:r,strategy:s=t1,disabled:a=!1}=t;const{active:l,dragOverlay:u,droppableRects:h,over:m,measureDroppableContainers:y}=Mk(),w=Xu(n1,n),x=u.rect!==null,E=j.useMemo(()=>r.map(te=>typeof te=="object"&&"id"in te?te.id:te),[r]),C=l!=null,k=l?E.indexOf(l.id):-1,R=m?E.indexOf(m.id):-1,q=j.useRef(E),B=!y6(E,q.current),$=R!==-1&&k===-1||B,H=v6(a);ls(()=>{B&&C&&y(E)},[B,E,C,y]),j.useEffect(()=>{q.current=E},[E]);const F=j.useMemo(()=>({activeIndex:k,containerId:w,disabled:H,disableTransforms:$,items:E,overIndex:R,useDragOverlay:x,sortedRects:g6(E,h),strategy:s}),[k,w,H.draggable,H.droppable,$,E,R,h,x,s]);return Le.createElement(r1.Provider,{value:F},e)}const w6=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return bc(n,r,s).indexOf(e)},b6=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:a,newIndex:l,previousItems:u,previousContainerId:h,transition:m}=t;return!m||!r||u!==a&&s===l?!1:n?!0:l!==s&&e===h},x6={duration:200,easing:"ease"},s1="transform",k6=js.Transition.toString({property:s1,duration:0,easing:"linear"}),E6={roleDescription:"sortable"};function T6(t){let{disabled:e,index:n,node:r,rect:s}=t;const[a,l]=j.useState(null),u=j.useRef(n);return ls(()=>{if(!e&&n!==u.current&&r.current){const h=s.current;if(h){const m=oc(r.current,{ignoreTransform:!0}),y={x:h.left-m.left,y:h.top-m.top,scaleX:h.width/m.width,scaleY:h.height/m.height};(y.x||y.y)&&l(y)}}n!==u.current&&(u.current=n)},[e,n,r,s]),j.useEffect(()=>{a&&l(null)},[a]),a}function X0(t){let{animateLayoutChanges:e=b6,attributes:n,disabled:r,data:s,getNewIndex:a=w6,id:l,strategy:u,resizeObserverConfig:h,transition:m=x6}=t;const{items:y,containerId:w,activeIndex:x,disabled:E,disableTransforms:C,sortedRects:k,overIndex:R,useDragOverlay:q,strategy:B}=j.useContext(r1),$=I6(r,E),H=y.indexOf(l),F=j.useMemo(()=>({sortable:{containerId:w,index:H,items:y},...s}),[w,s,H,y]),te=j.useMemo(()=>y.slice(y.indexOf(l)),[y,l]),{rect:S,node:I,isOver:N,setNodeRef:P}=lc({id:l,data:F,disabled:$.droppable,resizeObserverConfig:{updateMeasurementsFor:te,...h}}),{active:O,activatorEvent:M,activeNodeRect:D,attributes:Be,setNodeRef:tt,listeners:nt,isDragging:Ae,over:Y,setActivatorNodeRef:pe,transform:de}=bA({id:l,data:F,attributes:{...E6,...n},disabled:$.draggable}),W=uC(P,tt),X=!!O,ce=X&&!C&&tf(x)&&tf(R),ee=!q&&Ae,he=ee&&ce?de:null,Ee=ce?he??(u??B)({rects:k,activeNodeRect:D,activeIndex:x,overIndex:R,index:H}):null,Fe=tf(x)&&tf(R)?a({id:l,items:y,activeIndex:x,overIndex:R}):H,We=O==null?void 0:O.id,Ne=j.useRef({activeId:We,items:y,newIndex:Fe,containerId:w}),Zt=y!==Ne.current.items,jt=e({active:O,containerId:w,isDragging:Ae,isSorting:X,id:l,index:H,items:y,newIndex:Ne.current.newIndex,previousItems:Ne.current.items,previousContainerId:Ne.current.containerId,transition:m,wasDragging:Ne.current.activeId!=null}),Vn=T6({disabled:!jt,index:H,node:I,rect:S});return j.useEffect(()=>{X&&Ne.current.newIndex!==Fe&&(Ne.current.newIndex=Fe),w!==Ne.current.containerId&&(Ne.current.containerId=w),y!==Ne.current.items&&(Ne.current.items=y)},[X,Fe,w,y]),j.useEffect(()=>{if(We===Ne.current.activeId)return;if(We!=null&&Ne.current.activeId==null){Ne.current.activeId=We;return}const hr=setTimeout(()=>{Ne.current.activeId=We},50);return()=>clearTimeout(hr)},[We]),{active:O,activeIndex:x,attributes:Be,data:F,rect:S,index:H,newIndex:Fe,items:y,isOver:N,isSorting:X,isDragging:Ae,listeners:nt,node:I,overIndex:R,over:Y,setNodeRef:W,setActivatorNodeRef:pe,setDroppableNodeRef:P,setDraggableNodeRef:tt,transform:Vn??Ee,transition:mn()};function mn(){if(Vn||Zt&&Ne.current.newIndex===H)return k6;if(!(ee&&!Kf(M)||!m)&&(X||jt))return js.Transition.toString({...m,property:s1})}}function I6(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Wf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const S6=[Xe.Down,Xe.Right,Xe.Up,Xe.Left],ev=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:a,over:l,scrollableAncestors:u}}=e;if(S6.includes(t.code)){if(t.preventDefault(),!n||!r)return;const h=[];a.getEnabled().forEach(w=>{if(!w||w!=null&&w.disabled)return;const x=s.get(w.id);if(x)switch(t.code){case Xe.Down:r.top<x.top&&h.push(w);break;case Xe.Up:r.top>x.top&&h.push(w);break;case Xe.Left:r.left>x.left&&h.push(w);break;case Xe.Right:r.left<x.left&&h.push(w);break}});const m=IC({collisionRect:r,droppableRects:s,droppableContainers:h});let y=wk(m,"id");if(y===(l==null?void 0:l.id)&&m.length>1&&(y=m[1].id),y!=null){const w=a.get(n.id),x=a.get(y),E=x?s.get(x.id):null,C=x==null?void 0:x.node.current;if(C&&E&&w&&x){const R=Zf(C).some((te,S)=>u[S]!==te),q=i1(w,x),B=C6(w,x),$=R||!q?{x:0,y:0}:{x:B?r.width-E.width:0,y:B?r.height-E.height:0},H={x:E.left,y:E.top};return $.x&&$.y?H:Cu(H,$)}}}};function i1(t,e){return!Wf(t)||!Wf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function C6(t,e){return!Wf(t)||!Wf(e)||!i1(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const o1=({id:t,children:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:a,transition:l,isDragging:u}=X0({id:t}),h={transform:js.Transform.toString(a),transition:l,opacity:u?.5:1};return p.jsx("div",{ref:s,style:h,...n,...r,children:e})},$x=Array.from({length:24},(t,e)=>String(e).padStart(2,"0")),Wx=["00","15","30","45"],Iy=["#EF4444","#F97316","#F59E0B","#EAB308","#84CC16","#22C55E","#10B981","#14B8A6","#06B6D4","#0EA5E9","#3B82F6","#6366F1","#8B5CF6","#A855F7","#D946EF","#EC4899","#F43F5E","#64748B"],A6=({isOpen:t,zIndex:e,overlayClassName:n})=>{const{closeModal:r}=pn(),s=!!t,{timeBlocks:a}=wd(),{workspaceId:l}=Vs(),[u,h]=j.useState([]),[m,y]=j.useState(!1),[w,x]=j.useState(null),[E,C]=j.useState(null),k=Gf(bo(ac,{activationConstraint:{distance:5}}),bo(ed,{coordinateGetter:ev}));j.useEffect(()=>{s&&(h(a.sort((S,I)=>(S.order||0)-(I.order||0))),x(null),y(!1))},[s,a]);const R=()=>{if(u.length>=10)return;let S="09:00",I="10:00";if(u.length>0){const P=u[u.length-1];if(P.end){const[O,M]=P.end.split(":").map(Number);S=P.end;const D=(O+1)%24;I=`${String(D).padStart(2,"0")}:${String(M).padStart(2,"0")}`}}const N={id:`new-${Date.now()}`,start:S,end:I,color:Iy[u.length%Iy.length],order:u.length};h([...u,N])},q=async S=>{if(!S.startsWith("new-")){if(!confirm(""))return;try{l&&await ZI(l,S)}catch{x("");return}}h(u.filter(I=>I.id!==S))},B=(S,I)=>{h(u.map(N=>N.id===S?{...N,...I}:N))},$=S=>{C(S.active.id)},H=S=>{const{active:I,over:N}=S;C(null),N&&I.id!==N.id&&h(P=>{const O=P.findIndex(D=>D.id===I.id),M=P.findIndex(D=>D.id===N.id);return bc(P,O,M)})},F=async()=>{y(!0),x(null);try{for(const N of u){if(!N.start||!N.end)continue;const[P,O]=N.start.split(":").map(Number),[M,D]=N.end.split(":").map(Number);if(P*60+O>=M*60+D)throw new Error(`: ${N.start}-${N.end}`)}const S=[...u].sort((N,P)=>(N.start||"").localeCompare(P.start||""));for(let N=0;N<S.length-1;N++){const P=S[N],O=S[N+1];if(!P.end||!O.start)continue;const[M,D]=P.end.split(":").map(Number),[Be,tt]=O.start.split(":").map(Number);if(Be*60+tt<M*60+D)throw new Error(`: [${P.start}-${P.end}]  [${O.start}-${O.end}]`)}const I=u.map((N,P)=>{var M;const O={...N,id:(M=N.id)!=null&&M.startsWith("new-")?null:N.id,order:P,name:`${N.start}-${N.end}`};if(!l)throw new Error("No workspace");return oF(l,O)});await Promise.all(I),await Promise.all(I),r()}catch(S){x(S.message||""),y(!1)}};if(!s)return null;const te=E?u.find(S=>S.id===E):null;return p.jsx(Po,{isOpen:s,onClose:r,title:"",className:"max-w-2xl h-[600px]",zIndex:e,overlayClassName:n,children:p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-3 custom-scrollbar",children:[p.jsxs(Xf,{sensors:k,collisionDetection:Qf,onDragStart:$,onDragEnd:H,children:[p.jsx(Sp,{items:u.map(S=>S.id),strategy:Ip,children:u.map(S=>p.jsx(o1,{id:S.id,children:p.jsx(qx,{block:S,onDelete:()=>q(S.id),onUpdate:I=>B(S.id,I),isOverlay:!1})},S.id))}),p.jsx(LA,{children:te?p.jsx(qx,{block:te,onDelete:()=>{},onUpdate:()=>{},isOverlay:!0}):null})]}),u.length<10?p.jsxs("button",{onClick:R,className:"w-full py-4 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl text-gray-400 hover:border-blue-500 hover:text-blue-500 hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-all font-medium text-sm flex items-center justify-center gap-2 group",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),""]}):p.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400 text-sm rounded-lg flex items-center justify-center gap-2 border border-yellow-100 dark:border-yellow-900/30",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"10"]}),p.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/40 rounded-lg flex items-center text-sm text-gray-500 dark:text-gray-400",children:[p.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-gray-400 mr-3 shadow-sm"}),p.jsx("span",{className:"font-bold mr-2 text-gray-700 dark:text-gray-300",children:""}),p.jsx("span",{className:"text-xs opacity-80",children:""})]})]}),p.jsx(wc,{message:w,className:"mb-4"}),p.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:p.jsx("button",{onClick:F,disabled:m,className:"px-8 py-2.5 bg-gray-900 hover:bg-gray-800 dark:bg-blue-600 dark:hover:bg-blue-500 text-white rounded-lg font-bold text-sm transition-all active:scale-95 shadow-md disabled:bg-gray-400",children:m?"...":""})})]})})},qx=({block:t,onDelete:e,onUpdate:n,isOverlay:r})=>{const[s,a]=j.useState(!1),l=t.start||"09:00",u=t.end||"10:00",[h,m]=l.split(":"),[y,w]=u.split(":");return p.jsxs("div",{className:`flex items-center gap-4 p-2 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-sm group ${r?"shadow-xl ring-2 ring-blue-500 scale-105 opacity-90 cursor-grabbing":""}`,children:[p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>a(!s),className:"w-6 h-6 rounded-full shadow-sm hover:scale-110 active:scale-95 transition-transform ring-2 ring-transparent focus:ring-blue-400 ring-offset-2 dark:ring-offset-gray-900",style:{backgroundColor:t.color||"#3B82F6"},title:""}),s&&p.jsx("div",{className:"absolute top-full left-0 mt-2 z-50 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-xl shadow-2xl p-3 flex gap-2 w-max animate-fade-in-down",children:Iy.map(x=>p.jsx("button",{onClick:()=>{n({color:x}),a(!1)},className:"w-6 h-6 rounded-full hover:scale-110 transition-transform ring-2 ring-transparent hover:ring-blue-400",style:{backgroundColor:x}},x))})]}),p.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(rf,{options:$x,value:h,onChange:x=>n({start:`${x}:${m}`})}),p.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),p.jsx(rf,{options:Wx,value:m,onChange:x=>n({start:`${h}:${x}`})})]}),p.jsx("div",{className:"w-4 h-0.5 bg-gray-200 dark:bg-gray-700 rounded-full"}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(rf,{options:$x,value:y,onChange:x=>n({end:`${x}:${w}`})}),p.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),p.jsx(rf,{options:Wx,value:w,onChange:x=>n({end:`${y}:${x}`})})]})]}),p.jsx("button",{onClick:e,className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},rf=({options:t,value:e,onChange:n,label:r})=>p.jsx("select",{value:e,onChange:s=>n(s.target.value),className:"appearance-none px-2 py-1 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm font-mono font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-100 dark:focus:ring-blue-900 outline-none cursor-pointer","aria-label":r||"",children:t.map(s=>p.jsx("option",{value:s,children:s},s))}),N6=({isOpen:t,data:e,zIndex:n})=>{const{closeModal:r}=pn(),s=!!t,a=e,l=!!(a!=null&&a.id),[u,h]=j.useState(""),[m,y]=j.useState(!1),[w,x]=j.useState(null);j.useEffect(()=>{s&&(h((a==null?void 0:a.name)||""),x(null),y(!1))},[s,a]);const E=j.useCallback(async()=>{const k=u.trim();if(!k){x("");return}if(CV().some(B=>B.name===k&&B.id!==(a==null?void 0:a.id))){x("");return}y(!0),x(null);try{if(l&&(a!=null&&a.id))await PV(a.id,k);else{const B=await GI(k);B!=null&&B.id&&KI(B.id)}r()}catch(B){x(": "+(B.message||"")),y(!1)}},[u,l,a,r]),C=k=>{k.key==="Enter"&&!k.nativeEvent.isComposing&&E()};return s?p.jsx(Po,{isOpen:s,onClose:r,className:"max-w-md",children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"workspace-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:l?"":""}),p.jsx("input",{id:"workspace-name-input",name:"workspaceName",type:"text",value:u,onChange:k=>h(k.target.value),onKeyDown:C,placeholder:"...",className:"w-full text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600",autoFocus:!0})]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:l?"":""}),p.jsx(wc,{message:w}),p.jsxs("div",{className:"flex justify-end items-center pt-4 border-t border-gray-200 dark:border-gray-700 gap-3",children:[p.jsx("button",{onClick:r,disabled:m,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:""}),p.jsx("button",{onClick:E,disabled:m,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95",children:m?l?"...":"...":l?"":""})]})]})}):null},R6=({isOpen:t,data:e,zIndex:n})=>{const{closeModal:r}=pn(),s=!!t,a=e,l=j.useCallback(()=>{Oa.getState().setView("wizard",{mode:a.id}),r()},[a,r]);return!s||!a?null:p.jsx(Po,{isOpen:s,onClose:r,className:"max-w-3xl max-h-[90vh] p-0 overflow-hidden bg-transparent shadow-none",children:p.jsxs("div",{className:"w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[p.jsx("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-4xl animate-bounce-slow",children:a.icon}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a.title}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.subTitle})]})]})}),p.jsxs("div",{className:"p-6 overflow-y-auto flex-1 custom-scrollbar",children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-blue-600 dark:bg-blue-400 mr-2 rounded-full"}),""]}),p.jsx("p",{className:"text-base text-gray-700 dark:text-gray-300 leading-relaxed bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:a.concept.summary})]}),p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-gray-400 mr-2 rounded-full"}),""]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed mb-3",children:a.concept.detail})]}),Array.isArray(a.useCases)&&a.useCases.length>0&&p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-purple-500 mr-2 rounded-full"}),"Use Cases"]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.useCases.map((u,h)=>p.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/40 rounded-lg p-5 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 transition-colors",children:[p.jsxs("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center",children:[p.jsx("span",{className:"text-purple-500 mr-2",children:"#"}),u.title]}),p.jsx("div",{className:"mb-3",children:p.jsxs("div",{className:"flex items-start mb-1",children:[p.jsx("span",{className:"text-[10px] font-bold text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"Before"}),p.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.before})]})}),p.jsx("div",{children:p.jsxs("div",{className:"flex items-start",children:[p.jsx("span",{className:"text-[10px] font-bold text-blue-600 bg-blue-100 dark:bg-blue-900/40 dark:text-blue-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"After"}),p.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-300 font-medium",children:u.after})]})})]},h))})]}),a.tips&&a.tips.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-amber-500 mr-2 rounded-full"}),"Tips"]}),p.jsx("div",{className:"space-y-3",children:a.tips.map((u,h)=>p.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-lg border border-amber-100 dark:border-amber-900/30",children:[p.jsxs("p",{className:"font-bold text-amber-800 dark:text-amber-400 mb-1",children:["Q. ",u.q]}),p.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["A. ",u.a]})]},h))})]})]}),p.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[p.jsx("button",{onClick:r,className:"px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""}),p.jsxs("button",{onClick:l,className:"group relative px-6 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg shadow-md transition-all transform hover:scale-105 active:scale-95 overflow-hidden",children:[p.jsxs("span",{className:"relative z-10 flex items-center",children:["",p.jsx("svg",{className:"w-4 h-4 ml-2 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})]}),p.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 skew-y-12"})]})]})]})})},P6=()=>{const{stack:t}=pn();return t.length===0?null:p.jsx(p.Fragment,{children:t.map((e,n)=>{const s=n===0?void 0:"bg-black/20",a={isOpen:!0,data:e.data,zIndex:100+n*10,overlayClassName:s};switch(e.type){case"settings":return p.jsx(c6,{...a},e.id);case"task-detail":return p.jsx(m6,{...a},e.id);case"label-edit":return p.jsx(o6,{...a},e.id);case"project-edit":return p.jsx(a6,{...a},e.id);case"workspace-edit":return p.jsx(N6,{...a},e.id);case"filter-edit":return p.jsx(i6,{...a},e.id);case"timeblock-edit":return p.jsx(A6,{...a},e.id);case"wiki-framework":return p.jsx(R6,{...a},e.id);default:return null}})})},xc=()=>{const{workspaceId:t,loading:e}=Vs(),n=j.useCallback(u=>t?XF(t,h=>u(h),h=>console.error("Task subscription error:",h)):()=>{},[t]),{data:r,isPending:s}=_d(["tasks",t],n,t?e6(t):[]),a=t?t6(t):!1;return{tasks:r||[],loading:e||!!t&&!a&&s}};function D6(){const{tasks:t}=xc(),{showCompleted:e,query:n}=Fr();return j.useMemo(()=>{var l;const s={inbox:0,today:0,upcoming:0,important:0,all:0,search:0},a=n?n.toLowerCase().trim():"";for(const u of t)a&&((l=u.title)!=null&&l.toLowerCase().includes(a))&&s.search++,!(u.status==="archived"||u.status==="completed")&&(s.all++,(!u.projectId||u.projectId==="unassigned"||u.projectId==="none")&&s.inbox++,u.isImportant&&s.important++,u.dueDate&&(RF(u.dueDate)?s.today++:PF(u.dueDate)&&s.upcoming++));return s},[t,n])}const j6=t=>t in It.SIDEBAR_DENSITY,tv=t=>j6(t)?It.SIDEBAR_DENSITY[t]:It.SIDEBAR_DENSITY.normal,O6=[{id:"inbox",i18nKey:"inbox",icon:"",color:"text-blue-500",droppable:!0},{id:"today",i18nKey:"today",icon:"",color:"text-green-500"},{id:"upcoming",i18nKey:"upcoming",icon:"",color:"text-purple-500"},{id:"important",i18nKey:"important",icon:"",color:"text-amber-400"},{id:"custom",i18nKey:"all_tasks",icon:"",color:"text-gray-500"}],L6=()=>{const{tasks:t}=xc(),{language:e}=Ur(),{t:n}=vd(e),r=D6();return p.jsx("ul",{className:"space-y-0.5",children:O6.map(s=>p.jsx(M6,{item:s,tasks:t,label:n(s.i18nKey),count:r[s.id]||0},s.id))})},M6=({item:t,tasks:e,label:n,count:r})=>{const{filterType:s,setFilter:a}=Fr(),{currentView:l,setView:u}=Oa(),{density:h}=Ur(),m=l==="tasks"&&s===t.id,{setNodeRef:y,isOver:w}=lc({id:`filter:${t.id}`,disabled:!t.droppable,data:{type:t.id==="inbox"?"inbox":"filter",value:t.id}}),x=()=>{t.id==="search"?(u("tasks"),a("search")):(u("tasks"),a(t.id))};return p.jsx("li",{ref:y,children:p.jsxs("button",{onClick:x,className:Se("w-full flex items-center px-3 text-sm rounded-md transition-colors text-left gap-3 group/item",tv(h),m?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",w&&t.droppable&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),children:[p.jsx("span",{className:t.color,children:t.icon}),p.jsx("span",{className:"flex-1",children:n}),t.id!=="search"&&r>0&&p.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:r})]})})},V6=()=>{const{workspaceId:t,loading:e}=Vs(),n=j.useCallback(l=>t?dF(t,l):()=>{},[t]),{data:r,isPending:s}=_d(["filters",t],n,void 0);return{filters:r||[],loading:e||!!t&&s}};function F6(t,e="createdAt_desc"){if(!Array.isArray(t))return[];const[n,r]=e.split("_"),a=r==="desc"?-1:1;return[...t].sort((l,u)=>{var y,w,x,E,C,k;let h,m;switch(n){case"dueDate":h=(y=fn(l.dueDate))==null?void 0:y.getTime(),m=(w=fn(u.dueDate))==null?void 0:w.getTime();break;case"createdAt":h=(x=fn(l.createdAt))==null?void 0:x.getTime(),m=(E=fn(u.createdAt))==null?void 0:E.getTime();break;case"title":h=l.title.toLowerCase(),m=u.title.toLowerCase();break;case"duration":h=l.duration||0,m=u.duration||0;break;case"important":h=l.isImportant?1:0,m=u.isImportant?1:0;break;case"manual":h=l.order!==void 0?l.order:Number.MAX_SAFE_INTEGER,m=u.order!==void 0?u.order:Number.MAX_SAFE_INTEGER;break;default:h=(C=fn(l.createdAt))==null?void 0:C.getTime(),m=(k=fn(u.createdAt))==null?void 0:k.getTime()}return z6(h,m)*a})}function z6(t,e){return t===e?0:t==null?1:e==null?-1:t>e?1:t<e?-1:0}function U6(){const t=new Date;t.setHours(0,0,0,0);const e=new Date(t);e.setDate(e.getDate()+1);const n=DF(t),r=new Date(n);r.setDate(r.getDate()+7);const s=new Date(e);return s.setDate(s.getDate()+7),{now:t,tomorrow:e,weekStart:n,weekEnd:r,upcomingEnd:s}}function B6(t,e,n,r){const{now:s,tomorrow:a,weekStart:l,weekEnd:u,upcomingEnd:h}=n;switch(e){case"today":return Fx(t,s);case"tomorrow":return Fx(t,a);case"week":return t>=l&&t<u;case"upcoming":return t>=a&&t<h;case"overdue":return t<s&&r!=="completed";default:return!1}}function Hx(t,e){if(!e)return t;const n=typeof e=="string"?Z0(e):e,r=n.dates.length>0?U6():null;return t.filter(s=>{if(n.status.length>0){const l=s.status||"todo";if(!n.status.some(h=>h==="active"&&l==="todo"?!0:h===l))return!1}if(n.excludeStatus.length>0){const l=s.status||"todo";if(n.excludeStatus.some(h=>h==="active"&&l==="todo"?!0:h===l))return!1}if(n.isImportant===!0&&!s.isImportant||n.isImportant===!1&&s.isImportant||n.projects.length>0&&!n.projects.some(u=>u==="unassigned"?!s.projectId||s.projectId==="unassigned"||s.projectId==="none":s.projectId===u)||n.excludeProjects.length>0&&n.excludeProjects.some(l=>s.projectId===l)||n.labels.length>0&&(!s.labelIds||!n.labels.some(l=>{var u;return(u=s.labelIds)==null?void 0:u.includes(l)}))||n.excludeLabels.length>0&&s.labelIds&&n.excludeLabels.some(l=>{var u;return(u=s.labelIds)==null?void 0:u.includes(l)})||n.timeBlocks.length>0&&!n.timeBlocks.some(u=>u==="unassigned"?!s.timeBlockId:s.timeBlockId===u)||n.excludeTimeBlocks.length>0&&n.excludeTimeBlocks.some(l=>s.timeBlockId===l))return!1;if(n.durations.length>0){const l=s.duration||0;if(!n.durations.includes(l))return!1}if(r&&n.dates.length>0){const l=fn(s.dueDate);if(!l||!n.dates.some(h=>B6(l,h,r,s.status||"todo")))return!1}const a=`${s.title} ${s.description||""}`.toLowerCase();return!(n.keywords.length>0&&!n.keywords.every(u=>Array.isArray(u)?u.some(h=>a.includes(h)):a.includes(u))||n.excludeKeywords.length>0&&n.excludeKeywords.some(u=>a.includes(u)))})}function $6(t){const{keyword:e,showCompleted:n,projectId:r,labelId:s,timeBlockId:a,duration:l,filterType:u}=t,h=e?Z0(e):{keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(r&&h.projects.push(r),s&&h.labels.push(s),a&&h.timeBlocks.push(a),l){const m=typeof l=="number"?l:parseInt(l,10);isNaN(m)||h.durations.push(m)}return u==="today"&&h.dates.push("today"),u==="upcoming"&&h.dates.push("upcoming"),u==="important"&&(h.isImportant=!0),n||h.status.length===0&&h.status.push("active"),h}function a1(t,e){const{savedFilter:n,sortCriteria:r}=e,s=$6(e);let a=Hx(t,s);return n&&n.query&&(a=Hx(a,n.query)),F6(a,r||"createdAt_desc")}const nv=({x:t,y:e,onClose:n,children:r})=>{const s=j.useRef(null);return j.useEffect(()=>{const a=u=>{s.current&&!s.current.contains(u.target)&&n()},l=()=>n();return document.addEventListener("mousedown",a),window.addEventListener("scroll",l,!0),()=>{document.removeEventListener("mousedown",a),window.removeEventListener("scroll",l,!0)}},[n]),ua.createPortal(p.jsx("div",{ref:s,className:"fixed z-50 min-w-[160px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-100",style:{top:e,left:t},onContextMenu:a=>a.preventDefault(),children:r}),document.body)},rc=({onClick:t,children:e,className:n,icon:r,variant:s="default"})=>p.jsxs("button",{onClick:a=>{a.stopPropagation(),t()},className:Se("w-full text-left px-3 py-2 text-sm flex items-center gap-2 transition-colors",s==="danger"?"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",n),children:[r&&p.jsx("span",{className:Se("w-4 h-4",s==="danger"?"text-red-500":"text-gray-400"),children:r}),e]}),xa=({icon:t,label:e,count:n,isActive:r,isOver:s,onClick:a,onContextMenu:l,showZero:u=!1})=>{const{density:h}=Ur();return p.jsxs("button",{type:"button",onClick:a,onContextMenu:l,className:Se("w-full text-left group flex items-center justify-between px-2 ml-1 rounded-md transition-colors select-none outline-none focus:ring-2 focus:ring-blue-500/50",tv(h),r?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",s&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t&&p.jsx("span",{className:"flex-shrink-0 w-5 flex justify-center text-sm",children:t}),p.jsx("span",{className:"text-sm truncate",children:e})]}),n!==void 0&&(n>0||u&&n===0)&&p.jsx("span",{className:Se("text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700/50",r?"text-blue-700 dark:text-blue-300 bg-white":"text-gray-400"),children:n})]})},W6=()=>{const{filters:t,loading:e}=V6(),{tasks:n}=xc();return e?null:p.jsx("div",{className:"space-y-0.5 py-1",children:t.map(r=>p.jsx(q6,{filter:r,tasks:n},r.id))})},q6=({filter:t,tasks:e})=>{const{t:n}=ur(),{filterType:r,targetId:s,setFilter:a}=Fr(),{openModal:l}=pn(),u=r==="custom"&&s===t.id,[h,m]=j.useState(null),y=Le.useMemo(()=>{try{return a1(e,{savedFilter:t,showCompleted:!1}).length}catch(C){return console.warn("[CustomFilterItem] Count error:",C),0}},[e,t]),w=()=>{m(null),l("filter-edit",t)},x=async()=>{m(null),confirm(`${n("filter")}: ${t.name}
${n("msg.confirm_delete")}`)&&t.id&&await pF(t.id)},E=C=>{C.preventDefault(),C.stopPropagation(),m({x:C.clientX,y:C.clientY})};return p.jsxs(p.Fragment,{children:[p.jsx("div",{onContextMenu:E,children:p.jsx(xa,{label:t.name,icon:p.jsx("span",{children:""}),count:y,isActive:u,onClick:()=>a("custom",t.id)})}),h&&p.jsxs(nv,{x:h.x,y:h.y,onClose:()=>m(null),children:[p.jsx(rc,{onClick:w,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:n("edit")}),p.jsx(rc,{onClick:x,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:n("delete")})]})]})},H6=Le.memo(({mins:t,count:e})=>{const{filterType:n,targetId:r,setFilter:s}=Fr(),a=n==="duration"&&r===t.toString(),{setNodeRef:l,isOver:u}=lc({id:`duration:${t}`,data:{type:"duration",value:t.toString()}});return p.jsx("div",{ref:l,children:p.jsx(xa,{label:`${t} min`,icon:p.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),count:e,isActive:a,isOver:u,onClick:()=>s("duration",t.toString())})})}),K6=()=>{const{tasks:t}=xc(),e=It.SIDEBAR.DURATIONS,n=j.useMemo(()=>{const r=new Map;return t.forEach(s=>{if(s.status!=="completed"&&s.duration){const a=Number(s.duration);isNaN(a)||r.set(a,(r.get(a)||0)+1)}}),r},[t]);return p.jsx("div",{className:"space-y-0.5 py-1",children:e.map(r=>p.jsx(H6,{mins:r,count:n.get(r)||0},r))})},l1=()=>p.jsxs("div",{className:"space-y-2 p-2 animate-pulse",children:[p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),G6=Le.memo(({project:t})=>{const{t:e}=ur(),{filterType:n,targetId:r,setFilter:s}=Fr(),{density:a}=Ur(),{openModal:l}=pn(),u=n==="project"&&r===t.id,[h,m]=j.useState(null),{setNodeRef:y,isOver:w}=lc({id:`project:${t.id}`,data:{type:"project",value:t.id}}),x=k=>{k==null||k.stopPropagation(),m(null),l("project-edit",t)},E=async()=>{m(null),confirm(`${e("project")}: ${t.name}
${e("msg.confirm_delete")}`)&&t.id&&await QI(t.id)},C=k=>{k.preventDefault(),k.stopPropagation(),m({x:k.clientX,y:k.clientY})};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{ref:y,onClick:()=>s("project",t.id),onContextMenu:C,className:Se("group flex items-center justify-between px-2 rounded-md cursor-pointer transition-colors select-none",tv(a),u?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",w&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),role:"button",tabIndex:0,"aria-selected":u,"aria-label":`${e("project")}: ${t.name}${u?` (${e("active")})`:""}`,children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[p.jsx("span",{className:Se("text-xs shrink-0 transition-colors",u?"text-blue-500":"text-gray-400 group-hover:text-gray-500"),children:p.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),p.jsx("span",{className:"text-sm truncate",children:t.name})]}),p.jsx("button",{onClick:x,className:Se("p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-opacity",u?"opacity-100":"opacity-0 sm:group-hover:opacity-100 focus:opacity-100"),"aria-label":e("edit"),title:e("edit"),children:p.jsx("svg",{className:"w-3.5 h-3.5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),h&&p.jsxs(nv,{x:h.x,y:h.y,onClose:()=>m(null),children:[p.jsx(rc,{onClick:x,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:e("edit")}),p.jsx(rc,{onClick:E,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:e("delete")})]})]})}),Q6=()=>{const{projects:t,loading:e}=Ep();return e?p.jsx(l1,{}):t.length===0?p.jsx("div",{className:"p-4 text-xs text-gray-400",children:""}):p.jsx(Sp,{items:t.map(n=>n.id),strategy:Ip,children:p.jsx("div",{className:"space-y-0.5 p-2",children:t.map(n=>p.jsx(o1,{id:n.id,children:p.jsx(G6,{project:n})},n.id))})})},Z6=({title:t,children:e,defaultExpanded:n=!0,action:r,dragHandleProps:s})=>{const{t:a}=ur(),[l,u]=j.useState(()=>typeof window<"u"&&window.innerWidth<768?!1:n),m=`section-${encodeURIComponent(t.replace(/\s+/g,"-").toLowerCase())}`;return p.jsxs("div",{className:"mb-2 group/section",children:[p.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[p.jsxs("button",{...s,onClick:()=>u(!l),"aria-expanded":l,"aria-controls":m,className:"flex items-center flex-1 text-xs font-semibold text-gray-500 uppercase hover:text-gray-700 dark:hover:text-gray-300 transition-colors text-left cursor-grab active:cursor-grabbing touch-none select-none",title:a("sidebar.reorder_section"),children:[p.jsx("svg",{className:Se("w-3 h-3 mr-1 transition-transform",l?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),t]}),r&&p.jsx("div",{className:"opacity-100 transition-opacity",onClick:y=>y.stopPropagation(),children:r})]}),l&&p.jsx("div",{className:"mt-1",id:m,children:e})]})},Y6=({className:t})=>p.jsx("svg",{className:Se("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),J6=({className:t})=>p.jsx("svg",{className:Se("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),X6=({className:t})=>p.jsx("svg",{className:Se("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),ez=()=>{const{t}=ur(),{currentView:e,setView:n}=Oa();return p.jsxs("div",{className:"space-y-0.5 py-1",children:[p.jsx(xa,{label:t("sidebar.target_wizard"),icon:p.jsx(Y6,{}),isActive:e==="wizard",onClick:()=>n("wizard")}),p.jsx(xa,{label:t("sidebar.target_dashboard"),icon:p.jsx(J6,{}),isActive:e==="target-dashboard",onClick:()=>n("target-dashboard")}),p.jsx(xa,{label:t("sidebar.framework_wiki"),icon:p.jsx(X6,{}),isActive:e==="wiki",onClick:()=>n("wiki")})]})},tz=()=>{const{timeBlocks:t,loading:e}=wd(),{tasks:n}=xc(),r=Le.useMemo(()=>{const s=new Map;let a=0;return n.forEach(l=>{l.status!=="completed"&&(!l.timeBlockId||l.timeBlockId==="unassigned"||l.timeBlockId==="null"?a++:s.set(l.timeBlockId,(s.get(l.timeBlockId)||0)+1))}),{map:s,unassignedCount:a}},[n]);return e?p.jsx(l1,{}):p.jsxs("div",{className:"space-y-0.5 py-1",children:[t.map(s=>p.jsx(nz,{block:s,count:r.map.get(s.id||"")||0},s.id)),p.jsx(rz,{count:r.unassignedCount})]})},nz=({block:t,count:e})=>{const{t:n}=ur(),{filterType:r,targetId:s,setFilter:a}=Fr(),{openModal:l}=pn(),u=r==="timeblock"&&s===t.id,[h,m]=j.useState(null),{setNodeRef:y,isOver:w}=lc({id:`timeblock:${t.id}`,data:{type:"timeblock",value:t.id}}),x=()=>{m(null),l("timeblock-edit",t)},E=async()=>{m(null),confirm(`${n("timeblock")}: ${t.start} - ${t.end}
${n("msg.confirm_delete")}`)&&t.id&&await ZI(t.id)},C=k=>{k.preventDefault(),k.stopPropagation(),m({x:k.clientX,y:k.clientY})};return p.jsxs("div",{ref:y,onContextMenu:C,children:[p.jsx(xa,{label:`${t.start} - ${t.end}`,icon:p.jsx("span",{className:"w-2 rounded-full aspect-square",style:{backgroundColor:t.color}}),count:e,isActive:u,isOver:w,onClick:()=>a("timeblock",t.id||"")}),h&&p.jsxs(nv,{x:h.x,y:h.y,onClose:()=>m(null),children:[p.jsx(rc,{onClick:x,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:n("edit")}),p.jsx(rc,{onClick:E,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:n("delete")})]})]})},rz=({count:t})=>{const{t:e}=ur(),{filterType:n,targetId:r,setFilter:s}=Fr(),a=n==="timeblock"&&r==="unassigned",{setNodeRef:l,isOver:u}=lc({id:"timeblock:unassigned",data:{type:"timeblock",value:"unassigned"}});return p.jsx("div",{ref:l,children:p.jsx(xa,{label:e("sidebar.unassigned"),icon:p.jsx("span",{className:"w-2 rounded-full aspect-square bg-gray-400"}),count:t,isActive:a,isOver:u,onClick:()=>s("timeblock","unassigned")})})},sz=({id:t,section:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:a,transition:l,isDragging:u}=X0({id:t}),h={transform:js.Transform.toString(a),transition:l,opacity:u?.5:1};return p.jsx("div",{ref:s,style:h,...n,children:p.jsx(Z6,{title:e.title,defaultExpanded:e.defaultExpanded,action:e.action,dragHandleProps:r,children:e.component})})},iz=["general","projects","targets","timeblocks","durations","filters"],oz=()=>{const{t}=ur(),{openModal:e}=pn(),[n,r]=Le.useState(()=>{const u=localStorage.getItem(It.STORAGE_KEYS.SECTION_ORDER);if(u)try{const h=JSON.parse(u);if(Array.isArray(h)&&h.every(m=>typeof m=="string"))return h}catch{}return iz});j.useEffect(()=>{localStorage.setItem(It.STORAGE_KEYS.SECTION_ORDER,JSON.stringify(n))},[n]);const s=Gf(bo(ac,{activationConstraint:{distance:8}}),bo(ed,{coordinateGetter:ev})),a=u=>{const{active:h,over:m}=u;m&&h.id!==m.id&&r(y=>{const w=y.indexOf(h.id),x=y.indexOf(m.id);return bc(y,w,x)})},l=Le.useMemo(()=>({general:{id:"general",title:t("general"),component:p.jsx(p.Fragment,{children:p.jsx(L6,{})}),defaultExpanded:!0},projects:{id:"projects",title:t("projects"),component:p.jsx(Q6,{}),defaultExpanded:!0,action:p.jsx("button",{onClick:()=>e("project-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},targets:{id:"targets",title:t("targets"),component:p.jsx(ez,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("wiki-framework"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},timeblocks:{id:"timeblocks",title:t("timeblocks"),component:p.jsx(tz,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("timeblock-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},durations:{id:"durations",title:t("durations"),component:p.jsx(K6,{}),defaultExpanded:!1},filters:{id:"filters",title:t("filters"),component:p.jsx(W6,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("filter-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})}}),[t,e]);return p.jsx(Xf,{sensors:s,collisionDetection:Qf,onDragEnd:a,children:p.jsx(Sp,{items:n,strategy:Ip,children:p.jsx("div",{className:"flex flex-col gap-4",children:n.map(u=>{const h=l[u];return h?p.jsx(sz,{id:h.id,section:h},h.id):null})})})})},az=({className:t,onCancel:e,onSuccess:n,placeholder:r,initialValue:s=""})=>{const{t:a}=ur(),l=r||a("inline_input.placeholder"),[u,h]=j.useState(s),[m,y]=j.useState(!1),[w,x]=j.useState(!1),[E,C]=j.useState(!1),k=async B=>{if(!(!u.trim()||E)){C(!0);try{await e1({title:u,isImportant:m,dueDate:w?new Date:void 0}),h(""),y(!1),x(!1),n==null||n()}catch($){console.error($),Tn.error(a("msg.task.create_fail"))}finally{C(!1)}}},R=B=>{B.key==="Enter"&&!B.shiftKey&&!B.nativeEvent.isComposing&&(B.preventDefault(),k()),B.key==="Escape"&&(e==null||e())},q=Le.useRef(null);return Le.useEffect(()=>{const B=H=>{q.current&&!q.current.contains(H.target)&&(u.trim()||e==null||e())},$=setTimeout(()=>{document.addEventListener("mousedown",B)},100);return()=>{clearTimeout($),document.removeEventListener("mousedown",B)}},[e,u]),p.jsxs("div",{ref:q,className:Se("glass-effect rounded-xl shadow-xl p-3 sm:p-4 border border-blue-500/30 dark:border-blue-400/30 animate-in slide-in-from-top-2 duration-300 w-full",t),children:[p.jsx("label",{htmlFor:"inline-task-input",className:"sr-only",children:a("inline_input.label")}),p.jsx("input",{id:"inline-task-input",type:"text",autoFocus:!0,className:"w-full bg-white/50 dark:bg-gray-800/50 text-base sm:text-lg font-medium text-gray-800 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 outline-none mb-3 sm:mb-4 focus:bg-white/80 dark:focus:bg-gray-800/80 p-3 rounded-lg transition-all border border-transparent focus:border-blue-500/30 focus:ring-2 focus:ring-blue-500/20",placeholder:l,value:u,onChange:B=>h(B.target.value),onKeyDown:R,disabled:E}),p.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100 dark:border-gray-700/50",children:[p.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[p.jsx("button",{type:"button",onClick:()=>x(!w),className:Se("transition-colors p-2 rounded-lg",w?"text-blue-600 bg-blue-50 hover:bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30 dark:hover:bg-blue-900/50":"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":a(w?"inline_input.aria_today_remove":"inline_input.aria_today"),title:a(w?"inline_input.tooltip_today_remove":"inline_input.tooltip_today"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("button",{type:"button",onClick:()=>y(!m),className:Se("transition-colors p-2 rounded-lg",m?"text-amber-500 bg-amber-50 hover:bg-amber-100 dark:text-amber-400 dark:bg-amber-900/30 dark:hover:bg-amber-900/50":"text-gray-400 hover:text-amber-500 dark:hover:text-amber-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":a(m?"inline_input.aria_important_remove":"inline_input.aria_important"),title:a(m?"inline_input.tooltip_important_remove":"inline_input.tooltip_important"),children:p.jsx("svg",{className:Se("w-5 h-5",m&&"fill-current"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]}),p.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e&&p.jsx("button",{type:"button",onClick:e,disabled:E,className:"px-3 py-2 sm:px-4 sm:py-2 text-sm font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all","aria-label":a("modal.cancel"),children:a("modal.cancel")}),p.jsx("button",{onClick:()=>k(),disabled:!u.trim()||E,className:"px-4 py-2 sm:px-5 sm:py-2 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl shadow-lg shadow-blue-500/20 transition-all active:scale-95 flex items-center gap-1","aria-label":a("add_task"),children:a(E?"inline_input.adding":"add")})]})]})]})},lz=({initialValue:t=""})=>{const[e,n]=j.useState(!1);return Le.useEffect(()=>{if(!e)return;const r=s=>{s.key==="Escape"&&n(!1)};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e]),e?p.jsx("div",{className:"mb-2",children:p.jsx(az,{onCancel:()=>n(!1),onSuccess:()=>n(!1),initialValue:t})}):p.jsxs("button",{onClick:()=>n(!0),"aria-label":"",className:"group flex items-center gap-2 w-full text-left py-2 px-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-2",children:[p.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-transparent group-hover:bg-blue-100/50 dark:group-hover:bg-blue-900/30 transition-colors",children:p.jsx("svg",{className:"w-4 h-4 text-inherit",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),p.jsx("span",{className:"text-sm font-medium",children:t?`${t}`:""})]})},c1=Le.memo(({task:t,style:e,className:n,dragHandleProps:r})=>{const s=t.status==="completed",a=!!t.isImportant,{openModal:l}=pn(),u=async m=>{m.stopPropagation(),t.id&&await JF(t.id,t.status||"todo")},h=async m=>{m.stopPropagation(),t.id&&await J0(t.id,{isImportant:!a})};return p.jsxs("li",{style:e,onClick:()=>l("task-detail",t),className:Se("group flex items-start gap-3 p-[var(--task-p)] bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700/50 rounded-xl hover:shadow-sm hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-200 cursor-pointer hover-lift",n),...r,children:[p.jsx("button",{onClick:u,className:Se("mt-0.5 w-5 h-5 rounded-full border flex items-center justify-center transition-colors shrink-0",s?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-blue-400 text-transparent"),"aria-label":s?"Mark as incomplete":"Mark as complete",children:p.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:Se("text-sm text-gray-800 dark:text-gray-200 break-words",s&&"line-through text-gray-400 dark:text-gray-500"),children:t.title}),t.description&&p.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-[var(--task-line-clamp)]",children:t.description}),p.jsx("div",{className:"flex items-center gap-3 mt-2",children:t.dueDate&&p.jsxs("span",{className:Se("text-xs flex items-center gap-1",s?"text-gray-400":MF(t.dueDate)),children:[" ",jF(t.dueDate)]})})]}),p.jsx("div",{className:Se("flex items-center gap-1 transition-opacity",a?"opacity-100":"opacity-30 group-hover:opacity-100"),children:p.jsx("button",{onClick:h,className:Se("p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",a?"text-yellow-500":"text-gray-400"),title:a?"":"",children:p.jsx("svg",{className:"w-4 h-4",fill:a?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})})]})},(t,e)=>{const n=s=>s?s instanceof Date?s.getTime():typeof s.toDate=="function"?s.toDate().getTime():typeof s.getTime=="function"?s.getTime():null:null,r=(s,a)=>{const l=n(s),u=n(a);return l===u};return t.task.id===e.task.id&&t.task.status===e.task.status&&t.task.title===e.task.title&&t.task.description===e.task.description&&t.task.isImportant===e.task.isImportant&&r(t.task.dueDate,e.task.dueDate)}),cz=({tasks:t,timeBlockId:e})=>{const{timeBlocks:n}=wd(),r=t.reduce((h,m)=>{const y=m.duration,w=typeof y=="number"?y:Number(y);return h+(isNaN(w)?0:w)},0),s=h=>(h/60).toFixed(2)+"h",a=e?n.find(h=>h.id===e):null;if(a&&a.start&&a.end){const h=zF(a.start,a.end);if(h<=0)return null;const m=(h/60).toFixed(2),y=(r/60).toFixed(2),w=r/h*100,x=Math.min(w,100),E=h-r,C=E<0,k=(Math.abs(E)/60).toFixed(2),R=w>100;return p.jsxs("div",{className:"glass-card flex items-center gap-4 py-3 px-4 my-2",children:[p.jsx("div",{className:"flex-shrink-0 w-24 truncate text-xs font-bold text-gray-500 dark:text-gray-400",title:a.name,children:a.name}),p.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 dark:text-gray-400 tabular-nums",children:[p.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300 w-[4.5ch] text-right inline-block",children:[y,"h"]}),p.jsx("span",{className:"text-gray-400 mx-0.5",children:"/"}),p.jsxs("span",{className:"w-[4.5ch] inline-block",children:[m,"h"]})]}),p.jsx("div",{className:"flex-1 relative h-3 bg-gray-200 dark:bg-gray-700/50 rounded-full overflow-hidden min-w-[100px]",children:p.jsx("div",{className:Se("h-full rounded-full transition-all duration-500 ease-out shadow-sm",R?"bg-red-500":"bg-gradient-to-r from-blue-500 to-indigo-600"),style:{width:R?"100%":`${x}%`}})}),p.jsxs("div",{className:"flex-shrink-0 flex items-center justify-end gap-3 min-w-[140px]",children:[p.jsxs("div",{className:Se("text-lg font-bold tabular-nums text-right w-[3.5ch]",R?"text-red-500":"text-blue-500"),children:[Math.round(w),p.jsx("span",{className:"text-xs font-normal opacity-70",children:"%"})]}),p.jsxs("div",{className:Se("text-xs whitespace-nowrap text-right w-[100px]",C?"text-red-500":"text-green-500"),children:["(",C?"":""," ",k,"h)"]})]})]})}const l=t.length,u=l>0?r/l:0;return p.jsxs("div",{className:"glass-card flex items-center justify-evenly py-3 px-4 my-2",children:[p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:"COUNT"}),p.jsxs("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:[l,p.jsx("span",{className:"text-xs font-normal ml-0.5 text-gray-400",children:""})]})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:"TOTAL"}),p.jsx("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200 text-blue-600 dark:text-blue-400",children:s(r)})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:"AVG"}),p.jsxs("span",{className:"font-medium text-sm",children:[s(u),p.jsx("span",{className:"text-xs ml-0.5",children:"/"})]})]})]})},uz=({task:t,className:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:a,transition:l,isDragging:u}=X0({id:t.id||""}),h={transform:js.Transform.toString(a),transition:l,zIndex:u?50:"auto",position:"relative"};return p.jsx("div",{ref:s,style:h,className:"touch-manipulation",children:p.jsx(c1,{task:t,className:Se(e,u&&"opacity-80 shadow-lg border-blue-400 bg-blue-50/50"),dragHandleProps:{...n,...r}})})},u1=()=>{const{tasks:t,loading:e}=xc(),{filterType:n,targetId:r,query:s,showCompleted:a,sortCriteria:l,setShowCompleted:u,setSortCriteria:h}=Fr(),{density:m}=Ur(),{openModal:y}=pn(),w=j.useMemo(()=>s&&s.trim().length>0?{keyword:s,showCompleted:a,projectId:null,labelId:null,timeBlockId:null,duration:null,filterType:"all_tasks",savedFilter:null,sortCriteria:l}:{keyword:s,showCompleted:a,projectId:n==="inbox"?"unassigned":n==="project"?r:null,labelId:n==="label"?r:null,timeBlockId:n==="timeblock"?r:null,duration:n==="duration"?r:null,filterType:n,savedFilter:null,sortCriteria:l},[n,r,s,a,l]),x=j.useMemo(()=>a1(t,w),[t,w]),E={compact:"space-y-1",normal:"space-y-2",comfortable:"space-y-3",spacious:"space-y-4"}[m],C=Gf(bo(ac,{activationConstraint:{distance:8}}),bo(ed,{coordinateGetter:ev})),k=async B=>{const{active:$,over:H}=B;if(!H||$.id===H.id)return;const F=x.findIndex(S=>S.id===$.id),te=x.findIndex(S=>S.id===H.id);if(F!==-1&&te!==-1){const I=bc(x,F,te).map(N=>N.id).filter(Boolean);await ZF(I)}};if(e)return p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("div",{className:"text-gray-400 text-sm animate-pulse",children:"..."})});const R=!!(s&&s.trim().length>0),q=l==="manual";return p.jsxs("div",{className:"flex flex-col h-full overflow-hidden relative",children:[p.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-1 pb-24",children:[p.jsxs("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm pt-2 pb-4 mb-4 flex items-center gap-2",children:[p.jsx("div",{className:"flex-1",children:R?p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),': "',s,'"']}):p.jsx(lz,{initialValue:""})}),p.jsx("div",{className:"flex items-center gap-2 px-1",children:p.jsxs("select",{value:l,onChange:B=>h(B.target.value),className:"text-xs bg-transparent border-none outline-none text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer font-medium",children:[p.jsx("option",{value:"manual",children:" ()"}),p.jsx("option",{value:"createdAt_desc",children:""}),p.jsx("option",{value:"dueDate_asc",children:""}),p.jsx("option",{value:"important_desc",children:""}),p.jsx("option",{value:"title_asc",children:""})]})}),p.jsx("button",{onClick:()=>u(!a),className:Se("px-3 py-2 rounded-lg text-xs font-medium border transition-colors shrink-0",a?"bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-300":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"),title:a?"Hide completed tasks":"Show completed tasks",children:a?"":""})]}),x.length===0?p.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center min-h-[60vh]",children:[p.jsxs("div",{className:"relative mb-8",children:[p.jsx("div",{className:"absolute -inset-4 bg-blue-500/10 dark:bg-blue-400/10 blur-3xl rounded-full"}),p.jsx("div",{className:"relative",children:p.jsx("svg",{className:"w-24 h-24 text-blue-200 dark:text-blue-900/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})})]}),p.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:""}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs mb-8",children:a?"":""}),p.jsxs("button",{onClick:()=>y("task-detail",{title:""}),className:"btn-premium flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),""]})]}):q?p.jsx(Xf,{sensors:C,collisionDetection:Qf,onDragEnd:k,children:p.jsx(Sp,{items:x.map(B=>B.id||""),strategy:Ip,children:p.jsx("div",{className:Se("transition-all duration-200",E),children:x.map(B=>p.jsx(uz,{task:B},B.id))})})}):p.jsx("ul",{className:Se("transition-all duration-200",E),children:x.map(B=>p.jsx(c1,{task:B},B.id))})]}),p.jsx("div",{className:"flex-none mt-auto pt-2 border-t border-gray-100 dark:border-gray-800 bg-white/50 dark:bg-gray-900/50 backdrop-blur pb-[calc(0.5rem+env(safe-area-inset-bottom))]",children:p.jsx(cz,{tasks:x,timeBlockId:w.timeBlockId})})]})},dz=()=>{const{t}=ur(),{query:e,setSearchQuery:n,setFilter:r}=Fr(),{setView:s}=Oa(),[a,l]=j.useState(e),u=j.useRef(null);j.useEffect(()=>{var w;(w=u.current)==null||w.focus()},[]),j.useEffect(()=>{e!==a&&l(e)},[e]),j.useEffect(()=>{const w=setTimeout(()=>{a!==e&&n(a)},150);return()=>{clearTimeout(w)}},[a,e,n]);const h=w=>{l(w.target.value)},m=()=>{var w;l(""),n(""),(w=u.current)==null||w.focus()},y=()=>{n(""),r("inbox"),s("tasks")};return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("button",{onClick:y,className:"p-2 hover:bg-white/50 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":t("close"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),p.jsxs("div",{className:"relative flex-1",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),p.jsx("input",{ref:u,type:"text",value:a,onChange:h,placeholder:t("sidebar.search_placeholder"),className:"w-full bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 rounded-xl py-3 pl-10 pr-10 text-base text-gray-800 dark:text-gray-100 placeholder-gray-500 outline-none transition-all shadow-sm"}),a&&p.jsx("button",{type:"button",onClick:m,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":t("clear"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),a&&p.jsxs("p",{className:"mt-2 ml-12 text-sm text-gray-600 dark:text-gray-400",children:["",a,""]})]}),p.jsx("div",{className:"flex-1 overflow-hidden",children:a?p.jsx(u1,{}):p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 dark:text-gray-500",children:[p.jsx("svg",{className:"w-16 h-16 mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),p.jsx("p",{className:"text-lg",children:t("sidebar.search_placeholder")}),p.jsx("p",{className:"text-sm mt-1 opacity-75",children:""})]})})]})},hz=()=>{const{workspaceId:t,loading:e}=Vs(),[n,r]=j.useState([]),[s,a]=j.useState(!0),l=j.useRef(!1);return j.useEffect(()=>{if(l.current=!1,!t){r([]),e||a(!1);return}a(!0);const u=AF(t,h=>{l.current||(r(h),a(!1))},h=>{l.current||(console.error("Target subscription error:",h),a(!1))});return()=>{l.current=!0,u()}},[t,e]),{targets:n,loading:s||e}},fz=Le.memo(({kgi:t,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:s})=>{const{language:a}=Ur(),{t:l}=vd(a),u={good:"text-emerald-500",warning:"text-amber-500",danger:"text-red-500"},h={good:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-red-500"},m=u[t.status]||"text-gray-500",y=h[t.status]||"bg-gray-500",w=[{id:"backward",label:l("backward_map"),icon:""},{id:"woop",label:l("woop_board"),icon:""},{id:"okr",label:l("okr_tree"),icon:""}];return p.jsx("div",{className:`mb-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg transition-all duration-300 mx-4 mt-4 ${r?"py-2":"py-4"}`,children:p.jsxs("div",{className:"px-6 flex items-center justify-between gap-6",children:[p.jsx("div",{className:"flex-1 min-w-0",children:p.jsx("h1",{className:`font-bold text-gray-900 dark:text-white truncate transition-all duration-300 ${r?"text-sm opacity-50":"text-base"}`,children:t.title})}),p.jsx("div",{className:"flex-1 max-w-md hidden sm:block",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex-1",children:p.jsx("div",{className:"h-3 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:p.jsx("div",{style:{width:`${t.progress}%`},className:`h-full ${y} transition-all duration-1000 ease-out rounded-full`})})}),p.jsxs("span",{className:`font-black ${m} tabular-nums text-sm whitespace-nowrap`,children:[t.progress,"%"]})]})}),p.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0",children:[p.jsxs("div",{className:"text-center hidden sm:block",children:[p.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),p.jsxs("div",{className:`font-black ${m} tabular-nums`,children:[t.daysLeft,p.jsx("span",{className:"text-xs font-medium ml-0.5 text-gray-400",children:""})]})]}),p.jsx("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-900/50 p-1 rounded-lg",children:w.map(x=>p.jsxs("button",{onClick:()=>n(x.id),className:`group px-3 py-1.5 rounded-md text-xs font-bold transition-all flex flex-col sm:flex-row items-center gap-1 sm:gap-2 ${e===x.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,title:x.label,children:[p.jsx("span",{className:"text-sm sm:text-base leading-none",children:x.icon}),p.jsx("span",{className:"text-[10px] sm:text-xs leading-none",children:x.label})]},x.id))}),p.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:r?"Expand Header":"Collapse Header",children:p.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform duration-300 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})})})]})]})})}),pz=Le.memo(({data:t})=>!t||!t.milestones?p.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):p.jsxs("div",{className:"max-w-4xl mx-auto relative pb-10",children:[p.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 -translate-x-1/2"}),t.milestones.map((e,n)=>{const r=e.type==="goal",s=e.type==="current",a=e.completed;let l,u="";return r?(l=p.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-400 text-white flex items-center justify-center text-base shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),u="bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"):s?(l=p.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 animate-pulse relative",children:"Now"}),u="border-blue-500 border-2 shadow-md"):a?(l=p.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs shadow ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),u="bg-gray-50 dark:bg-gray-800 opacity-70"):(l=p.jsx("div",{className:"w-5 h-5 rounded-full bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative"}),u="bg-white dark:bg-gray-800"),p.jsxs("div",{className:"relative flex items-center mb-4 animate-fade-in group",style:{animationDelay:`${n*50}ms`},children:[p.jsx("div",{className:"w-16 flex-shrink-0 flex justify-center items-center z-10",children:l}),p.jsx("div",{className:"flex-1 pr-4 min-w-0",children:p.jsx("div",{className:`px-3 py-3 rounded-lg border ${s&&!u.includes("border-2")?"border-2 border-blue-500":s?"":"border-gray-200 dark:border-gray-700"} ${u} shadow-sm transition-all hover:shadow-md hover:translate-x-1 cursor-pointer`,children:p.jsxs("div",{className:"flex items-center justify-between gap-3",children:[p.jsx("span",{className:`text-xs font-bold ${s?"text-blue-600":"text-gray-500"} flex-shrink-0 font-mono`,children:e.date}),p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white flex-1 truncate text-sm md:text-base",children:e.title}),r&&p.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-bold flex-shrink-0",children:"TARGET"}),s&&p.jsx("span",{className:"text-[10px] text-blue-500 font-bold flex-shrink-0",children:" NOW"})]})})})]},e.id||`milestone-${n}`)})]})),mz=Le.memo(({data:t})=>{if(!t||!t.keyResults)return p.jsx("div",{className:"p-4 text-center text-gray-500",children:""});const e=n=>n==="high"?"bg-emerald-500":n==="medium"?"bg-amber-500":"bg-red-500";return p.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border-2 border-blue-100 dark:border-blue-900 shadow-lg text-center mb-12 relative z-10 transition-transform hover:scale-[1.01]",children:[p.jsx("div",{className:"absolute top-[-15px] left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-md",children:"Objective"}),p.jsxs("h2",{className:"font-black text-2xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 leading-tight",children:['"',t.objective,'"']}),p.jsx("div",{className:"absolute bottom-[-50px] left-1/2 w-1 h-[50px] bg-gray-200 dark:bg-gray-700 z-0"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative",children:[p.jsx("div",{className:"hidden md:block absolute top-[-25px] left-[16.66%] right-[16.66%] h-1 bg-gray-200 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 rounded-t-xl z-0"}),t.keyResults.map(n=>{const r=n.target>0?Math.round(n.current/n.target*100):0,s=e(n.confidence);return p.jsxs("div",{className:"relative pt-6",children:[p.jsx("div",{className:"absolute top-[-25px] left-1/2 w-1 h-[25px] bg-gray-200 dark:bg-gray-700 md:block hidden"}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-700 transition-all group h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",children:[p.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["KR #",n.id]}),p.jsx("div",{className:`w-3 h-3 rounded-full ${s}`,title:`Confidence: ${n.confidence}`})]}),p.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-4 h-12 line-clamp-2",children:n.text}),p.jsxs("div",{className:"space-y-1 mt-auto",children:[p.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-500 dark:text-gray-400",children:[p.jsx("span",{children:n.current}),p.jsx("span",{children:n.target})]}),p.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-900 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${r}%`}})}),p.jsxs("div",{className:"text-right text-sm font-black text-blue-600 mt-1",children:[r,"%"]})]})]})]},n.id)})]})]})}),gz=Le.memo(({data:t})=>!t||!t.obstacles?p.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto animate-fade-in",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/30 dark:to-blue-900/30 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800 shadow-sm hover:shadow-md transition-shadow",children:[p.jsx("h3",{className:"text-sm font-bold text-indigo-500 uppercase mb-2",children:"Wish ()"}),p.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.wish,'"']})]}),p.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/30 dark:to-rose-900/30 p-6 rounded-2xl border border-pink-100 dark:border-pink-800 shadow-sm hover:shadow-md transition-shadow",children:[p.jsx("h3",{className:"text-sm font-bold text-pink-500 uppercase mb-2",children:"Outcome ()"}),p.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.outcome,'"']})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-2 flex items-center",children:[p.jsx("span",{className:"mr-2",children:""})," Obstacles & If-Then Plans"]}),t.obstacles.map(e=>p.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all overflow-hidden relative",children:[p.jsx("div",{className:"p-5 border-l-4 border-gray-400 bg-gray-50 dark:bg-gray-800 relative z-10 transition-transform group-hover:translate-x-1",children:p.jsxs("h4",{className:"font-bold text-gray-700 dark:text-gray-300 flex items-center",children:[p.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-xs px-2 py-1 rounded mr-3 text-gray-600 dark:text-gray-400",children:""}),e.text]})}),p.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border-t border-gray-100 dark:border-gray-700 flex items-start",children:[p.jsx("div",{className:"flex-shrink-0 mt-1",children:p.jsx("span",{className:"block w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs font-bold",children:"IF"})}),p.jsx("div",{className:"ml-3 flex-1",children:p.jsxs("p",{className:"text-emerald-800 dark:text-emerald-300 font-bold text-sm",children:[" ",e.plan]})}),p.jsxs("div",{className:"ml-2 flex flex-col items-center",children:[p.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Score"}),p.jsx("span",{className:"text-lg font-black text-emerald-500 leading-none",children:e.overcomeCount})]})]})]},e.id)),p.jsx("button",{className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl text-gray-400 hover:border-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition flex items-center justify-center font-bold text-sm",children:"+ "})]})]})),yz=()=>{var C;const{targets:t}=hz(),[e,n]=j.useState("backward"),[r,s]=j.useState(!1),a=t.filter(k=>{var R;return((R=k.mode)==null?void 0:R.toLowerCase())===e.toLowerCase()}),l=k=>({milestones:[{date:"Future",title:k.data.goal_kgi||"Undefined Goal",type:"goal",completed:!1},{date:"Milestone",title:k.data.milestone_minus_1mo||"",type:"milestone",completed:!1},{date:"Today",title:"Current Status",type:"current",completed:!0},{date:"Now",title:k.data.first_action||"",type:"action",completed:!1}]}),u=k=>({wish:k.data.wish||"",outcome:k.data.outcome||"",obstacles:[{id:1,text:k.data.obstacle||"",plan:k.data.plan||"",overcomeCount:0}]}),h=k=>({objective:k.data.objective||"",keyResults:[{id:1,text:k.data.kr_1||"KR 1",current:0,target:100,confidence:"medium"},{id:2,text:k.data.kr_2||"KR 2",current:0,target:100,confidence:"medium"},{id:3,text:k.data.kr_3||"KR 3",current:0,target:100,confidence:"medium"}]}),m=k=>k?typeof k.toDate=="function"?k.toDate().toLocaleDateString():k instanceof Date?k.toLocaleDateString():String(k):"Unknown",y=()=>a.length===0?p.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500 dark:text-gray-400",children:p.jsxs("p",{className:"mb-4",children:["No ",e.toUpperCase()," targets found."]})}):p.jsx("div",{className:"space-y-12",children:a.map(k=>p.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-12 last:border-0",children:[p.jsxs("div",{className:"mb-4 text-xs text-gray-400 flex justify-end",children:["Created: ",m(k.createdAt)]}),e==="backward"&&p.jsx(pz,{data:l(k)}),e==="woop"&&p.jsx(gz,{data:u(k)}),e==="okr"&&p.jsx(mz,{data:h(k)})]},k.id))}),w=a[0],E={title:((k,R)=>k?R==="backward"?k.data.goal_kgi||"KGI":R==="woop"?k.data.wish||"WISH":R==="okr"?k.data.objective||"Objective":"":"")(w,e),progress:Number(((C=w==null?void 0:w.data)==null?void 0:C.progress)||0),daysLeft:0,status:"good"};return p.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[p.jsx(fz,{kgi:E,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:()=>s(!r)}),p.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 pb-6 pt-4",children:y()})]})},vz=[{id:"okr",title:"OKR (Objectives and Key Results)",subTitle:"",color:"blue",icon:"",concept:{summary:"ObjectiveKey Results",detail:"GoogleIntel60-70%"},useCases:[{title:"",before:"",after:"O:Rust KR:Rust13"},{title:"",before:"",after:"O:MVP KR:310030%"}],tips:[{q:"",a:"OKR60%Win"},{q:"KR",a:"50%100%70%NG"}]},{id:"woop",title:"WOOP (Wish, Outcome, Obstacle, Plan)",subTitle:"",color:"amber",icon:"",concept:{summary:"",detail:"If-ThenXY"},useCases:[{title:"",before:"",after:"W:30 O: Obs: Plan:"},{title:"",before:"",after:"Obs: Plan:"}],tips:[{q:"Obstacle",a:""},{q:"Plan",a:"5"}]},{id:"backward",title:"Backward Design ()",subTitle:"",color:"purple",icon:"",concept:{summary:"",detail:"ForecastingBackcasting"},useCases:[{title:"",before:"",after:"Goal: 1: 3:LP :"},{title:"",before:"",after:"Goal:3 2:20 1: :"}],tips:[{q:"",a:"KGI1OK"},{q:"",a:""}]}],_z=Le.memo(({framework:t,onClick:e})=>p.jsxs("div",{className:"framework-card cursor-pointer bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-6 transition-all duration-300 hover:border-blue-500 hover:shadow-lg hover:scale-105 group",onClick:()=>e(t),role:"button",tabIndex:0,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&e(t)},children:[p.jsx("div",{className:"text-4xl mb-3 transform transition-transform group-hover:scale-110 duration-300",children:t.icon}),p.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:t.title}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 h-10",children:t.concept.summary}),p.jsxs("div",{className:"mt-4 flex items-center text-xs text-blue-600 dark:text-blue-400 font-medium opacity-80 group-hover:opacity-100 transition-opacity",children:[p.jsx("span",{children:""}),p.jsx("svg",{className:"w-4 h-4 ml-1 transform transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})),wz=()=>{const{openModal:t}=pn();return p.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-900 overflow-y-auto custom-scrollbar",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 animate-fade-in",children:[p.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-8 flex items-center",children:[p.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500 mr-3",children:p.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),p.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-gray-300",children:" Wiki"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:vz.map(e=>p.jsx(_z,{framework:e,onClick:n=>t("wiki-framework",n)},e.id))})]})})},jl={backward:{id:"backward",label:"Backward Design",description:"",steps:[{title:"Goal / KGI",description:"KGI",inputs:[{type:"textarea",placeholder:"20253311",key:"goal_kgi"}]},{title:"Milestone",description:"1",inputs:[{type:"textarea",placeholder:"100",key:"milestone_minus_1mo"}]},{title:"First Action",description:"",inputs:[{type:"textarea",placeholder:"",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"",steps:[{title:"Wish ()",description:"",inputs:[{type:"textarea",placeholder:"30",key:"wish"}]},{title:"Outcome ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"outcome"}]},{title:"Obstacle ()",description:"",inputs:[{type:"textarea",placeholder:"SNS",key:"obstacle"}]},{title:"Plan ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"(O)(KR)",steps:[{title:"Objective",description:"1",inputs:[{type:"textarea",placeholder:"",key:"objective"}]},{title:"Key Results",description:"3",inputs:[{type:"text",placeholder:"KR 1 (: GitHub 1,000)",key:"kr_1"},{type:"text",placeholder:"KR 2 (:  500)",key:"kr_2"},{type:"text",placeholder:"KR 3 (:  40%)",key:"kr_3"}]}]}},bz=({mode:t,currentStep:e})=>{const n=jl[t],r=n.steps.length;return p.jsx("div",{className:"flex items-center justify-between mb-8 max-w-2xl mx-auto",children:p.jsx("div",{className:"flex items-center space-x-1 mx-auto w-full justify-center",children:n.steps.map((s,a)=>{const l=a+1,u=e>l,h=e===l,m=e<l;return p.jsxs(Le.Fragment,{children:[p.jsxs("div",{className:"flex flex-col items-center relative z-10 w-16",children:[p.jsx("div",{className:Se("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold",h&&"bg-blue-600 text-white ring-4 ring-blue-100 dark:ring-blue-900",u&&"bg-green-500 text-white",m&&"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:u?"":l}),p.jsx("div",{className:Se("text-[10px] mt-1 font-medium text-center w-20 truncate",h?"text-blue-600 dark:text-blue-400":"text-gray-400"),children:s.title})]}),a<r-1&&p.jsx("div",{className:Se("h-1 flex-1 mx-[-10px] mt-[-14px] z-0 transition-all duration-500 rounded-full",e>l?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},a)})})})},xz=({mode:t,step:e,onBack:n,onNext:r,onFinish:s})=>{const a=jl[t],l=e-1,u=a.steps[l],h=a.steps.length,[m,y]=j.useState({}),w=(E,C)=>{y(k=>({...k,[E]:C}))},x=()=>{const E=u.inputs.reduce((C,k,R)=>{const q=m[R]||"";return k.key&&(C[k.key]=q),C},{});e<h?r(E):s(E)};return p.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[p.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:[a.label," Mode"]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-8 min-h-[500px] flex flex-col",children:[p.jsx(bz,{mode:t,currentStep:e}),p.jsxs("div",{className:"flex-1 animate-fade-in",children:[p.jsxs("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-100",children:["Q",e,". ",u.title]}),p.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:u.description}),p.jsx("div",{className:"mb-8 space-y-4",children:u.inputs.map((E,C)=>p.jsx("div",{children:E.type==="textarea"?p.jsx("textarea",{className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",rows:5,placeholder:E.placeholder,value:m[C]||"",onChange:k=>w(C,k.target.value)}):p.jsx("input",{type:"text",className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",placeholder:E.placeholder,value:m[C]||"",onChange:k=>w(C,k.target.value)})},E.key||C))})]}),p.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[p.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition font-medium",children:""}),e<h?p.jsxs("button",{onClick:x,className:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-md transition font-medium flex items-center",children:["",p.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]}):p.jsxs("button",{onClick:x,className:"px-8 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 shadow-lg transition font-medium flex items-center transform hover:scale-105",children:[p.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),""]})]})]})]})},kz=({currentMode:t,onModeChange:e,onStart:n})=>{const r=jl[t],s={okr:["","",""],woop:["","",""],backward:["","",""]};return p.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-full max-h-[700px] flex flex-col py-6",children:[p.jsx("div",{className:"mb-4 flex-shrink-0",children:p.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[p.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),p.jsx("span",{className:"font-medium",children:""}),p.jsx("svg",{className:"w-3 h-3 mx-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),p.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:""})]})}),p.jsxs("div",{className:"mb-6 flex-shrink-0",children:[p.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:""}),p.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:Object.keys(jl).map(a=>p.jsx("button",{onClick:()=>e(a),className:Se("flex-1 py-2 text-xs font-bold rounded-lg transition-all",t===a?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:jl[a].label},a))})]}),p.jsx("div",{className:"flex-1 mb-6 min-h-0",children:p.jsx("div",{className:"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden shadow-xl",children:p.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[p.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mb-4 shadow-lg flex-shrink-0",children:p.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 text-xl",children:r.label}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-2xl leading-relaxed",children:r.description}),p.jsx("div",{className:"mt-6 flex flex-wrap gap-2 justify-center",children:(s[t]||[]).map(a=>p.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300 shadow-sm",children:a},a))})]})})}),p.jsx("div",{className:"flex justify-center pb-4 flex-shrink-0",children:p.jsxs("button",{onClick:n,className:"group inline-flex items-center px-6 py-3 border-2 border-transparent shadow-xl font-bold rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition-all transform hover:scale-105 active:scale-95",children:[p.jsx("span",{children:""}),p.jsx("svg",{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},Ez=()=>{const[t,e]=j.useState("backward"),[n,r]=j.useState(0),[s,a]=j.useState({}),{setView:l,viewData:u}=Oa();j.useEffect(()=>{u!=null&&u.mode&&(e(u.mode),r(0))},[u]);const h=w=>{a(x=>({...x,...w})),r(x=>x+1)},m=async w=>{const x={...s,...w};try{await NF({mode:t,data:x}),console.log("Wizard Completed, Saved to Firestore",x),alert(`${jl[t].label}`),r(0),a({}),l("target-dashboard")}catch(E){console.error("Failed to save wizard target:",E),alert("")}},y=()=>{r(w=>Math.max(0,w-1))};return n===0?p.jsx(kz,{currentMode:t,onModeChange:e,onStart:()=>r(1)}):p.jsx(xz,{mode:t,step:n,onBack:y,onNext:h,onFinish:m})},Tz=(t,e)=>{const n=Gf(bo(ac,{activationConstraint:{distance:5}}),bo(Rk,{activationConstraint:{delay:It.DND.TOUCH_DELAY,tolerance:5}})),{language:r}=Ur(),{t:s}=vd(r),a=j.useCallback(async l=>{var E,C,k,R;const{active:u,over:h}=l;if(!h)return;const m=String(u.id),y=String(h.id),x=(q=>q.startsWith(It.DND.PREFIX_TASK)?q.split(":")[1]:null)(m);if(x){const q=(E=h.data.current)==null?void 0:E.type,B=(C=h.data.current)==null?void 0:C.value,$={};if(q===It.DND.TYPE_PROJECT&&($.projectId=B),q===It.DND.TYPE_INBOX&&($.projectId=null),q===It.DND.TYPE_TIMEBLOCK&&($.timeBlockId=B==="unassigned"?null:B),Object.keys($).length>0)try{await J0(x,$)}catch(H){console.error("Failed to update task via dnd",H),Tn.error(s("error"))}}if(m!==y&&!x){const q=t.findIndex($=>$.id===m),B=t.findIndex($=>$.id===y);if(q!==-1&&B!==-1){const $=bc(t,q,B);(k=e==null?void 0:e.onOptimisticReorder)==null||k.call(e,$);try{await sF($)}catch(H){console.error("Failed to update project order",H),Tn.error(s("error")),(R=e==null?void 0:e.onRevertReorder)==null||R.call(e,t)}}}},[t,e,s]);return{sensors:n,handleDragEnd:a}},Iz=()=>{const{workspaceId:t,loading:e}=Vs(),n=j.useCallback(l=>t?bF(t,l):()=>{},[t]),{data:r,isPending:s}=_d(["labels",t],n,wF()),a=e||!!t&&s&&(r??[]).length===0;return{labels:r||[],loading:a}},Sz=()=>{const{fontEn:t,fontJp:e,fontSize:n,density:r,themeMode:s}=Ur(),{setSidebarDensity:a}=M0();j.useLayoutEffect(()=>{const l=document.documentElement,u=()=>{s==="dark"?l.classList.add("dark"):s==="light"?l.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?l.classList.add("dark"):l.classList.remove("dark")};u();const h=window.matchMedia("(prefers-color-scheme: dark)"),m=()=>{s==="system"&&u()};return h.addEventListener("change",m),()=>h.removeEventListener("change",m)},[s]),j.useLayoutEffect(()=>{const l=document.documentElement;l.style.setProperty("--font-en",`"${t}"`),l.style.setProperty("--font-jp",`"${e}"`)},[t,e]),j.useLayoutEffect(()=>{const l=["font-app-sm","font-app-base","font-app-md","font-app-lg","font-app-xl"];document.body.classList.remove(...l),document.body.classList.add(`font-app-${n}`)},[n]),j.useLayoutEffect(()=>{const l=["app-density-compact","app-density-normal","app-density-comfortable","app-density-spacious"];document.body.classList.remove(...l),document.body.classList.add(`app-density-${r}`),a(r)},[r,a])},Cz=()=>{Sz();const{filterType:t,targetId:e,query:n}=Fr(),{currentView:r,setView:s}=Oa(),{setFilter:a}=Fr(),{projects:l,setProjectsOverride:u}=Ep(),{labels:h}=Iz(),[m,y]=Le.useState(null);Le.useEffect(()=>{const C=bE(Qe,R=>{y(R)}),k=R=>{const q=R.target,B=["INPUT","TEXTAREA"].includes(q.tagName)||q.closest("[contenteditable]"),$=document.querySelector('[role="dialog"]');R.key==="/"&&!B&&!$&&(R.preventDefault(),a("search"),s("search"))};return document.addEventListener("keydown",k),()=>{C(),document.removeEventListener("keydown",k)}},[]);const{sensors:w,handleDragEnd:x}=Tz(l,{onOptimisticReorder:u,onRevertReorder:u}),E=()=>{var C,k;if(r==="wizard")return"Goal Wizard";if(r==="target-dashboard")return"Target Dashboard";if(r==="wiki")return"Framework Wiki";if(r==="search")return n?`"${n}" `:"";if(t==="project")return((C=l.find(R=>R.id===e))==null?void 0:C.name)||"Project";if(t==="label")return((k=h.find(R=>R.id===e))==null?void 0:k.name)||"Label";if(t==="search")return n?`"${n}" `:"";switch(t){case"inbox":return"Inbox";case"today":return"Today";case"upcoming":return"Upcoming";case"important":return"Important";case"custom":return"All Tasks";default:return"TaskMg"}};return m?p.jsxs(Xf,{sensors:w,collisionDetection:Qf,onDragEnd:x,children:[p.jsx(RO,{}),p.jsx(P6,{}),p.jsx(FV,{sidebarContent:p.jsx(oz,{}),title:E(),children:r==="wizard"?p.jsx(Ez,{}):r==="target-dashboard"?p.jsx(yz,{}):r==="wiki"?p.jsx(wz,{}):r==="search"?p.jsx(dz,{}):p.jsx(u1,{})})]}):p.jsx(L4,{})};class Az extends j.Component{constructor(n){super(n);Gi(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){jV(n,r.componentStack??void 0)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:p.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[p.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:p.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),p.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:""}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:""}),p.jsxs("div",{className:"flex gap-3 justify-center",children:[p.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""}),p.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:""})]}),!1]})}):this.props.children}}const Nz=new WS({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1,retry:!1}}});DV();const d1=document.getElementById("app");if(!d1)throw new Error("Failed to find the root element");cC.createRoot(d1).render(p.jsx(Le.StrictMode,{children:p.jsx(Az,{children:p.jsx(qS,{client:Nz,children:p.jsx(Cz,{})})})}));
