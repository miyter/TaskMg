var pS=Object.defineProperty;var cw=t=>{throw TypeError(t)};var mS=(t,e,n)=>e in t?pS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Hn=(t,e,n)=>mS(t,typeof e!="symbol"?e+"":e,n),ng=(t,e,n)=>e.has(t)||cw("Cannot "+n);var z=(t,e,n)=>(ng(t,e,"read from private field"),n?n.call(t):e.get(t)),Oe=(t,e,n)=>e.has(t)?cw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),me=(t,e,n,r)=>(ng(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Je=(t,e,n)=>(ng(t,e,"access private method"),n);var Vh=(t,e,n,r)=>({set _(s){me(t,e,s,n)},get _(){return z(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function nk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rg={exports:{}},au={},sg={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function gS(){if(uw)return Ke;uw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function x($){return $===null||typeof $!="object"?null:($=w&&$[w]||$["@@iterator"],typeof $=="function"?$:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,I={};function S($,ee,ce){this.props=$,this.context=ee,this.refs=I,this.updater=ce||E}S.prototype.isReactComponent={},S.prototype.setState=function($,ee){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ee,"setState")},S.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function V(){}V.prototype=S.prototype;function W($,ee,ce){this.props=$,this.context=ee,this.refs=I,this.updater=ce||E}var U=W.prototype=new V;U.constructor=W,N(U,S.prototype),U.isPureReactComponent=!0;var G=Array.isArray,Z=Object.prototype.hasOwnProperty,K={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function k($,ee,ce){var be,De={},Re=null,Te=null;if(ee!=null)for(be in ee.ref!==void 0&&(Te=ee.ref),ee.key!==void 0&&(Re=""+ee.key),ee)Z.call(ee,be)&&!A.hasOwnProperty(be)&&(De[be]=ee[be]);var Ue=arguments.length-2;if(Ue===1)De.children=ce;else if(1<Ue){for(var ne=Array(Ue),he=0;he<Ue;he++)ne[he]=arguments[he+2];De.children=ne}if($&&$.defaultProps)for(be in Ue=$.defaultProps,Ue)De[be]===void 0&&(De[be]=Ue[be]);return{$$typeof:t,type:$,key:Re,ref:Te,props:De,_owner:K.current}}function R($,ee){return{$$typeof:t,type:$.type,key:ee,ref:$.ref,props:$.props,_owner:$._owner}}function P($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function D($){var ee={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ce){return ee[ce]})}var M=/\/+/g;function j($,ee){return typeof $=="object"&&$!==null&&$.key!=null?D(""+$.key):ee.toString(36)}function Ce($,ee,ce,be,De){var Re=typeof $;(Re==="undefined"||Re==="boolean")&&($=null);var Te=!1;if($===null)Te=!0;else switch(Re){case"string":case"number":Te=!0;break;case"object":switch($.$$typeof){case t:case e:Te=!0}}if(Te)return Te=$,De=De(Te),$=be===""?"."+j(Te,0):be,G(De)?(ce="",$!=null&&(ce=$.replace(M,"$&/")+"/"),Ce(De,ee,ce,"",function(he){return he})):De!=null&&(P(De)&&(De=R(De,ce+(!De.key||Te&&Te.key===De.key?"":(""+De.key).replace(M,"$&/")+"/")+$)),ee.push(De)),1;if(Te=0,be=be===""?".":be+":",G($))for(var Ue=0;Ue<$.length;Ue++){Re=$[Ue];var ne=be+j(Re,Ue);Te+=Ce(Re,ee,ce,ne,De)}else if(ne=x($),typeof ne=="function")for($=ne.call($),Ue=0;!(Re=$.next()).done;)Re=Re.value,ne=be+j(Re,Ue++),Te+=Ce(Re,ee,ce,ne,De);else if(Re==="object")throw ee=String($),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Te}function nt($,ee,ce){if($==null)return $;var be=[],De=0;return Ce($,be,"","",function(Re){return ee.call(ce,Re,De++)}),be}function Qe($){if($._status===-1){var ee=$._result;ee=ee(),ee.then(function(ce){($._status===0||$._status===-1)&&($._status=1,$._result=ce)},function(ce){($._status===0||$._status===-1)&&($._status=2,$._result=ce)}),$._status===-1&&($._status=0,$._result=ee)}if($._status===1)return $._result.default;throw $._result}var Ne={current:null},X={transition:null},pe={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:X,ReactCurrentOwner:K};function de(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:nt,forEach:function($,ee,ce){nt($,function(){ee.apply(this,arguments)},ce)},count:function($){var ee=0;return nt($,function(){ee++}),ee},toArray:function($){return nt($,function(ee){return ee})||[]},only:function($){if(!P($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Ke.Component=S,Ke.Fragment=n,Ke.Profiler=s,Ke.PureComponent=W,Ke.StrictMode=r,Ke.Suspense=d,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Ke.act=de,Ke.cloneElement=function($,ee,ce){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var be=N({},$.props),De=$.key,Re=$.ref,Te=$._owner;if(ee!=null){if(ee.ref!==void 0&&(Re=ee.ref,Te=K.current),ee.key!==void 0&&(De=""+ee.key),$.type&&$.type.defaultProps)var Ue=$.type.defaultProps;for(ne in ee)Z.call(ee,ne)&&!A.hasOwnProperty(ne)&&(be[ne]=ee[ne]===void 0&&Ue!==void 0?Ue[ne]:ee[ne])}var ne=arguments.length-2;if(ne===1)be.children=ce;else if(1<ne){Ue=Array(ne);for(var he=0;he<ne;he++)Ue[he]=arguments[he+2];be.children=Ue}return{$$typeof:t,type:$.type,key:De,ref:Re,props:be,_owner:Te}},Ke.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:o,_context:$},$.Consumer=$},Ke.createElement=k,Ke.createFactory=function($){var ee=k.bind(null,$);return ee.type=$,ee},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function($){return{$$typeof:u,render:$}},Ke.isValidElement=P,Ke.lazy=function($){return{$$typeof:y,_payload:{_status:-1,_result:$},_init:Qe}},Ke.memo=function($,ee){return{$$typeof:m,type:$,compare:ee===void 0?null:ee}},Ke.startTransition=function($){var ee=X.transition;X.transition={};try{$()}finally{X.transition=ee}},Ke.unstable_act=de,Ke.useCallback=function($,ee){return Ne.current.useCallback($,ee)},Ke.useContext=function($){return Ne.current.useContext($)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function($){return Ne.current.useDeferredValue($)},Ke.useEffect=function($,ee){return Ne.current.useEffect($,ee)},Ke.useId=function(){return Ne.current.useId()},Ke.useImperativeHandle=function($,ee,ce){return Ne.current.useImperativeHandle($,ee,ce)},Ke.useInsertionEffect=function($,ee){return Ne.current.useInsertionEffect($,ee)},Ke.useLayoutEffect=function($,ee){return Ne.current.useLayoutEffect($,ee)},Ke.useMemo=function($,ee){return Ne.current.useMemo($,ee)},Ke.useReducer=function($,ee,ce){return Ne.current.useReducer($,ee,ce)},Ke.useRef=function($){return Ne.current.useRef($)},Ke.useState=function($){return Ne.current.useState($)},Ke.useSyncExternalStore=function($,ee,ce){return Ne.current.useSyncExternalStore($,ee,ce)},Ke.useTransition=function(){return Ne.current.useTransition()},Ke.version="18.3.1",Ke}var dw;function Iy(){return dw||(dw=1,sg.exports=gS()),sg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function yS(){if(hw)return au;hw=1;var t=Iy(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var y,w={},x=null,E=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(E=d.ref);for(y in d)r.call(d,y)&&!o.hasOwnProperty(y)&&(w[y]=d[y]);if(u&&u.defaultProps)for(y in d=u.defaultProps,d)w[y]===void 0&&(w[y]=d[y]);return{$$typeof:e,type:u,key:x,ref:E,props:w,_owner:s.current}}return au.Fragment=n,au.jsx=l,au.jsxs=l,au}var fw;function vS(){return fw||(fw=1,rg.exports=yS()),rg.exports}var p=vS(),ed=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_S={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},oo,Ty,Hx,wS=(Hx=class{constructor(){Oe(this,oo,_S);Oe(this,Ty,!1)}setTimeoutProvider(t){me(this,oo,t)}setTimeout(t,e){return z(this,oo).setTimeout(t,e)}clearTimeout(t){z(this,oo).clearTimeout(t)}setInterval(t,e){return z(this,oo).setInterval(t,e)}clearInterval(t){z(this,oo).clearInterval(t)}},oo=new WeakMap,Ty=new WeakMap,Hx),ha=new wS;function bS(t){setTimeout(t,0)}var Ta=typeof window>"u"||"Deno"in globalThis;function hr(){}function xS(t,e){return typeof t=="function"?t(e):t}function Cg(t){return typeof t=="number"&&t>=0&&t!==1/0}function rk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function yo(t,e){return typeof t=="function"?t(e):t}function Ur(t,e){return typeof t=="function"?t(e):t}function pw(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==Sy(l,e.options))return!1}else if(!Nu(e.queryKey,l))return!1}if(n!=="all"){const d=e.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||o&&!o(e))}function mw(t,e){const{exact:n,status:r,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(Au(e.options.mutationKey)!==Au(o))return!1}else if(!Nu(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Sy(t,e){return((e==null?void 0:e.queryKeyHashFn)||Au)(t)}function Au(t){return JSON.stringify(t,(e,n)=>Ng(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Nu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Nu(t[n],e[n])):!1}var kS=Object.prototype.hasOwnProperty;function sk(t,e){if(t===e)return t;const n=gw(t)&&gw(e);if(!n&&!(Ng(t)&&Ng(e)))return e;const s=(n?t:Object.keys(t)).length,o=n?e:Object.keys(e),l=o.length,u=n?new Array(l):{};let d=0;for(let m=0;m<l;m++){const y=n?m:o[m],w=t[y],x=e[y];if(w===x){u[y]=w,(n?m<s:kS.call(t,y))&&d++;continue}if(w===null||x===null||typeof w!="object"||typeof x!="object"){u[y]=x;continue}const E=sk(w,x);u[y]=E,E===w&&d++}return s===l&&d===s?t:u}function Ag(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function gw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ng(t){if(!yw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!yw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function yw(t){return Object.prototype.toString.call(t)==="[object Object]"}function ES(t){return new Promise(e=>{ha.setTimeout(e,t)})}function Rg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?sk(t,e):e}function TS(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function IS(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Cy=Symbol();function ik(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Cy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function SS(t,e){return typeof t=="function"?t(...e):!!t}function CS(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var pa,ao,Ml,Kx,AS=(Kx=class extends ed{constructor(){super();Oe(this,pa);Oe(this,ao);Oe(this,Ml);me(this,Ml,e=>{if(!Ta&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){z(this,ao)||this.setEventListener(z(this,Ml))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,ao))==null||e.call(this),me(this,ao,void 0))}setEventListener(e){var n;me(this,Ml,e),(n=z(this,ao))==null||n.call(this),me(this,ao,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,pa)!==e&&(me(this,pa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof z(this,pa)=="boolean"?z(this,pa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},pa=new WeakMap,ao=new WeakMap,Ml=new WeakMap,Kx),Ay=new AS;function Pg(){let t,e;const n=new Promise((s,o)=>{t=s,e=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var NS=bS;function RS(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=NS;const o=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(d=>{n(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||l()}return d},batchCalls:u=>(...d)=>{o(()=>{u(...d)})},schedule:o,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Tn=RS(),Vl,lo,Fl,Gx,PS=(Gx=class extends ed{constructor(){super();Oe(this,Vl,!0);Oe(this,lo);Oe(this,Fl);me(this,Fl,e=>{if(!Ta&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,lo)||this.setEventListener(z(this,Fl))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,lo))==null||e.call(this),me(this,lo,void 0))}setEventListener(e){var n;me(this,Fl,e),(n=z(this,lo))==null||n.call(this),me(this,lo,e(this.setOnline.bind(this)))}setOnline(e){z(this,Vl)!==e&&(me(this,Vl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,Vl)}},Vl=new WeakMap,lo=new WeakMap,Fl=new WeakMap,Gx),bf=new PS;function jS(t){return Math.min(1e3*2**t,3e4)}function ok(t){return(t??"online")==="online"?bf.isOnline():!0}var jg=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ak(t){let e=!1,n=0,r;const s=Pg(),o=()=>s.status!=="pending",l=I=>{var S;if(!o()){const V=new jg(I);x(V),(S=t.onCancel)==null||S.call(t,V)}},u=()=>{e=!0},d=()=>{e=!1},m=()=>Ay.isFocused()&&(t.networkMode==="always"||bf.isOnline())&&t.canRun(),y=()=>ok(t.networkMode)&&t.canRun(),w=I=>{o()||(r==null||r(),s.resolve(I))},x=I=>{o()||(r==null||r(),s.reject(I))},E=()=>new Promise(I=>{var S;r=V=>{(o()||m())&&I(V)},(S=t.onPause)==null||S.call(t)}).then(()=>{var I;r=void 0,o()||(I=t.onContinue)==null||I.call(t)}),N=()=>{if(o())return;let I;const S=n===0?t.initialPromise:void 0;try{I=S??t.fn()}catch(V){I=Promise.reject(V)}Promise.resolve(I).then(w).catch(V=>{var K;if(o())return;const W=t.retry??(Ta?0:3),U=t.retryDelay??jS,G=typeof U=="function"?U(n,V):U,Z=W===!0||typeof W=="number"&&n<W||typeof W=="function"&&W(n,V);if(e||!Z){x(V);return}n++,(K=t.onFail)==null||K.call(t,n,V),ES(G).then(()=>m()?void 0:E()).then(()=>{e?x(V):N()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r==null||r(),s),cancelRetry:u,continueRetry:d,canStart:y,start:()=>(y()?N():E().then(N),s)}}var ma,Qx,lk=(Qx=class{constructor(){Oe(this,ma)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Cg(this.gcTime)&&me(this,ma,ha.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ta?1/0:300*1e3))}clearGcTimeout(){z(this,ma)&&(ha.clearTimeout(z(this,ma)),me(this,ma,void 0))}},ma=new WeakMap,Qx),ga,zl,zr,ya,hn,Qu,va,cs,ii,Zx,DS=(Zx=class extends lk{constructor(n){super();Oe(this,cs);Oe(this,ga);Oe(this,zl);Oe(this,zr);Oe(this,ya);Oe(this,hn);Oe(this,Qu);Oe(this,va);me(this,va,!1),me(this,Qu,n.defaultOptions),this.setOptions(n.options),this.observers=[],me(this,ya,n.client),me(this,zr,z(this,ya).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,me(this,ga,_w(this.options)),this.state=n.state??z(this,ga),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=z(this,hn))==null?void 0:n.promise}setOptions(n){if(this.options={...z(this,Qu),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=_w(this.options);r.data!==void 0&&(this.setState(vw(r.data,r.dataUpdatedAt)),me(this,ga,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,zr).remove(this)}setData(n,r){const s=Rg(this.state.data,n,this.options);return Je(this,cs,ii).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Je(this,cs,ii).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,o;const r=(s=z(this,hn))==null?void 0:s.promise;return(o=z(this,hn))==null||o.cancel(n),r?r.then(hr).catch(hr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,ga))}isActive(){return this.observers.some(n=>Ur(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>yo(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!rk(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=z(this,hn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=z(this,hn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),z(this,zr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(z(this,hn)&&(z(this,va)?z(this,hn).cancel({revert:!0}):z(this,hn).cancelRetry()),this.scheduleGc()),z(this,zr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Je(this,cs,ii).call(this,{type:"invalidate"})}async fetch(n,r){var m,y,w,x,E,N,I,S,V,W,U,G;if(this.state.fetchStatus!=="idle"&&((m=z(this,hn))==null?void 0:m.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(z(this,hn))return z(this,hn).continueRetry(),z(this,hn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const Z=this.observers.find(K=>K.options.queryFn);Z&&this.setOptions(Z.options)}const s=new AbortController,o=Z=>{Object.defineProperty(Z,"signal",{enumerable:!0,get:()=>(me(this,va,!0),s.signal)})},l=()=>{const Z=ik(this.options,r),A=(()=>{const k={client:z(this,ya),queryKey:this.queryKey,meta:this.meta};return o(k),k})();return me(this,va,!1),this.options.persister?this.options.persister(Z,A,this):Z(A)},d=(()=>{const Z={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:z(this,ya),state:this.state,fetchFn:l};return o(Z),Z})();(y=this.options.behavior)==null||y.onFetch(d,this),me(this,zl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((w=d.fetchOptions)==null?void 0:w.meta))&&Je(this,cs,ii).call(this,{type:"fetch",meta:(x=d.fetchOptions)==null?void 0:x.meta}),me(this,hn,ak({initialPromise:r==null?void 0:r.initialPromise,fn:d.fetchFn,onCancel:Z=>{Z instanceof jg&&Z.revert&&this.setState({...z(this,zl),fetchStatus:"idle"}),s.abort()},onFail:(Z,K)=>{Je(this,cs,ii).call(this,{type:"failed",failureCount:Z,error:K})},onPause:()=>{Je(this,cs,ii).call(this,{type:"pause"})},onContinue:()=>{Je(this,cs,ii).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const Z=await z(this,hn).start();if(Z===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(Z),(N=(E=z(this,zr).config).onSuccess)==null||N.call(E,Z,this),(S=(I=z(this,zr).config).onSettled)==null||S.call(I,Z,this.state.error,this),Z}catch(Z){if(Z instanceof jg){if(Z.silent)return z(this,hn).promise;if(Z.revert){if(this.state.data===void 0)throw Z;return this.state.data}}throw Je(this,cs,ii).call(this,{type:"error",error:Z}),(W=(V=z(this,zr).config).onError)==null||W.call(V,Z,this),(G=(U=z(this,zr).config).onSettled)==null||G.call(U,this.state.data,Z,this),Z}finally{this.scheduleGc()}}},ga=new WeakMap,zl=new WeakMap,zr=new WeakMap,ya=new WeakMap,hn=new WeakMap,Qu=new WeakMap,va=new WeakMap,cs=new WeakSet,ii=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...ck(s.data,this.options),fetchMeta:n.meta??null};case"success":const o={...s,...vw(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return me(this,zl,n.manual?o:void 0),o;case"error":const l=n.error;return{...s,error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Tn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),z(this,zr).notify({query:this,type:"updated",action:n})})},Zx);function ck(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ok(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function vw(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _w(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var dr,Xe,Zu,Gn,_a,Ul,ai,co,Yu,Bl,$l,wa,ba,uo,Wl,ut,du,Dg,Og,Lg,Mg,Vg,Fg,zg,uk,Yx,OS=(Yx=class extends ed{constructor(e,n){super();Oe(this,ut);Oe(this,dr);Oe(this,Xe);Oe(this,Zu);Oe(this,Gn);Oe(this,_a);Oe(this,Ul);Oe(this,ai);Oe(this,co);Oe(this,Yu);Oe(this,Bl);Oe(this,$l);Oe(this,wa);Oe(this,ba);Oe(this,uo);Oe(this,Wl,new Set);this.options=n,me(this,dr,e),me(this,co,null),me(this,ai,Pg()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(z(this,Xe).addObserver(this),ww(z(this,Xe),this.options)?Je(this,ut,du).call(this):this.updateResult(),Je(this,ut,Mg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ug(z(this,Xe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ug(z(this,Xe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Je(this,ut,Vg).call(this),Je(this,ut,Fg).call(this),z(this,Xe).removeObserver(this)}setOptions(e){const n=this.options,r=z(this,Xe);if(this.options=z(this,dr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ur(this.options.enabled,z(this,Xe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Je(this,ut,zg).call(this),z(this,Xe).setOptions(this.options),n._defaulted&&!Ag(this.options,n)&&z(this,dr).getQueryCache().notify({type:"observerOptionsUpdated",query:z(this,Xe),observer:this});const s=this.hasListeners();s&&bw(z(this,Xe),r,this.options,n)&&Je(this,ut,du).call(this),this.updateResult(),s&&(z(this,Xe)!==r||Ur(this.options.enabled,z(this,Xe))!==Ur(n.enabled,z(this,Xe))||yo(this.options.staleTime,z(this,Xe))!==yo(n.staleTime,z(this,Xe)))&&Je(this,ut,Dg).call(this);const o=Je(this,ut,Og).call(this);s&&(z(this,Xe)!==r||Ur(this.options.enabled,z(this,Xe))!==Ur(n.enabled,z(this,Xe))||o!==z(this,uo))&&Je(this,ut,Lg).call(this,o)}getOptimisticResult(e){const n=z(this,dr).getQueryCache().build(z(this,dr),e),r=this.createResult(n,e);return MS(this,r)&&(me(this,Gn,r),me(this,Ul,this.options),me(this,_a,z(this,Xe).state)),r}getCurrentResult(){return z(this,Gn)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&z(this,ai).status==="pending"&&z(this,ai).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){z(this,Wl).add(e)}getCurrentQuery(){return z(this,Xe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=z(this,dr).defaultQueryOptions(e),r=z(this,dr).getQueryCache().build(z(this,dr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Je(this,ut,du).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),z(this,Gn)))}createResult(e,n){var R;const r=z(this,Xe),s=this.options,o=z(this,Gn),l=z(this,_a),u=z(this,Ul),m=e!==r?e.state:z(this,Zu),{state:y}=e;let w={...y},x=!1,E;if(n._optimisticResults){const P=this.hasListeners(),D=!P&&ww(e,n),M=P&&bw(e,r,n,s);(D||M)&&(w={...w,...ck(y.data,e.options)}),n._optimisticResults==="isRestoring"&&(w.fetchStatus="idle")}let{error:N,errorUpdatedAt:I,status:S}=w;E=w.data;let V=!1;if(n.placeholderData!==void 0&&E===void 0&&S==="pending"){let P;o!=null&&o.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(P=o.data,V=!0):P=typeof n.placeholderData=="function"?n.placeholderData((R=z(this,$l))==null?void 0:R.state.data,z(this,$l)):n.placeholderData,P!==void 0&&(S="success",E=Rg(o==null?void 0:o.data,P,n),x=!0)}if(n.select&&E!==void 0&&!V)if(o&&E===(l==null?void 0:l.data)&&n.select===z(this,Yu))E=z(this,Bl);else try{me(this,Yu,n.select),E=n.select(E),E=Rg(o==null?void 0:o.data,E,n),me(this,Bl,E),me(this,co,null)}catch(P){me(this,co,P)}z(this,co)&&(N=z(this,co),E=z(this,Bl),I=Date.now(),S="error");const W=w.fetchStatus==="fetching",U=S==="pending",G=S==="error",Z=U&&W,K=E!==void 0,k={status:S,fetchStatus:w.fetchStatus,isPending:U,isSuccess:S==="success",isError:G,isInitialLoading:Z,isLoading:Z,data:E,dataUpdatedAt:w.dataUpdatedAt,error:N,errorUpdatedAt:I,failureCount:w.fetchFailureCount,failureReason:w.fetchFailureReason,errorUpdateCount:w.errorUpdateCount,isFetched:w.dataUpdateCount>0||w.errorUpdateCount>0,isFetchedAfterMount:w.dataUpdateCount>m.dataUpdateCount||w.errorUpdateCount>m.errorUpdateCount,isFetching:W,isRefetching:W&&!U,isLoadingError:G&&!K,isPaused:w.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:G&&K,isStale:Ny(e,n),refetch:this.refetch,promise:z(this,ai),isEnabled:Ur(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=j=>{k.status==="error"?j.reject(k.error):k.data!==void 0&&j.resolve(k.data)},D=()=>{const j=me(this,ai,k.promise=Pg());P(j)},M=z(this,ai);switch(M.status){case"pending":e.queryHash===r.queryHash&&P(M);break;case"fulfilled":(k.status==="error"||k.data!==M.value)&&D();break;case"rejected":(k.status!=="error"||k.error!==M.reason)&&D();break}}return k}updateResult(){const e=z(this,Gn),n=this.createResult(z(this,Xe),this.options);if(me(this,_a,z(this,Xe).state),me(this,Ul,this.options),z(this,_a).data!==void 0&&me(this,$l,z(this,Xe)),Ag(n,e))return;me(this,Gn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!z(this,Wl).size)return!0;const l=new Set(o??z(this,Wl));return this.options.throwOnError&&l.add("error"),Object.keys(z(this,Gn)).some(u=>{const d=u;return z(this,Gn)[d]!==e[d]&&l.has(d)})};Je(this,ut,uk).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Je(this,ut,Mg).call(this)}},dr=new WeakMap,Xe=new WeakMap,Zu=new WeakMap,Gn=new WeakMap,_a=new WeakMap,Ul=new WeakMap,ai=new WeakMap,co=new WeakMap,Yu=new WeakMap,Bl=new WeakMap,$l=new WeakMap,wa=new WeakMap,ba=new WeakMap,uo=new WeakMap,Wl=new WeakMap,ut=new WeakSet,du=function(e){Je(this,ut,zg).call(this);let n=z(this,Xe).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(hr)),n},Dg=function(){Je(this,ut,Vg).call(this);const e=yo(this.options.staleTime,z(this,Xe));if(Ta||z(this,Gn).isStale||!Cg(e))return;const r=rk(z(this,Gn).dataUpdatedAt,e)+1;me(this,wa,ha.setTimeout(()=>{z(this,Gn).isStale||this.updateResult()},r))},Og=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(z(this,Xe)):this.options.refetchInterval)??!1},Lg=function(e){Je(this,ut,Fg).call(this),me(this,uo,e),!(Ta||Ur(this.options.enabled,z(this,Xe))===!1||!Cg(z(this,uo))||z(this,uo)===0)&&me(this,ba,ha.setInterval(()=>{(this.options.refetchIntervalInBackground||Ay.isFocused())&&Je(this,ut,du).call(this)},z(this,uo)))},Mg=function(){Je(this,ut,Dg).call(this),Je(this,ut,Lg).call(this,Je(this,ut,Og).call(this))},Vg=function(){z(this,wa)&&(ha.clearTimeout(z(this,wa)),me(this,wa,void 0))},Fg=function(){z(this,ba)&&(ha.clearInterval(z(this,ba)),me(this,ba,void 0))},zg=function(){const e=z(this,dr).getQueryCache().build(z(this,dr),this.options);if(e===z(this,Xe))return;const n=z(this,Xe);me(this,Xe,e),me(this,Zu,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},uk=function(e){Tn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(z(this,Gn))}),z(this,dr).getQueryCache().notify({query:z(this,Xe),type:"observerResultsUpdated"})})},Yx);function LS(t,e){return Ur(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ww(t,e){return LS(t,e)||t.state.data!==void 0&&Ug(t,e,e.refetchOnMount)}function Ug(t,e,n){if(Ur(e.enabled,t)!==!1&&yo(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Ny(t,e)}return!1}function bw(t,e,n,r){return(t!==e||Ur(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Ny(t,n)}function Ny(t,e){return Ur(e.enabled,t)!==!1&&t.isStaleByTime(yo(e.staleTime,t))}function MS(t,e){return!Ag(t.getCurrentResult(),e)}function xw(t){return{onFetch:(e,n)=>{var y,w,x,E,N;const r=e.options,s=(x=(w=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:w.fetchMore)==null?void 0:x.direction,o=((E=e.state.data)==null?void 0:E.pages)||[],l=((N=e.state.data)==null?void 0:N.pageParams)||[];let u={pages:[],pageParams:[]},d=0;const m=async()=>{let I=!1;const S=U=>{CS(U,()=>e.signal,()=>I=!0)},V=ik(e.options,e.fetchOptions),W=async(U,G,Z)=>{if(I)return Promise.reject();if(G==null&&U.pages.length)return Promise.resolve(U);const A=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:G,direction:Z?"backward":"forward",meta:e.options.meta};return S(D),D})(),k=await V(A),{maxPages:R}=e.options,P=Z?IS:TS;return{pages:P(U.pages,k,R),pageParams:P(U.pageParams,G,R)}};if(s&&o.length){const U=s==="backward",G=U?VS:kw,Z={pages:o,pageParams:l},K=G(r,Z);u=await W(Z,K,U)}else{const U=t??o.length;do{const G=d===0?l[0]??r.initialPageParam:kw(r,u);if(d>0&&G==null)break;u=await W(u,G),d++}while(d<U)}return u};e.options.persister?e.fetchFn=()=>{var I,S;return(S=(I=e.options).persister)==null?void 0:S.call(I,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=m}}}function kw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function VS(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ju,Ns,Qn,xa,Rs,Xi,Jx,FS=(Jx=class extends lk{constructor(n){super();Oe(this,Rs);Oe(this,Ju);Oe(this,Ns);Oe(this,Qn);Oe(this,xa);me(this,Ju,n.client),this.mutationId=n.mutationId,me(this,Qn,n.mutationCache),me(this,Ns,[]),this.state=n.state||zS(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){z(this,Ns).includes(n)||(z(this,Ns).push(n),this.clearGcTimeout(),z(this,Qn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){me(this,Ns,z(this,Ns).filter(r=>r!==n)),this.scheduleGc(),z(this,Qn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){z(this,Ns).length||(this.state.status==="pending"?this.scheduleGc():z(this,Qn).remove(this))}continue(){var n;return((n=z(this,xa))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var u,d,m,y,w,x,E,N,I,S,V,W,U,G,Z,K,A,k,R,P;const r=()=>{Je(this,Rs,Xi).call(this,{type:"continue"})},s={client:z(this,Ju),meta:this.options.meta,mutationKey:this.options.mutationKey};me(this,xa,ak({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(D,M)=>{Je(this,Rs,Xi).call(this,{type:"failed",failureCount:D,error:M})},onPause:()=>{Je(this,Rs,Xi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,Qn).canRun(this)}));const o=this.state.status==="pending",l=!z(this,xa).canStart();try{if(o)r();else{Je(this,Rs,Xi).call(this,{type:"pending",variables:n,isPaused:l}),await((d=(u=z(this,Qn).config).onMutate)==null?void 0:d.call(u,n,this,s));const M=await((y=(m=this.options).onMutate)==null?void 0:y.call(m,n,s));M!==this.state.context&&Je(this,Rs,Xi).call(this,{type:"pending",context:M,variables:n,isPaused:l})}const D=await z(this,xa).start();return await((x=(w=z(this,Qn).config).onSuccess)==null?void 0:x.call(w,D,n,this.state.context,this,s)),await((N=(E=this.options).onSuccess)==null?void 0:N.call(E,D,n,this.state.context,s)),await((S=(I=z(this,Qn).config).onSettled)==null?void 0:S.call(I,D,null,this.state.variables,this.state.context,this,s)),await((W=(V=this.options).onSettled)==null?void 0:W.call(V,D,null,n,this.state.context,s)),Je(this,Rs,Xi).call(this,{type:"success",data:D}),D}catch(D){try{await((G=(U=z(this,Qn).config).onError)==null?void 0:G.call(U,D,n,this.state.context,this,s))}catch(M){Promise.reject(M)}try{await((K=(Z=this.options).onError)==null?void 0:K.call(Z,D,n,this.state.context,s))}catch(M){Promise.reject(M)}try{await((k=(A=z(this,Qn).config).onSettled)==null?void 0:k.call(A,void 0,D,this.state.variables,this.state.context,this,s))}catch(M){Promise.reject(M)}try{await((P=(R=this.options).onSettled)==null?void 0:P.call(R,void 0,D,n,this.state.context,s))}catch(M){Promise.reject(M)}throw Je(this,Rs,Xi).call(this,{type:"error",error:D}),D}finally{z(this,Qn).runNext(this)}}},Ju=new WeakMap,Ns=new WeakMap,Qn=new WeakMap,xa=new WeakMap,Rs=new WeakSet,Xi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Tn.batch(()=>{z(this,Ns).forEach(s=>{s.onMutationUpdate(n)}),z(this,Qn).notify({mutation:this,type:"updated",action:n})})},Jx);function zS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var li,us,Xu,Xx,US=(Xx=class extends ed{constructor(e={}){super();Oe(this,li);Oe(this,us);Oe(this,Xu);this.config=e,me(this,li,new Set),me(this,us,new Map),me(this,Xu,0)}build(e,n,r){const s=new FS({client:e,mutationCache:this,mutationId:++Vh(this,Xu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){z(this,li).add(e);const n=Fh(e);if(typeof n=="string"){const r=z(this,us).get(n);r?r.push(e):z(this,us).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,li).delete(e)){const n=Fh(e);if(typeof n=="string"){const r=z(this,us).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&z(this,us).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Fh(e);if(typeof n=="string"){const r=z(this,us).get(n),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Fh(e);if(typeof n=="string"){const s=(r=z(this,us).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Tn.batch(()=>{z(this,li).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,li).clear(),z(this,us).clear()})}getAll(){return Array.from(z(this,li))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>mw(n,r))}findAll(e={}){return this.getAll().filter(n=>mw(e,n))}notify(e){Tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Tn.batch(()=>Promise.all(e.map(n=>n.continue().catch(hr))))}},li=new WeakMap,us=new WeakMap,Xu=new WeakMap,Xx);function Fh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Ps,ek,BS=(ek=class extends ed{constructor(e={}){super();Oe(this,Ps);this.config=e,me(this,Ps,new Map)}build(e,n,r){const s=n.queryKey,o=n.queryHash??Sy(s,n);let l=this.get(o);return l||(l=new DS({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){z(this,Ps).has(e.queryHash)||(z(this,Ps).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=z(this,Ps).get(e.queryHash);n&&(e.destroy(),n===e&&z(this,Ps).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Tn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,Ps).get(e)}getAll(){return[...z(this,Ps).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>pw(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>pw(e,r)):n}notify(e){Tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Tn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Tn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ps=new WeakMap,ek),zt,ho,fo,ql,Hl,po,Kl,Gl,tk,$S=(tk=class{constructor(t={}){Oe(this,zt);Oe(this,ho);Oe(this,fo);Oe(this,ql);Oe(this,Hl);Oe(this,po);Oe(this,Kl);Oe(this,Gl);me(this,zt,t.queryCache||new BS),me(this,ho,t.mutationCache||new US),me(this,fo,t.defaultOptions||{}),me(this,ql,new Map),me(this,Hl,new Map),me(this,po,0)}mount(){Vh(this,po)._++,z(this,po)===1&&(me(this,Kl,Ay.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,zt).onFocus())})),me(this,Gl,bf.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,zt).onOnline())})))}unmount(){var t,e;Vh(this,po)._--,z(this,po)===0&&((t=z(this,Kl))==null||t.call(this),me(this,Kl,void 0),(e=z(this,Gl))==null||e.call(this),me(this,Gl,void 0))}isFetching(t){return z(this,zt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return z(this,ho).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,zt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=z(this,zt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(yo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return z(this,zt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=z(this,zt).get(r.queryHash),o=s==null?void 0:s.state.data,l=xS(e,o);if(l!==void 0)return z(this,zt).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Tn.batch(()=>z(this,zt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,zt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=z(this,zt);Tn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=z(this,zt);return Tn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Tn.batch(()=>z(this,zt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(hr).catch(hr)}invalidateQueries(t,e={}){return Tn.batch(()=>(z(this,zt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Tn.batch(()=>z(this,zt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(hr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(hr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=z(this,zt).build(this,e);return n.isStaleByTime(yo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hr).catch(hr)}fetchInfiniteQuery(t){return t.behavior=xw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hr).catch(hr)}ensureInfiniteQueryData(t){return t.behavior=xw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return bf.isOnline()?z(this,ho).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,zt)}getMutationCache(){return z(this,ho)}getDefaultOptions(){return z(this,fo)}setDefaultOptions(t){me(this,fo,t)}setQueryDefaults(t,e){z(this,ql).set(Au(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...z(this,ql).values()],n={};return e.forEach(r=>{Nu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){z(this,Hl).set(Au(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...z(this,Hl).values()],n={};return e.forEach(r=>{Nu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...z(this,fo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Sy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Cy&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...z(this,fo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){z(this,zt).clear(),z(this,ho).clear()}},zt=new WeakMap,ho=new WeakMap,fo=new WeakMap,ql=new WeakMap,Hl=new WeakMap,po=new WeakMap,Kl=new WeakMap,Gl=new WeakMap,tk),O=Iy();const Le=nk(O);var dk=O.createContext(void 0),Ry=t=>{const e=O.useContext(dk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},WS=({client:t,children:e})=>(O.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(dk.Provider,{value:t,children:e})),hk=O.createContext(!1),qS=()=>O.useContext(hk);hk.Provider;function HS(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var KS=O.createContext(HS()),GS=()=>O.useContext(KS),QS=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},ZS=t=>{O.useEffect(()=>{t.clearReset()},[t])},YS=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||SS(n,[t.error,r])),JS=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},XS=(t,e)=>t.isLoading&&t.isFetching&&!e,eC=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ew=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function tC(t,e,n){var w,x,E,N,I;const r=qS(),s=GS(),o=Ry(),l=o.defaultQueryOptions(t);(x=(w=o.getDefaultOptions().queries)==null?void 0:w._experimental_beforeQuery)==null||x.call(w,l),l._optimisticResults=r?"isRestoring":"optimistic",JS(l),QS(l,s),ZS(s);const u=!o.getQueryCache().get(l.queryHash),[d]=O.useState(()=>new e(o,l)),m=d.getOptimisticResult(l),y=!r&&t.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(S=>{const V=y?d.subscribe(Tn.batchCalls(S)):hr;return d.updateResult(),V},[d,y]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),O.useEffect(()=>{d.setOptions(l)},[l,d]),eC(l,m))throw Ew(l,d,s);if(YS({result:m,errorResetBoundary:s,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw m.error;if((N=(E=o.getDefaultOptions().queries)==null?void 0:E._experimental_afterQuery)==null||N.call(E,l,m),l.experimental_prefetchInRender&&!Ta&&XS(m,r)){const S=u?Ew(l,d,s):(I=o.getQueryCache().get(l.queryHash))==null?void 0:I.promise;S==null||S.catch(hr).finally(()=>{d.updateResult()})}return l.notifyOnChangeProps?m:d.trackResult(m)}function nC(t,e){return tC(t,OS)}var zh={},ig={exports:{}},ur={},og={exports:{}},ag={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw;function rC(){return Tw||(Tw=1,(function(t){function e(X,pe){var de=X.length;X.push(pe);e:for(;0<de;){var $=de-1>>>1,ee=X[$];if(0<s(ee,pe))X[$]=pe,X[de]=ee,de=$;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var pe=X[0],de=X.pop();if(de!==pe){X[0]=de;e:for(var $=0,ee=X.length,ce=ee>>>1;$<ce;){var be=2*($+1)-1,De=X[be],Re=be+1,Te=X[Re];if(0>s(De,de))Re<ee&&0>s(Te,De)?(X[$]=Te,X[Re]=de,$=Re):(X[$]=De,X[be]=de,$=be);else if(Re<ee&&0>s(Te,de))X[$]=Te,X[Re]=de,$=Re;else break e}}return pe}function s(X,pe){var de=X.sortIndex-pe.sortIndex;return de!==0?de:X.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],m=[],y=1,w=null,x=3,E=!1,N=!1,I=!1,S=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(X){for(var pe=n(m);pe!==null;){if(pe.callback===null)r(m);else if(pe.startTime<=X)r(m),pe.sortIndex=pe.expirationTime,e(d,pe);else break;pe=n(m)}}function G(X){if(I=!1,U(X),!N)if(n(d)!==null)N=!0,Qe(Z);else{var pe=n(m);pe!==null&&Ne(G,pe.startTime-X)}}function Z(X,pe){N=!1,I&&(I=!1,V(k),k=-1),E=!0;var de=x;try{for(U(pe),w=n(d);w!==null&&(!(w.expirationTime>pe)||X&&!D());){var $=w.callback;if(typeof $=="function"){w.callback=null,x=w.priorityLevel;var ee=$(w.expirationTime<=pe);pe=t.unstable_now(),typeof ee=="function"?w.callback=ee:w===n(d)&&r(d),U(pe)}else r(d);w=n(d)}if(w!==null)var ce=!0;else{var be=n(m);be!==null&&Ne(G,be.startTime-pe),ce=!1}return ce}finally{w=null,x=de,E=!1}}var K=!1,A=null,k=-1,R=5,P=-1;function D(){return!(t.unstable_now()-P<R)}function M(){if(A!==null){var X=t.unstable_now();P=X;var pe=!0;try{pe=A(!0,X)}finally{pe?j():(K=!1,A=null)}}else K=!1}var j;if(typeof W=="function")j=function(){W(M)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,nt=Ce.port2;Ce.port1.onmessage=M,j=function(){nt.postMessage(null)}}else j=function(){S(M,0)};function Qe(X){A=X,K||(K=!0,j())}function Ne(X,pe){k=S(function(){X(t.unstable_now())},pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){N||E||(N=!0,Qe(Z))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(X){switch(x){case 1:case 2:case 3:var pe=3;break;default:pe=x}var de=x;x=pe;try{return X()}finally{x=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,pe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var de=x;x=X;try{return pe()}finally{x=de}},t.unstable_scheduleCallback=function(X,pe,de){var $=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?$+de:$):de=$,X){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=de+ee,X={id:y++,callback:pe,priorityLevel:X,startTime:de,expirationTime:ee,sortIndex:-1},de>$?(X.sortIndex=de,e(m,X),n(d)===null&&X===n(m)&&(I?(V(k),k=-1):I=!0,Ne(G,de-$))):(X.sortIndex=ee,e(d,X),N||E||(N=!0,Qe(Z))),X},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(X){var pe=x;return function(){var de=x;x=pe;try{return X.apply(this,arguments)}finally{x=de}}}})(ag)),ag}var Iw;function sC(){return Iw||(Iw=1,og.exports=rC()),og.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function iC(){if(Sw)return ur;Sw=1;var t=Iy(),e=sC();function n(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function x(i){return d.call(w,i)?!0:d.call(y,i)?!1:m.test(i)?w[i]=!0:(y[i]=!0,!1)}function E(i,a,c,f){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function N(i,a,c,f){if(a===null||typeof a>"u"||E(i,a,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function I(i,a,c,f,g,_,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=T}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){S[i]=new I(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];S[a]=new I(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){S[i]=new I(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){S[i]=new I(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){S[i]=new I(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){S[i]=new I(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){S[i]=new I(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){S[i]=new I(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){S[i]=new I(i,5,!1,i.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function W(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(V,W);S[a]=new I(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(V,W);S[a]=new I(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(V,W);S[a]=new I(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){S[i]=new I(i,1,!1,i.toLowerCase(),null,!1,!1)}),S.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){S[i]=new I(i,1,!1,i.toLowerCase(),null,!0,!0)});function U(i,a,c,f){var g=S.hasOwnProperty(a)?S[a]:null;(g!==null?g.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(N(a,c,g,f)&&(c=null),f||g===null?x(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):g.mustUseProperty?i[g.propertyName]=c===null?g.type===3?!1:"":c:(a=g.attributeName,f=g.attributeNamespace,c===null?i.removeAttribute(a):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,f?i.setAttributeNS(f,a,c):i.setAttribute(a,c))))}var G=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),K=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),nt=Symbol.for("react.memo"),Qe=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),X=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var de=Object.assign,$;function ee(i){if($===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);$=a&&a[1]||""}return`
`+$+i}var ce=!1;function be(i,a){if(!i||ce)return"";ce=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var f=Y}Reflect.construct(i,[],a)}else{try{a.call()}catch(Y){f=Y}i.call(a.prototype)}else{try{throw Error()}catch(Y){f=Y}i()}}catch(Y){if(Y&&f&&typeof Y.stack=="string"){for(var g=Y.stack.split(`
`),_=f.stack.split(`
`),T=g.length-1,L=_.length-1;1<=T&&0<=L&&g[T]!==_[L];)L--;for(;1<=T&&0<=L;T--,L--)if(g[T]!==_[L]){if(T!==1||L!==1)do if(T--,L--,0>L||g[T]!==_[L]){var F=`
`+g[T].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=T&&0<=L);break}}}finally{ce=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?ee(i):""}function De(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=be(i.type,!1),i;case 11:return i=be(i.type.render,!1),i;case 1:return i=be(i.type,!0),i;default:return""}}function Re(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case K:return"Portal";case R:return"Profiler";case k:return"StrictMode";case j:return"Suspense";case Ce:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case D:return(i.displayName||"Context")+".Consumer";case P:return(i._context.displayName||"Context")+".Provider";case M:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case nt:return a=i.displayName||null,a!==null?a:Re(i.type)||"Memo";case Qe:a=i._payload,i=i._init;try{return Re(i(a))}catch{}}return null}function Te(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(a);case 8:return a===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ue(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ne(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function he(i){var a=ne(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,_=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,_.call(this,T)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function rt(i){i._valueTracker||(i._valueTracker=he(i))}function pt(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=ne(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function yn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function vn(i,a){var c=a.checked;return de({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function mr(i,a){var c=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;c=Ue(a.value!=null?a.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Cr(i,a){a=a.checked,a!=null&&U(i,"checked",a,!1)}function Ei(i,a){Cr(i,a);var c=Ue(a.value),f=a.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?ys(i,a.type,c):a.hasOwnProperty("defaultValue")&&ys(i,a.type,Ue(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Oo(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function ys(i,a,c){(a!=="number"||yn(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var an=Array.isArray;function er(i,a,c,f){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+Ue(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function vs(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return de({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Bs(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(n(92));if(an(c)){if(1<c.length)throw Error(n(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:Ue(c)}}function $s(i,a){var c=Ue(a.value),f=Ue(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function Lo(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Bt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Bt(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Nn,Kr=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,f,g){MSApp.execUnsafeLocalFunction(function(){return i(a,c,f,g)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Nn=Nn||document.createElement("div"),Nn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Nn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Gr(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var Rn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_s=["Webkit","ms","Moz","O"];Object.keys(Rn).forEach(function(i){_s.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Rn[a]=Rn[i]})});function Mo(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||Rn.hasOwnProperty(i)&&Rn[i]?(""+a).trim():a+"px"}function Vo(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var f=c.indexOf("--")===0,g=Mo(c,a[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,g):i[c]=g}}var Ws=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ti(i,a){if(a){if(Ws[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Fo(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ws=null;function Ii(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Si=null,tr=null,gt=null;function qt(i){if(i=Hc(i)){if(typeof Si!="function")throw Error(n(280));var a=i.stateNode;a&&(a=Xd(a),Si(i.stateNode,i.type,a))}}function It(i){tr?gt?gt.push(i):gt=[i]:tr=i}function nr(){if(tr){var i=tr,a=gt;if(gt=tr=null,qt(i),a)for(i=0;i<a.length;i++)qt(a[i])}}function Ht(i,a){return i(a)}function Xt(){}var Kt=!1;function Ar(i,a,c){if(Kt)return i(a,c);Kt=!0;try{return Ht(i,a,c)}finally{Kt=!1,(tr!==null||gt!==null)&&(Xt(),nr())}}function qe(i,a){var c=i.stateNode;if(c===null)return null;var f=Xd(c);if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,a,typeof c));return c}var Un=!1;if(u)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Un=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch{Un=!1}function _n(i,a,c,f,g,_,T,L,F){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(c,Y)}catch(ie){this.onError(ie)}}var gr=!1,Nr=null,Gt=!1,Qr=null,zo={onError:function(i){gr=!0,Nr=i}};function za(i,a,c,f,g,_,T,L,F){gr=!1,Nr=null,_n.apply(zo,arguments)}function Ed(i,a,c,f,g,_,T,L,F){if(za.apply(this,arguments),gr){if(gr){var Y=Nr;gr=!1,Nr=null}else throw Error(n(198));Gt||(Gt=!0,Qr=Y)}}function Zr(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function Uo(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Yr(i){if(Zr(i)!==i)throw Error(n(188))}function Td(i){var a=i.alternate;if(!a){if(a=Zr(i),a===null)throw Error(n(188));return a!==i?null:i}for(var c=i,f=a;;){var g=c.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===c)return Yr(g),i;if(_===f)return Yr(g),a;_=_.sibling}throw Error(n(188))}if(c.return!==f.return)c=g,f=_;else{for(var T=!1,L=g.child;L;){if(L===c){T=!0,c=g,f=_;break}if(L===f){T=!0,f=g,c=_;break}L=L.sibling}if(!T){for(L=_.child;L;){if(L===c){T=!0,c=_,f=g;break}if(L===f){T=!0,f=_,c=g;break}L=L.sibling}if(!T)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:a}function Sc(i){return i=Td(i),i!==null?Ua(i):null}function Ua(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Ua(i);if(a!==null)return a;i=i.sibling}return null}var Ba=e.unstable_scheduleCallback,Cc=e.unstable_cancelCallback,Id=e.unstable_shouldYield,Rp=e.unstable_requestPaint,_t=e.unstable_now,Sd=e.unstable_getCurrentPriorityLevel,Bo=e.unstable_ImmediatePriority,Ci=e.unstable_UserBlockingPriority,Rr=e.unstable_NormalPriority,Ac=e.unstable_LowPriority,Cd=e.unstable_IdlePriority,$o=null,yr=null;function Ad(i){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot($o,i,void 0,(i.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:Rd,Nc=Math.log,Nd=Math.LN2;function Rd(i){return i>>>=0,i===0?32:31-(Nc(i)/Nd|0)|0}var $a=64,Wa=4194304;function Ai(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Wo(i,a){var c=i.pendingLanes;if(c===0)return 0;var f=0,g=i.suspendedLanes,_=i.pingedLanes,T=c&268435455;if(T!==0){var L=T&~g;L!==0?f=Ai(L):(_&=T,_!==0&&(f=Ai(_)))}else T=c&~g,T!==0?f=Ai(T):_!==0&&(f=Ai(_));if(f===0)return 0;if(a!==0&&a!==f&&(a&g)===0&&(g=f&-f,_=a&-a,g>=_||g===16&&(_&4194240)!==0))return a;if((f&4)!==0&&(f|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)c=31-Bn(a),g=1<<c,f|=i[c],a&=~g;return f}function Pp(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qs(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes;0<_;){var T=31-Bn(_),L=1<<T,F=g[T];F===-1?((L&c)===0||(L&f)!==0)&&(g[T]=Pp(L,a)):F<=a&&(i.expiredLanes|=L),_&=~L}}function vr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function qo(){var i=$a;return $a<<=1,($a&4194240)===0&&($a=64),i}function Ni(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Ri(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Bn(a),i[a]=c}function yt(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var g=31-Bn(c),_=1<<g;a[g]=0,f[g]=-1,i[g]=-1,c&=~_}}function Pi(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-Bn(c),g=1<<f;g&a|i[f]&a&&(i[f]|=a),c&=~g}}var Ye=0;function ji(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Pd,qa,jd,Dd,Od,Rc=!1,bs=[],wn=null,Jr=null,Xr=null,Di=new Map,Pr=new Map,xs=[],jp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ld(i,a){switch(i){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Di.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pr.delete(a.pointerId)}}function rr(i,a,c,f,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},a!==null&&(a=Hc(a),a!==null&&qa(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function Dp(i,a,c,f,g){switch(a){case"focusin":return wn=rr(wn,i,a,c,f,g),!0;case"dragenter":return Jr=rr(Jr,i,a,c,f,g),!0;case"mouseover":return Xr=rr(Xr,i,a,c,f,g),!0;case"pointerover":var _=g.pointerId;return Di.set(_,rr(Di.get(_)||null,i,a,c,f,g)),!0;case"gotpointercapture":return _=g.pointerId,Pr.set(_,rr(Pr.get(_)||null,i,a,c,f,g)),!0}return!1}function Md(i){var a=Zo(i.target);if(a!==null){var c=Zr(a);if(c!==null){if(a=c.tag,a===13){if(a=Uo(c),a!==null){i.blockedOn=a,Od(i.priority,function(){jd(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Hs(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Ha(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);ws=f,c.target.dispatchEvent(f),ws=null}else return a=Hc(c),a!==null&&qa(a),i.blockedOn=c,!1;a.shift()}return!0}function Ho(i,a,c){Hs(i)&&c.delete(a)}function Vd(){Rc=!1,wn!==null&&Hs(wn)&&(wn=null),Jr!==null&&Hs(Jr)&&(Jr=null),Xr!==null&&Hs(Xr)&&(Xr=null),Di.forEach(Ho),Pr.forEach(Ho)}function es(i,a){i.blockedOn===a&&(i.blockedOn=null,Rc||(Rc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vd)))}function ts(i){function a(g){return es(g,i)}if(0<bs.length){es(bs[0],i);for(var c=1;c<bs.length;c++){var f=bs[c];f.blockedOn===i&&(f.blockedOn=null)}}for(wn!==null&&es(wn,i),Jr!==null&&es(Jr,i),Xr!==null&&es(Xr,i),Di.forEach(a),Pr.forEach(a),c=0;c<xs.length;c++)f=xs[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<xs.length&&(c=xs[0],c.blockedOn===null);)Md(c),c.blockedOn===null&&xs.shift()}var Ks=G.ReactCurrentBatchConfig,Oi=!0;function St(i,a,c,f){var g=Ye,_=Ks.transition;Ks.transition=null;try{Ye=1,Pc(i,a,c,f)}finally{Ye=g,Ks.transition=_}}function Op(i,a,c,f){var g=Ye,_=Ks.transition;Ks.transition=null;try{Ye=4,Pc(i,a,c,f)}finally{Ye=g,Ks.transition=_}}function Pc(i,a,c,f){if(Oi){var g=Ha(i,a,c,f);if(g===null)Hp(i,a,f,Ko,c),Ld(i,f);else if(Dp(g,i,a,c,f))f.stopPropagation();else if(Ld(i,f),a&4&&-1<jp.indexOf(i)){for(;g!==null;){var _=Hc(g);if(_!==null&&Pd(_),_=Ha(i,a,c,f),_===null&&Hp(i,a,f,Ko,c),_===g)break;g=_}g!==null&&f.stopPropagation()}else Hp(i,a,f,null,c)}}var Ko=null;function Ha(i,a,c,f){if(Ko=null,i=Ii(f),i=Zo(i),i!==null)if(a=Zr(i),a===null)i=null;else if(c=a.tag,c===13){if(i=Uo(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Ko=i,null}function jc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sd()){case Bo:return 1;case Ci:return 4;case Rr:case Ac:return 16;case Cd:return 536870912;default:return 16}default:return 16}}var _r=null,Ka=null,sr=null;function Dc(){if(sr)return sr;var i,a=Ka,c=a.length,f,g="value"in _r?_r.value:_r.textContent,_=g.length;for(i=0;i<c&&a[i]===g[i];i++);var T=c-i;for(f=1;f<=T&&a[c-f]===g[_-f];f++);return sr=g.slice(i,1<f?1-f:void 0)}function Ga(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function ks(){return!0}function Oc(){return!1}function bn(i){function a(c,f,g,_,T){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ks:Oc,this.isPropagationStopped=Oc,this}return de(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),a}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=bn(ns),Es=de({},ns,{view:0,detail:0}),Lp=bn(Es),Za,Gs,Li,Go=de({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Li&&(Li&&i.type==="mousemove"?(Za=i.screenX-Li.screenX,Gs=i.screenY-Li.screenY):Gs=Za=0,Li=i),Za)},movementY:function(i){return"movementY"in i?i.movementY:Gs}}),Ya=bn(Go),Lc=de({},Go,{dataTransfer:0}),Fd=bn(Lc),Ja=de({},Es,{relatedTarget:0}),Xa=bn(Ja),zd=de({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),Qs=bn(zd),Ud=de({},ns,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Bd=bn(Ud),$d=de({},ns,{data:0}),Mc=bn($d),el={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Wd[i])?!!a[i]:!1}function Ts(){return qd}var h=de({},Es,{key:function(i){if(i.key){var a=el[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Ga(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?$n[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(i){return i.type==="keypress"?Ga(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ga(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=bn(h),b=de({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C=bn(b),q=de({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),J=bn(q),ue=de({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),dt=bn(ue),en=de({},Go,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),st=bn(en),ln=[9,13,27,32],Qt=u&&"CompositionEvent"in window,jr=null;u&&"documentMode"in document&&(jr=document.documentMode);var wr=u&&"TextEvent"in window&&!jr,Qo=u&&(!Qt||jr&&8<jr&&11>=jr),tl=" ",rv=!1;function sv(i,a){switch(i){case"keyup":return ln.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var nl=!1;function d1(i,a){switch(i){case"compositionend":return iv(a);case"keypress":return a.which!==32?null:(rv=!0,tl);case"textInput":return i=a.data,i===tl&&rv?null:i;default:return null}}function h1(i,a){if(nl)return i==="compositionend"||!Qt&&sv(i,a)?(i=Dc(),sr=Ka=_r=null,nl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Qo&&a.locale!=="ko"?null:a.data;default:return null}}var f1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ov(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!f1[i.type]:a==="textarea"}function av(i,a,c,f){It(f),a=Zd(a,"onChange"),0<a.length&&(c=new Qa("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var Vc=null,Fc=null;function p1(i){Tv(i,0)}function Hd(i){var a=al(i);if(pt(a))return i}function m1(i,a){if(i==="change")return a}var lv=!1;if(u){var Mp;if(u){var Vp="oninput"in document;if(!Vp){var cv=document.createElement("div");cv.setAttribute("oninput","return;"),Vp=typeof cv.oninput=="function"}Mp=Vp}else Mp=!1;lv=Mp&&(!document.documentMode||9<document.documentMode)}function uv(){Vc&&(Vc.detachEvent("onpropertychange",dv),Fc=Vc=null)}function dv(i){if(i.propertyName==="value"&&Hd(Fc)){var a=[];av(a,Fc,i,Ii(i)),Ar(p1,a)}}function g1(i,a,c){i==="focusin"?(uv(),Vc=a,Fc=c,Vc.attachEvent("onpropertychange",dv)):i==="focusout"&&uv()}function y1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hd(Fc)}function v1(i,a){if(i==="click")return Hd(a)}function _1(i,a){if(i==="input"||i==="change")return Hd(a)}function w1(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var rs=typeof Object.is=="function"?Object.is:w1;function zc(i,a){if(rs(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!d.call(a,g)||!rs(i[g],a[g]))return!1}return!0}function hv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function fv(i,a){var c=hv(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=hv(c)}}function pv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?pv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function mv(){for(var i=window,a=yn();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=yn(i.document)}return a}function Fp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function b1(i){var a=mv(),c=i.focusedElem,f=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&pv(c.ownerDocument.documentElement,c)){if(f!==null&&Fp(c)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var g=c.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!i.extend&&_>f&&(g=f,f=_,_=g),g=fv(c,_);var T=fv(c,f);g&&T&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),i.removeAllRanges(),_>f?(i.addRange(a),i.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var x1=u&&"documentMode"in document&&11>=document.documentMode,rl=null,zp=null,Uc=null,Up=!1;function gv(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Up||rl==null||rl!==yn(f)||(f=rl,"selectionStart"in f&&Fp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Uc&&zc(Uc,f)||(Uc=f,f=Zd(zp,"onSelect"),0<f.length&&(a=new Qa("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=rl)))}function Kd(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var sl={animationend:Kd("Animation","AnimationEnd"),animationiteration:Kd("Animation","AnimationIteration"),animationstart:Kd("Animation","AnimationStart"),transitionend:Kd("Transition","TransitionEnd")},Bp={},yv={};u&&(yv=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function Gd(i){if(Bp[i])return Bp[i];if(!sl[i])return i;var a=sl[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in yv)return Bp[i]=a[c];return i}var vv=Gd("animationend"),_v=Gd("animationiteration"),wv=Gd("animationstart"),bv=Gd("transitionend"),xv=new Map,kv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(i,a){xv.set(i,a),o(a,[i])}for(var $p=0;$p<kv.length;$p++){var Wp=kv[$p],k1=Wp.toLowerCase(),E1=Wp[0].toUpperCase()+Wp.slice(1);Mi(k1,"on"+E1)}Mi(vv,"onAnimationEnd"),Mi(_v,"onAnimationIteration"),Mi(wv,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(bv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bc));function Ev(i,a,c){var f=i.type||"unknown-event";i.currentTarget=c,Ed(f,a,void 0,i),i.currentTarget=null}function Tv(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var _=void 0;if(a)for(var T=f.length-1;0<=T;T--){var L=f[T],F=L.instance,Y=L.currentTarget;if(L=L.listener,F!==_&&g.isPropagationStopped())break e;Ev(g,L,Y),_=F}else for(T=0;T<f.length;T++){if(L=f[T],F=L.instance,Y=L.currentTarget,L=L.listener,F!==_&&g.isPropagationStopped())break e;Ev(g,L,Y),_=F}}}if(Gt)throw i=Qr,Gt=!1,Qr=null,i}function xt(i,a){var c=a[Jp];c===void 0&&(c=a[Jp]=new Set);var f=i+"__bubble";c.has(f)||(Iv(a,i,2,!1),c.add(f))}function qp(i,a,c){var f=0;a&&(f|=4),Iv(c,i,f,a)}var Qd="_reactListening"+Math.random().toString(36).slice(2);function $c(i){if(!i[Qd]){i[Qd]=!0,r.forEach(function(c){c!=="selectionchange"&&(T1.has(c)||qp(c,!1,i),qp(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Qd]||(a[Qd]=!0,qp("selectionchange",!1,a))}}function Iv(i,a,c,f){switch(jc(a)){case 1:var g=St;break;case 4:g=Op;break;default:g=Pc}c=g.bind(null,a,c,i),g=void 0,!Un||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function Hp(i,a,c,f,g){var _=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var L=f.stateNode.containerInfo;if(L===g||L.nodeType===8&&L.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;T=T.return}for(;L!==null;){if(T=Zo(L),T===null)return;if(F=T.tag,F===5||F===6){f=_=T;continue e}L=L.parentNode}}f=f.return}Ar(function(){var Y=_,ie=Ii(c),ae=[];e:{var se=xv.get(i);if(se!==void 0){var fe=Qa,ve=i;switch(i){case"keypress":if(Ga(c)===0)break e;case"keydown":case"keyup":fe=v;break;case"focusin":ve="focus",fe=Xa;break;case"focusout":ve="blur",fe=Xa;break;case"beforeblur":case"afterblur":fe=Xa;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Ya;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Fd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=J;break;case vv:case _v:case wv:fe=Qs;break;case bv:fe=dt;break;case"scroll":fe=Lp;break;case"wheel":fe=st;break;case"copy":case"cut":case"paste":fe=Bd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=C}var xe=(a&4)!==0,$t=!xe&&i==="scroll",H=xe?se!==null?se+"Capture":null:se;xe=[];for(var B=Y,Q;B!==null;){Q=B;var le=Q.stateNode;if(Q.tag===5&&le!==null&&(Q=le,H!==null&&(le=qe(B,H),le!=null&&xe.push(Wc(B,le,Q)))),$t)break;B=B.return}0<xe.length&&(se=new fe(se,ve,null,c,ie),ae.push({event:se,listeners:xe}))}}if((a&7)===0){e:{if(se=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",se&&c!==ws&&(ve=c.relatedTarget||c.fromElement)&&(Zo(ve)||ve[Zs]))break e;if((fe||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(ve=c.relatedTarget||c.toElement,fe=Y,ve=ve?Zo(ve):null,ve!==null&&($t=Zr(ve),ve!==$t||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(fe=null,ve=Y),fe!==ve)){if(xe=Ya,le="onMouseLeave",H="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(xe=C,le="onPointerLeave",H="onPointerEnter",B="pointer"),$t=fe==null?se:al(fe),Q=ve==null?se:al(ve),se=new xe(le,B+"leave",fe,c,ie),se.target=$t,se.relatedTarget=Q,le=null,Zo(ie)===Y&&(xe=new xe(H,B+"enter",ve,c,ie),xe.target=Q,xe.relatedTarget=$t,le=xe),$t=le,fe&&ve)t:{for(xe=fe,H=ve,B=0,Q=xe;Q;Q=il(Q))B++;for(Q=0,le=H;le;le=il(le))Q++;for(;0<B-Q;)xe=il(xe),B--;for(;0<Q-B;)H=il(H),Q--;for(;B--;){if(xe===H||H!==null&&xe===H.alternate)break t;xe=il(xe),H=il(H)}xe=null}else xe=null;fe!==null&&Sv(ae,se,fe,xe,!1),ve!==null&&$t!==null&&Sv(ae,$t,ve,xe,!0)}}e:{if(se=Y?al(Y):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var Ee=m1;else if(ov(se))if(lv)Ee=_1;else{Ee=y1;var Pe=g1}else(fe=se.nodeName)&&fe.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Ee=v1);if(Ee&&(Ee=Ee(i,Y))){av(ae,Ee,c,ie);break e}Pe&&Pe(i,se,Y),i==="focusout"&&(Pe=se._wrapperState)&&Pe.controlled&&se.type==="number"&&ys(se,"number",se.value)}switch(Pe=Y?al(Y):window,i){case"focusin":(ov(Pe)||Pe.contentEditable==="true")&&(rl=Pe,zp=Y,Uc=null);break;case"focusout":Uc=zp=rl=null;break;case"mousedown":Up=!0;break;case"contextmenu":case"mouseup":case"dragend":Up=!1,gv(ae,c,ie);break;case"selectionchange":if(x1)break;case"keydown":case"keyup":gv(ae,c,ie)}var je;if(Qt)e:{switch(i){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else nl?sv(i,c)&&(Ve="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(Qo&&c.locale!=="ko"&&(nl||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&nl&&(je=Dc()):(_r=ie,Ka="value"in _r?_r.value:_r.textContent,nl=!0)),Pe=Zd(Y,Ve),0<Pe.length&&(Ve=new Mc(Ve,i,null,c,ie),ae.push({event:Ve,listeners:Pe}),je?Ve.data=je:(je=iv(c),je!==null&&(Ve.data=je)))),(je=wr?d1(i,c):h1(i,c))&&(Y=Zd(Y,"onBeforeInput"),0<Y.length&&(ie=new Mc("onBeforeInput","beforeinput",null,c,ie),ae.push({event:ie,listeners:Y}),ie.data=je))}Tv(ae,a)})}function Wc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function Zd(i,a){for(var c=a+"Capture",f=[];i!==null;){var g=i,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=qe(i,c),_!=null&&f.unshift(Wc(i,_,g)),_=qe(i,a),_!=null&&f.push(Wc(i,_,g))),i=i.return}return f}function il(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Sv(i,a,c,f,g){for(var _=a._reactName,T=[];c!==null&&c!==f;){var L=c,F=L.alternate,Y=L.stateNode;if(F!==null&&F===f)break;L.tag===5&&Y!==null&&(L=Y,g?(F=qe(c,_),F!=null&&T.unshift(Wc(c,F,L))):g||(F=qe(c,_),F!=null&&T.push(Wc(c,F,L)))),c=c.return}T.length!==0&&i.push({event:a,listeners:T})}var I1=/\r\n?/g,S1=/\u0000|\uFFFD/g;function Cv(i){return(typeof i=="string"?i:""+i).replace(I1,`
`).replace(S1,"")}function Yd(i,a,c){if(a=Cv(a),Cv(i)!==a&&c)throw Error(n(425))}function Jd(){}var Kp=null,Gp=null;function Qp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Zp=typeof setTimeout=="function"?setTimeout:void 0,C1=typeof clearTimeout=="function"?clearTimeout:void 0,Av=typeof Promise=="function"?Promise:void 0,A1=typeof queueMicrotask=="function"?queueMicrotask:typeof Av<"u"?function(i){return Av.resolve(null).then(i).catch(N1)}:Zp;function N1(i){setTimeout(function(){throw i})}function Yp(i,a){var c=a,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(f===0){i.removeChild(g),ts(a);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=g}while(c);ts(a)}function Vi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Nv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var ol=Math.random().toString(36).slice(2),Is="__reactFiber$"+ol,qc="__reactProps$"+ol,Zs="__reactContainer$"+ol,Jp="__reactEvents$"+ol,R1="__reactListeners$"+ol,P1="__reactHandles$"+ol;function Zo(i){var a=i[Is];if(a)return a;for(var c=i.parentNode;c;){if(a=c[Zs]||c[Is]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Nv(i);i!==null;){if(c=i[Is])return c;i=Nv(i)}return a}i=c,c=i.parentNode}return null}function Hc(i){return i=i[Is]||i[Zs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function al(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Xd(i){return i[qc]||null}var Xp=[],ll=-1;function Fi(i){return{current:i}}function kt(i){0>ll||(i.current=Xp[ll],Xp[ll]=null,ll--)}function wt(i,a){ll++,Xp[ll]=i.current,i.current=a}var zi={},Pn=Fi(zi),ir=Fi(!1),Yo=zi;function cl(i,a){var c=i.type.contextTypes;if(!c)return zi;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in c)g[_]=a[_];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=g),g}function or(i){return i=i.childContextTypes,i!=null}function eh(){kt(ir),kt(Pn)}function Rv(i,a,c){if(Pn.current!==zi)throw Error(n(168));wt(Pn,a),wt(ir,c)}function Pv(i,a,c){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(n(108,Te(i)||"Unknown",g));return de({},c,f)}function th(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||zi,Yo=Pn.current,wt(Pn,i),wt(ir,ir.current),!0}function jv(i,a,c){var f=i.stateNode;if(!f)throw Error(n(169));c?(i=Pv(i,a,Yo),f.__reactInternalMemoizedMergedChildContext=i,kt(ir),kt(Pn),wt(Pn,i)):kt(ir),wt(ir,c)}var Ys=null,nh=!1,em=!1;function Dv(i){Ys===null?Ys=[i]:Ys.push(i)}function j1(i){nh=!0,Dv(i)}function Ui(){if(!em&&Ys!==null){em=!0;var i=0,a=Ye;try{var c=Ys;for(Ye=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}Ys=null,nh=!1}catch(g){throw Ys!==null&&(Ys=Ys.slice(i+1)),Ba(Bo,Ui),g}finally{Ye=a,em=!1}}return null}var ul=[],dl=0,rh=null,sh=0,Dr=[],Or=0,Jo=null,Js=1,Xs="";function Xo(i,a){ul[dl++]=sh,ul[dl++]=rh,rh=i,sh=a}function Ov(i,a,c){Dr[Or++]=Js,Dr[Or++]=Xs,Dr[Or++]=Jo,Jo=i;var f=Js;i=Xs;var g=32-Bn(f)-1;f&=~(1<<g),c+=1;var _=32-Bn(a)+g;if(30<_){var T=g-g%5;_=(f&(1<<T)-1).toString(32),f>>=T,g-=T,Js=1<<32-Bn(a)+g|c<<g|f,Xs=_+i}else Js=1<<_|c<<g|f,Xs=i}function tm(i){i.return!==null&&(Xo(i,1),Ov(i,1,0))}function nm(i){for(;i===rh;)rh=ul[--dl],ul[dl]=null,sh=ul[--dl],ul[dl]=null;for(;i===Jo;)Jo=Dr[--Or],Dr[Or]=null,Xs=Dr[--Or],Dr[Or]=null,Js=Dr[--Or],Dr[Or]=null}var br=null,xr=null,Ct=!1,ss=null;function Lv(i,a){var c=Fr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function Mv(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,br=i,xr=Vi(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,br=i,xr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=Jo!==null?{id:Js,overflow:Xs}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=Fr(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,br=i,xr=null,!0):!1;default:return!1}}function rm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function sm(i){if(Ct){var a=xr;if(a){var c=a;if(!Mv(i,a)){if(rm(i))throw Error(n(418));a=Vi(c.nextSibling);var f=br;a&&Mv(i,a)?Lv(f,c):(i.flags=i.flags&-4097|2,Ct=!1,br=i)}}else{if(rm(i))throw Error(n(418));i.flags=i.flags&-4097|2,Ct=!1,br=i}}}function Vv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;br=i}function ih(i){if(i!==br)return!1;if(!Ct)return Vv(i),Ct=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Qp(i.type,i.memoizedProps)),a&&(a=xr)){if(rm(i))throw Fv(),Error(n(418));for(;a;)Lv(i,a),a=Vi(a.nextSibling)}if(Vv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){xr=Vi(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}xr=null}}else xr=br?Vi(i.stateNode.nextSibling):null;return!0}function Fv(){for(var i=xr;i;)i=Vi(i.nextSibling)}function hl(){xr=br=null,Ct=!1}function im(i){ss===null?ss=[i]:ss.push(i)}var D1=G.ReactCurrentBatchConfig;function Kc(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var f=c.stateNode}if(!f)throw Error(n(147,i));var g=f,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(T){var L=g.refs;T===null?delete L[_]:L[_]=T},a._stringRef=_,a)}if(typeof i!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,i))}return i}function oh(i,a){throw i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function zv(i){var a=i._init;return a(i._payload)}function Uv(i){function a(H,B){if(i){var Q=H.deletions;Q===null?(H.deletions=[B],H.flags|=16):Q.push(B)}}function c(H,B){if(!i)return null;for(;B!==null;)a(H,B),B=B.sibling;return null}function f(H,B){for(H=new Map;B!==null;)B.key!==null?H.set(B.key,B):H.set(B.index,B),B=B.sibling;return H}function g(H,B){return H=Qi(H,B),H.index=0,H.sibling=null,H}function _(H,B,Q){return H.index=Q,i?(Q=H.alternate,Q!==null?(Q=Q.index,Q<B?(H.flags|=2,B):Q):(H.flags|=2,B)):(H.flags|=1048576,B)}function T(H){return i&&H.alternate===null&&(H.flags|=2),H}function L(H,B,Q,le){return B===null||B.tag!==6?(B=Zm(Q,H.mode,le),B.return=H,B):(B=g(B,Q),B.return=H,B)}function F(H,B,Q,le){var Ee=Q.type;return Ee===A?ie(H,B,Q.props.children,le,Q.key):B!==null&&(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Qe&&zv(Ee)===B.type)?(le=g(B,Q.props),le.ref=Kc(H,B,Q),le.return=H,le):(le=Nh(Q.type,Q.key,Q.props,null,H.mode,le),le.ref=Kc(H,B,Q),le.return=H,le)}function Y(H,B,Q,le){return B===null||B.tag!==4||B.stateNode.containerInfo!==Q.containerInfo||B.stateNode.implementation!==Q.implementation?(B=Ym(Q,H.mode,le),B.return=H,B):(B=g(B,Q.children||[]),B.return=H,B)}function ie(H,B,Q,le,Ee){return B===null||B.tag!==7?(B=aa(Q,H.mode,le,Ee),B.return=H,B):(B=g(B,Q),B.return=H,B)}function ae(H,B,Q){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Zm(""+B,H.mode,Q),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Z:return Q=Nh(B.type,B.key,B.props,null,H.mode,Q),Q.ref=Kc(H,null,B),Q.return=H,Q;case K:return B=Ym(B,H.mode,Q),B.return=H,B;case Qe:var le=B._init;return ae(H,le(B._payload),Q)}if(an(B)||pe(B))return B=aa(B,H.mode,Q,null),B.return=H,B;oh(H,B)}return null}function se(H,B,Q,le){var Ee=B!==null?B.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Ee!==null?null:L(H,B,""+Q,le);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Z:return Q.key===Ee?F(H,B,Q,le):null;case K:return Q.key===Ee?Y(H,B,Q,le):null;case Qe:return Ee=Q._init,se(H,B,Ee(Q._payload),le)}if(an(Q)||pe(Q))return Ee!==null?null:ie(H,B,Q,le,null);oh(H,Q)}return null}function fe(H,B,Q,le,Ee){if(typeof le=="string"&&le!==""||typeof le=="number")return H=H.get(Q)||null,L(B,H,""+le,Ee);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case Z:return H=H.get(le.key===null?Q:le.key)||null,F(B,H,le,Ee);case K:return H=H.get(le.key===null?Q:le.key)||null,Y(B,H,le,Ee);case Qe:var Pe=le._init;return fe(H,B,Q,Pe(le._payload),Ee)}if(an(le)||pe(le))return H=H.get(Q)||null,ie(B,H,le,Ee,null);oh(B,le)}return null}function ve(H,B,Q,le){for(var Ee=null,Pe=null,je=B,Ve=B=0,dn=null;je!==null&&Ve<Q.length;Ve++){je.index>Ve?(dn=je,je=null):dn=je.sibling;var lt=se(H,je,Q[Ve],le);if(lt===null){je===null&&(je=dn);break}i&&je&&lt.alternate===null&&a(H,je),B=_(lt,B,Ve),Pe===null?Ee=lt:Pe.sibling=lt,Pe=lt,je=dn}if(Ve===Q.length)return c(H,je),Ct&&Xo(H,Ve),Ee;if(je===null){for(;Ve<Q.length;Ve++)je=ae(H,Q[Ve],le),je!==null&&(B=_(je,B,Ve),Pe===null?Ee=je:Pe.sibling=je,Pe=je);return Ct&&Xo(H,Ve),Ee}for(je=f(H,je);Ve<Q.length;Ve++)dn=fe(je,H,Ve,Q[Ve],le),dn!==null&&(i&&dn.alternate!==null&&je.delete(dn.key===null?Ve:dn.key),B=_(dn,B,Ve),Pe===null?Ee=dn:Pe.sibling=dn,Pe=dn);return i&&je.forEach(function(Zi){return a(H,Zi)}),Ct&&Xo(H,Ve),Ee}function xe(H,B,Q,le){var Ee=pe(Q);if(typeof Ee!="function")throw Error(n(150));if(Q=Ee.call(Q),Q==null)throw Error(n(151));for(var Pe=Ee=null,je=B,Ve=B=0,dn=null,lt=Q.next();je!==null&&!lt.done;Ve++,lt=Q.next()){je.index>Ve?(dn=je,je=null):dn=je.sibling;var Zi=se(H,je,lt.value,le);if(Zi===null){je===null&&(je=dn);break}i&&je&&Zi.alternate===null&&a(H,je),B=_(Zi,B,Ve),Pe===null?Ee=Zi:Pe.sibling=Zi,Pe=Zi,je=dn}if(lt.done)return c(H,je),Ct&&Xo(H,Ve),Ee;if(je===null){for(;!lt.done;Ve++,lt=Q.next())lt=ae(H,lt.value,le),lt!==null&&(B=_(lt,B,Ve),Pe===null?Ee=lt:Pe.sibling=lt,Pe=lt);return Ct&&Xo(H,Ve),Ee}for(je=f(H,je);!lt.done;Ve++,lt=Q.next())lt=fe(je,H,Ve,lt.value,le),lt!==null&&(i&&lt.alternate!==null&&je.delete(lt.key===null?Ve:lt.key),B=_(lt,B,Ve),Pe===null?Ee=lt:Pe.sibling=lt,Pe=lt);return i&&je.forEach(function(fS){return a(H,fS)}),Ct&&Xo(H,Ve),Ee}function $t(H,B,Q,le){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Z:e:{for(var Ee=Q.key,Pe=B;Pe!==null;){if(Pe.key===Ee){if(Ee=Q.type,Ee===A){if(Pe.tag===7){c(H,Pe.sibling),B=g(Pe,Q.props.children),B.return=H,H=B;break e}}else if(Pe.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Qe&&zv(Ee)===Pe.type){c(H,Pe.sibling),B=g(Pe,Q.props),B.ref=Kc(H,Pe,Q),B.return=H,H=B;break e}c(H,Pe);break}else a(H,Pe);Pe=Pe.sibling}Q.type===A?(B=aa(Q.props.children,H.mode,le,Q.key),B.return=H,H=B):(le=Nh(Q.type,Q.key,Q.props,null,H.mode,le),le.ref=Kc(H,B,Q),le.return=H,H=le)}return T(H);case K:e:{for(Pe=Q.key;B!==null;){if(B.key===Pe)if(B.tag===4&&B.stateNode.containerInfo===Q.containerInfo&&B.stateNode.implementation===Q.implementation){c(H,B.sibling),B=g(B,Q.children||[]),B.return=H,H=B;break e}else{c(H,B);break}else a(H,B);B=B.sibling}B=Ym(Q,H.mode,le),B.return=H,H=B}return T(H);case Qe:return Pe=Q._init,$t(H,B,Pe(Q._payload),le)}if(an(Q))return ve(H,B,Q,le);if(pe(Q))return xe(H,B,Q,le);oh(H,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,B!==null&&B.tag===6?(c(H,B.sibling),B=g(B,Q),B.return=H,H=B):(c(H,B),B=Zm(Q,H.mode,le),B.return=H,H=B),T(H)):c(H,B)}return $t}var fl=Uv(!0),Bv=Uv(!1),ah=Fi(null),lh=null,pl=null,om=null;function am(){om=pl=lh=null}function lm(i){var a=ah.current;kt(ah),i._currentValue=a}function cm(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function ml(i,a){lh=i,om=pl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(ar=!0),i.firstContext=null)}function Lr(i){var a=i._currentValue;if(om!==i)if(i={context:i,memoizedValue:a,next:null},pl===null){if(lh===null)throw Error(n(308));pl=i,lh.dependencies={lanes:0,firstContext:i}}else pl=pl.next=i;return a}var ea=null;function um(i){ea===null?ea=[i]:ea.push(i)}function $v(i,a,c,f){var g=a.interleaved;return g===null?(c.next=c,um(a)):(c.next=g.next,g.next=c),a.interleaved=c,ei(i,f)}function ei(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Bi=!1;function dm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wv(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ti(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function $i(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(at&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,ei(i,c)}return g=f.interleaved,g===null?(a.next=a,um(f)):(a.next=g.next,g.next=a),f.interleaved=a,ei(i,c)}function ch(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Pi(i,c)}}function qv(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var T={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?g=_=T:_=_.next=T,c=c.next}while(c!==null);_===null?g=_=a:_=_.next=a}else g=_=a;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function uh(i,a,c,f){var g=i.updateQueue;Bi=!1;var _=g.firstBaseUpdate,T=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var F=L,Y=F.next;F.next=null,T===null?_=Y:T.next=Y,T=F;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,L=ie.lastBaseUpdate,L!==T&&(L===null?ie.firstBaseUpdate=Y:L.next=Y,ie.lastBaseUpdate=F))}if(_!==null){var ae=g.baseState;T=0,ie=Y=F=null,L=_;do{var se=L.lane,fe=L.eventTime;if((f&se)===se){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var ve=i,xe=L;switch(se=a,fe=c,xe.tag){case 1:if(ve=xe.payload,typeof ve=="function"){ae=ve.call(fe,ae,se);break e}ae=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=xe.payload,se=typeof ve=="function"?ve.call(fe,ae,se):ve,se==null)break e;ae=de({},ae,se);break e;case 2:Bi=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,se=g.effects,se===null?g.effects=[L]:se.push(L))}else fe={eventTime:fe,lane:se,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ie===null?(Y=ie=fe,F=ae):ie=ie.next=fe,T|=se;if(L=L.next,L===null){if(L=g.shared.pending,L===null)break;se=L,L=se.next,se.next=null,g.lastBaseUpdate=se,g.shared.pending=null}}while(!0);if(ie===null&&(F=ae),g.baseState=F,g.firstBaseUpdate=Y,g.lastBaseUpdate=ie,a=g.shared.interleaved,a!==null){g=a;do T|=g.lane,g=g.next;while(g!==a)}else _===null&&(g.shared.lanes=0);ra|=T,i.lanes=T,i.memoizedState=ae}}function Hv(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],g=f.callback;if(g!==null){if(f.callback=null,f=c,typeof g!="function")throw Error(n(191,g));g.call(f)}}}var Gc={},Ss=Fi(Gc),Qc=Fi(Gc),Zc=Fi(Gc);function ta(i){if(i===Gc)throw Error(n(174));return i}function hm(i,a){switch(wt(Zc,a),wt(Qc,i),wt(Ss,Gc),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:vt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=vt(a,i)}kt(Ss),wt(Ss,a)}function gl(){kt(Ss),kt(Qc),kt(Zc)}function Kv(i){ta(Zc.current);var a=ta(Ss.current),c=vt(a,i.type);a!==c&&(wt(Qc,i),wt(Ss,c))}function fm(i){Qc.current===i&&(kt(Ss),kt(Qc))}var Pt=Fi(0);function dh(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var pm=[];function mm(){for(var i=0;i<pm.length;i++)pm[i]._workInProgressVersionPrimary=null;pm.length=0}var hh=G.ReactCurrentDispatcher,gm=G.ReactCurrentBatchConfig,na=0,jt=null,tn=null,cn=null,fh=!1,Yc=!1,Jc=0,O1=0;function jn(){throw Error(n(321))}function ym(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!rs(i[c],a[c]))return!1;return!0}function vm(i,a,c,f,g,_){if(na=_,jt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,hh.current=i===null||i.memoizedState===null?F1:z1,i=c(f,g),Yc){_=0;do{if(Yc=!1,Jc=0,25<=_)throw Error(n(301));_+=1,cn=tn=null,a.updateQueue=null,hh.current=U1,i=c(f,g)}while(Yc)}if(hh.current=gh,a=tn!==null&&tn.next!==null,na=0,cn=tn=jt=null,fh=!1,a)throw Error(n(300));return i}function _m(){var i=Jc!==0;return Jc=0,i}function Cs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?jt.memoizedState=cn=i:cn=cn.next=i,cn}function Mr(){if(tn===null){var i=jt.alternate;i=i!==null?i.memoizedState:null}else i=tn.next;var a=cn===null?jt.memoizedState:cn.next;if(a!==null)cn=a,tn=i;else{if(i===null)throw Error(n(310));tn=i,i={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},cn===null?jt.memoizedState=cn=i:cn=cn.next=i}return cn}function Xc(i,a){return typeof a=="function"?a(i):a}function wm(i){var a=Mr(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var f=tn,g=f.baseQueue,_=c.pending;if(_!==null){if(g!==null){var T=g.next;g.next=_.next,_.next=T}f.baseQueue=g=_,c.pending=null}if(g!==null){_=g.next,f=f.baseState;var L=T=null,F=null,Y=_;do{var ie=Y.lane;if((na&ie)===ie)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),f=Y.hasEagerState?Y.eagerState:i(f,Y.action);else{var ae={lane:ie,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(L=F=ae,T=f):F=F.next=ae,jt.lanes|=ie,ra|=ie}Y=Y.next}while(Y!==null&&Y!==_);F===null?T=f:F.next=L,rs(f,a.memoizedState)||(ar=!0),a.memoizedState=f,a.baseState=T,a.baseQueue=F,c.lastRenderedState=f}if(i=c.interleaved,i!==null){g=i;do _=g.lane,jt.lanes|=_,ra|=_,g=g.next;while(g!==i)}else g===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function bm(i){var a=Mr(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,_=a.memoizedState;if(g!==null){c.pending=null;var T=g=g.next;do _=i(_,T.action),T=T.next;while(T!==g);rs(_,a.memoizedState)||(ar=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),c.lastRenderedState=_}return[_,f]}function Gv(){}function Qv(i,a){var c=jt,f=Mr(),g=a(),_=!rs(f.memoizedState,g);if(_&&(f.memoizedState=g,ar=!0),f=f.queue,xm(Jv.bind(null,c,f,i),[i]),f.getSnapshot!==a||_||cn!==null&&cn.memoizedState.tag&1){if(c.flags|=2048,eu(9,Yv.bind(null,c,f,g,a),void 0,null),un===null)throw Error(n(349));(na&30)!==0||Zv(c,a,g)}return g}function Zv(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=jt.updateQueue,a===null?(a={lastEffect:null,stores:null},jt.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function Yv(i,a,c,f){a.value=c,a.getSnapshot=f,Xv(a)&&e_(i)}function Jv(i,a,c){return c(function(){Xv(a)&&e_(i)})}function Xv(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!rs(i,c)}catch{return!0}}function e_(i){var a=ei(i,1);a!==null&&ls(a,i,1,-1)}function t_(i){var a=Cs();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:i},a.queue=i,i=i.dispatch=V1.bind(null,jt,i),[a.memoizedState,i]}function eu(i,a,c,f){return i={tag:i,create:a,destroy:c,deps:f,next:null},a=jt.updateQueue,a===null?(a={lastEffect:null,stores:null},jt.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i)),i}function n_(){return Mr().memoizedState}function ph(i,a,c,f){var g=Cs();jt.flags|=i,g.memoizedState=eu(1|a,c,void 0,f===void 0?null:f)}function mh(i,a,c,f){var g=Mr();f=f===void 0?null:f;var _=void 0;if(tn!==null){var T=tn.memoizedState;if(_=T.destroy,f!==null&&ym(f,T.deps)){g.memoizedState=eu(a,c,_,f);return}}jt.flags|=i,g.memoizedState=eu(1|a,c,_,f)}function r_(i,a){return ph(8390656,8,i,a)}function xm(i,a){return mh(2048,8,i,a)}function s_(i,a){return mh(4,2,i,a)}function i_(i,a){return mh(4,4,i,a)}function o_(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function a_(i,a,c){return c=c!=null?c.concat([i]):null,mh(4,4,o_.bind(null,a,i),c)}function km(){}function l_(i,a){var c=Mr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&ym(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function c_(i,a){var c=Mr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&ym(a,f[1])?f[0]:(i=i(),c.memoizedState=[i,a],i)}function u_(i,a,c){return(na&21)===0?(i.baseState&&(i.baseState=!1,ar=!0),i.memoizedState=c):(rs(c,a)||(c=qo(),jt.lanes|=c,ra|=c,i.baseState=!0),a)}function L1(i,a){var c=Ye;Ye=c!==0&&4>c?c:4,i(!0);var f=gm.transition;gm.transition={};try{i(!1),a()}finally{Ye=c,gm.transition=f}}function d_(){return Mr().memoizedState}function M1(i,a,c){var f=Ki(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},h_(i))f_(a,c);else if(c=$v(i,a,c,f),c!==null){var g=qn();ls(c,i,f,g),p_(c,a,f)}}function V1(i,a,c){var f=Ki(i),g={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(h_(i))f_(a,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var T=a.lastRenderedState,L=_(T,c);if(g.hasEagerState=!0,g.eagerState=L,rs(L,T)){var F=a.interleaved;F===null?(g.next=g,um(a)):(g.next=F.next,F.next=g),a.interleaved=g;return}}catch{}finally{}c=$v(i,a,g,f),c!==null&&(g=qn(),ls(c,i,f,g),p_(c,a,f))}}function h_(i){var a=i.alternate;return i===jt||a!==null&&a===jt}function f_(i,a){Yc=fh=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function p_(i,a,c){if((c&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Pi(i,c)}}var gh={readContext:Lr,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},F1={readContext:Lr,useCallback:function(i,a){return Cs().memoizedState=[i,a===void 0?null:a],i},useContext:Lr,useEffect:r_,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,ph(4194308,4,o_.bind(null,a,i),c)},useLayoutEffect:function(i,a){return ph(4194308,4,i,a)},useInsertionEffect:function(i,a){return ph(4,2,i,a)},useMemo:function(i,a){var c=Cs();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var f=Cs();return a=c!==void 0?c(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=M1.bind(null,jt,i),[f.memoizedState,i]},useRef:function(i){var a=Cs();return i={current:i},a.memoizedState=i},useState:t_,useDebugValue:km,useDeferredValue:function(i){return Cs().memoizedState=i},useTransition:function(){var i=t_(!1),a=i[0];return i=L1.bind(null,i[1]),Cs().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var f=jt,g=Cs();if(Ct){if(c===void 0)throw Error(n(407));c=c()}else{if(c=a(),un===null)throw Error(n(349));(na&30)!==0||Zv(f,a,c)}g.memoizedState=c;var _={value:c,getSnapshot:a};return g.queue=_,r_(Jv.bind(null,f,_,i),[i]),f.flags|=2048,eu(9,Yv.bind(null,f,_,c,a),void 0,null),c},useId:function(){var i=Cs(),a=un.identifierPrefix;if(Ct){var c=Xs,f=Js;c=(f&~(1<<32-Bn(f)-1)).toString(32)+c,a=":"+a+"R"+c,c=Jc++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=O1++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},z1={readContext:Lr,useCallback:l_,useContext:Lr,useEffect:xm,useImperativeHandle:a_,useInsertionEffect:s_,useLayoutEffect:i_,useMemo:c_,useReducer:wm,useRef:n_,useState:function(){return wm(Xc)},useDebugValue:km,useDeferredValue:function(i){var a=Mr();return u_(a,tn.memoizedState,i)},useTransition:function(){var i=wm(Xc)[0],a=Mr().memoizedState;return[i,a]},useMutableSource:Gv,useSyncExternalStore:Qv,useId:d_,unstable_isNewReconciler:!1},U1={readContext:Lr,useCallback:l_,useContext:Lr,useEffect:xm,useImperativeHandle:a_,useInsertionEffect:s_,useLayoutEffect:i_,useMemo:c_,useReducer:bm,useRef:n_,useState:function(){return bm(Xc)},useDebugValue:km,useDeferredValue:function(i){var a=Mr();return tn===null?a.memoizedState=i:u_(a,tn.memoizedState,i)},useTransition:function(){var i=bm(Xc)[0],a=Mr().memoizedState;return[i,a]},useMutableSource:Gv,useSyncExternalStore:Qv,useId:d_,unstable_isNewReconciler:!1};function is(i,a){if(i&&i.defaultProps){a=de({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function Em(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:de({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var yh={isMounted:function(i){return(i=i._reactInternals)?Zr(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var f=qn(),g=Ki(i),_=ti(f,g);_.payload=a,c!=null&&(_.callback=c),a=$i(i,_,g),a!==null&&(ls(a,i,g,f),ch(a,i,g))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=qn(),g=Ki(i),_=ti(f,g);_.tag=1,_.payload=a,c!=null&&(_.callback=c),a=$i(i,_,g),a!==null&&(ls(a,i,g,f),ch(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=qn(),f=Ki(i),g=ti(c,f);g.tag=2,a!=null&&(g.callback=a),a=$i(i,g,f),a!==null&&(ls(a,i,f,c),ch(a,i,f))}};function m_(i,a,c,f,g,_,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,T):a.prototype&&a.prototype.isPureReactComponent?!zc(c,f)||!zc(g,_):!0}function g_(i,a,c){var f=!1,g=zi,_=a.contextType;return typeof _=="object"&&_!==null?_=Lr(_):(g=or(a)?Yo:Pn.current,f=a.contextTypes,_=(f=f!=null)?cl(i,g):zi),a=new a(c,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=yh,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=_),a}function y_(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&yh.enqueueReplaceState(a,a.state,null)}function Tm(i,a,c,f){var g=i.stateNode;g.props=c,g.state=i.memoizedState,g.refs={},dm(i);var _=a.contextType;typeof _=="object"&&_!==null?g.context=Lr(_):(_=or(a)?Yo:Pn.current,g.context=cl(i,_)),g.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Em(i,a,_,c),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&yh.enqueueReplaceState(g,g.state,null),uh(i,c,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function yl(i,a){try{var c="",f=a;do c+=De(f),f=f.return;while(f);var g=c}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:g,digest:null}}function Im(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function Sm(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var B1=typeof WeakMap=="function"?WeakMap:Map;function v_(i,a,c){c=ti(-1,c),c.tag=3,c.payload={element:null};var f=a.value;return c.callback=function(){Eh||(Eh=!0,Bm=f),Sm(i,a)},c}function __(i,a,c){c=ti(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;c.payload=function(){return f(g)},c.callback=function(){Sm(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){Sm(i,a),typeof f!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),c}function w_(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new B1;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(c)||(g.add(c),i=nS.bind(null,i,a,c),a.then(i,i))}function b_(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function x_(i,a,c,f,g){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=ti(-1,1),a.tag=2,$i(c,a,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var $1=G.ReactCurrentOwner,ar=!1;function Wn(i,a,c,f){a.child=i===null?Bv(a,null,c,f):fl(a,i.child,c,f)}function k_(i,a,c,f,g){c=c.render;var _=a.ref;return ml(a,g),f=vm(i,a,c,f,_,g),c=_m(),i!==null&&!ar?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,ni(i,a,g)):(Ct&&c&&tm(a),a.flags|=1,Wn(i,a,f,g),a.child)}function E_(i,a,c,f,g){if(i===null){var _=c.type;return typeof _=="function"&&!Qm(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=_,T_(i,a,_,f,g)):(i=Nh(c.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,(i.lanes&g)===0){var T=_.memoizedProps;if(c=c.compare,c=c!==null?c:zc,c(T,f)&&i.ref===a.ref)return ni(i,a,g)}return a.flags|=1,i=Qi(_,f),i.ref=a.ref,i.return=a,a.child=i}function T_(i,a,c,f,g){if(i!==null){var _=i.memoizedProps;if(zc(_,f)&&i.ref===a.ref)if(ar=!1,a.pendingProps=f=_,(i.lanes&g)!==0)(i.flags&131072)!==0&&(ar=!0);else return a.lanes=i.lanes,ni(i,a,g)}return Cm(i,a,c,f,g)}function I_(i,a,c){var f=a.pendingProps,g=f.children,_=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(_l,kr),kr|=c;else{if((c&1073741824)===0)return i=_!==null?_.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,wt(_l,kr),kr|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:c,wt(_l,kr),kr|=f}else _!==null?(f=_.baseLanes|c,a.memoizedState=null):f=c,wt(_l,kr),kr|=f;return Wn(i,a,g,c),a.child}function S_(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Cm(i,a,c,f,g){var _=or(c)?Yo:Pn.current;return _=cl(a,_),ml(a,g),c=vm(i,a,c,f,_,g),f=_m(),i!==null&&!ar?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,ni(i,a,g)):(Ct&&f&&tm(a),a.flags|=1,Wn(i,a,c,g),a.child)}function C_(i,a,c,f,g){if(or(c)){var _=!0;th(a)}else _=!1;if(ml(a,g),a.stateNode===null)_h(i,a),g_(a,c,f),Tm(a,c,f,g),f=!0;else if(i===null){var T=a.stateNode,L=a.memoizedProps;T.props=L;var F=T.context,Y=c.contextType;typeof Y=="object"&&Y!==null?Y=Lr(Y):(Y=or(c)?Yo:Pn.current,Y=cl(a,Y));var ie=c.getDerivedStateFromProps,ae=typeof ie=="function"||typeof T.getSnapshotBeforeUpdate=="function";ae||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==f||F!==Y)&&y_(a,T,f,Y),Bi=!1;var se=a.memoizedState;T.state=se,uh(a,f,T,g),F=a.memoizedState,L!==f||se!==F||ir.current||Bi?(typeof ie=="function"&&(Em(a,c,ie,f),F=a.memoizedState),(L=Bi||m_(a,c,L,f,se,F,Y))?(ae||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),T.props=f,T.state=F,T.context=Y,f=L):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{T=a.stateNode,Wv(i,a),L=a.memoizedProps,Y=a.type===a.elementType?L:is(a.type,L),T.props=Y,ae=a.pendingProps,se=T.context,F=c.contextType,typeof F=="object"&&F!==null?F=Lr(F):(F=or(c)?Yo:Pn.current,F=cl(a,F));var fe=c.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==ae||se!==F)&&y_(a,T,f,F),Bi=!1,se=a.memoizedState,T.state=se,uh(a,f,T,g);var ve=a.memoizedState;L!==ae||se!==ve||ir.current||Bi?(typeof fe=="function"&&(Em(a,c,fe,f),ve=a.memoizedState),(Y=Bi||m_(a,c,Y,f,se,ve,F)||!1)?(ie||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,ve,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,ve,F)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=ve),T.props=f,T.state=ve,T.context=F,f=Y):(typeof T.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=1024),f=!1)}return Am(i,a,c,f,_,g)}function Am(i,a,c,f,g,_){S_(i,a);var T=(a.flags&128)!==0;if(!f&&!T)return g&&jv(a,c,!1),ni(i,a,_);f=a.stateNode,$1.current=a;var L=T&&typeof c.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&T?(a.child=fl(a,i.child,null,_),a.child=fl(a,null,L,_)):Wn(i,a,L,_),a.memoizedState=f.state,g&&jv(a,c,!0),a.child}function A_(i){var a=i.stateNode;a.pendingContext?Rv(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Rv(i,a.context,!1),hm(i,a.containerInfo)}function N_(i,a,c,f,g){return hl(),im(g),a.flags|=256,Wn(i,a,c,f),a.child}var Nm={dehydrated:null,treeContext:null,retryLane:0};function Rm(i){return{baseLanes:i,cachePool:null,transitions:null}}function R_(i,a,c){var f=a.pendingProps,g=Pt.current,_=!1,T=(a.flags&128)!==0,L;if((L=T)||(L=i!==null&&i.memoizedState===null?!1:(g&2)!==0),L?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),wt(Pt,g&1),i===null)return sm(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(T=f.children,i=f.fallback,_?(f=a.mode,_=a.child,T={mode:"hidden",children:T},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=T):_=Rh(T,f,0,null),i=aa(i,f,c,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=Rm(c),a.memoizedState=Nm,i):Pm(a,T));if(g=i.memoizedState,g!==null&&(L=g.dehydrated,L!==null))return W1(i,a,T,f,L,g,c);if(_){_=f.fallback,T=a.mode,g=i.child,L=g.sibling;var F={mode:"hidden",children:f.children};return(T&1)===0&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=F,a.deletions=null):(f=Qi(g,F),f.subtreeFlags=g.subtreeFlags&14680064),L!==null?_=Qi(L,_):(_=aa(_,T,c,null),_.flags|=2),_.return=a,f.return=a,f.sibling=_,a.child=f,f=_,_=a.child,T=i.child.memoizedState,T=T===null?Rm(c):{baseLanes:T.baseLanes|c,cachePool:null,transitions:T.transitions},_.memoizedState=T,_.childLanes=i.childLanes&~c,a.memoizedState=Nm,f}return _=i.child,i=_.sibling,f=Qi(_,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=c),f.return=a,f.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=f,a.memoizedState=null,f}function Pm(i,a){return a=Rh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function vh(i,a,c,f){return f!==null&&im(f),fl(a,i.child,null,c),i=Pm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function W1(i,a,c,f,g,_,T){if(c)return a.flags&256?(a.flags&=-257,f=Im(Error(n(422))),vh(i,a,T,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=f.fallback,g=a.mode,f=Rh({mode:"visible",children:f.children},g,0,null),_=aa(_,g,T,null),_.flags|=2,f.return=a,_.return=a,f.sibling=_,a.child=f,(a.mode&1)!==0&&fl(a,i.child,null,T),a.child.memoizedState=Rm(T),a.memoizedState=Nm,_);if((a.mode&1)===0)return vh(i,a,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var L=f.dgst;return f=L,_=Error(n(419)),f=Im(_,f,void 0),vh(i,a,T,f)}if(L=(T&i.childLanes)!==0,ar||L){if(f=un,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|T))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,ei(i,g),ls(f,i,g,-1))}return Gm(),f=Im(Error(n(421))),vh(i,a,T,f)}return g.data==="$?"?(a.flags|=128,a.child=i.child,a=rS.bind(null,i),g._reactRetry=a,null):(i=_.treeContext,xr=Vi(g.nextSibling),br=a,Ct=!0,ss=null,i!==null&&(Dr[Or++]=Js,Dr[Or++]=Xs,Dr[Or++]=Jo,Js=i.id,Xs=i.overflow,Jo=a),a=Pm(a,f.children),a.flags|=4096,a)}function P_(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),cm(i.return,a,c)}function jm(i,a,c,f,g){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=c,_.tailMode=g)}function j_(i,a,c){var f=a.pendingProps,g=f.revealOrder,_=f.tail;if(Wn(i,a,f.children,c),f=Pt.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&P_(i,c,a);else if(i.tag===19)P_(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(wt(Pt,f),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&dh(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),jm(a,!1,g,c,_);break;case"backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&dh(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}jm(a,!0,c,null,_);break;case"together":jm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function _h(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function ni(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),ra|=a.lanes,(c&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,c=Qi(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Qi(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function q1(i,a,c){switch(a.tag){case 3:A_(a),hl();break;case 5:Kv(a);break;case 1:or(a.type)&&th(a);break;case 4:hm(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,g=a.memoizedProps.value;wt(ah,f._currentValue),f._currentValue=g;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(wt(Pt,Pt.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?R_(i,a,c):(wt(Pt,Pt.current&1),i=ni(i,a,c),i!==null?i.sibling:null);wt(Pt,Pt.current&1);break;case 19:if(f=(c&a.childLanes)!==0,(i.flags&128)!==0){if(f)return j_(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),wt(Pt,Pt.current),f)break;return null;case 22:case 23:return a.lanes=0,I_(i,a,c)}return ni(i,a,c)}var D_,Dm,O_,L_;D_=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Dm=function(){},O_=function(i,a,c,f){var g=i.memoizedProps;if(g!==f){i=a.stateNode,ta(Ss.current);var _=null;switch(c){case"input":g=vn(i,g),f=vn(i,f),_=[];break;case"select":g=de({},g,{value:void 0}),f=de({},f,{value:void 0}),_=[];break;case"textarea":g=vs(i,g),f=vs(i,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Jd)}Ti(c,f);var T;c=null;for(Y in g)if(!f.hasOwnProperty(Y)&&g.hasOwnProperty(Y)&&g[Y]!=null)if(Y==="style"){var L=g[Y];for(T in L)L.hasOwnProperty(T)&&(c||(c={}),c[T]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?_||(_=[]):(_=_||[]).push(Y,null));for(Y in f){var F=f[Y];if(L=g!=null?g[Y]:void 0,f.hasOwnProperty(Y)&&F!==L&&(F!=null||L!=null))if(Y==="style")if(L){for(T in L)!L.hasOwnProperty(T)||F&&F.hasOwnProperty(T)||(c||(c={}),c[T]="");for(T in F)F.hasOwnProperty(T)&&L[T]!==F[T]&&(c||(c={}),c[T]=F[T])}else c||(_||(_=[]),_.push(Y,c)),c=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,L=L?L.__html:void 0,F!=null&&L!==F&&(_=_||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(_=_||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&xt("scroll",i),_||L===F||(_=[])):(_=_||[]).push(Y,F))}c&&(_=_||[]).push("style",c);var Y=_;(a.updateQueue=Y)&&(a.flags|=4)}},L_=function(i,a,c,f){c!==f&&(a.flags|=4)};function tu(i,a){if(!Ct)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Dn(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function H1(i,a,c){var f=a.pendingProps;switch(nm(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(a),null;case 1:return or(a.type)&&eh(),Dn(a),null;case 3:return f=a.stateNode,gl(),kt(ir),kt(Pn),mm(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(ih(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ss!==null&&(qm(ss),ss=null))),Dm(i,a),Dn(a),null;case 5:fm(a);var g=ta(Zc.current);if(c=a.type,i!==null&&a.stateNode!=null)O_(i,a,c,f,g),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(n(166));return Dn(a),null}if(i=ta(Ss.current),ih(a)){f=a.stateNode,c=a.type;var _=a.memoizedProps;switch(f[Is]=a,f[qc]=_,i=(a.mode&1)!==0,c){case"dialog":xt("cancel",f),xt("close",f);break;case"iframe":case"object":case"embed":xt("load",f);break;case"video":case"audio":for(g=0;g<Bc.length;g++)xt(Bc[g],f);break;case"source":xt("error",f);break;case"img":case"image":case"link":xt("error",f),xt("load",f);break;case"details":xt("toggle",f);break;case"input":mr(f,_),xt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},xt("invalid",f);break;case"textarea":Bs(f,_),xt("invalid",f)}Ti(c,_),g=null;for(var T in _)if(_.hasOwnProperty(T)){var L=_[T];T==="children"?typeof L=="string"?f.textContent!==L&&(_.suppressHydrationWarning!==!0&&Yd(f.textContent,L,i),g=["children",L]):typeof L=="number"&&f.textContent!==""+L&&(_.suppressHydrationWarning!==!0&&Yd(f.textContent,L,i),g=["children",""+L]):s.hasOwnProperty(T)&&L!=null&&T==="onScroll"&&xt("scroll",f)}switch(c){case"input":rt(f),Oo(f,_,!0);break;case"textarea":rt(f),Lo(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=Jd)}f=g,a.updateQueue=f,f!==null&&(a.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Bt(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=T.createElement(c,{is:f.is}):(i=T.createElement(c),c==="select"&&(T=i,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):i=T.createElementNS(i,c),i[Is]=a,i[qc]=f,D_(i,a,!1,!1),a.stateNode=i;e:{switch(T=Fo(c,f),c){case"dialog":xt("cancel",i),xt("close",i),g=f;break;case"iframe":case"object":case"embed":xt("load",i),g=f;break;case"video":case"audio":for(g=0;g<Bc.length;g++)xt(Bc[g],i);g=f;break;case"source":xt("error",i),g=f;break;case"img":case"image":case"link":xt("error",i),xt("load",i),g=f;break;case"details":xt("toggle",i),g=f;break;case"input":mr(i,f),g=vn(i,f),xt("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=de({},f,{value:void 0}),xt("invalid",i);break;case"textarea":Bs(i,f),g=vs(i,f),xt("invalid",i);break;default:g=f}Ti(c,g),L=g;for(_ in L)if(L.hasOwnProperty(_)){var F=L[_];_==="style"?Vo(i,F):_==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Kr(i,F)):_==="children"?typeof F=="string"?(c!=="textarea"||F!=="")&&Gr(i,F):typeof F=="number"&&Gr(i,""+F):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?F!=null&&_==="onScroll"&&xt("scroll",i):F!=null&&U(i,_,F,T))}switch(c){case"input":rt(i),Oo(i,f,!1);break;case"textarea":rt(i),Lo(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Ue(f.value));break;case"select":i.multiple=!!f.multiple,_=f.value,_!=null?er(i,!!f.multiple,_,!1):f.defaultValue!=null&&er(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Jd)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Dn(a),null;case 6:if(i&&a.stateNode!=null)L_(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(n(166));if(c=ta(Zc.current),ta(Ss.current),ih(a)){if(f=a.stateNode,c=a.memoizedProps,f[Is]=a,(_=f.nodeValue!==c)&&(i=br,i!==null))switch(i.tag){case 3:Yd(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Yd(f.nodeValue,c,(i.mode&1)!==0)}_&&(a.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Is]=a,a.stateNode=f}return Dn(a),null;case 13:if(kt(Pt),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ct&&xr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Fv(),hl(),a.flags|=98560,_=!1;else if(_=ih(a),f!==null&&f.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Is]=a}else hl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dn(a),_=!1}else ss!==null&&(qm(ss),ss=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(Pt.current&1)!==0?nn===0&&(nn=3):Gm())),a.updateQueue!==null&&(a.flags|=4),Dn(a),null);case 4:return gl(),Dm(i,a),i===null&&$c(a.stateNode.containerInfo),Dn(a),null;case 10:return lm(a.type._context),Dn(a),null;case 17:return or(a.type)&&eh(),Dn(a),null;case 19:if(kt(Pt),_=a.memoizedState,_===null)return Dn(a),null;if(f=(a.flags&128)!==0,T=_.rendering,T===null)if(f)tu(_,!1);else{if(nn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(T=dh(i),T!==null){for(a.flags|=128,tu(_,!1),f=T.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=c,c=a.child;c!==null;)_=c,i=f,_.flags&=14680066,T=_.alternate,T===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=T.childLanes,_.lanes=T.lanes,_.child=T.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=T.memoizedProps,_.memoizedState=T.memoizedState,_.updateQueue=T.updateQueue,_.type=T.type,i=T.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return wt(Pt,Pt.current&1|2),a.child}i=i.sibling}_.tail!==null&&_t()>wl&&(a.flags|=128,f=!0,tu(_,!1),a.lanes=4194304)}else{if(!f)if(i=dh(T),i!==null){if(a.flags|=128,f=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),tu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!T.alternate&&!Ct)return Dn(a),null}else 2*_t()-_.renderingStartTime>wl&&c!==1073741824&&(a.flags|=128,f=!0,tu(_,!1),a.lanes=4194304);_.isBackwards?(T.sibling=a.child,a.child=T):(c=_.last,c!==null?c.sibling=T:a.child=T,_.last=T)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=_t(),a.sibling=null,c=Pt.current,wt(Pt,f?c&1|2:c&1),a):(Dn(a),null);case 22:case 23:return Km(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(kr&1073741824)!==0&&(Dn(a),a.subtreeFlags&6&&(a.flags|=8192)):Dn(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function K1(i,a){switch(nm(a),a.tag){case 1:return or(a.type)&&eh(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return gl(),kt(ir),kt(Pn),mm(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return fm(a),null;case 13:if(kt(Pt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));hl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return kt(Pt),null;case 4:return gl(),null;case 10:return lm(a.type._context),null;case 22:case 23:return Km(),null;case 24:return null;default:return null}}var wh=!1,On=!1,G1=typeof WeakSet=="function"?WeakSet:Set,ye=null;function vl(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Ft(i,a,f)}else c.current=null}function Om(i,a,c){try{c()}catch(f){Ft(i,a,f)}}var M_=!1;function Q1(i,a){if(Kp=Oi,i=mv(),Fp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var T=0,L=-1,F=-1,Y=0,ie=0,ae=i,se=null;t:for(;;){for(var fe;ae!==c||g!==0&&ae.nodeType!==3||(L=T+g),ae!==_||f!==0&&ae.nodeType!==3||(F=T+f),ae.nodeType===3&&(T+=ae.nodeValue.length),(fe=ae.firstChild)!==null;)se=ae,ae=fe;for(;;){if(ae===i)break t;if(se===c&&++Y===g&&(L=T),se===_&&++ie===f&&(F=T),(fe=ae.nextSibling)!==null)break;ae=se,se=ae.parentNode}ae=fe}c=L===-1||F===-1?null:{start:L,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(Gp={focusedElem:i,selectionRange:c},Oi=!1,ye=a;ye!==null;)if(a=ye,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ye=i;else for(;ye!==null;){a=ye;try{var ve=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var xe=ve.memoizedProps,$t=ve.memoizedState,H=a.stateNode,B=H.getSnapshotBeforeUpdate(a.elementType===a.type?xe:is(a.type,xe),$t);H.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var Q=a.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(le){Ft(a,a.return,le)}if(i=a.sibling,i!==null){i.return=a.return,ye=i;break}ye=a.return}return ve=M_,M_=!1,ve}function nu(i,a,c){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var _=g.destroy;g.destroy=void 0,_!==void 0&&Om(a,c,_)}g=g.next}while(g!==f)}}function bh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==a)}}function Lm(i){var a=i.ref;if(a!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof a=="function"?a(i):a.current=i}}function V_(i){var a=i.alternate;a!==null&&(i.alternate=null,V_(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Is],delete a[qc],delete a[Jp],delete a[R1],delete a[P1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function F_(i){return i.tag===5||i.tag===3||i.tag===4}function z_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||F_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Mm(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Jd));else if(f!==4&&(i=i.child,i!==null))for(Mm(i,a,c),i=i.sibling;i!==null;)Mm(i,a,c),i=i.sibling}function Vm(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Vm(i,a,c),i=i.sibling;i!==null;)Vm(i,a,c),i=i.sibling}var xn=null,os=!1;function Wi(i,a,c){for(c=c.child;c!==null;)U_(i,a,c),c=c.sibling}function U_(i,a,c){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount($o,c)}catch{}switch(c.tag){case 5:On||vl(c,a);case 6:var f=xn,g=os;xn=null,Wi(i,a,c),xn=f,os=g,xn!==null&&(os?(i=xn,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):xn.removeChild(c.stateNode));break;case 18:xn!==null&&(os?(i=xn,c=c.stateNode,i.nodeType===8?Yp(i.parentNode,c):i.nodeType===1&&Yp(i,c),ts(i)):Yp(xn,c.stateNode));break;case 4:f=xn,g=os,xn=c.stateNode.containerInfo,os=!0,Wi(i,a,c),xn=f,os=g;break;case 0:case 11:case 14:case 15:if(!On&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,T=_.destroy;_=_.tag,T!==void 0&&((_&2)!==0||(_&4)!==0)&&Om(c,a,T),g=g.next}while(g!==f)}Wi(i,a,c);break;case 1:if(!On&&(vl(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(L){Ft(c,a,L)}Wi(i,a,c);break;case 21:Wi(i,a,c);break;case 22:c.mode&1?(On=(f=On)||c.memoizedState!==null,Wi(i,a,c),On=f):Wi(i,a,c);break;default:Wi(i,a,c)}}function B_(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new G1),a.forEach(function(f){var g=sS.bind(null,i,f);c.has(f)||(c.add(f),f.then(g,g))})}}function as(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];try{var _=i,T=a,L=T;e:for(;L!==null;){switch(L.tag){case 5:xn=L.stateNode,os=!1;break e;case 3:xn=L.stateNode.containerInfo,os=!0;break e;case 4:xn=L.stateNode.containerInfo,os=!0;break e}L=L.return}if(xn===null)throw Error(n(160));U_(_,T,g),xn=null,os=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(Y){Ft(g,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)$_(a,i),a=a.sibling}function $_(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(as(a,i),As(i),f&4){try{nu(3,i,i.return),bh(3,i)}catch(xe){Ft(i,i.return,xe)}try{nu(5,i,i.return)}catch(xe){Ft(i,i.return,xe)}}break;case 1:as(a,i),As(i),f&512&&c!==null&&vl(c,c.return);break;case 5:if(as(a,i),As(i),f&512&&c!==null&&vl(c,c.return),i.flags&32){var g=i.stateNode;try{Gr(g,"")}catch(xe){Ft(i,i.return,xe)}}if(f&4&&(g=i.stateNode,g!=null)){var _=i.memoizedProps,T=c!==null?c.memoizedProps:_,L=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{L==="input"&&_.type==="radio"&&_.name!=null&&Cr(g,_),Fo(L,T);var Y=Fo(L,_);for(T=0;T<F.length;T+=2){var ie=F[T],ae=F[T+1];ie==="style"?Vo(g,ae):ie==="dangerouslySetInnerHTML"?Kr(g,ae):ie==="children"?Gr(g,ae):U(g,ie,ae,Y)}switch(L){case"input":Ei(g,_);break;case"textarea":$s(g,_);break;case"select":var se=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var fe=_.value;fe!=null?er(g,!!_.multiple,fe,!1):se!==!!_.multiple&&(_.defaultValue!=null?er(g,!!_.multiple,_.defaultValue,!0):er(g,!!_.multiple,_.multiple?[]:"",!1))}g[qc]=_}catch(xe){Ft(i,i.return,xe)}}break;case 6:if(as(a,i),As(i),f&4){if(i.stateNode===null)throw Error(n(162));g=i.stateNode,_=i.memoizedProps;try{g.nodeValue=_}catch(xe){Ft(i,i.return,xe)}}break;case 3:if(as(a,i),As(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{ts(a.containerInfo)}catch(xe){Ft(i,i.return,xe)}break;case 4:as(a,i),As(i);break;case 13:as(a,i),As(i),g=i.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(Um=_t())),f&4&&B_(i);break;case 22:if(ie=c!==null&&c.memoizedState!==null,i.mode&1?(On=(Y=On)||ie,as(a,i),On=Y):as(a,i),As(i),f&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ie&&(i.mode&1)!==0)for(ye=i,ie=i.child;ie!==null;){for(ae=ye=ie;ye!==null;){switch(se=ye,fe=se.child,se.tag){case 0:case 11:case 14:case 15:nu(4,se,se.return);break;case 1:vl(se,se.return);var ve=se.stateNode;if(typeof ve.componentWillUnmount=="function"){f=se,c=se.return;try{a=f,ve.props=a.memoizedProps,ve.state=a.memoizedState,ve.componentWillUnmount()}catch(xe){Ft(f,c,xe)}}break;case 5:vl(se,se.return);break;case 22:if(se.memoizedState!==null){H_(ae);continue}}fe!==null?(fe.return=se,ye=fe):H_(ae)}ie=ie.sibling}e:for(ie=null,ae=i;;){if(ae.tag===5){if(ie===null){ie=ae;try{g=ae.stateNode,Y?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(L=ae.stateNode,F=ae.memoizedProps.style,T=F!=null&&F.hasOwnProperty("display")?F.display:null,L.style.display=Mo("display",T))}catch(xe){Ft(i,i.return,xe)}}}else if(ae.tag===6){if(ie===null)try{ae.stateNode.nodeValue=Y?"":ae.memoizedProps}catch(xe){Ft(i,i.return,xe)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===i)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===i)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===i)break e;ie===ae&&(ie=null),ae=ae.return}ie===ae&&(ie=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:as(a,i),As(i),f&4&&B_(i);break;case 21:break;default:as(a,i),As(i)}}function As(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(F_(c)){var f=c;break e}c=c.return}throw Error(n(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Gr(g,""),f.flags&=-33);var _=z_(i);Vm(i,_,g);break;case 3:case 4:var T=f.stateNode.containerInfo,L=z_(i);Mm(i,L,T);break;default:throw Error(n(161))}}catch(F){Ft(i,i.return,F)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Z1(i,a,c){ye=i,W_(i)}function W_(i,a,c){for(var f=(i.mode&1)!==0;ye!==null;){var g=ye,_=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||wh;if(!T){var L=g.alternate,F=L!==null&&L.memoizedState!==null||On;L=wh;var Y=On;if(wh=T,(On=F)&&!Y)for(ye=g;ye!==null;)T=ye,F=T.child,T.tag===22&&T.memoizedState!==null?K_(g):F!==null?(F.return=T,ye=F):K_(g);for(;_!==null;)ye=_,W_(_),_=_.sibling;ye=g,wh=L,On=Y}q_(i)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,ye=_):q_(i)}}function q_(i){for(;ye!==null;){var a=ye;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:On||bh(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!On)if(c===null)f.componentDidMount();else{var g=a.elementType===a.type?c.memoizedProps:is(a.type,c.memoizedProps);f.componentDidUpdate(g,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&Hv(a,_,f);break;case 3:var T=a.updateQueue;if(T!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}Hv(a,T,c)}break;case 5:var L=a.stateNode;if(c===null&&a.flags&4){c=L;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var ie=Y.memoizedState;if(ie!==null){var ae=ie.dehydrated;ae!==null&&ts(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}On||a.flags&512&&Lm(a)}catch(se){Ft(a,a.return,se)}}if(a===i){ye=null;break}if(c=a.sibling,c!==null){c.return=a.return,ye=c;break}ye=a.return}}function H_(i){for(;ye!==null;){var a=ye;if(a===i){ye=null;break}var c=a.sibling;if(c!==null){c.return=a.return,ye=c;break}ye=a.return}}function K_(i){for(;ye!==null;){var a=ye;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{bh(4,a)}catch(F){Ft(a,c,F)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(F){Ft(a,g,F)}}var _=a.return;try{Lm(a)}catch(F){Ft(a,_,F)}break;case 5:var T=a.return;try{Lm(a)}catch(F){Ft(a,T,F)}}}catch(F){Ft(a,a.return,F)}if(a===i){ye=null;break}var L=a.sibling;if(L!==null){L.return=a.return,ye=L;break}ye=a.return}}var Y1=Math.ceil,xh=G.ReactCurrentDispatcher,Fm=G.ReactCurrentOwner,Vr=G.ReactCurrentBatchConfig,at=0,un=null,Zt=null,kn=0,kr=0,_l=Fi(0),nn=0,ru=null,ra=0,kh=0,zm=0,su=null,lr=null,Um=0,wl=1/0,ri=null,Eh=!1,Bm=null,qi=null,Th=!1,Hi=null,Ih=0,iu=0,$m=null,Sh=-1,Ch=0;function qn(){return(at&6)!==0?_t():Sh!==-1?Sh:Sh=_t()}function Ki(i){return(i.mode&1)===0?1:(at&2)!==0&&kn!==0?kn&-kn:D1.transition!==null?(Ch===0&&(Ch=qo()),Ch):(i=Ye,i!==0||(i=window.event,i=i===void 0?16:jc(i.type)),i)}function ls(i,a,c,f){if(50<iu)throw iu=0,$m=null,Error(n(185));Ri(i,c,f),((at&2)===0||i!==un)&&(i===un&&((at&2)===0&&(kh|=c),nn===4&&Gi(i,kn)),cr(i,f),c===1&&at===0&&(a.mode&1)===0&&(wl=_t()+500,nh&&Ui()))}function cr(i,a){var c=i.callbackNode;qs(i,a);var f=Wo(i,i===un?kn:0);if(f===0)c!==null&&Cc(c),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(c!=null&&Cc(c),a===1)i.tag===0?j1(Q_.bind(null,i)):Dv(Q_.bind(null,i)),A1(function(){(at&6)===0&&Ui()}),c=null;else{switch(ji(f)){case 1:c=Bo;break;case 4:c=Ci;break;case 16:c=Rr;break;case 536870912:c=Cd;break;default:c=Rr}c=rw(c,G_.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function G_(i,a){if(Sh=-1,Ch=0,(at&6)!==0)throw Error(n(327));var c=i.callbackNode;if(bl()&&i.callbackNode!==c)return null;var f=Wo(i,i===un?kn:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=Ah(i,f);else{a=f;var g=at;at|=2;var _=Y_();(un!==i||kn!==a)&&(ri=null,wl=_t()+500,ia(i,a));do try{eS();break}catch(L){Z_(i,L)}while(!0);am(),xh.current=_,at=g,Zt!==null?a=0:(un=null,kn=0,a=nn)}if(a!==0){if(a===2&&(g=vr(i),g!==0&&(f=g,a=Wm(i,g))),a===1)throw c=ru,ia(i,0),Gi(i,f),cr(i,_t()),c;if(a===6)Gi(i,f);else{if(g=i.current.alternate,(f&30)===0&&!J1(g)&&(a=Ah(i,f),a===2&&(_=vr(i),_!==0&&(f=_,a=Wm(i,_))),a===1))throw c=ru,ia(i,0),Gi(i,f),cr(i,_t()),c;switch(i.finishedWork=g,i.finishedLanes=f,a){case 0:case 1:throw Error(n(345));case 2:oa(i,lr,ri);break;case 3:if(Gi(i,f),(f&130023424)===f&&(a=Um+500-_t(),10<a)){if(Wo(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){qn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=Zp(oa.bind(null,i,lr,ri),a);break}oa(i,lr,ri);break;case 4:if(Gi(i,f),(f&4194240)===f)break;for(a=i.eventTimes,g=-1;0<f;){var T=31-Bn(f);_=1<<T,T=a[T],T>g&&(g=T),f&=~_}if(f=g,f=_t()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Y1(f/1960))-f,10<f){i.timeoutHandle=Zp(oa.bind(null,i,lr,ri),f);break}oa(i,lr,ri);break;case 5:oa(i,lr,ri);break;default:throw Error(n(329))}}}return cr(i,_t()),i.callbackNode===c?G_.bind(null,i):null}function Wm(i,a){var c=su;return i.current.memoizedState.isDehydrated&&(ia(i,a).flags|=256),i=Ah(i,a),i!==2&&(a=lr,lr=c,a!==null&&qm(a)),i}function qm(i){lr===null?lr=i:lr.push.apply(lr,i)}function J1(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var g=c[f],_=g.getSnapshot;g=g.value;try{if(!rs(_(),g))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Gi(i,a){for(a&=~zm,a&=~kh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-Bn(a),f=1<<c;i[c]=-1,a&=~f}}function Q_(i){if((at&6)!==0)throw Error(n(327));bl();var a=Wo(i,0);if((a&1)===0)return cr(i,_t()),null;var c=Ah(i,a);if(i.tag!==0&&c===2){var f=vr(i);f!==0&&(a=f,c=Wm(i,f))}if(c===1)throw c=ru,ia(i,0),Gi(i,a),cr(i,_t()),c;if(c===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,oa(i,lr,ri),cr(i,_t()),null}function Hm(i,a){var c=at;at|=1;try{return i(a)}finally{at=c,at===0&&(wl=_t()+500,nh&&Ui())}}function sa(i){Hi!==null&&Hi.tag===0&&(at&6)===0&&bl();var a=at;at|=1;var c=Vr.transition,f=Ye;try{if(Vr.transition=null,Ye=1,i)return i()}finally{Ye=f,Vr.transition=c,at=a,(at&6)===0&&Ui()}}function Km(){kr=_l.current,kt(_l)}function ia(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,C1(c)),Zt!==null)for(c=Zt.return;c!==null;){var f=c;switch(nm(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&eh();break;case 3:gl(),kt(ir),kt(Pn),mm();break;case 5:fm(f);break;case 4:gl();break;case 13:kt(Pt);break;case 19:kt(Pt);break;case 10:lm(f.type._context);break;case 22:case 23:Km()}c=c.return}if(un=i,Zt=i=Qi(i.current,null),kn=kr=a,nn=0,ru=null,zm=kh=ra=0,lr=su=null,ea!==null){for(a=0;a<ea.length;a++)if(c=ea[a],f=c.interleaved,f!==null){c.interleaved=null;var g=f.next,_=c.pending;if(_!==null){var T=_.next;_.next=g,f.next=T}c.pending=f}ea=null}return i}function Z_(i,a){do{var c=Zt;try{if(am(),hh.current=gh,fh){for(var f=jt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}fh=!1}if(na=0,cn=tn=jt=null,Yc=!1,Jc=0,Fm.current=null,c===null||c.return===null){nn=1,ru=a,Zt=null;break}e:{var _=i,T=c.return,L=c,F=a;if(a=kn,L.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,ie=L,ae=ie.tag;if((ie.mode&1)===0&&(ae===0||ae===11||ae===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=b_(T);if(fe!==null){fe.flags&=-257,x_(fe,T,L,_,a),fe.mode&1&&w_(_,Y,a),a=fe,F=Y;var ve=a.updateQueue;if(ve===null){var xe=new Set;xe.add(F),a.updateQueue=xe}else ve.add(F);break e}else{if((a&1)===0){w_(_,Y,a),Gm();break e}F=Error(n(426))}}else if(Ct&&L.mode&1){var $t=b_(T);if($t!==null){($t.flags&65536)===0&&($t.flags|=256),x_($t,T,L,_,a),im(yl(F,L));break e}}_=F=yl(F,L),nn!==4&&(nn=2),su===null?su=[_]:su.push(_),_=T;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var H=v_(_,F,a);qv(_,H);break e;case 1:L=F;var B=_.type,Q=_.stateNode;if((_.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(qi===null||!qi.has(Q)))){_.flags|=65536,a&=-a,_.lanes|=a;var le=__(_,L,a);qv(_,le);break e}}_=_.return}while(_!==null)}X_(c)}catch(Ee){a=Ee,Zt===c&&c!==null&&(Zt=c=c.return);continue}break}while(!0)}function Y_(){var i=xh.current;return xh.current=gh,i===null?gh:i}function Gm(){(nn===0||nn===3||nn===2)&&(nn=4),un===null||(ra&268435455)===0&&(kh&268435455)===0||Gi(un,kn)}function Ah(i,a){var c=at;at|=2;var f=Y_();(un!==i||kn!==a)&&(ri=null,ia(i,a));do try{X1();break}catch(g){Z_(i,g)}while(!0);if(am(),at=c,xh.current=f,Zt!==null)throw Error(n(261));return un=null,kn=0,nn}function X1(){for(;Zt!==null;)J_(Zt)}function eS(){for(;Zt!==null&&!Id();)J_(Zt)}function J_(i){var a=nw(i.alternate,i,kr);i.memoizedProps=i.pendingProps,a===null?X_(i):Zt=a,Fm.current=null}function X_(i){var a=i;do{var c=a.alternate;if(i=a.return,(a.flags&32768)===0){if(c=H1(c,a,kr),c!==null){Zt=c;return}}else{if(c=K1(c,a),c!==null){c.flags&=32767,Zt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{nn=6,Zt=null;return}}if(a=a.sibling,a!==null){Zt=a;return}Zt=a=i}while(a!==null);nn===0&&(nn=5)}function oa(i,a,c){var f=Ye,g=Vr.transition;try{Vr.transition=null,Ye=1,tS(i,a,c,f)}finally{Vr.transition=g,Ye=f}return null}function tS(i,a,c,f){do bl();while(Hi!==null);if((at&6)!==0)throw Error(n(327));c=i.finishedWork;var g=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var _=c.lanes|c.childLanes;if(yt(i,_),i===un&&(Zt=un=null,kn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Th||(Th=!0,rw(Rr,function(){return bl(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=Vr.transition,Vr.transition=null;var T=Ye;Ye=1;var L=at;at|=4,Fm.current=null,Q1(i,c),$_(c,i),b1(Gp),Oi=!!Kp,Gp=Kp=null,i.current=c,Z1(c),Rp(),at=L,Ye=T,Vr.transition=_}else i.current=c;if(Th&&(Th=!1,Hi=i,Ih=g),_=i.pendingLanes,_===0&&(qi=null),Ad(c.stateNode),cr(i,_t()),a!==null)for(f=i.onRecoverableError,c=0;c<a.length;c++)g=a[c],f(g.value,{componentStack:g.stack,digest:g.digest});if(Eh)throw Eh=!1,i=Bm,Bm=null,i;return(Ih&1)!==0&&i.tag!==0&&bl(),_=i.pendingLanes,(_&1)!==0?i===$m?iu++:(iu=0,$m=i):iu=0,Ui(),null}function bl(){if(Hi!==null){var i=ji(Ih),a=Vr.transition,c=Ye;try{if(Vr.transition=null,Ye=16>i?16:i,Hi===null)var f=!1;else{if(i=Hi,Hi=null,Ih=0,(at&6)!==0)throw Error(n(331));var g=at;for(at|=4,ye=i.current;ye!==null;){var _=ye,T=_.child;if((ye.flags&16)!==0){var L=_.deletions;if(L!==null){for(var F=0;F<L.length;F++){var Y=L[F];for(ye=Y;ye!==null;){var ie=ye;switch(ie.tag){case 0:case 11:case 15:nu(8,ie,_)}var ae=ie.child;if(ae!==null)ae.return=ie,ye=ae;else for(;ye!==null;){ie=ye;var se=ie.sibling,fe=ie.return;if(V_(ie),ie===Y){ye=null;break}if(se!==null){se.return=fe,ye=se;break}ye=fe}}}var ve=_.alternate;if(ve!==null){var xe=ve.child;if(xe!==null){ve.child=null;do{var $t=xe.sibling;xe.sibling=null,xe=$t}while(xe!==null)}}ye=_}}if((_.subtreeFlags&2064)!==0&&T!==null)T.return=_,ye=T;else e:for(;ye!==null;){if(_=ye,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:nu(9,_,_.return)}var H=_.sibling;if(H!==null){H.return=_.return,ye=H;break e}ye=_.return}}var B=i.current;for(ye=B;ye!==null;){T=ye;var Q=T.child;if((T.subtreeFlags&2064)!==0&&Q!==null)Q.return=T,ye=Q;else e:for(T=B;ye!==null;){if(L=ye,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:bh(9,L)}}catch(Ee){Ft(L,L.return,Ee)}if(L===T){ye=null;break e}var le=L.sibling;if(le!==null){le.return=L.return,ye=le;break e}ye=L.return}}if(at=g,Ui(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot($o,i)}catch{}f=!0}return f}finally{Ye=c,Vr.transition=a}}return!1}function ew(i,a,c){a=yl(c,a),a=v_(i,a,1),i=$i(i,a,1),a=qn(),i!==null&&(Ri(i,1,a),cr(i,a))}function Ft(i,a,c){if(i.tag===3)ew(i,i,c);else for(;a!==null;){if(a.tag===3){ew(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(qi===null||!qi.has(f))){i=yl(c,i),i=__(a,i,1),a=$i(a,i,1),i=qn(),a!==null&&(Ri(a,1,i),cr(a,i));break}}a=a.return}}function nS(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),a=qn(),i.pingedLanes|=i.suspendedLanes&c,un===i&&(kn&c)===c&&(nn===4||nn===3&&(kn&130023424)===kn&&500>_t()-Um?ia(i,0):zm|=c),cr(i,a)}function tw(i,a){a===0&&((i.mode&1)===0?a=1:(a=Wa,Wa<<=1,(Wa&130023424)===0&&(Wa=4194304)));var c=qn();i=ei(i,a),i!==null&&(Ri(i,a,c),cr(i,c))}function rS(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),tw(i,c)}function sS(i,a){var c=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(a),tw(i,c)}var nw;nw=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||ir.current)ar=!0;else{if((i.lanes&c)===0&&(a.flags&128)===0)return ar=!1,q1(i,a,c);ar=(i.flags&131072)!==0}else ar=!1,Ct&&(a.flags&1048576)!==0&&Ov(a,sh,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;_h(i,a),i=a.pendingProps;var g=cl(a,Pn.current);ml(a,c),g=vm(null,a,f,i,g,c);var _=_m();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,or(f)?(_=!0,th(a)):_=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,dm(a),g.updater=yh,a.stateNode=g,g._reactInternals=a,Tm(a,f,i,c),a=Am(null,a,f,!0,_,c)):(a.tag=0,Ct&&_&&tm(a),Wn(null,a,g,c),a=a.child),a;case 16:f=a.elementType;e:{switch(_h(i,a),i=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=oS(f),i=is(f,i),g){case 0:a=Cm(null,a,f,i,c);break e;case 1:a=C_(null,a,f,i,c);break e;case 11:a=k_(null,a,f,i,c);break e;case 14:a=E_(null,a,f,is(f.type,i),c);break e}throw Error(n(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:is(f,g),Cm(i,a,f,g,c);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:is(f,g),C_(i,a,f,g,c);case 3:e:{if(A_(a),i===null)throw Error(n(387));f=a.pendingProps,_=a.memoizedState,g=_.element,Wv(i,a),uh(a,f,null,c);var T=a.memoizedState;if(f=T.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){g=yl(Error(n(423)),a),a=N_(i,a,f,c,g);break e}else if(f!==g){g=yl(Error(n(424)),a),a=N_(i,a,f,c,g);break e}else for(xr=Vi(a.stateNode.containerInfo.firstChild),br=a,Ct=!0,ss=null,c=Bv(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(hl(),f===g){a=ni(i,a,c);break e}Wn(i,a,f,c)}a=a.child}return a;case 5:return Kv(a),i===null&&sm(a),f=a.type,g=a.pendingProps,_=i!==null?i.memoizedProps:null,T=g.children,Qp(f,g)?T=null:_!==null&&Qp(f,_)&&(a.flags|=32),S_(i,a),Wn(i,a,T,c),a.child;case 6:return i===null&&sm(a),null;case 13:return R_(i,a,c);case 4:return hm(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=fl(a,null,f,c):Wn(i,a,f,c),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:is(f,g),k_(i,a,f,g,c);case 7:return Wn(i,a,a.pendingProps,c),a.child;case 8:return Wn(i,a,a.pendingProps.children,c),a.child;case 12:return Wn(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,_=a.memoizedProps,T=g.value,wt(ah,f._currentValue),f._currentValue=T,_!==null)if(rs(_.value,T)){if(_.children===g.children&&!ir.current){a=ni(i,a,c);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var L=_.dependencies;if(L!==null){T=_.child;for(var F=L.firstContext;F!==null;){if(F.context===f){if(_.tag===1){F=ti(-1,c&-c),F.tag=2;var Y=_.updateQueue;if(Y!==null){Y=Y.shared;var ie=Y.pending;ie===null?F.next=F:(F.next=ie.next,ie.next=F),Y.pending=F}}_.lanes|=c,F=_.alternate,F!==null&&(F.lanes|=c),cm(_.return,c,a),L.lanes|=c;break}F=F.next}}else if(_.tag===10)T=_.type===a.type?null:_.child;else if(_.tag===18){if(T=_.return,T===null)throw Error(n(341));T.lanes|=c,L=T.alternate,L!==null&&(L.lanes|=c),cm(T,c,a),T=_.sibling}else T=_.child;if(T!==null)T.return=_;else for(T=_;T!==null;){if(T===a){T=null;break}if(_=T.sibling,_!==null){_.return=T.return,T=_;break}T=T.return}_=T}Wn(i,a,g.children,c),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,ml(a,c),g=Lr(g),f=f(g),a.flags|=1,Wn(i,a,f,c),a.child;case 14:return f=a.type,g=is(f,a.pendingProps),g=is(f.type,g),E_(i,a,f,g,c);case 15:return T_(i,a,a.type,a.pendingProps,c);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:is(f,g),_h(i,a),a.tag=1,or(f)?(i=!0,th(a)):i=!1,ml(a,c),g_(a,f,g),Tm(a,f,g,c),Am(null,a,f,!0,i,c);case 19:return j_(i,a,c);case 22:return I_(i,a,c)}throw Error(n(156,a.tag))};function rw(i,a){return Ba(i,a)}function iS(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(i,a,c,f){return new iS(i,a,c,f)}function Qm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function oS(i){if(typeof i=="function")return Qm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===M)return 11;if(i===nt)return 14}return 2}function Qi(i,a){var c=i.alternate;return c===null?(c=Fr(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Nh(i,a,c,f,g,_){var T=2;if(f=i,typeof i=="function")Qm(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case A:return aa(c.children,g,_,a);case k:T=8,g|=8;break;case R:return i=Fr(12,c,a,g|2),i.elementType=R,i.lanes=_,i;case j:return i=Fr(13,c,a,g),i.elementType=j,i.lanes=_,i;case Ce:return i=Fr(19,c,a,g),i.elementType=Ce,i.lanes=_,i;case Ne:return Rh(c,g,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case P:T=10;break e;case D:T=9;break e;case M:T=11;break e;case nt:T=14;break e;case Qe:T=16,f=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return a=Fr(T,c,a,g),a.elementType=i,a.type=f,a.lanes=_,a}function aa(i,a,c,f){return i=Fr(7,i,f,a),i.lanes=c,i}function Rh(i,a,c,f){return i=Fr(22,i,f,a),i.elementType=Ne,i.lanes=c,i.stateNode={isHidden:!1},i}function Zm(i,a,c){return i=Fr(6,i,null,a),i.lanes=c,i}function Ym(i,a,c){return a=Fr(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function aS(i,a,c,f,g){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ni(0),this.expirationTimes=Ni(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Jm(i,a,c,f,g,_,T,L,F){return i=new aS(i,a,c,L,F),a===1?(a=1,_===!0&&(a|=8)):a=0,_=Fr(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},dm(_),i}function lS(i,a,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:f==null?null:""+f,children:i,containerInfo:a,implementation:c}}function sw(i){if(!i)return zi;i=i._reactInternals;e:{if(Zr(i)!==i||i.tag!==1)throw Error(n(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(or(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(i.tag===1){var c=i.type;if(or(c))return Pv(i,c,a)}return a}function iw(i,a,c,f,g,_,T,L,F){return i=Jm(c,f,!0,i,g,_,T,L,F),i.context=sw(null),c=i.current,f=qn(),g=Ki(c),_=ti(f,g),_.callback=a??null,$i(c,_,g),i.current.lanes=g,Ri(i,g,f),cr(i,f),i}function Ph(i,a,c,f){var g=a.current,_=qn(),T=Ki(g);return c=sw(c),a.context===null?a.context=c:a.pendingContext=c,a=ti(_,T),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=$i(g,a,T),i!==null&&(ls(i,g,T,_),ch(i,g,T)),T}function jh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function ow(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Xm(i,a){ow(i,a),(i=i.alternate)&&ow(i,a)}function cS(){return null}var aw=typeof reportError=="function"?reportError:function(i){console.error(i)};function eg(i){this._internalRoot=i}Dh.prototype.render=eg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));Ph(i,a,null,null)},Dh.prototype.unmount=eg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;sa(function(){Ph(null,i,null,null)}),a[Zs]=null}};function Dh(i){this._internalRoot=i}Dh.prototype.unstable_scheduleHydration=function(i){if(i){var a=Dd();i={blockedOn:null,target:i,priority:a};for(var c=0;c<xs.length&&a!==0&&a<xs[c].priority;c++);xs.splice(c,0,i),c===0&&Md(i)}};function tg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Oh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function lw(){}function uS(i,a,c,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var Y=jh(T);_.call(Y)}}var T=iw(a,f,i,0,null,!1,!1,"",lw);return i._reactRootContainer=T,i[Zs]=T.current,$c(i.nodeType===8?i.parentNode:i),sa(),T}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var L=f;f=function(){var Y=jh(F);L.call(Y)}}var F=Jm(i,0,!1,null,null,!1,!1,"",lw);return i._reactRootContainer=F,i[Zs]=F.current,$c(i.nodeType===8?i.parentNode:i),sa(function(){Ph(a,F,c,f)}),F}function Lh(i,a,c,f,g){var _=c._reactRootContainer;if(_){var T=_;if(typeof g=="function"){var L=g;g=function(){var F=jh(T);L.call(F)}}Ph(a,T,i,g)}else T=uS(c,a,i,g,f);return jh(T)}Pd=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=Ai(a.pendingLanes);c!==0&&(Pi(a,c|1),cr(a,_t()),(at&6)===0&&(wl=_t()+500,Ui()))}break;case 13:sa(function(){var f=ei(i,1);if(f!==null){var g=qn();ls(f,i,1,g)}}),Xm(i,1)}},qa=function(i){if(i.tag===13){var a=ei(i,134217728);if(a!==null){var c=qn();ls(a,i,134217728,c)}Xm(i,134217728)}},jd=function(i){if(i.tag===13){var a=Ki(i),c=ei(i,a);if(c!==null){var f=qn();ls(c,i,a,f)}Xm(i,a)}},Dd=function(){return Ye},Od=function(i,a){var c=Ye;try{return Ye=i,a()}finally{Ye=c}},Si=function(i,a,c){switch(a){case"input":if(Ei(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var g=Xd(f);if(!g)throw Error(n(90));pt(f),Ei(f,g)}}}break;case"textarea":$s(i,c);break;case"select":a=c.value,a!=null&&er(i,!!c.multiple,a,!1)}},Ht=Hm,Xt=sa;var dS={usingClientEntryPoint:!1,Events:[Hc,al,Xd,It,nr,Hm]},ou={findFiberByHostInstance:Zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hS={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Sc(i),i===null?null:i.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||cS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{$o=Mh.inject(hS),yr=Mh}catch{}}return ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dS,ur.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tg(a))throw Error(n(200));return lS(i,a,null,c)},ur.createRoot=function(i,a){if(!tg(i))throw Error(n(299));var c=!1,f="",g=aw;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Jm(i,1,!1,null,null,c,!1,f,g),i[Zs]=a.current,$c(i.nodeType===8?i.parentNode:i),new eg(a)},ur.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Sc(a),i=i===null?null:i.stateNode,i},ur.flushSync=function(i){return sa(i)},ur.hydrate=function(i,a,c){if(!Oh(a))throw Error(n(200));return Lh(null,i,a,!0,c)},ur.hydrateRoot=function(i,a,c){if(!tg(i))throw Error(n(405));var f=c!=null&&c.hydratedSources||null,g=!1,_="",T=aw;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),a=iw(a,null,i,1,c??null,g,!1,_,T),i[Zs]=a.current,$c(i),f)for(i=0;i<f.length;i++)c=f[i],g=c._getVersion,g=g(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,g]:a.mutableSourceEagerHydrationData.push(c,g);return new Dh(a)},ur.render=function(i,a,c){if(!Oh(a))throw Error(n(200));return Lh(null,i,a,!1,c)},ur.unmountComponentAtNode=function(i){if(!Oh(i))throw Error(n(40));return i._reactRootContainer?(sa(function(){Lh(null,null,i,!1,function(){i._reactRootContainer=null,i[Zs]=null})}),!0):!1},ur.unstable_batchedUpdates=Hm,ur.unstable_renderSubtreeIntoContainer=function(i,a,c,f){if(!Oh(c))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Lh(i,a,c,!1,f)},ur.version="18.3.1-next-f1338f8080-20240426",ur}var Cw;function fk(){if(Cw)return ig.exports;Cw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ig.exports=iC(),ig.exports}var Aw;function oC(){if(Aw)return zh;Aw=1;var t=fk();return zh.createRoot=t.createRoot,zh.hydrateRoot=t.hydrateRoot,zh}var aC=oC();const lC=nk(aC);var mo=fk();function cC(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Gf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function oc(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Py(t){return"nodeType"in t}function Xn(t){var e,n;return t?oc(t)?t:Py(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function jy(t){const{Document:e}=Xn(t);return t instanceof e}function td(t){return oc(t)?!1:t instanceof Xn(t).HTMLElement}function pk(t){return t instanceof Xn(t).SVGElement}function ac(t){return t?oc(t)?t.document:Py(t)?jy(t)?t:td(t)||pk(t)?t.ownerDocument:document:document:document}const hs=Gf?O.useLayoutEffect:O.useEffect;function Qf(t){const e=O.useRef(t);return hs(()=>{e.current=t}),O.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function uC(){const t=O.useRef(null),e=O.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=O.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Ru(t,e){e===void 0&&(e=[t]);const n=O.useRef(t);return hs(()=>{n.current!==t&&(n.current=t)},e),n}function nd(t,e){const n=O.useRef();return O.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function xf(t){const e=Qf(t),n=O.useRef(null),r=O.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function kf(t){const e=O.useRef();return O.useEffect(()=>{e.current=t},[t]),e.current}let lg={};function rd(t,e){return O.useMemo(()=>{if(e)return e;const n=lg[t]==null?0:lg[t]+1;return lg[t]=n,t+"-"+n},[t,e])}function mk(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,l)=>{const u=Object.entries(l);for(const[d,m]of u){const y=o[d];y!=null&&(o[d]=y+t*m)}return o},{...e})}}const Nl=mk(1),Pu=mk(-1);function dC(t){return"clientX"in t&&"clientY"in t}function Zf(t){if(!t)return!1;const{KeyboardEvent:e}=Xn(t.target);return e&&t instanceof e}function hC(t){if(!t)return!1;const{TouchEvent:e}=Xn(t.target);return e&&t instanceof e}function Ef(t){if(hC(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return dC(t)?{x:t.clientX,y:t.clientY}:null}const Vs=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Vs.Translate.toString(t),Vs.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Nw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function fC(t){return t.matches(Nw)?t:t.querySelector(Nw)}const pC={display:"none"};function mC(t){let{id:e,value:n}=t;return Le.createElement("div",{id:e,style:pC},n)}function gC(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Le.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function yC(){const[t,e]=O.useState("");return{announce:O.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const gk=O.createContext(null);function vC(t){const e=O.useContext(gk);O.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function _C(){const[t]=O.useState(()=>new Set),e=O.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[O.useCallback(r=>{let{type:s,event:o}=r;t.forEach(l=>{var u;return(u=l[s])==null?void 0:u.call(l,o)})},[t]),e]}const wC={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},bC={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function xC(t){let{announcements:e=bC,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=wC}=t;const{announce:o,announcement:l}=yC(),u=rd("DndLiveRegion"),[d,m]=O.useState(!1);if(O.useEffect(()=>{m(!0)},[]),vC(O.useMemo(()=>({onDragStart(w){let{active:x}=w;o(e.onDragStart({active:x}))},onDragMove(w){let{active:x,over:E}=w;e.onDragMove&&o(e.onDragMove({active:x,over:E}))},onDragOver(w){let{active:x,over:E}=w;o(e.onDragOver({active:x,over:E}))},onDragEnd(w){let{active:x,over:E}=w;o(e.onDragEnd({active:x,over:E}))},onDragCancel(w){let{active:x,over:E}=w;o(e.onDragCancel({active:x,over:E}))}}),[o,e])),!d)return null;const y=Le.createElement(Le.Fragment,null,Le.createElement(mC,{id:r,value:s.draggable}),Le.createElement(gC,{id:u,announcement:l}));return n?mo.createPortal(y,n):y}var sn;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(sn||(sn={}));function Tf(){}function ko(t,e){return O.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Yf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const fs=Object.freeze({x:0,y:0});function yk(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function kC(t,e){const n=Ef(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function vk(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function EC(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Rw(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function _k(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Pw(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Jf=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Pw(e,e.left,e.top),o=[];for(const l of r){const{id:u}=l,d=n.get(u);if(d){const m=yk(Pw(d),s);o.push({id:u,data:{droppableContainer:l,value:m}})}}return o.sort(vk)},TC=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Rw(e),o=[];for(const l of r){const{id:u}=l,d=n.get(u);if(d){const m=Rw(d),y=s.reduce((x,E,N)=>x+yk(m[N],E),0),w=Number((y/4).toFixed(4));o.push({id:u,data:{droppableContainer:l,value:w}})}}return o.sort(vk)};function IC(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),l=s-r,u=o-n;if(r<s&&n<o){const d=e.width*e.height,m=t.width*t.height,y=l*u,w=y/(d+m-y);return Number(w.toFixed(4))}return 0}const SC=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=IC(u,e);d>0&&s.push({id:l,data:{droppableContainer:o,value:d}})}}return s.sort(EC)};function CC(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function wk(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:fs}function AC(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((l,u)=>({...l,top:l.top+t*u.y,bottom:l.bottom+t*u.y,left:l.left+t*u.x,right:l.right+t*u.x}),{...n})}}const NC=AC(1);function bk(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function RC(t,e,n){const r=bk(e);if(!r)return t;const{scaleX:s,scaleY:o,x:l,y:u}=r,d=t.left-l-(1-s)*parseFloat(n),m=t.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),y=s?t.width/s:t.width,w=o?t.height/o:t.height;return{width:y,height:w,top:m,right:d+y,bottom:m+w,left:d}}const PC={ignoreTransform:!1};function lc(t,e){e===void 0&&(e=PC);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:y}=Xn(t).getComputedStyle(t);m&&(n=RC(n,m,y))}const{top:r,left:s,width:o,height:l,bottom:u,right:d}=n;return{top:r,left:s,width:o,height:l,bottom:u,right:d}}function jw(t){return lc(t,{ignoreTransform:!0})}function jC(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function DC(t,e){return e===void 0&&(e=Xn(t).getComputedStyle(t)),e.position==="fixed"}function OC(t,e){e===void 0&&(e=Xn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=e[s];return typeof o=="string"?n.test(o):!1})}function Xf(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(jy(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!td(s)||pk(s)||n.includes(s))return n;const o=Xn(t).getComputedStyle(s);return s!==t&&OC(s,o)&&n.push(s),DC(s,o)?n:r(s.parentNode)}return t?r(t):n}function xk(t){const[e]=Xf(t,1);return e??null}function cg(t){return!Gf||!t?null:oc(t)?t:Py(t)?jy(t)||t===ac(t).scrollingElement?window:td(t)?t:null:null}function kk(t){return oc(t)?t.scrollX:t.scrollLeft}function Ek(t){return oc(t)?t.scrollY:t.scrollTop}function Bg(t){return{x:kk(t),y:Ek(t)}}var pn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(pn||(pn={}));function Tk(t){return!Gf||!t?!1:t===document.scrollingElement}function Ik(t){const e={x:0,y:0},n=Tk(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,l=t.scrollTop>=r.y,u=t.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:l,isRight:u,maxScroll:r,minScroll:e}}const LC={x:.2,y:.2};function MC(t,e,n,r,s){let{top:o,left:l,right:u,bottom:d}=n;r===void 0&&(r=10),s===void 0&&(s=LC);const{isTop:m,isBottom:y,isLeft:w,isRight:x}=Ik(t),E={x:0,y:0},N={x:0,y:0},I={height:e.height*s.y,width:e.width*s.x};return!m&&o<=e.top+I.height?(E.y=pn.Backward,N.y=r*Math.abs((e.top+I.height-o)/I.height)):!y&&d>=e.bottom-I.height&&(E.y=pn.Forward,N.y=r*Math.abs((e.bottom-I.height-d)/I.height)),!x&&u>=e.right-I.width?(E.x=pn.Forward,N.x=r*Math.abs((e.right-I.width-u)/I.width)):!w&&l<=e.left+I.width&&(E.x=pn.Backward,N.x=r*Math.abs((e.left+I.width-l)/I.width)),{direction:E,speed:N}}function VC(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Sk(t){return t.reduce((e,n)=>Nl(e,Bg(n)),fs)}function FC(t){return t.reduce((e,n)=>e+kk(n),0)}function zC(t){return t.reduce((e,n)=>e+Ek(n),0)}function Ck(t,e){if(e===void 0&&(e=lc),!t)return;const{top:n,left:r,bottom:s,right:o}=e(t);xk(t)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const UC=[["x",["left","right"],FC],["y",["top","bottom"],zC]];class Dy{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Xf(n),s=Sk(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,u]of UC)for(const d of l)Object.defineProperty(this,d,{get:()=>{const m=u(r),y=s[o]-m;return this.rect[d]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class _u{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function BC(t){const{EventTarget:e}=Xn(t);return t instanceof e?t:ac(t)}function ug(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Br;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Br||(Br={}));function Dw(t){t.preventDefault()}function $C(t){t.stopPropagation()}var et;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(et||(et={}));const Ak={start:[et.Space,et.Enter],cancel:[et.Esc],end:[et.Space,et.Enter,et.Tab]},WC=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case et.Right:return{...n,x:n.x+25};case et.Left:return{...n,x:n.x-25};case et.Down:return{...n,y:n.y+25};case et.Up:return{...n,y:n.y-25}}};class sd{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new _u(ac(n)),this.windowListeners=new _u(Xn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Br.Resize,this.handleCancel),this.windowListeners.add(Br.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Br.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Ck(r),n(fs)}handleKeyDown(e){if(Zf(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=Ak,coordinateGetter:l=WC,scrollBehavior:u="smooth"}=s,{code:d}=e;if(o.end.includes(d)){this.handleEnd(e);return}if(o.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:m}=r.current,y=m?{x:m.left,y:m.top}:fs;this.referenceCoordinates||(this.referenceCoordinates=y);const w=l(e,{active:n,context:r.current,currentCoordinates:y});if(w){const x=Pu(w,y),E={x:0,y:0},{scrollableAncestors:N}=r.current;for(const I of N){const S=e.code,{isTop:V,isRight:W,isLeft:U,isBottom:G,maxScroll:Z,minScroll:K}=Ik(I),A=VC(I),k={x:Math.min(S===et.Right?A.right-A.width/2:A.right,Math.max(S===et.Right?A.left:A.left+A.width/2,w.x)),y:Math.min(S===et.Down?A.bottom-A.height/2:A.bottom,Math.max(S===et.Down?A.top:A.top+A.height/2,w.y))},R=S===et.Right&&!W||S===et.Left&&!U,P=S===et.Down&&!G||S===et.Up&&!V;if(R&&k.x!==w.x){const D=I.scrollLeft+x.x,M=S===et.Right&&D<=Z.x||S===et.Left&&D>=K.x;if(M&&!x.y){I.scrollTo({left:D,behavior:u});return}M?E.x=I.scrollLeft-D:E.x=S===et.Right?I.scrollLeft-Z.x:I.scrollLeft-K.x,E.x&&I.scrollBy({left:-E.x,behavior:u});break}else if(P&&k.y!==w.y){const D=I.scrollTop+x.y,M=S===et.Down&&D<=Z.y||S===et.Up&&D>=K.y;if(M&&!x.x){I.scrollTo({top:D,behavior:u});return}M?E.y=I.scrollTop-D:E.y=S===et.Down?I.scrollTop-Z.y:I.scrollTop-K.y,E.y&&I.scrollBy({top:-E.y,behavior:u});break}}this.handleMove(e,Nl(Pu(w,this.referenceCoordinates),E))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sd.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Ak,onActivation:s}=e,{active:o}=n;const{code:l}=t.nativeEvent;if(r.start.includes(l)){const u=o.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Ow(t){return!!(t&&"distance"in t)}function Lw(t){return!!(t&&"delay"in t)}class Oy{constructor(e,n,r){var s;r===void 0&&(r=BC(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:l}=o;this.props=e,this.events=n,this.document=ac(l),this.documentListeners=new _u(this.document),this.listeners=new _u(r),this.windowListeners=new _u(Xn(l)),this.initialCoordinates=(s=Ef(o))!=null?s:fs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Br.Resize,this.handleCancel),this.windowListeners.add(Br.DragStart,Dw),this.windowListeners.add(Br.VisibilityChange,this.handleCancel),this.windowListeners.add(Br.ContextMenu,Dw),this.documentListeners.add(Br.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Lw(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ow(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Br.Click,$C,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Br.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!s)return;const d=(n=Ef(e))!=null?n:fs,m=Pu(s,d);if(!r&&u){if(Ow(u)){if(u.tolerance!=null&&ug(m,u.tolerance))return this.handleCancel();if(ug(m,u.distance))return this.handleStart()}if(Lw(u)&&ug(m,u.tolerance))return this.handleCancel();this.handlePending(u,m);return}e.cancelable&&e.preventDefault(),l(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===et.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const qC={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class cc extends Oy{constructor(e){const{event:n}=e,r=ac(n.target);super(e,qC,r)}}cc.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const HC={move:{name:"mousemove"},end:{name:"mouseup"}};var $g;(function(t){t[t.RightClick=2]="RightClick"})($g||($g={}));class KC extends Oy{constructor(e){super(e,HC,ac(e.event.target))}}KC.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===$g.RightClick?!1:(r==null||r({event:n}),!0)}}];const dg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Nk extends Oy{constructor(e){super(e,dg)}static setup(){return window.addEventListener(dg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(dg.move.name,e)};function e(){}}}Nk.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var wu;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(wu||(wu={}));var If;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(If||(If={}));function GC(t){let{acceleration:e,activator:n=wu.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:l=5,order:u=If.TreeOrder,pointerCoordinates:d,scrollableAncestors:m,scrollableAncestorRects:y,delta:w,threshold:x}=t;const E=ZC({delta:w,disabled:!o}),[N,I]=uC(),S=O.useRef({x:0,y:0}),V=O.useRef({x:0,y:0}),W=O.useMemo(()=>{switch(n){case wu.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case wu.DraggableRect:return s}},[n,s,d]),U=O.useRef(null),G=O.useCallback(()=>{const K=U.current;if(!K)return;const A=S.current.x*V.current.x,k=S.current.y*V.current.y;K.scrollBy(A,k)},[]),Z=O.useMemo(()=>u===If.TreeOrder?[...m].reverse():m,[u,m]);O.useEffect(()=>{if(!o||!m.length||!W){I();return}for(const K of Z){if((r==null?void 0:r(K))===!1)continue;const A=m.indexOf(K),k=y[A];if(!k)continue;const{direction:R,speed:P}=MC(K,k,W,e,x);for(const D of["x","y"])E[D][R[D]]||(P[D]=0,R[D]=0);if(P.x>0||P.y>0){I(),U.current=K,N(G,l),S.current=P,V.current=R;return}}S.current={x:0,y:0},V.current={x:0,y:0},I()},[e,G,r,I,o,l,JSON.stringify(W),JSON.stringify(E),N,m,Z,y,JSON.stringify(x)])}const QC={x:{[pn.Backward]:!1,[pn.Forward]:!1},y:{[pn.Backward]:!1,[pn.Forward]:!1}};function ZC(t){let{delta:e,disabled:n}=t;const r=kf(e);return nd(s=>{if(n||!r||!s)return QC;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[pn.Backward]:s.x[pn.Backward]||o.x===-1,[pn.Forward]:s.x[pn.Forward]||o.x===1},y:{[pn.Backward]:s.y[pn.Backward]||o.y===-1,[pn.Forward]:s.y[pn.Forward]||o.y===1}}},[n,e,r])}function YC(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return nd(s=>{var o;return e==null?null:(o=r??s)!=null?o:null},[r,e])}function JC(t,e){return O.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,r)}));return[...n,...o]},[]),[t,e])}var ju;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ju||(ju={}));var Wg;(function(t){t.Optimized="optimized"})(Wg||(Wg={}));const Mw=new Map;function XC(t,e){let{dragging:n,dependencies:r,config:s}=e;const[o,l]=O.useState(null),{frequency:u,measure:d,strategy:m}=s,y=O.useRef(t),w=S(),x=Ru(w),E=O.useCallback(function(V){V===void 0&&(V=[]),!x.current&&l(W=>W===null?V:W.concat(V.filter(U=>!W.includes(U))))},[x]),N=O.useRef(null),I=nd(V=>{if(w&&!n)return Mw;if(!V||V===Mw||y.current!==t||o!=null){const W=new Map;for(let U of t){if(!U)continue;if(o&&o.length>0&&!o.includes(U.id)&&U.rect.current){W.set(U.id,U.rect.current);continue}const G=U.node.current,Z=G?new Dy(d(G),G):null;U.rect.current=Z,Z&&W.set(U.id,Z)}return W}return V},[t,o,n,w,d]);return O.useEffect(()=>{y.current=t},[t]),O.useEffect(()=>{w||E()},[n,w]),O.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),O.useEffect(()=>{w||typeof u!="number"||N.current!==null||(N.current=setTimeout(()=>{E(),N.current=null},u))},[u,w,E,...r]),{droppableRects:I,measureDroppableContainers:E,measuringScheduled:o!=null};function S(){switch(m){case ju.Always:return!1;case ju.BeforeDragging:return n;default:return!n}}}function Ly(t,e){return nd(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function eA(t,e){return Ly(t,e)}function tA(t){let{callback:e,disabled:n}=t;const r=Qf(e),s=O.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ep(t){let{callback:e,disabled:n}=t;const r=Qf(e),s=O.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function nA(t){return new Dy(lc(t),t)}function Vw(t,e,n){e===void 0&&(e=nA);const[r,s]=O.useState(null);function o(){s(d=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=d??n)!=null?m:null}const y=e(t);return JSON.stringify(d)===JSON.stringify(y)?d:y})}const l=tA({callback(d){if(t)for(const m of d){const{type:y,target:w}=m;if(y==="childList"&&w instanceof HTMLElement&&w.contains(t)){o();break}}}}),u=ep({callback:o});return hs(()=>{o(),t?(u==null||u.observe(t),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[t]),r}function rA(t){const e=Ly(t);return wk(t,e)}const Fw=[];function sA(t){const e=O.useRef(t),n=nd(r=>t?r&&r!==Fw&&t&&e.current&&t.parentNode===e.current.parentNode?r:Xf(t):Fw,[t]);return O.useEffect(()=>{e.current=t},[t]),n}function iA(t){const[e,n]=O.useState(null),r=O.useRef(t),s=O.useCallback(o=>{const l=cg(o.target);l&&n(u=>u?(u.set(l,Bg(l)),new Map(u)):null)},[]);return O.useEffect(()=>{const o=r.current;if(t!==o){l(o);const u=t.map(d=>{const m=cg(d);return m?(m.addEventListener("scroll",s,{passive:!0}),[m,Bg(m)]):null}).filter(d=>d!=null);n(u.length?new Map(u):null),r.current=t}return()=>{l(t),l(o)};function l(u){u.forEach(d=>{const m=cg(d);m==null||m.removeEventListener("scroll",s)})}},[s,t]),O.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,l)=>Nl(o,l),fs):Sk(t):fs,[t,e])}function zw(t,e){e===void 0&&(e=[]);const n=O.useRef(null);return O.useEffect(()=>{n.current=null},e),O.useEffect(()=>{const r=t!==fs;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Pu(t,n.current):fs}function oA(t){O.useEffect(()=>{if(!Gf)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function aA(t,e){return O.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=l=>{o(l,e)},n},{}),[t,e])}function Rk(t){return O.useMemo(()=>t?jC(t):null,[t])}const Uw=[];function lA(t,e){e===void 0&&(e=lc);const[n]=t,r=Rk(n?Xn(n):null),[s,o]=O.useState(Uw);function l(){o(()=>t.length?t.map(d=>Tk(d)?r:new Dy(e(d),d)):Uw)}const u=ep({callback:l});return hs(()=>{u==null||u.disconnect(),l(),t.forEach(d=>u==null?void 0:u.observe(d))},[t]),s}function Pk(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return td(e)?e:t}function cA(t){let{measure:e}=t;const[n,r]=O.useState(null),s=O.useCallback(m=>{for(const{target:y}of m)if(td(y)){r(w=>{const x=e(y);return w?{...w,width:x.width,height:x.height}:x});break}},[e]),o=ep({callback:s}),l=O.useCallback(m=>{const y=Pk(m);o==null||o.disconnect(),y&&(o==null||o.observe(y)),r(y?e(y):null)},[e,o]),[u,d]=xf(l);return O.useMemo(()=>({nodeRef:u,rect:n,setRef:d}),[n,u,d])}const uA=[{sensor:cc,options:{}},{sensor:sd,options:{}}],dA={current:{}},of={draggable:{measure:jw},droppable:{measure:jw,strategy:ju.WhileDragging,frequency:Wg.Optimized},dragOverlay:{measure:lc}};class bu extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const hA={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new bu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Tf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:of,measureDroppableContainers:Tf,windowRect:null,measuringScheduled:!1},jk={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Tf,draggableNodes:new Map,over:null,measureDroppableContainers:Tf},id=O.createContext(jk),Dk=O.createContext(hA);function fA(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new bu}}}function pA(t,e){switch(e.type){case sn.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case sn.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case sn.DragEnd:case sn.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case sn.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new bu(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case sn.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const l=new bu(t.droppable.containers);return l.set(n,{...o,disabled:s}),{...t,droppable:{...t.droppable,containers:l}}}case sn.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new bu(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function mA(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=O.useContext(id),o=kf(r),l=kf(n==null?void 0:n.id);return O.useEffect(()=>{if(!e&&!r&&o&&l!=null){if(!Zf(o)||document.activeElement===o.target)return;const u=s.get(l);if(!u)return;const{activatorNode:d,node:m}=u;if(!d.current&&!m.current)return;requestAnimationFrame(()=>{for(const y of[d.current,m.current]){if(!y)continue;const w=fC(y);if(w){w.focus();break}}})}},[r,e,s,l,o]),null}function Ok(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,o)=>o({transform:s,...r}),n):n}function gA(t){return O.useMemo(()=>({draggable:{...of.draggable,...t==null?void 0:t.draggable},droppable:{...of.droppable,...t==null?void 0:t.droppable},dragOverlay:{...of.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function yA(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const o=O.useRef(!1),{x:l,y:u}=typeof s=="boolean"?{x:s,y:s}:s;hs(()=>{if(!l&&!u||!e){o.current=!1;return}if(o.current||!r)return;const m=e==null?void 0:e.node.current;if(!m||m.isConnected===!1)return;const y=n(m),w=wk(y,r);if(l||(w.x=0),u||(w.y=0),o.current=!0,Math.abs(w.x)>0||Math.abs(w.y)>0){const x=xk(m);x&&x.scrollBy({top:w.y,left:w.x})}},[e,l,u,r,n])}const tp=O.createContext({...fs,scaleX:1,scaleY:1});var to;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(to||(to={}));const np=O.memo(function(e){var n,r,s,o;let{id:l,accessibility:u,autoScroll:d=!0,children:m,sensors:y=uA,collisionDetection:w=SC,measuring:x,modifiers:E,...N}=e;const I=O.useReducer(pA,void 0,fA),[S,V]=I,[W,U]=_C(),[G,Z]=O.useState(to.Uninitialized),K=G===to.Initialized,{draggable:{active:A,nodes:k,translate:R},droppable:{containers:P}}=S,D=A!=null?k.get(A):null,M=O.useRef({initial:null,translated:null}),j=O.useMemo(()=>{var gt;return A!=null?{id:A,data:(gt=D==null?void 0:D.data)!=null?gt:dA,rect:M}:null},[A,D]),Ce=O.useRef(null),[nt,Qe]=O.useState(null),[Ne,X]=O.useState(null),pe=Ru(N,Object.values(N)),de=rd("DndDescribedBy",l),$=O.useMemo(()=>P.getEnabled(),[P]),ee=gA(x),{droppableRects:ce,measureDroppableContainers:be,measuringScheduled:De}=XC($,{dragging:K,dependencies:[R.x,R.y],config:ee.droppable}),Re=YC(k,A),Te=O.useMemo(()=>Ne?Ef(Ne):null,[Ne]),Ue=tr(),ne=eA(Re,ee.draggable.measure);yA({activeNode:A!=null?k.get(A):null,config:Ue.layoutShiftCompensation,initialRect:ne,measure:ee.draggable.measure});const he=Vw(Re,ee.draggable.measure,ne),rt=Vw(Re?Re.parentElement:null),pt=O.useRef({activatorEvent:null,active:null,activeNode:Re,collisionRect:null,collisions:null,droppableRects:ce,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),yn=P.getNodeFor((n=pt.current.over)==null?void 0:n.id),vn=cA({measure:ee.dragOverlay.measure}),mr=(r=vn.nodeRef.current)!=null?r:Re,Cr=K?(s=vn.rect)!=null?s:he:null,Ei=!!(vn.nodeRef.current&&vn.rect),Oo=rA(Ei?null:he),ys=Rk(mr?Xn(mr):null),an=sA(K?yn??Re:null),er=lA(an),vs=Ok(E,{transform:{x:R.x-Oo.x,y:R.y-Oo.y,scaleX:1,scaleY:1},activatorEvent:Ne,active:j,activeNodeRect:he,containerNodeRect:rt,draggingNodeRect:Cr,over:pt.current.over,overlayNodeRect:vn.rect,scrollableAncestors:an,scrollableAncestorRects:er,windowRect:ys}),Bs=Te?Nl(Te,R):null,$s=iA(an),Lo=zw($s),Bt=zw($s,[he]),vt=Nl(vs,Lo),Nn=Cr?NC(Cr,vs):null,Kr=j&&Nn?w({active:j,collisionRect:Nn,droppableRects:ce,droppableContainers:$,pointerCoordinates:Bs}):null,Gr=_k(Kr,"id"),[Rn,_s]=O.useState(null),Mo=Ei?vs:Nl(vs,Bt),Vo=CC(Mo,(o=Rn==null?void 0:Rn.rect)!=null?o:null,he),Ws=O.useRef(null),Ti=O.useCallback((gt,qt)=>{let{sensor:It,options:nr}=qt;if(Ce.current==null)return;const Ht=k.get(Ce.current);if(!Ht)return;const Xt=gt.nativeEvent,Kt=new It({active:Ce.current,activeNode:Ht,event:Xt,options:nr,context:pt,onAbort(qe){if(!k.get(qe))return;const{onDragAbort:Vt}=pe.current,_n={id:qe};Vt==null||Vt(_n),W({type:"onDragAbort",event:_n})},onPending(qe,Un,Vt,_n){if(!k.get(qe))return;const{onDragPending:Nr}=pe.current,Gt={id:qe,constraint:Un,initialCoordinates:Vt,offset:_n};Nr==null||Nr(Gt),W({type:"onDragPending",event:Gt})},onStart(qe){const Un=Ce.current;if(Un==null)return;const Vt=k.get(Un);if(!Vt)return;const{onDragStart:_n}=pe.current,gr={activatorEvent:Xt,active:{id:Un,data:Vt.data,rect:M}};mo.unstable_batchedUpdates(()=>{_n==null||_n(gr),Z(to.Initializing),V({type:sn.DragStart,initialCoordinates:qe,active:Un}),W({type:"onDragStart",event:gr}),Qe(Ws.current),X(Xt)})},onMove(qe){V({type:sn.DragMove,coordinates:qe})},onEnd:Ar(sn.DragEnd),onCancel:Ar(sn.DragCancel)});Ws.current=Kt;function Ar(qe){return async function(){const{active:Vt,collisions:_n,over:gr,scrollAdjustedTranslate:Nr}=pt.current;let Gt=null;if(Vt&&Nr){const{cancelDrop:Qr}=pe.current;Gt={activatorEvent:Xt,active:Vt,collisions:_n,delta:Nr,over:gr},qe===sn.DragEnd&&typeof Qr=="function"&&await Promise.resolve(Qr(Gt))&&(qe=sn.DragCancel)}Ce.current=null,mo.unstable_batchedUpdates(()=>{V({type:qe}),Z(to.Uninitialized),_s(null),Qe(null),X(null),Ws.current=null;const Qr=qe===sn.DragEnd?"onDragEnd":"onDragCancel";if(Gt){const zo=pe.current[Qr];zo==null||zo(Gt),W({type:Qr,event:Gt})}})}}},[k]),Fo=O.useCallback((gt,qt)=>(It,nr)=>{const Ht=It.nativeEvent,Xt=k.get(nr);if(Ce.current!==null||!Xt||Ht.dndKit||Ht.defaultPrevented)return;const Kt={active:Xt};gt(It,qt.options,Kt)===!0&&(Ht.dndKit={capturedBy:qt.sensor},Ce.current=nr,Ti(It,qt))},[k,Ti]),ws=JC(y,Fo);oA(y),hs(()=>{he&&G===to.Initializing&&Z(to.Initialized)},[he,G]),O.useEffect(()=>{const{onDragMove:gt}=pe.current,{active:qt,activatorEvent:It,collisions:nr,over:Ht}=pt.current;if(!qt||!It)return;const Xt={active:qt,activatorEvent:It,collisions:nr,delta:{x:vt.x,y:vt.y},over:Ht};mo.unstable_batchedUpdates(()=>{gt==null||gt(Xt),W({type:"onDragMove",event:Xt})})},[vt.x,vt.y]),O.useEffect(()=>{const{active:gt,activatorEvent:qt,collisions:It,droppableContainers:nr,scrollAdjustedTranslate:Ht}=pt.current;if(!gt||Ce.current==null||!qt||!Ht)return;const{onDragOver:Xt}=pe.current,Kt=nr.get(Gr),Ar=Kt&&Kt.rect.current?{id:Kt.id,rect:Kt.rect.current,data:Kt.data,disabled:Kt.disabled}:null,qe={active:gt,activatorEvent:qt,collisions:It,delta:{x:Ht.x,y:Ht.y},over:Ar};mo.unstable_batchedUpdates(()=>{_s(Ar),Xt==null||Xt(qe),W({type:"onDragOver",event:qe})})},[Gr]),hs(()=>{pt.current={activatorEvent:Ne,active:j,activeNode:Re,collisionRect:Nn,collisions:Kr,droppableRects:ce,draggableNodes:k,draggingNode:mr,draggingNodeRect:Cr,droppableContainers:P,over:Rn,scrollableAncestors:an,scrollAdjustedTranslate:vt},M.current={initial:Cr,translated:Nn}},[j,Re,Kr,Nn,k,mr,Cr,ce,P,Rn,an,vt]),GC({...Ue,delta:R,draggingRect:Nn,pointerCoordinates:Bs,scrollableAncestors:an,scrollableAncestorRects:er});const Ii=O.useMemo(()=>({active:j,activeNode:Re,activeNodeRect:he,activatorEvent:Ne,collisions:Kr,containerNodeRect:rt,dragOverlay:vn,draggableNodes:k,droppableContainers:P,droppableRects:ce,over:Rn,measureDroppableContainers:be,scrollableAncestors:an,scrollableAncestorRects:er,measuringConfiguration:ee,measuringScheduled:De,windowRect:ys}),[j,Re,he,Ne,Kr,rt,vn,k,P,ce,Rn,be,an,er,ee,De,ys]),Si=O.useMemo(()=>({activatorEvent:Ne,activators:ws,active:j,activeNodeRect:he,ariaDescribedById:{draggable:de},dispatch:V,draggableNodes:k,over:Rn,measureDroppableContainers:be}),[Ne,ws,j,he,V,de,k,Rn,be]);return Le.createElement(gk.Provider,{value:U},Le.createElement(id.Provider,{value:Si},Le.createElement(Dk.Provider,{value:Ii},Le.createElement(tp.Provider,{value:Vo},m)),Le.createElement(mA,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Le.createElement(xC,{...u,hiddenTextDescribedById:de}));function tr(){const gt=(nt==null?void 0:nt.autoScrollEnabled)===!1,qt=typeof d=="object"?d.enabled===!1:d===!1,It=K&&!gt&&!qt;return typeof d=="object"?{...d,enabled:It}:{enabled:It}}}),vA=O.createContext(null),Bw="button",_A="Draggable";function wA(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const o=rd(_A),{activators:l,activatorEvent:u,active:d,activeNodeRect:m,ariaDescribedById:y,draggableNodes:w,over:x}=O.useContext(id),{role:E=Bw,roleDescription:N="draggable",tabIndex:I=0}=s??{},S=(d==null?void 0:d.id)===e,V=O.useContext(S?tp:vA),[W,U]=xf(),[G,Z]=xf(),K=aA(l,e),A=Ru(n);hs(()=>(w.set(e,{id:e,key:o,node:W,activatorNode:G,data:A}),()=>{const R=w.get(e);R&&R.key===o&&w.delete(e)}),[w,e]);const k=O.useMemo(()=>({role:E,tabIndex:I,"aria-disabled":r,"aria-pressed":S&&E===Bw?!0:void 0,"aria-roledescription":N,"aria-describedby":y.draggable}),[r,E,I,S,N,y.draggable]);return{active:d,activatorEvent:u,activeNodeRect:m,attributes:k,isDragging:S,listeners:r?void 0:K,node:W,over:x,setNodeRef:U,setActivatorNodeRef:Z,transform:V}}function Lk(){return O.useContext(Dk)}const bA="Droppable",xA={timeout:25};function uc(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const o=rd(bA),{active:l,dispatch:u,over:d,measureDroppableContainers:m}=O.useContext(id),y=O.useRef({disabled:n}),w=O.useRef(!1),x=O.useRef(null),E=O.useRef(null),{disabled:N,updateMeasurementsFor:I,timeout:S}={...xA,...s},V=Ru(I??r),W=O.useCallback(()=>{if(!w.current){w.current=!0;return}E.current!=null&&clearTimeout(E.current),E.current=setTimeout(()=>{m(Array.isArray(V.current)?V.current:[V.current]),E.current=null},S)},[S]),U=ep({callback:W,disabled:N||!l}),G=O.useCallback((k,R)=>{U&&(R&&(U.unobserve(R),w.current=!1),k&&U.observe(k))},[U]),[Z,K]=xf(G),A=Ru(e);return O.useEffect(()=>{!U||!Z.current||(U.disconnect(),w.current=!1,U.observe(Z.current))},[Z,U]),O.useEffect(()=>(u({type:sn.RegisterDroppable,element:{id:r,key:o,disabled:n,node:Z,rect:x,data:A}}),()=>u({type:sn.UnregisterDroppable,key:o,id:r})),[r]),O.useEffect(()=>{n!==y.current.disabled&&(u({type:sn.SetDroppableDisabled,id:r,key:o,disabled:n}),y.current.disabled=n)},[r,o,n,u]),{active:l,rect:x,isOver:(d==null?void 0:d.id)===r,node:Z,over:d,setNodeRef:K}}function kA(t){let{animation:e,children:n}=t;const[r,s]=O.useState(null),[o,l]=O.useState(null),u=kf(n);return!n&&!r&&u&&s(u),hs(()=>{if(!o)return;const d=r==null?void 0:r.key,m=r==null?void 0:r.props.id;if(d==null||m==null){s(null);return}Promise.resolve(e(m,o)).then(()=>{s(null)})},[e,r,o]),Le.createElement(Le.Fragment,null,n,r?O.cloneElement(r,{ref:l}):null)}const EA={x:0,y:0,scaleX:1,scaleY:1};function TA(t){let{children:e}=t;return Le.createElement(id.Provider,{value:jk},Le.createElement(tp.Provider,{value:EA},e))}const IA={position:"fixed",touchAction:"none"},SA=t=>Zf(t)?"transform 250ms ease":void 0,CA=O.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:l,rect:u,style:d,transform:m,transition:y=SA}=t;if(!u)return null;const w=s?m:{...m,scaleX:1,scaleY:1},x={...IA,width:u.width,height:u.height,top:u.top,left:u.left,transform:Vs.Transform.toString(w),transformOrigin:s&&r?kC(r,u):void 0,transition:typeof y=="function"?y(r):y,...d};return Le.createElement(n,{className:l,style:x,ref:e},o)}),AA=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:o,className:l}=t;if(o!=null&&o.active)for(const[u,d]of Object.entries(o.active))d!==void 0&&(s[u]=n.node.style.getPropertyValue(u),n.node.style.setProperty(u,d));if(o!=null&&o.dragOverlay)for(const[u,d]of Object.entries(o.dragOverlay))d!==void 0&&r.node.style.setProperty(u,d);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[d,m]of Object.entries(s))n.node.style.setProperty(d,m);l!=null&&l.active&&n.node.classList.remove(l.active)}},NA=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Vs.Transform.toString(e)},{transform:Vs.Transform.toString(n)}]},RA={duration:250,easing:"ease",keyframes:NA,sideEffects:AA({styles:{active:{opacity:"0"}}})};function PA(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return Qf((o,l)=>{if(e===null)return;const u=n.get(o);if(!u)return;const d=u.node.current;if(!d)return;const m=Pk(l);if(!m)return;const{transform:y}=Xn(l).getComputedStyle(l),w=bk(y);if(!w)return;const x=typeof e=="function"?e:jA(e);return Ck(d,s.draggable.measure),x({active:{id:o,data:u.data,node:d,rect:s.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:l,rect:s.dragOverlay.measure(m)},droppableContainers:r,measuringConfiguration:s,transform:w})})}function jA(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...RA,...t};return o=>{let{active:l,dragOverlay:u,transform:d,...m}=o;if(!e)return;const y={x:u.rect.left-l.rect.left,y:u.rect.top-l.rect.top},w={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/u.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/u.rect.height:1},x={x:d.x-y.x,y:d.y-y.y,...w},E=s({...m,active:l,dragOverlay:u,transform:{initial:d,final:x}}),[N]=E,I=E[E.length-1];if(JSON.stringify(N)===JSON.stringify(I))return;const S=r==null?void 0:r({active:l,dragOverlay:u,...m}),V=u.node.animate(E,{duration:e,easing:n,fill:"forwards"});return new Promise(W=>{V.onfinish=()=>{S==null||S(),W()}})}}let $w=0;function DA(t){return O.useMemo(()=>{if(t!=null)return $w++,$w},[t])}const OA=Le.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:l,wrapperElement:u="div",className:d,zIndex:m=999}=t;const{activatorEvent:y,active:w,activeNodeRect:x,containerNodeRect:E,draggableNodes:N,droppableContainers:I,dragOverlay:S,over:V,measuringConfiguration:W,scrollableAncestors:U,scrollableAncestorRects:G,windowRect:Z}=Lk(),K=O.useContext(tp),A=DA(w==null?void 0:w.id),k=Ok(l,{activatorEvent:y,active:w,activeNodeRect:x,containerNodeRect:E,draggingNodeRect:S.rect,over:V,overlayNodeRect:S.rect,scrollableAncestors:U,scrollableAncestorRects:G,transform:K,windowRect:Z}),R=Ly(x),P=PA({config:r,draggableNodes:N,droppableContainers:I,measuringConfiguration:W}),D=R?S.setRef:void 0;return Le.createElement(TA,null,Le.createElement(kA,{animation:P},w&&A?Le.createElement(CA,{key:A,id:w.id,ref:D,as:u,activatorEvent:y,adjustScale:e,className:d,transition:o,rect:R,style:{zIndex:m,...s},transform:k},n):null))});var Ww={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},LA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],u=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Vk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,u=l?t[s+1]:0,d=s+2<t.length,m=d?t[s+2]:0,y=o>>2,w=(o&3)<<4|u>>4;let x=(u&15)<<2|m>>6,E=m&63;d||(E=64,l||(x=64)),r.push(n[y],n[w],n[x],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Mk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||u==null||m==null||w==null)throw new MA;const x=o<<2|u>>4;if(r.push(x),m!==64){const E=u<<4&240|m>>2;if(r.push(E),w!==64){const N=m<<6&192|w;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VA=function(t){const e=Mk(t);return Vk.encodeByteArray(e,!0)},Sf=function(t){return VA(t).replace(/\./g,"")},Fk=function(t){try{return Vk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=()=>FA().__FIREBASE_DEFAULTS__,UA=()=>{if(typeof process>"u"||typeof Ww>"u")return;const t=Ww.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fk(t[1]);return e&&JSON.parse(e)},rp=()=>{try{return zA()||UA()||BA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zk=t=>{var e,n;return(n=(e=rp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$A=t=>{const e=zk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Uk=()=>{var t;return(t=rp())===null||t===void 0?void 0:t.config},Bk=t=>{var e;return(e=rp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sf(JSON.stringify(n)),Sf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function KA(){var t;const e=(t=rp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ZA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YA(){const t=zn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JA(){return!KA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XA(){try{return typeof indexedDB=="object"}catch{return!1}}function e2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="FirebaseError";class wi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=t2,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,od.prototype.create)}}class od{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?n2(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new wi(s,u,r)}}function n2(t,e){return t.replace(r2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const r2=/\{\$([^}]+)}/g;function s2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(qw(o)&&qw(l)){if(!Cf(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function fu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function i2(t,e){const n=new o2(t,e);return n.subscribe.bind(n)}class o2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");a2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hg),s.error===void 0&&(s.error=hg),s.complete===void 0&&(s.complete=hg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function a2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class Ia{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new WA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u2(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c2(t){return t===ca?void 0:t}function u2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new l2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tt||(tt={}));const h2={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},f2=tt.INFO,p2={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},m2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=p2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class My{constructor(e){this.name=e,this._logLevel=f2,this._logHandler=m2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const g2=(t,e)=>e.some(n=>t instanceof n);let Hw,Kw;function y2(){return Hw||(Hw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v2(){return Kw||(Kw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $k=new WeakMap,qg=new WeakMap,Wk=new WeakMap,fg=new WeakMap,Vy=new WeakMap;function _2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(vo(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&$k.set(n,t)}).catch(()=>{}),Vy.set(e,t),e}function w2(t){if(qg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});qg.set(t,e)}let Hg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function b2(t){Hg=t(Hg)}function x2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pg(this),e,...n);return Wk.set(r,e.sort?e.sort():[e]),vo(r)}:v2().includes(t)?function(...e){return t.apply(pg(this),e),vo($k.get(this))}:function(...e){return vo(t.apply(pg(this),e))}}function k2(t){return typeof t=="function"?x2(t):(t instanceof IDBTransaction&&w2(t),g2(t,y2())?new Proxy(t,Hg):t)}function vo(t){if(t instanceof IDBRequest)return _2(t);if(fg.has(t))return fg.get(t);const e=k2(t);return e!==t&&(fg.set(t,e),Vy.set(e,t)),e}const pg=t=>Vy.get(t);function E2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),u=vo(l);return r&&l.addEventListener("upgradeneeded",d=>{r(vo(l.result),d.oldVersion,d.newVersion,vo(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const T2=["get","getKey","getAll","getAllKeys","count"],I2=["put","add","delete","clear"],mg=new Map;function Gw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=I2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||T2.includes(n)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(u.shift())),(await Promise.all([m[n](...u),s&&d.done]))[0]};return mg.set(e,o),o}b2(t=>({...t,get:(e,n,r)=>Gw(e,n)||t.get(e,n,r),has:(e,n)=>!!Gw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(C2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function C2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kg="@firebase/app",Qw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new My("@firebase/app"),A2="@firebase/app-compat",N2="@firebase/analytics-compat",R2="@firebase/analytics",P2="@firebase/app-check-compat",j2="@firebase/app-check",D2="@firebase/auth",O2="@firebase/auth-compat",L2="@firebase/database",M2="@firebase/data-connect",V2="@firebase/database-compat",F2="@firebase/functions",z2="@firebase/functions-compat",U2="@firebase/installations",B2="@firebase/installations-compat",$2="@firebase/messaging",W2="@firebase/messaging-compat",q2="@firebase/performance",H2="@firebase/performance-compat",K2="@firebase/remote-config",G2="@firebase/remote-config-compat",Q2="@firebase/storage",Z2="@firebase/storage-compat",Y2="@firebase/firestore",J2="@firebase/vertexai-preview",X2="@firebase/firestore-compat",eN="firebase",tN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="[DEFAULT]",nN={[Kg]:"fire-core",[A2]:"fire-core-compat",[R2]:"fire-analytics",[N2]:"fire-analytics-compat",[j2]:"fire-app-check",[P2]:"fire-app-check-compat",[D2]:"fire-auth",[O2]:"fire-auth-compat",[L2]:"fire-rtdb",[M2]:"fire-data-connect",[V2]:"fire-rtdb-compat",[F2]:"fire-fn",[z2]:"fire-fn-compat",[U2]:"fire-iid",[B2]:"fire-iid-compat",[$2]:"fire-fcm",[W2]:"fire-fcm-compat",[q2]:"fire-perf",[H2]:"fire-perf-compat",[K2]:"fire-rc",[G2]:"fire-rc-compat",[Q2]:"fire-gcs",[Z2]:"fire-gcs-compat",[Y2]:"fire-fst",[X2]:"fire-fst-compat",[J2]:"fire-vertex","fire-js":"fire-js",[eN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=new Map,rN=new Map,Qg=new Map;function Zw(t,e){try{t.container.addComponent(e)}catch(n){pi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ql(t){const e=t.name;if(Qg.has(e))return pi.debug(`There were multiple attempts to register component ${e}.`),!1;Qg.set(e,t);for(const n of Du.values())Zw(n,t);for(const n of rN.values())Zw(n,t);return!0}function Fy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ds(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_o=new od("app","Firebase",sN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _o.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=tN;function qk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw _o.create("bad-app-name",{appName:String(s)});if(n||(n=Uk()),!n)throw _o.create("no-options");const o=Du.get(s);if(o){if(Cf(n,o.options)&&Cf(r,o.config))return o;throw _o.create("duplicate-app",{appName:s})}const l=new d2(s);for(const d of Qg.values())l.addComponent(d);const u=new iN(n,r,l);return Du.set(s,u),u}function Hk(t=Gg){const e=Du.get(t);if(!e&&t===Gg&&Uk())return qk();if(!e)throw _o.create("no-app",{appName:t});return e}function Yw(){return Array.from(Du.values())}function wo(t,e,n){var r;let s=(r=nN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pi.warn(u.join(" "));return}Ql(new Ia(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="firebase-heartbeat-database",aN=1,Ou="firebase-heartbeat-store";let gg=null;function Kk(){return gg||(gg=E2(oN,aN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ou)}catch(n){console.warn(n)}}}}).catch(t=>{throw _o.create("idb-open",{originalErrorMessage:t.message})})),gg}async function lN(t){try{const n=(await Kk()).transaction(Ou),r=await n.objectStore(Ou).get(Gk(t));return await n.done,r}catch(e){if(e instanceof wi)pi.warn(e.message);else{const n=_o.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pi.warn(n.message)}}}async function Jw(t,e){try{const r=(await Kk()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(e,Gk(t)),await r.done}catch(n){if(n instanceof wi)pi.warn(n.message);else{const r=_o.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pi.warn(r.message)}}}function Gk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=1024,uN=720*60*60*1e3;class dN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Xw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const u=new Date(l.date).valueOf();return Date.now()-u<=uN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){pi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xw(),{heartbeatsToSend:r,unsentEntries:s}=hN(this._heartbeatsCache.heartbeats),o=Sf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return pi.warn(n),""}}}function Xw(){return new Date().toISOString().substring(0,10)}function hN(t,e=cN){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),eb(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),eb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XA()?e2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eb(t){return Sf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){Ql(new Ia("platform-logger",e=>new S2(e),"PRIVATE")),Ql(new Ia("heartbeat",e=>new dN(e),"PRIVATE")),wo(Kg,Qw,t),wo(Kg,Qw,"esm2017"),wo("fire-js","")}pN("");var mN="firebase",gN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wo(mN,gN,"app");function zy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Qk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yN=Qk,Zk=new od("auth","Firebase",Qk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new My("@firebase/auth");function vN(t,...e){Af.logLevel<=tt.WARN&&Af.warn(`Auth (${dc}): ${t}`,...e)}function af(t,...e){Af.logLevel<=tt.ERROR&&Af.error(`Auth (${dc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,...e){throw Uy(t,...e)}function js(t,...e){return Uy(t,...e)}function Yk(t,e,n){const r=Object.assign(Object.assign({},yN()),{[e]:n});return new od("auth","Firebase",r).create(e,{appName:t.name})}function Ds(t){return Yk(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Zk.create(t,...e)}function Me(t,e,...n){if(!t)throw Uy(e,...n)}function ci(t){const e="INTERNAL ASSERTION FAILED: "+t;throw af(e),new Error(e)}function mi(t,e){t||ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _N(){return tb()==="http:"||tb()==="https:"}function tb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_N()||QA()||"connection"in navigator)?navigator.onLine:!0}function bN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n){this.shortDelay=e,this.longDelay=n,mi(n>e,"Short delay should be less than long delay!"),this.isMobile=HA()||ZA()}get(){return wN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t,e){mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new ld(3e4,6e4);function bi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xi(t,e,n,r,s={}){return Xk(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=ad(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:d},o);return GA()||(m.referrerPolicy="no-referrer"),Jk.fetch()(eE(t,t.config.apiHost,n,u),m)})}async function Xk(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xN),e);try{const s=new TN(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Uh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,m]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uh(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Uh(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Uh(t,"user-disabled",l);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Yk(t,y,m);ps(t,y)}}catch(s){if(s instanceof wi)throw s;ps(t,"network-request-failed",{message:String(s)})}}async function hc(t,e,n,r,s={}){const o=await xi(t,e,n,r,s);return"mfaPendingCredential"in o&&ps(t,"multi-factor-auth-required",{_serverResponse:o}),o}function eE(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?By(t.config,s):`${t.config.apiScheme}://${s}`}function EN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(js(this.auth,"network-request-failed")),kN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=js(t,e,r);return s.customData._tokenResponse=n,s}function nb(t){return t!==void 0&&t.enterprise!==void 0}class IN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return EN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function SN(t,e){return xi(t,"GET","/v2/recaptchaConfig",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(t,e){return xi(t,"POST","/v1/accounts:delete",e)}async function tE(t,e){return xi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AN(t,e=!1){const n=Dt(t),r=await n.getIdToken(e),s=$y(r);Me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:xu(yg(s.auth_time)),issuedAtTime:xu(yg(s.iat)),expirationTime:xu(yg(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function yg(t){return Number(t)*1e3}function $y(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return af("JWT malformed, contained fewer than 3 sections"),null;try{const s=Fk(n);return s?JSON.parse(s):(af("Failed to decode base64 JWT payload"),null)}catch(s){return af("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function rb(t){const e=$y(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wi&&NN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function NN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Zl(t,tE(n,{idToken:r}));Me(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?nE(o.providerUserInfo):[],u=jN(t.providerData,l),d=t.isAnonymous,m=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),y=d?m:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Yg(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(t,w)}async function PN(t){const e=Dt(t);await Lu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function nE(t){return t.map(e=>{var{providerId:n}=e,r=zy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e){const n=await Xk(t,{},async()=>{const r=ad({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=eE(t,s,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Jk.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ON(t,e){return xi(t,"POST","/v2/accounts:revokeToken",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=rb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await DN(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new Rl;return r&&(Me(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Me(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Me(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=zy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Yg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Zl(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AN(this,e)}reload(){return PN(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ds(this.auth.app))return Promise.reject(Ds(this.auth));const e=await this.getIdToken();return await Zl(this,CN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,l,u,d,m,y;const w=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,E=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,N=(l=n.photoURL)!==null&&l!==void 0?l:void 0,I=(u=n.tenantId)!==null&&u!==void 0?u:void 0,S=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,V=(m=n.createdAt)!==null&&m!==void 0?m:void 0,W=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:U,emailVerified:G,isAnonymous:Z,providerData:K,stsTokenManager:A}=n;Me(U&&A,e,"internal-error");const k=Rl.fromJSON(this.name,A);Me(typeof U=="string",e,"internal-error"),Yi(w,e.name),Yi(x,e.name),Me(typeof G=="boolean",e,"internal-error"),Me(typeof Z=="boolean",e,"internal-error"),Yi(E,e.name),Yi(N,e.name),Yi(I,e.name),Yi(S,e.name),Yi(V,e.name),Yi(W,e.name);const R=new ui({uid:U,auth:e,email:x,emailVerified:G,displayName:w,isAnonymous:Z,photoURL:N,phoneNumber:E,tenantId:I,stsTokenManager:k,createdAt:V,lastLoginAt:W});return K&&Array.isArray(K)&&(R.providerData=K.map(P=>Object.assign({},P))),S&&(R._redirectEventId=S),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new Rl;s.updateFromServerResponse(n);const o=new ui({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Lu(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Me(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?nE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),u=new Rl;u.updateFromIdToken(r);const d=new ui({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Yg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=new Map;function di(t){mi(t instanceof Function,"Expected a class definition");let e=sb.get(t);return e?(mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rE.type="NONE";const ib=rE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(t,e,n){return`firebase:${t}:${e}:${n}`}class Pl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=lf(this.userKey,s.apiKey,o),this.fullPersistenceKey=lf("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Pl(di(ib),e,r);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||di(ib);const l=lf(r,e.config.apiKey,e.name);let u=null;for(const m of n)try{const y=await m._get(l);if(y){const w=ui._fromJSON(e,y);m!==o&&(u=w),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Pl(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new Pl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cE(e))return"Blackberry";if(uE(e))return"Webos";if(iE(e))return"Safari";if((e.includes("chrome/")||oE(e))&&!e.includes("edge/"))return"Chrome";if(lE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sE(t=zn()){return/firefox\//i.test(t)}function iE(t=zn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oE(t=zn()){return/crios\//i.test(t)}function aE(t=zn()){return/iemobile/i.test(t)}function lE(t=zn()){return/android/i.test(t)}function cE(t=zn()){return/blackberry/i.test(t)}function uE(t=zn()){return/webos/i.test(t)}function Wy(t=zn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function LN(t=zn()){var e;return Wy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MN(){return YA()&&document.documentMode===10}function dE(t=zn()){return Wy(t)||lE(t)||uE(t)||cE(t)||/windows phone/i.test(t)||aE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t,e=[]){let n;switch(t){case"Browser":n=ob(zn());break;case"Worker":n=`${ob(zn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${dc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t,e={}){return xi(t,"GET","/v2/passwordPolicy",bi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=6;class UN{constructor(e){var n,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:zN,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ab(this),this.idTokenSubscription=new ab(this),this.beforeStateQueue=new VN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=di(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tE(this,{idToken:e}),r=await ui._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ds(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ds(this.app))return Promise.reject(Ds(this));const n=e?Dt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ds(this.app)?Promise.reject(Ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ds(this.app)?Promise.reject(Ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FN(this),n=new UN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new od("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ON(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&di(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&vN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ao(t){return Dt(t)}class ab{constructor(e){this.auth=e,this.observer=null,this.addObserver=i2(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $N(t){sp=t}function fE(t){return sp.loadJS(t)}function WN(){return sp.recaptchaEnterpriseScript}function qN(){return sp.gapiScript}function HN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const KN="recaptcha-enterprise",GN="NO_RECAPTCHA";class QN{constructor(e){this.type=KN,this.auth=Ao(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{SN(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const m=new IN(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,l(m.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;nb(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{l(m)}).catch(()=>{l(GN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{r(this.auth).then(u=>{if(!n&&nb(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=WN();d.length!==0&&(d+=u),fE(d).then(()=>{s(u,o,l)}).catch(m=>{l(m)})}}).catch(u=>{l(u)})})}}async function lb(t,e,n,r=!1){const s=new QN(t);let o;try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function cb(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await lb(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await lb(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t,e){const n=Fy(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Cf(o,e??{}))return s;ps(s,"already-initialized")}return n.initialize({options:e})}function YN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function JN(t,e,n){const r=Ao(t);Me(r._canInitEmulator,r,"emulator-config-failed"),Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=pE(e),{host:l,port:u}=XN(e),d=u===null?"":`:${u}`;r.config.emulator={url:`${o}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),eR()}function pE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function XN(t){const e=pE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:ub(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:ub(l)}}}function ub(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,n){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}async function tR(t,e){return xi(t,"POST","/v1/accounts:update",e)}async function nR(t,e){return xi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(t,e){return hc(t,"POST","/v1/accounts:signInWithPassword",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))}async function iR(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends qy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Mu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Mu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cb(e,n,"signInWithPassword",rR);case"emailLink":return sR(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cb(e,r,"signUpPassword",nR);case"emailLink":return iR(e,{idToken:n,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t,e){return hc(t,"POST","/v1/accounts:signInWithIdp",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="http://localhost";class Sa extends qy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ps("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=zy(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Sa(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return jl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,jl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jl(e,n)}buildRequest(){const e={requestUri:oR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ad(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lR(t){const e=hu(fu(t)).link,n=e?hu(fu(e)).deep_link_id:null,r=hu(fu(t)).deep_link_id;return(r?hu(fu(r)).link:null)||r||n||e||t}class Hy{constructor(e){var n,r,s,o,l,u;const d=hu(fu(e)),m=(n=d.apiKey)!==null&&n!==void 0?n:null,y=(r=d.oobCode)!==null&&r!==void 0?r:null,w=aR((s=d.mode)!==null&&s!==void 0?s:null);Me(m&&y&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=y,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=lR(e);try{return new Hy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.providerId=Pa.PROVIDER_ID}static credential(e,n){return Mu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Hy.parseLink(n);return Me(r,"argument-error"),Mu._fromEmailAndCode(e,r.code,r.tenantId)}}Pa.PROVIDER_ID="password";Pa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends mE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends cd{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return no.credential(e.oauthAccessToken)}catch{return null}}}no.FACEBOOK_SIGN_IN_METHOD="facebook.com";no.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends cd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Sa._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ro.credential(n,r)}catch{return null}}}ro.GOOGLE_SIGN_IN_METHOD="google.com";ro.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends cd{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.GITHUB_SIGN_IN_METHOD="github.com";so.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends cd{constructor(){super("twitter.com")}static credential(e,n){return Sa._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return io.credential(n,r)}catch{return null}}}io.TWITTER_SIGN_IN_METHOD="twitter.com";io.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(t,e){return hc(t,"POST","/v1/accounts:signUp",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await ui._fromIdTokenResponse(e,r,s),l=db(r);return new gi({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=db(r);return new gi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function db(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(t){var e;if(ds(t.app))return Promise.reject(Ds(t));const n=Ao(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new gi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await cR(n,{returnSecureToken:!0}),s=await gi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends wi{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nf(e,n,r,s)}}function gE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nf._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function yE(t,e,n=!1){const r=await Zl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gi._forOperation(t,"link",r)}async function hR(t,e,n){await Lu(e);const r=dR(e.providerData);Me(r.has(n)===t,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e,n=!1){const{auth:r}=t;if(ds(r.app))return Promise.reject(Ds(r));const s="reauthenticate";try{const o=await Zl(t,gE(r,s,e,t),n);Me(o.idToken,r,"internal-error");const l=$y(o.idToken);Me(l,r,"internal-error");const{sub:u}=l;return Me(t.uid===u,r,"user-mismatch"),gi._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ps(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vE(t,e,n=!1){if(ds(t.app))return Promise.reject(Ds(t));const r="signIn",s=await gE(t,r,e),o=await gi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function pR(t,e){return vE(Ao(t),e)}async function mR(t,e){const n=Dt(t);return await hR(!1,n,e.providerId),yE(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(t,e){return hc(t,"POST","/v1/accounts:signInWithCustomToken",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(t,e){if(ds(t.app))return Promise.reject(Ds(t));const n=Ao(t),r=await gR(n,{token:e,returnSecureToken:!0}),s=await gi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(t){const e=Ao(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function _E(t,e,n){return ds(t.app)?Promise.reject(Ds(t)):pR(Dt(t),Pa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vR(t),r})}function _R(t,e){return wR(Dt(t),null,e)}async function wR(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const l=await Zl(t,tR(r,o));await t._updateTokensIfNecessary(l,!0)}function bR(t,e,n,r){return Dt(t).onIdTokenChanged(e,n,r)}function xR(t,e,n){return Dt(t).beforeAuthStateChanged(e,n)}function wE(t,e,n,r){return Dt(t).onAuthStateChanged(e,n,r)}function bE(t){return Dt(t).signOut()}const Rf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rf,"1"),this.storage.removeItem(Rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=1e3,ER=10;class kE extends xE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);MN()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ER):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kE.type="LOCAL";const TR=kE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE extends xE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}EE.type="SESSION";const TE=EE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ip(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async m=>m(n.origin,o)),d=await IR(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ip.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const m=Ky("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(w){const x=w;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(x.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return window}function CR(t){Os().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(){return typeof Os().WorkerGlobalScope<"u"&&typeof Os().importScripts=="function"}async function AR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function RR(){return IE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="firebaseLocalStorageDb",PR=1,Pf="firebaseLocalStorage",CE="fbase_key";class ud{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function op(t,e){return t.transaction([Pf],e?"readwrite":"readonly").objectStore(Pf)}function jR(){const t=indexedDB.deleteDatabase(SE);return new ud(t).toPromise()}function Jg(){const t=indexedDB.open(SE,PR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Pf,{keyPath:CE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Pf)?e(r):(r.close(),await jR(),e(await Jg()))})})}async function hb(t,e,n){const r=op(t,!0).put({[CE]:e,value:n});return new ud(r).toPromise()}async function DR(t,e){const n=op(t,!1).get(e),r=await new ud(n).toPromise();return r===void 0?null:r.value}function fb(t,e){const n=op(t,!0).delete(e);return new ud(n).toPromise()}const OR=800,LR=3;class AE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>LR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ip._getInstance(RR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await AR(),!this.activeServiceWorker)return;this.sender=new SR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jg();return await hb(e,Rf,"1"),await fb(e,Rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>DR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=op(s,!1).getAll();return new ud(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AE.type="LOCAL";const MR=AE;new ld(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){return e?di(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends qy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FR(t){return vE(t.auth,new Gy(t),t.bypassAuthState)}function zR(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),fR(n,new Gy(t),t.bypassAuthState)}async function UR(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),yE(n,new Gy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FR;case"linkViaPopup":case"linkViaRedirect":return UR;case"reauthViaPopup":case"reauthViaRedirect":return zR;default:ps(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new ld(2e3,1e4);class Sl extends NE{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Sl.currentPopupAction&&Sl.currentPopupAction.cancel(),Sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const e=Ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(js(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(js(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(js(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BR.get())};e()}}Sl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="pendingRedirect",cf=new Map;class WR extends NE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cf.get(this.auth._key());if(!e){try{const r=await qR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cf.set(this.auth._key(),e)}return this.bypassAuthState||cf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qR(t,e){const n=GR(e),r=KR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function HR(t,e){cf.set(t._key(),e)}function KR(t){return di(t._redirectPersistence)}function GR(t){return lf($R,t.config.apiKey,t.name)}async function QR(t,e,n=!1){if(ds(t.app))return Promise.reject(Ds(t));const r=Ao(t),s=VR(r,e),l=await new WR(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=600*1e3;class YR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(js(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZR&&this.cachedEventUids.clear(),this.cachedEventUids.has(pb(e))}saveEventToCache(e){this.cachedEventUids.add(pb(e)),this.lastProcessedEventTime=Date.now()}}function pb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e={}){return xi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tP=/^https?/;async function nP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XR(t);for(const n of e)try{if(rP(n))return}catch{}ps(t,"unauthorized-domain")}function rP(t){const e=Zg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!tP.test(n))return!1;if(eP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=new ld(3e4,6e4);function mb(){const t=Os().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iP(t){return new Promise((e,n)=>{var r,s,o;function l(){mb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mb(),n(js(t,"network-request-failed"))},timeout:sP.get()})}if(!((s=(r=Os().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Os().gapi)===null||o===void 0)&&o.load)l();else{const u=HN("iframefcb");return Os()[u]=()=>{gapi.load?l():n(js(t,"network-request-failed"))},fE(`${qN()}?onload=${u}`).catch(d=>n(d))}}).catch(e=>{throw uf=null,e})}let uf=null;function oP(t){return uf=uf||iP(t),uf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new ld(5e3,15e3),lP="__/auth/iframe",cP="emulator/auth/iframe",uP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hP(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?By(e,cP):`https://${t.config.authDomain}/${lP}`,r={apiKey:e.apiKey,appName:t.name,v:dc},s=dP.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ad(r).slice(1)}`}async function fP(t){const e=await oP(t),n=Os().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:hP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uP,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=js(t,"network-request-failed"),u=Os().setTimeout(()=>{o(l)},aP.get());function d(){Os().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mP=500,gP=600,yP="_blank",vP="http://localhost";class gb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _P(t,e,n,r=mP,s=gP){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},pP),{width:r.toString(),height:s.toString(),top:o,left:l}),m=zn().toLowerCase();n&&(u=oE(m)?yP:n),sE(m)&&(e=e||vP,d.scrollbars="yes");const y=Object.entries(d).reduce((x,[E,N])=>`${x}${E}=${N},`,"");if(LN(m)&&u!=="_self")return wP(e||"",u),new gb(null);const w=window.open(e||"",u,y);Me(w,t,"popup-blocked");try{w.focus()}catch{}return new gb(w)}function wP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="__/auth/handler",xP="emulator/auth/handler",kP=encodeURIComponent("fac");async function yb(t,e,n,r,s,o){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:dc,eventId:s};if(e instanceof mE){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",s2(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))l[y]=w}if(e instanceof cd){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const d=await t._getAppCheckToken(),m=d?`#${kP}=${encodeURIComponent(d)}`:"";return`${EP(t)}?${ad(u).slice(1)}${m}`}function EP({config:t}){return t.emulator?By(t,xP):`https://${t.authDomain}/${bP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="webStorageSupport";class TP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TE,this._completeRedirectFn=QR,this._overrideRedirectResult=HR}async _openPopup(e,n,r,s){var o;mi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await yb(e,n,r,Zg(),s);return _P(e,l,Ky())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await yb(e,n,r,Zg(),s);return CR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(mi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fP(e),r=new YR(e);return n.register("authEvent",s=>(Me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vg,{type:vg},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[vg];l!==void 0&&n(!!l),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dE()||iE()||Wy()}}const IP=TP;var vb="@firebase/auth",_b="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AP(t){Ql(new Ia("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Me(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hE(t)},m=new BN(r,s,o,d);return YN(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ql(new Ia("auth-internal",e=>{const n=Ao(e.getProvider("auth").getImmediate());return(r=>new SP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wo(vb,_b,CP(t)),wo(vb,_b,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=300,RP=Bk("authIdTokenMaxAge")||NP;let wb=null;const PP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RP)return;const s=n==null?void 0:n.token;wb!==s&&(wb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function jP(t=Hk()){const e=Fy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ZN(t,{popupRedirectResolver:IP,persistence:[MR,TR,TE]}),r=Bk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=PP(o.toString());xR(n,l,()=>l(n.currentUser)),bR(n,u=>l(u))}}const s=zk("auth");return s&&JN(n,`http://${s}`),n}function DP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$N({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=js("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",DP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AP("Browser");var bb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ka,PE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,k){function R(){}R.prototype=k.prototype,A.D=k.prototype,A.prototype=new R,A.prototype.constructor=A,A.C=function(P,D,M){for(var j=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)j[Ce-2]=arguments[Ce];return k.prototype[D].apply(P,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,k,R){R||(R=0);var P=Array(16);if(typeof k=="string")for(var D=0;16>D;++D)P[D]=k.charCodeAt(R++)|k.charCodeAt(R++)<<8|k.charCodeAt(R++)<<16|k.charCodeAt(R++)<<24;else for(D=0;16>D;++D)P[D]=k[R++]|k[R++]<<8|k[R++]<<16|k[R++]<<24;k=A.g[0],R=A.g[1],D=A.g[2];var M=A.g[3],j=k+(M^R&(D^M))+P[0]+3614090360&4294967295;k=R+(j<<7&4294967295|j>>>25),j=M+(D^k&(R^D))+P[1]+3905402710&4294967295,M=k+(j<<12&4294967295|j>>>20),j=D+(R^M&(k^R))+P[2]+606105819&4294967295,D=M+(j<<17&4294967295|j>>>15),j=R+(k^D&(M^k))+P[3]+3250441966&4294967295,R=D+(j<<22&4294967295|j>>>10),j=k+(M^R&(D^M))+P[4]+4118548399&4294967295,k=R+(j<<7&4294967295|j>>>25),j=M+(D^k&(R^D))+P[5]+1200080426&4294967295,M=k+(j<<12&4294967295|j>>>20),j=D+(R^M&(k^R))+P[6]+2821735955&4294967295,D=M+(j<<17&4294967295|j>>>15),j=R+(k^D&(M^k))+P[7]+4249261313&4294967295,R=D+(j<<22&4294967295|j>>>10),j=k+(M^R&(D^M))+P[8]+1770035416&4294967295,k=R+(j<<7&4294967295|j>>>25),j=M+(D^k&(R^D))+P[9]+2336552879&4294967295,M=k+(j<<12&4294967295|j>>>20),j=D+(R^M&(k^R))+P[10]+4294925233&4294967295,D=M+(j<<17&4294967295|j>>>15),j=R+(k^D&(M^k))+P[11]+2304563134&4294967295,R=D+(j<<22&4294967295|j>>>10),j=k+(M^R&(D^M))+P[12]+1804603682&4294967295,k=R+(j<<7&4294967295|j>>>25),j=M+(D^k&(R^D))+P[13]+4254626195&4294967295,M=k+(j<<12&4294967295|j>>>20),j=D+(R^M&(k^R))+P[14]+2792965006&4294967295,D=M+(j<<17&4294967295|j>>>15),j=R+(k^D&(M^k))+P[15]+1236535329&4294967295,R=D+(j<<22&4294967295|j>>>10),j=k+(D^M&(R^D))+P[1]+4129170786&4294967295,k=R+(j<<5&4294967295|j>>>27),j=M+(R^D&(k^R))+P[6]+3225465664&4294967295,M=k+(j<<9&4294967295|j>>>23),j=D+(k^R&(M^k))+P[11]+643717713&4294967295,D=M+(j<<14&4294967295|j>>>18),j=R+(M^k&(D^M))+P[0]+3921069994&4294967295,R=D+(j<<20&4294967295|j>>>12),j=k+(D^M&(R^D))+P[5]+3593408605&4294967295,k=R+(j<<5&4294967295|j>>>27),j=M+(R^D&(k^R))+P[10]+38016083&4294967295,M=k+(j<<9&4294967295|j>>>23),j=D+(k^R&(M^k))+P[15]+3634488961&4294967295,D=M+(j<<14&4294967295|j>>>18),j=R+(M^k&(D^M))+P[4]+3889429448&4294967295,R=D+(j<<20&4294967295|j>>>12),j=k+(D^M&(R^D))+P[9]+568446438&4294967295,k=R+(j<<5&4294967295|j>>>27),j=M+(R^D&(k^R))+P[14]+3275163606&4294967295,M=k+(j<<9&4294967295|j>>>23),j=D+(k^R&(M^k))+P[3]+4107603335&4294967295,D=M+(j<<14&4294967295|j>>>18),j=R+(M^k&(D^M))+P[8]+1163531501&4294967295,R=D+(j<<20&4294967295|j>>>12),j=k+(D^M&(R^D))+P[13]+2850285829&4294967295,k=R+(j<<5&4294967295|j>>>27),j=M+(R^D&(k^R))+P[2]+4243563512&4294967295,M=k+(j<<9&4294967295|j>>>23),j=D+(k^R&(M^k))+P[7]+1735328473&4294967295,D=M+(j<<14&4294967295|j>>>18),j=R+(M^k&(D^M))+P[12]+2368359562&4294967295,R=D+(j<<20&4294967295|j>>>12),j=k+(R^D^M)+P[5]+4294588738&4294967295,k=R+(j<<4&4294967295|j>>>28),j=M+(k^R^D)+P[8]+2272392833&4294967295,M=k+(j<<11&4294967295|j>>>21),j=D+(M^k^R)+P[11]+1839030562&4294967295,D=M+(j<<16&4294967295|j>>>16),j=R+(D^M^k)+P[14]+4259657740&4294967295,R=D+(j<<23&4294967295|j>>>9),j=k+(R^D^M)+P[1]+2763975236&4294967295,k=R+(j<<4&4294967295|j>>>28),j=M+(k^R^D)+P[4]+1272893353&4294967295,M=k+(j<<11&4294967295|j>>>21),j=D+(M^k^R)+P[7]+4139469664&4294967295,D=M+(j<<16&4294967295|j>>>16),j=R+(D^M^k)+P[10]+3200236656&4294967295,R=D+(j<<23&4294967295|j>>>9),j=k+(R^D^M)+P[13]+681279174&4294967295,k=R+(j<<4&4294967295|j>>>28),j=M+(k^R^D)+P[0]+3936430074&4294967295,M=k+(j<<11&4294967295|j>>>21),j=D+(M^k^R)+P[3]+3572445317&4294967295,D=M+(j<<16&4294967295|j>>>16),j=R+(D^M^k)+P[6]+76029189&4294967295,R=D+(j<<23&4294967295|j>>>9),j=k+(R^D^M)+P[9]+3654602809&4294967295,k=R+(j<<4&4294967295|j>>>28),j=M+(k^R^D)+P[12]+3873151461&4294967295,M=k+(j<<11&4294967295|j>>>21),j=D+(M^k^R)+P[15]+530742520&4294967295,D=M+(j<<16&4294967295|j>>>16),j=R+(D^M^k)+P[2]+3299628645&4294967295,R=D+(j<<23&4294967295|j>>>9),j=k+(D^(R|~M))+P[0]+4096336452&4294967295,k=R+(j<<6&4294967295|j>>>26),j=M+(R^(k|~D))+P[7]+1126891415&4294967295,M=k+(j<<10&4294967295|j>>>22),j=D+(k^(M|~R))+P[14]+2878612391&4294967295,D=M+(j<<15&4294967295|j>>>17),j=R+(M^(D|~k))+P[5]+4237533241&4294967295,R=D+(j<<21&4294967295|j>>>11),j=k+(D^(R|~M))+P[12]+1700485571&4294967295,k=R+(j<<6&4294967295|j>>>26),j=M+(R^(k|~D))+P[3]+2399980690&4294967295,M=k+(j<<10&4294967295|j>>>22),j=D+(k^(M|~R))+P[10]+4293915773&4294967295,D=M+(j<<15&4294967295|j>>>17),j=R+(M^(D|~k))+P[1]+2240044497&4294967295,R=D+(j<<21&4294967295|j>>>11),j=k+(D^(R|~M))+P[8]+1873313359&4294967295,k=R+(j<<6&4294967295|j>>>26),j=M+(R^(k|~D))+P[15]+4264355552&4294967295,M=k+(j<<10&4294967295|j>>>22),j=D+(k^(M|~R))+P[6]+2734768916&4294967295,D=M+(j<<15&4294967295|j>>>17),j=R+(M^(D|~k))+P[13]+1309151649&4294967295,R=D+(j<<21&4294967295|j>>>11),j=k+(D^(R|~M))+P[4]+4149444226&4294967295,k=R+(j<<6&4294967295|j>>>26),j=M+(R^(k|~D))+P[11]+3174756917&4294967295,M=k+(j<<10&4294967295|j>>>22),j=D+(k^(M|~R))+P[2]+718787259&4294967295,D=M+(j<<15&4294967295|j>>>17),j=R+(M^(D|~k))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+k&4294967295,A.g[1]=A.g[1]+(D+(j<<21&4294967295|j>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+M&4294967295}r.prototype.u=function(A,k){k===void 0&&(k=A.length);for(var R=k-this.blockSize,P=this.B,D=this.h,M=0;M<k;){if(D==0)for(;M<=R;)s(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<k;)if(P[D++]=A.charCodeAt(M++),D==this.blockSize){s(this,P),D=0;break}}else for(;M<k;)if(P[D++]=A[M++],D==this.blockSize){s(this,P),D=0;break}}this.h=D,this.o+=k},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var k=1;k<A.length-8;++k)A[k]=0;var R=8*this.o;for(k=A.length-8;k<A.length;++k)A[k]=R&255,R/=256;for(this.u(A),A=Array(16),k=R=0;4>k;++k)for(var P=0;32>P;P+=8)A[R++]=this.g[k]>>>P&255;return A};function o(A,k){var R=u;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=k(A)}function l(A,k){this.h=k;for(var R=[],P=!0,D=A.length-1;0<=D;D--){var M=A[D]|0;P&&M==k||(R[D]=M,P=!1)}this.g=R}var u={};function d(A){return-128<=A&&128>A?o(A,function(k){return new l([k|0],0>k?-1:0)}):new l([A|0],0>A?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return w;if(0>A)return S(m(-A));for(var k=[],R=1,P=0;A>=R;P++)k[P]=A/R|0,R*=4294967296;return new l(k,0)}function y(A,k){if(A.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A.charAt(0)=="-")return S(y(A.substring(1),k));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(k,8)),P=w,D=0;D<A.length;D+=8){var M=Math.min(8,A.length-D),j=parseInt(A.substring(D,D+M),k);8>M?(M=m(Math.pow(k,M)),P=P.j(M).add(m(j))):(P=P.j(R),P=P.add(m(j)))}return P}var w=d(0),x=d(1),E=d(16777216);t=l.prototype,t.m=function(){if(I(this))return-S(this).m();for(var A=0,k=1,R=0;R<this.g.length;R++){var P=this.i(R);A+=(0<=P?P:4294967296+P)*k,k*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N(this))return"0";if(I(this))return"-"+S(this).toString(A);for(var k=m(Math.pow(A,6)),R=this,P="";;){var D=G(R,k).g;R=V(R,D.j(k));var M=((0<R.g.length?R.g[0]:R.h)>>>0).toString(A);if(R=D,N(R))return M+P;for(;6>M.length;)M="0"+M;P=M+P}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function N(A){if(A.h!=0)return!1;for(var k=0;k<A.g.length;k++)if(A.g[k]!=0)return!1;return!0}function I(A){return A.h==-1}t.l=function(A){return A=V(this,A),I(A)?-1:N(A)?0:1};function S(A){for(var k=A.g.length,R=[],P=0;P<k;P++)R[P]=~A.g[P];return new l(R,~A.h).add(x)}t.abs=function(){return I(this)?S(this):this},t.add=function(A){for(var k=Math.max(this.g.length,A.g.length),R=[],P=0,D=0;D<=k;D++){var M=P+(this.i(D)&65535)+(A.i(D)&65535),j=(M>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);P=j>>>16,M&=65535,j&=65535,R[D]=j<<16|M}return new l(R,R[R.length-1]&-2147483648?-1:0)};function V(A,k){return A.add(S(k))}t.j=function(A){if(N(this)||N(A))return w;if(I(this))return I(A)?S(this).j(S(A)):S(S(this).j(A));if(I(A))return S(this.j(S(A)));if(0>this.l(E)&&0>A.l(E))return m(this.m()*A.m());for(var k=this.g.length+A.g.length,R=[],P=0;P<2*k;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<A.g.length;D++){var M=this.i(P)>>>16,j=this.i(P)&65535,Ce=A.i(D)>>>16,nt=A.i(D)&65535;R[2*P+2*D]+=j*nt,W(R,2*P+2*D),R[2*P+2*D+1]+=M*nt,W(R,2*P+2*D+1),R[2*P+2*D+1]+=j*Ce,W(R,2*P+2*D+1),R[2*P+2*D+2]+=M*Ce,W(R,2*P+2*D+2)}for(P=0;P<k;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=k;P<2*k;P++)R[P]=0;return new l(R,0)};function W(A,k){for(;(A[k]&65535)!=A[k];)A[k+1]+=A[k]>>>16,A[k]&=65535,k++}function U(A,k){this.g=A,this.h=k}function G(A,k){if(N(k))throw Error("division by zero");if(N(A))return new U(w,w);if(I(A))return k=G(S(A),k),new U(S(k.g),S(k.h));if(I(k))return k=G(A,S(k)),new U(S(k.g),k.h);if(30<A.g.length){if(I(A)||I(k))throw Error("slowDivide_ only works with positive integers.");for(var R=x,P=k;0>=P.l(A);)R=Z(R),P=Z(P);var D=K(R,1),M=K(P,1);for(P=K(P,2),R=K(R,2);!N(P);){var j=M.add(P);0>=j.l(A)&&(D=D.add(R),M=j),P=K(P,1),R=K(R,1)}return k=V(A,D.j(k)),new U(D,k)}for(D=w;0<=A.l(k);){for(R=Math.max(1,Math.floor(A.m()/k.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),M=m(R),j=M.j(k);I(j)||0<j.l(A);)R-=P,M=m(R),j=M.j(k);N(M)&&(M=x),D=D.add(M),A=V(A,j)}return new U(D,A)}t.A=function(A){return G(this,A).h},t.and=function(A){for(var k=Math.max(this.g.length,A.g.length),R=[],P=0;P<k;P++)R[P]=this.i(P)&A.i(P);return new l(R,this.h&A.h)},t.or=function(A){for(var k=Math.max(this.g.length,A.g.length),R=[],P=0;P<k;P++)R[P]=this.i(P)|A.i(P);return new l(R,this.h|A.h)},t.xor=function(A){for(var k=Math.max(this.g.length,A.g.length),R=[],P=0;P<k;P++)R[P]=this.i(P)^A.i(P);return new l(R,this.h^A.h)};function Z(A){for(var k=A.g.length+1,R=[],P=0;P<k;P++)R[P]=A.i(P)<<1|A.i(P-1)>>>31;return new l(R,A.h)}function K(A,k){var R=k>>5;k%=32;for(var P=A.g.length-R,D=[],M=0;M<P;M++)D[M]=0<k?A.i(M+R)>>>k|A.i(M+R+1)<<32-k:A.i(M+R);return new l(D,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PE=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,ka=l}).apply(typeof bb<"u"?bb:typeof self<"u"?self:typeof window<"u"?window:{});var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jE,pu,DE,df,Xg,OE,LE,ME;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,b){return h==Array.prototype||h==Object.prototype||(h[v]=b.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bh=="object"&&Bh];for(var v=0;v<h.length;++v){var b=h[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(h,v){if(v)e:{var b=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var q=h[C];if(!(q in b))break e;b=b[q]}h=h[h.length-1],C=b[h],v=v(C),v!=C&&v!=null&&e(b,h,{configurable:!0,writable:!0,value:v})}}function o(h,v){h instanceof String&&(h+="");var b=0,C=!1,q={next:function(){if(!C&&b<h.length){var J=b++;return{value:v(J,h[J]),done:!1}}return C=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(h){return h||function(){return o(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function m(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,b){return h.call.apply(h.bind,arguments)}function w(h,v,b){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,C),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function x(h,v,b){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:w,x.apply(null,arguments)}function E(h,v){var b=Array.prototype.slice.call(arguments,1);return function(){var C=b.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function N(h,v){function b(){}b.prototype=v.prototype,h.aa=v.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(C,q,J){for(var ue=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)ue[dt-2]=arguments[dt];return v.prototype[q].apply(C,ue)}}function I(h){const v=h.length;if(0<v){const b=Array(v);for(let C=0;C<v;C++)b[C]=h[C];return b}return[]}function S(h,v){for(let b=1;b<arguments.length;b++){const C=arguments[b];if(d(C)){const q=h.length||0,J=C.length||0;h.length=q+J;for(let ue=0;ue<J;ue++)h[q+ue]=C[ue]}else h.push(C)}}class V{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function W(h){return/^[\s\xa0]*$/.test(h)}function U(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function G(h){return G[" "](h),h}G[" "]=function(){};var Z=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function K(h,v,b){for(const C in h)v.call(b,h[C],C,h)}function A(h,v){for(const b in h)v.call(void 0,h[b],b,h)}function k(h){const v={};for(const b in h)v[b]=h[b];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,v){let b,C;for(let q=1;q<arguments.length;q++){C=arguments[q];for(b in C)h[b]=C[b];for(let J=0;J<R.length;J++)b=R[J],Object.prototype.hasOwnProperty.call(C,b)&&(h[b]=C[b])}}function D(h){var v=1;h=h.split(":");const b=[];for(;0<v&&h.length;)b.push(h.shift()),v--;return h.length&&b.push(h.join(":")),b}function M(h){u.setTimeout(()=>{throw h},0)}function j(){var h=pe;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Ce{constructor(){this.h=this.g=null}add(v,b){const C=nt.get();C.set(v,b),this.h?this.h.next=C:this.g=C,this.h=C}}var nt=new V(()=>new Qe,h=>h.reset());class Qe{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,X=!1,pe=new Ce,de=()=>{const h=u.Promise.resolve(void 0);Ne=()=>{h.then($)}};var $=()=>{for(var h;h=j();){try{h.h.call(h.g)}catch(b){M(b)}var v=nt;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}X=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var be=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};u.addEventListener("test",b,v),u.removeEventListener("test",b,v)}catch{}return h})();function De(h,v){if(ce.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(Z){e:{try{G(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else b=="mouseover"?v=h.fromElement:b=="mouseout"&&(v=h.toElement);this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Re[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&De.aa.h.call(this)}}N(De,ce);var Re={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function ne(h,v,b,C,q){this.listener=h,this.proxy=null,this.src=v,this.type=b,this.capture=!!C,this.ha=q,this.key=++Ue,this.da=this.fa=!1}function he(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function rt(h){this.src=h,this.g={},this.h=0}rt.prototype.add=function(h,v,b,C,q){var J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);var ue=yn(h,v,C,q);return-1<ue?(v=h[ue],b||(v.fa=!1)):(v=new ne(v,this.src,J,!!C,q),v.fa=b,h.push(v)),v};function pt(h,v){var b=v.type;if(b in h.g){var C=h.g[b],q=Array.prototype.indexOf.call(C,v,void 0),J;(J=0<=q)&&Array.prototype.splice.call(C,q,1),J&&(he(v),h.g[b].length==0&&(delete h.g[b],h.h--))}}function yn(h,v,b,C){for(var q=0;q<h.length;++q){var J=h[q];if(!J.da&&J.listener==v&&J.capture==!!b&&J.ha==C)return q}return-1}var vn="closure_lm_"+(1e6*Math.random()|0),mr={};function Cr(h,v,b,C,q){if(Array.isArray(v)){for(var J=0;J<v.length;J++)Cr(h,v[J],b,C,q);return null}return b=Lo(b),h&&h[Te]?h.K(v,b,m(C)?!!C.capture:!1,q):Ei(h,v,b,!1,C,q)}function Ei(h,v,b,C,q,J){if(!v)throw Error("Invalid event type");var ue=m(q)?!!q.capture:!!q,dt=Bs(h);if(dt||(h[vn]=dt=new rt(h)),b=dt.add(v,b,C,ue,J),b.proxy)return b;if(C=Oo(),b.proxy=C,C.src=h,C.listener=b,h.addEventListener)be||(q=ue),q===void 0&&(q=!1),h.addEventListener(v.toString(),C,q);else if(h.attachEvent)h.attachEvent(er(v.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Oo(){function h(b){return v.call(h.src,h.listener,b)}const v=vs;return h}function ys(h,v,b,C,q){if(Array.isArray(v))for(var J=0;J<v.length;J++)ys(h,v[J],b,C,q);else C=m(C)?!!C.capture:!!C,b=Lo(b),h&&h[Te]?(h=h.i,v=String(v).toString(),v in h.g&&(J=h.g[v],b=yn(J,b,C,q),-1<b&&(he(J[b]),Array.prototype.splice.call(J,b,1),J.length==0&&(delete h.g[v],h.h--)))):h&&(h=Bs(h))&&(v=h.g[v.toString()],h=-1,v&&(h=yn(v,b,C,q)),(b=-1<h?v[h]:null)&&an(b))}function an(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Te])pt(v.i,h);else{var b=h.type,C=h.proxy;v.removeEventListener?v.removeEventListener(b,C,h.capture):v.detachEvent?v.detachEvent(er(b),C):v.addListener&&v.removeListener&&v.removeListener(C),(b=Bs(v))?(pt(b,h),b.h==0&&(b.src=null,v[vn]=null)):he(h)}}}function er(h){return h in mr?mr[h]:mr[h]="on"+h}function vs(h,v){if(h.da)h=!0;else{v=new De(v,this);var b=h.listener,C=h.ha||h.src;h.fa&&an(h),h=b.call(C,v)}return h}function Bs(h){return h=h[vn],h instanceof rt?h:null}var $s="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lo(h){return typeof h=="function"?h:(h[$s]||(h[$s]=function(v){return h.handleEvent(v)}),h[$s])}function Bt(){ee.call(this),this.i=new rt(this),this.M=this,this.F=null}N(Bt,ee),Bt.prototype[Te]=!0,Bt.prototype.removeEventListener=function(h,v,b,C){ys(this,h,v,b,C)};function vt(h,v){var b,C=h.F;if(C)for(b=[];C;C=C.F)b.push(C);if(h=h.M,C=v.type||v,typeof v=="string")v=new ce(v,h);else if(v instanceof ce)v.target=v.target||h;else{var q=v;v=new ce(C,h),P(v,q)}if(q=!0,b)for(var J=b.length-1;0<=J;J--){var ue=v.g=b[J];q=Nn(ue,C,!0,v)&&q}if(ue=v.g=h,q=Nn(ue,C,!0,v)&&q,q=Nn(ue,C,!1,v)&&q,b)for(J=0;J<b.length;J++)ue=v.g=b[J],q=Nn(ue,C,!1,v)&&q}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var b=h.g[v],C=0;C<b.length;C++)he(b[C]);delete h.g[v],h.h--}}this.F=null},Bt.prototype.K=function(h,v,b,C){return this.i.add(String(h),v,!1,b,C)},Bt.prototype.L=function(h,v,b,C){return this.i.add(String(h),v,!0,b,C)};function Nn(h,v,b,C){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,J=0;J<v.length;++J){var ue=v[J];if(ue&&!ue.da&&ue.capture==b){var dt=ue.listener,en=ue.ha||ue.src;ue.fa&&pt(h.i,ue),q=dt.call(en,C)!==!1&&q}}return q&&!C.defaultPrevented}function Kr(h,v,b){if(typeof h=="function")b&&(h=x(h,b));else if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:u.setTimeout(h,v||0)}function Gr(h){h.g=Kr(()=>{h.g=null,h.i&&(h.i=!1,Gr(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Rn extends ee{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Gr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(h){ee.call(this),this.h=h,this.g={}}N(_s,ee);var Mo=[];function Vo(h){K(h.g,function(v,b){this.g.hasOwnProperty(b)&&an(v)},h),h.g={}}_s.prototype.N=function(){_s.aa.N.call(this),Vo(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ws=u.JSON.stringify,Ti=u.JSON.parse,Fo=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function ws(){}ws.prototype.h=null;function Ii(h){return h.h||(h.h=h.i())}function Si(){}var tr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gt(){ce.call(this,"d")}N(gt,ce);function qt(){ce.call(this,"c")}N(qt,ce);var It={},nr=null;function Ht(){return nr=nr||new Bt}It.La="serverreachability";function Xt(h){ce.call(this,It.La,h)}N(Xt,ce);function Kt(h){const v=Ht();vt(v,new Xt(v))}It.STAT_EVENT="statevent";function Ar(h,v){ce.call(this,It.STAT_EVENT,h),this.stat=v}N(Ar,ce);function qe(h){const v=Ht();vt(v,new Ar(v,h))}It.Ma="timingevent";function Un(h,v){ce.call(this,It.Ma,h),this.size=v}N(Un,ce);function Vt(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},v)}function _n(){this.g=!0}_n.prototype.xa=function(){this.g=!1};function gr(h,v,b,C,q,J){h.info(function(){if(h.g)if(J)for(var ue="",dt=J.split("&"),en=0;en<dt.length;en++){var st=dt[en].split("=");if(1<st.length){var ln=st[0];st=st[1];var Qt=ln.split("_");ue=2<=Qt.length&&Qt[1]=="type"?ue+(ln+"="+st+"&"):ue+(ln+"=redacted&")}}else ue=null;else ue=J;return"XMLHTTP REQ ("+C+") [attempt "+q+"]: "+v+`
`+b+`
`+ue})}function Nr(h,v,b,C,q,J,ue){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+q+"]: "+v+`
`+b+`
`+J+" "+ue})}function Gt(h,v,b,C){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+zo(h,b)+(C?" "+C:"")})}function Qr(h,v){h.info(function(){return"TIMEOUT: "+v})}_n.prototype.info=function(){};function zo(h,v){if(!h.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var C=b[h];if(!(2>C.length)){var q=C[1];if(Array.isArray(q)&&!(1>q.length)){var J=q[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ue=1;ue<q.length;ue++)q[ue]=""}}}}return Ws(b)}catch{return v}}var za={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ed={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zr;function Uo(){}N(Uo,ws),Uo.prototype.g=function(){return new XMLHttpRequest},Uo.prototype.i=function(){return{}},Zr=new Uo;function Yr(h,v,b,C){this.j=h,this.i=v,this.l=b,this.R=C||1,this.U=new _s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Td}function Td(){this.i=null,this.g="",this.h=!1}var Sc={},Ua={};function Ba(h,v,b){h.L=1,h.v=Pi(vr(v)),h.m=b,h.P=!0,Cc(h,null)}function Cc(h,v){h.F=Date.now(),_t(h),h.A=vr(h.v);var b=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),Di(b.i,"t",C),h.C=0,b=h.j.J,h.h=new Td,h.g=$d(h.j,b?v:null,!h.m),0<h.O&&(h.M=new Rn(x(h.Y,h,h.g),h.O)),v=h.U,b=h.g,C=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Mo[0]=q.toString()),q=Mo);for(var J=0;J<q.length;J++){var ue=Cr(b,q[J],C||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=h.H?k(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Kt(),gr(h.i,h.u,h.A,h.l,h.R,h.m)}Yr.prototype.ca=function(h){h=h.target;const v=this.M;v&&sr(h)==3?v.j():this.Y(h)},Yr.prototype.Y=function(h){try{if(h==this.g)e:{const Qt=sr(this.g);var v=this.g.Ba();const jr=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Dc(this.g)))){this.J||Qt!=4||v==7||(v==8||0>=jr?Kt(3):Kt(2)),Bo(this);var b=this.g.Z();this.X=b;t:if(Id(this)){var C=Dc(this.g);h="";var q=C.length,J=sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rr(this),Ci(this);var ue="";break t}this.h.i=new u.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(C[v],{stream:!(J&&v==q-1)});C.length=0,this.h.g+=h,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=b==200,Nr(this.i,this.u,this.A,this.l,this.R,Qt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,en=this.g;if((dt=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(dt)){var st=dt;break t}}st=null}if(b=st)Gt(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ac(this,b);else{this.o=!1,this.s=3,qe(12),Rr(this),Ci(this);break e}}if(this.P){b=!0;let wr;for(;!this.J&&this.C<ue.length;)if(wr=Rp(this,ue),wr==Ua){Qt==4&&(this.s=4,qe(14),b=!1),Gt(this.i,this.l,null,"[Incomplete Response]");break}else if(wr==Sc){this.s=4,qe(15),Gt(this.i,this.l,ue,"[Invalid Chunk]"),b=!1;break}else Gt(this.i,this.l,wr,null),Ac(this,wr);if(Id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||ue.length!=0||this.h.h||(this.s=1,qe(16),b=!1),this.o=this.o&&b,!b)Gt(this.i,this.l,ue,"[Invalid Chunked Response]"),Rr(this),Ci(this);else if(0<ue.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Lc(ln),ln.M=!0,qe(11))}}else Gt(this.i,this.l,ue,null),Ac(this,ue);Qt==4&&Rr(this),this.o&&!this.J&&(Qt==4?Xa(this.j,this):(this.o=!1,_t(this)))}else Ga(this.g),b==400&&0<ue.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),Rr(this),Ci(this)}}}catch{}finally{}};function Id(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Rp(h,v){var b=h.C,C=v.indexOf(`
`,b);return C==-1?Ua:(b=Number(v.substring(b,C)),isNaN(b)?Sc:(C+=1,C+b>v.length?Ua:(v=v.slice(C,C+b),h.C=C+b,v)))}Yr.prototype.cancel=function(){this.J=!0,Rr(this)};function _t(h){h.S=Date.now()+h.I,Sd(h,h.I)}function Sd(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Vt(x(h.ba,h),v)}function Bo(h){h.B&&(u.clearTimeout(h.B),h.B=null)}Yr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Qr(this.i,this.A),this.L!=2&&(Kt(),qe(17)),Rr(this),this.s=2,Ci(this)):Sd(this,this.S-h)};function Ci(h){h.j.G==0||h.J||Xa(h.j,h)}function Rr(h){Bo(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Vo(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Ac(h,v){try{var b=h.j;if(b.G!=0&&(b.g==h||Bn(b.h,h))){if(!h.K&&Bn(b.h,h)&&b.G==3){try{var C=b.Da.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var q=C;if(q[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)Ja(b),ns(b);else break e;Ya(b),qe(18)}}else b.za=q[1],0<b.za-b.T&&37500>q[2]&&b.F&&b.v==0&&!b.C&&(b.C=Vt(x(b.Za,b),6e3));if(1>=Ad(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Qs(b,11)}else if((h.K||b.g==h)&&Ja(b),!W(v))for(q=b.Da.g.parse(v),v=0;v<q.length;v++){let st=q[v];if(b.T=st[0],st=st[1],b.G==2)if(st[0]=="c"){b.K=st[1],b.ia=st[2];const ln=st[3];ln!=null&&(b.la=ln,b.j.info("VER="+b.la));const Qt=st[4];Qt!=null&&(b.Aa=Qt,b.j.info("SVER="+b.Aa));const jr=st[5];jr!=null&&typeof jr=="number"&&0<jr&&(C=1.5*jr,b.L=C,b.j.info("backChannelRequestTimeoutMs_="+C)),C=b;const wr=h.g;if(wr){const Qo=wr.g?wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qo){var J=C.h;J.g||Qo.indexOf("spdy")==-1&&Qo.indexOf("quic")==-1&&Qo.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Nc(J,J.h),J.h=null))}if(C.D){const tl=wr.g?wr.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(C.ya=tl,yt(C.I,C.D,tl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),C=b;var ue=h;if(C.qa=Bd(C,C.J?C.ia:null,C.W),ue.K){Nd(C.h,ue);var dt=ue,en=C.L;en&&(dt.I=en),dt.B&&(Bo(dt),_t(dt)),C.g=ue}else Go(C);0<b.i.length&&Es(b)}else st[0]!="stop"&&st[0]!="close"||Qs(b,7);else b.G==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Qs(b,7):bn(b):st[0]!="noop"&&b.l&&b.l.ta(st),b.v=0)}}Kt(4)}catch{}}var Cd=class{constructor(h,v){this.g=h,this.map=v}};function $o(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ad(h){return h.h?1:h.g?h.g.size:0}function Bn(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Nc(h,v){h.g?h.g.add(v):h.h=v}function Nd(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}$o.prototype.cancel=function(){if(this.i=Rd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Rd(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const b of h.g.values())v=v.concat(b.D);return v}return I(h.i)}function $a(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],b=h.length,C=0;C<b;C++)v.push(h[C]);return v}v=[],b=0;for(C in h)v[b++]=h[C];return v}function Wa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var b=0;b<h;b++)v.push(b);return v}v=[],b=0;for(const C in h)v[b++]=C;return v}}}function Ai(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var b=Wa(h),C=$a(h),q=C.length,J=0;J<q;J++)v.call(void 0,C[J],b&&b[J],h)}var Wo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pp(h,v){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var C=h[b].indexOf("="),q=null;if(0<=C){var J=h[b].substring(0,C);q=h[b].substring(C+1)}else J=h[b];v(J,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function qs(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof qs){this.h=h.h,qo(this,h.j),this.o=h.o,this.g=h.g,Ni(this,h.s),this.l=h.l;var v=h.i,b=new bs;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),Ri(this,b),this.m=h.m}else h&&(v=String(h).match(Wo))?(this.h=!1,qo(this,v[1]||"",!0),this.o=Ye(v[2]||""),this.g=Ye(v[3]||"",!0),Ni(this,v[4]),this.l=Ye(v[5]||"",!0),Ri(this,v[6]||"",!0),this.m=Ye(v[7]||"")):(this.h=!1,this.i=new bs(null,this.h))}qs.prototype.toString=function(){var h=[],v=this.j;v&&h.push(ji(v,qa,!0),":");var b=this.g;return(b||v=="file")&&(h.push("//"),(v=this.o)&&h.push(ji(v,qa,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(ji(b,b.charAt(0)=="/"?Dd:jd,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",ji(b,Rc)),h.join("")};function vr(h){return new qs(h)}function qo(h,v,b){h.j=b?Ye(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ni(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Ri(h,v,b){v instanceof bs?(h.i=v,xs(h.i,h.h)):(b||(v=ji(v,Od)),h.i=new bs(v,h.h))}function yt(h,v,b){h.i.set(v,b)}function Pi(h){return yt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ye(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ji(h,v,b){return typeof h=="string"?(h=encodeURI(h).replace(v,Pd),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Pd(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var qa=/[#\/\?@]/g,jd=/[#\?:]/g,Dd=/[#\?]/g,Od=/[#\?@]/g,Rc=/#/g;function bs(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function wn(h){h.g||(h.g=new Map,h.h=0,h.i&&Pp(h.i,function(v,b){h.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}t=bs.prototype,t.add=function(h,v){wn(this),this.i=null,h=Pr(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(v),this.h+=1,this};function Jr(h,v){wn(h),v=Pr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Xr(h,v){return wn(h),v=Pr(h,v),h.g.has(v)}t.forEach=function(h,v){wn(this),this.g.forEach(function(b,C){b.forEach(function(q){h.call(v,q,C,this)},this)},this)},t.na=function(){wn(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let C=0;C<v.length;C++){const q=h[C];for(let J=0;J<q.length;J++)b.push(v[C])}return b},t.V=function(h){wn(this);let v=[];if(typeof h=="string")Xr(this,h)&&(v=v.concat(this.g.get(Pr(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)v=v.concat(h[b])}return v},t.set=function(h,v){return wn(this),this.i=null,h=Pr(this,h),Xr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function Di(h,v,b){Jr(h,v),0<b.length&&(h.i=null,h.g.set(Pr(h,v),I(b)),h.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var C=v[b];const J=encodeURIComponent(String(C)),ue=this.V(C);for(C=0;C<ue.length;C++){var q=J;ue[C]!==""&&(q+="="+encodeURIComponent(String(ue[C]))),h.push(q)}}return this.i=h.join("&")};function Pr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function xs(h,v){v&&!h.j&&(wn(h),h.i=null,h.g.forEach(function(b,C){var q=C.toLowerCase();C!=q&&(Jr(this,C),Di(this,q,b))},h)),h.j=v}function jp(h,v){const b=new _n;if(u.Image){const C=new Image;C.onload=E(rr,b,"TestLoadImage: loaded",!0,v,C),C.onerror=E(rr,b,"TestLoadImage: error",!1,v,C),C.onabort=E(rr,b,"TestLoadImage: abort",!1,v,C),C.ontimeout=E(rr,b,"TestLoadImage: timeout",!1,v,C),u.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else v(!1)}function Ld(h,v){const b=new _n,C=new AbortController,q=setTimeout(()=>{C.abort(),rr(b,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:C.signal}).then(J=>{clearTimeout(q),J.ok?rr(b,"TestPingServer: ok",!0,v):rr(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),rr(b,"TestPingServer: error",!1,v)})}function rr(h,v,b,C,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),C(b)}catch{}}function Dp(){this.g=new Fo}function Md(h,v,b){const C=b||"";try{Ai(h,function(q,J){let ue=q;m(q)&&(ue=Ws(q)),v.push(C+J+"="+encodeURIComponent(ue))})}catch(q){throw v.push(C+"type="+encodeURIComponent("_badmap")),q}}function Hs(h){this.l=h.Ub||null,this.j=h.eb||!1}N(Hs,ws),Hs.prototype.g=function(){return new Ho(this.l,this.j)},Hs.prototype.i=(function(h){return function(){return h}})({});function Ho(h,v){Bt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Ho,Bt),t=Ho.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,ts(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||u).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ts(this)),this.g&&(this.readyState=3,ts(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vd(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vd(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?es(this):ts(this),this.readyState==3&&Vd(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,es(this))},t.Qa=function(h){this.g&&(this.response=h,es(this))},t.ga=function(){this.g&&es(this)};function es(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ts(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=v.next();return h.join(`\r
`)};function ts(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ks(h){let v="";return K(h,function(b,C){v+=C,v+=":",v+=b,v+=`\r
`}),v}function Oi(h,v,b){e:{for(C in b){var C=!1;break e}C=!0}C||(b=Ks(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):yt(h,v,b))}function St(h){Bt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(St,Bt);var Op=/^https?$/i,Pc=["POST","PUT"];t=St.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,b,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zr.g(),this.v=this.o?Ii(this.o):Ii(Zr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){Ko(this,J);return}if(h=b||"",b=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var q in C)b.set(q,C[q]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const J of C.keys())b.set(J,C.get(J));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(b.keys()).find(J=>J.toLowerCase()=="content-type"),q=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Pc,v,void 0))||C||q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ue]of b)this.g.setRequestHeader(J,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ka(this),this.u=!0,this.g.send(h),this.u=!1}catch(J){Ko(this,J)}};function Ko(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Ha(h),_r(h)}function Ha(h){h.A||(h.A=!0,vt(h,"complete"),vt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,vt(this,"complete"),vt(this,"abort"),_r(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_r(this,!0)),St.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jc(this):this.bb())},t.bb=function(){jc(this)};function jc(h){if(h.h&&typeof l<"u"&&(!h.v[1]||sr(h)!=4||h.Z()!=2)){if(h.u&&sr(h)==4)Kr(h.Ea,0,h);else if(vt(h,"readystatechange"),sr(h)==4){h.h=!1;try{const ue=h.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var C;if(C=ue===0){var q=String(h.D).match(Wo)[1]||null;!q&&u.self&&u.self.location&&(q=u.self.location.protocol.slice(0,-1)),C=!Op.test(q?q.toLowerCase():"")}b=C}if(b)vt(h,"complete"),vt(h,"success");else{h.m=6;try{var J=2<sr(h)?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.Z()+"]",Ha(h)}}finally{_r(h)}}}}function _r(h,v){if(h.g){Ka(h);const b=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||vt(h,"ready");try{b.onreadystatechange=C}catch{}}}function Ka(h){h.I&&(u.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function sr(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Ti(v)}};function Dc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ga(h){const v={};h=(h.g&&2<=sr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(W(h[C]))continue;var b=D(h[C]);const q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const J=v[q]||[];v[q]=J,J.push(b)}A(v,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(h,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||v}function Oc(h){this.Aa=0,this.i=[],this.j=new _n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ks("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ks("baseRetryDelayMs",5e3,h),this.cb=ks("retryDelaySeedMs",1e4,h),this.Wa=ks("forwardChannelMaxRetries",2,h),this.wa=ks("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new $o(h&&h.concurrentRequestLimit),this.Da=new Dp,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Oc.prototype,t.la=8,t.G=1,t.connect=function(h,v,b,C){qe(0),this.W=h,this.H=v||{},b&&C!==void 0&&(this.H.OSID=b,this.H.OAID=C),this.F=this.X,this.I=Bd(this,null,this.W),Es(this)};function bn(h){if(Qa(h),h.G==3){var v=h.U++,b=vr(h.I);if(yt(b,"SID",h.K),yt(b,"RID",v),yt(b,"TYPE","terminate"),Gs(h,b),v=new Yr(h,h.j,v),v.L=2,v.v=Pi(vr(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&u.Image&&(new Image().src=v.v,b=!0),b||(v.g=$d(v.j,null),v.g.ea(v.v)),v.F=Date.now(),_t(v)}Ud(h)}function ns(h){h.g&&(Lc(h),h.g.cancel(),h.g=null)}function Qa(h){ns(h),h.u&&(u.clearTimeout(h.u),h.u=null),Ja(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function Es(h){if(!yr(h.h)&&!h.s){h.s=!0;var v=h.Ga;Ne||de(),X||(Ne(),X=!0),pe.add(v,h),h.B=0}}function Lp(h,v){return Ad(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Vt(x(h.Ga,h,v),zd(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new Yr(this,this.j,h);let J=this.o;if(this.S&&(J?(J=k(J),P(J,this.S)):J=this.S),this.m!==null||this.O||(q.H=J,J=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var C=this.i[b];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=Li(this,q,v),b=vr(this.I),yt(b,"RID",h),yt(b,"CVER",22),this.D&&yt(b,"X-HTTP-Session-Id",this.D),Gs(this,b),J&&(this.O?v="headers="+encodeURIComponent(String(Ks(J)))+"&"+v:this.m&&Oi(b,this.m,J)),Nc(this.h,q),this.Ua&&yt(b,"TYPE","init"),this.P?(yt(b,"$req",v),yt(b,"SID","null"),q.T=!0,Ba(q,b,null)):Ba(q,b,v),this.G=2}}else this.G==3&&(h?Za(this,h):this.i.length==0||yr(this.h)||Za(this))};function Za(h,v){var b;v?b=v.l:b=h.U++;const C=vr(h.I);yt(C,"SID",h.K),yt(C,"RID",b),yt(C,"AID",h.T),Gs(h,C),h.m&&h.o&&Oi(C,h.m,h.o),b=new Yr(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Li(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Nc(h.h,b),Ba(b,C,v)}function Gs(h,v){h.H&&K(h.H,function(b,C){yt(v,C,b)}),h.l&&Ai({},function(b,C){yt(v,C,b)})}function Li(h,v,b){b=Math.min(h.i.length,b);var C=h.l?x(h.l.Na,h.l,h):null;e:{var q=h.i;let J=-1;for(;;){const ue=["count="+b];J==-1?0<b?(J=q[0].g,ue.push("ofs="+J)):J=0:ue.push("ofs="+J);let dt=!0;for(let en=0;en<b;en++){let st=q[en].g;const ln=q[en].map;if(st-=J,0>st)J=Math.max(0,q[en].g-100),dt=!1;else try{Md(ln,ue,"req"+st+"_")}catch{C&&C(ln)}}if(dt){C=ue.join("&");break e}}}return h=h.i.splice(0,b),v.D=h,C}function Go(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;Ne||de(),X||(Ne(),X=!0),pe.add(v,h),h.v=0}}function Ya(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Vt(x(h.Fa,h),zd(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,Fd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Vt(x(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qe(10),ns(this),Fd(this))};function Lc(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function Fd(h){h.g=new Yr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=vr(h.qa);yt(v,"RID","rpc"),yt(v,"SID",h.K),yt(v,"AID",h.T),yt(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&yt(v,"TO",h.ja),yt(v,"TYPE","xmlhttp"),Gs(h,v),h.m&&h.o&&Oi(v,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=Pi(vr(v)),b.m=null,b.P=!0,Cc(b,h)}t.Za=function(){this.C!=null&&(this.C=null,ns(this),Ya(this),qe(19))};function Ja(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Xa(h,v){var b=null;if(h.g==v){Ja(h),Lc(h),h.g=null;var C=2}else if(Bn(h.h,v))b=v.D,Nd(h.h,v),C=1;else return;if(h.G!=0){if(v.o)if(C==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;C=Ht(),vt(C,new Un(C,b)),Es(h)}else Go(h);else if(q=v.s,q==3||q==0&&0<v.X||!(C==1&&Lp(h,v)||C==2&&Ya(h)))switch(b&&0<b.length&&(v=h.h,v.i=v.i.concat(b)),q){case 1:Qs(h,5);break;case 4:Qs(h,10);break;case 3:Qs(h,6);break;default:Qs(h,2)}}}function zd(h,v){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*v}function Qs(h,v){if(h.j.info("Error code "+v),v==2){var b=x(h.fb,h),C=h.Xa;const q=!C;C=new qs(C||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||qo(C,"https"),Pi(C),q?jp(C.toString(),b):Ld(C.toString(),b)}else qe(2);h.G=0,h.l&&h.l.sa(v),Ud(h),Qa(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function Ud(h){if(h.G=0,h.ka=[],h.l){const v=Rd(h.h);(v.length!=0||h.i.length!=0)&&(S(h.ka,v),S(h.ka,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.ra()}}function Bd(h,v,b){var C=b instanceof qs?vr(b):new qs(b);if(C.g!="")v&&(C.g=v+"."+C.g),Ni(C,C.s);else{var q=u.location;C=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var J=new qs(null);C&&qo(J,C),v&&(J.g=v),q&&Ni(J,q),b&&(J.l=b),C=J}return b=h.D,v=h.ya,b&&v&&yt(C,b,v),yt(C,"VER",h.la),Gs(h,C),C}function $d(h,v,b){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new St(new Hs({eb:b})):new St(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mc(){}t=Mc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function el(){}el.prototype.g=function(h,v){return new $n(h,v)};function $n(h,v){Bt.call(this),this.g=new Oc(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!W(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!W(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Ts(this)}N($n,Bt),$n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){bn(this.g)},$n.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=Ws(h),h=b);v.i.push(new Cd(v.Ya++,h)),v.G==3&&Es(v)},$n.prototype.N=function(){this.g.l=null,delete this.j,bn(this.g),delete this.g,$n.aa.N.call(this)};function Wd(h){gt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const b in v){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}N(Wd,gt);function qd(){qt.call(this),this.status=1}N(qd,qt);function Ts(h){this.g=h}N(Ts,Mc),Ts.prototype.ua=function(){vt(this.g,"a")},Ts.prototype.ta=function(h){vt(this.g,new Wd(h))},Ts.prototype.sa=function(h){vt(this.g,new qd)},Ts.prototype.ra=function(){vt(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,ME=function(){return new el},LE=function(){return Ht()},OE=It,Xg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},za.NO_ERROR=0,za.TIMEOUT=8,za.HTTP_ERROR=6,df=za,Ed.COMPLETE="complete",DE=Ed,Si.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,pu=Si,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,jE=St}).apply(typeof Bh<"u"?Bh:typeof self<"u"?self:typeof window<"u"?window:{});const xb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new My("@firebase/firestore");function lu(){return Ca.logLevel}function ke(t,...e){if(Ca.logLevel<=tt.DEBUG){const n=e.map(Qy);Ca.debug(`Firestore (${fc}): ${t}`,...n)}}function yi(t,...e){if(Ca.logLevel<=tt.ERROR){const n=e.map(Qy);Ca.error(`Firestore (${fc}): ${t}`,...n)}}function Yl(t,...e){if(Ca.logLevel<=tt.WARN){const n=e.map(Qy);Ca.warn(`Firestore (${fc}): ${t}`,...n)}}function Qy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t="Unexpected state"){const e=`FIRESTORE (${fc}) INTERNAL ASSERTION FAILED: `+t;throw yi(e),new Error(e)}function ht(t,e){t||ze()}function $e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Mn.UNAUTHENTICATED)))}shutdown(){}}class LP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class MP{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ht(this.o===void 0);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new bo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new bo,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new bo)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht(typeof r.accessToken=="string"),new VE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string"),new Mn(e)}}class VP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new VP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ht(this.o===void 0);const r=o=>{o.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ht(typeof n.token=="string"),this.R=n.token,new zP(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=BP(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%e.length))}return r}}function ct(t,e){return t<e?-1:t>e?1:0}function Jl(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Tt(0,0))}static max(){return new Be(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r){n===void 0?n=0:n>e.length&&ze(),r===void 0?r=e.length-n:r>e.length-n&&ze(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vu?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=e.get(s),l=n.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Et extends Vu{construct(e,n,r){return new Et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Et(n)}static emptyPath(){return new Et([])}}const $P=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Vu{construct(e,n,r){return new In(e,n,r)}static isValidIdentifier(e){return $P.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new In(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(n)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(Et.fromString(e))}static fromName(e){return new Ae(Et.fromString(e).popFirst(5))}static empty(){return new Ae(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new Et(e.slice()))}}function WP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Be.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new Eo(s,Ae.empty(),e)}function qP(t){return new Eo(t.readTime,t.key,-1)}class Eo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Eo(Be.min(),Ae.empty(),-1)}static max(){return new Eo(Be.max(),Ae.empty(),-1)}}function HP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dd(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==KP)throw t;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,r)=>{n(e)}))}static reject(e){return new oe(((n,r)=>{r(e)}))}static waitFor(e){return new oe(((n,r)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&n()}),(d=>r(d)))})),l=!0,o===s&&n()}))}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next((s=>s?oe.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,o)=>{r.push(n.call(this,s,o))})),this.waitFor(r)}static mapArray(e,n){return new oe(((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next((y=>{l[m]=y,++u,u===o&&r(l)}),(y=>s(y)))}}))}static doWhile(e,n){return new oe(((r,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):r()};o()}))}}function QP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zy.oe=-1;function ap(t){return t==null}function jf(t){return t===0&&1/t==-1/0}function ZP(t){return typeof t=="number"&&Number.isInteger(t)&&!jf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ja(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new Ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $h(this.root,e,this.comparator,!1)}getReverseIterator(){return new $h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $h(this.root,e,this.comparator,!0)}}class $h{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??En.RED,this.left=s??En.EMPTY,this.right=o??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new En(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return En.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ze();const e=this.left.check();if(e!==this.right.check())throw ze();return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw ze()}get value(){throw ze()}get color(){throw ze()}get left(){throw ze()}get right(){throw ze()}copy(e,n,r,s,o){return this}insert(e,n,r){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Eb(this.data.getIterator())}getIteratorFrom(e){return new Eb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Sn(this.comparator);return n.data=e,n}}class Eb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Er([])}unionWith(e){let n=new Sn(In.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Er(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new UE("Invalid base64 string: "+o):o}})(e);return new Cn(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new Cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const YP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(t){if(ht(!!t),typeof t=="string"){let e=0;const n=YP.exec(t);if(ht(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wt(t.seconds),nanos:Wt(t.nanos)}}function Wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Aa(t){return typeof t=="string"?Cn.fromBase64String(t):Cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jy(t){const e=t.mapValue.fields.__previous_value__;return Yy(e)?Jy(e):e}function Fu(t){const e=To(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n,r,s,o,l,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=m}}class zu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new zu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh={mapValue:{}};function Na(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yy(t)?4:ej(t)?9007199254740991:XP(t)?10:11:ze()}function Fs(t,e){if(t===e)return!0;const n=Na(t);if(n!==Na(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=To(s.timestampValue),u=To(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return Aa(s.bytesValue).isEqual(Aa(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return Wt(s.geoPointValue.latitude)===Wt(o.geoPointValue.latitude)&&Wt(s.geoPointValue.longitude)===Wt(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Wt(s.integerValue)===Wt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Wt(s.doubleValue),u=Wt(o.doubleValue);return l===u?jf(l)===jf(u):isNaN(l)&&isNaN(u)}return!1})(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],Fs);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(kb(l)!==kb(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Fs(l[d],u[d])))return!1;return!0})(t,e);default:return ze()}}function Uu(t,e){return(t.values||[]).find((n=>Fs(n,e)))!==void 0}function Xl(t,e){if(t===e)return 0;const n=Na(t),r=Na(e);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=Wt(o.integerValue||o.doubleValue),d=Wt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(t,e);case 3:return Tb(t.timestampValue,e.timestampValue);case 4:return Tb(Fu(t),Fu(e));case 5:return ct(t.stringValue,e.stringValue);case 6:return(function(o,l){const u=Aa(o),d=Aa(l);return u.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let m=0;m<u.length&&m<d.length;m++){const y=ct(u[m],d[m]);if(y!==0)return y}return ct(u.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=ct(Wt(o.latitude),Wt(l.latitude));return u!==0?u:ct(Wt(o.longitude),Wt(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Ib(t.arrayValue,e.arrayValue);case 10:return(function(o,l){var u,d,m,y;const w=o.fields||{},x=l.fields||{},E=(u=w.value)===null||u===void 0?void 0:u.arrayValue,N=(d=x.value)===null||d===void 0?void 0:d.arrayValue,I=ct(((m=E==null?void 0:E.values)===null||m===void 0?void 0:m.length)||0,((y=N==null?void 0:N.values)===null||y===void 0?void 0:y.length)||0);return I!==0?I:Ib(E,N)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Wh.mapValue&&l===Wh.mapValue)return 0;if(o===Wh.mapValue)return 1;if(l===Wh.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),m=l.fields||{},y=Object.keys(m);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const x=ct(d[w],y[w]);if(x!==0)return x;const E=Xl(u[d[w]],m[y[w]]);if(E!==0)return E}return ct(d.length,y.length)})(t.mapValue,e.mapValue);default:throw ze()}}function Tb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ct(t,e);const n=To(t),r=To(e),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Ib(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Xl(n[s],r[s]);if(o)return o}return ct(n.length,r.length)}function ec(t){return ey(t)}function ey(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=To(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Aa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ae.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=ey(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${ey(n.fields[l])}`;return s+"}"})(t.mapValue):ze()}function Sb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ty(t){return!!t&&"integerValue"in t}function Xy(t){return!!t&&"arrayValue"in t}function Cb(t){return!!t&&"nullValue"in t}function Ab(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hf(t){return!!t&&"mapValue"in t}function XP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ku(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ja(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ku(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ku(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ej(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.value=e}static empty(){return new fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(n)}setAll(e){let n=In.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=ku(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());hf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];hf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ja(n,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new fr(ku(this.value))}}function BE(t){const e=[];return ja(t.fields,((n,r)=>{const s=new In([n]);if(hf(r)){const o=BE(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n,r,s,o,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Vn(e,0,Be.min(),Be.min(),Be.min(),fr.empty(),0)}static newFoundDocument(e,n,r,s){return new Vn(e,1,n,Be.min(),r,s,0)}static newNoDocument(e,n){return new Vn(e,2,n,Be.min(),Be.min(),fr.empty(),0)}static newUnknownDocument(e,n){return new Vn(e,3,n,Be.min(),Be.min(),fr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this.position=e,this.inclusive=n}}function Nb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=Ae.comparator(Ae.fromName(l.referenceValue),n.key):r=Xl(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n="asc"){this.field=e,this.dir=n}}function tj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{}class Jt extends $E{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rj(e,n,r):n==="array-contains"?new oj(e,r):n==="in"?new aj(e,r):n==="not-in"?new lj(e,r):n==="array-contains-any"?new cj(e,r):new Jt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sj(e,r):new ij(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Xl(n,this.value)):n!==null&&Na(this.value)===Na(n)&&this.matchesComparison(Xl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ms extends $E{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ms(e,n)}matches(e){return WE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function WE(t){return t.op==="and"}function qE(t){return nj(t)&&WE(t)}function nj(t){for(const e of t.filters)if(e instanceof ms)return!1;return!0}function ny(t){if(t instanceof Jt)return t.field.canonicalString()+t.op.toString()+ec(t.value);if(qE(t))return t.filters.map((e=>ny(e))).join(",");{const e=t.filters.map((n=>ny(n))).join(",");return`${t.op}(${e})`}}function HE(t,e){return t instanceof Jt?(function(r,s){return s instanceof Jt&&r.op===s.op&&r.field.isEqual(s.field)&&Fs(r.value,s.value)})(t,e):t instanceof ms?(function(r,s){return s instanceof ms&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,u)=>o&&HE(l,s.filters[u])),!0):!1})(t,e):void ze()}function KE(t){return t instanceof Jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${ec(n.value)}`})(t):t instanceof ms?(function(n){return n.op.toString()+" {"+n.getFilters().map(KE).join(" ,")+"}"})(t):"Filter"}class rj extends Jt{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class sj extends Jt{constructor(e,n){super(e,"in",n),this.keys=GE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class ij extends Jt{constructor(e,n){super(e,"not-in",n),this.keys=GE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function GE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>Ae.fromName(r.referenceValue)))}class oj extends Jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xy(n)&&Uu(n.arrayValue,this.value)}}class aj extends Jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uu(this.value.arrayValue,n)}}class lj extends Jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uu(this.value.arrayValue,n)}}class cj extends Jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Uu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.ue=null}}function Pb(t,e=null,n=[],r=[],s=null,o=null,l=null){return new uj(t,e,n,r,s,o,l)}function e0(t){const e=$e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>ny(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),ap(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ec(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ec(r))).join(",")),e.ue=n}return e.ue}function t0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Rb(t.startAt,e.startAt)&&Rb(t.endAt,e.endAt)}function ry(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dj(t,e,n,r,s,o,l,u){return new pc(t,e,n,r,s,o,l,u)}function n0(t){return new pc(t)}function jb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QE(t){return t.collectionGroup!==null}function Eu(t){const e=$e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Sn(In.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(u=u.add(m.field))}))})),u})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Bu(o,r))})),n.has(In.keyField().canonicalString())||e.ce.push(new Bu(In.keyField(),r))}return e.ce}function Ls(t){const e=$e(t);return e.le||(e.le=hj(e,Eu(t))),e.le}function hj(t,e){if(t.limitType==="F")return Pb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Bu(s.field,o)}));const n=t.endAt?new Df(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Df(t.startAt.position,t.startAt.inclusive):null;return Pb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sy(t,e){const n=t.filters.concat([e]);return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Of(t,e,n){return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lp(t,e){return t0(Ls(t),Ls(e))&&t.limitType===e.limitType}function ZE(t){return`${e0(Ls(t))}|lt:${t.limitType}`}function El(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>KE(s))).join(", ")}]`),ap(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>ec(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>ec(s))).join(",")),`Target(${r})`})(Ls(t))}; limitType=${t.limitType})`}function cp(t,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,s){for(const o of Eu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const m=Nb(l,u,d);return l.inclusive?m<=0:m<0})(r.startAt,Eu(r),s)||r.endAt&&!(function(l,u,d){const m=Nb(l,u,d);return l.inclusive?m>=0:m>0})(r.endAt,Eu(r),s))})(t,e)}function fj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YE(t){return(e,n)=>{let r=!1;for(const s of Eu(t)){const o=pj(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function pj(t,e,n){const r=t.field.isKeyField()?Ae.comparator(e.key,n.key):(function(o,l,u){const d=l.data.field(o),m=u.data.field(o);return d!==null&&m!==null?Xl(d,m):ze()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ze()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,((n,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return zE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=new Ot(Ae.comparator);function vi(){return mj}const JE=new Ot(Ae.comparator);function mu(...t){let e=JE;for(const n of t)e=e.insert(n.key,n);return e}function XE(t){let e=JE;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function fa(){return Tu()}function eT(){return Tu()}function Tu(){return new mc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const gj=new Ot(Ae.comparator),yj=new Sn(Ae.comparator);function Ze(...t){let e=yj;for(const n of t)e=e.add(n);return e}const vj=new Sn(ct);function _j(){return vj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jf(e)?"-0":e}}function tT(t){return{integerValue:""+t}}function wj(t,e){return ZP(e)?tT(e):r0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this._=void 0}}function bj(t,e,n){return t instanceof $u?(function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Yy(o)&&(o=Jy(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}})(n,e):t instanceof Wu?rT(t,e):t instanceof qu?sT(t,e):(function(s,o){const l=nT(s,o),u=Db(l)+Db(s.Pe);return ty(l)&&ty(s.Pe)?tT(u):r0(s.serializer,u)})(t,e)}function xj(t,e,n){return t instanceof Wu?rT(t,e):t instanceof qu?sT(t,e):n}function nT(t,e){return t instanceof Lf?(function(r){return ty(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class $u extends up{}class Wu extends up{constructor(e){super(),this.elements=e}}function rT(t,e){const n=iT(e);for(const r of t.elements)n.some((s=>Fs(s,r)))||n.push(r);return{arrayValue:{values:n}}}class qu extends up{constructor(e){super(),this.elements=e}}function sT(t,e){let n=iT(e);for(const r of t.elements)n=n.filter((s=>!Fs(s,r)));return{arrayValue:{values:n}}}class Lf extends up{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Db(t){return Wt(t.integerValue||t.doubleValue)}function iT(t){return Xy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n){this.field=e,this.transform=n}}function Ej(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Wu&&s instanceof Wu||r instanceof qu&&s instanceof qu?Jl(r.elements,s.elements,Fs):r instanceof Lf&&s instanceof Lf?Fs(r.Pe,s.Pe):r instanceof $u&&s instanceof $u})(t.transform,e.transform)}class Tj{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ff(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dp{}function oT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hp(t.key,Zn.none()):new fd(t.key,t.data,Zn.none());{const n=t.data,r=fr.empty();let s=new Sn(In.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new No(t.key,r,new Er(s.toArray()),Zn.none())}}function Ij(t,e,n){t instanceof fd?(function(s,o,l){const u=s.value.clone(),d=Lb(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,n):t instanceof No?(function(s,o,l){if(!ff(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=Lb(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(aT(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Iu(t,e,n,r){return t instanceof fd?(function(o,l,u,d){if(!ff(o.precondition,l))return u;const m=o.value.clone(),y=Mb(o.fieldTransforms,d,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(t,e,n,r):t instanceof No?(function(o,l,u,d){if(!ff(o.precondition,l))return u;const m=Mb(o.fieldTransforms,d,l),y=l.data;return y.setAll(aT(o)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((w=>w.field)))})(t,e,n,r):(function(o,l,u){return ff(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(t,e,n)}function Sj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=nT(r.transform,s||null);o!=null&&(n===null&&(n=fr.empty()),n.set(r.field,o))}return n||null}function Ob(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Jl(r,s,((o,l)=>Ej(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fd extends dp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class No extends dp{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function aT(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Lb(t,e,n){const r=new Map;ht(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,xj(l,u,n[s]))}return r}function Mb(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,bj(o,l,e))}return r}class hp extends dp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cj extends dp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Ij(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Iu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Iu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eT();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=n.has(s.key)?null:u;const d=oT(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Be.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((n,r)=>Ob(n,r)))&&Jl(this.baseMutations,e.baseMutations,((n,r)=>Ob(n,r)))}}class s0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ht(e.mutations.length===r.length);let s=(function(){return gj})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new s0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,it;function Pj(t){switch(t){default:return ze();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function lT(t){if(t===void 0)return yi("GRPC error has no .code"),re.UNKNOWN;switch(t){case Yt.OK:return re.OK;case Yt.CANCELLED:return re.CANCELLED;case Yt.UNKNOWN:return re.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return re.INTERNAL;case Yt.UNAVAILABLE:return re.UNAVAILABLE;case Yt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Yt.NOT_FOUND:return re.NOT_FOUND;case Yt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Yt.ABORTED:return re.ABORTED;case Yt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Yt.DATA_LOSS:return re.DATA_LOSS;default:return ze()}}(it=Yt||(Yt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=new ka([4294967295,4294967295],0);function Vb(t){const e=jj().encode(t),n=new PE;return n.update(e),new Uint8Array(n.digest())}function Fb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ka([n,r],0),new ka([s,o],0)]}class i0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gu(`Invalid padding: ${n}`);if(r<0)throw new gu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ka.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ka.fromNumber(r)));return s.compare(Dj)===1&&(s=new ka([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Vb(e),[r,s]=Fb(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);if(!this.de(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new i0(o,s,n);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.Ie===0)return;const n=Vb(e),[r,s]=Fb(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fp(Be.min(),s,new Ot(ct),vi(),Ze())}}class pd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pd(r,n,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class cT{constructor(e,n){this.targetId=e,this.me=n}}class uT{constructor(e,n,r=Cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class zb{constructor(){this.fe=0,this.ge=Bb(),this.pe=Cn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ze(),n=Ze(),r=Ze();return this.ge.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ze()}})),new pd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Bb()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ht(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Oj{constructor(e){this.Le=e,this.Be=new Map,this.ke=vi(),this.qe=Ub(),this.Qe=new Ot(ct)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ze()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,s)=>{this.ze(s)&&n(s)}))}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const o=s.target;if(ry(o))if(r===0){const l=new Ae(o.path);this.Ue(n,l,Vn.newNoDocument(l,Be.min()))}else ht(r===1);else{const l=this.Ye(n);if(l!==r){const u=this.Ze(e),d=u?this.Xe(u,e,l):1;if(d!==0){this.je(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,u;try{l=Aa(r).toUint8Array()}catch(d){if(d instanceof UE)return Yl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new i0(l,s,o)}catch(d){return Yl(d instanceof gu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach((o=>{const l=this.Le.tt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),s++)})),s}rt(e){const n=new Map;this.Be.forEach(((o,l)=>{const u=this.Je(l);if(u){if(o.current&&ry(u.target)){const d=new Ae(u.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Vn.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}}));let r=Ze();this.qe.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const m=this.Je(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.ke.forEach(((o,l)=>l.setReadTime(e)));const s=new fp(e,n,this.Qe,this.ke,r);return this.ke=vi(),this.qe=Ub(),this.Qe=new Ot(ct),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new zb,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Sn(ct),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zb),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ub(){return new Ot(Ae.comparator)}function Bb(){return new Ot(Ae.comparator)}const Lj={asc:"ASCENDING",desc:"DESCENDING"},Mj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vj={and:"AND",or:"OR"};class Fj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function iy(t,e){return t.useProto3Json||ap(e)?e:{value:e}}function Mf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zj(t,e){return Mf(t,e.toTimestamp())}function Ms(t){return ht(!!t),Be.fromTimestamp((function(n){const r=To(n);return new Tt(r.seconds,r.nanos)})(t))}function o0(t,e){return oy(t,e).canonicalString()}function oy(t,e){const n=(function(s){return new Et(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function hT(t){const e=Et.fromString(t);return ht(yT(e)),e}function ay(t,e){return o0(t.databaseId,e.path)}function _g(t,e){const n=hT(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(pT(n))}function fT(t,e){return o0(t.databaseId,e)}function Uj(t){const e=hT(t);return e.length===4?Et.emptyPath():pT(e)}function ly(t){return new Et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pT(t){return ht(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $b(t,e,n){return{name:ay(t,e),fields:n.value.mapValue.fields}}function Bj(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ze()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(m,y){return m.useProto3Json?(ht(y===void 0||typeof y=="string"),Cn.fromBase64String(y||"")):(ht(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Cn.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(m){const y=m.code===void 0?re.UNKNOWN:lT(m.code);return new ge(y,m.message||"")})(l);n=new uT(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_g(t,r.document.name),o=Ms(r.document.updateTime),l=r.document.createTime?Ms(r.document.createTime):Be.min(),u=new fr({mapValue:{fields:r.document.fields}}),d=Vn.newFoundDocument(s,o,l,u),m=r.targetIds||[],y=r.removedTargetIds||[];n=new pf(m,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_g(t,r.document),o=r.readTime?Ms(r.readTime):Be.min(),l=Vn.newNoDocument(s,o),u=r.removedTargetIds||[];n=new pf([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_g(t,r.document),o=r.removedTargetIds||[];n=new pf([],o,s,null)}else{if(!("filter"in e))return ze();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new Rj(s,o),u=r.targetId;n=new cT(u,l)}}return n}function $j(t,e){let n;if(e instanceof fd)n={update:$b(t,e.key,e.value)};else if(e instanceof hp)n={delete:ay(t,e.key)};else if(e instanceof No)n={update:$b(t,e.key,e.data),updateMask:Jj(e.fieldMask)};else{if(!(e instanceof Cj))return ze();n={verify:ay(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof $u)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Wu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof qu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Lf)return{fieldPath:l.field.canonicalString(),increment:u.Pe};throw ze()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:zj(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ze()})(t,e.precondition)),n}function Wj(t,e){return t&&t.length>0?(ht(e!==void 0),t.map((n=>(function(s,o){let l=s.updateTime?Ms(s.updateTime):Ms(o);return l.isEqual(Be.min())&&(l=Ms(o)),new Tj(l,s.transformResults||[])})(n,e)))):[]}function qj(t,e){return{documents:[fT(t,e.path)]}}function Hj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fT(t,s);const o=(function(m){if(m.length!==0)return gT(ms.create(m,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(m){if(m.length!==0)return m.map((y=>(function(x){return{field:Tl(x.field),direction:Qj(x.dir)}})(y)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=iy(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:n,parent:s}}function Kj(t){let e=Uj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ht(r===1);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=(function(w){const x=mT(w);return x instanceof ms&&qE(x)?x.getFilters():[x]})(n.where));let l=[];n.orderBy&&(l=(function(w){return w.map((x=>(function(N){return new Bu(Il(N.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(x)))})(n.orderBy));let u=null;n.limit&&(u=(function(w){let x;return x=typeof w=="object"?w.value:w,ap(x)?null:x})(n.limit));let d=null;n.startAt&&(d=(function(w){const x=!!w.before,E=w.values||[];return new Df(E,x)})(n.startAt));let m=null;return n.endAt&&(m=(function(w){const x=!w.before,E=w.values||[];return new Df(E,x)})(n.endAt)),dj(e,s,l,o,u,"F",d,m)}function Gj(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Il(n.unaryFilter.field);return Jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Il(n.unaryFilter.field);return Jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Il(n.unaryFilter.field);return Jt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Il(n.unaryFilter.field);return Jt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ze()}})(t):t.fieldFilter!==void 0?(function(n){return Jt.create(Il(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ze()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ms.create(n.compositeFilter.filters.map((r=>mT(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ze()}})(n.compositeFilter.op))})(t):ze()}function Qj(t){return Lj[t]}function Zj(t){return Mj[t]}function Yj(t){return Vj[t]}function Tl(t){return{fieldPath:t.canonicalString()}}function Il(t){return In.fromServerFormat(t.fieldPath)}function gT(t){return t instanceof Jt?(function(n){if(n.op==="=="){if(Ab(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NAN"}};if(Cb(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ab(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NOT_NAN"}};if(Cb(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(n.field),op:Zj(n.op),value:n.value}}})(t):t instanceof ms?(function(n){const r=n.getFilters().map((s=>gT(s)));return r.length===1?r[0]:{compositeFilter:{op:Yj(n.op),filters:r}}})(t):ze()}function Jj(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function yT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n,r,s,o=Be.min(),l=Be.min(),u=Cn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new go(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.ct=e}}function eD(t){const e=Kj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Of(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.un=new nD}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(Eo.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(Eo.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class nD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Sn(Et.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Sn(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new tc(0)}static kn(){return new tc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.changes=new mc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Iu(r.mutation,s,Er.empty(),Tt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ze()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ze()){const s=fa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((o=>{let l=mu();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=fa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ze())))}populateOverlays(e,n,r){const s=[];return r.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{n.set(l,u)}))}))}computeViews(e,n,r,s){let o=vi();const l=Tu(),u=(function(){return Tu()})();return n.forEach(((d,m)=>{const y=r.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof No)?o=o.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),Iu(y.mutation,m,y.mutation.getFieldMask(),Tt.now())):l.set(m.key,Er.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((m,y)=>l.set(m,y))),n.forEach(((m,y)=>{var w;return u.set(m,new sD(y,(w=l.get(m))!==null&&w!==void 0?w:null))})),u)))}recalculateAndSaveOverlays(e,n){const r=Tu();let s=new Ot(((l,u)=>l-u)),o=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const u of l)u.keys().forEach((d=>{const m=n.get(d);if(m===null)return;let y=r.get(d)||Er.empty();y=u.applyToLocalView(m,y),r.set(d,y);const w=(s.get(u.batchId)||Ze()).add(d);s=s.insert(u.batchId,w)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),m=d.key,y=d.value,w=eT();y.forEach((x=>{if(!o.has(x)){const E=oT(n.get(x),r.get(x));E!==null&&w.set(x,E),o=o.add(x)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,w))}return oe.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(l){return Ae.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):oe.resolve(fa());let u=-1,d=o;return l.next((m=>oe.forEach(m,((y,w)=>(u<w.largestBatchId&&(u=w.largestBatchId),o.get(y)?oe.resolve():this.remoteDocumentCache.getEntry(e,y).next((x=>{d=d.insert(y,x)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,d,m,Ze()))).next((y=>({batchId:u,changes:XE(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next((r=>{let s=mu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=mu();return this.indexManager.getCollectionParents(e,o).next((u=>oe.forEach(u,(d=>{const m=(function(w,x){return new pc(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((y=>{y.forEach(((w,x)=>{l=l.insert(w,x)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s)))).next((l=>{o.forEach(((d,m)=>{const y=m.getKey();l.get(y)===null&&(l=l.insert(y,Vn.newInvalidDocument(y)))}));let u=mu();return l.forEach(((d,m)=>{const y=o.get(d);y!==void 0&&Iu(y.mutation,m,Er.empty(),Tt.now()),cp(n,m)&&(u=u.insert(d,m))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ms(s.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(s){return{name:s.name,query:eD(s.bundledQuery),readTime:Ms(s.readTime)}})(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(){this.overlays=new Ot(Ae.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fa();return oe.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,o)=>{this.ht(e,n,o)})),oe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const s=fa(),o=n.length+1,l=new Ae(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Ot(((m,y)=>m-y));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=o.get(m.largestBatchId);y===null&&(y=fa(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const u=fa(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,y)=>u.set(m,y))),!(u.size()>=s)););return oe.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Nj(n,r));let o=this.Ir.get(n);o===void 0&&(o=Ze(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.Tr=new Sn(fn.Er),this.dr=new Sn(fn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new fn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new fn(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new Ae(new Et([])),r=new fn(n,e),s=new fn(n,e+1),o=[];return this.dr.forEachInRange([r,s],(l=>{this.Vr(l),o.push(l.key)})),o}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ae(new Et([])),r=new fn(n,e),s=new fn(n,e+1);let o=Ze();return this.dr.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new fn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ae.comparator(e.key,n.key)||ct(e.wr,n.wr)}static Ar(e,n){return ct(e.wr,n.wr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Sn(fn.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Aj(o,n,r,s);this.mutationQueue.push(l);for(const u of s)this.br=this.br.add(new fn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),o=s<0?0:s;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fn(n,0),s=new fn(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,s],(l=>{const u=this.Dr(l.wr);o.push(u)})),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Sn(ct);return n.forEach((s=>{const o=new fn(s,0),l=new fn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],(u=>{r=r.add(u.wr)}))})),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Ae.isDocumentKey(o)||(o=o.child(""));const l=new fn(new Ae(o),0);let u=new Sn(ct);return this.br.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(u=u.add(d.wr)),!0)}),l),oe.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){ht(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(n.mutations,(s=>{const o=new fn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new fn(n,0),s=this.br.firstAfterOrEqual(r);return oe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.Mr=e,this.docs=(function(){return new Ot(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(n))}getEntries(e,n){let r=vi();return n.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Vn.newInvalidDocument(s))})),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=vi();const l=n.path,u=new Ae(l.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:y}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||HP(qP(y),r)<=0||(s.has(y.key)||cp(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,n,r,s){ze()}Or(e,n){return oe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new dD(this)}getSize(e){return oe.resolve(this.size)}}class dD extends rD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.persistence=e,this.Nr=new mc((n=>e0(n)),t0),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new a0,this.targetCount=0,this.kr=tc.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,s)=>n(s))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new tc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.Nr.forEach(((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),oe.waitFor(o).next((()=>s))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Zy(0),this.Kr=!1,this.Kr=!0,this.$r=new lD,this.referenceDelegate=e(this),this.Ur=new hD(this),this.indexManager=new tD,this.remoteDocumentCache=(function(s){return new uD(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new Xj(n),this.Gr=new oD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new cD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const s=new pD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((o=>this.referenceDelegate.jr(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Hr(e,n){return oe.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class pD extends GP{constructor(e){super(),this.currentSequenceNumber=e}}class l0{constructor(e){this.persistence=e,this.Jr=new a0,this.Yr=null}static Zr(e){return new l0(e)}get Xr(){if(this.Yr)return this.Yr;throw ze()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.Xr.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,(r=>{const s=Ae.fromPath(r);return this.ei(e,s).next((o=>{o||n.removeEntry(s,Be.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ze(),s=Ze();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new c0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return JA()?8:QP(zn())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.Yi(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.Zi(e,n,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new mD;return this.Xi(e,n,l).next((u=>{if(o.result=u,this.zi)return this.es(e,n,l,u.size)}))})).next((()=>o.result))}es(e,n,r,s){return r.documentReadCount<this.ji?(lu()<=tt.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",El(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(lu()<=tt.DEBUG&&ke("QueryEngine","Query:",El(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(lu()<=tt.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",El(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ls(n))):oe.resolve())}Yi(e,n){if(jb(n))return oe.resolve(null);let r=Ls(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Of(n,null,"F"),r=Ls(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Ze(...o);return this.Ji.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.ts(n,u);return this.ns(n,m,l,d.readTime)?this.Yi(e,Of(n,null,"F")):this.rs(e,m,n,d)}))))})))))}Zi(e,n,r,s){return jb(n)||s.isEqual(Be.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next((o=>{const l=this.ts(n,o);return this.ns(n,l,r,s)?oe.resolve(null):(lu()<=tt.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),El(n)),this.rs(e,l,n,WP(s,-1)).next((u=>u)))}))}ts(e,n){let r=new Sn(YE(e));return n.forEach(((s,o)=>{cp(e,o)&&(r=r.add(o))})),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,r){return lu()<=tt.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",El(n)),this.Ji.getDocumentsMatchingQuery(e,n,Eo.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ot(ct),this._s=new mc((o=>e0(o)),t0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function vD(t,e,n,r){return new yD(t,e,n,r)}async function vT(t,e){const n=$e(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let d=Ze();for(const m of s){l.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}for(const m of o){u.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(r,d).next((m=>({hs:m,removedBatchIds:l,addedBatchIds:u})))}))}))}function _D(t,e){const n=$e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return(function(u,d,m,y){const w=m.batch,x=w.keys();let E=oe.resolve();return x.forEach((N=>{E=E.next((()=>y.getEntry(d,N))).next((I=>{const S=m.docVersions.get(N);ht(S!==null),I.version.compareTo(S)<0&&(w.applyToRemoteDocument(I,m),I.isValidDocument()&&(I.setReadTime(m.commitVersion),y.addEntry(I)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(d,w)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=Ze();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(d=d.add(u.batch.mutations[m].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function _T(t){const e=$e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function wD(t,e){const n=$e(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach(((y,w)=>{const x=s.get(w);if(!x)return;u.push(n.Ur.removeMatchingKeys(o,y.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(o,y.addedDocuments,w))));let E=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?E=E.withResumeToken(Cn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):y.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(y.resumeToken,r)),s=s.insert(w,E),(function(I,S,V){return I.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(x,E,y)&&u.push(n.Ur.updateTargetData(o,E))}));let d=vi(),m=Ze();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))})),u.push(bD(o,l,e.documentUpdates).next((y=>{d=y.Ps,m=y.Is}))),!r.isEqual(Be.min())){const y=n.Ur.getLastRemoteSnapshotVersion(o).next((w=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(y)}return oe.waitFor(u).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,m))).next((()=>d))})).then((o=>(n.os=s,o)))}function bD(t,e,n){let r=Ze(),s=Ze();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let l=vi();return n.forEach(((u,d)=>{const m=o.get(u);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Be.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):ke("LocalStore","Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",d.version)})),{Ps:l,Is:s}}))}function xD(t,e){const n=$e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function kD(t,e){const n=$e(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Ur.getTargetData(r,e).next((o=>o?(s=o,oe.resolve(s)):n.Ur.allocateTargetId(r).next((l=>(s=new go(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function cy(t,e,n){const r=$e(t),s=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!hd(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Wb(t,e,n){const r=$e(t);let s=Be.min(),o=Ze();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,m,y){const w=$e(d),x=w._s.get(y);return x!==void 0?oe.resolve(w.os.get(x)):w.Ur.getTargetData(m,y)})(r,l,Ls(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,n?s:Be.min(),n?o:Ze()))).next((u=>(ED(r,fj(e),u),{documents:u,Ts:o})))))}function ED(t,e,n){let r=t.us.get(e)||Be.min();n.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.us.set(e,r)}class qb{constructor(){this.activeTargetIds=_j()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TD{constructor(){this.so=new qb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh=null;function wg(){return qh===null?qh=(function(){return 268435456+Math.round(2147483648*Math.random())})():qh++,"0x"+qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="WebChannelConnection";class AD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,r,s,o,l){const u=wg(),d=this.xo(n,r.toUriEncodedString());ke("RestConnection",`Sending RPC '${n}' ${u}:`,d,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,l),this.No(n,d,m,s).then((y=>(ke("RestConnection",`Received RPC '${n}' ${u}: `,y),y)),(y=>{throw Yl("RestConnection",`RPC '${n}' ${u} failed with error: `,y,"url: ",d,"request:",s),y}))}Lo(n,r,s,o,l,u){return this.Mo(n,r,s,o,l)}Oo(n,r,s){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fc})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((o,l)=>n[l]=o)),s&&s.headers.forEach(((o,l)=>n[l]=o))}xo(n,r){const s=SD[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const o=wg();return new Promise(((l,u)=>{const d=new jE;d.setWithCredentials(!0),d.listenOnce(DE.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case df.NO_ERROR:const y=d.getResponseJson();ke(Ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),l(y);break;case df.TIMEOUT:ke(Ln,`RPC '${e}' ${o} timed out`),u(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case df.HTTP_ERROR:const w=d.getStatus();if(ke(Ln,`RPC '${e}' ${o} failed with status:`,w,"response text:",d.getResponseText()),w>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const E=x==null?void 0:x.error;if(E&&E.status&&E.message){const N=(function(S){const V=S.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(V)>=0?V:re.UNKNOWN})(E.status);u(new ge(N,E.message))}else u(new ge(re.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ge(re.UNAVAILABLE,"Connection failed."));break;default:ze()}}finally{ke(Ln,`RPC '${e}' ${o} completed.`)}}));const m=JSON.stringify(s);ke(Ln,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,r,15)}))}Bo(e,n,r){const s=wg(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ME(),u=LE(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const y=o.join("");ke(Ln,`Creating RPC '${e}' stream ${s}: ${y}`,d);const w=l.createWebChannel(y,d);let x=!1,E=!1;const N=new CD({Io:S=>{E?ke(Ln,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(x||(ke(Ln,`Opening RPC '${e}' stream ${s} transport.`),w.open(),x=!0),ke(Ln,`RPC '${e}' stream ${s} sending:`,S),w.send(S))},To:()=>w.close()}),I=(S,V,W)=>{S.listen(V,(U=>{try{W(U)}catch(G){setTimeout((()=>{throw G}),0)}}))};return I(w,pu.EventType.OPEN,(()=>{E||(ke(Ln,`RPC '${e}' stream ${s} transport opened.`),N.yo())})),I(w,pu.EventType.CLOSE,(()=>{E||(E=!0,ke(Ln,`RPC '${e}' stream ${s} transport closed`),N.So())})),I(w,pu.EventType.ERROR,(S=>{E||(E=!0,Yl(Ln,`RPC '${e}' stream ${s} transport errored:`,S),N.So(new ge(re.UNAVAILABLE,"The operation could not be completed")))})),I(w,pu.EventType.MESSAGE,(S=>{var V;if(!E){const W=S.data[0];ht(!!W);const U=W,G=U.error||((V=U[0])===null||V===void 0?void 0:V.error);if(G){ke(Ln,`RPC '${e}' stream ${s} received error:`,G);const Z=G.status;let K=(function(R){const P=Yt[R];if(P!==void 0)return lT(P)})(Z),A=G.message;K===void 0&&(K=re.INTERNAL,A="Unknown error status: "+Z+" with message "+G.message),E=!0,N.So(new ge(K,A)),w.close()}else ke(Ln,`RPC '${e}' stream ${s} received:`,W),N.bo(W)}})),I(u,OE.STAT_EVENT,(S=>{S.stat===Xg.PROXY?ke(Ln,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Xg.NOPROXY&&ke(Ln,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{N.wo()}),0),N}}function bg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){return new Fj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,r,s,o,l,u,d){this.ui=e,this.Ho=r,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(yi(n.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===n&&this.P_(r,s)}),(r=>{e((()=>{const s=new ge(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ND extends bT{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Bj(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Be.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Be.min():l.readTime?Ms(l.readTime):Be.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ly(this.serializer),n.addTarget=(function(o,l){let u;const d=l.target;if(u=ry(d)?{documents:qj(o,d)}:{query:Hj(o,d)._t},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=dT(o,l.resumeToken);const m=iy(o,l.expectedCount);m!==null&&(u.expectedCount=m)}else if(l.snapshotVersion.compareTo(Be.min())>0){u.readTime=Mf(o,l.snapshotVersion.toTimestamp());const m=iy(o,l.expectedCount);m!==null&&(u.expectedCount=m)}return u})(this.serializer,e);const r=Gj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ly(this.serializer),n.removeTarget=e,this.a_(n)}}class RD extends bT{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ht(!!e.streamToken),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Wj(e.writeResults,e.commitTime),r=Ms(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ly(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>$j(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Mo(e,oy(n,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(re.UNKNOWN,o.toString())}))}Lo(e,n,r,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Lo(e,oy(n,r),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(re.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class jD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yi(n),this.D_=!1):ke("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o((l=>{r.enqueueAndForget((async()=>{Da(this)&&(ke("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const m=$e(d);m.L_.add(4),await md(m),m.q_.set("Unknown"),m.L_.delete(4),await mp(m)})(this))}))})),this.q_=new jD(r,s)}}async function mp(t){if(Da(t))for(const e of t.B_)await e(!0)}async function md(t){for(const e of t.B_)await e(!1)}function xT(t,e){const n=$e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),f0(n)?h0(n):gc(n).r_()&&d0(n,e))}function u0(t,e){const n=$e(t),r=gc(n);n.N_.delete(e),r.r_()&&kT(n,e),n.N_.size===0&&(r.r_()?r.o_():Da(n)&&n.q_.set("Unknown"))}function d0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gc(t).A_(e)}function kT(t,e){t.Q_.xe(e),gc(t).R_(e)}function h0(t){t.Q_=new Oj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),gc(t).start(),t.q_.v_()}function f0(t){return Da(t)&&!gc(t).n_()&&t.N_.size>0}function Da(t){return $e(t).L_.size===0}function ET(t){t.Q_=void 0}async function OD(t){t.q_.set("Online")}async function LD(t){t.N_.forEach(((e,n)=>{d0(t,e)}))}async function MD(t,e){ET(t),f0(t)?(t.q_.M_(e),h0(t)):t.q_.set("Unknown")}async function VD(t,e,n){if(t.q_.set("Online"),e instanceof uT&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.N_.delete(u),s.Q_.removeTarget(u))})(t,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vf(t,r)}else if(e instanceof pf?t.Q_.Ke(e):e instanceof cT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Be.min()))try{const r=await _T(t.localStore);n.compareTo(r)>=0&&await(function(o,l){const u=o.Q_.rt(l);return u.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.N_.get(m);y&&o.N_.set(m,y.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,m)=>{const y=o.N_.get(d);if(!y)return;o.N_.set(d,y.withResumeToken(Cn.EMPTY_BYTE_STRING,y.snapshotVersion)),kT(o,d);const w=new go(y.target,d,m,y.sequenceNumber);d0(o,w)})),o.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),await Vf(t,r)}}async function Vf(t,e,n){if(!hd(e))throw e;t.L_.add(1),await md(t),t.q_.set("Offline"),n||(n=()=>_T(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ke("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await mp(t)}))}function TT(t,e){return e().catch((n=>Vf(t,n,e)))}async function gp(t){const e=$e(t),n=Io(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;FD(e);)try{const s=await xD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,zD(e,s)}catch(s){await Vf(e,s)}IT(e)&&ST(e)}function FD(t){return Da(t)&&t.O_.length<10}function zD(t,e){t.O_.push(e);const n=Io(t);n.r_()&&n.V_&&n.m_(e.mutations)}function IT(t){return Da(t)&&!Io(t).n_()&&t.O_.length>0}function ST(t){Io(t).start()}async function UD(t){Io(t).p_()}async function BD(t){const e=Io(t);for(const n of t.O_)e.m_(n.mutations)}async function $D(t,e,n){const r=t.O_.shift(),s=s0.from(r,e,n);await TT(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await gp(t)}async function WD(t,e){e&&Io(t).V_&&await(async function(r,s){if((function(l){return Pj(l)&&l!==re.ABORTED})(s.code)){const o=r.O_.shift();Io(r).s_(),await TT(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await gp(r)}})(t,e),IT(t)&&ST(t)}async function Kb(t,e){const n=$e(t);n.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Da(n);n.L_.add(3),await md(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await mp(n)}async function qD(t,e){const n=$e(t);e?(n.L_.delete(2),await mp(n)):e||(n.L_.add(2),await md(n),n.q_.set("Unknown"))}function gc(t){return t.K_||(t.K_=(function(n,r,s){const o=$e(n);return o.w_(),new ND(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Eo:OD.bind(null,t),Ro:LD.bind(null,t),mo:MD.bind(null,t),d_:VD.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),f0(t)?h0(t):t.q_.set("Unknown")):(await t.K_.stop(),ET(t))}))),t.K_}function Io(t){return t.U_||(t.U_=(function(n,r,s){const o=$e(n);return o.w_(),new RD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UD.bind(null,t),mo:WD.bind(null,t),f_:BD.bind(null,t),g_:$D.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await gp(t)):(await t.U_.stop(),t.O_.length>0&&(ke("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new bo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,u=new p0(e,n,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function m0(t,e){if(yi("AsyncQueue",`${e}: ${t}`),hd(t))return new ge(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=mu(),this.sortedSet=new Ot(this.comparator)}static emptySet(e){return new Dl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Dl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Dl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.W_=new Ot(Ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ze():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class nc{constructor(e,n,r,s,o,l,u,d,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach((u=>{l.push({type:0,doc:u})})),new nc(e,n,Dl.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class KD{constructor(){this.queries=Qb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=$e(n),o=s.queries;s.queries=Qb(),o.forEach(((l,u)=>{for(const d of u.j_)d.onError(r)}))})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function Qb(){return new mc((t=>ZE(t)),lp)}async function CT(t,e){const n=$e(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(r=2):(o=new HD,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=m0(l,`Initialization of query '${El(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&g0(n)}async function AT(t,e){const n=$e(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GD(t,e){const n=$e(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const u of l.j_)u.X_(s)&&(r=!0);l.z_=s}}r&&g0(n)}function QD(t,e,n){const r=$e(t),s=r.queries.get(e);if(s)for(const o of s.j_)o.onError(n);r.queries.delete(e)}function g0(t){t.Y_.forEach((e=>{e.next()}))}var uy,Zb;(Zb=uy||(uy={})).ea="default",Zb.Cache="cache";class NT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new nc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.key=e}}class PT{constructor(e){this.key=e}}class ZD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ze(),this.mutatedKeys=Ze(),this.Aa=YE(e),this.Ra=new Dl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Gb,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,w)=>{const x=s.get(y),E=cp(this.query,w)?w:null,N=!!x&&this.mutatedKeys.has(x.key),I=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let S=!1;x&&E?x.data.isEqual(E.data)?N!==I&&(r.track({type:3,doc:E}),S=!0):this.ga(x,E)||(r.track({type:2,doc:E}),S=!0,(d&&this.Aa(E,d)>0||m&&this.Aa(E,m)<0)&&(u=!0)):!x&&E?(r.track({type:0,doc:E}),S=!0):x&&!E&&(r.track({type:1,doc:x}),S=!0,(d||m)&&(u=!0)),S&&(E?(l=l.add(E),o=I?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{Ra:l,fa:r,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((y,w)=>(function(E,N){const I=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze()}};return I(E)-I(N)})(y.type,w.type)||this.Aa(y.doc,w.doc))),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,m=d!==this.Ea;return this.Ea=d,l.length!==0||m?{snapshot:new nc(this.query,e.Ra,o,l,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Gb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ze(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new PT(r))})),this.da.forEach((r=>{e.has(r)||n.push(new RT(r))})),n}ba(e){this.Ta=e.Ts,this.da=Ze();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return nc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class YD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class JD{constructor(e){this.key=e,this.va=!1}}class XD{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new mc((u=>ZE(u)),lp),this.Ma=new Map,this.xa=new Set,this.Oa=new Ot(Ae.comparator),this.Na=new Map,this.La=new a0,this.Ba={},this.ka=new Map,this.qa=tc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function e4(t,e,n=!0){const r=VT(t);let s;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await jT(r,e,n,!0),s}async function t4(t,e){const n=VT(t);await jT(n,e,!0,!1)}async function jT(t,e,n,r){const s=await kD(t.localStore,Ls(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await n4(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&xT(t.remoteStore,s),u}async function n4(t,e,n,r,s){t.Ka=(w,x,E)=>(async function(I,S,V,W){let U=S.view.ma(V);U.ns&&(U=await Wb(I.localStore,S.query,!1).then((({documents:A})=>S.view.ma(A,U))));const G=W&&W.targetChanges.get(S.targetId),Z=W&&W.targetMismatches.get(S.targetId)!=null,K=S.view.applyChanges(U,I.isPrimaryClient,G,Z);return Jb(I,S.targetId,K.wa),K.snapshot})(t,w,x,E);const o=await Wb(t.localStore,e,!0),l=new ZD(e,o.Ts),u=l.ma(o.documents),d=pd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),m=l.applyChanges(u,t.isPrimaryClient,d);Jb(t,n,m.wa);const y=new YD(e,n,l);return t.Fa.set(e,y),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function r4(t,e,n){const r=$e(t),s=r.Fa.get(e),o=r.Ma.get(s.targetId);if(o.length>1)return r.Ma.set(s.targetId,o.filter((l=>!lp(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cy(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&u0(r.remoteStore,s.targetId),dy(r,s.targetId)})).catch(dd)):(dy(r,s.targetId),await cy(r.localStore,s.targetId,!0))}async function s4(t,e){const n=$e(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),u0(n.remoteStore,r.targetId))}async function i4(t,e,n){const r=h4(t);try{const s=await(function(l,u){const d=$e(l),m=Tt.now(),y=u.reduce(((E,N)=>E.add(N.key)),Ze());let w,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let N=vi(),I=Ze();return d.cs.getEntries(E,y).next((S=>{N=S,N.forEach(((V,W)=>{W.isValidDocument()||(I=I.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(E,N))).next((S=>{w=S;const V=[];for(const W of u){const U=Sj(W,w.get(W.key).overlayedDocument);U!=null&&V.push(new No(W.key,U,BE(U.value.mapValue),Zn.exists(!0)))}return d.mutationQueue.addMutationBatch(E,m,V,u)})).next((S=>{x=S;const V=S.applyToLocalDocumentSet(w,I);return d.documentOverlayCache.saveOverlays(E,S.batchId,V)}))})).then((()=>({batchId:x.batchId,changes:XE(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let m=l.Ba[l.currentUser.toKey()];m||(m=new Ot(ct)),m=m.insert(u,d),l.Ba[l.currentUser.toKey()]=m})(r,s.batchId,n),await gd(r,s.changes),await gp(r.remoteStore)}catch(s){const o=m0(s,"Failed to persist write");n.reject(o)}}async function DT(t,e){const n=$e(t);try{const r=await wD(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=n.Na.get(o);l&&(ht(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?ht(l.va):s.removedDocuments.size>0&&(ht(l.va),l.va=!1))})),await gd(n,r,e)}catch(r){await dd(r)}}function Yb(t,e,n){const r=$e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach(((o,l)=>{const u=l.view.Z_(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=$e(l);d.onlineState=u;let m=!1;d.queries.forEach(((y,w)=>{for(const x of w.j_)x.Z_(u)&&(m=!0)})),m&&g0(d)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function o4(t,e,n){const r=$e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),o=s&&s.key;if(o){let l=new Ot(Ae.comparator);l=l.insert(o,Vn.newNoDocument(o,Be.min()));const u=Ze().add(o),d=new fp(Be.min(),new Map,new Ot(ct),l,u);await DT(r,d),r.Oa=r.Oa.remove(o),r.Na.delete(e),y0(r)}else await cy(r.localStore,e,!1).then((()=>dy(r,e,n))).catch(dd)}async function a4(t,e){const n=$e(t),r=e.batch.batchId;try{const s=await _D(n.localStore,e);LT(n,r,null),OT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gd(n,s)}catch(s){await dd(s)}}async function l4(t,e,n){const r=$e(t);try{const s=await(function(l,u){const d=$e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return d.mutationQueue.lookupMutationBatch(m,u).next((w=>(ht(w!==null),y=w.keys(),d.mutationQueue.removeMutationBatch(m,w)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,y,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>d.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);LT(r,e,n),OT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gd(r,s)}catch(s){await dd(s)}}function OT(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function LT(t,e,n){const r=$e(t);let s=r.Ba[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function dy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||MT(t,r)}))}function MT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(u0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),y0(t))}function Jb(t,e,n){for(const r of n)r instanceof RT?(t.La.addReference(r.key,e),c4(t,r)):r instanceof PT?(ke("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||MT(t,r.key)):ze()}function c4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ke("SyncEngine","New document in limbo: "+n),t.xa.add(r),y0(t))}function y0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ae(Et.fromString(e)),r=t.qa.next();t.Na.set(r,new JD(n)),t.Oa=t.Oa.insert(n,r),xT(t.remoteStore,new go(Ls(n0(n.path)),r,"TargetPurposeLimboResolution",Zy.oe))}}async function gd(t,e,n){const r=$e(t),s=[],o=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((u,d)=>{l.push(r.Ka(d,e,n).then((m=>{var y;if((m||n)&&r.isPrimaryClient){const w=m?!m.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(m){s.push(m);const w=c0.Wi(d.targetId,m);o.push(w)}})))})),await Promise.all(l),r.Ca.d_(s),await(async function(d,m){const y=$e(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>oe.forEach(m,(x=>oe.forEach(x.$i,(E=>y.persistence.referenceDelegate.addReference(w,x.targetId,E))).next((()=>oe.forEach(x.Ui,(E=>y.persistence.referenceDelegate.removeReference(w,x.targetId,E)))))))))}catch(w){if(!hd(w))throw w;ke("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const x=w.targetId;if(!w.fromCache){const E=y.os.get(x),N=E.snapshotVersion,I=E.withLastLimboFreeSnapshotVersion(N);y.os=y.os.insert(x,I)}}})(r.localStore,o))}async function u4(t,e){const n=$e(t);if(!n.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=await vT(n.localStore,e);n.currentUser=e,(function(o,l){o.ka.forEach((u=>{u.forEach((d=>{d.reject(new ge(re.CANCELLED,l))}))})),o.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gd(n,r.hs)}}function d4(t,e){const n=$e(t),r=n.Na.get(e);if(r&&r.va)return Ze().add(r.key);{let s=Ze();const o=n.Ma.get(e);if(!o)return s;for(const l of o){const u=n.Fa.get(l);s=s.unionWith(u.view.Va)}return s}}function VT(t){const e=$e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o4.bind(null,e),e.Ca.d_=GD.bind(null,e.eventManager),e.Ca.$a=QD.bind(null,e.eventManager),e}function h4(t){const e=$e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l4.bind(null,e),e}class Ff{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return vD(this.persistence,new gD,e.initialUser,this.serializer)}Ga(e){return new fD(l0.Zr,this.serializer)}Wa(e){return new TD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ff.provider={build:()=>new Ff};class hy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=u4.bind(null,this.syncEngine),await qD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KD})()}createDatastore(e){const n=pp(e.databaseInfo.databaseId),r=(function(o){return new AD(o)})(e.databaseInfo);return(function(o,l,u,d){return new PD(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,o,l,u){return new DD(r,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>Yb(this.syncEngine,n,0)),(function(){return Hb.D()?new Hb:new ID})())}createSyncEngine(e,n){return(function(s,o,l,u,d,m,y){const w=new XD(s,o,l,u,d,m);return y&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const o=$e(s);ke("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await md(o),o.k_.shutdown(),o.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hy.provider={build:()=>new hy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Mn.UNAUTHENTICATED,this.clientId=FE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{ke("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=m0(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function xg(t,e){t.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await vT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Xb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await p4(t);ke("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Kb(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Kb(e.remoteStore,s))),t._onlineComponents=e}async function p4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke("FirestoreClient","Using user provided OfflineComponentProvider");try{await xg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Yl("Error using user provided cache. Falling back to memory cache: "+n),await xg(t,new Ff)}}else ke("FirestoreClient","Using default OfflineComponentProvider"),await xg(t,new Ff);return t._offlineComponents}async function zT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke("FirestoreClient","Using user provided OnlineComponentProvider"),await Xb(t,t._uninitializedComponentsProvider._online)):(ke("FirestoreClient","Using default OnlineComponentProvider"),await Xb(t,new hy))),t._onlineComponents}function m4(t){return zT(t).then((e=>e.syncEngine))}async function fy(t){const e=await zT(t),n=e.eventManager;return n.onListen=e4.bind(null,e.syncEngine),n.onUnlisten=r4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=t4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=s4.bind(null,e.syncEngine),n}function g4(t,e,n={}){const r=new bo;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,m){const y=new FT({next:x=>{y.Za(),l.enqueueAndForget((()=>AT(o,w))),x.fromCache&&d.source==="server"?m.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),w=new NT(u,y,{includeMetadataChanges:!0,_a:!0});return CT(o,w)})(await fy(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t,e,n){if(!n)throw new ge(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function y4(t,e,n,r){if(e===!0&&r===!0)throw new ge(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tx(t){if(!Ae.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nx(t){if(Ae.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ze()}function Tr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yp(t);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rx(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new OP;switch(r.type){case"firstParty":return new FP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=ex.get(n);r&&(ke("ComponentProvider","Removing Datastore"),ex.delete(n),r.terminate())})(this),Promise.resolve()}}function v4(t,e,n,r={}){var s;const o=(t=Tr(t,vp))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Mn.MOCK_USER;else{u=qA(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Mn(m)}t._authCredentials=new LP(new VE(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ki(this.firestore,e,this._query)}}class Yn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}}class xo extends ki{constructor(e,n,r){super(e,n,n0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new Ae(e))}withConverter(e){return new xo(this.firestore,e,this._path)}}function mt(t,e,...n){if(t=Dt(t),BT("collection","path",e),t instanceof vp){const r=Et.fromString(e,...n);return nx(r),new xo(t,null,r)}{if(!(t instanceof Yn||t instanceof xo))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Et.fromString(e,...n));return nx(r),new xo(t.firestore,null,r)}}function An(t,e,...n){if(t=Dt(t),arguments.length===1&&(e=FE.newId()),BT("doc","path",e),t instanceof vp){const r=Et.fromString(e,...n);return tx(r),new Yn(t,null,new Ae(r))}{if(!(t instanceof Yn||t instanceof xo))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Et.fromString(e,...n));return tx(r),new Yn(t.firestore,t instanceof xo?t.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wT(this,"async_queue_retry"),this.Vu=()=>{const r=bg();r&&ke("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=bg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=bg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new bo;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!hd(e))throw e;ke("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u})(r);throw yi("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=p0.createAndSchedule(this,e,n,r,(o=>this.yu(o)));return this.Tu.push(s),s}fu(){this.Eu&&ze()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function ix(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(t,["next","error","complete"])}class _i extends vp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new sx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sx(e),this._firestoreClient=void 0,await e}}}function _4(t,e){const n=typeof t=="object"?t:Hk(),r=typeof t=="string"?t:"(default)",s=Fy(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=$A("firestore");o&&v4(s,...o)}return s}function _p(t){if(t._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||w4(t),t._firestoreClient}function w4(t){var e,n,r;const s=t._freezeSettings(),o=(function(u,d,m,y){return new JP(u,d,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,UT(y.experimentalLongPollingOptions),y.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new f4(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rc(Cn.fromBase64String(e))}catch(n){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rc(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=/^__.*__$/;class x4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new No(e,this.data,this.fieldMask,n,this.fieldTransforms):new fd(e,this.data,n,this.fieldTransforms)}}class $T{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new No(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze()}}class w0{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new w0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(WT(this.Cu)&&b4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class k4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pp(e)}Qu(e,n,r,s=!1){return new w0({Cu:e,methodName:n,qu:r,path:In.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vd(t){const e=t._freezeSettings(),n=pp(t._databaseId);return new k4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function b0(t,e,n,r,s,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,s);k0("Data must be an object, but it was:",l,r);const u=KT(r,l);let d,m;if(o.merge)d=new Er(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const w of o.mergeFields){const x=py(e,w,n);if(!l.contains(x))throw new ge(re.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);QT(y,x)||y.push(x)}d=new Er(y),m=l.fieldTransforms.filter((w=>d.covers(w.field)))}else d=null,m=l.fieldTransforms;return new x4(new fr(u),d,m)}class bp extends wp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bp}}class x0 extends wp{_toFieldTransform(e){return new kj(e.path,new $u)}isEqual(e){return e instanceof x0}}function qT(t,e,n,r){const s=t.Qu(1,e,n);k0("Data must be an object, but it was:",s,r);const o=[],l=fr.empty();ja(r,((d,m)=>{const y=E0(e,d,n);m=Dt(m);const w=s.Nu(y);if(m instanceof bp)o.push(y);else{const x=_d(m,w);x!=null&&(o.push(y),l.set(y,x))}}));const u=new Er(o);return new $T(l,u,s.fieldTransforms)}function HT(t,e,n,r,s,o){const l=t.Qu(1,e,n),u=[py(e,r,n)],d=[s];if(o.length%2!=0)throw new ge(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)u.push(py(e,o[x])),d.push(o[x+1]);const m=[],y=fr.empty();for(let x=u.length-1;x>=0;--x)if(!QT(m,u[x])){const E=u[x];let N=d[x];N=Dt(N);const I=l.Nu(E);if(N instanceof bp)m.push(E);else{const S=_d(N,I);S!=null&&(m.push(E),y.set(E,S))}}const w=new Er(m);return new $T(y,w,l.fieldTransforms)}function E4(t,e,n,r=!1){return _d(n,t.Qu(r?4:3,e))}function _d(t,e){if(GT(t=Dt(t)))return k0("Unsupported field value:",e,t),KT(t,e);if(t instanceof wp)return(function(r,s){if(!WT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const u of r){let d=_d(u,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(t,e)}return(function(r,s){if((r=Dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Tt.fromDate(r);return{timestampValue:Mf(s.serializer,o)}}if(r instanceof Tt){const o=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mf(s.serializer,o)}}if(r instanceof v0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rc)return{bytesValue:dT(s.serializer,r._byteString)};if(r instanceof Yn){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:o0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof _0)return(function(l,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return r0(u.serializer,d)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${yp(r)}`)})(t,e)}function KT(t,e){const n={};return zE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ja(t,((r,s)=>{const o=_d(s,e.Mu(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function GT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof v0||t instanceof rc||t instanceof Yn||t instanceof wp||t instanceof _0)}function k0(t,e,n){if(!GT(n)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(n)){const r=yp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function py(t,e,n){if((e=Dt(e))instanceof yd)return e._internalPath;if(typeof e=="string")return E0(t,e);throw zf("Field path arguments must be of type string or ",t,!1,void 0,n)}const T4=new RegExp("[~\\*/\\[\\]]");function E0(t,e,n){if(e.search(T4)>=0)throw zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yd(...e.split("."))._internalPath}catch{throw zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zf(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new ge(re.INVALID_ARGUMENT,u+t+d)}function QT(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(T0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class I4 extends ZT{data(){return super.data()}}function T0(t,e){return typeof e=="string"?E0(t,e):e instanceof yd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class I0{}class S0 extends I0{}function Ro(t,e,...n){let r=[];e instanceof I0&&r.push(e),r=r.concat(n),(function(o){const l=o.filter((d=>d instanceof A0)).length,u=o.filter((d=>d instanceof C0)).length;if(l>1||l>0&&u>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class C0 extends S0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new C0(e,n,r)}_apply(e){const n=this._parse(e);return JT(e._query,n),new ki(e.firestore,e.converter,sy(e._query,n))}_parse(e){const n=vd(e.firestore);return(function(o,l,u,d,m,y,w){let x;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){ax(w,y);const E=[];for(const N of w)E.push(ox(d,o,N));x={arrayValue:{values:E}}}else x=ox(d,o,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||ax(w,y),x=E4(u,l,w,y==="in"||y==="not-in");return Jt.create(m,y,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class A0 extends I0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new A0(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ms.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)JT(l,d),l=sy(l,d)})(e._query,n),new ki(e.firestore,e.converter,sy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class N0 extends S0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new N0(e,n)}_apply(e){const n=(function(s,o,l){if(s.startAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bu(o,l)})(e._query,this._field,this._direction);return new ki(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new pc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function R0(t,e="asc"){const n=e,r=T0("orderBy",t);return N0._create(r,n)}class P0 extends S0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new P0(e,n,r)}_apply(e){return new ki(e.firestore,e.converter,Of(e._query,this._limit,this._limitType))}}function S4(t){return P0._create("limit",t,"F")}function ox(t,e,n){if(typeof(n=Dt(n))=="string"){if(n==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QE(e)&&n.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Et.fromString(n));if(!Ae.isDocumentKey(r))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sb(t,new Ae(r))}if(n instanceof Yn)return Sb(t,n._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yp(n)}.`)}function ax(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JT(t,e){const n=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class C4{convertValue(e,n="none"){switch(Na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ze()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ja(e,((s,o)=>{r[s]=this.convertValue(o,n)})),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((l=>Wt(l.doubleValue)));return new _0(o)}convertGeoPoint(e){return new v0(Wt(e.latitude),Wt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const n=To(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Et.fromString(e);ht(yT(r));const s=new zu(r.get(1),r.get(3)),o=new Ae(r.popFirst(5));return s.isEqual(n)||yi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XT extends ZT{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(T0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class mf extends XT{data(e={}){return super.data(e)}}class eI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new yu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new mf(this._firestore,this._userDataWriter,r.key,r,new yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new mf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new yu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new mf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new yu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return u.type!==0&&(m=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),y=l.indexOf(u.doc.key)),{type:A4(u.type),doc:d,oldIndex:m,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function A4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze()}}class D0 extends C4{constructor(e){super(),this.firestore=e}convertBytes(e){return new rc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,n)}}function oi(t){t=Tr(t,ki);const e=Tr(t.firestore,_i),n=_p(e),r=new D0(e);return YT(t._query),g4(n,t._query).then((s=>new eI(e,r,t,s)))}function N4(t,e,n){t=Tr(t,Yn);const r=Tr(t.firestore,_i),s=j0(t.converter,e,n);return wd(r,[b0(vd(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Zn.none())])}function yc(t,e,n,...r){t=Tr(t,Yn);const s=Tr(t.firestore,_i),o=vd(s);let l;return l=typeof(e=Dt(e))=="string"||e instanceof yd?HT(o,"updateDoc",t._key,e,n,r):qT(o,"updateDoc",t._key,e),wd(s,[l.toMutation(t._key,Zn.exists(!0))])}function vc(t){return wd(Tr(t.firestore,_i),[new hp(t._key,Zn.none())])}function $r(t,e){const n=Tr(t.firestore,_i),r=An(t),s=j0(t.converter,e);return wd(n,[b0(vd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Zn.exists(!1))]).then((()=>r))}function Oa(t,...e){var n,r,s;t=Dt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||ix(e[l])||(o=e[l],l++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ix(e[l])){const w=e[l];e[l]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[l+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let d,m,y;if(t instanceof Yn)m=Tr(t.firestore,_i),y=n0(t._key.path),d={next:w=>{e[l]&&e[l](R4(m,t,w))},error:e[l+1],complete:e[l+2]};else{const w=Tr(t,ki);m=Tr(w.firestore,_i),y=w._query;const x=new D0(m);d={next:E=>{e[l]&&e[l](new eI(m,x,w,E))},error:e[l+1],complete:e[l+2]},YT(t._query)}return(function(x,E,N,I){const S=new FT(I),V=new NT(E,S,N);return x.asyncQueue.enqueueAndForget((async()=>CT(await fy(x),V))),()=>{S.Za(),x.asyncQueue.enqueueAndForget((async()=>AT(await fy(x),V)))}})(_p(m),y,u,d)}function wd(t,e){return(function(r,s){const o=new bo;return r.asyncQueue.enqueueAndForget((async()=>i4(await m4(r),s,o))),o.promise})(_p(t),e)}function R4(t,e,n){const r=n.docs.get(e._key),s=new D0(t);return new XT(t,s,e._key,r,new yu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=vd(e)}set(e,n,r){this._verifyNotCommitted();const s=kg(e,this._firestore),o=j0(s.converter,n,r),l=b0(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,Zn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=kg(e,this._firestore);let l;return l=typeof(n=Dt(n))=="string"||n instanceof yd?HT(this._dataReader,"WriteBatch.update",o._key,n,r,s):qT(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=kg(e,this._firestore);return this._mutations=this._mutations.concat(new hp(n._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kg(t,e){if((t=Dt(t)).firestore!==e)throw new ge(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function gs(){return new x0("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t){return _p(t=Tr(t,_i)),new P4(t,(e=>wd(t,e)))}(function(e,n=!0){(function(s){fc=s})(dc),Ql(new Ia("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new _i(new MP(r.getProvider("auth-internal")),new UP(r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zu(m.options.projectId,y)})(l,s),l);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),wo(xb,"4.7.3",e),wo(xb,"4.7.3","esm2017")})();const j4={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function D4(){if(typeof window<"u"&&window.GLOBAL_FIREBASE_CONFIG&&window.GLOBAL_FIREBASE_CONFIG.apiKey)return window.GLOBAL_FIREBASE_CONFIG;try{const t=j4;if(t&&t.VITE_FIREBASE_API_KEY)return{apiKey:t.VITE_FIREBASE_API_KEY,authDomain:t.VITE_FIREBASE_AUTH_DOMAIN,projectId:t.VITE_FIREBASE_PROJECT_ID,storageBucket:t.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:t.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:t.VITE_FIREBASE_APP_ID,measurementId:t.VITE_FIREBASE_MEASUREMENT_ID}}catch{}if(typeof __firebase_config<"u")try{return typeof __firebase_config=="object"?__firebase_config:JSON.parse(__firebase_config)}catch(t){return console.error("[Firebase] Config parse failed (legacy):",t),null}return console.error("[Firebase] All config sources failed. Check index.html injection."),null}const eo=D4();if(!(eo!=null&&eo.apiKey)||!(eo!=null&&eo.projectId)){const t="[Firebase] Configuration is missing required fields (apiKey, projectId). Application cannot start.";throw console.error(t,eo),new Error(t)}let my;Yw().length>0?my=Yw()[0]:my=qk(eo);const tI=my,Ge=jP(tI),Fe=_4(tI),O4=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[s,o]=O.useState(!1),[l,u]=O.useState(null),d=async y=>{y.preventDefault(),u(null),o(!0);try{await _E(Ge,t,n)}catch(w){let x="Login failed.";switch(w.code){case"auth/invalid-email":x="Invalid email format.";break;case"auth/user-disabled":x="User disabled.";break;case"auth/user-not-found":x="User not found.";break;case"auth/wrong-password":x="Wrong password.";break;case"auth/too-many-requests":x="Too many requests. Try again later.";break;case"auth/network-request-failed":x="Network error.";break}u(x)}finally{o(!1)}},m=async()=>{u(null),o(!0);try{await uR(Ge)}catch(y){u("Guest login failed: "+y.message)}finally{o(!1)}};return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-premium-gradient p-4 antialiased",children:p.jsxs("div",{className:"max-w-md w-full p-6 sm:p-8 bg-white/70 dark:bg-gray-800/60 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 rounded-[2rem] shadow-2xl transition-all duration-300",children:[p.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[p.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-3xl shadow-lg mb-6 animate-float",children:p.jsx("img",{src:"/images/web-app-manifest-512x512.png",alt:"Logo",className:"h-12 w-12"})}),p.jsxs("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:["Task",p.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:""})]}),p.jsxs("form",{onSubmit:d,className:"space-y-5 sm:space-y-6",children:[l&&p.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium animate-in fade-in slide-in-from-top-4 duration-300 shadow-sm",children:l}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"login-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Email"}),p.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:y=>e(y.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"mail@example.com"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"login-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Password"}),p.jsx("input",{id:"login-password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:y=>r(y.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:""})]}),p.jsx("button",{type:"submit",disabled:s,className:"btn-premium w-full py-4 text-lg shadow-lg hover:shadow-xl active:scale-[0.98] transition-all",children:s?"...":""})]}),p.jsxs("div",{className:"mt-8",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200/50 dark:border-gray-700/50"})}),p.jsx("div",{className:"relative flex justify-center text-xs",children:p.jsx("span",{className:"px-3 bg-transparent text-gray-400 uppercase tracking-widest font-bold",children:"OR"})})]}),p.jsxs("button",{onClick:m,disabled:s,className:"mt-8 w-full py-3.5 bg-gray-100/50 hover:bg-gray-200/70 active:bg-gray-300 dark:bg-gray-700/30 dark:hover:bg-gray-600/50 dark:active:bg-gray-600 text-gray-700 dark:text-gray-200 font-bold rounded-2xl transition-all active:scale-95 flex items-center justify-center gap-3 border border-transparent hover:border-gray-300 dark:hover:border-gray-600",children:[p.jsx("span",{className:"text-xl",children:""})," "]})]})]})})},lx=t=>{let e;const n=new Set,r=(m,y)=>{const w=typeof m=="function"?m(e):m;if(!Object.is(w,e)){const x=e;e=y??(typeof w!="object"||w===null)?w:Object.assign({},e,w),n.forEach(E=>E(e,x))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>d,subscribe:m=>(n.add(m),()=>n.delete(m))},d=e=t(r,s,u);return u},L4=(t=>t?lx(t):lx),M4=t=>t;function V4(t,e=M4){const n=Le.useSyncExternalStore(t.subscribe,Le.useCallback(()=>e(t.getState()),[t,e]),Le.useCallback(()=>e(t.getInitialState()),[t,e]));return Le.useDebugValue(n),n}const cx=t=>{const e=L4(t),n=r=>V4(e,r);return Object.assign(n,e),n},La=(t=>t?cx(t):cx),F4={success:3e3,info:4e3,error:6e3},Hh=new Map,z4=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,11),gf=La(t=>({toasts:[],addToast:(e,n="info")=>{const r=z4();t(l=>({toasts:[...l.toasts,{id:r,message:e,type:n}]}));const s=F4[n],o=setTimeout(()=>{t(l=>({toasts:l.toasts.filter(u=>u.id!==r)})),Hh.delete(r)},s);Hh.set(r,o)},removeToast:e=>{const n=Hh.get(e);n&&(clearTimeout(n),Hh.delete(e)),t(r=>({toasts:r.toasts.filter(s=>s.id!==e)}))}})),Nt={success:t=>gf.getState().addToast(t,"success"),error:t=>gf.getState().addToast(t,"error"),info:t=>gf.getState().addToast(t,"info")};function nI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=nI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function U4(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=nI(t))&&(r&&(r+=" "),r+=e);return r}const B4=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},$4=(t,e)=>({classGroupId:t,validator:e}),rI=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Uf="-",ux=[],W4="arbitrary..",q4=t=>{const e=K4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return H4(l);const u=l.split(Uf),d=u[0]===""&&u.length>1?1:0;return sI(u,d,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=r[l],m=n[l];return d?m?B4(m,d):d:m||ux}return n[l]||ux}}},sI=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],o=n.nextPart.get(s);if(o){const m=sI(t,e+1,o);if(m)return m}const l=n.validators;if(l===null)return;const u=e===0?t.join(Uf):t.slice(e).join(Uf),d=l.length;for(let m=0;m<d;m++){const y=l[m];if(y.validator(u))return y.classGroupId}},H4=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?W4+r:void 0})(),K4=t=>{const{theme:e,classGroups:n}=t;return G4(n,e)},G4=(t,e)=>{const n=rI();for(const r in t){const s=t[r];L0(s,n,r,e)}return n},L0=(t,e,n,r)=>{const s=t.length;for(let o=0;o<s;o++){const l=t[o];Q4(l,e,n,r)}},Q4=(t,e,n,r)=>{if(typeof t=="string"){Z4(t,e,n);return}if(typeof t=="function"){Y4(t,e,n,r);return}J4(t,e,n,r)},Z4=(t,e,n)=>{const r=t===""?e:iI(e,t);r.classGroupId=n},Y4=(t,e,n,r)=>{if(X4(t)){L0(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push($4(n,t))},J4=(t,e,n,r)=>{const s=Object.entries(t),o=s.length;for(let l=0;l<o;l++){const[u,d]=s[l];L0(d,iI(e,u),n,r)}},iI=(t,e)=>{let n=t;const r=e.split(Uf),s=r.length;for(let o=0;o<s;o++){const l=r[o];let u=n.nextPart.get(l);u||(u=rI(),n.nextPart.set(l,u)),n=u}return n},X4=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,eO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(o,l)=>{n[o]=l,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(o){let l=n[o];if(l!==void 0)return l;if((l=r[o])!==void 0)return s(o,l),l},set(o,l){o in n?n[o]=l:s(o,l)}}},gy="!",dx=":",tO=[],hx=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),nO=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const o=[];let l=0,u=0,d=0,m;const y=s.length;for(let I=0;I<y;I++){const S=s[I];if(l===0&&u===0){if(S===dx){o.push(s.slice(d,I)),d=I+1;continue}if(S==="/"){m=I;continue}}S==="["?l++:S==="]"?l--:S==="("?u++:S===")"&&u--}const w=o.length===0?s:s.slice(d);let x=w,E=!1;w.endsWith(gy)?(x=w.slice(0,-1),E=!0):w.startsWith(gy)&&(x=w.slice(1),E=!0);const N=m&&m>d?m-d:void 0;return hx(o,E,x,N)};if(e){const s=e+dx,o=r;r=l=>l.startsWith(s)?o(l.slice(s.length)):hx(tO,!1,l,void 0,!0)}if(n){const s=r;r=o=>n({className:o,parseClassName:s})}return r},rO=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let o=0;o<n.length;o++){const l=n[o],u=l[0]==="[",d=e.has(l);u||d?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},sO=t=>({cache:eO(t.cacheSize),parseClassName:nO(t),sortModifiers:rO(t),...q4(t)}),iO=/\s+/,oO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,l=[],u=t.trim().split(iO);let d="";for(let m=u.length-1;m>=0;m-=1){const y=u[m],{isExternal:w,modifiers:x,hasImportantModifier:E,baseClassName:N,maybePostfixModifierPosition:I}=n(y);if(w){d=y+(d.length>0?" "+d:d);continue}let S=!!I,V=r(S?N.substring(0,I):N);if(!V){if(!S){d=y+(d.length>0?" "+d:d);continue}if(V=r(N),!V){d=y+(d.length>0?" "+d:d);continue}S=!1}const W=x.length===0?"":x.length===1?x[0]:o(x).join(":"),U=E?W+gy:W,G=U+V;if(l.indexOf(G)>-1)continue;l.push(G);const Z=s(V,S);for(let K=0;K<Z.length;++K){const A=Z[K];l.push(U+A)}d=y+(d.length>0?" "+d:d)}return d},aO=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=oI(n))&&(s&&(s+=" "),s+=r);return s},oI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=oI(t[r]))&&(n&&(n+=" "),n+=e);return n},lO=(t,...e)=>{let n,r,s,o;const l=d=>{const m=e.reduce((y,w)=>w(y),t());return n=sO(m),r=n.cache.get,s=n.cache.set,o=u,u(d)},u=d=>{const m=r(d);if(m)return m;const y=oO(d,n);return s(d,y),y};return o=l,(...d)=>o(aO(...d))},cO=[],rn=t=>{const e=n=>n[t]||cO;return e.isThemeGetter=!0,e},aI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,lI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,uO=/^\d+\/\d+$/,dO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,pO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xl=t=>uO.test(t),He=t=>!!t&&!Number.isNaN(Number(t)),Ji=t=>!!t&&Number.isInteger(Number(t)),Eg=t=>t.endsWith("%")&&He(t.slice(0,-1)),si=t=>dO.test(t),gO=()=>!0,yO=t=>hO.test(t)&&!fO.test(t),cI=()=>!1,vO=t=>pO.test(t),_O=t=>mO.test(t),wO=t=>!_e(t)&&!we(t),bO=t=>_c(t,hI,cI),_e=t=>aI.test(t),la=t=>_c(t,fI,yO),Tg=t=>_c(t,IO,He),fx=t=>_c(t,uI,cI),xO=t=>_c(t,dI,_O),Kh=t=>_c(t,pI,vO),we=t=>lI.test(t),cu=t=>wc(t,fI),kO=t=>wc(t,SO),px=t=>wc(t,uI),EO=t=>wc(t,hI),TO=t=>wc(t,dI),Gh=t=>wc(t,pI,!0),_c=(t,e,n)=>{const r=aI.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},wc=(t,e,n=!1)=>{const r=lI.exec(t);return r?r[1]?e(r[1]):n:!1},uI=t=>t==="position"||t==="percentage",dI=t=>t==="image"||t==="url",hI=t=>t==="length"||t==="size"||t==="bg-size",fI=t=>t==="length",IO=t=>t==="number",SO=t=>t==="family-name",pI=t=>t==="shadow",CO=()=>{const t=rn("color"),e=rn("font"),n=rn("text"),r=rn("font-weight"),s=rn("tracking"),o=rn("leading"),l=rn("breakpoint"),u=rn("container"),d=rn("spacing"),m=rn("radius"),y=rn("shadow"),w=rn("inset-shadow"),x=rn("text-shadow"),E=rn("drop-shadow"),N=rn("blur"),I=rn("perspective"),S=rn("aspect"),V=rn("ease"),W=rn("animate"),U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Z=()=>[...G(),we,_e],K=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto","contain","none"],k=()=>[we,_e,d],R=()=>[xl,"full","auto",...k()],P=()=>[Ji,"none","subgrid",we,_e],D=()=>["auto",{span:["full",Ji,we,_e]},Ji,we,_e],M=()=>[Ji,"auto",we,_e],j=()=>["auto","min","max","fr",we,_e],Ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],nt=()=>["start","end","center","stretch","center-safe","end-safe"],Qe=()=>["auto",...k()],Ne=()=>[xl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],X=()=>[t,we,_e],pe=()=>[...G(),px,fx,{position:[we,_e]}],de=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",EO,bO,{size:[we,_e]}],ee=()=>[Eg,cu,la],ce=()=>["","none","full",m,we,_e],be=()=>["",He,cu,la],De=()=>["solid","dashed","dotted","double"],Re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>[He,Eg,px,fx],Ue=()=>["","none",N,we,_e],ne=()=>["none",He,we,_e],he=()=>["none",He,we,_e],rt=()=>[He,we,_e],pt=()=>[xl,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[si],breakpoint:[si],color:[gO],container:[si],"drop-shadow":[si],ease:["in","out","in-out"],font:[wO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[si],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[si],shadow:[si],spacing:["px",He],text:[si],"text-shadow":[si],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xl,_e,we,S]}],container:["container"],columns:[{columns:[He,_e,we,u]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Z()}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[Ji,"auto",we,_e]}],basis:[{basis:[xl,"full","auto",u,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[He,xl,"auto","initial","none",_e]}],grow:[{grow:["",He,we,_e]}],shrink:[{shrink:["",He,we,_e]}],order:[{order:[Ji,"first","last","none",we,_e]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":j()}],"auto-rows":[{"auto-rows":j()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...Ce(),"normal"]}],"justify-items":[{"justify-items":[...nt(),"normal"]}],"justify-self":[{"justify-self":["auto",...nt()]}],"align-content":[{content:["normal",...Ce()]}],"align-items":[{items:[...nt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...nt(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ce()}],"place-items":[{"place-items":[...nt(),"baseline"]}],"place-self":[{"place-self":["auto",...nt()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:Qe()}],mx:[{mx:Qe()}],my:[{my:Qe()}],ms:[{ms:Qe()}],me:[{me:Qe()}],mt:[{mt:Qe()}],mr:[{mr:Qe()}],mb:[{mb:Qe()}],ml:[{ml:Qe()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ne()}],w:[{w:[u,"screen",...Ne()]}],"min-w":[{"min-w":[u,"screen","none",...Ne()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...Ne()]}],h:[{h:["screen","lh",...Ne()]}],"min-h":[{"min-h":["screen","lh","none",...Ne()]}],"max-h":[{"max-h":["screen","lh",...Ne()]}],"font-size":[{text:["base",n,cu,la]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,we,Tg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Eg,_e]}],"font-family":[{font:[kO,_e,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,we,_e]}],"line-clamp":[{"line-clamp":[He,"none",we,Tg]}],leading:[{leading:[o,...k()]}],"list-image":[{"list-image":["none",we,_e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",we,_e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...De(),"wavy"]}],"text-decoration-thickness":[{decoration:[He,"from-font","auto",we,la]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[He,"auto",we,_e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",we,_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",we,_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:pe()}],"bg-repeat":[{bg:de()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ji,we,_e],radial:["",we,_e],conic:[Ji,we,_e]},TO,xO]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:be()}],"border-w-x":[{"border-x":be()}],"border-w-y":[{"border-y":be()}],"border-w-s":[{"border-s":be()}],"border-w-e":[{"border-e":be()}],"border-w-t":[{"border-t":be()}],"border-w-r":[{"border-r":be()}],"border-w-b":[{"border-b":be()}],"border-w-l":[{"border-l":be()}],"divide-x":[{"divide-x":be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...De(),"hidden","none"]}],"divide-style":[{divide:[...De(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...De(),"none","hidden"]}],"outline-offset":[{"outline-offset":[He,we,_e]}],"outline-w":[{outline:["",He,cu,la]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",y,Gh,Kh]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",w,Gh,Kh]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[He,la]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":be()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",x,Gh,Kh]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[He,we,_e]}],"mix-blend":[{"mix-blend":[...Re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[He]}],"mask-image-linear-from-pos":[{"mask-linear-from":Te()}],"mask-image-linear-to-pos":[{"mask-linear-to":Te()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Te()}],"mask-image-t-to-pos":[{"mask-t-to":Te()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Te()}],"mask-image-r-to-pos":[{"mask-r-to":Te()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Te()}],"mask-image-b-to-pos":[{"mask-b-to":Te()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Te()}],"mask-image-l-to-pos":[{"mask-l-to":Te()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Te()}],"mask-image-x-to-pos":[{"mask-x-to":Te()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Te()}],"mask-image-y-to-pos":[{"mask-y-to":Te()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[we,_e]}],"mask-image-radial-from-pos":[{"mask-radial-from":Te()}],"mask-image-radial-to-pos":[{"mask-radial-to":Te()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":G()}],"mask-image-conic-pos":[{"mask-conic":[He]}],"mask-image-conic-from-pos":[{"mask-conic-from":Te()}],"mask-image-conic-to-pos":[{"mask-conic-to":Te()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:pe()}],"mask-repeat":[{mask:de()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",we,_e]}],filter:[{filter:["","none",we,_e]}],blur:[{blur:Ue()}],brightness:[{brightness:[He,we,_e]}],contrast:[{contrast:[He,we,_e]}],"drop-shadow":[{"drop-shadow":["","none",E,Gh,Kh]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",He,we,_e]}],"hue-rotate":[{"hue-rotate":[He,we,_e]}],invert:[{invert:["",He,we,_e]}],saturate:[{saturate:[He,we,_e]}],sepia:[{sepia:["",He,we,_e]}],"backdrop-filter":[{"backdrop-filter":["","none",we,_e]}],"backdrop-blur":[{"backdrop-blur":Ue()}],"backdrop-brightness":[{"backdrop-brightness":[He,we,_e]}],"backdrop-contrast":[{"backdrop-contrast":[He,we,_e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",He,we,_e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[He,we,_e]}],"backdrop-invert":[{"backdrop-invert":["",He,we,_e]}],"backdrop-opacity":[{"backdrop-opacity":[He,we,_e]}],"backdrop-saturate":[{"backdrop-saturate":[He,we,_e]}],"backdrop-sepia":[{"backdrop-sepia":["",He,we,_e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",we,_e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[He,"initial",we,_e]}],ease:[{ease:["linear","initial",V,we,_e]}],delay:[{delay:[He,we,_e]}],animate:[{animate:["none",W,we,_e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[I,we,_e]}],"perspective-origin":[{"perspective-origin":Z()}],rotate:[{rotate:ne()}],"rotate-x":[{"rotate-x":ne()}],"rotate-y":[{"rotate-y":ne()}],"rotate-z":[{"rotate-z":ne()}],scale:[{scale:he()}],"scale-x":[{"scale-x":he()}],"scale-y":[{"scale-y":he()}],"scale-z":[{"scale-z":he()}],"scale-3d":["scale-3d"],skew:[{skew:rt()}],"skew-x":[{"skew-x":rt()}],"skew-y":[{"skew-y":rt()}],transform:[{transform:[we,_e,"","none","gpu","cpu"]}],"transform-origin":[{origin:Z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pt()}],"translate-x":[{"translate-x":pt()}],"translate-y":[{"translate-y":pt()}],"translate-z":[{"translate-z":pt()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",we,_e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",we,_e]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[He,cu,la,Tg]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},AO=lO(CO);function Se(...t){return AO(U4(t))}const NO=()=>{const{toasts:t,removeToast:e}=gf();return t.length===0?null:p.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:t.map(n=>p.jsx("div",{onClick:()=>e(n.id),className:Se("pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-xl shadow border text-sm font-medium cursor-pointer hover:opacity-90",n.type==="success"&&"bg-white dark:bg-gray-800 text-green-600 dark:text-green-400 border-green-200 dark:border-green-900",n.type==="error"&&"bg-white dark:bg-gray-800 text-red-600 dark:text-red-400 border-red-200 dark:border-red-900",n.type==="info"&&"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700"),children:p.jsxs("div",{className:"flex items-start gap-3",children:[n.type==="success"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),n.type==="error"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.type==="info"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),p.jsx("p",{className:"leading-5 flex-1",children:n.message}),p.jsx("button",{onClick:r=>{r.stopPropagation(),e(n.id)},className:"flex-shrink-0 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})},n.id))})};function RO(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var o;const l=d=>d===null?null:JSON.parse(d,void 0),u=(o=n.getItem(s))!=null?o:null;return u instanceof Promise?u.then(l):l(u)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const yy=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return yy(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return yy(r)(n)}}}},PO=(t,e)=>(n,r,s)=>{let o={storage:RO(()=>localStorage),partialize:I=>I,version:0,merge:(I,S)=>({...S,...I}),...e},l=!1;const u=new Set,d=new Set;let m=o.storage;if(!m)return t((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...I)},r,s);const y=()=>{const I=o.partialize({...r()});return m.setItem(o.name,{state:I,version:o.version})},w=s.setState;s.setState=(I,S)=>(w(I,S),y());const x=t((...I)=>(n(...I),y()),r,s);s.getInitialState=()=>x;let E;const N=()=>{var I,S;if(!m)return;l=!1,u.forEach(W=>{var U;return W((U=r())!=null?U:x)});const V=((S=o.onRehydrateStorage)==null?void 0:S.call(o,(I=r())!=null?I:x))||void 0;return yy(m.getItem.bind(m))(o.name).then(W=>{if(W)if(typeof W.version=="number"&&W.version!==o.version){if(o.migrate){const U=o.migrate(W.state,W.version);return U instanceof Promise?U.then(G=>[!0,G]):[!0,U]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,W.state];return[!1,void 0]}).then(W=>{var U;const[G,Z]=W;if(E=o.merge(Z,(U=r())!=null?U:x),n(E,!0),G)return y()}).then(()=>{V==null||V(E,void 0),E=r(),l=!0,d.forEach(W=>W(E))}).catch(W=>{V==null||V(void 0,W)})};return s.persist={setOptions:I=>{o={...o,...I},I.storage&&(m=I.storage)},clearStorage:()=>{m==null||m.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>N(),hasHydrated:()=>l,onHydrate:I=>(u.add(I),()=>{u.delete(I)}),onFinishHydration:I=>(d.add(I),()=>{d.delete(I)})},o.skipHydration||N(),E||x},bd=PO,Ir=La()(bd(t=>({themeMode:"system",fontEn:"Inter",fontJp:"M PLUS 2",fontSize:"md",density:"normal",language:"ja",customDurations:[15,30,45,60,75,90,120],setThemeMode:e=>t({themeMode:e}),setFontEn:e=>t({fontEn:e}),setFontJp:e=>t({fontJp:e}),setFontSize:e=>t({fontSize:e}),setDensity:e=>t({density:e}),setLanguage:e=>t(n=>{const s={ja:{density:"normal",fontSize:"md"},en:{density:"comfortable",fontSize:"base"}}[e];return{language:e,density:s.density,fontSize:s.fontSize}}),setCustomDurations:e=>t({customDurations:e.sort((n,r)=>n-r)})}),{name:"app-settings",partialize:t=>({themeMode:t.themeMode,fontEn:t.fontEn,fontJp:t.fontJp,fontSize:t.fontSize,density:t.density,language:t.language,customDurations:t.customDurations})})),jO={dashboard:"",inbox:"",today:"",upcoming:"",completed:"",trash:"",projects:"",project:"",labels:"",filters:"",timeblocks:"",durations:"",targets:"",workspaces:"",settings:"",edit:"",active:"",add_task:"",search:"",no_tasks:"",loading:"...",saving:"...",done:"",error:"",backup_restore:"",general:"",appearance:"",account:"",language:"",important:"",all_tasks:"",add:"",close:"",clear:"",backward_map:"",woop_board:"WOOP",okr_tree:"OKR",msg:{task:{create_success:"",create_fail:"",update_success:"",update_fail:"",delete_success:"",delete_fail:"",complete_success:" ",status_update_fail:"",move_fail:""},auth:{login_success:"",logout_success:""},dnd:{reorderFailed:""},project:{reorder_fail:""},confirm_delete:`
`},delete:"",timeblock:"",filter:"",sidebar:{add_workspace:"",search_placeholder:" (/)",target_wizard:"",target_dashboard:"",framework_wiki:"Wiki",unassigned:"",toggle_collapse:"",toggle_expand:"",resizer_label:"",resizer_hint:"",menu_open:"",reorder_section:"",no_projects:"",duration_format:"{min}"},modal:{task_title_placeholder:"",filter_name_placeholder:": ",memo_markdown:" (Markdown)",edit:"",preview:"",schedule:"",due_date:"",recurrence:"",recurrence_days:"",time_block:"",duration:"",no_duration:"",no_project:"",cancel:"",save:"",create:"",delete:"",delete_confirm:"",no_memo:"",workspace_edit_title:"",workspace_create_title:"",workspace_name_label:"",workspace_name_placeholder:"...",workspace_desc_edit:"",workspace_desc_create:"",label_name:"",label_name_placeholder:"",label_create_placeholder:"",project_name:"",project_name_placeholder:"...",project_delete_confirm:"{name}",label_delete_confirm:"{name}",theme_color:"",delete_label:"",delete_project:""},task_detail:{recurrence_label:"",recurrence_days:"",time_block_label:"",time_block_unspecified:"",duration_label:"",duration_none:"",project_label:"",project_none:"",due_date_label:"",schedule_label:"",title_placeholder:"",delete_button:""},time_block:{add_button:"",max_limit:"10",unspecified:"",default_zone_desc:"",change_color:"",error_invalid_time:": {start}  {end}",error_overlap:": [{range1}]  [{range2}]",time_select:"",delete_confirm:"",settings_title:""},recurrence:{none:"",daily:"",weekdays:"",weekly:"",monthly:""},days:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},colors:{red:"",pink:"",purple:"",deep_purple:"",indigo:"",blue:"",light_blue:"",cyan:"",teal:"",green:"",light_green:"",lime:"",yellow:"",amber:"",orange:"",deep_orange:"",brown:"",grey:"",blue_grey:""},settings_modal:{title:"",tabs:{general:"",appearance:"",account:"",advanced:""},appearance:{theme:"",density:"",font_size:"",fonts:"",font_en:"",font_jp:""},backup:{title:"",description:"JSON",create:"",import:"",import_confirm:`
ID`,import_success:`
: {tasks}
: {projects}`,import_fail:"",create_fail:""},options:{theme:{light:"",dark:"",system:""},density:{compact:"",normal:"",comfortable:"",spacious:""}},language:{title:" (Language)",description:"UI"},maintenance:{title:"",description:"",cleanup_duplicate:"",confirm_backup:`

`,confirm_final:"",cleanup_success:"{count} ",cleanup_fail:": {error}"},account:{guest_user:"",registered_user:"",not_logged_in:"",logout:"",logout_confirm:"",persist_account:"",persist_desc:`
`,register:"",registering:"...",register_success:"",register_fail:"",already_in_use:"",weak_password:"",email_label:"Email",password_label:"Password",hide_password:"",show_password:"",registered_msg:""}},inline_input:{placeholder:"...",label:"",tooltip_today:"",tooltip_today_remove:"",tooltip_important:"",tooltip_important_remove:"",aria_today:"",aria_today_remove:"",aria_important:"",aria_important_remove:"",adding:"..."},validation:{required:"",workspace_name_required:"",workspace_duplicate:"",project_name_required:"",workspace_required:"",filter_name_required:"",filter_condition_required:"1",save_fail:"",delete_fail:"",label_name_required:"",label_workspace_required:"",workspace_confirm_switch:"",select_days:""},date_options:{today:"",tomorrow:"",week:"",next_week:""},task_list:{searching_results:': "{query}"',sort_manual:" ()",sort_created:"",sort_due:"",sort_important:"",sort_title:"",show_completed:"",hide_completed:"",no_tasks_title:"",no_tasks_desc_showing:"",no_tasks_desc_hiding:"",add_new_task:"",loading:"..."},task_stats:{count_label:"COUNT",count_unit:"",total_label:"TOTAL",avg_label:"AVG",avg_unit:"/",over:"",remaining:""},add_task_button:{add_task:"",add_with_title:"{title}",aria_label:""},error_boundary:{title:"",description:"",retry:"",reload:"",details:""}},DO={dashboard:"Dashboard",inbox:"Inbox",today:"Today",upcoming:"Upcoming",completed:"Completed",trash:"Trash",projects:"Projects",project:"Project",labels:"Labels",filters:"Filters",timeblocks:"Time Blocks",durations:"Durations",targets:"Targets",workspaces:"Workspaces",settings:"Settings",edit:"Edit",active:"Active",add_task:"Add Task",search:"Search",no_tasks:"No tasks found",loading:"Loading...",saving:"Saving...",done:"Done",error:"An error occurred",backup_restore:"Backup & Restore",general:"General",appearance:"Appearance",account:"Account",language:"Language",important:"Important",all_tasks:"All Tasks",add:"Add",close:"Close",clear:"Clear",backward_map:"Backward Map",woop_board:"WOOP Board",okr_tree:"OKR Tree",msg:{task:{create_success:"Task created",create_fail:"Failed to create task",update_success:"Task updated",update_fail:"Failed to save task",delete_success:"Task deleted",delete_fail:"Failed to delete task",complete_success:"Task completed ",status_update_fail:"Failed to update status",move_fail:"Failed to move task"},auth:{login_success:"Logged in",logout_success:"Logged out"},dnd:{reorderFailed:"Failed to reorder"},project:{reorder_fail:"Failed to reorder projects"},confirm_delete:`Are you sure you want to delete this item?
This action cannot be undone.`},delete:"Delete",timeblock:"Time Block",filter:"Filter",sidebar:{add_workspace:"Add Workspace",search_placeholder:"Search (/)",target_wizard:"Target Wizard",target_dashboard:"Target Dashboard",framework_wiki:"Framework Wiki",unassigned:"Unassigned",toggle_collapse:"Collapse Sidebar",toggle_expand:"Expand Sidebar",resizer_label:"Resize Sidebar",resizer_hint:"Drag or use arrow keys to resize",menu_open:"Open Menu",reorder_section:"Reorder Section",no_projects:"No projects",duration_format:"{min} min"},modal:{task_title_placeholder:"Task Title",filter_name_placeholder:"e.g. Important tasks this week",memo_markdown:"Memo (Markdown)",edit:"Edit",preview:"Preview",schedule:"Schedule",due_date:"Due Date",recurrence:"Recurrence",recurrence_days:"Repeat Days",time_block:"Time Block",duration:"Duration",no_duration:"Not Set",no_project:"No Project",cancel:"Cancel",save:"Save",create:"Create",delete:"Delete",delete_confirm:"Are you sure you want to delete this task?",no_memo:"No memo",workspace_edit_title:"Edit Workspace Name",workspace_create_title:"New Workspace",workspace_name_label:"Workspace Name",workspace_name_placeholder:"Enter workspace name...",workspace_desc_edit:"Rename the workspace.",workspace_desc_create:"Create a new workspace to manage projects and tasks separately.",label_name:"Label Name",label_name_placeholder:"Label Name",label_create_placeholder:"New Label Name",project_name:"Project Name",project_name_placeholder:"Enter name...",project_delete_confirm:'Delete project "{name}"?',label_delete_confirm:'Delete label "{name}"?',theme_color:"Theme Color",delete_label:"Delete Label",delete_project:"Delete Project"},task_detail:{recurrence_label:"Recurrence",recurrence_days:"Repeat Days",time_block_label:"Time Block",time_block_unspecified:"Unspecified",duration_label:"Duration",duration_none:"None",project_label:"Project",project_none:"No Project",due_date_label:"Due Date",schedule_label:"Schedule",title_placeholder:"Task Title",delete_button:"Delete"},time_block:{add_button:"Add Time Block",max_limit:"Max 10 blocks allowed",unspecified:"Unspecified",default_zone_desc:"Default Zone",change_color:"Change Color",error_invalid_time:"Invalid Time: {start} - {end}",error_overlap:"Time Overlap: [{range1}] and [{range2}]",time_select:"Select Time",delete_confirm:"Delete this time block?",settings_title:"Time Block Settings"},recurrence:{none:"None",daily:"Daily",weekdays:"Weekdays",weekly:"Weekly",monthly:"Monthly"},days:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},colors:{red:"Red",pink:"Pink",purple:"Purple",deep_purple:"Deep Purple",indigo:"Indigo",blue:"Blue",light_blue:"Light Blue",cyan:"Cyan",teal:"Teal",green:"Green",light_green:"Light Green",lime:"Lime",yellow:"Yellow",amber:"Amber",orange:"Orange",deep_orange:"Deep Orange",brown:"Brown",grey:"Grey",blue_grey:"Blue Grey"},settings_modal:{title:"Settings",tabs:{general:"General",appearance:"Appearance",account:"Account",advanced:"Advanced"},appearance:{theme:"Theme",density:"Density",font_size:"Font Size",fonts:"Fonts",font_en:"English Font",font_jp:"Japanese Font"},backup:{title:"Backup & Restore",description:"Download workspace data (tasks, projects, settings) as JSON or restore from backup.",create:"Create Backup",import:"Import",import_confirm:`Import data into current workspace?
Existing data remains, but some IDs may change to prevent duplicates.`,import_success:`Import completed.
Tasks: {tasks}
Projects: {projects}`,import_fail:"Import failed. Please check the file format.",create_fail:"Failed to create backup."},options:{theme:{light:"Light",dark:"Dark",system:"System"},density:{compact:"Compact",normal:"Normal",comfortable:"Comfortable",spacious:"Spacious"}},language:{title:"Language",description:"Change the UI language."},maintenance:{title:"Database Maintenance",description:"Detect and clean up duplicate data. This action cannot be undone. Please backup before running.",cleanup_duplicate:"Clean Up Duplicates (Confirm)",confirm_backup:`[Warning] Deleting duplicate tasks.
Did you create a backup?
(Older duplicates will be removed)`,confirm_final:"[Final Confirm] This cannot be undone. Execute?",cleanup_success:"Deleted {count} duplicate tasks.",cleanup_fail:"Error occurred: {error}"},account:{guest_user:"Guest User",registered_user:"Registered User",not_logged_in:"Not logged in",logout:"Logout",logout_confirm:"Are you sure you want to logout?",persist_account:"Persist Account",persist_desc:`Your account is temporary.
Register an email to access your data from other devices.`,register:"Register Account",registering:"Registering...",register_success:"Account registered!",register_fail:"Registration failed",already_in_use:"Email already in use",weak_password:"Password is too weak",email_label:"Email",password_label:"Password",hide_password:"Hide Password",show_password:"Show Password",registered_msg:"Account is fully registered."}},inline_input:{placeholder:"Enter task name...",label:"Task Name",tooltip_today:"Do Today",tooltip_today_remove:"Remove Today",tooltip_important:"Mark Important",tooltip_important_remove:"Unmark Important",aria_today:"Set for today",aria_today_remove:"Remove from today",aria_important:"Mark as important",aria_important_remove:"Unmark as important",adding:"Adding..."},validation:{required:"Required",workspace_name_required:"Workspace name is required",workspace_duplicate:"This name is already taken",project_name_required:"Project name is required",workspace_required:"No workspace selected",filter_name_required:"Filter name is required",filter_condition_required:"Please select at least one condition",save_fail:"Failed to save",delete_fail:"Failed to delete",label_name_required:"Name is required",label_workspace_required:"Workspace not found",workspace_confirm_switch:"Switch to new workspace?",select_days:"Please select days"},date_options:{today:"Today",tomorrow:"Tomorrow",week:"This Week",next_week:"Next Week"},task_list:{searching_results:'Showing results for: "{query}"',sort_manual:"Manual (Reorder)",sort_created:"Date Created",sort_due:"Due Date",sort_important:"Importance",sort_title:"Title",show_completed:"Show Completed",hide_completed:"Hide Completed",no_tasks_title:"No tasks found",no_tasks_desc_showing:"Try changing filters or create a new task to start your day.",no_tasks_desc_hiding:"Show completed tasks or add a new task.",add_new_task:"Add New Task",loading:"Loading tasks..."},task_stats:{count_label:"COUNT",count_unit:"",total_label:"TOTAL",avg_label:"AVG",avg_unit:"/task",over:"Over",remaining:"Left"},add_task_button:{add_task:"Add Task",add_with_title:'Add "{title}" as task',aria_label:"Add new task"},error_boundary:{title:"An Error Occurred",description:"Sorry, an unexpected error has occurred.",retry:"Retry",reload:"Reload Page",details:"Error Details"}},mx={ja:jO,en:DO},bc=t=>{function e(n,r){const s=mx[t],o=mx.en,l=(d,m)=>m.split(".").reduce((y,w)=>y&&y[w],d);let u=l(s,n);return u||(u=l(o,n)||n),r?Object.entries(r).reduce((d,[m,y])=>d.replace(`{${m}}`,String(y)),u):u}return{t:e}},ft=()=>{const t=Ir(n=>n.language);return O.useMemo(()=>bc(t),[t])},At={SIDEBAR_DENSITY:{compact:"py-0.5",normal:"py-1.5",comfortable:"py-2.5",spacious:"py-3.5"},DND:{PREFIX_TASK:"task:",TYPE_PROJECT:"project",TYPE_INBOX:"inbox",TYPE_TIMEBLOCK:"timeblock",TOUCH_DELAY:250},STORAGE_KEYS:{SECTION_ORDER:"sidebar_section_order"},SIDEBAR:{MIN_WIDTH:150,MAX_WIDTH:500,DEFAULT_WIDTH:280,DURATIONS:[30,45,60,75,90]},LAYOUT:{CONTAINER_WIDTH_CLASS:"w-full max-w-full",MOBILE_SIDEBAR_WIDTH_PX:280},FONTS:{EU:[{label:"Google Sans",value:'"Google Sans", Inter, sans-serif'},{label:"Inter",value:"Inter, sans-serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"System UI",value:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}],JP:[{label:"M PLUS 2",value:'"M PLUS 2", sans-serif'},{label:"Noto Sans JP",value:'"Noto Sans JP", sans-serif'},{label:"Hiragino / Yu Gothic",value:'"Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif'}]}},hi=[{value:"#EF5350",key:"red"},{value:"#EC407A",key:"pink"},{value:"#AB47BC",key:"purple"},{value:"#7E57C2",key:"deep_purple"},{value:"#5C6BC0",key:"indigo"},{value:"#42A5F5",key:"blue"},{value:"#29B6F6",key:"light_blue"},{value:"#26C6DA",key:"cyan"},{value:"#26A69A",key:"teal"},{value:"#66BB6A",key:"green"},{value:"#9CCC65",key:"light_green"},{value:"#D4E157",key:"lime"},{value:"#FFEE58",key:"yellow"},{value:"#FFCA28",key:"amber"},{value:"#FFA726",key:"orange"},{value:"#FF7043",key:"deep_orange"},{value:"#8D6E63",key:"brown"},{value:"#BDBDBD",key:"grey"},{value:"#78909C",key:"blue_grey"}];hi.map(t=>t.value);const OO=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),gn=La(t=>({stack:[],openModal:(e,n=null)=>{if(!e)return;const s={id:OO(),type:e,data:n};t(o=>({stack:[...o.stack,s]}))},closeModal:()=>t(e=>e.stack.length===0?e:{stack:e.stack.slice(0,-1)}),closeAllModals:()=>t({stack:[]})})),LO=1024,M0=La()(bd(t=>({sidebarWidth:At.SIDEBAR.DEFAULT_WIDTH,isSidebarOpen:!0,sidebarDensity:"normal",setSidebarWidth:e=>{const n=Math.max(At.SIDEBAR.MIN_WIDTH,Math.min(e,At.SIDEBAR.MAX_WIDTH));t({sidebarWidth:n})},toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),setSidebarOpen:e=>t({isSidebarOpen:e}),setSidebarDensity:e=>t({sidebarDensity:e})}),{name:"ui-storage",partialize:t=>({sidebarWidth:t.sidebarWidth,sidebarDensity:t.sidebarDensity,isSidebarOpen:t.isSidebarOpen}),onRehydrateStorage:()=>t=>{typeof window<"u"&&window.innerWidth<LO&&(t==null||t.setSidebarOpen(!1))}})),MO="/assets/logo-BADOZ29k.png",Wr=La()(bd(t=>({filterType:"inbox",targetId:null,query:"",showCompleted:!1,sortCriteria:"createdAt_desc",setFilter:(e,n=null)=>t({filterType:e,targetId:n,query:""}),setSearchQuery:e=>t({query:e,filterType:"search"}),clearFilter:()=>t({filterType:"inbox",targetId:null,query:""}),setShowCompleted:e=>t({showCompleted:e}),setSortCriteria:e=>t({sortCriteria:e})}),{name:"filter-storage",partialize:t=>({filterType:t.filterType,targetId:t.targetId,query:t.query,showCompleted:t.showCompleted,sortCriteria:t.sortCriteria})})),Ma=La()(bd(t=>({currentView:"tasks",viewData:null,setView:(e,n=null)=>t({currentView:e,viewData:n})}),{name:"view-storage",partialize:t=>({currentView:t.currentView})})),VO=()=>{const{t}=ft(),{query:e,setFilter:n}=Wr(),{currentView:r,setView:s}=Ma(),o=r==="search",l=()=>{n("search"),s("search")};return p.jsxs("button",{onClick:l,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-all duration-200 group ${o?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700/50 text-gray-600 dark:text-gray-400"}`,"aria-label":t("sidebar.search_placeholder"),children:[p.jsx("svg",{className:`w-4 h-4 transition-colors ${o?"text-blue-600 dark:text-blue-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),p.jsx("span",{className:"flex-1 text-sm font-medium",children:e?`"${e}"`:t("sidebar.search_placeholder")}),p.jsx("span",{className:"text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"/"})]})},FO=({children:t})=>{const{sidebarWidth:e,isSidebarOpen:n,sidebarDensity:r,toggleSidebar:s,setSidebarWidth:o}=M0(),{t:l}=ft(),u={compact:"p-1",normal:"p-2",comfortable:"p-4",spacious:"p-6"}[r];Le.useEffect(()=>{const m=w=>{if(!document.body.classList.contains("resizing"))return;const x=Math.max(At.SIDEBAR.MIN_WIDTH,Math.min(At.SIDEBAR.MAX_WIDTH,w.clientX));o(x)},y=()=>{document.body.classList.remove("resizing"),document.body.style.cursor="default"};return document.addEventListener("mousemove",m),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",y)}},[o]);const d=()=>{document.body.classList.add("resizing"),document.body.style.cursor="col-resize"};return p.jsxs("aside",{className:Se("h-full transition-all duration-300 flex flex-col group relative","bg-white dark:bg-gray-900 lg:bg-white/70 lg:dark:bg-gray-800/60","lg:backdrop-blur-xl","border-r border-gray-200/50 dark:border-gray-700/30",n?"translate-x-0":"-translate-x-full lg:translate-x-0","fixed lg:relative z-30 lg:z-0 shadow-2xl lg:shadow-none overflow-hidden","w-[var(--sidebar-mobile)] lg:w-[var(--sidebar-desktop)]"),style:{"--sidebar-desktop":`${e}px`,"--sidebar-mobile":n?`${At.LAYOUT.MOBILE_SIDEBAR_WIDTH_PX}px`:"0px",width:n?void 0:"0px"},children:[p.jsxs("div",{className:"h-14 flex items-center px-4 flex-shrink-0 justify-between border-b border-gray-100 dark:border-gray-800/50",children:[p.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition select-none",children:[p.jsx("div",{className:"w-8 h-8 rounded-xl bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20",children:p.jsx("img",{src:MO,alt:"L",className:"h-5 w-5 invert brightness-0"})}),p.jsxs("span",{className:"text-lg font-black text-gray-900 dark:text-white tracking-tight",children:["Task",p.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]})]}),p.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all active:scale-90",title:l(n?"sidebar.toggle_collapse":"sidebar.toggle_expand"),"aria-label":l(n?"sidebar.toggle_collapse":"sidebar.toggle_expand"),children:p.jsx("svg",{className:Se("w-5 h-5 transition-transform duration-300",!n&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),p.jsx("div",{className:"px-3 pb-2 pt-2",children:p.jsx(VO,{})}),p.jsx("div",{className:Se("flex-1 overflow-y-auto custom-scrollbar pt-2",u),children:t}),p.jsx("div",{role:"separator","aria-orientation":"vertical","aria-label":l("sidebar.resizer_label"),"aria-valuenow":e,"aria-valuemin":At.SIDEBAR.MIN_WIDTH,"aria-valuemax":At.SIDEBAR.MAX_WIDTH,tabIndex:n?0:-1,onMouseDown:d,onKeyDown:m=>{m.key==="ArrowLeft"?o(Math.max(At.SIDEBAR.MIN_WIDTH,e-10)):m.key==="ArrowRight"&&o(Math.min(At.SIDEBAR.MAX_WIDTH,e+10))},className:Se("absolute top-0 right-0 w-3 h-full cursor-col-resize z-40 transition-colors hidden lg:flex items-center justify-center outline-none focus:bg-blue-500","hover:bg-blue-500/30 active:bg-blue-600/50 group/resizer"),title:l("sidebar.resizer_hint"),children:p.jsx("div",{className:"absolute w-1 h-12 bg-gray-400 dark:bg-gray-500 rounded-full opacity-0 group-hover/resizer:opacity-100 group-focus/resizer:opacity-100 transition-opacity pointer-events-none"})}),p.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-gray-200/50 dark:bg-gray-700/30 hidden lg:block"})]})};function te(t,e,n){function r(u,d){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:d,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,d);const m=l.prototype,y=Object.keys(m);for(let w=0;w<y.length;w++){const x=y[w];x in u||(u[x]=m[x].bind(u))}}const s=(n==null?void 0:n.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:t});function l(u){var d;const m=n!=null&&n.Parent?new o:this;r(m,u),(d=m._zod).deferred??(d.deferred=[]);for(const y of m._zod.deferred)y();return m}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>{var d,m;return n!=null&&n.Parent&&u instanceof n.Parent?!0:(m=(d=u==null?void 0:u._zod)==null?void 0:d.traits)==null?void 0:m.has(t)}}),Object.defineProperty(l,"name",{value:t}),l}class Ol extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class mI extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const gI={};function So(t){return gI}function yI(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function vy(t,e){return typeof e=="bigint"?e.toString():e}function V0(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function F0(t){return t==null}function z0(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function zO(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const d=r.match(/\d?e-(\d?)/);d!=null&&d[1]&&(s=Number.parseInt(d[1]))}const o=n>s?n:s,l=Number.parseInt(t.toFixed(o).replace(".","")),u=Number.parseInt(e.toFixed(o).replace(".",""));return l%u/10**o}const gx=Symbol("evaluating");function bt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==gx)return r===void 0&&(r=gx,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Va(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Fa(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function yx(t){return JSON.stringify(t)}function UO(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const vI="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Bf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const BO=V0(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function sc(t){if(Bf(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Bf(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function _I(t){return sc(t)?{...t}:Array.isArray(t)?[...t]:t}const $O=new Set(["string","number","symbol"]);function xp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Po(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function Ie(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function WO(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const qO={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function HO(t,e){const n=t._zod.def,r=Fa(t._zod.def,{get shape(){const s={};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(s[o]=n.shape[o])}return Va(this,"shape",s),s},checks:[]});return Po(t,r)}function KO(t,e){const n=t._zod.def,r=Fa(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete s[o]}return Va(this,"shape",s),s},checks:[]});return Po(t,r)}function GO(t,e){if(!sc(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=Fa(t._zod.def,{get shape(){const o={...t._zod.def.shape,...e};return Va(this,"shape",o),o},checks:[]});return Po(t,s)}function QO(t,e){if(!sc(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return Va(this,"shape",r),r},checks:t._zod.def.checks};return Po(t,n)}function ZO(t,e){const n=Fa(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Va(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Po(t,n)}function YO(t,e,n){const r=Fa(e._zod.def,{get shape(){const s=e._zod.def.shape,o={...s};if(n)for(const l in n){if(!(l in s))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=t?new t({type:"optional",innerType:s[l]}):s[l])}else for(const l in s)o[l]=t?new t({type:"optional",innerType:s[l]}):s[l];return Va(this,"shape",o),o},checks:[]});return Po(e,r)}function JO(t,e,n){const r=Fa(e._zod.def,{get shape(){const s=e._zod.def.shape,o={...s};if(n)for(const l in n){if(!(l in o))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)o[l]=new t({type:"nonoptional",innerType:s[l]});return Va(this,"shape",o),o},checks:[]});return Po(e,r)}function Cl(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Al(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Qh(t){return typeof t=="string"?t:t==null?void 0:t.message}function Co(t,e,n){var s,o,l,u,d,m;const r={...t,path:t.path??[]};if(!t.message){const y=Qh((l=(o=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:l.call(o,t))??Qh((u=e==null?void 0:e.error)==null?void 0:u.call(e,t))??Qh((d=n.customError)==null?void 0:d.call(n,t))??Qh((m=n.localeError)==null?void 0:m.call(n,t))??"Invalid input";r.message=y}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function U0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Hu(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const wI=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,vy,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},bI=te("$ZodError",wI),xI=te("$ZodError",wI,{Parent:Error});function XO(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function eL(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>r({issues:l}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)n._errors.push(e(o));else{let l=n,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(e(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return r(t),n}const B0=t=>(e,n,r,s)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},o);if(l instanceof Promise)throw new Ol;if(l.issues.length){const u=new((s==null?void 0:s.Err)??t)(l.issues.map(d=>Co(d,o,So())));throw vI(u,s==null?void 0:s.callee),u}return l.value},$0=t=>async(e,n,r,s)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},o);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new((s==null?void 0:s.Err)??t)(l.issues.map(d=>Co(d,o,So())));throw vI(u,s==null?void 0:s.callee),u}return l.value},kp=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},o=e._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new Ol;return o.issues.length?{success:!1,error:new(t??bI)(o.issues.map(l=>Co(l,s,So())))}:{success:!0,data:o.value}},tL=kp(xI),Ep=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(l=>Co(l,s,So())))}:{success:!0,data:o.value}},nL=Ep(xI),rL=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return B0(t)(e,n,s)},sL=t=>(e,n,r)=>B0(t)(e,n,r),iL=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return $0(t)(e,n,s)},oL=t=>async(e,n,r)=>$0(t)(e,n,r),aL=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return kp(t)(e,n,s)},lL=t=>(e,n,r)=>kp(t)(e,n,r),cL=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ep(t)(e,n,s)},uL=t=>async(e,n,r)=>Ep(t)(e,n,r),dL=/^[cC][^\s-]{8,}$/,hL=/^[0-9a-z]+$/,fL=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,pL=/^[0-9a-vA-V]{20}$/,mL=/^[A-Za-z0-9]{27}$/,gL=/^[a-zA-Z0-9_-]{21}$/,yL=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,vL=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,vx=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,_L=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,wL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function bL(){return new RegExp(wL,"u")}const xL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kL=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,EL=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,TL=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,IL=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,kI=/^[A-Za-z0-9_-]*$/,SL=/^\+(?:[0-9]){6,14}[0-9]$/,EI="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",CL=new RegExp(`^${EI}$`);function TI(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function AL(t){return new RegExp(`^${TI(t)}$`)}function NL(t){const e=TI({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${EI}T(?:${r})$`)}const RL=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},PL=/^-?\d+$/,jL=/^-?\d+(?:\.\d+)?/,DL=/^(?:true|false)$/i,OL=/^[^A-Z]*$/,LL=/^[^a-z]*$/,pr=te("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),II={number:"number",bigint:"bigint",object:"date"},SI=te("$ZodCheckLessThan",(t,e)=>{pr.init(t,e);const n=II[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,o=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),CI=te("$ZodCheckGreaterThan",(t,e)=>{pr.init(t,e);const n=II[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,o=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),ML=te("$ZodCheckMultipleOf",(t,e)=>{pr.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):zO(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),VL=te("$ZodCheckNumberFormat",(t,e)=>{var l;pr.init(t,e),e.format=e.format||"float64";const n=(l=e.format)==null?void 0:l.includes("int"),r=n?"int":"number",[s,o]=qO[e.format];t._zod.onattach.push(u=>{const d=u._zod.bag;d.format=e.format,d.minimum=s,d.maximum=o,n&&(d.pattern=PL)}),t._zod.check=u=>{const d=u.value;if(n){if(!Number.isInteger(d)){u.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:d,inst:t});return}if(!Number.isSafeInteger(d)){d>0?u.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):u.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}d<s&&u.issues.push({origin:"number",input:d,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),d>o&&u.issues.push({origin:"number",input:d,code:"too_big",maximum:o,inst:t})}}),FL=te("$ZodCheckMaxLength",(t,e)=>{var n;pr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!F0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=U0(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),zL=te("$ZodCheckMinLength",(t,e)=>{var n;pr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!F0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=U0(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),UL=te("$ZodCheckLengthEquals",(t,e)=>{var n;pr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!F0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,o=s.length;if(o===e.length)return;const l=U0(s),u=o>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Tp=te("$ZodCheckStringFormat",(t,e)=>{var n,r;pr.init(t,e),t._zod.onattach.push(s=>{const o=s._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),BL=te("$ZodCheckRegex",(t,e)=>{Tp.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),$L=te("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=OL),Tp.init(t,e)}),WL=te("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=LL),Tp.init(t,e)}),qL=te("$ZodCheckIncludes",(t,e)=>{pr.init(t,e);const n=xp(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),HL=te("$ZodCheckStartsWith",(t,e)=>{pr.init(t,e);const n=new RegExp(`^${xp(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),KL=te("$ZodCheckEndsWith",(t,e)=>{pr.init(t,e);const n=new RegExp(`.*${xp(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),GL=te("$ZodCheckOverwrite",(t,e)=>{pr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class QL{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),o=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of o)this.content.push(l)}compile(){const e=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new e(...n,s.join(`
`))}}const ZL={major:4,minor:2,patch:1},Lt=te("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=ZL;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const o of r)for(const l of o._zod.onattach)l(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const o=(u,d,m)=>{let y=Cl(u),w;for(const x of d){if(x._zod.def.when){if(!x._zod.def.when(u))continue}else if(y)continue;const E=u.issues.length,N=x._zod.check(u);if(N instanceof Promise&&(m==null?void 0:m.async)===!1)throw new Ol;if(w||N instanceof Promise)w=(w??Promise.resolve()).then(async()=>{await N,u.issues.length!==E&&(y||(y=Cl(u,E)))});else{if(u.issues.length===E)continue;y||(y=Cl(u,E))}}return w?w.then(()=>u):u},l=(u,d,m)=>{if(Cl(u))return u.aborted=!0,u;const y=o(d,r,m);if(y instanceof Promise){if(m.async===!1)throw new Ol;return y.then(w=>t._zod.parse(w,m))}return t._zod.parse(y,m)};t._zod.run=(u,d)=>{if(d.skipChecks)return t._zod.parse(u,d);if(d.direction==="backward"){const y=t._zod.parse({value:u.value,issues:[]},{...d,skipChecks:!0});return y instanceof Promise?y.then(w=>l(w,u,d)):l(y,u,d)}const m=t._zod.parse(u,d);if(m instanceof Promise){if(d.async===!1)throw new Ol;return m.then(y=>o(y,r,d))}return o(m,r,d)}}t["~standard"]={validate:o=>{var l;try{const u=tL(t,o);return u.success?{value:u.data}:{issues:(l=u.error)==null?void 0:l.issues}}catch{return nL(t,o).then(d=>{var m;return d.success?{value:d.data}:{issues:(m=d.error)==null?void 0:m.issues}})}},vendor:"zod",version:1}}),W0=te("$ZodString",(t,e)=>{var n;Lt.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??RL(t._zod.bag),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),Rt=te("$ZodStringFormat",(t,e)=>{Tp.init(t,e),W0.init(t,e)}),YL=te("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=vL),Rt.init(t,e)}),JL=te("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=vx(r))}else e.pattern??(e.pattern=vx());Rt.init(t,e)}),XL=te("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=_L),Rt.init(t,e)}),eM=te("$ZodURL",(t,e)=>{Rt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),tM=te("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=bL()),Rt.init(t,e)}),nM=te("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=gL),Rt.init(t,e)}),rM=te("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=dL),Rt.init(t,e)}),sM=te("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=hL),Rt.init(t,e)}),iM=te("$ZodULID",(t,e)=>{e.pattern??(e.pattern=fL),Rt.init(t,e)}),oM=te("$ZodXID",(t,e)=>{e.pattern??(e.pattern=pL),Rt.init(t,e)}),aM=te("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=mL),Rt.init(t,e)}),lM=te("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=NL(e)),Rt.init(t,e)}),cM=te("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=CL),Rt.init(t,e)}),uM=te("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=AL(e)),Rt.init(t,e)}),dM=te("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=yL),Rt.init(t,e)}),hM=te("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=xL),Rt.init(t,e),t._zod.bag.format="ipv4"}),fM=te("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=kL),Rt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),pM=te("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=EL),Rt.init(t,e)}),mM=te("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=TL),Rt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,o]=r;if(!o)throw new Error;const l=Number(o);if(`${l}`!==o)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function AI(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const gM=te("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=IL),Rt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{AI(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function yM(t){if(!kI.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return AI(n)}const vM=te("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=kI),Rt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{yM(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),_M=te("$ZodE164",(t,e)=>{e.pattern??(e.pattern=SL),Rt.init(t,e)});function wM(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const bM=te("$ZodJWT",(t,e)=>{Rt.init(t,e),t._zod.check=n=>{wM(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),NI=te("$ZodNumber",(t,e)=>{Lt.init(t,e),t._zod.pattern=t._zod.bag.pattern??jL,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...o?{received:o}:{}}),n}}),xM=te("$ZodNumberFormat",(t,e)=>{VL.init(t,e),NI.init(t,e)}),kM=te("$ZodBoolean",(t,e)=>{Lt.init(t,e),t._zod.pattern=DL,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),n}}),EM=te("$ZodUnknown",(t,e)=>{Lt.init(t,e),t._zod.parse=n=>n}),TM=te("$ZodNever",(t,e)=>{Lt.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),IM=te("$ZodDate",(t,e)=>{Lt.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const s=n.value,o=s instanceof Date;return o&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...o?{received:"Invalid Date"}:{},inst:t}),n}});function _x(t,e,n){t.issues.length&&e.issues.push(...Al(n,t.issues)),e.value[n]=t.value}const SM=te("$ZodArray",(t,e)=>{Lt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const o=[];for(let l=0;l<s.length;l++){const u=s[l],d=e.element._zod.run({value:u,issues:[]},r);d instanceof Promise?o.push(d.then(m=>_x(m,n,l))):_x(d,n,l)}return o.length?Promise.all(o).then(()=>n):n}});function $f(t,e,n,r){t.issues.length&&e.issues.push(...Al(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function RI(t){var r,s,o,l;const e=Object.keys(t.shape);for(const u of e)if(!((l=(o=(s=(r=t.shape)==null?void 0:r[u])==null?void 0:s._zod)==null?void 0:o.traits)!=null&&l.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const n=WO(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function PI(t,e,n,r,s,o){const l=[],u=s.keySet,d=s.catchall._zod,m=d.def.type;for(const y in e){if(u.has(y))continue;if(m==="never"){l.push(y);continue}const w=d.run({value:e[y],issues:[]},r);w instanceof Promise?t.push(w.then(x=>$f(x,n,y,e))):$f(w,n,y,e)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:o}),t.length?Promise.all(t).then(()=>n):n}const CM=te("$ZodObject",(t,e)=>{Lt.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const d={...u};return Object.defineProperty(e,"shape",{value:d}),d}})}const r=V0(()=>RI(e));bt(t._zod,"propValues",()=>{const u=e.shape,d={};for(const m in u){const y=u[m]._zod;if(y.values){d[m]??(d[m]=new Set);for(const w of y.values)d[m].add(w)}}return d});const s=Bf,o=e.catchall;let l;t._zod.parse=(u,d)=>{l??(l=r.value);const m=u.value;if(!s(m))return u.issues.push({expected:"object",code:"invalid_type",input:m,inst:t}),u;u.value={};const y=[],w=l.shape;for(const x of l.keys){const N=w[x]._zod.run({value:m[x],issues:[]},d);N instanceof Promise?y.push(N.then(I=>$f(I,u,x,m))):$f(N,u,x,m)}return o?PI(y,m,u,d,r.value,t):y.length?Promise.all(y).then(()=>u):u}}),AM=te("$ZodObjectJIT",(t,e)=>{CM.init(t,e);const n=t._zod.parse,r=V0(()=>RI(e)),s=x=>{const E=new QL(["shape","payload","ctx"]),N=r.value,I=U=>{const G=yx(U);return`shape[${G}]._zod.run({ value: input[${G}], issues: [] }, ctx)`};E.write("const input = payload.value;");const S=Object.create(null);let V=0;for(const U of N.keys)S[U]=`key_${V++}`;E.write("const newResult = {};");for(const U of N.keys){const G=S[U],Z=yx(U);E.write(`const ${G} = ${I(U)};`),E.write(`
        if (${G}.issues.length) {
          payload.issues = payload.issues.concat(${G}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Z}, ...iss.path] : [${Z}]
          })));
        }
        
        
        if (${G}.value === undefined) {
          if (${Z} in input) {
            newResult[${Z}] = undefined;
          }
        } else {
          newResult[${Z}] = ${G}.value;
        }
        
      `)}E.write("payload.value = newResult;"),E.write("return payload;");const W=E.compile();return(U,G)=>W(x,U,G)};let o;const l=Bf,u=!gI.jitless,m=u&&BO.value,y=e.catchall;let w;t._zod.parse=(x,E)=>{w??(w=r.value);const N=x.value;return l(N)?u&&m&&(E==null?void 0:E.async)===!1&&E.jitless!==!0?(o||(o=s(e.shape)),x=o(x,E),y?PI([],N,x,E,w,t):x):n(x,E):(x.issues.push({expected:"object",code:"invalid_type",input:N,inst:t}),x)}});function wx(t,e,n,r){for(const o of t)if(o.issues.length===0)return e.value=o.value,e;const s=t.filter(o=>!Cl(o));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(o=>o.issues.map(l=>Co(l,r,So())))}),e)}const NM=te("$ZodUnion",(t,e)=>{Lt.init(t,e),bt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),bt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),bt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),bt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${s.map(o=>z0(o.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,o)=>{if(n)return r(s,o);let l=!1;const u=[];for(const d of e.options){const m=d._zod.run({value:s.value,issues:[]},o);if(m instanceof Promise)u.push(m),l=!0;else{if(m.issues.length===0)return m;u.push(m)}}return l?Promise.all(u).then(d=>wx(d,s,t,o)):wx(u,s,t,o)}}),RM=te("$ZodIntersection",(t,e)=>{Lt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,o=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return o instanceof Promise||l instanceof Promise?Promise.all([o,l]).then(([d,m])=>bx(n,d,m)):bx(n,o,l)}});function _y(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(sc(t)&&sc(e)){const n=Object.keys(e),r=Object.keys(t).filter(o=>n.indexOf(o)!==-1),s={...t,...e};for(const o of r){const l=_y(t[o],e[o]);if(!l.valid)return{valid:!1,mergeErrorPath:[o,...l.mergeErrorPath]};s[o]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],o=e[r],l=_y(s,o);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function bx(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),Cl(t))return t;const r=_y(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const PM=te("$ZodRecord",(t,e)=>{Lt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!sc(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:t}),n;const o=[],l=e.keyType._zod.values;if(l){n.value={};const u=new Set;for(const m of l)if(typeof m=="string"||typeof m=="number"||typeof m=="symbol"){u.add(typeof m=="number"?m.toString():m);const y=e.valueType._zod.run({value:s[m],issues:[]},r);y instanceof Promise?o.push(y.then(w=>{w.issues.length&&n.issues.push(...Al(m,w.issues)),n.value[m]=w.value})):(y.issues.length&&n.issues.push(...Al(m,y.issues)),n.value[m]=y.value)}let d;for(const m in s)u.has(m)||(d=d??[],d.push(m));d&&d.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:t,keys:d})}else{n.value={};for(const u of Reflect.ownKeys(s)){if(u==="__proto__")continue;const d=e.keyType._zod.run({value:u,issues:[]},r);if(d instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(d.issues.length){e.mode==="loose"?n.value[u]=s[u]:n.issues.push({code:"invalid_key",origin:"record",issues:d.issues.map(y=>Co(y,r,So())),input:u,path:[u],inst:t});continue}const m=e.valueType._zod.run({value:s[u],issues:[]},r);m instanceof Promise?o.push(m.then(y=>{y.issues.length&&n.issues.push(...Al(u,y.issues)),n.value[d.value]=y.value})):(m.issues.length&&n.issues.push(...Al(u,m.issues)),n.value[d.value]=m.value)}}return o.length?Promise.all(o).then(()=>n):n}}),jM=te("$ZodEnum",(t,e)=>{Lt.init(t,e);const n=yI(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>$O.has(typeof s)).map(s=>typeof s=="string"?xp(s):s.toString()).join("|")})$`),t._zod.parse=(s,o)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),DM=te("$ZodTransform",(t,e)=>{Lt.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new mI(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new Ol;return n.value=s,n}});function xx(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const OM=te("$ZodOptional",(t,e)=>{Lt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",bt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),bt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${z0(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>xx(o,n.value)):xx(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),LM=te("$ZodNullable",(t,e)=>{Lt.init(t,e),bt(t._zod,"optin",()=>e.innerType._zod.optin),bt(t._zod,"optout",()=>e.innerType._zod.optout),bt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${z0(n.source)}|null)$`):void 0}),bt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),MM=te("$ZodDefault",(t,e)=>{Lt.init(t,e),t._zod.optin="optional",bt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>kx(o,e)):kx(s,e)}});function kx(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const VM=te("$ZodPrefault",(t,e)=>{Lt.init(t,e),t._zod.optin="optional",bt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),FM=te("$ZodNonOptional",(t,e)=>{Lt.init(t,e),bt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>Ex(o,t)):Ex(s,t)}});function Ex(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const zM=te("$ZodCatch",(t,e)=>{Lt.init(t,e),bt(t._zod,"optin",()=>e.innerType._zod.optin),bt(t._zod,"optout",()=>e.innerType._zod.optout),bt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>(n.value=o.value,o.issues.length&&(n.value=e.catchValue({...n,error:{issues:o.issues.map(l=>Co(l,r,So()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(o=>Co(o,r,So()))},input:n.value}),n.issues=[]),n)}}),UM=te("$ZodPipe",(t,e)=>{Lt.init(t,e),bt(t._zod,"values",()=>e.in._zod.values),bt(t._zod,"optin",()=>e.in._zod.optin),bt(t._zod,"optout",()=>e.out._zod.optout),bt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const o=e.out._zod.run(n,r);return o instanceof Promise?o.then(l=>Zh(l,e.in,r)):Zh(o,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(o=>Zh(o,e.out,r)):Zh(s,e.out,r)}});function Zh(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const BM=te("$ZodReadonly",(t,e)=>{Lt.init(t,e),bt(t._zod,"propValues",()=>e.innerType._zod.propValues),bt(t._zod,"values",()=>e.innerType._zod.values),bt(t._zod,"optin",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),bt(t._zod,"optout",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(Tx):Tx(s)}});function Tx(t){return t.value=Object.freeze(t.value),t}const $M=te("$ZodCustom",(t,e)=>{pr.init(t,e),Lt.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(o=>Ix(o,n,r,t));Ix(s,n,r,t)}});function Ix(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Hu(s))}}var Sx;class WM{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function qM(){return new WM}(Sx=globalThis).__zod_globalRegistry??(Sx.__zod_globalRegistry=qM());const vu=globalThis.__zod_globalRegistry;function HM(t,e){return new t({type:"string",...Ie(e)})}function KM(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Ie(e)})}function Cx(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Ie(e)})}function GM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Ie(e)})}function QM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ie(e)})}function ZM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ie(e)})}function YM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ie(e)})}function JM(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Ie(e)})}function XM(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Ie(e)})}function e5(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ie(e)})}function t5(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Ie(e)})}function n5(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ie(e)})}function r5(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Ie(e)})}function s5(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Ie(e)})}function i5(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ie(e)})}function o5(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ie(e)})}function a5(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ie(e)})}function l5(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ie(e)})}function c5(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ie(e)})}function u5(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Ie(e)})}function d5(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Ie(e)})}function h5(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Ie(e)})}function f5(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Ie(e)})}function p5(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ie(e)})}function m5(t,e){return new t({type:"string",format:"date",check:"string_format",...Ie(e)})}function g5(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Ie(e)})}function y5(t,e){return new t({type:"string",format:"duration",check:"string_format",...Ie(e)})}function v5(t,e){return new t({type:"number",checks:[],...Ie(e)})}function _5(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Ie(e)})}function w5(t,e){return new t({type:"boolean",...Ie(e)})}function b5(t){return new t({type:"unknown"})}function x5(t,e){return new t({type:"never",...Ie(e)})}function k5(t,e){return new t({type:"date",...Ie(e)})}function Ax(t,e){return new SI({check:"less_than",...Ie(e),value:t,inclusive:!1})}function yf(t,e){return new SI({check:"less_than",...Ie(e),value:t,inclusive:!0})}function Nx(t,e){return new CI({check:"greater_than",...Ie(e),value:t,inclusive:!1})}function vf(t,e){return new CI({check:"greater_than",...Ie(e),value:t,inclusive:!0})}function Rx(t,e){return new ML({check:"multiple_of",...Ie(e),value:t})}function jI(t,e){return new FL({check:"max_length",...Ie(e),maximum:t})}function Wf(t,e){return new zL({check:"min_length",...Ie(e),minimum:t})}function DI(t,e){return new UL({check:"length_equals",...Ie(e),length:t})}function E5(t,e){return new BL({check:"string_format",format:"regex",...Ie(e),pattern:t})}function T5(t){return new $L({check:"string_format",format:"lowercase",...Ie(t)})}function I5(t){return new WL({check:"string_format",format:"uppercase",...Ie(t)})}function S5(t,e){return new qL({check:"string_format",format:"includes",...Ie(e),includes:t})}function C5(t,e){return new HL({check:"string_format",format:"starts_with",...Ie(e),prefix:t})}function A5(t,e){return new KL({check:"string_format",format:"ends_with",...Ie(e),suffix:t})}function xc(t){return new GL({check:"overwrite",tx:t})}function N5(t){return xc(e=>e.normalize(t))}function R5(){return xc(t=>t.trim())}function P5(){return xc(t=>t.toLowerCase())}function j5(){return xc(t=>t.toUpperCase())}function D5(){return xc(t=>UO(t))}function O5(t,e,n){return new t({type:"array",element:e,...Ie(n)})}function L5(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Ie(n)})}function M5(t){const e=V5(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Hu(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Hu(s))}},t(n.value,n)));return e}function V5(t,e){const n=new pr({check:"custom",...Ie(e)});return n._zod.check=t,n}function OI(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??vu,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function on(t,e,n={path:[],schemaPath:[]}){var y,w;var r;const s=t._zod.def,o=e.seen.get(t);if(o)return o.count++,n.schemaPath.includes(t)&&(o.cycle=n.path),o.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=(w=(y=t._zod).toJSONSchema)==null?void 0:w.call(y);if(u)l.schema=u;else{const x={...n,schemaPath:[...n.schemaPath,t],path:n.path},E=t._zod.parent;if(E)l.ref=E,on(E,e,x),e.seen.get(E).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,x);else{const N=l.schema,I=e.processors[s.type];if(!I)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);I(t,e,N,x)}}const d=e.metadataRegistry.get(t);return d&&Object.assign(l.schema,d),e.io==="input"&&Kn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function LI(t,e){var o,l,u;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=d=>{var E;const m=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const N=(E=t.external.registry.get(d[0]))==null?void 0:E.id,I=t.external.uri??(V=>V);if(N)return{ref:I(N)};const S=d[1].defId??d[1].schema.id??`schema${t.counter++}`;return d[1].defId=S,{defId:S,ref:`${I("__shared")}#/${m}/${S}`}}if(d[1]===n)return{ref:"#"};const w=`#/${m}/`,x=d[1].schema.id??`__schema${t.counter++}`;return{defId:x,ref:w+x}},s=d=>{if(d[1].schema.$ref)return;const m=d[1],{ref:y,defId:w}=r(d);m.def={...m.schema},w&&(m.defId=w);const x=m.schema;for(const E in x)delete x[E];x.$ref=y};if(t.cycles==="throw")for(const d of t.seen.entries()){const m=d[1];if(m.cycle)throw new Error(`Cycle detected: #/${(o=m.cycle)==null?void 0:o.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const d of t.seen.entries()){const m=d[1];if(e===d[0]){s(d);continue}if(t.external){const w=(l=t.external.registry.get(d[0]))==null?void 0:l.id;if(e!==d[0]&&w){s(d);continue}}if((u=t.metadataRegistry.get(d[0]))==null?void 0:u.id){s(d);continue}if(m.cycle){s(d);continue}if(m.count>1&&t.reused==="ref"){s(d);continue}}}function MI(t,e){var l,u,d;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=m=>{const y=t.seen.get(m),w=y.def??y.schema,x={...w};if(y.ref===null)return;const E=y.ref;if(y.ref=null,E){r(E);const N=t.seen.get(E).schema;N.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(w.allOf=w.allOf??[],w.allOf.push(N)):(Object.assign(w,N),Object.assign(w,x))}y.isParent||t.override({zodSchema:m,jsonSchema:w,path:y.path??[]})};for(const m of[...t.seen.entries()].reverse())r(m[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,(l=t.external)!=null&&l.uri){const m=(u=t.external.registry.get(e))==null?void 0:u.id;if(!m)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(m)}Object.assign(s,n.def??n.schema);const o=((d=t.external)==null?void 0:d.defs)??{};for(const m of t.seen.entries()){const y=m[1];y.def&&y.defId&&(o[y.defId]=y.def)}t.external||Object.keys(o).length>0&&(t.target==="draft-2020-12"?s.$defs=o:s.definitions=o);try{const m=JSON.parse(JSON.stringify(s));return Object.defineProperty(m,"~standard",{value:{...e["~standard"],jsonSchema:{input:qf(e,"input"),output:qf(e,"output")}},enumerable:!1,writable:!1}),m}catch{throw new Error("Error converting schema to JSON.")}}function Kn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Kn(r.element,n);if(r.type==="set")return Kn(r.valueType,n);if(r.type==="lazy")return Kn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Kn(r.innerType,n);if(r.type==="intersection")return Kn(r.left,n)||Kn(r.right,n);if(r.type==="record"||r.type==="map")return Kn(r.keyType,n)||Kn(r.valueType,n);if(r.type==="pipe")return Kn(r.in,n)||Kn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(Kn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(Kn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(Kn(s,n))return!0;return!!(r.rest&&Kn(r.rest,n))}return!1}const F5=(t,e={})=>n=>{const r=OI({...n,processors:e});return on(t,r),LI(r,t),MI(r,t)},qf=(t,e)=>n=>{const{libraryOptions:r,target:s}=n??{},o=OI({...r??{},target:s,io:e,processors:{}});return on(t,o),LI(o,t),MI(o,t)},z5={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},U5=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:o,maximum:l,format:u,patterns:d,contentEncoding:m}=t._zod.bag;if(typeof o=="number"&&(s.minLength=o),typeof l=="number"&&(s.maxLength=l),u&&(s.format=z5[u]??u,s.format===""&&delete s.format),m&&(s.contentEncoding=m),d&&d.size>0){const y=[...d];y.length===1?s.pattern=y[0].source:y.length>1&&(s.allOf=[...y.map(w=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:w.source}))])}},B5=(t,e,n,r)=>{const s=n,{minimum:o,maximum:l,format:u,multipleOf:d,exclusiveMaximum:m,exclusiveMinimum:y}=t._zod.bag;typeof u=="string"&&u.includes("int")?s.type="integer":s.type="number",typeof y=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=y,s.exclusiveMinimum=!0):s.exclusiveMinimum=y),typeof o=="number"&&(s.minimum=o,typeof y=="number"&&e.target!=="draft-04"&&(y>=o?delete s.minimum:delete s.exclusiveMinimum)),typeof m=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=m,s.exclusiveMaximum=!0):s.exclusiveMaximum=m),typeof l=="number"&&(s.maximum=l,typeof m=="number"&&e.target!=="draft-04"&&(m<=l?delete s.maximum:delete s.exclusiveMaximum)),typeof d=="number"&&(s.multipleOf=d)},$5=(t,e,n,r)=>{n.type="boolean"},W5=(t,e,n,r)=>{n.not={}},q5=(t,e,n,r)=>{},H5=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},K5=(t,e,n,r)=>{const s=t._zod.def,o=yI(s.entries);o.every(l=>typeof l=="number")&&(n.type="number"),o.every(l=>typeof l=="string")&&(n.type="string"),n.enum=o},G5=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Q5=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Z5=(t,e,n,r)=>{const s=n,o=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=on(o.element,e,{...r,path:[...r.path,"items"]})},Y5=(t,e,n,r)=>{var m;const s=n,o=t._zod.def;s.type="object",s.properties={};const l=o.shape;for(const y in l)s.properties[y]=on(l[y],e,{...r,path:[...r.path,"properties",y]});const u=new Set(Object.keys(l)),d=new Set([...u].filter(y=>{const w=o.shape[y]._zod;return e.io==="input"?w.optin===void 0:w.optout===void 0}));d.size>0&&(s.required=Array.from(d)),((m=o.catchall)==null?void 0:m._zod.def.type)==="never"?s.additionalProperties=!1:o.catchall?o.catchall&&(s.additionalProperties=on(o.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},J5=(t,e,n,r)=>{const s=t._zod.def,o=s.inclusive===!1,l=s.options.map((u,d)=>on(u,e,{...r,path:[...r.path,o?"oneOf":"anyOf",d]}));o?n.oneOf=l:n.anyOf=l},X5=(t,e,n,r)=>{const s=t._zod.def,o=on(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=on(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=m=>"allOf"in m&&Object.keys(m).length===1,d=[...u(o)?o.allOf:[o],...u(l)?l.allOf:[l]];n.allOf=d},e3=(t,e,n,r)=>{const s=n,o=t._zod.def;s.type="object",(e.target==="draft-07"||e.target==="draft-2020-12")&&(s.propertyNames=on(o.keyType,e,{...r,path:[...r.path,"propertyNames"]})),s.additionalProperties=on(o.valueType,e,{...r,path:[...r.path,"additionalProperties"]})},t3=(t,e,n,r)=>{const s=t._zod.def,o=on(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[o,{type:"null"}]},n3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType},r3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},s3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},i3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},o3=(t,e,n,r)=>{const s=t._zod.def,o=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;on(o,e,r);const l=e.seen.get(t);l.ref=o},a3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,n.readOnly=!0},l3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType},c3=te("ZodISODateTime",(t,e)=>{lM.init(t,e),Mt.init(t,e)});function u3(t){return p5(c3,t)}const d3=te("ZodISODate",(t,e)=>{cM.init(t,e),Mt.init(t,e)});function h3(t){return m5(d3,t)}const f3=te("ZodISOTime",(t,e)=>{uM.init(t,e),Mt.init(t,e)});function p3(t){return g5(f3,t)}const m3=te("ZodISODuration",(t,e)=>{dM.init(t,e),Mt.init(t,e)});function g3(t){return y5(m3,t)}const y3=(t,e)=>{bI.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>eL(t,n)},flatten:{value:n=>XO(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,vy,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,vy,2)}},isEmpty:{get(){return t.issues.length===0}}})},qr=te("ZodError",y3,{Parent:Error}),v3=B0(qr),_3=$0(qr),w3=kp(qr),b3=Ep(qr),x3=rL(qr),k3=sL(qr),E3=iL(qr),T3=oL(qr),I3=aL(qr),S3=lL(qr),C3=cL(qr),A3=uL(qr),Ut=te("ZodType",(t,e)=>(Lt.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:qf(t,"input"),output:qf(t,"output")}}),t.toJSONSchema=F5(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Fa(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>Po(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>v3(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>w3(t,n,r),t.parseAsync=async(n,r)=>_3(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>b3(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>x3(t,n,r),t.decode=(n,r)=>k3(t,n,r),t.encodeAsync=async(n,r)=>E3(t,n,r),t.decodeAsync=async(n,r)=>T3(t,n,r),t.safeEncode=(n,r)=>I3(t,n,r),t.safeDecode=(n,r)=>S3(t,n,r),t.safeEncodeAsync=async(n,r)=>C3(t,n,r),t.safeDecodeAsync=async(n,r)=>A3(t,n,r),t.refine=(n,r)=>t.check(xV(n,r)),t.superRefine=n=>t.check(kV(n)),t.overwrite=n=>t.check(xc(n)),t.optional=()=>Ox(t),t.nullable=()=>Lx(t),t.nullish=()=>Ox(Lx(t)),t.nonoptional=n=>gV(t,n),t.array=()=>q0(t),t.or=n=>zI([t,n]),t.and=n=>oV(t,n),t.transform=n=>Mx(t,uV(n)),t.default=n=>fV(t,n),t.prefault=n=>mV(t,n),t.catch=n=>vV(t,n),t.pipe=n=>Mx(t,n),t.readonly=()=>bV(t),t.describe=n=>{const r=t.clone();return vu.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=vu.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return vu.get(t);const r=t.clone();return vu.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),VI=te("_ZodString",(t,e)=>{W0.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(r,s,o)=>U5(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(E5(...r)),t.includes=(...r)=>t.check(S5(...r)),t.startsWith=(...r)=>t.check(C5(...r)),t.endsWith=(...r)=>t.check(A5(...r)),t.min=(...r)=>t.check(Wf(...r)),t.max=(...r)=>t.check(jI(...r)),t.length=(...r)=>t.check(DI(...r)),t.nonempty=(...r)=>t.check(Wf(1,...r)),t.lowercase=r=>t.check(T5(r)),t.uppercase=r=>t.check(I5(r)),t.trim=()=>t.check(R5()),t.normalize=(...r)=>t.check(N5(...r)),t.toLowerCase=()=>t.check(P5()),t.toUpperCase=()=>t.check(j5()),t.slugify=()=>t.check(D5())}),N3=te("ZodString",(t,e)=>{W0.init(t,e),VI.init(t,e),t.email=n=>t.check(KM(R3,n)),t.url=n=>t.check(JM(P3,n)),t.jwt=n=>t.check(f5(K3,n)),t.emoji=n=>t.check(XM(j3,n)),t.guid=n=>t.check(Cx(Px,n)),t.uuid=n=>t.check(GM(Yh,n)),t.uuidv4=n=>t.check(QM(Yh,n)),t.uuidv6=n=>t.check(ZM(Yh,n)),t.uuidv7=n=>t.check(YM(Yh,n)),t.nanoid=n=>t.check(e5(D3,n)),t.guid=n=>t.check(Cx(Px,n)),t.cuid=n=>t.check(t5(O3,n)),t.cuid2=n=>t.check(n5(L3,n)),t.ulid=n=>t.check(r5(M3,n)),t.base64=n=>t.check(u5(W3,n)),t.base64url=n=>t.check(d5(q3,n)),t.xid=n=>t.check(s5(V3,n)),t.ksuid=n=>t.check(i5(F3,n)),t.ipv4=n=>t.check(o5(z3,n)),t.ipv6=n=>t.check(a5(U3,n)),t.cidrv4=n=>t.check(l5(B3,n)),t.cidrv6=n=>t.check(c5($3,n)),t.e164=n=>t.check(h5(H3,n)),t.datetime=n=>t.check(u3(n)),t.date=n=>t.check(h3(n)),t.time=n=>t.check(p3(n)),t.duration=n=>t.check(g3(n))});function ot(t){return HM(N3,t)}const Mt=te("ZodStringFormat",(t,e)=>{Rt.init(t,e),VI.init(t,e)}),R3=te("ZodEmail",(t,e)=>{XL.init(t,e),Mt.init(t,e)}),Px=te("ZodGUID",(t,e)=>{YL.init(t,e),Mt.init(t,e)}),Yh=te("ZodUUID",(t,e)=>{JL.init(t,e),Mt.init(t,e)}),P3=te("ZodURL",(t,e)=>{eM.init(t,e),Mt.init(t,e)}),j3=te("ZodEmoji",(t,e)=>{tM.init(t,e),Mt.init(t,e)}),D3=te("ZodNanoID",(t,e)=>{nM.init(t,e),Mt.init(t,e)}),O3=te("ZodCUID",(t,e)=>{rM.init(t,e),Mt.init(t,e)}),L3=te("ZodCUID2",(t,e)=>{sM.init(t,e),Mt.init(t,e)}),M3=te("ZodULID",(t,e)=>{iM.init(t,e),Mt.init(t,e)}),V3=te("ZodXID",(t,e)=>{oM.init(t,e),Mt.init(t,e)}),F3=te("ZodKSUID",(t,e)=>{aM.init(t,e),Mt.init(t,e)}),z3=te("ZodIPv4",(t,e)=>{hM.init(t,e),Mt.init(t,e)}),U3=te("ZodIPv6",(t,e)=>{fM.init(t,e),Mt.init(t,e)}),B3=te("ZodCIDRv4",(t,e)=>{pM.init(t,e),Mt.init(t,e)}),$3=te("ZodCIDRv6",(t,e)=>{mM.init(t,e),Mt.init(t,e)}),W3=te("ZodBase64",(t,e)=>{gM.init(t,e),Mt.init(t,e)}),q3=te("ZodBase64URL",(t,e)=>{vM.init(t,e),Mt.init(t,e)}),H3=te("ZodE164",(t,e)=>{_M.init(t,e),Mt.init(t,e)}),K3=te("ZodJWT",(t,e)=>{bM.init(t,e),Mt.init(t,e)}),FI=te("ZodNumber",(t,e)=>{NI.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(r,s,o)=>B5(t,r,s),t.gt=(r,s)=>t.check(Nx(r,s)),t.gte=(r,s)=>t.check(vf(r,s)),t.min=(r,s)=>t.check(vf(r,s)),t.lt=(r,s)=>t.check(Ax(r,s)),t.lte=(r,s)=>t.check(yf(r,s)),t.max=(r,s)=>t.check(yf(r,s)),t.int=r=>t.check(jx(r)),t.safe=r=>t.check(jx(r)),t.positive=r=>t.check(Nx(0,r)),t.nonnegative=r=>t.check(vf(0,r)),t.negative=r=>t.check(Ax(0,r)),t.nonpositive=r=>t.check(yf(0,r)),t.multipleOf=(r,s)=>t.check(Rx(r,s)),t.step=(r,s)=>t.check(Rx(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function Ku(t){return v5(FI,t)}const G3=te("ZodNumberFormat",(t,e)=>{xM.init(t,e),FI.init(t,e)});function jx(t){return _5(G3,t)}const Q3=te("ZodBoolean",(t,e)=>{kM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>$5(t,n,r)});function Z3(t){return w5(Q3,t)}const Y3=te("ZodUnknown",(t,e)=>{EM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>q5()});function Dx(){return b5(Y3)}const J3=te("ZodNever",(t,e)=>{TM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>W5(t,n,r)});function X3(t){return x5(J3,t)}const eV=te("ZodDate",(t,e)=>{IM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(r,s,o)=>H5(t,r),t.min=(r,s)=>t.check(vf(r,s)),t.max=(r,s)=>t.check(yf(r,s));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function tV(t){return k5(eV,t)}const nV=te("ZodArray",(t,e)=>{SM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Z5(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Wf(n,r)),t.nonempty=n=>t.check(Wf(1,n)),t.max=(n,r)=>t.check(jI(n,r)),t.length=(n,r)=>t.check(DI(n,r)),t.unwrap=()=>t.element});function q0(t,e){return O5(nV,t,e)}const rV=te("ZodObject",(t,e)=>{AM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Y5(t,n,r,s),bt(t,"shape",()=>e.shape),t.keyof=()=>H0(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Dx()}),t.loose=()=>t.clone({...t._zod.def,catchall:Dx()}),t.strict=()=>t.clone({...t._zod.def,catchall:X3()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>GO(t,n),t.safeExtend=n=>QO(t,n),t.merge=n=>ZO(t,n),t.pick=n=>HO(t,n),t.omit=n=>KO(t,n),t.partial=(...n)=>YO(UI,t,n[0]),t.required=(...n)=>JO(BI,t,n[0])});function jo(t,e){const n={type:"object",shape:t??{},...Ie(e)};return new rV(n)}const sV=te("ZodUnion",(t,e)=>{NM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>J5(t,n,r,s),t.options=e.options});function zI(t,e){return new sV({type:"union",options:t,...Ie(e)})}const iV=te("ZodIntersection",(t,e)=>{RM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>X5(t,n,r,s)});function oV(t,e){return new iV({type:"intersection",left:t,right:e})}const aV=te("ZodRecord",(t,e)=>{PM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>e3(t,n,r,s),t.keyType=e.keyType,t.valueType=e.valueType});function lV(t,e,n){return new aV({type:"record",keyType:t,valueType:e,...Ie(n)})}const wy=te("ZodEnum",(t,e)=>{jM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(r,s,o)=>K5(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const o={};for(const l of r)if(n.has(l))o[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new wy({...e,checks:[],...Ie(s),entries:o})},t.exclude=(r,s)=>{const o={...e.entries};for(const l of r)if(n.has(l))delete o[l];else throw new Error(`Key ${l} not found in enum`);return new wy({...e,checks:[],...Ie(s),entries:o})}});function H0(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new wy({type:"enum",entries:n,...Ie(e)})}const cV=te("ZodTransform",(t,e)=>{DM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Q5(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new mI(t.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(Hu(o,n.value,e));else{const l=o;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(Hu(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(o=>(n.value=o,n)):(n.value=s,n)}});function uV(t){return new cV({type:"transform",transform:t})}const UI=te("ZodOptional",(t,e)=>{OM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>l3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Ox(t){return new UI({type:"optional",innerType:t})}const dV=te("ZodNullable",(t,e)=>{LM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>t3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Lx(t){return new dV({type:"nullable",innerType:t})}const hV=te("ZodDefault",(t,e)=>{MM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>r3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function fV(t,e){return new hV({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():_I(e)}})}const pV=te("ZodPrefault",(t,e)=>{VM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>s3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function mV(t,e){return new pV({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():_I(e)}})}const BI=te("ZodNonOptional",(t,e)=>{FM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>n3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function gV(t,e){return new BI({type:"nonoptional",innerType:t,...Ie(e)})}const yV=te("ZodCatch",(t,e)=>{zM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>i3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function vV(t,e){return new yV({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const _V=te("ZodPipe",(t,e)=>{UM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>o3(t,n,r,s),t.in=e.in,t.out=e.out});function Mx(t,e){return new _V({type:"pipe",in:t,out:e})}const wV=te("ZodReadonly",(t,e)=>{BM.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>a3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function bV(t){return new wV({type:"readonly",innerType:t})}const $I=te("ZodCustom",(t,e)=>{$M.init(t,e),Ut.init(t,e),t._zod.processJSONSchema=(n,r,s)=>G5(t,n)});function xV(t,e={}){return L5($I,t,e)}function kV(t){return M5(t)}function EV(t,e={error:`Input not instance of ${t.name}`}){const n=new $I({type:"custom",check:"custom",fn:r=>r instanceof t,abort:!0,...Ie(e)});return n._zod.bag.Class=t,n}const fi=zI([tV(),EV(Tt),ot().datetime({offset:!0}).or(ot().datetime())]).nullable().optional(),TV=jo({type:H0(["none","daily","weekly","weekdays","monthly"]).default("none"),days:q0(Ku().min(0).max(6)).optional()}).nullable(),K0=jo({id:ot().optional(),title:ot().min(1,""),description:ot().nullable().optional(),status:H0(["todo","completed","archived"]).default("todo"),dueDate:fi,completedAt:fi,createdAt:fi,ownerId:ot(),projectId:ot().nullable().optional(),labelIds:q0(ot()).optional(),timeBlockId:ot().nullable().optional(),duration:Ku().min(0,"0").optional(),isImportant:Z3().default(!1),recurrence:TV,order:Ku().optional()});jo({id:ot().optional(),name:ot().min(1,""),color:ot().optional(),ownerId:ot(),createdAt:fi,order:Ku().optional()});jo({id:ot().optional(),name:ot().min(1,""),color:ot().optional(),ownerId:ot(),workspaceId:ot().optional(),createdAt:fi});const WI=jo({id:ot().optional(),name:ot().min(1,""),createdAt:fi}),qI=jo({id:ot().optional(),name:ot().min(1,""),query:ot(),workspaceId:ot().optional(),createdAt:fi}),Vx=ot().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,"HH:mm: 09:00, 14:30");jo({id:ot().optional(),name:ot().min(1,""),start:Vx,end:Vx,color:ot().optional(),order:Ku().optional()});jo({id:ot().optional(),mode:ot(),data:lV(ot(),ot()),createdAt:fi,updatedAt:fi,ownerId:ot(),workspaceId:ot()});const zs=La()(bd(t=>({currentWorkspaceId:null,workspaces:[],setCurrentWorkspaceId:e=>t({currentWorkspaceId:e}),setWorkspaces:e=>{const n=e.filter(r=>{const s=WI.safeParse(r);return s.success?!0:(console.error("Invalid workspace data:",r,s.error),!1)});t({workspaces:n})}}),{name:"workspace-storage",partialize:t=>({currentWorkspaceId:t.currentWorkspaceId})}));function IV(){return typeof window<"u"&&window.GLOBAL_APP_ID?window.GLOBAL_APP_ID:typeof __app_id<"u"?__app_id:"default-app-id"}function by(t){return`artifacts/${IV()}/users/${t}`}function kl(t,e){return`${by(t)}/workspaces/${e}`}const We={users:t=>by(t),workspaces:t=>`${by(t)}/workspaces`,filters:(t,e)=>`${kl(t,e)}/filters`,labels:(t,e)=>`${kl(t,e)}/labels`,timeblocks:(t,e)=>`${kl(t,e)}/timeblocks`,tasks:(t,e)=>`${kl(t,e)}/tasks`,projects:(t,e)=>`${kl(t,e)}/projects`,targets:(t,e)=>`${kl(t,e)}/targets`};let Jh=null;function SV(){return zs.getState().workspaces}function CV(t,e){if(!t)return e&&e([]),()=>{};Jh&&Jh();const n=We.workspaces(t),r=Ro(mt(Fe,n),R0("createdAt","asc")),s=zs.getState();return Jh=Oa(r,o=>{const l=o.docs.map(u=>({id:u.id,...u.data()}));s.setWorkspaces(l),l.length===0&&!o.metadata.hasPendingWrites?(e&&e([]),AV().catch(u=>console.error("[Workspace] Default creation error:",u))):(NV(l),e&&e(l))},o=>{console.error("[Workspace] Subscription error:",o),s.setWorkspaces([]),e&&e([])}),Jh}async function AV(){try{const t=Ge.currentUser;if(!t)return;const e=We.workspaces(t.uid);(await oi(Ro(mt(Fe,e),S4(1)))).empty&&await KI("")}catch(t){console.error("[Workspace] Failed to ensure default workspace:",t)}}function NV(t){if(t.length===0)return null;const e=zs.getState();let n=e.currentWorkspaceId;const r=n?t.some(s=>s.id===n):!1;return(!n||!r)&&(n=t[0].id,e.setCurrentWorkspaceId(n)),n}function Hr(){return zs.getState().currentWorkspaceId}function HI(t){if(!t)return;const e=zs.getState();e.currentWorkspaceId!==t&&e.setCurrentWorkspaceId(t)}async function KI(t){try{WI.pick({name:!0}).parse({name:t});const e=Ge.currentUser;if(!e)throw new Error("Authentication required");const n=We.workspaces(e.uid);return{id:(await $r(mt(Fe,n),{name:t,createdAt:gs()})).id,name:t}}catch(e){throw console.error("[Workspace] Add error:",e),e}}async function RV(t,e){try{const n=Ge.currentUser;if(!n)throw new Error("Authentication required");const r=We.workspaces(n.uid);await yc(An(Fe,r,t),{name:e})}catch(n){console.error("[Workspace] Update error:",n)}}function Gu(t){const e=`[ErrorLogger] [${t.type.toUpperCase()}]`,n=t.stack?`
${t.stack}`:"";t.type==="warn"?console.warn(`${e} ${t.message}${n}`):console.error(`${e} ${t.message}${n}`)}function PV(){window.onerror=(t,e,n,r,s)=>(Gu({timestamp:new Date().toISOString(),type:"error",message:String(t),stack:s==null?void 0:s.stack}),!1),window.onunhandledrejection=t=>{const e=t.reason;Gu({timestamp:new Date().toISOString(),type:"unhandledrejection",message:(e==null?void 0:e.message)||String(e),stack:e==null?void 0:e.stack})},console.info("[ErrorLogger] Initialized")}function jV(t,e){Gu({timestamp:new Date().toISOString(),type:"react",message:t.message,stack:t.stack})}class DV{constructor(){Hn(this,"isListenerInitialized",!1)}getCurrentUserId(){var e;return((e=Ge.currentUser)==null?void 0:e.uid)||null}hasInitialToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return!0;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return!0}catch{}return!1}getInitialAuthToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return window.GLOBAL_INITIAL_AUTH_TOKEN;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return __initial_auth_token}catch{}return null}async tryInitialTokenLogin(){if(this.isListenerInitialized)return;this.isListenerInitialized=!0;const e=this.getInitialAuthToken();if(e)try{await yR(Ge,e),console.log("[Auth] Initial token login success")}catch(n){Gu({timestamp:new Date().toISOString(),type:"error",message:`Initial token login failed: ${n.message}`,stack:n.stack})}}initAuthListener(e,n){return this.isListenerInitialized||this.tryInitialTokenLogin(),wE(Ge,s=>{s?e(s):n()})}async loginWithEmail(e,n){return await _E(Ge,e,n)}async logout(){try{await bE(Ge)}catch(e){throw Gu({timestamp:new Date().toISOString(),type:"error",message:`Logout failed: ${e.message}`,stack:e.stack}),e}}async updateUserAuthPassword(e){const n=Ge.currentUser;if(!n)throw new Error("Authentication required: No current user.");await _R(n,e)}}const xy=new DV,OV=(t,e)=>xy.initAuthListener(t,e),_f={TIMEOUT:{AUTH_LOADING:1e4},TIME_BLOCK:{MAX_COUNT:10}},G0=()=>{var l;const[t,e]=O.useState(((l=Ge.currentUser)==null?void 0:l.uid)||null),[n,r]=O.useState(Ge.currentUser),[s,o]=O.useState(!0);return O.useEffect(()=>{const u=new AbortController;let d=()=>{},m=null;const y=async()=>{if(xy.hasInitialToken())try{await xy.tryInitialTokenLogin()}catch(w){console.error("[useAuth] Initial token login failed:",w)}u.signal.aborted||(d=OV(w=>{u.signal.aborted||(e(w.uid),r(w),o(!1),m&&clearTimeout(m))},()=>{u.signal.aborted||(e(null),r(null),o(!1),m&&clearTimeout(m))}))};return m=setTimeout(()=>{u.signal.aborted||(console.warn("[useAuth] Loading timeout reached, forcing loading=false"),o(!1))},_f.TIMEOUT.AUTH_LOADING),y(),()=>{u.abort(),d(),m&&clearTimeout(m)}},[]),{userId:t,user:n,loading:s}},LV=()=>{const t=zs(l=>l.workspaces),e=zs(l=>l.setWorkspaces),{userId:n,loading:r}=G0(),[s,o]=O.useState(()=>t.length===0);return O.useEffect(()=>{if(r)return;if(!n){e([]),o(!1);return}const l=CV(n,()=>{o(!1)});return()=>l()},[n,r,e]),{workspaces:t,loading:s||r}},Sr=()=>{const t=zs(r=>r.currentWorkspaceId),{userId:e,loading:n}=G0();return{workspaceId:t,userId:e,loading:n}},MV=()=>{const{t}=ft(),{workspaces:e,loading:n}=LV(),{openModal:r}=gn(),[s,o]=O.useState(!1),l=O.useRef(null),{workspaceId:u}=Sr(),d=e.find(m=>m.id===u);return O.useEffect(()=>{const m=w=>{l.current&&!l.current.contains(w.target)&&o(!1)},y=w=>{w.key==="Escape"&&o(!1)};return s&&(document.addEventListener("mousedown",m),document.addEventListener("keydown",y)),()=>{document.removeEventListener("mousedown",m),document.removeEventListener("keydown",y)}},[s]),n?p.jsx("div",{className:"h-8 w-32 bg-gray-100 dark:bg-gray-800 animate-pulse rounded"}):p.jsxs("div",{className:"relative",ref:l,children:[p.jsxs("button",{onClick:()=>o(!s),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md px-2 py-1 transition-colors group","aria-expanded":s,"aria-haspopup":"true",children:[p.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 truncate max-w-[120px] sm:max-w-[140px] md:max-w-[180px]",children:d?d.name:t("loading")}),p.jsx("svg",{className:Se("w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-transform duration-200",s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),s&&p.jsxs("div",{className:"absolute left-0 mt-2 w-60 sm:w-64 max-w-[calc(100vw-32px)] origin-top-left rounded-lg shadow-2xl bg-white dark:bg-gray-800 ring-1 ring-black/5 z-50 border border-gray-100 dark:border-gray-700 overflow-hidden animate-scale-in custom-scrollbar",children:[p.jsx("div",{className:"p-1 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50",children:p.jsxs("button",{onClick:()=>{o(!1),r("workspace-edit",null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700/50 transition-colors rounded-md",children:[p.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),t("sidebar.add_workspace")]})}),p.jsx("div",{className:"py-1 max-h-[300px] overflow-y-auto custom-scrollbar",children:e.map(m=>{const y=m.id===u;return p.jsxs("button",{onClick:()=>{m.id&&HI(m.id),o(!1)},className:Se("w-full text-left px-4 py-2 text-sm flex items-center justify-between transition-colors",y?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[p.jsx("span",{className:"truncate block max-w-[140px] sm:max-w-[180px]",children:m.name}),y&&p.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]},m.id)})})]})]})},VV=({sidebarContent:t,title:e,children:n})=>{const{toggleSidebar:r,isSidebarOpen:s}=M0(),{t:o}=ft(),{openModal:l}=gn();return p.jsxs("div",{className:"w-full h-full flex overflow-hidden bg-premium-gradient text-gray-800 dark:text-white antialiased",children:[s&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-20 lg:hidden transition-opacity duration-300",onClick:r}),p.jsx(FO,{children:t}),p.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden",id:"main-content",children:[p.jsxs("header",{className:"h-12 border-b border-gray-200 dark:border-gray-800 flex items-center px-4 justify-between bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-10 sticky top-0",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[!s&&p.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:o("sidebar.menu_open"),"aria-label":o("sidebar.menu_open"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),p.jsx(MV,{}),p.jsx("h1",{className:"font-bold text-lg border-l border-gray-300 dark:border-gray-700 pl-3 ml-1 truncate",children:e})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("button",{onClick:()=>l("settings"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Settings","aria-label":"Settings",children:p.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]}),p.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:p.jsx("div",{className:Se("w-full h-full bg-white dark:bg-gray-900 relative flex-1",At.LAYOUT.CONTAINER_WIDTH_CLASS),children:n})})]})]})};function FV(t,e){return t===e?!0:!t||!e||t.length!==e.length?!1:JSON.stringify(t)===JSON.stringify(e)}function zV(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;const n=[...t].sort((s,o)=>(s.id||"").localeCompare(o.id||"")),r=[...e].sort((s,o)=>(s.id||"").localeCompare(o.id||""));for(let s=0;s<n.length;s++){const o=n[s],l=r[s];if(o.id!==l.id||o.status!==l.status||o.title!==l.title||o.description!==l.description||o.projectId!==l.projectId||o.timeBlockId!==l.timeBlockId||o.duration!==l.duration||o.isImportant!==l.isImportant)return!1;const u=d=>d==null?d:d instanceof Date?d.getTime():typeof(d==null?void 0:d.toMillis)=="function"?d.toMillis():d;if(u(o.dueDate)!==u(l.dueDate))return!1}return!0}function UV(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].id!==e[n].id||t[n].name!==e[n].name||t[n].color!==e[n].color)return!1;return!0}const BV=["permission-denied","invalid-argument","unauthenticated","not-found","already-exists","failed-precondition"];async function Us(t,e={}){const n=typeof e=="number"?{maxRetries:e}:e,{maxRetries:r=3,initialDelay:s=1e3,onError:o,onFinalFailure:l}=n;let u;for(let d=0;d<=r;d++)try{return await t()}catch(m){if(u=m,o&&o(m,d),d===r)break;const y=(m==null?void 0:m.code)||"";if(BV.some(E=>y.includes(E)))throw l&&l(m),m;const x=s*Math.pow(2,d);await new Promise(E=>setTimeout(E,x))}throw l&&l(u),u}class $V{constructor(){Hn(this,"cachedProjectsMap",new Map);Hn(this,"listeners",new Map);Hn(this,"unsubscribes",new Map)}isInitialized(e){return this.cachedProjectsMap.has(e)}notifyListeners(e){const n=this.cachedProjectsMap.get(e)||[],r=this.listeners.get(e);if(r){const s=[...n];r.forEach(o=>o(s))}}setCache(e,n){this.cachedProjectsMap.set(e,n),this.notifyListeners(e)}getProjects(e){return this.cachedProjectsMap.get(e)||[]}subscribe(e,n,r){this.listeners.has(n)||this.listeners.set(n,new Set);const s=this.listeners.get(n);s.add(r);const o=this.cachedProjectsMap.get(n);if(o&&queueMicrotask(()=>r([...o])),!this.unsubscribes.has(n)){const l=We.projects(e,n),u=Ro(mt(Fe,l));console.log(`[ProjectCache] Subscribing to path: ${l} for user: ${e}`);const d=Oa(u,m=>{const y=m.docs.map(x=>({id:x.id,...x.data()}));console.log(`[ProjectCache] Received ${y.length} projects from Firestore for workspace: ${n}`);const w=this.cachedProjectsMap.get(n);if(w&&UV(w,y)){console.log("[ProjectCache] Data identical, skipping update");return}console.log("[ProjectCache] Updating cache and notifying listeners"),this.cachedProjectsMap.set(n,y),this.notifyListeners(n)},m=>{console.error("[ProjectCache] Subscription error:",m),this.cachedProjectsMap.set(n,[]),this.notifyListeners(n)});this.unsubscribes.set(n,d)}return()=>{var l;s.delete(r),s.size===0&&((l=this.unsubscribes.get(n))==null||l(),this.unsubscribes.delete(n),this.listeners.delete(n))}}}const Fn=new $V,WV=t=>Fn.isInitialized(t),qV=t=>Fn.getProjects(t),HV=(t,e)=>Fn.setCache(t,e);function KV(t,e,n){return Fn.subscribe(t,e,n)}async function GV(t,e,n,r){const s=Fn.getProjects(e),l={id:"temp-"+Date.now(),name:n,color:r,ownerId:t,createdAt:new Date};Fn.setCache(e,[...s,l]);const u=We.projects(t,e);return console.log(`[ProjectCache] Adding project to path: ${u}`),Us(async()=>{const d=await $r(mt(Fe,u),{name:n,color:r,ownerId:t,createdAt:gs()});console.log(`[ProjectCache] Successfully added project with ID: ${d.id}`)},{onFinalFailure:()=>{console.error(`[ProjectCache] Failed to add project: ${n}`),Fn.setCache(e,s),Nt.error("")}})}async function QV(t,e,n,r){const s=Fn.getProjects(e),o=s.map(l=>l.id===n?{...l,...r}:l);return Fn.setCache(e,o),Us(async()=>{const l=We.projects(t,e),u=An(Fe,l,n);await yc(u,r)},{onFinalFailure:()=>{Fn.setCache(e,s),Nt.error("")}})}async function ZV(t,e,n){const r=Fn.getProjects(e),s=r.filter(o=>o.id!==n);return Fn.setCache(e,s),Us(async()=>{const o=We.projects(t,e);await vc(An(Fe,o,n))},{onFinalFailure:()=>{Fn.setCache(e,r),Nt.error("")}})}async function YV(t,e,n){const r=Fn.getProjects(e);return Fn.setCache(e,n),Us(async()=>{const s=O0(Fe),o=We.projects(t,e);n.forEach((l,u)=>{if(l.id&&!l.id.startsWith("temp-")){const d=An(Fe,o,l.id);s.update(d,{order:u})}}),await s.commit()},{onFinalFailure:()=>{Fn.setCache(e,r),Nt.error("")}})}function Q0(){var n;const t=(n=Ge.currentUser)==null?void 0:n.uid,e=Hr();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}const JV=t=>{const e=t||Hr();return e?qV(e):[]},XV=t=>{const e=t||Hr();return e?WV(e):!1},eF=(t,e)=>{const n=e||Hr();n&&HV(n,t)},tF=(t,e)=>{const n=typeof t=="function"?t:e,r=typeof t=="string"?t:Hr(),s=Ge.currentUser;return s&&r&&typeof n=="function"?KV(s.uid,r,n):(typeof n=="function"&&n([]),()=>{})},nF=async(t,e=null,n)=>{const r=Ge.currentUser;if(!r)throw new Error("Authentication required.");const s=e||Hr();if(!s)throw new Error("Workspace selection required.");return GV(r.uid,s,t,n)},rF=async(t,e)=>{const{userId:n,workspaceId:r}=Q0();return QV(n,r,t,e)},GI=async t=>{const{userId:e,workspaceId:n}=Q0();return ZV(e,n,t)},sF=async t=>{const{userId:e,workspaceId:n}=Q0();return YV(e,n,t)},Xh=new Map;function kc(t,e,n){const r=Ry(),s=JSON.stringify(t);return O.useEffect(()=>{if(t.some(l=>l==null))return;let o=Xh.get(s);return o||(o={count:0,unsubscribe:e(u=>{r.setQueryData(t,u)})},Xh.set(s,o)),o.count++,()=>{const l=Xh.get(s);l&&(l.count--,l.count===0&&(l.unsubscribe(),Xh.delete(s)))}},[s]),nC({queryKey:t,queryFn:()=>{const o=r.getQueryData(t);return o!==void 0?Promise.resolve(o):n!==void 0?Promise.resolve(n):new Promise(l=>{const u=setTimeout(()=>{const y=r.getQueryData(t);l(y??n??null)},1e4),d=r.getQueryCache().subscribe(y=>{if(y.type==="updated"&&JSON.stringify(y.query.queryKey)===s){const w=y.query.state.data;w!==void 0&&(clearTimeout(u),d(),l(w))}}),m=r.getQueryData(t);m!==void 0&&(clearTimeout(u),d(),l(m))})},initialData:n,staleTime:1/0,gcTime:1e3*60*5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})}const Ip=()=>{const{workspaceId:t,loading:e}=Sr(),n=Ry(),r=O.useCallback(y=>t?tF(t,y):()=>{},[t]),o=(t?XV(t):!1)&&t?JV(t):void 0,{data:l,isPending:u}=kc(["projects",t||void 0],r,o);return{projects:l||[],loading:e||!!t&&u,setProjectsOverride:y=>{t&&(n.setQueryData(["projects",t],y),eF(y,t))}}},iF=[{id:"tb_morning",name:"06:00 - 09:00",start:"06:00",end:"09:00",color:"#EF4444",order:0},{id:"tb_afternoon",name:"13:00 - 17:00",start:"13:00",end:"17:00",color:"#3B82F6",order:1},{id:"tb_night",name:"20:00 - 22:00",start:"20:00",end:"22:00",color:"#8B5CF6",order:2}],ua=class ua{constructor(){Hn(this,"cacheMap",new Map);Hn(this,"listeners",new Map);Hn(this,"unsubscribes",new Map)}static getInstance(){return ua.instance||(ua.instance=new ua),ua.instance}getBlocks(e){return this.cacheMap.get(e)||[]}isInitialized(e){return this.cacheMap.has(e)}setCache(e,n){this.cacheMap.set(e,n),this.notify(e)}notify(e){const n=this.getBlocks(e),r=this.listeners.get(e);r&&r.forEach(s=>s([...n]))}subscribe(e,n,r){if(!e||!n)return r([]),()=>{};this.listeners.has(n)||this.listeners.set(n,new Set),this.listeners.get(n).add(r);const s=this.cacheMap.get(n);if(s&&queueMicrotask(()=>r([...s])),!this.unsubscribes.has(n)){const o=We.timeblocks(e,n),l=Ro(mt(Fe,o),R0("order","asc"));let u=!0;const d=Oa(l,m=>{const y=m.docs.map(w=>({id:w.id,...w.data()}));if(u&&y.length===0&&!m.metadata.hasPendingWrites){u=!1,oF(e,n).catch(w=>console.error("[TimeBlocks] Failed to create defaults:",w));return}u=!1,this.cacheMap.set(n,y),this.notify(n)},m=>{console.error("[TimeBlocks] Subscription error:",m)});this.unsubscribes.set(n,d)}return()=>{const o=this.listeners.get(n);o&&o.delete(r)}}};Hn(ua,"instance");let ky=ua;const Sp=ky.getInstance();async function oF(t,e){const n=We.timeblocks(t,e),r=O0(Fe);iF.forEach(s=>{const o=An(Fe,n,s.id);r.set(o,{name:s.name,start:s.start,end:s.end,color:s.color,order:s.order,updatedAt:gs()})}),await r.commit()}function aF(t,e){var r;const n=(r=Ge.currentUser)==null?void 0:r.uid;return Sp.subscribe(n,t,e)}function lF(t){return Sp.getBlocks(t)}function cF(t){return Sp.isInitialized(t)}async function uF(t,e){var r;const n=(r=Ge.currentUser)==null?void 0:r.uid;if(!(!n||!t))try{const s=We.timeblocks(n,t),o=e.id||crypto.randomUUID(),l=Sp.getBlocks(t),u=e.order!==void 0?e.order:Math.max(...l.map(m=>m.order||0),-1)+1,d={name:e.name,start:e.start,end:e.end,color:e.color,order:u,updatedAt:gs()};return await N4(An(Fe,s,o),d,{merge:!0}),!0}catch(s){console.error("[TimeBlocks] Save error:",s)}}async function QI(t,e){var r;const n=(r=Ge.currentUser)==null?void 0:r.uid;if(!(!n||!t))try{const s=We.timeblocks(n,t);return await vc(An(Fe,s,e)),!0}catch(s){console.error("[TimeBlocks] Delete error:",s)}}const xd=()=>{const{workspaceId:t,loading:e}=Sr(),n=O.useCallback(u=>t?aF(t,u):()=>{},[t]),r=t?cF(t):!1,{data:s,isPending:o}=kc(["timeblocks",t],n,t&&r?lF(t):void 0);return{timeBlocks:s||[],loading:e||!!t&&o}};function Z0(t){const e={keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(!t)return e;const n=/(?:-?[a-zA-Z]+:(?:"[^"]*"|[^\s]+))|(?:"[^"]*")|(?:-?[^\s]+)/g,r=t.match(n);if(!r)return e;const s=[];for(let o=0;o<r.length;o++){const l=r[o];if(l==="OR"){const u=s.length-1,d=s[u],m=r[o+1],y=d&&(typeof d=="string"?!d.includes(":"):!0),w=m&&!m.includes(":")&&m!=="OR";if(y&&w){const x=Array.isArray(d)?d:[d];x.push(m.toLowerCase().replace(/^"|"$/g,"")),s[u]=x,o++;continue}}s.push(l)}return s.forEach(o=>{if(Array.isArray(o)){e.keywords.push(o);return}const l=o;if(l.startsWith('"')&&l.endsWith('"')){const u=l.substring(1,l.length-1);u&&e.keywords.push(u.toLowerCase());return}if(l.startsWith("-")&&!l.includes(":")){const u=l.substring(1);u&&e.excludeKeywords.push(u.toLowerCase());return}if(l.includes(":")){let u=!1,d=l;d.startsWith("-")&&(u=!0,d=d.substring(1));const m=d.indexOf(":"),y=d.substring(0,m).toLowerCase();let w=d.substring(m+1);switch(w.startsWith('"')&&w.endsWith('"')&&(w=w.substring(1,w.length-1)),w.toLowerCase(),y){case"project":case"p":u?w.split(",").forEach(N=>e.excludeProjects.push(N)):w.split(",").forEach(N=>e.projects.push(N));break;case"label":case"l":u?w.split(",").forEach(N=>e.excludeLabels.push(N)):w.split(",").forEach(N=>e.labels.push(N));break;case"timeblock":case"tb":u?w.split(",").forEach(N=>e.excludeTimeBlocks.push(N)):w.split(",").forEach(N=>e.timeBlocks.push(N));break;case"duration":case"d":w.split(",").forEach(N=>{const I=parseInt(N,10);isNaN(I)||e.durations.push(I)});break;case"date":case"due":const x=["today","tomorrow","week","upcoming","overdue","next-week"];w.split(",").forEach(N=>{const I=N.toLowerCase();x.includes(I)&&e.dates.push(I)});break;case"status":case"is":const E=["completed","active","todo"];w.split(",").forEach(N=>{const I=N.toLowerCase();E.includes(I)&&(u?e.excludeStatus.push(I):e.status.push(I)),I==="important"&&(e.isImportant=!u),I==="unimportant"&&(e.isImportant=u)});break;default:u?e.excludeKeywords.push(d.toLowerCase()):e.keywords.push(d.toLowerCase());break}}else l!=="OR"&&e.keywords.push(l.toLowerCase())}),e}function dF(t){var n,r,s,o,l,u,d,m,y,w,x,E;const e=[];return(n=t.keywords)!=null&&n.length&&e.push(...t.keywords.map(N=>Array.isArray(N)?N.join(" OR "):N.includes(" ")?`"${N}"`:N)),(r=t.excludeKeywords)!=null&&r.length&&e.push(...t.excludeKeywords.map(N=>`-${N}`)),(s=t.projects)!=null&&s.length&&e.push(`project:${t.projects.join(",")}`),(o=t.excludeProjects)!=null&&o.length&&e.push(`-project:${t.excludeProjects.join(",")}`),(l=t.labels)!=null&&l.length&&e.push(`label:${t.labels.join(",")}`),(u=t.excludeLabels)!=null&&u.length&&e.push(`-label:${t.excludeLabels.join(",")}`),(d=t.timeBlocks)!=null&&d.length&&e.push(`timeblock:${t.timeBlocks.join(",")}`),(m=t.excludeTimeBlocks)!=null&&m.length&&e.push(`-timeblock:${t.excludeTimeBlocks.join(",")}`),(y=t.durations)!=null&&y.length&&e.push(`duration:${t.durations.join(",")}`),(w=t.dates)!=null&&w.length&&e.push(`date:${t.dates.join(",")}`),(x=t.status)!=null&&x.length&&e.push(`status:${t.status.join(",")}`),(E=t.excludeStatus)!=null&&E.length&&e.push(`-status:${t.excludeStatus.join(",")}`),t.isImportant===!0&&e.push("is:important"),t.isImportant===!1&&e.push("is:unimportant"),e.join(" ")}const hF=t=>t instanceof Date?Tt.fromDate(t):t;async function fF(t,e){if(!t||!e)throw new Error("Missing parameters for backup.");try{const n=mt(Fe,We.tasks(t,e)),r=mt(Fe,We.projects(t,e)),s=mt(Fe,We.labels(t,e)),o=mt(Fe,We.targets(t,e)),l=mt(Fe,We.timeblocks(t,e)),u=mt(Fe,We.filters(t,e)),[d,m,y,w,x,E]=await Promise.all([oi(n),oi(r),oi(s),oi(o),oi(l),oi(u)]),N=I=>I.docs.map(S=>{const V=S.data(),W={id:S.id};for(const U in V)W[U]=V[U]instanceof Tt?V[U].toMillis():V[U];return W});return{version:"1.3",exportedAt:new Date().toISOString(),userId:t,workspaceId:e,tasks:N(d),projects:N(m),labels:N(y),targets:N(w),timeBlocks:N(x),customFilters:N(E)}}catch(n){throw console.error("[Backup] createBackupData failed:",n),n}}async function pF(t,e,n){var r;if(!t||!e||!n)throw new Error("Invalid import parameters.");try{const{tasks:s=[],projects:o=[],labels:l=[],targets:u=[],timeBlocks:d=[],customFilters:m=[]}=n,y=new Map,w=new Map,x=await oi(mt(Fe,We.labels(t,e))),E=new Map;x.forEach(I=>E.set(I.data().name,I.id));for(const I of l){const S=(r=I.name)==null?void 0:r.trim();if(S)if(E.has(S))w.set(I.id,E.get(S));else{const V={...I,name:S};delete V.id;const W=await $r(mt(Fe,We.labels(t,e)),V);w.set(I.id,W.id),E.set(S,W.id)}}for(const I of o){const S={...I};delete S.id,typeof S.createdAt=="string"?S.createdAt=new Date(S.createdAt):typeof S.createdAt=="number"&&(S.createdAt=new Date(S.createdAt));const V=await $r(mt(Fe,We.projects(t,e)),S);y.set(I.id,V.id)}for(const I of d){const S={...I};delete S.id,await $r(mt(Fe,We.timeblocks(t,e)),S)}for(const I of m){const S={...I};delete S.id,typeof S.createdAt=="string"?S.createdAt=new Date(S.createdAt):typeof S.createdAt=="number"&&(S.createdAt=new Date(S.createdAt)),await $r(mt(Fe,We.filters(t,e)),S)}for(const I of u){const S={...I};delete S.id,typeof S.createdAt=="string"&&(S.createdAt=new Date(S.createdAt)),typeof S.updatedAt=="string"&&(S.updatedAt=new Date(S.updatedAt)),S.ownerId=t,S.workspaceId=e,await $r(mt(Fe,We.targets(t,e)),S)}const N=s.map(async I=>{const S={...I};return delete S.id,typeof S.createdAt=="string"?S.createdAt=new Date(S.createdAt):typeof S.createdAt=="number"&&(S.createdAt=new Date(S.createdAt)),typeof S.dueDate=="string"?S.dueDate=new Date(S.dueDate):typeof S.dueDate=="number"&&(S.dueDate=new Date(S.dueDate)),S.dueDate&&(S.dueDate=hF(S.dueDate)),S.projectId&&y.has(S.projectId)?S.projectId=y.get(S.projectId):S.projectId=null,Array.isArray(S.labelIds)&&(S.labelIds=S.labelIds.map(V=>w.get(V)).filter(V=>V)),S.ownerId=t,$r(mt(Fe,We.tasks(t,e)),S)});return await Promise.all(N),{tasksCount:s.length,projectsCount:o.length,labelsCount:l.length,targetsCount:u.length}}catch(s){throw console.error("[Backup] importBackupData failed:",s),s}}const Su=new Map;function mF(t){return t?Su.get(t)||[]:[]}function gF(t){return Su.has(t)}function yF(t,e){var o;const n=(o=Ge.currentUser)==null?void 0:o.uid;if(!n||!t)return Su.set(t||"",[]),e([]),()=>{};const r=We.filters(n,t),s=Ro(mt(Fe,r));return Oa(s,l=>{const u=l.docs.map(d=>({id:d.id,...d.data()}));Su.set(t,u),e(u)},l=>{console.error("[Filters] Subscription error:",l),Su.set(t,[]),e([])})}async function vF(t){var d;const e=(d=Ge.currentUser)==null?void 0:d.uid;if(!e)throw Nt.error(""),new Error("Authentication required");const{workspaceId:n,...r}=t;if(!n)throw Nt.error("ID"),new Error("Workspace ID required");const s=qI.pick({name:!0,query:!0}).safeParse(r);if(!s.success){const m=s.error.issues.map(y=>y.message).join(", ");throw console.error("[Filters] Validation failed:",s.error.flatten()),Nt.error(`: ${m}`),new Error(`Validation failed: ${m}`)}const o=We.filters(e,n),{id:l,...u}=r;await $r(mt(Fe,o),{...u,ownerId:e,workspaceId:n,createdAt:gs()})}async function _F(t,e,n){var d;const r=(d=Ge.currentUser)==null?void 0:d.uid;if(!r||!t)throw Nt.error(""),new Error("Authentication required");const s=qI.partial().safeParse(n);if(!s.success){const m=s.error.issues.map(y=>y.message).join(", ");throw console.error("[Filters] Validation failed:",s.error.flatten()),Nt.error(`: ${m}`),new Error(`Validation failed: ${m}`)}const o=We.filters(r,t),{id:l,...u}=n;await yc(An(Fe,o,e),{...u,updatedAt:gs()})}async function wF(t,e){var s;const n=(s=Ge.currentUser)==null?void 0:s.uid;if(!n||!t)throw Nt.error(""),new Error("Authentication required");const r=We.filters(n,t);await vc(An(Fe,r,e))}const Hf=new Map;function bF(t){return t?Hf.get(t)||[]:[]}function xF(t){return Hf.has(t)}function kF(t,e,n){if(!t||!e)return n([]),()=>{};const r=We.labels(t,e),s=Ro(mt(Fe,r));return Oa(s,o=>{const l=o.docs.map(u=>({id:u.id,...u.data()}));Hf.set(e,l),n(l)},o=>{console.error("[Labels] Subscription error:",o),Hf.set(e,[]),n([])})}async function EF(t,e,n,r){const s=We.labels(t,e);await $r(mt(Fe,s),{name:n,color:r,ownerId:t,workspaceId:e,createdAt:gs()})}async function TF(t,e,n,r){const s=We.labels(t,e),o=An(Fe,s,n);return yc(o,r)}async function IF(t,e,n){const r=We.labels(t,e);await vc(An(Fe,r,n))}const SF=bF,CF=t=>t?xF(t):!1;function Y0(){var e;const t=(e=Ge.currentUser)==null?void 0:e.uid;if(!t)throw console.error("Authentication required for label operation."),new Error("Authentication required.");return t}function AF(t,e){var r;const n=(r=Ge.currentUser)==null?void 0:r.uid;return n&&t?kF(n,t,e):(e([]),()=>{})}async function NF(t,e,n){const r=Y0();if(!t)throw new Error("Workspace ID required");return EF(r,t,e,n)}async function RF(t,e,n){const r=Y0();if(!t)throw new Error("Workspace ID required");return TF(r,t,e,n)}async function PF(t,e){const n=Y0();if(!t)throw new Error("Workspace ID required");return IF(n,t,e)}async function jF(t){const e=Ge.currentUser;if(!e)throw new Error("User not authenticated");const n=We.tasks(e.uid,t),s=(await oi(mt(Fe,n))).docs.map(d=>({id:d.id,...d.data()})),o=new Map;for(const d of s){if(!d.title)continue;const m=d.title.trim(),y=o.get(m)||[];y.push(d),o.set(m,y)}let l=0;const u=[];for(const[d,m]of o.entries())if(m.length>1){m.sort((w,x)=>{const E=S=>{if(!S)return 0;if(typeof S=="object"&&"toDate"in S&&typeof S.toDate=="function")return S.toDate().getTime();const V=new Date(S);return isNaN(V.getTime())?0:V.getTime()},N=E(w.createdAt),I=E(x.createdAt);return N-I});const y=m.slice(1);for(const w of y)w.id&&(console.log(`[Cleanup] Deleting duplicate task: "${w.title}" (${w.id})`),u.push(vc(An(Fe,n,w.id))),l++)}return await Promise.all(u),l}const Cu=new Map;function DF(t,e,n,r){const s=We.targets(t,e),o=Ro(mt(Fe,s),R0("createdAt","desc"));let l=!0;return Oa(o,u=>{const d=u.docs.map(y=>({id:y.id,...y.data()})),m=Cu.get(e);if(m&&FV(m,d)){l&&n(m),l=!1;return}Cu.set(e,d),l=!1,n(d)},u=>{console.error("Error subscribing to targets:",u),Cu.set(e,[]),n([]),r&&r(u)})}function OF(t){return Cu.get(t)||[]}function LF(t){return Cu.has(t)}async function MF(t,e,n){return Us(async()=>{const r=We.targets(t,e),s={...n,ownerId:t,workspaceId:e,createdAt:gs(),updatedAt:gs()};delete s.id,await $r(mt(Fe,r),s)})}function VF(){var e;const t=(e=Ge.currentUser)==null?void 0:e.uid;if(!t)throw new Error("Authentication required.");return t}const FF=t=>{const e=t||Hr();return e?OF(e):[]},zF=t=>{const e=t||Hr();return e?LF(e):!1},UF=(t,e,n)=>{let r,s,o;typeof t=="function"?(r=t,s=Hr()||void 0):(s=t,r=e,o=n);const l=Ge.currentUser;return l&&s&&typeof r=="function"?DF(l.uid,s,r,o):(typeof r=="function"&&r([]),()=>{})},BF=async(t,e)=>{const n=VF();if(!t)throw new Error("Workspace ID required.");return MF(n,t,e)};function mn(t){if(!t)return null;if(t instanceof Date)return t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();const e=new Date(t);return isNaN(e.getTime())?null:e}const Fx=(t,e)=>{const n=mn(t),r=mn(e);return!n||!r?!1:n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()&&n.getDate()===r.getDate()},$F=t=>{const e=mn(t);if(!e)return!1;const n=new Date;return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()},WF=(t,e=7)=>{const n=mn(t);if(!n)return!1;const r=new Date;r.setHours(0,0,0,0);const s=new Date(r);s.setDate(r.getDate()+1);const o=new Date(r);return o.setDate(r.getDate()+e+1),n>=s&&n<o};function Cp(t=new Date){const e=mn(t)||new Date,n=new Date(e);return n.setHours(0,0,0,0),n}function qF(t=new Date,e=1){const n=mn(t)||new Date,r=n.getDay(),s=n.getDate()-r+(r<e?e-7:e),o=new Date(n);return o.setDate(s),Cp(o)}function HF(t){const e=mn(t);if(!e)return"";const n=new Date,r=Cp(n),s=Math.round((e.getTime()-r.getTime())/(1e3*60*60*24));if(s===0)return"";if(s===1)return"";if(s===-1)return"";const o=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),u=String(e.getDate()).padStart(2,"0");return o!==n.getFullYear()?`${o}/${l}/${u}`:`${l}/${u}`}const KF=t=>{const e=mn(t);if(!e)return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${s}`},GF=t=>{if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e};function QF(t){const e=mn(t);if(!e)return"text-gray-500";const n=Cp(new Date),r=Math.round((e.getTime()-n.getTime())/(1e3*60*60*24));return r<0?"text-red-500 font-bold":r===0?"text-green-600 dark:text-green-400 font-medium":r===1?"text-orange-500 dark:text-orange-400 font-medium":"text-gray-500 dark:text-gray-400"}function ZF(t,e){var r;if(!t||!(e!=null&&e.type))return null;const n=new Date(mn(t));switch(e.type){case"daily":return n.setDate(n.getDate()+1),n;case"weekly":{if(!((r=e.days)!=null&&r.length))return null;const s=n.getDay();for(let o=1;o<=7;o++){const l=(s+o)%7;if(e.days.includes(l))return n.setDate(n.getDate()+o),n}return null}case"weekdays":do n.setDate(n.getDate()+1);while(n.getDay()===0||n.getDay()===6);return n;case"monthly":return n.setMonth(n.getMonth()+1),n;default:return null}}function YF(t){const e=Cp(new Date);if(!(t!=null&&t.type)||t.type==="daily"||t.type==="monthly")return e;if(t.type==="weekly"&&t.days&&t.days.length>0){const n=e.getDay();for(let r=0;r<=6;r++)if(t.days.includes((n+r)%7))return e.setDate(e.getDate()+r),e}if(t.type==="weekdays"){for(;e.getDay()===0||e.getDay()===6;)e.setDate(e.getDate()+1);return e}return e}function JF(t,e){if(!t||!e)return 0;const[n,r]=t.split(":").map(Number),[s,o]=e.split(":").map(Number);if(isNaN(n)||isNaN(r)||isNaN(s)||isNaN(o))return 0;const l=n*60+r;let u=s*60+o;return u<l&&(u+=1440),u-l}const Ig=t=>t instanceof Tt?t.toDate():t instanceof Date?t:void 0,ZI=t=>t instanceof Date?Tt.fromDate(t):t;function XF(t,e){if(!e||typeof e!="object")return console.warn(`[deserializeTask] Invalid data for task ${t}:`,e),{id:t,title:"Invalid Task",status:"todo",ownerId:""};const n=e.recurrence||null,r={id:t,title:String(e.title||"Untitled"),description:e.description?String(e.description):null,status:e.status==="completed"||e.status==="todo"||e.status==="archived"?e.status:"todo",dueDate:Ig(e.dueDate)||void 0,createdAt:Ig(e.createdAt)||void 0,completedAt:Ig(e.completedAt)||void 0,ownerId:String(e.ownerId||""),projectId:e.projectId?String(e.projectId):null,labelIds:Array.isArray(e.labelIds)?e.labelIds.map(String):[],timeBlockId:e.timeBlockId?String(e.timeBlockId):null,duration:typeof e.duration=="number"?e.duration:null,isImportant:!!e.isImportant,recurrence:n};return K0.safeParse(r).success,r}const da=class da{constructor(){Hn(this,"cachedTasksMap",new Map);Hn(this,"listeners",new Map);Hn(this,"unsubscribes",new Map);Hn(this,"currentWorkspaceId",null)}static getInstance(){return da.instance||(da.instance=new da),da.instance}notifyListeners(e){const n=this.cachedTasksMap.get(e)||[],r=this.listeners.get(e);if(r){const s=[...n];r.forEach(o=>o(s))}}reset(e){var n;e?((n=this.unsubscribes.get(e))==null||n(),this.unsubscribes.delete(e),this.listeners.delete(e),this.cachedTasksMap.delete(e)):(this.unsubscribes.forEach(r=>r()),this.unsubscribes.clear(),this.listeners.clear(),this.cachedTasksMap.clear()),this.currentWorkspaceId=null}getTask(e,n){const r=this.cachedTasksMap.get(e);return r==null?void 0:r.find(s=>s.id===n)}getTasks(e){return this.cachedTasksMap.get(e)||[]}isInitialized(e){return this.cachedTasksMap.has(e)}setCache(e,n){this.cachedTasksMap.set(e,n),this.notifyListeners(e)}subscribe(e,n,r,s){if(!e||!n)return r([]),()=>{};this.currentWorkspaceId=n,this.listeners.has(n)||this.listeners.set(n,new Set);const o=this.listeners.get(n);o.add(r);const l=this.cachedTasksMap.get(n);if(l&&queueMicrotask(()=>r([...l])),!this.unsubscribes.has(n)){const u=We.tasks(e,n),d=Ro(mt(Fe,u)),m=Oa(d,y=>{const w=y.docs.map(E=>XF(E.id,E.data())),x=this.cachedTasksMap.get(n);x&&zV(x,w)||(this.cachedTasksMap.set(n,w),this.notifyListeners(n))},y=>{console.error("[Tasks] Subscription error:",y),s&&s(y)});this.unsubscribes.set(n,m)}return()=>{if(o.delete(r),o.size===0){const u=this.unsubscribes.get(n);u&&(u(),this.unsubscribes.delete(n))}}}};Hn(da,"instance");let Ey=da;const Jn=Ey.getInstance();function e6(t,e){return Jn.getTask(t,e)}function t6(t){return Jn.getTasks(t)}function n6(t){return Jn.isInitialized(t)}function r6(t,e,n,r){return Jn.subscribe(t,e,n,r)}function YI(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!==void 0))}async function s6(t,e,n){const r=new Map;n.forEach((o,l)=>r.set(o,l));const s=Jn.getTasks(e);if(s&&s.length>0){const o=s.map(l=>{const u=r.get(l.id);return u!==void 0?{...l,order:u}:l});o.sort((l,u)=>{const d=l.order??Number.MAX_SAFE_INTEGER,m=u.order??Number.MAX_SAFE_INTEGER;return d-m}),Jn.setCache(e,o)}return Us(async()=>{const o=We.tasks(t,e),l=[];for(let u=0;u<n.length;u+=500)l.push(n.slice(u,u+500));for(const u of l){const d=O0(Fe);u.forEach(m=>{const y=r.get(m),w=An(Fe,o,m);d.update(w,{order:y})}),await d.commit()}})}async function JI(t,e,n){return Us(async()=>{const r=We.tasks(t,e),s=YI({...n});return s.dueDate&&(s.dueDate=ZI(s.dueDate)),delete s.id,await $r(mt(Fe,r),{...s,ownerId:t,status:"todo",createdAt:gs()})})}async function i6(t,e,n,r){const s=Jn.getTasks(e),o=s==null?void 0:s.find(l=>l.id===n);if(s){const l=s.map(u=>u.id===n?{...u,status:r,completedAt:r==="completed"?new Date:void 0}:u);Jn.setCache(e,l)}if(r==="completed"&&(o!=null&&o.recurrence)&&o.recurrence.type!=="none"){const l=ZF(o.dueDate??null,o.recurrence);if(l){const u={title:o.title,description:o.description,projectId:o.projectId,labelIds:o.labelIds,timeBlockId:o.timeBlockId,duration:o.duration,isImportant:o.isImportant,recurrence:o.recurrence,dueDate:l,status:"todo"};JI(t,e,u).catch(d=>console.error("Failed to create recurring task:",d))}}return Us(async()=>{const l=We.tasks(t,e),u={status:r};r==="completed"?u.completedAt=gs():u.completedAt=null,await yc(An(Fe,l,n),u)},{onFinalFailure:()=>{s&&Jn.setCache(e,s),Nt.error("")}})}async function o6(t,e,n,r){const s=Jn.getTasks(e);if(s){const o=s.map(l=>l.id===n?{...l,...r}:l);Jn.setCache(e,o)}return Us(async()=>{const o=We.tasks(t,e),l=YI({...r});l.dueDate!==void 0&&(l.dueDate=ZI(l.dueDate)),await yc(An(Fe,o,n),l)},{onFinalFailure:()=>{s&&Jn.setCache(e,s),Nt.error("")}})}async function a6(t,e,n){const r=Jn.getTasks(e);if(r){const s=r.filter(o=>o.id!==n);Jn.setCache(e,s)}return Us(async()=>{const s=We.tasks(t,e);await vc(An(Fe,s,n))},{onFinalFailure:()=>{r&&Jn.setCache(e,r),Nt.error("")}})}const Ra=()=>bc(Ir.getState().language).t;function kd(){var n;const t=(n=Ge.currentUser)==null?void 0:n.uid,e=Hr();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}async function XI(t){try{const{userId:e,workspaceId:n}=kd(),s=K0.partial().required({title:!0}).safeParse(t);s.success||console.warn("[addTask] Validation warning:",s.error.flatten()),await JI(e,n,t)}catch(e){throw console.error("Failed to add task:",e),Nt.error(Ra()("msg.task.create_fail")),e}}async function J0(t,e){try{const{userId:n,workspaceId:r}=kd(),s=K0.partial().safeParse(e);s.success||console.warn("[updateTask] Validation warning:",s.error.flatten()),await o6(n,r,t,e)}catch(n){throw console.error("Failed to update task:",n),Nt.error(Ra()("msg.task.update_fail")),n}}async function l6(t){try{const{userId:e,workspaceId:n}=kd();await s6(e,n,t)}catch(e){throw console.error("Failed to reorder tasks:",e),Nt.error(Ra()("msg.task.update_fail")),e}}async function c6(t){try{const{userId:e,workspaceId:n}=kd();await a6(e,n,t),Nt.success(Ra()("msg.task.delete_success"))}catch(e){throw console.error("Failed to delete task:",e),Nt.error(Ra()("msg.task.delete_fail")),e}}async function u6(t,e){try{const{userId:n,workspaceId:r}=kd(),s=e6(r,t),l=((s==null?void 0:s.status)||e||"todo")==="completed"?"todo":"completed";await i6(n,r,t,l),l==="completed"&&Nt.success(Ra()("msg.task.complete_success"))}catch(n){throw console.error("Failed to toggle status:",n),Nt.error(Ra()("msg.task.status_update_fail")),n}}function d6(t,e,n){const r=Ge.currentUser;return!r||!t?(typeof e=="function"&&e([]),()=>{}):r6(r.uid,t,e,n)}const h6=t=>{const e=t||Hr();return e?t6(e):[]},f6=t=>{const e=t||Hr();return e?n6(e):!1},Ec=({message:t,id:e,className:n})=>t?p.jsxs("div",{id:e,role:"alert",className:`p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center justify-center gap-2 ${n||""}`,children:[p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),p.jsx("span",{children:t})]}):null,zx='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',Do=({isOpen:t,onClose:e,title:n,children:r,className:s,overlayClassName:o,zIndex:l=100,size:u="md"})=>{const{t:d}=ft(),m=O.useRef(null),y={sm:"max-w-full sm:max-w-sm",md:"max-w-full sm:max-w-lg",lg:"max-w-full sm:max-w-3xl",xl:"max-w-full sm:max-w-5xl",full:"max-w-full m-0 sm:m-4 h-[100dvh] sm:h-[calc(100vh-2rem)]"};return O.useEffect(()=>{const w=E=>{E.key==="Escape"&&e()},x=E=>{if(E.key!=="Tab"||!m.current)return;const N=m.current.querySelectorAll(zx);if(N.length===0){E.preventDefault();return}const I=N[0],S=N[N.length-1];E.shiftKey?document.activeElement===I&&(E.preventDefault(),S.focus()):document.activeElement===S&&(E.preventDefault(),I.focus())};if(t){window.addEventListener("keydown",w),window.addEventListener("keydown",x),document.body.style.overflow="hidden";const E=setTimeout(()=>{var I;const N=(I=m.current)==null?void 0:I.querySelectorAll(zx);N&&N.length>0?N[0].focus():m.current&&m.current.focus()},50);return()=>clearTimeout(E)}return()=>{window.removeEventListener("keydown",w),window.removeEventListener("keydown",x),document.body.style.overflow=""}},[t,e]),t?mo.createPortal(p.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-0 sm:p-4",style:{zIndex:l},role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,children:[p.jsx("div",{className:Se("fixed inset-0 backdrop-blur-sm transition-opacity",o??"bg-black/50"),onClick:e,"aria-hidden":"true"}),p.jsxs("div",{ref:m,tabIndex:-1,className:Se("relative bg-white dark:bg-gray-800 rounded-none sm:rounded-xl shadow-md w-full overflow-hidden flex flex-col outline-none max-h-[100dvh] sm:max-h-[90vh]",y[u],s),children:[n&&p.jsxs("div",{className:"px-3 py-2 sm:px-modal sm:py-3 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[p.jsx("h3",{id:"modal-title",className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white truncate",children:n}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 shrink-0","aria-label":d("close"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-modal custom-scrollbar",children:r})]})]}),document.body):null},ef=({title:t,items:e,selectedItems:n,onToggle:r,labelFn:s=o=>o.name??o.id})=>p.jsxs("div",{className:"flex flex-col min-h-[10rem] max-h-64 border border-gray-100 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-900",children:[p.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700 text-xs font-bold text-gray-500 uppercase tracking-wider shrink-0",children:t}),p.jsx("div",{className:"p-2 overflow-y-auto space-y-1 custom-scrollbar flex-1",children:e.map(o=>{const l=o.id||o.toString(),u=n.includes(l),d=`filter-${t.replace(/ /g,"-")}-${l}`,m=s(o);return p.jsxs("div",{className:"flex items-center px-2 py-1.5 rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",onClick:()=>r(l),children:[p.jsx("input",{id:d,type:"checkbox",checked:u,onChange:()=>{},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer","aria-label":`${t}: ${m}`}),p.jsx("label",{htmlFor:d,className:"ml-2 text-sm text-gray-700 dark:text-gray-300 truncate flex-1 cursor-pointer pointer-events-none",children:m})]},l)})})]}),wf="none",p6=t=>{const e=Z0(t);return{project:e.projects,timeblock:e.timeBlocks.map(n=>n==="null"||n==="none"?wf:n),duration:e.durations.map(n=>n.toString()),date:e.dates}},m6=[30,45,60,75,90],g6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=ft(),{closeModal:o}=gn(),l=!!t,u=e,d=!!(u!=null&&u.id),{projects:m}=Ip(),{timeBlocks:y}=xd(),{workspaceId:w}=Sr(),[x,E]=O.useState(""),[N,I]=O.useState({project:[],timeblock:[],duration:[],date:[]}),[S,V]=O.useState(!1),[W,U]=O.useState(null),G=Le.useRef(null);O.useEffect(()=>{l&&(E((u==null?void 0:u.name)||""),I(p6((u==null?void 0:u.query)||"")),U(null),V(!1))},[l,u]),O.useEffect(()=>{var k;W&&((k=G.current)==null||k.focus())},[W]);const Z=(k,R)=>{I(P=>{const D=P[k],M=D.includes(R)?D.filter(j=>j!==R):[...D,R];return{...P,[k]:M}})},K=O.useCallback(async()=>{const k=x.trim();if(!k){U(s("validation.filter_name_required"));return}const R=dF({projects:N.project,timeBlocks:N.timeblock.map(P=>P===wf?"null":P),durations:N.duration.map(Number),dates:N.date});if(!R){U(s("validation.filter_condition_required"));return}V(!0),U(null);try{if(!w){U(s("validation.workspace_required")),V(!1);return}const P={name:k,query:R,type:"custom"};d&&(u!=null&&u.id)?await _F(w,u.id,P):await vF({...P,workspaceId:w}),o()}catch(P){U(s("validation.save_fail")+": "+(P.message||"Error")),V(!1)}},[x,N,d,u,o,s]),A=k=>{k.key==="Enter"&&!k.nativeEvent.isComposing&&(!S&&x.trim()&&K(),k.preventDefault())};return l?p.jsx(Do,{isOpen:l,onClose:o,title:s(d?"modal.edit":"modal.create"),className:"max-w-4xl",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"filter-name-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s("filter")}),p.jsx("input",{ref:G,id:"filter-name-input",name:"filterName",type:"text",value:x,onChange:k=>E(k.target.value),onKeyDown:A,placeholder:s("modal.filter_name_placeholder"),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg outline-none focus:ring-2 focus:ring-blue-500/20 dark:text-white",autoFocus:!0})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(ef,{title:s("project"),items:m,selectedItems:N.project,onToggle:k=>Z("project",k)}),p.jsx(ef,{title:s("timeblock"),items:[...y,{id:wf,name:s("sidebar.unassigned")}],selectedItems:N.timeblock,onToggle:k=>Z("timeblock",k),labelFn:k=>k.id===wf||!k.start?k.name:`${k.start}-${k.end}`}),p.jsx(ef,{title:s("modal.duration"),items:m6.map(k=>({id:k.toString(),name:`${k} min`})),selectedItems:N.duration,onToggle:k=>Z("duration",k)}),p.jsx(ef,{title:s("modal.due_date"),items:[{id:"today",name:s("date_options.today")},{id:"tomorrow",name:s("date_options.tomorrow")},{id:"week",name:s("date_options.week")},{id:"next-week",name:s("date_options.next_week")}],selectedItems:N.date,onToggle:k=>Z("date",k)})]}),p.jsx(Ec,{message:W}),p.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[p.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition",children:s("modal.cancel")}),p.jsx("button",{onClick:K,disabled:S,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg transition-colors disabled:opacity-50",children:S?"...":s(d?"modal.save":"modal.create")})]})]})}):null},y6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=ft(),{closeModal:o}=gn(),l=!!t,u=e,d=!!(u!=null&&u.id),{workspaceId:m}=Sr(),[y,w]=O.useState(""),[x,E]=O.useState("#42A5F5"),[N,I]=O.useState(!1),[S,V]=O.useState(null),W=Le.useRef(null);O.useEffect(()=>{l&&(w((u==null?void 0:u.name)||""),E((u==null?void 0:u.color)||hi[Math.floor(Math.random()*hi.length)].value),V(null),I(!1))},[l,u]),O.useEffect(()=>{var K;S&&((K=W.current)==null||K.focus())},[S]);const U=O.useCallback(async()=>{const K=y.trim();if(!K){V(s("validation.label_name_required"));return}I(!0),V(null);try{if(!m){V(s("validation.label_workspace_required")),I(!1);return}d&&(u!=null&&u.id)?await RF(m,u.id,{name:K,color:x}):await NF(m,K,x),o()}catch(A){V(s("validation.save_fail")+": "+(A.message||"Error")),I(!1)}},[y,x,d,u,o,s]),G=O.useCallback(async()=>{if(u!=null&&u.id&&confirm(s("modal.label_delete_confirm").replace("{name}",u.name))){I(!0);try{m&&(u!=null&&u.id)&&await PF(m,u.id),o()}catch{V(s("validation.delete_fail")),I(!1)}}},[u,o,s]),Z=K=>{K.key==="Enter"&&!K.nativeEvent.isComposing&&(!N&&y.trim()&&U(),K.preventDefault())};return l?p.jsx(Do,{isOpen:l,onClose:o,className:"max-w-sm",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full flex-shrink-0 border-2 border-gray-100 dark:border-gray-700 shadow-sm",style:{backgroundColor:x}}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{htmlFor:"label-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1",children:s("modal.label_name")}),p.jsx("input",{ref:W,id:"label-name-input",name:"labelName",type:"text",value:y,onChange:K=>w(K.target.value),onKeyDown:Z,placeholder:s(d?"modal.label_name_placeholder":"modal.label_create_placeholder"),className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600 p-0",autoFocus:!0,"aria-label":s("modal.label_name"),"aria-invalid":!!S,"aria-describedby":S?"label-error-msg":void 0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:s("modal.theme_color")}),p.jsx("div",{className:"flex flex-wrap gap-2",children:hi.map(K=>p.jsx("button",{type:"button",onClick:()=>E(K.value),className:Se("w-6 h-6 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",x===K.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800":""),style:{backgroundColor:K.value},"aria-label":s(`colors.${K.key}`),"aria-pressed":x===K.value},K.value))})]}),p.jsx(Ec,{message:S}),p.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.jsx("div",{className:"flex items-center gap-2",children:d&&p.jsx("button",{onClick:G,disabled:N,className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50","aria-label":s("modal.delete_label"),title:s("modal.delete_label"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:o,disabled:N,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:s("modal.cancel")}),p.jsx("button",{onClick:U,disabled:N||!y.trim(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s(N?"saving":d?"modal.save":"modal.create")})]})]})]})}):null},v6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=ft(),{closeModal:o}=gn(),{currentWorkspaceId:l}=zs(),u=!!t,d=e,m=!!(d!=null&&d.id),[y,w]=O.useState(""),[x,E]=O.useState("#7E57C2"),[N,I]=O.useState(!1),[S,V]=O.useState(null),W=Le.useRef(null);O.useEffect(()=>{u&&(w((d==null?void 0:d.name)||""),E((d==null?void 0:d.color)||hi[3].value),V(null),I(!1))},[u,d]),O.useEffect(()=>{var K;S&&((K=W.current)==null||K.focus())},[S]);const U=O.useCallback(async()=>{const K=y.trim();if(!K){V(s("validation.project_name_required"));return}if(!l&&!m){V(s("validation.workspace_required"));return}I(!0),V(null);try{m&&(d!=null&&d.id)?await rF(d.id,{name:K,color:x}):l&&await nF(K,l,x),o()}catch(A){V(s("validation.save_fail")+": "+(A.message||"Error")),I(!1)}},[y,x,m,d,l,o,s]),G=O.useCallback(async()=>{if(d!=null&&d.id&&confirm(s("modal.project_delete_confirm").replace("{name}",d.name))){I(!0);try{await GI(d.id),o()}catch{V(s("validation.delete_fail")),I(!1)}}},[d,o,s]),Z=K=>{K.key==="Enter"&&!K.nativeEvent.isComposing&&(!N&&y.trim()&&U(),K.preventDefault())};return u?p.jsx(Do,{isOpen:u,onClose:o,className:"max-w-sm",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-500 shrink-0",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"project-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1",children:s("modal.project_name")}),p.jsx("input",{ref:W,id:"project-name-input",name:"projectName",type:"text",value:y,onChange:K=>w(K.target.value),onKeyDown:Z,placeholder:s("modal.project_name_placeholder"),className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600 p-0",autoFocus:!0,"aria-describedby":S?"project-error-msg":void 0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:s("modal.theme_color")}),p.jsx("div",{className:"flex flex-wrap gap-2",children:hi.map(K=>p.jsx("button",{type:"button",onClick:()=>E(K.value),className:Se("w-6 h-6 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",x===K.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800":""),style:{backgroundColor:K.value},"aria-label":s(`colors.${K.key}`),"aria-pressed":x===K.value},K.value))})]}),p.jsx(Ec,{message:S,id:"project-error-msg"}),p.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.jsx("div",{className:"flex items-center gap-2",children:m&&p.jsx("button",{onClick:G,disabled:N,className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50","aria-label":s("modal.delete_project"),title:s("modal.delete_project"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:o,disabled:N,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:s("modal.cancel")}),p.jsx("button",{onClick:U,disabled:N,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N?"...":s(m?"modal.save":"modal.create")})]})]})]})}):null},uu=({title:t,children:e,defaultOpen:n=!1,icon:r,className:s})=>{const[o,l]=O.useState(n);return p.jsxs("section",{className:Se("border border-gray-200 dark:border-gray-700/50 rounded-xl overflow-hidden",s),children:[p.jsxs("button",{onClick:()=>l(!o),className:"w-full flex items-center justify-between p-4 bg-gray-50/50 dark:bg-gray-800/30 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors text-left",type:"button","aria-expanded":o,"aria-controls":`accordion-panel-${t.replace(/\s+/g,"-").toLowerCase()}`,children:[p.jsxs("div",{className:"flex items-center gap-3",children:[r&&p.jsx("span",{className:"text-lg",children:r}),p.jsx("h4",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:t})]}),p.jsx("svg",{className:Se("w-4 h-4 text-gray-400 transition-transform duration-200",o&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p.jsx("div",{id:`accordion-panel-${t.replace(/\s+/g,"-").toLowerCase()}`,className:Se("transition-all duration-100 ease-in-out overflow-hidden bg-white dark:bg-transparent",o?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"),children:p.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700/30",children:e})})]})},_6=()=>{const{t}=ft(),{user:e}=G0(),[n,r]=O.useState(""),[s,o]=O.useState(""),[l,u]=O.useState(!1),[d,m]=O.useState(!1),[y,w]=O.useState(null);if(!e)return p.jsx("div",{className:"text-center text-gray-500",children:t("settings_modal.account.not_logged_in")});const x=e.isAnonymous,E=async I=>{I.preventDefault(),m(!0),w(null);try{const S=Pa.credential(n,s);await mR(e,S),Nt.success(t("settings_modal.account.register_success"))}catch(S){console.error("Link account error:",S);let V=t("settings_modal.account.register_fail");S.code==="auth/email-already-in-use"&&(V=t("settings_modal.account.already_in_use")),S.code==="auth/weak-password"&&(V=t("settings_modal.account.weak_password")),w(V)}finally{m(!1)}},N=async()=>{confirm(t("settings_modal.account.logout_confirm"))&&(await bE(Ge),window.location.reload())};return p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-2xl p-6 flex flex-col sm:flex-row items-center gap-8 sm:gap-6 border border-gray-100 dark:border-gray-700",children:[p.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-3xl shrink-0",children:x?"":""}),p.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:x?t("settings_modal.account.guest_user"):e.displayName||t("settings_modal.account.registered_user")}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono mb-4 break-all",children:x?`ID: ${e.uid.slice(0,8)}...`:e.email}),!x&&p.jsx("button",{onClick:N,className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 text-sm font-bold px-4 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border border-transparent hover:border-red-100 dark:hover:border-red-900/30",children:t("settings_modal.account.logout")})]})]}),x?p.jsxs("div",{className:"border border-blue-200 dark:border-blue-800 bg-blue-50/50 dark:bg-blue-900/10 rounded-2xl p-8 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:p.jsx("svg",{className:"w-32 h-32 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),p.jsxs("div",{className:"relative",children:[p.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," ",t("settings_modal.account.persist_account")]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6 leading-relaxed whitespace-pre-wrap",children:t("settings_modal.account.persist_desc")}),p.jsxs("form",{onSubmit:E,className:"space-y-4 max-w-md",children:[y&&p.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-lg font-medium",children:y}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"account-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:t("settings_modal.account.email_label")}),p.jsx("input",{id:"account-email",type:"email",required:!0,value:n,onChange:I=>r(I.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"mail@example.com",autoComplete:"email"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"account-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:t("settings_modal.account.password_label")}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{id:"account-password",type:l?"text":"password",required:!0,minLength:6,value:s,onChange:I=>o(I.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all pr-12",placeholder:"",autoComplete:"new-password"}),p.jsx("button",{type:"button",onClick:()=>u(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none p-1","aria-label":t(l?"settings_modal.account.hide_password":"settings_modal.account.show_password"),children:l?p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):p.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),p.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-colors flex items-center justify-center gap-2",children:d?t("settings_modal.account.registering"):p.jsxs(p.Fragment,{children:[t("settings_modal.account.register"),p.jsx("span",{children:""})]})})]})]})]}):p.jsx("div",{className:"text-center py-8 text-gray-400",children:p.jsx("p",{children:t("settings_modal.account.registered_msg")})})]})},tf=({active:t,onClick:e,label:n,icon:r})=>p.jsxs("button",{onClick:e,className:Se("flex items-center gap-2 px-4 py-2 text-sm rounded-lg transition-all whitespace-nowrap min-w-0","md:w-full md:justify-start md:text-left md:py-2","flex-col w-full justify-center py-3 text-[10px] gap-1 rounded-none md:rounded-lg md:text-sm md:flex-row md:gap-3",t?"bg-white dark:bg-gray-800 shadow-sm text-blue-600 dark:text-blue-400 font-bold border-t-2 md:border-t-0 md:border md:border-gray-100 dark:md:border-gray-700 border-blue-500 md:border-transparent":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-200 border-t-2 md:border-t-0 border-transparent"),children:[p.jsx("span",{className:"text-lg md:text-base",children:r}),p.jsx("span",{className:"truncate font-medium",children:n})]}),w6=({isOpen:t,zIndex:e,overlayClassName:n})=>{const{t:r}=ft(),{closeModal:s}=gn(),{themeMode:o,setThemeMode:l,density:u,setDensity:d,fontSize:m,setFontSize:y,fontEn:w,setFontEn:x,fontJp:E,setFontJp:N,language:I,setLanguage:S}=Ir(),{currentWorkspaceId:V}=zs(),[W,U]=O.useState("appearance"),[G,Z]=O.useState(!1),K=!!t;return p.jsx(Do,{isOpen:K,onClose:s,title:r("settings_modal.title"),className:"w-full max-w-4xl h-[90vh] md:h-[85vh] p-0 overflow-hidden",zIndex:e,overlayClassName:n,children:p.jsxs("div",{className:"flex flex-col md:flex-row h-full",children:[p.jsx("div",{className:"order-last md:order-first w-full md:w-64 bg-white dark:bg-gray-900 md:bg-gray-50/50 md:dark:bg-gray-900/50 border-t md:border-t-0 md:border-r border-gray-200 dark:border-gray-700 shrink-0 z-10",children:p.jsxs("div",{className:"flex flex-row md:flex-col justify-around md:justify-start md:p-4 md:space-y-2 pb-safe md:pb-4",children:[p.jsx(tf,{active:W==="general",onClick:()=>U("general"),label:r("settings_modal.tabs.general"),icon:""}),p.jsx(tf,{active:W==="appearance",onClick:()=>U("appearance"),label:r("settings_modal.tabs.appearance"),icon:""}),p.jsx(tf,{active:W==="account",onClick:()=>U("account"),label:r("settings_modal.tabs.account"),icon:""}),p.jsx(tf,{active:W==="advanced",onClick:()=>U("advanced"),label:r("settings_modal.tabs.advanced"),icon:""})]})}),p.jsxs("div",{className:"flex-1 p-4 md:p-8 overflow-y-auto custom-scrollbar bg-white dark:bg-gray-900 order-first md:order-last relative",children:[W==="appearance"&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx(uu,{title:r("settings_modal.appearance.theme"),icon:"",defaultOpen:!1,children:p.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","system"].map(A=>p.jsx("button",{onClick:()=>l(A),className:Se("p-3 border rounded-xl text-sm font-medium transition-all",o===A?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-white dark:hover:bg-gray-800 bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400"),children:p.jsx("span",{className:"capitalize",children:r(`settings_modal.options.theme.${A}`)})},A))})}),p.jsx(uu,{title:r("settings_modal.appearance.density"),icon:"",defaultOpen:!1,children:p.jsx("div",{className:"space-y-3",children:["compact","normal","comfortable","spacious"].map(A=>p.jsxs("label",{htmlFor:`density-${A}`,className:Se("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors",u===A?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-transparent hover:bg-white dark:hover:bg-gray-800"),children:[p.jsx("div",{className:Se("w-4 h-4 rounded-full border flex items-center justify-center",u===A?"border-blue-500 bg-blue-500":"border-gray-300"),children:u===A&&p.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),p.jsx("input",{id:`density-${A}`,type:"radio",name:"density",checked:u===A,onChange:()=>d(A),className:"hidden"}),p.jsx("span",{className:"capitalize text-sm font-medium text-gray-700 dark:text-gray-300",children:r(`settings_modal.options.density.${A}`)})]},A))})}),p.jsx(uu,{title:r("settings_modal.appearance.font_size"),icon:"Aa",defaultOpen:!1,children:p.jsx("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:["sm","base","md","lg","xl"].map(A=>p.jsx("button",{onClick:()=>y(A),className:Se("flex-1 py-1.5 px-3 rounded text-sm font-medium transition-all",m===A?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:A},A))})}),p.jsx(uu,{title:r("settings_modal.appearance.fonts"),icon:"Tt",defaultOpen:!1,children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"settings-font-en",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:r("settings_modal.appearance.font_en")}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{id:"settings-font-en",name:"fontEn",value:w,onChange:A=>x(A.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none relative z-10 bg-transparent",children:At.FONTS.EU.map(A=>p.jsx("option",{value:A.value,children:A.label},A.value))}),p.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 z-0",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"settings-font-jp",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:r("settings_modal.appearance.font_jp")}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{id:"settings-font-jp",name:"fontJp",value:E,onChange:A=>N(A.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none relative z-10 bg-transparent",children:At.FONTS.JP.map(A=>p.jsx("option",{value:A.value,children:A.label},A.value))}),p.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 z-0",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})})]}),W==="general"&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-800",children:[p.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," ",r("settings_modal.backup.title")]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:r("settings_modal.backup.description")}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[p.jsxs("button",{onClick:async()=>{if(!(!Ge.currentUser||!V))try{const A=await fF(Ge.currentUser.uid,V),k=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),R=URL.createObjectURL(k),P=document.createElement("a");P.href=R,P.download=`taskmg-backup-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(R)}catch(A){console.error(A),alert(r("settings_modal.backup.create_fail"))}},className:"btn-premium w-full sm:w-auto text-sm flex items-center justify-center gap-2 bg-white text-blue-600 border border-blue-200 hover:bg-blue-50 shadow-sm",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),p.jsx("span",{className:"inline",children:r("settings_modal.backup.create")})]}),p.jsxs("div",{className:"relative w-full sm:w-auto",children:[p.jsx("input",{type:"file",accept:".json",className:"hidden",id:"backup-import-input",onChange:async A=>{var P;const k=(P=A.target.files)==null?void 0:P[0];if(!k||!Ge.currentUser||!V)return;if(!window.confirm(r("settings_modal.backup.import_confirm"))){A.target.value="";return}const R=new FileReader;R.onload=async D=>{var M;try{const j=JSON.parse((M=D.target)==null?void 0:M.result),Ce=await pF(Ge.currentUser.uid,V,j);alert(r("settings_modal.backup.import_success").replace("{tasks}",String(Ce.tasksCount)).replace("{projects}",String(Ce.projectsCount))),window.location.reload()}catch(j){console.error(j),alert(r("settings_modal.backup.import_fail"))}},R.readAsText(k),A.target.value=""}}),p.jsxs("label",{htmlFor:"backup-import-input",className:"w-full sm:w-auto px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-bold rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer shadow-sm text-sm flex items-center justify-center gap-2 transition-colors",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),r("settings_modal.backup.import")]})]})]})]}),p.jsx(uu,{title:r("settings_modal.language.title"),icon:"",defaultOpen:!1,children:p.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{code:"ja",label:""},{code:"en",label:"English"}].map(A=>p.jsxs("button",{onClick:()=>S(A.code),className:Se("p-3 border rounded-xl text-sm font-medium transition-all",I===A.code?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-white dark:hover:bg-gray-800 bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400"),children:[p.jsx("span",{className:"text-xl mr-2",children:A.code==="ja"?"":""}),A.label]},A.code))})})]}),W==="account"&&p.jsx(_6,{}),W==="advanced"&&p.jsx("div",{className:"flex flex-col gap-4",children:p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-xl border border-red-100 dark:border-red-900/30",children:[p.jsxs("h4",{className:"font-bold text-red-700 dark:text-red-400 mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," ",r("settings_modal.maintenance.title")]}),p.jsx("p",{className:"text-sm text-red-600/80 dark:text-red-400/80 mb-4",children:r("settings_modal.maintenance.description")}),p.jsxs("label",{htmlFor:"backup-confirm-checkbox",className:"flex items-center gap-2 mb-4 cursor-pointer",children:[p.jsx("input",{id:"backup-confirm-checkbox",name:"backupConfirmed",type:"checkbox",className:"w-4 h-4 text-red-600 rounded border-red-300 focus:ring-red-500",checked:G,onChange:A=>Z(A.target.checked)}),p.jsx("span",{className:"text-sm font-bold text-red-700 dark:text-red-400",children:r("settings_modal.maintenance.confirm_backup")||""})]}),p.jsx("button",{onClick:async()=>{if(V&&confirm(r("settings_modal.maintenance.confirm_final")))try{const A=await jF(V);alert(r("settings_modal.maintenance.cleanup_success").replace("{count}",String(A))),A>0&&window.location.reload()}catch(A){console.error(A),alert(r("settings_modal.maintenance.cleanup_fail").replace("{error}",A.message))}},disabled:!G,className:"px-6 py-2.5 bg-red-600 hover:bg-red-700 disabled:bg-red-300 disabled:cursor-not-allowed text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:r("settings_modal.maintenance.cleanup_duplicate")})]})})]})]})})},b6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function x6(t){return t.replace(/[&<>"']/g,e=>b6[e]||e)}function k6(t){if(!t)return"";const e=t.split(`
`);let n=[],r=null;return e.forEach(s=>{const o=s.trimStart(),l=o.startsWith("* ")||o.startsWith("- "),u=/^\d+\.\s/.test(o),d=l||u;if(d){const m=u?"ol":"ul";if(r!==m){r&&n.push(`</${r}>`);const y=u?"list-decimal":"list-disc";n.push(`<${m} class="${y} ml-5 space-y-1">`),r=m}}else r&&(n.push(`</${r}>`),r=null);if(d){let m="";l?m=o.substring(2):m=o.replace(/^\d+\.\s/,"");const y=Sg(m);n.push(`<li>${y}</li>`)}else if(s.trim()){const m=s.match(/^(#{1,6})\s+(.+)$/);if(m){const y=m[1].length,w=Sg(m[2]),x={1:"text-2xl font-bold mb-3",2:"text-xl font-bold mb-2",3:"text-lg font-semibold mb-2",4:"text-base font-semibold mb-1",5:"text-sm font-semibold mb-1",6:"text-xs font-semibold mb-1"};n.push(`<h${y} class="${x[y]}">${w}</h${y}>`)}else n.push(`<p class="mb-2">${Sg(s)}</p>`)}else r&&(n.push(`</${r}>`),r=null)}),r&&n.push(`</${r}>`),n.join(`
`)}function Sg(t){return x6(t).replace(/\[(.*?)\]\((.*?)\)/g,(n,r,s)=>`<a href="${s.replace(/"/g,"&quot;")}" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300 underline font-medium">${r}</a>`)}const Ux={TODO:"todo"},E6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=ft(),{closeModal:o}=gn(),l=!!t,u=e,d=!(u!=null&&u.id)||u.id.startsWith("temp-"),{projects:m}=Ip(),{timeBlocks:y}=xd(),{customDurations:w}=Ir(),[x,E]=O.useState(""),[N,I]=O.useState(""),[S,V]=O.useState(null),[W,U]=O.useState(Ux.TODO),[G,Z]=O.useState(!1),[K,A]=O.useState(null),[k,R]=O.useState({type:"none",days:[]}),[P,D]=O.useState(null),[M,j]=O.useState(null),[Ce,nt]=O.useState(!1),[Qe,Ne]=O.useState(!1),X=O.useMemo(()=>[{value:"none",label:s("recurrence.none")},{value:"daily",label:s("recurrence.daily")},{value:"weekdays",label:s("recurrence.weekdays")},{value:"weekly",label:s("recurrence.weekly")},{value:"monthly",label:s("recurrence.monthly")}],[s]),pe=O.useMemo(()=>[s("days.sun"),s("days.mon"),s("days.tue"),s("days.wed"),s("days.thu"),s("days.fri"),s("days.sat")],[s]),[de,$]=O.useState(null);O.useEffect(()=>{var ne;if(u){E(u.title||""),I(u.description||""),V(u.projectId||null),U(u.status||Ux.TODO),Z(!!u.isImportant),D(u.timeBlockId||null),j(u.duration||null);const he=mn(u.dueDate);A(he);const rt=u.recurrence||{type:"none",days:[]};R(rt),rt!=null&&rt.type&&rt.type!=="none"&&!he&&A(YF(rt));const pt=!!(he||(rt==null?void 0:rt.type)!=="none"||u.timeBlockId||u.duration);Ne(pt||d),nt(!!((ne=u.description)!=null&&ne.trim()))}},[u,l]);const ee=O.useCallback(async()=>{if($(null),!x.trim()){$(s("validation.required"));return}if((k==null?void 0:k.type)==="weekly"&&(!k.days||k.days.length===0)){$(s("validation.select_days"));return}const ne={title:x.trim(),description:N.trim()??null,projectId:S==="none"?null:S,status:W,isImportant:G,dueDate:K?Tt.fromDate(K):null,recurrence:(k==null?void 0:k.type)==="none"?null:k,timeBlockId:P??null,duration:M??void 0};try{d?await XI({...ne,title:ne.title}):await J0(u.id,ne),o()}catch(he){console.error("Failed to save task",he),$(s("validation.save_fail"))}},[x,N,S,W,G,K,k,P,M,d,u,o,s]),ce=O.useCallback(async ne=>{if(ne==null||ne.preventDefault(),ne==null||ne.stopPropagation(),$(null),!(!(u!=null&&u.id)||d)&&confirm(s("modal.delete_confirm")))try{await c6(u.id),o()}catch(he){console.error("Failed to delete task",he),$(s("validation.delete_fail"))}},[u==null?void 0:u.id,d,o,s]),be=O.useCallback(ne=>{let he=[];ne==="weekly"?he=(k==null?void 0:k.days)||[]:ne==="weekdays"&&(he=[1,2,3,4,5]),R({type:ne,days:he})},[k==null?void 0:k.days]),De=O.useCallback(ne=>{const he=(k==null?void 0:k.days)||[],rt=he.includes(ne)?he.filter(pt=>pt!==ne):[...he,ne].sort((pt,yn)=>pt-yn);R({type:"weekly",days:rt})},[k==null?void 0:k.days]),Re=O.useMemo(()=>k6(N),[N]),Te=ne=>{ne.key==="Enter"&&!ne.nativeEvent.isComposing&&(ne.preventDefault(),ee())},Ue=ne=>{(ne.metaKey||ne.ctrlKey)&&ne.key==="Enter"&&(ne.preventDefault(),ee())};return l?p.jsx(Do,{isOpen:l,onClose:o,zIndex:n,className:"max-w-4xl h-[95vh] sm:h-[85vh] w-full mx-2 sm:mx-auto mt-4 sm:mt-0 pb-safe",overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col h-full",onKeyDown:Ue,children:[p.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-700 flex items-center gap-3 shrink-0",children:[p.jsx("input",{id:"task-title",name:"title",type:"text",value:x,onChange:ne=>E(ne.target.value),onKeyDown:Te,placeholder:s("task_detail.title_placeholder"),className:"flex-1 text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder:text-gray-400",autoFocus:!0,"aria-label":s("task_detail.title_placeholder")}),p.jsx("button",{onClick:()=>Z(!G),className:Se("p-2 rounded-full transition-colors",G?"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),title:G?"":"",children:p.jsx("svg",{className:"w-6 h-6",fill:G?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),p.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[p.jsx(Ec,{message:de,className:"mb-3"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 h-full",children:[p.jsxs("div",{className:"md:col-span-8 flex flex-col h-full min-h-[300px] bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("label",{className:"text-xs font-semibold text-gray-500 flex items-center gap-2 uppercase",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})," (Markdown)"]}),p.jsx("button",{type:"button",onClick:()=>nt(!Ce),className:"text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 px-3 py-1 rounded transition-colors text-xs font-medium","aria-label":Ce?"":"",children:Ce?"":""})]}),p.jsx("div",{className:"flex-1 relative",children:Ce?p.jsx("div",{className:"w-full h-full p-4 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm overflow-y-auto prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:Re||'<span class="text-gray-400"></span>'}}):p.jsx("textarea",{id:"task-description",name:"description",value:N,onChange:ne=>I(ne.target.value),placeholder:"...",className:"w-full h-full p-3 bg-gray-50 dark:bg-gray-900/50 border-0 rounded-lg outline-none text-sm transition-all resize-none leading-relaxed focus:ring-1 focus:ring-blue-500/50 text-gray-800 dark:text-gray-200 font-mono",autoFocus:!N,"aria-label":""})})]}),p.jsxs("div",{className:"md:col-span-4 space-y-4",children:[p.jsxs("details",{open:Qe,onToggle:ne=>Ne(ne.currentTarget.open),className:"group border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800",children:[p.jsxs("summary",{className:"flex items-center justify-between px-4 py-3 cursor-pointer list-none outline-none bg-gray-50 dark:bg-gray-700/30 rounded-t-lg group-[:not([open])]:rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700/50 focus:ring-2 focus:ring-inset focus:ring-blue-500",role:"button","aria-expanded":Qe,children:[p.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s("task_detail.schedule_label")]}),p.jsx("span",{className:"transform group-open:rotate-180 transition-transform text-gray-400",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),p.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-due-date",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.due_date_label")}),p.jsx("div",{className:"relative cursor-pointer",onClick:()=>{var he;const ne=document.getElementById("task-due-date");(he=ne==null?void 0:ne.showPicker)==null||he.call(ne)},children:p.jsx("input",{type:"date",id:"task-due-date",value:KF(K),onChange:ne=>A(GF(ne.target.value)),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm cursor-pointer"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-recurrence",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.recurrence_label")}),p.jsx("select",{id:"task-recurrence",value:(k==null?void 0:k.type)||"none",onChange:ne=>be(ne.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:X.map(ne=>p.jsx("option",{value:ne.value,children:ne.label},ne.value))})]}),((k==null?void 0:k.type)==="weekly"||(k==null?void 0:k.type)==="weekdays")&&p.jsxs("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700 animate-in fade-in slide-in-from-top-1 duration-200",children:[p.jsx("span",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:s("task_detail.recurrence_days")}),p.jsx("div",{className:"flex flex-wrap gap-2",children:pe.map((ne,he)=>{var rt;return p.jsxs("label",{htmlFor:`recurrence-day-${he}`,className:"flex items-center gap-1 cursor-pointer select-none",children:[p.jsx("input",{id:`recurrence-day-${he}`,name:`recurrenceDay${he}`,type:"checkbox",checked:((rt=k.days)==null?void 0:rt.includes(he))||!1,onChange:()=>De(he),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),p.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:ne})]},he)})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-timeblock",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.time_block_label")}),p.jsxs("select",{id:"task-timeblock",value:P||"",onChange:ne=>D(ne.target.value||null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:s("task_detail.time_block_unspecified")}),y.map(ne=>p.jsxs("option",{value:ne.id,children:[ne.start," - ",ne.end]},ne.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-duration",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.duration_label")}),p.jsxs("select",{id:"task-duration",value:M||"",onChange:ne=>j(ne.target.value?parseInt(ne.target.value,10):null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:s("task_detail.duration_none")}),w.map(ne=>p.jsxs("option",{value:ne,children:[ne," min"]},ne))]})]})]})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[p.jsx("label",{htmlFor:"task-project",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.project_label")}),p.jsxs("select",{id:"task-project",value:S||"none",onChange:ne=>V(ne.target.value==="none"?null:ne.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"none",children:s("task_detail.project_none")}),m.map(ne=>p.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]})]})]})]}),p.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center shrink-0",children:[!d&&p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("button",{type:"button",onClick:ce,className:"px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition flex items-center gap-1.5",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s("task_detail.delete_button")]})}),p.jsxs("div",{className:`flex gap-2 ${d?"ml-auto":""}`,children:[p.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition",children:s("modal.cancel")}),p.jsx("button",{type:"button",onClick:ee,className:"px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium transition-colors",children:s(d?"modal.create":"modal.save")})]})]})]})}):null};function Tc(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function T6(t,e){return t.reduce((n,r,s)=>{const o=e.get(r);return o&&(n[s]=o),n},Array(t.length))}function nf(t){return t!==null&&t>=0}function I6(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function S6(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const e1=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const o=Tc(e,r,n),l=e[s],u=o[s];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},rf={scaleX:1,scaleY:1},Ap=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:l}=t;const u=(e=o[n])!=null?e:r;if(!u)return null;if(s===n){const m=o[l];return m?{x:0,y:n<l?m.top+m.height-(u.top+u.height):m.top-u.top,...rf}:null}const d=C6(o,s,n);return s>n&&s<=l?{x:0,y:-u.height-d,...rf}:s<n&&s>=l?{x:0,y:u.height+d,...rf}:{x:0,y:0,...rf}};function C6(t,e,n){const r=t[e],s=t[e-1],o=t[e+1];return r?n<e?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const t1="Sortable",n1=Le.createContext({activeIndex:-1,containerId:t1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:e1,disabled:{draggable:!1,droppable:!1}});function Np(t){let{children:e,id:n,items:r,strategy:s=e1,disabled:o=!1}=t;const{active:l,dragOverlay:u,droppableRects:d,over:m,measureDroppableContainers:y}=Lk(),w=rd(t1,n),x=u.rect!==null,E=O.useMemo(()=>r.map(K=>typeof K=="object"&&"id"in K?K.id:K),[r]),N=l!=null,I=l?E.indexOf(l.id):-1,S=m?E.indexOf(m.id):-1,V=O.useRef(E),W=!I6(E,V.current),U=S!==-1&&I===-1||W,G=S6(o);hs(()=>{W&&N&&y(E)},[W,E,N,y]),O.useEffect(()=>{V.current=E},[E]);const Z=O.useMemo(()=>({activeIndex:I,containerId:w,disabled:G,disableTransforms:U,items:E,overIndex:S,useDragOverlay:x,sortedRects:T6(E,d),strategy:s}),[I,w,G.draggable,G.droppable,U,E,S,d,x,s]);return Le.createElement(n1.Provider,{value:Z},e)}const A6=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return Tc(n,r,s).indexOf(e)},N6=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:o,newIndex:l,previousItems:u,previousContainerId:d,transition:m}=t;return!m||!r||u!==o&&s===l?!1:n?!0:l!==s&&e===d},R6={duration:200,easing:"ease"},r1="transform",P6=Vs.Transition.toString({property:r1,duration:0,easing:"linear"}),j6={roleDescription:"sortable"};function D6(t){let{disabled:e,index:n,node:r,rect:s}=t;const[o,l]=O.useState(null),u=O.useRef(n);return hs(()=>{if(!e&&n!==u.current&&r.current){const d=s.current;if(d){const m=lc(r.current,{ignoreTransform:!0}),y={x:d.left-m.left,y:d.top-m.top,scaleX:d.width/m.width,scaleY:d.height/m.height};(y.x||y.y)&&l(y)}}n!==u.current&&(u.current=n)},[e,n,r,s]),O.useEffect(()=>{o&&l(null)},[o]),o}function X0(t){let{animateLayoutChanges:e=N6,attributes:n,disabled:r,data:s,getNewIndex:o=A6,id:l,strategy:u,resizeObserverConfig:d,transition:m=R6}=t;const{items:y,containerId:w,activeIndex:x,disabled:E,disableTransforms:N,sortedRects:I,overIndex:S,useDragOverlay:V,strategy:W}=O.useContext(n1),U=O6(r,E),G=y.indexOf(l),Z=O.useMemo(()=>({sortable:{containerId:w,index:G,items:y},...s}),[w,s,G,y]),K=O.useMemo(()=>y.slice(y.indexOf(l)),[y,l]),{rect:A,node:k,isOver:R,setNodeRef:P}=uc({id:l,data:Z,disabled:U.droppable,resizeObserverConfig:{updateMeasurementsFor:K,...d}}),{active:D,activatorEvent:M,activeNodeRect:j,attributes:Ce,setNodeRef:nt,listeners:Qe,isDragging:Ne,over:X,setActivatorNodeRef:pe,transform:de}=wA({id:l,data:Z,attributes:{...j6,...n},disabled:U.draggable}),$=cC(P,nt),ee=!!D,ce=ee&&!N&&nf(x)&&nf(S),be=!V&&Ne,De=be&&ce?de:null,Te=ce?De??(u??W)({rects:I,activeNodeRect:j,activeIndex:x,overIndex:S,index:G}):null,Ue=nf(x)&&nf(S)?o({id:l,items:y,activeIndex:x,overIndex:S}):G,ne=D==null?void 0:D.id,he=O.useRef({activeId:ne,items:y,newIndex:Ue,containerId:w}),rt=y!==he.current.items,pt=e({active:D,containerId:w,isDragging:Ne,isSorting:ee,id:l,index:G,items:y,newIndex:he.current.newIndex,previousItems:he.current.items,previousContainerId:he.current.containerId,transition:m,wasDragging:he.current.activeId!=null}),yn=D6({disabled:!pt,index:G,node:k,rect:A});return O.useEffect(()=>{ee&&he.current.newIndex!==Ue&&(he.current.newIndex=Ue),w!==he.current.containerId&&(he.current.containerId=w),y!==he.current.items&&(he.current.items=y)},[ee,Ue,w,y]),O.useEffect(()=>{if(ne===he.current.activeId)return;if(ne!=null&&he.current.activeId==null){he.current.activeId=ne;return}const mr=setTimeout(()=>{he.current.activeId=ne},50);return()=>clearTimeout(mr)},[ne]),{active:D,activeIndex:x,attributes:Ce,data:Z,rect:A,index:G,newIndex:Ue,items:y,isOver:R,isSorting:ee,isDragging:Ne,listeners:Qe,node:k,overIndex:S,over:X,setNodeRef:$,setActivatorNodeRef:pe,setDroppableNodeRef:P,setDraggableNodeRef:nt,transform:yn??Te,transition:vn()};function vn(){if(yn||rt&&he.current.newIndex===G)return P6;if(!(be&&!Zf(M)||!m)&&(ee||pt))return Vs.Transition.toString({...m,property:r1})}}function O6(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Kf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const L6=[et.Down,et.Right,et.Up,et.Left],ev=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:o,over:l,scrollableAncestors:u}}=e;if(L6.includes(t.code)){if(t.preventDefault(),!n||!r)return;const d=[];o.getEnabled().forEach(w=>{if(!w||w!=null&&w.disabled)return;const x=s.get(w.id);if(x)switch(t.code){case et.Down:r.top<x.top&&d.push(w);break;case et.Up:r.top>x.top&&d.push(w);break;case et.Left:r.left>x.left&&d.push(w);break;case et.Right:r.left<x.left&&d.push(w);break}});const m=TC({collisionRect:r,droppableRects:s,droppableContainers:d});let y=_k(m,"id");if(y===(l==null?void 0:l.id)&&m.length>1&&(y=m[1].id),y!=null){const w=o.get(n.id),x=o.get(y),E=x?s.get(x.id):null,N=x==null?void 0:x.node.current;if(N&&E&&w&&x){const S=Xf(N).some((K,A)=>u[A]!==K),V=s1(w,x),W=M6(w,x),U=S||!V?{x:0,y:0}:{x:W?r.width-E.width:0,y:W?r.height-E.height:0},G={x:E.left,y:E.top};return U.x&&U.y?G:Pu(G,U)}}}};function s1(t,e){return!Kf(t)||!Kf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function M6(t,e){return!Kf(t)||!Kf(e)||!s1(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}class V6 extends O.Component{constructor(n){super(n);Hn(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){jV(n,r.componentStack??void 0)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const n=Ir.getState().language,{t:r}=bc(n);return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:p.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[p.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:p.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),p.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:r("error_boundary.title")}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:r("error_boundary.description")}),p.jsxs("div",{className:"flex gap-3 justify-center",children:[p.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:r("error_boundary.retry")}),p.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:r("error_boundary.reload")})]}),!1]})})}return this.props.children}}const F6=({className:t})=>p.jsx("svg",{className:Se("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),z6=({className:t})=>p.jsx("svg",{className:Se("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),U6=({className:t})=>p.jsx("svg",{className:Se("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),B6=({children:t,containerId:e="portal-root"})=>{const n=document.getElementById(e)??document.body;return mo.createPortal(t,n)},i1=()=>p.jsxs("div",{className:"space-y-2 p-2",children:[p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),o1=({id:t,children:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:o,transition:l,isDragging:u}=X0({id:t}),d={transform:Vs.Transform.toString(o),transition:l,opacity:u?.5:1};return p.jsx("div",{ref:s,style:d,...n,...r,children:e})},Bx=Array.from({length:24},(t,e)=>String(e).padStart(2,"0")),$x=["00","15","30","45"],$6=({isOpen:t,zIndex:e,overlayClassName:n})=>{const{t:r}=ft(),{closeModal:s}=gn(),o=!!t,{timeBlocks:l}=xd(),{workspaceId:u}=Sr(),[d,m]=O.useState([]),[y,w]=O.useState(!1),[x,E]=O.useState(null),[N,I]=O.useState(null),S=Yf(ko(cc,{activationConstraint:{distance:5}}),ko(sd,{coordinateGetter:ev}));O.useEffect(()=>{o&&(m(l.sort((k,R)=>(k.order||0)-(R.order||0))),E(null),w(!1))},[o,l]);const V=()=>{if(d.length>=_f.TIME_BLOCK.MAX_COUNT)return;let k="09:00",R="10:00";if(d.length>0){const D=d[d.length-1];if(D.end){const[M,j]=D.end.split(":").map(Number);k=D.end;const Ce=(M+1)%24;R=`${String(Ce).padStart(2,"0")}:${String(j).padStart(2,"0")}`}}const P={id:`new-${Date.now()}`,start:k,end:R,color:hi[d.length%hi.length].value,order:d.length};m([...d,P])},W=async k=>{if(!k.startsWith("new-")){if(!confirm(r("time_block.delete_confirm")))return;try{u&&await QI(u,k)}catch{E(r("validation.delete_fail"));return}}m(d.filter(R=>R.id!==k))},U=(k,R)=>{m(d.map(P=>P.id===k?{...P,...R}:P))},G=k=>{I(k.active.id)},Z=k=>{const{active:R,over:P}=k;I(null),P&&R.id!==P.id&&m(D=>{const M=D.findIndex(Ce=>Ce.id===R.id),j=D.findIndex(Ce=>Ce.id===P.id);return Tc(D,M,j)})},K=async()=>{w(!0),E(null);try{for(const P of d){if(!P.start||!P.end)continue;const[D,M]=P.start.split(":").map(Number),[j,Ce]=P.end.split(":").map(Number);if(D*60+M>=j*60+Ce)throw new Error(r("time_block.error_invalid_time",{start:P.start,end:P.end}))}const k=[...d].sort((P,D)=>(P.start||"").localeCompare(D.start||""));for(let P=0;P<k.length-1;P++){const D=k[P],M=k[P+1];if(!D.end||!M.start)continue;const[j,Ce]=D.end.split(":").map(Number),[nt,Qe]=M.start.split(":").map(Number);if(nt*60+Qe<j*60+Ce)throw new Error(r("time_block.error_overlap",{range1:`${D.start}-${D.end}`,range2:`${M.start}-${M.end}`}))}const R=d.map((P,D)=>{var j;const M={...P,id:(j=P.id)!=null&&j.startsWith("new-")?null:P.id,order:D,name:`${P.start}-${P.end}`};if(!u)throw new Error("No workspace");return uF(u,M)});await Promise.all(R),await Promise.all(R),s()}catch(k){E(k.message||r("validation.save_fail")),w(!1)}};if(!o)return null;const A=N?d.find(k=>k.id===N):null;return p.jsx(Do,{isOpen:o,onClose:s,title:r("time_block.settings_title"),className:"max-w-2xl h-[600px]",zIndex:e,overlayClassName:n,children:p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-3 custom-scrollbar",children:[p.jsxs(np,{sensors:S,collisionDetection:Jf,onDragStart:G,onDragEnd:Z,children:[p.jsx(Np,{items:d.map(k=>k.id),strategy:Ap,children:d.map(k=>p.jsx(o1,{id:k.id,children:p.jsx(Wx,{block:k,onDelete:()=>W(k.id),onUpdate:R=>U(k.id,R),isOverlay:!1})},k.id))}),p.jsx(OA,{dropAnimation:null,modifiers:[],children:A?p.jsx("div",{style:{opacity:.9},children:p.jsx(Wx,{block:A,onDelete:()=>{},onUpdate:()=>{},isOverlay:!0})}):null})]}),d.length<_f.TIME_BLOCK.MAX_COUNT?p.jsxs("button",{onClick:V,disabled:d.length>=_f.TIME_BLOCK.MAX_COUNT,className:"w-full py-4 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl text-gray-400 hover:border-blue-500 hover:text-blue-500 hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-all font-medium text-sm flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),r("time_block.add_button")]}):p.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400 text-sm rounded-lg flex items-center justify-center gap-2 border border-yellow-100 dark:border-yellow-900/30",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r("time_block.max_limit")]}),p.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/40 rounded-lg flex items-center text-sm text-gray-500 dark:text-gray-400",children:[p.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-gray-400 mr-3 shadow-sm"}),p.jsx("span",{className:"font-bold mr-2 text-gray-700 dark:text-gray-300",children:r("time_block.unspecified")}),p.jsx("span",{className:"text-xs opacity-80",children:r("time_block.default_zone_desc")})]})]}),p.jsx(Ec,{message:x,className:"mb-4"}),p.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:p.jsx("button",{onClick:K,disabled:y,className:"px-8 py-2.5 bg-gray-900 hover:bg-gray-800 dark:bg-blue-600 dark:hover:bg-blue-500 text-white rounded-lg font-bold text-sm transition-colors disabled:bg-gray-400",children:r(y?"saving":"done")})})]})})},Wx=({block:t,onDelete:e,onUpdate:n,isOverlay:r})=>{const{t:s}=ft(),[o,l]=O.useState(!1),u=t.start||"09:00",d=t.end||"10:00",[m,y]=u.split(":"),[w,x]=d.split(":");return p.jsxs("div",{className:`flex items-center gap-4 p-2 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-sm group ${r?"shadow ring-2 ring-blue-500 opacity-90 cursor-grabbing":""}`,children:[p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>l(!o),className:"w-6 h-6 rounded-full shadow-sm ring-2 ring-transparent focus:ring-blue-400 ring-offset-2 dark:ring-offset-gray-900",style:{backgroundColor:t.color||"#3B82F6"},title:s("time_block.change_color")}),o&&p.jsxs(B6,{children:[p.jsx("div",{className:"fixed inset-0 z-[9999] bg-transparent",onClick:()=>l(!1)}),p.jsxs("div",{className:"fixed z-[10000] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow p-4 w-[280px]",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[p.jsx("h4",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase mb-3 tracking-wider",children:s("modal.theme_color")}),p.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:hi.map(E=>p.jsx("button",{onClick:()=>{n({color:E.value}),l(!1)},className:Se("w-8 h-8 rounded-full ring-2 ring-transparent hover:ring-blue-400 focus:outline-none",t.color===E.value&&"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800"),style:{backgroundColor:E.value},"aria-label":s(`colors.${E.key}`),"aria-pressed":t.color===E.value},E.value))})]})]})]}),p.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(sf,{options:Bx,value:m,onChange:E=>n({start:`${E}:${y}`})}),p.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),p.jsx(sf,{options:$x,value:y,onChange:E=>n({start:`${m}:${E}`})})]}),p.jsx("div",{className:"w-4 h-0.5 bg-gray-200 dark:bg-gray-700 rounded-full"}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(sf,{options:Bx,value:w,onChange:E=>n({end:`${E}:${x}`})}),p.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),p.jsx(sf,{options:$x,value:x,onChange:E=>n({end:`${w}:${E}`})})]})]}),p.jsx("button",{onClick:e,className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:s("modal.delete"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},sf=({options:t,value:e,onChange:n,label:r})=>{const{t:s}=ft();return p.jsx("select",{value:e,onChange:o=>n(o.target.value),className:"appearance-none px-2 py-1 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm font-mono font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-100 dark:focus:ring-blue-900 outline-none cursor-pointer","aria-label":r||s("time_block.time_select"),children:t.map(o=>p.jsx("option",{value:o,children:o},o))})},W6=({isOpen:t,data:e,zIndex:n})=>{const{t:r}=ft(),{closeModal:s}=gn(),o=!!t,l=e,u=!!(l!=null&&l.id),[d,m]=O.useState(""),[y,w]=O.useState(!1),[x,E]=O.useState(null),N=Le.useRef(null);O.useEffect(()=>{o&&(m((l==null?void 0:l.name)||""),E(null),w(!1))},[o,l]),O.useEffect(()=>{var V;x&&((V=N.current)==null||V.focus())},[x]);const I=O.useCallback(async()=>{const V=d.trim();if(!V){E(r("validation.workspace_name_required"));return}if(SV().some(G=>G.name===V&&G.id!==(l==null?void 0:l.id))){E(r("validation.workspace_duplicate"));return}w(!0),E(null);try{if(u&&(l!=null&&l.id))await RV(l.id,V);else{const G=await KI(V);G!=null&&G.id&&confirm(r("validation.workspace_confirm_switch"))&&HI(G.id)}s()}catch(G){E(r("validation.save_fail")+": "+(G.message||"Error")),w(!1)}},[d,u,l,s,r]),S=V=>{V.key==="Enter"&&!V.nativeEvent.isComposing&&I()};return o?p.jsx(Do,{isOpen:o,onClose:s,className:"max-w-md",children:p.jsxs("div",{className:"flex flex-col gap-6 max-h-[85vh] overflow-y-auto p-1",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"workspace-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:r(u?"modal.workspace_edit_title":"modal.workspace_create_title")}),p.jsx("input",{ref:N,id:"workspace-name-input",name:"workspaceName",type:"text",value:d,onChange:V=>m(V.target.value),onKeyDown:S,placeholder:r("modal.workspace_name_placeholder"),className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600",autoFocus:!0})]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:r(u?"modal.workspace_desc_edit":"modal.workspace_desc_create")}),p.jsx(Ec,{message:x}),p.jsxs("div",{className:"flex justify-end items-center pt-4 border-t border-gray-200 dark:border-gray-700 gap-3",children:[p.jsx("button",{onClick:s,disabled:y,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:r("modal.cancel")}),p.jsx("button",{onClick:I,disabled:y,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95",children:r(y?"saving":u?"modal.save":"modal.create")})]})]})}):null},q6=({isOpen:t,data:e,zIndex:n})=>{const{closeModal:r}=gn(),s=!!t,o=e,l=O.useCallback(()=>{Ma.getState().setView("wizard",{mode:o.id}),r()},[o,r]);return!s||!o?null:p.jsx(Do,{isOpen:s,onClose:r,className:"max-w-3xl max-h-[90vh] p-0 overflow-hidden bg-transparent shadow-none",children:p.jsxs("div",{className:"w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[p.jsx("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-4xl animate-bounce-slow",children:o.icon}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:o.title}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:o.subTitle})]})]})}),p.jsxs("div",{className:"p-6 overflow-y-auto flex-1 custom-scrollbar",children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-blue-600 dark:bg-blue-400 mr-2 rounded-full"}),""]}),p.jsx("p",{className:"text-base text-gray-700 dark:text-gray-300 leading-relaxed bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:o.concept.summary})]}),p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-gray-400 mr-2 rounded-full"}),""]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed mb-3",children:o.concept.detail})]}),Array.isArray(o.useCases)&&o.useCases.length>0&&p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-purple-500 mr-2 rounded-full"}),"Use Cases"]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.useCases.map((u,d)=>p.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/40 rounded-lg p-5 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 transition-colors",children:[p.jsxs("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center",children:[p.jsx("span",{className:"text-purple-500 mr-2",children:"#"}),u.title]}),p.jsx("div",{className:"mb-3",children:p.jsxs("div",{className:"flex items-start mb-1",children:[p.jsx("span",{className:"text-[10px] font-bold text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"Before"}),p.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.before})]})}),p.jsx("div",{children:p.jsxs("div",{className:"flex items-start",children:[p.jsx("span",{className:"text-[10px] font-bold text-blue-600 bg-blue-100 dark:bg-blue-900/40 dark:text-blue-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"After"}),p.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-300 font-medium",children:u.after})]})})]},d))})]}),o.tips&&o.tips.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-amber-500 mr-2 rounded-full"}),"Tips"]}),p.jsx("div",{className:"space-y-3",children:o.tips.map((u,d)=>p.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-lg border border-amber-100 dark:border-amber-900/30",children:[p.jsxs("p",{className:"font-bold text-amber-800 dark:text-amber-400 mb-1",children:["Q. ",u.q]}),p.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["A. ",u.a]})]},d))})]})]}),p.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[p.jsx("button",{onClick:r,className:"px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""}),p.jsxs("button",{onClick:l,className:"group relative px-6 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg shadow-md transition-all transform hover:scale-105 active:scale-95 overflow-hidden",children:[p.jsxs("span",{className:"relative z-10 flex items-center",children:["",p.jsx("svg",{className:"w-4 h-4 ml-2 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})]}),p.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 skew-y-12"})]})]})]})})},H6=()=>{const{stack:t}=gn();return t.length===0?null:p.jsx(p.Fragment,{children:t.map((e,n)=>{const s=n===0?void 0:"bg-black/30",o={isOpen:!0,data:e.data,zIndex:100+n*10,overlayClassName:s};switch(e.type){case"settings":return p.jsx(w6,{...o},e.id);case"task-detail":return p.jsx(E6,{...o},e.id);case"label-edit":return p.jsx(y6,{...o},e.id);case"project-edit":return p.jsx(v6,{...o},e.id);case"workspace-edit":return p.jsx(W6,{...o},e.id);case"filter-edit":return p.jsx(g6,{...o},e.id);case"timeblock-edit":return p.jsx($6,{...o},e.id);case"wiki-framework":return p.jsx(q6,{...o},e.id);default:return null}})})},Ic=()=>{const{workspaceId:t,loading:e}=Sr(),n=O.useCallback(u=>t?d6(t,d=>u(d),d=>console.error("Task subscription error:",d)):()=>{},[t]),r=t?f6(t):!1,{data:s,isPending:o}=kc(["tasks",t],n,t&&r?h6(t):void 0);return{tasks:s||[],loading:e||!!t&&!r&&o}};function K6(){const{tasks:t}=Ic(),{showCompleted:e,query:n}=Wr();return O.useMemo(()=>{var l,u;const s={inbox:0,today:0,upcoming:0,important:0,all:0,search:0},o=n?n.toLowerCase().trim():"";for(const d of t){if(o){const y=(l=d.title)==null?void 0:l.toLowerCase().includes(o),w=(u=d.description)==null?void 0:u.toLowerCase().includes(o);(y||w)&&s.search++}d.status==="archived"||d.status==="completed"||(s.all++,(!d.projectId||d.projectId==="unassigned"||d.projectId==="none")&&s.inbox++,d.isImportant&&s.important++,d.dueDate&&($F(d.dueDate)?s.today++:WF(d.dueDate)&&s.upcoming++))}return s},[t,n])}const G6=t=>t in At.SIDEBAR_DENSITY,tv=t=>G6(t)?At.SIDEBAR_DENSITY[t]:At.SIDEBAR_DENSITY.normal,Q6=[{id:"inbox",i18nKey:"inbox",icon:"",color:"text-blue-500",droppable:!0},{id:"today",i18nKey:"today",icon:"",color:"text-green-500"},{id:"upcoming",i18nKey:"upcoming",icon:"",color:"text-purple-500"},{id:"important",i18nKey:"important",icon:"",color:"text-amber-400"},{id:"custom",i18nKey:"all_tasks",icon:"",color:"text-gray-500"}],Z6=()=>{const{tasks:t}=Ic(),{language:e}=Ir(),{t:n}=bc(e),r=K6();return p.jsx("ul",{className:"space-y-0.5",children:Q6.map(s=>p.jsx(Y6,{item:s,tasks:t,label:n(s.i18nKey),count:r[s.id]||0},s.id))})},Y6=({item:t,tasks:e,label:n,count:r})=>{const{filterType:s,setFilter:o}=Wr(),{currentView:l,setView:u}=Ma(),{density:d}=Ir(),m=l==="tasks"&&s===t.id,{setNodeRef:y,isOver:w}=uc({id:`filter:${t.id}`,disabled:!t.droppable,data:{type:t.id==="inbox"?"inbox":"filter",value:t.id}}),x=()=>{t.id==="search"?(u("tasks"),o("search")):(u("tasks"),o(t.id))};return p.jsx("li",{ref:y,children:p.jsxs("button",{onClick:x,className:Se("w-full flex items-center px-3 text-sm rounded-md transition-colors text-left gap-3 group/item",tv(d),m?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",w&&t.droppable&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),children:[p.jsx("span",{className:t.color,children:t.icon}),p.jsx("span",{className:"flex-1",children:n}),t.id!=="search"&&r>0&&p.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:r})]})})},J6=()=>{const{workspaceId:t,loading:e}=Sr(),n=O.useCallback(u=>t?yF(t,u):()=>{},[t]),r=t?gF(t):!1,{data:s,isPending:o}=kc(["filters",t||"pending"],n,t&&r?mF(t):void 0);return{filters:s,loading:e||!!t&&o}};function X6(t,e="createdAt_desc"){if(!Array.isArray(t))return[];const[n,r]=e.split("_"),o=r==="desc"?-1:1;return[...t].sort((l,u)=>{var y,w,x,E,N,I;let d,m;switch(n){case"dueDate":d=(y=mn(l.dueDate))==null?void 0:y.getTime(),m=(w=mn(u.dueDate))==null?void 0:w.getTime();break;case"createdAt":d=(x=mn(l.createdAt))==null?void 0:x.getTime(),m=(E=mn(u.createdAt))==null?void 0:E.getTime();break;case"title":d=l.title.toLowerCase(),m=u.title.toLowerCase();break;case"duration":d=l.duration||0,m=u.duration||0;break;case"important":d=l.isImportant?1:0,m=u.isImportant?1:0;break;case"manual":d=l.order!==void 0?l.order:Number.MAX_SAFE_INTEGER,m=u.order!==void 0?u.order:Number.MAX_SAFE_INTEGER;break;default:d=(N=mn(l.createdAt))==null?void 0:N.getTime(),m=(I=mn(u.createdAt))==null?void 0:I.getTime()}return ez(d,m)*o})}function ez(t,e){return t===e?0:t==null?1:e==null?-1:t>e?1:t<e?-1:0}function tz(){const t=new Date;t.setHours(0,0,0,0);const e=new Date(t);e.setDate(e.getDate()+1);const n=qF(t),r=new Date(n);r.setDate(r.getDate()+7);const s=new Date(e);return s.setDate(s.getDate()+7),{now:t,tomorrow:e,weekStart:n,weekEnd:r,upcomingEnd:s}}function nz(t,e,n,r){const{now:s,tomorrow:o,weekStart:l,weekEnd:u,upcomingEnd:d}=n;switch(e){case"today":return Fx(t,s);case"tomorrow":return Fx(t,o);case"week":return t>=l&&t<u;case"upcoming":return t>=o&&t<d;case"overdue":return t<s&&r!=="completed";default:return!1}}function qx(t,e){if(!e)return t;const n=typeof e=="string"?Z0(e):e,r=n.dates.length>0?tz():null;return t.filter(s=>{if(n.status.length>0){const l=s.status||"todo";if(!n.status.some(d=>d==="active"&&l==="todo"?!0:d===l))return!1}if(n.excludeStatus.length>0){const l=s.status||"todo";if(n.excludeStatus.some(d=>d==="active"&&l==="todo"?!0:d===l))return!1}if(n.isImportant===!0&&!s.isImportant||n.isImportant===!1&&s.isImportant||n.projects.length>0&&!n.projects.some(u=>u==="unassigned"?!s.projectId||s.projectId==="unassigned"||s.projectId==="none":s.projectId===u)||n.excludeProjects.length>0&&n.excludeProjects.some(l=>s.projectId===l)||n.labels.length>0&&(!s.labelIds||!n.labels.some(l=>{var u;return(u=s.labelIds)==null?void 0:u.includes(l)}))||n.excludeLabels.length>0&&s.labelIds&&n.excludeLabels.some(l=>{var u;return(u=s.labelIds)==null?void 0:u.includes(l)})||n.timeBlocks.length>0&&!n.timeBlocks.some(u=>u==="unassigned"?!s.timeBlockId:s.timeBlockId===u)||n.excludeTimeBlocks.length>0&&n.excludeTimeBlocks.some(l=>s.timeBlockId===l))return!1;if(n.durations.length>0){const l=s.duration||0;if(!n.durations.includes(l))return!1}if(r&&n.dates.length>0){const l=mn(s.dueDate);if(!l||!n.dates.some(d=>nz(l,d,r,s.status||"todo")))return!1}const o=`${s.title} ${s.description||""}`.toLowerCase();return!(n.keywords.length>0&&!n.keywords.every(u=>Array.isArray(u)?u.some(d=>o.includes(d)):o.includes(u))||n.excludeKeywords.length>0&&n.excludeKeywords.some(u=>o.includes(u)))})}function rz(t){const{keyword:e,showCompleted:n,projectId:r,labelId:s,timeBlockId:o,duration:l,filterType:u}=t,d=e?Z0(e):{keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(r&&d.projects.push(r),s&&d.labels.push(s),o&&d.timeBlocks.push(o),l){const m=typeof l=="number"?l:parseInt(l,10);isNaN(m)||d.durations.push(m)}return u==="today"&&d.dates.push("today"),u==="upcoming"&&d.dates.push("upcoming"),u==="important"&&(d.isImportant=!0),n||d.status.length===0&&d.status.push("active"),d}function a1(t,e){const{savedFilter:n,sortCriteria:r}=e,s=rz(e);let o=qx(t,s);return n&&n.query&&(o=qx(o,n.query)),X6(o,r||"createdAt_desc")}const nv=({x:t,y:e,onClose:n,children:r})=>{const s=O.useRef(null);return O.useEffect(()=>{const o=u=>{s.current&&!s.current.contains(u.target)&&n()},l=()=>n();return document.addEventListener("mousedown",o),window.addEventListener("scroll",l,!0),()=>{document.removeEventListener("mousedown",o),window.removeEventListener("scroll",l,!0)}},[n]),mo.createPortal(p.jsx("div",{ref:s,className:"fixed z-50 min-w-[160px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-100",style:{top:e,left:t},onContextMenu:o=>o.preventDefault(),children:r}),document.body)},ic=({onClick:t,children:e,className:n,icon:r,variant:s="default"})=>p.jsxs("button",{onClick:o=>{o.stopPropagation(),t()},className:Se("w-full text-left px-3 py-2 text-sm flex items-center gap-2 transition-colors",s==="danger"?"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",n),children:[r&&p.jsx("span",{className:Se("w-4 h-4",s==="danger"?"text-red-500":"text-gray-400"),children:r}),e]}),Ea=({icon:t,label:e,count:n,isActive:r,isOver:s,onClick:o,onContextMenu:l,showZero:u=!1})=>{const{density:d}=Ir();return p.jsxs("button",{type:"button",onClick:o,onContextMenu:l,className:Se("w-full text-left group flex items-center justify-between px-2 ml-1 rounded-md transition-colors select-none outline-none focus:ring-2 focus:ring-blue-500/50",tv(d),r?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",s&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t&&p.jsx("span",{className:"flex-shrink-0 w-5 flex justify-center text-sm",children:t}),p.jsx("span",{className:"text-sm truncate",children:e})]}),n!==void 0&&(n>0||u&&n===0)&&p.jsx("span",{className:Se("text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700/50",r?"text-blue-700 dark:text-blue-300 bg-white":"text-gray-400"),children:n})]})},sz=()=>{const{filters:t,loading:e}=J6(),{tasks:n}=Ic(),{workspaceId:r}=Sr();return e?null:p.jsx("div",{className:"space-y-0.5 py-1",children:t.map(s=>p.jsx(iz,{filter:s,tasks:n,workspaceId:r},s.id))})},iz=({filter:t,tasks:e,workspaceId:n})=>{const{t:r}=ft(),{filterType:s,targetId:o,setFilter:l}=Wr(),{openModal:u}=gn(),d=s==="custom"&&o===t.id,[m,y]=O.useState(null),w=Le.useMemo(()=>{try{return a1(e,{savedFilter:t,showCompleted:!1}).length}catch(I){return console.warn("[CustomFilterItem] Count error:",I),0}},[e,t]),x=()=>{y(null),u("filter-edit",t)},E=async()=>{y(null),confirm(`${r("filter")}: ${t.name}
${r("msg.confirm_delete")}`)&&t.id&&n&&await wF(n,t.id)},N=I=>{I.preventDefault(),I.stopPropagation(),y({x:I.clientX,y:I.clientY})};return p.jsxs(p.Fragment,{children:[p.jsx("div",{onContextMenu:N,children:p.jsx(Ea,{label:t.name,icon:p.jsx("span",{children:""}),count:w,isActive:d,onClick:()=>l("custom",t.id)})}),m&&p.jsxs(nv,{x:m.x,y:m.y,onClose:()=>y(null),children:[p.jsx(ic,{onClick:x,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:r("edit")}),p.jsx(ic,{onClick:E,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:r("delete")})]})]})},oz=Le.memo(({mins:t,count:e})=>{const{t:n}=ft(),{filterType:r,targetId:s,setFilter:o}=Wr(),l=r==="duration"&&s===t.toString(),{setNodeRef:u,isOver:d}=uc({id:`duration:${t}`,data:{type:"duration",value:t.toString()}});return p.jsx("div",{ref:u,children:p.jsx(Ea,{label:n("sidebar.duration_format",{min:t}),icon:p.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),count:e,isActive:l,isOver:d,onClick:()=>o("duration",t.toString())})})}),az=()=>{const{tasks:t}=Ic(),e=At.SIDEBAR.DURATIONS,n=O.useMemo(()=>{const r=new Map;return t.forEach(s=>{if(s.status!=="completed"&&s.duration){const o=Number(s.duration);isNaN(o)||r.set(o,(r.get(o)||0)+1)}}),r},[t]);return p.jsx("div",{className:"space-y-0.5 py-1",children:e.map(r=>p.jsx(oz,{mins:r,count:n.get(r)||0},r))})},lz=Le.memo(({project:t})=>{const{t:e}=ft(),{filterType:n,targetId:r,setFilter:s}=Wr(),{density:o}=Ir(),{openModal:l}=gn(),u=n==="project"&&r===t.id,[d,m]=O.useState(null),{setNodeRef:y,isOver:w}=uc({id:`project:${t.id}`,data:{type:"project",value:t.id}}),x=I=>{I==null||I.stopPropagation(),m(null),l("project-edit",t)},E=async()=>{m(null),confirm(`${e("project")}: ${t.name}
${e("msg.confirm_delete")}`)&&t.id&&await GI(t.id)},N=I=>{I.preventDefault(),I.stopPropagation(),m({x:I.clientX,y:I.clientY})};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{ref:y,onClick:()=>s("project",t.id),onContextMenu:N,className:Se("group flex items-center justify-between px-2 rounded-md cursor-pointer transition-colors select-none",tv(o),u?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",w&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),role:"button",tabIndex:0,"aria-selected":u,"aria-label":`${e("project")}: ${t.name}${u?` (${e("active")})`:""}`,children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[p.jsx("span",{className:Se("text-xs shrink-0 transition-colors",u?"text-blue-500":"text-gray-400 group-hover:text-gray-500"),children:p.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),p.jsx("span",{className:"text-sm truncate",children:t.name})]}),p.jsx("button",{onClick:x,className:Se("p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-opacity",u?"opacity-100":"opacity-0 sm:group-hover:opacity-100 focus:opacity-100"),"aria-label":e("edit"),title:e("edit"),children:p.jsx("svg",{className:"w-3.5 h-3.5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),d&&p.jsxs(nv,{x:d.x,y:d.y,onClose:()=>m(null),children:[p.jsx(ic,{onClick:x,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:e("edit")}),p.jsx(ic,{onClick:E,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:e("delete")})]})]})}),cz=()=>{const{t}=ft(),{projects:e,loading:n}=Ip();return n?p.jsx(i1,{}):e.length===0?p.jsx("div",{className:"p-4 text-xs text-gray-400",children:t("sidebar.no_projects")}):p.jsx(Np,{items:e.map(r=>r.id),strategy:Ap,children:p.jsx("div",{className:"space-y-0.5 p-2",children:e.map(r=>p.jsx(o1,{id:r.id,children:p.jsx(lz,{project:r})},r.id))})})},uz=({title:t,children:e,defaultExpanded:n=!0,action:r,dragHandleProps:s})=>{const{t:o}=ft(),[l,u]=O.useState(()=>typeof window<"u"&&window.innerWidth<768?!1:n),m=`section-${encodeURIComponent(t.replace(/\s+/g,"-").toLowerCase())}`;return p.jsxs("div",{className:"mb-2 group/section",children:[p.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[p.jsxs("button",{...s,onClick:()=>u(!l),"aria-expanded":l,"aria-controls":m,className:"flex items-center flex-1 text-xs font-semibold text-gray-500 uppercase hover:text-gray-700 dark:hover:text-gray-300 transition-colors text-left cursor-grab active:cursor-grabbing touch-none select-none",title:o("sidebar.reorder_section"),children:[p.jsx("svg",{className:Se("w-3 h-3 mr-1 transition-transform",l?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),t]}),r&&p.jsx("div",{className:"opacity-100 transition-opacity",onClick:y=>y.stopPropagation(),children:r})]}),l&&p.jsx("div",{className:"mt-1",id:m,children:e})]})},dz=()=>{const{t}=ft(),{currentView:e,setView:n}=Ma();return p.jsxs("div",{className:"space-y-0.5 py-1",children:[p.jsx(Ea,{label:t("sidebar.target_wizard"),icon:p.jsx(F6,{}),isActive:e==="wizard",onClick:()=>n("wizard")}),p.jsx(Ea,{label:t("sidebar.target_dashboard"),icon:p.jsx(z6,{}),isActive:e==="target-dashboard",onClick:()=>n("target-dashboard")}),p.jsx(Ea,{label:t("sidebar.framework_wiki"),icon:p.jsx(U6,{}),isActive:e==="wiki",onClick:()=>n("wiki")})]})},hz=()=>{const{timeBlocks:t,loading:e}=xd(),{tasks:n}=Ic(),{workspaceId:r}=Sr(),s=Le.useMemo(()=>{const o=new Map;let l=0;return n.forEach(u=>{u.status!=="completed"&&(!u.timeBlockId||u.timeBlockId==="unassigned"||u.timeBlockId==="null"?l++:o.set(u.timeBlockId,(o.get(u.timeBlockId)||0)+1))}),{map:o,unassignedCount:l}},[n]);return e?p.jsx(i1,{}):p.jsxs("div",{className:"space-y-0.5 py-1",children:[t.map(o=>p.jsx(fz,{block:o,count:s.map.get(o.id||"")||0,workspaceId:r},o.id)),p.jsx(pz,{count:s.unassignedCount})]})},fz=({block:t,count:e,workspaceId:n})=>{const{t:r}=ft(),{filterType:s,targetId:o,setFilter:l}=Wr(),{openModal:u}=gn(),d=s==="timeblock"&&o===t.id,[m,y]=O.useState(null),{setNodeRef:w,isOver:x}=uc({id:`timeblock:${t.id}`,data:{type:"timeblock",value:t.id}}),E=()=>{y(null),u("timeblock-edit",t)},N=async()=>{y(null),confirm(`${r("timeblock")}: ${t.start} - ${t.end}
${r("msg.confirm_delete")}`)&&t.id&&n&&await QI(n,t.id)},I=S=>{S.preventDefault(),S.stopPropagation(),y({x:S.clientX,y:S.clientY})};return p.jsxs("div",{ref:w,onContextMenu:I,children:[p.jsx(Ea,{label:`${t.start} - ${t.end}`,icon:p.jsx("span",{className:"w-2 rounded-full aspect-square",style:{backgroundColor:t.color}}),count:e,isActive:d,isOver:x,onClick:()=>l("timeblock",t.id||"")}),m&&p.jsxs(nv,{x:m.x,y:m.y,onClose:()=>y(null),children:[p.jsx(ic,{onClick:E,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:r("edit")}),p.jsx(ic,{onClick:N,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:r("delete")})]})]})},pz=({count:t})=>{const{t:e}=ft(),{filterType:n,targetId:r,setFilter:s}=Wr(),o=n==="timeblock"&&r==="unassigned",{setNodeRef:l,isOver:u}=uc({id:"timeblock:unassigned",data:{type:"timeblock",value:"unassigned"}});return p.jsx("div",{ref:l,children:p.jsx(Ea,{label:e("sidebar.unassigned"),icon:p.jsx("span",{className:"w-2 rounded-full aspect-square bg-gray-400"}),count:t,isActive:o,isOver:u,onClick:()=>s("timeblock","unassigned")})})},mz=({id:t,section:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:o,transition:l,isDragging:u}=X0({id:t}),d={transform:Vs.Transform.toString(o),transition:l,opacity:u?.5:1};return p.jsx("div",{ref:s,style:d,...n,children:p.jsx(uz,{title:e.title,defaultExpanded:e.defaultExpanded,action:e.action,dragHandleProps:r,children:e.component})})},gz=["general","projects","targets","timeblocks","durations","filters"],yz=()=>{const{t}=ft(),{openModal:e}=gn(),[n,r]=Le.useState(()=>{const u=localStorage.getItem(At.STORAGE_KEYS.SECTION_ORDER);if(u)try{const d=JSON.parse(u);if(Array.isArray(d)&&d.every(m=>typeof m=="string"))return d}catch{}return gz});O.useEffect(()=>{localStorage.setItem(At.STORAGE_KEYS.SECTION_ORDER,JSON.stringify(n))},[n]);const s=Yf(ko(cc,{activationConstraint:{distance:8}}),ko(sd,{coordinateGetter:ev})),o=u=>{const{active:d,over:m}=u;m&&d.id!==m.id&&r(y=>{const w=y.indexOf(d.id),x=y.indexOf(m.id);return Tc(y,w,x)})},l=Le.useMemo(()=>({general:{id:"general",title:t("general"),component:p.jsx(p.Fragment,{children:p.jsx(Z6,{})}),defaultExpanded:!0},projects:{id:"projects",title:t("projects"),component:p.jsx(cz,{}),defaultExpanded:!0,action:p.jsx("button",{onClick:()=>e("project-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},targets:{id:"targets",title:t("targets"),component:p.jsx(dz,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("wiki-framework"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},timeblocks:{id:"timeblocks",title:t("timeblocks"),component:p.jsx(hz,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("timeblock-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},durations:{id:"durations",title:t("durations"),component:p.jsx(az,{}),defaultExpanded:!1},filters:{id:"filters",title:t("filters"),component:p.jsx(sz,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("filter-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})}}),[t,e]);return p.jsx(np,{sensors:s,collisionDetection:Jf,onDragEnd:o,children:p.jsx(Np,{items:n,strategy:Ap,children:p.jsx("div",{className:"flex flex-col gap-4",children:n.map(u=>{const d=l[u];return d?p.jsx(mz,{id:d.id,section:d},d.id):null})})})})},vz=({className:t,onCancel:e,onSuccess:n,placeholder:r,initialValue:s=""})=>{const{t:o}=ft(),l=r||o("inline_input.placeholder"),[u,d]=O.useState(s),[m,y]=O.useState(!1),[w,x]=O.useState(!1),[E,N]=O.useState(!1),I=async W=>{if(!(!u.trim()||E)){N(!0);try{await XI({title:u,isImportant:m,dueDate:w?new Date:void 0}),d(""),y(!1),x(!1),n==null||n()}catch(U){console.error(U),Nt.error(o("msg.task.create_fail"))}finally{N(!1)}}},S=W=>{W.key==="Enter"&&!W.shiftKey&&!W.nativeEvent.isComposing&&(W.preventDefault(),I()),W.key==="Escape"&&(e==null||e())},V=Le.useRef(null);return Le.useEffect(()=>{const W=G=>{V.current&&!V.current.contains(G.target)&&(u.trim()||e==null||e())},U=setTimeout(()=>{document.addEventListener("mousedown",W)},100);return()=>{clearTimeout(U),document.removeEventListener("mousedown",W)}},[e,u]),p.jsxs("div",{ref:V,className:Se("glass-effect rounded-xl shadow-xl p-3 sm:p-4 border border-blue-500/30 dark:border-blue-400/30 animate-in slide-in-from-top-2 duration-300 w-full",t),children:[p.jsx("label",{htmlFor:"inline-task-input",className:"sr-only",children:o("inline_input.label")}),p.jsx("input",{id:"inline-task-input",type:"text",autoFocus:!0,className:"w-full bg-white/50 dark:bg-gray-800/50 text-base sm:text-lg font-medium text-gray-800 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 outline-none mb-3 sm:mb-4 focus:bg-white/80 dark:focus:bg-gray-800/80 p-3 rounded-lg transition-all border border-transparent focus:border-blue-500/30 focus:ring-2 focus:ring-blue-500/20",placeholder:l,value:u,onChange:W=>d(W.target.value),onKeyDown:S,disabled:E}),p.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100 dark:border-gray-700/50",children:[p.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[p.jsx("button",{type:"button",onClick:()=>x(!w),className:Se("transition-colors p-2 rounded-lg",w?"text-blue-600 bg-blue-50 hover:bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30 dark:hover:bg-blue-900/50":"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":o(w?"inline_input.aria_today_remove":"inline_input.aria_today"),title:o(w?"inline_input.tooltip_today_remove":"inline_input.tooltip_today"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("button",{type:"button",onClick:()=>y(!m),className:Se("transition-colors p-2 rounded-lg",m?"text-amber-500 bg-amber-50 hover:bg-amber-100 dark:text-amber-400 dark:bg-amber-900/30 dark:hover:bg-amber-900/50":"text-gray-400 hover:text-amber-500 dark:hover:text-amber-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":o(m?"inline_input.aria_important_remove":"inline_input.aria_important"),title:o(m?"inline_input.tooltip_important_remove":"inline_input.tooltip_important"),children:p.jsx("svg",{className:Se("w-5 h-5",m&&"fill-current"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]}),p.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e&&p.jsx("button",{type:"button",onClick:e,disabled:E,className:"px-3 py-2 sm:px-4 sm:py-2 text-sm font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all","aria-label":o("modal.cancel"),children:o("modal.cancel")}),p.jsx("button",{onClick:()=>I(),disabled:!u.trim()||E,className:"px-4 py-2 sm:px-5 sm:py-2 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl shadow-lg shadow-blue-500/20 transition-all active:scale-95 flex items-center gap-1","aria-label":o("add_task"),children:o(E?"inline_input.adding":"add")})]})]})]})},_z=({initialValue:t=""})=>{const{t:e}=ft(),[n,r]=O.useState(!1);if(Le.useEffect(()=>{if(!n)return;const o=l=>{l.key==="Escape"&&r(!1)};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[n]),n)return p.jsx("div",{className:"mb-2",children:p.jsx(vz,{onCancel:()=>r(!1),onSuccess:()=>r(!1),initialValue:t})});const s=t?e("add_task_button.add_with_title",{title:t}):e("add_task_button.add_task");return p.jsxs("button",{onClick:()=>r(!0),"aria-label":e("add_task_button.aria_label"),className:"group flex items-center gap-2 w-full text-left py-2 px-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-2",children:[p.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-transparent group-hover:bg-blue-100/50 dark:group-hover:bg-blue-900/30 transition-colors",children:p.jsx("svg",{className:"w-4 h-4 text-inherit",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),p.jsx("span",{className:"text-sm font-medium",children:s})]})},l1=Le.memo(({task:t,style:e,className:n,dragHandleProps:r})=>{const s=t.status==="completed",o=!!t.isImportant,{openModal:l}=gn(),u=async m=>{m.stopPropagation(),t.id&&await u6(t.id,t.status||"todo")},d=async m=>{m.stopPropagation(),t.id&&await J0(t.id,{isImportant:!o})};return p.jsxs("li",{style:e,onClick:()=>l("task-detail",t),className:Se("group flex items-start gap-3 p-[var(--task-p)] bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700/50 rounded-xl hover:shadow-sm hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-200 cursor-pointer hover-lift",n),...r,children:[p.jsx("button",{onClick:u,className:Se("mt-0.5 w-5 h-5 rounded-full border flex items-center justify-center transition-colors shrink-0",s?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-blue-400 text-transparent"),"aria-label":s?"Mark as incomplete":"Mark as complete",children:p.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:Se("text-sm text-gray-800 dark:text-gray-200 break-words",s&&"line-through text-gray-400 dark:text-gray-500"),children:t.title}),t.description&&p.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-[var(--task-line-clamp)]",children:t.description}),p.jsx("div",{className:"flex items-center gap-3 mt-2",children:t.dueDate&&p.jsxs("span",{className:Se("text-xs flex items-center gap-1",s?"text-gray-400":QF(t.dueDate)),children:[" ",HF(t.dueDate)]})})]}),p.jsx("div",{className:Se("flex items-center gap-1 transition-opacity",o?"opacity-100":"opacity-30 group-hover:opacity-100"),children:p.jsx("button",{onClick:d,className:Se("p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",o?"text-yellow-500":"text-gray-400"),title:o?"":"",children:p.jsx("svg",{className:"w-4 h-4",fill:o?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})})]})},(t,e)=>{const n=s=>s?s instanceof Date?s.getTime():typeof s.toDate=="function"?s.toDate().getTime():typeof s.getTime=="function"?s.getTime():null:null,r=(s,o)=>{const l=n(s),u=n(o);return l===u};return t.task.id===e.task.id&&t.task.status===e.task.status&&t.task.title===e.task.title&&t.task.description===e.task.description&&t.task.isImportant===e.task.isImportant&&r(t.task.dueDate,e.task.dueDate)}),wz=({tasks:t,timeBlockId:e})=>{const{t:n}=ft(),{timeBlocks:r}=xd(),s=t.reduce((w,x)=>{const E=x.duration,N=typeof E=="number"?E:Number(E);return w+(isNaN(N)?0:N)},0),o=w=>(w/60).toFixed(2)+"h",l=e?r.find(w=>w.id===e):null;if(l&&l.start&&l.end){const w=JF(l.start,l.end);if(w<=0)return null;const x=(w/60).toFixed(2),E=(s/60).toFixed(2),N=s/w*100,I=Math.min(N,100),S=w-s,V=S<0,W=(Math.abs(S)/60).toFixed(2),U=N>100;return p.jsxs("div",{className:"glass-card flex items-center gap-4 py-3 px-4 my-2",children:[p.jsx("div",{className:"flex-shrink-0 w-24 truncate text-xs font-bold text-gray-500 dark:text-gray-400",title:l.name,children:l.name}),p.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 dark:text-gray-400 tabular-nums",children:[p.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300 w-[4.5ch] text-right inline-block",children:[E,"h"]}),p.jsx("span",{className:"text-gray-400 mx-0.5",children:"/"}),p.jsxs("span",{className:"w-[4.5ch] inline-block",children:[x,"h"]})]}),p.jsx("div",{className:"flex-1 relative h-3 bg-gray-200 dark:bg-gray-700/50 rounded-full overflow-hidden min-w-[100px]",children:p.jsx("div",{className:Se("h-full rounded-full transition-all duration-500 ease-out shadow-sm",U?"bg-red-500":"bg-gradient-to-r from-blue-500 to-indigo-600"),style:{width:U?"100%":`${I}%`}})}),p.jsxs("div",{className:"flex-shrink-0 flex items-center justify-end gap-3 min-w-[140px]",children:[p.jsxs("div",{className:Se("text-lg font-bold tabular-nums text-right w-[3.5ch]",U?"text-red-500":"text-blue-500"),children:[Math.round(N),p.jsx("span",{className:"text-xs font-normal opacity-70",children:"%"})]}),p.jsxs("div",{className:Se("text-xs whitespace-nowrap text-right w-[100px]",V?"text-red-500":"text-green-500"),children:["(",n(V?"task_stats.over":"task_stats.remaining")," ",W,"h)"]})]})]})}const u=t.length,d=u>0?s/u:0,m=n("task_stats.count_unit"),y=n("task_stats.avg_unit");return p.jsxs("div",{className:"glass-card flex items-center justify-evenly py-3 px-4 my-2",children:[p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:n("task_stats.count_label")}),p.jsxs("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:[u,m&&p.jsx("span",{className:"text-xs font-normal ml-0.5 text-gray-400",children:m})]})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:n("task_stats.total_label")}),p.jsx("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200 text-blue-600 dark:text-blue-400",children:o(s)})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:n("task_stats.avg_label")}),p.jsxs("span",{className:"font-medium text-sm",children:[o(d),p.jsx("span",{className:"text-xs ml-0.5",children:y})]})]})]})},bz=({task:t,className:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:o,transition:l,isDragging:u}=X0({id:t.id||""}),d={transform:Vs.Transform.toString(o),transition:l,zIndex:u?50:"auto",position:"relative"};return p.jsx("div",{ref:s,style:d,className:"touch-manipulation",children:p.jsx(l1,{task:t,className:Se(e,u&&"opacity-80 shadow-lg border-blue-400 bg-blue-50/50"),dragHandleProps:{...n,...r}})})},c1=()=>{const{t}=ft(),{tasks:e,loading:n}=Ic(),{filterType:r,targetId:s,query:o,showCompleted:l,sortCriteria:u,setShowCompleted:d,setSortCriteria:m}=Wr(),{density:y}=Ir(),{openModal:w}=gn(),x=O.useMemo(()=>o&&o.trim().length>0?{keyword:o,showCompleted:l,projectId:null,labelId:null,timeBlockId:null,duration:null,filterType:"all_tasks",savedFilter:null,sortCriteria:u}:{keyword:o,showCompleted:l,projectId:r==="inbox"?"unassigned":r==="project"?s:null,labelId:r==="label"?s:null,timeBlockId:r==="timeblock"?s:null,duration:r==="duration"?s:null,filterType:r,savedFilter:null,sortCriteria:u},[r,s,o,l,u]),E=O.useMemo(()=>a1(e,x),[e,x]),N={compact:"space-y-1",normal:"space-y-2",comfortable:"space-y-3",spacious:"space-y-4"}[y],I=Yf(ko(cc,{activationConstraint:{distance:8}}),ko(sd,{coordinateGetter:ev})),S=async U=>{const{active:G,over:Z}=U;if(!Z||G.id===Z.id)return;const K=E.findIndex(k=>k.id===G.id),A=E.findIndex(k=>k.id===Z.id);if(K!==-1&&A!==-1){const R=Tc(E,K,A).map(P=>P.id).filter(Boolean);await l6(R)}};if(n)return p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("div",{className:"text-gray-400 text-sm animate-pulse",children:t("task_list.loading")})});const V=!!(o&&o.trim().length>0),W=u==="manual";return p.jsxs("div",{className:"flex flex-col h-full overflow-hidden relative",children:[p.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-1 pb-24",children:[p.jsxs("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm pt-2 pb-4 mb-4 flex items-center gap-2",children:[p.jsx("div",{className:"flex-1",children:V?p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t("task_list.searching_results",{query:o||""})]}):p.jsx(_z,{initialValue:""})}),p.jsx("div",{className:"flex items-center gap-2 px-1",children:p.jsxs("select",{value:u,onChange:U=>m(U.target.value),className:"text-xs bg-transparent border-none outline-none text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer font-medium",children:[p.jsx("option",{value:"manual",children:t("task_list.sort_manual")}),p.jsx("option",{value:"createdAt_desc",children:t("task_list.sort_created")}),p.jsx("option",{value:"dueDate_asc",children:t("task_list.sort_due")}),p.jsx("option",{value:"important_desc",children:t("task_list.sort_important")}),p.jsx("option",{value:"title_asc",children:t("task_list.sort_title")})]})}),p.jsx("button",{onClick:()=>d(!l),className:Se("px-3 py-2 rounded-lg text-xs font-medium border transition-colors shrink-0",l?"bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-300":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"),title:t(l?"task_list.hide_completed":"task_list.show_completed"),children:t(l?"task_list.hide_completed":"task_list.show_completed")})]}),E.length===0?p.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center min-h-[60vh]",children:[p.jsxs("div",{className:"relative mb-8",children:[p.jsx("div",{className:"absolute -inset-4 bg-blue-500/10 dark:bg-blue-400/10 blur-3xl rounded-full"}),p.jsx("div",{className:"relative",children:p.jsx("svg",{className:"w-24 h-24 text-blue-200 dark:text-blue-900/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})})]}),p.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:t("task_list.no_tasks_title")}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs mb-8",children:t(l?"task_list.no_tasks_desc_showing":"task_list.no_tasks_desc_hiding")}),p.jsxs("button",{onClick:()=>w("task-detail",{title:""}),className:"btn-premium flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),t("task_list.add_new_task")]})]}):W?p.jsx(np,{sensors:I,collisionDetection:Jf,onDragEnd:S,children:p.jsx(Np,{items:E.map(U=>U.id||""),strategy:Ap,children:p.jsx("div",{className:Se("transition-all duration-200",N),children:E.map(U=>p.jsx(bz,{task:U},U.id))})})}):p.jsx("ul",{className:Se("transition-all duration-200",N),children:E.map(U=>p.jsx(l1,{task:U},U.id))})]}),p.jsx("div",{className:"flex-none mt-auto pt-2 border-t border-gray-100 dark:border-gray-800 bg-white/50 dark:bg-gray-900/50 backdrop-blur pb-[calc(0.5rem+env(safe-area-inset-bottom))]",children:p.jsx(wz,{tasks:E,timeBlockId:x.timeBlockId})})]})},xz=()=>{const{t}=ft(),{query:e,setSearchQuery:n,setFilter:r}=Wr(),{setView:s}=Ma(),[o,l]=O.useState(e),u=O.useRef(null);O.useEffect(()=>{var w;(w=u.current)==null||w.focus()},[]),O.useEffect(()=>{e!==o&&l(e)},[e]),O.useEffect(()=>{const w=setTimeout(()=>{o!==e&&n(o)},150);return()=>{clearTimeout(w)}},[o,e,n]);const d=w=>{l(w.target.value)},m=()=>{var w;l(""),n(""),(w=u.current)==null||w.focus()},y=()=>{n(""),r("inbox"),s("tasks")};return p.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-50 via-white to-blue-50/30 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:[p.jsxs("div",{className:"relative p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800",children:[p.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full blur-3xl -z-0"}),p.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all hover:scale-105 active:scale-95","aria-label":t("close"),children:p.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),p.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("sidebar.search_placeholder")})]}),p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-2xl blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"}),p.jsx("div",{className:"relative bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 rounded-2xl shadow-lg shadow-gray-200/50 dark:shadow-black/20 overflow-hidden",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"pl-4 text-gray-400",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),p.jsx("input",{ref:u,id:"search-input",name:"search",type:"text",value:o,onChange:d,placeholder:t("sidebar.search_placeholder"),className:"w-full bg-transparent py-4 px-3 text-base text-gray-800 dark:text-gray-100 placeholder-gray-400 outline-none"}),o&&p.jsx("button",{type:"button",onClick:m,className:"p-2 mr-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":t("clear"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})]}),!o&&p.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[p.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 font-mono",children:"/"}),p.jsx("span",{children:""})]}),o&&p.jsxs("p",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),"",o,""]})]})]}),p.jsx("div",{className:"flex-1 overflow-hidden",children:o?p.jsx(c1,{}):p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 dark:text-gray-500 p-8",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-full blur-2xl"}),p.jsx("div",{className:"relative w-24 h-24 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center mb-6",children:p.jsx("svg",{className:"w-12 h-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),p.jsx("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-300 mb-2",children:""}),p.jsxs("p",{className:"text-sm text-center max-w-xs opacity-75",children:["",p.jsx("br",{}),""]})]})})]})},kz=()=>{const{workspaceId:t,loading:e}=Sr(),n=O.useCallback(u=>t?UF(t,u):()=>{},[t]),r=t?zF(t):!1,{data:s,isPending:o}=kc(["targets",t],n,t&&r?FF(t):void 0);return{targets:s||[],loading:e||!!t&&o}},Ez=Le.memo(({kgi:t,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:s})=>{const{language:o}=Ir(),{t:l}=bc(o),u={good:"text-emerald-500",warning:"text-amber-500",danger:"text-red-500"},d={good:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-red-500"},m=u[t.status]||"text-gray-500",y=d[t.status]||"bg-gray-500",w=[{id:"backward",label:l("backward_map"),icon:""},{id:"woop",label:l("woop_board"),icon:""},{id:"okr",label:l("okr_tree"),icon:""}];return p.jsx("div",{className:`mb-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg transition-all duration-300 mx-4 mt-4 ${r?"py-2":"py-4"}`,children:p.jsxs("div",{className:"px-6 flex items-center justify-between gap-6",children:[p.jsx("div",{className:"flex-1 min-w-0",children:p.jsx("h1",{className:`font-bold text-gray-900 dark:text-white truncate transition-all duration-300 ${r?"text-sm opacity-50":"text-base"}`,children:t.title})}),p.jsx("div",{className:"flex-1 max-w-md hidden sm:block",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex-1",children:p.jsx("div",{className:"h-3 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:p.jsx("div",{style:{width:`${t.progress}%`},className:`h-full ${y} transition-all duration-1000 ease-out rounded-full`})})}),p.jsxs("span",{className:`font-black ${m} tabular-nums text-sm whitespace-nowrap`,children:[t.progress,"%"]})]})}),p.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0",children:[p.jsxs("div",{className:"text-center hidden sm:block",children:[p.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),p.jsxs("div",{className:`font-black ${m} tabular-nums`,children:[t.daysLeft,p.jsx("span",{className:"text-xs font-medium ml-0.5 text-gray-400",children:""})]})]}),p.jsx("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-900/50 p-1 rounded-lg",children:w.map(x=>p.jsxs("button",{onClick:()=>n(x.id),className:`group px-3 py-1.5 rounded-md text-xs font-bold transition-all flex flex-col sm:flex-row items-center gap-1 sm:gap-2 ${e===x.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,title:x.label,children:[p.jsx("span",{className:"text-sm sm:text-base leading-none",children:x.icon}),p.jsx("span",{className:"text-[10px] sm:text-xs leading-none",children:x.label})]},x.id))}),p.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:r?"Expand Header":"Collapse Header",children:p.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform duration-300 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})})})]})]})})}),Tz=Le.memo(({data:t})=>!t||!t.milestones?p.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):p.jsxs("div",{className:"max-w-4xl mx-auto relative pb-10",children:[p.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 -translate-x-1/2"}),t.milestones.map((e,n)=>{const r=e.type==="goal",s=e.type==="current",o=e.completed;let l,u="";return r?(l=p.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-400 text-white flex items-center justify-center text-base shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),u="bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"):s?(l=p.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 animate-pulse relative",children:"Now"}),u="border-blue-500 border-2 shadow-md"):o?(l=p.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs shadow ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),u="bg-gray-50 dark:bg-gray-800 opacity-70"):(l=p.jsx("div",{className:"w-5 h-5 rounded-full bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative"}),u="bg-white dark:bg-gray-800"),p.jsxs("div",{className:"relative flex items-center mb-4 animate-fade-in group",style:{animationDelay:`${n*50}ms`},children:[p.jsx("div",{className:"w-16 flex-shrink-0 flex justify-center items-center z-10",children:l}),p.jsx("div",{className:"flex-1 pr-4 min-w-0",children:p.jsx("div",{className:`px-3 py-3 rounded-lg border ${s&&!u.includes("border-2")?"border-2 border-blue-500":s?"":"border-gray-200 dark:border-gray-700"} ${u} shadow-sm transition-all hover:shadow-md hover:translate-x-1 cursor-pointer`,children:p.jsxs("div",{className:"flex items-center justify-between gap-3",children:[p.jsx("span",{className:`text-xs font-bold ${s?"text-blue-600":"text-gray-500"} flex-shrink-0 font-mono`,children:e.date}),p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white flex-1 truncate text-sm md:text-base",children:e.title}),r&&p.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-bold flex-shrink-0",children:"TARGET"}),s&&p.jsx("span",{className:"text-[10px] text-blue-500 font-bold flex-shrink-0",children:" NOW"})]})})})]},e.id||`milestone-${n}`)})]})),Iz=Le.memo(({data:t})=>{if(!t||!t.keyResults)return p.jsx("div",{className:"p-4 text-center text-gray-500",children:""});const e=n=>n==="high"?"bg-emerald-500":n==="medium"?"bg-amber-500":"bg-red-500";return p.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border-2 border-blue-100 dark:border-blue-900 shadow-lg text-center mb-12 relative z-10 transition-transform hover:scale-[1.01]",children:[p.jsx("div",{className:"absolute top-[-15px] left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-md",children:"Objective"}),p.jsxs("h2",{className:"font-black text-2xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 leading-tight",children:['"',t.objective,'"']}),p.jsx("div",{className:"absolute bottom-[-50px] left-1/2 w-1 h-[50px] bg-gray-200 dark:bg-gray-700 z-0"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative",children:[p.jsx("div",{className:"hidden md:block absolute top-[-25px] left-[16.66%] right-[16.66%] h-1 bg-gray-200 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 rounded-t-xl z-0"}),t.keyResults.map(n=>{const r=n.target>0?Math.round(n.current/n.target*100):0,s=e(n.confidence);return p.jsxs("div",{className:"relative pt-6",children:[p.jsx("div",{className:"absolute top-[-25px] left-1/2 w-1 h-[25px] bg-gray-200 dark:bg-gray-700 md:block hidden"}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-700 transition-all group h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",children:[p.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["KR #",n.id]}),p.jsx("div",{className:`w-3 h-3 rounded-full ${s}`,title:`Confidence: ${n.confidence}`})]}),p.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-4 h-12 line-clamp-2",children:n.text}),p.jsxs("div",{className:"space-y-1 mt-auto",children:[p.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-500 dark:text-gray-400",children:[p.jsx("span",{children:n.current}),p.jsx("span",{children:n.target})]}),p.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-900 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${r}%`}})}),p.jsxs("div",{className:"text-right text-sm font-black text-blue-600 mt-1",children:[r,"%"]})]})]})]},n.id)})]})]})}),Sz=Le.memo(({data:t})=>!t||!t.obstacles?p.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto animate-fade-in",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/30 dark:to-blue-900/30 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800 shadow-sm hover:shadow-md transition-shadow",children:[p.jsx("h3",{className:"text-sm font-bold text-indigo-500 uppercase mb-2",children:"Wish ()"}),p.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.wish,'"']})]}),p.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/30 dark:to-rose-900/30 p-6 rounded-2xl border border-pink-100 dark:border-pink-800 shadow-sm hover:shadow-md transition-shadow",children:[p.jsx("h3",{className:"text-sm font-bold text-pink-500 uppercase mb-2",children:"Outcome ()"}),p.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.outcome,'"']})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-2 flex items-center",children:[p.jsx("span",{className:"mr-2",children:""})," Obstacles & If-Then Plans"]}),t.obstacles.map(e=>p.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all overflow-hidden relative",children:[p.jsx("div",{className:"p-5 border-l-4 border-gray-400 bg-gray-50 dark:bg-gray-800 relative z-10 transition-transform group-hover:translate-x-1",children:p.jsxs("h4",{className:"font-bold text-gray-700 dark:text-gray-300 flex items-center",children:[p.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-xs px-2 py-1 rounded mr-3 text-gray-600 dark:text-gray-400",children:""}),e.text]})}),p.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border-t border-gray-100 dark:border-gray-700 flex items-start",children:[p.jsx("div",{className:"flex-shrink-0 mt-1",children:p.jsx("span",{className:"block w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs font-bold",children:"IF"})}),p.jsx("div",{className:"ml-3 flex-1",children:p.jsxs("p",{className:"text-emerald-800 dark:text-emerald-300 font-bold text-sm",children:[" ",e.plan]})}),p.jsxs("div",{className:"ml-2 flex flex-col items-center",children:[p.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Score"}),p.jsx("span",{className:"text-lg font-black text-emerald-500 leading-none",children:e.overcomeCount})]})]})]},e.id)),p.jsx("button",{className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl text-gray-400 hover:border-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition flex items-center justify-center font-bold text-sm",children:"+ "})]})]})),Cz=()=>{var N;const{targets:t}=kz(),[e,n]=O.useState("backward"),[r,s]=O.useState(!1),o=t.filter(I=>{var S;return((S=I.mode)==null?void 0:S.toLowerCase())===e.toLowerCase()}),l=I=>({milestones:[{date:"Future",title:I.data.goal_kgi||"Undefined Goal",type:"goal",completed:!1},{date:"Milestone",title:I.data.milestone_minus_1mo||"",type:"milestone",completed:!1},{date:"Today",title:"Current Status",type:"current",completed:!0},{date:"Now",title:I.data.first_action||"",type:"action",completed:!1}]}),u=I=>({wish:I.data.wish||"",outcome:I.data.outcome||"",obstacles:[{id:1,text:I.data.obstacle||"",plan:I.data.plan||"",overcomeCount:0}]}),d=I=>({objective:I.data.objective||"",keyResults:[{id:1,text:I.data.kr_1||"KR 1",current:0,target:100,confidence:"medium"},{id:2,text:I.data.kr_2||"KR 2",current:0,target:100,confidence:"medium"},{id:3,text:I.data.kr_3||"KR 3",current:0,target:100,confidence:"medium"}]}),m=I=>I?typeof I.toDate=="function"?I.toDate().toLocaleDateString():I instanceof Date?I.toLocaleDateString():String(I):"Unknown",y=()=>o.length===0?p.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500 dark:text-gray-400",children:p.jsxs("p",{className:"mb-4",children:["No ",e.toUpperCase()," targets found."]})}):p.jsx("div",{className:"space-y-12",children:o.map(I=>p.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-12 last:border-0",children:[p.jsxs("div",{className:"mb-4 text-xs text-gray-400 flex justify-end",children:["Created: ",m(I.createdAt)]}),e==="backward"&&p.jsx(Tz,{data:l(I)}),e==="woop"&&p.jsx(Sz,{data:u(I)}),e==="okr"&&p.jsx(Iz,{data:d(I)})]},I.id))}),w=o[0],E={title:((I,S)=>I?S==="backward"?I.data.goal_kgi||"KGI":S==="woop"?I.data.wish||"WISH":S==="okr"?I.data.objective||"Objective":"":"")(w,e),progress:Number(((N=w==null?void 0:w.data)==null?void 0:N.progress)||0),daysLeft:0,status:"good"};return p.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[p.jsx(Ez,{kgi:E,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:()=>s(!r)}),p.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 pb-6 pt-4",children:y()})]})},Az=[{id:"okr",title:"OKR (Objectives and Key Results)",subTitle:"",color:"blue",icon:"",concept:{summary:"ObjectiveKey Results",detail:"GoogleIntel60-70%"},useCases:[{title:"",before:"",after:"O:Rust KR:Rust13"},{title:"",before:"",after:"O:MVP KR:310030%"}],tips:[{q:"",a:"OKR60%Win"},{q:"KR",a:"50%100%70%NG"}]},{id:"woop",title:"WOOP (Wish, Outcome, Obstacle, Plan)",subTitle:"",color:"amber",icon:"",concept:{summary:"",detail:"If-ThenXY"},useCases:[{title:"",before:"",after:"W:30 O: Obs: Plan:"},{title:"",before:"",after:"Obs: Plan:"}],tips:[{q:"Obstacle",a:""},{q:"Plan",a:"5"}]},{id:"backward",title:"Backward Design ()",subTitle:"",color:"purple",icon:"",concept:{summary:"",detail:"ForecastingBackcasting"},useCases:[{title:"",before:"",after:"Goal: 1: 3:LP :"},{title:"",before:"",after:"Goal:3 2:20 1: :"}],tips:[{q:"",a:"KGI1OK"},{q:"",a:""}]}],Nz=Le.memo(({framework:t,onClick:e})=>p.jsxs("div",{className:"framework-card cursor-pointer bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-6 transition-all duration-300 hover:border-blue-500 hover:shadow-lg hover:scale-105 group",onClick:()=>e(t),role:"button",tabIndex:0,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&e(t)},children:[p.jsx("div",{className:"text-4xl mb-3 transform transition-transform group-hover:scale-110 duration-300",children:t.icon}),p.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:t.title}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 h-10",children:t.concept.summary}),p.jsxs("div",{className:"mt-4 flex items-center text-xs text-blue-600 dark:text-blue-400 font-medium opacity-80 group-hover:opacity-100 transition-opacity",children:[p.jsx("span",{children:""}),p.jsx("svg",{className:"w-4 h-4 ml-1 transform transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})),Rz=()=>{const{openModal:t}=gn();return p.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-900 overflow-y-auto custom-scrollbar",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 animate-fade-in",children:[p.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-8 flex items-center",children:[p.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500 mr-3",children:p.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),p.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-gray-300",children:" Wiki"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Az.map(e=>p.jsx(Nz,{framework:e,onClick:n=>t("wiki-framework",n)},e.id))})]})})},Ll={backward:{id:"backward",label:"Backward Design",description:"",steps:[{title:"Goal / KGI",description:"KGI",inputs:[{type:"textarea",placeholder:"20253311",key:"goal_kgi"}]},{title:"Milestone",description:"1",inputs:[{type:"textarea",placeholder:"100",key:"milestone_minus_1mo"}]},{title:"First Action",description:"",inputs:[{type:"textarea",placeholder:"",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"",steps:[{title:"Wish ()",description:"",inputs:[{type:"textarea",placeholder:"30",key:"wish"}]},{title:"Outcome ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"outcome"}]},{title:"Obstacle ()",description:"",inputs:[{type:"textarea",placeholder:"SNS",key:"obstacle"}]},{title:"Plan ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"(O)(KR)",steps:[{title:"Objective",description:"1",inputs:[{type:"textarea",placeholder:"",key:"objective"}]},{title:"Key Results",description:"3",inputs:[{type:"text",placeholder:"KR 1 (: GitHub 1,000)",key:"kr_1"},{type:"text",placeholder:"KR 2 (:  500)",key:"kr_2"},{type:"text",placeholder:"KR 3 (:  40%)",key:"kr_3"}]}]}},Pz=({mode:t,currentStep:e})=>{const n=Ll[t],r=n.steps.length;return p.jsx("div",{className:"flex items-center justify-between mb-8 max-w-2xl mx-auto",children:p.jsx("div",{className:"flex items-center space-x-1 mx-auto w-full justify-center",children:n.steps.map((s,o)=>{const l=o+1,u=e>l,d=e===l,m=e<l;return p.jsxs(Le.Fragment,{children:[p.jsxs("div",{className:"flex flex-col items-center relative z-10 w-16",children:[p.jsx("div",{className:Se("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold",d&&"bg-blue-600 text-white ring-4 ring-blue-100 dark:ring-blue-900",u&&"bg-green-500 text-white",m&&"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:u?"":l}),p.jsx("div",{className:Se("text-[10px] mt-1 font-medium text-center w-20 truncate",d?"text-blue-600 dark:text-blue-400":"text-gray-400"),children:s.title})]}),o<r-1&&p.jsx("div",{className:Se("h-1 flex-1 mx-[-10px] mt-[-14px] z-0 transition-all duration-500 rounded-full",e>l?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},o)})})})},jz=({mode:t,step:e,onBack:n,onNext:r,onFinish:s})=>{const o=Ll[t],l=e-1,u=o.steps[l],d=o.steps.length,[m,y]=O.useState({}),w=(E,N)=>{y(I=>({...I,[E]:N}))},x=()=>{const E=u.inputs.reduce((N,I,S)=>{const V=m[S]||"";return I.key&&(N[I.key]=V),N},{});e<d?r(E):s(E)};return p.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[p.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:[o.label," Mode"]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-8 min-h-[500px] flex flex-col",children:[p.jsx(Pz,{mode:t,currentStep:e}),p.jsxs("div",{className:"flex-1 animate-fade-in",children:[p.jsxs("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-100",children:["Q",e,". ",u.title]}),p.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:u.description}),p.jsx("div",{className:"mb-8 space-y-4",children:u.inputs.map((E,N)=>p.jsx("div",{children:E.type==="textarea"?p.jsx("textarea",{className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",rows:5,placeholder:E.placeholder,value:m[N]||"",onChange:I=>w(N,I.target.value)}):p.jsx("input",{type:"text",className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",placeholder:E.placeholder,value:m[N]||"",onChange:I=>w(N,I.target.value)})},E.key||N))})]}),p.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[p.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition font-medium",children:""}),e<d?p.jsxs("button",{onClick:x,className:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-md transition font-medium flex items-center",children:["",p.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]}):p.jsxs("button",{onClick:x,className:"px-8 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 shadow-lg transition font-medium flex items-center transform hover:scale-105",children:[p.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),""]})]})]})]})},Dz=({currentMode:t,onModeChange:e,onStart:n})=>{const r=Ll[t],s={okr:["","",""],woop:["","",""],backward:["","",""]};return p.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-full max-h-[700px] flex flex-col py-6",children:[p.jsx("div",{className:"mb-4 flex-shrink-0",children:p.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[p.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),p.jsx("span",{className:"font-medium",children:""}),p.jsx("svg",{className:"w-3 h-3 mx-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),p.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:""})]})}),p.jsxs("div",{className:"mb-6 flex-shrink-0",children:[p.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:""}),p.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:Object.keys(Ll).map(o=>p.jsx("button",{onClick:()=>e(o),className:Se("flex-1 py-2 text-xs font-bold rounded-lg transition-all",t===o?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:Ll[o].label},o))})]}),p.jsx("div",{className:"flex-1 mb-6 min-h-0",children:p.jsx("div",{className:"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden shadow-xl",children:p.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[p.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mb-4 shadow-lg flex-shrink-0",children:p.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 text-xl",children:r.label}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-2xl leading-relaxed",children:r.description}),p.jsx("div",{className:"mt-6 flex flex-wrap gap-2 justify-center",children:(s[t]||[]).map(o=>p.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300 shadow-sm",children:o},o))})]})})}),p.jsx("div",{className:"flex justify-center pb-4 flex-shrink-0",children:p.jsxs("button",{onClick:n,className:"group inline-flex items-center px-6 py-3 border-2 border-transparent shadow-xl font-bold rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition-all transform hover:scale-105 active:scale-95",children:[p.jsx("span",{children:""}),p.jsx("svg",{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},Oz=()=>{const[t,e]=O.useState("backward"),[n,r]=O.useState(0),[s,o]=O.useState({}),{setView:l,viewData:u}=Ma(),{workspaceId:d}=Sr();O.useEffect(()=>{u!=null&&u.mode&&(e(u.mode),r(0))},[u]);const m=x=>{o(E=>({...E,...x})),r(E=>E+1)},y=async x=>{const E={...s,...x};if(!d){alert("");return}try{await BF(d,{mode:t,data:E}),console.log("Wizard Completed, Saved to Firestore",E),alert(`${Ll[t].label}`),r(0),o({}),l("target-dashboard")}catch(N){console.error("Failed to save wizard target:",N),alert("")}},w=()=>{r(x=>Math.max(0,x-1))};return n===0?p.jsx(Dz,{currentMode:t,onModeChange:e,onStart:()=>r(1)}):p.jsx(jz,{mode:t,step:n,onBack:w,onNext:m,onFinish:y})},Lz=(t,e)=>{const n=Yf(ko(cc,{activationConstraint:{distance:5}}),ko(Nk,{activationConstraint:{delay:At.DND.TOUCH_DELAY,tolerance:5}})),{language:r}=Ir(),{t:s}=bc(r),o=O.useRef(t),l=O.useCallback(()=>{o.current=t},[t]),u=O.useCallback(async d=>{var I,S,V,W;const{active:m,over:y}=d;if(!y)return;const w=String(m.id),x=String(y.id),N=(U=>U.startsWith(At.DND.PREFIX_TASK)?U.split(":")[1]:null)(w);if(N){const U=(I=y.data.current)==null?void 0:I.type,G=(S=y.data.current)==null?void 0:S.value,Z={};if(U===At.DND.TYPE_PROJECT&&(Z.projectId=G),U===At.DND.TYPE_INBOX&&(Z.projectId=null),U===At.DND.TYPE_TIMEBLOCK&&(Z.timeBlockId=G==="unassigned"?null:G),Object.keys(Z).length>0)try{await J0(N,Z)}catch(K){console.error("Failed to update task via dnd",K),Nt.error(s("msg.dnd.reorderFailed")||s("error"))}}if(w!==x&&!N){const U=o.current,G=U.findIndex(K=>K.id===w),Z=U.findIndex(K=>K.id===x);if(G!==-1&&Z!==-1){const K=Tc(U,G,Z);(V=e==null?void 0:e.onOptimisticReorder)==null||V.call(e,K);try{await sF(K)}catch(A){console.error("Failed to update project order",A),Nt.error(s("msg.dnd.reorderFailed")||s("error")),(W=e==null?void 0:e.onRevertReorder)==null||W.call(e,U)}}}},[t,e,s]);return{sensors:n,handleDragEnd:u,handleDragStart:l}},Mz=()=>{const{workspaceId:t,loading:e}=Sr(),n=O.useCallback(u=>t?AF(t,u):()=>{},[t]),r=t?CF(t):!1,{data:s,isPending:o}=kc(["labels",t],n,t&&r?SF(t):void 0);return{labels:s||[],loading:e||!!t&&o}},Vz=()=>{const{fontEn:t,fontJp:e,fontSize:n,density:r,themeMode:s}=Ir(),{setSidebarDensity:o}=M0();O.useLayoutEffect(()=>{const l=document.documentElement,u=document.body;s==="dark"?l.classList.add("dark"):s==="light"?l.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?l.classList.add("dark"):l.classList.remove("dark"),l.style.setProperty("--font-en",`"${t}"`),l.style.setProperty("--font-jp",`"${e}"`);const d=["font-app-sm","font-app-base","font-app-md","font-app-lg","font-app-xl"];u.classList.remove(...d),u.classList.add(`font-app-${n}`);const m=["app-density-compact","app-density-normal","app-density-comfortable","app-density-spacious"];u.classList.remove(...m),u.classList.add(`app-density-${r}`),o(r);const y=window.matchMedia("(prefers-color-scheme: dark)"),w=()=>{s==="system"&&(y.matches?l.classList.add("dark"):l.classList.remove("dark"))};return y.addEventListener("change",w),()=>y.removeEventListener("change",w)},[s,t,e,n,r,o])},Fz=()=>{Vz();const{filterType:t,targetId:e,query:n}=Wr(),{currentView:r,setView:s}=Ma(),{setFilter:o}=Wr(),{projects:l,setProjectsOverride:u}=Ip(),{labels:d}=Mz(),[m,y]=Le.useState({user:Ge.currentUser,loading:!Ge.currentUser}),w=O.useCallback(S=>{const V=S.target,W=["INPUT","TEXTAREA"].includes(V.tagName)||V.closest("[contenteditable]"),U=document.querySelector('[role="dialog"]');S.key==="/"&&!W&&!U&&(S.preventDefault(),o("search"),s("search"))},[o,s]);Le.useEffect(()=>{const S=wE(Ge,V=>{y({user:V,loading:!1})});return document.addEventListener("keydown",w),()=>{S(),document.removeEventListener("keydown",w)}},[w]);const{sensors:x,handleDragEnd:E,handleDragStart:N}=Lz(l,{onOptimisticReorder:u,onRevertReorder:u}),I=O.useMemo(()=>{var S,V;if(r==="wizard")return"Goal Wizard";if(r==="target-dashboard")return"Target Dashboard";if(r==="wiki")return"Framework Wiki";if(r==="search")return n?`"${n}" `:"";if(t==="project")return((S=l.find(W=>W.id===e))==null?void 0:S.name)||"Project";if(t==="label")return((V=d.find(W=>W.id===e))==null?void 0:V.name)||"Label";if(t==="search")return n?`"${n}" `:"";switch(t){case"inbox":return"Inbox";case"today":return"Today";case"upcoming":return"Upcoming";case"important":return"Important";case"custom":return"All Tasks";default:return"TaskMg"}},[r,n,t,e,l,d]);return m.loading?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"..."})]})}):m.user?p.jsxs(np,{sensors:x,collisionDetection:Jf,onDragEnd:E,onDragStart:N,children:[p.jsx(NO,{}),p.jsx(H6,{}),p.jsx(VV,{sidebarContent:p.jsx(yz,{}),title:I,children:r==="wizard"?p.jsx(Oz,{}):r==="target-dashboard"?p.jsx(Cz,{}):r==="wiki"?p.jsx(Rz,{}):r==="search"?p.jsx(xz,{}):p.jsx(c1,{})})]}):p.jsx(O4,{})},zz=new $S({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1,retry:!1}}});PV();const u1=document.getElementById("app");if(!u1)throw new Error("Failed to find the root element");const Uz=p.jsx(V6,{children:p.jsx(WS,{client:zz,children:p.jsx(Fz,{})})});lC.createRoot(u1).render(Uz);
