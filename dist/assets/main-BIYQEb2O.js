var yS=Object.defineProperty;var hw=t=>{throw TypeError(t)};var vS=(t,e,n)=>e in t?yS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Mr=(t,e,n)=>vS(t,typeof e!="symbol"?e+"":e,n),ig=(t,e,n)=>e.has(t)||hw("Cannot "+n);var z=(t,e,n)=>(ig(t,e,"read from private field"),n?n.call(t):e.get(t)),Oe=(t,e,n)=>e.has(t)?hw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),me=(t,e,n,r)=>(ig(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Je=(t,e,n)=>(ig(t,e,"access private method"),n);var Fh=(t,e,n,r)=>({set _(s){me(t,e,s,n)},get _(){return z(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function ik(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var og={exports:{}},ou={},ag={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw;function _S(){if(fw)return Ke;fw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function x($){return $===null||typeof $!="object"?null:($=w&&$[w]||$["@@iterator"],typeof $=="function"?$:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,I={};function S($,ee,ce){this.props=$,this.context=ee,this.refs=I,this.updater=ce||E}S.prototype.isReactComponent={},S.prototype.setState=function($,ee){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ee,"setState")},S.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function V(){}V.prototype=S.prototype;function W($,ee,ce){this.props=$,this.context=ee,this.refs=I,this.updater=ce||E}var U=W.prototype=new V;U.constructor=W,N(U,S.prototype),U.isPureReactComponent=!0;var G=Array.isArray,Z=Object.prototype.hasOwnProperty,K={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function k($,ee,ce){var be,De={},Re=null,Te=null;if(ee!=null)for(be in ee.ref!==void 0&&(Te=ee.ref),ee.key!==void 0&&(Re=""+ee.key),ee)Z.call(ee,be)&&!A.hasOwnProperty(be)&&(De[be]=ee[be]);var Ue=arguments.length-2;if(Ue===1)De.children=ce;else if(1<Ue){for(var ne=Array(Ue),he=0;he<Ue;he++)ne[he]=arguments[he+2];De.children=ne}if($&&$.defaultProps)for(be in Ue=$.defaultProps,Ue)De[be]===void 0&&(De[be]=Ue[be]);return{$$typeof:t,type:$,key:Re,ref:Te,props:De,_owner:K.current}}function R($,ee){return{$$typeof:t,type:$.type,key:ee,ref:$.ref,props:$.props,_owner:$._owner}}function P($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function O($){var ee={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ce){return ee[ce]})}var M=/\/+/g;function j($,ee){return typeof $=="object"&&$!==null&&$.key!=null?O(""+$.key):ee.toString(36)}function Ce($,ee,ce,be,De){var Re=typeof $;(Re==="undefined"||Re==="boolean")&&($=null);var Te=!1;if($===null)Te=!0;else switch(Re){case"string":case"number":Te=!0;break;case"object":switch($.$$typeof){case t:case e:Te=!0}}if(Te)return Te=$,De=De(Te),$=be===""?"."+j(Te,0):be,G(De)?(ce="",$!=null&&(ce=$.replace(M,"$&/")+"/"),Ce(De,ee,ce,"",function(he){return he})):De!=null&&(P(De)&&(De=R(De,ce+(!De.key||Te&&Te.key===De.key?"":(""+De.key).replace(M,"$&/")+"/")+$)),ee.push(De)),1;if(Te=0,be=be===""?".":be+":",G($))for(var Ue=0;Ue<$.length;Ue++){Re=$[Ue];var ne=be+j(Re,Ue);Te+=Ce(Re,ee,ce,ne,De)}else if(ne=x($),typeof ne=="function")for($=ne.call($),Ue=0;!(Re=$.next()).done;)Re=Re.value,ne=be+j(Re,Ue++),Te+=Ce(Re,ee,ce,ne,De);else if(Re==="object")throw ee=String($),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Te}function nt($,ee,ce){if($==null)return $;var be=[],De=0;return Ce($,be,"","",function(Re){return ee.call(ce,Re,De++)}),be}function Qe($){if($._status===-1){var ee=$._result;ee=ee(),ee.then(function(ce){($._status===0||$._status===-1)&&($._status=1,$._result=ce)},function(ce){($._status===0||$._status===-1)&&($._status=2,$._result=ce)}),$._status===-1&&($._status=0,$._result=ee)}if($._status===1)return $._result.default;throw $._result}var Ne={current:null},X={transition:null},pe={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:X,ReactCurrentOwner:K};function de(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:nt,forEach:function($,ee,ce){nt($,function(){ee.apply(this,arguments)},ce)},count:function($){var ee=0;return nt($,function(){ee++}),ee},toArray:function($){return nt($,function(ee){return ee})||[]},only:function($){if(!P($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Ke.Component=S,Ke.Fragment=n,Ke.Profiler=s,Ke.PureComponent=W,Ke.StrictMode=r,Ke.Suspense=d,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Ke.act=de,Ke.cloneElement=function($,ee,ce){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var be=N({},$.props),De=$.key,Re=$.ref,Te=$._owner;if(ee!=null){if(ee.ref!==void 0&&(Re=ee.ref,Te=K.current),ee.key!==void 0&&(De=""+ee.key),$.type&&$.type.defaultProps)var Ue=$.type.defaultProps;for(ne in ee)Z.call(ee,ne)&&!A.hasOwnProperty(ne)&&(be[ne]=ee[ne]===void 0&&Ue!==void 0?Ue[ne]:ee[ne])}var ne=arguments.length-2;if(ne===1)be.children=ce;else if(1<ne){Ue=Array(ne);for(var he=0;he<ne;he++)Ue[he]=arguments[he+2];be.children=Ue}return{$$typeof:t,type:$.type,key:De,ref:Re,props:be,_owner:Te}},Ke.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:o,_context:$},$.Consumer=$},Ke.createElement=k,Ke.createFactory=function($){var ee=k.bind(null,$);return ee.type=$,ee},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function($){return{$$typeof:u,render:$}},Ke.isValidElement=P,Ke.lazy=function($){return{$$typeof:y,_payload:{_status:-1,_result:$},_init:Qe}},Ke.memo=function($,ee){return{$$typeof:m,type:$,compare:ee===void 0?null:ee}},Ke.startTransition=function($){var ee=X.transition;X.transition={};try{$()}finally{X.transition=ee}},Ke.unstable_act=de,Ke.useCallback=function($,ee){return Ne.current.useCallback($,ee)},Ke.useContext=function($){return Ne.current.useContext($)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function($){return Ne.current.useDeferredValue($)},Ke.useEffect=function($,ee){return Ne.current.useEffect($,ee)},Ke.useId=function(){return Ne.current.useId()},Ke.useImperativeHandle=function($,ee,ce){return Ne.current.useImperativeHandle($,ee,ce)},Ke.useInsertionEffect=function($,ee){return Ne.current.useInsertionEffect($,ee)},Ke.useLayoutEffect=function($,ee){return Ne.current.useLayoutEffect($,ee)},Ke.useMemo=function($,ee){return Ne.current.useMemo($,ee)},Ke.useReducer=function($,ee,ce){return Ne.current.useReducer($,ee,ce)},Ke.useRef=function($){return Ne.current.useRef($)},Ke.useState=function($){return Ne.current.useState($)},Ke.useSyncExternalStore=function($,ee,ce){return Ne.current.useSyncExternalStore($,ee,ce)},Ke.useTransition=function(){return Ne.current.useTransition()},Ke.version="18.3.1",Ke}var pw;function Ny(){return pw||(pw=1,ag.exports=_S()),ag.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function wS(){if(mw)return ou;mw=1;var t=Ny(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var y,w={},x=null,E=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(E=d.ref);for(y in d)r.call(d,y)&&!o.hasOwnProperty(y)&&(w[y]=d[y]);if(u&&u.defaultProps)for(y in d=u.defaultProps,d)w[y]===void 0&&(w[y]=d[y]);return{$$typeof:e,type:u,key:x,ref:E,props:w,_owner:s.current}}return ou.Fragment=n,ou.jsx=l,ou.jsxs=l,ou}var gw;function bS(){return gw||(gw=1,og.exports=wS()),og.exports}var p=bS(),ed=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xS={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},io,Ay,Qx,kS=(Qx=class{constructor(){Oe(this,io,xS);Oe(this,Ay,!1)}setTimeoutProvider(t){me(this,io,t)}setTimeout(t,e){return z(this,io).setTimeout(t,e)}clearTimeout(t){z(this,io).clearTimeout(t)}setInterval(t,e){return z(this,io).setInterval(t,e)}clearInterval(t){z(this,io).clearInterval(t)}},io=new WeakMap,Ay=new WeakMap,Qx),ha=new kS;function ES(t){setTimeout(t,0)}var Ta=typeof window>"u"||"Deno"in globalThis;function ur(){}function TS(t,e){return typeof t=="function"?t(e):t}function Rg(t){return typeof t=="number"&&t>=0&&t!==1/0}function ok(t,e){return Math.max(t+(e||0)-Date.now(),0)}function yo(t,e){return typeof t=="function"?t(e):t}function Fr(t,e){return typeof t=="function"?t(e):t}function yw(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==Ry(l,e.options))return!1}else if(!Nu(e.queryKey,l))return!1}if(n!=="all"){const d=e.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||o&&!o(e))}function vw(t,e){const{exact:n,status:r,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(Au(e.options.mutationKey)!==Au(o))return!1}else if(!Nu(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Ry(t,e){return((e==null?void 0:e.queryKeyHashFn)||Au)(t)}function Au(t){return JSON.stringify(t,(e,n)=>jg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Nu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Nu(t[n],e[n])):!1}var IS=Object.prototype.hasOwnProperty;function ak(t,e){if(t===e)return t;const n=_w(t)&&_w(e);if(!n&&!(jg(t)&&jg(e)))return e;const s=(n?t:Object.keys(t)).length,o=n?e:Object.keys(e),l=o.length,u=n?new Array(l):{};let d=0;for(let m=0;m<l;m++){const y=n?m:o[m],w=t[y],x=e[y];if(w===x){u[y]=w,(n?m<s:IS.call(t,y))&&d++;continue}if(w===null||x===null||typeof w!="object"||typeof x!="object"){u[y]=x;continue}const E=ak(w,x);u[y]=E,E===w&&d++}return s===l&&d===s?t:u}function Pg(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function _w(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function jg(t){if(!ww(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!ww(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ww(t){return Object.prototype.toString.call(t)==="[object Object]"}function SS(t){return new Promise(e=>{ha.setTimeout(e,t)})}function Dg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ak(t,e):e}function CS(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function AS(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Py=Symbol();function lk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Py?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function NS(t,e){return typeof t=="function"?t(...e):!!t}function RS(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var pa,oo,Ml,Zx,PS=(Zx=class extends ed{constructor(){super();Oe(this,pa);Oe(this,oo);Oe(this,Ml);me(this,Ml,e=>{if(!Ta&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){z(this,oo)||this.setEventListener(z(this,Ml))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,oo))==null||e.call(this),me(this,oo,void 0))}setEventListener(e){var n;me(this,Ml,e),(n=z(this,oo))==null||n.call(this),me(this,oo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,pa)!==e&&(me(this,pa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof z(this,pa)=="boolean"?z(this,pa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},pa=new WeakMap,oo=new WeakMap,Ml=new WeakMap,Zx),jy=new PS;function Og(){let t,e;const n=new Promise((s,o)=>{t=s,e=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var jS=ES;function DS(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=jS;const o=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(d=>{n(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||l()}return d},batchCalls:u=>(...d)=>{o(()=>{u(...d)})},schedule:o,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Tn=DS(),Vl,ao,Fl,Yx,OS=(Yx=class extends ed{constructor(){super();Oe(this,Vl,!0);Oe(this,ao);Oe(this,Fl);me(this,Fl,e=>{if(!Ta&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,ao)||this.setEventListener(z(this,Fl))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,ao))==null||e.call(this),me(this,ao,void 0))}setEventListener(e){var n;me(this,Fl,e),(n=z(this,ao))==null||n.call(this),me(this,ao,e(this.setOnline.bind(this)))}setOnline(e){z(this,Vl)!==e&&(me(this,Vl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,Vl)}},Vl=new WeakMap,ao=new WeakMap,Fl=new WeakMap,Yx),kf=new OS;function LS(t){return Math.min(1e3*2**t,3e4)}function ck(t){return(t??"online")==="online"?kf.isOnline():!0}var Lg=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function uk(t){let e=!1,n=0,r;const s=Og(),o=()=>s.status!=="pending",l=I=>{var S;if(!o()){const V=new Lg(I);x(V),(S=t.onCancel)==null||S.call(t,V)}},u=()=>{e=!0},d=()=>{e=!1},m=()=>jy.isFocused()&&(t.networkMode==="always"||kf.isOnline())&&t.canRun(),y=()=>ck(t.networkMode)&&t.canRun(),w=I=>{o()||(r==null||r(),s.resolve(I))},x=I=>{o()||(r==null||r(),s.reject(I))},E=()=>new Promise(I=>{var S;r=V=>{(o()||m())&&I(V)},(S=t.onPause)==null||S.call(t)}).then(()=>{var I;r=void 0,o()||(I=t.onContinue)==null||I.call(t)}),N=()=>{if(o())return;let I;const S=n===0?t.initialPromise:void 0;try{I=S??t.fn()}catch(V){I=Promise.reject(V)}Promise.resolve(I).then(w).catch(V=>{var K;if(o())return;const W=t.retry??(Ta?0:3),U=t.retryDelay??LS,G=typeof U=="function"?U(n,V):U,Z=W===!0||typeof W=="number"&&n<W||typeof W=="function"&&W(n,V);if(e||!Z){x(V);return}n++,(K=t.onFail)==null||K.call(t,n,V),SS(G).then(()=>m()?void 0:E()).then(()=>{e?x(V):N()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r==null||r(),s),cancelRetry:u,continueRetry:d,canStart:y,start:()=>(y()?N():E().then(N),s)}}var ma,Jx,dk=(Jx=class{constructor(){Oe(this,ma)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rg(this.gcTime)&&me(this,ma,ha.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ta?1/0:300*1e3))}clearGcTimeout(){z(this,ma)&&(ha.clearTimeout(z(this,ma)),me(this,ma,void 0))}},ma=new WeakMap,Jx),ga,zl,Vr,ya,hn,Qu,va,ls,si,Xx,MS=(Xx=class extends dk{constructor(n){super();Oe(this,ls);Oe(this,ga);Oe(this,zl);Oe(this,Vr);Oe(this,ya);Oe(this,hn);Oe(this,Qu);Oe(this,va);me(this,va,!1),me(this,Qu,n.defaultOptions),this.setOptions(n.options),this.observers=[],me(this,ya,n.client),me(this,Vr,z(this,ya).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,me(this,ga,xw(this.options)),this.state=n.state??z(this,ga),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=z(this,hn))==null?void 0:n.promise}setOptions(n){if(this.options={...z(this,Qu),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=xw(this.options);r.data!==void 0&&(this.setState(bw(r.data,r.dataUpdatedAt)),me(this,ga,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,Vr).remove(this)}setData(n,r){const s=Dg(this.state.data,n,this.options);return Je(this,ls,si).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Je(this,ls,si).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,o;const r=(s=z(this,hn))==null?void 0:s.promise;return(o=z(this,hn))==null||o.cancel(n),r?r.then(ur).catch(ur):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,ga))}isActive(){return this.observers.some(n=>Fr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Py||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>yo(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!ok(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=z(this,hn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=z(this,hn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),z(this,Vr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(z(this,hn)&&(z(this,va)?z(this,hn).cancel({revert:!0}):z(this,hn).cancelRetry()),this.scheduleGc()),z(this,Vr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Je(this,ls,si).call(this,{type:"invalidate"})}async fetch(n,r){var m,y,w,x,E,N,I,S,V,W,U,G;if(this.state.fetchStatus!=="idle"&&((m=z(this,hn))==null?void 0:m.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(z(this,hn))return z(this,hn).continueRetry(),z(this,hn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const Z=this.observers.find(K=>K.options.queryFn);Z&&this.setOptions(Z.options)}const s=new AbortController,o=Z=>{Object.defineProperty(Z,"signal",{enumerable:!0,get:()=>(me(this,va,!0),s.signal)})},l=()=>{const Z=lk(this.options,r),A=(()=>{const k={client:z(this,ya),queryKey:this.queryKey,meta:this.meta};return o(k),k})();return me(this,va,!1),this.options.persister?this.options.persister(Z,A,this):Z(A)},d=(()=>{const Z={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:z(this,ya),state:this.state,fetchFn:l};return o(Z),Z})();(y=this.options.behavior)==null||y.onFetch(d,this),me(this,zl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((w=d.fetchOptions)==null?void 0:w.meta))&&Je(this,ls,si).call(this,{type:"fetch",meta:(x=d.fetchOptions)==null?void 0:x.meta}),me(this,hn,uk({initialPromise:r==null?void 0:r.initialPromise,fn:d.fetchFn,onCancel:Z=>{Z instanceof Lg&&Z.revert&&this.setState({...z(this,zl),fetchStatus:"idle"}),s.abort()},onFail:(Z,K)=>{Je(this,ls,si).call(this,{type:"failed",failureCount:Z,error:K})},onPause:()=>{Je(this,ls,si).call(this,{type:"pause"})},onContinue:()=>{Je(this,ls,si).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const Z=await z(this,hn).start();if(Z===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(Z),(N=(E=z(this,Vr).config).onSuccess)==null||N.call(E,Z,this),(S=(I=z(this,Vr).config).onSettled)==null||S.call(I,Z,this.state.error,this),Z}catch(Z){if(Z instanceof Lg){if(Z.silent)return z(this,hn).promise;if(Z.revert){if(this.state.data===void 0)throw Z;return this.state.data}}throw Je(this,ls,si).call(this,{type:"error",error:Z}),(W=(V=z(this,Vr).config).onError)==null||W.call(V,Z,this),(G=(U=z(this,Vr).config).onSettled)==null||G.call(U,this.state.data,Z,this),Z}finally{this.scheduleGc()}}},ga=new WeakMap,zl=new WeakMap,Vr=new WeakMap,ya=new WeakMap,hn=new WeakMap,Qu=new WeakMap,va=new WeakMap,ls=new WeakSet,si=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...hk(s.data,this.options),fetchMeta:n.meta??null};case"success":const o={...s,...bw(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return me(this,zl,n.manual?o:void 0),o;case"error":const l=n.error;return{...s,error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Tn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),z(this,Vr).notify({query:this,type:"updated",action:n})})},Xx);function hk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ck(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function bw(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function xw(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var cr,Xe,Zu,Hn,_a,Ul,oi,lo,Yu,Bl,$l,wa,ba,co,Wl,ut,uu,Mg,Vg,Fg,zg,Ug,Bg,$g,fk,ek,VS=(ek=class extends ed{constructor(e,n){super();Oe(this,ut);Oe(this,cr);Oe(this,Xe);Oe(this,Zu);Oe(this,Hn);Oe(this,_a);Oe(this,Ul);Oe(this,oi);Oe(this,lo);Oe(this,Yu);Oe(this,Bl);Oe(this,$l);Oe(this,wa);Oe(this,ba);Oe(this,co);Oe(this,Wl,new Set);this.options=n,me(this,cr,e),me(this,lo,null),me(this,oi,Og()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(z(this,Xe).addObserver(this),kw(z(this,Xe),this.options)?Je(this,ut,uu).call(this):this.updateResult(),Je(this,ut,zg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Wg(z(this,Xe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Wg(z(this,Xe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Je(this,ut,Ug).call(this),Je(this,ut,Bg).call(this),z(this,Xe).removeObserver(this)}setOptions(e){const n=this.options,r=z(this,Xe);if(this.options=z(this,cr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fr(this.options.enabled,z(this,Xe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Je(this,ut,$g).call(this),z(this,Xe).setOptions(this.options),n._defaulted&&!Pg(this.options,n)&&z(this,cr).getQueryCache().notify({type:"observerOptionsUpdated",query:z(this,Xe),observer:this});const s=this.hasListeners();s&&Ew(z(this,Xe),r,this.options,n)&&Je(this,ut,uu).call(this),this.updateResult(),s&&(z(this,Xe)!==r||Fr(this.options.enabled,z(this,Xe))!==Fr(n.enabled,z(this,Xe))||yo(this.options.staleTime,z(this,Xe))!==yo(n.staleTime,z(this,Xe)))&&Je(this,ut,Mg).call(this);const o=Je(this,ut,Vg).call(this);s&&(z(this,Xe)!==r||Fr(this.options.enabled,z(this,Xe))!==Fr(n.enabled,z(this,Xe))||o!==z(this,co))&&Je(this,ut,Fg).call(this,o)}getOptimisticResult(e){const n=z(this,cr).getQueryCache().build(z(this,cr),e),r=this.createResult(n,e);return zS(this,r)&&(me(this,Hn,r),me(this,Ul,this.options),me(this,_a,z(this,Xe).state)),r}getCurrentResult(){return z(this,Hn)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&z(this,oi).status==="pending"&&z(this,oi).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){z(this,Wl).add(e)}getCurrentQuery(){return z(this,Xe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=z(this,cr).defaultQueryOptions(e),r=z(this,cr).getQueryCache().build(z(this,cr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Je(this,ut,uu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),z(this,Hn)))}createResult(e,n){var R;const r=z(this,Xe),s=this.options,o=z(this,Hn),l=z(this,_a),u=z(this,Ul),m=e!==r?e.state:z(this,Zu),{state:y}=e;let w={...y},x=!1,E;if(n._optimisticResults){const P=this.hasListeners(),O=!P&&kw(e,n),M=P&&Ew(e,r,n,s);(O||M)&&(w={...w,...hk(y.data,e.options)}),n._optimisticResults==="isRestoring"&&(w.fetchStatus="idle")}let{error:N,errorUpdatedAt:I,status:S}=w;E=w.data;let V=!1;if(n.placeholderData!==void 0&&E===void 0&&S==="pending"){let P;o!=null&&o.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(P=o.data,V=!0):P=typeof n.placeholderData=="function"?n.placeholderData((R=z(this,$l))==null?void 0:R.state.data,z(this,$l)):n.placeholderData,P!==void 0&&(S="success",E=Dg(o==null?void 0:o.data,P,n),x=!0)}if(n.select&&E!==void 0&&!V)if(o&&E===(l==null?void 0:l.data)&&n.select===z(this,Yu))E=z(this,Bl);else try{me(this,Yu,n.select),E=n.select(E),E=Dg(o==null?void 0:o.data,E,n),me(this,Bl,E),me(this,lo,null)}catch(P){me(this,lo,P)}z(this,lo)&&(N=z(this,lo),E=z(this,Bl),I=Date.now(),S="error");const W=w.fetchStatus==="fetching",U=S==="pending",G=S==="error",Z=U&&W,K=E!==void 0,k={status:S,fetchStatus:w.fetchStatus,isPending:U,isSuccess:S==="success",isError:G,isInitialLoading:Z,isLoading:Z,data:E,dataUpdatedAt:w.dataUpdatedAt,error:N,errorUpdatedAt:I,failureCount:w.fetchFailureCount,failureReason:w.fetchFailureReason,errorUpdateCount:w.errorUpdateCount,isFetched:w.dataUpdateCount>0||w.errorUpdateCount>0,isFetchedAfterMount:w.dataUpdateCount>m.dataUpdateCount||w.errorUpdateCount>m.errorUpdateCount,isFetching:W,isRefetching:W&&!U,isLoadingError:G&&!K,isPaused:w.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:G&&K,isStale:Dy(e,n),refetch:this.refetch,promise:z(this,oi),isEnabled:Fr(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=j=>{k.status==="error"?j.reject(k.error):k.data!==void 0&&j.resolve(k.data)},O=()=>{const j=me(this,oi,k.promise=Og());P(j)},M=z(this,oi);switch(M.status){case"pending":e.queryHash===r.queryHash&&P(M);break;case"fulfilled":(k.status==="error"||k.data!==M.value)&&O();break;case"rejected":(k.status!=="error"||k.error!==M.reason)&&O();break}}return k}updateResult(){const e=z(this,Hn),n=this.createResult(z(this,Xe),this.options);if(me(this,_a,z(this,Xe).state),me(this,Ul,this.options),z(this,_a).data!==void 0&&me(this,$l,z(this,Xe)),Pg(n,e))return;me(this,Hn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!z(this,Wl).size)return!0;const l=new Set(o??z(this,Wl));return this.options.throwOnError&&l.add("error"),Object.keys(z(this,Hn)).some(u=>{const d=u;return z(this,Hn)[d]!==e[d]&&l.has(d)})};Je(this,ut,fk).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Je(this,ut,zg).call(this)}},cr=new WeakMap,Xe=new WeakMap,Zu=new WeakMap,Hn=new WeakMap,_a=new WeakMap,Ul=new WeakMap,oi=new WeakMap,lo=new WeakMap,Yu=new WeakMap,Bl=new WeakMap,$l=new WeakMap,wa=new WeakMap,ba=new WeakMap,co=new WeakMap,Wl=new WeakMap,ut=new WeakSet,uu=function(e){Je(this,ut,$g).call(this);let n=z(this,Xe).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(ur)),n},Mg=function(){Je(this,ut,Ug).call(this);const e=yo(this.options.staleTime,z(this,Xe));if(Ta||z(this,Hn).isStale||!Rg(e))return;const r=ok(z(this,Hn).dataUpdatedAt,e)+1;me(this,wa,ha.setTimeout(()=>{z(this,Hn).isStale||this.updateResult()},r))},Vg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(z(this,Xe)):this.options.refetchInterval)??!1},Fg=function(e){Je(this,ut,Bg).call(this),me(this,co,e),!(Ta||Fr(this.options.enabled,z(this,Xe))===!1||!Rg(z(this,co))||z(this,co)===0)&&me(this,ba,ha.setInterval(()=>{(this.options.refetchIntervalInBackground||jy.isFocused())&&Je(this,ut,uu).call(this)},z(this,co)))},zg=function(){Je(this,ut,Mg).call(this),Je(this,ut,Fg).call(this,Je(this,ut,Vg).call(this))},Ug=function(){z(this,wa)&&(ha.clearTimeout(z(this,wa)),me(this,wa,void 0))},Bg=function(){z(this,ba)&&(ha.clearInterval(z(this,ba)),me(this,ba,void 0))},$g=function(){const e=z(this,cr).getQueryCache().build(z(this,cr),this.options);if(e===z(this,Xe))return;const n=z(this,Xe);me(this,Xe,e),me(this,Zu,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},fk=function(e){Tn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(z(this,Hn))}),z(this,cr).getQueryCache().notify({query:z(this,Xe),type:"observerResultsUpdated"})})},ek);function FS(t,e){return Fr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function kw(t,e){return FS(t,e)||t.state.data!==void 0&&Wg(t,e,e.refetchOnMount)}function Wg(t,e,n){if(Fr(e.enabled,t)!==!1&&yo(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Dy(t,e)}return!1}function Ew(t,e,n,r){return(t!==e||Fr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Dy(t,n)}function Dy(t,e){return Fr(e.enabled,t)!==!1&&t.isStaleByTime(yo(e.staleTime,t))}function zS(t,e){return!Pg(t.getCurrentResult(),e)}function Tw(t){return{onFetch:(e,n)=>{var y,w,x,E,N;const r=e.options,s=(x=(w=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:w.fetchMore)==null?void 0:x.direction,o=((E=e.state.data)==null?void 0:E.pages)||[],l=((N=e.state.data)==null?void 0:N.pageParams)||[];let u={pages:[],pageParams:[]},d=0;const m=async()=>{let I=!1;const S=U=>{RS(U,()=>e.signal,()=>I=!0)},V=lk(e.options,e.fetchOptions),W=async(U,G,Z)=>{if(I)return Promise.reject();if(G==null&&U.pages.length)return Promise.resolve(U);const A=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:G,direction:Z?"backward":"forward",meta:e.options.meta};return S(O),O})(),k=await V(A),{maxPages:R}=e.options,P=Z?AS:CS;return{pages:P(U.pages,k,R),pageParams:P(U.pageParams,G,R)}};if(s&&o.length){const U=s==="backward",G=U?US:Iw,Z={pages:o,pageParams:l},K=G(r,Z);u=await W(Z,K,U)}else{const U=t??o.length;do{const G=d===0?l[0]??r.initialPageParam:Iw(r,u);if(d>0&&G==null)break;u=await W(u,G),d++}while(d<U)}return u};e.options.persister?e.fetchFn=()=>{var I,S;return(S=(I=e.options).persister)==null?void 0:S.call(I,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=m}}}function Iw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function US(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ju,As,Kn,xa,Ns,Ji,tk,BS=(tk=class extends dk{constructor(n){super();Oe(this,Ns);Oe(this,Ju);Oe(this,As);Oe(this,Kn);Oe(this,xa);me(this,Ju,n.client),this.mutationId=n.mutationId,me(this,Kn,n.mutationCache),me(this,As,[]),this.state=n.state||$S(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){z(this,As).includes(n)||(z(this,As).push(n),this.clearGcTimeout(),z(this,Kn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){me(this,As,z(this,As).filter(r=>r!==n)),this.scheduleGc(),z(this,Kn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){z(this,As).length||(this.state.status==="pending"?this.scheduleGc():z(this,Kn).remove(this))}continue(){var n;return((n=z(this,xa))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var u,d,m,y,w,x,E,N,I,S,V,W,U,G,Z,K,A,k,R,P;const r=()=>{Je(this,Ns,Ji).call(this,{type:"continue"})},s={client:z(this,Ju),meta:this.options.meta,mutationKey:this.options.mutationKey};me(this,xa,uk({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(O,M)=>{Je(this,Ns,Ji).call(this,{type:"failed",failureCount:O,error:M})},onPause:()=>{Je(this,Ns,Ji).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,Kn).canRun(this)}));const o=this.state.status==="pending",l=!z(this,xa).canStart();try{if(o)r();else{Je(this,Ns,Ji).call(this,{type:"pending",variables:n,isPaused:l}),await((d=(u=z(this,Kn).config).onMutate)==null?void 0:d.call(u,n,this,s));const M=await((y=(m=this.options).onMutate)==null?void 0:y.call(m,n,s));M!==this.state.context&&Je(this,Ns,Ji).call(this,{type:"pending",context:M,variables:n,isPaused:l})}const O=await z(this,xa).start();return await((x=(w=z(this,Kn).config).onSuccess)==null?void 0:x.call(w,O,n,this.state.context,this,s)),await((N=(E=this.options).onSuccess)==null?void 0:N.call(E,O,n,this.state.context,s)),await((S=(I=z(this,Kn).config).onSettled)==null?void 0:S.call(I,O,null,this.state.variables,this.state.context,this,s)),await((W=(V=this.options).onSettled)==null?void 0:W.call(V,O,null,n,this.state.context,s)),Je(this,Ns,Ji).call(this,{type:"success",data:O}),O}catch(O){try{await((G=(U=z(this,Kn).config).onError)==null?void 0:G.call(U,O,n,this.state.context,this,s))}catch(M){Promise.reject(M)}try{await((K=(Z=this.options).onError)==null?void 0:K.call(Z,O,n,this.state.context,s))}catch(M){Promise.reject(M)}try{await((k=(A=z(this,Kn).config).onSettled)==null?void 0:k.call(A,void 0,O,this.state.variables,this.state.context,this,s))}catch(M){Promise.reject(M)}try{await((P=(R=this.options).onSettled)==null?void 0:P.call(R,void 0,O,n,this.state.context,s))}catch(M){Promise.reject(M)}throw Je(this,Ns,Ji).call(this,{type:"error",error:O}),O}finally{z(this,Kn).runNext(this)}}},Ju=new WeakMap,As=new WeakMap,Kn=new WeakMap,xa=new WeakMap,Ns=new WeakSet,Ji=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Tn.batch(()=>{z(this,As).forEach(s=>{s.onMutationUpdate(n)}),z(this,Kn).notify({mutation:this,type:"updated",action:n})})},tk);function $S(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ai,cs,Xu,nk,WS=(nk=class extends ed{constructor(e={}){super();Oe(this,ai);Oe(this,cs);Oe(this,Xu);this.config=e,me(this,ai,new Set),me(this,cs,new Map),me(this,Xu,0)}build(e,n,r){const s=new BS({client:e,mutationCache:this,mutationId:++Fh(this,Xu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){z(this,ai).add(e);const n=zh(e);if(typeof n=="string"){const r=z(this,cs).get(n);r?r.push(e):z(this,cs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,ai).delete(e)){const n=zh(e);if(typeof n=="string"){const r=z(this,cs).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&z(this,cs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=zh(e);if(typeof n=="string"){const r=z(this,cs).get(n),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=zh(e);if(typeof n=="string"){const s=(r=z(this,cs).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Tn.batch(()=>{z(this,ai).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,ai).clear(),z(this,cs).clear()})}getAll(){return Array.from(z(this,ai))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>vw(n,r))}findAll(e={}){return this.getAll().filter(n=>vw(e,n))}notify(e){Tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Tn.batch(()=>Promise.all(e.map(n=>n.continue().catch(ur))))}},ai=new WeakMap,cs=new WeakMap,Xu=new WeakMap,nk);function zh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Rs,rk,qS=(rk=class extends ed{constructor(e={}){super();Oe(this,Rs);this.config=e,me(this,Rs,new Map)}build(e,n,r){const s=n.queryKey,o=n.queryHash??Ry(s,n);let l=this.get(o);return l||(l=new MS({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){z(this,Rs).has(e.queryHash)||(z(this,Rs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=z(this,Rs).get(e.queryHash);n&&(e.destroy(),n===e&&z(this,Rs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Tn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,Rs).get(e)}getAll(){return[...z(this,Rs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>yw(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>yw(e,r)):n}notify(e){Tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Tn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Tn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Rs=new WeakMap,rk),Ft,uo,ho,ql,Hl,fo,Kl,Gl,sk,HS=(sk=class{constructor(t={}){Oe(this,Ft);Oe(this,uo);Oe(this,ho);Oe(this,ql);Oe(this,Hl);Oe(this,fo);Oe(this,Kl);Oe(this,Gl);me(this,Ft,t.queryCache||new qS),me(this,uo,t.mutationCache||new WS),me(this,ho,t.defaultOptions||{}),me(this,ql,new Map),me(this,Hl,new Map),me(this,fo,0)}mount(){Fh(this,fo)._++,z(this,fo)===1&&(me(this,Kl,jy.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,Ft).onFocus())})),me(this,Gl,kf.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,Ft).onOnline())})))}unmount(){var t,e;Fh(this,fo)._--,z(this,fo)===0&&((t=z(this,Kl))==null||t.call(this),me(this,Kl,void 0),(e=z(this,Gl))==null||e.call(this),me(this,Gl,void 0))}isFetching(t){return z(this,Ft).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return z(this,uo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,Ft).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=z(this,Ft).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(yo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return z(this,Ft).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=z(this,Ft).get(r.queryHash),o=s==null?void 0:s.state.data,l=TS(e,o);if(l!==void 0)return z(this,Ft).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Tn.batch(()=>z(this,Ft).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,Ft).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=z(this,Ft);Tn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=z(this,Ft);return Tn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Tn.batch(()=>z(this,Ft).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ur).catch(ur)}invalidateQueries(t,e={}){return Tn.batch(()=>(z(this,Ft).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Tn.batch(()=>z(this,Ft).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(ur)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(ur)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=z(this,Ft).build(this,e);return n.isStaleByTime(yo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ur).catch(ur)}fetchInfiniteQuery(t){return t.behavior=Tw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ur).catch(ur)}ensureInfiniteQueryData(t){return t.behavior=Tw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return kf.isOnline()?z(this,uo).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,Ft)}getMutationCache(){return z(this,uo)}getDefaultOptions(){return z(this,ho)}setDefaultOptions(t){me(this,ho,t)}setQueryDefaults(t,e){z(this,ql).set(Au(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...z(this,ql).values()],n={};return e.forEach(r=>{Nu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){z(this,Hl).set(Au(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...z(this,Hl).values()],n={};return e.forEach(r=>{Nu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...z(this,ho).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ry(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Py&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...z(this,ho).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){z(this,Ft).clear(),z(this,uo).clear()}},Ft=new WeakMap,uo=new WeakMap,ho=new WeakMap,ql=new WeakMap,Hl=new WeakMap,fo=new WeakMap,Kl=new WeakMap,Gl=new WeakMap,sk),D=Ny();const Le=ik(D);var pk=D.createContext(void 0),Oy=t=>{const e=D.useContext(pk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},KS=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(pk.Provider,{value:t,children:e})),mk=D.createContext(!1),GS=()=>D.useContext(mk);mk.Provider;function QS(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ZS=D.createContext(QS()),YS=()=>D.useContext(ZS),JS=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},XS=t=>{D.useEffect(()=>{t.clearReset()},[t])},eC=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||NS(n,[t.error,r])),tC=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},nC=(t,e)=>t.isLoading&&t.isFetching&&!e,rC=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Sw=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function sC(t,e,n){var w,x,E,N,I;const r=GS(),s=YS(),o=Oy(),l=o.defaultQueryOptions(t);(x=(w=o.getDefaultOptions().queries)==null?void 0:w._experimental_beforeQuery)==null||x.call(w,l),l._optimisticResults=r?"isRestoring":"optimistic",tC(l),JS(l,s),XS(s);const u=!o.getQueryCache().get(l.queryHash),[d]=D.useState(()=>new e(o,l)),m=d.getOptimisticResult(l),y=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(S=>{const V=y?d.subscribe(Tn.batchCalls(S)):ur;return d.updateResult(),V},[d,y]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),D.useEffect(()=>{d.setOptions(l)},[l,d]),rC(l,m))throw Sw(l,d,s);if(eC({result:m,errorResetBoundary:s,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw m.error;if((N=(E=o.getDefaultOptions().queries)==null?void 0:E._experimental_afterQuery)==null||N.call(E,l,m),l.experimental_prefetchInRender&&!Ta&&nC(m,r)){const S=u?Sw(l,d,s):(I=o.getQueryCache().get(l.queryHash))==null?void 0:I.promise;S==null||S.catch(ur).finally(()=>{d.updateResult()})}return l.notifyOnChangeProps?m:d.trackResult(m)}function iC(t,e){return sC(t,VS)}var Uh={},lg={exports:{}},lr={},cg={exports:{}},ug={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function oC(){return Cw||(Cw=1,(function(t){function e(X,pe){var de=X.length;X.push(pe);e:for(;0<de;){var $=de-1>>>1,ee=X[$];if(0<s(ee,pe))X[$]=pe,X[de]=ee,de=$;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var pe=X[0],de=X.pop();if(de!==pe){X[0]=de;e:for(var $=0,ee=X.length,ce=ee>>>1;$<ce;){var be=2*($+1)-1,De=X[be],Re=be+1,Te=X[Re];if(0>s(De,de))Re<ee&&0>s(Te,De)?(X[$]=Te,X[Re]=de,$=Re):(X[$]=De,X[be]=de,$=be);else if(Re<ee&&0>s(Te,de))X[$]=Te,X[Re]=de,$=Re;else break e}}return pe}function s(X,pe){var de=X.sortIndex-pe.sortIndex;return de!==0?de:X.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],m=[],y=1,w=null,x=3,E=!1,N=!1,I=!1,S=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(X){for(var pe=n(m);pe!==null;){if(pe.callback===null)r(m);else if(pe.startTime<=X)r(m),pe.sortIndex=pe.expirationTime,e(d,pe);else break;pe=n(m)}}function G(X){if(I=!1,U(X),!N)if(n(d)!==null)N=!0,Qe(Z);else{var pe=n(m);pe!==null&&Ne(G,pe.startTime-X)}}function Z(X,pe){N=!1,I&&(I=!1,V(k),k=-1),E=!0;var de=x;try{for(U(pe),w=n(d);w!==null&&(!(w.expirationTime>pe)||X&&!O());){var $=w.callback;if(typeof $=="function"){w.callback=null,x=w.priorityLevel;var ee=$(w.expirationTime<=pe);pe=t.unstable_now(),typeof ee=="function"?w.callback=ee:w===n(d)&&r(d),U(pe)}else r(d);w=n(d)}if(w!==null)var ce=!0;else{var be=n(m);be!==null&&Ne(G,be.startTime-pe),ce=!1}return ce}finally{w=null,x=de,E=!1}}var K=!1,A=null,k=-1,R=5,P=-1;function O(){return!(t.unstable_now()-P<R)}function M(){if(A!==null){var X=t.unstable_now();P=X;var pe=!0;try{pe=A(!0,X)}finally{pe?j():(K=!1,A=null)}}else K=!1}var j;if(typeof W=="function")j=function(){W(M)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,nt=Ce.port2;Ce.port1.onmessage=M,j=function(){nt.postMessage(null)}}else j=function(){S(M,0)};function Qe(X){A=X,K||(K=!0,j())}function Ne(X,pe){k=S(function(){X(t.unstable_now())},pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){N||E||(N=!0,Qe(Z))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(X){switch(x){case 1:case 2:case 3:var pe=3;break;default:pe=x}var de=x;x=pe;try{return X()}finally{x=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,pe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var de=x;x=X;try{return pe()}finally{x=de}},t.unstable_scheduleCallback=function(X,pe,de){var $=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?$+de:$):de=$,X){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=de+ee,X={id:y++,callback:pe,priorityLevel:X,startTime:de,expirationTime:ee,sortIndex:-1},de>$?(X.sortIndex=de,e(m,X),n(d)===null&&X===n(m)&&(I?(V(k),k=-1):I=!0,Ne(G,de-$))):(X.sortIndex=ee,e(d,X),N||E||(N=!0,Qe(Z))),X},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(X){var pe=x;return function(){var de=x;x=pe;try{return X.apply(this,arguments)}finally{x=de}}}})(ug)),ug}var Aw;function aC(){return Aw||(Aw=1,cg.exports=oC()),cg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function lC(){if(Nw)return lr;Nw=1;var t=Ny(),e=aC();function n(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function x(i){return d.call(w,i)?!0:d.call(y,i)?!1:m.test(i)?w[i]=!0:(y[i]=!0,!1)}function E(i,a,c,f){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function N(i,a,c,f){if(a===null||typeof a>"u"||E(i,a,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function I(i,a,c,f,g,_,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=T}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){S[i]=new I(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];S[a]=new I(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){S[i]=new I(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){S[i]=new I(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){S[i]=new I(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){S[i]=new I(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){S[i]=new I(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){S[i]=new I(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){S[i]=new I(i,5,!1,i.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function W(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(V,W);S[a]=new I(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(V,W);S[a]=new I(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(V,W);S[a]=new I(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){S[i]=new I(i,1,!1,i.toLowerCase(),null,!1,!1)}),S.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){S[i]=new I(i,1,!1,i.toLowerCase(),null,!0,!0)});function U(i,a,c,f){var g=S.hasOwnProperty(a)?S[a]:null;(g!==null?g.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(N(a,c,g,f)&&(c=null),f||g===null?x(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):g.mustUseProperty?i[g.propertyName]=c===null?g.type===3?!1:"":c:(a=g.attributeName,f=g.attributeNamespace,c===null?i.removeAttribute(a):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,f?i.setAttributeNS(f,a,c):i.setAttribute(a,c))))}var G=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),K=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),nt=Symbol.for("react.memo"),Qe=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),X=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var de=Object.assign,$;function ee(i){if($===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);$=a&&a[1]||""}return`
`+$+i}var ce=!1;function be(i,a){if(!i||ce)return"";ce=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var f=Y}Reflect.construct(i,[],a)}else{try{a.call()}catch(Y){f=Y}i.call(a.prototype)}else{try{throw Error()}catch(Y){f=Y}i()}}catch(Y){if(Y&&f&&typeof Y.stack=="string"){for(var g=Y.stack.split(`
`),_=f.stack.split(`
`),T=g.length-1,L=_.length-1;1<=T&&0<=L&&g[T]!==_[L];)L--;for(;1<=T&&0<=L;T--,L--)if(g[T]!==_[L]){if(T!==1||L!==1)do if(T--,L--,0>L||g[T]!==_[L]){var F=`
`+g[T].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=T&&0<=L);break}}}finally{ce=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?ee(i):""}function De(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=be(i.type,!1),i;case 11:return i=be(i.type.render,!1),i;case 1:return i=be(i.type,!0),i;default:return""}}function Re(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case K:return"Portal";case R:return"Profiler";case k:return"StrictMode";case j:return"Suspense";case Ce:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case P:return(i._context.displayName||"Context")+".Provider";case M:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case nt:return a=i.displayName||null,a!==null?a:Re(i.type)||"Memo";case Qe:a=i._payload,i=i._init;try{return Re(i(a))}catch{}}return null}function Te(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(a);case 8:return a===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ue(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ne(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function he(i){var a=ne(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,_=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,_.call(this,T)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function rt(i){i._valueTracker||(i._valueTracker=he(i))}function pt(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=ne(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function yn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function vn(i,a){var c=a.checked;return de({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function fr(i,a){var c=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;c=Ue(a.value!=null?a.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Tr(i,a){a=a.checked,a!=null&&U(i,"checked",a,!1)}function ki(i,a){Tr(i,a);var c=Ue(a.value),f=a.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?gs(i,a.type,c):a.hasOwnProperty("defaultValue")&&gs(i,a.type,Ue(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Oo(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function gs(i,a,c){(a!=="number"||yn(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var an=Array.isArray;function Jn(i,a,c,f){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+Ue(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function ys(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return de({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Us(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(n(92));if(an(c)){if(1<c.length)throw Error(n(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:Ue(c)}}function Bs(i,a){var c=Ue(a.value),f=Ue(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function Lo(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Ut(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Ut(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Nn,Hr=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,f,g){MSApp.execUnsafeLocalFunction(function(){return i(a,c,f,g)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Nn=Nn||document.createElement("div"),Nn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Nn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Kr(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var Rn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vs=["Webkit","ms","Moz","O"];Object.keys(Rn).forEach(function(i){vs.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Rn[a]=Rn[i]})});function Mo(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||Rn.hasOwnProperty(i)&&Rn[i]?(""+a).trim():a+"px"}function Vo(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var f=c.indexOf("--")===0,g=Mo(c,a[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,g):i[c]=g}}var $s=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ei(i,a){if(a){if($s[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Fo(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _s=null;function Ti(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ii=null,Xn=null,gt=null;function Wt(i){if(i=qc(i)){if(typeof Ii!="function")throw Error(n(280));var a=i.stateNode;a&&(a=eh(a),Ii(i.stateNode,i.type,a))}}function It(i){Xn?gt?gt.push(i):gt=[i]:Xn=i}function er(){if(Xn){var i=Xn,a=gt;if(gt=Xn=null,Wt(i),a)for(i=0;i<a.length;i++)Wt(a[i])}}function qt(i,a){return i(a)}function Xt(){}var Ht=!1;function Ir(i,a,c){if(Ht)return i(a,c);Ht=!0;try{return qt(i,a,c)}finally{Ht=!1,(Xn!==null||gt!==null)&&(Xt(),er())}}function qe(i,a){var c=i.stateNode;if(c===null)return null;var f=eh(c);if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,a,typeof c));return c}var zn=!1;if(u)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){zn=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch{zn=!1}function _n(i,a,c,f,g,_,T,L,F){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(c,Y)}catch(ie){this.onError(ie)}}var pr=!1,Sr=null,Kt=!1,Gr=null,zo={onError:function(i){pr=!0,Sr=i}};function za(i,a,c,f,g,_,T,L,F){pr=!1,Sr=null,_n.apply(zo,arguments)}function Td(i,a,c,f,g,_,T,L,F){if(za.apply(this,arguments),pr){if(pr){var Y=Sr;pr=!1,Sr=null}else throw Error(n(198));Kt||(Kt=!0,Gr=Y)}}function Qr(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function Uo(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Zr(i){if(Qr(i)!==i)throw Error(n(188))}function Id(i){var a=i.alternate;if(!a){if(a=Qr(i),a===null)throw Error(n(188));return a!==i?null:i}for(var c=i,f=a;;){var g=c.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===c)return Zr(g),i;if(_===f)return Zr(g),a;_=_.sibling}throw Error(n(188))}if(c.return!==f.return)c=g,f=_;else{for(var T=!1,L=g.child;L;){if(L===c){T=!0,c=g,f=_;break}if(L===f){T=!0,f=g,c=_;break}L=L.sibling}if(!T){for(L=_.child;L;){if(L===c){T=!0,c=_,f=g;break}if(L===f){T=!0,f=_,c=g;break}L=L.sibling}if(!T)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:a}function Ic(i){return i=Id(i),i!==null?Ua(i):null}function Ua(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Ua(i);if(a!==null)return a;i=i.sibling}return null}var Ba=e.unstable_scheduleCallback,Sc=e.unstable_cancelCallback,Sd=e.unstable_shouldYield,Dp=e.unstable_requestPaint,_t=e.unstable_now,Cd=e.unstable_getCurrentPriorityLevel,Bo=e.unstable_ImmediatePriority,Si=e.unstable_UserBlockingPriority,Cr=e.unstable_NormalPriority,Cc=e.unstable_LowPriority,Ad=e.unstable_IdlePriority,$o=null,mr=null;function Nd(i){if(mr&&typeof mr.onCommitFiberRoot=="function")try{mr.onCommitFiberRoot($o,i,void 0,(i.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:Pd,Ac=Math.log,Rd=Math.LN2;function Pd(i){return i>>>=0,i===0?32:31-(Ac(i)/Rd|0)|0}var $a=64,Wa=4194304;function Ci(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Wo(i,a){var c=i.pendingLanes;if(c===0)return 0;var f=0,g=i.suspendedLanes,_=i.pingedLanes,T=c&268435455;if(T!==0){var L=T&~g;L!==0?f=Ci(L):(_&=T,_!==0&&(f=Ci(_)))}else T=c&~g,T!==0?f=Ci(T):_!==0&&(f=Ci(_));if(f===0)return 0;if(a!==0&&a!==f&&(a&g)===0&&(g=f&-f,_=a&-a,g>=_||g===16&&(_&4194240)!==0))return a;if((f&4)!==0&&(f|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)c=31-Un(a),g=1<<c,f|=i[c],a&=~g;return f}function Op(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ws(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes;0<_;){var T=31-Un(_),L=1<<T,F=g[T];F===-1?((L&c)===0||(L&f)!==0)&&(g[T]=Op(L,a)):F<=a&&(i.expiredLanes|=L),_&=~L}}function gr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function qo(){var i=$a;return $a<<=1,($a&4194240)===0&&($a=64),i}function Ai(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Ni(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Un(a),i[a]=c}function yt(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var g=31-Un(c),_=1<<g;a[g]=0,f[g]=-1,i[g]=-1,c&=~_}}function Ri(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-Un(c),g=1<<f;g&a|i[f]&a&&(i[f]|=a),c&=~g}}var Ye=0;function Pi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var jd,qa,Dd,Od,Ld,Nc=!1,ws=[],wn=null,Yr=null,Jr=null,ji=new Map,Ar=new Map,bs=[],Lp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Md(i,a){switch(i){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":ji.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(a.pointerId)}}function tr(i,a,c,f,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},a!==null&&(a=qc(a),a!==null&&qa(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function Mp(i,a,c,f,g){switch(a){case"focusin":return wn=tr(wn,i,a,c,f,g),!0;case"dragenter":return Yr=tr(Yr,i,a,c,f,g),!0;case"mouseover":return Jr=tr(Jr,i,a,c,f,g),!0;case"pointerover":var _=g.pointerId;return ji.set(_,tr(ji.get(_)||null,i,a,c,f,g)),!0;case"gotpointercapture":return _=g.pointerId,Ar.set(_,tr(Ar.get(_)||null,i,a,c,f,g)),!0}return!1}function Vd(i){var a=Zo(i.target);if(a!==null){var c=Qr(a);if(c!==null){if(a=c.tag,a===13){if(a=Uo(c),a!==null){i.blockedOn=a,Ld(i.priority,function(){Dd(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function qs(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Ha(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);_s=f,c.target.dispatchEvent(f),_s=null}else return a=qc(c),a!==null&&qa(a),i.blockedOn=c,!1;a.shift()}return!0}function Ho(i,a,c){qs(i)&&c.delete(a)}function Fd(){Nc=!1,wn!==null&&qs(wn)&&(wn=null),Yr!==null&&qs(Yr)&&(Yr=null),Jr!==null&&qs(Jr)&&(Jr=null),ji.forEach(Ho),Ar.forEach(Ho)}function Xr(i,a){i.blockedOn===a&&(i.blockedOn=null,Nc||(Nc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fd)))}function es(i){function a(g){return Xr(g,i)}if(0<ws.length){Xr(ws[0],i);for(var c=1;c<ws.length;c++){var f=ws[c];f.blockedOn===i&&(f.blockedOn=null)}}for(wn!==null&&Xr(wn,i),Yr!==null&&Xr(Yr,i),Jr!==null&&Xr(Jr,i),ji.forEach(a),Ar.forEach(a),c=0;c<bs.length;c++)f=bs[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<bs.length&&(c=bs[0],c.blockedOn===null);)Vd(c),c.blockedOn===null&&bs.shift()}var Hs=G.ReactCurrentBatchConfig,Di=!0;function St(i,a,c,f){var g=Ye,_=Hs.transition;Hs.transition=null;try{Ye=1,Rc(i,a,c,f)}finally{Ye=g,Hs.transition=_}}function Vp(i,a,c,f){var g=Ye,_=Hs.transition;Hs.transition=null;try{Ye=4,Rc(i,a,c,f)}finally{Ye=g,Hs.transition=_}}function Rc(i,a,c,f){if(Di){var g=Ha(i,a,c,f);if(g===null)Qp(i,a,f,Ko,c),Md(i,f);else if(Mp(g,i,a,c,f))f.stopPropagation();else if(Md(i,f),a&4&&-1<Lp.indexOf(i)){for(;g!==null;){var _=qc(g);if(_!==null&&jd(_),_=Ha(i,a,c,f),_===null&&Qp(i,a,f,Ko,c),_===g)break;g=_}g!==null&&f.stopPropagation()}else Qp(i,a,f,null,c)}}var Ko=null;function Ha(i,a,c,f){if(Ko=null,i=Ti(f),i=Zo(i),i!==null)if(a=Qr(i),a===null)i=null;else if(c=a.tag,c===13){if(i=Uo(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Ko=i,null}function Pc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cd()){case Bo:return 1;case Si:return 4;case Cr:case Cc:return 16;case Ad:return 536870912;default:return 16}default:return 16}}var yr=null,Ka=null,nr=null;function jc(){if(nr)return nr;var i,a=Ka,c=a.length,f,g="value"in yr?yr.value:yr.textContent,_=g.length;for(i=0;i<c&&a[i]===g[i];i++);var T=c-i;for(f=1;f<=T&&a[c-f]===g[_-f];f++);return nr=g.slice(i,1<f?1-f:void 0)}function Ga(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function xs(){return!0}function Dc(){return!1}function bn(i){function a(c,f,g,_,T){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?xs:Dc,this.isPropagationStopped=Dc,this}return de(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),a}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=bn(ts),ks=de({},ts,{view:0,detail:0}),Fp=bn(ks),Za,Ks,Oi,Go=de({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Oi&&(Oi&&i.type==="mousemove"?(Za=i.screenX-Oi.screenX,Ks=i.screenY-Oi.screenY):Ks=Za=0,Oi=i),Za)},movementY:function(i){return"movementY"in i?i.movementY:Ks}}),Ya=bn(Go),Oc=de({},Go,{dataTransfer:0}),zd=bn(Oc),Ja=de({},ks,{relatedTarget:0}),Xa=bn(Ja),Ud=de({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Gs=bn(Ud),Bd=de({},ts,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),$d=bn(Bd),Wd=de({},ts,{data:0}),Lc=bn(Wd),el={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=qd[i])?!!a[i]:!1}function Es(){return Hd}var h=de({},ks,{key:function(i){if(i.key){var a=el[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Ga(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Bn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(i){return i.type==="keypress"?Ga(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ga(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=bn(h),b=de({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C=bn(b),q=de({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),J=bn(q),ue=de({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),dt=bn(ue),en=de({},Go,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),st=bn(en),ln=[9,13,27,32],Gt=u&&"CompositionEvent"in window,Nr=null;u&&"documentMode"in document&&(Nr=document.documentMode);var vr=u&&"TextEvent"in window&&!Nr,Qo=u&&(!Gt||Nr&&8<Nr&&11>=Nr),tl=" ",ov=!1;function av(i,a){switch(i){case"keyup":return ln.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var nl=!1;function p1(i,a){switch(i){case"compositionend":return lv(a);case"keypress":return a.which!==32?null:(ov=!0,tl);case"textInput":return i=a.data,i===tl&&ov?null:i;default:return null}}function m1(i,a){if(nl)return i==="compositionend"||!Gt&&av(i,a)?(i=jc(),nr=Ka=yr=null,nl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Qo&&a.locale!=="ko"?null:a.data;default:return null}}var g1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!g1[i.type]:a==="textarea"}function uv(i,a,c,f){It(f),a=Yd(a,"onChange"),0<a.length&&(c=new Qa("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var Mc=null,Vc=null;function y1(i){Cv(i,0)}function Kd(i){var a=al(i);if(pt(a))return i}function v1(i,a){if(i==="change")return a}var dv=!1;if(u){var zp;if(u){var Up="oninput"in document;if(!Up){var hv=document.createElement("div");hv.setAttribute("oninput","return;"),Up=typeof hv.oninput=="function"}zp=Up}else zp=!1;dv=zp&&(!document.documentMode||9<document.documentMode)}function fv(){Mc&&(Mc.detachEvent("onpropertychange",pv),Vc=Mc=null)}function pv(i){if(i.propertyName==="value"&&Kd(Vc)){var a=[];uv(a,Vc,i,Ti(i)),Ir(y1,a)}}function _1(i,a,c){i==="focusin"?(fv(),Mc=a,Vc=c,Mc.attachEvent("onpropertychange",pv)):i==="focusout"&&fv()}function w1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Kd(Vc)}function b1(i,a){if(i==="click")return Kd(a)}function x1(i,a){if(i==="input"||i==="change")return Kd(a)}function k1(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ns=typeof Object.is=="function"?Object.is:k1;function Fc(i,a){if(ns(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!d.call(a,g)||!ns(i[g],a[g]))return!1}return!0}function mv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function gv(i,a){var c=mv(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=mv(c)}}function yv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?yv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function vv(){for(var i=window,a=yn();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=yn(i.document)}return a}function Bp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function E1(i){var a=vv(),c=i.focusedElem,f=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&yv(c.ownerDocument.documentElement,c)){if(f!==null&&Bp(c)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var g=c.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!i.extend&&_>f&&(g=f,f=_,_=g),g=gv(c,_);var T=gv(c,f);g&&T&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),i.removeAllRanges(),_>f?(i.addRange(a),i.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var T1=u&&"documentMode"in document&&11>=document.documentMode,rl=null,$p=null,zc=null,Wp=!1;function _v(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Wp||rl==null||rl!==yn(f)||(f=rl,"selectionStart"in f&&Bp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),zc&&Fc(zc,f)||(zc=f,f=Yd($p,"onSelect"),0<f.length&&(a=new Qa("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=rl)))}function Gd(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var sl={animationend:Gd("Animation","AnimationEnd"),animationiteration:Gd("Animation","AnimationIteration"),animationstart:Gd("Animation","AnimationStart"),transitionend:Gd("Transition","TransitionEnd")},qp={},wv={};u&&(wv=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function Qd(i){if(qp[i])return qp[i];if(!sl[i])return i;var a=sl[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in wv)return qp[i]=a[c];return i}var bv=Qd("animationend"),xv=Qd("animationiteration"),kv=Qd("animationstart"),Ev=Qd("transitionend"),Tv=new Map,Iv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(i,a){Tv.set(i,a),o(a,[i])}for(var Hp=0;Hp<Iv.length;Hp++){var Kp=Iv[Hp],I1=Kp.toLowerCase(),S1=Kp[0].toUpperCase()+Kp.slice(1);Li(I1,"on"+S1)}Li(bv,"onAnimationEnd"),Li(xv,"onAnimationIteration"),Li(kv,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(Ev,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uc));function Sv(i,a,c){var f=i.type||"unknown-event";i.currentTarget=c,Td(f,a,void 0,i),i.currentTarget=null}function Cv(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var _=void 0;if(a)for(var T=f.length-1;0<=T;T--){var L=f[T],F=L.instance,Y=L.currentTarget;if(L=L.listener,F!==_&&g.isPropagationStopped())break e;Sv(g,L,Y),_=F}else for(T=0;T<f.length;T++){if(L=f[T],F=L.instance,Y=L.currentTarget,L=L.listener,F!==_&&g.isPropagationStopped())break e;Sv(g,L,Y),_=F}}}if(Kt)throw i=Gr,Kt=!1,Gr=null,i}function xt(i,a){var c=a[tm];c===void 0&&(c=a[tm]=new Set);var f=i+"__bubble";c.has(f)||(Av(a,i,2,!1),c.add(f))}function Gp(i,a,c){var f=0;a&&(f|=4),Av(c,i,f,a)}var Zd="_reactListening"+Math.random().toString(36).slice(2);function Bc(i){if(!i[Zd]){i[Zd]=!0,r.forEach(function(c){c!=="selectionchange"&&(C1.has(c)||Gp(c,!1,i),Gp(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Zd]||(a[Zd]=!0,Gp("selectionchange",!1,a))}}function Av(i,a,c,f){switch(Pc(a)){case 1:var g=St;break;case 4:g=Vp;break;default:g=Rc}c=g.bind(null,a,c,i),g=void 0,!zn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function Qp(i,a,c,f,g){var _=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var L=f.stateNode.containerInfo;if(L===g||L.nodeType===8&&L.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;T=T.return}for(;L!==null;){if(T=Zo(L),T===null)return;if(F=T.tag,F===5||F===6){f=_=T;continue e}L=L.parentNode}}f=f.return}Ir(function(){var Y=_,ie=Ti(c),ae=[];e:{var se=Tv.get(i);if(se!==void 0){var fe=Qa,ve=i;switch(i){case"keypress":if(Ga(c)===0)break e;case"keydown":case"keyup":fe=v;break;case"focusin":ve="focus",fe=Xa;break;case"focusout":ve="blur",fe=Xa;break;case"beforeblur":case"afterblur":fe=Xa;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Ya;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=zd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=J;break;case bv:case xv:case kv:fe=Gs;break;case Ev:fe=dt;break;case"scroll":fe=Fp;break;case"wheel":fe=st;break;case"copy":case"cut":case"paste":fe=$d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=C}var xe=(a&4)!==0,Bt=!xe&&i==="scroll",H=xe?se!==null?se+"Capture":null:se;xe=[];for(var B=Y,Q;B!==null;){Q=B;var le=Q.stateNode;if(Q.tag===5&&le!==null&&(Q=le,H!==null&&(le=qe(B,H),le!=null&&xe.push($c(B,le,Q)))),Bt)break;B=B.return}0<xe.length&&(se=new fe(se,ve,null,c,ie),ae.push({event:se,listeners:xe}))}}if((a&7)===0){e:{if(se=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",se&&c!==_s&&(ve=c.relatedTarget||c.fromElement)&&(Zo(ve)||ve[Qs]))break e;if((fe||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(ve=c.relatedTarget||c.toElement,fe=Y,ve=ve?Zo(ve):null,ve!==null&&(Bt=Qr(ve),ve!==Bt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(fe=null,ve=Y),fe!==ve)){if(xe=Ya,le="onMouseLeave",H="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(xe=C,le="onPointerLeave",H="onPointerEnter",B="pointer"),Bt=fe==null?se:al(fe),Q=ve==null?se:al(ve),se=new xe(le,B+"leave",fe,c,ie),se.target=Bt,se.relatedTarget=Q,le=null,Zo(ie)===Y&&(xe=new xe(H,B+"enter",ve,c,ie),xe.target=Q,xe.relatedTarget=Bt,le=xe),Bt=le,fe&&ve)t:{for(xe=fe,H=ve,B=0,Q=xe;Q;Q=il(Q))B++;for(Q=0,le=H;le;le=il(le))Q++;for(;0<B-Q;)xe=il(xe),B--;for(;0<Q-B;)H=il(H),Q--;for(;B--;){if(xe===H||H!==null&&xe===H.alternate)break t;xe=il(xe),H=il(H)}xe=null}else xe=null;fe!==null&&Nv(ae,se,fe,xe,!1),ve!==null&&Bt!==null&&Nv(ae,Bt,ve,xe,!0)}}e:{if(se=Y?al(Y):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var Ee=v1;else if(cv(se))if(dv)Ee=x1;else{Ee=w1;var Pe=_1}else(fe=se.nodeName)&&fe.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Ee=b1);if(Ee&&(Ee=Ee(i,Y))){uv(ae,Ee,c,ie);break e}Pe&&Pe(i,se,Y),i==="focusout"&&(Pe=se._wrapperState)&&Pe.controlled&&se.type==="number"&&gs(se,"number",se.value)}switch(Pe=Y?al(Y):window,i){case"focusin":(cv(Pe)||Pe.contentEditable==="true")&&(rl=Pe,$p=Y,zc=null);break;case"focusout":zc=$p=rl=null;break;case"mousedown":Wp=!0;break;case"contextmenu":case"mouseup":case"dragend":Wp=!1,_v(ae,c,ie);break;case"selectionchange":if(T1)break;case"keydown":case"keyup":_v(ae,c,ie)}var je;if(Gt)e:{switch(i){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else nl?av(i,c)&&(Ve="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(Qo&&c.locale!=="ko"&&(nl||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&nl&&(je=jc()):(yr=ie,Ka="value"in yr?yr.value:yr.textContent,nl=!0)),Pe=Yd(Y,Ve),0<Pe.length&&(Ve=new Lc(Ve,i,null,c,ie),ae.push({event:Ve,listeners:Pe}),je?Ve.data=je:(je=lv(c),je!==null&&(Ve.data=je)))),(je=vr?p1(i,c):m1(i,c))&&(Y=Yd(Y,"onBeforeInput"),0<Y.length&&(ie=new Lc("onBeforeInput","beforeinput",null,c,ie),ae.push({event:ie,listeners:Y}),ie.data=je))}Cv(ae,a)})}function $c(i,a,c){return{instance:i,listener:a,currentTarget:c}}function Yd(i,a){for(var c=a+"Capture",f=[];i!==null;){var g=i,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=qe(i,c),_!=null&&f.unshift($c(i,_,g)),_=qe(i,a),_!=null&&f.push($c(i,_,g))),i=i.return}return f}function il(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Nv(i,a,c,f,g){for(var _=a._reactName,T=[];c!==null&&c!==f;){var L=c,F=L.alternate,Y=L.stateNode;if(F!==null&&F===f)break;L.tag===5&&Y!==null&&(L=Y,g?(F=qe(c,_),F!=null&&T.unshift($c(c,F,L))):g||(F=qe(c,_),F!=null&&T.push($c(c,F,L)))),c=c.return}T.length!==0&&i.push({event:a,listeners:T})}var A1=/\r\n?/g,N1=/\u0000|\uFFFD/g;function Rv(i){return(typeof i=="string"?i:""+i).replace(A1,`
`).replace(N1,"")}function Jd(i,a,c){if(a=Rv(a),Rv(i)!==a&&c)throw Error(n(425))}function Xd(){}var Zp=null,Yp=null;function Jp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Xp=typeof setTimeout=="function"?setTimeout:void 0,R1=typeof clearTimeout=="function"?clearTimeout:void 0,Pv=typeof Promise=="function"?Promise:void 0,P1=typeof queueMicrotask=="function"?queueMicrotask:typeof Pv<"u"?function(i){return Pv.resolve(null).then(i).catch(j1)}:Xp;function j1(i){setTimeout(function(){throw i})}function em(i,a){var c=a,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(f===0){i.removeChild(g),es(a);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=g}while(c);es(a)}function Mi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function jv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var ol=Math.random().toString(36).slice(2),Ts="__reactFiber$"+ol,Wc="__reactProps$"+ol,Qs="__reactContainer$"+ol,tm="__reactEvents$"+ol,D1="__reactListeners$"+ol,O1="__reactHandles$"+ol;function Zo(i){var a=i[Ts];if(a)return a;for(var c=i.parentNode;c;){if(a=c[Qs]||c[Ts]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=jv(i);i!==null;){if(c=i[Ts])return c;i=jv(i)}return a}i=c,c=i.parentNode}return null}function qc(i){return i=i[Ts]||i[Qs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function al(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function eh(i){return i[Wc]||null}var nm=[],ll=-1;function Vi(i){return{current:i}}function kt(i){0>ll||(i.current=nm[ll],nm[ll]=null,ll--)}function wt(i,a){ll++,nm[ll]=i.current,i.current=a}var Fi={},Pn=Vi(Fi),rr=Vi(!1),Yo=Fi;function cl(i,a){var c=i.type.contextTypes;if(!c)return Fi;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in c)g[_]=a[_];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=g),g}function sr(i){return i=i.childContextTypes,i!=null}function th(){kt(rr),kt(Pn)}function Dv(i,a,c){if(Pn.current!==Fi)throw Error(n(168));wt(Pn,a),wt(rr,c)}function Ov(i,a,c){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(n(108,Te(i)||"Unknown",g));return de({},c,f)}function nh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Fi,Yo=Pn.current,wt(Pn,i),wt(rr,rr.current),!0}function Lv(i,a,c){var f=i.stateNode;if(!f)throw Error(n(169));c?(i=Ov(i,a,Yo),f.__reactInternalMemoizedMergedChildContext=i,kt(rr),kt(Pn),wt(Pn,i)):kt(rr),wt(rr,c)}var Zs=null,rh=!1,rm=!1;function Mv(i){Zs===null?Zs=[i]:Zs.push(i)}function L1(i){rh=!0,Mv(i)}function zi(){if(!rm&&Zs!==null){rm=!0;var i=0,a=Ye;try{var c=Zs;for(Ye=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}Zs=null,rh=!1}catch(g){throw Zs!==null&&(Zs=Zs.slice(i+1)),Ba(Bo,zi),g}finally{Ye=a,rm=!1}}return null}var ul=[],dl=0,sh=null,ih=0,Rr=[],Pr=0,Jo=null,Ys=1,Js="";function Xo(i,a){ul[dl++]=ih,ul[dl++]=sh,sh=i,ih=a}function Vv(i,a,c){Rr[Pr++]=Ys,Rr[Pr++]=Js,Rr[Pr++]=Jo,Jo=i;var f=Ys;i=Js;var g=32-Un(f)-1;f&=~(1<<g),c+=1;var _=32-Un(a)+g;if(30<_){var T=g-g%5;_=(f&(1<<T)-1).toString(32),f>>=T,g-=T,Ys=1<<32-Un(a)+g|c<<g|f,Js=_+i}else Ys=1<<_|c<<g|f,Js=i}function sm(i){i.return!==null&&(Xo(i,1),Vv(i,1,0))}function im(i){for(;i===sh;)sh=ul[--dl],ul[dl]=null,ih=ul[--dl],ul[dl]=null;for(;i===Jo;)Jo=Rr[--Pr],Rr[Pr]=null,Js=Rr[--Pr],Rr[Pr]=null,Ys=Rr[--Pr],Rr[Pr]=null}var _r=null,wr=null,Ct=!1,rs=null;function Fv(i,a){var c=Lr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function zv(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,_r=i,wr=Mi(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,_r=i,wr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=Jo!==null?{id:Ys,overflow:Js}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=Lr(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,_r=i,wr=null,!0):!1;default:return!1}}function om(i){return(i.mode&1)!==0&&(i.flags&128)===0}function am(i){if(Ct){var a=wr;if(a){var c=a;if(!zv(i,a)){if(om(i))throw Error(n(418));a=Mi(c.nextSibling);var f=_r;a&&zv(i,a)?Fv(f,c):(i.flags=i.flags&-4097|2,Ct=!1,_r=i)}}else{if(om(i))throw Error(n(418));i.flags=i.flags&-4097|2,Ct=!1,_r=i}}}function Uv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;_r=i}function oh(i){if(i!==_r)return!1;if(!Ct)return Uv(i),Ct=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Jp(i.type,i.memoizedProps)),a&&(a=wr)){if(om(i))throw Bv(),Error(n(418));for(;a;)Fv(i,a),a=Mi(a.nextSibling)}if(Uv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){wr=Mi(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}wr=null}}else wr=_r?Mi(i.stateNode.nextSibling):null;return!0}function Bv(){for(var i=wr;i;)i=Mi(i.nextSibling)}function hl(){wr=_r=null,Ct=!1}function lm(i){rs===null?rs=[i]:rs.push(i)}var M1=G.ReactCurrentBatchConfig;function Hc(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var f=c.stateNode}if(!f)throw Error(n(147,i));var g=f,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(T){var L=g.refs;T===null?delete L[_]:L[_]=T},a._stringRef=_,a)}if(typeof i!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,i))}return i}function ah(i,a){throw i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function $v(i){var a=i._init;return a(i._payload)}function Wv(i){function a(H,B){if(i){var Q=H.deletions;Q===null?(H.deletions=[B],H.flags|=16):Q.push(B)}}function c(H,B){if(!i)return null;for(;B!==null;)a(H,B),B=B.sibling;return null}function f(H,B){for(H=new Map;B!==null;)B.key!==null?H.set(B.key,B):H.set(B.index,B),B=B.sibling;return H}function g(H,B){return H=Gi(H,B),H.index=0,H.sibling=null,H}function _(H,B,Q){return H.index=Q,i?(Q=H.alternate,Q!==null?(Q=Q.index,Q<B?(H.flags|=2,B):Q):(H.flags|=2,B)):(H.flags|=1048576,B)}function T(H){return i&&H.alternate===null&&(H.flags|=2),H}function L(H,B,Q,le){return B===null||B.tag!==6?(B=Xm(Q,H.mode,le),B.return=H,B):(B=g(B,Q),B.return=H,B)}function F(H,B,Q,le){var Ee=Q.type;return Ee===A?ie(H,B,Q.props.children,le,Q.key):B!==null&&(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Qe&&$v(Ee)===B.type)?(le=g(B,Q.props),le.ref=Hc(H,B,Q),le.return=H,le):(le=Rh(Q.type,Q.key,Q.props,null,H.mode,le),le.ref=Hc(H,B,Q),le.return=H,le)}function Y(H,B,Q,le){return B===null||B.tag!==4||B.stateNode.containerInfo!==Q.containerInfo||B.stateNode.implementation!==Q.implementation?(B=eg(Q,H.mode,le),B.return=H,B):(B=g(B,Q.children||[]),B.return=H,B)}function ie(H,B,Q,le,Ee){return B===null||B.tag!==7?(B=aa(Q,H.mode,le,Ee),B.return=H,B):(B=g(B,Q),B.return=H,B)}function ae(H,B,Q){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Xm(""+B,H.mode,Q),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Z:return Q=Rh(B.type,B.key,B.props,null,H.mode,Q),Q.ref=Hc(H,null,B),Q.return=H,Q;case K:return B=eg(B,H.mode,Q),B.return=H,B;case Qe:var le=B._init;return ae(H,le(B._payload),Q)}if(an(B)||pe(B))return B=aa(B,H.mode,Q,null),B.return=H,B;ah(H,B)}return null}function se(H,B,Q,le){var Ee=B!==null?B.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Ee!==null?null:L(H,B,""+Q,le);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Z:return Q.key===Ee?F(H,B,Q,le):null;case K:return Q.key===Ee?Y(H,B,Q,le):null;case Qe:return Ee=Q._init,se(H,B,Ee(Q._payload),le)}if(an(Q)||pe(Q))return Ee!==null?null:ie(H,B,Q,le,null);ah(H,Q)}return null}function fe(H,B,Q,le,Ee){if(typeof le=="string"&&le!==""||typeof le=="number")return H=H.get(Q)||null,L(B,H,""+le,Ee);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case Z:return H=H.get(le.key===null?Q:le.key)||null,F(B,H,le,Ee);case K:return H=H.get(le.key===null?Q:le.key)||null,Y(B,H,le,Ee);case Qe:var Pe=le._init;return fe(H,B,Q,Pe(le._payload),Ee)}if(an(le)||pe(le))return H=H.get(Q)||null,ie(B,H,le,Ee,null);ah(B,le)}return null}function ve(H,B,Q,le){for(var Ee=null,Pe=null,je=B,Ve=B=0,dn=null;je!==null&&Ve<Q.length;Ve++){je.index>Ve?(dn=je,je=null):dn=je.sibling;var lt=se(H,je,Q[Ve],le);if(lt===null){je===null&&(je=dn);break}i&&je&&lt.alternate===null&&a(H,je),B=_(lt,B,Ve),Pe===null?Ee=lt:Pe.sibling=lt,Pe=lt,je=dn}if(Ve===Q.length)return c(H,je),Ct&&Xo(H,Ve),Ee;if(je===null){for(;Ve<Q.length;Ve++)je=ae(H,Q[Ve],le),je!==null&&(B=_(je,B,Ve),Pe===null?Ee=je:Pe.sibling=je,Pe=je);return Ct&&Xo(H,Ve),Ee}for(je=f(H,je);Ve<Q.length;Ve++)dn=fe(je,H,Ve,Q[Ve],le),dn!==null&&(i&&dn.alternate!==null&&je.delete(dn.key===null?Ve:dn.key),B=_(dn,B,Ve),Pe===null?Ee=dn:Pe.sibling=dn,Pe=dn);return i&&je.forEach(function(Qi){return a(H,Qi)}),Ct&&Xo(H,Ve),Ee}function xe(H,B,Q,le){var Ee=pe(Q);if(typeof Ee!="function")throw Error(n(150));if(Q=Ee.call(Q),Q==null)throw Error(n(151));for(var Pe=Ee=null,je=B,Ve=B=0,dn=null,lt=Q.next();je!==null&&!lt.done;Ve++,lt=Q.next()){je.index>Ve?(dn=je,je=null):dn=je.sibling;var Qi=se(H,je,lt.value,le);if(Qi===null){je===null&&(je=dn);break}i&&je&&Qi.alternate===null&&a(H,je),B=_(Qi,B,Ve),Pe===null?Ee=Qi:Pe.sibling=Qi,Pe=Qi,je=dn}if(lt.done)return c(H,je),Ct&&Xo(H,Ve),Ee;if(je===null){for(;!lt.done;Ve++,lt=Q.next())lt=ae(H,lt.value,le),lt!==null&&(B=_(lt,B,Ve),Pe===null?Ee=lt:Pe.sibling=lt,Pe=lt);return Ct&&Xo(H,Ve),Ee}for(je=f(H,je);!lt.done;Ve++,lt=Q.next())lt=fe(je,H,Ve,lt.value,le),lt!==null&&(i&&lt.alternate!==null&&je.delete(lt.key===null?Ve:lt.key),B=_(lt,B,Ve),Pe===null?Ee=lt:Pe.sibling=lt,Pe=lt);return i&&je.forEach(function(gS){return a(H,gS)}),Ct&&Xo(H,Ve),Ee}function Bt(H,B,Q,le){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Z:e:{for(var Ee=Q.key,Pe=B;Pe!==null;){if(Pe.key===Ee){if(Ee=Q.type,Ee===A){if(Pe.tag===7){c(H,Pe.sibling),B=g(Pe,Q.props.children),B.return=H,H=B;break e}}else if(Pe.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Qe&&$v(Ee)===Pe.type){c(H,Pe.sibling),B=g(Pe,Q.props),B.ref=Hc(H,Pe,Q),B.return=H,H=B;break e}c(H,Pe);break}else a(H,Pe);Pe=Pe.sibling}Q.type===A?(B=aa(Q.props.children,H.mode,le,Q.key),B.return=H,H=B):(le=Rh(Q.type,Q.key,Q.props,null,H.mode,le),le.ref=Hc(H,B,Q),le.return=H,H=le)}return T(H);case K:e:{for(Pe=Q.key;B!==null;){if(B.key===Pe)if(B.tag===4&&B.stateNode.containerInfo===Q.containerInfo&&B.stateNode.implementation===Q.implementation){c(H,B.sibling),B=g(B,Q.children||[]),B.return=H,H=B;break e}else{c(H,B);break}else a(H,B);B=B.sibling}B=eg(Q,H.mode,le),B.return=H,H=B}return T(H);case Qe:return Pe=Q._init,Bt(H,B,Pe(Q._payload),le)}if(an(Q))return ve(H,B,Q,le);if(pe(Q))return xe(H,B,Q,le);ah(H,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,B!==null&&B.tag===6?(c(H,B.sibling),B=g(B,Q),B.return=H,H=B):(c(H,B),B=Xm(Q,H.mode,le),B.return=H,H=B),T(H)):c(H,B)}return Bt}var fl=Wv(!0),qv=Wv(!1),lh=Vi(null),ch=null,pl=null,cm=null;function um(){cm=pl=ch=null}function dm(i){var a=lh.current;kt(lh),i._currentValue=a}function hm(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function ml(i,a){ch=i,cm=pl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(ir=!0),i.firstContext=null)}function jr(i){var a=i._currentValue;if(cm!==i)if(i={context:i,memoizedValue:a,next:null},pl===null){if(ch===null)throw Error(n(308));pl=i,ch.dependencies={lanes:0,firstContext:i}}else pl=pl.next=i;return a}var ea=null;function fm(i){ea===null?ea=[i]:ea.push(i)}function Hv(i,a,c,f){var g=a.interleaved;return g===null?(c.next=c,fm(a)):(c.next=g.next,g.next=c),a.interleaved=c,Xs(i,f)}function Xs(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Ui=!1;function pm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kv(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ei(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Bi(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(at&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,Xs(i,c)}return g=f.interleaved,g===null?(a.next=a,fm(f)):(a.next=g.next,g.next=a),f.interleaved=a,Xs(i,c)}function uh(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Ri(i,c)}}function Gv(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var T={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?g=_=T:_=_.next=T,c=c.next}while(c!==null);_===null?g=_=a:_=_.next=a}else g=_=a;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function dh(i,a,c,f){var g=i.updateQueue;Ui=!1;var _=g.firstBaseUpdate,T=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var F=L,Y=F.next;F.next=null,T===null?_=Y:T.next=Y,T=F;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,L=ie.lastBaseUpdate,L!==T&&(L===null?ie.firstBaseUpdate=Y:L.next=Y,ie.lastBaseUpdate=F))}if(_!==null){var ae=g.baseState;T=0,ie=Y=F=null,L=_;do{var se=L.lane,fe=L.eventTime;if((f&se)===se){ie!==null&&(ie=ie.next={eventTime:fe,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var ve=i,xe=L;switch(se=a,fe=c,xe.tag){case 1:if(ve=xe.payload,typeof ve=="function"){ae=ve.call(fe,ae,se);break e}ae=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=xe.payload,se=typeof ve=="function"?ve.call(fe,ae,se):ve,se==null)break e;ae=de({},ae,se);break e;case 2:Ui=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,se=g.effects,se===null?g.effects=[L]:se.push(L))}else fe={eventTime:fe,lane:se,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ie===null?(Y=ie=fe,F=ae):ie=ie.next=fe,T|=se;if(L=L.next,L===null){if(L=g.shared.pending,L===null)break;se=L,L=se.next,se.next=null,g.lastBaseUpdate=se,g.shared.pending=null}}while(!0);if(ie===null&&(F=ae),g.baseState=F,g.firstBaseUpdate=Y,g.lastBaseUpdate=ie,a=g.shared.interleaved,a!==null){g=a;do T|=g.lane,g=g.next;while(g!==a)}else _===null&&(g.shared.lanes=0);ra|=T,i.lanes=T,i.memoizedState=ae}}function Qv(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],g=f.callback;if(g!==null){if(f.callback=null,f=c,typeof g!="function")throw Error(n(191,g));g.call(f)}}}var Kc={},Is=Vi(Kc),Gc=Vi(Kc),Qc=Vi(Kc);function ta(i){if(i===Kc)throw Error(n(174));return i}function mm(i,a){switch(wt(Qc,a),wt(Gc,i),wt(Is,Kc),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:vt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=vt(a,i)}kt(Is),wt(Is,a)}function gl(){kt(Is),kt(Gc),kt(Qc)}function Zv(i){ta(Qc.current);var a=ta(Is.current),c=vt(a,i.type);a!==c&&(wt(Gc,i),wt(Is,c))}function gm(i){Gc.current===i&&(kt(Is),kt(Gc))}var Rt=Vi(0);function hh(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ym=[];function vm(){for(var i=0;i<ym.length;i++)ym[i]._workInProgressVersionPrimary=null;ym.length=0}var fh=G.ReactCurrentDispatcher,_m=G.ReactCurrentBatchConfig,na=0,Pt=null,tn=null,cn=null,ph=!1,Zc=!1,Yc=0,V1=0;function jn(){throw Error(n(321))}function wm(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!ns(i[c],a[c]))return!1;return!0}function bm(i,a,c,f,g,_){if(na=_,Pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,fh.current=i===null||i.memoizedState===null?B1:$1,i=c(f,g),Zc){_=0;do{if(Zc=!1,Yc=0,25<=_)throw Error(n(301));_+=1,cn=tn=null,a.updateQueue=null,fh.current=W1,i=c(f,g)}while(Zc)}if(fh.current=yh,a=tn!==null&&tn.next!==null,na=0,cn=tn=Pt=null,ph=!1,a)throw Error(n(300));return i}function xm(){var i=Yc!==0;return Yc=0,i}function Ss(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Pt.memoizedState=cn=i:cn=cn.next=i,cn}function Dr(){if(tn===null){var i=Pt.alternate;i=i!==null?i.memoizedState:null}else i=tn.next;var a=cn===null?Pt.memoizedState:cn.next;if(a!==null)cn=a,tn=i;else{if(i===null)throw Error(n(310));tn=i,i={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},cn===null?Pt.memoizedState=cn=i:cn=cn.next=i}return cn}function Jc(i,a){return typeof a=="function"?a(i):a}function km(i){var a=Dr(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var f=tn,g=f.baseQueue,_=c.pending;if(_!==null){if(g!==null){var T=g.next;g.next=_.next,_.next=T}f.baseQueue=g=_,c.pending=null}if(g!==null){_=g.next,f=f.baseState;var L=T=null,F=null,Y=_;do{var ie=Y.lane;if((na&ie)===ie)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),f=Y.hasEagerState?Y.eagerState:i(f,Y.action);else{var ae={lane:ie,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(L=F=ae,T=f):F=F.next=ae,Pt.lanes|=ie,ra|=ie}Y=Y.next}while(Y!==null&&Y!==_);F===null?T=f:F.next=L,ns(f,a.memoizedState)||(ir=!0),a.memoizedState=f,a.baseState=T,a.baseQueue=F,c.lastRenderedState=f}if(i=c.interleaved,i!==null){g=i;do _=g.lane,Pt.lanes|=_,ra|=_,g=g.next;while(g!==i)}else g===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Em(i){var a=Dr(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,_=a.memoizedState;if(g!==null){c.pending=null;var T=g=g.next;do _=i(_,T.action),T=T.next;while(T!==g);ns(_,a.memoizedState)||(ir=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),c.lastRenderedState=_}return[_,f]}function Yv(){}function Jv(i,a){var c=Pt,f=Dr(),g=a(),_=!ns(f.memoizedState,g);if(_&&(f.memoizedState=g,ir=!0),f=f.queue,Tm(t_.bind(null,c,f,i),[i]),f.getSnapshot!==a||_||cn!==null&&cn.memoizedState.tag&1){if(c.flags|=2048,Xc(9,e_.bind(null,c,f,g,a),void 0,null),un===null)throw Error(n(349));(na&30)!==0||Xv(c,a,g)}return g}function Xv(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Pt.updateQueue,a===null?(a={lastEffect:null,stores:null},Pt.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function e_(i,a,c,f){a.value=c,a.getSnapshot=f,n_(a)&&r_(i)}function t_(i,a,c){return c(function(){n_(a)&&r_(i)})}function n_(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!ns(i,c)}catch{return!0}}function r_(i){var a=Xs(i,1);a!==null&&as(a,i,1,-1)}function s_(i){var a=Ss();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jc,lastRenderedState:i},a.queue=i,i=i.dispatch=U1.bind(null,Pt,i),[a.memoizedState,i]}function Xc(i,a,c,f){return i={tag:i,create:a,destroy:c,deps:f,next:null},a=Pt.updateQueue,a===null?(a={lastEffect:null,stores:null},Pt.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i)),i}function i_(){return Dr().memoizedState}function mh(i,a,c,f){var g=Ss();Pt.flags|=i,g.memoizedState=Xc(1|a,c,void 0,f===void 0?null:f)}function gh(i,a,c,f){var g=Dr();f=f===void 0?null:f;var _=void 0;if(tn!==null){var T=tn.memoizedState;if(_=T.destroy,f!==null&&wm(f,T.deps)){g.memoizedState=Xc(a,c,_,f);return}}Pt.flags|=i,g.memoizedState=Xc(1|a,c,_,f)}function o_(i,a){return mh(8390656,8,i,a)}function Tm(i,a){return gh(2048,8,i,a)}function a_(i,a){return gh(4,2,i,a)}function l_(i,a){return gh(4,4,i,a)}function c_(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function u_(i,a,c){return c=c!=null?c.concat([i]):null,gh(4,4,c_.bind(null,a,i),c)}function Im(){}function d_(i,a){var c=Dr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&wm(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function h_(i,a){var c=Dr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&wm(a,f[1])?f[0]:(i=i(),c.memoizedState=[i,a],i)}function f_(i,a,c){return(na&21)===0?(i.baseState&&(i.baseState=!1,ir=!0),i.memoizedState=c):(ns(c,a)||(c=qo(),Pt.lanes|=c,ra|=c,i.baseState=!0),a)}function F1(i,a){var c=Ye;Ye=c!==0&&4>c?c:4,i(!0);var f=_m.transition;_m.transition={};try{i(!1),a()}finally{Ye=c,_m.transition=f}}function p_(){return Dr().memoizedState}function z1(i,a,c){var f=Hi(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},m_(i))g_(a,c);else if(c=Hv(i,a,c,f),c!==null){var g=Wn();as(c,i,f,g),y_(c,a,f)}}function U1(i,a,c){var f=Hi(i),g={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(m_(i))g_(a,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var T=a.lastRenderedState,L=_(T,c);if(g.hasEagerState=!0,g.eagerState=L,ns(L,T)){var F=a.interleaved;F===null?(g.next=g,fm(a)):(g.next=F.next,F.next=g),a.interleaved=g;return}}catch{}finally{}c=Hv(i,a,g,f),c!==null&&(g=Wn(),as(c,i,f,g),y_(c,a,f))}}function m_(i){var a=i.alternate;return i===Pt||a!==null&&a===Pt}function g_(i,a){Zc=ph=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function y_(i,a,c){if((c&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Ri(i,c)}}var yh={readContext:jr,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},B1={readContext:jr,useCallback:function(i,a){return Ss().memoizedState=[i,a===void 0?null:a],i},useContext:jr,useEffect:o_,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,mh(4194308,4,c_.bind(null,a,i),c)},useLayoutEffect:function(i,a){return mh(4194308,4,i,a)},useInsertionEffect:function(i,a){return mh(4,2,i,a)},useMemo:function(i,a){var c=Ss();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var f=Ss();return a=c!==void 0?c(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=z1.bind(null,Pt,i),[f.memoizedState,i]},useRef:function(i){var a=Ss();return i={current:i},a.memoizedState=i},useState:s_,useDebugValue:Im,useDeferredValue:function(i){return Ss().memoizedState=i},useTransition:function(){var i=s_(!1),a=i[0];return i=F1.bind(null,i[1]),Ss().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var f=Pt,g=Ss();if(Ct){if(c===void 0)throw Error(n(407));c=c()}else{if(c=a(),un===null)throw Error(n(349));(na&30)!==0||Xv(f,a,c)}g.memoizedState=c;var _={value:c,getSnapshot:a};return g.queue=_,o_(t_.bind(null,f,_,i),[i]),f.flags|=2048,Xc(9,e_.bind(null,f,_,c,a),void 0,null),c},useId:function(){var i=Ss(),a=un.identifierPrefix;if(Ct){var c=Js,f=Ys;c=(f&~(1<<32-Un(f)-1)).toString(32)+c,a=":"+a+"R"+c,c=Yc++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=V1++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},$1={readContext:jr,useCallback:d_,useContext:jr,useEffect:Tm,useImperativeHandle:u_,useInsertionEffect:a_,useLayoutEffect:l_,useMemo:h_,useReducer:km,useRef:i_,useState:function(){return km(Jc)},useDebugValue:Im,useDeferredValue:function(i){var a=Dr();return f_(a,tn.memoizedState,i)},useTransition:function(){var i=km(Jc)[0],a=Dr().memoizedState;return[i,a]},useMutableSource:Yv,useSyncExternalStore:Jv,useId:p_,unstable_isNewReconciler:!1},W1={readContext:jr,useCallback:d_,useContext:jr,useEffect:Tm,useImperativeHandle:u_,useInsertionEffect:a_,useLayoutEffect:l_,useMemo:h_,useReducer:Em,useRef:i_,useState:function(){return Em(Jc)},useDebugValue:Im,useDeferredValue:function(i){var a=Dr();return tn===null?a.memoizedState=i:f_(a,tn.memoizedState,i)},useTransition:function(){var i=Em(Jc)[0],a=Dr().memoizedState;return[i,a]},useMutableSource:Yv,useSyncExternalStore:Jv,useId:p_,unstable_isNewReconciler:!1};function ss(i,a){if(i&&i.defaultProps){a=de({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function Sm(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:de({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var vh={isMounted:function(i){return(i=i._reactInternals)?Qr(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var f=Wn(),g=Hi(i),_=ei(f,g);_.payload=a,c!=null&&(_.callback=c),a=Bi(i,_,g),a!==null&&(as(a,i,g,f),uh(a,i,g))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=Wn(),g=Hi(i),_=ei(f,g);_.tag=1,_.payload=a,c!=null&&(_.callback=c),a=Bi(i,_,g),a!==null&&(as(a,i,g,f),uh(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Wn(),f=Hi(i),g=ei(c,f);g.tag=2,a!=null&&(g.callback=a),a=Bi(i,g,f),a!==null&&(as(a,i,f,c),uh(a,i,f))}};function v_(i,a,c,f,g,_,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,T):a.prototype&&a.prototype.isPureReactComponent?!Fc(c,f)||!Fc(g,_):!0}function __(i,a,c){var f=!1,g=Fi,_=a.contextType;return typeof _=="object"&&_!==null?_=jr(_):(g=sr(a)?Yo:Pn.current,f=a.contextTypes,_=(f=f!=null)?cl(i,g):Fi),a=new a(c,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=vh,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=_),a}function w_(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&vh.enqueueReplaceState(a,a.state,null)}function Cm(i,a,c,f){var g=i.stateNode;g.props=c,g.state=i.memoizedState,g.refs={},pm(i);var _=a.contextType;typeof _=="object"&&_!==null?g.context=jr(_):(_=sr(a)?Yo:Pn.current,g.context=cl(i,_)),g.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Sm(i,a,_,c),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&vh.enqueueReplaceState(g,g.state,null),dh(i,c,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function yl(i,a){try{var c="",f=a;do c+=De(f),f=f.return;while(f);var g=c}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:g,digest:null}}function Am(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function Nm(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var q1=typeof WeakMap=="function"?WeakMap:Map;function b_(i,a,c){c=ei(-1,c),c.tag=3,c.payload={element:null};var f=a.value;return c.callback=function(){Th||(Th=!0,qm=f),Nm(i,a)},c}function x_(i,a,c){c=ei(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;c.payload=function(){return f(g)},c.callback=function(){Nm(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){Nm(i,a),typeof f!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),c}function k_(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new q1;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(c)||(g.add(c),i=iS.bind(null,i,a,c),a.then(i,i))}function E_(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function T_(i,a,c,f,g){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=ei(-1,1),a.tag=2,Bi(c,a,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var H1=G.ReactCurrentOwner,ir=!1;function $n(i,a,c,f){a.child=i===null?qv(a,null,c,f):fl(a,i.child,c,f)}function I_(i,a,c,f,g){c=c.render;var _=a.ref;return ml(a,g),f=bm(i,a,c,f,_,g),c=xm(),i!==null&&!ir?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,ti(i,a,g)):(Ct&&c&&sm(a),a.flags|=1,$n(i,a,f,g),a.child)}function S_(i,a,c,f,g){if(i===null){var _=c.type;return typeof _=="function"&&!Jm(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=_,C_(i,a,_,f,g)):(i=Rh(c.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,(i.lanes&g)===0){var T=_.memoizedProps;if(c=c.compare,c=c!==null?c:Fc,c(T,f)&&i.ref===a.ref)return ti(i,a,g)}return a.flags|=1,i=Gi(_,f),i.ref=a.ref,i.return=a,a.child=i}function C_(i,a,c,f,g){if(i!==null){var _=i.memoizedProps;if(Fc(_,f)&&i.ref===a.ref)if(ir=!1,a.pendingProps=f=_,(i.lanes&g)!==0)(i.flags&131072)!==0&&(ir=!0);else return a.lanes=i.lanes,ti(i,a,g)}return Rm(i,a,c,f,g)}function A_(i,a,c){var f=a.pendingProps,g=f.children,_=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(_l,br),br|=c;else{if((c&1073741824)===0)return i=_!==null?_.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,wt(_l,br),br|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:c,wt(_l,br),br|=f}else _!==null?(f=_.baseLanes|c,a.memoizedState=null):f=c,wt(_l,br),br|=f;return $n(i,a,g,c),a.child}function N_(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Rm(i,a,c,f,g){var _=sr(c)?Yo:Pn.current;return _=cl(a,_),ml(a,g),c=bm(i,a,c,f,_,g),f=xm(),i!==null&&!ir?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,ti(i,a,g)):(Ct&&f&&sm(a),a.flags|=1,$n(i,a,c,g),a.child)}function R_(i,a,c,f,g){if(sr(c)){var _=!0;nh(a)}else _=!1;if(ml(a,g),a.stateNode===null)wh(i,a),__(a,c,f),Cm(a,c,f,g),f=!0;else if(i===null){var T=a.stateNode,L=a.memoizedProps;T.props=L;var F=T.context,Y=c.contextType;typeof Y=="object"&&Y!==null?Y=jr(Y):(Y=sr(c)?Yo:Pn.current,Y=cl(a,Y));var ie=c.getDerivedStateFromProps,ae=typeof ie=="function"||typeof T.getSnapshotBeforeUpdate=="function";ae||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==f||F!==Y)&&w_(a,T,f,Y),Ui=!1;var se=a.memoizedState;T.state=se,dh(a,f,T,g),F=a.memoizedState,L!==f||se!==F||rr.current||Ui?(typeof ie=="function"&&(Sm(a,c,ie,f),F=a.memoizedState),(L=Ui||v_(a,c,L,f,se,F,Y))?(ae||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),T.props=f,T.state=F,T.context=Y,f=L):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{T=a.stateNode,Kv(i,a),L=a.memoizedProps,Y=a.type===a.elementType?L:ss(a.type,L),T.props=Y,ae=a.pendingProps,se=T.context,F=c.contextType,typeof F=="object"&&F!==null?F=jr(F):(F=sr(c)?Yo:Pn.current,F=cl(a,F));var fe=c.getDerivedStateFromProps;(ie=typeof fe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==ae||se!==F)&&w_(a,T,f,F),Ui=!1,se=a.memoizedState,T.state=se,dh(a,f,T,g);var ve=a.memoizedState;L!==ae||se!==ve||rr.current||Ui?(typeof fe=="function"&&(Sm(a,c,fe,f),ve=a.memoizedState),(Y=Ui||v_(a,c,Y,f,se,ve,F)||!1)?(ie||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,ve,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,ve,F)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=ve),T.props=f,T.state=ve,T.context=F,f=Y):(typeof T.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=1024),f=!1)}return Pm(i,a,c,f,_,g)}function Pm(i,a,c,f,g,_){N_(i,a);var T=(a.flags&128)!==0;if(!f&&!T)return g&&Lv(a,c,!1),ti(i,a,_);f=a.stateNode,H1.current=a;var L=T&&typeof c.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&T?(a.child=fl(a,i.child,null,_),a.child=fl(a,null,L,_)):$n(i,a,L,_),a.memoizedState=f.state,g&&Lv(a,c,!0),a.child}function P_(i){var a=i.stateNode;a.pendingContext?Dv(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Dv(i,a.context,!1),mm(i,a.containerInfo)}function j_(i,a,c,f,g){return hl(),lm(g),a.flags|=256,$n(i,a,c,f),a.child}var jm={dehydrated:null,treeContext:null,retryLane:0};function Dm(i){return{baseLanes:i,cachePool:null,transitions:null}}function D_(i,a,c){var f=a.pendingProps,g=Rt.current,_=!1,T=(a.flags&128)!==0,L;if((L=T)||(L=i!==null&&i.memoizedState===null?!1:(g&2)!==0),L?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),wt(Rt,g&1),i===null)return am(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(T=f.children,i=f.fallback,_?(f=a.mode,_=a.child,T={mode:"hidden",children:T},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=T):_=Ph(T,f,0,null),i=aa(i,f,c,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=Dm(c),a.memoizedState=jm,i):Om(a,T));if(g=i.memoizedState,g!==null&&(L=g.dehydrated,L!==null))return K1(i,a,T,f,L,g,c);if(_){_=f.fallback,T=a.mode,g=i.child,L=g.sibling;var F={mode:"hidden",children:f.children};return(T&1)===0&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=F,a.deletions=null):(f=Gi(g,F),f.subtreeFlags=g.subtreeFlags&14680064),L!==null?_=Gi(L,_):(_=aa(_,T,c,null),_.flags|=2),_.return=a,f.return=a,f.sibling=_,a.child=f,f=_,_=a.child,T=i.child.memoizedState,T=T===null?Dm(c):{baseLanes:T.baseLanes|c,cachePool:null,transitions:T.transitions},_.memoizedState=T,_.childLanes=i.childLanes&~c,a.memoizedState=jm,f}return _=i.child,i=_.sibling,f=Gi(_,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=c),f.return=a,f.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=f,a.memoizedState=null,f}function Om(i,a){return a=Ph({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function _h(i,a,c,f){return f!==null&&lm(f),fl(a,i.child,null,c),i=Om(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function K1(i,a,c,f,g,_,T){if(c)return a.flags&256?(a.flags&=-257,f=Am(Error(n(422))),_h(i,a,T,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=f.fallback,g=a.mode,f=Ph({mode:"visible",children:f.children},g,0,null),_=aa(_,g,T,null),_.flags|=2,f.return=a,_.return=a,f.sibling=_,a.child=f,(a.mode&1)!==0&&fl(a,i.child,null,T),a.child.memoizedState=Dm(T),a.memoizedState=jm,_);if((a.mode&1)===0)return _h(i,a,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var L=f.dgst;return f=L,_=Error(n(419)),f=Am(_,f,void 0),_h(i,a,T,f)}if(L=(T&i.childLanes)!==0,ir||L){if(f=un,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|T))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,Xs(i,g),as(f,i,g,-1))}return Ym(),f=Am(Error(n(421))),_h(i,a,T,f)}return g.data==="$?"?(a.flags|=128,a.child=i.child,a=oS.bind(null,i),g._reactRetry=a,null):(i=_.treeContext,wr=Mi(g.nextSibling),_r=a,Ct=!0,rs=null,i!==null&&(Rr[Pr++]=Ys,Rr[Pr++]=Js,Rr[Pr++]=Jo,Ys=i.id,Js=i.overflow,Jo=a),a=Om(a,f.children),a.flags|=4096,a)}function O_(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),hm(i.return,a,c)}function Lm(i,a,c,f,g){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=c,_.tailMode=g)}function L_(i,a,c){var f=a.pendingProps,g=f.revealOrder,_=f.tail;if($n(i,a,f.children,c),f=Rt.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&O_(i,c,a);else if(i.tag===19)O_(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(wt(Rt,f),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&hh(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Lm(a,!1,g,c,_);break;case"backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&hh(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Lm(a,!0,c,null,_);break;case"together":Lm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function wh(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function ti(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),ra|=a.lanes,(c&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,c=Gi(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Gi(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function G1(i,a,c){switch(a.tag){case 3:P_(a),hl();break;case 5:Zv(a);break;case 1:sr(a.type)&&nh(a);break;case 4:mm(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,g=a.memoizedProps.value;wt(lh,f._currentValue),f._currentValue=g;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(wt(Rt,Rt.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?D_(i,a,c):(wt(Rt,Rt.current&1),i=ti(i,a,c),i!==null?i.sibling:null);wt(Rt,Rt.current&1);break;case 19:if(f=(c&a.childLanes)!==0,(i.flags&128)!==0){if(f)return L_(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),wt(Rt,Rt.current),f)break;return null;case 22:case 23:return a.lanes=0,A_(i,a,c)}return ti(i,a,c)}var M_,Mm,V_,F_;M_=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Mm=function(){},V_=function(i,a,c,f){var g=i.memoizedProps;if(g!==f){i=a.stateNode,ta(Is.current);var _=null;switch(c){case"input":g=vn(i,g),f=vn(i,f),_=[];break;case"select":g=de({},g,{value:void 0}),f=de({},f,{value:void 0}),_=[];break;case"textarea":g=ys(i,g),f=ys(i,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Xd)}Ei(c,f);var T;c=null;for(Y in g)if(!f.hasOwnProperty(Y)&&g.hasOwnProperty(Y)&&g[Y]!=null)if(Y==="style"){var L=g[Y];for(T in L)L.hasOwnProperty(T)&&(c||(c={}),c[T]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?_||(_=[]):(_=_||[]).push(Y,null));for(Y in f){var F=f[Y];if(L=g!=null?g[Y]:void 0,f.hasOwnProperty(Y)&&F!==L&&(F!=null||L!=null))if(Y==="style")if(L){for(T in L)!L.hasOwnProperty(T)||F&&F.hasOwnProperty(T)||(c||(c={}),c[T]="");for(T in F)F.hasOwnProperty(T)&&L[T]!==F[T]&&(c||(c={}),c[T]=F[T])}else c||(_||(_=[]),_.push(Y,c)),c=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,L=L?L.__html:void 0,F!=null&&L!==F&&(_=_||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(_=_||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&xt("scroll",i),_||L===F||(_=[])):(_=_||[]).push(Y,F))}c&&(_=_||[]).push("style",c);var Y=_;(a.updateQueue=Y)&&(a.flags|=4)}},F_=function(i,a,c,f){c!==f&&(a.flags|=4)};function eu(i,a){if(!Ct)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Dn(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function Q1(i,a,c){var f=a.pendingProps;switch(im(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(a),null;case 1:return sr(a.type)&&th(),Dn(a),null;case 3:return f=a.stateNode,gl(),kt(rr),kt(Pn),vm(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(oh(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,rs!==null&&(Gm(rs),rs=null))),Mm(i,a),Dn(a),null;case 5:gm(a);var g=ta(Qc.current);if(c=a.type,i!==null&&a.stateNode!=null)V_(i,a,c,f,g),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(n(166));return Dn(a),null}if(i=ta(Is.current),oh(a)){f=a.stateNode,c=a.type;var _=a.memoizedProps;switch(f[Ts]=a,f[Wc]=_,i=(a.mode&1)!==0,c){case"dialog":xt("cancel",f),xt("close",f);break;case"iframe":case"object":case"embed":xt("load",f);break;case"video":case"audio":for(g=0;g<Uc.length;g++)xt(Uc[g],f);break;case"source":xt("error",f);break;case"img":case"image":case"link":xt("error",f),xt("load",f);break;case"details":xt("toggle",f);break;case"input":fr(f,_),xt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},xt("invalid",f);break;case"textarea":Us(f,_),xt("invalid",f)}Ei(c,_),g=null;for(var T in _)if(_.hasOwnProperty(T)){var L=_[T];T==="children"?typeof L=="string"?f.textContent!==L&&(_.suppressHydrationWarning!==!0&&Jd(f.textContent,L,i),g=["children",L]):typeof L=="number"&&f.textContent!==""+L&&(_.suppressHydrationWarning!==!0&&Jd(f.textContent,L,i),g=["children",""+L]):s.hasOwnProperty(T)&&L!=null&&T==="onScroll"&&xt("scroll",f)}switch(c){case"input":rt(f),Oo(f,_,!0);break;case"textarea":rt(f),Lo(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=Xd)}f=g,a.updateQueue=f,f!==null&&(a.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ut(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=T.createElement(c,{is:f.is}):(i=T.createElement(c),c==="select"&&(T=i,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):i=T.createElementNS(i,c),i[Ts]=a,i[Wc]=f,M_(i,a,!1,!1),a.stateNode=i;e:{switch(T=Fo(c,f),c){case"dialog":xt("cancel",i),xt("close",i),g=f;break;case"iframe":case"object":case"embed":xt("load",i),g=f;break;case"video":case"audio":for(g=0;g<Uc.length;g++)xt(Uc[g],i);g=f;break;case"source":xt("error",i),g=f;break;case"img":case"image":case"link":xt("error",i),xt("load",i),g=f;break;case"details":xt("toggle",i),g=f;break;case"input":fr(i,f),g=vn(i,f),xt("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=de({},f,{value:void 0}),xt("invalid",i);break;case"textarea":Us(i,f),g=ys(i,f),xt("invalid",i);break;default:g=f}Ei(c,g),L=g;for(_ in L)if(L.hasOwnProperty(_)){var F=L[_];_==="style"?Vo(i,F):_==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Hr(i,F)):_==="children"?typeof F=="string"?(c!=="textarea"||F!=="")&&Kr(i,F):typeof F=="number"&&Kr(i,""+F):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?F!=null&&_==="onScroll"&&xt("scroll",i):F!=null&&U(i,_,F,T))}switch(c){case"input":rt(i),Oo(i,f,!1);break;case"textarea":rt(i),Lo(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Ue(f.value));break;case"select":i.multiple=!!f.multiple,_=f.value,_!=null?Jn(i,!!f.multiple,_,!1):f.defaultValue!=null&&Jn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Xd)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Dn(a),null;case 6:if(i&&a.stateNode!=null)F_(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(n(166));if(c=ta(Qc.current),ta(Is.current),oh(a)){if(f=a.stateNode,c=a.memoizedProps,f[Ts]=a,(_=f.nodeValue!==c)&&(i=_r,i!==null))switch(i.tag){case 3:Jd(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Jd(f.nodeValue,c,(i.mode&1)!==0)}_&&(a.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Ts]=a,a.stateNode=f}return Dn(a),null;case 13:if(kt(Rt),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ct&&wr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Bv(),hl(),a.flags|=98560,_=!1;else if(_=oh(a),f!==null&&f.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Ts]=a}else hl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dn(a),_=!1}else rs!==null&&(Gm(rs),rs=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(Rt.current&1)!==0?nn===0&&(nn=3):Ym())),a.updateQueue!==null&&(a.flags|=4),Dn(a),null);case 4:return gl(),Mm(i,a),i===null&&Bc(a.stateNode.containerInfo),Dn(a),null;case 10:return dm(a.type._context),Dn(a),null;case 17:return sr(a.type)&&th(),Dn(a),null;case 19:if(kt(Rt),_=a.memoizedState,_===null)return Dn(a),null;if(f=(a.flags&128)!==0,T=_.rendering,T===null)if(f)eu(_,!1);else{if(nn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(T=hh(i),T!==null){for(a.flags|=128,eu(_,!1),f=T.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=c,c=a.child;c!==null;)_=c,i=f,_.flags&=14680066,T=_.alternate,T===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=T.childLanes,_.lanes=T.lanes,_.child=T.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=T.memoizedProps,_.memoizedState=T.memoizedState,_.updateQueue=T.updateQueue,_.type=T.type,i=T.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return wt(Rt,Rt.current&1|2),a.child}i=i.sibling}_.tail!==null&&_t()>wl&&(a.flags|=128,f=!0,eu(_,!1),a.lanes=4194304)}else{if(!f)if(i=hh(T),i!==null){if(a.flags|=128,f=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),eu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!T.alternate&&!Ct)return Dn(a),null}else 2*_t()-_.renderingStartTime>wl&&c!==1073741824&&(a.flags|=128,f=!0,eu(_,!1),a.lanes=4194304);_.isBackwards?(T.sibling=a.child,a.child=T):(c=_.last,c!==null?c.sibling=T:a.child=T,_.last=T)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=_t(),a.sibling=null,c=Rt.current,wt(Rt,f?c&1|2:c&1),a):(Dn(a),null);case 22:case 23:return Zm(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(br&1073741824)!==0&&(Dn(a),a.subtreeFlags&6&&(a.flags|=8192)):Dn(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function Z1(i,a){switch(im(a),a.tag){case 1:return sr(a.type)&&th(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return gl(),kt(rr),kt(Pn),vm(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return gm(a),null;case 13:if(kt(Rt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));hl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return kt(Rt),null;case 4:return gl(),null;case 10:return dm(a.type._context),null;case 22:case 23:return Zm(),null;case 24:return null;default:return null}}var bh=!1,On=!1,Y1=typeof WeakSet=="function"?WeakSet:Set,ye=null;function vl(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Vt(i,a,f)}else c.current=null}function Vm(i,a,c){try{c()}catch(f){Vt(i,a,f)}}var z_=!1;function J1(i,a){if(Zp=Di,i=vv(),Bp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var T=0,L=-1,F=-1,Y=0,ie=0,ae=i,se=null;t:for(;;){for(var fe;ae!==c||g!==0&&ae.nodeType!==3||(L=T+g),ae!==_||f!==0&&ae.nodeType!==3||(F=T+f),ae.nodeType===3&&(T+=ae.nodeValue.length),(fe=ae.firstChild)!==null;)se=ae,ae=fe;for(;;){if(ae===i)break t;if(se===c&&++Y===g&&(L=T),se===_&&++ie===f&&(F=T),(fe=ae.nextSibling)!==null)break;ae=se,se=ae.parentNode}ae=fe}c=L===-1||F===-1?null:{start:L,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(Yp={focusedElem:i,selectionRange:c},Di=!1,ye=a;ye!==null;)if(a=ye,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ye=i;else for(;ye!==null;){a=ye;try{var ve=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var xe=ve.memoizedProps,Bt=ve.memoizedState,H=a.stateNode,B=H.getSnapshotBeforeUpdate(a.elementType===a.type?xe:ss(a.type,xe),Bt);H.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var Q=a.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(le){Vt(a,a.return,le)}if(i=a.sibling,i!==null){i.return=a.return,ye=i;break}ye=a.return}return ve=z_,z_=!1,ve}function tu(i,a,c){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var _=g.destroy;g.destroy=void 0,_!==void 0&&Vm(a,c,_)}g=g.next}while(g!==f)}}function xh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==a)}}function Fm(i){var a=i.ref;if(a!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof a=="function"?a(i):a.current=i}}function U_(i){var a=i.alternate;a!==null&&(i.alternate=null,U_(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Ts],delete a[Wc],delete a[tm],delete a[D1],delete a[O1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function B_(i){return i.tag===5||i.tag===3||i.tag===4}function $_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||B_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function zm(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Xd));else if(f!==4&&(i=i.child,i!==null))for(zm(i,a,c),i=i.sibling;i!==null;)zm(i,a,c),i=i.sibling}function Um(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Um(i,a,c),i=i.sibling;i!==null;)Um(i,a,c),i=i.sibling}var xn=null,is=!1;function $i(i,a,c){for(c=c.child;c!==null;)W_(i,a,c),c=c.sibling}function W_(i,a,c){if(mr&&typeof mr.onCommitFiberUnmount=="function")try{mr.onCommitFiberUnmount($o,c)}catch{}switch(c.tag){case 5:On||vl(c,a);case 6:var f=xn,g=is;xn=null,$i(i,a,c),xn=f,is=g,xn!==null&&(is?(i=xn,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):xn.removeChild(c.stateNode));break;case 18:xn!==null&&(is?(i=xn,c=c.stateNode,i.nodeType===8?em(i.parentNode,c):i.nodeType===1&&em(i,c),es(i)):em(xn,c.stateNode));break;case 4:f=xn,g=is,xn=c.stateNode.containerInfo,is=!0,$i(i,a,c),xn=f,is=g;break;case 0:case 11:case 14:case 15:if(!On&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,T=_.destroy;_=_.tag,T!==void 0&&((_&2)!==0||(_&4)!==0)&&Vm(c,a,T),g=g.next}while(g!==f)}$i(i,a,c);break;case 1:if(!On&&(vl(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(L){Vt(c,a,L)}$i(i,a,c);break;case 21:$i(i,a,c);break;case 22:c.mode&1?(On=(f=On)||c.memoizedState!==null,$i(i,a,c),On=f):$i(i,a,c);break;default:$i(i,a,c)}}function q_(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new Y1),a.forEach(function(f){var g=aS.bind(null,i,f);c.has(f)||(c.add(f),f.then(g,g))})}}function os(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];try{var _=i,T=a,L=T;e:for(;L!==null;){switch(L.tag){case 5:xn=L.stateNode,is=!1;break e;case 3:xn=L.stateNode.containerInfo,is=!0;break e;case 4:xn=L.stateNode.containerInfo,is=!0;break e}L=L.return}if(xn===null)throw Error(n(160));W_(_,T,g),xn=null,is=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(Y){Vt(g,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)H_(a,i),a=a.sibling}function H_(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(os(a,i),Cs(i),f&4){try{tu(3,i,i.return),xh(3,i)}catch(xe){Vt(i,i.return,xe)}try{tu(5,i,i.return)}catch(xe){Vt(i,i.return,xe)}}break;case 1:os(a,i),Cs(i),f&512&&c!==null&&vl(c,c.return);break;case 5:if(os(a,i),Cs(i),f&512&&c!==null&&vl(c,c.return),i.flags&32){var g=i.stateNode;try{Kr(g,"")}catch(xe){Vt(i,i.return,xe)}}if(f&4&&(g=i.stateNode,g!=null)){var _=i.memoizedProps,T=c!==null?c.memoizedProps:_,L=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{L==="input"&&_.type==="radio"&&_.name!=null&&Tr(g,_),Fo(L,T);var Y=Fo(L,_);for(T=0;T<F.length;T+=2){var ie=F[T],ae=F[T+1];ie==="style"?Vo(g,ae):ie==="dangerouslySetInnerHTML"?Hr(g,ae):ie==="children"?Kr(g,ae):U(g,ie,ae,Y)}switch(L){case"input":ki(g,_);break;case"textarea":Bs(g,_);break;case"select":var se=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var fe=_.value;fe!=null?Jn(g,!!_.multiple,fe,!1):se!==!!_.multiple&&(_.defaultValue!=null?Jn(g,!!_.multiple,_.defaultValue,!0):Jn(g,!!_.multiple,_.multiple?[]:"",!1))}g[Wc]=_}catch(xe){Vt(i,i.return,xe)}}break;case 6:if(os(a,i),Cs(i),f&4){if(i.stateNode===null)throw Error(n(162));g=i.stateNode,_=i.memoizedProps;try{g.nodeValue=_}catch(xe){Vt(i,i.return,xe)}}break;case 3:if(os(a,i),Cs(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{es(a.containerInfo)}catch(xe){Vt(i,i.return,xe)}break;case 4:os(a,i),Cs(i);break;case 13:os(a,i),Cs(i),g=i.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(Wm=_t())),f&4&&q_(i);break;case 22:if(ie=c!==null&&c.memoizedState!==null,i.mode&1?(On=(Y=On)||ie,os(a,i),On=Y):os(a,i),Cs(i),f&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ie&&(i.mode&1)!==0)for(ye=i,ie=i.child;ie!==null;){for(ae=ye=ie;ye!==null;){switch(se=ye,fe=se.child,se.tag){case 0:case 11:case 14:case 15:tu(4,se,se.return);break;case 1:vl(se,se.return);var ve=se.stateNode;if(typeof ve.componentWillUnmount=="function"){f=se,c=se.return;try{a=f,ve.props=a.memoizedProps,ve.state=a.memoizedState,ve.componentWillUnmount()}catch(xe){Vt(f,c,xe)}}break;case 5:vl(se,se.return);break;case 22:if(se.memoizedState!==null){Q_(ae);continue}}fe!==null?(fe.return=se,ye=fe):Q_(ae)}ie=ie.sibling}e:for(ie=null,ae=i;;){if(ae.tag===5){if(ie===null){ie=ae;try{g=ae.stateNode,Y?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(L=ae.stateNode,F=ae.memoizedProps.style,T=F!=null&&F.hasOwnProperty("display")?F.display:null,L.style.display=Mo("display",T))}catch(xe){Vt(i,i.return,xe)}}}else if(ae.tag===6){if(ie===null)try{ae.stateNode.nodeValue=Y?"":ae.memoizedProps}catch(xe){Vt(i,i.return,xe)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===i)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===i)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===i)break e;ie===ae&&(ie=null),ae=ae.return}ie===ae&&(ie=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:os(a,i),Cs(i),f&4&&q_(i);break;case 21:break;default:os(a,i),Cs(i)}}function Cs(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(B_(c)){var f=c;break e}c=c.return}throw Error(n(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Kr(g,""),f.flags&=-33);var _=$_(i);Um(i,_,g);break;case 3:case 4:var T=f.stateNode.containerInfo,L=$_(i);zm(i,L,T);break;default:throw Error(n(161))}}catch(F){Vt(i,i.return,F)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function X1(i,a,c){ye=i,K_(i)}function K_(i,a,c){for(var f=(i.mode&1)!==0;ye!==null;){var g=ye,_=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||bh;if(!T){var L=g.alternate,F=L!==null&&L.memoizedState!==null||On;L=bh;var Y=On;if(bh=T,(On=F)&&!Y)for(ye=g;ye!==null;)T=ye,F=T.child,T.tag===22&&T.memoizedState!==null?Z_(g):F!==null?(F.return=T,ye=F):Z_(g);for(;_!==null;)ye=_,K_(_),_=_.sibling;ye=g,bh=L,On=Y}G_(i)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,ye=_):G_(i)}}function G_(i){for(;ye!==null;){var a=ye;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:On||xh(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!On)if(c===null)f.componentDidMount();else{var g=a.elementType===a.type?c.memoizedProps:ss(a.type,c.memoizedProps);f.componentDidUpdate(g,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&Qv(a,_,f);break;case 3:var T=a.updateQueue;if(T!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}Qv(a,T,c)}break;case 5:var L=a.stateNode;if(c===null&&a.flags&4){c=L;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var ie=Y.memoizedState;if(ie!==null){var ae=ie.dehydrated;ae!==null&&es(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}On||a.flags&512&&Fm(a)}catch(se){Vt(a,a.return,se)}}if(a===i){ye=null;break}if(c=a.sibling,c!==null){c.return=a.return,ye=c;break}ye=a.return}}function Q_(i){for(;ye!==null;){var a=ye;if(a===i){ye=null;break}var c=a.sibling;if(c!==null){c.return=a.return,ye=c;break}ye=a.return}}function Z_(i){for(;ye!==null;){var a=ye;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{xh(4,a)}catch(F){Vt(a,c,F)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(F){Vt(a,g,F)}}var _=a.return;try{Fm(a)}catch(F){Vt(a,_,F)}break;case 5:var T=a.return;try{Fm(a)}catch(F){Vt(a,T,F)}}}catch(F){Vt(a,a.return,F)}if(a===i){ye=null;break}var L=a.sibling;if(L!==null){L.return=a.return,ye=L;break}ye=a.return}}var eS=Math.ceil,kh=G.ReactCurrentDispatcher,Bm=G.ReactCurrentOwner,Or=G.ReactCurrentBatchConfig,at=0,un=null,Qt=null,kn=0,br=0,_l=Vi(0),nn=0,nu=null,ra=0,Eh=0,$m=0,ru=null,or=null,Wm=0,wl=1/0,ni=null,Th=!1,qm=null,Wi=null,Ih=!1,qi=null,Sh=0,su=0,Hm=null,Ch=-1,Ah=0;function Wn(){return(at&6)!==0?_t():Ch!==-1?Ch:Ch=_t()}function Hi(i){return(i.mode&1)===0?1:(at&2)!==0&&kn!==0?kn&-kn:M1.transition!==null?(Ah===0&&(Ah=qo()),Ah):(i=Ye,i!==0||(i=window.event,i=i===void 0?16:Pc(i.type)),i)}function as(i,a,c,f){if(50<su)throw su=0,Hm=null,Error(n(185));Ni(i,c,f),((at&2)===0||i!==un)&&(i===un&&((at&2)===0&&(Eh|=c),nn===4&&Ki(i,kn)),ar(i,f),c===1&&at===0&&(a.mode&1)===0&&(wl=_t()+500,rh&&zi()))}function ar(i,a){var c=i.callbackNode;Ws(i,a);var f=Wo(i,i===un?kn:0);if(f===0)c!==null&&Sc(c),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(c!=null&&Sc(c),a===1)i.tag===0?L1(J_.bind(null,i)):Mv(J_.bind(null,i)),P1(function(){(at&6)===0&&zi()}),c=null;else{switch(Pi(f)){case 1:c=Bo;break;case 4:c=Si;break;case 16:c=Cr;break;case 536870912:c=Ad;break;default:c=Cr}c=ow(c,Y_.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function Y_(i,a){if(Ch=-1,Ah=0,(at&6)!==0)throw Error(n(327));var c=i.callbackNode;if(bl()&&i.callbackNode!==c)return null;var f=Wo(i,i===un?kn:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=Nh(i,f);else{a=f;var g=at;at|=2;var _=ew();(un!==i||kn!==a)&&(ni=null,wl=_t()+500,ia(i,a));do try{rS();break}catch(L){X_(i,L)}while(!0);um(),kh.current=_,at=g,Qt!==null?a=0:(un=null,kn=0,a=nn)}if(a!==0){if(a===2&&(g=gr(i),g!==0&&(f=g,a=Km(i,g))),a===1)throw c=nu,ia(i,0),Ki(i,f),ar(i,_t()),c;if(a===6)Ki(i,f);else{if(g=i.current.alternate,(f&30)===0&&!tS(g)&&(a=Nh(i,f),a===2&&(_=gr(i),_!==0&&(f=_,a=Km(i,_))),a===1))throw c=nu,ia(i,0),Ki(i,f),ar(i,_t()),c;switch(i.finishedWork=g,i.finishedLanes=f,a){case 0:case 1:throw Error(n(345));case 2:oa(i,or,ni);break;case 3:if(Ki(i,f),(f&130023424)===f&&(a=Wm+500-_t(),10<a)){if(Wo(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Wn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=Xp(oa.bind(null,i,or,ni),a);break}oa(i,or,ni);break;case 4:if(Ki(i,f),(f&4194240)===f)break;for(a=i.eventTimes,g=-1;0<f;){var T=31-Un(f);_=1<<T,T=a[T],T>g&&(g=T),f&=~_}if(f=g,f=_t()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*eS(f/1960))-f,10<f){i.timeoutHandle=Xp(oa.bind(null,i,or,ni),f);break}oa(i,or,ni);break;case 5:oa(i,or,ni);break;default:throw Error(n(329))}}}return ar(i,_t()),i.callbackNode===c?Y_.bind(null,i):null}function Km(i,a){var c=ru;return i.current.memoizedState.isDehydrated&&(ia(i,a).flags|=256),i=Nh(i,a),i!==2&&(a=or,or=c,a!==null&&Gm(a)),i}function Gm(i){or===null?or=i:or.push.apply(or,i)}function tS(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var g=c[f],_=g.getSnapshot;g=g.value;try{if(!ns(_(),g))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ki(i,a){for(a&=~$m,a&=~Eh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-Un(a),f=1<<c;i[c]=-1,a&=~f}}function J_(i){if((at&6)!==0)throw Error(n(327));bl();var a=Wo(i,0);if((a&1)===0)return ar(i,_t()),null;var c=Nh(i,a);if(i.tag!==0&&c===2){var f=gr(i);f!==0&&(a=f,c=Km(i,f))}if(c===1)throw c=nu,ia(i,0),Ki(i,a),ar(i,_t()),c;if(c===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,oa(i,or,ni),ar(i,_t()),null}function Qm(i,a){var c=at;at|=1;try{return i(a)}finally{at=c,at===0&&(wl=_t()+500,rh&&zi())}}function sa(i){qi!==null&&qi.tag===0&&(at&6)===0&&bl();var a=at;at|=1;var c=Or.transition,f=Ye;try{if(Or.transition=null,Ye=1,i)return i()}finally{Ye=f,Or.transition=c,at=a,(at&6)===0&&zi()}}function Zm(){br=_l.current,kt(_l)}function ia(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,R1(c)),Qt!==null)for(c=Qt.return;c!==null;){var f=c;switch(im(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&th();break;case 3:gl(),kt(rr),kt(Pn),vm();break;case 5:gm(f);break;case 4:gl();break;case 13:kt(Rt);break;case 19:kt(Rt);break;case 10:dm(f.type._context);break;case 22:case 23:Zm()}c=c.return}if(un=i,Qt=i=Gi(i.current,null),kn=br=a,nn=0,nu=null,$m=Eh=ra=0,or=ru=null,ea!==null){for(a=0;a<ea.length;a++)if(c=ea[a],f=c.interleaved,f!==null){c.interleaved=null;var g=f.next,_=c.pending;if(_!==null){var T=_.next;_.next=g,f.next=T}c.pending=f}ea=null}return i}function X_(i,a){do{var c=Qt;try{if(um(),fh.current=yh,ph){for(var f=Pt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}ph=!1}if(na=0,cn=tn=Pt=null,Zc=!1,Yc=0,Bm.current=null,c===null||c.return===null){nn=1,nu=a,Qt=null;break}e:{var _=i,T=c.return,L=c,F=a;if(a=kn,L.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,ie=L,ae=ie.tag;if((ie.mode&1)===0&&(ae===0||ae===11||ae===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var fe=E_(T);if(fe!==null){fe.flags&=-257,T_(fe,T,L,_,a),fe.mode&1&&k_(_,Y,a),a=fe,F=Y;var ve=a.updateQueue;if(ve===null){var xe=new Set;xe.add(F),a.updateQueue=xe}else ve.add(F);break e}else{if((a&1)===0){k_(_,Y,a),Ym();break e}F=Error(n(426))}}else if(Ct&&L.mode&1){var Bt=E_(T);if(Bt!==null){(Bt.flags&65536)===0&&(Bt.flags|=256),T_(Bt,T,L,_,a),lm(yl(F,L));break e}}_=F=yl(F,L),nn!==4&&(nn=2),ru===null?ru=[_]:ru.push(_),_=T;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var H=b_(_,F,a);Gv(_,H);break e;case 1:L=F;var B=_.type,Q=_.stateNode;if((_.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Wi===null||!Wi.has(Q)))){_.flags|=65536,a&=-a,_.lanes|=a;var le=x_(_,L,a);Gv(_,le);break e}}_=_.return}while(_!==null)}nw(c)}catch(Ee){a=Ee,Qt===c&&c!==null&&(Qt=c=c.return);continue}break}while(!0)}function ew(){var i=kh.current;return kh.current=yh,i===null?yh:i}function Ym(){(nn===0||nn===3||nn===2)&&(nn=4),un===null||(ra&268435455)===0&&(Eh&268435455)===0||Ki(un,kn)}function Nh(i,a){var c=at;at|=2;var f=ew();(un!==i||kn!==a)&&(ni=null,ia(i,a));do try{nS();break}catch(g){X_(i,g)}while(!0);if(um(),at=c,kh.current=f,Qt!==null)throw Error(n(261));return un=null,kn=0,nn}function nS(){for(;Qt!==null;)tw(Qt)}function rS(){for(;Qt!==null&&!Sd();)tw(Qt)}function tw(i){var a=iw(i.alternate,i,br);i.memoizedProps=i.pendingProps,a===null?nw(i):Qt=a,Bm.current=null}function nw(i){var a=i;do{var c=a.alternate;if(i=a.return,(a.flags&32768)===0){if(c=Q1(c,a,br),c!==null){Qt=c;return}}else{if(c=Z1(c,a),c!==null){c.flags&=32767,Qt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{nn=6,Qt=null;return}}if(a=a.sibling,a!==null){Qt=a;return}Qt=a=i}while(a!==null);nn===0&&(nn=5)}function oa(i,a,c){var f=Ye,g=Or.transition;try{Or.transition=null,Ye=1,sS(i,a,c,f)}finally{Or.transition=g,Ye=f}return null}function sS(i,a,c,f){do bl();while(qi!==null);if((at&6)!==0)throw Error(n(327));c=i.finishedWork;var g=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var _=c.lanes|c.childLanes;if(yt(i,_),i===un&&(Qt=un=null,kn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Ih||(Ih=!0,ow(Cr,function(){return bl(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=Or.transition,Or.transition=null;var T=Ye;Ye=1;var L=at;at|=4,Bm.current=null,J1(i,c),H_(c,i),E1(Yp),Di=!!Zp,Yp=Zp=null,i.current=c,X1(c),Dp(),at=L,Ye=T,Or.transition=_}else i.current=c;if(Ih&&(Ih=!1,qi=i,Sh=g),_=i.pendingLanes,_===0&&(Wi=null),Nd(c.stateNode),ar(i,_t()),a!==null)for(f=i.onRecoverableError,c=0;c<a.length;c++)g=a[c],f(g.value,{componentStack:g.stack,digest:g.digest});if(Th)throw Th=!1,i=qm,qm=null,i;return(Sh&1)!==0&&i.tag!==0&&bl(),_=i.pendingLanes,(_&1)!==0?i===Hm?su++:(su=0,Hm=i):su=0,zi(),null}function bl(){if(qi!==null){var i=Pi(Sh),a=Or.transition,c=Ye;try{if(Or.transition=null,Ye=16>i?16:i,qi===null)var f=!1;else{if(i=qi,qi=null,Sh=0,(at&6)!==0)throw Error(n(331));var g=at;for(at|=4,ye=i.current;ye!==null;){var _=ye,T=_.child;if((ye.flags&16)!==0){var L=_.deletions;if(L!==null){for(var F=0;F<L.length;F++){var Y=L[F];for(ye=Y;ye!==null;){var ie=ye;switch(ie.tag){case 0:case 11:case 15:tu(8,ie,_)}var ae=ie.child;if(ae!==null)ae.return=ie,ye=ae;else for(;ye!==null;){ie=ye;var se=ie.sibling,fe=ie.return;if(U_(ie),ie===Y){ye=null;break}if(se!==null){se.return=fe,ye=se;break}ye=fe}}}var ve=_.alternate;if(ve!==null){var xe=ve.child;if(xe!==null){ve.child=null;do{var Bt=xe.sibling;xe.sibling=null,xe=Bt}while(xe!==null)}}ye=_}}if((_.subtreeFlags&2064)!==0&&T!==null)T.return=_,ye=T;else e:for(;ye!==null;){if(_=ye,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:tu(9,_,_.return)}var H=_.sibling;if(H!==null){H.return=_.return,ye=H;break e}ye=_.return}}var B=i.current;for(ye=B;ye!==null;){T=ye;var Q=T.child;if((T.subtreeFlags&2064)!==0&&Q!==null)Q.return=T,ye=Q;else e:for(T=B;ye!==null;){if(L=ye,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:xh(9,L)}}catch(Ee){Vt(L,L.return,Ee)}if(L===T){ye=null;break e}var le=L.sibling;if(le!==null){le.return=L.return,ye=le;break e}ye=L.return}}if(at=g,zi(),mr&&typeof mr.onPostCommitFiberRoot=="function")try{mr.onPostCommitFiberRoot($o,i)}catch{}f=!0}return f}finally{Ye=c,Or.transition=a}}return!1}function rw(i,a,c){a=yl(c,a),a=b_(i,a,1),i=Bi(i,a,1),a=Wn(),i!==null&&(Ni(i,1,a),ar(i,a))}function Vt(i,a,c){if(i.tag===3)rw(i,i,c);else for(;a!==null;){if(a.tag===3){rw(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Wi===null||!Wi.has(f))){i=yl(c,i),i=x_(a,i,1),a=Bi(a,i,1),i=Wn(),a!==null&&(Ni(a,1,i),ar(a,i));break}}a=a.return}}function iS(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),a=Wn(),i.pingedLanes|=i.suspendedLanes&c,un===i&&(kn&c)===c&&(nn===4||nn===3&&(kn&130023424)===kn&&500>_t()-Wm?ia(i,0):$m|=c),ar(i,a)}function sw(i,a){a===0&&((i.mode&1)===0?a=1:(a=Wa,Wa<<=1,(Wa&130023424)===0&&(Wa=4194304)));var c=Wn();i=Xs(i,a),i!==null&&(Ni(i,a,c),ar(i,c))}function oS(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),sw(i,c)}function aS(i,a){var c=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(a),sw(i,c)}var iw;iw=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||rr.current)ir=!0;else{if((i.lanes&c)===0&&(a.flags&128)===0)return ir=!1,G1(i,a,c);ir=(i.flags&131072)!==0}else ir=!1,Ct&&(a.flags&1048576)!==0&&Vv(a,ih,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;wh(i,a),i=a.pendingProps;var g=cl(a,Pn.current);ml(a,c),g=bm(null,a,f,i,g,c);var _=xm();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,sr(f)?(_=!0,nh(a)):_=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,pm(a),g.updater=vh,a.stateNode=g,g._reactInternals=a,Cm(a,f,i,c),a=Pm(null,a,f,!0,_,c)):(a.tag=0,Ct&&_&&sm(a),$n(null,a,g,c),a=a.child),a;case 16:f=a.elementType;e:{switch(wh(i,a),i=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=cS(f),i=ss(f,i),g){case 0:a=Rm(null,a,f,i,c);break e;case 1:a=R_(null,a,f,i,c);break e;case 11:a=I_(null,a,f,i,c);break e;case 14:a=S_(null,a,f,ss(f.type,i),c);break e}throw Error(n(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:ss(f,g),Rm(i,a,f,g,c);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:ss(f,g),R_(i,a,f,g,c);case 3:e:{if(P_(a),i===null)throw Error(n(387));f=a.pendingProps,_=a.memoizedState,g=_.element,Kv(i,a),dh(a,f,null,c);var T=a.memoizedState;if(f=T.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){g=yl(Error(n(423)),a),a=j_(i,a,f,c,g);break e}else if(f!==g){g=yl(Error(n(424)),a),a=j_(i,a,f,c,g);break e}else for(wr=Mi(a.stateNode.containerInfo.firstChild),_r=a,Ct=!0,rs=null,c=qv(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(hl(),f===g){a=ti(i,a,c);break e}$n(i,a,f,c)}a=a.child}return a;case 5:return Zv(a),i===null&&am(a),f=a.type,g=a.pendingProps,_=i!==null?i.memoizedProps:null,T=g.children,Jp(f,g)?T=null:_!==null&&Jp(f,_)&&(a.flags|=32),N_(i,a),$n(i,a,T,c),a.child;case 6:return i===null&&am(a),null;case 13:return D_(i,a,c);case 4:return mm(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=fl(a,null,f,c):$n(i,a,f,c),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:ss(f,g),I_(i,a,f,g,c);case 7:return $n(i,a,a.pendingProps,c),a.child;case 8:return $n(i,a,a.pendingProps.children,c),a.child;case 12:return $n(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,_=a.memoizedProps,T=g.value,wt(lh,f._currentValue),f._currentValue=T,_!==null)if(ns(_.value,T)){if(_.children===g.children&&!rr.current){a=ti(i,a,c);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var L=_.dependencies;if(L!==null){T=_.child;for(var F=L.firstContext;F!==null;){if(F.context===f){if(_.tag===1){F=ei(-1,c&-c),F.tag=2;var Y=_.updateQueue;if(Y!==null){Y=Y.shared;var ie=Y.pending;ie===null?F.next=F:(F.next=ie.next,ie.next=F),Y.pending=F}}_.lanes|=c,F=_.alternate,F!==null&&(F.lanes|=c),hm(_.return,c,a),L.lanes|=c;break}F=F.next}}else if(_.tag===10)T=_.type===a.type?null:_.child;else if(_.tag===18){if(T=_.return,T===null)throw Error(n(341));T.lanes|=c,L=T.alternate,L!==null&&(L.lanes|=c),hm(T,c,a),T=_.sibling}else T=_.child;if(T!==null)T.return=_;else for(T=_;T!==null;){if(T===a){T=null;break}if(_=T.sibling,_!==null){_.return=T.return,T=_;break}T=T.return}_=T}$n(i,a,g.children,c),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,ml(a,c),g=jr(g),f=f(g),a.flags|=1,$n(i,a,f,c),a.child;case 14:return f=a.type,g=ss(f,a.pendingProps),g=ss(f.type,g),S_(i,a,f,g,c);case 15:return C_(i,a,a.type,a.pendingProps,c);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:ss(f,g),wh(i,a),a.tag=1,sr(f)?(i=!0,nh(a)):i=!1,ml(a,c),__(a,f,g),Cm(a,f,g,c),Pm(null,a,f,!0,i,c);case 19:return L_(i,a,c);case 22:return A_(i,a,c)}throw Error(n(156,a.tag))};function ow(i,a){return Ba(i,a)}function lS(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(i,a,c,f){return new lS(i,a,c,f)}function Jm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function cS(i){if(typeof i=="function")return Jm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===M)return 11;if(i===nt)return 14}return 2}function Gi(i,a){var c=i.alternate;return c===null?(c=Lr(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Rh(i,a,c,f,g,_){var T=2;if(f=i,typeof i=="function")Jm(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case A:return aa(c.children,g,_,a);case k:T=8,g|=8;break;case R:return i=Lr(12,c,a,g|2),i.elementType=R,i.lanes=_,i;case j:return i=Lr(13,c,a,g),i.elementType=j,i.lanes=_,i;case Ce:return i=Lr(19,c,a,g),i.elementType=Ce,i.lanes=_,i;case Ne:return Ph(c,g,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case P:T=10;break e;case O:T=9;break e;case M:T=11;break e;case nt:T=14;break e;case Qe:T=16,f=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return a=Lr(T,c,a,g),a.elementType=i,a.type=f,a.lanes=_,a}function aa(i,a,c,f){return i=Lr(7,i,f,a),i.lanes=c,i}function Ph(i,a,c,f){return i=Lr(22,i,f,a),i.elementType=Ne,i.lanes=c,i.stateNode={isHidden:!1},i}function Xm(i,a,c){return i=Lr(6,i,null,a),i.lanes=c,i}function eg(i,a,c){return a=Lr(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function uS(i,a,c,f,g){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ai(0),this.expirationTimes=Ai(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function tg(i,a,c,f,g,_,T,L,F){return i=new uS(i,a,c,L,F),a===1?(a=1,_===!0&&(a|=8)):a=0,_=Lr(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},pm(_),i}function dS(i,a,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:f==null?null:""+f,children:i,containerInfo:a,implementation:c}}function aw(i){if(!i)return Fi;i=i._reactInternals;e:{if(Qr(i)!==i||i.tag!==1)throw Error(n(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(sr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(i.tag===1){var c=i.type;if(sr(c))return Ov(i,c,a)}return a}function lw(i,a,c,f,g,_,T,L,F){return i=tg(c,f,!0,i,g,_,T,L,F),i.context=aw(null),c=i.current,f=Wn(),g=Hi(c),_=ei(f,g),_.callback=a??null,Bi(c,_,g),i.current.lanes=g,Ni(i,g,f),ar(i,f),i}function jh(i,a,c,f){var g=a.current,_=Wn(),T=Hi(g);return c=aw(c),a.context===null?a.context=c:a.pendingContext=c,a=ei(_,T),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=Bi(g,a,T),i!==null&&(as(i,g,T,_),uh(i,g,T)),T}function Dh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function cw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function ng(i,a){cw(i,a),(i=i.alternate)&&cw(i,a)}function hS(){return null}var uw=typeof reportError=="function"?reportError:function(i){console.error(i)};function rg(i){this._internalRoot=i}Oh.prototype.render=rg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));jh(i,a,null,null)},Oh.prototype.unmount=rg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;sa(function(){jh(null,i,null,null)}),a[Qs]=null}};function Oh(i){this._internalRoot=i}Oh.prototype.unstable_scheduleHydration=function(i){if(i){var a=Od();i={blockedOn:null,target:i,priority:a};for(var c=0;c<bs.length&&a!==0&&a<bs[c].priority;c++);bs.splice(c,0,i),c===0&&Vd(i)}};function sg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Lh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function dw(){}function fS(i,a,c,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var Y=Dh(T);_.call(Y)}}var T=lw(a,f,i,0,null,!1,!1,"",dw);return i._reactRootContainer=T,i[Qs]=T.current,Bc(i.nodeType===8?i.parentNode:i),sa(),T}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var L=f;f=function(){var Y=Dh(F);L.call(Y)}}var F=tg(i,0,!1,null,null,!1,!1,"",dw);return i._reactRootContainer=F,i[Qs]=F.current,Bc(i.nodeType===8?i.parentNode:i),sa(function(){jh(a,F,c,f)}),F}function Mh(i,a,c,f,g){var _=c._reactRootContainer;if(_){var T=_;if(typeof g=="function"){var L=g;g=function(){var F=Dh(T);L.call(F)}}jh(a,T,i,g)}else T=fS(c,a,i,g,f);return Dh(T)}jd=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=Ci(a.pendingLanes);c!==0&&(Ri(a,c|1),ar(a,_t()),(at&6)===0&&(wl=_t()+500,zi()))}break;case 13:sa(function(){var f=Xs(i,1);if(f!==null){var g=Wn();as(f,i,1,g)}}),ng(i,1)}},qa=function(i){if(i.tag===13){var a=Xs(i,134217728);if(a!==null){var c=Wn();as(a,i,134217728,c)}ng(i,134217728)}},Dd=function(i){if(i.tag===13){var a=Hi(i),c=Xs(i,a);if(c!==null){var f=Wn();as(c,i,a,f)}ng(i,a)}},Od=function(){return Ye},Ld=function(i,a){var c=Ye;try{return Ye=i,a()}finally{Ye=c}},Ii=function(i,a,c){switch(a){case"input":if(ki(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var g=eh(f);if(!g)throw Error(n(90));pt(f),ki(f,g)}}}break;case"textarea":Bs(i,c);break;case"select":a=c.value,a!=null&&Jn(i,!!c.multiple,a,!1)}},qt=Qm,Xt=sa;var pS={usingClientEntryPoint:!1,Events:[qc,al,eh,It,er,Qm]},iu={findFiberByHostInstance:Zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mS={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Ic(i),i===null?null:i.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||hS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{$o=Vh.inject(mS),mr=Vh}catch{}}return lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pS,lr.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sg(a))throw Error(n(200));return dS(i,a,null,c)},lr.createRoot=function(i,a){if(!sg(i))throw Error(n(299));var c=!1,f="",g=uw;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=tg(i,1,!1,null,null,c,!1,f,g),i[Qs]=a.current,Bc(i.nodeType===8?i.parentNode:i),new rg(a)},lr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Ic(a),i=i===null?null:i.stateNode,i},lr.flushSync=function(i){return sa(i)},lr.hydrate=function(i,a,c){if(!Lh(a))throw Error(n(200));return Mh(null,i,a,!0,c)},lr.hydrateRoot=function(i,a,c){if(!sg(i))throw Error(n(405));var f=c!=null&&c.hydratedSources||null,g=!1,_="",T=uw;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),a=lw(a,null,i,1,c??null,g,!1,_,T),i[Qs]=a.current,Bc(i),f)for(i=0;i<f.length;i++)c=f[i],g=c._getVersion,g=g(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,g]:a.mutableSourceEagerHydrationData.push(c,g);return new Oh(a)},lr.render=function(i,a,c){if(!Lh(a))throw Error(n(200));return Mh(null,i,a,!1,c)},lr.unmountComponentAtNode=function(i){if(!Lh(i))throw Error(n(40));return i._reactRootContainer?(sa(function(){Mh(null,null,i,!1,function(){i._reactRootContainer=null,i[Qs]=null})}),!0):!1},lr.unstable_batchedUpdates=Qm,lr.unstable_renderSubtreeIntoContainer=function(i,a,c,f){if(!Lh(c))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Mh(i,a,c,!1,f)},lr.version="18.3.1-next-f1338f8080-20240426",lr}var Rw;function gk(){if(Rw)return lg.exports;Rw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),lg.exports=lC(),lg.exports}var Pw;function cC(){if(Pw)return Uh;Pw=1;var t=gk();return Uh.createRoot=t.createRoot,Uh.hydrateRoot=t.hydrateRoot,Uh}var uC=cC();const dC=ik(uC);var po=gk();function hC(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return D.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Zf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function oc(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Ly(t){return"nodeType"in t}function Yn(t){var e,n;return t?oc(t)?t:Ly(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function My(t){const{Document:e}=Yn(t);return t instanceof e}function td(t){return oc(t)?!1:t instanceof Yn(t).HTMLElement}function yk(t){return t instanceof Yn(t).SVGElement}function ac(t){return t?oc(t)?t.document:Ly(t)?My(t)?t:td(t)||yk(t)?t.ownerDocument:document:document:document}const ds=Zf?D.useLayoutEffect:D.useEffect;function Yf(t){const e=D.useRef(t);return ds(()=>{e.current=t}),D.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function fC(){const t=D.useRef(null),e=D.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=D.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Ru(t,e){e===void 0&&(e=[t]);const n=D.useRef(t);return ds(()=>{n.current!==t&&(n.current=t)},e),n}function nd(t,e){const n=D.useRef();return D.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Ef(t){const e=Yf(t),n=D.useRef(null),r=D.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Tf(t){const e=D.useRef();return D.useEffect(()=>{e.current=t},[t]),e.current}let dg={};function rd(t,e){return D.useMemo(()=>{if(e)return e;const n=dg[t]==null?0:dg[t]+1;return dg[t]=n,t+"-"+n},[t,e])}function vk(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,l)=>{const u=Object.entries(l);for(const[d,m]of u){const y=o[d];y!=null&&(o[d]=y+t*m)}return o},{...e})}}const Nl=vk(1),Pu=vk(-1);function pC(t){return"clientX"in t&&"clientY"in t}function Jf(t){if(!t)return!1;const{KeyboardEvent:e}=Yn(t.target);return e&&t instanceof e}function mC(t){if(!t)return!1;const{TouchEvent:e}=Yn(t.target);return e&&t instanceof e}function If(t){if(mC(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return pC(t)?{x:t.clientX,y:t.clientY}:null}const Ms=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ms.Translate.toString(t),Ms.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),jw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function gC(t){return t.matches(jw)?t:t.querySelector(jw)}const yC={display:"none"};function vC(t){let{id:e,value:n}=t;return Le.createElement("div",{id:e,style:yC},n)}function _C(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Le.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function wC(){const[t,e]=D.useState("");return{announce:D.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const _k=D.createContext(null);function bC(t){const e=D.useContext(_k);D.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function xC(){const[t]=D.useState(()=>new Set),e=D.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[D.useCallback(r=>{let{type:s,event:o}=r;t.forEach(l=>{var u;return(u=l[s])==null?void 0:u.call(l,o)})},[t]),e]}const kC={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},EC={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function TC(t){let{announcements:e=EC,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=kC}=t;const{announce:o,announcement:l}=wC(),u=rd("DndLiveRegion"),[d,m]=D.useState(!1);if(D.useEffect(()=>{m(!0)},[]),bC(D.useMemo(()=>({onDragStart(w){let{active:x}=w;o(e.onDragStart({active:x}))},onDragMove(w){let{active:x,over:E}=w;e.onDragMove&&o(e.onDragMove({active:x,over:E}))},onDragOver(w){let{active:x,over:E}=w;o(e.onDragOver({active:x,over:E}))},onDragEnd(w){let{active:x,over:E}=w;o(e.onDragEnd({active:x,over:E}))},onDragCancel(w){let{active:x,over:E}=w;o(e.onDragCancel({active:x,over:E}))}}),[o,e])),!d)return null;const y=Le.createElement(Le.Fragment,null,Le.createElement(vC,{id:r,value:s.draggable}),Le.createElement(_C,{id:u,announcement:l}));return n?po.createPortal(y,n):y}var sn;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(sn||(sn={}));function Sf(){}function ko(t,e){return D.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Xf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return D.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const hs=Object.freeze({x:0,y:0});function wk(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function IC(t,e){const n=If(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function bk(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function SC(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Dw(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function xk(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Ow(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const ep=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Ow(e,e.left,e.top),o=[];for(const l of r){const{id:u}=l,d=n.get(u);if(d){const m=wk(Ow(d),s);o.push({id:u,data:{droppableContainer:l,value:m}})}}return o.sort(bk)},CC=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Dw(e),o=[];for(const l of r){const{id:u}=l,d=n.get(u);if(d){const m=Dw(d),y=s.reduce((x,E,N)=>x+wk(m[N],E),0),w=Number((y/4).toFixed(4));o.push({id:u,data:{droppableContainer:l,value:w}})}}return o.sort(bk)};function AC(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),l=s-r,u=o-n;if(r<s&&n<o){const d=e.width*e.height,m=t.width*t.height,y=l*u,w=y/(d+m-y);return Number(w.toFixed(4))}return 0}const NC=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=AC(u,e);d>0&&s.push({id:l,data:{droppableContainer:o,value:d}})}}return s.sort(SC)};function RC(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function kk(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:hs}function PC(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((l,u)=>({...l,top:l.top+t*u.y,bottom:l.bottom+t*u.y,left:l.left+t*u.x,right:l.right+t*u.x}),{...n})}}const jC=PC(1);function Ek(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function DC(t,e,n){const r=Ek(e);if(!r)return t;const{scaleX:s,scaleY:o,x:l,y:u}=r,d=t.left-l-(1-s)*parseFloat(n),m=t.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),y=s?t.width/s:t.width,w=o?t.height/o:t.height;return{width:y,height:w,top:m,right:d+y,bottom:m+w,left:d}}const OC={ignoreTransform:!1};function lc(t,e){e===void 0&&(e=OC);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:y}=Yn(t).getComputedStyle(t);m&&(n=DC(n,m,y))}const{top:r,left:s,width:o,height:l,bottom:u,right:d}=n;return{top:r,left:s,width:o,height:l,bottom:u,right:d}}function Lw(t){return lc(t,{ignoreTransform:!0})}function LC(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function MC(t,e){return e===void 0&&(e=Yn(t).getComputedStyle(t)),e.position==="fixed"}function VC(t,e){e===void 0&&(e=Yn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=e[s];return typeof o=="string"?n.test(o):!1})}function tp(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(My(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!td(s)||yk(s)||n.includes(s))return n;const o=Yn(t).getComputedStyle(s);return s!==t&&VC(s,o)&&n.push(s),MC(s,o)?n:r(s.parentNode)}return t?r(t):n}function Tk(t){const[e]=tp(t,1);return e??null}function hg(t){return!Zf||!t?null:oc(t)?t:Ly(t)?My(t)||t===ac(t).scrollingElement?window:td(t)?t:null:null}function Ik(t){return oc(t)?t.scrollX:t.scrollLeft}function Sk(t){return oc(t)?t.scrollY:t.scrollTop}function qg(t){return{x:Ik(t),y:Sk(t)}}var pn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(pn||(pn={}));function Ck(t){return!Zf||!t?!1:t===document.scrollingElement}function Ak(t){const e={x:0,y:0},n=Ck(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,l=t.scrollTop>=r.y,u=t.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:l,isRight:u,maxScroll:r,minScroll:e}}const FC={x:.2,y:.2};function zC(t,e,n,r,s){let{top:o,left:l,right:u,bottom:d}=n;r===void 0&&(r=10),s===void 0&&(s=FC);const{isTop:m,isBottom:y,isLeft:w,isRight:x}=Ak(t),E={x:0,y:0},N={x:0,y:0},I={height:e.height*s.y,width:e.width*s.x};return!m&&o<=e.top+I.height?(E.y=pn.Backward,N.y=r*Math.abs((e.top+I.height-o)/I.height)):!y&&d>=e.bottom-I.height&&(E.y=pn.Forward,N.y=r*Math.abs((e.bottom-I.height-d)/I.height)),!x&&u>=e.right-I.width?(E.x=pn.Forward,N.x=r*Math.abs((e.right-I.width-u)/I.width)):!w&&l<=e.left+I.width&&(E.x=pn.Backward,N.x=r*Math.abs((e.left+I.width-l)/I.width)),{direction:E,speed:N}}function UC(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Nk(t){return t.reduce((e,n)=>Nl(e,qg(n)),hs)}function BC(t){return t.reduce((e,n)=>e+Ik(n),0)}function $C(t){return t.reduce((e,n)=>e+Sk(n),0)}function Rk(t,e){if(e===void 0&&(e=lc),!t)return;const{top:n,left:r,bottom:s,right:o}=e(t);Tk(t)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const WC=[["x",["left","right"],BC],["y",["top","bottom"],$C]];class Vy{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=tp(n),s=Nk(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,u]of WC)for(const d of l)Object.defineProperty(this,d,{get:()=>{const m=u(r),y=s[o]-m;return this.rect[d]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class _u{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function qC(t){const{EventTarget:e}=Yn(t);return t instanceof e?t:ac(t)}function fg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var zr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(zr||(zr={}));function Mw(t){t.preventDefault()}function HC(t){t.stopPropagation()}var et;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(et||(et={}));const Pk={start:[et.Space,et.Enter],cancel:[et.Esc],end:[et.Space,et.Enter,et.Tab]},KC=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case et.Right:return{...n,x:n.x+25};case et.Left:return{...n,x:n.x-25};case et.Down:return{...n,y:n.y+25};case et.Up:return{...n,y:n.y-25}}};class sd{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new _u(ac(n)),this.windowListeners=new _u(Yn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(zr.Resize,this.handleCancel),this.windowListeners.add(zr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(zr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Rk(r),n(hs)}handleKeyDown(e){if(Jf(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=Pk,coordinateGetter:l=KC,scrollBehavior:u="smooth"}=s,{code:d}=e;if(o.end.includes(d)){this.handleEnd(e);return}if(o.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:m}=r.current,y=m?{x:m.left,y:m.top}:hs;this.referenceCoordinates||(this.referenceCoordinates=y);const w=l(e,{active:n,context:r.current,currentCoordinates:y});if(w){const x=Pu(w,y),E={x:0,y:0},{scrollableAncestors:N}=r.current;for(const I of N){const S=e.code,{isTop:V,isRight:W,isLeft:U,isBottom:G,maxScroll:Z,minScroll:K}=Ak(I),A=UC(I),k={x:Math.min(S===et.Right?A.right-A.width/2:A.right,Math.max(S===et.Right?A.left:A.left+A.width/2,w.x)),y:Math.min(S===et.Down?A.bottom-A.height/2:A.bottom,Math.max(S===et.Down?A.top:A.top+A.height/2,w.y))},R=S===et.Right&&!W||S===et.Left&&!U,P=S===et.Down&&!G||S===et.Up&&!V;if(R&&k.x!==w.x){const O=I.scrollLeft+x.x,M=S===et.Right&&O<=Z.x||S===et.Left&&O>=K.x;if(M&&!x.y){I.scrollTo({left:O,behavior:u});return}M?E.x=I.scrollLeft-O:E.x=S===et.Right?I.scrollLeft-Z.x:I.scrollLeft-K.x,E.x&&I.scrollBy({left:-E.x,behavior:u});break}else if(P&&k.y!==w.y){const O=I.scrollTop+x.y,M=S===et.Down&&O<=Z.y||S===et.Up&&O>=K.y;if(M&&!x.x){I.scrollTo({top:O,behavior:u});return}M?E.y=I.scrollTop-O:E.y=S===et.Down?I.scrollTop-Z.y:I.scrollTop-K.y,E.y&&I.scrollBy({top:-E.y,behavior:u});break}}this.handleMove(e,Nl(Pu(w,this.referenceCoordinates),E))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sd.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Pk,onActivation:s}=e,{active:o}=n;const{code:l}=t.nativeEvent;if(r.start.includes(l)){const u=o.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Vw(t){return!!(t&&"distance"in t)}function Fw(t){return!!(t&&"delay"in t)}class Fy{constructor(e,n,r){var s;r===void 0&&(r=qC(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:l}=o;this.props=e,this.events=n,this.document=ac(l),this.documentListeners=new _u(this.document),this.listeners=new _u(r),this.windowListeners=new _u(Yn(l)),this.initialCoordinates=(s=If(o))!=null?s:hs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(zr.Resize,this.handleCancel),this.windowListeners.add(zr.DragStart,Mw),this.windowListeners.add(zr.VisibilityChange,this.handleCancel),this.windowListeners.add(zr.ContextMenu,Mw),this.documentListeners.add(zr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fw(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Vw(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(zr.Click,HC,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(zr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!s)return;const d=(n=If(e))!=null?n:hs,m=Pu(s,d);if(!r&&u){if(Vw(u)){if(u.tolerance!=null&&fg(m,u.tolerance))return this.handleCancel();if(fg(m,u.distance))return this.handleStart()}if(Fw(u)&&fg(m,u.tolerance))return this.handleCancel();this.handlePending(u,m);return}e.cancelable&&e.preventDefault(),l(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===et.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const GC={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class cc extends Fy{constructor(e){const{event:n}=e,r=ac(n.target);super(e,GC,r)}}cc.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const QC={move:{name:"mousemove"},end:{name:"mouseup"}};var Hg;(function(t){t[t.RightClick=2]="RightClick"})(Hg||(Hg={}));class ZC extends Fy{constructor(e){super(e,QC,ac(e.event.target))}}ZC.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Hg.RightClick?!1:(r==null||r({event:n}),!0)}}];const pg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class jk extends Fy{constructor(e){super(e,pg)}static setup(){return window.addEventListener(pg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(pg.move.name,e)};function e(){}}}jk.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var wu;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(wu||(wu={}));var Cf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Cf||(Cf={}));function YC(t){let{acceleration:e,activator:n=wu.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:l=5,order:u=Cf.TreeOrder,pointerCoordinates:d,scrollableAncestors:m,scrollableAncestorRects:y,delta:w,threshold:x}=t;const E=XC({delta:w,disabled:!o}),[N,I]=fC(),S=D.useRef({x:0,y:0}),V=D.useRef({x:0,y:0}),W=D.useMemo(()=>{switch(n){case wu.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case wu.DraggableRect:return s}},[n,s,d]),U=D.useRef(null),G=D.useCallback(()=>{const K=U.current;if(!K)return;const A=S.current.x*V.current.x,k=S.current.y*V.current.y;K.scrollBy(A,k)},[]),Z=D.useMemo(()=>u===Cf.TreeOrder?[...m].reverse():m,[u,m]);D.useEffect(()=>{if(!o||!m.length||!W){I();return}for(const K of Z){if((r==null?void 0:r(K))===!1)continue;const A=m.indexOf(K),k=y[A];if(!k)continue;const{direction:R,speed:P}=zC(K,k,W,e,x);for(const O of["x","y"])E[O][R[O]]||(P[O]=0,R[O]=0);if(P.x>0||P.y>0){I(),U.current=K,N(G,l),S.current=P,V.current=R;return}}S.current={x:0,y:0},V.current={x:0,y:0},I()},[e,G,r,I,o,l,JSON.stringify(W),JSON.stringify(E),N,m,Z,y,JSON.stringify(x)])}const JC={x:{[pn.Backward]:!1,[pn.Forward]:!1},y:{[pn.Backward]:!1,[pn.Forward]:!1}};function XC(t){let{delta:e,disabled:n}=t;const r=Tf(e);return nd(s=>{if(n||!r||!s)return JC;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[pn.Backward]:s.x[pn.Backward]||o.x===-1,[pn.Forward]:s.x[pn.Forward]||o.x===1},y:{[pn.Backward]:s.y[pn.Backward]||o.y===-1,[pn.Forward]:s.y[pn.Forward]||o.y===1}}},[n,e,r])}function eA(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return nd(s=>{var o;return e==null?null:(o=r??s)!=null?o:null},[r,e])}function tA(t,e){return D.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,r)}));return[...n,...o]},[]),[t,e])}var ju;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ju||(ju={}));var Kg;(function(t){t.Optimized="optimized"})(Kg||(Kg={}));const zw=new Map;function nA(t,e){let{dragging:n,dependencies:r,config:s}=e;const[o,l]=D.useState(null),{frequency:u,measure:d,strategy:m}=s,y=D.useRef(t),w=S(),x=Ru(w),E=D.useCallback(function(V){V===void 0&&(V=[]),!x.current&&l(W=>W===null?V:W.concat(V.filter(U=>!W.includes(U))))},[x]),N=D.useRef(null),I=nd(V=>{if(w&&!n)return zw;if(!V||V===zw||y.current!==t||o!=null){const W=new Map;for(let U of t){if(!U)continue;if(o&&o.length>0&&!o.includes(U.id)&&U.rect.current){W.set(U.id,U.rect.current);continue}const G=U.node.current,Z=G?new Vy(d(G),G):null;U.rect.current=Z,Z&&W.set(U.id,Z)}return W}return V},[t,o,n,w,d]);return D.useEffect(()=>{y.current=t},[t]),D.useEffect(()=>{w||E()},[n,w]),D.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),D.useEffect(()=>{w||typeof u!="number"||N.current!==null||(N.current=setTimeout(()=>{E(),N.current=null},u))},[u,w,E,...r]),{droppableRects:I,measureDroppableContainers:E,measuringScheduled:o!=null};function S(){switch(m){case ju.Always:return!1;case ju.BeforeDragging:return n;default:return!n}}}function zy(t,e){return nd(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function rA(t,e){return zy(t,e)}function sA(t){let{callback:e,disabled:n}=t;const r=Yf(e),s=D.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return D.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function np(t){let{callback:e,disabled:n}=t;const r=Yf(e),s=D.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return D.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function iA(t){return new Vy(lc(t),t)}function Uw(t,e,n){e===void 0&&(e=iA);const[r,s]=D.useState(null);function o(){s(d=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=d??n)!=null?m:null}const y=e(t);return JSON.stringify(d)===JSON.stringify(y)?d:y})}const l=sA({callback(d){if(t)for(const m of d){const{type:y,target:w}=m;if(y==="childList"&&w instanceof HTMLElement&&w.contains(t)){o();break}}}}),u=np({callback:o});return ds(()=>{o(),t?(u==null||u.observe(t),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[t]),r}function oA(t){const e=zy(t);return kk(t,e)}const Bw=[];function aA(t){const e=D.useRef(t),n=nd(r=>t?r&&r!==Bw&&t&&e.current&&t.parentNode===e.current.parentNode?r:tp(t):Bw,[t]);return D.useEffect(()=>{e.current=t},[t]),n}function lA(t){const[e,n]=D.useState(null),r=D.useRef(t),s=D.useCallback(o=>{const l=hg(o.target);l&&n(u=>u?(u.set(l,qg(l)),new Map(u)):null)},[]);return D.useEffect(()=>{const o=r.current;if(t!==o){l(o);const u=t.map(d=>{const m=hg(d);return m?(m.addEventListener("scroll",s,{passive:!0}),[m,qg(m)]):null}).filter(d=>d!=null);n(u.length?new Map(u):null),r.current=t}return()=>{l(t),l(o)};function l(u){u.forEach(d=>{const m=hg(d);m==null||m.removeEventListener("scroll",s)})}},[s,t]),D.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,l)=>Nl(o,l),hs):Nk(t):hs,[t,e])}function $w(t,e){e===void 0&&(e=[]);const n=D.useRef(null);return D.useEffect(()=>{n.current=null},e),D.useEffect(()=>{const r=t!==hs;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Pu(t,n.current):hs}function cA(t){D.useEffect(()=>{if(!Zf)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function uA(t,e){return D.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=l=>{o(l,e)},n},{}),[t,e])}function Dk(t){return D.useMemo(()=>t?LC(t):null,[t])}const Ww=[];function dA(t,e){e===void 0&&(e=lc);const[n]=t,r=Dk(n?Yn(n):null),[s,o]=D.useState(Ww);function l(){o(()=>t.length?t.map(d=>Ck(d)?r:new Vy(e(d),d)):Ww)}const u=np({callback:l});return ds(()=>{u==null||u.disconnect(),l(),t.forEach(d=>u==null?void 0:u.observe(d))},[t]),s}function Ok(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return td(e)?e:t}function hA(t){let{measure:e}=t;const[n,r]=D.useState(null),s=D.useCallback(m=>{for(const{target:y}of m)if(td(y)){r(w=>{const x=e(y);return w?{...w,width:x.width,height:x.height}:x});break}},[e]),o=np({callback:s}),l=D.useCallback(m=>{const y=Ok(m);o==null||o.disconnect(),y&&(o==null||o.observe(y)),r(y?e(y):null)},[e,o]),[u,d]=Ef(l);return D.useMemo(()=>({nodeRef:u,rect:n,setRef:d}),[n,u,d])}const fA=[{sensor:cc,options:{}},{sensor:sd,options:{}}],pA={current:{}},lf={draggable:{measure:Lw},droppable:{measure:Lw,strategy:ju.WhileDragging,frequency:Kg.Optimized},dragOverlay:{measure:lc}};class bu extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const mA={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new bu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Sf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:lf,measureDroppableContainers:Sf,windowRect:null,measuringScheduled:!1},Lk={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Sf,draggableNodes:new Map,over:null,measureDroppableContainers:Sf},id=D.createContext(Lk),Mk=D.createContext(mA);function gA(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new bu}}}function yA(t,e){switch(e.type){case sn.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case sn.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case sn.DragEnd:case sn.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case sn.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new bu(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case sn.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const l=new bu(t.droppable.containers);return l.set(n,{...o,disabled:s}),{...t,droppable:{...t.droppable,containers:l}}}case sn.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new bu(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function vA(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=D.useContext(id),o=Tf(r),l=Tf(n==null?void 0:n.id);return D.useEffect(()=>{if(!e&&!r&&o&&l!=null){if(!Jf(o)||document.activeElement===o.target)return;const u=s.get(l);if(!u)return;const{activatorNode:d,node:m}=u;if(!d.current&&!m.current)return;requestAnimationFrame(()=>{for(const y of[d.current,m.current]){if(!y)continue;const w=gC(y);if(w){w.focus();break}}})}},[r,e,s,l,o]),null}function Vk(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,o)=>o({transform:s,...r}),n):n}function _A(t){return D.useMemo(()=>({draggable:{...lf.draggable,...t==null?void 0:t.draggable},droppable:{...lf.droppable,...t==null?void 0:t.droppable},dragOverlay:{...lf.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function wA(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const o=D.useRef(!1),{x:l,y:u}=typeof s=="boolean"?{x:s,y:s}:s;ds(()=>{if(!l&&!u||!e){o.current=!1;return}if(o.current||!r)return;const m=e==null?void 0:e.node.current;if(!m||m.isConnected===!1)return;const y=n(m),w=kk(y,r);if(l||(w.x=0),u||(w.y=0),o.current=!0,Math.abs(w.x)>0||Math.abs(w.y)>0){const x=Tk(m);x&&x.scrollBy({top:w.y,left:w.x})}},[e,l,u,r,n])}const rp=D.createContext({...hs,scaleX:1,scaleY:1});var eo;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(eo||(eo={}));const sp=D.memo(function(e){var n,r,s,o;let{id:l,accessibility:u,autoScroll:d=!0,children:m,sensors:y=fA,collisionDetection:w=NC,measuring:x,modifiers:E,...N}=e;const I=D.useReducer(yA,void 0,gA),[S,V]=I,[W,U]=xC(),[G,Z]=D.useState(eo.Uninitialized),K=G===eo.Initialized,{draggable:{active:A,nodes:k,translate:R},droppable:{containers:P}}=S,O=A!=null?k.get(A):null,M=D.useRef({initial:null,translated:null}),j=D.useMemo(()=>{var gt;return A!=null?{id:A,data:(gt=O==null?void 0:O.data)!=null?gt:pA,rect:M}:null},[A,O]),Ce=D.useRef(null),[nt,Qe]=D.useState(null),[Ne,X]=D.useState(null),pe=Ru(N,Object.values(N)),de=rd("DndDescribedBy",l),$=D.useMemo(()=>P.getEnabled(),[P]),ee=_A(x),{droppableRects:ce,measureDroppableContainers:be,measuringScheduled:De}=nA($,{dragging:K,dependencies:[R.x,R.y],config:ee.droppable}),Re=eA(k,A),Te=D.useMemo(()=>Ne?If(Ne):null,[Ne]),Ue=Xn(),ne=rA(Re,ee.draggable.measure);wA({activeNode:A!=null?k.get(A):null,config:Ue.layoutShiftCompensation,initialRect:ne,measure:ee.draggable.measure});const he=Uw(Re,ee.draggable.measure,ne),rt=Uw(Re?Re.parentElement:null),pt=D.useRef({activatorEvent:null,active:null,activeNode:Re,collisionRect:null,collisions:null,droppableRects:ce,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),yn=P.getNodeFor((n=pt.current.over)==null?void 0:n.id),vn=hA({measure:ee.dragOverlay.measure}),fr=(r=vn.nodeRef.current)!=null?r:Re,Tr=K?(s=vn.rect)!=null?s:he:null,ki=!!(vn.nodeRef.current&&vn.rect),Oo=oA(ki?null:he),gs=Dk(fr?Yn(fr):null),an=aA(K?yn??Re:null),Jn=dA(an),ys=Vk(E,{transform:{x:R.x-Oo.x,y:R.y-Oo.y,scaleX:1,scaleY:1},activatorEvent:Ne,active:j,activeNodeRect:he,containerNodeRect:rt,draggingNodeRect:Tr,over:pt.current.over,overlayNodeRect:vn.rect,scrollableAncestors:an,scrollableAncestorRects:Jn,windowRect:gs}),Us=Te?Nl(Te,R):null,Bs=lA(an),Lo=$w(Bs),Ut=$w(Bs,[he]),vt=Nl(ys,Lo),Nn=Tr?jC(Tr,ys):null,Hr=j&&Nn?w({active:j,collisionRect:Nn,droppableRects:ce,droppableContainers:$,pointerCoordinates:Us}):null,Kr=xk(Hr,"id"),[Rn,vs]=D.useState(null),Mo=ki?ys:Nl(ys,Ut),Vo=RC(Mo,(o=Rn==null?void 0:Rn.rect)!=null?o:null,he),$s=D.useRef(null),Ei=D.useCallback((gt,Wt)=>{let{sensor:It,options:er}=Wt;if(Ce.current==null)return;const qt=k.get(Ce.current);if(!qt)return;const Xt=gt.nativeEvent,Ht=new It({active:Ce.current,activeNode:qt,event:Xt,options:er,context:pt,onAbort(qe){if(!k.get(qe))return;const{onDragAbort:Mt}=pe.current,_n={id:qe};Mt==null||Mt(_n),W({type:"onDragAbort",event:_n})},onPending(qe,zn,Mt,_n){if(!k.get(qe))return;const{onDragPending:Sr}=pe.current,Kt={id:qe,constraint:zn,initialCoordinates:Mt,offset:_n};Sr==null||Sr(Kt),W({type:"onDragPending",event:Kt})},onStart(qe){const zn=Ce.current;if(zn==null)return;const Mt=k.get(zn);if(!Mt)return;const{onDragStart:_n}=pe.current,pr={activatorEvent:Xt,active:{id:zn,data:Mt.data,rect:M}};po.unstable_batchedUpdates(()=>{_n==null||_n(pr),Z(eo.Initializing),V({type:sn.DragStart,initialCoordinates:qe,active:zn}),W({type:"onDragStart",event:pr}),Qe($s.current),X(Xt)})},onMove(qe){V({type:sn.DragMove,coordinates:qe})},onEnd:Ir(sn.DragEnd),onCancel:Ir(sn.DragCancel)});$s.current=Ht;function Ir(qe){return async function(){const{active:Mt,collisions:_n,over:pr,scrollAdjustedTranslate:Sr}=pt.current;let Kt=null;if(Mt&&Sr){const{cancelDrop:Gr}=pe.current;Kt={activatorEvent:Xt,active:Mt,collisions:_n,delta:Sr,over:pr},qe===sn.DragEnd&&typeof Gr=="function"&&await Promise.resolve(Gr(Kt))&&(qe=sn.DragCancel)}Ce.current=null,po.unstable_batchedUpdates(()=>{V({type:qe}),Z(eo.Uninitialized),vs(null),Qe(null),X(null),$s.current=null;const Gr=qe===sn.DragEnd?"onDragEnd":"onDragCancel";if(Kt){const zo=pe.current[Gr];zo==null||zo(Kt),W({type:Gr,event:Kt})}})}}},[k]),Fo=D.useCallback((gt,Wt)=>(It,er)=>{const qt=It.nativeEvent,Xt=k.get(er);if(Ce.current!==null||!Xt||qt.dndKit||qt.defaultPrevented)return;const Ht={active:Xt};gt(It,Wt.options,Ht)===!0&&(qt.dndKit={capturedBy:Wt.sensor},Ce.current=er,Ei(It,Wt))},[k,Ei]),_s=tA(y,Fo);cA(y),ds(()=>{he&&G===eo.Initializing&&Z(eo.Initialized)},[he,G]),D.useEffect(()=>{const{onDragMove:gt}=pe.current,{active:Wt,activatorEvent:It,collisions:er,over:qt}=pt.current;if(!Wt||!It)return;const Xt={active:Wt,activatorEvent:It,collisions:er,delta:{x:vt.x,y:vt.y},over:qt};po.unstable_batchedUpdates(()=>{gt==null||gt(Xt),W({type:"onDragMove",event:Xt})})},[vt.x,vt.y]),D.useEffect(()=>{const{active:gt,activatorEvent:Wt,collisions:It,droppableContainers:er,scrollAdjustedTranslate:qt}=pt.current;if(!gt||Ce.current==null||!Wt||!qt)return;const{onDragOver:Xt}=pe.current,Ht=er.get(Kr),Ir=Ht&&Ht.rect.current?{id:Ht.id,rect:Ht.rect.current,data:Ht.data,disabled:Ht.disabled}:null,qe={active:gt,activatorEvent:Wt,collisions:It,delta:{x:qt.x,y:qt.y},over:Ir};po.unstable_batchedUpdates(()=>{vs(Ir),Xt==null||Xt(qe),W({type:"onDragOver",event:qe})})},[Kr]),ds(()=>{pt.current={activatorEvent:Ne,active:j,activeNode:Re,collisionRect:Nn,collisions:Hr,droppableRects:ce,draggableNodes:k,draggingNode:fr,draggingNodeRect:Tr,droppableContainers:P,over:Rn,scrollableAncestors:an,scrollAdjustedTranslate:vt},M.current={initial:Tr,translated:Nn}},[j,Re,Hr,Nn,k,fr,Tr,ce,P,Rn,an,vt]),YC({...Ue,delta:R,draggingRect:Nn,pointerCoordinates:Us,scrollableAncestors:an,scrollableAncestorRects:Jn});const Ti=D.useMemo(()=>({active:j,activeNode:Re,activeNodeRect:he,activatorEvent:Ne,collisions:Hr,containerNodeRect:rt,dragOverlay:vn,draggableNodes:k,droppableContainers:P,droppableRects:ce,over:Rn,measureDroppableContainers:be,scrollableAncestors:an,scrollableAncestorRects:Jn,measuringConfiguration:ee,measuringScheduled:De,windowRect:gs}),[j,Re,he,Ne,Hr,rt,vn,k,P,ce,Rn,be,an,Jn,ee,De,gs]),Ii=D.useMemo(()=>({activatorEvent:Ne,activators:_s,active:j,activeNodeRect:he,ariaDescribedById:{draggable:de},dispatch:V,draggableNodes:k,over:Rn,measureDroppableContainers:be}),[Ne,_s,j,he,V,de,k,Rn,be]);return Le.createElement(_k.Provider,{value:U},Le.createElement(id.Provider,{value:Ii},Le.createElement(Mk.Provider,{value:Ti},Le.createElement(rp.Provider,{value:Vo},m)),Le.createElement(vA,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Le.createElement(TC,{...u,hiddenTextDescribedById:de}));function Xn(){const gt=(nt==null?void 0:nt.autoScrollEnabled)===!1,Wt=typeof d=="object"?d.enabled===!1:d===!1,It=K&&!gt&&!Wt;return typeof d=="object"?{...d,enabled:It}:{enabled:It}}}),bA=D.createContext(null),qw="button",xA="Draggable";function kA(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const o=rd(xA),{activators:l,activatorEvent:u,active:d,activeNodeRect:m,ariaDescribedById:y,draggableNodes:w,over:x}=D.useContext(id),{role:E=qw,roleDescription:N="draggable",tabIndex:I=0}=s??{},S=(d==null?void 0:d.id)===e,V=D.useContext(S?rp:bA),[W,U]=Ef(),[G,Z]=Ef(),K=uA(l,e),A=Ru(n);ds(()=>(w.set(e,{id:e,key:o,node:W,activatorNode:G,data:A}),()=>{const R=w.get(e);R&&R.key===o&&w.delete(e)}),[w,e]);const k=D.useMemo(()=>({role:E,tabIndex:I,"aria-disabled":r,"aria-pressed":S&&E===qw?!0:void 0,"aria-roledescription":N,"aria-describedby":y.draggable}),[r,E,I,S,N,y.draggable]);return{active:d,activatorEvent:u,activeNodeRect:m,attributes:k,isDragging:S,listeners:r?void 0:K,node:W,over:x,setNodeRef:U,setActivatorNodeRef:Z,transform:V}}function Fk(){return D.useContext(Mk)}const EA="Droppable",TA={timeout:25};function uc(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const o=rd(EA),{active:l,dispatch:u,over:d,measureDroppableContainers:m}=D.useContext(id),y=D.useRef({disabled:n}),w=D.useRef(!1),x=D.useRef(null),E=D.useRef(null),{disabled:N,updateMeasurementsFor:I,timeout:S}={...TA,...s},V=Ru(I??r),W=D.useCallback(()=>{if(!w.current){w.current=!0;return}E.current!=null&&clearTimeout(E.current),E.current=setTimeout(()=>{m(Array.isArray(V.current)?V.current:[V.current]),E.current=null},S)},[S]),U=np({callback:W,disabled:N||!l}),G=D.useCallback((k,R)=>{U&&(R&&(U.unobserve(R),w.current=!1),k&&U.observe(k))},[U]),[Z,K]=Ef(G),A=Ru(e);return D.useEffect(()=>{!U||!Z.current||(U.disconnect(),w.current=!1,U.observe(Z.current))},[Z,U]),D.useEffect(()=>(u({type:sn.RegisterDroppable,element:{id:r,key:o,disabled:n,node:Z,rect:x,data:A}}),()=>u({type:sn.UnregisterDroppable,key:o,id:r})),[r]),D.useEffect(()=>{n!==y.current.disabled&&(u({type:sn.SetDroppableDisabled,id:r,key:o,disabled:n}),y.current.disabled=n)},[r,o,n,u]),{active:l,rect:x,isOver:(d==null?void 0:d.id)===r,node:Z,over:d,setNodeRef:K}}function IA(t){let{animation:e,children:n}=t;const[r,s]=D.useState(null),[o,l]=D.useState(null),u=Tf(n);return!n&&!r&&u&&s(u),ds(()=>{if(!o)return;const d=r==null?void 0:r.key,m=r==null?void 0:r.props.id;if(d==null||m==null){s(null);return}Promise.resolve(e(m,o)).then(()=>{s(null)})},[e,r,o]),Le.createElement(Le.Fragment,null,n,r?D.cloneElement(r,{ref:l}):null)}const SA={x:0,y:0,scaleX:1,scaleY:1};function CA(t){let{children:e}=t;return Le.createElement(id.Provider,{value:Lk},Le.createElement(rp.Provider,{value:SA},e))}const AA={position:"fixed",touchAction:"none"},NA=t=>Jf(t)?"transform 250ms ease":void 0,RA=D.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:l,rect:u,style:d,transform:m,transition:y=NA}=t;if(!u)return null;const w=s?m:{...m,scaleX:1,scaleY:1},x={...AA,width:u.width,height:u.height,top:u.top,left:u.left,transform:Ms.Transform.toString(w),transformOrigin:s&&r?IC(r,u):void 0,transition:typeof y=="function"?y(r):y,...d};return Le.createElement(n,{className:l,style:x,ref:e},o)}),PA=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:o,className:l}=t;if(o!=null&&o.active)for(const[u,d]of Object.entries(o.active))d!==void 0&&(s[u]=n.node.style.getPropertyValue(u),n.node.style.setProperty(u,d));if(o!=null&&o.dragOverlay)for(const[u,d]of Object.entries(o.dragOverlay))d!==void 0&&r.node.style.setProperty(u,d);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[d,m]of Object.entries(s))n.node.style.setProperty(d,m);l!=null&&l.active&&n.node.classList.remove(l.active)}},jA=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Ms.Transform.toString(e)},{transform:Ms.Transform.toString(n)}]},DA={duration:250,easing:"ease",keyframes:jA,sideEffects:PA({styles:{active:{opacity:"0"}}})};function OA(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return Yf((o,l)=>{if(e===null)return;const u=n.get(o);if(!u)return;const d=u.node.current;if(!d)return;const m=Ok(l);if(!m)return;const{transform:y}=Yn(l).getComputedStyle(l),w=Ek(y);if(!w)return;const x=typeof e=="function"?e:LA(e);return Rk(d,s.draggable.measure),x({active:{id:o,data:u.data,node:d,rect:s.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:l,rect:s.dragOverlay.measure(m)},droppableContainers:r,measuringConfiguration:s,transform:w})})}function LA(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...DA,...t};return o=>{let{active:l,dragOverlay:u,transform:d,...m}=o;if(!e)return;const y={x:u.rect.left-l.rect.left,y:u.rect.top-l.rect.top},w={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/u.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/u.rect.height:1},x={x:d.x-y.x,y:d.y-y.y,...w},E=s({...m,active:l,dragOverlay:u,transform:{initial:d,final:x}}),[N]=E,I=E[E.length-1];if(JSON.stringify(N)===JSON.stringify(I))return;const S=r==null?void 0:r({active:l,dragOverlay:u,...m}),V=u.node.animate(E,{duration:e,easing:n,fill:"forwards"});return new Promise(W=>{V.onfinish=()=>{S==null||S(),W()}})}}let Hw=0;function MA(t){return D.useMemo(()=>{if(t!=null)return Hw++,Hw},[t])}const VA=Le.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:l,wrapperElement:u="div",className:d,zIndex:m=999}=t;const{activatorEvent:y,active:w,activeNodeRect:x,containerNodeRect:E,draggableNodes:N,droppableContainers:I,dragOverlay:S,over:V,measuringConfiguration:W,scrollableAncestors:U,scrollableAncestorRects:G,windowRect:Z}=Fk(),K=D.useContext(rp),A=MA(w==null?void 0:w.id),k=Vk(l,{activatorEvent:y,active:w,activeNodeRect:x,containerNodeRect:E,draggingNodeRect:S.rect,over:V,overlayNodeRect:S.rect,scrollableAncestors:U,scrollableAncestorRects:G,transform:K,windowRect:Z}),R=zy(x),P=OA({config:r,draggableNodes:N,droppableContainers:I,measuringConfiguration:W}),O=R?S.setRef:void 0;return Le.createElement(CA,null,Le.createElement(IA,{animation:P},w&&A?Le.createElement(RA,{key:A,id:w.id,ref:O,as:u,activatorEvent:y,adjustScale:e,className:d,transition:o,rect:R,style:{zIndex:m,...s},transform:k},n):null))});var Kw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},FA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],u=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Uk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,u=l?t[s+1]:0,d=s+2<t.length,m=d?t[s+2]:0,y=o>>2,w=(o&3)<<4|u>>4;let x=(u&15)<<2|m>>6,E=m&63;d||(E=64,l||(x=64)),r.push(n[y],n[w],n[x],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||u==null||m==null||w==null)throw new zA;const x=o<<2|u>>4;if(r.push(x),m!==64){const E=u<<4&240|m>>2;if(r.push(E),w!==64){const N=m<<6&192|w;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UA=function(t){const e=zk(t);return Uk.encodeByteArray(e,!0)},Af=function(t){return UA(t).replace(/\./g,"")},Bk=function(t){try{return Uk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=()=>BA().__FIREBASE_DEFAULTS__,WA=()=>{if(typeof process>"u"||typeof Kw>"u")return;const t=Kw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bk(t[1]);return e&&JSON.parse(e)},ip=()=>{try{return $A()||WA()||qA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$k=t=>{var e,n;return(n=(e=ip())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},HA=t=>{const e=$k(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Wk=()=>{var t;return(t=ip())===null||t===void 0?void 0:t.config},qk=t=>{var e;return(e=ip())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Af(JSON.stringify(n)),Af(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fn())}function ZA(){var t;const e=(t=ip())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function e2(){const t=Fn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function t2(){return!ZA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function n2(){try{return typeof indexedDB=="object"}catch{return!1}}function r2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="FirebaseError";class _i extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=s2,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,od.prototype.create)}}class od{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?i2(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new _i(s,u,r)}}function i2(t,e){return t.replace(o2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const o2=/\{\$([^}]+)}/g;function a2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Nf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(Gw(o)&&Gw(l)){if(!Nf(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Gw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function du(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function hu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function l2(t,e){const n=new c2(t,e);return n.subscribe.bind(n)}class c2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");u2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=mg),s.error===void 0&&(s.error=mg),s.complete===void 0&&(s.complete=mg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function u2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){return t&&t._delegate?t._delegate:t}class Ia{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new KA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f2(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:h2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function h2(t){return t===ca?void 0:t}function f2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new d2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tt||(tt={}));const m2={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},g2=tt.INFO,y2={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},v2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=y2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uy{constructor(e){this.name=e,this._logLevel=g2,this._logHandler=v2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?m2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const _2=(t,e)=>e.some(n=>t instanceof n);let Qw,Zw;function w2(){return Qw||(Qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b2(){return Zw||(Zw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hk=new WeakMap,Gg=new WeakMap,Kk=new WeakMap,gg=new WeakMap,By=new WeakMap;function x2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(vo(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Hk.set(n,t)}).catch(()=>{}),By.set(e,t),e}function k2(t){if(Gg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Gg.set(t,e)}let Qg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Kk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function E2(t){Qg=t(Qg)}function T2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yg(this),e,...n);return Kk.set(r,e.sort?e.sort():[e]),vo(r)}:b2().includes(t)?function(...e){return t.apply(yg(this),e),vo(Hk.get(this))}:function(...e){return vo(t.apply(yg(this),e))}}function I2(t){return typeof t=="function"?T2(t):(t instanceof IDBTransaction&&k2(t),_2(t,w2())?new Proxy(t,Qg):t)}function vo(t){if(t instanceof IDBRequest)return x2(t);if(gg.has(t))return gg.get(t);const e=I2(t);return e!==t&&(gg.set(t,e),By.set(e,t)),e}const yg=t=>By.get(t);function S2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),u=vo(l);return r&&l.addEventListener("upgradeneeded",d=>{r(vo(l.result),d.oldVersion,d.newVersion,vo(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const C2=["get","getKey","getAll","getAllKeys","count"],A2=["put","add","delete","clear"],vg=new Map;function Yw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vg.get(e))return vg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=A2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||C2.includes(n)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(u.shift())),(await Promise.all([m[n](...u),s&&d.done]))[0]};return vg.set(e,o),o}E2(t=>({...t,get:(e,n,r)=>Yw(e,n)||t.get(e,n,r),has:(e,n)=>!!Yw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(R2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function R2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zg="@firebase/app",Jw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new Uy("@firebase/app"),P2="@firebase/app-compat",j2="@firebase/analytics-compat",D2="@firebase/analytics",O2="@firebase/app-check-compat",L2="@firebase/app-check",M2="@firebase/auth",V2="@firebase/auth-compat",F2="@firebase/database",z2="@firebase/data-connect",U2="@firebase/database-compat",B2="@firebase/functions",$2="@firebase/functions-compat",W2="@firebase/installations",q2="@firebase/installations-compat",H2="@firebase/messaging",K2="@firebase/messaging-compat",G2="@firebase/performance",Q2="@firebase/performance-compat",Z2="@firebase/remote-config",Y2="@firebase/remote-config-compat",J2="@firebase/storage",X2="@firebase/storage-compat",eN="@firebase/firestore",tN="@firebase/vertexai-preview",nN="@firebase/firestore-compat",rN="firebase",sN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="[DEFAULT]",iN={[Zg]:"fire-core",[P2]:"fire-core-compat",[D2]:"fire-analytics",[j2]:"fire-analytics-compat",[L2]:"fire-app-check",[O2]:"fire-app-check-compat",[M2]:"fire-auth",[V2]:"fire-auth-compat",[F2]:"fire-rtdb",[z2]:"fire-data-connect",[U2]:"fire-rtdb-compat",[B2]:"fire-fn",[$2]:"fire-fn-compat",[W2]:"fire-iid",[q2]:"fire-iid-compat",[H2]:"fire-fcm",[K2]:"fire-fcm-compat",[G2]:"fire-perf",[Q2]:"fire-perf-compat",[Z2]:"fire-rc",[Y2]:"fire-rc-compat",[J2]:"fire-gcs",[X2]:"fire-gcs-compat",[eN]:"fire-fst",[nN]:"fire-fst-compat",[tN]:"fire-vertex","fire-js":"fire-js",[rN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=new Map,oN=new Map,Jg=new Map;function Xw(t,e){try{t.container.addComponent(e)}catch(n){fi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ql(t){const e=t.name;if(Jg.has(e))return fi.debug(`There were multiple attempts to register component ${e}.`),!1;Jg.set(e,t);for(const n of Du.values())Xw(n,t);for(const n of oN.values())Xw(n,t);return!0}function $y(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function us(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_o=new od("app","Firebase",aN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _o.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=sN;function Gk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw _o.create("bad-app-name",{appName:String(s)});if(n||(n=Wk()),!n)throw _o.create("no-options");const o=Du.get(s);if(o){if(Nf(n,o.options)&&Nf(r,o.config))return o;throw _o.create("duplicate-app",{appName:s})}const l=new p2(s);for(const d of Jg.values())l.addComponent(d);const u=new lN(n,r,l);return Du.set(s,u),u}function Qk(t=Yg){const e=Du.get(t);if(!e&&t===Yg&&Wk())return Gk();if(!e)throw _o.create("no-app",{appName:t});return e}function eb(){return Array.from(Du.values())}function wo(t,e,n){var r;let s=(r=iN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fi.warn(u.join(" "));return}Ql(new Ia(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="firebase-heartbeat-database",uN=1,Ou="firebase-heartbeat-store";let _g=null;function Zk(){return _g||(_g=S2(cN,uN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ou)}catch(n){console.warn(n)}}}}).catch(t=>{throw _o.create("idb-open",{originalErrorMessage:t.message})})),_g}async function dN(t){try{const n=(await Zk()).transaction(Ou),r=await n.objectStore(Ou).get(Yk(t));return await n.done,r}catch(e){if(e instanceof _i)fi.warn(e.message);else{const n=_o.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fi.warn(n.message)}}}async function tb(t,e){try{const r=(await Zk()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(e,Yk(t)),await r.done}catch(n){if(n instanceof _i)fi.warn(n.message);else{const r=_o.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fi.warn(r.message)}}}function Yk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=1024,fN=720*60*60*1e3;class pN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=nb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const u=new Date(l.date).valueOf();return Date.now()-u<=fN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nb(),{heartbeatsToSend:r,unsentEntries:s}=mN(this._heartbeatsCache.heartbeats),o=Af(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return fi.warn(n),""}}}function nb(){return new Date().toISOString().substring(0,10)}function mN(t,e=hN){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),rb(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),rb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return n2()?r2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rb(t){return Af(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t){Ql(new Ia("platform-logger",e=>new N2(e),"PRIVATE")),Ql(new Ia("heartbeat",e=>new pN(e),"PRIVATE")),wo(Zg,Jw,t),wo(Zg,Jw,"esm2017"),wo("fire-js","")}yN("");var vN="firebase",_N="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wo(vN,_N,"app");function Wy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Jk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wN=Jk,Xk=new od("auth","Firebase",Jk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=new Uy("@firebase/auth");function bN(t,...e){Rf.logLevel<=tt.WARN&&Rf.warn(`Auth (${dc}): ${t}`,...e)}function cf(t,...e){Rf.logLevel<=tt.ERROR&&Rf.error(`Auth (${dc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,...e){throw qy(t,...e)}function Ps(t,...e){return qy(t,...e)}function eE(t,e,n){const r=Object.assign(Object.assign({},wN()),{[e]:n});return new od("auth","Firebase",r).create(e,{appName:t.name})}function js(t){return eE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Xk.create(t,...e)}function Me(t,e,...n){if(!t)throw qy(e,...n)}function li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cf(e),new Error(e)}function pi(t,e){t||li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xN(){return sb()==="http:"||sb()==="https:"}function sb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xN()||JA()||"connection"in navigator)?navigator.onLine:!0}function EN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n){this.shortDelay=e,this.longDelay=n,pi(n>e,"Short delay should be less than long delay!"),this.isMobile=QA()||XA()}get(){return kN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t,e){pi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=new ld(3e4,6e4);function wi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bi(t,e,n,r,s={}){return nE(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=ad(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:d},o);return YA()||(m.referrerPolicy="no-referrer"),tE.fetch()(rE(t,t.config.apiHost,n,u),m)})}async function nE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},TN),e);try{const s=new CN(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Bh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,m]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Bh(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Bh(t,"user-disabled",l);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw eE(t,y,m);fs(t,y)}}catch(s){if(s instanceof _i)throw s;fs(t,"network-request-failed",{message:String(s)})}}async function hc(t,e,n,r,s={}){const o=await bi(t,e,n,r,s);return"mfaPendingCredential"in o&&fs(t,"multi-factor-auth-required",{_serverResponse:o}),o}function rE(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Hy(t.config,s):`${t.config.apiScheme}://${s}`}function SN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ps(this.auth,"network-request-failed")),IN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ps(t,e,r);return s.customData._tokenResponse=n,s}function ib(t){return t!==void 0&&t.enterprise!==void 0}class AN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return SN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function NN(t,e){return bi(t,"GET","/v2/recaptchaConfig",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(t,e){return bi(t,"POST","/v1/accounts:delete",e)}async function sE(t,e){return bi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PN(t,e=!1){const n=jt(t),r=await n.getIdToken(e),s=Ky(r);Me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:xu(wg(s.auth_time)),issuedAtTime:xu(wg(s.iat)),expirationTime:xu(wg(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function wg(t){return Number(t)*1e3}function Ky(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cf("JWT malformed, contained fewer than 3 sections"),null;try{const s=Bk(n);return s?JSON.parse(s):(cf("Failed to decode base64 JWT payload"),null)}catch(s){return cf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ob(t){const e=Ky(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof _i&&jN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function jN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Zl(t,sE(n,{idToken:r}));Me(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?iE(o.providerUserInfo):[],u=LN(t.providerData,l),d=t.isAnonymous,m=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),y=d?m:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ey(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(t,w)}async function ON(t){const e=jt(t);await Lu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function iE(t){return t.map(e=>{var{providerId:n}=e,r=Wy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t,e){const n=await nE(t,{},async()=>{const r=ad({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=rE(t,s,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",tE.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VN(t,e){return bi(t,"POST","/v2/accounts:revokeToken",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ob(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=ob(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await MN(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new Rl;return r&&(Me(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Me(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Me(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ci{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=Wy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ey(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Zl(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PN(this,e)}reload(){return ON(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(us(this.auth.app))return Promise.reject(js(this.auth));const e=await this.getIdToken();return await Zl(this,RN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,l,u,d,m,y;const w=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,E=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,N=(l=n.photoURL)!==null&&l!==void 0?l:void 0,I=(u=n.tenantId)!==null&&u!==void 0?u:void 0,S=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,V=(m=n.createdAt)!==null&&m!==void 0?m:void 0,W=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:U,emailVerified:G,isAnonymous:Z,providerData:K,stsTokenManager:A}=n;Me(U&&A,e,"internal-error");const k=Rl.fromJSON(this.name,A);Me(typeof U=="string",e,"internal-error"),Zi(w,e.name),Zi(x,e.name),Me(typeof G=="boolean",e,"internal-error"),Me(typeof Z=="boolean",e,"internal-error"),Zi(E,e.name),Zi(N,e.name),Zi(I,e.name),Zi(S,e.name),Zi(V,e.name),Zi(W,e.name);const R=new ci({uid:U,auth:e,email:x,emailVerified:G,displayName:w,isAnonymous:Z,photoURL:N,phoneNumber:E,tenantId:I,stsTokenManager:k,createdAt:V,lastLoginAt:W});return K&&Array.isArray(K)&&(R.providerData=K.map(P=>Object.assign({},P))),S&&(R._redirectEventId=S),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new Rl;s.updateFromServerResponse(n);const o=new ci({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Lu(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Me(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?iE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),u=new Rl;u.updateFromIdToken(r);const d=new ci({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ey(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Map;function ui(t){pi(t instanceof Function,"Expected a class definition");let e=ab.get(t);return e?(pi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ab.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oE.type="NONE";const lb=oE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t,e,n){return`firebase:${t}:${e}:${n}`}class Pl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=uf(this.userKey,s.apiKey,o),this.fullPersistenceKey=uf("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ci._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Pl(ui(lb),e,r);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||ui(lb);const l=uf(r,e.config.apiKey,e.name);let u=null;for(const m of n)try{const y=await m._get(l);if(y){const w=ci._fromJSON(e,y);m!==o&&(u=w),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Pl(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new Pl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hE(e))return"Blackberry";if(fE(e))return"Webos";if(lE(e))return"Safari";if((e.includes("chrome/")||cE(e))&&!e.includes("edge/"))return"Chrome";if(dE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aE(t=Fn()){return/firefox\//i.test(t)}function lE(t=Fn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cE(t=Fn()){return/crios\//i.test(t)}function uE(t=Fn()){return/iemobile/i.test(t)}function dE(t=Fn()){return/android/i.test(t)}function hE(t=Fn()){return/blackberry/i.test(t)}function fE(t=Fn()){return/webos/i.test(t)}function Gy(t=Fn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FN(t=Fn()){var e;return Gy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zN(){return e2()&&document.documentMode===10}function pE(t=Fn()){return Gy(t)||dE(t)||fE(t)||hE(t)||/windows phone/i.test(t)||uE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(t,e=[]){let n;switch(t){case"Browser":n=cb(Fn());break;case"Worker":n=`${cb(Fn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${dc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(t,e={}){return bi(t,"GET","/v2/passwordPolicy",wi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=6;class WN{constructor(e){var n,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:$N,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ub(this),this.idTokenSubscription=new ub(this),this.beforeStateQueue=new UN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ui(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sE(this,{idToken:e}),r=await ci._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(us(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(us(this.app))return Promise.reject(js(this));const n=e?jt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return us(this.app)?Promise.reject(js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return us(this.app)?Promise.reject(js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BN(this),n=new WN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new od("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await VN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ui(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[ui(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ao(t){return jt(t)}class ub{constructor(e){this.auth=e,this.observer=null,this.addObserver=l2(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HN(t){op=t}function gE(t){return op.loadJS(t)}function KN(){return op.recaptchaEnterpriseScript}function GN(){return op.gapiScript}function QN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ZN="recaptcha-enterprise",YN="NO_RECAPTCHA";class JN{constructor(e){this.type=ZN,this.auth=Ao(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{NN(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const m=new AN(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,l(m.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;ib(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{l(m)}).catch(()=>{l(YN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{r(this.auth).then(u=>{if(!n&&ib(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=KN();d.length!==0&&(d+=u),gE(d).then(()=>{s(u,o,l)}).catch(m=>{l(m)})}}).catch(u=>{l(u)})})}}async function db(t,e,n,r=!1){const s=new JN(t);let o;try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function hb(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await db(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await db(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t,e){const n=$y(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Nf(o,e??{}))return s;fs(s,"already-initialized")}return n.initialize({options:e})}function eR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ui);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tR(t,e,n){const r=Ao(t);Me(r._canInitEmulator,r,"emulator-config-failed"),Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=yE(e),{host:l,port:u}=nR(e),d=u===null?"":`:${u}`;r.config.emulator={url:`${o}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),rR()}function yE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nR(t){const e=yE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:fb(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:fb(l)}}}function fb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return li("not implemented")}_getIdTokenResponse(e){return li("not implemented")}_linkToIdToken(e,n){return li("not implemented")}_getReauthenticationResolver(e){return li("not implemented")}}async function sR(t,e){return bi(t,"POST","/v1/accounts:update",e)}async function iR(t,e){return bi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t,e){return hc(t,"POST","/v1/accounts:signInWithPassword",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",wi(t,e))}async function lR(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends Qy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Mu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Mu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hb(e,n,"signInWithPassword",oR);case"emailLink":return aR(e,{email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hb(e,r,"signUpPassword",iR);case"emailLink":return lR(e,{idToken:n,email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t,e){return hc(t,"POST","/v1/accounts:signInWithIdp",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="http://localhost";class Sa extends Qy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=Wy(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Sa(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return jl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,jl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jl(e,n)}buildRequest(){const e={requestUri:cR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ad(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dR(t){const e=du(hu(t)).link,n=e?du(hu(e)).deep_link_id:null,r=du(hu(t)).deep_link_id;return(r?du(hu(r)).link:null)||r||n||e||t}class Zy{constructor(e){var n,r,s,o,l,u;const d=du(hu(e)),m=(n=d.apiKey)!==null&&n!==void 0?n:null,y=(r=d.oobCode)!==null&&r!==void 0?r:null,w=uR((s=d.mode)!==null&&s!==void 0?s:null);Me(m&&y&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=y,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=dR(e);try{return new Zy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.providerId=Pa.PROVIDER_ID}static credential(e,n){return Mu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zy.parseLink(n);return Me(r,"argument-error"),Mu._fromEmailAndCode(e,r.code,r.tenantId)}}Pa.PROVIDER_ID="password";Pa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends vE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends cd{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.FACEBOOK_SIGN_IN_METHOD="facebook.com";to.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends cd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Sa._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return no.credential(n,r)}catch{return null}}}no.GOOGLE_SIGN_IN_METHOD="google.com";no.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends cd{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ro.credential(e.oauthAccessToken)}catch{return null}}}ro.GITHUB_SIGN_IN_METHOD="github.com";ro.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends cd{constructor(){super("twitter.com")}static credential(e,n){return Sa._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return so.credential(n,r)}catch{return null}}}so.TWITTER_SIGN_IN_METHOD="twitter.com";so.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(t,e){return hc(t,"POST","/v1/accounts:signUp",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await ci._fromIdTokenResponse(e,r,s),l=pb(r);return new mi({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=pb(r);return new mi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function pb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t){var e;if(us(t.app))return Promise.reject(js(t));const n=Ao(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new mi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await hR(n,{returnSecureToken:!0}),s=await mi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends _i{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Pf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Pf(e,n,r,s)}}function _E(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Pf._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function wE(t,e,n=!1){const r=await Zl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mi._forOperation(t,"link",r)}async function mR(t,e,n){await Lu(e);const r=pR(e.providerData);Me(r.has(n)===t,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(t,e,n=!1){const{auth:r}=t;if(us(r.app))return Promise.reject(js(r));const s="reauthenticate";try{const o=await Zl(t,_E(r,s,e,t),n);Me(o.idToken,r,"internal-error");const l=Ky(o.idToken);Me(l,r,"internal-error");const{sub:u}=l;return Me(t.uid===u,r,"user-mismatch"),mi._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&fs(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bE(t,e,n=!1){if(us(t.app))return Promise.reject(js(t));const r="signIn",s=await _E(t,r,e),o=await mi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function yR(t,e){return bE(Ao(t),e)}async function vR(t,e){const n=jt(t);return await mR(!1,n,e.providerId),wE(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(t,e){return hc(t,"POST","/v1/accounts:signInWithCustomToken",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(t,e){if(us(t.app))return Promise.reject(js(t));const n=Ao(t),r=await _R(n,{token:e,returnSecureToken:!0}),s=await mi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(t){const e=Ao(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function xE(t,e,n){return us(t.app)?Promise.reject(js(t)):yR(jt(t),Pa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&bR(t),r})}function xR(t,e){return kR(jt(t),null,e)}async function kR(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const l=await Zl(t,sR(r,o));await t._updateTokensIfNecessary(l,!0)}function ER(t,e,n,r){return jt(t).onIdTokenChanged(e,n,r)}function TR(t,e,n){return jt(t).beforeAuthStateChanged(e,n)}function kE(t,e,n,r){return jt(t).onAuthStateChanged(e,n,r)}function EE(t){return jt(t).signOut()}const jf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jf,"1"),this.storage.removeItem(jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=1e3,SR=10;class IE extends TE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);zN()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,SR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},IR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IE.type="LOCAL";const CR=IE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends TE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SE.type="SESSION";const CE=SE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ap(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async m=>m(n.origin,o)),d=await AR(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ap.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const m=Yy("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(w){const x=w;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(x.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(){return window}function RR(t){Ds().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(){return typeof Ds().WorkerGlobalScope<"u"&&typeof Ds().importScripts=="function"}async function PR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function DR(){return AE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="firebaseLocalStorageDb",OR=1,Df="firebaseLocalStorage",RE="fbase_key";class ud{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lp(t,e){return t.transaction([Df],e?"readwrite":"readonly").objectStore(Df)}function LR(){const t=indexedDB.deleteDatabase(NE);return new ud(t).toPromise()}function ty(){const t=indexedDB.open(NE,OR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Df,{keyPath:RE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Df)?e(r):(r.close(),await LR(),e(await ty()))})})}async function mb(t,e,n){const r=lp(t,!0).put({[RE]:e,value:n});return new ud(r).toPromise()}async function MR(t,e){const n=lp(t,!1).get(e),r=await new ud(n).toPromise();return r===void 0?null:r.value}function gb(t,e){const n=lp(t,!0).delete(e);return new ud(n).toPromise()}const VR=800,FR=3;class PE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ty(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>FR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ap._getInstance(DR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await PR(),!this.activeServiceWorker)return;this.sender=new NR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ty();return await mb(e,jf,"1"),await gb(e,jf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>mb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>MR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=lp(s,!1).getAll();return new ud(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PE.type="LOCAL";const zR=PE;new ld(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t,e){return e?ui(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy extends Qy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BR(t){return bE(t.auth,new Jy(t),t.bypassAuthState)}function $R(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),gR(n,new Jy(t),t.bypassAuthState)}async function WR(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),wE(n,new Jy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BR;case"linkViaPopup":case"linkViaRedirect":return WR;case"reauthViaPopup":case"reauthViaRedirect":return $R;default:fs(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new ld(2e3,1e4);class Sl extends jE{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Sl.currentPopupAction&&Sl.currentPopupAction.cancel(),Sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=Yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qR.get())};e()}}Sl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="pendingRedirect",df=new Map;class KR extends jE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=df.get(this.auth._key());if(!e){try{const r=await GR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}df.set(this.auth._key(),e)}return this.bypassAuthState||df.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GR(t,e){const n=YR(e),r=ZR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function QR(t,e){df.set(t._key(),e)}function ZR(t){return ui(t._redirectPersistence)}function YR(t){return uf(HR,t.config.apiKey,t.name)}async function JR(t,e,n=!1){if(us(t.app))return Promise.reject(js(t));const r=Ao(t),s=UR(r,e),l=await new KR(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=600*1e3;class eP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!DE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ps(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XR&&this.cachedEventUids.clear(),this.cachedEventUids.has(yb(e))}saveEventToCache(e){this.cachedEventUids.add(yb(e)),this.lastProcessedEventTime=Date.now()}}function yb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(t,e={}){return bi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sP=/^https?/;async function iP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nP(t);for(const n of e)try{if(oP(n))return}catch{}fs(t,"unauthorized-domain")}function oP(t){const e=Xg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!sP.test(n))return!1;if(rP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new ld(3e4,6e4);function vb(){const t=Ds().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lP(t){return new Promise((e,n)=>{var r,s,o;function l(){vb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vb(),n(Ps(t,"network-request-failed"))},timeout:aP.get()})}if(!((s=(r=Ds().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Ds().gapi)===null||o===void 0)&&o.load)l();else{const u=QN("iframefcb");return Ds()[u]=()=>{gapi.load?l():n(Ps(t,"network-request-failed"))},gE(`${GN()}?onload=${u}`).catch(d=>n(d))}}).catch(e=>{throw hf=null,e})}let hf=null;function cP(t){return hf=hf||lP(t),hf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=new ld(5e3,15e3),dP="__/auth/iframe",hP="emulator/auth/iframe",fP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mP(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hy(e,hP):`https://${t.config.authDomain}/${dP}`,r={apiKey:e.apiKey,appName:t.name,v:dc},s=pP.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ad(r).slice(1)}`}async function gP(t){const e=await cP(t),n=Ds().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:mP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fP,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Ps(t,"network-request-failed"),u=Ds().setTimeout(()=>{o(l)},uP.get());function d(){Ds().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vP=500,_P=600,wP="_blank",bP="http://localhost";class _b{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xP(t,e,n,r=vP,s=_P){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},yP),{width:r.toString(),height:s.toString(),top:o,left:l}),m=Fn().toLowerCase();n&&(u=cE(m)?wP:n),aE(m)&&(e=e||bP,d.scrollbars="yes");const y=Object.entries(d).reduce((x,[E,N])=>`${x}${E}=${N},`,"");if(FN(m)&&u!=="_self")return kP(e||"",u),new _b(null);const w=window.open(e||"",u,y);Me(w,t,"popup-blocked");try{w.focus()}catch{}return new _b(w)}function kP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="__/auth/handler",TP="emulator/auth/handler",IP=encodeURIComponent("fac");async function wb(t,e,n,r,s,o){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:dc,eventId:s};if(e instanceof vE){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",a2(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))l[y]=w}if(e instanceof cd){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const d=await t._getAppCheckToken(),m=d?`#${IP}=${encodeURIComponent(d)}`:"";return`${SP(t)}?${ad(u).slice(1)}${m}`}function SP({config:t}){return t.emulator?Hy(t,TP):`https://${t.authDomain}/${EP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="webStorageSupport";class CP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CE,this._completeRedirectFn=JR,this._overrideRedirectResult=QR}async _openPopup(e,n,r,s){var o;pi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await wb(e,n,r,Xg(),s);return xP(e,l,Yy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await wb(e,n,r,Xg(),s);return RR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(pi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gP(e),r=new eP(e);return n.register("authEvent",s=>(Me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bg,{type:bg},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[bg];l!==void 0&&n(!!l),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pE()||lE()||Gy()}}const AP=CP;var bb="@firebase/auth",xb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PP(t){Ql(new Ia("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Me(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mE(t)},m=new qN(r,s,o,d);return eR(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ql(new Ia("auth-internal",e=>{const n=Ao(e.getProvider("auth").getImmediate());return(r=>new NP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wo(bb,xb,RP(t)),wo(bb,xb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=300,DP=qk("authIdTokenMaxAge")||jP;let kb=null;const OP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>DP)return;const s=n==null?void 0:n.token;kb!==s&&(kb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function LP(t=Qk()){const e=$y(t,"auth");if(e.isInitialized())return e.getImmediate();const n=XN(t,{popupRedirectResolver:AP,persistence:[zR,CR,CE]}),r=qk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=OP(o.toString());TR(n,l,()=>l(n.currentUser)),ER(n,u=>l(u))}}const s=$k("auth");return s&&tR(n,`http://${s}`),n}function MP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}HN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Ps("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",MP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PP("Browser");var Eb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ka,OE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,k){function R(){}R.prototype=k.prototype,A.D=k.prototype,A.prototype=new R,A.prototype.constructor=A,A.C=function(P,O,M){for(var j=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)j[Ce-2]=arguments[Ce];return k.prototype[O].apply(P,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,k,R){R||(R=0);var P=Array(16);if(typeof k=="string")for(var O=0;16>O;++O)P[O]=k.charCodeAt(R++)|k.charCodeAt(R++)<<8|k.charCodeAt(R++)<<16|k.charCodeAt(R++)<<24;else for(O=0;16>O;++O)P[O]=k[R++]|k[R++]<<8|k[R++]<<16|k[R++]<<24;k=A.g[0],R=A.g[1],O=A.g[2];var M=A.g[3],j=k+(M^R&(O^M))+P[0]+3614090360&4294967295;k=R+(j<<7&4294967295|j>>>25),j=M+(O^k&(R^O))+P[1]+3905402710&4294967295,M=k+(j<<12&4294967295|j>>>20),j=O+(R^M&(k^R))+P[2]+606105819&4294967295,O=M+(j<<17&4294967295|j>>>15),j=R+(k^O&(M^k))+P[3]+3250441966&4294967295,R=O+(j<<22&4294967295|j>>>10),j=k+(M^R&(O^M))+P[4]+4118548399&4294967295,k=R+(j<<7&4294967295|j>>>25),j=M+(O^k&(R^O))+P[5]+1200080426&4294967295,M=k+(j<<12&4294967295|j>>>20),j=O+(R^M&(k^R))+P[6]+2821735955&4294967295,O=M+(j<<17&4294967295|j>>>15),j=R+(k^O&(M^k))+P[7]+4249261313&4294967295,R=O+(j<<22&4294967295|j>>>10),j=k+(M^R&(O^M))+P[8]+1770035416&4294967295,k=R+(j<<7&4294967295|j>>>25),j=M+(O^k&(R^O))+P[9]+2336552879&4294967295,M=k+(j<<12&4294967295|j>>>20),j=O+(R^M&(k^R))+P[10]+4294925233&4294967295,O=M+(j<<17&4294967295|j>>>15),j=R+(k^O&(M^k))+P[11]+2304563134&4294967295,R=O+(j<<22&4294967295|j>>>10),j=k+(M^R&(O^M))+P[12]+1804603682&4294967295,k=R+(j<<7&4294967295|j>>>25),j=M+(O^k&(R^O))+P[13]+4254626195&4294967295,M=k+(j<<12&4294967295|j>>>20),j=O+(R^M&(k^R))+P[14]+2792965006&4294967295,O=M+(j<<17&4294967295|j>>>15),j=R+(k^O&(M^k))+P[15]+1236535329&4294967295,R=O+(j<<22&4294967295|j>>>10),j=k+(O^M&(R^O))+P[1]+4129170786&4294967295,k=R+(j<<5&4294967295|j>>>27),j=M+(R^O&(k^R))+P[6]+3225465664&4294967295,M=k+(j<<9&4294967295|j>>>23),j=O+(k^R&(M^k))+P[11]+643717713&4294967295,O=M+(j<<14&4294967295|j>>>18),j=R+(M^k&(O^M))+P[0]+3921069994&4294967295,R=O+(j<<20&4294967295|j>>>12),j=k+(O^M&(R^O))+P[5]+3593408605&4294967295,k=R+(j<<5&4294967295|j>>>27),j=M+(R^O&(k^R))+P[10]+38016083&4294967295,M=k+(j<<9&4294967295|j>>>23),j=O+(k^R&(M^k))+P[15]+3634488961&4294967295,O=M+(j<<14&4294967295|j>>>18),j=R+(M^k&(O^M))+P[4]+3889429448&4294967295,R=O+(j<<20&4294967295|j>>>12),j=k+(O^M&(R^O))+P[9]+568446438&4294967295,k=R+(j<<5&4294967295|j>>>27),j=M+(R^O&(k^R))+P[14]+3275163606&4294967295,M=k+(j<<9&4294967295|j>>>23),j=O+(k^R&(M^k))+P[3]+4107603335&4294967295,O=M+(j<<14&4294967295|j>>>18),j=R+(M^k&(O^M))+P[8]+1163531501&4294967295,R=O+(j<<20&4294967295|j>>>12),j=k+(O^M&(R^O))+P[13]+2850285829&4294967295,k=R+(j<<5&4294967295|j>>>27),j=M+(R^O&(k^R))+P[2]+4243563512&4294967295,M=k+(j<<9&4294967295|j>>>23),j=O+(k^R&(M^k))+P[7]+1735328473&4294967295,O=M+(j<<14&4294967295|j>>>18),j=R+(M^k&(O^M))+P[12]+2368359562&4294967295,R=O+(j<<20&4294967295|j>>>12),j=k+(R^O^M)+P[5]+4294588738&4294967295,k=R+(j<<4&4294967295|j>>>28),j=M+(k^R^O)+P[8]+2272392833&4294967295,M=k+(j<<11&4294967295|j>>>21),j=O+(M^k^R)+P[11]+1839030562&4294967295,O=M+(j<<16&4294967295|j>>>16),j=R+(O^M^k)+P[14]+4259657740&4294967295,R=O+(j<<23&4294967295|j>>>9),j=k+(R^O^M)+P[1]+2763975236&4294967295,k=R+(j<<4&4294967295|j>>>28),j=M+(k^R^O)+P[4]+1272893353&4294967295,M=k+(j<<11&4294967295|j>>>21),j=O+(M^k^R)+P[7]+4139469664&4294967295,O=M+(j<<16&4294967295|j>>>16),j=R+(O^M^k)+P[10]+3200236656&4294967295,R=O+(j<<23&4294967295|j>>>9),j=k+(R^O^M)+P[13]+681279174&4294967295,k=R+(j<<4&4294967295|j>>>28),j=M+(k^R^O)+P[0]+3936430074&4294967295,M=k+(j<<11&4294967295|j>>>21),j=O+(M^k^R)+P[3]+3572445317&4294967295,O=M+(j<<16&4294967295|j>>>16),j=R+(O^M^k)+P[6]+76029189&4294967295,R=O+(j<<23&4294967295|j>>>9),j=k+(R^O^M)+P[9]+3654602809&4294967295,k=R+(j<<4&4294967295|j>>>28),j=M+(k^R^O)+P[12]+3873151461&4294967295,M=k+(j<<11&4294967295|j>>>21),j=O+(M^k^R)+P[15]+530742520&4294967295,O=M+(j<<16&4294967295|j>>>16),j=R+(O^M^k)+P[2]+3299628645&4294967295,R=O+(j<<23&4294967295|j>>>9),j=k+(O^(R|~M))+P[0]+4096336452&4294967295,k=R+(j<<6&4294967295|j>>>26),j=M+(R^(k|~O))+P[7]+1126891415&4294967295,M=k+(j<<10&4294967295|j>>>22),j=O+(k^(M|~R))+P[14]+2878612391&4294967295,O=M+(j<<15&4294967295|j>>>17),j=R+(M^(O|~k))+P[5]+4237533241&4294967295,R=O+(j<<21&4294967295|j>>>11),j=k+(O^(R|~M))+P[12]+1700485571&4294967295,k=R+(j<<6&4294967295|j>>>26),j=M+(R^(k|~O))+P[3]+2399980690&4294967295,M=k+(j<<10&4294967295|j>>>22),j=O+(k^(M|~R))+P[10]+4293915773&4294967295,O=M+(j<<15&4294967295|j>>>17),j=R+(M^(O|~k))+P[1]+2240044497&4294967295,R=O+(j<<21&4294967295|j>>>11),j=k+(O^(R|~M))+P[8]+1873313359&4294967295,k=R+(j<<6&4294967295|j>>>26),j=M+(R^(k|~O))+P[15]+4264355552&4294967295,M=k+(j<<10&4294967295|j>>>22),j=O+(k^(M|~R))+P[6]+2734768916&4294967295,O=M+(j<<15&4294967295|j>>>17),j=R+(M^(O|~k))+P[13]+1309151649&4294967295,R=O+(j<<21&4294967295|j>>>11),j=k+(O^(R|~M))+P[4]+4149444226&4294967295,k=R+(j<<6&4294967295|j>>>26),j=M+(R^(k|~O))+P[11]+3174756917&4294967295,M=k+(j<<10&4294967295|j>>>22),j=O+(k^(M|~R))+P[2]+718787259&4294967295,O=M+(j<<15&4294967295|j>>>17),j=R+(M^(O|~k))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+k&4294967295,A.g[1]=A.g[1]+(O+(j<<21&4294967295|j>>>11))&4294967295,A.g[2]=A.g[2]+O&4294967295,A.g[3]=A.g[3]+M&4294967295}r.prototype.u=function(A,k){k===void 0&&(k=A.length);for(var R=k-this.blockSize,P=this.B,O=this.h,M=0;M<k;){if(O==0)for(;M<=R;)s(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<k;)if(P[O++]=A.charCodeAt(M++),O==this.blockSize){s(this,P),O=0;break}}else for(;M<k;)if(P[O++]=A[M++],O==this.blockSize){s(this,P),O=0;break}}this.h=O,this.o+=k},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var k=1;k<A.length-8;++k)A[k]=0;var R=8*this.o;for(k=A.length-8;k<A.length;++k)A[k]=R&255,R/=256;for(this.u(A),A=Array(16),k=R=0;4>k;++k)for(var P=0;32>P;P+=8)A[R++]=this.g[k]>>>P&255;return A};function o(A,k){var R=u;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=k(A)}function l(A,k){this.h=k;for(var R=[],P=!0,O=A.length-1;0<=O;O--){var M=A[O]|0;P&&M==k||(R[O]=M,P=!1)}this.g=R}var u={};function d(A){return-128<=A&&128>A?o(A,function(k){return new l([k|0],0>k?-1:0)}):new l([A|0],0>A?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return w;if(0>A)return S(m(-A));for(var k=[],R=1,P=0;A>=R;P++)k[P]=A/R|0,R*=4294967296;return new l(k,0)}function y(A,k){if(A.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A.charAt(0)=="-")return S(y(A.substring(1),k));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(k,8)),P=w,O=0;O<A.length;O+=8){var M=Math.min(8,A.length-O),j=parseInt(A.substring(O,O+M),k);8>M?(M=m(Math.pow(k,M)),P=P.j(M).add(m(j))):(P=P.j(R),P=P.add(m(j)))}return P}var w=d(0),x=d(1),E=d(16777216);t=l.prototype,t.m=function(){if(I(this))return-S(this).m();for(var A=0,k=1,R=0;R<this.g.length;R++){var P=this.i(R);A+=(0<=P?P:4294967296+P)*k,k*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N(this))return"0";if(I(this))return"-"+S(this).toString(A);for(var k=m(Math.pow(A,6)),R=this,P="";;){var O=G(R,k).g;R=V(R,O.j(k));var M=((0<R.g.length?R.g[0]:R.h)>>>0).toString(A);if(R=O,N(R))return M+P;for(;6>M.length;)M="0"+M;P=M+P}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function N(A){if(A.h!=0)return!1;for(var k=0;k<A.g.length;k++)if(A.g[k]!=0)return!1;return!0}function I(A){return A.h==-1}t.l=function(A){return A=V(this,A),I(A)?-1:N(A)?0:1};function S(A){for(var k=A.g.length,R=[],P=0;P<k;P++)R[P]=~A.g[P];return new l(R,~A.h).add(x)}t.abs=function(){return I(this)?S(this):this},t.add=function(A){for(var k=Math.max(this.g.length,A.g.length),R=[],P=0,O=0;O<=k;O++){var M=P+(this.i(O)&65535)+(A.i(O)&65535),j=(M>>>16)+(this.i(O)>>>16)+(A.i(O)>>>16);P=j>>>16,M&=65535,j&=65535,R[O]=j<<16|M}return new l(R,R[R.length-1]&-2147483648?-1:0)};function V(A,k){return A.add(S(k))}t.j=function(A){if(N(this)||N(A))return w;if(I(this))return I(A)?S(this).j(S(A)):S(S(this).j(A));if(I(A))return S(this.j(S(A)));if(0>this.l(E)&&0>A.l(E))return m(this.m()*A.m());for(var k=this.g.length+A.g.length,R=[],P=0;P<2*k;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var O=0;O<A.g.length;O++){var M=this.i(P)>>>16,j=this.i(P)&65535,Ce=A.i(O)>>>16,nt=A.i(O)&65535;R[2*P+2*O]+=j*nt,W(R,2*P+2*O),R[2*P+2*O+1]+=M*nt,W(R,2*P+2*O+1),R[2*P+2*O+1]+=j*Ce,W(R,2*P+2*O+1),R[2*P+2*O+2]+=M*Ce,W(R,2*P+2*O+2)}for(P=0;P<k;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=k;P<2*k;P++)R[P]=0;return new l(R,0)};function W(A,k){for(;(A[k]&65535)!=A[k];)A[k+1]+=A[k]>>>16,A[k]&=65535,k++}function U(A,k){this.g=A,this.h=k}function G(A,k){if(N(k))throw Error("division by zero");if(N(A))return new U(w,w);if(I(A))return k=G(S(A),k),new U(S(k.g),S(k.h));if(I(k))return k=G(A,S(k)),new U(S(k.g),k.h);if(30<A.g.length){if(I(A)||I(k))throw Error("slowDivide_ only works with positive integers.");for(var R=x,P=k;0>=P.l(A);)R=Z(R),P=Z(P);var O=K(R,1),M=K(P,1);for(P=K(P,2),R=K(R,2);!N(P);){var j=M.add(P);0>=j.l(A)&&(O=O.add(R),M=j),P=K(P,1),R=K(R,1)}return k=V(A,O.j(k)),new U(O,k)}for(O=w;0<=A.l(k);){for(R=Math.max(1,Math.floor(A.m()/k.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),M=m(R),j=M.j(k);I(j)||0<j.l(A);)R-=P,M=m(R),j=M.j(k);N(M)&&(M=x),O=O.add(M),A=V(A,j)}return new U(O,A)}t.A=function(A){return G(this,A).h},t.and=function(A){for(var k=Math.max(this.g.length,A.g.length),R=[],P=0;P<k;P++)R[P]=this.i(P)&A.i(P);return new l(R,this.h&A.h)},t.or=function(A){for(var k=Math.max(this.g.length,A.g.length),R=[],P=0;P<k;P++)R[P]=this.i(P)|A.i(P);return new l(R,this.h|A.h)},t.xor=function(A){for(var k=Math.max(this.g.length,A.g.length),R=[],P=0;P<k;P++)R[P]=this.i(P)^A.i(P);return new l(R,this.h^A.h)};function Z(A){for(var k=A.g.length+1,R=[],P=0;P<k;P++)R[P]=A.i(P)<<1|A.i(P-1)>>>31;return new l(R,A.h)}function K(A,k){var R=k>>5;k%=32;for(var P=A.g.length-R,O=[],M=0;M<P;M++)O[M]=0<k?A.i(M+R)>>>k|A.i(M+R+1)<<32-k:A.i(M+R);return new l(O,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OE=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,ka=l}).apply(typeof Eb<"u"?Eb:typeof self<"u"?self:typeof window<"u"?window:{});var $h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LE,fu,ME,ff,ny,VE,FE,zE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,b){return h==Array.prototype||h==Object.prototype||(h[v]=b.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof $h=="object"&&$h];for(var v=0;v<h.length;++v){var b=h[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(h,v){if(v)e:{var b=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var q=h[C];if(!(q in b))break e;b=b[q]}h=h[h.length-1],C=b[h],v=v(C),v!=C&&v!=null&&e(b,h,{configurable:!0,writable:!0,value:v})}}function o(h,v){h instanceof String&&(h+="");var b=0,C=!1,q={next:function(){if(!C&&b<h.length){var J=b++;return{value:v(J,h[J]),done:!1}}return C=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(h){return h||function(){return o(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function m(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,b){return h.call.apply(h.bind,arguments)}function w(h,v,b){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,C),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function x(h,v,b){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:w,x.apply(null,arguments)}function E(h,v){var b=Array.prototype.slice.call(arguments,1);return function(){var C=b.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function N(h,v){function b(){}b.prototype=v.prototype,h.aa=v.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(C,q,J){for(var ue=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)ue[dt-2]=arguments[dt];return v.prototype[q].apply(C,ue)}}function I(h){const v=h.length;if(0<v){const b=Array(v);for(let C=0;C<v;C++)b[C]=h[C];return b}return[]}function S(h,v){for(let b=1;b<arguments.length;b++){const C=arguments[b];if(d(C)){const q=h.length||0,J=C.length||0;h.length=q+J;for(let ue=0;ue<J;ue++)h[q+ue]=C[ue]}else h.push(C)}}class V{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function W(h){return/^[\s\xa0]*$/.test(h)}function U(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function G(h){return G[" "](h),h}G[" "]=function(){};var Z=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function K(h,v,b){for(const C in h)v.call(b,h[C],C,h)}function A(h,v){for(const b in h)v.call(void 0,h[b],b,h)}function k(h){const v={};for(const b in h)v[b]=h[b];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,v){let b,C;for(let q=1;q<arguments.length;q++){C=arguments[q];for(b in C)h[b]=C[b];for(let J=0;J<R.length;J++)b=R[J],Object.prototype.hasOwnProperty.call(C,b)&&(h[b]=C[b])}}function O(h){var v=1;h=h.split(":");const b=[];for(;0<v&&h.length;)b.push(h.shift()),v--;return h.length&&b.push(h.join(":")),b}function M(h){u.setTimeout(()=>{throw h},0)}function j(){var h=pe;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Ce{constructor(){this.h=this.g=null}add(v,b){const C=nt.get();C.set(v,b),this.h?this.h.next=C:this.g=C,this.h=C}}var nt=new V(()=>new Qe,h=>h.reset());class Qe{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,X=!1,pe=new Ce,de=()=>{const h=u.Promise.resolve(void 0);Ne=()=>{h.then($)}};var $=()=>{for(var h;h=j();){try{h.h.call(h.g)}catch(b){M(b)}var v=nt;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}X=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var be=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};u.addEventListener("test",b,v),u.removeEventListener("test",b,v)}catch{}return h})();function De(h,v){if(ce.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(Z){e:{try{G(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else b=="mouseover"?v=h.fromElement:b=="mouseout"&&(v=h.toElement);this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Re[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&De.aa.h.call(this)}}N(De,ce);var Re={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function ne(h,v,b,C,q){this.listener=h,this.proxy=null,this.src=v,this.type=b,this.capture=!!C,this.ha=q,this.key=++Ue,this.da=this.fa=!1}function he(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function rt(h){this.src=h,this.g={},this.h=0}rt.prototype.add=function(h,v,b,C,q){var J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);var ue=yn(h,v,C,q);return-1<ue?(v=h[ue],b||(v.fa=!1)):(v=new ne(v,this.src,J,!!C,q),v.fa=b,h.push(v)),v};function pt(h,v){var b=v.type;if(b in h.g){var C=h.g[b],q=Array.prototype.indexOf.call(C,v,void 0),J;(J=0<=q)&&Array.prototype.splice.call(C,q,1),J&&(he(v),h.g[b].length==0&&(delete h.g[b],h.h--))}}function yn(h,v,b,C){for(var q=0;q<h.length;++q){var J=h[q];if(!J.da&&J.listener==v&&J.capture==!!b&&J.ha==C)return q}return-1}var vn="closure_lm_"+(1e6*Math.random()|0),fr={};function Tr(h,v,b,C,q){if(Array.isArray(v)){for(var J=0;J<v.length;J++)Tr(h,v[J],b,C,q);return null}return b=Lo(b),h&&h[Te]?h.K(v,b,m(C)?!!C.capture:!1,q):ki(h,v,b,!1,C,q)}function ki(h,v,b,C,q,J){if(!v)throw Error("Invalid event type");var ue=m(q)?!!q.capture:!!q,dt=Us(h);if(dt||(h[vn]=dt=new rt(h)),b=dt.add(v,b,C,ue,J),b.proxy)return b;if(C=Oo(),b.proxy=C,C.src=h,C.listener=b,h.addEventListener)be||(q=ue),q===void 0&&(q=!1),h.addEventListener(v.toString(),C,q);else if(h.attachEvent)h.attachEvent(Jn(v.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Oo(){function h(b){return v.call(h.src,h.listener,b)}const v=ys;return h}function gs(h,v,b,C,q){if(Array.isArray(v))for(var J=0;J<v.length;J++)gs(h,v[J],b,C,q);else C=m(C)?!!C.capture:!!C,b=Lo(b),h&&h[Te]?(h=h.i,v=String(v).toString(),v in h.g&&(J=h.g[v],b=yn(J,b,C,q),-1<b&&(he(J[b]),Array.prototype.splice.call(J,b,1),J.length==0&&(delete h.g[v],h.h--)))):h&&(h=Us(h))&&(v=h.g[v.toString()],h=-1,v&&(h=yn(v,b,C,q)),(b=-1<h?v[h]:null)&&an(b))}function an(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Te])pt(v.i,h);else{var b=h.type,C=h.proxy;v.removeEventListener?v.removeEventListener(b,C,h.capture):v.detachEvent?v.detachEvent(Jn(b),C):v.addListener&&v.removeListener&&v.removeListener(C),(b=Us(v))?(pt(b,h),b.h==0&&(b.src=null,v[vn]=null)):he(h)}}}function Jn(h){return h in fr?fr[h]:fr[h]="on"+h}function ys(h,v){if(h.da)h=!0;else{v=new De(v,this);var b=h.listener,C=h.ha||h.src;h.fa&&an(h),h=b.call(C,v)}return h}function Us(h){return h=h[vn],h instanceof rt?h:null}var Bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lo(h){return typeof h=="function"?h:(h[Bs]||(h[Bs]=function(v){return h.handleEvent(v)}),h[Bs])}function Ut(){ee.call(this),this.i=new rt(this),this.M=this,this.F=null}N(Ut,ee),Ut.prototype[Te]=!0,Ut.prototype.removeEventListener=function(h,v,b,C){gs(this,h,v,b,C)};function vt(h,v){var b,C=h.F;if(C)for(b=[];C;C=C.F)b.push(C);if(h=h.M,C=v.type||v,typeof v=="string")v=new ce(v,h);else if(v instanceof ce)v.target=v.target||h;else{var q=v;v=new ce(C,h),P(v,q)}if(q=!0,b)for(var J=b.length-1;0<=J;J--){var ue=v.g=b[J];q=Nn(ue,C,!0,v)&&q}if(ue=v.g=h,q=Nn(ue,C,!0,v)&&q,q=Nn(ue,C,!1,v)&&q,b)for(J=0;J<b.length;J++)ue=v.g=b[J],q=Nn(ue,C,!1,v)&&q}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var b=h.g[v],C=0;C<b.length;C++)he(b[C]);delete h.g[v],h.h--}}this.F=null},Ut.prototype.K=function(h,v,b,C){return this.i.add(String(h),v,!1,b,C)},Ut.prototype.L=function(h,v,b,C){return this.i.add(String(h),v,!0,b,C)};function Nn(h,v,b,C){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,J=0;J<v.length;++J){var ue=v[J];if(ue&&!ue.da&&ue.capture==b){var dt=ue.listener,en=ue.ha||ue.src;ue.fa&&pt(h.i,ue),q=dt.call(en,C)!==!1&&q}}return q&&!C.defaultPrevented}function Hr(h,v,b){if(typeof h=="function")b&&(h=x(h,b));else if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:u.setTimeout(h,v||0)}function Kr(h){h.g=Hr(()=>{h.g=null,h.i&&(h.i=!1,Kr(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Rn extends ee{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Kr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(h){ee.call(this),this.h=h,this.g={}}N(vs,ee);var Mo=[];function Vo(h){K(h.g,function(v,b){this.g.hasOwnProperty(b)&&an(v)},h),h.g={}}vs.prototype.N=function(){vs.aa.N.call(this),Vo(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $s=u.JSON.stringify,Ei=u.JSON.parse,Fo=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function _s(){}_s.prototype.h=null;function Ti(h){return h.h||(h.h=h.i())}function Ii(){}var Xn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gt(){ce.call(this,"d")}N(gt,ce);function Wt(){ce.call(this,"c")}N(Wt,ce);var It={},er=null;function qt(){return er=er||new Ut}It.La="serverreachability";function Xt(h){ce.call(this,It.La,h)}N(Xt,ce);function Ht(h){const v=qt();vt(v,new Xt(v))}It.STAT_EVENT="statevent";function Ir(h,v){ce.call(this,It.STAT_EVENT,h),this.stat=v}N(Ir,ce);function qe(h){const v=qt();vt(v,new Ir(v,h))}It.Ma="timingevent";function zn(h,v){ce.call(this,It.Ma,h),this.size=v}N(zn,ce);function Mt(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},v)}function _n(){this.g=!0}_n.prototype.xa=function(){this.g=!1};function pr(h,v,b,C,q,J){h.info(function(){if(h.g)if(J)for(var ue="",dt=J.split("&"),en=0;en<dt.length;en++){var st=dt[en].split("=");if(1<st.length){var ln=st[0];st=st[1];var Gt=ln.split("_");ue=2<=Gt.length&&Gt[1]=="type"?ue+(ln+"="+st+"&"):ue+(ln+"=redacted&")}}else ue=null;else ue=J;return"XMLHTTP REQ ("+C+") [attempt "+q+"]: "+v+`
`+b+`
`+ue})}function Sr(h,v,b,C,q,J,ue){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+q+"]: "+v+`
`+b+`
`+J+" "+ue})}function Kt(h,v,b,C){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+zo(h,b)+(C?" "+C:"")})}function Gr(h,v){h.info(function(){return"TIMEOUT: "+v})}_n.prototype.info=function(){};function zo(h,v){if(!h.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var C=b[h];if(!(2>C.length)){var q=C[1];if(Array.isArray(q)&&!(1>q.length)){var J=q[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ue=1;ue<q.length;ue++)q[ue]=""}}}}return $s(b)}catch{return v}}var za={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Td={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qr;function Uo(){}N(Uo,_s),Uo.prototype.g=function(){return new XMLHttpRequest},Uo.prototype.i=function(){return{}},Qr=new Uo;function Zr(h,v,b,C){this.j=h,this.i=v,this.l=b,this.R=C||1,this.U=new vs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Id}function Id(){this.i=null,this.g="",this.h=!1}var Ic={},Ua={};function Ba(h,v,b){h.L=1,h.v=Ri(gr(v)),h.m=b,h.P=!0,Sc(h,null)}function Sc(h,v){h.F=Date.now(),_t(h),h.A=gr(h.v);var b=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),ji(b.i,"t",C),h.C=0,b=h.j.J,h.h=new Id,h.g=Wd(h.j,b?v:null,!h.m),0<h.O&&(h.M=new Rn(x(h.Y,h,h.g),h.O)),v=h.U,b=h.g,C=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Mo[0]=q.toString()),q=Mo);for(var J=0;J<q.length;J++){var ue=Tr(b,q[J],C||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=h.H?k(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Ht(),pr(h.i,h.u,h.A,h.l,h.R,h.m)}Zr.prototype.ca=function(h){h=h.target;const v=this.M;v&&nr(h)==3?v.j():this.Y(h)},Zr.prototype.Y=function(h){try{if(h==this.g)e:{const Gt=nr(this.g);var v=this.g.Ba();const Nr=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||jc(this.g)))){this.J||Gt!=4||v==7||(v==8||0>=Nr?Ht(3):Ht(2)),Bo(this);var b=this.g.Z();this.X=b;t:if(Sd(this)){var C=jc(this.g);h="";var q=C.length,J=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cr(this),Si(this);var ue="";break t}this.h.i=new u.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(C[v],{stream:!(J&&v==q-1)});C.length=0,this.h.g+=h,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=b==200,Sr(this.i,this.u,this.A,this.l,this.R,Gt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,en=this.g;if((dt=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(dt)){var st=dt;break t}}st=null}if(b=st)Kt(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cc(this,b);else{this.o=!1,this.s=3,qe(12),Cr(this),Si(this);break e}}if(this.P){b=!0;let vr;for(;!this.J&&this.C<ue.length;)if(vr=Dp(this,ue),vr==Ua){Gt==4&&(this.s=4,qe(14),b=!1),Kt(this.i,this.l,null,"[Incomplete Response]");break}else if(vr==Ic){this.s=4,qe(15),Kt(this.i,this.l,ue,"[Invalid Chunk]"),b=!1;break}else Kt(this.i,this.l,vr,null),Cc(this,vr);if(Sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||ue.length!=0||this.h.h||(this.s=1,qe(16),b=!1),this.o=this.o&&b,!b)Kt(this.i,this.l,ue,"[Invalid Chunked Response]"),Cr(this),Si(this);else if(0<ue.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Oc(ln),ln.M=!0,qe(11))}}else Kt(this.i,this.l,ue,null),Cc(this,ue);Gt==4&&Cr(this),this.o&&!this.J&&(Gt==4?Xa(this.j,this):(this.o=!1,_t(this)))}else Ga(this.g),b==400&&0<ue.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),Cr(this),Si(this)}}}catch{}finally{}};function Sd(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Dp(h,v){var b=h.C,C=v.indexOf(`
`,b);return C==-1?Ua:(b=Number(v.substring(b,C)),isNaN(b)?Ic:(C+=1,C+b>v.length?Ua:(v=v.slice(C,C+b),h.C=C+b,v)))}Zr.prototype.cancel=function(){this.J=!0,Cr(this)};function _t(h){h.S=Date.now()+h.I,Cd(h,h.I)}function Cd(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Mt(x(h.ba,h),v)}function Bo(h){h.B&&(u.clearTimeout(h.B),h.B=null)}Zr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Gr(this.i,this.A),this.L!=2&&(Ht(),qe(17)),Cr(this),this.s=2,Si(this)):Cd(this,this.S-h)};function Si(h){h.j.G==0||h.J||Xa(h.j,h)}function Cr(h){Bo(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Vo(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Cc(h,v){try{var b=h.j;if(b.G!=0&&(b.g==h||Un(b.h,h))){if(!h.K&&Un(b.h,h)&&b.G==3){try{var C=b.Da.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var q=C;if(q[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)Ja(b),ts(b);else break e;Ya(b),qe(18)}}else b.za=q[1],0<b.za-b.T&&37500>q[2]&&b.F&&b.v==0&&!b.C&&(b.C=Mt(x(b.Za,b),6e3));if(1>=Nd(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Gs(b,11)}else if((h.K||b.g==h)&&Ja(b),!W(v))for(q=b.Da.g.parse(v),v=0;v<q.length;v++){let st=q[v];if(b.T=st[0],st=st[1],b.G==2)if(st[0]=="c"){b.K=st[1],b.ia=st[2];const ln=st[3];ln!=null&&(b.la=ln,b.j.info("VER="+b.la));const Gt=st[4];Gt!=null&&(b.Aa=Gt,b.j.info("SVER="+b.Aa));const Nr=st[5];Nr!=null&&typeof Nr=="number"&&0<Nr&&(C=1.5*Nr,b.L=C,b.j.info("backChannelRequestTimeoutMs_="+C)),C=b;const vr=h.g;if(vr){const Qo=vr.g?vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qo){var J=C.h;J.g||Qo.indexOf("spdy")==-1&&Qo.indexOf("quic")==-1&&Qo.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ac(J,J.h),J.h=null))}if(C.D){const tl=vr.g?vr.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(C.ya=tl,yt(C.I,C.D,tl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),C=b;var ue=h;if(C.qa=$d(C,C.J?C.ia:null,C.W),ue.K){Rd(C.h,ue);var dt=ue,en=C.L;en&&(dt.I=en),dt.B&&(Bo(dt),_t(dt)),C.g=ue}else Go(C);0<b.i.length&&ks(b)}else st[0]!="stop"&&st[0]!="close"||Gs(b,7);else b.G==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Gs(b,7):bn(b):st[0]!="noop"&&b.l&&b.l.ta(st),b.v=0)}}Ht(4)}catch{}}var Ad=class{constructor(h,v){this.g=h,this.map=v}};function $o(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Nd(h){return h.h?1:h.g?h.g.size:0}function Un(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Ac(h,v){h.g?h.g.add(v):h.h=v}function Rd(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}$o.prototype.cancel=function(){if(this.i=Pd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Pd(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const b of h.g.values())v=v.concat(b.D);return v}return I(h.i)}function $a(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],b=h.length,C=0;C<b;C++)v.push(h[C]);return v}v=[],b=0;for(C in h)v[b++]=h[C];return v}function Wa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var b=0;b<h;b++)v.push(b);return v}v=[],b=0;for(const C in h)v[b++]=C;return v}}}function Ci(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var b=Wa(h),C=$a(h),q=C.length,J=0;J<q;J++)v.call(void 0,C[J],b&&b[J],h)}var Wo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Op(h,v){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var C=h[b].indexOf("="),q=null;if(0<=C){var J=h[b].substring(0,C);q=h[b].substring(C+1)}else J=h[b];v(J,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Ws(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ws){this.h=h.h,qo(this,h.j),this.o=h.o,this.g=h.g,Ai(this,h.s),this.l=h.l;var v=h.i,b=new ws;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),Ni(this,b),this.m=h.m}else h&&(v=String(h).match(Wo))?(this.h=!1,qo(this,v[1]||"",!0),this.o=Ye(v[2]||""),this.g=Ye(v[3]||"",!0),Ai(this,v[4]),this.l=Ye(v[5]||"",!0),Ni(this,v[6]||"",!0),this.m=Ye(v[7]||"")):(this.h=!1,this.i=new ws(null,this.h))}Ws.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Pi(v,qa,!0),":");var b=this.g;return(b||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Pi(v,qa,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Pi(b,b.charAt(0)=="/"?Od:Dd,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Pi(b,Nc)),h.join("")};function gr(h){return new Ws(h)}function qo(h,v,b){h.j=b?Ye(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ai(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Ni(h,v,b){v instanceof ws?(h.i=v,bs(h.i,h.h)):(b||(v=Pi(v,Ld)),h.i=new ws(v,h.h))}function yt(h,v,b){h.i.set(v,b)}function Ri(h){return yt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ye(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Pi(h,v,b){return typeof h=="string"?(h=encodeURI(h).replace(v,jd),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function jd(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var qa=/[#\/\?@]/g,Dd=/[#\?:]/g,Od=/[#\?]/g,Ld=/[#\?@]/g,Nc=/#/g;function ws(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function wn(h){h.g||(h.g=new Map,h.h=0,h.i&&Op(h.i,function(v,b){h.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}t=ws.prototype,t.add=function(h,v){wn(this),this.i=null,h=Ar(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(v),this.h+=1,this};function Yr(h,v){wn(h),v=Ar(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Jr(h,v){return wn(h),v=Ar(h,v),h.g.has(v)}t.forEach=function(h,v){wn(this),this.g.forEach(function(b,C){b.forEach(function(q){h.call(v,q,C,this)},this)},this)},t.na=function(){wn(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let C=0;C<v.length;C++){const q=h[C];for(let J=0;J<q.length;J++)b.push(v[C])}return b},t.V=function(h){wn(this);let v=[];if(typeof h=="string")Jr(this,h)&&(v=v.concat(this.g.get(Ar(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)v=v.concat(h[b])}return v},t.set=function(h,v){return wn(this),this.i=null,h=Ar(this,h),Jr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function ji(h,v,b){Yr(h,v),0<b.length&&(h.i=null,h.g.set(Ar(h,v),I(b)),h.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var C=v[b];const J=encodeURIComponent(String(C)),ue=this.V(C);for(C=0;C<ue.length;C++){var q=J;ue[C]!==""&&(q+="="+encodeURIComponent(String(ue[C]))),h.push(q)}}return this.i=h.join("&")};function Ar(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function bs(h,v){v&&!h.j&&(wn(h),h.i=null,h.g.forEach(function(b,C){var q=C.toLowerCase();C!=q&&(Yr(this,C),ji(this,q,b))},h)),h.j=v}function Lp(h,v){const b=new _n;if(u.Image){const C=new Image;C.onload=E(tr,b,"TestLoadImage: loaded",!0,v,C),C.onerror=E(tr,b,"TestLoadImage: error",!1,v,C),C.onabort=E(tr,b,"TestLoadImage: abort",!1,v,C),C.ontimeout=E(tr,b,"TestLoadImage: timeout",!1,v,C),u.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else v(!1)}function Md(h,v){const b=new _n,C=new AbortController,q=setTimeout(()=>{C.abort(),tr(b,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:C.signal}).then(J=>{clearTimeout(q),J.ok?tr(b,"TestPingServer: ok",!0,v):tr(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),tr(b,"TestPingServer: error",!1,v)})}function tr(h,v,b,C,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),C(b)}catch{}}function Mp(){this.g=new Fo}function Vd(h,v,b){const C=b||"";try{Ci(h,function(q,J){let ue=q;m(q)&&(ue=$s(q)),v.push(C+J+"="+encodeURIComponent(ue))})}catch(q){throw v.push(C+"type="+encodeURIComponent("_badmap")),q}}function qs(h){this.l=h.Ub||null,this.j=h.eb||!1}N(qs,_s),qs.prototype.g=function(){return new Ho(this.l,this.j)},qs.prototype.i=(function(h){return function(){return h}})({});function Ho(h,v){Ut.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Ho,Ut),t=Ho.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,es(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||u).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fd(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fd(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Xr(this):es(this),this.readyState==3&&Fd(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Xr(this))},t.Qa=function(h){this.g&&(this.response=h,Xr(this))},t.ga=function(){this.g&&Xr(this)};function Xr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,es(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=v.next();return h.join(`\r
`)};function es(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Hs(h){let v="";return K(h,function(b,C){v+=C,v+=":",v+=b,v+=`\r
`}),v}function Di(h,v,b){e:{for(C in b){var C=!1;break e}C=!0}C||(b=Hs(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):yt(h,v,b))}function St(h){Ut.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(St,Ut);var Vp=/^https?$/i,Rc=["POST","PUT"];t=St.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,b,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qr.g(),this.v=this.o?Ti(this.o):Ti(Qr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){Ko(this,J);return}if(h=b||"",b=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var q in C)b.set(q,C[q]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const J of C.keys())b.set(J,C.get(J));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(b.keys()).find(J=>J.toLowerCase()=="content-type"),q=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Rc,v,void 0))||C||q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ue]of b)this.g.setRequestHeader(J,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ka(this),this.u=!0,this.g.send(h),this.u=!1}catch(J){Ko(this,J)}};function Ko(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Ha(h),yr(h)}function Ha(h){h.A||(h.A=!0,vt(h,"complete"),vt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,vt(this,"complete"),vt(this,"abort"),yr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yr(this,!0)),St.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pc(this):this.bb())},t.bb=function(){Pc(this)};function Pc(h){if(h.h&&typeof l<"u"&&(!h.v[1]||nr(h)!=4||h.Z()!=2)){if(h.u&&nr(h)==4)Hr(h.Ea,0,h);else if(vt(h,"readystatechange"),nr(h)==4){h.h=!1;try{const ue=h.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var C;if(C=ue===0){var q=String(h.D).match(Wo)[1]||null;!q&&u.self&&u.self.location&&(q=u.self.location.protocol.slice(0,-1)),C=!Vp.test(q?q.toLowerCase():"")}b=C}if(b)vt(h,"complete"),vt(h,"success");else{h.m=6;try{var J=2<nr(h)?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.Z()+"]",Ha(h)}}finally{yr(h)}}}}function yr(h,v){if(h.g){Ka(h);const b=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||vt(h,"ready");try{b.onreadystatechange=C}catch{}}}function Ka(h){h.I&&(u.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function nr(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Ei(v)}};function jc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ga(h){const v={};h=(h.g&&2<=nr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(W(h[C]))continue;var b=O(h[C]);const q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const J=v[q]||[];v[q]=J,J.push(b)}A(v,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(h,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||v}function Dc(h){this.Aa=0,this.i=[],this.j=new _n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xs("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xs("baseRetryDelayMs",5e3,h),this.cb=xs("retryDelaySeedMs",1e4,h),this.Wa=xs("forwardChannelMaxRetries",2,h),this.wa=xs("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new $o(h&&h.concurrentRequestLimit),this.Da=new Mp,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Dc.prototype,t.la=8,t.G=1,t.connect=function(h,v,b,C){qe(0),this.W=h,this.H=v||{},b&&C!==void 0&&(this.H.OSID=b,this.H.OAID=C),this.F=this.X,this.I=$d(this,null,this.W),ks(this)};function bn(h){if(Qa(h),h.G==3){var v=h.U++,b=gr(h.I);if(yt(b,"SID",h.K),yt(b,"RID",v),yt(b,"TYPE","terminate"),Ks(h,b),v=new Zr(h,h.j,v),v.L=2,v.v=Ri(gr(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&u.Image&&(new Image().src=v.v,b=!0),b||(v.g=Wd(v.j,null),v.g.ea(v.v)),v.F=Date.now(),_t(v)}Bd(h)}function ts(h){h.g&&(Oc(h),h.g.cancel(),h.g=null)}function Qa(h){ts(h),h.u&&(u.clearTimeout(h.u),h.u=null),Ja(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function ks(h){if(!mr(h.h)&&!h.s){h.s=!0;var v=h.Ga;Ne||de(),X||(Ne(),X=!0),pe.add(v,h),h.B=0}}function Fp(h,v){return Nd(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Mt(x(h.Ga,h,v),Ud(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new Zr(this,this.j,h);let J=this.o;if(this.S&&(J?(J=k(J),P(J,this.S)):J=this.S),this.m!==null||this.O||(q.H=J,J=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var C=this.i[b];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=Oi(this,q,v),b=gr(this.I),yt(b,"RID",h),yt(b,"CVER",22),this.D&&yt(b,"X-HTTP-Session-Id",this.D),Ks(this,b),J&&(this.O?v="headers="+encodeURIComponent(String(Hs(J)))+"&"+v:this.m&&Di(b,this.m,J)),Ac(this.h,q),this.Ua&&yt(b,"TYPE","init"),this.P?(yt(b,"$req",v),yt(b,"SID","null"),q.T=!0,Ba(q,b,null)):Ba(q,b,v),this.G=2}}else this.G==3&&(h?Za(this,h):this.i.length==0||mr(this.h)||Za(this))};function Za(h,v){var b;v?b=v.l:b=h.U++;const C=gr(h.I);yt(C,"SID",h.K),yt(C,"RID",b),yt(C,"AID",h.T),Ks(h,C),h.m&&h.o&&Di(C,h.m,h.o),b=new Zr(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Oi(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ac(h.h,b),Ba(b,C,v)}function Ks(h,v){h.H&&K(h.H,function(b,C){yt(v,C,b)}),h.l&&Ci({},function(b,C){yt(v,C,b)})}function Oi(h,v,b){b=Math.min(h.i.length,b);var C=h.l?x(h.l.Na,h.l,h):null;e:{var q=h.i;let J=-1;for(;;){const ue=["count="+b];J==-1?0<b?(J=q[0].g,ue.push("ofs="+J)):J=0:ue.push("ofs="+J);let dt=!0;for(let en=0;en<b;en++){let st=q[en].g;const ln=q[en].map;if(st-=J,0>st)J=Math.max(0,q[en].g-100),dt=!1;else try{Vd(ln,ue,"req"+st+"_")}catch{C&&C(ln)}}if(dt){C=ue.join("&");break e}}}return h=h.i.splice(0,b),v.D=h,C}function Go(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;Ne||de(),X||(Ne(),X=!0),pe.add(v,h),h.v=0}}function Ya(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Mt(x(h.Fa,h),Ud(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,zd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Mt(x(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qe(10),ts(this),zd(this))};function Oc(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function zd(h){h.g=new Zr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=gr(h.qa);yt(v,"RID","rpc"),yt(v,"SID",h.K),yt(v,"AID",h.T),yt(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&yt(v,"TO",h.ja),yt(v,"TYPE","xmlhttp"),Ks(h,v),h.m&&h.o&&Di(v,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=Ri(gr(v)),b.m=null,b.P=!0,Sc(b,h)}t.Za=function(){this.C!=null&&(this.C=null,ts(this),Ya(this),qe(19))};function Ja(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Xa(h,v){var b=null;if(h.g==v){Ja(h),Oc(h),h.g=null;var C=2}else if(Un(h.h,v))b=v.D,Rd(h.h,v),C=1;else return;if(h.G!=0){if(v.o)if(C==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;C=qt(),vt(C,new zn(C,b)),ks(h)}else Go(h);else if(q=v.s,q==3||q==0&&0<v.X||!(C==1&&Fp(h,v)||C==2&&Ya(h)))switch(b&&0<b.length&&(v=h.h,v.i=v.i.concat(b)),q){case 1:Gs(h,5);break;case 4:Gs(h,10);break;case 3:Gs(h,6);break;default:Gs(h,2)}}}function Ud(h,v){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*v}function Gs(h,v){if(h.j.info("Error code "+v),v==2){var b=x(h.fb,h),C=h.Xa;const q=!C;C=new Ws(C||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||qo(C,"https"),Ri(C),q?Lp(C.toString(),b):Md(C.toString(),b)}else qe(2);h.G=0,h.l&&h.l.sa(v),Bd(h),Qa(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function Bd(h){if(h.G=0,h.ka=[],h.l){const v=Pd(h.h);(v.length!=0||h.i.length!=0)&&(S(h.ka,v),S(h.ka,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.ra()}}function $d(h,v,b){var C=b instanceof Ws?gr(b):new Ws(b);if(C.g!="")v&&(C.g=v+"."+C.g),Ai(C,C.s);else{var q=u.location;C=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var J=new Ws(null);C&&qo(J,C),v&&(J.g=v),q&&Ai(J,q),b&&(J.l=b),C=J}return b=h.D,v=h.ya,b&&v&&yt(C,b,v),yt(C,"VER",h.la),Ks(h,C),C}function Wd(h,v,b){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new St(new qs({eb:b})):new St(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lc(){}t=Lc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function el(){}el.prototype.g=function(h,v){return new Bn(h,v)};function Bn(h,v){Ut.call(this),this.g=new Dc(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!W(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!W(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Es(this)}N(Bn,Ut),Bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){bn(this.g)},Bn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=$s(h),h=b);v.i.push(new Ad(v.Ya++,h)),v.G==3&&ks(v)},Bn.prototype.N=function(){this.g.l=null,delete this.j,bn(this.g),delete this.g,Bn.aa.N.call(this)};function qd(h){gt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const b in v){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}N(qd,gt);function Hd(){Wt.call(this),this.status=1}N(Hd,Wt);function Es(h){this.g=h}N(Es,Lc),Es.prototype.ua=function(){vt(this.g,"a")},Es.prototype.ta=function(h){vt(this.g,new qd(h))},Es.prototype.sa=function(h){vt(this.g,new Hd)},Es.prototype.ra=function(){vt(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,zE=function(){return new el},FE=function(){return qt()},VE=It,ny={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},za.NO_ERROR=0,za.TIMEOUT=8,za.HTTP_ERROR=6,ff=za,Td.COMPLETE="complete",ME=Td,Ii.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,fu=Ii,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,LE=St}).apply(typeof $h<"u"?$h:typeof self<"u"?self:typeof window<"u"?window:{});const Tb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new Uy("@firebase/firestore");function au(){return Ca.logLevel}function ke(t,...e){if(Ca.logLevel<=tt.DEBUG){const n=e.map(Xy);Ca.debug(`Firestore (${fc}): ${t}`,...n)}}function gi(t,...e){if(Ca.logLevel<=tt.ERROR){const n=e.map(Xy);Ca.error(`Firestore (${fc}): ${t}`,...n)}}function Yl(t,...e){if(Ca.logLevel<=tt.WARN){const n=e.map(Xy);Ca.warn(`Firestore (${fc}): ${t}`,...n)}}function Xy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t="Unexpected state"){const e=`FIRESTORE (${fc}) INTERNAL ASSERTION FAILED: `+t;throw gi(e),new Error(e)}function ht(t,e){t||ze()}function $e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends _i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Mn.UNAUTHENTICATED)))}shutdown(){}}class FP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class zP{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ht(this.o===void 0);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new bo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new bo,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new bo)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht(typeof r.accessToken=="string"),new UE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string"),new Mn(e)}}class UP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class BP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new UP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $P{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ht(this.o===void 0);const r=o=>{o.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ht(typeof n.token=="string"),this.R=n.token,new $P(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=qP(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%e.length))}return r}}function ct(t,e){return t<e?-1:t>e?1:0}function Jl(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Tt(0,0))}static max(){return new Be(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r){n===void 0?n=0:n>e.length&&ze(),r===void 0?r=e.length-n:r>e.length-n&&ze(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vu?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=e.get(s),l=n.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Et extends Vu{construct(e,n,r){return new Et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Et(n)}static emptyPath(){return new Et([])}}const HP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Vu{construct(e,n,r){return new In(e,n,r)}static isValidIdentifier(e){return HP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new In(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(n)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(Et.fromString(e))}static fromName(e){return new Ae(Et.fromString(e).popFirst(5))}static empty(){return new Ae(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new Et(e.slice()))}}function KP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Be.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new Eo(s,Ae.empty(),e)}function GP(t){return new Eo(t.readTime,t.key,-1)}class Eo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Eo(Be.min(),Ae.empty(),-1)}static max(){return new Eo(Be.max(),Ae.empty(),-1)}}function QP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dd(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==ZP)throw t;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,r)=>{n(e)}))}static reject(e){return new oe(((n,r)=>{r(e)}))}static waitFor(e){return new oe(((n,r)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&n()}),(d=>r(d)))})),l=!0,o===s&&n()}))}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next((s=>s?oe.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,o)=>{r.push(n.call(this,s,o))})),this.waitFor(r)}static mapArray(e,n){return new oe(((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next((y=>{l[m]=y,++u,u===o&&r(l)}),(y=>s(y)))}}))}static doWhile(e,n){return new oe(((r,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):r()};o()}))}}function JP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}e0.oe=-1;function cp(t){return t==null}function Of(t){return t===0&&1/t==-1/0}function XP(t){return typeof t=="number"&&Number.isInteger(t)&&!Of(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ja(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $E(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new Dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wh(this.root,e,this.comparator,!0)}}class Wh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??En.RED,this.left=s??En.EMPTY,this.right=o??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new En(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return En.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ze();const e=this.left.check();if(e!==this.right.check())throw ze();return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw ze()}get value(){throw ze()}get color(){throw ze()}get left(){throw ze()}get right(){throw ze()}copy(e,n,r,s,o){return this}insert(e,n,r){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sb(this.data.getIterator())}getIteratorFrom(e){return new Sb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Sn(this.comparator);return n.data=e,n}}class Sb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new xr([])}unionWith(e){let n=new Sn(In.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new WE("Invalid base64 string: "+o):o}})(e);return new Cn(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new Cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const ej=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(t){if(ht(!!t),typeof t=="string"){let e=0;const n=ej.exec(t);if(ht(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$t(t.seconds),nanos:$t(t.nanos)}}function $t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Aa(t){return typeof t=="string"?Cn.fromBase64String(t):Cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function n0(t){const e=t.mapValue.fields.__previous_value__;return t0(e)?n0(e):e}function Fu(t){const e=To(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n,r,s,o,l,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=m}}class zu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new zu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh={mapValue:{}};function Na(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?t0(t)?4:rj(t)?9007199254740991:nj(t)?10:11:ze()}function Vs(t,e){if(t===e)return!0;const n=Na(t);if(n!==Na(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=To(s.timestampValue),u=To(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return Aa(s.bytesValue).isEqual(Aa(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return $t(s.geoPointValue.latitude)===$t(o.geoPointValue.latitude)&&$t(s.geoPointValue.longitude)===$t(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return $t(s.integerValue)===$t(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=$t(s.doubleValue),u=$t(o.doubleValue);return l===u?Of(l)===Of(u):isNaN(l)&&isNaN(u)}return!1})(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],Vs);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Ib(l)!==Ib(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Vs(l[d],u[d])))return!1;return!0})(t,e);default:return ze()}}function Uu(t,e){return(t.values||[]).find((n=>Vs(n,e)))!==void 0}function Xl(t,e){if(t===e)return 0;const n=Na(t),r=Na(e);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=$t(o.integerValue||o.doubleValue),d=$t(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(t,e);case 3:return Cb(t.timestampValue,e.timestampValue);case 4:return Cb(Fu(t),Fu(e));case 5:return ct(t.stringValue,e.stringValue);case 6:return(function(o,l){const u=Aa(o),d=Aa(l);return u.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let m=0;m<u.length&&m<d.length;m++){const y=ct(u[m],d[m]);if(y!==0)return y}return ct(u.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=ct($t(o.latitude),$t(l.latitude));return u!==0?u:ct($t(o.longitude),$t(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Ab(t.arrayValue,e.arrayValue);case 10:return(function(o,l){var u,d,m,y;const w=o.fields||{},x=l.fields||{},E=(u=w.value)===null||u===void 0?void 0:u.arrayValue,N=(d=x.value)===null||d===void 0?void 0:d.arrayValue,I=ct(((m=E==null?void 0:E.values)===null||m===void 0?void 0:m.length)||0,((y=N==null?void 0:N.values)===null||y===void 0?void 0:y.length)||0);return I!==0?I:Ab(E,N)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===qh.mapValue&&l===qh.mapValue)return 0;if(o===qh.mapValue)return 1;if(l===qh.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),m=l.fields||{},y=Object.keys(m);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const x=ct(d[w],y[w]);if(x!==0)return x;const E=Xl(u[d[w]],m[y[w]]);if(E!==0)return E}return ct(d.length,y.length)})(t.mapValue,e.mapValue);default:throw ze()}}function Cb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ct(t,e);const n=To(t),r=To(e),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Ab(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Xl(n[s],r[s]);if(o)return o}return ct(n.length,r.length)}function ec(t){return ry(t)}function ry(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=To(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Aa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ae.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=ry(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${ry(n.fields[l])}`;return s+"}"})(t.mapValue):ze()}function Nb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sy(t){return!!t&&"integerValue"in t}function r0(t){return!!t&&"arrayValue"in t}function Rb(t){return!!t&&"nullValue"in t}function Pb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pf(t){return!!t&&"mapValue"in t}function nj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ku(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ja(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ku(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ku(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(n)}setAll(e){let n=In.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=ku(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());pf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ja(n,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new dr(ku(this.value))}}function qE(t){const e=[];return ja(t.fields,((n,r)=>{const s=new In([n]);if(pf(r)){const o=qE(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new xr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n,r,s,o,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Vn(e,0,Be.min(),Be.min(),Be.min(),dr.empty(),0)}static newFoundDocument(e,n,r,s){return new Vn(e,1,n,Be.min(),r,s,0)}static newNoDocument(e,n){return new Vn(e,2,n,Be.min(),Be.min(),dr.empty(),0)}static newUnknownDocument(e,n){return new Vn(e,3,n,Be.min(),Be.min(),dr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n){this.position=e,this.inclusive=n}}function jb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=Ae.comparator(Ae.fromName(l.referenceValue),n.key):r=Xl(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Db(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n="asc"){this.field=e,this.dir=n}}function sj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{}class Yt extends HE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new oj(e,n,r):n==="array-contains"?new cj(e,r):n==="in"?new uj(e,r):n==="not-in"?new dj(e,r):n==="array-contains-any"?new hj(e,r):new Yt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new aj(e,r):new lj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Xl(n,this.value)):n!==null&&Na(this.value)===Na(n)&&this.matchesComparison(Xl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends HE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ps(e,n)}matches(e){return KE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function KE(t){return t.op==="and"}function GE(t){return ij(t)&&KE(t)}function ij(t){for(const e of t.filters)if(e instanceof ps)return!1;return!0}function iy(t){if(t instanceof Yt)return t.field.canonicalString()+t.op.toString()+ec(t.value);if(GE(t))return t.filters.map((e=>iy(e))).join(",");{const e=t.filters.map((n=>iy(n))).join(",");return`${t.op}(${e})`}}function QE(t,e){return t instanceof Yt?(function(r,s){return s instanceof Yt&&r.op===s.op&&r.field.isEqual(s.field)&&Vs(r.value,s.value)})(t,e):t instanceof ps?(function(r,s){return s instanceof ps&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,u)=>o&&QE(l,s.filters[u])),!0):!1})(t,e):void ze()}function ZE(t){return t instanceof Yt?(function(n){return`${n.field.canonicalString()} ${n.op} ${ec(n.value)}`})(t):t instanceof ps?(function(n){return n.op.toString()+" {"+n.getFilters().map(ZE).join(" ,")+"}"})(t):"Filter"}class oj extends Yt{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class aj extends Yt{constructor(e,n){super(e,"in",n),this.keys=YE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class lj extends Yt{constructor(e,n){super(e,"not-in",n),this.keys=YE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function YE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>Ae.fromName(r.referenceValue)))}class cj extends Yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return r0(n)&&Uu(n.arrayValue,this.value)}}class uj extends Yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uu(this.value.arrayValue,n)}}class dj extends Yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uu(this.value.arrayValue,n)}}class hj extends Yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!r0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Uu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.ue=null}}function Ob(t,e=null,n=[],r=[],s=null,o=null,l=null){return new fj(t,e,n,r,s,o,l)}function s0(t){const e=$e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>iy(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),cp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ec(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ec(r))).join(",")),e.ue=n}return e.ue}function i0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Db(t.startAt,e.startAt)&&Db(t.endAt,e.endAt)}function oy(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function pj(t,e,n,r,s,o,l,u){return new pc(t,e,n,r,s,o,l,u)}function o0(t){return new pc(t)}function Lb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function JE(t){return t.collectionGroup!==null}function Eu(t){const e=$e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Sn(In.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(u=u.add(m.field))}))})),u})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Bu(o,r))})),n.has(In.keyField().canonicalString())||e.ce.push(new Bu(In.keyField(),r))}return e.ce}function Os(t){const e=$e(t);return e.le||(e.le=mj(e,Eu(t))),e.le}function mj(t,e){if(t.limitType==="F")return Ob(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Bu(s.field,o)}));const n=t.endAt?new Lf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lf(t.startAt.position,t.startAt.inclusive):null;return Ob(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ay(t,e){const n=t.filters.concat([e]);return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mf(t,e,n){return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function up(t,e){return i0(Os(t),Os(e))&&t.limitType===e.limitType}function XE(t){return`${s0(Os(t))}|lt:${t.limitType}`}function El(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>ZE(s))).join(", ")}]`),cp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>ec(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>ec(s))).join(",")),`Target(${r})`})(Os(t))}; limitType=${t.limitType})`}function dp(t,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,s){for(const o of Eu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const m=jb(l,u,d);return l.inclusive?m<=0:m<0})(r.startAt,Eu(r),s)||r.endAt&&!(function(l,u,d){const m=jb(l,u,d);return l.inclusive?m>=0:m>0})(r.endAt,Eu(r),s))})(t,e)}function gj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eT(t){return(e,n)=>{let r=!1;for(const s of Eu(t)){const o=yj(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function yj(t,e,n){const r=t.field.isKeyField()?Ae.comparator(e.key,n.key):(function(o,l,u){const d=l.data.field(o),m=u.data.field(o);return d!==null&&m!==null?Xl(d,m):ze()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ze()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,((n,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return $E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=new Dt(Ae.comparator);function yi(){return vj}const tT=new Dt(Ae.comparator);function pu(...t){let e=tT;for(const n of t)e=e.insert(n.key,n);return e}function nT(t){let e=tT;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function fa(){return Tu()}function rT(){return Tu()}function Tu(){return new mc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const _j=new Dt(Ae.comparator),wj=new Sn(Ae.comparator);function Ze(...t){let e=wj;for(const n of t)e=e.add(n);return e}const bj=new Sn(ct);function xj(){return bj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Of(e)?"-0":e}}function sT(t){return{integerValue:""+t}}function kj(t,e){return XP(e)?sT(e):a0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this._=void 0}}function Ej(t,e,n){return t instanceof $u?(function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&t0(o)&&(o=n0(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}})(n,e):t instanceof Wu?oT(t,e):t instanceof qu?aT(t,e):(function(s,o){const l=iT(s,o),u=Mb(l)+Mb(s.Pe);return sy(l)&&sy(s.Pe)?sT(u):a0(s.serializer,u)})(t,e)}function Tj(t,e,n){return t instanceof Wu?oT(t,e):t instanceof qu?aT(t,e):n}function iT(t,e){return t instanceof Vf?(function(r){return sy(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class $u extends hp{}class Wu extends hp{constructor(e){super(),this.elements=e}}function oT(t,e){const n=lT(e);for(const r of t.elements)n.some((s=>Vs(s,r)))||n.push(r);return{arrayValue:{values:n}}}class qu extends hp{constructor(e){super(),this.elements=e}}function aT(t,e){let n=lT(e);for(const r of t.elements)n=n.filter((s=>!Vs(s,r)));return{arrayValue:{values:n}}}class Vf extends hp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Mb(t){return $t(t.integerValue||t.doubleValue)}function lT(t){return r0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,n){this.field=e,this.transform=n}}function Sj(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Wu&&s instanceof Wu||r instanceof qu&&s instanceof qu?Jl(r.elements,s.elements,Vs):r instanceof Vf&&s instanceof Vf?Vs(r.Pe,s.Pe):r instanceof $u&&s instanceof $u})(t.transform,e.transform)}class Cj{constructor(e,n){this.version=e,this.transformResults=n}}class Gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fp{}function cT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pp(t.key,Gn.none()):new fd(t.key,t.data,Gn.none());{const n=t.data,r=dr.empty();let s=new Sn(In.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new No(t.key,r,new xr(s.toArray()),Gn.none())}}function Aj(t,e,n){t instanceof fd?(function(s,o,l){const u=s.value.clone(),d=Fb(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,n):t instanceof No?(function(s,o,l){if(!mf(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=Fb(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(uT(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Iu(t,e,n,r){return t instanceof fd?(function(o,l,u,d){if(!mf(o.precondition,l))return u;const m=o.value.clone(),y=zb(o.fieldTransforms,d,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(t,e,n,r):t instanceof No?(function(o,l,u,d){if(!mf(o.precondition,l))return u;const m=zb(o.fieldTransforms,d,l),y=l.data;return y.setAll(uT(o)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((w=>w.field)))})(t,e,n,r):(function(o,l,u){return mf(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(t,e,n)}function Nj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=iT(r.transform,s||null);o!=null&&(n===null&&(n=dr.empty()),n.set(r.field,o))}return n||null}function Vb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Jl(r,s,((o,l)=>Sj(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fd extends fp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class No extends fp{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function uT(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Fb(t,e,n){const r=new Map;ht(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,Tj(l,u,n[s]))}return r}function zb(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,Ej(o,l,e))}return r}class pp extends fp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rj extends fp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Aj(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Iu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Iu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rT();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=n.has(s.key)?null:u;const d=cT(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Be.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((n,r)=>Vb(n,r)))&&Jl(this.baseMutations,e.baseMutations,((n,r)=>Vb(n,r)))}}class l0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ht(e.mutations.length===r.length);let s=(function(){return _j})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new l0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,it;function Oj(t){switch(t){default:return ze();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function dT(t){if(t===void 0)return gi("GRPC error has no .code"),re.UNKNOWN;switch(t){case Zt.OK:return re.OK;case Zt.CANCELLED:return re.CANCELLED;case Zt.UNKNOWN:return re.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return re.INTERNAL;case Zt.UNAVAILABLE:return re.UNAVAILABLE;case Zt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Zt.NOT_FOUND:return re.NOT_FOUND;case Zt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Zt.ABORTED:return re.ABORTED;case Zt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Zt.DATA_LOSS:return re.DATA_LOSS;default:return ze()}}(it=Zt||(Zt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=new ka([4294967295,4294967295],0);function Ub(t){const e=Lj().encode(t),n=new OE;return n.update(e),new Uint8Array(n.digest())}function Bb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ka([n,r],0),new ka([s,o],0)]}class c0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mu(`Invalid padding: ${n}`);if(r<0)throw new mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ka.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ka.fromNumber(r)));return s.compare(Mj)===1&&(s=new ka([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ub(e),[r,s]=Bb(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);if(!this.de(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new c0(o,s,n);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.Ie===0)return;const n=Ub(e),[r,s]=Bb(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mp(Be.min(),s,new Dt(ct),yi(),Ze())}}class pd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pd(r,n,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class hT{constructor(e,n){this.targetId=e,this.me=n}}class fT{constructor(e,n,r=Cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class $b{constructor(){this.fe=0,this.ge=qb(),this.pe=Cn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ze(),n=Ze(),r=Ze();return this.ge.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ze()}})),new pd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=qb()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ht(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Vj{constructor(e){this.Le=e,this.Be=new Map,this.ke=yi(),this.qe=Wb(),this.Qe=new Dt(ct)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ze()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,s)=>{this.ze(s)&&n(s)}))}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const o=s.target;if(oy(o))if(r===0){const l=new Ae(o.path);this.Ue(n,l,Vn.newNoDocument(l,Be.min()))}else ht(r===1);else{const l=this.Ye(n);if(l!==r){const u=this.Ze(e),d=u?this.Xe(u,e,l):1;if(d!==0){this.je(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,u;try{l=Aa(r).toUint8Array()}catch(d){if(d instanceof WE)return Yl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new c0(l,s,o)}catch(d){return Yl(d instanceof mu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach((o=>{const l=this.Le.tt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),s++)})),s}rt(e){const n=new Map;this.Be.forEach(((o,l)=>{const u=this.Je(l);if(u){if(o.current&&oy(u.target)){const d=new Ae(u.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Vn.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}}));let r=Ze();this.qe.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const m=this.Je(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.ke.forEach(((o,l)=>l.setReadTime(e)));const s=new mp(e,n,this.Qe,this.ke,r);return this.ke=yi(),this.qe=Wb(),this.Qe=new Dt(ct),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new $b,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Sn(ct),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $b),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Wb(){return new Dt(Ae.comparator)}function qb(){return new Dt(Ae.comparator)}const Fj={asc:"ASCENDING",desc:"DESCENDING"},zj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uj={and:"AND",or:"OR"};class Bj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ly(t,e){return t.useProto3Json||cp(e)?e:{value:e}}function Ff(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $j(t,e){return Ff(t,e.toTimestamp())}function Ls(t){return ht(!!t),Be.fromTimestamp((function(n){const r=To(n);return new Tt(r.seconds,r.nanos)})(t))}function u0(t,e){return cy(t,e).canonicalString()}function cy(t,e){const n=(function(s){return new Et(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function mT(t){const e=Et.fromString(t);return ht(wT(e)),e}function uy(t,e){return u0(t.databaseId,e.path)}function xg(t,e){const n=mT(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(yT(n))}function gT(t,e){return u0(t.databaseId,e)}function Wj(t){const e=mT(t);return e.length===4?Et.emptyPath():yT(e)}function dy(t){return new Et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yT(t){return ht(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Hb(t,e,n){return{name:uy(t,e),fields:n.value.mapValue.fields}}function qj(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ze()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(m,y){return m.useProto3Json?(ht(y===void 0||typeof y=="string"),Cn.fromBase64String(y||"")):(ht(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Cn.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(m){const y=m.code===void 0?re.UNKNOWN:dT(m.code);return new ge(y,m.message||"")})(l);n=new fT(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xg(t,r.document.name),o=Ls(r.document.updateTime),l=r.document.createTime?Ls(r.document.createTime):Be.min(),u=new dr({mapValue:{fields:r.document.fields}}),d=Vn.newFoundDocument(s,o,l,u),m=r.targetIds||[],y=r.removedTargetIds||[];n=new gf(m,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xg(t,r.document),o=r.readTime?Ls(r.readTime):Be.min(),l=Vn.newNoDocument(s,o),u=r.removedTargetIds||[];n=new gf([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xg(t,r.document),o=r.removedTargetIds||[];n=new gf([],o,s,null)}else{if(!("filter"in e))return ze();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new Dj(s,o),u=r.targetId;n=new hT(u,l)}}return n}function Hj(t,e){let n;if(e instanceof fd)n={update:Hb(t,e.key,e.value)};else if(e instanceof pp)n={delete:uy(t,e.key)};else if(e instanceof No)n={update:Hb(t,e.key,e.data),updateMask:tD(e.fieldMask)};else{if(!(e instanceof Rj))return ze();n={verify:uy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof $u)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Wu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof qu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Vf)return{fieldPath:l.field.canonicalString(),increment:u.Pe};throw ze()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:$j(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ze()})(t,e.precondition)),n}function Kj(t,e){return t&&t.length>0?(ht(e!==void 0),t.map((n=>(function(s,o){let l=s.updateTime?Ls(s.updateTime):Ls(o);return l.isEqual(Be.min())&&(l=Ls(o)),new Cj(l,s.transformResults||[])})(n,e)))):[]}function Gj(t,e){return{documents:[gT(t,e.path)]}}function Qj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gT(t,s);const o=(function(m){if(m.length!==0)return _T(ps.create(m,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(m){if(m.length!==0)return m.map((y=>(function(x){return{field:Tl(x.field),direction:Jj(x.dir)}})(y)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=ly(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:n,parent:s}}function Zj(t){let e=Wj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ht(r===1);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=(function(w){const x=vT(w);return x instanceof ps&&GE(x)?x.getFilters():[x]})(n.where));let l=[];n.orderBy&&(l=(function(w){return w.map((x=>(function(N){return new Bu(Il(N.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(x)))})(n.orderBy));let u=null;n.limit&&(u=(function(w){let x;return x=typeof w=="object"?w.value:w,cp(x)?null:x})(n.limit));let d=null;n.startAt&&(d=(function(w){const x=!!w.before,E=w.values||[];return new Lf(E,x)})(n.startAt));let m=null;return n.endAt&&(m=(function(w){const x=!w.before,E=w.values||[];return new Lf(E,x)})(n.endAt)),pj(e,s,l,o,u,"F",d,m)}function Yj(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Il(n.unaryFilter.field);return Yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Il(n.unaryFilter.field);return Yt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Il(n.unaryFilter.field);return Yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Il(n.unaryFilter.field);return Yt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ze()}})(t):t.fieldFilter!==void 0?(function(n){return Yt.create(Il(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ze()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ps.create(n.compositeFilter.filters.map((r=>vT(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ze()}})(n.compositeFilter.op))})(t):ze()}function Jj(t){return Fj[t]}function Xj(t){return zj[t]}function eD(t){return Uj[t]}function Tl(t){return{fieldPath:t.canonicalString()}}function Il(t){return In.fromServerFormat(t.fieldPath)}function _T(t){return t instanceof Yt?(function(n){if(n.op==="=="){if(Pb(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NAN"}};if(Rb(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pb(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NOT_NAN"}};if(Rb(n.value))return{unaryFilter:{field:Tl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(n.field),op:Xj(n.op),value:n.value}}})(t):t instanceof ps?(function(n){const r=n.getFilters().map((s=>_T(s)));return r.length===1?r[0]:{compositeFilter:{op:eD(n.op),filters:r}}})(t):ze()}function tD(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function wT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n,r,s,o=Be.min(),l=Be.min(),u=Cn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new mo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.ct=e}}function rD(t){const e=Zj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.un=new iD}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(Eo.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(Eo.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class iD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Sn(Et.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Sn(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new tc(0)}static kn(){return new tc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.changes=new mc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Iu(r.mutation,s,xr.empty(),Tt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ze()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ze()){const s=fa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((o=>{let l=pu();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=fa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ze())))}populateOverlays(e,n,r){const s=[];return r.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{n.set(l,u)}))}))}computeViews(e,n,r,s){let o=yi();const l=Tu(),u=(function(){return Tu()})();return n.forEach(((d,m)=>{const y=r.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof No)?o=o.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),Iu(y.mutation,m,y.mutation.getFieldMask(),Tt.now())):l.set(m.key,xr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((m,y)=>l.set(m,y))),n.forEach(((m,y)=>{var w;return u.set(m,new aD(y,(w=l.get(m))!==null&&w!==void 0?w:null))})),u)))}recalculateAndSaveOverlays(e,n){const r=Tu();let s=new Dt(((l,u)=>l-u)),o=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const u of l)u.keys().forEach((d=>{const m=n.get(d);if(m===null)return;let y=r.get(d)||xr.empty();y=u.applyToLocalView(m,y),r.set(d,y);const w=(s.get(u.batchId)||Ze()).add(d);s=s.insert(u.batchId,w)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),m=d.key,y=d.value,w=rT();y.forEach((x=>{if(!o.has(x)){const E=cT(n.get(x),r.get(x));E!==null&&w.set(x,E),o=o.add(x)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,w))}return oe.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(l){return Ae.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):JE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):oe.resolve(fa());let u=-1,d=o;return l.next((m=>oe.forEach(m,((y,w)=>(u<w.largestBatchId&&(u=w.largestBatchId),o.get(y)?oe.resolve():this.remoteDocumentCache.getEntry(e,y).next((x=>{d=d.insert(y,x)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,d,m,Ze()))).next((y=>({batchId:u,changes:nT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next((r=>{let s=pu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=pu();return this.indexManager.getCollectionParents(e,o).next((u=>oe.forEach(u,(d=>{const m=(function(w,x){return new pc(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((y=>{y.forEach(((w,x)=>{l=l.insert(w,x)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s)))).next((l=>{o.forEach(((d,m)=>{const y=m.getKey();l.get(y)===null&&(l=l.insert(y,Vn.newInvalidDocument(y)))}));let u=pu();return l.forEach(((d,m)=>{const y=o.get(d);y!==void 0&&Iu(y.mutation,m,xr.empty(),Tt.now()),dp(n,m)&&(u=u.insert(d,m))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ls(s.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(s){return{name:s.name,query:rD(s.bundledQuery),readTime:Ls(s.readTime)}})(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this.overlays=new Dt(Ae.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fa();return oe.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,o)=>{this.ht(e,n,o)})),oe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const s=fa(),o=n.length+1,l=new Ae(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Dt(((m,y)=>m-y));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=o.get(m.largestBatchId);y===null&&(y=fa(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const u=fa(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,y)=>u.set(m,y))),!(u.size()>=s)););return oe.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new jj(n,r));let o=this.Ir.get(n);o===void 0&&(o=Ze(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.Tr=new Sn(fn.Er),this.dr=new Sn(fn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new fn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new fn(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new Ae(new Et([])),r=new fn(n,e),s=new fn(n,e+1),o=[];return this.dr.forEachInRange([r,s],(l=>{this.Vr(l),o.push(l.key)})),o}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ae(new Et([])),r=new fn(n,e),s=new fn(n,e+1);let o=Ze();return this.dr.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new fn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ae.comparator(e.key,n.key)||ct(e.wr,n.wr)}static Ar(e,n){return ct(e.wr,n.wr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Sn(fn.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Pj(o,n,r,s);this.mutationQueue.push(l);for(const u of s)this.br=this.br.add(new fn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),o=s<0?0:s;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fn(n,0),s=new fn(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,s],(l=>{const u=this.Dr(l.wr);o.push(u)})),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Sn(ct);return n.forEach((s=>{const o=new fn(s,0),l=new fn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],(u=>{r=r.add(u.wr)}))})),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Ae.isDocumentKey(o)||(o=o.child(""));const l=new fn(new Ae(o),0);let u=new Sn(ct);return this.br.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(u=u.add(d.wr)),!0)}),l),oe.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){ht(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(n.mutations,(s=>{const o=new fn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new fn(n,0),s=this.br.firstAfterOrEqual(r);return oe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.Mr=e,this.docs=(function(){return new Dt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(n))}getEntries(e,n){let r=yi();return n.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Vn.newInvalidDocument(s))})),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=yi();const l=n.path,u=new Ae(l.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:y}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||QP(GP(y),r)<=0||(s.has(y.key)||dp(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,n,r,s){ze()}Or(e,n){return oe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new pD(this)}getSize(e){return oe.resolve(this.size)}}class pD extends oD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.persistence=e,this.Nr=new mc((n=>s0(n)),i0),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new d0,this.targetCount=0,this.kr=tc.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,s)=>n(s))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new tc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.Nr.forEach(((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),oe.waitFor(o).next((()=>s))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new e0(0),this.Kr=!1,this.Kr=!0,this.$r=new dD,this.referenceDelegate=e(this),this.Ur=new mD(this),this.indexManager=new sD,this.remoteDocumentCache=(function(s){return new fD(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new nD(n),this.Gr=new cD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new hD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const s=new yD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((o=>this.referenceDelegate.jr(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Hr(e,n){return oe.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class yD extends YP{constructor(e){super(),this.currentSequenceNumber=e}}class h0{constructor(e){this.persistence=e,this.Jr=new d0,this.Yr=null}static Zr(e){return new h0(e)}get Xr(){if(this.Yr)return this.Yr;throw ze()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.Xr.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,(r=>{const s=Ae.fromPath(r);return this.ei(e,s).next((o=>{o||n.removeEntry(s,Be.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ze(),s=Ze();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new f0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return t2()?8:JP(Fn())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.Yi(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.Zi(e,n,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new vD;return this.Xi(e,n,l).next((u=>{if(o.result=u,this.zi)return this.es(e,n,l,u.size)}))})).next((()=>o.result))}es(e,n,r,s){return r.documentReadCount<this.ji?(au()<=tt.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",El(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(au()<=tt.DEBUG&&ke("QueryEngine","Query:",El(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(au()<=tt.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",El(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Os(n))):oe.resolve())}Yi(e,n){if(Lb(n))return oe.resolve(null);let r=Os(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Mf(n,null,"F"),r=Os(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Ze(...o);return this.Ji.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.ts(n,u);return this.ns(n,m,l,d.readTime)?this.Yi(e,Mf(n,null,"F")):this.rs(e,m,n,d)}))))})))))}Zi(e,n,r,s){return Lb(n)||s.isEqual(Be.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next((o=>{const l=this.ts(n,o);return this.ns(n,l,r,s)?oe.resolve(null):(au()<=tt.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),El(n)),this.rs(e,l,n,KP(s,-1)).next((u=>u)))}))}ts(e,n){let r=new Sn(eT(e));return n.forEach(((s,o)=>{dp(e,o)&&(r=r.add(o))})),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,r){return au()<=tt.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",El(n)),this.Ji.getDocumentsMatchingQuery(e,n,Eo.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Dt(ct),this._s=new mc((o=>s0(o)),i0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function bD(t,e,n,r){return new wD(t,e,n,r)}async function bT(t,e){const n=$e(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let d=Ze();for(const m of s){l.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}for(const m of o){u.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(r,d).next((m=>({hs:m,removedBatchIds:l,addedBatchIds:u})))}))}))}function xD(t,e){const n=$e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return(function(u,d,m,y){const w=m.batch,x=w.keys();let E=oe.resolve();return x.forEach((N=>{E=E.next((()=>y.getEntry(d,N))).next((I=>{const S=m.docVersions.get(N);ht(S!==null),I.version.compareTo(S)<0&&(w.applyToRemoteDocument(I,m),I.isValidDocument()&&(I.setReadTime(m.commitVersion),y.addEntry(I)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(d,w)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=Ze();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(d=d.add(u.batch.mutations[m].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function xT(t){const e=$e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function kD(t,e){const n=$e(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach(((y,w)=>{const x=s.get(w);if(!x)return;u.push(n.Ur.removeMatchingKeys(o,y.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(o,y.addedDocuments,w))));let E=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?E=E.withResumeToken(Cn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):y.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(y.resumeToken,r)),s=s.insert(w,E),(function(I,S,V){return I.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(x,E,y)&&u.push(n.Ur.updateTargetData(o,E))}));let d=yi(),m=Ze();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))})),u.push(ED(o,l,e.documentUpdates).next((y=>{d=y.Ps,m=y.Is}))),!r.isEqual(Be.min())){const y=n.Ur.getLastRemoteSnapshotVersion(o).next((w=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(y)}return oe.waitFor(u).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,m))).next((()=>d))})).then((o=>(n.os=s,o)))}function ED(t,e,n){let r=Ze(),s=Ze();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let l=yi();return n.forEach(((u,d)=>{const m=o.get(u);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Be.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):ke("LocalStore","Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",d.version)})),{Ps:l,Is:s}}))}function TD(t,e){const n=$e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function ID(t,e){const n=$e(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Ur.getTargetData(r,e).next((o=>o?(s=o,oe.resolve(s)):n.Ur.allocateTargetId(r).next((l=>(s=new mo(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function hy(t,e,n){const r=$e(t),s=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!hd(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Kb(t,e,n){const r=$e(t);let s=Be.min(),o=Ze();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,m,y){const w=$e(d),x=w._s.get(y);return x!==void 0?oe.resolve(w.os.get(x)):w.Ur.getTargetData(m,y)})(r,l,Os(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,n?s:Be.min(),n?o:Ze()))).next((u=>(SD(r,gj(e),u),{documents:u,Ts:o})))))}function SD(t,e,n){let r=t.us.get(e)||Be.min();n.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.us.set(e,r)}class Gb{constructor(){this.activeTargetIds=xj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CD{constructor(){this.so=new Gb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Gb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh=null;function kg(){return Hh===null?Hh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hh++,"0x"+Hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="WebChannelConnection";class PD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,r,s,o,l){const u=kg(),d=this.xo(n,r.toUriEncodedString());ke("RestConnection",`Sending RPC '${n}' ${u}:`,d,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,l),this.No(n,d,m,s).then((y=>(ke("RestConnection",`Received RPC '${n}' ${u}: `,y),y)),(y=>{throw Yl("RestConnection",`RPC '${n}' ${u} failed with error: `,y,"url: ",d,"request:",s),y}))}Lo(n,r,s,o,l,u){return this.Mo(n,r,s,o,l)}Oo(n,r,s){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fc})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((o,l)=>n[l]=o)),s&&s.headers.forEach(((o,l)=>n[l]=o))}xo(n,r){const s=ND[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const o=kg();return new Promise(((l,u)=>{const d=new LE;d.setWithCredentials(!0),d.listenOnce(ME.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case ff.NO_ERROR:const y=d.getResponseJson();ke(Ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),l(y);break;case ff.TIMEOUT:ke(Ln,`RPC '${e}' ${o} timed out`),u(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case ff.HTTP_ERROR:const w=d.getStatus();if(ke(Ln,`RPC '${e}' ${o} failed with status:`,w,"response text:",d.getResponseText()),w>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const E=x==null?void 0:x.error;if(E&&E.status&&E.message){const N=(function(S){const V=S.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(V)>=0?V:re.UNKNOWN})(E.status);u(new ge(N,E.message))}else u(new ge(re.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ge(re.UNAVAILABLE,"Connection failed."));break;default:ze()}}finally{ke(Ln,`RPC '${e}' ${o} completed.`)}}));const m=JSON.stringify(s);ke(Ln,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,r,15)}))}Bo(e,n,r){const s=kg(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=zE(),u=FE(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const y=o.join("");ke(Ln,`Creating RPC '${e}' stream ${s}: ${y}`,d);const w=l.createWebChannel(y,d);let x=!1,E=!1;const N=new RD({Io:S=>{E?ke(Ln,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(x||(ke(Ln,`Opening RPC '${e}' stream ${s} transport.`),w.open(),x=!0),ke(Ln,`RPC '${e}' stream ${s} sending:`,S),w.send(S))},To:()=>w.close()}),I=(S,V,W)=>{S.listen(V,(U=>{try{W(U)}catch(G){setTimeout((()=>{throw G}),0)}}))};return I(w,fu.EventType.OPEN,(()=>{E||(ke(Ln,`RPC '${e}' stream ${s} transport opened.`),N.yo())})),I(w,fu.EventType.CLOSE,(()=>{E||(E=!0,ke(Ln,`RPC '${e}' stream ${s} transport closed`),N.So())})),I(w,fu.EventType.ERROR,(S=>{E||(E=!0,Yl(Ln,`RPC '${e}' stream ${s} transport errored:`,S),N.So(new ge(re.UNAVAILABLE,"The operation could not be completed")))})),I(w,fu.EventType.MESSAGE,(S=>{var V;if(!E){const W=S.data[0];ht(!!W);const U=W,G=U.error||((V=U[0])===null||V===void 0?void 0:V.error);if(G){ke(Ln,`RPC '${e}' stream ${s} received error:`,G);const Z=G.status;let K=(function(R){const P=Zt[R];if(P!==void 0)return dT(P)})(Z),A=G.message;K===void 0&&(K=re.INTERNAL,A="Unknown error status: "+Z+" with message "+G.message),E=!0,N.So(new ge(K,A)),w.close()}else ke(Ln,`RPC '${e}' stream ${s} received:`,W),N.bo(W)}})),I(u,VE.STAT_EVENT,(S=>{S.stat===ny.PROXY?ke(Ln,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===ny.NOPROXY&&ke(Ln,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{N.wo()}),0),N}}function Eg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t){return new Bj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,r=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,r,s,o,l,u,d){this.ui=e,this.Ho=r,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(gi(n.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===n&&this.P_(r,s)}),(r=>{e((()=>{const s=new ge(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jD extends ET{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=qj(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Be.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Be.min():l.readTime?Ls(l.readTime):Be.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=dy(this.serializer),n.addTarget=(function(o,l){let u;const d=l.target;if(u=oy(d)?{documents:Gj(o,d)}:{query:Qj(o,d)._t},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=pT(o,l.resumeToken);const m=ly(o,l.expectedCount);m!==null&&(u.expectedCount=m)}else if(l.snapshotVersion.compareTo(Be.min())>0){u.readTime=Ff(o,l.snapshotVersion.toTimestamp());const m=ly(o,l.expectedCount);m!==null&&(u.expectedCount=m)}return u})(this.serializer,e);const r=Yj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=dy(this.serializer),n.removeTarget=e,this.a_(n)}}class DD extends ET{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ht(!!e.streamToken),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Kj(e.writeResults,e.commitTime),r=Ls(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=dy(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Hj(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Mo(e,cy(n,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(re.UNKNOWN,o.toString())}))}Lo(e,n,r,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Lo(e,cy(n,r),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(re.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class LD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gi(n),this.D_=!1):ke("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o((l=>{r.enqueueAndForget((async()=>{Da(this)&&(ke("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const m=$e(d);m.L_.add(4),await md(m),m.q_.set("Unknown"),m.L_.delete(4),await yp(m)})(this))}))})),this.q_=new LD(r,s)}}async function yp(t){if(Da(t))for(const e of t.B_)await e(!0)}async function md(t){for(const e of t.B_)await e(!1)}function TT(t,e){const n=$e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),y0(n)?g0(n):gc(n).r_()&&m0(n,e))}function p0(t,e){const n=$e(t),r=gc(n);n.N_.delete(e),r.r_()&&IT(n,e),n.N_.size===0&&(r.r_()?r.o_():Da(n)&&n.q_.set("Unknown"))}function m0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gc(t).A_(e)}function IT(t,e){t.Q_.xe(e),gc(t).R_(e)}function g0(t){t.Q_=new Vj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),gc(t).start(),t.q_.v_()}function y0(t){return Da(t)&&!gc(t).n_()&&t.N_.size>0}function Da(t){return $e(t).L_.size===0}function ST(t){t.Q_=void 0}async function VD(t){t.q_.set("Online")}async function FD(t){t.N_.forEach(((e,n)=>{m0(t,e)}))}async function zD(t,e){ST(t),y0(t)?(t.q_.M_(e),g0(t)):t.q_.set("Unknown")}async function UD(t,e,n){if(t.q_.set("Online"),e instanceof fT&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.N_.delete(u),s.Q_.removeTarget(u))})(t,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zf(t,r)}else if(e instanceof gf?t.Q_.Ke(e):e instanceof hT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Be.min()))try{const r=await xT(t.localStore);n.compareTo(r)>=0&&await(function(o,l){const u=o.Q_.rt(l);return u.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.N_.get(m);y&&o.N_.set(m,y.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,m)=>{const y=o.N_.get(d);if(!y)return;o.N_.set(d,y.withResumeToken(Cn.EMPTY_BYTE_STRING,y.snapshotVersion)),IT(o,d);const w=new mo(y.target,d,m,y.sequenceNumber);m0(o,w)})),o.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),await zf(t,r)}}async function zf(t,e,n){if(!hd(e))throw e;t.L_.add(1),await md(t),t.q_.set("Offline"),n||(n=()=>xT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ke("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await yp(t)}))}function CT(t,e){return e().catch((n=>zf(t,n,e)))}async function vp(t){const e=$e(t),n=Io(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;BD(e);)try{const s=await TD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,$D(e,s)}catch(s){await zf(e,s)}AT(e)&&NT(e)}function BD(t){return Da(t)&&t.O_.length<10}function $D(t,e){t.O_.push(e);const n=Io(t);n.r_()&&n.V_&&n.m_(e.mutations)}function AT(t){return Da(t)&&!Io(t).n_()&&t.O_.length>0}function NT(t){Io(t).start()}async function WD(t){Io(t).p_()}async function qD(t){const e=Io(t);for(const n of t.O_)e.m_(n.mutations)}async function HD(t,e,n){const r=t.O_.shift(),s=l0.from(r,e,n);await CT(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await vp(t)}async function KD(t,e){e&&Io(t).V_&&await(async function(r,s){if((function(l){return Oj(l)&&l!==re.ABORTED})(s.code)){const o=r.O_.shift();Io(r).s_(),await CT(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await vp(r)}})(t,e),AT(t)&&NT(t)}async function Zb(t,e){const n=$e(t);n.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Da(n);n.L_.add(3),await md(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await yp(n)}async function GD(t,e){const n=$e(t);e?(n.L_.delete(2),await yp(n)):e||(n.L_.add(2),await md(n),n.q_.set("Unknown"))}function gc(t){return t.K_||(t.K_=(function(n,r,s){const o=$e(n);return o.w_(),new jD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Eo:VD.bind(null,t),Ro:FD.bind(null,t),mo:zD.bind(null,t),d_:UD.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),y0(t)?g0(t):t.q_.set("Unknown")):(await t.K_.stop(),ST(t))}))),t.K_}function Io(t){return t.U_||(t.U_=(function(n,r,s){const o=$e(n);return o.w_(),new DD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WD.bind(null,t),mo:KD.bind(null,t),f_:qD.bind(null,t),g_:HD.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await vp(t)):(await t.U_.stop(),t.O_.length>0&&(ke("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new bo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,u=new v0(e,n,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _0(t,e){if(gi("AsyncQueue",`${e}: ${t}`),hd(t))return new ge(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=pu(),this.sortedSet=new Dt(this.comparator)}static emptySet(e){return new Dl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Dl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Dl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.W_=new Dt(Ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ze():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class nc{constructor(e,n,r,s,o,l,u,d,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach((u=>{l.push({type:0,doc:u})})),new nc(e,n,Dl.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class ZD{constructor(){this.queries=Jb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=$e(n),o=s.queries;s.queries=Jb(),o.forEach(((l,u)=>{for(const d of u.j_)d.onError(r)}))})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function Jb(){return new mc((t=>XE(t)),up)}async function RT(t,e){const n=$e(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(r=2):(o=new QD,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=_0(l,`Initialization of query '${El(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&w0(n)}async function PT(t,e){const n=$e(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YD(t,e){const n=$e(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const u of l.j_)u.X_(s)&&(r=!0);l.z_=s}}r&&w0(n)}function JD(t,e,n){const r=$e(t),s=r.queries.get(e);if(s)for(const o of s.j_)o.onError(n);r.queries.delete(e)}function w0(t){t.Y_.forEach((e=>{e.next()}))}var fy,Xb;(Xb=fy||(fy={})).ea="default",Xb.Cache="cache";class jT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new nc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==fy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.key=e}}class OT{constructor(e){this.key=e}}class XD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ze(),this.mutatedKeys=Ze(),this.Aa=eT(e),this.Ra=new Dl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Yb,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,w)=>{const x=s.get(y),E=dp(this.query,w)?w:null,N=!!x&&this.mutatedKeys.has(x.key),I=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let S=!1;x&&E?x.data.isEqual(E.data)?N!==I&&(r.track({type:3,doc:E}),S=!0):this.ga(x,E)||(r.track({type:2,doc:E}),S=!0,(d&&this.Aa(E,d)>0||m&&this.Aa(E,m)<0)&&(u=!0)):!x&&E?(r.track({type:0,doc:E}),S=!0):x&&!E&&(r.track({type:1,doc:x}),S=!0,(d||m)&&(u=!0)),S&&(E?(l=l.add(E),o=I?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{Ra:l,fa:r,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((y,w)=>(function(E,N){const I=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze()}};return I(E)-I(N)})(y.type,w.type)||this.Aa(y.doc,w.doc))),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,m=d!==this.Ea;return this.Ea=d,l.length!==0||m?{snapshot:new nc(this.query,e.Ra,o,l,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Yb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ze(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new OT(r))})),this.da.forEach((r=>{e.has(r)||n.push(new DT(r))})),n}ba(e){this.Ta=e.Ts,this.da=Ze();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return nc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class e4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class t4{constructor(e){this.key=e,this.va=!1}}class n4{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new mc((u=>XE(u)),up),this.Ma=new Map,this.xa=new Set,this.Oa=new Dt(Ae.comparator),this.Na=new Map,this.La=new d0,this.Ba={},this.ka=new Map,this.qa=tc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function r4(t,e,n=!0){const r=UT(t);let s;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await LT(r,e,n,!0),s}async function s4(t,e){const n=UT(t);await LT(n,e,!0,!1)}async function LT(t,e,n,r){const s=await ID(t.localStore,Os(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await i4(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&TT(t.remoteStore,s),u}async function i4(t,e,n,r,s){t.Ka=(w,x,E)=>(async function(I,S,V,W){let U=S.view.ma(V);U.ns&&(U=await Kb(I.localStore,S.query,!1).then((({documents:A})=>S.view.ma(A,U))));const G=W&&W.targetChanges.get(S.targetId),Z=W&&W.targetMismatches.get(S.targetId)!=null,K=S.view.applyChanges(U,I.isPrimaryClient,G,Z);return tx(I,S.targetId,K.wa),K.snapshot})(t,w,x,E);const o=await Kb(t.localStore,e,!0),l=new XD(e,o.Ts),u=l.ma(o.documents),d=pd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),m=l.applyChanges(u,t.isPrimaryClient,d);tx(t,n,m.wa);const y=new e4(e,n,l);return t.Fa.set(e,y),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function o4(t,e,n){const r=$e(t),s=r.Fa.get(e),o=r.Ma.get(s.targetId);if(o.length>1)return r.Ma.set(s.targetId,o.filter((l=>!up(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await hy(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&p0(r.remoteStore,s.targetId),py(r,s.targetId)})).catch(dd)):(py(r,s.targetId),await hy(r.localStore,s.targetId,!0))}async function a4(t,e){const n=$e(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),p0(n.remoteStore,r.targetId))}async function l4(t,e,n){const r=m4(t);try{const s=await(function(l,u){const d=$e(l),m=Tt.now(),y=u.reduce(((E,N)=>E.add(N.key)),Ze());let w,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let N=yi(),I=Ze();return d.cs.getEntries(E,y).next((S=>{N=S,N.forEach(((V,W)=>{W.isValidDocument()||(I=I.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(E,N))).next((S=>{w=S;const V=[];for(const W of u){const U=Nj(W,w.get(W.key).overlayedDocument);U!=null&&V.push(new No(W.key,U,qE(U.value.mapValue),Gn.exists(!0)))}return d.mutationQueue.addMutationBatch(E,m,V,u)})).next((S=>{x=S;const V=S.applyToLocalDocumentSet(w,I);return d.documentOverlayCache.saveOverlays(E,S.batchId,V)}))})).then((()=>({batchId:x.batchId,changes:nT(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let m=l.Ba[l.currentUser.toKey()];m||(m=new Dt(ct)),m=m.insert(u,d),l.Ba[l.currentUser.toKey()]=m})(r,s.batchId,n),await gd(r,s.changes),await vp(r.remoteStore)}catch(s){const o=_0(s,"Failed to persist write");n.reject(o)}}async function MT(t,e){const n=$e(t);try{const r=await kD(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=n.Na.get(o);l&&(ht(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?ht(l.va):s.removedDocuments.size>0&&(ht(l.va),l.va=!1))})),await gd(n,r,e)}catch(r){await dd(r)}}function ex(t,e,n){const r=$e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach(((o,l)=>{const u=l.view.Z_(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=$e(l);d.onlineState=u;let m=!1;d.queries.forEach(((y,w)=>{for(const x of w.j_)x.Z_(u)&&(m=!0)})),m&&w0(d)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function c4(t,e,n){const r=$e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),o=s&&s.key;if(o){let l=new Dt(Ae.comparator);l=l.insert(o,Vn.newNoDocument(o,Be.min()));const u=Ze().add(o),d=new mp(Be.min(),new Map,new Dt(ct),l,u);await MT(r,d),r.Oa=r.Oa.remove(o),r.Na.delete(e),b0(r)}else await hy(r.localStore,e,!1).then((()=>py(r,e,n))).catch(dd)}async function u4(t,e){const n=$e(t),r=e.batch.batchId;try{const s=await xD(n.localStore,e);FT(n,r,null),VT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gd(n,s)}catch(s){await dd(s)}}async function d4(t,e,n){const r=$e(t);try{const s=await(function(l,u){const d=$e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return d.mutationQueue.lookupMutationBatch(m,u).next((w=>(ht(w!==null),y=w.keys(),d.mutationQueue.removeMutationBatch(m,w)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,y,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>d.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);FT(r,e,n),VT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gd(r,s)}catch(s){await dd(s)}}function VT(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function FT(t,e,n){const r=$e(t);let s=r.Ba[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function py(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||zT(t,r)}))}function zT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(p0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),b0(t))}function tx(t,e,n){for(const r of n)r instanceof DT?(t.La.addReference(r.key,e),h4(t,r)):r instanceof OT?(ke("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||zT(t,r.key)):ze()}function h4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ke("SyncEngine","New document in limbo: "+n),t.xa.add(r),b0(t))}function b0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ae(Et.fromString(e)),r=t.qa.next();t.Na.set(r,new t4(n)),t.Oa=t.Oa.insert(n,r),TT(t.remoteStore,new mo(Os(o0(n.path)),r,"TargetPurposeLimboResolution",e0.oe))}}async function gd(t,e,n){const r=$e(t),s=[],o=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((u,d)=>{l.push(r.Ka(d,e,n).then((m=>{var y;if((m||n)&&r.isPrimaryClient){const w=m?!m.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(m){s.push(m);const w=f0.Wi(d.targetId,m);o.push(w)}})))})),await Promise.all(l),r.Ca.d_(s),await(async function(d,m){const y=$e(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>oe.forEach(m,(x=>oe.forEach(x.$i,(E=>y.persistence.referenceDelegate.addReference(w,x.targetId,E))).next((()=>oe.forEach(x.Ui,(E=>y.persistence.referenceDelegate.removeReference(w,x.targetId,E)))))))))}catch(w){if(!hd(w))throw w;ke("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const x=w.targetId;if(!w.fromCache){const E=y.os.get(x),N=E.snapshotVersion,I=E.withLastLimboFreeSnapshotVersion(N);y.os=y.os.insert(x,I)}}})(r.localStore,o))}async function f4(t,e){const n=$e(t);if(!n.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=await bT(n.localStore,e);n.currentUser=e,(function(o,l){o.ka.forEach((u=>{u.forEach((d=>{d.reject(new ge(re.CANCELLED,l))}))})),o.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gd(n,r.hs)}}function p4(t,e){const n=$e(t),r=n.Na.get(e);if(r&&r.va)return Ze().add(r.key);{let s=Ze();const o=n.Ma.get(e);if(!o)return s;for(const l of o){const u=n.Fa.get(l);s=s.unionWith(u.view.Va)}return s}}function UT(t){const e=$e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c4.bind(null,e),e.Ca.d_=YD.bind(null,e.eventManager),e.Ca.$a=JD.bind(null,e.eventManager),e}function m4(t){const e=$e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d4.bind(null,e),e}class Uf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return bD(this.persistence,new _D,e.initialUser,this.serializer)}Ga(e){return new gD(h0.Zr,this.serializer)}Wa(e){return new CD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uf.provider={build:()=>new Uf};class my{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ex(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f4.bind(null,this.syncEngine),await GD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZD})()}createDatastore(e){const n=gp(e.databaseInfo.databaseId),r=(function(o){return new PD(o)})(e.databaseInfo);return(function(o,l,u,d){return new OD(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,o,l,u){return new MD(r,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>ex(this.syncEngine,n,0)),(function(){return Qb.D()?new Qb:new AD})())}createSyncEngine(e,n){return(function(s,o,l,u,d,m,y){const w=new n4(s,o,l,u,d,m);return y&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const o=$e(s);ke("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await md(o),o.k_.shutdown(),o.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}my.provider={build:()=>new my};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Mn.UNAUTHENTICATED,this.clientId=BE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{ke("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_0(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Tg(t,e){t.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await bT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function nx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await y4(t);ke("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Zb(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Zb(e.remoteStore,s))),t._onlineComponents=e}async function y4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke("FirestoreClient","Using user provided OfflineComponentProvider");try{await Tg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Yl("Error using user provided cache. Falling back to memory cache: "+n),await Tg(t,new Uf)}}else ke("FirestoreClient","Using default OfflineComponentProvider"),await Tg(t,new Uf);return t._offlineComponents}async function $T(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke("FirestoreClient","Using user provided OnlineComponentProvider"),await nx(t,t._uninitializedComponentsProvider._online)):(ke("FirestoreClient","Using default OnlineComponentProvider"),await nx(t,new my))),t._onlineComponents}function v4(t){return $T(t).then((e=>e.syncEngine))}async function gy(t){const e=await $T(t),n=e.eventManager;return n.onListen=r4.bind(null,e.syncEngine),n.onUnlisten=o4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=s4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=a4.bind(null,e.syncEngine),n}function _4(t,e,n={}){const r=new bo;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,m){const y=new BT({next:x=>{y.Za(),l.enqueueAndForget((()=>PT(o,w))),x.fromCache&&d.source==="server"?m.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),w=new jT(u,y,{includeMetadataChanges:!0,_a:!0});return RT(o,w)})(await gy(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t,e,n){if(!n)throw new ge(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function w4(t,e,n,r){if(e===!0&&r===!0)throw new ge(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sx(t){if(!Ae.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ix(t){if(Ae.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _p(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ze()}function kr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_p(t);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ox({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ox(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new VP;switch(r.type){case"firstParty":return new BP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=rx.get(n);r&&(ke("ComponentProvider","Removing Datastore"),rx.delete(n),r.terminate())})(this),Promise.resolve()}}function b4(t,e,n,r={}){var s;const o=(t=kr(t,wp))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Mn.MOCK_USER;else{u=GA(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Mn(m)}t._authCredentials=new FP(new UE(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}}class Qn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class xo extends xi{constructor(e,n,r){super(e,n,o0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new Ae(e))}withConverter(e){return new xo(this.firestore,e,this._path)}}function mt(t,e,...n){if(t=jt(t),qT("collection","path",e),t instanceof wp){const r=Et.fromString(e,...n);return ix(r),new xo(t,null,r)}{if(!(t instanceof Qn||t instanceof xo))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Et.fromString(e,...n));return ix(r),new xo(t.firestore,null,r)}}function An(t,e,...n){if(t=jt(t),arguments.length===1&&(e=BE.newId()),qT("doc","path",e),t instanceof wp){const r=Et.fromString(e,...n);return sx(r),new Qn(t,null,new Ae(r))}{if(!(t instanceof Qn||t instanceof xo))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Et.fromString(e,...n));return sx(r),new Qn(t.firestore,t instanceof xo?t.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kT(this,"async_queue_retry"),this.Vu=()=>{const r=Eg();r&&ke("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Eg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Eg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new bo;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!hd(e))throw e;ke("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u})(r);throw gi("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=v0.createAndSchedule(this,e,n,r,(o=>this.yu(o)));return this.Tu.push(s),s}fu(){this.Eu&&ze()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function lx(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(t,["next","error","complete"])}class vi extends wp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ax,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ax(e),this._firestoreClient=void 0,await e}}}function x4(t,e){const n=typeof t=="object"?t:Qk(),r=typeof t=="string"?t:"(default)",s=$y(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=HA("firestore");o&&b4(s,...o)}return s}function bp(t){if(t._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||k4(t),t._firestoreClient}function k4(t){var e,n,r;const s=t._freezeSettings(),o=(function(u,d,m,y){return new tj(u,d,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,WT(y.experimentalLongPollingOptions),y.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new g4(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rc(Cn.fromBase64String(e))}catch(n){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rc(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=/^__.*__$/;class T4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new No(e,this.data,this.fieldMask,n,this.fieldTransforms):new fd(e,this.data,n,this.fieldTransforms)}}class HT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new No(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze()}}class E0{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new E0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(KT(this.Cu)&&E4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class I4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gp(e)}Qu(e,n,r,s=!1){return new E0({Cu:e,methodName:n,qu:r,path:In.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vd(t){const e=t._freezeSettings(),n=gp(t._databaseId);return new I4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function T0(t,e,n,r,s,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,s);S0("Data must be an object, but it was:",l,r);const u=ZT(r,l);let d,m;if(o.merge)d=new xr(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const w of o.mergeFields){const x=yy(e,w,n);if(!l.contains(x))throw new ge(re.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);JT(y,x)||y.push(x)}d=new xr(y),m=l.fieldTransforms.filter((w=>d.covers(w.field)))}else d=null,m=l.fieldTransforms;return new T4(new dr(u),d,m)}class kp extends xp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kp}}class I0 extends xp{_toFieldTransform(e){return new Ij(e.path,new $u)}isEqual(e){return e instanceof I0}}function GT(t,e,n,r){const s=t.Qu(1,e,n);S0("Data must be an object, but it was:",s,r);const o=[],l=dr.empty();ja(r,((d,m)=>{const y=C0(e,d,n);m=jt(m);const w=s.Nu(y);if(m instanceof kp)o.push(y);else{const x=_d(m,w);x!=null&&(o.push(y),l.set(y,x))}}));const u=new xr(o);return new HT(l,u,s.fieldTransforms)}function QT(t,e,n,r,s,o){const l=t.Qu(1,e,n),u=[yy(e,r,n)],d=[s];if(o.length%2!=0)throw new ge(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)u.push(yy(e,o[x])),d.push(o[x+1]);const m=[],y=dr.empty();for(let x=u.length-1;x>=0;--x)if(!JT(m,u[x])){const E=u[x];let N=d[x];N=jt(N);const I=l.Nu(E);if(N instanceof kp)m.push(E);else{const S=_d(N,I);S!=null&&(m.push(E),y.set(E,S))}}const w=new xr(m);return new HT(y,w,l.fieldTransforms)}function S4(t,e,n,r=!1){return _d(n,t.Qu(r?4:3,e))}function _d(t,e){if(YT(t=jt(t)))return S0("Unsupported field value:",e,t),ZT(t,e);if(t instanceof xp)return(function(r,s){if(!KT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const u of r){let d=_d(u,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(t,e)}return(function(r,s){if((r=jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Tt.fromDate(r);return{timestampValue:Ff(s.serializer,o)}}if(r instanceof Tt){const o=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ff(s.serializer,o)}}if(r instanceof x0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rc)return{bytesValue:pT(s.serializer,r._byteString)};if(r instanceof Qn){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:u0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof k0)return(function(l,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return a0(u.serializer,d)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${_p(r)}`)})(t,e)}function ZT(t,e){const n={};return $E(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ja(t,((r,s)=>{const o=_d(s,e.Mu(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function YT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof x0||t instanceof rc||t instanceof Qn||t instanceof xp||t instanceof k0)}function S0(t,e,n){if(!YT(n)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(n)){const r=_p(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function yy(t,e,n){if((e=jt(e))instanceof yd)return e._internalPath;if(typeof e=="string")return C0(t,e);throw Bf("Field path arguments must be of type string or ",t,!1,void 0,n)}const C4=new RegExp("[~\\*/\\[\\]]");function C0(t,e,n){if(e.search(C4)>=0)throw Bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yd(...e.split("."))._internalPath}catch{throw Bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bf(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new ge(re.INVALID_ARGUMENT,u+t+d)}function JT(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(A0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class A4 extends XT{data(){return super.data()}}function A0(t,e){return typeof e=="string"?C0(t,e):e instanceof yd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class N0{}class R0 extends N0{}function Ro(t,e,...n){let r=[];e instanceof N0&&r.push(e),r=r.concat(n),(function(o){const l=o.filter((d=>d instanceof j0)).length,u=o.filter((d=>d instanceof P0)).length;if(l>1||l>0&&u>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class P0 extends R0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new P0(e,n,r)}_apply(e){const n=this._parse(e);return tI(e._query,n),new xi(e.firestore,e.converter,ay(e._query,n))}_parse(e){const n=vd(e.firestore);return(function(o,l,u,d,m,y,w){let x;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){ux(w,y);const E=[];for(const N of w)E.push(cx(d,o,N));x={arrayValue:{values:E}}}else x=cx(d,o,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||ux(w,y),x=S4(u,l,w,y==="in"||y==="not-in");return Yt.create(m,y,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class j0 extends N0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new j0(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ps.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)tI(l,d),l=ay(l,d)})(e._query,n),new xi(e.firestore,e.converter,ay(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class D0 extends R0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new D0(e,n)}_apply(e){const n=(function(s,o,l){if(s.startAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bu(o,l)})(e._query,this._field,this._direction);return new xi(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new pc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function Ep(t,e="asc"){const n=e,r=A0("orderBy",t);return D0._create(r,n)}class O0 extends R0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new O0(e,n,r)}_apply(e){return new xi(e.firestore,e.converter,Mf(e._query,this._limit,this._limitType))}}function N4(t){return O0._create("limit",t,"F")}function cx(t,e,n){if(typeof(n=jt(n))=="string"){if(n==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JE(e)&&n.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Et.fromString(n));if(!Ae.isDocumentKey(r))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nb(t,new Ae(r))}if(n instanceof Qn)return Nb(t,n._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_p(n)}.`)}function ux(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tI(t,e){const n=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class R4{convertValue(e,n="none"){switch(Na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ze()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ja(e,((s,o)=>{r[s]=this.convertValue(o,n)})),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((l=>$t(l.doubleValue)));return new k0(o)}convertGeoPoint(e){return new x0($t(e.latitude),$t(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=n0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const n=To(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Et.fromString(e);ht(wT(r));const s=new zu(r.get(1),r.get(3)),o=new Ae(r.popFirst(5));return s.isEqual(n)||gi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nI extends XT{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(A0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yf extends nI{data(e={}){return super.data(e)}}class rI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new gu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new yf(this._firestore,this._userDataWriter,r.key,r,new gu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new yf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new gu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new yf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new gu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return u.type!==0&&(m=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),y=l.indexOf(u.doc.key)),{type:P4(u.type),doc:d,oldIndex:m,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function P4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze()}}class M0 extends R4{constructor(e){super(),this.firestore=e}convertBytes(e){return new rc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,n)}}function ii(t){t=kr(t,xi);const e=kr(t.firestore,vi),n=bp(e),r=new M0(e);return eI(t._query),_4(n,t._query).then((s=>new rI(e,r,t,s)))}function j4(t,e,n){t=kr(t,Qn);const r=kr(t.firestore,vi),s=L0(t.converter,e,n);return wd(r,[T0(vd(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Gn.none())])}function yc(t,e,n,...r){t=kr(t,Qn);const s=kr(t.firestore,vi),o=vd(s);let l;return l=typeof(e=jt(e))=="string"||e instanceof yd?QT(o,"updateDoc",t._key,e,n,r):GT(o,"updateDoc",t._key,e),wd(s,[l.toMutation(t._key,Gn.exists(!0))])}function vc(t){return wd(kr(t.firestore,vi),[new pp(t._key,Gn.none())])}function Ur(t,e){const n=kr(t.firestore,vi),r=An(t),s=L0(t.converter,e);return wd(n,[T0(vd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Gn.exists(!1))]).then((()=>r))}function Oa(t,...e){var n,r,s;t=jt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||lx(e[l])||(o=e[l],l++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(lx(e[l])){const w=e[l];e[l]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[l+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let d,m,y;if(t instanceof Qn)m=kr(t.firestore,vi),y=o0(t._key.path),d={next:w=>{e[l]&&e[l](D4(m,t,w))},error:e[l+1],complete:e[l+2]};else{const w=kr(t,xi);m=kr(w.firestore,vi),y=w._query;const x=new M0(m);d={next:E=>{e[l]&&e[l](new rI(m,x,w,E))},error:e[l+1],complete:e[l+2]},eI(t._query)}return(function(x,E,N,I){const S=new BT(I),V=new jT(E,S,N);return x.asyncQueue.enqueueAndForget((async()=>RT(await gy(x),V))),()=>{S.Za(),x.asyncQueue.enqueueAndForget((async()=>PT(await gy(x),V)))}})(bp(m),y,u,d)}function wd(t,e){return(function(r,s){const o=new bo;return r.asyncQueue.enqueueAndForget((async()=>l4(await v4(r),s,o))),o.promise})(bp(t),e)}function D4(t,e,n){const r=n.docs.get(e._key),s=new M0(t);return new nI(t,s,e._key,r,new gu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=vd(e)}set(e,n,r){this._verifyNotCommitted();const s=Ig(e,this._firestore),o=L0(s.converter,n,r),l=T0(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,Gn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=Ig(e,this._firestore);let l;return l=typeof(n=jt(n))=="string"||n instanceof yd?QT(this._dataReader,"WriteBatch.update",o._key,n,r,s):GT(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,Gn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ig(e,this._firestore);return this._mutations=this._mutations.concat(new pp(n._key,Gn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ig(t,e){if((t=jt(t)).firestore!==e)throw new ge(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ms(){return new I0("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){return bp(t=kr(t,vi)),new O4(t,(e=>wd(t,e)))}(function(e,n=!0){(function(s){fc=s})(dc),Ql(new Ia("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new vi(new zP(r.getProvider("auth-internal")),new WP(r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zu(m.options.projectId,y)})(l,s),l);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),wo(Tb,"4.7.3",e),wo(Tb,"4.7.3","esm2017")})();const L4={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function M4(){if(typeof window<"u"&&window.GLOBAL_FIREBASE_CONFIG&&window.GLOBAL_FIREBASE_CONFIG.apiKey)return window.GLOBAL_FIREBASE_CONFIG;try{const t=L4;if(t&&t.VITE_FIREBASE_API_KEY)return{apiKey:t.VITE_FIREBASE_API_KEY,authDomain:t.VITE_FIREBASE_AUTH_DOMAIN,projectId:t.VITE_FIREBASE_PROJECT_ID,storageBucket:t.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:t.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:t.VITE_FIREBASE_APP_ID,measurementId:t.VITE_FIREBASE_MEASUREMENT_ID}}catch{}if(typeof __firebase_config<"u")try{return typeof __firebase_config=="object"?__firebase_config:JSON.parse(__firebase_config)}catch(t){return console.error("[Firebase] Config parse failed (legacy):",t),null}return console.error("[Firebase] All config sources failed. Check index.html injection."),null}const Xi=M4();if(!(Xi!=null&&Xi.apiKey)||!(Xi!=null&&Xi.projectId)){const t="[Firebase] Configuration is missing required fields (apiKey, projectId). Application cannot start.";throw console.error(t,Xi),new Error(t)}let vy;eb().length>0?vy=eb()[0]:vy=Gk(Xi);const sI=vy,Ge=LP(sI),Fe=x4(sI),V4=()=>{const[t,e]=D.useState(""),[n,r]=D.useState(""),[s,o]=D.useState(!1),[l,u]=D.useState(null),d=async y=>{y.preventDefault(),u(null),o(!0);try{await xE(Ge,t,n)}catch(w){let x="Login failed.";switch(w.code){case"auth/invalid-email":x="Invalid email format.";break;case"auth/user-disabled":x="User disabled.";break;case"auth/user-not-found":x="User not found.";break;case"auth/wrong-password":x="Wrong password.";break;case"auth/too-many-requests":x="Too many requests. Try again later.";break;case"auth/network-request-failed":x="Network error.";break}u(x)}finally{o(!1)}},m=async()=>{u(null),o(!0);try{await fR(Ge)}catch(y){u("Guest login failed: "+y.message)}finally{o(!1)}};return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-premium-gradient p-4 antialiased",children:p.jsxs("div",{className:"max-w-md w-full p-6 sm:p-8 bg-white/70 dark:bg-gray-800/60 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 rounded-[2rem] shadow-2xl transition-all duration-300",children:[p.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[p.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-3xl shadow-lg mb-6 animate-float",children:p.jsx("img",{src:"/images/web-app-manifest-512x512.png",alt:"Logo",className:"h-12 w-12"})}),p.jsxs("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:["Task",p.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:""})]}),p.jsxs("form",{onSubmit:d,className:"space-y-5 sm:space-y-6",children:[l&&p.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium animate-in fade-in slide-in-from-top-4 duration-300 shadow-sm",children:l}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"login-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Email"}),p.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:y=>e(y.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"mail@example.com"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"login-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:"Password"}),p.jsx("input",{id:"login-password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:y=>r(y.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:""})]}),p.jsx("button",{type:"submit",disabled:s,className:"btn-premium w-full py-4 text-lg shadow-lg hover:shadow-xl active:scale-[0.98] transition-all",children:s?"...":""})]}),p.jsxs("div",{className:"mt-8",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200/50 dark:border-gray-700/50"})}),p.jsx("div",{className:"relative flex justify-center text-xs",children:p.jsx("span",{className:"px-3 bg-transparent text-gray-400 uppercase tracking-widest font-bold",children:"OR"})})]}),p.jsxs("button",{onClick:m,disabled:s,className:"mt-8 w-full py-3.5 bg-gray-100/50 hover:bg-gray-200/70 active:bg-gray-300 dark:bg-gray-700/30 dark:hover:bg-gray-600/50 dark:active:bg-gray-600 text-gray-700 dark:text-gray-200 font-bold rounded-2xl transition-all active:scale-95 flex items-center justify-center gap-3 border border-transparent hover:border-gray-300 dark:hover:border-gray-600",children:[p.jsx("span",{className:"text-xl",children:""})," "]})]})]})})},dx=t=>{let e;const n=new Set,r=(m,y)=>{const w=typeof m=="function"?m(e):m;if(!Object.is(w,e)){const x=e;e=y??(typeof w!="object"||w===null)?w:Object.assign({},e,w),n.forEach(E=>E(e,x))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>d,subscribe:m=>(n.add(m),()=>n.delete(m))},d=e=t(r,s,u);return u},F4=(t=>t?dx(t):dx),z4=t=>t;function U4(t,e=z4){const n=Le.useSyncExternalStore(t.subscribe,Le.useCallback(()=>e(t.getState()),[t,e]),Le.useCallback(()=>e(t.getInitialState()),[t,e]));return Le.useDebugValue(n),n}const hx=t=>{const e=F4(t),n=r=>U4(e,r);return Object.assign(n,e),n},La=(t=>t?hx(t):hx),B4={success:3e3,info:4e3,error:6e3},Kh=new Map,$4=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,11),vf=La(t=>({toasts:[],addToast:(e,n="info")=>{const r=$4();t(l=>({toasts:[...l.toasts,{id:r,message:e,type:n}]}));const s=B4[n],o=setTimeout(()=>{t(l=>({toasts:l.toasts.filter(u=>u.id!==r)})),Kh.delete(r)},s);Kh.set(r,o)},removeToast:e=>{const n=Kh.get(e);n&&(clearTimeout(n),Kh.delete(e)),t(r=>({toasts:r.toasts.filter(s=>s.id!==e)}))}})),Jt={success:t=>vf.getState().addToast(t,"success"),error:t=>vf.getState().addToast(t,"error"),info:t=>vf.getState().addToast(t,"info")};function iI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=iI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function W4(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=iI(t))&&(r&&(r+=" "),r+=e);return r}const q4=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},H4=(t,e)=>({classGroupId:t,validator:e}),oI=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),$f="-",fx=[],K4="arbitrary..",G4=t=>{const e=Z4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return Q4(l);const u=l.split($f),d=u[0]===""&&u.length>1?1:0;return aI(u,d,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=r[l],m=n[l];return d?m?q4(m,d):d:m||fx}return n[l]||fx}}},aI=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],o=n.nextPart.get(s);if(o){const m=aI(t,e+1,o);if(m)return m}const l=n.validators;if(l===null)return;const u=e===0?t.join($f):t.slice(e).join($f),d=l.length;for(let m=0;m<d;m++){const y=l[m];if(y.validator(u))return y.classGroupId}},Q4=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?K4+r:void 0})(),Z4=t=>{const{theme:e,classGroups:n}=t;return Y4(n,e)},Y4=(t,e)=>{const n=oI();for(const r in t){const s=t[r];F0(s,n,r,e)}return n},F0=(t,e,n,r)=>{const s=t.length;for(let o=0;o<s;o++){const l=t[o];J4(l,e,n,r)}},J4=(t,e,n,r)=>{if(typeof t=="string"){X4(t,e,n);return}if(typeof t=="function"){eO(t,e,n,r);return}tO(t,e,n,r)},X4=(t,e,n)=>{const r=t===""?e:lI(e,t);r.classGroupId=n},eO=(t,e,n,r)=>{if(nO(t)){F0(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(H4(n,t))},tO=(t,e,n,r)=>{const s=Object.entries(t),o=s.length;for(let l=0;l<o;l++){const[u,d]=s[l];F0(d,lI(e,u),n,r)}},lI=(t,e)=>{let n=t;const r=e.split($f),s=r.length;for(let o=0;o<s;o++){const l=r[o];let u=n.nextPart.get(l);u||(u=oI(),n.nextPart.set(l,u)),n=u}return n},nO=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,rO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(o,l)=>{n[o]=l,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(o){let l=n[o];if(l!==void 0)return l;if((l=r[o])!==void 0)return s(o,l),l},set(o,l){o in n?n[o]=l:s(o,l)}}},_y="!",px=":",sO=[],mx=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),iO=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const o=[];let l=0,u=0,d=0,m;const y=s.length;for(let I=0;I<y;I++){const S=s[I];if(l===0&&u===0){if(S===px){o.push(s.slice(d,I)),d=I+1;continue}if(S==="/"){m=I;continue}}S==="["?l++:S==="]"?l--:S==="("?u++:S===")"&&u--}const w=o.length===0?s:s.slice(d);let x=w,E=!1;w.endsWith(_y)?(x=w.slice(0,-1),E=!0):w.startsWith(_y)&&(x=w.slice(1),E=!0);const N=m&&m>d?m-d:void 0;return mx(o,E,x,N)};if(e){const s=e+px,o=r;r=l=>l.startsWith(s)?o(l.slice(s.length)):mx(sO,!1,l,void 0,!0)}if(n){const s=r;r=o=>n({className:o,parseClassName:s})}return r},oO=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let o=0;o<n.length;o++){const l=n[o],u=l[0]==="[",d=e.has(l);u||d?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},aO=t=>({cache:rO(t.cacheSize),parseClassName:iO(t),sortModifiers:oO(t),...G4(t)}),lO=/\s+/,cO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,l=[],u=t.trim().split(lO);let d="";for(let m=u.length-1;m>=0;m-=1){const y=u[m],{isExternal:w,modifiers:x,hasImportantModifier:E,baseClassName:N,maybePostfixModifierPosition:I}=n(y);if(w){d=y+(d.length>0?" "+d:d);continue}let S=!!I,V=r(S?N.substring(0,I):N);if(!V){if(!S){d=y+(d.length>0?" "+d:d);continue}if(V=r(N),!V){d=y+(d.length>0?" "+d:d);continue}S=!1}const W=x.length===0?"":x.length===1?x[0]:o(x).join(":"),U=E?W+_y:W,G=U+V;if(l.indexOf(G)>-1)continue;l.push(G);const Z=s(V,S);for(let K=0;K<Z.length;++K){const A=Z[K];l.push(U+A)}d=y+(d.length>0?" "+d:d)}return d},uO=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=cI(n))&&(s&&(s+=" "),s+=r);return s},cI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=cI(t[r]))&&(n&&(n+=" "),n+=e);return n},dO=(t,...e)=>{let n,r,s,o;const l=d=>{const m=e.reduce((y,w)=>w(y),t());return n=aO(m),r=n.cache.get,s=n.cache.set,o=u,u(d)},u=d=>{const m=r(d);if(m)return m;const y=cO(d,n);return s(d,y),y};return o=l,(...d)=>o(uO(...d))},hO=[],rn=t=>{const e=n=>n[t]||hO;return e.isThemeGetter=!0,e},uI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,dI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fO=/^\d+\/\d+$/,pO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,yO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xl=t=>fO.test(t),He=t=>!!t&&!Number.isNaN(Number(t)),Yi=t=>!!t&&Number.isInteger(Number(t)),Sg=t=>t.endsWith("%")&&He(t.slice(0,-1)),ri=t=>pO.test(t),_O=()=>!0,wO=t=>mO.test(t)&&!gO.test(t),hI=()=>!1,bO=t=>yO.test(t),xO=t=>vO.test(t),kO=t=>!_e(t)&&!we(t),EO=t=>_c(t,mI,hI),_e=t=>uI.test(t),la=t=>_c(t,gI,wO),Cg=t=>_c(t,AO,He),gx=t=>_c(t,fI,hI),TO=t=>_c(t,pI,xO),Gh=t=>_c(t,yI,bO),we=t=>dI.test(t),lu=t=>wc(t,gI),IO=t=>wc(t,NO),yx=t=>wc(t,fI),SO=t=>wc(t,mI),CO=t=>wc(t,pI),Qh=t=>wc(t,yI,!0),_c=(t,e,n)=>{const r=uI.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},wc=(t,e,n=!1)=>{const r=dI.exec(t);return r?r[1]?e(r[1]):n:!1},fI=t=>t==="position"||t==="percentage",pI=t=>t==="image"||t==="url",mI=t=>t==="length"||t==="size"||t==="bg-size",gI=t=>t==="length",AO=t=>t==="number",NO=t=>t==="family-name",yI=t=>t==="shadow",RO=()=>{const t=rn("color"),e=rn("font"),n=rn("text"),r=rn("font-weight"),s=rn("tracking"),o=rn("leading"),l=rn("breakpoint"),u=rn("container"),d=rn("spacing"),m=rn("radius"),y=rn("shadow"),w=rn("inset-shadow"),x=rn("text-shadow"),E=rn("drop-shadow"),N=rn("blur"),I=rn("perspective"),S=rn("aspect"),V=rn("ease"),W=rn("animate"),U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Z=()=>[...G(),we,_e],K=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto","contain","none"],k=()=>[we,_e,d],R=()=>[xl,"full","auto",...k()],P=()=>[Yi,"none","subgrid",we,_e],O=()=>["auto",{span:["full",Yi,we,_e]},Yi,we,_e],M=()=>[Yi,"auto",we,_e],j=()=>["auto","min","max","fr",we,_e],Ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],nt=()=>["start","end","center","stretch","center-safe","end-safe"],Qe=()=>["auto",...k()],Ne=()=>[xl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],X=()=>[t,we,_e],pe=()=>[...G(),yx,gx,{position:[we,_e]}],de=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",SO,EO,{size:[we,_e]}],ee=()=>[Sg,lu,la],ce=()=>["","none","full",m,we,_e],be=()=>["",He,lu,la],De=()=>["solid","dashed","dotted","double"],Re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>[He,Sg,yx,gx],Ue=()=>["","none",N,we,_e],ne=()=>["none",He,we,_e],he=()=>["none",He,we,_e],rt=()=>[He,we,_e],pt=()=>[xl,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ri],breakpoint:[ri],color:[_O],container:[ri],"drop-shadow":[ri],ease:["in","out","in-out"],font:[kO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ri],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ri],shadow:[ri],spacing:["px",He],text:[ri],"text-shadow":[ri],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xl,_e,we,S]}],container:["container"],columns:[{columns:[He,_e,we,u]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Z()}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[Yi,"auto",we,_e]}],basis:[{basis:[xl,"full","auto",u,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[He,xl,"auto","initial","none",_e]}],grow:[{grow:["",He,we,_e]}],shrink:[{shrink:["",He,we,_e]}],order:[{order:[Yi,"first","last","none",we,_e]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":j()}],"auto-rows":[{"auto-rows":j()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...Ce(),"normal"]}],"justify-items":[{"justify-items":[...nt(),"normal"]}],"justify-self":[{"justify-self":["auto",...nt()]}],"align-content":[{content:["normal",...Ce()]}],"align-items":[{items:[...nt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...nt(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ce()}],"place-items":[{"place-items":[...nt(),"baseline"]}],"place-self":[{"place-self":["auto",...nt()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:Qe()}],mx:[{mx:Qe()}],my:[{my:Qe()}],ms:[{ms:Qe()}],me:[{me:Qe()}],mt:[{mt:Qe()}],mr:[{mr:Qe()}],mb:[{mb:Qe()}],ml:[{ml:Qe()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ne()}],w:[{w:[u,"screen",...Ne()]}],"min-w":[{"min-w":[u,"screen","none",...Ne()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...Ne()]}],h:[{h:["screen","lh",...Ne()]}],"min-h":[{"min-h":["screen","lh","none",...Ne()]}],"max-h":[{"max-h":["screen","lh",...Ne()]}],"font-size":[{text:["base",n,lu,la]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,we,Cg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Sg,_e]}],"font-family":[{font:[IO,_e,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,we,_e]}],"line-clamp":[{"line-clamp":[He,"none",we,Cg]}],leading:[{leading:[o,...k()]}],"list-image":[{"list-image":["none",we,_e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",we,_e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...De(),"wavy"]}],"text-decoration-thickness":[{decoration:[He,"from-font","auto",we,la]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[He,"auto",we,_e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",we,_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",we,_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:pe()}],"bg-repeat":[{bg:de()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Yi,we,_e],radial:["",we,_e],conic:[Yi,we,_e]},CO,TO]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:be()}],"border-w-x":[{"border-x":be()}],"border-w-y":[{"border-y":be()}],"border-w-s":[{"border-s":be()}],"border-w-e":[{"border-e":be()}],"border-w-t":[{"border-t":be()}],"border-w-r":[{"border-r":be()}],"border-w-b":[{"border-b":be()}],"border-w-l":[{"border-l":be()}],"divide-x":[{"divide-x":be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...De(),"hidden","none"]}],"divide-style":[{divide:[...De(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...De(),"none","hidden"]}],"outline-offset":[{"outline-offset":[He,we,_e]}],"outline-w":[{outline:["",He,lu,la]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",y,Qh,Gh]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",w,Qh,Gh]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[He,la]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":be()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",x,Qh,Gh]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[He,we,_e]}],"mix-blend":[{"mix-blend":[...Re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[He]}],"mask-image-linear-from-pos":[{"mask-linear-from":Te()}],"mask-image-linear-to-pos":[{"mask-linear-to":Te()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Te()}],"mask-image-t-to-pos":[{"mask-t-to":Te()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Te()}],"mask-image-r-to-pos":[{"mask-r-to":Te()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Te()}],"mask-image-b-to-pos":[{"mask-b-to":Te()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Te()}],"mask-image-l-to-pos":[{"mask-l-to":Te()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Te()}],"mask-image-x-to-pos":[{"mask-x-to":Te()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Te()}],"mask-image-y-to-pos":[{"mask-y-to":Te()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[we,_e]}],"mask-image-radial-from-pos":[{"mask-radial-from":Te()}],"mask-image-radial-to-pos":[{"mask-radial-to":Te()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":G()}],"mask-image-conic-pos":[{"mask-conic":[He]}],"mask-image-conic-from-pos":[{"mask-conic-from":Te()}],"mask-image-conic-to-pos":[{"mask-conic-to":Te()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:pe()}],"mask-repeat":[{mask:de()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",we,_e]}],filter:[{filter:["","none",we,_e]}],blur:[{blur:Ue()}],brightness:[{brightness:[He,we,_e]}],contrast:[{contrast:[He,we,_e]}],"drop-shadow":[{"drop-shadow":["","none",E,Qh,Gh]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",He,we,_e]}],"hue-rotate":[{"hue-rotate":[He,we,_e]}],invert:[{invert:["",He,we,_e]}],saturate:[{saturate:[He,we,_e]}],sepia:[{sepia:["",He,we,_e]}],"backdrop-filter":[{"backdrop-filter":["","none",we,_e]}],"backdrop-blur":[{"backdrop-blur":Ue()}],"backdrop-brightness":[{"backdrop-brightness":[He,we,_e]}],"backdrop-contrast":[{"backdrop-contrast":[He,we,_e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",He,we,_e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[He,we,_e]}],"backdrop-invert":[{"backdrop-invert":["",He,we,_e]}],"backdrop-opacity":[{"backdrop-opacity":[He,we,_e]}],"backdrop-saturate":[{"backdrop-saturate":[He,we,_e]}],"backdrop-sepia":[{"backdrop-sepia":["",He,we,_e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",we,_e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[He,"initial",we,_e]}],ease:[{ease:["linear","initial",V,we,_e]}],delay:[{delay:[He,we,_e]}],animate:[{animate:["none",W,we,_e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[I,we,_e]}],"perspective-origin":[{"perspective-origin":Z()}],rotate:[{rotate:ne()}],"rotate-x":[{"rotate-x":ne()}],"rotate-y":[{"rotate-y":ne()}],"rotate-z":[{"rotate-z":ne()}],scale:[{scale:he()}],"scale-x":[{"scale-x":he()}],"scale-y":[{"scale-y":he()}],"scale-z":[{"scale-z":he()}],"scale-3d":["scale-3d"],skew:[{skew:rt()}],"skew-x":[{"skew-x":rt()}],"skew-y":[{"skew-y":rt()}],transform:[{transform:[we,_e,"","none","gpu","cpu"]}],"transform-origin":[{origin:Z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pt()}],"translate-x":[{"translate-x":pt()}],"translate-y":[{"translate-y":pt()}],"translate-z":[{"translate-z":pt()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",we,_e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",we,_e]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[He,lu,la,Cg]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},PO=dO(RO);function Se(...t){return PO(W4(t))}const jO=()=>{const{toasts:t,removeToast:e}=vf();return t.length===0?null:p.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:t.map(n=>p.jsx("div",{onClick:()=>e(n.id),className:Se("pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-xl shadow-lg border text-sm font-medium transition-all transform animate-in slide-in-from-right-10 fade-in duration-300 cursor-pointer hover:opacity-90",n.type==="success"&&"bg-white dark:bg-gray-800 text-green-600 dark:text-green-400 border-green-200 dark:border-green-900",n.type==="error"&&"bg-white dark:bg-gray-800 text-red-600 dark:text-red-400 border-red-200 dark:border-red-900",n.type==="info"&&"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700"),children:p.jsxs("div",{className:"flex items-start gap-3",children:[n.type==="success"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),n.type==="error"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.type==="info"&&p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),p.jsx("p",{className:"leading-5",children:n.message})]})},n.id))})};function DO(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var o;const l=d=>d===null?null:JSON.parse(d,void 0),u=(o=n.getItem(s))!=null?o:null;return u instanceof Promise?u.then(l):l(u)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const wy=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return wy(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return wy(r)(n)}}}},OO=(t,e)=>(n,r,s)=>{let o={storage:DO(()=>localStorage),partialize:I=>I,version:0,merge:(I,S)=>({...S,...I}),...e},l=!1;const u=new Set,d=new Set;let m=o.storage;if(!m)return t((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...I)},r,s);const y=()=>{const I=o.partialize({...r()});return m.setItem(o.name,{state:I,version:o.version})},w=s.setState;s.setState=(I,S)=>(w(I,S),y());const x=t((...I)=>(n(...I),y()),r,s);s.getInitialState=()=>x;let E;const N=()=>{var I,S;if(!m)return;l=!1,u.forEach(W=>{var U;return W((U=r())!=null?U:x)});const V=((S=o.onRehydrateStorage)==null?void 0:S.call(o,(I=r())!=null?I:x))||void 0;return wy(m.getItem.bind(m))(o.name).then(W=>{if(W)if(typeof W.version=="number"&&W.version!==o.version){if(o.migrate){const U=o.migrate(W.state,W.version);return U instanceof Promise?U.then(G=>[!0,G]):[!0,U]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,W.state];return[!1,void 0]}).then(W=>{var U;const[G,Z]=W;if(E=o.merge(Z,(U=r())!=null?U:x),n(E,!0),G)return y()}).then(()=>{V==null||V(E,void 0),E=r(),l=!0,d.forEach(W=>W(E))}).catch(W=>{V==null||V(void 0,W)})};return s.persist={setOptions:I=>{o={...o,...I},I.storage&&(m=I.storage)},clearStorage:()=>{m==null||m.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>N(),hasHydrated:()=>l,onHydrate:I=>(u.add(I),()=>{u.delete(I)}),onFinishHydration:I=>(d.add(I),()=>{d.delete(I)})},o.skipHydration||N(),E||x},bd=OO,$r=La()(bd(t=>({themeMode:"system",fontEn:"Inter",fontJp:"M PLUS 2",fontSize:"md",density:"normal",language:"ja",customDurations:[15,30,45,60,75,90,120],setThemeMode:e=>t({themeMode:e}),setFontEn:e=>t({fontEn:e}),setFontJp:e=>t({fontJp:e}),setFontSize:e=>t({fontSize:e}),setDensity:e=>t({density:e}),setLanguage:e=>t(n=>{const s={ja:{density:"normal",fontSize:"md"},en:{density:"comfortable",fontSize:"base"}}[e];return{language:e,density:s.density,fontSize:s.fontSize}}),setCustomDurations:e=>t({customDurations:e.sort((n,r)=>n-r)})}),{name:"app-settings",partialize:t=>({themeMode:t.themeMode,fontEn:t.fontEn,fontJp:t.fontJp,fontSize:t.fontSize,density:t.density,language:t.language,customDurations:t.customDurations})})),LO={dashboard:"",inbox:"",today:"",upcoming:"",completed:"",trash:"",projects:"",project:"",labels:"",filters:"",timeblocks:"",durations:"",targets:"",workspaces:"",settings:"",edit:"",active:"",add_task:"",search:"",no_tasks:"",loading:"...",saving:"...",done:"",error:"",backup_restore:"",general:"",appearance:"",account:"",language:"",important:"",all_tasks:"",add:"",close:"",clear:"",backward_map:"",woop_board:"WOOP",okr_tree:"OKR",msg:{task:{create_success:"",create_fail:"",update_success:"",update_fail:"",delete_success:"",delete_fail:"",complete_success:" ",status_update_fail:"",move_fail:""},auth:{login_success:"",logout_success:""},dnd:{reorderFailed:""},project:{reorder_fail:""},confirm_delete:`
`},delete:"",timeblock:"",filter:"",sidebar:{add_workspace:"",search_placeholder:" (/)",target_wizard:"",target_dashboard:"",framework_wiki:"Wiki",unassigned:"",toggle_collapse:"",toggle_expand:"",resizer_label:"",resizer_hint:"",menu_open:"",reorder_section:"",no_projects:"",duration_format:"{min}"},modal:{task_title_placeholder:"",filter_name_placeholder:": ",memo_markdown:" (Markdown)",edit:"",preview:"",schedule:"",due_date:"",recurrence:"",recurrence_days:"",time_block:"",duration:"",no_duration:"",no_project:"",cancel:"",save:"",create:"",delete:"",delete_confirm:"",no_memo:"",workspace_edit_title:"",workspace_create_title:"",workspace_name_label:"",workspace_name_placeholder:"...",workspace_desc_edit:"",workspace_desc_create:"",label_name:"",label_name_placeholder:"",label_create_placeholder:"",project_name:"",project_name_placeholder:"...",project_delete_confirm:"{name}",label_delete_confirm:"{name}",theme_color:"",delete_label:"",delete_project:""},task_detail:{recurrence_label:"",recurrence_days:"",time_block_label:"",time_block_unspecified:"",duration_label:"",duration_none:"",project_label:"",project_none:"",due_date_label:"",schedule_label:"",title_placeholder:"",delete_button:""},time_block:{add_button:"",max_limit:"10",unspecified:"",default_zone_desc:"",change_color:"",error_invalid_time:": {start}  {end}",error_overlap:": [{range1}]  [{range2}]",time_select:"",delete_confirm:"",settings_title:""},recurrence:{none:"",daily:"",weekdays:"",weekly:"",monthly:""},days:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},colors:{red:"",pink:"",purple:"",deep_purple:"",indigo:"",blue:"",light_blue:"",cyan:"",teal:"",green:"",light_green:"",lime:"",yellow:"",amber:"",orange:"",deep_orange:"",brown:"",grey:"",blue_grey:""},settings_modal:{title:"",tabs:{general:"",appearance:"",account:"",advanced:""},appearance:{theme:"",density:"",font_size:"",fonts:"",font_en:"",font_jp:""},backup:{title:"",description:"JSON",create:"",import:"",import_confirm:`
ID`,import_success:`
: {tasks}
: {projects}`,import_fail:"",create_fail:""},options:{theme:{light:"",dark:"",system:""},density:{compact:"",normal:"",comfortable:"",spacious:""}},language:{title:" (Language)",description:"UI"},maintenance:{title:"",description:"",cleanup_duplicate:"",confirm_backup:`

`,confirm_final:"",cleanup_success:"{count} ",cleanup_fail:": {error}"},account:{guest_user:"",registered_user:"",not_logged_in:"",logout:"",logout_confirm:"",persist_account:"",persist_desc:`
`,register:"",registering:"...",register_success:"",register_fail:"",already_in_use:"",weak_password:"",email_label:"Email",password_label:"Password",hide_password:"",show_password:"",registered_msg:""}},inline_input:{placeholder:"...",label:"",tooltip_today:"",tooltip_today_remove:"",tooltip_important:"",tooltip_important_remove:"",aria_today:"",aria_today_remove:"",aria_important:"",aria_important_remove:"",adding:"..."},validation:{required:"",workspace_name_required:"",workspace_duplicate:"",project_name_required:"",workspace_required:"",filter_name_required:"",filter_condition_required:"1",save_fail:"",delete_fail:"",label_name_required:"",label_workspace_required:"",workspace_confirm_switch:"",select_days:""},date_options:{today:"",tomorrow:"",week:"",next_week:""},task_list:{searching_results:': "{query}"',sort_manual:" ()",sort_created:"",sort_due:"",sort_important:"",sort_title:"",show_completed:"",hide_completed:"",no_tasks_title:"",no_tasks_desc_showing:"",no_tasks_desc_hiding:"",add_new_task:"",loading:"..."},task_stats:{count_label:"COUNT",count_unit:"",total_label:"TOTAL",avg_label:"AVG",avg_unit:"/",over:"",remaining:""},add_task_button:{add_task:"",add_with_title:"{title}",aria_label:""}},MO={dashboard:"Dashboard",inbox:"Inbox",today:"Today",upcoming:"Upcoming",completed:"Completed",trash:"Trash",projects:"Projects",project:"Project",labels:"Labels",filters:"Filters",timeblocks:"Time Blocks",durations:"Durations",targets:"Targets",workspaces:"Workspaces",settings:"Settings",edit:"Edit",active:"Active",add_task:"Add Task",search:"Search",no_tasks:"No tasks found",loading:"Loading...",saving:"Saving...",done:"Done",error:"An error occurred",backup_restore:"Backup & Restore",general:"General",appearance:"Appearance",account:"Account",language:"Language",important:"Important",all_tasks:"All Tasks",add:"Add",close:"Close",clear:"Clear",backward_map:"Backward Map",woop_board:"WOOP Board",okr_tree:"OKR Tree",msg:{task:{create_success:"Task created",create_fail:"Failed to create task",update_success:"Task updated",update_fail:"Failed to save task",delete_success:"Task deleted",delete_fail:"Failed to delete task",complete_success:"Task completed ",status_update_fail:"Failed to update status",move_fail:"Failed to move task"},auth:{login_success:"Logged in",logout_success:"Logged out"},dnd:{reorderFailed:"Failed to reorder"},project:{reorder_fail:"Failed to reorder projects"},confirm_delete:`Are you sure you want to delete this item?
This action cannot be undone.`},delete:"Delete",timeblock:"Time Block",filter:"Filter",sidebar:{add_workspace:"Add Workspace",search_placeholder:"Search (/)",target_wizard:"Target Wizard",target_dashboard:"Target Dashboard",framework_wiki:"Framework Wiki",unassigned:"Unassigned",toggle_collapse:"Collapse Sidebar",toggle_expand:"Expand Sidebar",resizer_label:"Resize Sidebar",resizer_hint:"Drag or use arrow keys to resize",menu_open:"Open Menu",reorder_section:"Reorder Section",no_projects:"No projects",duration_format:"{min} min"},modal:{task_title_placeholder:"Task Title",filter_name_placeholder:"e.g. Important tasks this week",memo_markdown:"Memo (Markdown)",edit:"Edit",preview:"Preview",schedule:"Schedule",due_date:"Due Date",recurrence:"Recurrence",recurrence_days:"Repeat Days",time_block:"Time Block",duration:"Duration",no_duration:"Not Set",no_project:"No Project",cancel:"Cancel",save:"Save",create:"Create",delete:"Delete",delete_confirm:"Are you sure you want to delete this task?",no_memo:"No memo",workspace_edit_title:"Edit Workspace Name",workspace_create_title:"New Workspace",workspace_name_label:"Workspace Name",workspace_name_placeholder:"Enter workspace name...",workspace_desc_edit:"Rename the workspace.",workspace_desc_create:"Create a new workspace to manage projects and tasks separately.",label_name:"Label Name",label_name_placeholder:"Label Name",label_create_placeholder:"New Label Name",project_name:"Project Name",project_name_placeholder:"Enter name...",project_delete_confirm:'Delete project "{name}"?',label_delete_confirm:'Delete label "{name}"?',theme_color:"Theme Color",delete_label:"Delete Label",delete_project:"Delete Project"},task_detail:{recurrence_label:"Recurrence",recurrence_days:"Repeat Days",time_block_label:"Time Block",time_block_unspecified:"Unspecified",duration_label:"Duration",duration_none:"None",project_label:"Project",project_none:"No Project",due_date_label:"Due Date",schedule_label:"Schedule",title_placeholder:"Task Title",delete_button:"Delete"},time_block:{add_button:"Add Time Block",max_limit:"Max 10 blocks allowed",unspecified:"Unspecified",default_zone_desc:"Default Zone",change_color:"Change Color",error_invalid_time:"Invalid Time: {start} - {end}",error_overlap:"Time Overlap: [{range1}] and [{range2}]",time_select:"Select Time",delete_confirm:"Delete this time block?",settings_title:"Time Block Settings"},recurrence:{none:"None",daily:"Daily",weekdays:"Weekdays",weekly:"Weekly",monthly:"Monthly"},days:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},colors:{red:"Red",pink:"Pink",purple:"Purple",deep_purple:"Deep Purple",indigo:"Indigo",blue:"Blue",light_blue:"Light Blue",cyan:"Cyan",teal:"Teal",green:"Green",light_green:"Light Green",lime:"Lime",yellow:"Yellow",amber:"Amber",orange:"Orange",deep_orange:"Deep Orange",brown:"Brown",grey:"Grey",blue_grey:"Blue Grey"},settings_modal:{title:"Settings",tabs:{general:"General",appearance:"Appearance",account:"Account",advanced:"Advanced"},appearance:{theme:"Theme",density:"Density",font_size:"Font Size",fonts:"Fonts",font_en:"English Font",font_jp:"Japanese Font"},backup:{title:"Backup & Restore",description:"Download workspace data (tasks, projects, settings) as JSON or restore from backup.",create:"Create Backup",import:"Import",import_confirm:`Import data into current workspace?
Existing data remains, but some IDs may change to prevent duplicates.`,import_success:`Import completed.
Tasks: {tasks}
Projects: {projects}`,import_fail:"Import failed. Please check the file format.",create_fail:"Failed to create backup."},options:{theme:{light:"Light",dark:"Dark",system:"System"},density:{compact:"Compact",normal:"Normal",comfortable:"Comfortable",spacious:"Spacious"}},language:{title:"Language",description:"Change the UI language."},maintenance:{title:"Database Maintenance",description:"Detect and clean up duplicate data. This action cannot be undone. Please backup before running.",cleanup_duplicate:"Clean Up Duplicates (Confirm)",confirm_backup:`[Warning] Deleting duplicate tasks.
Did you create a backup?
(Older duplicates will be removed)`,confirm_final:"[Final Confirm] This cannot be undone. Execute?",cleanup_success:"Deleted {count} duplicate tasks.",cleanup_fail:"Error occurred: {error}"},account:{guest_user:"Guest User",registered_user:"Registered User",not_logged_in:"Not logged in",logout:"Logout",logout_confirm:"Are you sure you want to logout?",persist_account:"Persist Account",persist_desc:`Your account is temporary.
Register an email to access your data from other devices.`,register:"Register Account",registering:"Registering...",register_success:"Account registered!",register_fail:"Registration failed",already_in_use:"Email already in use",weak_password:"Password is too weak",email_label:"Email",password_label:"Password",hide_password:"Hide Password",show_password:"Show Password",registered_msg:"Account is fully registered."}},inline_input:{placeholder:"Enter task name...",label:"Task Name",tooltip_today:"Do Today",tooltip_today_remove:"Remove Today",tooltip_important:"Mark Important",tooltip_important_remove:"Unmark Important",aria_today:"Set for today",aria_today_remove:"Remove from today",aria_important:"Mark as important",aria_important_remove:"Unmark as important",adding:"Adding..."},validation:{required:"Required",workspace_name_required:"Workspace name is required",workspace_duplicate:"This name is already taken",project_name_required:"Project name is required",workspace_required:"No workspace selected",filter_name_required:"Filter name is required",filter_condition_required:"Please select at least one condition",save_fail:"Failed to save",delete_fail:"Failed to delete",label_name_required:"Name is required",label_workspace_required:"Workspace not found",workspace_confirm_switch:"Switch to new workspace?",select_days:"Please select days"},date_options:{today:"Today",tomorrow:"Tomorrow",week:"This Week",next_week:"Next Week"},task_list:{searching_results:'Showing results for: "{query}"',sort_manual:"Manual (Reorder)",sort_created:"Date Created",sort_due:"Due Date",sort_important:"Importance",sort_title:"Title",show_completed:"Show Completed",hide_completed:"Hide Completed",no_tasks_title:"No tasks found",no_tasks_desc_showing:"Try changing filters or create a new task to start your day.",no_tasks_desc_hiding:"Show completed tasks or add a new task.",add_new_task:"Add New Task",loading:"Loading tasks..."},task_stats:{count_label:"COUNT",count_unit:"",total_label:"TOTAL",avg_label:"AVG",avg_unit:"/task",over:"Over",remaining:"Left"},add_task_button:{add_task:"Add Task",add_with_title:'Add "{title}" as task',aria_label:"Add new task"}},vx={ja:LO,en:MO},xd=t=>{function e(n,r){const s=vx[t],o=vx.en,l=(d,m)=>m.split(".").reduce((y,w)=>y&&y[w],d);let u=l(s,n);return u||(u=l(o,n)||n),r?Object.entries(r).reduce((d,[m,y])=>d.replace(`{${m}}`,String(y)),u):u}return{t:e}},ft=()=>{const t=$r(n=>n.language);return D.useMemo(()=>xd(t),[t])},At={SIDEBAR_DENSITY:{compact:"py-0.5",normal:"py-1.5",comfortable:"py-2.5",spacious:"py-3.5"},DND:{PREFIX_TASK:"task:",TYPE_PROJECT:"project",TYPE_INBOX:"inbox",TYPE_TIMEBLOCK:"timeblock",TOUCH_DELAY:250},STORAGE_KEYS:{SECTION_ORDER:"sidebar_section_order"},SIDEBAR:{MIN_WIDTH:150,MAX_WIDTH:500,DEFAULT_WIDTH:280,DURATIONS:[30,45,60,75,90]},LAYOUT:{CONTAINER_WIDTH_CLASS:"w-full max-w-full",MOBILE_SIDEBAR_WIDTH_PX:280},FONTS:{EU:[{label:"Google Sans",value:'"Google Sans", Inter, sans-serif'},{label:"Inter",value:"Inter, sans-serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"System UI",value:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}],JP:[{label:"M PLUS 2",value:'"M PLUS 2", sans-serif'},{label:"Noto Sans JP",value:'"Noto Sans JP", sans-serif'},{label:"Hiragino / Yu Gothic",value:'"Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif'}]}},di=[{value:"#EF5350",key:"red"},{value:"#EC407A",key:"pink"},{value:"#AB47BC",key:"purple"},{value:"#7E57C2",key:"deep_purple"},{value:"#5C6BC0",key:"indigo"},{value:"#42A5F5",key:"blue"},{value:"#29B6F6",key:"light_blue"},{value:"#26C6DA",key:"cyan"},{value:"#26A69A",key:"teal"},{value:"#66BB6A",key:"green"},{value:"#9CCC65",key:"light_green"},{value:"#D4E157",key:"lime"},{value:"#FFEE58",key:"yellow"},{value:"#FFCA28",key:"amber"},{value:"#FFA726",key:"orange"},{value:"#FF7043",key:"deep_orange"},{value:"#8D6E63",key:"brown"},{value:"#BDBDBD",key:"grey"},{value:"#78909C",key:"blue_grey"}];di.map(t=>t.value);const VO=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),gn=La(t=>({stack:[],openModal:(e,n=null)=>{if(!e)return;const s={id:VO(),type:e,data:n};t(o=>({stack:[...o.stack,s]}))},closeModal:()=>t(e=>e.stack.length===0?e:{stack:e.stack.slice(0,-1)}),closeAllModals:()=>t({stack:[]})})),FO=1024,z0=La()(bd(t=>({sidebarWidth:At.SIDEBAR.DEFAULT_WIDTH,isSidebarOpen:!0,sidebarDensity:"normal",setSidebarWidth:e=>{const n=Math.max(At.SIDEBAR.MIN_WIDTH,Math.min(e,At.SIDEBAR.MAX_WIDTH));t({sidebarWidth:n})},toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),setSidebarOpen:e=>t({isSidebarOpen:e}),setSidebarDensity:e=>t({sidebarDensity:e})}),{name:"ui-storage",partialize:t=>({sidebarWidth:t.sidebarWidth,sidebarDensity:t.sidebarDensity,isSidebarOpen:t.isSidebarOpen}),onRehydrateStorage:()=>t=>{typeof window<"u"&&window.innerWidth<FO&&(t==null||t.setSidebarOpen(!1))}})),zO="/assets/logo-BADOZ29k.png",Br=La()(bd(t=>({filterType:"inbox",targetId:null,query:"",showCompleted:!1,sortCriteria:"createdAt_desc",setFilter:(e,n=null)=>t({filterType:e,targetId:n,query:""}),setSearchQuery:e=>t({query:e,filterType:"search"}),clearFilter:()=>t({filterType:"inbox",targetId:null,query:""}),setShowCompleted:e=>t({showCompleted:e}),setSortCriteria:e=>t({sortCriteria:e})}),{name:"filter-storage",partialize:t=>({filterType:t.filterType,targetId:t.targetId,query:t.query,showCompleted:t.showCompleted,sortCriteria:t.sortCriteria})})),Ma=La()(bd(t=>({currentView:"tasks",viewData:null,setView:(e,n=null)=>t({currentView:e,viewData:n})}),{name:"view-storage",partialize:t=>({currentView:t.currentView})})),UO=()=>{const{t}=ft(),{query:e,setFilter:n}=Br(),{currentView:r,setView:s}=Ma(),o=r==="search",l=()=>{n("search"),s("search")};return p.jsxs("button",{onClick:l,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-all duration-200 group ${o?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700/50 text-gray-600 dark:text-gray-400"}`,"aria-label":t("sidebar.search_placeholder"),children:[p.jsx("svg",{className:`w-4 h-4 transition-colors ${o?"text-blue-600 dark:text-blue-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),p.jsx("span",{className:"flex-1 text-sm font-medium",children:e?`"${e}"`:t("sidebar.search_placeholder")}),p.jsx("span",{className:"text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"/"})]})},BO=({children:t})=>{const{sidebarWidth:e,isSidebarOpen:n,sidebarDensity:r,toggleSidebar:s,setSidebarWidth:o}=z0(),{t:l}=ft(),u={compact:"p-1",normal:"p-2",comfortable:"p-4",spacious:"p-6"}[r];Le.useEffect(()=>{const m=w=>{if(!document.body.classList.contains("resizing"))return;const x=Math.max(At.SIDEBAR.MIN_WIDTH,Math.min(At.SIDEBAR.MAX_WIDTH,w.clientX));o(x)},y=()=>{document.body.classList.remove("resizing"),document.body.style.cursor="default"};return document.addEventListener("mousemove",m),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",y)}},[o]);const d=()=>{document.body.classList.add("resizing"),document.body.style.cursor="col-resize"};return p.jsxs("aside",{className:Se("h-full transition-all duration-300 flex flex-col group relative","bg-white dark:bg-gray-900 lg:bg-white/70 lg:dark:bg-gray-800/60","lg:backdrop-blur-xl","border-r border-gray-200/50 dark:border-gray-700/30",n?"translate-x-0":"-translate-x-full lg:translate-x-0","fixed lg:relative z-30 lg:z-0 shadow-2xl lg:shadow-none overflow-hidden","w-[var(--sidebar-mobile)] lg:w-[var(--sidebar-desktop)]"),style:{"--sidebar-desktop":`${e}px`,"--sidebar-mobile":n?`${At.LAYOUT.MOBILE_SIDEBAR_WIDTH_PX}px`:"0px",width:n?void 0:"0px"},children:[p.jsxs("div",{className:"h-14 flex items-center px-4 flex-shrink-0 justify-between border-b border-gray-100 dark:border-gray-800/50",children:[p.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition select-none",children:[p.jsx("div",{className:"w-8 h-8 rounded-xl bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20",children:p.jsx("img",{src:zO,alt:"L",className:"h-5 w-5 invert brightness-0"})}),p.jsxs("span",{className:"text-lg font-black text-gray-900 dark:text-white tracking-tight",children:["Task",p.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]})]}),p.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all active:scale-90",title:l(n?"sidebar.toggle_collapse":"sidebar.toggle_expand"),"aria-label":l(n?"sidebar.toggle_collapse":"sidebar.toggle_expand"),children:p.jsx("svg",{className:Se("w-5 h-5 transition-transform duration-300",!n&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),p.jsx("div",{className:"px-3 pb-2 pt-2",children:p.jsx(UO,{})}),p.jsx("div",{className:Se("flex-1 overflow-y-auto custom-scrollbar pt-2",u),children:t}),p.jsx("div",{role:"separator","aria-orientation":"vertical","aria-label":l("sidebar.resizer_label"),"aria-valuenow":e,"aria-valuemin":At.SIDEBAR.MIN_WIDTH,"aria-valuemax":At.SIDEBAR.MAX_WIDTH,tabIndex:n?0:-1,onMouseDown:d,onKeyDown:m=>{m.key==="ArrowLeft"?o(Math.max(At.SIDEBAR.MIN_WIDTH,e-10)):m.key==="ArrowRight"&&o(Math.min(At.SIDEBAR.MAX_WIDTH,e+10))},className:Se("absolute top-0 right-0 w-3 h-full cursor-col-resize z-40 transition-colors hidden lg:flex items-center justify-center outline-none focus:bg-blue-500","hover:bg-blue-500/30 active:bg-blue-600/50 group/resizer"),title:l("sidebar.resizer_hint"),children:p.jsx("div",{className:"absolute w-1 h-12 bg-gray-400 dark:bg-gray-500 rounded-full opacity-0 group-hover/resizer:opacity-100 group-focus/resizer:opacity-100 transition-opacity pointer-events-none"})}),p.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-gray-200/50 dark:bg-gray-700/30 hidden lg:block"})]})};function te(t,e,n){function r(u,d){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:d,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,d);const m=l.prototype,y=Object.keys(m);for(let w=0;w<y.length;w++){const x=y[w];x in u||(u[x]=m[x].bind(u))}}const s=(n==null?void 0:n.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:t});function l(u){var d;const m=n!=null&&n.Parent?new o:this;r(m,u),(d=m._zod).deferred??(d.deferred=[]);for(const y of m._zod.deferred)y();return m}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>{var d,m;return n!=null&&n.Parent&&u instanceof n.Parent?!0:(m=(d=u==null?void 0:u._zod)==null?void 0:d.traits)==null?void 0:m.has(t)}}),Object.defineProperty(l,"name",{value:t}),l}class Ol extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class vI extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const _I={};function So(t){return _I}function wI(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function by(t,e){return typeof e=="bigint"?e.toString():e}function U0(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function B0(t){return t==null}function $0(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function $O(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const d=r.match(/\d?e-(\d?)/);d!=null&&d[1]&&(s=Number.parseInt(d[1]))}const o=n>s?n:s,l=Number.parseInt(t.toFixed(o).replace(".","")),u=Number.parseInt(e.toFixed(o).replace(".",""));return l%u/10**o}const _x=Symbol("evaluating");function bt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==_x)return r===void 0&&(r=_x,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Va(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Fa(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function wx(t){return JSON.stringify(t)}function WO(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const bI="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Wf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const qO=U0(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function sc(t){if(Wf(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Wf(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function xI(t){return sc(t)?{...t}:Array.isArray(t)?[...t]:t}const HO=new Set(["string","number","symbol"]);function Tp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Po(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function Ie(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function KO(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const GO={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function QO(t,e){const n=t._zod.def,r=Fa(t._zod.def,{get shape(){const s={};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(s[o]=n.shape[o])}return Va(this,"shape",s),s},checks:[]});return Po(t,r)}function ZO(t,e){const n=t._zod.def,r=Fa(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete s[o]}return Va(this,"shape",s),s},checks:[]});return Po(t,r)}function YO(t,e){if(!sc(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=Fa(t._zod.def,{get shape(){const o={...t._zod.def.shape,...e};return Va(this,"shape",o),o},checks:[]});return Po(t,s)}function JO(t,e){if(!sc(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return Va(this,"shape",r),r},checks:t._zod.def.checks};return Po(t,n)}function XO(t,e){const n=Fa(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Va(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Po(t,n)}function eL(t,e,n){const r=Fa(e._zod.def,{get shape(){const s=e._zod.def.shape,o={...s};if(n)for(const l in n){if(!(l in s))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=t?new t({type:"optional",innerType:s[l]}):s[l])}else for(const l in s)o[l]=t?new t({type:"optional",innerType:s[l]}):s[l];return Va(this,"shape",o),o},checks:[]});return Po(e,r)}function tL(t,e,n){const r=Fa(e._zod.def,{get shape(){const s=e._zod.def.shape,o={...s};if(n)for(const l in n){if(!(l in o))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)o[l]=new t({type:"nonoptional",innerType:s[l]});return Va(this,"shape",o),o},checks:[]});return Po(e,r)}function Cl(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Al(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Zh(t){return typeof t=="string"?t:t==null?void 0:t.message}function Co(t,e,n){var s,o,l,u,d,m;const r={...t,path:t.path??[]};if(!t.message){const y=Zh((l=(o=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:l.call(o,t))??Zh((u=e==null?void 0:e.error)==null?void 0:u.call(e,t))??Zh((d=n.customError)==null?void 0:d.call(n,t))??Zh((m=n.localeError)==null?void 0:m.call(n,t))??"Invalid input";r.message=y}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function W0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Hu(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const kI=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,by,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},EI=te("$ZodError",kI),TI=te("$ZodError",kI,{Parent:Error});function nL(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function rL(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>r({issues:l}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)n._errors.push(e(o));else{let l=n,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(e(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return r(t),n}const q0=t=>(e,n,r,s)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},o);if(l instanceof Promise)throw new Ol;if(l.issues.length){const u=new((s==null?void 0:s.Err)??t)(l.issues.map(d=>Co(d,o,So())));throw bI(u,s==null?void 0:s.callee),u}return l.value},H0=t=>async(e,n,r,s)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},o);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new((s==null?void 0:s.Err)??t)(l.issues.map(d=>Co(d,o,So())));throw bI(u,s==null?void 0:s.callee),u}return l.value},Ip=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},o=e._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new Ol;return o.issues.length?{success:!1,error:new(t??EI)(o.issues.map(l=>Co(l,s,So())))}:{success:!0,data:o.value}},sL=Ip(TI),Sp=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(l=>Co(l,s,So())))}:{success:!0,data:o.value}},iL=Sp(TI),oL=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return q0(t)(e,n,s)},aL=t=>(e,n,r)=>q0(t)(e,n,r),lL=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return H0(t)(e,n,s)},cL=t=>async(e,n,r)=>H0(t)(e,n,r),uL=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ip(t)(e,n,s)},dL=t=>(e,n,r)=>Ip(t)(e,n,r),hL=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Sp(t)(e,n,s)},fL=t=>async(e,n,r)=>Sp(t)(e,n,r),pL=/^[cC][^\s-]{8,}$/,mL=/^[0-9a-z]+$/,gL=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,yL=/^[0-9a-vA-V]{20}$/,vL=/^[A-Za-z0-9]{27}$/,_L=/^[a-zA-Z0-9_-]{21}$/,wL=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,bL=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,bx=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,xL=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,kL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function EL(){return new RegExp(kL,"u")}const TL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,IL=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,SL=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,CL=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,AL=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,II=/^[A-Za-z0-9_-]*$/,NL=/^\+(?:[0-9]){6,14}[0-9]$/,SI="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",RL=new RegExp(`^${SI}$`);function CI(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function PL(t){return new RegExp(`^${CI(t)}$`)}function jL(t){const e=CI({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${SI}T(?:${r})$`)}const DL=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},OL=/^-?\d+$/,LL=/^-?\d+(?:\.\d+)?/,ML=/^(?:true|false)$/i,VL=/^[^A-Z]*$/,FL=/^[^a-z]*$/,hr=te("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),AI={number:"number",bigint:"bigint",object:"date"},NI=te("$ZodCheckLessThan",(t,e)=>{hr.init(t,e);const n=AI[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,o=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),RI=te("$ZodCheckGreaterThan",(t,e)=>{hr.init(t,e);const n=AI[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,o=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),zL=te("$ZodCheckMultipleOf",(t,e)=>{hr.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):$O(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),UL=te("$ZodCheckNumberFormat",(t,e)=>{var l;hr.init(t,e),e.format=e.format||"float64";const n=(l=e.format)==null?void 0:l.includes("int"),r=n?"int":"number",[s,o]=GO[e.format];t._zod.onattach.push(u=>{const d=u._zod.bag;d.format=e.format,d.minimum=s,d.maximum=o,n&&(d.pattern=OL)}),t._zod.check=u=>{const d=u.value;if(n){if(!Number.isInteger(d)){u.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:d,inst:t});return}if(!Number.isSafeInteger(d)){d>0?u.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):u.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}d<s&&u.issues.push({origin:"number",input:d,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),d>o&&u.issues.push({origin:"number",input:d,code:"too_big",maximum:o,inst:t})}}),BL=te("$ZodCheckMaxLength",(t,e)=>{var n;hr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!B0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=W0(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),$L=te("$ZodCheckMinLength",(t,e)=>{var n;hr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!B0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=W0(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),WL=te("$ZodCheckLengthEquals",(t,e)=>{var n;hr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!B0(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,o=s.length;if(o===e.length)return;const l=W0(s),u=o>e.length;r.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Cp=te("$ZodCheckStringFormat",(t,e)=>{var n,r;hr.init(t,e),t._zod.onattach.push(s=>{const o=s._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),qL=te("$ZodCheckRegex",(t,e)=>{Cp.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),HL=te("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=VL),Cp.init(t,e)}),KL=te("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=FL),Cp.init(t,e)}),GL=te("$ZodCheckIncludes",(t,e)=>{hr.init(t,e);const n=Tp(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),QL=te("$ZodCheckStartsWith",(t,e)=>{hr.init(t,e);const n=new RegExp(`^${Tp(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),ZL=te("$ZodCheckEndsWith",(t,e)=>{hr.init(t,e);const n=new RegExp(`.*${Tp(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),YL=te("$ZodCheckOverwrite",(t,e)=>{hr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class JL{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),o=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of o)this.content.push(l)}compile(){const e=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new e(...n,s.join(`
`))}}const XL={major:4,minor:2,patch:1},Ot=te("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=XL;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const o of r)for(const l of o._zod.onattach)l(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const o=(u,d,m)=>{let y=Cl(u),w;for(const x of d){if(x._zod.def.when){if(!x._zod.def.when(u))continue}else if(y)continue;const E=u.issues.length,N=x._zod.check(u);if(N instanceof Promise&&(m==null?void 0:m.async)===!1)throw new Ol;if(w||N instanceof Promise)w=(w??Promise.resolve()).then(async()=>{await N,u.issues.length!==E&&(y||(y=Cl(u,E)))});else{if(u.issues.length===E)continue;y||(y=Cl(u,E))}}return w?w.then(()=>u):u},l=(u,d,m)=>{if(Cl(u))return u.aborted=!0,u;const y=o(d,r,m);if(y instanceof Promise){if(m.async===!1)throw new Ol;return y.then(w=>t._zod.parse(w,m))}return t._zod.parse(y,m)};t._zod.run=(u,d)=>{if(d.skipChecks)return t._zod.parse(u,d);if(d.direction==="backward"){const y=t._zod.parse({value:u.value,issues:[]},{...d,skipChecks:!0});return y instanceof Promise?y.then(w=>l(w,u,d)):l(y,u,d)}const m=t._zod.parse(u,d);if(m instanceof Promise){if(d.async===!1)throw new Ol;return m.then(y=>o(y,r,d))}return o(m,r,d)}}t["~standard"]={validate:o=>{var l;try{const u=sL(t,o);return u.success?{value:u.data}:{issues:(l=u.error)==null?void 0:l.issues}}catch{return iL(t,o).then(d=>{var m;return d.success?{value:d.data}:{issues:(m=d.error)==null?void 0:m.issues}})}},vendor:"zod",version:1}}),K0=te("$ZodString",(t,e)=>{var n;Ot.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??DL(t._zod.bag),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),Nt=te("$ZodStringFormat",(t,e)=>{Cp.init(t,e),K0.init(t,e)}),eM=te("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=bL),Nt.init(t,e)}),tM=te("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=bx(r))}else e.pattern??(e.pattern=bx());Nt.init(t,e)}),nM=te("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=xL),Nt.init(t,e)}),rM=te("$ZodURL",(t,e)=>{Nt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),sM=te("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=EL()),Nt.init(t,e)}),iM=te("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=_L),Nt.init(t,e)}),oM=te("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=pL),Nt.init(t,e)}),aM=te("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=mL),Nt.init(t,e)}),lM=te("$ZodULID",(t,e)=>{e.pattern??(e.pattern=gL),Nt.init(t,e)}),cM=te("$ZodXID",(t,e)=>{e.pattern??(e.pattern=yL),Nt.init(t,e)}),uM=te("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=vL),Nt.init(t,e)}),dM=te("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=jL(e)),Nt.init(t,e)}),hM=te("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=RL),Nt.init(t,e)}),fM=te("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=PL(e)),Nt.init(t,e)}),pM=te("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=wL),Nt.init(t,e)}),mM=te("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=TL),Nt.init(t,e),t._zod.bag.format="ipv4"}),gM=te("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=IL),Nt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),yM=te("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=SL),Nt.init(t,e)}),vM=te("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=CL),Nt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,o]=r;if(!o)throw new Error;const l=Number(o);if(`${l}`!==o)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function PI(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const _M=te("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=AL),Nt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{PI(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function wM(t){if(!II.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return PI(n)}const bM=te("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=II),Nt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{wM(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),xM=te("$ZodE164",(t,e)=>{e.pattern??(e.pattern=NL),Nt.init(t,e)});function kM(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const EM=te("$ZodJWT",(t,e)=>{Nt.init(t,e),t._zod.check=n=>{kM(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),jI=te("$ZodNumber",(t,e)=>{Ot.init(t,e),t._zod.pattern=t._zod.bag.pattern??LL,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...o?{received:o}:{}}),n}}),TM=te("$ZodNumberFormat",(t,e)=>{UL.init(t,e),jI.init(t,e)}),IM=te("$ZodBoolean",(t,e)=>{Ot.init(t,e),t._zod.pattern=ML,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),n}}),SM=te("$ZodUnknown",(t,e)=>{Ot.init(t,e),t._zod.parse=n=>n}),CM=te("$ZodNever",(t,e)=>{Ot.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),AM=te("$ZodDate",(t,e)=>{Ot.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const s=n.value,o=s instanceof Date;return o&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...o?{received:"Invalid Date"}:{},inst:t}),n}});function xx(t,e,n){t.issues.length&&e.issues.push(...Al(n,t.issues)),e.value[n]=t.value}const NM=te("$ZodArray",(t,e)=>{Ot.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const o=[];for(let l=0;l<s.length;l++){const u=s[l],d=e.element._zod.run({value:u,issues:[]},r);d instanceof Promise?o.push(d.then(m=>xx(m,n,l))):xx(d,n,l)}return o.length?Promise.all(o).then(()=>n):n}});function qf(t,e,n,r){t.issues.length&&e.issues.push(...Al(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function DI(t){var r,s,o,l;const e=Object.keys(t.shape);for(const u of e)if(!((l=(o=(s=(r=t.shape)==null?void 0:r[u])==null?void 0:s._zod)==null?void 0:o.traits)!=null&&l.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const n=KO(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function OI(t,e,n,r,s,o){const l=[],u=s.keySet,d=s.catchall._zod,m=d.def.type;for(const y in e){if(u.has(y))continue;if(m==="never"){l.push(y);continue}const w=d.run({value:e[y],issues:[]},r);w instanceof Promise?t.push(w.then(x=>qf(x,n,y,e))):qf(w,n,y,e)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:o}),t.length?Promise.all(t).then(()=>n):n}const RM=te("$ZodObject",(t,e)=>{Ot.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const d={...u};return Object.defineProperty(e,"shape",{value:d}),d}})}const r=U0(()=>DI(e));bt(t._zod,"propValues",()=>{const u=e.shape,d={};for(const m in u){const y=u[m]._zod;if(y.values){d[m]??(d[m]=new Set);for(const w of y.values)d[m].add(w)}}return d});const s=Wf,o=e.catchall;let l;t._zod.parse=(u,d)=>{l??(l=r.value);const m=u.value;if(!s(m))return u.issues.push({expected:"object",code:"invalid_type",input:m,inst:t}),u;u.value={};const y=[],w=l.shape;for(const x of l.keys){const N=w[x]._zod.run({value:m[x],issues:[]},d);N instanceof Promise?y.push(N.then(I=>qf(I,u,x,m))):qf(N,u,x,m)}return o?OI(y,m,u,d,r.value,t):y.length?Promise.all(y).then(()=>u):u}}),PM=te("$ZodObjectJIT",(t,e)=>{RM.init(t,e);const n=t._zod.parse,r=U0(()=>DI(e)),s=x=>{const E=new JL(["shape","payload","ctx"]),N=r.value,I=U=>{const G=wx(U);return`shape[${G}]._zod.run({ value: input[${G}], issues: [] }, ctx)`};E.write("const input = payload.value;");const S=Object.create(null);let V=0;for(const U of N.keys)S[U]=`key_${V++}`;E.write("const newResult = {};");for(const U of N.keys){const G=S[U],Z=wx(U);E.write(`const ${G} = ${I(U)};`),E.write(`
        if (${G}.issues.length) {
          payload.issues = payload.issues.concat(${G}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Z}, ...iss.path] : [${Z}]
          })));
        }
        
        
        if (${G}.value === undefined) {
          if (${Z} in input) {
            newResult[${Z}] = undefined;
          }
        } else {
          newResult[${Z}] = ${G}.value;
        }
        
      `)}E.write("payload.value = newResult;"),E.write("return payload;");const W=E.compile();return(U,G)=>W(x,U,G)};let o;const l=Wf,u=!_I.jitless,m=u&&qO.value,y=e.catchall;let w;t._zod.parse=(x,E)=>{w??(w=r.value);const N=x.value;return l(N)?u&&m&&(E==null?void 0:E.async)===!1&&E.jitless!==!0?(o||(o=s(e.shape)),x=o(x,E),y?OI([],N,x,E,w,t):x):n(x,E):(x.issues.push({expected:"object",code:"invalid_type",input:N,inst:t}),x)}});function kx(t,e,n,r){for(const o of t)if(o.issues.length===0)return e.value=o.value,e;const s=t.filter(o=>!Cl(o));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(o=>o.issues.map(l=>Co(l,r,So())))}),e)}const jM=te("$ZodUnion",(t,e)=>{Ot.init(t,e),bt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),bt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),bt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),bt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${s.map(o=>$0(o.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,o)=>{if(n)return r(s,o);let l=!1;const u=[];for(const d of e.options){const m=d._zod.run({value:s.value,issues:[]},o);if(m instanceof Promise)u.push(m),l=!0;else{if(m.issues.length===0)return m;u.push(m)}}return l?Promise.all(u).then(d=>kx(d,s,t,o)):kx(u,s,t,o)}}),DM=te("$ZodIntersection",(t,e)=>{Ot.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,o=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return o instanceof Promise||l instanceof Promise?Promise.all([o,l]).then(([d,m])=>Ex(n,d,m)):Ex(n,o,l)}});function xy(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(sc(t)&&sc(e)){const n=Object.keys(e),r=Object.keys(t).filter(o=>n.indexOf(o)!==-1),s={...t,...e};for(const o of r){const l=xy(t[o],e[o]);if(!l.valid)return{valid:!1,mergeErrorPath:[o,...l.mergeErrorPath]};s[o]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],o=e[r],l=xy(s,o);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Ex(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),Cl(t))return t;const r=xy(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const OM=te("$ZodRecord",(t,e)=>{Ot.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!sc(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:t}),n;const o=[],l=e.keyType._zod.values;if(l){n.value={};const u=new Set;for(const m of l)if(typeof m=="string"||typeof m=="number"||typeof m=="symbol"){u.add(typeof m=="number"?m.toString():m);const y=e.valueType._zod.run({value:s[m],issues:[]},r);y instanceof Promise?o.push(y.then(w=>{w.issues.length&&n.issues.push(...Al(m,w.issues)),n.value[m]=w.value})):(y.issues.length&&n.issues.push(...Al(m,y.issues)),n.value[m]=y.value)}let d;for(const m in s)u.has(m)||(d=d??[],d.push(m));d&&d.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:t,keys:d})}else{n.value={};for(const u of Reflect.ownKeys(s)){if(u==="__proto__")continue;const d=e.keyType._zod.run({value:u,issues:[]},r);if(d instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(d.issues.length){e.mode==="loose"?n.value[u]=s[u]:n.issues.push({code:"invalid_key",origin:"record",issues:d.issues.map(y=>Co(y,r,So())),input:u,path:[u],inst:t});continue}const m=e.valueType._zod.run({value:s[u],issues:[]},r);m instanceof Promise?o.push(m.then(y=>{y.issues.length&&n.issues.push(...Al(u,y.issues)),n.value[d.value]=y.value})):(m.issues.length&&n.issues.push(...Al(u,m.issues)),n.value[d.value]=m.value)}}return o.length?Promise.all(o).then(()=>n):n}}),LM=te("$ZodEnum",(t,e)=>{Ot.init(t,e);const n=wI(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>HO.has(typeof s)).map(s=>typeof s=="string"?Tp(s):s.toString()).join("|")})$`),t._zod.parse=(s,o)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),MM=te("$ZodTransform",(t,e)=>{Ot.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new vI(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new Ol;return n.value=s,n}});function Tx(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const VM=te("$ZodOptional",(t,e)=>{Ot.init(t,e),t._zod.optin="optional",t._zod.optout="optional",bt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),bt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${$0(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>Tx(o,n.value)):Tx(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),FM=te("$ZodNullable",(t,e)=>{Ot.init(t,e),bt(t._zod,"optin",()=>e.innerType._zod.optin),bt(t._zod,"optout",()=>e.innerType._zod.optout),bt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${$0(n.source)}|null)$`):void 0}),bt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),zM=te("$ZodDefault",(t,e)=>{Ot.init(t,e),t._zod.optin="optional",bt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>Ix(o,e)):Ix(s,e)}});function Ix(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const UM=te("$ZodPrefault",(t,e)=>{Ot.init(t,e),t._zod.optin="optional",bt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),BM=te("$ZodNonOptional",(t,e)=>{Ot.init(t,e),bt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>Sx(o,t)):Sx(s,t)}});function Sx(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const $M=te("$ZodCatch",(t,e)=>{Ot.init(t,e),bt(t._zod,"optin",()=>e.innerType._zod.optin),bt(t._zod,"optout",()=>e.innerType._zod.optout),bt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>(n.value=o.value,o.issues.length&&(n.value=e.catchValue({...n,error:{issues:o.issues.map(l=>Co(l,r,So()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(o=>Co(o,r,So()))},input:n.value}),n.issues=[]),n)}}),WM=te("$ZodPipe",(t,e)=>{Ot.init(t,e),bt(t._zod,"values",()=>e.in._zod.values),bt(t._zod,"optin",()=>e.in._zod.optin),bt(t._zod,"optout",()=>e.out._zod.optout),bt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const o=e.out._zod.run(n,r);return o instanceof Promise?o.then(l=>Yh(l,e.in,r)):Yh(o,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(o=>Yh(o,e.out,r)):Yh(s,e.out,r)}});function Yh(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const qM=te("$ZodReadonly",(t,e)=>{Ot.init(t,e),bt(t._zod,"propValues",()=>e.innerType._zod.propValues),bt(t._zod,"values",()=>e.innerType._zod.values),bt(t._zod,"optin",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),bt(t._zod,"optout",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(Cx):Cx(s)}});function Cx(t){return t.value=Object.freeze(t.value),t}const HM=te("$ZodCustom",(t,e)=>{hr.init(t,e),Ot.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(o=>Ax(o,n,r,t));Ax(s,n,r,t)}});function Ax(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Hu(s))}}var Nx;class KM{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function GM(){return new KM}(Nx=globalThis).__zod_globalRegistry??(Nx.__zod_globalRegistry=GM());const yu=globalThis.__zod_globalRegistry;function QM(t,e){return new t({type:"string",...Ie(e)})}function ZM(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Ie(e)})}function Rx(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Ie(e)})}function YM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Ie(e)})}function JM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ie(e)})}function XM(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ie(e)})}function e5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ie(e)})}function t5(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Ie(e)})}function n5(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Ie(e)})}function r5(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ie(e)})}function s5(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Ie(e)})}function i5(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ie(e)})}function o5(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Ie(e)})}function a5(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Ie(e)})}function l5(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ie(e)})}function c5(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ie(e)})}function u5(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ie(e)})}function d5(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ie(e)})}function h5(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ie(e)})}function f5(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Ie(e)})}function p5(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Ie(e)})}function m5(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Ie(e)})}function g5(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Ie(e)})}function y5(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ie(e)})}function v5(t,e){return new t({type:"string",format:"date",check:"string_format",...Ie(e)})}function _5(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Ie(e)})}function w5(t,e){return new t({type:"string",format:"duration",check:"string_format",...Ie(e)})}function b5(t,e){return new t({type:"number",checks:[],...Ie(e)})}function x5(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Ie(e)})}function k5(t,e){return new t({type:"boolean",...Ie(e)})}function E5(t){return new t({type:"unknown"})}function T5(t,e){return new t({type:"never",...Ie(e)})}function I5(t,e){return new t({type:"date",...Ie(e)})}function Px(t,e){return new NI({check:"less_than",...Ie(e),value:t,inclusive:!1})}function _f(t,e){return new NI({check:"less_than",...Ie(e),value:t,inclusive:!0})}function jx(t,e){return new RI({check:"greater_than",...Ie(e),value:t,inclusive:!1})}function wf(t,e){return new RI({check:"greater_than",...Ie(e),value:t,inclusive:!0})}function Dx(t,e){return new zL({check:"multiple_of",...Ie(e),value:t})}function LI(t,e){return new BL({check:"max_length",...Ie(e),maximum:t})}function Hf(t,e){return new $L({check:"min_length",...Ie(e),minimum:t})}function MI(t,e){return new WL({check:"length_equals",...Ie(e),length:t})}function S5(t,e){return new qL({check:"string_format",format:"regex",...Ie(e),pattern:t})}function C5(t){return new HL({check:"string_format",format:"lowercase",...Ie(t)})}function A5(t){return new KL({check:"string_format",format:"uppercase",...Ie(t)})}function N5(t,e){return new GL({check:"string_format",format:"includes",...Ie(e),includes:t})}function R5(t,e){return new QL({check:"string_format",format:"starts_with",...Ie(e),prefix:t})}function P5(t,e){return new ZL({check:"string_format",format:"ends_with",...Ie(e),suffix:t})}function bc(t){return new YL({check:"overwrite",tx:t})}function j5(t){return bc(e=>e.normalize(t))}function D5(){return bc(t=>t.trim())}function O5(){return bc(t=>t.toLowerCase())}function L5(){return bc(t=>t.toUpperCase())}function M5(){return bc(t=>WO(t))}function V5(t,e,n){return new t({type:"array",element:e,...Ie(n)})}function F5(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Ie(n)})}function z5(t){const e=U5(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Hu(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Hu(s))}},t(n.value,n)));return e}function U5(t,e){const n=new hr({check:"custom",...Ie(e)});return n._zod.check=t,n}function VI(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??yu,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function on(t,e,n={path:[],schemaPath:[]}){var y,w;var r;const s=t._zod.def,o=e.seen.get(t);if(o)return o.count++,n.schemaPath.includes(t)&&(o.cycle=n.path),o.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const u=(w=(y=t._zod).toJSONSchema)==null?void 0:w.call(y);if(u)l.schema=u;else{const x={...n,schemaPath:[...n.schemaPath,t],path:n.path},E=t._zod.parent;if(E)l.ref=E,on(E,e,x),e.seen.get(E).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,x);else{const N=l.schema,I=e.processors[s.type];if(!I)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);I(t,e,N,x)}}const d=e.metadataRegistry.get(t);return d&&Object.assign(l.schema,d),e.io==="input"&&qn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function FI(t,e){var o,l,u;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=d=>{var E;const m=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const N=(E=t.external.registry.get(d[0]))==null?void 0:E.id,I=t.external.uri??(V=>V);if(N)return{ref:I(N)};const S=d[1].defId??d[1].schema.id??`schema${t.counter++}`;return d[1].defId=S,{defId:S,ref:`${I("__shared")}#/${m}/${S}`}}if(d[1]===n)return{ref:"#"};const w=`#/${m}/`,x=d[1].schema.id??`__schema${t.counter++}`;return{defId:x,ref:w+x}},s=d=>{if(d[1].schema.$ref)return;const m=d[1],{ref:y,defId:w}=r(d);m.def={...m.schema},w&&(m.defId=w);const x=m.schema;for(const E in x)delete x[E];x.$ref=y};if(t.cycles==="throw")for(const d of t.seen.entries()){const m=d[1];if(m.cycle)throw new Error(`Cycle detected: #/${(o=m.cycle)==null?void 0:o.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const d of t.seen.entries()){const m=d[1];if(e===d[0]){s(d);continue}if(t.external){const w=(l=t.external.registry.get(d[0]))==null?void 0:l.id;if(e!==d[0]&&w){s(d);continue}}if((u=t.metadataRegistry.get(d[0]))==null?void 0:u.id){s(d);continue}if(m.cycle){s(d);continue}if(m.count>1&&t.reused==="ref"){s(d);continue}}}function zI(t,e){var l,u,d;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=m=>{const y=t.seen.get(m),w=y.def??y.schema,x={...w};if(y.ref===null)return;const E=y.ref;if(y.ref=null,E){r(E);const N=t.seen.get(E).schema;N.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(w.allOf=w.allOf??[],w.allOf.push(N)):(Object.assign(w,N),Object.assign(w,x))}y.isParent||t.override({zodSchema:m,jsonSchema:w,path:y.path??[]})};for(const m of[...t.seen.entries()].reverse())r(m[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,(l=t.external)!=null&&l.uri){const m=(u=t.external.registry.get(e))==null?void 0:u.id;if(!m)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(m)}Object.assign(s,n.def??n.schema);const o=((d=t.external)==null?void 0:d.defs)??{};for(const m of t.seen.entries()){const y=m[1];y.def&&y.defId&&(o[y.defId]=y.def)}t.external||Object.keys(o).length>0&&(t.target==="draft-2020-12"?s.$defs=o:s.definitions=o);try{const m=JSON.parse(JSON.stringify(s));return Object.defineProperty(m,"~standard",{value:{...e["~standard"],jsonSchema:{input:Kf(e,"input"),output:Kf(e,"output")}},enumerable:!1,writable:!1}),m}catch{throw new Error("Error converting schema to JSON.")}}function qn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return qn(r.element,n);if(r.type==="set")return qn(r.valueType,n);if(r.type==="lazy")return qn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return qn(r.innerType,n);if(r.type==="intersection")return qn(r.left,n)||qn(r.right,n);if(r.type==="record"||r.type==="map")return qn(r.keyType,n)||qn(r.valueType,n);if(r.type==="pipe")return qn(r.in,n)||qn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(qn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(qn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(qn(s,n))return!0;return!!(r.rest&&qn(r.rest,n))}return!1}const B5=(t,e={})=>n=>{const r=VI({...n,processors:e});return on(t,r),FI(r,t),zI(r,t)},Kf=(t,e)=>n=>{const{libraryOptions:r,target:s}=n??{},o=VI({...r??{},target:s,io:e,processors:{}});return on(t,o),FI(o,t),zI(o,t)},$5={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},W5=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:o,maximum:l,format:u,patterns:d,contentEncoding:m}=t._zod.bag;if(typeof o=="number"&&(s.minLength=o),typeof l=="number"&&(s.maxLength=l),u&&(s.format=$5[u]??u,s.format===""&&delete s.format),m&&(s.contentEncoding=m),d&&d.size>0){const y=[...d];y.length===1?s.pattern=y[0].source:y.length>1&&(s.allOf=[...y.map(w=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:w.source}))])}},q5=(t,e,n,r)=>{const s=n,{minimum:o,maximum:l,format:u,multipleOf:d,exclusiveMaximum:m,exclusiveMinimum:y}=t._zod.bag;typeof u=="string"&&u.includes("int")?s.type="integer":s.type="number",typeof y=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=y,s.exclusiveMinimum=!0):s.exclusiveMinimum=y),typeof o=="number"&&(s.minimum=o,typeof y=="number"&&e.target!=="draft-04"&&(y>=o?delete s.minimum:delete s.exclusiveMinimum)),typeof m=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=m,s.exclusiveMaximum=!0):s.exclusiveMaximum=m),typeof l=="number"&&(s.maximum=l,typeof m=="number"&&e.target!=="draft-04"&&(m<=l?delete s.maximum:delete s.exclusiveMaximum)),typeof d=="number"&&(s.multipleOf=d)},H5=(t,e,n,r)=>{n.type="boolean"},K5=(t,e,n,r)=>{n.not={}},G5=(t,e,n,r)=>{},Q5=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},Z5=(t,e,n,r)=>{const s=t._zod.def,o=wI(s.entries);o.every(l=>typeof l=="number")&&(n.type="number"),o.every(l=>typeof l=="string")&&(n.type="string"),n.enum=o},Y5=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},J5=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},X5=(t,e,n,r)=>{const s=n,o=t._zod.def,{minimum:l,maximum:u}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=on(o.element,e,{...r,path:[...r.path,"items"]})},e3=(t,e,n,r)=>{var m;const s=n,o=t._zod.def;s.type="object",s.properties={};const l=o.shape;for(const y in l)s.properties[y]=on(l[y],e,{...r,path:[...r.path,"properties",y]});const u=new Set(Object.keys(l)),d=new Set([...u].filter(y=>{const w=o.shape[y]._zod;return e.io==="input"?w.optin===void 0:w.optout===void 0}));d.size>0&&(s.required=Array.from(d)),((m=o.catchall)==null?void 0:m._zod.def.type)==="never"?s.additionalProperties=!1:o.catchall?o.catchall&&(s.additionalProperties=on(o.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},t3=(t,e,n,r)=>{const s=t._zod.def,o=s.inclusive===!1,l=s.options.map((u,d)=>on(u,e,{...r,path:[...r.path,o?"oneOf":"anyOf",d]}));o?n.oneOf=l:n.anyOf=l},n3=(t,e,n,r)=>{const s=t._zod.def,o=on(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=on(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=m=>"allOf"in m&&Object.keys(m).length===1,d=[...u(o)?o.allOf:[o],...u(l)?l.allOf:[l]];n.allOf=d},r3=(t,e,n,r)=>{const s=n,o=t._zod.def;s.type="object",(e.target==="draft-07"||e.target==="draft-2020-12")&&(s.propertyNames=on(o.keyType,e,{...r,path:[...r.path,"propertyNames"]})),s.additionalProperties=on(o.valueType,e,{...r,path:[...r.path,"additionalProperties"]})},s3=(t,e,n,r)=>{const s=t._zod.def,o=on(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[o,{type:"null"}]},i3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType},o3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},a3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},l3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},c3=(t,e,n,r)=>{const s=t._zod.def,o=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;on(o,e,r);const l=e.seen.get(t);l.ref=o},u3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,n.readOnly=!0},d3=(t,e,n,r)=>{const s=t._zod.def;on(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType},h3=te("ZodISODateTime",(t,e)=>{dM.init(t,e),Lt.init(t,e)});function f3(t){return y5(h3,t)}const p3=te("ZodISODate",(t,e)=>{hM.init(t,e),Lt.init(t,e)});function m3(t){return v5(p3,t)}const g3=te("ZodISOTime",(t,e)=>{fM.init(t,e),Lt.init(t,e)});function y3(t){return _5(g3,t)}const v3=te("ZodISODuration",(t,e)=>{pM.init(t,e),Lt.init(t,e)});function _3(t){return w5(v3,t)}const w3=(t,e)=>{EI.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>rL(t,n)},flatten:{value:n=>nL(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,by,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,by,2)}},isEmpty:{get(){return t.issues.length===0}}})},Wr=te("ZodError",w3,{Parent:Error}),b3=q0(Wr),x3=H0(Wr),k3=Ip(Wr),E3=Sp(Wr),T3=oL(Wr),I3=aL(Wr),S3=lL(Wr),C3=cL(Wr),A3=uL(Wr),N3=dL(Wr),R3=hL(Wr),P3=fL(Wr),zt=te("ZodType",(t,e)=>(Ot.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Kf(t,"input"),output:Kf(t,"output")}}),t.toJSONSchema=B5(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Fa(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>Po(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>b3(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>k3(t,n,r),t.parseAsync=async(n,r)=>x3(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>E3(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>T3(t,n,r),t.decode=(n,r)=>I3(t,n,r),t.encodeAsync=async(n,r)=>S3(t,n,r),t.decodeAsync=async(n,r)=>C3(t,n,r),t.safeEncode=(n,r)=>A3(t,n,r),t.safeDecode=(n,r)=>N3(t,n,r),t.safeEncodeAsync=async(n,r)=>R3(t,n,r),t.safeDecodeAsync=async(n,r)=>P3(t,n,r),t.refine=(n,r)=>t.check(TV(n,r)),t.superRefine=n=>t.check(IV(n)),t.overwrite=n=>t.check(bc(n)),t.optional=()=>Vx(t),t.nullable=()=>Fx(t),t.nullish=()=>Vx(Fx(t)),t.nonoptional=n=>_V(t,n),t.array=()=>G0(t),t.or=n=>$I([t,n]),t.and=n=>cV(t,n),t.transform=n=>zx(t,fV(n)),t.default=n=>gV(t,n),t.prefault=n=>vV(t,n),t.catch=n=>bV(t,n),t.pipe=n=>zx(t,n),t.readonly=()=>EV(t),t.describe=n=>{const r=t.clone();return yu.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=yu.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return yu.get(t);const r=t.clone();return yu.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),UI=te("_ZodString",(t,e)=>{K0.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(r,s,o)=>W5(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(S5(...r)),t.includes=(...r)=>t.check(N5(...r)),t.startsWith=(...r)=>t.check(R5(...r)),t.endsWith=(...r)=>t.check(P5(...r)),t.min=(...r)=>t.check(Hf(...r)),t.max=(...r)=>t.check(LI(...r)),t.length=(...r)=>t.check(MI(...r)),t.nonempty=(...r)=>t.check(Hf(1,...r)),t.lowercase=r=>t.check(C5(r)),t.uppercase=r=>t.check(A5(r)),t.trim=()=>t.check(D5()),t.normalize=(...r)=>t.check(j5(...r)),t.toLowerCase=()=>t.check(O5()),t.toUpperCase=()=>t.check(L5()),t.slugify=()=>t.check(M5())}),j3=te("ZodString",(t,e)=>{K0.init(t,e),UI.init(t,e),t.email=n=>t.check(ZM(D3,n)),t.url=n=>t.check(t5(O3,n)),t.jwt=n=>t.check(g5(Z3,n)),t.emoji=n=>t.check(n5(L3,n)),t.guid=n=>t.check(Rx(Ox,n)),t.uuid=n=>t.check(YM(Jh,n)),t.uuidv4=n=>t.check(JM(Jh,n)),t.uuidv6=n=>t.check(XM(Jh,n)),t.uuidv7=n=>t.check(e5(Jh,n)),t.nanoid=n=>t.check(r5(M3,n)),t.guid=n=>t.check(Rx(Ox,n)),t.cuid=n=>t.check(s5(V3,n)),t.cuid2=n=>t.check(i5(F3,n)),t.ulid=n=>t.check(o5(z3,n)),t.base64=n=>t.check(f5(K3,n)),t.base64url=n=>t.check(p5(G3,n)),t.xid=n=>t.check(a5(U3,n)),t.ksuid=n=>t.check(l5(B3,n)),t.ipv4=n=>t.check(c5($3,n)),t.ipv6=n=>t.check(u5(W3,n)),t.cidrv4=n=>t.check(d5(q3,n)),t.cidrv6=n=>t.check(h5(H3,n)),t.e164=n=>t.check(m5(Q3,n)),t.datetime=n=>t.check(f3(n)),t.date=n=>t.check(m3(n)),t.time=n=>t.check(y3(n)),t.duration=n=>t.check(_3(n))});function ot(t){return QM(j3,t)}const Lt=te("ZodStringFormat",(t,e)=>{Nt.init(t,e),UI.init(t,e)}),D3=te("ZodEmail",(t,e)=>{nM.init(t,e),Lt.init(t,e)}),Ox=te("ZodGUID",(t,e)=>{eM.init(t,e),Lt.init(t,e)}),Jh=te("ZodUUID",(t,e)=>{tM.init(t,e),Lt.init(t,e)}),O3=te("ZodURL",(t,e)=>{rM.init(t,e),Lt.init(t,e)}),L3=te("ZodEmoji",(t,e)=>{sM.init(t,e),Lt.init(t,e)}),M3=te("ZodNanoID",(t,e)=>{iM.init(t,e),Lt.init(t,e)}),V3=te("ZodCUID",(t,e)=>{oM.init(t,e),Lt.init(t,e)}),F3=te("ZodCUID2",(t,e)=>{aM.init(t,e),Lt.init(t,e)}),z3=te("ZodULID",(t,e)=>{lM.init(t,e),Lt.init(t,e)}),U3=te("ZodXID",(t,e)=>{cM.init(t,e),Lt.init(t,e)}),B3=te("ZodKSUID",(t,e)=>{uM.init(t,e),Lt.init(t,e)}),$3=te("ZodIPv4",(t,e)=>{mM.init(t,e),Lt.init(t,e)}),W3=te("ZodIPv6",(t,e)=>{gM.init(t,e),Lt.init(t,e)}),q3=te("ZodCIDRv4",(t,e)=>{yM.init(t,e),Lt.init(t,e)}),H3=te("ZodCIDRv6",(t,e)=>{vM.init(t,e),Lt.init(t,e)}),K3=te("ZodBase64",(t,e)=>{_M.init(t,e),Lt.init(t,e)}),G3=te("ZodBase64URL",(t,e)=>{bM.init(t,e),Lt.init(t,e)}),Q3=te("ZodE164",(t,e)=>{xM.init(t,e),Lt.init(t,e)}),Z3=te("ZodJWT",(t,e)=>{EM.init(t,e),Lt.init(t,e)}),BI=te("ZodNumber",(t,e)=>{jI.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(r,s,o)=>q5(t,r,s),t.gt=(r,s)=>t.check(jx(r,s)),t.gte=(r,s)=>t.check(wf(r,s)),t.min=(r,s)=>t.check(wf(r,s)),t.lt=(r,s)=>t.check(Px(r,s)),t.lte=(r,s)=>t.check(_f(r,s)),t.max=(r,s)=>t.check(_f(r,s)),t.int=r=>t.check(Lx(r)),t.safe=r=>t.check(Lx(r)),t.positive=r=>t.check(jx(0,r)),t.nonnegative=r=>t.check(wf(0,r)),t.negative=r=>t.check(Px(0,r)),t.nonpositive=r=>t.check(_f(0,r)),t.multipleOf=(r,s)=>t.check(Dx(r,s)),t.step=(r,s)=>t.check(Dx(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function Ku(t){return b5(BI,t)}const Y3=te("ZodNumberFormat",(t,e)=>{TM.init(t,e),BI.init(t,e)});function Lx(t){return x5(Y3,t)}const J3=te("ZodBoolean",(t,e)=>{IM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>H5(t,n,r)});function X3(t){return k5(J3,t)}const eV=te("ZodUnknown",(t,e)=>{SM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>G5()});function Mx(){return E5(eV)}const tV=te("ZodNever",(t,e)=>{CM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>K5(t,n,r)});function nV(t){return T5(tV,t)}const rV=te("ZodDate",(t,e)=>{AM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(r,s,o)=>Q5(t,r),t.min=(r,s)=>t.check(wf(r,s)),t.max=(r,s)=>t.check(_f(r,s));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function sV(t){return I5(rV,t)}const iV=te("ZodArray",(t,e)=>{NM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>X5(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Hf(n,r)),t.nonempty=n=>t.check(Hf(1,n)),t.max=(n,r)=>t.check(LI(n,r)),t.length=(n,r)=>t.check(MI(n,r)),t.unwrap=()=>t.element});function G0(t,e){return V5(iV,t,e)}const oV=te("ZodObject",(t,e)=>{PM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>e3(t,n,r,s),bt(t,"shape",()=>e.shape),t.keyof=()=>Q0(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Mx()}),t.loose=()=>t.clone({...t._zod.def,catchall:Mx()}),t.strict=()=>t.clone({...t._zod.def,catchall:nV()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>YO(t,n),t.safeExtend=n=>JO(t,n),t.merge=n=>XO(t,n),t.pick=n=>QO(t,n),t.omit=n=>ZO(t,n),t.partial=(...n)=>eL(WI,t,n[0]),t.required=(...n)=>tL(qI,t,n[0])});function jo(t,e){const n={type:"object",shape:t??{},...Ie(e)};return new oV(n)}const aV=te("ZodUnion",(t,e)=>{jM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>t3(t,n,r,s),t.options=e.options});function $I(t,e){return new aV({type:"union",options:t,...Ie(e)})}const lV=te("ZodIntersection",(t,e)=>{DM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>n3(t,n,r,s)});function cV(t,e){return new lV({type:"intersection",left:t,right:e})}const uV=te("ZodRecord",(t,e)=>{OM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>r3(t,n,r,s),t.keyType=e.keyType,t.valueType=e.valueType});function dV(t,e,n){return new uV({type:"record",keyType:t,valueType:e,...Ie(n)})}const ky=te("ZodEnum",(t,e)=>{LM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(r,s,o)=>Z5(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const o={};for(const l of r)if(n.has(l))o[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new ky({...e,checks:[],...Ie(s),entries:o})},t.exclude=(r,s)=>{const o={...e.entries};for(const l of r)if(n.has(l))delete o[l];else throw new Error(`Key ${l} not found in enum`);return new ky({...e,checks:[],...Ie(s),entries:o})}});function Q0(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new ky({type:"enum",entries:n,...Ie(e)})}const hV=te("ZodTransform",(t,e)=>{MM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>J5(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new vI(t.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(Hu(o,n.value,e));else{const l=o;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(Hu(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(o=>(n.value=o,n)):(n.value=s,n)}});function fV(t){return new hV({type:"transform",transform:t})}const WI=te("ZodOptional",(t,e)=>{VM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>d3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Vx(t){return new WI({type:"optional",innerType:t})}const pV=te("ZodNullable",(t,e)=>{FM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>s3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Fx(t){return new pV({type:"nullable",innerType:t})}const mV=te("ZodDefault",(t,e)=>{zM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>o3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function gV(t,e){return new mV({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():xI(e)}})}const yV=te("ZodPrefault",(t,e)=>{UM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>a3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function vV(t,e){return new yV({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():xI(e)}})}const qI=te("ZodNonOptional",(t,e)=>{BM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>i3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function _V(t,e){return new qI({type:"nonoptional",innerType:t,...Ie(e)})}const wV=te("ZodCatch",(t,e)=>{$M.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>l3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function bV(t,e){return new wV({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const xV=te("ZodPipe",(t,e)=>{WM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>c3(t,n,r,s),t.in=e.in,t.out=e.out});function zx(t,e){return new xV({type:"pipe",in:t,out:e})}const kV=te("ZodReadonly",(t,e)=>{qM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>u3(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function EV(t){return new kV({type:"readonly",innerType:t})}const HI=te("ZodCustom",(t,e)=>{HM.init(t,e),zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Y5(t,n)});function TV(t,e={}){return F5(HI,t,e)}function IV(t){return z5(t)}function SV(t,e={error:`Input not instance of ${t.name}`}){const n=new HI({type:"custom",check:"custom",fn:r=>r instanceof t,abort:!0,...Ie(e)});return n._zod.bag.Class=t,n}const hi=$I([sV(),SV(Tt),ot().datetime({offset:!0}).or(ot().datetime())]).nullable().optional(),CV=jo({type:Q0(["none","daily","weekly","weekdays","monthly"]).default("none"),days:G0(Ku().min(0).max(6)).optional()}).nullable(),Z0=jo({id:ot().optional(),title:ot().min(1,""),description:ot().nullable().optional(),status:Q0(["todo","completed","archived"]).default("todo"),dueDate:hi,completedAt:hi,createdAt:hi,ownerId:ot(),projectId:ot().nullable().optional(),labelIds:G0(ot()).optional(),timeBlockId:ot().nullable().optional(),duration:Ku().min(0,"0").optional(),isImportant:X3().default(!1),recurrence:CV,order:Ku().optional()});jo({id:ot().optional(),name:ot().min(1,""),color:ot().optional(),ownerId:ot(),createdAt:hi,order:Ku().optional()});jo({id:ot().optional(),name:ot().min(1,""),color:ot().optional(),ownerId:ot(),workspaceId:ot().optional(),createdAt:hi});const KI=jo({id:ot().optional(),name:ot().min(1,""),createdAt:hi}),GI=jo({id:ot().optional(),name:ot().min(1,""),query:ot(),workspaceId:ot().optional(),createdAt:hi}),Ux=ot().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,"HH:mm: 09:00, 14:30");jo({id:ot().optional(),name:ot().min(1,""),start:Ux,end:Ux,color:ot().optional(),order:Ku().optional()});jo({id:ot().optional(),mode:ot(),data:dV(ot(),ot()),createdAt:hi,updatedAt:hi,ownerId:ot(),workspaceId:ot()});const Fs=La()(bd(t=>({currentWorkspaceId:null,workspaces:[],setCurrentWorkspaceId:e=>t({currentWorkspaceId:e}),setWorkspaces:e=>{const n=e.filter(r=>{const s=KI.safeParse(r);return s.success?!0:(console.error("Invalid workspace data:",r,s.error),!1)});t({workspaces:n})}}),{name:"workspace-storage",partialize:t=>({currentWorkspaceId:t.currentWorkspaceId})}));function AV(){return typeof window<"u"&&window.GLOBAL_APP_ID?window.GLOBAL_APP_ID:typeof __app_id<"u"?__app_id:"default-app-id"}function Ey(t){return`artifacts/${AV()}/users/${t}`}function kl(t,e){return`${Ey(t)}/workspaces/${e}`}const We={users:t=>Ey(t),workspaces:t=>`${Ey(t)}/workspaces`,filters:(t,e)=>`${kl(t,e)}/filters`,labels:(t,e)=>`${kl(t,e)}/labels`,timeblocks:(t,e)=>`${kl(t,e)}/timeblocks`,tasks:(t,e)=>`${kl(t,e)}/tasks`,projects:(t,e)=>`${kl(t,e)}/projects`,targets:(t,e)=>`${kl(t,e)}/targets`};let Xh=null;function NV(){return Fs.getState().workspaces}function RV(t,e){if(!t)return e&&e([]),()=>{};Xh&&Xh();const n=We.workspaces(t),r=Ro(mt(Fe,n),Ep("createdAt","asc")),s=Fs.getState();return Xh=Oa(r,o=>{const l=o.docs.map(u=>({id:u.id,...u.data()}));s.setWorkspaces(l),l.length===0&&!o.metadata.hasPendingWrites?(e&&e([]),PV().catch(u=>console.error("[Workspace] Default creation error:",u))):(jV(l),e&&e(l))},o=>{console.error("[Workspace] Subscription error:",o),s.setWorkspaces([]),e&&e([])}),Xh}async function PV(){try{const t=Ge.currentUser;if(!t)return;const e=We.workspaces(t.uid);(await ii(Ro(mt(Fe,e),N4(1)))).empty&&await ZI("")}catch(t){console.error("[Workspace] Failed to ensure default workspace:",t)}}function jV(t){if(t.length===0)return null;const e=Fs.getState();let n=e.currentWorkspaceId;const r=n?t.some(s=>s.id===n):!1;return(!n||!r)&&(n=t[0].id,e.setCurrentWorkspaceId(n)),n}function qr(){return Fs.getState().currentWorkspaceId}function QI(t){if(!t)return;const e=Fs.getState();e.currentWorkspaceId!==t&&e.setCurrentWorkspaceId(t)}async function ZI(t){try{KI.pick({name:!0}).parse({name:t});const e=Ge.currentUser;if(!e)throw new Error("Authentication required");const n=We.workspaces(e.uid);return{id:(await Ur(mt(Fe,n),{name:t,createdAt:ms()})).id,name:t}}catch(e){throw console.error("[Workspace] Add error:",e),e}}async function DV(t,e){try{const n=Ge.currentUser;if(!n)throw new Error("Authentication required");const r=We.workspaces(n.uid);await yc(An(Fe,r,t),{name:e})}catch(n){console.error("[Workspace] Update error:",n)}}function Gu(t){const e=`[ErrorLogger] [${t.type.toUpperCase()}]`,n=t.stack?`
${t.stack}`:"";t.type==="warn"?console.warn(`${e} ${t.message}${n}`):console.error(`${e} ${t.message}${n}`)}function OV(){window.onerror=(t,e,n,r,s)=>(Gu({timestamp:new Date().toISOString(),type:"error",message:String(t),stack:s==null?void 0:s.stack}),!1),window.onunhandledrejection=t=>{const e=t.reason;Gu({timestamp:new Date().toISOString(),type:"unhandledrejection",message:(e==null?void 0:e.message)||String(e),stack:e==null?void 0:e.stack})},console.info("[ErrorLogger] Initialized")}function LV(t,e){Gu({timestamp:new Date().toISOString(),type:"react",message:t.message,stack:t.stack})}class MV{constructor(){Mr(this,"isListenerInitialized",!1)}getCurrentUserId(){var e;return((e=Ge.currentUser)==null?void 0:e.uid)||null}hasInitialToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return!0;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return!0}catch{}return!1}getInitialAuthToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return window.GLOBAL_INITIAL_AUTH_TOKEN;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return __initial_auth_token}catch{}return null}async tryInitialTokenLogin(){if(this.isListenerInitialized)return;this.isListenerInitialized=!0;const e=this.getInitialAuthToken();if(e)try{await wR(Ge,e),console.log("[Auth] Initial token login success")}catch(n){Gu({timestamp:new Date().toISOString(),type:"error",message:`Initial token login failed: ${n.message}`,stack:n.stack})}}initAuthListener(e,n){return this.isListenerInitialized||this.tryInitialTokenLogin(),kE(Ge,s=>{s?e(s):n()})}async loginWithEmail(e,n){return await xE(Ge,e,n)}async logout(){try{await EE(Ge)}catch(e){throw Gu({timestamp:new Date().toISOString(),type:"error",message:`Logout failed: ${e.message}`,stack:e.stack}),e}}async updateUserAuthPassword(e){const n=Ge.currentUser;if(!n)throw new Error("Authentication required: No current user.");await xR(n,e)}}const Ty=new MV,VV=(t,e)=>Ty.initAuthListener(t,e),bf={TIMEOUT:{AUTH_LOADING:1e4},TIME_BLOCK:{MAX_COUNT:10}},Y0=()=>{var l;const[t,e]=D.useState(((l=Ge.currentUser)==null?void 0:l.uid)||null),[n,r]=D.useState(Ge.currentUser),[s,o]=D.useState(!0);return D.useEffect(()=>{const u=new AbortController;let d=()=>{},m=null;const y=async()=>{if(Ty.hasInitialToken())try{await Ty.tryInitialTokenLogin()}catch(w){console.error("[useAuth] Initial token login failed:",w)}u.signal.aborted||(d=VV(w=>{u.signal.aborted||(e(w.uid),r(w),o(!1),m&&clearTimeout(m))},()=>{u.signal.aborted||(e(null),r(null),o(!1),m&&clearTimeout(m))}))};return m=setTimeout(()=>{u.signal.aborted||(console.warn("[useAuth] Loading timeout reached, forcing loading=false"),o(!1))},bf.TIMEOUT.AUTH_LOADING),y(),()=>{u.abort(),d(),m&&clearTimeout(m)}},[]),{userId:t,user:n,loading:s}},FV=()=>{const t=Fs(l=>l.workspaces),e=Fs(l=>l.setWorkspaces),{userId:n,loading:r}=Y0(),[s,o]=D.useState(()=>t.length===0);return D.useEffect(()=>{if(r)return;if(!n){e([]),o(!1);return}const l=RV(n,()=>{o(!1)});return()=>l()},[n,r,e]),{workspaces:t,loading:s||r}},Er=()=>{const t=Fs(r=>r.currentWorkspaceId),{userId:e,loading:n}=Y0();return{workspaceId:t,userId:e,loading:n}},zV=()=>{const{t}=ft(),{workspaces:e,loading:n}=FV(),{openModal:r}=gn(),[s,o]=D.useState(!1),l=D.useRef(null),{workspaceId:u}=Er(),d=e.find(m=>m.id===u);return D.useEffect(()=>{const m=w=>{l.current&&!l.current.contains(w.target)&&o(!1)},y=w=>{w.key==="Escape"&&o(!1)};return s&&(document.addEventListener("mousedown",m),document.addEventListener("keydown",y)),()=>{document.removeEventListener("mousedown",m),document.removeEventListener("keydown",y)}},[s]),n?p.jsx("div",{className:"h-8 w-32 bg-gray-100 dark:bg-gray-800 animate-pulse rounded"}):p.jsxs("div",{className:"relative",ref:l,children:[p.jsxs("button",{onClick:()=>o(!s),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md px-2 py-1 transition-colors group","aria-expanded":s,"aria-haspopup":"true",children:[p.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 truncate max-w-[120px] sm:max-w-[140px] md:max-w-[180px]",children:d?d.name:t("loading")}),p.jsx("svg",{className:Se("w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-transform duration-200",s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),s&&p.jsxs("div",{className:"absolute left-0 mt-2 w-60 sm:w-64 max-w-[calc(100vw-32px)] origin-top-left rounded-lg shadow-2xl bg-white dark:bg-gray-800 ring-1 ring-black/5 z-50 border border-gray-100 dark:border-gray-700 overflow-hidden animate-scale-in custom-scrollbar",children:[p.jsx("div",{className:"p-1 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50",children:p.jsxs("button",{onClick:()=>{o(!1),r("workspace-edit",null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700/50 transition-colors rounded-md",children:[p.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),t("sidebar.add_workspace")]})}),p.jsx("div",{className:"py-1 max-h-[300px] overflow-y-auto custom-scrollbar",children:e.map(m=>{const y=m.id===u;return p.jsxs("button",{onClick:()=>{m.id&&QI(m.id),o(!1)},className:Se("w-full text-left px-4 py-2 text-sm flex items-center justify-between transition-colors",y?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[p.jsx("span",{className:"truncate block max-w-[140px] sm:max-w-[180px]",children:m.name}),y&&p.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]},m.id)})})]})]})},UV=({sidebarContent:t,title:e,children:n})=>{const{toggleSidebar:r,isSidebarOpen:s}=z0(),{t:o}=ft(),{openModal:l}=gn();return p.jsxs("div",{className:"w-full h-full flex overflow-hidden bg-premium-gradient text-gray-800 dark:text-white antialiased",children:[s&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-20 lg:hidden transition-opacity duration-300",onClick:r}),p.jsx(BO,{children:t}),p.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden",id:"main-content",children:[p.jsxs("header",{className:"h-12 border-b border-gray-200 dark:border-gray-800 flex items-center px-4 justify-between bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-10 sticky top-0",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[!s&&p.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:o("sidebar.menu_open"),"aria-label":o("sidebar.menu_open"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),p.jsx(zV,{}),p.jsx("h1",{className:"font-bold text-lg border-l border-gray-300 dark:border-gray-700 pl-3 ml-1 truncate",children:e})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("button",{onClick:()=>l("settings"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Settings","aria-label":"Settings",children:p.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]}),p.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:p.jsx("div",{className:Se("w-full h-full bg-white dark:bg-gray-900 relative flex-1",At.LAYOUT.CONTAINER_WIDTH_CLASS),children:n})})]})]})};function BV(t,e){return t===e?!0:!t||!e||t.length!==e.length?!1:JSON.stringify(t)===JSON.stringify(e)}function $V(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;const n=[...t].sort((s,o)=>(s.id||"").localeCompare(o.id||"")),r=[...e].sort((s,o)=>(s.id||"").localeCompare(o.id||""));for(let s=0;s<n.length;s++){const o=n[s],l=r[s];if(o.id!==l.id||o.status!==l.status||o.title!==l.title||o.description!==l.description||o.projectId!==l.projectId||o.timeBlockId!==l.timeBlockId||o.duration!==l.duration||o.isImportant!==l.isImportant)return!1;const u=d=>d==null?d:d instanceof Date?d.getTime():typeof(d==null?void 0:d.toMillis)=="function"?d.toMillis():d;if(u(o.dueDate)!==u(l.dueDate))return!1}return!0}function WV(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].id!==e[n].id||t[n].name!==e[n].name||t[n].color!==e[n].color)return!1;return!0}const qV=["permission-denied","invalid-argument","unauthenticated","not-found","already-exists","failed-precondition"];async function zs(t,e={}){const n=typeof e=="number"?{maxRetries:e}:e,{maxRetries:r=3,initialDelay:s=1e3,onError:o,onFinalFailure:l}=n;let u;for(let d=0;d<=r;d++)try{return await t()}catch(m){if(u=m,o&&o(m,d),d===r)break;const y=(m==null?void 0:m.code)||"";if(qV.some(E=>y.includes(E)))throw l&&l(m),m;const x=s*Math.pow(2,d);await new Promise(E=>setTimeout(E,x))}throw l&&l(u),u}const go=new Map,vu=new Map,ef=new Map;function HV(t){return go.has(t)}function Iy(t){const e=go.get(t)||[],n=vu.get(t);if(n){const r=[...e];n.forEach(s=>s(r))}}function KV(t,e){go.set(t,e),Iy(t)}function GV(t,e,n){vu.has(e)||vu.set(e,new Set);const r=vu.get(e);r.add(n);const s=go.get(e);if(s&&queueMicrotask(()=>n([...s])),!ef.has(e)){const o=We.projects(t,e),l=Ro(mt(Fe,o),Ep("createdAt","asc")),u=Oa(l,d=>{const m=d.docs.map(w=>({id:w.id,...w.data()})),y=go.get(e);y&&WV(y,m)||(go.set(e,m),Iy(e))},d=>{console.error("Error subscribing to projects:",d),go.set(e,[]),Iy(e)});ef.set(e,u)}return()=>{if(r.delete(n),r.size===0){const o=ef.get(e);o&&(o(),ef.delete(e)),vu.delete(e)}}}function QV(t){return go.get(t)||[]}async function ZV(t,e,n,r){return zs(async()=>{const s=We.projects(t,e);await Ur(mt(Fe,s),{name:n,color:r,ownerId:t,createdAt:ms()})})}async function YV(t,e,n,r){return zs(async()=>{const s=We.projects(t,e),o=An(Fe,s,n);await yc(o,r)})}async function JV(t,e,n){return zs(async()=>{const r=We.projects(t,e);await vc(An(Fe,r,n))})}async function XV(t,e,n){return zs(async()=>{const r=V0(Fe),s=We.projects(t,e);n.forEach((o,l)=>{if(o.id){const u=An(Fe,s,o.id);r.update(u,{order:l})}}),await r.commit()})}function J0(){var n;const t=(n=Ge.currentUser)==null?void 0:n.uid,e=qr();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}const eF=t=>{const e=t||qr();return e?QV(e):[]},tF=t=>{const e=t||qr();return e?HV(e):!1},nF=(t,e)=>{const n=e||qr();n&&KV(n,t)},rF=(t,e)=>{const n=typeof t=="function"?t:e,r=typeof t=="string"?t:qr(),s=Ge.currentUser;return s&&r&&typeof n=="function"?GV(s.uid,r,n):(typeof n=="function"&&n([]),()=>{})},sF=async(t,e=null,n)=>{const r=Ge.currentUser;if(!r)throw new Error("Authentication required.");const s=e||qr();if(!s)throw new Error("Workspace selection required.");return ZV(r.uid,s,t,n)},iF=async(t,e)=>{const{userId:n,workspaceId:r}=J0();return YV(n,r,t,e)},YI=async t=>{const{userId:e,workspaceId:n}=J0();return JV(e,n,t)},oF=async t=>{const{userId:e,workspaceId:n}=J0();return XV(e,n,t)},tf=new Map;function xc(t,e,n){const r=Oy(),s=JSON.stringify(t);return D.useEffect(()=>{if(t.some(l=>l==null))return;let o=tf.get(s);return o||(o={count:0,unsubscribe:e(u=>{r.setQueryData(t,u)})},tf.set(s,o)),o.count++,()=>{const l=tf.get(s);l&&(l.count--,l.count===0&&(l.unsubscribe(),tf.delete(s)))}},[s]),iC({queryKey:t,queryFn:()=>n!==void 0?Promise.resolve(n):new Promise(o=>{const l=setTimeout(()=>{o(n)},1e4),u=r.getQueryData(t);u!==void 0&&(clearTimeout(l),o(u))}),initialData:n,staleTime:1/0,gcTime:1e3*60*5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})}const Ap=()=>{const{workspaceId:t,loading:e}=Er(),n=Oy(),r=D.useCallback(y=>t?rF(t,y):()=>{},[t]),o=(t?tF(t):!1)&&t?eF(t):void 0,{data:l,isPending:u}=xc(["projects",t||void 0],r,o);return{projects:l||[],loading:e||!!t&&u,setProjectsOverride:y=>{t&&(n.setQueryData(["projects",t],y),nF(y,t))}}},aF=[{id:"tb_morning",name:"06:00 - 09:00",start:"06:00",end:"09:00",color:"#EF4444",order:0},{id:"tb_afternoon",name:"13:00 - 17:00",start:"13:00",end:"17:00",color:"#3B82F6",order:1},{id:"tb_night",name:"20:00 - 22:00",start:"20:00",end:"22:00",color:"#8B5CF6",order:2}],ua=class ua{constructor(){Mr(this,"cacheMap",new Map);Mr(this,"listeners",new Map);Mr(this,"unsubscribes",new Map)}static getInstance(){return ua.instance||(ua.instance=new ua),ua.instance}getBlocks(e){return this.cacheMap.get(e)||[]}isInitialized(e){return this.cacheMap.has(e)}setCache(e,n){this.cacheMap.set(e,n),this.notify(e)}notify(e){const n=this.getBlocks(e),r=this.listeners.get(e);r&&r.forEach(s=>s([...n]))}subscribe(e,n,r){if(!e||!n)return r([]),()=>{};this.listeners.has(n)||this.listeners.set(n,new Set),this.listeners.get(n).add(r);const s=this.cacheMap.get(n);if(s&&queueMicrotask(()=>r([...s])),!this.unsubscribes.has(n)){const o=We.timeblocks(e,n),l=Ro(mt(Fe,o),Ep("order","asc"));let u=!0;const d=Oa(l,m=>{const y=m.docs.map(w=>({id:w.id,...w.data()}));if(u&&y.length===0&&!m.metadata.hasPendingWrites){u=!1,lF(e,n).catch(w=>console.error("[TimeBlocks] Failed to create defaults:",w));return}u=!1,this.cacheMap.set(n,y),this.notify(n)},m=>{console.error("[TimeBlocks] Subscription error:",m)});this.unsubscribes.set(n,d)}return()=>{const o=this.listeners.get(n);o&&o.delete(r)}}};Mr(ua,"instance");let Sy=ua;const Np=Sy.getInstance();async function lF(t,e){const n=We.timeblocks(t,e),r=V0(Fe);aF.forEach(s=>{const o=An(Fe,n,s.id);r.set(o,{name:s.name,start:s.start,end:s.end,color:s.color,order:s.order,updatedAt:ms()})}),await r.commit()}function cF(t,e){var r;const n=(r=Ge.currentUser)==null?void 0:r.uid;return Np.subscribe(n,t,e)}function uF(t){return Np.getBlocks(t)}function dF(t){return Np.isInitialized(t)}async function hF(t,e){var r;const n=(r=Ge.currentUser)==null?void 0:r.uid;if(!(!n||!t))try{const s=We.timeblocks(n,t),o=e.id||crypto.randomUUID(),l=Np.getBlocks(t),u=e.order!==void 0?e.order:Math.max(...l.map(m=>m.order||0),-1)+1,d={name:e.name,start:e.start,end:e.end,color:e.color,order:u,updatedAt:ms()};return await j4(An(Fe,s,o),d,{merge:!0}),!0}catch(s){console.error("[TimeBlocks] Save error:",s)}}async function JI(t,e){var r;const n=(r=Ge.currentUser)==null?void 0:r.uid;if(!(!n||!t))try{const s=We.timeblocks(n,t);return await vc(An(Fe,s,e)),!0}catch(s){console.error("[TimeBlocks] Delete error:",s)}}const kd=()=>{const{workspaceId:t,loading:e}=Er(),n=D.useCallback(u=>t?cF(t,u):()=>{},[t]),r=t?dF(t):!1,{data:s,isPending:o}=xc(["timeblocks",t],n,t&&r?uF(t):void 0);return{timeBlocks:s||[],loading:e||!!t&&o}};function X0(t){const e={keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(!t)return e;const n=/(?:-?[a-zA-Z]+:(?:"[^"]*"|[^\s]+))|(?:"[^"]*")|(?:-?[^\s]+)/g,r=t.match(n);if(!r)return e;const s=[];for(let o=0;o<r.length;o++){const l=r[o];if(l==="OR"){const u=s.length-1,d=s[u],m=r[o+1],y=d&&(typeof d=="string"?!d.includes(":"):!0),w=m&&!m.includes(":")&&m!=="OR";if(y&&w){const x=Array.isArray(d)?d:[d];x.push(m.toLowerCase().replace(/^"|"$/g,"")),s[u]=x,o++;continue}}s.push(l)}return s.forEach(o=>{if(Array.isArray(o)){e.keywords.push(o);return}const l=o;if(l.startsWith('"')&&l.endsWith('"')){const u=l.substring(1,l.length-1);u&&e.keywords.push(u.toLowerCase());return}if(l.startsWith("-")&&!l.includes(":")){const u=l.substring(1);u&&e.excludeKeywords.push(u.toLowerCase());return}if(l.includes(":")){let u=!1,d=l;d.startsWith("-")&&(u=!0,d=d.substring(1));const m=d.indexOf(":"),y=d.substring(0,m).toLowerCase();let w=d.substring(m+1);switch(w.startsWith('"')&&w.endsWith('"')&&(w=w.substring(1,w.length-1)),w.toLowerCase(),y){case"project":case"p":u?w.split(",").forEach(N=>e.excludeProjects.push(N)):w.split(",").forEach(N=>e.projects.push(N));break;case"label":case"l":u?w.split(",").forEach(N=>e.excludeLabels.push(N)):w.split(",").forEach(N=>e.labels.push(N));break;case"timeblock":case"tb":u?w.split(",").forEach(N=>e.excludeTimeBlocks.push(N)):w.split(",").forEach(N=>e.timeBlocks.push(N));break;case"duration":case"d":w.split(",").forEach(N=>{const I=parseInt(N,10);isNaN(I)||e.durations.push(I)});break;case"date":case"due":const x=["today","tomorrow","week","upcoming","overdue","next-week"];w.split(",").forEach(N=>{const I=N.toLowerCase();x.includes(I)&&e.dates.push(I)});break;case"status":case"is":const E=["completed","active","todo"];w.split(",").forEach(N=>{const I=N.toLowerCase();E.includes(I)&&(u?e.excludeStatus.push(I):e.status.push(I)),I==="important"&&(e.isImportant=!u),I==="unimportant"&&(e.isImportant=u)});break;default:u?e.excludeKeywords.push(d.toLowerCase()):e.keywords.push(d.toLowerCase());break}}else l!=="OR"&&e.keywords.push(l.toLowerCase())}),e}function fF(t){var n,r,s,o,l,u,d,m,y,w,x,E;const e=[];return(n=t.keywords)!=null&&n.length&&e.push(...t.keywords.map(N=>Array.isArray(N)?N.join(" OR "):N.includes(" ")?`"${N}"`:N)),(r=t.excludeKeywords)!=null&&r.length&&e.push(...t.excludeKeywords.map(N=>`-${N}`)),(s=t.projects)!=null&&s.length&&e.push(`project:${t.projects.join(",")}`),(o=t.excludeProjects)!=null&&o.length&&e.push(`-project:${t.excludeProjects.join(",")}`),(l=t.labels)!=null&&l.length&&e.push(`label:${t.labels.join(",")}`),(u=t.excludeLabels)!=null&&u.length&&e.push(`-label:${t.excludeLabels.join(",")}`),(d=t.timeBlocks)!=null&&d.length&&e.push(`timeblock:${t.timeBlocks.join(",")}`),(m=t.excludeTimeBlocks)!=null&&m.length&&e.push(`-timeblock:${t.excludeTimeBlocks.join(",")}`),(y=t.durations)!=null&&y.length&&e.push(`duration:${t.durations.join(",")}`),(w=t.dates)!=null&&w.length&&e.push(`date:${t.dates.join(",")}`),(x=t.status)!=null&&x.length&&e.push(`status:${t.status.join(",")}`),(E=t.excludeStatus)!=null&&E.length&&e.push(`-status:${t.excludeStatus.join(",")}`),t.isImportant===!0&&e.push("is:important"),t.isImportant===!1&&e.push("is:unimportant"),e.join(" ")}const pF=t=>t instanceof Date?Tt.fromDate(t):t;async function mF(t,e){if(!t||!e)throw new Error("Missing parameters for backup.");try{const n=mt(Fe,We.tasks(t,e)),r=mt(Fe,We.projects(t,e)),s=mt(Fe,We.labels(t,e)),o=mt(Fe,We.targets(t,e)),l=mt(Fe,We.timeblocks(t,e)),u=mt(Fe,We.filters(t,e)),[d,m,y,w,x,E]=await Promise.all([ii(n),ii(r),ii(s),ii(o),ii(l),ii(u)]),N=I=>I.docs.map(S=>{const V=S.data(),W={id:S.id};for(const U in V)W[U]=V[U]instanceof Tt?V[U].toMillis():V[U];return W});return{version:"1.3",exportedAt:new Date().toISOString(),userId:t,workspaceId:e,tasks:N(d),projects:N(m),labels:N(y),targets:N(w),timeBlocks:N(x),customFilters:N(E)}}catch(n){throw console.error("[Backup] createBackupData failed:",n),n}}async function gF(t,e,n){var r;if(!t||!e||!n)throw new Error("Invalid import parameters.");try{const{tasks:s=[],projects:o=[],labels:l=[],targets:u=[],timeBlocks:d=[],customFilters:m=[]}=n,y=new Map,w=new Map,x=await ii(mt(Fe,We.labels(t,e))),E=new Map;x.forEach(I=>E.set(I.data().name,I.id));for(const I of l){const S=(r=I.name)==null?void 0:r.trim();if(S)if(E.has(S))w.set(I.id,E.get(S));else{const V={...I,name:S};delete V.id;const W=await Ur(mt(Fe,We.labels(t,e)),V);w.set(I.id,W.id),E.set(S,W.id)}}for(const I of o){const S={...I};delete S.id,typeof S.createdAt=="string"?S.createdAt=new Date(S.createdAt):typeof S.createdAt=="number"&&(S.createdAt=new Date(S.createdAt));const V=await Ur(mt(Fe,We.projects(t,e)),S);y.set(I.id,V.id)}for(const I of d){const S={...I};delete S.id,await Ur(mt(Fe,We.timeblocks(t,e)),S)}for(const I of m){const S={...I};delete S.id,typeof S.createdAt=="string"?S.createdAt=new Date(S.createdAt):typeof S.createdAt=="number"&&(S.createdAt=new Date(S.createdAt)),await Ur(mt(Fe,We.filters(t,e)),S)}for(const I of u){const S={...I};delete S.id,typeof S.createdAt=="string"&&(S.createdAt=new Date(S.createdAt)),typeof S.updatedAt=="string"&&(S.updatedAt=new Date(S.updatedAt)),S.ownerId=t,S.workspaceId=e,await Ur(mt(Fe,We.targets(t,e)),S)}const N=s.map(async I=>{const S={...I};return delete S.id,typeof S.createdAt=="string"?S.createdAt=new Date(S.createdAt):typeof S.createdAt=="number"&&(S.createdAt=new Date(S.createdAt)),typeof S.dueDate=="string"?S.dueDate=new Date(S.dueDate):typeof S.dueDate=="number"&&(S.dueDate=new Date(S.dueDate)),S.dueDate&&(S.dueDate=pF(S.dueDate)),S.projectId&&y.has(S.projectId)?S.projectId=y.get(S.projectId):S.projectId=null,Array.isArray(S.labelIds)&&(S.labelIds=S.labelIds.map(V=>w.get(V)).filter(V=>V)),S.ownerId=t,Ur(mt(Fe,We.tasks(t,e)),S)});return await Promise.all(N),{tasksCount:s.length,projectsCount:o.length,labelsCount:l.length,targetsCount:u.length}}catch(s){throw console.error("[Backup] importBackupData failed:",s),s}}const Su=new Map;function yF(t){return t?Su.get(t)||[]:[]}function vF(t){return Su.has(t)}function _F(t,e){var o;const n=(o=Ge.currentUser)==null?void 0:o.uid;if(!n||!t)return Su.set(t||"",[]),e([]),()=>{};const r=We.filters(n,t),s=Ro(mt(Fe,r));return Oa(s,l=>{const u=l.docs.map(d=>({id:d.id,...d.data()}));Su.set(t,u),e(u)},l=>{console.error("[Filters] Subscription error:",l),Su.set(t,[]),e([])})}async function wF(t){var d;const e=(d=Ge.currentUser)==null?void 0:d.uid;if(!e)throw Jt.error(""),new Error("Authentication required");const{workspaceId:n,...r}=t;if(!n)throw Jt.error("ID"),new Error("Workspace ID required");const s=GI.pick({name:!0,query:!0}).safeParse(r);if(!s.success){const m=s.error.issues.map(y=>y.message).join(", ");throw console.error("[Filters] Validation failed:",s.error.flatten()),Jt.error(`: ${m}`),new Error(`Validation failed: ${m}`)}const o=We.filters(e,n),{id:l,...u}=r;await Ur(mt(Fe,o),{...u,ownerId:e,workspaceId:n,createdAt:ms()})}async function bF(t,e,n){var d;const r=(d=Ge.currentUser)==null?void 0:d.uid;if(!r||!t)throw Jt.error(""),new Error("Authentication required");const s=GI.partial().safeParse(n);if(!s.success){const m=s.error.issues.map(y=>y.message).join(", ");throw console.error("[Filters] Validation failed:",s.error.flatten()),Jt.error(`: ${m}`),new Error(`Validation failed: ${m}`)}const o=We.filters(r,t),{id:l,...u}=n;await yc(An(Fe,o,e),{...u,updatedAt:ms()})}async function xF(t,e){var s;const n=(s=Ge.currentUser)==null?void 0:s.uid;if(!n||!t)throw Jt.error(""),new Error("Authentication required");const r=We.filters(n,t);await vc(An(Fe,r,e))}const Gf=new Map;function kF(t){return t?Gf.get(t)||[]:[]}function EF(t){return Gf.has(t)}function TF(t,e,n){if(!t||!e)return n([]),()=>{};const r=We.labels(t,e),s=Ro(mt(Fe,r));return Oa(s,o=>{const l=o.docs.map(u=>({id:u.id,...u.data()}));Gf.set(e,l),n(l)},o=>{console.error("[Labels] Subscription error:",o),Gf.set(e,[]),n([])})}async function IF(t,e,n,r){const s=We.labels(t,e);await Ur(mt(Fe,s),{name:n,color:r,ownerId:t,workspaceId:e,createdAt:ms()})}async function SF(t,e,n,r){const s=We.labels(t,e),o=An(Fe,s,n);return yc(o,r)}async function CF(t,e,n){const r=We.labels(t,e);await vc(An(Fe,r,n))}const AF=kF,NF=t=>t?EF(t):!1;function ev(){var e;const t=(e=Ge.currentUser)==null?void 0:e.uid;if(!t)throw console.error("Authentication required for label operation."),new Error("Authentication required.");return t}function RF(t,e){var r;const n=(r=Ge.currentUser)==null?void 0:r.uid;return n&&t?TF(n,t,e):(e([]),()=>{})}async function PF(t,e,n){const r=ev();if(!t)throw new Error("Workspace ID required");return IF(r,t,e,n)}async function jF(t,e,n){const r=ev();if(!t)throw new Error("Workspace ID required");return SF(r,t,e,n)}async function DF(t,e){const n=ev();if(!t)throw new Error("Workspace ID required");return CF(n,t,e)}async function OF(t){const e=Ge.currentUser;if(!e)throw new Error("User not authenticated");const n=We.tasks(e.uid,t),s=(await ii(mt(Fe,n))).docs.map(d=>({id:d.id,...d.data()})),o=new Map;for(const d of s){if(!d.title)continue;const m=d.title.trim(),y=o.get(m)||[];y.push(d),o.set(m,y)}let l=0;const u=[];for(const[d,m]of o.entries())if(m.length>1){m.sort((w,x)=>{const E=S=>{if(!S)return 0;if(typeof S=="object"&&"toDate"in S&&typeof S.toDate=="function")return S.toDate().getTime();const V=new Date(S);return isNaN(V.getTime())?0:V.getTime()},N=E(w.createdAt),I=E(x.createdAt);return N-I});const y=m.slice(1);for(const w of y)w.id&&(console.log(`[Cleanup] Deleting duplicate task: "${w.title}" (${w.id})`),u.push(vc(An(Fe,n,w.id))),l++)}return await Promise.all(u),l}const Cu=new Map;function LF(t,e,n,r){const s=We.targets(t,e),o=Ro(mt(Fe,s),Ep("createdAt","desc"));let l=!0;return Oa(o,u=>{const d=u.docs.map(y=>({id:y.id,...y.data()})),m=Cu.get(e);if(m&&BV(m,d)){l&&n(m),l=!1;return}Cu.set(e,d),l=!1,n(d)},u=>{console.error("Error subscribing to targets:",u),Cu.set(e,[]),n([]),r&&r(u)})}function MF(t){return Cu.get(t)||[]}function VF(t){return Cu.has(t)}async function FF(t,e,n){return zs(async()=>{const r=We.targets(t,e),s={...n,ownerId:t,workspaceId:e,createdAt:ms(),updatedAt:ms()};delete s.id,await Ur(mt(Fe,r),s)})}function zF(){var e;const t=(e=Ge.currentUser)==null?void 0:e.uid;if(!t)throw new Error("Authentication required.");return t}const UF=t=>{const e=t||qr();return e?MF(e):[]},BF=t=>{const e=t||qr();return e?VF(e):!1},$F=(t,e,n)=>{let r,s,o;typeof t=="function"?(r=t,s=qr()||void 0):(s=t,r=e,o=n);const l=Ge.currentUser;return l&&s&&typeof r=="function"?LF(l.uid,s,r,o):(typeof r=="function"&&r([]),()=>{})},WF=async(t,e)=>{const n=zF();if(!t)throw new Error("Workspace ID required.");return FF(n,t,e)};function mn(t){if(!t)return null;if(t instanceof Date)return t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();const e=new Date(t);return isNaN(e.getTime())?null:e}const Bx=(t,e)=>{const n=mn(t),r=mn(e);return!n||!r?!1:n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()&&n.getDate()===r.getDate()},qF=t=>{const e=mn(t);if(!e)return!1;const n=new Date;return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()},HF=(t,e=7)=>{const n=mn(t);if(!n)return!1;const r=new Date;r.setHours(0,0,0,0);const s=new Date(r);s.setDate(r.getDate()+1);const o=new Date(r);return o.setDate(r.getDate()+e+1),n>=s&&n<o};function Rp(t=new Date){const e=mn(t)||new Date,n=new Date(e);return n.setHours(0,0,0,0),n}function KF(t=new Date,e=1){const n=mn(t)||new Date,r=n.getDay(),s=n.getDate()-r+(r<e?e-7:e),o=new Date(n);return o.setDate(s),Rp(o)}function GF(t){const e=mn(t);if(!e)return"";const n=new Date,r=Rp(n),s=Math.round((e.getTime()-r.getTime())/(1e3*60*60*24));if(s===0)return"";if(s===1)return"";if(s===-1)return"";const o=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),u=String(e.getDate()).padStart(2,"0");return o!==n.getFullYear()?`${o}/${l}/${u}`:`${l}/${u}`}const QF=t=>{const e=mn(t);if(!e)return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${s}`},ZF=t=>{if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e};function YF(t){const e=mn(t);if(!e)return"text-gray-500";const n=Rp(new Date),r=Math.round((e.getTime()-n.getTime())/(1e3*60*60*24));return r<0?"text-red-500 font-bold":r===0?"text-green-600 dark:text-green-400 font-medium":r===1?"text-orange-500 dark:text-orange-400 font-medium":"text-gray-500 dark:text-gray-400"}function JF(t,e){var r;if(!t||!(e!=null&&e.type))return null;const n=new Date(mn(t));switch(e.type){case"daily":return n.setDate(n.getDate()+1),n;case"weekly":{if(!((r=e.days)!=null&&r.length))return null;const s=n.getDay();for(let o=1;o<=7;o++){const l=(s+o)%7;if(e.days.includes(l))return n.setDate(n.getDate()+o),n}return null}case"weekdays":do n.setDate(n.getDate()+1);while(n.getDay()===0||n.getDay()===6);return n;case"monthly":return n.setMonth(n.getMonth()+1),n;default:return null}}function XF(t){const e=Rp(new Date);if(!(t!=null&&t.type)||t.type==="daily"||t.type==="monthly")return e;if(t.type==="weekly"&&t.days&&t.days.length>0){const n=e.getDay();for(let r=0;r<=6;r++)if(t.days.includes((n+r)%7))return e.setDate(e.getDate()+r),e}if(t.type==="weekdays"){for(;e.getDay()===0||e.getDay()===6;)e.setDate(e.getDate()+1);return e}return e}function e6(t,e){if(!t||!e)return 0;const[n,r]=t.split(":").map(Number),[s,o]=e.split(":").map(Number);if(isNaN(n)||isNaN(r)||isNaN(s)||isNaN(o))return 0;const l=n*60+r;let u=s*60+o;return u<l&&(u+=1440),u-l}const Ag=t=>t instanceof Tt?t.toDate():t instanceof Date?t:void 0,XI=t=>t instanceof Date?Tt.fromDate(t):t;function t6(t,e){if(!e||typeof e!="object")return console.warn(`[deserializeTask] Invalid data for task ${t}:`,e),{id:t,title:"Invalid Task",status:"todo",ownerId:""};const n=e.recurrence||null,r={id:t,title:String(e.title||"Untitled"),description:e.description?String(e.description):null,status:e.status==="completed"||e.status==="todo"||e.status==="archived"?e.status:"todo",dueDate:Ag(e.dueDate)||void 0,createdAt:Ag(e.createdAt)||void 0,completedAt:Ag(e.completedAt)||void 0,ownerId:String(e.ownerId||""),projectId:e.projectId?String(e.projectId):null,labelIds:Array.isArray(e.labelIds)?e.labelIds.map(String):[],timeBlockId:e.timeBlockId?String(e.timeBlockId):null,duration:typeof e.duration=="number"?e.duration:null,isImportant:!!e.isImportant,recurrence:n};return Z0.safeParse(r).success,r}const da=class da{constructor(){Mr(this,"cachedTasksMap",new Map);Mr(this,"listeners",new Map);Mr(this,"unsubscribes",new Map);Mr(this,"currentWorkspaceId",null)}static getInstance(){return da.instance||(da.instance=new da),da.instance}notifyListeners(e){const n=this.cachedTasksMap.get(e)||[],r=this.listeners.get(e);if(r){const s=[...n];r.forEach(o=>o(s))}}reset(e){var n;e?((n=this.unsubscribes.get(e))==null||n(),this.unsubscribes.delete(e),this.listeners.delete(e),this.cachedTasksMap.delete(e)):(this.unsubscribes.forEach(r=>r()),this.unsubscribes.clear(),this.listeners.clear(),this.cachedTasksMap.clear()),this.currentWorkspaceId=null}getTask(e,n){const r=this.cachedTasksMap.get(e);return r==null?void 0:r.find(s=>s.id===n)}getTasks(e){return this.cachedTasksMap.get(e)||[]}isInitialized(e){return this.cachedTasksMap.has(e)}setCache(e,n){this.cachedTasksMap.set(e,n),this.notifyListeners(e)}subscribe(e,n,r,s){if(!e||!n)return r([]),()=>{};this.currentWorkspaceId=n,this.listeners.has(n)||this.listeners.set(n,new Set);const o=this.listeners.get(n);o.add(r);const l=this.cachedTasksMap.get(n);if(l&&queueMicrotask(()=>r([...l])),!this.unsubscribes.has(n)){const u=We.tasks(e,n),d=Ro(mt(Fe,u)),m=Oa(d,y=>{const w=y.docs.map(E=>t6(E.id,E.data())),x=this.cachedTasksMap.get(n);x&&$V(x,w)||(this.cachedTasksMap.set(n,w),this.notifyListeners(n))},y=>{console.error("[Tasks] Subscription error:",y),s&&s(y)});this.unsubscribes.set(n,m)}return()=>{if(o.delete(r),o.size===0){const u=this.unsubscribes.get(n);u&&(u(),this.unsubscribes.delete(n))}}}};Mr(da,"instance");let Cy=da;const Zn=Cy.getInstance();function n6(t,e){return Zn.getTask(t,e)}function r6(t){return Zn.getTasks(t)}function s6(t){return Zn.isInitialized(t)}function i6(t,e,n,r){return Zn.subscribe(t,e,n,r)}function e1(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!==void 0))}async function o6(t,e,n){const r=new Map;n.forEach((o,l)=>r.set(o,l));const s=Zn.getTasks(e);if(s&&s.length>0){const o=s.map(l=>{const u=r.get(l.id);return u!==void 0?{...l,order:u}:l});o.sort((l,u)=>{const d=l.order??Number.MAX_SAFE_INTEGER,m=u.order??Number.MAX_SAFE_INTEGER;return d-m}),Zn.setCache(e,o)}return zs(async()=>{const o=We.tasks(t,e),l=[];for(let u=0;u<n.length;u+=500)l.push(n.slice(u,u+500));for(const u of l){const d=V0(Fe);u.forEach(m=>{const y=r.get(m),w=An(Fe,o,m);d.update(w,{order:y})}),await d.commit()}})}async function t1(t,e,n){return zs(async()=>{const r=We.tasks(t,e),s=e1({...n});return s.dueDate&&(s.dueDate=XI(s.dueDate)),delete s.id,await Ur(mt(Fe,r),{...s,ownerId:t,status:"todo",createdAt:ms()})})}async function a6(t,e,n,r){const s=Zn.getTasks(e),o=s==null?void 0:s.find(l=>l.id===n);if(s){const l=s.map(u=>u.id===n?{...u,status:r,completedAt:r==="completed"?new Date:void 0}:u);Zn.setCache(e,l)}if(r==="completed"&&(o!=null&&o.recurrence)&&o.recurrence.type!=="none"){const l=JF(o.dueDate??null,o.recurrence);if(l){const u={title:o.title,description:o.description,projectId:o.projectId,labelIds:o.labelIds,timeBlockId:o.timeBlockId,duration:o.duration,isImportant:o.isImportant,recurrence:o.recurrence,dueDate:l,status:"todo"};t1(t,e,u).catch(d=>console.error("Failed to create recurring task:",d))}}return zs(async()=>{const l=We.tasks(t,e),u={status:r};r==="completed"?u.completedAt=ms():u.completedAt=null,await yc(An(Fe,l,n),u)},{onFinalFailure:()=>{s&&Zn.setCache(e,s),Jt.error("")}})}async function l6(t,e,n,r){const s=Zn.getTasks(e);if(s){const o=s.map(l=>l.id===n?{...l,...r}:l);Zn.setCache(e,o)}return zs(async()=>{const o=We.tasks(t,e),l=e1({...r});l.dueDate!==void 0&&(l.dueDate=XI(l.dueDate)),await yc(An(Fe,o,n),l)},{onFinalFailure:()=>{s&&Zn.setCache(e,s),Jt.error("")}})}async function c6(t,e,n){const r=Zn.getTasks(e);if(r){const s=r.filter(o=>o.id!==n);Zn.setCache(e,s)}return zs(async()=>{const s=We.tasks(t,e);await vc(An(Fe,s,n))},{onFinalFailure:()=>{r&&Zn.setCache(e,r),Jt.error("")}})}const Ra=()=>xd($r.getState().language).t;function Ed(){var n;const t=(n=Ge.currentUser)==null?void 0:n.uid,e=qr();if(!t||!e)throw new Error("Authentication or Workspace required.");return{userId:t,workspaceId:e}}async function n1(t){try{const{userId:e,workspaceId:n}=Ed(),s=Z0.partial().required({title:!0}).safeParse(t);s.success||console.warn("[addTask] Validation warning:",s.error.flatten()),await t1(e,n,t)}catch(e){throw console.error("Failed to add task:",e),Jt.error(Ra()("msg.task.create_fail")),e}}async function tv(t,e){try{const{userId:n,workspaceId:r}=Ed(),s=Z0.partial().safeParse(e);s.success||console.warn("[updateTask] Validation warning:",s.error.flatten()),await l6(n,r,t,e)}catch(n){throw console.error("Failed to update task:",n),Jt.error(Ra()("msg.task.update_fail")),n}}async function u6(t){try{const{userId:e,workspaceId:n}=Ed();await o6(e,n,t)}catch(e){throw console.error("Failed to reorder tasks:",e),Jt.error(Ra()("msg.task.update_fail")),e}}async function d6(t){try{const{userId:e,workspaceId:n}=Ed();await c6(e,n,t),Jt.success(Ra()("msg.task.delete_success"))}catch(e){throw console.error("Failed to delete task:",e),Jt.error(Ra()("msg.task.delete_fail")),e}}async function h6(t,e){try{const{userId:n,workspaceId:r}=Ed(),s=n6(r,t),l=((s==null?void 0:s.status)||e||"todo")==="completed"?"todo":"completed";await a6(n,r,t,l),l==="completed"&&Jt.success(Ra()("msg.task.complete_success"))}catch(n){throw console.error("Failed to toggle status:",n),Jt.error(Ra()("msg.task.status_update_fail")),n}}function f6(t,e,n){const r=Ge.currentUser;return!r||!t?(typeof e=="function"&&e([]),()=>{}):i6(r.uid,t,e,n)}const p6=t=>{const e=t||qr();return e?r6(e):[]},m6=t=>{const e=t||qr();return e?s6(e):!1},kc=({message:t,id:e,className:n})=>t?p.jsxs("div",{id:e,role:"alert",className:`p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-center justify-center gap-2 animate-in slide-in-from-top-1 fade-in duration-200 ${n||""}`,children:[p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),p.jsx("span",{children:t})]}):null,$x='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',Do=({isOpen:t,onClose:e,title:n,children:r,className:s,overlayClassName:o,zIndex:l=100,size:u="md"})=>{const{t:d}=ft(),m=D.useRef(null),y={sm:"max-w-full sm:max-w-sm",md:"max-w-full sm:max-w-lg",lg:"max-w-full sm:max-w-3xl",xl:"max-w-full sm:max-w-5xl",full:"max-w-full m-0 sm:m-4 h-[100dvh] sm:h-[calc(100vh-2rem)]"};return D.useEffect(()=>{const w=E=>{E.key==="Escape"&&e()},x=E=>{if(E.key!=="Tab"||!m.current)return;const N=m.current.querySelectorAll($x);if(N.length===0){E.preventDefault();return}const I=N[0],S=N[N.length-1];E.shiftKey?document.activeElement===I&&(E.preventDefault(),S.focus()):document.activeElement===S&&(E.preventDefault(),I.focus())};if(t){window.addEventListener("keydown",w),window.addEventListener("keydown",x),document.body.style.overflow="hidden";const E=setTimeout(()=>{var I;const N=(I=m.current)==null?void 0:I.querySelectorAll($x);N&&N.length>0?N[0].focus():m.current&&m.current.focus()},50);return()=>clearTimeout(E)}return()=>{window.removeEventListener("keydown",w),window.removeEventListener("keydown",x),document.body.style.overflow=""}},[t,e]),t?po.createPortal(p.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-0 sm:p-4 animate-fade-in",style:{zIndex:l},role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,children:[p.jsx("div",{className:Se("fixed inset-0 backdrop-blur-sm transition-opacity",o??"bg-black/50"),onClick:e,"aria-hidden":"true"}),p.jsxs("div",{ref:m,tabIndex:-1,className:Se("relative bg-white dark:bg-gray-800 rounded-none sm:rounded-xl shadow-2xl w-full overflow-hidden flex flex-col transform transition-all animate-scale-in outline-none max-h-[100dvh] sm:max-h-[90vh]",y[u],s),children:[n&&p.jsxs("div",{className:"px-3 py-2 sm:px-modal sm:py-3 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[p.jsx("h3",{id:"modal-title",className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white truncate",children:n}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 shrink-0","aria-label":d("close"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-modal custom-scrollbar",children:r})]})]}),document.body):null},nf=({title:t,items:e,selectedItems:n,onToggle:r,labelFn:s=o=>o.name})=>p.jsxs("div",{className:"flex flex-col h-64 border border-gray-100 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-900",children:[p.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700 text-xs font-bold text-gray-500 uppercase tracking-wider",children:t}),p.jsx("div",{className:"p-2 overflow-y-auto space-y-1 custom-scrollbar",children:e.map(o=>{const l=o.id||o.toString(),u=n.includes(l),d=`filter-${t.replace(/ /g,"-")}-${l}`;return p.jsxs("div",{className:"flex items-center px-2 py-1.5 rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",onClick:()=>r(l),children:[p.jsx("input",{id:d,type:"checkbox",checked:u,onChange:()=>{},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer","aria-label":`${t}: ${s(o)}`}),p.jsx("label",{htmlFor:d,className:"ml-2 text-sm text-gray-700 dark:text-gray-300 truncate flex-1 cursor-pointer pointer-events-none",children:s(o)})]},l)})})]}),xf="none",g6=t=>{const e=X0(t);return{project:e.projects,timeblock:e.timeBlocks.map(n=>n==="null"||n==="none"?xf:n),duration:e.durations.map(n=>n.toString()),date:e.dates}},y6=[30,45,60,75,90],v6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=ft(),{closeModal:o}=gn(),l=!!t,u=e,d=!!(u!=null&&u.id),{projects:m}=Ap(),{timeBlocks:y}=kd(),{workspaceId:w}=Er(),[x,E]=D.useState(""),[N,I]=D.useState({project:[],timeblock:[],duration:[],date:[]}),[S,V]=D.useState(!1),[W,U]=D.useState(null),G=Le.useRef(null);D.useEffect(()=>{l&&(E((u==null?void 0:u.name)||""),I(g6((u==null?void 0:u.query)||"")),U(null),V(!1))},[l,u]),D.useEffect(()=>{var k;W&&((k=G.current)==null||k.focus())},[W]);const Z=(k,R)=>{I(P=>{const O=P[k],M=O.includes(R)?O.filter(j=>j!==R):[...O,R];return{...P,[k]:M}})},K=D.useCallback(async()=>{const k=x.trim();if(!k){U(s("validation.filter_name_required"));return}const R=fF({projects:N.project,timeBlocks:N.timeblock.map(P=>P===xf?"null":P),durations:N.duration.map(Number),dates:N.date});if(!R){U(s("validation.filter_condition_required"));return}V(!0),U(null);try{if(!w){U(s("validation.workspace_required")),V(!1);return}const P={name:k,query:R,type:"custom"};d&&(u!=null&&u.id)?await bF(w,u.id,P):await wF({...P,workspaceId:w}),o()}catch(P){U(s("validation.save_fail")+": "+(P.message||"Error")),V(!1)}},[x,N,d,u,o,s]),A=k=>{k.key==="Enter"&&!k.nativeEvent.isComposing&&(!S&&x.trim()&&K(),k.preventDefault())};return l?p.jsx(Do,{isOpen:l,onClose:o,title:s(d?"modal.edit":"modal.create"),className:"max-w-4xl",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"filter-name-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s("filter")}),p.jsx("input",{ref:G,id:"filter-name-input",name:"filterName",type:"text",value:x,onChange:k=>E(k.target.value),onKeyDown:A,placeholder:s("modal.filter_name_placeholder"),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg outline-none focus:ring-2 focus:ring-blue-500/20 dark:text-white",autoFocus:!0})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(nf,{title:s("project"),items:m,selectedItems:N.project,onToggle:k=>Z("project",k)}),p.jsx(nf,{title:s("timeblock"),items:[...y,{id:xf,name:s("sidebar.unassigned")}],selectedItems:N.timeblock,onToggle:k=>Z("timeblock",k),labelFn:k=>k.id===xf||!k.start?k.name:`${k.start}-${k.end}`}),p.jsx(nf,{title:s("modal.duration"),items:y6.map(k=>({id:k.toString(),name:`${k} min`})),selectedItems:N.duration,onToggle:k=>Z("duration",k)}),p.jsx(nf,{title:s("modal.due_date"),items:[{id:"today",name:s("date_options.today")},{id:"tomorrow",name:s("date_options.tomorrow")},{id:"week",name:s("date_options.week")},{id:"next-week",name:s("date_options.next_week")}],selectedItems:N.date,onToggle:k=>Z("date",k)})]}),p.jsx(kc,{message:W}),p.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[p.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition",children:s("modal.cancel")}),p.jsx("button",{onClick:K,disabled:S,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50",children:S?"...":s(d?"modal.save":"modal.create")})]})]})}):null},_6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=ft(),{closeModal:o}=gn(),l=!!t,u=e,d=!!(u!=null&&u.id),{workspaceId:m}=Er(),[y,w]=D.useState(""),[x,E]=D.useState("#42A5F5"),[N,I]=D.useState(!1),[S,V]=D.useState(null),W=Le.useRef(null);D.useEffect(()=>{l&&(w((u==null?void 0:u.name)||""),E((u==null?void 0:u.color)||di[Math.floor(Math.random()*di.length)].value),V(null),I(!1))},[l,u]),D.useEffect(()=>{var K;S&&((K=W.current)==null||K.focus())},[S]);const U=D.useCallback(async()=>{const K=y.trim();if(!K){V(s("validation.label_name_required"));return}I(!0),V(null);try{if(!m){V(s("validation.label_workspace_required")),I(!1);return}d&&(u!=null&&u.id)?await jF(m,u.id,{name:K,color:x}):await PF(m,K,x),o()}catch(A){V(s("validation.save_fail")+": "+(A.message||"Error")),I(!1)}},[y,x,d,u,o,s]),G=D.useCallback(async()=>{if(u!=null&&u.id&&confirm(s("modal.label_delete_confirm").replace("{name}",u.name))){I(!0);try{m&&(u!=null&&u.id)&&await DF(m,u.id),o()}catch{V(s("validation.delete_fail")),I(!1)}}},[u,o,s]),Z=K=>{K.key==="Enter"&&!K.nativeEvent.isComposing&&(!N&&y.trim()&&U(),K.preventDefault())};return l?p.jsx(Do,{isOpen:l,onClose:o,className:"max-w-sm",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full flex-shrink-0 border-2 border-gray-100 dark:border-gray-700 shadow-sm",style:{backgroundColor:x}}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{htmlFor:"label-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1",children:s("modal.label_name")}),p.jsx("input",{ref:W,id:"label-name-input",name:"labelName",type:"text",value:y,onChange:K=>w(K.target.value),onKeyDown:Z,placeholder:s(d?"modal.label_name_placeholder":"modal.label_create_placeholder"),className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600 p-0",autoFocus:!0,"aria-label":s("modal.label_name"),"aria-invalid":!!S,"aria-describedby":S?"label-error-msg":void 0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:s("modal.theme_color")}),p.jsx("div",{className:"flex flex-wrap gap-2",children:di.map(K=>p.jsx("button",{type:"button",onClick:()=>E(K.value),className:Se("w-6 h-6 rounded-full transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",x===K.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800 scale-110":""),style:{backgroundColor:K.value},"aria-label":s(`colors.${K.key}`),"aria-pressed":x===K.value},K.value))})]}),p.jsx(kc,{message:S}),p.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.jsx("div",{className:"flex items-center gap-2",children:d&&p.jsx("button",{onClick:G,disabled:N,className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50","aria-label":s("modal.delete_label"),title:s("modal.delete_label"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:o,disabled:N,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:""}),p.jsx("button",{onClick:U,disabled:N||!y.trim(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:N?"...":d?"":""})]})]})]})}):null},w6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=ft(),{closeModal:o}=gn(),{currentWorkspaceId:l}=Fs(),u=!!t,d=e,m=!!(d!=null&&d.id),[y,w]=D.useState(""),[x,E]=D.useState("#7E57C2"),[N,I]=D.useState(!1),[S,V]=D.useState(null),W=Le.useRef(null);D.useEffect(()=>{u&&(w((d==null?void 0:d.name)||""),E((d==null?void 0:d.color)||di[3].value),V(null),I(!1))},[u,d]),D.useEffect(()=>{var K;S&&((K=W.current)==null||K.focus())},[S]);const U=D.useCallback(async()=>{const K=y.trim();if(!K){V(s("validation.project_name_required"));return}if(!l&&!m){V(s("validation.workspace_required"));return}I(!0),V(null);try{m&&(d!=null&&d.id)?await iF(d.id,{name:K,color:x}):l&&await sF(K,l,x),o()}catch(A){V(s("validation.save_fail")+": "+(A.message||"Error")),I(!1)}},[y,x,m,d,l,o,s]),G=D.useCallback(async()=>{if(d!=null&&d.id&&confirm(s("modal.project_delete_confirm").replace("{name}",d.name))){I(!0);try{await YI(d.id),o()}catch{V(s("validation.delete_fail")),I(!1)}}},[d,o,s]),Z=K=>{K.key==="Enter"&&!K.nativeEvent.isComposing&&(!N&&y.trim()&&U(),K.preventDefault())};return u?p.jsx(Do,{isOpen:u,onClose:o,className:"max-w-sm",zIndex:n,overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-500 shrink-0",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"project-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1",children:s("modal.project_name")}),p.jsx("input",{ref:W,id:"project-name-input",name:"projectName",type:"text",value:y,onChange:K=>w(K.target.value),onKeyDown:Z,placeholder:s("modal.project_name_placeholder"),className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600 p-0",autoFocus:!0,"aria-describedby":S?"project-error-msg":void 0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:s("modal.theme_color")}),p.jsx("div",{className:"flex flex-wrap gap-2",children:di.map(K=>p.jsx("button",{type:"button",onClick:()=>E(K.value),className:Se("w-6 h-6 rounded-full transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",x===K.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800 scale-110":""),style:{backgroundColor:K.value},"aria-label":s(`colors.${K.key}`),"aria-pressed":x===K.value},K.value))})]}),p.jsx(kc,{message:S,id:"project-error-msg"}),p.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.jsx("div",{className:"flex items-center gap-2",children:m&&p.jsx("button",{onClick:G,disabled:N,className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all disabled:opacity-50","aria-label":s("modal.delete_project"),title:s("modal.delete_project"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:o,disabled:N,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:s("modal.cancel")}),p.jsx("button",{onClick:U,disabled:N,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:N?"...":s(m?"modal.save":"modal.create")})]})]})]})}):null},cu=({title:t,children:e,defaultOpen:n=!0,icon:r,className:s})=>{const[o,l]=D.useState(n);return p.jsxs("section",{className:Se("border border-gray-200 dark:border-gray-700/50 rounded-xl overflow-hidden",s),children:[p.jsxs("button",{onClick:()=>l(!o),className:"w-full flex items-center justify-between p-4 bg-gray-50/50 dark:bg-gray-800/30 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors text-left",type:"button",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[r&&p.jsx("span",{className:"text-lg",children:r}),p.jsx("h4",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:t})]}),p.jsx("svg",{className:Se("w-4 h-4 text-gray-400 transition-transform duration-200",o&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p.jsx("div",{className:Se("transition-all duration-300 ease-in-out overflow-hidden bg-white dark:bg-transparent",o?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"),children:p.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700/30",children:e})})]})},b6=()=>{const{t}=ft(),{user:e}=Y0(),[n,r]=D.useState(""),[s,o]=D.useState(""),[l,u]=D.useState(!1),[d,m]=D.useState(!1),[y,w]=D.useState(null);if(!e)return p.jsx("div",{className:"text-center text-gray-500",children:t("settings_modal.account.not_logged_in")});const x=e.isAnonymous,E=async I=>{I.preventDefault(),m(!0),w(null);try{const S=Pa.credential(n,s);await vR(e,S),Jt.success(t("settings_modal.account.register_success"))}catch(S){console.error("Link account error:",S);let V=t("settings_modal.account.register_fail");S.code==="auth/email-already-in-use"&&(V=t("settings_modal.account.already_in_use")),S.code==="auth/weak-password"&&(V=t("settings_modal.account.weak_password")),w(V)}finally{m(!1)}},N=async()=>{confirm(t("settings_modal.account.logout_confirm"))&&(await EE(Ge),window.location.reload())};return p.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[p.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-2xl p-6 flex flex-col sm:flex-row items-center gap-8 sm:gap-6 border border-gray-100 dark:border-gray-700",children:[p.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-3xl shadow-inner shrink-0",children:x?"":""}),p.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:x?t("settings_modal.account.guest_user"):e.displayName||t("settings_modal.account.registered_user")}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono mb-4 break-all",children:x?`ID: ${e.uid.slice(0,8)}...`:e.email}),!x&&p.jsx("button",{onClick:N,className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 text-sm font-bold px-4 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border border-transparent hover:border-red-100 dark:hover:border-red-900/30",children:t("settings_modal.account.logout")})]})]}),x?p.jsxs("div",{className:"border border-blue-200 dark:border-blue-800 bg-blue-50/50 dark:bg-blue-900/10 rounded-2xl p-8 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:p.jsx("svg",{className:"w-32 h-32 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),p.jsxs("div",{className:"relative",children:[p.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," ",t("settings_modal.account.persist_account")]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6 leading-relaxed whitespace-pre-wrap",children:t("settings_modal.account.persist_desc")}),p.jsxs("form",{onSubmit:E,className:"space-y-4 max-w-md",children:[y&&p.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-lg font-medium animate-in slide-in-from-top-2",children:y}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"account-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:t("settings_modal.account.email_label")}),p.jsx("input",{id:"account-email",type:"email",required:!0,value:n,onChange:I=>r(I.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"mail@example.com",autoComplete:"email"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"account-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:t("settings_modal.account.password_label")}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{id:"account-password",type:l?"text":"password",required:!0,minLength:6,value:s,onChange:I=>o(I.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all pr-12",placeholder:"",autoComplete:"new-password"}),p.jsx("button",{type:"button",onClick:()=>u(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none p-1","aria-label":t(l?"settings_modal.account.hide_password":"settings_modal.account.show_password"),children:l?p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):p.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),p.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all active:scale-95 flex items-center justify-center gap-2 group",children:d?t("settings_modal.account.registering"):p.jsxs(p.Fragment,{children:[t("settings_modal.account.register"),p.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]})})]})]})]}):p.jsx("div",{className:"text-center py-8 text-gray-400",children:p.jsx("p",{children:t("settings_modal.account.registered_msg")})})]})},rf=({active:t,onClick:e,label:n,icon:r})=>p.jsxs("button",{onClick:e,className:Se("flex items-center gap-2 px-4 py-2 text-sm rounded-lg transition-all whitespace-nowrap min-w-0","md:w-full md:justify-start md:text-left md:py-2","flex-col w-full justify-center py-3 text-[10px] gap-1 rounded-none md:rounded-lg md:text-sm md:flex-row md:gap-3",t?"bg-white dark:bg-gray-800 shadow-sm text-blue-600 dark:text-blue-400 font-bold border-t-2 md:border-t-0 md:border md:border-gray-100 dark:md:border-gray-700 border-blue-500 md:border-transparent":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-200 border-t-2 md:border-t-0 border-transparent"),children:[p.jsx("span",{className:"text-lg md:text-base",children:r}),p.jsx("span",{className:"truncate font-medium",children:n})]}),x6=({isOpen:t,zIndex:e,overlayClassName:n})=>{const{t:r}=ft(),{closeModal:s}=gn(),{themeMode:o,setThemeMode:l,density:u,setDensity:d,fontSize:m,setFontSize:y,fontEn:w,setFontEn:x,fontJp:E,setFontJp:N,language:I,setLanguage:S}=$r(),{currentWorkspaceId:V}=Fs(),[W,U]=D.useState("appearance"),[G,Z]=D.useState(!1),K=!!t;return p.jsx(Do,{isOpen:K,onClose:s,title:r("settings_modal.title"),className:"w-full max-w-4xl h-[90vh] md:h-[85vh] p-0 overflow-hidden",zIndex:e,overlayClassName:n,children:p.jsxs("div",{className:"flex flex-col md:flex-row h-full",children:[p.jsx("div",{className:"order-last md:order-first w-full md:w-64 bg-white dark:bg-gray-900 md:bg-gray-50/50 md:dark:bg-gray-900/50 border-t md:border-t-0 md:border-r border-gray-200 dark:border-gray-700 shrink-0 z-10",children:p.jsxs("div",{className:"flex flex-row md:flex-col justify-around md:justify-start md:p-4 md:space-y-2 pb-safe md:pb-4",children:[p.jsx(rf,{active:W==="general",onClick:()=>U("general"),label:r("settings_modal.tabs.general"),icon:""}),p.jsx(rf,{active:W==="appearance",onClick:()=>U("appearance"),label:r("settings_modal.tabs.appearance"),icon:""}),p.jsx(rf,{active:W==="account",onClick:()=>U("account"),label:r("settings_modal.tabs.account"),icon:""}),p.jsx(rf,{active:W==="advanced",onClick:()=>U("advanced"),label:r("settings_modal.tabs.advanced"),icon:""})]})}),p.jsxs("div",{className:"flex-1 p-4 md:p-8 overflow-y-auto custom-scrollbar bg-white dark:bg-gray-900 order-first md:order-last relative",children:[W==="appearance"&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx(cu,{title:r("settings_modal.appearance.theme"),icon:"",defaultOpen:!0,children:p.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","system"].map(A=>p.jsx("button",{onClick:()=>l(A),className:Se("p-3 border rounded-xl text-sm font-medium transition-all",o===A?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-white dark:hover:bg-gray-800 bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400"),children:p.jsx("span",{className:"capitalize",children:r(`settings_modal.options.theme.${A}`)})},A))})}),p.jsx(cu,{title:r("settings_modal.appearance.density"),icon:"",defaultOpen:!0,children:p.jsx("div",{className:"space-y-3",children:["compact","normal","comfortable","spacious"].map(A=>p.jsxs("label",{htmlFor:`density-${A}`,className:Se("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors",u===A?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-transparent hover:bg-white dark:hover:bg-gray-800"),children:[p.jsx("div",{className:Se("w-4 h-4 rounded-full border flex items-center justify-center",u===A?"border-blue-500 bg-blue-500":"border-gray-300"),children:u===A&&p.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),p.jsx("input",{id:`density-${A}`,type:"radio",name:"density",checked:u===A,onChange:()=>d(A),className:"hidden"}),p.jsx("span",{className:"capitalize text-sm font-medium text-gray-700 dark:text-gray-300",children:r(`settings_modal.options.density.${A}`)})]},A))})}),p.jsx(cu,{title:r("settings_modal.appearance.font_size"),icon:"Aa",defaultOpen:!0,children:p.jsx("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:["sm","base","md","lg","xl"].map(A=>p.jsx("button",{onClick:()=>y(A),className:Se("flex-1 py-1.5 px-3 rounded text-sm font-medium transition-all",m===A?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:A},A))})}),p.jsx(cu,{title:r("settings_modal.appearance.fonts"),icon:"Tt",defaultOpen:!1,children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"settings-font-en",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:r("settings_modal.appearance.font_en")}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{id:"settings-font-en",name:"fontEn",value:w,onChange:A=>x(A.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none relative z-10 bg-transparent",children:At.FONTS.EU.map(A=>p.jsx("option",{value:A.value,children:A.label},A.value))}),p.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 z-0",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"settings-font-jp",className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 block",children:r("settings_modal.appearance.font_jp")}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{id:"settings-font-jp",name:"fontJp",value:E,onChange:A=>N(A.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none relative z-10 bg-transparent",children:At.FONTS.JP.map(A=>p.jsx("option",{value:A.value,children:A.label},A.value))}),p.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 z-0",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})})]}),W==="general"&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-800",children:[p.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," ",r("settings_modal.backup.title")]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:r("settings_modal.backup.description")}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[p.jsxs("button",{onClick:async()=>{if(!(!Ge.currentUser||!V))try{const A=await mF(Ge.currentUser.uid,V),k=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),R=URL.createObjectURL(k),P=document.createElement("a");P.href=R,P.download=`taskmg-backup-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(R)}catch(A){console.error(A),alert(r("settings_modal.backup.create_fail"))}},className:"btn-premium w-full sm:w-auto text-sm flex items-center justify-center gap-2 bg-white text-blue-600 border border-blue-200 hover:bg-blue-50 shadow-sm",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),p.jsx("span",{className:"inline",children:r("settings_modal.backup.create")})]}),p.jsxs("div",{className:"relative w-full sm:w-auto",children:[p.jsx("input",{type:"file",accept:".json",className:"hidden",id:"backup-import-input",onChange:async A=>{var P;const k=(P=A.target.files)==null?void 0:P[0];if(!k||!Ge.currentUser||!V)return;if(!window.confirm(r("settings_modal.backup.import_confirm"))){A.target.value="";return}const R=new FileReader;R.onload=async O=>{var M;try{const j=JSON.parse((M=O.target)==null?void 0:M.result),Ce=await gF(Ge.currentUser.uid,V,j);alert(r("settings_modal.backup.import_success").replace("{tasks}",String(Ce.tasksCount)).replace("{projects}",String(Ce.projectsCount))),window.location.reload()}catch(j){console.error(j),alert(r("settings_modal.backup.import_fail"))}},R.readAsText(k),A.target.value=""}}),p.jsxs("label",{htmlFor:"backup-import-input",className:"w-full sm:w-auto px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-bold rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer shadow-sm text-sm flex items-center justify-center gap-2 transition-colors",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),r("settings_modal.backup.import")]})]})]})]}),p.jsx(cu,{title:r("settings_modal.language.title"),icon:"",defaultOpen:!0,children:p.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{code:"ja",label:""},{code:"en",label:"English"}].map(A=>p.jsxs("button",{onClick:()=>S(A.code),className:Se("p-3 border rounded-xl text-sm font-medium transition-all",I===A.code?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:bg-white dark:hover:bg-gray-800 bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400"),children:[p.jsx("span",{className:"text-xl mr-2",children:A.code==="ja"?"":""}),A.label]},A.code))})})]}),W==="account"&&p.jsx(b6,{}),W==="advanced"&&p.jsx("div",{className:"flex flex-col gap-4",children:p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-xl border border-red-100 dark:border-red-900/30",children:[p.jsxs("h4",{className:"font-bold text-red-700 dark:text-red-400 mb-2 flex items-center gap-2",children:[p.jsx("span",{children:""})," ",r("settings_modal.maintenance.title")]}),p.jsx("p",{className:"text-sm text-red-600/80 dark:text-red-400/80 mb-4",children:r("settings_modal.maintenance.description")}),p.jsxs("label",{htmlFor:"backup-confirm-checkbox",className:"flex items-center gap-2 mb-4 cursor-pointer",children:[p.jsx("input",{id:"backup-confirm-checkbox",name:"backupConfirmed",type:"checkbox",className:"w-4 h-4 text-red-600 rounded border-red-300 focus:ring-red-500",checked:G,onChange:A=>Z(A.target.checked)}),p.jsx("span",{className:"text-sm font-bold text-red-700 dark:text-red-400",children:r("settings_modal.maintenance.confirm_backup")||""})]}),p.jsx("button",{onClick:async()=>{if(V&&confirm(r("settings_modal.maintenance.confirm_final")))try{const A=await OF(V);alert(r("settings_modal.maintenance.cleanup_success").replace("{count}",String(A))),A>0&&window.location.reload()}catch(A){console.error(A),alert(r("settings_modal.maintenance.cleanup_fail").replace("{error}",A.message))}},disabled:!G,className:"px-6 py-2.5 bg-red-600 hover:bg-red-700 disabled:bg-red-300 disabled:cursor-not-allowed text-white rounded-lg text-sm font-bold shadow-md hover:shadow-lg flex items-center justify-center gap-2 transition-all transform active:scale-95 disabled:transform-none",children:r("settings_modal.maintenance.cleanup_duplicate")})]})})]})]})})},k6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function E6(t){return t.replace(/[&<>"']/g,e=>k6[e]||e)}function T6(t){if(!t)return"";const e=t.split(`
`);let n=[],r=null;return e.forEach(s=>{const o=s.trimStart(),l=o.startsWith("* ")||o.startsWith("- "),u=/^\d+\.\s/.test(o),d=l||u;if(d){const m=u?"ol":"ul";if(r!==m){r&&n.push(`</${r}>`);const y=u?"list-decimal":"list-disc";n.push(`<${m} class="${y} ml-5 space-y-1">`),r=m}}else r&&(n.push(`</${r}>`),r=null);if(d){let m="";l?m=o.substring(2):m=o.replace(/^\d+\.\s/,"");const y=Ng(m);n.push(`<li>${y}</li>`)}else if(s.trim()){const m=s.match(/^(#{1,6})\s+(.+)$/);if(m){const y=m[1].length,w=Ng(m[2]),x={1:"text-2xl font-bold mb-3",2:"text-xl font-bold mb-2",3:"text-lg font-semibold mb-2",4:"text-base font-semibold mb-1",5:"text-sm font-semibold mb-1",6:"text-xs font-semibold mb-1"};n.push(`<h${y} class="${x[y]}">${w}</h${y}>`)}else n.push(`<p class="mb-2">${Ng(s)}</p>`)}else r&&(n.push(`</${r}>`),r=null)}),r&&n.push(`</${r}>`),n.join(`
`)}function Ng(t){return E6(t).replace(/\[(.*?)\]\((.*?)\)/g,(n,r,s)=>`<a href="${s.replace(/"/g,"&quot;")}" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300 underline font-medium">${r}</a>`)}const Wx={TODO:"todo"},I6=({isOpen:t,data:e,zIndex:n,overlayClassName:r})=>{const{t:s}=ft(),{closeModal:o}=gn(),l=!!t,u=e,d=!(u!=null&&u.id)||u.id.startsWith("temp-"),{projects:m}=Ap(),{timeBlocks:y}=kd(),{customDurations:w}=$r(),[x,E]=D.useState(""),[N,I]=D.useState(""),[S,V]=D.useState(null),[W,U]=D.useState(Wx.TODO),[G,Z]=D.useState(!1),[K,A]=D.useState(null),[k,R]=D.useState({type:"none",days:[]}),[P,O]=D.useState(null),[M,j]=D.useState(null),[Ce,nt]=D.useState(!1),[Qe,Ne]=D.useState(!1),X=D.useMemo(()=>[{value:"none",label:s("recurrence.none")},{value:"daily",label:s("recurrence.daily")},{value:"weekdays",label:s("recurrence.weekdays")},{value:"weekly",label:s("recurrence.weekly")},{value:"monthly",label:s("recurrence.monthly")}],[s]),pe=D.useMemo(()=>[s("days.sun"),s("days.mon"),s("days.tue"),s("days.wed"),s("days.thu"),s("days.fri"),s("days.sat")],[s]),[de,$]=D.useState(null);D.useEffect(()=>{var ne;if(u){E(u.title||""),I(u.description||""),V(u.projectId||null),U(u.status||Wx.TODO),Z(!!u.isImportant),O(u.timeBlockId||null),j(u.duration||null);const he=mn(u.dueDate);A(he);const rt=u.recurrence||{type:"none",days:[]};R(rt),rt!=null&&rt.type&&rt.type!=="none"&&!he&&A(XF(rt));const pt=!!(he||(rt==null?void 0:rt.type)!=="none"||u.timeBlockId||u.duration);Ne(pt||d),nt(!!((ne=u.description)!=null&&ne.trim()))}},[u,l]);const ee=D.useCallback(async()=>{if($(null),!x.trim()){$(s("validation.required"));return}if((k==null?void 0:k.type)==="weekly"&&(!k.days||k.days.length===0)){$(s("validation.select_days"));return}const ne={title:x.trim(),description:N.trim()??null,projectId:S==="none"?null:S,status:W,isImportant:G,dueDate:K?Tt.fromDate(K):null,recurrence:(k==null?void 0:k.type)==="none"?null:k,timeBlockId:P??null,duration:M??void 0};try{d?await n1({...ne,title:ne.title}):await tv(u.id,ne),o()}catch(he){console.error("Failed to save task",he),$(s("validation.save_fail"))}},[x,N,S,W,G,K,k,P,M,d,u,o,s]),ce=D.useCallback(async ne=>{if(ne==null||ne.preventDefault(),ne==null||ne.stopPropagation(),$(null),!(!(u!=null&&u.id)||d)&&confirm(s("modal.delete_confirm")))try{await d6(u.id),o()}catch(he){console.error("Failed to delete task",he),$(s("validation.delete_fail"))}},[u==null?void 0:u.id,d,o,s]),be=D.useCallback(ne=>{let he=[];ne==="weekly"?he=(k==null?void 0:k.days)||[]:ne==="weekdays"&&(he=[1,2,3,4,5]),R({type:ne,days:he})},[k==null?void 0:k.days]),De=D.useCallback(ne=>{const he=(k==null?void 0:k.days)||[],rt=he.includes(ne)?he.filter(pt=>pt!==ne):[...he,ne].sort((pt,yn)=>pt-yn);R({type:"weekly",days:rt})},[k==null?void 0:k.days]),Re=D.useMemo(()=>T6(N),[N]),Te=ne=>{ne.key==="Enter"&&!ne.nativeEvent.isComposing&&(ne.preventDefault(),ee())},Ue=ne=>{(ne.metaKey||ne.ctrlKey)&&ne.key==="Enter"&&(ne.preventDefault(),ee())};return l?p.jsx(Do,{isOpen:l,onClose:o,zIndex:n,className:"max-w-4xl h-[95vh] sm:h-[85vh] w-full mx-2 sm:mx-auto mt-4 sm:mt-0 pb-safe",overlayClassName:r,children:p.jsxs("div",{className:"flex flex-col h-full",onKeyDown:Ue,children:[p.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-700 flex items-center gap-3 shrink-0",children:[p.jsx("input",{id:"task-title",name:"title",type:"text",value:x,onChange:ne=>E(ne.target.value),onKeyDown:Te,placeholder:s("task_detail.title_placeholder"),className:"flex-1 text-xl font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder:text-gray-400",autoFocus:!0,"aria-label":s("task_detail.title_placeholder")}),p.jsx("button",{onClick:()=>Z(!G),className:Se("p-2 rounded-full transition-colors",G?"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),title:G?"":"",children:p.jsx("svg",{className:"w-6 h-6",fill:G?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),p.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[p.jsx(kc,{message:de,className:"mb-3"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 h-full",children:[p.jsxs("div",{className:"md:col-span-8 flex flex-col h-full min-h-[300px] bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("label",{className:"text-xs font-semibold text-gray-500 flex items-center gap-2 uppercase",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})," (Markdown)"]}),p.jsx("button",{type:"button",onClick:()=>nt(!Ce),className:"text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 px-3 py-1 rounded transition-colors text-xs font-medium","aria-label":Ce?"":"",children:Ce?"":""})]}),p.jsx("div",{className:"flex-1 relative",children:Ce?p.jsx("div",{className:"w-full h-full p-4 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm overflow-y-auto prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:Re||'<span class="text-gray-400"></span>'}}):p.jsx("textarea",{id:"task-description",name:"description",value:N,onChange:ne=>I(ne.target.value),placeholder:"...",className:"w-full h-full p-3 bg-gray-50 dark:bg-gray-900/50 border-0 rounded-lg outline-none text-sm transition-all resize-none leading-relaxed focus:ring-1 focus:ring-blue-500/50 text-gray-800 dark:text-gray-200 font-mono",autoFocus:!N,"aria-label":""})})]}),p.jsxs("div",{className:"md:col-span-4 space-y-4",children:[p.jsxs("details",{open:Qe,onToggle:ne=>Ne(ne.currentTarget.open),className:"group border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[p.jsxs("summary",{className:"flex items-center justify-between px-4 py-3 cursor-pointer list-none outline-none bg-gray-50 dark:bg-gray-700/30 rounded-t-lg group-[:not([open])]:rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700/50 focus:ring-2 focus:ring-inset focus:ring-blue-500",role:"button","aria-expanded":Qe,children:[p.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s("task_detail.schedule_label")]}),p.jsx("span",{className:"transform group-open:rotate-180 transition-transform text-gray-400",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),p.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-due-date",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.due_date_label")}),p.jsx("div",{className:"relative cursor-pointer",onClick:()=>{var he;const ne=document.getElementById("task-due-date");(he=ne==null?void 0:ne.showPicker)==null||he.call(ne)},children:p.jsx("input",{type:"date",id:"task-due-date",value:QF(K),onChange:ne=>A(ZF(ne.target.value)),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm cursor-pointer"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-recurrence",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.recurrence_label")}),p.jsx("select",{id:"task-recurrence",value:(k==null?void 0:k.type)||"none",onChange:ne=>be(ne.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:X.map(ne=>p.jsx("option",{value:ne.value,children:ne.label},ne.value))})]}),((k==null?void 0:k.type)==="weekly"||(k==null?void 0:k.type)==="weekdays")&&p.jsxs("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700 animate-in fade-in slide-in-from-top-1 duration-200",children:[p.jsx("span",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:s("task_detail.recurrence_days")}),p.jsx("div",{className:"flex flex-wrap gap-2",children:pe.map((ne,he)=>{var rt;return p.jsxs("label",{htmlFor:`recurrence-day-${he}`,className:"flex items-center gap-1 cursor-pointer select-none",children:[p.jsx("input",{id:`recurrence-day-${he}`,name:`recurrenceDay${he}`,type:"checkbox",checked:((rt=k.days)==null?void 0:rt.includes(he))||!1,onChange:()=>De(he),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),p.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:ne})]},he)})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-timeblock",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.time_block_label")}),p.jsxs("select",{id:"task-timeblock",value:P||"",onChange:ne=>O(ne.target.value||null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:s("task_detail.time_block_unspecified")}),y.map(ne=>p.jsxs("option",{value:ne.id,children:[ne.start," - ",ne.end]},ne.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"task-duration",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.duration_label")}),p.jsxs("select",{id:"task-duration",value:M||"",onChange:ne=>j(ne.target.value?parseInt(ne.target.value,10):null),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:s("task_detail.duration_none")}),w.map(ne=>p.jsxs("option",{value:ne,children:[ne," min"]},ne))]})]})]})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[p.jsx("label",{htmlFor:"task-project",className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:s("task_detail.project_label")}),p.jsxs("select",{id:"task-project",value:S||"none",onChange:ne=>V(ne.target.value==="none"?null:ne.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-sm appearance-none cursor-pointer",children:[p.jsx("option",{value:"none",children:s("task_detail.project_none")}),m.map(ne=>p.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]})]})]})]}),p.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center shrink-0",children:[!d&&p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("button",{type:"button",onClick:ce,className:"px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition flex items-center gap-1.5",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s("task_detail.delete_button")]})}),p.jsxs("div",{className:`flex gap-2 ${d?"ml-auto":""}`,children:[p.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition",children:s("modal.cancel")}),p.jsx("button",{type:"button",onClick:ee,className:"px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium shadow-md transition transform active:scale-95",children:s(d?"modal.create":"modal.save")})]})]})]})}):null};function Ec(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function S6(t,e){return t.reduce((n,r,s)=>{const o=e.get(r);return o&&(n[s]=o),n},Array(t.length))}function sf(t){return t!==null&&t>=0}function C6(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function A6(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const r1=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const o=Ec(e,r,n),l=e[s],u=o[s];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},of={scaleX:1,scaleY:1},Pp=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:l}=t;const u=(e=o[n])!=null?e:r;if(!u)return null;if(s===n){const m=o[l];return m?{x:0,y:n<l?m.top+m.height-(u.top+u.height):m.top-u.top,...of}:null}const d=N6(o,s,n);return s>n&&s<=l?{x:0,y:-u.height-d,...of}:s<n&&s>=l?{x:0,y:u.height+d,...of}:{x:0,y:0,...of}};function N6(t,e,n){const r=t[e],s=t[e-1],o=t[e+1];return r?n<e?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const s1="Sortable",i1=Le.createContext({activeIndex:-1,containerId:s1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:r1,disabled:{draggable:!1,droppable:!1}});function jp(t){let{children:e,id:n,items:r,strategy:s=r1,disabled:o=!1}=t;const{active:l,dragOverlay:u,droppableRects:d,over:m,measureDroppableContainers:y}=Fk(),w=rd(s1,n),x=u.rect!==null,E=D.useMemo(()=>r.map(K=>typeof K=="object"&&"id"in K?K.id:K),[r]),N=l!=null,I=l?E.indexOf(l.id):-1,S=m?E.indexOf(m.id):-1,V=D.useRef(E),W=!C6(E,V.current),U=S!==-1&&I===-1||W,G=A6(o);ds(()=>{W&&N&&y(E)},[W,E,N,y]),D.useEffect(()=>{V.current=E},[E]);const Z=D.useMemo(()=>({activeIndex:I,containerId:w,disabled:G,disableTransforms:U,items:E,overIndex:S,useDragOverlay:x,sortedRects:S6(E,d),strategy:s}),[I,w,G.draggable,G.droppable,U,E,S,d,x,s]);return Le.createElement(i1.Provider,{value:Z},e)}const R6=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return Ec(n,r,s).indexOf(e)},P6=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:o,newIndex:l,previousItems:u,previousContainerId:d,transition:m}=t;return!m||!r||u!==o&&s===l?!1:n?!0:l!==s&&e===d},j6={duration:200,easing:"ease"},o1="transform",D6=Ms.Transition.toString({property:o1,duration:0,easing:"linear"}),O6={roleDescription:"sortable"};function L6(t){let{disabled:e,index:n,node:r,rect:s}=t;const[o,l]=D.useState(null),u=D.useRef(n);return ds(()=>{if(!e&&n!==u.current&&r.current){const d=s.current;if(d){const m=lc(r.current,{ignoreTransform:!0}),y={x:d.left-m.left,y:d.top-m.top,scaleX:d.width/m.width,scaleY:d.height/m.height};(y.x||y.y)&&l(y)}}n!==u.current&&(u.current=n)},[e,n,r,s]),D.useEffect(()=>{o&&l(null)},[o]),o}function nv(t){let{animateLayoutChanges:e=P6,attributes:n,disabled:r,data:s,getNewIndex:o=R6,id:l,strategy:u,resizeObserverConfig:d,transition:m=j6}=t;const{items:y,containerId:w,activeIndex:x,disabled:E,disableTransforms:N,sortedRects:I,overIndex:S,useDragOverlay:V,strategy:W}=D.useContext(i1),U=M6(r,E),G=y.indexOf(l),Z=D.useMemo(()=>({sortable:{containerId:w,index:G,items:y},...s}),[w,s,G,y]),K=D.useMemo(()=>y.slice(y.indexOf(l)),[y,l]),{rect:A,node:k,isOver:R,setNodeRef:P}=uc({id:l,data:Z,disabled:U.droppable,resizeObserverConfig:{updateMeasurementsFor:K,...d}}),{active:O,activatorEvent:M,activeNodeRect:j,attributes:Ce,setNodeRef:nt,listeners:Qe,isDragging:Ne,over:X,setActivatorNodeRef:pe,transform:de}=kA({id:l,data:Z,attributes:{...O6,...n},disabled:U.draggable}),$=hC(P,nt),ee=!!O,ce=ee&&!N&&sf(x)&&sf(S),be=!V&&Ne,De=be&&ce?de:null,Te=ce?De??(u??W)({rects:I,activeNodeRect:j,activeIndex:x,overIndex:S,index:G}):null,Ue=sf(x)&&sf(S)?o({id:l,items:y,activeIndex:x,overIndex:S}):G,ne=O==null?void 0:O.id,he=D.useRef({activeId:ne,items:y,newIndex:Ue,containerId:w}),rt=y!==he.current.items,pt=e({active:O,containerId:w,isDragging:Ne,isSorting:ee,id:l,index:G,items:y,newIndex:he.current.newIndex,previousItems:he.current.items,previousContainerId:he.current.containerId,transition:m,wasDragging:he.current.activeId!=null}),yn=L6({disabled:!pt,index:G,node:k,rect:A});return D.useEffect(()=>{ee&&he.current.newIndex!==Ue&&(he.current.newIndex=Ue),w!==he.current.containerId&&(he.current.containerId=w),y!==he.current.items&&(he.current.items=y)},[ee,Ue,w,y]),D.useEffect(()=>{if(ne===he.current.activeId)return;if(ne!=null&&he.current.activeId==null){he.current.activeId=ne;return}const fr=setTimeout(()=>{he.current.activeId=ne},50);return()=>clearTimeout(fr)},[ne]),{active:O,activeIndex:x,attributes:Ce,data:Z,rect:A,index:G,newIndex:Ue,items:y,isOver:R,isSorting:ee,isDragging:Ne,listeners:Qe,node:k,overIndex:S,over:X,setNodeRef:$,setActivatorNodeRef:pe,setDroppableNodeRef:P,setDraggableNodeRef:nt,transform:yn??Te,transition:vn()};function vn(){if(yn||rt&&he.current.newIndex===G)return D6;if(!(be&&!Jf(M)||!m)&&(ee||pt))return Ms.Transition.toString({...m,property:o1})}}function M6(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Qf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const V6=[et.Down,et.Right,et.Up,et.Left],rv=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:o,over:l,scrollableAncestors:u}}=e;if(V6.includes(t.code)){if(t.preventDefault(),!n||!r)return;const d=[];o.getEnabled().forEach(w=>{if(!w||w!=null&&w.disabled)return;const x=s.get(w.id);if(x)switch(t.code){case et.Down:r.top<x.top&&d.push(w);break;case et.Up:r.top>x.top&&d.push(w);break;case et.Left:r.left>x.left&&d.push(w);break;case et.Right:r.left<x.left&&d.push(w);break}});const m=CC({collisionRect:r,droppableRects:s,droppableContainers:d});let y=xk(m,"id");if(y===(l==null?void 0:l.id)&&m.length>1&&(y=m[1].id),y!=null){const w=o.get(n.id),x=o.get(y),E=x?s.get(x.id):null,N=x==null?void 0:x.node.current;if(N&&E&&w&&x){const S=tp(N).some((K,A)=>u[A]!==K),V=a1(w,x),W=F6(w,x),U=S||!V?{x:0,y:0}:{x:W?r.width-E.width:0,y:W?r.height-E.height:0},G={x:E.left,y:E.top};return U.x&&U.y?G:Pu(G,U)}}}};function a1(t,e){return!Qf(t)||!Qf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function F6(t,e){return!Qf(t)||!Qf(e)||!a1(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}class z6 extends D.Component{constructor(n){super(n);Mr(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){LV(n,r.componentStack??void 0)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:p.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[p.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:p.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),p.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:""}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:""}),p.jsxs("div",{className:"flex gap-3 justify-center",children:[p.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""}),p.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:""})]}),!1]})}):this.props.children}}const U6=({className:t})=>p.jsx("svg",{className:Se("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),B6=({className:t})=>p.jsx("svg",{className:Se("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),$6=({className:t})=>p.jsx("svg",{className:Se("w-4 h-4",t),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),W6=({children:t,containerId:e="portal-root"})=>{const[n,r]=D.useState(!1),s=D.useRef(null);return D.useEffect(()=>{r(!0);let o=document.getElementById(e);return o||(o=document.createElement("div"),o.id=e,document.body.appendChild(o)),s.current=o,()=>{}},[e]),!n||!s.current?null:po.createPortal(t,s.current)},l1=()=>p.jsxs("div",{className:"space-y-2 p-2 animate-pulse",children:[p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),c1=({id:t,children:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:o,transition:l,isDragging:u}=nv({id:t}),d={transform:Ms.Transform.toString(o),transition:l,opacity:u?.5:1};return p.jsx("div",{ref:s,style:d,...n,...r,children:e})},qx=Array.from({length:24},(t,e)=>String(e).padStart(2,"0")),Hx=["00","15","30","45"],q6=({isOpen:t,zIndex:e,overlayClassName:n})=>{const{t:r}=ft(),{closeModal:s}=gn(),o=!!t,{timeBlocks:l}=kd(),{workspaceId:u}=Er(),[d,m]=D.useState([]),[y,w]=D.useState(!1),[x,E]=D.useState(null),[N,I]=D.useState(null),S=Xf(ko(cc,{activationConstraint:{distance:5}}),ko(sd,{coordinateGetter:rv}));D.useEffect(()=>{o&&(m(l.sort((k,R)=>(k.order||0)-(R.order||0))),E(null),w(!1))},[o,l]);const V=()=>{if(d.length>=bf.TIME_BLOCK.MAX_COUNT)return;let k="09:00",R="10:00";if(d.length>0){const O=d[d.length-1];if(O.end){const[M,j]=O.end.split(":").map(Number);k=O.end;const Ce=(M+1)%24;R=`${String(Ce).padStart(2,"0")}:${String(j).padStart(2,"0")}`}}const P={id:`new-${Date.now()}`,start:k,end:R,color:di[d.length%di.length].value,order:d.length};m([...d,P])},W=async k=>{if(!k.startsWith("new-")){if(!confirm(r("time_block.delete_confirm")))return;try{u&&await JI(u,k)}catch{E(r("validation.delete_fail"));return}}m(d.filter(R=>R.id!==k))},U=(k,R)=>{m(d.map(P=>P.id===k?{...P,...R}:P))},G=k=>{I(k.active.id)},Z=k=>{const{active:R,over:P}=k;I(null),P&&R.id!==P.id&&m(O=>{const M=O.findIndex(Ce=>Ce.id===R.id),j=O.findIndex(Ce=>Ce.id===P.id);return Ec(O,M,j)})},K=async()=>{w(!0),E(null);try{for(const P of d){if(!P.start||!P.end)continue;const[O,M]=P.start.split(":").map(Number),[j,Ce]=P.end.split(":").map(Number);if(O*60+M>=j*60+Ce)throw new Error(r("time_block.error_invalid_time",{start:P.start,end:P.end}))}const k=[...d].sort((P,O)=>(P.start||"").localeCompare(O.start||""));for(let P=0;P<k.length-1;P++){const O=k[P],M=k[P+1];if(!O.end||!M.start)continue;const[j,Ce]=O.end.split(":").map(Number),[nt,Qe]=M.start.split(":").map(Number);if(nt*60+Qe<j*60+Ce)throw new Error(r("time_block.error_overlap",{range1:`${O.start}-${O.end}`,range2:`${M.start}-${M.end}`}))}const R=d.map((P,O)=>{var j;const M={...P,id:(j=P.id)!=null&&j.startsWith("new-")?null:P.id,order:O,name:`${P.start}-${P.end}`};if(!u)throw new Error("No workspace");return hF(u,M)});await Promise.all(R),await Promise.all(R),s()}catch(k){E(k.message||r("validation.save_fail")),w(!1)}};if(!o)return null;const A=N?d.find(k=>k.id===N):null;return p.jsx(Do,{isOpen:o,onClose:s,title:r("time_block.settings_title"),className:"max-w-2xl h-[600px]",zIndex:e,overlayClassName:n,children:p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-3 custom-scrollbar",children:[p.jsxs(sp,{sensors:S,collisionDetection:ep,onDragStart:G,onDragEnd:Z,children:[p.jsx(jp,{items:d.map(k=>k.id),strategy:Pp,children:d.map(k=>p.jsx(c1,{id:k.id,children:p.jsx(Kx,{block:k,onDelete:()=>W(k.id),onUpdate:R=>U(k.id,R),isOverlay:!1})},k.id))}),p.jsx(VA,{dropAnimation:null,modifiers:[],children:A?p.jsx("div",{style:{transform:"scale(1.05)",opacity:.9},children:p.jsx(Kx,{block:A,onDelete:()=>{},onUpdate:()=>{},isOverlay:!0})}):null})]}),d.length<bf.TIME_BLOCK.MAX_COUNT?p.jsxs("button",{onClick:V,disabled:d.length>=bf.TIME_BLOCK.MAX_COUNT,className:"w-full py-4 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl text-gray-400 hover:border-blue-500 hover:text-blue-500 hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-all font-medium text-sm flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),r("time_block.add_button")]}):p.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400 text-sm rounded-lg flex items-center justify-center gap-2 border border-yellow-100 dark:border-yellow-900/30",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r("time_block.max_limit")]}),p.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/40 rounded-lg flex items-center text-sm text-gray-500 dark:text-gray-400",children:[p.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-gray-400 mr-3 shadow-sm"}),p.jsx("span",{className:"font-bold mr-2 text-gray-700 dark:text-gray-300",children:r("time_block.unspecified")}),p.jsx("span",{className:"text-xs opacity-80",children:r("time_block.default_zone_desc")})]})]}),p.jsx(kc,{message:x,className:"mb-4"}),p.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:p.jsx("button",{onClick:K,disabled:y,className:"px-8 py-2.5 bg-gray-900 hover:bg-gray-800 dark:bg-blue-600 dark:hover:bg-blue-500 text-white rounded-lg font-bold text-sm transition-all active:scale-95 shadow-md disabled:bg-gray-400",children:r(y?"saving":"done")})})]})})},Kx=({block:t,onDelete:e,onUpdate:n,isOverlay:r})=>{const{t:s}=ft(),[o,l]=D.useState(!1),u=t.start||"09:00",d=t.end||"10:00",[m,y]=u.split(":"),[w,x]=d.split(":");return p.jsxs("div",{className:`flex items-center gap-4 p-2 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-sm group ${r?"shadow-xl ring-2 ring-blue-500 scale-105 opacity-90 cursor-grabbing":""}`,children:[p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>l(!o),className:"w-6 h-6 rounded-full shadow-sm hover:scale-110 active:scale-95 transition-transform ring-2 ring-transparent focus:ring-blue-400 ring-offset-2 dark:ring-offset-gray-900",style:{backgroundColor:t.color||"#3B82F6"},title:s("time_block.change_color")}),o&&p.jsxs(W6,{children:[p.jsx("div",{className:"fixed inset-0 z-[9999] bg-transparent",onClick:()=>l(!1)}),p.jsxs("div",{className:"fixed z-[10000] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl p-4 w-[280px] animate-fade-in-down",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[p.jsx("h4",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase mb-3 tracking-wider",children:s("modal.theme_color")}),p.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:di.map(E=>p.jsx("button",{onClick:()=>{n({color:E.value}),l(!1)},className:Se("w-8 h-8 rounded-full transition-transform hover:scale-110 ring-2 ring-transparent hover:ring-blue-400 focus:outline-none focus:scale-110",t.color===E.value&&"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800"),style:{backgroundColor:E.value},"aria-label":s(`colors.${E.key}`),"aria-pressed":t.color===E.value},E.value))})]})]})]}),p.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(af,{options:qx,value:m,onChange:E=>n({start:`${E}:${y}`})}),p.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),p.jsx(af,{options:Hx,value:y,onChange:E=>n({start:`${m}:${E}`})})]}),p.jsx("div",{className:"w-4 h-0.5 bg-gray-200 dark:bg-gray-700 rounded-full"}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(af,{options:qx,value:w,onChange:E=>n({end:`${E}:${x}`})}),p.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:":"}),p.jsx(af,{options:Hx,value:x,onChange:E=>n({end:`${w}:${E}`})})]})]}),p.jsx("button",{onClick:e,className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:s("modal.delete"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},af=({options:t,value:e,onChange:n,label:r})=>{const{t:s}=ft();return p.jsx("select",{value:e,onChange:o=>n(o.target.value),className:"appearance-none px-2 py-1 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm font-mono font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-100 dark:focus:ring-blue-900 outline-none cursor-pointer","aria-label":r||s("time_block.time_select"),children:t.map(o=>p.jsx("option",{value:o,children:o},o))})},H6=({isOpen:t,data:e,zIndex:n})=>{const{t:r}=ft(),{closeModal:s}=gn(),o=!!t,l=e,u=!!(l!=null&&l.id),[d,m]=D.useState(""),[y,w]=D.useState(!1),[x,E]=D.useState(null),N=Le.useRef(null);D.useEffect(()=>{o&&(m((l==null?void 0:l.name)||""),E(null),w(!1))},[o,l]),D.useEffect(()=>{var V;x&&((V=N.current)==null||V.focus())},[x]);const I=D.useCallback(async()=>{const V=d.trim();if(!V){E(r("validation.workspace_name_required"));return}if(NV().some(G=>G.name===V&&G.id!==(l==null?void 0:l.id))){E(r("validation.workspace_duplicate"));return}w(!0),E(null);try{if(u&&(l!=null&&l.id))await DV(l.id,V);else{const G=await ZI(V);G!=null&&G.id&&confirm(r("validation.workspace_confirm_switch"))&&QI(G.id)}s()}catch(G){E(r("validation.save_fail")+": "+(G.message||"Error")),w(!1)}},[d,u,l,s,r]),S=V=>{V.key==="Enter"&&!V.nativeEvent.isComposing&&I()};return o?p.jsx(Do,{isOpen:o,onClose:s,className:"max-w-md",children:p.jsxs("div",{className:"flex flex-col gap-6 max-h-[85vh] overflow-y-auto p-1",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"workspace-name-input",className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-2",children:r(u?"modal.workspace_edit_title":"modal.workspace_create_title")}),p.jsx("input",{ref:N,id:"workspace-name-input",name:"workspaceName",type:"text",value:d,onChange:V=>m(V.target.value),onKeyDown:S,placeholder:r("modal.workspace_name_placeholder"),className:"w-full text-lg font-bold bg-transparent border-none outline-none text-gray-800 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-600",autoFocus:!0})]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:r(u?"modal.workspace_desc_edit":"modal.workspace_desc_create")}),p.jsx(kc,{message:x}),p.jsxs("div",{className:"flex justify-end items-center pt-4 border-t border-gray-200 dark:border-gray-700 gap-3",children:[p.jsx("button",{onClick:s,disabled:y,className:"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition disabled:opacity-50",children:r("modal.cancel")}),p.jsx("button",{onClick:I,disabled:y,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white text-sm font-bold rounded-lg shadow-md transition-all transform active:scale-95",children:r(y?"saving":u?"modal.save":"modal.create")})]})]})}):null},K6=({isOpen:t,data:e,zIndex:n})=>{const{closeModal:r}=gn(),s=!!t,o=e,l=D.useCallback(()=>{Ma.getState().setView("wizard",{mode:o.id}),r()},[o,r]);return!s||!o?null:p.jsx(Do,{isOpen:s,onClose:r,className:"max-w-3xl max-h-[90vh] p-0 overflow-hidden bg-transparent shadow-none",children:p.jsxs("div",{className:"w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[p.jsx("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-4xl animate-bounce-slow",children:o.icon}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:o.title}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:o.subTitle})]})]})}),p.jsxs("div",{className:"p-6 overflow-y-auto flex-1 custom-scrollbar",children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-blue-600 dark:bg-blue-400 mr-2 rounded-full"}),""]}),p.jsx("p",{className:"text-base text-gray-700 dark:text-gray-300 leading-relaxed bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:o.concept.summary})]}),p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-gray-400 mr-2 rounded-full"}),""]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed mb-3",children:o.concept.detail})]}),Array.isArray(o.useCases)&&o.useCases.length>0&&p.jsxs("div",{className:"mb-8",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-purple-500 mr-2 rounded-full"}),"Use Cases"]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.useCases.map((u,d)=>p.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/40 rounded-lg p-5 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 transition-colors",children:[p.jsxs("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center",children:[p.jsx("span",{className:"text-purple-500 mr-2",children:"#"}),u.title]}),p.jsx("div",{className:"mb-3",children:p.jsxs("div",{className:"flex items-start mb-1",children:[p.jsx("span",{className:"text-[10px] font-bold text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"Before"}),p.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.before})]})}),p.jsx("div",{children:p.jsxs("div",{className:"flex items-start",children:[p.jsx("span",{className:"text-[10px] font-bold text-blue-600 bg-blue-100 dark:bg-blue-900/40 dark:text-blue-300 px-1.5 py-0.5 rounded mr-2 mt-0.5 min-w-[40px] text-center",children:"After"}),p.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-300 font-medium",children:u.after})]})})]},d))})]}),o.tips&&o.tips.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[p.jsx("span",{className:"w-1 h-4 bg-amber-500 mr-2 rounded-full"}),"Tips"]}),p.jsx("div",{className:"space-y-3",children:o.tips.map((u,d)=>p.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-lg border border-amber-100 dark:border-amber-900/30",children:[p.jsxs("p",{className:"font-bold text-amber-800 dark:text-amber-400 mb-1",children:["Q. ",u.q]}),p.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["A. ",u.a]})]},d))})]})]}),p.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[p.jsx("button",{onClick:r,className:"px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""}),p.jsxs("button",{onClick:l,className:"group relative px-6 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg shadow-md transition-all transform hover:scale-105 active:scale-95 overflow-hidden",children:[p.jsxs("span",{className:"relative z-10 flex items-center",children:["",p.jsx("svg",{className:"w-4 h-4 ml-2 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})]}),p.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 skew-y-12"})]})]})]})})},G6=()=>{const{stack:t}=gn();return t.length===0?null:p.jsx(p.Fragment,{children:t.map((e,n)=>{const s=n===0?void 0:"bg-black/30",o={isOpen:!0,data:e.data,zIndex:100+n*10,overlayClassName:s};switch(e.type){case"settings":return p.jsx(x6,{...o},e.id);case"task-detail":return p.jsx(I6,{...o},e.id);case"label-edit":return p.jsx(_6,{...o},e.id);case"project-edit":return p.jsx(w6,{...o},e.id);case"workspace-edit":return p.jsx(H6,{...o},e.id);case"filter-edit":return p.jsx(v6,{...o},e.id);case"timeblock-edit":return p.jsx(q6,{...o},e.id);case"wiki-framework":return p.jsx(K6,{...o},e.id);default:return null}})})},Tc=()=>{const{workspaceId:t,loading:e}=Er(),n=D.useCallback(u=>t?f6(t,d=>u(d),d=>console.error("Task subscription error:",d)):()=>{},[t]),r=t?m6(t):!1,{data:s,isPending:o}=xc(["tasks",t],n,t&&r?p6(t):void 0);return{tasks:s||[],loading:e||!!t&&!r&&o}};function Q6(){const{tasks:t}=Tc(),{showCompleted:e,query:n}=Br();return D.useMemo(()=>{var l,u;const s={inbox:0,today:0,upcoming:0,important:0,all:0,search:0},o=n?n.toLowerCase().trim():"";for(const d of t){if(o){const y=(l=d.title)==null?void 0:l.toLowerCase().includes(o),w=(u=d.description)==null?void 0:u.toLowerCase().includes(o);(y||w)&&s.search++}d.status==="archived"||d.status==="completed"||(s.all++,(!d.projectId||d.projectId==="unassigned"||d.projectId==="none")&&s.inbox++,d.isImportant&&s.important++,d.dueDate&&(qF(d.dueDate)?s.today++:HF(d.dueDate)&&s.upcoming++))}return s},[t,n])}const Z6=t=>t in At.SIDEBAR_DENSITY,sv=t=>Z6(t)?At.SIDEBAR_DENSITY[t]:At.SIDEBAR_DENSITY.normal,Y6=[{id:"inbox",i18nKey:"inbox",icon:"",color:"text-blue-500",droppable:!0},{id:"today",i18nKey:"today",icon:"",color:"text-green-500"},{id:"upcoming",i18nKey:"upcoming",icon:"",color:"text-purple-500"},{id:"important",i18nKey:"important",icon:"",color:"text-amber-400"},{id:"custom",i18nKey:"all_tasks",icon:"",color:"text-gray-500"}],J6=()=>{const{tasks:t}=Tc(),{language:e}=$r(),{t:n}=xd(e),r=Q6();return p.jsx("ul",{className:"space-y-0.5",children:Y6.map(s=>p.jsx(X6,{item:s,tasks:t,label:n(s.i18nKey),count:r[s.id]||0},s.id))})},X6=({item:t,tasks:e,label:n,count:r})=>{const{filterType:s,setFilter:o}=Br(),{currentView:l,setView:u}=Ma(),{density:d}=$r(),m=l==="tasks"&&s===t.id,{setNodeRef:y,isOver:w}=uc({id:`filter:${t.id}`,disabled:!t.droppable,data:{type:t.id==="inbox"?"inbox":"filter",value:t.id}}),x=()=>{t.id==="search"?(u("tasks"),o("search")):(u("tasks"),o(t.id))};return p.jsx("li",{ref:y,children:p.jsxs("button",{onClick:x,className:Se("w-full flex items-center px-3 text-sm rounded-md transition-colors text-left gap-3 group/item",sv(d),m?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",w&&t.droppable&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),children:[p.jsx("span",{className:t.color,children:t.icon}),p.jsx("span",{className:"flex-1",children:n}),t.id!=="search"&&r>0&&p.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:r})]})})},ez=()=>{const{workspaceId:t,loading:e}=Er(),n=D.useCallback(u=>t?_F(t,u):()=>{},[t]),r=t?vF(t):!1,{data:s,isPending:o}=xc(["filters",t||"pending"],n,t&&r?yF(t):void 0);return{filters:s,loading:e||!!t&&o}};function tz(t,e="createdAt_desc"){if(!Array.isArray(t))return[];const[n,r]=e.split("_"),o=r==="desc"?-1:1;return[...t].sort((l,u)=>{var y,w,x,E,N,I;let d,m;switch(n){case"dueDate":d=(y=mn(l.dueDate))==null?void 0:y.getTime(),m=(w=mn(u.dueDate))==null?void 0:w.getTime();break;case"createdAt":d=(x=mn(l.createdAt))==null?void 0:x.getTime(),m=(E=mn(u.createdAt))==null?void 0:E.getTime();break;case"title":d=l.title.toLowerCase(),m=u.title.toLowerCase();break;case"duration":d=l.duration||0,m=u.duration||0;break;case"important":d=l.isImportant?1:0,m=u.isImportant?1:0;break;case"manual":d=l.order!==void 0?l.order:Number.MAX_SAFE_INTEGER,m=u.order!==void 0?u.order:Number.MAX_SAFE_INTEGER;break;default:d=(N=mn(l.createdAt))==null?void 0:N.getTime(),m=(I=mn(u.createdAt))==null?void 0:I.getTime()}return nz(d,m)*o})}function nz(t,e){return t===e?0:t==null?1:e==null?-1:t>e?1:t<e?-1:0}function rz(){const t=new Date;t.setHours(0,0,0,0);const e=new Date(t);e.setDate(e.getDate()+1);const n=KF(t),r=new Date(n);r.setDate(r.getDate()+7);const s=new Date(e);return s.setDate(s.getDate()+7),{now:t,tomorrow:e,weekStart:n,weekEnd:r,upcomingEnd:s}}function sz(t,e,n,r){const{now:s,tomorrow:o,weekStart:l,weekEnd:u,upcomingEnd:d}=n;switch(e){case"today":return Bx(t,s);case"tomorrow":return Bx(t,o);case"week":return t>=l&&t<u;case"upcoming":return t>=o&&t<d;case"overdue":return t<s&&r!=="completed";default:return!1}}function Gx(t,e){if(!e)return t;const n=typeof e=="string"?X0(e):e,r=n.dates.length>0?rz():null;return t.filter(s=>{if(n.status.length>0){const l=s.status||"todo";if(!n.status.some(d=>d==="active"&&l==="todo"?!0:d===l))return!1}if(n.excludeStatus.length>0){const l=s.status||"todo";if(n.excludeStatus.some(d=>d==="active"&&l==="todo"?!0:d===l))return!1}if(n.isImportant===!0&&!s.isImportant||n.isImportant===!1&&s.isImportant||n.projects.length>0&&!n.projects.some(u=>u==="unassigned"?!s.projectId||s.projectId==="unassigned"||s.projectId==="none":s.projectId===u)||n.excludeProjects.length>0&&n.excludeProjects.some(l=>s.projectId===l)||n.labels.length>0&&(!s.labelIds||!n.labels.some(l=>{var u;return(u=s.labelIds)==null?void 0:u.includes(l)}))||n.excludeLabels.length>0&&s.labelIds&&n.excludeLabels.some(l=>{var u;return(u=s.labelIds)==null?void 0:u.includes(l)})||n.timeBlocks.length>0&&!n.timeBlocks.some(u=>u==="unassigned"?!s.timeBlockId:s.timeBlockId===u)||n.excludeTimeBlocks.length>0&&n.excludeTimeBlocks.some(l=>s.timeBlockId===l))return!1;if(n.durations.length>0){const l=s.duration||0;if(!n.durations.includes(l))return!1}if(r&&n.dates.length>0){const l=mn(s.dueDate);if(!l||!n.dates.some(d=>sz(l,d,r,s.status||"todo")))return!1}const o=`${s.title} ${s.description||""}`.toLowerCase();return!(n.keywords.length>0&&!n.keywords.every(u=>Array.isArray(u)?u.some(d=>o.includes(d)):o.includes(u))||n.excludeKeywords.length>0&&n.excludeKeywords.some(u=>o.includes(u)))})}function iz(t){const{keyword:e,showCompleted:n,projectId:r,labelId:s,timeBlockId:o,duration:l,filterType:u}=t,d=e?X0(e):{keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(r&&d.projects.push(r),s&&d.labels.push(s),o&&d.timeBlocks.push(o),l){const m=typeof l=="number"?l:parseInt(l,10);isNaN(m)||d.durations.push(m)}return u==="today"&&d.dates.push("today"),u==="upcoming"&&d.dates.push("upcoming"),u==="important"&&(d.isImportant=!0),n||d.status.length===0&&d.status.push("active"),d}function u1(t,e){const{savedFilter:n,sortCriteria:r}=e,s=iz(e);let o=Gx(t,s);return n&&n.query&&(o=Gx(o,n.query)),tz(o,r||"createdAt_desc")}const iv=({x:t,y:e,onClose:n,children:r})=>{const s=D.useRef(null);return D.useEffect(()=>{const o=u=>{s.current&&!s.current.contains(u.target)&&n()},l=()=>n();return document.addEventListener("mousedown",o),window.addEventListener("scroll",l,!0),()=>{document.removeEventListener("mousedown",o),window.removeEventListener("scroll",l,!0)}},[n]),po.createPortal(p.jsx("div",{ref:s,className:"fixed z-50 min-w-[160px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-100",style:{top:e,left:t},onContextMenu:o=>o.preventDefault(),children:r}),document.body)},ic=({onClick:t,children:e,className:n,icon:r,variant:s="default"})=>p.jsxs("button",{onClick:o=>{o.stopPropagation(),t()},className:Se("w-full text-left px-3 py-2 text-sm flex items-center gap-2 transition-colors",s==="danger"?"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",n),children:[r&&p.jsx("span",{className:Se("w-4 h-4",s==="danger"?"text-red-500":"text-gray-400"),children:r}),e]}),Ea=({icon:t,label:e,count:n,isActive:r,isOver:s,onClick:o,onContextMenu:l,showZero:u=!1})=>{const{density:d}=$r();return p.jsxs("button",{type:"button",onClick:o,onContextMenu:l,className:Se("w-full text-left group flex items-center justify-between px-2 ml-1 rounded-md transition-colors select-none outline-none focus:ring-2 focus:ring-blue-500/50",sv(d),r?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",s&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t&&p.jsx("span",{className:"flex-shrink-0 w-5 flex justify-center text-sm",children:t}),p.jsx("span",{className:"text-sm truncate",children:e})]}),n!==void 0&&(n>0||u&&n===0)&&p.jsx("span",{className:Se("text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700/50",r?"text-blue-700 dark:text-blue-300 bg-white":"text-gray-400"),children:n})]})},oz=()=>{const{filters:t,loading:e}=ez(),{tasks:n}=Tc(),{workspaceId:r}=Er();return e?null:p.jsx("div",{className:"space-y-0.5 py-1",children:t.map(s=>p.jsx(az,{filter:s,tasks:n,workspaceId:r},s.id))})},az=({filter:t,tasks:e,workspaceId:n})=>{const{t:r}=ft(),{filterType:s,targetId:o,setFilter:l}=Br(),{openModal:u}=gn(),d=s==="custom"&&o===t.id,[m,y]=D.useState(null),w=Le.useMemo(()=>{try{return u1(e,{savedFilter:t,showCompleted:!1}).length}catch(I){return console.warn("[CustomFilterItem] Count error:",I),0}},[e,t]),x=()=>{y(null),u("filter-edit",t)},E=async()=>{y(null),confirm(`${r("filter")}: ${t.name}
${r("msg.confirm_delete")}`)&&t.id&&n&&await xF(n,t.id)},N=I=>{I.preventDefault(),I.stopPropagation(),y({x:I.clientX,y:I.clientY})};return p.jsxs(p.Fragment,{children:[p.jsx("div",{onContextMenu:N,children:p.jsx(Ea,{label:t.name,icon:p.jsx("span",{children:""}),count:w,isActive:d,onClick:()=>l("custom",t.id)})}),m&&p.jsxs(iv,{x:m.x,y:m.y,onClose:()=>y(null),children:[p.jsx(ic,{onClick:x,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:r("edit")}),p.jsx(ic,{onClick:E,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:r("delete")})]})]})},lz=Le.memo(({mins:t,count:e})=>{const{t:n}=ft(),{filterType:r,targetId:s,setFilter:o}=Br(),l=r==="duration"&&s===t.toString(),{setNodeRef:u,isOver:d}=uc({id:`duration:${t}`,data:{type:"duration",value:t.toString()}});return p.jsx("div",{ref:u,children:p.jsx(Ea,{label:n("sidebar.duration_format",{min:t}),icon:p.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),count:e,isActive:l,isOver:d,onClick:()=>o("duration",t.toString())})})}),cz=()=>{const{tasks:t}=Tc(),e=At.SIDEBAR.DURATIONS,n=D.useMemo(()=>{const r=new Map;return t.forEach(s=>{if(s.status!=="completed"&&s.duration){const o=Number(s.duration);isNaN(o)||r.set(o,(r.get(o)||0)+1)}}),r},[t]);return p.jsx("div",{className:"space-y-0.5 py-1",children:e.map(r=>p.jsx(lz,{mins:r,count:n.get(r)||0},r))})},uz=Le.memo(({project:t})=>{const{t:e}=ft(),{filterType:n,targetId:r,setFilter:s}=Br(),{density:o}=$r(),{openModal:l}=gn(),u=n==="project"&&r===t.id,[d,m]=D.useState(null),{setNodeRef:y,isOver:w}=uc({id:`project:${t.id}`,data:{type:"project",value:t.id}}),x=I=>{I==null||I.stopPropagation(),m(null),l("project-edit",t)},E=async()=>{m(null),confirm(`${e("project")}: ${t.name}
${e("msg.confirm_delete")}`)&&t.id&&await YI(t.id)},N=I=>{I.preventDefault(),I.stopPropagation(),m({x:I.clientX,y:I.clientY})};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{ref:y,onClick:()=>s("project",t.id),onContextMenu:N,className:Se("group flex items-center justify-between px-2 rounded-md cursor-pointer transition-colors select-none",sv(o),u?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",w&&"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50"),role:"button",tabIndex:0,"aria-selected":u,"aria-label":`${e("project")}: ${t.name}${u?` (${e("active")})`:""}`,children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[p.jsx("span",{className:Se("text-xs shrink-0 transition-colors",u?"text-blue-500":"text-gray-400 group-hover:text-gray-500"),children:p.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),p.jsx("span",{className:"text-sm truncate",children:t.name})]}),p.jsx("button",{onClick:x,className:Se("p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-opacity",u?"opacity-100":"opacity-0 sm:group-hover:opacity-100 focus:opacity-100"),"aria-label":e("edit"),title:e("edit"),children:p.jsx("svg",{className:"w-3.5 h-3.5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),d&&p.jsxs(iv,{x:d.x,y:d.y,onClose:()=>m(null),children:[p.jsx(ic,{onClick:x,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:e("edit")}),p.jsx(ic,{onClick:E,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:e("delete")})]})]})}),dz=()=>{const{t}=ft(),{projects:e,loading:n}=Ap();return n?p.jsx(l1,{}):e.length===0?p.jsx("div",{className:"p-4 text-xs text-gray-400",children:t("sidebar.no_projects")}):p.jsx(jp,{items:e.map(r=>r.id),strategy:Pp,children:p.jsx("div",{className:"space-y-0.5 p-2",children:e.map(r=>p.jsx(c1,{id:r.id,children:p.jsx(uz,{project:r})},r.id))})})},hz=({title:t,children:e,defaultExpanded:n=!0,action:r,dragHandleProps:s})=>{const{t:o}=ft(),[l,u]=D.useState(()=>typeof window<"u"&&window.innerWidth<768?!1:n),m=`section-${encodeURIComponent(t.replace(/\s+/g,"-").toLowerCase())}`;return p.jsxs("div",{className:"mb-2 group/section",children:[p.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[p.jsxs("button",{...s,onClick:()=>u(!l),"aria-expanded":l,"aria-controls":m,className:"flex items-center flex-1 text-xs font-semibold text-gray-500 uppercase hover:text-gray-700 dark:hover:text-gray-300 transition-colors text-left cursor-grab active:cursor-grabbing touch-none select-none",title:o("sidebar.reorder_section"),children:[p.jsx("svg",{className:Se("w-3 h-3 mr-1 transition-transform",l?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),t]}),r&&p.jsx("div",{className:"opacity-100 transition-opacity",onClick:y=>y.stopPropagation(),children:r})]}),l&&p.jsx("div",{className:"mt-1",id:m,children:e})]})},fz=()=>{const{t}=ft(),{currentView:e,setView:n}=Ma();return p.jsxs("div",{className:"space-y-0.5 py-1",children:[p.jsx(Ea,{label:t("sidebar.target_wizard"),icon:p.jsx(U6,{}),isActive:e==="wizard",onClick:()=>n("wizard")}),p.jsx(Ea,{label:t("sidebar.target_dashboard"),icon:p.jsx(B6,{}),isActive:e==="target-dashboard",onClick:()=>n("target-dashboard")}),p.jsx(Ea,{label:t("sidebar.framework_wiki"),icon:p.jsx($6,{}),isActive:e==="wiki",onClick:()=>n("wiki")})]})},pz=()=>{const{timeBlocks:t,loading:e}=kd(),{tasks:n}=Tc(),{workspaceId:r}=Er(),s=Le.useMemo(()=>{const o=new Map;let l=0;return n.forEach(u=>{u.status!=="completed"&&(!u.timeBlockId||u.timeBlockId==="unassigned"||u.timeBlockId==="null"?l++:o.set(u.timeBlockId,(o.get(u.timeBlockId)||0)+1))}),{map:o,unassignedCount:l}},[n]);return e?p.jsx(l1,{}):p.jsxs("div",{className:"space-y-0.5 py-1",children:[t.map(o=>p.jsx(mz,{block:o,count:s.map.get(o.id||"")||0,workspaceId:r},o.id)),p.jsx(gz,{count:s.unassignedCount})]})},mz=({block:t,count:e,workspaceId:n})=>{const{t:r}=ft(),{filterType:s,targetId:o,setFilter:l}=Br(),{openModal:u}=gn(),d=s==="timeblock"&&o===t.id,[m,y]=D.useState(null),{setNodeRef:w,isOver:x}=uc({id:`timeblock:${t.id}`,data:{type:"timeblock",value:t.id}}),E=()=>{y(null),u("timeblock-edit",t)},N=async()=>{y(null),confirm(`${r("timeblock")}: ${t.start} - ${t.end}
${r("msg.confirm_delete")}`)&&t.id&&n&&await JI(n,t.id)},I=S=>{S.preventDefault(),S.stopPropagation(),y({x:S.clientX,y:S.clientY})};return p.jsxs("div",{ref:w,onContextMenu:I,children:[p.jsx(Ea,{label:`${t.start} - ${t.end}`,icon:p.jsx("span",{className:"w-2 rounded-full aspect-square",style:{backgroundColor:t.color}}),count:e,isActive:d,isOver:x,onClick:()=>l("timeblock",t.id||"")}),m&&p.jsxs(iv,{x:m.x,y:m.y,onClose:()=>y(null),children:[p.jsx(ic,{onClick:E,icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),children:r("edit")}),p.jsx(ic,{onClick:N,variant:"danger",icon:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:r("delete")})]})]})},gz=({count:t})=>{const{t:e}=ft(),{filterType:n,targetId:r,setFilter:s}=Br(),o=n==="timeblock"&&r==="unassigned",{setNodeRef:l,isOver:u}=uc({id:"timeblock:unassigned",data:{type:"timeblock",value:"unassigned"}});return p.jsx("div",{ref:l,children:p.jsx(Ea,{label:e("sidebar.unassigned"),icon:p.jsx("span",{className:"w-2 rounded-full aspect-square bg-gray-400"}),count:t,isActive:o,isOver:u,onClick:()=>s("timeblock","unassigned")})})},yz=({id:t,section:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:o,transition:l,isDragging:u}=nv({id:t}),d={transform:Ms.Transform.toString(o),transition:l,opacity:u?.5:1};return p.jsx("div",{ref:s,style:d,...n,children:p.jsx(hz,{title:e.title,defaultExpanded:e.defaultExpanded,action:e.action,dragHandleProps:r,children:e.component})})},vz=["general","projects","targets","timeblocks","durations","filters"],_z=()=>{const{t}=ft(),{openModal:e}=gn(),[n,r]=Le.useState(()=>{const u=localStorage.getItem(At.STORAGE_KEYS.SECTION_ORDER);if(u)try{const d=JSON.parse(u);if(Array.isArray(d)&&d.every(m=>typeof m=="string"))return d}catch{}return vz});D.useEffect(()=>{localStorage.setItem(At.STORAGE_KEYS.SECTION_ORDER,JSON.stringify(n))},[n]);const s=Xf(ko(cc,{activationConstraint:{distance:8}}),ko(sd,{coordinateGetter:rv})),o=u=>{const{active:d,over:m}=u;m&&d.id!==m.id&&r(y=>{const w=y.indexOf(d.id),x=y.indexOf(m.id);return Ec(y,w,x)})},l=Le.useMemo(()=>({general:{id:"general",title:t("general"),component:p.jsx(p.Fragment,{children:p.jsx(J6,{})}),defaultExpanded:!0},projects:{id:"projects",title:t("projects"),component:p.jsx(dz,{}),defaultExpanded:!0,action:p.jsx("button",{onClick:()=>e("project-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},targets:{id:"targets",title:t("targets"),component:p.jsx(fz,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("wiki-framework"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},timeblocks:{id:"timeblocks",title:t("timeblocks"),component:p.jsx(pz,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("timeblock-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},durations:{id:"durations",title:t("durations"),component:p.jsx(cz,{}),defaultExpanded:!1},filters:{id:"filters",title:t("filters"),component:p.jsx(oz,{}),defaultExpanded:!1,action:p.jsx("button",{onClick:()=>e("filter-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:t("add"),"aria-label":t("add"),children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})}}),[t,e]);return p.jsx(sp,{sensors:s,collisionDetection:ep,onDragEnd:o,children:p.jsx(jp,{items:n,strategy:Pp,children:p.jsx("div",{className:"flex flex-col gap-4",children:n.map(u=>{const d=l[u];return d?p.jsx(yz,{id:d.id,section:d},d.id):null})})})})},wz=({className:t,onCancel:e,onSuccess:n,placeholder:r,initialValue:s=""})=>{const{t:o}=ft(),l=r||o("inline_input.placeholder"),[u,d]=D.useState(s),[m,y]=D.useState(!1),[w,x]=D.useState(!1),[E,N]=D.useState(!1),I=async W=>{if(!(!u.trim()||E)){N(!0);try{await n1({title:u,isImportant:m,dueDate:w?new Date:void 0}),d(""),y(!1),x(!1),n==null||n()}catch(U){console.error(U),Jt.error(o("msg.task.create_fail"))}finally{N(!1)}}},S=W=>{W.key==="Enter"&&!W.shiftKey&&!W.nativeEvent.isComposing&&(W.preventDefault(),I()),W.key==="Escape"&&(e==null||e())},V=Le.useRef(null);return Le.useEffect(()=>{const W=G=>{V.current&&!V.current.contains(G.target)&&(u.trim()||e==null||e())},U=setTimeout(()=>{document.addEventListener("mousedown",W)},100);return()=>{clearTimeout(U),document.removeEventListener("mousedown",W)}},[e,u]),p.jsxs("div",{ref:V,className:Se("glass-effect rounded-xl shadow-xl p-3 sm:p-4 border border-blue-500/30 dark:border-blue-400/30 animate-in slide-in-from-top-2 duration-300 w-full",t),children:[p.jsx("label",{htmlFor:"inline-task-input",className:"sr-only",children:o("inline_input.label")}),p.jsx("input",{id:"inline-task-input",type:"text",autoFocus:!0,className:"w-full bg-white/50 dark:bg-gray-800/50 text-base sm:text-lg font-medium text-gray-800 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 outline-none mb-3 sm:mb-4 focus:bg-white/80 dark:focus:bg-gray-800/80 p-3 rounded-lg transition-all border border-transparent focus:border-blue-500/30 focus:ring-2 focus:ring-blue-500/20",placeholder:l,value:u,onChange:W=>d(W.target.value),onKeyDown:S,disabled:E}),p.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100 dark:border-gray-700/50",children:[p.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[p.jsx("button",{type:"button",onClick:()=>x(!w),className:Se("transition-colors p-2 rounded-lg",w?"text-blue-600 bg-blue-50 hover:bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30 dark:hover:bg-blue-900/50":"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":o(w?"inline_input.aria_today_remove":"inline_input.aria_today"),title:o(w?"inline_input.tooltip_today_remove":"inline_input.tooltip_today"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("button",{type:"button",onClick:()=>y(!m),className:Se("transition-colors p-2 rounded-lg",m?"text-amber-500 bg-amber-50 hover:bg-amber-100 dark:text-amber-400 dark:bg-amber-900/30 dark:hover:bg-amber-900/50":"text-gray-400 hover:text-amber-500 dark:hover:text-amber-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":o(m?"inline_input.aria_important_remove":"inline_input.aria_important"),title:o(m?"inline_input.tooltip_important_remove":"inline_input.tooltip_important"),children:p.jsx("svg",{className:Se("w-5 h-5",m&&"fill-current"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]}),p.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e&&p.jsx("button",{type:"button",onClick:e,disabled:E,className:"px-3 py-2 sm:px-4 sm:py-2 text-sm font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all","aria-label":o("modal.cancel"),children:o("modal.cancel")}),p.jsx("button",{onClick:()=>I(),disabled:!u.trim()||E,className:"px-4 py-2 sm:px-5 sm:py-2 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl shadow-lg shadow-blue-500/20 transition-all active:scale-95 flex items-center gap-1","aria-label":o("add_task"),children:o(E?"inline_input.adding":"add")})]})]})]})},bz=({initialValue:t=""})=>{const{t:e}=ft(),[n,r]=D.useState(!1);if(Le.useEffect(()=>{if(!n)return;const o=l=>{l.key==="Escape"&&r(!1)};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[n]),n)return p.jsx("div",{className:"mb-2",children:p.jsx(wz,{onCancel:()=>r(!1),onSuccess:()=>r(!1),initialValue:t})});const s=t?e("add_task_button.add_with_title",{title:t}):e("add_task_button.add_task");return p.jsxs("button",{onClick:()=>r(!0),"aria-label":e("add_task_button.aria_label"),className:"group flex items-center gap-2 w-full text-left py-2 px-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-2",children:[p.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-transparent group-hover:bg-blue-100/50 dark:group-hover:bg-blue-900/30 transition-colors",children:p.jsx("svg",{className:"w-4 h-4 text-inherit",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),p.jsx("span",{className:"text-sm font-medium",children:s})]})},d1=Le.memo(({task:t,style:e,className:n,dragHandleProps:r})=>{const s=t.status==="completed",o=!!t.isImportant,{openModal:l}=gn(),u=async m=>{m.stopPropagation(),t.id&&await h6(t.id,t.status||"todo")},d=async m=>{m.stopPropagation(),t.id&&await tv(t.id,{isImportant:!o})};return p.jsxs("li",{style:e,onClick:()=>l("task-detail",t),className:Se("group flex items-start gap-3 p-[var(--task-p)] bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700/50 rounded-xl hover:shadow-sm hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-200 cursor-pointer hover-lift",n),...r,children:[p.jsx("button",{onClick:u,className:Se("mt-0.5 w-5 h-5 rounded-full border flex items-center justify-center transition-colors shrink-0",s?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-blue-400 text-transparent"),"aria-label":s?"Mark as incomplete":"Mark as complete",children:p.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:Se("text-sm text-gray-800 dark:text-gray-200 break-words",s&&"line-through text-gray-400 dark:text-gray-500"),children:t.title}),t.description&&p.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-[var(--task-line-clamp)]",children:t.description}),p.jsx("div",{className:"flex items-center gap-3 mt-2",children:t.dueDate&&p.jsxs("span",{className:Se("text-xs flex items-center gap-1",s?"text-gray-400":YF(t.dueDate)),children:[" ",GF(t.dueDate)]})})]}),p.jsx("div",{className:Se("flex items-center gap-1 transition-opacity",o?"opacity-100":"opacity-30 group-hover:opacity-100"),children:p.jsx("button",{onClick:d,className:Se("p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",o?"text-yellow-500":"text-gray-400"),title:o?"":"",children:p.jsx("svg",{className:"w-4 h-4",fill:o?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})})]})},(t,e)=>{const n=s=>s?s instanceof Date?s.getTime():typeof s.toDate=="function"?s.toDate().getTime():typeof s.getTime=="function"?s.getTime():null:null,r=(s,o)=>{const l=n(s),u=n(o);return l===u};return t.task.id===e.task.id&&t.task.status===e.task.status&&t.task.title===e.task.title&&t.task.description===e.task.description&&t.task.isImportant===e.task.isImportant&&r(t.task.dueDate,e.task.dueDate)}),xz=({tasks:t,timeBlockId:e})=>{const{t:n}=ft(),{timeBlocks:r}=kd(),s=t.reduce((w,x)=>{const E=x.duration,N=typeof E=="number"?E:Number(E);return w+(isNaN(N)?0:N)},0),o=w=>(w/60).toFixed(2)+"h",l=e?r.find(w=>w.id===e):null;if(l&&l.start&&l.end){const w=e6(l.start,l.end);if(w<=0)return null;const x=(w/60).toFixed(2),E=(s/60).toFixed(2),N=s/w*100,I=Math.min(N,100),S=w-s,V=S<0,W=(Math.abs(S)/60).toFixed(2),U=N>100;return p.jsxs("div",{className:"glass-card flex items-center gap-4 py-3 px-4 my-2",children:[p.jsx("div",{className:"flex-shrink-0 w-24 truncate text-xs font-bold text-gray-500 dark:text-gray-400",title:l.name,children:l.name}),p.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 dark:text-gray-400 tabular-nums",children:[p.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300 w-[4.5ch] text-right inline-block",children:[E,"h"]}),p.jsx("span",{className:"text-gray-400 mx-0.5",children:"/"}),p.jsxs("span",{className:"w-[4.5ch] inline-block",children:[x,"h"]})]}),p.jsx("div",{className:"flex-1 relative h-3 bg-gray-200 dark:bg-gray-700/50 rounded-full overflow-hidden min-w-[100px]",children:p.jsx("div",{className:Se("h-full rounded-full transition-all duration-500 ease-out shadow-sm",U?"bg-red-500":"bg-gradient-to-r from-blue-500 to-indigo-600"),style:{width:U?"100%":`${I}%`}})}),p.jsxs("div",{className:"flex-shrink-0 flex items-center justify-end gap-3 min-w-[140px]",children:[p.jsxs("div",{className:Se("text-lg font-bold tabular-nums text-right w-[3.5ch]",U?"text-red-500":"text-blue-500"),children:[Math.round(N),p.jsx("span",{className:"text-xs font-normal opacity-70",children:"%"})]}),p.jsxs("div",{className:Se("text-xs whitespace-nowrap text-right w-[100px]",V?"text-red-500":"text-green-500"),children:["(",n(V?"task_stats.over":"task_stats.remaining")," ",W,"h)"]})]})]})}const u=t.length,d=u>0?s/u:0,m=n("task_stats.count_unit"),y=n("task_stats.avg_unit");return p.jsxs("div",{className:"glass-card flex items-center justify-evenly py-3 px-4 my-2",children:[p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:n("task_stats.count_label")}),p.jsxs("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:[u,m&&p.jsx("span",{className:"text-xs font-normal ml-0.5 text-gray-400",children:m})]})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:n("task_stats.total_label")}),p.jsx("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200 text-blue-600 dark:text-blue-400",children:o(s)})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[p.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:n("task_stats.avg_label")}),p.jsxs("span",{className:"font-medium text-sm",children:[o(d),p.jsx("span",{className:"text-xs ml-0.5",children:y})]})]})]})},kz=({task:t,className:e})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:o,transition:l,isDragging:u}=nv({id:t.id||""}),d={transform:Ms.Transform.toString(o),transition:l,zIndex:u?50:"auto",position:"relative"};return p.jsx("div",{ref:s,style:d,className:"touch-manipulation",children:p.jsx(d1,{task:t,className:Se(e,u&&"opacity-80 shadow-lg border-blue-400 bg-blue-50/50"),dragHandleProps:{...n,...r}})})},h1=()=>{const{t}=ft(),{tasks:e,loading:n}=Tc(),{filterType:r,targetId:s,query:o,showCompleted:l,sortCriteria:u,setShowCompleted:d,setSortCriteria:m}=Br(),{density:y}=$r(),{openModal:w}=gn(),x=D.useMemo(()=>o&&o.trim().length>0?{keyword:o,showCompleted:l,projectId:null,labelId:null,timeBlockId:null,duration:null,filterType:"all_tasks",savedFilter:null,sortCriteria:u}:{keyword:o,showCompleted:l,projectId:r==="inbox"?"unassigned":r==="project"?s:null,labelId:r==="label"?s:null,timeBlockId:r==="timeblock"?s:null,duration:r==="duration"?s:null,filterType:r,savedFilter:null,sortCriteria:u},[r,s,o,l,u]),E=D.useMemo(()=>u1(e,x),[e,x]),N={compact:"space-y-1",normal:"space-y-2",comfortable:"space-y-3",spacious:"space-y-4"}[y],I=Xf(ko(cc,{activationConstraint:{distance:8}}),ko(sd,{coordinateGetter:rv})),S=async U=>{const{active:G,over:Z}=U;if(!Z||G.id===Z.id)return;const K=E.findIndex(k=>k.id===G.id),A=E.findIndex(k=>k.id===Z.id);if(K!==-1&&A!==-1){const R=Ec(E,K,A).map(P=>P.id).filter(Boolean);await u6(R)}};if(n)return p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("div",{className:"text-gray-400 text-sm animate-pulse",children:t("task_list.loading")})});const V=!!(o&&o.trim().length>0),W=u==="manual";return p.jsxs("div",{className:"flex flex-col h-full overflow-hidden relative",children:[p.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-1 pb-24",children:[p.jsxs("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm pt-2 pb-4 mb-4 flex items-center gap-2",children:[p.jsx("div",{className:"flex-1",children:V?p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t("task_list.searching_results",{query:o||""})]}):p.jsx(bz,{initialValue:""})}),p.jsx("div",{className:"flex items-center gap-2 px-1",children:p.jsxs("select",{value:u,onChange:U=>m(U.target.value),className:"text-xs bg-transparent border-none outline-none text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer font-medium",children:[p.jsx("option",{value:"manual",children:t("task_list.sort_manual")}),p.jsx("option",{value:"createdAt_desc",children:t("task_list.sort_created")}),p.jsx("option",{value:"dueDate_asc",children:t("task_list.sort_due")}),p.jsx("option",{value:"important_desc",children:t("task_list.sort_important")}),p.jsx("option",{value:"title_asc",children:t("task_list.sort_title")})]})}),p.jsx("button",{onClick:()=>d(!l),className:Se("px-3 py-2 rounded-lg text-xs font-medium border transition-colors shrink-0",l?"bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-300":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"),title:t(l?"task_list.hide_completed":"task_list.show_completed"),children:t(l?"task_list.hide_completed":"task_list.show_completed")})]}),E.length===0?p.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center min-h-[60vh]",children:[p.jsxs("div",{className:"relative mb-8",children:[p.jsx("div",{className:"absolute -inset-4 bg-blue-500/10 dark:bg-blue-400/10 blur-3xl rounded-full"}),p.jsx("div",{className:"relative",children:p.jsx("svg",{className:"w-24 h-24 text-blue-200 dark:text-blue-900/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})})]}),p.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:t("task_list.no_tasks_title")}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs mb-8",children:t(l?"task_list.no_tasks_desc_showing":"task_list.no_tasks_desc_hiding")}),p.jsxs("button",{onClick:()=>w("task-detail",{title:""}),className:"btn-premium flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),t("task_list.add_new_task")]})]}):W?p.jsx(sp,{sensors:I,collisionDetection:ep,onDragEnd:S,children:p.jsx(jp,{items:E.map(U=>U.id||""),strategy:Pp,children:p.jsx("div",{className:Se("transition-all duration-200",N),children:E.map(U=>p.jsx(kz,{task:U},U.id))})})}):p.jsx("ul",{className:Se("transition-all duration-200",N),children:E.map(U=>p.jsx(d1,{task:U},U.id))})]}),p.jsx("div",{className:"flex-none mt-auto pt-2 border-t border-gray-100 dark:border-gray-800 bg-white/50 dark:bg-gray-900/50 backdrop-blur pb-[calc(0.5rem+env(safe-area-inset-bottom))]",children:p.jsx(xz,{tasks:E,timeBlockId:x.timeBlockId})})]})},Ez=()=>{const{t}=ft(),{query:e,setSearchQuery:n,setFilter:r}=Br(),{setView:s}=Ma(),[o,l]=D.useState(e),u=D.useRef(null);D.useEffect(()=>{var w;(w=u.current)==null||w.focus()},[]),D.useEffect(()=>{e!==o&&l(e)},[e]),D.useEffect(()=>{const w=setTimeout(()=>{o!==e&&n(o)},150);return()=>{clearTimeout(w)}},[o,e,n]);const d=w=>{l(w.target.value)},m=()=>{var w;l(""),n(""),(w=u.current)==null||w.focus()},y=()=>{n(""),r("inbox"),s("tasks")};return p.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-50 via-white to-blue-50/30 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:[p.jsxs("div",{className:"relative p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800",children:[p.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full blur-3xl -z-0"}),p.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all hover:scale-105 active:scale-95","aria-label":t("close"),children:p.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),p.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("sidebar.search_placeholder")})]}),p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-2xl blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"}),p.jsx("div",{className:"relative bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 rounded-2xl shadow-lg shadow-gray-200/50 dark:shadow-black/20 overflow-hidden",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"pl-4 text-gray-400",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),p.jsx("input",{ref:u,id:"search-input",name:"search",type:"text",value:o,onChange:d,placeholder:t("sidebar.search_placeholder"),className:"w-full bg-transparent py-4 px-3 text-base text-gray-800 dark:text-gray-100 placeholder-gray-400 outline-none"}),o&&p.jsx("button",{type:"button",onClick:m,className:"p-2 mr-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":t("clear"),children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})]}),!o&&p.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[p.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 font-mono",children:"/"}),p.jsx("span",{children:""})]}),o&&p.jsxs("p",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),"",o,""]})]})]}),p.jsx("div",{className:"flex-1 overflow-hidden",children:o?p.jsx(h1,{}):p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 dark:text-gray-500 p-8",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-full blur-2xl"}),p.jsx("div",{className:"relative w-24 h-24 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center mb-6",children:p.jsx("svg",{className:"w-12 h-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),p.jsx("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-300 mb-2",children:""}),p.jsxs("p",{className:"text-sm text-center max-w-xs opacity-75",children:["",p.jsx("br",{}),""]})]})})]})},Tz=()=>{const{workspaceId:t,loading:e}=Er(),n=D.useCallback(u=>t?$F(t,u):()=>{},[t]),r=t?BF(t):!1,{data:s,isPending:o}=xc(["targets",t],n,t&&r?UF(t):void 0);return{targets:s||[],loading:e||!!t&&o}},Iz=Le.memo(({kgi:t,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:s})=>{const{language:o}=$r(),{t:l}=xd(o),u={good:"text-emerald-500",warning:"text-amber-500",danger:"text-red-500"},d={good:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-red-500"},m=u[t.status]||"text-gray-500",y=d[t.status]||"bg-gray-500",w=[{id:"backward",label:l("backward_map"),icon:""},{id:"woop",label:l("woop_board"),icon:""},{id:"okr",label:l("okr_tree"),icon:""}];return p.jsx("div",{className:`mb-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg transition-all duration-300 mx-4 mt-4 ${r?"py-2":"py-4"}`,children:p.jsxs("div",{className:"px-6 flex items-center justify-between gap-6",children:[p.jsx("div",{className:"flex-1 min-w-0",children:p.jsx("h1",{className:`font-bold text-gray-900 dark:text-white truncate transition-all duration-300 ${r?"text-sm opacity-50":"text-base"}`,children:t.title})}),p.jsx("div",{className:"flex-1 max-w-md hidden sm:block",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex-1",children:p.jsx("div",{className:"h-3 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:p.jsx("div",{style:{width:`${t.progress}%`},className:`h-full ${y} transition-all duration-1000 ease-out rounded-full`})})}),p.jsxs("span",{className:`font-black ${m} tabular-nums text-sm whitespace-nowrap`,children:[t.progress,"%"]})]})}),p.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0",children:[p.jsxs("div",{className:"text-center hidden sm:block",children:[p.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),p.jsxs("div",{className:`font-black ${m} tabular-nums`,children:[t.daysLeft,p.jsx("span",{className:"text-xs font-medium ml-0.5 text-gray-400",children:""})]})]}),p.jsx("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-900/50 p-1 rounded-lg",children:w.map(x=>p.jsxs("button",{onClick:()=>n(x.id),className:`group px-3 py-1.5 rounded-md text-xs font-bold transition-all flex flex-col sm:flex-row items-center gap-1 sm:gap-2 ${e===x.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,title:x.label,children:[p.jsx("span",{className:"text-sm sm:text-base leading-none",children:x.icon}),p.jsx("span",{className:"text-[10px] sm:text-xs leading-none",children:x.label})]},x.id))}),p.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:r?"Expand Header":"Collapse Header",children:p.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform duration-300 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})})})]})]})})}),Sz=Le.memo(({data:t})=>!t||!t.milestones?p.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):p.jsxs("div",{className:"max-w-4xl mx-auto relative pb-10",children:[p.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 -translate-x-1/2"}),t.milestones.map((e,n)=>{const r=e.type==="goal",s=e.type==="current",o=e.completed;let l,u="";return r?(l=p.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-400 text-white flex items-center justify-center text-base shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),u="bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"):s?(l=p.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 animate-pulse relative",children:"Now"}),u="border-blue-500 border-2 shadow-md"):o?(l=p.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs shadow ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:""}),u="bg-gray-50 dark:bg-gray-800 opacity-70"):(l=p.jsx("div",{className:"w-5 h-5 rounded-full bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative"}),u="bg-white dark:bg-gray-800"),p.jsxs("div",{className:"relative flex items-center mb-4 animate-fade-in group",style:{animationDelay:`${n*50}ms`},children:[p.jsx("div",{className:"w-16 flex-shrink-0 flex justify-center items-center z-10",children:l}),p.jsx("div",{className:"flex-1 pr-4 min-w-0",children:p.jsx("div",{className:`px-3 py-3 rounded-lg border ${s&&!u.includes("border-2")?"border-2 border-blue-500":s?"":"border-gray-200 dark:border-gray-700"} ${u} shadow-sm transition-all hover:shadow-md hover:translate-x-1 cursor-pointer`,children:p.jsxs("div",{className:"flex items-center justify-between gap-3",children:[p.jsx("span",{className:`text-xs font-bold ${s?"text-blue-600":"text-gray-500"} flex-shrink-0 font-mono`,children:e.date}),p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white flex-1 truncate text-sm md:text-base",children:e.title}),r&&p.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-bold flex-shrink-0",children:"TARGET"}),s&&p.jsx("span",{className:"text-[10px] text-blue-500 font-bold flex-shrink-0",children:" NOW"})]})})})]},e.id||`milestone-${n}`)})]})),Cz=Le.memo(({data:t})=>{if(!t||!t.keyResults)return p.jsx("div",{className:"p-4 text-center text-gray-500",children:""});const e=n=>n==="high"?"bg-emerald-500":n==="medium"?"bg-amber-500":"bg-red-500";return p.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border-2 border-blue-100 dark:border-blue-900 shadow-lg text-center mb-12 relative z-10 transition-transform hover:scale-[1.01]",children:[p.jsx("div",{className:"absolute top-[-15px] left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-md",children:"Objective"}),p.jsxs("h2",{className:"font-black text-2xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 leading-tight",children:['"',t.objective,'"']}),p.jsx("div",{className:"absolute bottom-[-50px] left-1/2 w-1 h-[50px] bg-gray-200 dark:bg-gray-700 z-0"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative",children:[p.jsx("div",{className:"hidden md:block absolute top-[-25px] left-[16.66%] right-[16.66%] h-1 bg-gray-200 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 rounded-t-xl z-0"}),t.keyResults.map(n=>{const r=n.target>0?Math.round(n.current/n.target*100):0,s=e(n.confidence);return p.jsxs("div",{className:"relative pt-6",children:[p.jsx("div",{className:"absolute top-[-25px] left-1/2 w-1 h-[25px] bg-gray-200 dark:bg-gray-700 md:block hidden"}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-700 transition-all group h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",children:[p.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["KR #",n.id]}),p.jsx("div",{className:`w-3 h-3 rounded-full ${s}`,title:`Confidence: ${n.confidence}`})]}),p.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-4 h-12 line-clamp-2",children:n.text}),p.jsxs("div",{className:"space-y-1 mt-auto",children:[p.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-500 dark:text-gray-400",children:[p.jsx("span",{children:n.current}),p.jsx("span",{children:n.target})]}),p.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-900 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${r}%`}})}),p.jsxs("div",{className:"text-right text-sm font-black text-blue-600 mt-1",children:[r,"%"]})]})]})]},n.id)})]})]})}),Az=Le.memo(({data:t})=>!t||!t.obstacles?p.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto animate-fade-in",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/30 dark:to-blue-900/30 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800 shadow-sm hover:shadow-md transition-shadow",children:[p.jsx("h3",{className:"text-sm font-bold text-indigo-500 uppercase mb-2",children:"Wish ()"}),p.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.wish,'"']})]}),p.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/30 dark:to-rose-900/30 p-6 rounded-2xl border border-pink-100 dark:border-pink-800 shadow-sm hover:shadow-md transition-shadow",children:[p.jsx("h3",{className:"text-sm font-bold text-pink-500 uppercase mb-2",children:"Outcome ()"}),p.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',t.outcome,'"']})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-2 flex items-center",children:[p.jsx("span",{className:"mr-2",children:""})," Obstacles & If-Then Plans"]}),t.obstacles.map(e=>p.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all overflow-hidden relative",children:[p.jsx("div",{className:"p-5 border-l-4 border-gray-400 bg-gray-50 dark:bg-gray-800 relative z-10 transition-transform group-hover:translate-x-1",children:p.jsxs("h4",{className:"font-bold text-gray-700 dark:text-gray-300 flex items-center",children:[p.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-xs px-2 py-1 rounded mr-3 text-gray-600 dark:text-gray-400",children:""}),e.text]})}),p.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border-t border-gray-100 dark:border-gray-700 flex items-start",children:[p.jsx("div",{className:"flex-shrink-0 mt-1",children:p.jsx("span",{className:"block w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs font-bold",children:"IF"})}),p.jsx("div",{className:"ml-3 flex-1",children:p.jsxs("p",{className:"text-emerald-800 dark:text-emerald-300 font-bold text-sm",children:[" ",e.plan]})}),p.jsxs("div",{className:"ml-2 flex flex-col items-center",children:[p.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Score"}),p.jsx("span",{className:"text-lg font-black text-emerald-500 leading-none",children:e.overcomeCount})]})]})]},e.id)),p.jsx("button",{className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl text-gray-400 hover:border-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition flex items-center justify-center font-bold text-sm",children:"+ "})]})]})),Nz=()=>{var N;const{targets:t}=Tz(),[e,n]=D.useState("backward"),[r,s]=D.useState(!1),o=t.filter(I=>{var S;return((S=I.mode)==null?void 0:S.toLowerCase())===e.toLowerCase()}),l=I=>({milestones:[{date:"Future",title:I.data.goal_kgi||"Undefined Goal",type:"goal",completed:!1},{date:"Milestone",title:I.data.milestone_minus_1mo||"",type:"milestone",completed:!1},{date:"Today",title:"Current Status",type:"current",completed:!0},{date:"Now",title:I.data.first_action||"",type:"action",completed:!1}]}),u=I=>({wish:I.data.wish||"",outcome:I.data.outcome||"",obstacles:[{id:1,text:I.data.obstacle||"",plan:I.data.plan||"",overcomeCount:0}]}),d=I=>({objective:I.data.objective||"",keyResults:[{id:1,text:I.data.kr_1||"KR 1",current:0,target:100,confidence:"medium"},{id:2,text:I.data.kr_2||"KR 2",current:0,target:100,confidence:"medium"},{id:3,text:I.data.kr_3||"KR 3",current:0,target:100,confidence:"medium"}]}),m=I=>I?typeof I.toDate=="function"?I.toDate().toLocaleDateString():I instanceof Date?I.toLocaleDateString():String(I):"Unknown",y=()=>o.length===0?p.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500 dark:text-gray-400",children:p.jsxs("p",{className:"mb-4",children:["No ",e.toUpperCase()," targets found."]})}):p.jsx("div",{className:"space-y-12",children:o.map(I=>p.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-12 last:border-0",children:[p.jsxs("div",{className:"mb-4 text-xs text-gray-400 flex justify-end",children:["Created: ",m(I.createdAt)]}),e==="backward"&&p.jsx(Sz,{data:l(I)}),e==="woop"&&p.jsx(Az,{data:u(I)}),e==="okr"&&p.jsx(Cz,{data:d(I)})]},I.id))}),w=o[0],E={title:((I,S)=>I?S==="backward"?I.data.goal_kgi||"KGI":S==="woop"?I.data.wish||"WISH":S==="okr"?I.data.objective||"Objective":"":"")(w,e),progress:Number(((N=w==null?void 0:w.data)==null?void 0:N.progress)||0),daysLeft:0,status:"good"};return p.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[p.jsx(Iz,{kgi:E,currentTab:e,onTabChange:n,collapsed:r,onToggleCollapse:()=>s(!r)}),p.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 pb-6 pt-4",children:y()})]})},Rz=[{id:"okr",title:"OKR (Objectives and Key Results)",subTitle:"",color:"blue",icon:"",concept:{summary:"ObjectiveKey Results",detail:"GoogleIntel60-70%"},useCases:[{title:"",before:"",after:"O:Rust KR:Rust13"},{title:"",before:"",after:"O:MVP KR:310030%"}],tips:[{q:"",a:"OKR60%Win"},{q:"KR",a:"50%100%70%NG"}]},{id:"woop",title:"WOOP (Wish, Outcome, Obstacle, Plan)",subTitle:"",color:"amber",icon:"",concept:{summary:"",detail:"If-ThenXY"},useCases:[{title:"",before:"",after:"W:30 O: Obs: Plan:"},{title:"",before:"",after:"Obs: Plan:"}],tips:[{q:"Obstacle",a:""},{q:"Plan",a:"5"}]},{id:"backward",title:"Backward Design ()",subTitle:"",color:"purple",icon:"",concept:{summary:"",detail:"ForecastingBackcasting"},useCases:[{title:"",before:"",after:"Goal: 1: 3:LP :"},{title:"",before:"",after:"Goal:3 2:20 1: :"}],tips:[{q:"",a:"KGI1OK"},{q:"",a:""}]}],Pz=Le.memo(({framework:t,onClick:e})=>p.jsxs("div",{className:"framework-card cursor-pointer bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-6 transition-all duration-300 hover:border-blue-500 hover:shadow-lg hover:scale-105 group",onClick:()=>e(t),role:"button",tabIndex:0,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&e(t)},children:[p.jsx("div",{className:"text-4xl mb-3 transform transition-transform group-hover:scale-110 duration-300",children:t.icon}),p.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:t.title}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 h-10",children:t.concept.summary}),p.jsxs("div",{className:"mt-4 flex items-center text-xs text-blue-600 dark:text-blue-400 font-medium opacity-80 group-hover:opacity-100 transition-opacity",children:[p.jsx("span",{children:""}),p.jsx("svg",{className:"w-4 h-4 ml-1 transform transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})),jz=()=>{const{openModal:t}=gn();return p.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-900 overflow-y-auto custom-scrollbar",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 animate-fade-in",children:[p.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-8 flex items-center",children:[p.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500 mr-3",children:p.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),p.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-gray-300",children:" Wiki"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Rz.map(e=>p.jsx(Pz,{framework:e,onClick:n=>t("wiki-framework",n)},e.id))})]})})},Ll={backward:{id:"backward",label:"Backward Design",description:"",steps:[{title:"Goal / KGI",description:"KGI",inputs:[{type:"textarea",placeholder:"20253311",key:"goal_kgi"}]},{title:"Milestone",description:"1",inputs:[{type:"textarea",placeholder:"100",key:"milestone_minus_1mo"}]},{title:"First Action",description:"",inputs:[{type:"textarea",placeholder:"",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"",steps:[{title:"Wish ()",description:"",inputs:[{type:"textarea",placeholder:"30",key:"wish"}]},{title:"Outcome ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"outcome"}]},{title:"Obstacle ()",description:"",inputs:[{type:"textarea",placeholder:"SNS",key:"obstacle"}]},{title:"Plan ()",description:"",inputs:[{type:"textarea",placeholder:"",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"(O)(KR)",steps:[{title:"Objective",description:"1",inputs:[{type:"textarea",placeholder:"",key:"objective"}]},{title:"Key Results",description:"3",inputs:[{type:"text",placeholder:"KR 1 (: GitHub 1,000)",key:"kr_1"},{type:"text",placeholder:"KR 2 (:  500)",key:"kr_2"},{type:"text",placeholder:"KR 3 (:  40%)",key:"kr_3"}]}]}},Dz=({mode:t,currentStep:e})=>{const n=Ll[t],r=n.steps.length;return p.jsx("div",{className:"flex items-center justify-between mb-8 max-w-2xl mx-auto",children:p.jsx("div",{className:"flex items-center space-x-1 mx-auto w-full justify-center",children:n.steps.map((s,o)=>{const l=o+1,u=e>l,d=e===l,m=e<l;return p.jsxs(Le.Fragment,{children:[p.jsxs("div",{className:"flex flex-col items-center relative z-10 w-16",children:[p.jsx("div",{className:Se("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold",d&&"bg-blue-600 text-white ring-4 ring-blue-100 dark:ring-blue-900",u&&"bg-green-500 text-white",m&&"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:u?"":l}),p.jsx("div",{className:Se("text-[10px] mt-1 font-medium text-center w-20 truncate",d?"text-blue-600 dark:text-blue-400":"text-gray-400"),children:s.title})]}),o<r-1&&p.jsx("div",{className:Se("h-1 flex-1 mx-[-10px] mt-[-14px] z-0 transition-all duration-500 rounded-full",e>l?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},o)})})})},Oz=({mode:t,step:e,onBack:n,onNext:r,onFinish:s})=>{const o=Ll[t],l=e-1,u=o.steps[l],d=o.steps.length,[m,y]=D.useState({}),w=(E,N)=>{y(I=>({...I,[E]:N}))},x=()=>{const E=u.inputs.reduce((N,I,S)=>{const V=m[S]||"";return I.key&&(N[I.key]=V),N},{});e<d?r(E):s(E)};return p.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[p.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:[o.label," Mode"]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-8 min-h-[500px] flex flex-col",children:[p.jsx(Dz,{mode:t,currentStep:e}),p.jsxs("div",{className:"flex-1 animate-fade-in",children:[p.jsxs("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-100",children:["Q",e,". ",u.title]}),p.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:u.description}),p.jsx("div",{className:"mb-8 space-y-4",children:u.inputs.map((E,N)=>p.jsx("div",{children:E.type==="textarea"?p.jsx("textarea",{className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",rows:5,placeholder:E.placeholder,value:m[N]||"",onChange:I=>w(N,I.target.value)}):p.jsx("input",{type:"text",className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition text-base",placeholder:E.placeholder,value:m[N]||"",onChange:I=>w(N,I.target.value)})},E.key||N))})]}),p.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[p.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition font-medium",children:""}),e<d?p.jsxs("button",{onClick:x,className:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-md transition font-medium flex items-center",children:["",p.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]}):p.jsxs("button",{onClick:x,className:"px-8 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 shadow-lg transition font-medium flex items-center transform hover:scale-105",children:[p.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),""]})]})]})]})},Lz=({currentMode:t,onModeChange:e,onStart:n})=>{const r=Ll[t],s={okr:["","",""],woop:["","",""],backward:["","",""]};return p.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-full max-h-[700px] flex flex-col py-6",children:[p.jsx("div",{className:"mb-4 flex-shrink-0",children:p.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[p.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),p.jsx("span",{className:"font-medium",children:""}),p.jsx("svg",{className:"w-3 h-3 mx-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),p.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:""})]})}),p.jsxs("div",{className:"mb-6 flex-shrink-0",children:[p.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:""}),p.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:Object.keys(Ll).map(o=>p.jsx("button",{onClick:()=>e(o),className:Se("flex-1 py-2 text-xs font-bold rounded-lg transition-all",t===o?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:Ll[o].label},o))})]}),p.jsx("div",{className:"flex-1 mb-6 min-h-0",children:p.jsx("div",{className:"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden shadow-xl",children:p.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[p.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mb-4 shadow-lg flex-shrink-0",children:p.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 text-xl",children:r.label}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-2xl leading-relaxed",children:r.description}),p.jsx("div",{className:"mt-6 flex flex-wrap gap-2 justify-center",children:(s[t]||[]).map(o=>p.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300 shadow-sm",children:o},o))})]})})}),p.jsx("div",{className:"flex justify-center pb-4 flex-shrink-0",children:p.jsxs("button",{onClick:n,className:"group inline-flex items-center px-6 py-3 border-2 border-transparent shadow-xl font-bold rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition-all transform hover:scale-105 active:scale-95",children:[p.jsx("span",{children:""}),p.jsx("svg",{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},Mz=()=>{const[t,e]=D.useState("backward"),[n,r]=D.useState(0),[s,o]=D.useState({}),{setView:l,viewData:u}=Ma(),{workspaceId:d}=Er();D.useEffect(()=>{u!=null&&u.mode&&(e(u.mode),r(0))},[u]);const m=x=>{o(E=>({...E,...x})),r(E=>E+1)},y=async x=>{const E={...s,...x};if(!d){alert("");return}try{await WF(d,{mode:t,data:E}),console.log("Wizard Completed, Saved to Firestore",E),alert(`${Ll[t].label}`),r(0),o({}),l("target-dashboard")}catch(N){console.error("Failed to save wizard target:",N),alert("")}},w=()=>{r(x=>Math.max(0,x-1))};return n===0?p.jsx(Lz,{currentMode:t,onModeChange:e,onStart:()=>r(1)}):p.jsx(Oz,{mode:t,step:n,onBack:w,onNext:m,onFinish:y})},Vz=(t,e)=>{const n=Xf(ko(cc,{activationConstraint:{distance:5}}),ko(jk,{activationConstraint:{delay:At.DND.TOUCH_DELAY,tolerance:5}})),{language:r}=$r(),{t:s}=xd(r),o=D.useRef(t),l=D.useCallback(()=>{o.current=t},[t]),u=D.useCallback(async d=>{var I,S,V,W;const{active:m,over:y}=d;if(!y)return;const w=String(m.id),x=String(y.id),N=(U=>U.startsWith(At.DND.PREFIX_TASK)?U.split(":")[1]:null)(w);if(N){const U=(I=y.data.current)==null?void 0:I.type,G=(S=y.data.current)==null?void 0:S.value,Z={};if(U===At.DND.TYPE_PROJECT&&(Z.projectId=G),U===At.DND.TYPE_INBOX&&(Z.projectId=null),U===At.DND.TYPE_TIMEBLOCK&&(Z.timeBlockId=G==="unassigned"?null:G),Object.keys(Z).length>0)try{await tv(N,Z)}catch(K){console.error("Failed to update task via dnd",K),Jt.error(s("msg.dnd.reorderFailed")||s("error"))}}if(w!==x&&!N){const U=o.current,G=U.findIndex(K=>K.id===w),Z=U.findIndex(K=>K.id===x);if(G!==-1&&Z!==-1){const K=Ec(U,G,Z);(V=e==null?void 0:e.onOptimisticReorder)==null||V.call(e,K);try{await oF(K)}catch(A){console.error("Failed to update project order",A),Jt.error(s("msg.dnd.reorderFailed")||s("error")),(W=e==null?void 0:e.onRevertReorder)==null||W.call(e,U)}}}},[t,e,s]);return{sensors:n,handleDragEnd:u,handleDragStart:l}},Fz=()=>{const{workspaceId:t,loading:e}=Er(),n=D.useCallback(u=>t?RF(t,u):()=>{},[t]),r=t?NF(t):!1,{data:s,isPending:o}=xc(["labels",t],n,t&&r?AF(t):void 0);return{labels:s||[],loading:e||!!t&&o}},zz=()=>{const{fontEn:t,fontJp:e,fontSize:n,density:r,themeMode:s}=$r(),{setSidebarDensity:o}=z0();D.useLayoutEffect(()=>{const l=document.documentElement,u=document.body;s==="dark"?l.classList.add("dark"):s==="light"?l.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?l.classList.add("dark"):l.classList.remove("dark"),l.style.setProperty("--font-en",`"${t}"`),l.style.setProperty("--font-jp",`"${e}"`);const d=["font-app-sm","font-app-base","font-app-md","font-app-lg","font-app-xl"];u.classList.remove(...d),u.classList.add(`font-app-${n}`);const m=["app-density-compact","app-density-normal","app-density-comfortable","app-density-spacious"];u.classList.remove(...m),u.classList.add(`app-density-${r}`),o(r);const y=window.matchMedia("(prefers-color-scheme: dark)"),w=()=>{s==="system"&&(y.matches?l.classList.add("dark"):l.classList.remove("dark"))};return y.addEventListener("change",w),()=>y.removeEventListener("change",w)},[s,t,e,n,r,o])},Uz=()=>{zz();const{filterType:t,targetId:e,query:n}=Br(),{currentView:r,setView:s}=Ma(),{setFilter:o}=Br(),{projects:l,setProjectsOverride:u}=Ap(),{labels:d}=Fz(),[m,y]=Le.useState({user:Ge.currentUser,loading:!Ge.currentUser}),w=D.useCallback(S=>{const V=S.target,W=["INPUT","TEXTAREA"].includes(V.tagName)||V.closest("[contenteditable]"),U=document.querySelector('[role="dialog"]');S.key==="/"&&!W&&!U&&(S.preventDefault(),o("search"),s("search"))},[o,s]);Le.useEffect(()=>{const S=kE(Ge,V=>{y({user:V,loading:!1})});return document.addEventListener("keydown",w),()=>{S(),document.removeEventListener("keydown",w)}},[w]);const{sensors:x,handleDragEnd:E,handleDragStart:N}=Vz(l,{onOptimisticReorder:u,onRevertReorder:u}),I=D.useMemo(()=>{var S,V;if(r==="wizard")return"Goal Wizard";if(r==="target-dashboard")return"Target Dashboard";if(r==="wiki")return"Framework Wiki";if(r==="search")return n?`"${n}" `:"";if(t==="project")return((S=l.find(W=>W.id===e))==null?void 0:S.name)||"Project";if(t==="label")return((V=d.find(W=>W.id===e))==null?void 0:V.name)||"Label";if(t==="search")return n?`"${n}" `:"";switch(t){case"inbox":return"Inbox";case"today":return"Today";case"upcoming":return"Upcoming";case"important":return"Important";case"custom":return"All Tasks";default:return"TaskMg"}},[r,n,t,e,l,d]);return m.loading?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"..."})]})}):m.user?p.jsxs(sp,{sensors:x,collisionDetection:ep,onDragEnd:E,onDragStart:N,children:[p.jsx(jO,{}),p.jsx(G6,{}),p.jsx(UV,{sidebarContent:p.jsx(_z,{}),title:I,children:r==="wizard"?p.jsx(Mz,{}):r==="target-dashboard"?p.jsx(Nz,{}):r==="wiki"?p.jsx(jz,{}):r==="search"?p.jsx(Ez,{}):p.jsx(h1,{})})]}):p.jsx(V4,{})},Bz=new HS({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1,retry:!1}}});OV();const f1=document.getElementById("app");if(!f1)throw new Error("Failed to find the root element");const $z=p.jsx(z6,{children:p.jsx(KS,{client:Bz,children:p.jsx(Uz,{})})});dC.createRoot(f1).render($z);
