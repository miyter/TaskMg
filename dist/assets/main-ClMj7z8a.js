const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FilterEditModal-DB4Cwmd1.js","assets/react-vendor-D2I7O6xs.js","assets/vendor-CBsUEP5T.js","assets/vendor-DKQ_J0ve.css","assets/i18n-Cw5F73yC.js","assets/firebase-CLDmeQtM.js","assets/ErrorMessage-ysv-5oYb.js","assets/Modal-DaVDF2P-.js","assets/dnd-CO_aCEbe.js","assets/LabelEditModal-CE9FHwkK.js","assets/ProjectEditModal-D48DPK7n.js","assets/SettingsModal-CpciYIMb.js","assets/TaskDetailModal-DOViFD89.js","assets/TimeBlockEditModal-DEWluyVA.js","assets/WorkspaceEditModal-FIpLBSq6.js","assets/WikiFrameworkModal-DQfhl-LI.js","assets/ConfirmationModal-D8s_CqdQ.js"])))=>i.map(i=>d[i]);
var Cr=Object.defineProperty;var Tr=(e,t,r)=>t in e?Cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var A=(e,t,r)=>Tr(e,typeof t!="symbol"?t+"":t,r);import{r as w,j as s,c as we,R as S,u as Pt,b as Dr,a as Mr,d as Sr,Q as Ir}from"./react-vendor-D2I7O6xs.js";import{u as Fe,a as ut,C as ht,S as gt,v as mt,b as Bt,c as We,s as Er,K as Ar,P as Ot,D as $t,d as Wt,e as pt,T as Lr,p as Fr,r as Rr}from"./dnd-CO_aCEbe.js";import{g as St,i as Pr,a as Br,b as Or,s as zt,c as $r,T as Re,q as ge,o as ft,d as L,e as je,f as K,h as Z,j as z,u as De,k as Me,l as de,m as Wr,n as zr,p as qt,r as qr,t as Vr,w as xt,v as Vt}from"./firebase-CLDmeQtM.js";import{u as $,g as me,i as Ur}from"./i18n-Cw5F73yC.js";import{t as Kr,d as Hr,p as Ve,u as Ut,e as Gr,f as Yr,g as b,h as V,j as se,k as G,l as ze,m as Kt,q as Ht,v as Xr,w as Jr,x as Qr}from"./vendor-CBsUEP5T.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const Zr={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function es(){if(typeof window<"u"&&window.GLOBAL_FIREBASE_CONFIG&&window.GLOBAL_FIREBASE_CONFIG.apiKey)return window.GLOBAL_FIREBASE_CONFIG;try{const e=Zr;if(e&&e.VITE_FIREBASE_API_KEY)return{apiKey:e.VITE_FIREBASE_API_KEY,authDomain:e.VITE_FIREBASE_AUTH_DOMAIN,projectId:e.VITE_FIREBASE_PROJECT_ID,storageBucket:e.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:e.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:e.VITE_FIREBASE_APP_ID,measurementId:e.VITE_FIREBASE_MEASUREMENT_ID}}catch{}if(typeof __firebase_config<"u")try{return typeof __firebase_config=="object"?__firebase_config:JSON.parse(__firebase_config)}catch(e){return console.error("[Firebase] Config parse failed (legacy):",e),null}return console.error("[Firebase] All config sources failed. Check index.html injection."),null}const ce=es();if(!(ce!=null&&ce.apiKey)||!(ce!=null&&ce.projectId)){const e="[Firebase] Configuration is missing required fields (apiKey, projectId). Application cannot start.";throw console.error(e,ce),new Error(e)}let st;St().length>0?st=St()[0]:st=Pr(ce);const Gt=st,D=Br(Gt),v=Or(Gt),I=()=>{const e=$(r=>r.language);return w.useMemo(()=>me(e),[e])},ts=()=>{const{t:e}=I(),[t,r]=w.useState(""),[n,a]=w.useState(""),[o,i]=w.useState(!1),[l,c]=w.useState(null),d=async u=>{u.preventDefault(),c(null),i(!0);try{await zt(D,t,n)}catch(p){let y=e("login.error.login_fail");switch(p.code){case"auth/invalid-email":y=e("login.error.invalid_email");break;case"auth/user-disabled":y=e("login.error.user_disabled");break;case"auth/user-not-found":y=e("login.error.user_not_found");break;case"auth/wrong-password":y=e("login.error.wrong_password");break;case"auth/too-many-requests":y=e("login.error.too_many_requests");break;case"auth/network-request-failed":y=e("login.error.network_error");break}c(y)}finally{i(!1)}},h=async()=>{c(null),i(!0);try{await $r(D)}catch(u){c(e("login.error.guest_fail").replace("{message}",u.message))}finally{i(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-premium-gradient p-4 antialiased",children:s.jsxs("div",{className:"max-w-md w-full p-6 sm:p-8 bg-white/70 dark:bg-gray-800/60 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 rounded-[2rem] shadow-2xl transition-all duration-300",children:[s.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[s.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-3xl shadow-lg mb-6 animate-float",children:s.jsx("img",{src:"/images/web-app-manifest-512x512.png",alt:"Logo",className:"h-12 w-12"})}),s.jsxs("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:["Task",s.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:e("login.tagline")})]}),s.jsxs("form",{onSubmit:d,className:"space-y-5 sm:space-y-6",children:[l&&s.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium animate-in fade-in slide-in-from-top-4 duration-300 shadow-sm",children:l}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"login-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:e("login.email_label")}),s.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:u=>r(u.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"mail@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"login-password",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wider",children:e("login.password_label")}),s.jsx("input",{id:"login-password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:u=>a(u.target.value),className:"w-full px-5 py-3 bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none text-gray-900 dark:text-white transition-all placeholder-gray-400",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"})]}),s.jsx("button",{type:"submit",disabled:o,className:"btn-premium w-full py-4 text-lg shadow-lg hover:shadow-xl active:scale-[0.98] transition-all",children:e(o?"login.signing_in":"login.signin")})]}),s.jsxs("div",{className:"mt-8",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200/50 dark:border-gray-700/50"})}),s.jsx("div",{className:"relative flex justify-center text-xs",children:s.jsx("span",{className:"px-3 bg-transparent text-gray-400 uppercase tracking-widest font-bold",children:e("login.or")})})]}),s.jsxs("button",{onClick:h,disabled:o,className:"mt-8 w-full py-3.5 bg-gray-100/50 hover:bg-gray-200/70 active:bg-gray-300 dark:bg-gray-700/30 dark:hover:bg-gray-600/50 dark:active:bg-gray-600 text-gray-700 dark:text-gray-200 font-bold rounded-2xl transition-all active:scale-95 flex items-center justify-center gap-3 border border-transparent hover:border-gray-300 dark:hover:border-gray-600",children:[s.jsx("span",{className:"text-xl",children:"üïµÔ∏è"})," ",e("login.guest_login")]})]})]})})},rs={success:3e3,info:4e3,error:6e3},Be=new Map,ss=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,11),$e=we(e=>({toasts:[],addToast:(t,r="info")=>{const n=ss();e(i=>({toasts:[...i.toasts,{id:n,message:t,type:r}]}));const a=rs[r],o=setTimeout(()=>{e(i=>({toasts:i.toasts.filter(l=>l.id!==n)})),Be.delete(n)},a);Be.set(n,o)},removeToast:t=>{const r=Be.get(t);r&&(clearTimeout(r),Be.delete(t)),e(n=>({toasts:n.toasts.filter(a=>a.id!==t)}))}})),j={success:e=>$e.getState().addToast(e,"success"),error:e=>$e.getState().addToast(e,"error"),info:e=>$e.getState().addToast(e,"info")};function C(...e){return Kr(Hr(e))}const as=()=>{const{toasts:e,removeToast:t}=$e();return e.length===0?null:s.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(r=>s.jsx("div",{onClick:()=>t(r.id),className:C("pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-xl shadow border text-sm font-medium cursor-pointer hover:opacity-90",r.type==="success"&&"bg-white dark:bg-gray-800 text-green-600 dark:text-green-400 border-green-200 dark:border-green-900",r.type==="error"&&"bg-white dark:bg-gray-800 text-red-600 dark:text-red-400 border-red-200 dark:border-red-900",r.type==="info"&&"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700"),children:s.jsxs("div",{className:"flex items-start gap-3",children:[r.type==="success"&&s.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.type==="error"&&s.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.type==="info"&&s.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"leading-5 flex-1",children:r.message}),s.jsx("button",{onClick:n=>{n.stopPropagation(),t(r.id)},className:"flex-shrink-0 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Èñâ„Åò„Çã",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})},r.id))})},T={SIDEBAR_DENSITY:{compact:"py-0.5",normal:"py-1.5",comfortable:"py-2.5",spacious:"py-3.5"},DND:{PREFIX_TASK:"task:",PREFIX_PROJECT:"project:",TYPE_PROJECT:"project",TYPE_INBOX:"inbox",TYPE_TIMEBLOCK:"timeblock",TYPE_LABEL:"label",TOUCH_DELAY:250},STORAGE_KEYS:{SECTION_ORDER:"sidebar_section_order"},SIDEBAR:{MIN_WIDTH:150,MAX_WIDTH:500,DEFAULT_WIDTH:280,DURATIONS:[30,45,60,75,90]},TIME_BLOCK:{MAX_COUNT:10,DEFAULTS:[{id:"tb_morning",name:"06:00 - 09:00",start:"06:00",end:"09:00",color:"#EF4444",order:0},{id:"tb_afternoon",name:"13:00 - 17:00",start:"13:00",end:"17:00",color:"#3B82F6",order:1},{id:"tb_night",name:"20:00 - 22:00",start:"20:00",end:"22:00",color:"#8B5CF6",order:2}]},LAYOUT:{CONTAINER_WIDTH_CLASS:"w-full max-w-full",MOBILE_SIDEBAR_WIDTH_PX:280},FONTS:{EU:[{label:"Google Sans",value:'"Google Sans", Inter, sans-serif'},{label:"Inter",value:"Inter, sans-serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"System UI",value:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}],JP:[{label:"M PLUS 2",value:'"M PLUS 2", sans-serif'},{label:"Noto Sans JP",value:'"Noto Sans JP", sans-serif'},{label:"Hiragino / Yu Gothic",value:'"Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif'}]}},ns=[{value:"#EF5350",key:"red"},{value:"#EC407A",key:"pink"},{value:"#AB47BC",key:"purple"},{value:"#7E57C2",key:"deep_purple"},{value:"#5C6BC0",key:"indigo"},{value:"#42A5F5",key:"blue"},{value:"#29B6F6",key:"light_blue"},{value:"#26C6DA",key:"cyan"},{value:"#26A69A",key:"teal"},{value:"#66BB6A",key:"green"},{value:"#9CCC65",key:"light_green"},{value:"#D4E157",key:"lime"},{value:"#FFEE58",key:"yellow"},{value:"#FFCA28",key:"amber"},{value:"#FFA726",key:"orange"},{value:"#FF7043",key:"deep_orange"},{value:"#8D6E63",key:"brown"},{value:"#BDBDBD",key:"grey"},{value:"#78909C",key:"blue_grey"}];ns.map(e=>e.value);const os=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),ae=we(e=>({stack:[],openModal:(t,r=null)=>{if(!t)return;const a={id:os(),type:t,data:r};e(o=>({stack:[...o.stack,a]}))},closeModal:()=>e(t=>t.stack.length===0?t:{stack:t.stack.slice(0,-1)}),closeAllModals:()=>e({stack:[]})})),is=1024,bt=we()(Ve(e=>({sidebarWidth:T.SIDEBAR.DEFAULT_WIDTH,isSidebarOpen:!0,sidebarDensity:"normal",setSidebarWidth:t=>{const r=Math.max(T.SIDEBAR.MIN_WIDTH,Math.min(t,T.SIDEBAR.MAX_WIDTH));e({sidebarWidth:r})},toggleSidebar:()=>e(t=>({isSidebarOpen:!t.isSidebarOpen})),setSidebarOpen:t=>e({isSidebarOpen:t}),setSidebarDensity:t=>e({sidebarDensity:t})}),{name:"ui-storage",partialize:e=>({sidebarWidth:e.sidebarWidth,sidebarDensity:e.sidebarDensity,isSidebarOpen:e.isSidebarOpen}),onRehydrateStorage:()=>e=>{typeof window<"u"&&window.innerWidth<is&&(e==null||e.setSidebarOpen(!1))}})),M=(e,t="0 0 24 24")=>({className:r,size:n,strokeWidth:a=2,...o})=>s.jsx("svg",{className:C("w-4 h-4",r),width:n,height:n,fill:"none",stroke:"currentColor",viewBox:t,strokeWidth:a,strokeLinecap:"round",strokeLinejoin:"round",...o,children:e}),ls=M(s.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})),cs=M(s.jsx("path",{d:"M18 6L6 18M6 6l12 12"})),Yt=M(s.jsx("path",{d:"M12 5v14M5 12h14"})),Ue=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M3 6h18"}),s.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6"})]})),Ke=M(s.jsx("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),"0 0 24 24"),Xt=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]})),Pe=M(s.jsx("path",{d:"M20 6L9 17l-5-5"})),Ee=M(s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"11",cy:"11",r:"8"}),s.jsx("path",{d:"M21 21l-4.35-4.35"})]})),Uo=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),s.jsx("path",{d:"M12 9v4M12 17h.01"})]})),yt=M(s.jsx("path",{d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})),Ko=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),s.jsx("path",{d:"M14 2v6h6"}),s.jsx("path",{d:"M16 13H8"}),s.jsx("path",{d:"M16 17H8"}),s.jsx("path",{d:"M10 9H8"})]})),ds=M(s.jsx("path",{d:"M15 18l-6-6 6-6"})),Ae=M(s.jsx("path",{d:"M9 18l6-6-6-6"})),Jt=M(s.jsx("path",{d:"M6 9l6 6 6-6"})),us=M(s.jsx("path",{d:"M18 15l-6-6-6 6"})),hs=M(s.jsx("path",{d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})),Qt=M(s.jsx("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})),Zt=M(s.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})),er=M(s.jsx("path",{d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})),gs=M(s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"9",cy:"12",r:"1"}),s.jsx("circle",{cx:"9",cy:"5",r:"1"}),s.jsx("circle",{cx:"9",cy:"19",r:"1"}),s.jsx("circle",{cx:"15",cy:"12",r:"1"}),s.jsx("circle",{cx:"15",cy:"5",r:"1"}),s.jsx("circle",{cx:"15",cy:"19",r:"1"})]})),qe=M(s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),s.jsx("path",{d:"M16 2v4M8 2v4M3 10h18"})]})),tr=M(s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),s.jsx("path",{d:"M16 2v4M8 2v4M3 10h18"}),s.jsx("path",{d:"M8 14h.01"}),s.jsx("path",{d:"M12 14h.01"}),s.jsx("path",{d:"M16 14h.01"}),s.jsx("path",{d:"M8 18h.01"}),s.jsx("path",{d:"M12 18h.01"}),s.jsx("path",{d:"M16 18h.01"})]})),rr=M(s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("path",{d:"M12 6v6l4 2"})]})),ms=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M17 1l4 4-4 4"}),s.jsx("path",{d:"M3 11V9a4 4 0 014-4h14"}),s.jsx("path",{d:"M7 23l-4-4 4-4"}),s.jsx("path",{d:"M21 13v2a4 4 0 01-4 4H3"})]})),sr=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M4 11V4h16v7"}),s.jsx("path",{d:"M4 11h5.8a2.2 2.2 0 004.4 0H20v8a1 1 0 01-1 1H5a1 1 0 01-1-1v-8z"})]})),ps=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"}),s.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]})),Ho=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]})),Go=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),s.jsx("path",{d:"M1 1l22 22"})]})),Yo=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M6 4h8a4 4 0 014 4 4 4 0 01-4 4H6z"}),s.jsx("path",{d:"M6 12h9a4 4 0 014 4 4 4 0 01-4 4H6z"})]})),Xo=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M19 4h-9"}),s.jsx("path",{d:"M14 20H5"}),s.jsx("path",{d:"M15 4L9 20"})]})),Jo=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M8 6h13"}),s.jsx("path",{d:"M8 12h13"}),s.jsx("path",{d:"M8 18h13"}),s.jsx("path",{d:"M3 6h.01"}),s.jsx("path",{d:"M3 12h.01"}),s.jsx("path",{d:"M3 18h.01"})]})),Qo=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M10 6h11"}),s.jsx("path",{d:"M10 12h11"}),s.jsx("path",{d:"M10 18h11"}),s.jsx("path",{d:"M4 6h1v4"}),s.jsx("path",{d:"M4 10h2"}),s.jsx("path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"})]})),Zo=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M6 4v16"}),s.jsx("path",{d:"M18 4v16"}),s.jsx("path",{d:"M6 12h12"})]})),ei=M(s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2.5 2h-1c-.5 0-1 .5-1 1v1c0 .5.5 1 1 1z"}),s.jsx("path",{d:"M16 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2.5 2h-1c-.5 0-1 .5-1 1v1c0 .5.5 1 1 1z"})]})),fs=({className:e,size:t,...r})=>s.jsxs("svg",{className:C("animate-spin",e),width:t||16,height:t||16,fill:"none",viewBox:"0 0 24 24",...r,children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),xs="/assets/logo-BADOZ29k.png",ee=we()(Ve(e=>({filterType:"inbox",targetId:null,query:"",showCompleted:!1,sortCriteria:"createdAt_desc",setFilter:(t,r=null)=>e({filterType:t,targetId:r,query:""}),setSearchQuery:t=>e({query:t,filterType:"search"}),clearFilter:()=>e({filterType:"inbox",targetId:null,query:""}),setShowCompleted:t=>e({showCompleted:t}),setSortCriteria:t=>e({sortCriteria:t})}),{name:"filter-storage",partialize:e=>({filterType:e.filterType,targetId:e.targetId,query:e.query,showCompleted:e.showCompleted,sortCriteria:e.sortCriteria})})),te=we()(Ve(e=>({currentView:"tasks",viewData:null,setView:(t,r=null)=>e({currentView:t,viewData:r})}),{name:"view-storage",partialize:e=>({currentView:e.currentView})})),bs=()=>{const{t:e}=I(),{query:t,setFilter:r}=ee(),{currentView:n,setView:a}=te(),o=n==="search",i=()=>{r("search"),a("search")};return s.jsxs("button",{onClick:i,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-all duration-200 group ${o?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700/50 text-gray-600 dark:text-gray-400"}`,"aria-label":e("sidebar.search_placeholder"),children:[s.jsx(Ee,{className:`w-4 h-4 transition-colors ${o?"text-blue-600 dark:text-blue-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),s.jsx("span",{className:"flex-1 text-sm font-medium",children:t?`"${t}"`:e("sidebar.search_placeholder")}),s.jsx("span",{className:"text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"/"})]})},ys=({children:e})=>{const{sidebarWidth:t,isSidebarOpen:r,sidebarDensity:n,toggleSidebar:a,setSidebarWidth:o}=bt(),{t:i}=I(),l={compact:"p-1",normal:"p-2",comfortable:"p-4",spacious:"p-6"}[n];S.useEffect(()=>{const d=u=>{if(!document.body.classList.contains("resizing"))return;const p=Math.max(T.SIDEBAR.MIN_WIDTH,Math.min(T.SIDEBAR.MAX_WIDTH,u.clientX));o(p)},h=()=>{document.body.classList.remove("resizing"),document.body.style.cursor="default"};return document.addEventListener("mousemove",d),document.addEventListener("mouseup",h),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",h)}},[o]);const c=()=>{document.body.classList.add("resizing"),document.body.style.cursor="col-resize"};return s.jsxs("aside",{className:C("h-full transition-all duration-300 flex flex-col group relative","bg-white dark:bg-gray-900 lg:bg-white/70 lg:dark:bg-gray-800/60","lg:backdrop-blur-xl","border-r border-gray-200/50 dark:border-gray-700/30",r?"translate-x-0":"-translate-x-full lg:translate-x-0","fixed lg:relative z-30 lg:z-0 shadow-2xl lg:shadow-none overflow-hidden","w-[var(--sidebar-mobile)] lg:w-[var(--sidebar-desktop)]"),style:{"--sidebar-desktop":`${t}px`,"--sidebar-mobile":r?`${T.LAYOUT.MOBILE_SIDEBAR_WIDTH_PX}px`:"0px",width:r?void 0:"0px"},children:[s.jsxs("div",{className:"h-14 flex items-center px-4 flex-shrink-0 justify-between border-b border-gray-100 dark:border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition select-none",children:[s.jsx("div",{className:"w-8 h-8 rounded-xl bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20",children:s.jsx("img",{src:xs,alt:"L",className:"h-5 w-5 invert brightness-0"})}),s.jsxs("span",{className:"text-lg font-black text-gray-900 dark:text-white tracking-tight",children:["Task",s.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Mg"})]})]}),s.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all active:scale-90",title:i(r?"sidebar.toggle_collapse":"sidebar.toggle_expand"),"aria-label":i(r?"sidebar.toggle_collapse":"sidebar.toggle_expand"),children:s.jsx(hs,{className:C("w-5 h-5 transition-transform duration-300",!r&&"rotate-180"),strokeWidth:2.5})})]}),s.jsx("div",{className:"px-3 pb-2 pt-2",children:s.jsx(bs,{})}),s.jsx("div",{className:C("flex-1 overflow-y-auto custom-scrollbar pt-2",l),children:e}),s.jsx("div",{role:"separator","aria-orientation":"vertical","aria-label":i("sidebar.resizer_label"),"aria-valuenow":t,"aria-valuemin":T.SIDEBAR.MIN_WIDTH,"aria-valuemax":T.SIDEBAR.MAX_WIDTH,tabIndex:r?0:-1,onMouseDown:c,onKeyDown:d=>{d.key==="ArrowLeft"?o(Math.max(T.SIDEBAR.MIN_WIDTH,t-10)):d.key==="ArrowRight"&&o(Math.min(T.SIDEBAR.MAX_WIDTH,t+10))},className:C("absolute top-0 right-0 w-3 h-full cursor-col-resize z-40 transition-colors hidden lg:flex items-center justify-center outline-none focus:bg-blue-500","hover:bg-blue-500/30 active:bg-blue-600/50 group/resizer"),title:i("sidebar.resizer_hint"),children:s.jsx("div",{className:"absolute w-1 h-12 bg-gray-400 dark:bg-gray-500 rounded-full opacity-0 group-hover/resizer:opacity-100 group-focus/resizer:opacity-100 transition-opacity pointer-events-none"})}),s.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-gray-200/50 dark:bg-gray-700/30 hidden lg:block"})]})},oe=Ut([Gr(),Yr(Re),b().datetime({offset:!0}).or(b().datetime())]).nullable().optional(),ks=V({type:ze(["none","daily","weekly","weekdays","monthly"]).default("none"),days:se(G().min(0).max(6)).optional()}).nullable(),kt=V({id:b().optional(),title:b().refine(e=>e.length>=1,{params:{i18n:"validation.title_required"}}),description:b().nullable().optional(),status:ze(["todo","completed","archived"]).default("todo"),dueDate:oe,completedAt:oe,createdAt:oe,ownerId:b(),projectId:b().nullable().optional(),labelIds:se(b()).optional(),timeBlockId:b().nullable().optional(),duration:G().refine(e=>e>=0,{params:{i18n:"validation.duration_invalid"}}).optional(),isImportant:Kt().default(!1),recurrence:ks,order:G().optional()}),ar=V({id:b().optional(),name:b().refine(e=>e.length>=1,{params:{i18n:"validation.project_name_required"}}),color:b().optional(),ownerId:b(),createdAt:oe,order:G().optional()}),nr=V({id:b().optional(),name:b().refine(e=>e.length>=1,{params:{i18n:"validation.label_name_required"}}),color:b().optional(),ownerId:b(),workspaceId:b().optional(),createdAt:oe,order:G().optional()}),wt=V({id:b().optional(),name:b().refine(e=>e.length>=1,{params:{i18n:"validation.workspace_name_required"}}),createdAt:oe}),or=V({id:b().optional(),name:b().refine(e=>e.length>=1,{params:{i18n:"validation.filter_name_required"}}),query:b(),workspaceId:b().optional(),ownerId:b().optional(),createdAt:oe}),It=b().refine(e=>/^([01]\d|2[0-3]):([0-5]\d)$/.test(e),{params:{i18n:"validation.time_format_invalid"}}),ws=V({id:b().optional(),name:b().refine(e=>e.length>=1,{params:{i18n:"validation.timeblock_name_required"}}),start:It,end:It,color:b().optional(),order:G().optional()});V({id:b().optional(),mode:b(),data:Ht(b(),b()),createdAt:oe,updatedAt:oe,ownerId:b(),workspaceId:b()});const He=we()(Ve(e=>({currentWorkspaceId:null,workspaces:[],setCurrentWorkspaceId:t=>e({currentWorkspaceId:t}),setWorkspaces:t=>{const r=t.filter(n=>{const a=wt.safeParse(n);return a.success?!0:(console.error("Invalid workspace data:",n,a.error),!1)});e({workspaces:r})}}),{name:"workspace-storage",partialize:e=>({currentWorkspaceId:e.currentWorkspaceId})}));function js(){return typeof window<"u"&&window.GLOBAL_APP_ID?window.GLOBAL_APP_ID:typeof __app_id<"u"?__app_id:"default-app-id"}function at(e){return`artifacts/${js()}/users/${e}`}function _e(e,t){return`${at(e)}/workspaces/${t}`}const _={users:e=>at(e),workspaces:e=>`${at(e)}/workspaces`,filters:(e,t)=>`${_e(e,t)}/filters`,labels:(e,t)=>`${_e(e,t)}/labels`,timeblocks:(e,t)=>`${_e(e,t)}/timeblocks`,tasks:(e,t)=>`${_e(e,t)}/tasks`,projects:(e,t)=>`${_e(e,t)}/projects`,targets:(e,t)=>`${_e(e,t)}/targets`},vs=["permission-denied","invalid-argument","unauthenticated","not-found","already-exists","failed-precondition"];async function P(e,t={}){const r=typeof t=="number"?{maxRetries:t}:t,{maxRetries:n=3,initialDelay:a=1e3,onError:o,onFinalFailure:i}=r;let l;for(let c=0;c<=n;c++)try{return await e()}catch(d){if(l=d,o&&o(d,c),c===n)break;const h=(d==null?void 0:d.code)||"";if(vs.some(y=>h.includes(y)))throw i&&i(d),d;const p=a*Math.pow(2,c);await new Promise(y=>setTimeout(y,p))}throw i&&i(l),l}class Ns{constructor(){A(this,"cachedWorkspacesMap",new Map);A(this,"listeners",new Map);A(this,"unsubscribes",new Map)}isInitialized(t){return this.cachedWorkspacesMap.has(t)}notifyListeners(t){const r=this.cachedWorkspacesMap.get(t)||[],n=this.listeners.get(t);if(n){const a=[...r];n.forEach(o=>o(a))}}setCache(t,r){this.cachedWorkspacesMap.set(t,r),this.notifyListeners(t)}getWorkspaces(t){return this.cachedWorkspacesMap.get(t)||[]}subscribe(t,r){this.listeners.has(t)||this.listeners.set(t,new Set);const n=this.listeners.get(t);n.add(r);const a=this.cachedWorkspacesMap.get(t);if(a&&queueMicrotask(()=>r([...a])),!this.unsubscribes.has(t)){const o=_.workspaces(t),i=ge(L(v,o),ft("createdAt","asc"));console.log(`[WorkspaceCache] Subscribing to path: ${o}`);const l=je(i,c=>{const d=c.docs.map(u=>({id:u.id,...u.data()}));console.log(`[WorkspaceCache] Received ${d.length} workspaces from Firestore`);const h=d.filter(u=>{const p=wt.safeParse(u);return p.success?!0:(console.error("[WorkspaceCache] Invalid workspace data:",u,p.error),!1)});this.cachedWorkspacesMap.set(t,h),this.notifyListeners(t)},c=>{console.error("[WorkspaceCache] Subscription error:",c),this.cachedWorkspacesMap.set(t,[]),this.notifyListeners(t)});this.unsubscribes.set(t,l)}return()=>{var o;n.delete(r),n.size===0&&((o=this.unsubscribes.get(t))==null||o(),this.unsubscribes.delete(t),this.listeners.delete(t))}}clearCache(t){var r;this.cachedWorkspacesMap.delete(t),(r=this.unsubscribes.get(t))==null||r(),this.unsubscribes.delete(t),this.listeners.delete(t)}}const Y=new Ns,_s=e=>Y.isInitialized(e),Cs=e=>Y.getWorkspaces(e);function Ts(e,t){return Y.subscribe(e,t)}async function ir(e,t){const r=Y.getWorkspaces(e);wt.pick({name:!0}).parse({name:t});const n="temp-"+Date.now(),a={id:n,name:t,createdAt:new Date};Y.setCache(e,[...r,a]);const o=_.workspaces(e);console.log(`[WorkspaceCache] Adding workspace to path: ${o}`);let i=n;return await P(async()=>{const l=await K(L(v,o),{name:t,createdAt:Z()});i=l.id,console.log(`[WorkspaceCache] Successfully added workspace with ID: ${l.id}`)},{onFinalFailure:()=>{console.error(`[WorkspaceCache] Failed to add workspace: ${t}`),Y.setCache(e,r),j.error("„ÉØ„Éº„ÇØ„Çπ„Éö„Éº„Çπ„ÅÆËøΩÂä†„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}}),{id:i,name:t}}async function Ds(e,t,r){const n=Y.getWorkspaces(e),a=n.map(o=>o.id===t?{...o,...r}:o);Y.setCache(e,a),await P(async()=>{const o=_.workspaces(e),i=z(v,o,t);await De(i,r)},{onFinalFailure:()=>{Y.setCache(e,n),j.error("„ÉØ„Éº„ÇØ„Çπ„Éö„Éº„Çπ„ÅÆÊõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function Ms(e,t){const r=Y.getWorkspaces(e),n=r.filter(a=>a.id!==t);Y.setCache(e,n),await P(async()=>{const a=_.workspaces(e);await Me(z(v,a,t))},{onFinalFailure:()=>{Y.setCache(e,r),j.error("„ÉØ„Éº„ÇØ„Çπ„Éö„Éº„Çπ„ÅÆÂâäÈô§„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function Ss(e){try{const t=_.workspaces(e);(await de(ge(L(v,t),Wr(1)))).empty&&await ir(e,"„É°„Ç§„É≥")}catch(t){console.error("[WorkspaceCache] Failed to ensure default workspace:",t)}}function Is(e){var r;const t=e||((r=D.currentUser)==null?void 0:r.uid);return t?Cs(t):[]}function Es(e){var r;const t=e||((r=D.currentUser)==null?void 0:r.uid);return t?_s(t):!1}function re(){return He.getState().currentWorkspaceId}function As(e){if(!e)return;const t=He.getState();t.currentWorkspaceId!==e&&t.setCurrentWorkspaceId(e)}function Ls(e,t){var o;const r=typeof e=="function"?e:t,n=typeof e=="string"?e:(o=D.currentUser)==null?void 0:o.uid;return n?Ts(n,i=>{i.length===0?Ss(n).catch(l=>console.error("[Workspace] Default creation error:",l)):Fs(i),typeof r=="function"&&r(i)}):(typeof r=="function"&&r([]),()=>{})}function Fs(e){if(e.length===0)return null;const t=He.getState();let r=t.currentWorkspaceId;const n=r?e.some(a=>a.id===r):!1;return(!r||!n)&&(r=e[0].id,t.setCurrentWorkspaceId(r)),r}async function ti(e){const t=D.currentUser;if(!t)throw new Error("Authentication required");return ir(t.uid,e)}async function ri(e,t){const r=D.currentUser;if(!r)throw new Error("Authentication required");return Ds(r.uid,e,{name:t})}async function si(e){const t=D.currentUser;if(!t)throw new Error("Authentication required");return Ms(t.uid,e)}function Le(e){const t=`[ErrorLogger] [${e.type.toUpperCase()}]`,r=e.stack?`
${e.stack}`:"";e.type==="warn"?console.warn(`${t} ${e.message}${r}`):console.error(`${t} ${e.message}${r}`)}function Rs(){window.onerror=(e,t,r,n,a)=>(Le({timestamp:new Date().toISOString(),type:"error",message:String(e),stack:a==null?void 0:a.stack}),!1),window.onunhandledrejection=e=>{const t=e.reason;Le({timestamp:new Date().toISOString(),type:"unhandledrejection",message:(t==null?void 0:t.message)||String(t),stack:t==null?void 0:t.stack})},console.info("[ErrorLogger] Initialized")}function Ps(e,t){Le({timestamp:new Date().toISOString(),type:"react",message:e.message,stack:e.stack})}class Bs{constructor(){A(this,"initialLoginPromise",null)}getCurrentUserId(){var t;return((t=D.currentUser)==null?void 0:t.uid)||null}hasInitialToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return!0;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return!0}catch{}return!1}getInitialAuthToken(){if(typeof window<"u"&&window.GLOBAL_INITIAL_AUTH_TOKEN)return window.GLOBAL_INITIAL_AUTH_TOKEN;try{if(typeof __initial_auth_token<"u"&&__initial_auth_token)return __initial_auth_token}catch{}return null}async tryInitialTokenLogin(){if(this.initialLoginPromise)return this.initialLoginPromise;const t=this.getInitialAuthToken();if(!t){this.initialLoginPromise=Promise.resolve();return}return this.initialLoginPromise=(async()=>{try{await zr(D,t),console.log("[Auth] Initial token login success")}catch(r){Le({timestamp:new Date().toISOString(),type:"error",message:`Initial token login failed: ${r.message}`,stack:r.stack})}})(),this.initialLoginPromise}initAuthListener(t,r){return this.tryInitialTokenLogin(),qt(D,a=>{a?t(a):r()})}async loginWithEmail(t,r){return await zt(D,t,r)}async logout(){try{await qr(D)}catch(t){throw Le({timestamp:new Date().toISOString(),type:"error",message:`Logout failed: ${t.message}`,stack:t.stack}),t}}async updateUserAuthPassword(t){const r=D.currentUser;if(!r)throw new Error("Authentication required: No current user.");await Vr(r,t)}}const nt=new Bs,Os=(e,t)=>nt.initAuthListener(e,t),$s={TIMEOUT:{AUTH_LOADING:1e4}},lr=()=>{var i;const[e,t]=w.useState(((i=D.currentUser)==null?void 0:i.uid)||null),[r,n]=w.useState(D.currentUser),[a,o]=w.useState(!0);return w.useEffect(()=>{const l=new AbortController;let c=()=>{},d=null;const h=async()=>{if(nt.hasInitialToken())try{await nt.tryInitialTokenLogin()}catch(u){console.error("[useAuth] Initial token login failed:",u)}l.signal.aborted||(c=Os(u=>{l.signal.aborted||(t(u.uid),n(u),o(!1),d&&clearTimeout(d))},()=>{l.signal.aborted||(t(null),n(null),o(!1),d&&clearTimeout(d))}))};return d=setTimeout(()=>{l.signal.aborted||(console.warn("[useAuth] Loading timeout reached, forcing loading=false"),o(!1))},$s.TIMEOUT.AUTH_LOADING),h(),()=>{l.abort(),c(),d&&clearTimeout(d)}},[]),{userId:e,user:r,loading:a}},Oe=new Map;function ve(e,t,r,n){const a=Pt(),o=JSON.stringify(e),i=15e3;return w.useEffect(()=>{if(e.some(c=>c==null))return;let l=Oe.get(o);return l||(l={count:0,unsubscribe:t(d=>{a.setQueryData(e,d)})},Oe.set(o,l)),l.count++,()=>{const c=Oe.get(o);c&&(c.count--,c.count===0&&(c.unsubscribe(),Oe.delete(o)))}},[o]),Dr({queryKey:e,queryFn:()=>{const l=a.getQueryData(e);return l!==void 0?Promise.resolve(l):r!==void 0?Promise.resolve(r):new Promise(c=>{const d=setTimeout(()=>{const p=a.getQueryData(e);console.debug(`[FirestoreSub] Timeout waiting for data (monitor): ${o}`),c(p??r??null)},i),h=a.getQueryCache().subscribe(p=>{if(p.type==="updated"&&JSON.stringify(p.query.queryKey)===o){const y=p.query.state.data;y!==void 0&&(clearTimeout(d),h(),c(y))}}),u=a.getQueryData(e);u!==void 0&&(clearTimeout(d),h(),c(u))})},initialData:r,staleTime:1/0,gcTime:1e3*60*5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})}const Ws=()=>{const{userId:e,loading:t}=lr(),r=w.useCallback(c=>e?Ls(e,c):()=>{},[e]),a=(e?Es(e):!1)&&e?Is(e):void 0,{data:o,isPending:i}=ve(["workspaces",e||void 0],r,a);return{workspaces:o||[],loading:t||!!e&&i}},ne=()=>{const e=He(n=>n.currentWorkspaceId),{userId:t,loading:r}=lr();return{workspaceId:e,userId:t,loading:r}},zs=()=>{const{t:e}=I(),{workspaces:t,loading:r}=Ws(),{openModal:n}=ae(),[a,o]=w.useState(!1),i=w.useRef(null),{workspaceId:l}=ne(),c=t.find(d=>d.id===l);return w.useEffect(()=>{const d=u=>{i.current&&!i.current.contains(u.target)&&o(!1)},h=u=>{u.key==="Escape"&&o(!1)};return a&&(document.addEventListener("mousedown",d),document.addEventListener("keydown",h)),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("keydown",h)}},[a]),r?s.jsx("div",{className:"h-8 w-32 bg-gray-100 dark:bg-gray-800 animate-pulse rounded"}):s.jsxs("div",{className:"relative",ref:i,children:[s.jsxs("button",{onClick:()=>o(!a),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md px-2 py-1 transition-colors group","aria-expanded":a,"aria-haspopup":"true",children:[s.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 truncate max-w-[120px] sm:max-w-[140px] md:max-w-[180px]",children:c?c.name:e("loading")}),s.jsx(Jt,{className:C("w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-transform duration-200",a?"rotate-180":"")})]}),a&&s.jsxs("div",{className:"absolute left-0 mt-2 w-60 sm:w-64 max-w-[calc(100vw-32px)] origin-top-left rounded-lg shadow-2xl bg-white dark:bg-gray-800 ring-1 ring-black/5 z-50 border border-gray-100 dark:border-gray-700 overflow-hidden animate-scale-in custom-scrollbar",children:[s.jsx("div",{className:"p-1 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50",children:s.jsxs("button",{onClick:()=>{o(!1),n("workspace-edit",null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700/50 transition-colors rounded-md",children:[s.jsx(Yt,{className:"w-4 h-4 mr-2"}),e("sidebar.add_workspace")]})}),s.jsx("div",{className:"py-1 max-h-[300px] overflow-y-auto custom-scrollbar",children:t.map(d=>{const h=d.id===l;return s.jsxs("div",{className:"flex items-center justify-between group/item px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[s.jsx("button",{onClick:()=>{d.id&&As(d.id),o(!1)},className:C("flex-1 text-left text-sm truncate mr-2",h?"text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300"),children:s.jsx("span",{className:"truncate block max-w-[120px] sm:max-w-[140px]",children:d.name})}),s.jsxs("div",{className:"flex items-center gap-1",children:[h&&s.jsx(Pe,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0"}),s.jsx("button",{onClick:u=>{u.stopPropagation(),o(!1),n("workspace-edit",d)},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded opacity-0 group-hover/item:opacity-100 transition-opacity",title:e("edit"),children:s.jsx(Xt,{className:"w-3.5 h-3.5"})})]})]},d.id)})})]})]})},qs=({sidebarContent:e,title:t,children:r})=>{const{toggleSidebar:n,isSidebarOpen:a}=bt(),{t:o}=I(),{openModal:i}=ae();return s.jsxs("div",{className:"w-full h-full flex overflow-hidden bg-premium-gradient text-gray-800 dark:text-white antialiased",children:[a&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-20 lg:hidden transition-opacity duration-300",onClick:n}),s.jsx(ys,{children:e}),s.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[s.jsxs("header",{className:"h-12 border-b border-gray-200 dark:border-gray-800 flex items-center px-4 justify-between bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-10 sticky top-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[!a&&s.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:o("sidebar.menu_open"),"aria-label":o("sidebar.menu_open"),children:s.jsx(ls,{className:"w-5 h-5"})}),s.jsx(zs,{}),s.jsx("h1",{className:"font-bold text-lg border-l border-gray-300 dark:border-gray-700 pl-3 ml-1 truncate",children:t})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("button",{onClick:()=>i("settings"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Settings","aria-label":"Settings",children:s.jsx(Xt,{className:"w-5 h-5"})})})]}),s.jsx("main",{className:"flex-1 overflow-hidden flex flex-col",id:"main-content",children:s.jsx("div",{className:C("w-full h-full bg-white dark:bg-gray-900 relative flex-1",T.LAYOUT.CONTAINER_WIDTH_CLASS),children:r})})]})]})},Vs="modulepreload",Us=function(e){return"/"+e},Et={},le=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=i(r.map(d=>{if(d=Us(d),d in Et)return;Et[d]=!0;const h=d.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${u}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Vs,h||(p.as="script"),p.crossOrigin="",p.href=d,c&&p.setAttribute("nonce",c),document.head.appendChild(p),h)return new Promise((y,x)=>{p.addEventListener("load",y),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},Ks=S.lazy(()=>le(()=>import("./FilterEditModal-DB4Cwmd1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(e=>({default:e.FilterEditModal}))),Hs=S.lazy(()=>le(()=>import("./LabelEditModal-CE9FHwkK.js"),__vite__mapDeps([9,1,2,3,6,7,8,5,4])).then(e=>({default:e.LabelEditModal}))),Gs=S.lazy(()=>le(()=>import("./ProjectEditModal-D48DPK7n.js"),__vite__mapDeps([10,1,2,3,6,7,8,5,4])).then(e=>({default:e.ProjectEditModal}))),Ys=S.lazy(()=>le(()=>import("./SettingsModal-CpciYIMb.js"),__vite__mapDeps([11,1,2,3,4,7,5,8])).then(e=>({default:e.SettingsModal}))),Xs=S.lazy(()=>le(()=>import("./TaskDetailModal-DOViFD89.js"),__vite__mapDeps([12,1,2,3,5,4,6,7,8])).then(e=>({default:e.TaskDetailModal}))),Js=S.lazy(()=>le(()=>import("./TimeBlockEditModal-DEWluyVA.js"),__vite__mapDeps([13,1,2,3,8,4,6,7,5])).then(e=>({default:e.TimeBlockEditModal}))),Qs=S.lazy(()=>le(()=>import("./WorkspaceEditModal-FIpLBSq6.js"),__vite__mapDeps([14,1,2,3,6,7,8,5,4])).then(e=>({default:e.WorkspaceEditModal}))),Zs=S.lazy(()=>le(()=>import("./WikiFrameworkModal-DQfhl-LI.js"),__vite__mapDeps([15,1,2,3,7,4,8,5])).then(e=>({default:e.WikiFrameworkModal}))),ea=S.lazy(()=>le(()=>import("./ConfirmationModal-D8s_CqdQ.js"),__vite__mapDeps([16,1,2,3,7,8,5,4])).then(e=>({default:e.ConfirmationModal}))),ta=()=>{const{stack:e}=ae();return e.length===0?null:s.jsx(w.Suspense,{fallback:null,children:e.map((t,r)=>{const a=r===0?void 0:"bg-black/30",o={isOpen:!0,data:t.data,zIndex:100+r*10,overlayClassName:a};switch(t.type){case"settings":return s.jsx(Ys,{...o},t.id);case"task-detail":return s.jsx(Xs,{...o},t.id);case"label-edit":return s.jsx(Hs,{...o},t.id);case"project-edit":return s.jsx(Gs,{...o},t.id);case"workspace-edit":return s.jsx(Qs,{...o},t.id);case"filter-edit":return s.jsx(Ks,{...o},t.id);case"timeblock-edit":return s.jsx(Js,{...o},t.id);case"wiki-framework":return s.jsx(Zs,{...o},t.id);case"confirmation":return s.jsx(ea,{...o},t.id);default:return null}})})};function W(e){if(!e)return null;if(e instanceof Date)return e;if(e.toDate&&typeof e.toDate=="function")return e.toDate();const t=new Date(e);return isNaN(t.getTime())?null:t}const At=(e,t)=>{const r=W(e),n=W(t);return!r||!n?!1:r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()&&r.getDate()===n.getDate()},ra=e=>{const t=W(e);if(!t)return!1;const r=new Date;return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()},sa=(e,t=7)=>{const r=W(e);if(!r)return!1;const n=new Date;n.setHours(0,0,0,0);const a=new Date(n);a.setDate(n.getDate()+1);const o=new Date(n);return o.setDate(n.getDate()+t+1),r>=a&&r<o};function Ge(e=new Date){const t=W(e)||new Date,r=new Date(t);return r.setHours(0,0,0,0),r}function aa(e=new Date,t=1){const r=W(e)||new Date,n=r.getDay(),a=r.getDate()-n+(n<t?t-7:t),o=new Date(r);return o.setDate(a),Ge(o)}function Lt(e){const t=W(e);if(!t)return"";const r=new Date,n=Ge(r),a=Math.round((t.getTime()-n.getTime())/(1e3*60*60*24));if(a===0)return"‰ªäÊó•";if(a===1)return"ÊòéÊó•";if(a===-1)return"Êò®Êó•";const o=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return o!==r.getFullYear()?`${o}/${i}/${l}`:`${i}/${l}`}const ai=e=>{const t=W(e);if(!t)return"";const r=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${r}-${n}-${a}`},ni=e=>{if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t};function na(e){const t=W(e);if(!t)return"text-gray-500";const r=Ge(new Date),n=Math.round((t.getTime()-r.getTime())/(1e3*60*60*24));return n<0?"text-red-500 font-bold":n===0?"text-green-600 dark:text-green-400 font-medium":n===1?"text-orange-500 dark:text-orange-400 font-medium":"text-gray-500 dark:text-gray-400"}function oa(e,t){var n;if(!e||!(t!=null&&t.type))return null;const r=new Date(W(e));switch(t.type){case"daily":return r.setDate(r.getDate()+1),r;case"weekly":{if(!((n=t.days)!=null&&n.length))return null;const a=r.getDay();for(let o=1;o<=7;o++){const i=(a+o)%7;if(t.days.includes(i))return r.setDate(r.getDate()+o),r}return null}case"weekdays":do r.setDate(r.getDate()+1);while(r.getDay()===0||r.getDay()===6);return r;case"monthly":return r.setMonth(r.getMonth()+1),r;default:return null}}function oi(e){const t=Ge(new Date);if(!(e!=null&&e.type)||e.type==="daily"||e.type==="monthly")return t;if(e.type==="weekly"&&e.days&&e.days.length>0){const r=t.getDay();for(let n=0;n<=6;n++)if(e.days.includes((r+n)%7))return t.setDate(t.getDate()+n),t}if(e.type==="weekdays"){for(;t.getDay()===0||t.getDay()===6;)t.setDate(t.getDate()+1);return t}return t}function ia(e,t){if(!e||!t)return 0;const[r,n]=e.split(":").map(Number),[a,o]=t.split(":").map(Number);if(isNaN(r)||isNaN(n)||isNaN(a)||isNaN(o))return 0;const i=r*60+n;let l=a*60+o;return l<i&&(l+=1440),l-i}const ue=Ut([G(),b(),Xr(),Jr()]),la=V({id:b(),title:b().min(1),description:b().nullable().optional(),status:ze(["todo","completed","archived"]).optional(),dueDate:ue,completedAt:ue,createdAt:ue,ownerId:b().optional(),projectId:b().nullable().optional(),labelIds:se(b()).optional(),timeBlockId:b().nullable().optional(),duration:G().optional(),isImportant:Kt().optional(),recurrence:V({type:ze(["none","daily","weekly","weekdays","monthly"]).optional(),days:se(G()).optional()}).nullable().optional(),order:G().optional()}).passthrough(),ca=V({id:b(),name:b().min(1),color:b().optional(),ownerId:b().optional(),createdAt:ue,order:G().optional()}).passthrough(),da=V({id:b(),name:b().min(1),color:b().optional(),ownerId:b().optional(),createdAt:ue}).passthrough(),ua=V({id:b(),mode:b(),data:Ht(b(),b()),createdAt:ue,updatedAt:ue,ownerId:b().optional(),workspaceId:b().optional()}).passthrough(),ha=V({id:b(),name:b().min(1),start:b(),end:b(),color:b().optional(),order:G().optional()}).passthrough(),ga=V({id:b(),name:b().min(1),query:b(),createdAt:ue}).passthrough(),ma=V({version:b().optional(),exportedAt:b().optional(),userId:b().optional(),workspaceId:b().optional(),tasks:se(la).default([]),projects:se(ca).default([]),labels:se(da).default([]),targets:se(ua).default([]),timeBlocks:se(ha).default([]),customFilters:se(ga).default([])}),pa=e=>e instanceof Date?Re.fromDate(e):e,pe=e=>{if(e!=null){if(typeof e=="number")return new Date(e);if(typeof e=="string")return new Date(e)}};async function ii(e,t){if(!e||!t)throw new Error("Missing parameters for backup.");try{const r=L(v,_.tasks(e,t)),n=L(v,_.projects(e,t)),a=L(v,_.labels(e,t)),o=L(v,_.targets(e,t)),i=L(v,_.timeblocks(e,t)),l=L(v,_.filters(e,t)),[c,d,h,u,p,y]=await Promise.all([de(r),de(n),de(a),de(o),de(i),de(l)]),x=g=>g.docs.map(k=>{const N=k.data(),m={id:k.id};for(const f in N){const E=N[f];m[f]=E instanceof Re?E.toMillis():E}return m});return{version:"1.4",exportedAt:new Date().toISOString(),userId:e,workspaceId:t,tasks:x(c),projects:x(d),labels:x(h),targets:x(u),timeBlocks:x(p),customFilters:x(y)}}catch(r){throw console.error("[Backup] createBackupData failed:",r),r}}async function li(e,t,r){var i;if(!e||!t)throw new Error("Invalid import parameters: userId and workspaceId are required.");if(!r)throw new Error("Invalid import parameters: backupData is required.");const n=ma.safeParse(r);if(!n.success)throw console.error("[Backup] Validation failed:",n.error.format()),new Error(`„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Éá„Éº„Çø„ÅÆÂΩ¢Âºè„Åå‰∏çÊ≠£„Åß„Åô: ${n.error.issues.map(l=>l.message).join(", ")}`);const a=n.data,o=[];try{const{tasks:l,projects:c,labels:d,targets:h,timeBlocks:u,customFilters:p}=a,y=new Map,x=new Map,g=await de(L(v,_.labels(e,t))),k=new Map;g.forEach(m=>k.set(m.data().name,m.id));for(const m of d)try{const f=(i=m.name)==null?void 0:i.trim();if(!f)continue;if(k.has(f))x.set(m.id,k.get(f));else{const E={...m,name:f};delete E.id;const F=await K(L(v,_.labels(e,t)),E);x.set(m.id,F.id),k.set(f,F.id)}}catch(f){o.push(`„É©„Éô„É´ "${m.name}" „ÅÆ„Ç§„É≥„Éù„Éº„Éà„Å´Â§±Êïó: ${f}`)}for(const m of c)try{const f={...m};delete f.id,f.createdAt=pe(m.createdAt);const E=await K(L(v,_.projects(e,t)),f);y.set(m.id,E.id)}catch(f){o.push(`„Éó„É≠„Ç∏„Çß„ÇØ„Éà "${m.name}" „ÅÆ„Ç§„É≥„Éù„Éº„Éà„Å´Â§±Êïó: ${f}`)}for(const m of u)try{const f={...m};delete f.id,await K(L(v,_.timeblocks(e,t)),f)}catch(f){o.push(`„Çø„Ç§„É†„Éñ„É≠„ÉÉ„ÇØ "${m.name}" „ÅÆ„Ç§„É≥„Éù„Éº„Éà„Å´Â§±Êïó: ${f}`)}for(const m of p)try{const f={...m};delete f.id,f.createdAt=pe(m.createdAt),await K(L(v,_.filters(e,t)),f)}catch(f){o.push(`„Éï„Ç£„É´„Çø„Éº "${m.name}" „ÅÆ„Ç§„É≥„Éù„Éº„Éà„Å´Â§±Êïó: ${f}`)}for(const m of h)try{const f={...m};delete f.id,f.createdAt=pe(m.createdAt),f.updatedAt=pe(m.updatedAt),f.ownerId=e,f.workspaceId=t,await K(L(v,_.targets(e,t)),f)}catch(f){o.push(`„Çø„Éº„Ç≤„ÉÉ„Éà (mode: ${m.mode}) „ÅÆ„Ç§„É≥„Éù„Éº„Éà„Å´Â§±Êïó: ${f}`)}const N=l.map(async m=>{try{const f={...m};delete f.id,f.createdAt=pe(m.createdAt);const E=pe(m.dueDate);f.dueDate=E?pa(E):null,f.completedAt=pe(m.completedAt),m.projectId&&y.has(m.projectId)?f.projectId=y.get(m.projectId):f.projectId=null,Array.isArray(m.labelIds)&&(f.labelIds=m.labelIds.map(F=>x.get(F)).filter(F=>!!F)),f.ownerId=e,await K(L(v,_.tasks(e,t)),f)}catch(f){o.push(`„Çø„Çπ„ÇØ "${m.title}" „ÅÆ„Ç§„É≥„Éù„Éº„Éà„Å´Â§±Êïó: ${f}`)}});return await Promise.all(N),{tasksCount:l.length,projectsCount:c.length,labelsCount:d.length,targetsCount:h.length,timeBlocksCount:u.length,filtersCount:p.length,errors:o}}catch(l){throw console.error("[Backup] importBackupData failed:",l),l}}const fe=class fe{constructor(){A(this,"cacheMap",new Map);A(this,"listeners",new Map);A(this,"unsubscribes",new Map)}static getInstance(){return fe.instance||(fe.instance=new fe),fe.instance}getFilters(t){return this.cacheMap.get(t)||[]}isInitialized(t){return this.cacheMap.has(t)}setCache(t,r){this.cacheMap.set(t,r),this.notify(t)}clearCache(t){t?(this.cacheMap.delete(t),this.notify(t)):this.cacheMap.clear()}notify(t){const r=this.getFilters(t),n=this.listeners.get(t);n&&n.forEach(a=>a([...r]))}subscribe(t,r,n){if(!t||!r)return n([]),()=>{};this.listeners.has(r)||this.listeners.set(r,new Set),this.listeners.get(r).add(n);const a=this.cacheMap.get(r);if(a&&queueMicrotask(()=>n([...a])),!this.unsubscribes.has(r)){const o=_.filters(t,r),i=ge(L(v,o)),l=je(i,c=>{const d=c.docs.map(h=>({id:h.id,...h.data()}));this.cacheMap.set(r,d),this.notify(r)},c=>{console.error("[Filters] Subscription error:",c),this.cacheMap.set(r,[]),this.notify(r)});this.unsubscribes.set(r,l)}return()=>{const o=this.listeners.get(r);o&&o.delete(n)}}};A(fe,"instance");let ot=fe;const X=ot.getInstance();function fa(e,t,r){return X.subscribe(e,t,r)}function xa(e){return X.getFilters(e)}function ba(e){return X.isInitialized(e)}async function ya(e,t,r){const n=X.getFilters(t),a="temp_"+Date.now(),o={...r,id:a,createdAt:new Date};X.setCache(t,[...n,o]);const i=_.filters(e,t);return P(async()=>(await K(L(v,i),{...r,createdAt:Z()})).id,{onFinalFailure:()=>{X.setCache(t,n),j.error("„Éï„Ç£„É´„Çø„ÅÆ‰ΩúÊàê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function ka(e,t,r,n){const a=X.getFilters(t),o=a.map(l=>l.id===r?{...l,...n}:l);X.setCache(t,o);const i=_.filters(e,t);return P(async()=>{await De(z(v,i,r),{...n,updatedAt:Z()})},{onFinalFailure:()=>{X.setCache(t,a),j.error("„Éï„Ç£„É´„Çø„ÅÆÊõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function wa(e,t,r){const n=X.getFilters(t),a=n.filter(i=>i.id!==r);X.setCache(t,a);const o=_.filters(e,t);return P(async()=>{await Me(z(v,o,r))},{onFinalFailure:()=>{X.setCache(t,n),j.error("„Éï„Ç£„É´„Çø„ÅÆÂâäÈô§„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}const jt=()=>me($.getState().language).t;function ja(e){return e?xa(e):[]}function va(e){return ba(e)}function Na(e,t){var n;const r=(n=D.currentUser)==null?void 0:n.uid;return!r||!e?(t([]),()=>{}):fa(r,e,t)}async function ci(e){var c;const t=jt(),r=(c=D.currentUser)==null?void 0:c.uid;if(!r)throw j.error(t("validation.auth_required")),new Error("Authentication required");const{workspaceId:n,...a}=e;if(!n)throw j.error(t("validation.workspace_required")),new Error("Workspace ID required");const o=or.pick({name:!0,query:!0}).safeParse(a);if(!o.success){const d=o.error.issues.map(h=>h.message).join(", ");throw console.error("[Filters] Validation failed:",o.error.flatten()),j.error(`${t("validation.validation_error")}: ${d}`),new Error(`Validation failed: ${d}`)}const{id:i,...l}=a;await ya(r,n,{name:l.name,query:l.query,workspaceId:n,ownerId:r})}async function di(e,t,r){var c;const n=jt(),a=(c=D.currentUser)==null?void 0:c.uid;if(!a||!e)throw j.error(n("validation.auth_required")),new Error("Authentication required");const o=or.partial().safeParse(r);if(!o.success){const d=o.error.issues.map(h=>h.message).join(", ");throw console.error("[Filters] Validation failed:",o.error.flatten()),j.error(`${n("validation.validation_error")}: ${d}`),new Error(`Validation failed: ${d}`)}const{id:i,...l}=r;await ka(a,e,t,l)}async function _a(e,t){var a;const r=jt(),n=(a=D.currentUser)==null?void 0:a.uid;if(!n||!e)throw j.error(r("validation.auth_required")),new Error("Authentication required");await wa(n,e,t)}class Ca{constructor(){A(this,"cachedLabelsMap",new Map);A(this,"listeners",new Map);A(this,"unsubscribes",new Map)}isInitialized(t){return this.cachedLabelsMap.has(t)}notifyListeners(t){const r=this.cachedLabelsMap.get(t)||[],n=this.listeners.get(t);if(n){const a=[...r];n.forEach(o=>o(a))}}setCache(t,r){this.cachedLabelsMap.set(t,r),this.notifyListeners(t)}getLabels(t){return this.cachedLabelsMap.get(t)||[]}subscribe(t,r,n){this.listeners.has(r)||this.listeners.set(r,new Set);const a=this.listeners.get(r);a.add(n);const o=this.cachedLabelsMap.get(r);if(o&&queueMicrotask(()=>n([...o])),!this.unsubscribes.has(r)){const i=_.labels(t,r),l=ge(L(v,i));console.log(`[LabelCache] Subscribing to path: ${i}`);const c=je(l,d=>{const h=d.docs.map(u=>({id:u.id,...u.data()}));console.log(`[LabelCache] Received ${h.length} labels from Firestore for workspace: ${r}`),this.cachedLabelsMap.set(r,h),this.notifyListeners(r)},d=>{console.error("[LabelCache] Subscription error:",d),this.cachedLabelsMap.set(r,[]),this.notifyListeners(r)});this.unsubscribes.set(r,c)}return()=>{var i;a.delete(n),a.size===0&&((i=this.unsubscribes.get(r))==null||i(),this.unsubscribes.delete(r),this.listeners.delete(r))}}}const J=new Ca,Ta=e=>J.isInitialized(e),Da=e=>J.getLabels(e);function Ma(e,t,r){return!e||!t?(r([]),()=>{}):J.subscribe(e,t,r)}async function Sa(e,t,r,n){const a=J.getLabels(t),i={id:"temp-"+Date.now(),name:r,color:n,ownerId:e,createdAt:new Date};J.setCache(t,[...a,i]);const l=_.labels(e,t);return console.log(`[LabelCache] Adding label to path: ${l}`),P(async()=>{await K(L(v,l),{name:r,color:n,ownerId:e,workspaceId:t,createdAt:Z()})},{onFinalFailure:()=>{console.error(`[LabelCache] Failed to add label: ${r}`),J.setCache(t,a),j.error("„É©„Éô„É´„ÅÆËøΩÂä†„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function Ia(e,t,r,n){const a=J.getLabels(t),o=a.map(i=>i.id===r?{...i,...n}:i);return J.setCache(t,o),P(async()=>{const i=_.labels(e,t),l=z(v,i,r);await De(l,n)},{onFinalFailure:()=>{J.setCache(t,a),j.error("„É©„Éô„É´„ÅÆÊõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function Ea(e,t,r){const n=J.getLabels(t),a=n.filter(o=>o.id!==r);return J.setCache(t,a),P(async()=>{const o=_.labels(e,t);await Me(z(v,o,r))},{onFinalFailure:()=>{J.setCache(t,n),j.error("„É©„Éô„É´„ÅÆÂâäÈô§„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}const Aa=Da,La=e=>e?Ta(e):!1,Te=()=>me($.getState().language).t;function vt(){var t;const e=(t=D.currentUser)==null?void 0:t.uid;if(!e)throw console.error("Authentication required for label operation."),new Error("Authentication required.");return e}function Fa(e,t){var n;const r=(n=D.currentUser)==null?void 0:n.uid;return r&&e?Ma(r,e,t):(t([]),()=>{})}async function ui(e,t,r){const n=Te();try{const a=vt();if(!e)throw new Error("Workspace ID required");const o={name:t,color:r,ownerId:a},i=nr.pick({name:!0,color:!0,ownerId:!0}).safeParse(o);if(!i.success){const c=i.error.issues.map(d=>d.message).join(", ");throw j.error(`${n("validation.validation_error")}: ${c}`),new Error(`Validation failed: ${c}`)}return await Sa(a,e,t,r)}catch(a){throw console.error("Failed to add label:",a),a.message.includes("Validation")||j.error(Te()("msg.label.create_fail")),a}}async function hi(e,t,r){const n=Te();try{const a=vt();if(!e)throw new Error("Workspace ID required");const o=nr.partial().safeParse(r);if(!o.success){const l=o.error.issues.map(c=>c.message).join(", ");throw j.error(`${n("validation.validation_error")}: ${l}`),new Error(`Validation failed: ${l}`)}return await Ia(a,e,t,r)}catch(a){throw console.error("Failed to update label:",a),a.message.includes("Validation")||j.error(Te()("msg.label.update_fail")),a}}async function gi(e,t){try{const r=vt();if(!e)throw new Error("Workspace ID required");const n=await Ea(r,e,t);return j.success(Te()("msg.label.delete_success")),n}catch(r){throw console.error("Failed to delete label:",r),j.error(Te()("msg.label.delete_fail")),r}}function Ra(e,t){return e===t?!0:!e||!t||e.length!==t.length?!1:JSON.stringify(e)===JSON.stringify(t)}function Pa(e,t){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;const r=[...e].sort((a,o)=>(a.id||"").localeCompare(o.id||"")),n=[...t].sort((a,o)=>(a.id||"").localeCompare(o.id||""));for(let a=0;a<r.length;a++){const o=r[a],i=n[a];if(o.id!==i.id||o.status!==i.status||o.title!==i.title||o.description!==i.description||o.projectId!==i.projectId||o.timeBlockId!==i.timeBlockId||o.duration!==i.duration||o.isImportant!==i.isImportant)return!1;const l=c=>c==null?c:c instanceof Date?c.getTime():typeof(c==null?void 0:c.toMillis)=="function"?c.toMillis():c;if(l(o.dueDate)!==l(i.dueDate))return!1}return!0}function Ba(e,t){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r].id!==t[r].id||e[r].name!==t[r].name||e[r].color!==t[r].color)return!1;return!0}class Oa{constructor(){A(this,"cachedProjectsMap",new Map);A(this,"listeners",new Map);A(this,"unsubscribes",new Map)}isInitialized(t){return this.cachedProjectsMap.has(t)}notifyListeners(t){const r=this.cachedProjectsMap.get(t)||[],n=this.listeners.get(t);if(n){const a=[...r];n.forEach(o=>o(a))}}setCache(t,r){this.cachedProjectsMap.set(t,r),this.notifyListeners(t)}getProjects(t){return this.cachedProjectsMap.get(t)||[]}subscribe(t,r,n){this.listeners.has(r)||this.listeners.set(r,new Set);const a=this.listeners.get(r);a.add(n);const o=this.cachedProjectsMap.get(r);if(o&&queueMicrotask(()=>n([...o])),!this.unsubscribes.has(r)){const i=_.projects(t,r),l=ge(L(v,i));console.log(`[ProjectCache] Subscribing to path: ${i} for user: ${t}`);const c=je(l,d=>{const h=d.docs.map(p=>({id:p.id,...p.data()}));console.log(`[ProjectCache] Received ${h.length} projects from Firestore for workspace: ${r}`);const u=this.cachedProjectsMap.get(r);if(u&&Ba(u,h)){console.log("[ProjectCache] Data identical, skipping update");return}console.log("[ProjectCache] Updating cache and notifying listeners"),this.cachedProjectsMap.set(r,h),this.notifyListeners(r)},d=>{console.error("[ProjectCache] Subscription error:",d),this.cachedProjectsMap.set(r,[]),this.notifyListeners(r)});this.unsubscribes.set(r,c)}return()=>{var i;a.delete(n),a.size===0&&((i=this.unsubscribes.get(r))==null||i(),this.unsubscribes.delete(r),this.listeners.delete(r))}}}const q=new Oa,$a=e=>q.isInitialized(e),Wa=e=>q.getProjects(e),za=(e,t)=>q.setCache(e,t);function qa(e,t,r){return q.subscribe(e,t,r)}async function Va(e,t,r,n){const a=q.getProjects(t),i={id:"temp-"+Date.now(),name:r,color:n,ownerId:e,createdAt:new Date};q.setCache(t,[...a,i]);const l=_.projects(e,t);return console.log(`[ProjectCache] Adding project to path: ${l}`),P(async()=>{const c=await K(L(v,l),{name:r,color:n,ownerId:e,createdAt:Z()});console.log(`[ProjectCache] Successfully added project with ID: ${c.id}`)},{onFinalFailure:()=>{console.error(`[ProjectCache] Failed to add project: ${r}`),q.setCache(t,a),j.error("„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆËøΩÂä†„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function Ua(e,t,r,n){const a=q.getProjects(t),o=a.map(i=>i.id===r?{...i,...n}:i);return q.setCache(t,o),P(async()=>{const i=_.projects(e,t),l=z(v,i,r);await De(l,n)},{onFinalFailure:()=>{q.setCache(t,a),j.error("„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÊõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function Ka(e,t,r){const n=q.getProjects(t),a=n.filter(o=>o.id!==r);return q.setCache(t,a),P(async()=>{const o=_.projects(e,t);await Me(z(v,o,r))},{onFinalFailure:()=>{q.setCache(t,n),j.error("„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÂâäÈô§„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function Ha(e,t,r){const n=q.getProjects(t);return q.setCache(t,r),P(async()=>{const a=xt(v),o=_.projects(e,t);r.forEach((i,l)=>{if(i.id&&!i.id.startsWith("temp-")){const c=z(v,o,i.id);a.update(c,{order:l})}}),await a.commit()},{onFinalFailure:()=>{q.setCache(t,n),j.error("‰∏¶„Å≥Êõø„Åà„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}const ke=()=>me($.getState().language).t;function Nt(){var r;const e=(r=D.currentUser)==null?void 0:r.uid,t=re();if(!e||!t)throw new Error("Authentication or Workspace required.");return{userId:e,workspaceId:t}}const Ga=e=>{const t=e||re();return t?Wa(t):[]},Ya=e=>{const t=e||re();return t?$a(t):!1},Xa=(e,t)=>{const r=t||re();r&&za(r,e)},Ja=(e,t)=>{const r=typeof e=="function"?e:t,n=typeof e=="string"?e:re(),a=D.currentUser;return a&&n&&typeof r=="function"?qa(a.uid,n,r):(typeof r=="function"&&r([]),()=>{})},mi=async(e,t=null,r)=>{const n=ke();try{const a=D.currentUser;if(!a)throw new Error("Authentication required.");const o=t||re();if(!o)throw new Error("Workspace selection required.");const i={name:e,color:r,ownerId:a.uid},l=ar.pick({name:!0,color:!0,ownerId:!0}).safeParse(i);if(!l.success){const d=l.error.issues.map(h=>h.message).join(", ");throw j.error(`${n("validation.validation_error")}: ${d}`),new Error(`Validation failed: ${d}`)}return await Va(a.uid,o,e,r)}catch(a){throw console.error("Failed to add project:",a),a.message.includes("Validation")||j.error(ke()("msg.project.create_fail")),a}},pi=async(e,t)=>{const r=ke();try{const{userId:n,workspaceId:a}=Nt(),o=ar.partial().safeParse(t);if(!o.success){const i=o.error.issues.map(l=>l.message).join(", ");throw j.error(`${r("validation.validation_error")}: ${i}`),new Error(`Validation failed: ${i}`)}await Ua(n,a,e,t)}catch(n){throw console.error("Failed to update project:",n),n.message.includes("Validation")||j.error(ke()("msg.project.update_fail")),n}},Qa=async e=>{try{const{userId:t,workspaceId:r}=Nt();await Ka(t,r,e),j.success(ke()("msg.project.delete_success"))}catch(t){throw console.error("Failed to delete project:",t),j.error(ke()("msg.project.delete_fail")),t}},Za=async e=>{try{const{userId:t,workspaceId:r}=Nt();await Ha(t,r,e)}catch(t){throw console.error("Failed to reorder projects:",t),j.error(ke()("msg.project.reorder_fail")),t}};class en{constructor(){A(this,"cachedTargetsMap",new Map);A(this,"listeners",new Map);A(this,"unsubscribes",new Map)}isInitialized(t){return this.cachedTargetsMap.has(t)}notifyListeners(t){const r=this.cachedTargetsMap.get(t)||[],n=this.listeners.get(t);if(n){const a=[...r];n.forEach(o=>o(a))}}setCache(t,r){this.cachedTargetsMap.set(t,r),this.notifyListeners(t)}getTargets(t){return this.cachedTargetsMap.get(t)||[]}subscribe(t,r,n){this.listeners.has(r)||this.listeners.set(r,new Set);const a=this.listeners.get(r);a.add(n);const o=this.cachedTargetsMap.get(r);if(o&&queueMicrotask(()=>n([...o])),!this.unsubscribes.has(r)){const i=_.targets(t,r),l=ge(L(v,i),ft("createdAt","desc"));console.log(`[TargetCache] Subscribing to path: ${i}`);const c=je(l,d=>{const h=d.docs.map(p=>({id:p.id,...p.data()})),u=this.cachedTargetsMap.get(r);u&&Ra(u,h)||(console.log(`[TargetCache] Received ${h.length} targets from Firestore for workspace: ${r}`),this.cachedTargetsMap.set(r,h),this.notifyListeners(r))},d=>{console.error("[TargetCache] Subscription error:",d),this.cachedTargetsMap.set(r,[]),this.notifyListeners(r)});this.unsubscribes.set(r,c)}return()=>{var i;a.delete(n),a.size===0&&((i=this.unsubscribes.get(r))==null||i(),this.unsubscribes.delete(r),this.listeners.delete(r))}}}const Ce=new en,tn=e=>Ce.isInitialized(e),rn=e=>Ce.getTargets(e);function sn(e,t,r,n){return!e||!t?(r([]),()=>{}):Ce.subscribe(e,t,a=>{r(a)})}async function an(e,t,r){const n=Ce.getTargets(t),o={id:"temp-"+Date.now(),mode:r.mode||"",data:r.data||{},ownerId:e,workspaceId:t,createdAt:new Date,updatedAt:new Date,...r};return Ce.setCache(t,[o,...n]),P(async()=>{const i=_.targets(e,t),l={...r,ownerId:e,workspaceId:t,createdAt:Z(),updatedAt:Z()};delete l.id,await K(L(v,i),l)},{onFinalFailure:()=>{console.error("[TargetCache] Failed to add target"),Ce.setCache(t,n),j.error("ÁõÆÊ®ô„ÅÆËøΩÂä†„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}function nn(){var t;const e=(t=D.currentUser)==null?void 0:t.uid;if(!e)throw new Error("Authentication required.");return e}const on=e=>{const t=e||re();return t?rn(t):[]},ln=e=>{const t=e||re();return t?tn(t):!1},cn=(e,t,r)=>{const n=D.currentUser;return n&&e&&typeof t=="function"?sn(n.uid,e,t):(typeof t=="function"&&t([]),()=>{})},dn=async(e,t)=>{const r=nn();if(!e)throw new Error("Workspace ID required.");return an(r,e,t)},tt=e=>e instanceof Re?e.toDate():e instanceof Date?e:void 0,cr=e=>e instanceof Date?Re.fromDate(e):e;function un(e,t){if(!t||typeof t!="object")return console.warn(`[deserializeTask] Invalid data for task ${e}:`,t),{id:e,title:"Invalid Task",status:"todo",ownerId:""};const r=t.recurrence||null,n={id:e,title:String(t.title||"Untitled"),description:t.description?String(t.description):null,status:t.status==="completed"||t.status==="todo"||t.status==="archived"?t.status:"todo",dueDate:tt(t.dueDate)||void 0,createdAt:tt(t.createdAt)||void 0,completedAt:tt(t.completedAt)||void 0,ownerId:String(t.ownerId||""),projectId:t.projectId?String(t.projectId):null,labelIds:Array.isArray(t.labelIds)?t.labelIds.map(String):[],timeBlockId:t.timeBlockId?String(t.timeBlockId):null,duration:typeof t.duration=="number"?t.duration:null,isImportant:!!t.isImportant,recurrence:r};return kt.safeParse(n).success,n}const xe=class xe{constructor(){A(this,"cachedTasksMap",new Map);A(this,"listeners",new Map);A(this,"unsubscribes",new Map);A(this,"currentWorkspaceId",null)}static getInstance(){return xe.instance||(xe.instance=new xe),xe.instance}notifyListeners(t){const r=this.cachedTasksMap.get(t)||[],n=this.listeners.get(t);if(n){const a=[...r];n.forEach(o=>o(a))}}reset(t){var r;t?((r=this.unsubscribes.get(t))==null||r(),this.unsubscribes.delete(t),this.listeners.delete(t),this.cachedTasksMap.delete(t)):(this.unsubscribes.forEach(n=>n()),this.unsubscribes.clear(),this.listeners.clear(),this.cachedTasksMap.clear()),this.currentWorkspaceId=null}getTask(t,r){const n=this.cachedTasksMap.get(t);return n==null?void 0:n.find(a=>a.id===r)}getTasks(t){return this.cachedTasksMap.get(t)||[]}isInitialized(t){return this.cachedTasksMap.has(t)}setCache(t,r){this.cachedTasksMap.set(t,r),this.notifyListeners(t)}subscribe(t,r,n,a){if(!t||!r)return n([]),()=>{};this.currentWorkspaceId=r,this.listeners.has(r)||this.listeners.set(r,new Set);const o=this.listeners.get(r);o.add(n);const i=this.cachedTasksMap.get(r);if(i&&queueMicrotask(()=>n([...i])),!this.unsubscribes.has(r)){const l=_.tasks(t,r),c=ge(L(v,l)),d=je(c,h=>{const u=h.docs.map(y=>un(y.id,y.data())),p=this.cachedTasksMap.get(r);p&&Pa(p,u)||(this.cachedTasksMap.set(r,u),this.notifyListeners(r))},h=>{console.error("[Tasks] Subscription error:",h),a&&a(h)});this.unsubscribes.set(r,d)}return()=>{if(o.delete(n),o.size===0){const l=this.unsubscribes.get(r);l&&(l(),this.unsubscribes.delete(r))}}}};A(xe,"instance");let it=xe;const U=it.getInstance();function dr(e,t){return U.getTask(e,t)}function hn(e){return U.getTasks(e)}function gn(e){return U.isInitialized(e)}function mn(e,t,r,n){return U.subscribe(e,t,r,n)}function ur(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>r!==void 0))}async function pn(e,t,r){const n=new Map;r.forEach((o,i)=>n.set(o,i));const a=U.getTasks(t);if(a&&a.length>0){const o=a.map(i=>{const l=n.get(i.id);return l!==void 0?{...i,order:l}:i});o.sort((i,l)=>{const c=i.order??Number.MAX_SAFE_INTEGER,d=l.order??Number.MAX_SAFE_INTEGER;return c-d}),U.setCache(t,o)}return P(async()=>{const o=_.tasks(e,t),i=[];for(let l=0;l<r.length;l+=500)i.push(r.slice(l,l+500));for(const l of i){const c=xt(v);l.forEach(d=>{const h=n.get(d),u=z(v,o,d);c.update(u,{order:h})}),await c.commit()}})}async function hr(e,t,r){return P(async()=>{const n=_.tasks(e,t),a=ur({...r});return a.dueDate&&(a.dueDate=cr(a.dueDate)),delete a.id,await K(L(v,n),{...a,ownerId:e,status:"todo",createdAt:Z()})})}async function fn(e,t,r,n){const a=U.getTasks(t);if(a==null||a.find(o=>o.id===r),a){const o=a.map(i=>i.id===r?{...i,status:n,completedAt:n==="completed"?new Date:void 0}:i);U.setCache(t,o)}return P(async()=>{const o=_.tasks(e,t),i={status:n};n==="completed"?i.completedAt=Z():i.completedAt=null,await De(z(v,o,r),i)},{onFinalFailure:()=>{a&&U.setCache(t,a),j.error("„Çø„Çπ„ÇØ„ÅÆÊõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function xn(e,t,r,n){const a=U.getTasks(t);if(a){const o=a.map(i=>i.id===r?{...i,...n}:i);U.setCache(t,o)}return P(async()=>{const o=_.tasks(e,t),i=ur({...n});i.dueDate!==void 0&&(i.dueDate=cr(i.dueDate)),await De(z(v,o,r),i)},{onFinalFailure:()=>{a&&U.setCache(t,a),j.error("„Çø„Çπ„ÇØ„ÅÆÊõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function bn(e,t,r){const n=U.getTasks(t);if(n){const a=n.filter(o=>o.id!==r);U.setCache(t,a)}return P(async()=>{const a=_.tasks(e,t);await Me(z(v,a,r))},{onFinalFailure:()=>{n&&U.setCache(t,n),j.error("„Çø„Çπ„ÇØ„ÅÆÂâäÈô§„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}const he=()=>me($.getState().language).t;function Se(){var r;const e=(r=D.currentUser)==null?void 0:r.uid,t=re();if(!e||!t)throw new Error("Authentication or Workspace required.");return{userId:e,workspaceId:t}}async function fi(e){try{const{userId:t,workspaceId:r}=Se(),a=kt.partial().required({title:!0}).safeParse(e);a.success||console.warn("[addTask] Validation warning:",a.error.flatten()),await hr(t,r,e)}catch(t){throw console.error("Failed to add task:",t),j.error(he()("msg.task.create_fail")),t}}async function yn(e,t){try{const{userId:r,workspaceId:n}=Se();if(t==="completed"){const a=dr(n,e);if(a!=null&&a.recurrence&&a.recurrence.type!=="none"){const o=oa(a.dueDate??null,a.recurrence);if(o){const i={title:a.title,description:a.description,projectId:a.projectId,labelIds:a.labelIds,timeBlockId:a.timeBlockId,duration:a.duration,isImportant:a.isImportant,recurrence:a.recurrence,dueDate:o,status:"todo"};hr(r,n,i).catch(l=>console.error("Failed to create recurring task:",l))}}}await fn(r,n,e,t)}catch(r){throw console.error("Failed to update status:",r),j.error(he()("msg.task.status_update_fail")),r}}async function lt(e,t){try{const{userId:r,workspaceId:n}=Se(),a=kt.partial().safeParse(t);a.success||console.warn("[updateTask] Validation warning:",a.error.flatten()),await xn(r,n,e,t)}catch(r){throw console.error("Failed to update task:",r),j.error(he()("msg.task.update_fail")),r}}async function kn(e){try{const{userId:t,workspaceId:r}=Se();await pn(t,r,e)}catch(t){throw console.error("Failed to reorder tasks:",t),j.error(he()("msg.task.update_fail")),t}}async function wn(e){try{const{userId:t,workspaceId:r}=Se();await bn(t,r,e),j.success(he()("msg.task.delete_success"))}catch(t){throw console.error("Failed to delete task:",t),j.error(he()("msg.task.delete_fail")),t}}async function jn(e,t){try{const{userId:r,workspaceId:n}=Se(),a=dr(n,e),i=((a==null?void 0:a.status)||t||"todo")==="completed"?"todo":"completed";await yn(e,i),i==="completed"&&j.success(he()("msg.task.complete_success"))}catch(r){throw console.error("Failed to toggle status:",r),j.error(he()("msg.task.status_update_fail")),r}}function vn(e,t,r){const n=D.currentUser;return!n||!e?(typeof t=="function"&&t([]),()=>{}):mn(n.uid,e,t,r)}const Nn=e=>{const t=e||re();return t?hn(t):[]},_n=e=>{const t=e||re();return t?gn(t):!1},Cn=T.TIME_BLOCK.DEFAULTS.map(e=>({...e})),be=class be{constructor(){A(this,"cacheMap",new Map);A(this,"listeners",new Map);A(this,"unsubscribes",new Map)}static getInstance(){return be.instance||(be.instance=new be),be.instance}getBlocks(t){return this.cacheMap.get(t)||[]}isInitialized(t){return this.cacheMap.has(t)}setCache(t,r){this.cacheMap.set(t,r),this.notify(t)}notify(t){const r=this.getBlocks(t),n=this.listeners.get(t);n&&n.forEach(a=>a([...r]))}subscribe(t,r,n){if(!t||!r)return n([]),()=>{};this.listeners.has(r)||this.listeners.set(r,new Set),this.listeners.get(r).add(n);const a=this.cacheMap.get(r);if(a&&queueMicrotask(()=>n([...a])),!this.unsubscribes.has(r)){const o=_.timeblocks(t,r),i=ge(L(v,o),ft("order","asc"));let l=!0;const c=je(i,d=>{const h=d.docs.map(u=>({id:u.id,...u.data()}));if(l&&h.length===0&&!d.metadata.hasPendingWrites){l=!1,Tn(t,r).catch(u=>console.error("[TimeBlocks] Failed to create defaults:",u));return}l=!1,this.cacheMap.set(r,h),this.notify(r)},d=>{console.error("[TimeBlocks] Subscription error:",d)});this.unsubscribes.set(r,c)}return()=>{const o=this.listeners.get(r);o&&o.delete(n)}}};A(be,"instance");let ct=be;const Q=ct.getInstance();async function Tn(e,t){const r=_.timeblocks(e,t),n=xt(v);Cn.forEach(a=>{const o=z(v,r,a.id);n.set(o,{name:a.name,start:a.start,end:a.end,color:a.color,order:a.order,updatedAt:Z()})}),await n.commit()}function Dn(e,t,r){return Q.subscribe(e,t,r)}function Mn(e){return Q.getBlocks(e)}function Sn(e){return Q.isInitialized(e)}async function In(e,t,r){const n=Q.getBlocks(t),a=[...n,r].sort((l,c)=>(l.order||0)-(c.order||0));Q.setCache(t,a);const o=_.timeblocks(e,t),i=r.id||crypto.randomUUID();return P(async()=>{await Vt(z(v,o,i),{...r,updatedAt:Z()})},{onFinalFailure:()=>{Q.setCache(t,n),j.error("„Çø„Ç§„É†„Éñ„É≠„ÉÉ„ÇØ„ÅÆ‰ΩúÊàê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function En(e,t,r,n){const a=Q.getBlocks(t),o=a.map(l=>l.id===r?{...l,...n}:l).sort((l,c)=>(l.order||0)-(c.order||0));Q.setCache(t,o);const i=_.timeblocks(e,t);return P(async()=>{await Vt(z(v,i,r),{...n,updatedAt:Z()},{merge:!0})},{onFinalFailure:()=>{Q.setCache(t,a),j.error("„Çø„Ç§„É†„Éñ„É≠„ÉÉ„ÇØ„ÅÆÊõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}async function An(e,t,r){const n=Q.getBlocks(t),a=n.filter(i=>i.id!==r);Q.setCache(t,a);const o=_.timeblocks(e,t);return P(async()=>{await Me(z(v,o,r))},{onFinalFailure:()=>{Q.setCache(t,n),j.error("„Çø„Ç§„É†„Éñ„É≠„ÉÉ„ÇØ„ÅÆÂâäÈô§„Å´Â§±Êïó„Åó„Åæ„Åó„Åü")}})}const Ln=()=>me($.getState().language).t;function gr(e){var r;const t=(r=D.currentUser)==null?void 0:r.uid;if(!t||!e)throw new Error("Authentication and Workspace are required.");return t}function Fn(e,t){var n;const r=(n=D.currentUser)==null?void 0:n.uid;return r?Dn(r,e,t):(t([]),()=>{})}function mr(e){return Mn(e)}function Rn(e){return Sn(e)}async function xi(e,t){const r=gr(e),n=Ln();try{const a=t.id||crypto.randomUUID(),o=mr(e),i=t.order!==void 0?t.order:Math.max(...o.map(h=>h.order||0),-1)+1,l={id:a,name:t.name||"",start:t.start||"09:00",end:t.end||"10:00",color:t.color||"#cccccc",order:i},c=ws.safeParse(l);if(!c.success){const h=c.error.issues.map(u=>u.message).join(", ");return console.error("[TimeBlocks] Validation error:",c.error),j.error(`${n("validation.validation_error")}: ${h}`),!1}return o.some(h=>h.id===a)?await En(r,e,a,l):await In(r,e,l),!0}catch(a){return console.error("[TimeBlocks] Save error:",a),!1}}async function Pn(e,t){const r=gr(e);try{return await An(r,e,t),!0}catch(n){return console.error("[TimeBlocks] Delete error:",n),!1}}const Ie=()=>{const{workspaceId:e,userId:t,loading:r}=ne(),n=w.useCallback(c=>!e||!t?()=>{}:vn(e,d=>c(d),d=>console.error("Task subscription error:",d)),[e,t]),a=e?_n(e):!1,{data:o,isPending:i}=ve(["tasks",t||void 0,e||void 0],n,e&&a?Nn(e):void 0);return{tasks:o||[],loading:r||!!e&&!a&&i}};function _t(){const{tasks:e}=Ie(),{showCompleted:t,query:r}=ee();return w.useMemo(()=>{var i,l;const a={inbox:0,today:0,upcoming:0,important:0,all:0,search:0,projects:{}},o=r?r.toLowerCase().trim():"";for(const c of e){if(o){const h=(i=c.title)==null?void 0:i.toLowerCase().includes(o),u=(l=c.description)==null?void 0:l.toLowerCase().includes(o);(h||u)&&a.search++}c.status==="archived"||c.status==="completed"||(a.all++,c.projectId&&(a.projects[c.projectId]=(a.projects[c.projectId]||0)+1),(!c.projectId||c.projectId==="unassigned"||c.projectId==="none")&&a.inbox++,c.isImportant&&a.important++,c.dueDate&&(ra(c.dueDate)?a.today++:sa(c.dueDate)&&a.upcoming++))}return a},[e,r])}const Bn=e=>e in T.SIDEBAR_DENSITY,Ye=e=>Bn(e)?T.SIDEBAR_DENSITY[e]:T.SIDEBAR_DENSITY.normal,On=[{id:"inbox",i18nKey:"inbox",Icon:sr,color:"text-blue-500",droppable:!0},{id:"today",i18nKey:"today",Icon:qe,color:"text-green-500"},{id:"upcoming",i18nKey:"upcoming",Icon:tr,color:"text-purple-500"},{id:"important",i18nKey:"important",Icon:yt,color:"text-amber-400"},{id:"custom",i18nKey:"all_tasks",Icon:ps,color:"text-gray-500"}],$n=()=>{const{language:e,density:t}=$(),{t:r}=me(e),n=_t(),{setView:a,currentView:o}=te(),i=o==="dashboard";return s.jsxs("ul",{className:"space-y-0.5",children:[s.jsx("li",{children:s.jsxs("button",{onClick:()=>a("dashboard"),className:C("w-full flex items-center px-3 text-sm rounded-md transition-colors text-left gap-3 group/item",Ye(t),i?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[s.jsx(Qt,{className:"w-4 h-4 text-indigo-500"}),s.jsx("span",{className:"flex-1",children:r("dashboard")})]})}),On.map(l=>s.jsx(Wn,{item:l,label:r(l.i18nKey),count:n[l.id]||0},l.id))]})},Wn=({item:e,label:t,count:r})=>{const{filterType:n,setFilter:a}=ee(),{setView:o}=te(),{density:i}=$(),c=te(y=>y.currentView)==="tasks"&&n===e.id,d=e.Icon,{setNodeRef:h,isOver:u}=Fe({id:`filter:${e.id}`,disabled:!e.droppable,data:{type:e.id==="inbox"?"inbox":"filter",value:e.id}}),p=()=>{e.id==="search"?(o("tasks"),a("search")):(o("tasks"),a(e.id))};return s.jsx("li",{ref:h,children:s.jsxs("button",{onClick:p,className:C("w-full flex items-center px-3 text-sm rounded-md transition-colors text-left gap-3 group/item",Ye(i),c?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",u&&e.droppable&&"bg-blue-50 dark:bg-blue-900/30"),children:[s.jsx(d,{className:C("w-4 h-4",e.color)}),s.jsx("span",{className:"flex-1",children:t}),e.id!=="search"&&r>0&&s.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:r})]})})},zn=()=>{const{workspaceId:e,userId:t,loading:r}=ne(),n=w.useCallback(c=>!e||!t?()=>{}:Na(e,c),[e,t]),a=e?va(e):!1,{data:o,isPending:i}=ve(["filters",t||void 0,e||void 0],n,e&&a?ja(e):void 0);return{filters:o,loading:r||!!e&&i}};function pr(e){const t={keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(!e)return t;const r=/(?:-?[a-zA-Z]+:(?:"[^"]*"|[^\s]+))|(?:"[^"]*")|(?:-?[^\s]+)/g,n=e.match(r);if(!n)return t;const a=[];for(let o=0;o<n.length;o++){const i=n[o];if(i==="OR"){const l=a.length-1,c=a[l],d=n[o+1],h=c&&(typeof c=="string"?!c.includes(":"):!0),u=d&&!d.includes(":")&&d!=="OR";if(h&&u){const p=Array.isArray(c)?c:[c];p.push(d.toLowerCase().replace(/^"|"$/g,"")),a[l]=p,o++;continue}}a.push(i)}return a.forEach(o=>{if(Array.isArray(o)){t.keywords.push(o);return}const i=o;if(i.startsWith('"')&&i.endsWith('"')){const l=i.substring(1,i.length-1);l&&t.keywords.push(l.toLowerCase());return}if(i.startsWith("-")&&!i.includes(":")){const l=i.substring(1);l&&t.excludeKeywords.push(l.toLowerCase());return}if(i.includes(":")){let l=!1,c=i;c.startsWith("-")&&(l=!0,c=c.substring(1));const d=c.indexOf(":"),h=c.substring(0,d).toLowerCase();let u=c.substring(d+1);switch(u.startsWith('"')&&u.endsWith('"')&&(u=u.substring(1,u.length-1)),u.toLowerCase(),h){case"project":case"p":l?u.split(",").forEach(x=>t.excludeProjects.push(x)):u.split(",").forEach(x=>t.projects.push(x));break;case"label":case"l":l?u.split(",").forEach(x=>t.excludeLabels.push(x)):u.split(",").forEach(x=>t.labels.push(x));break;case"timeblock":case"tb":l?u.split(",").forEach(x=>t.excludeTimeBlocks.push(x)):u.split(",").forEach(x=>t.timeBlocks.push(x));break;case"duration":case"d":u.split(",").forEach(x=>{const g=parseInt(x,10);isNaN(g)||t.durations.push(g)});break;case"date":case"due":const p=["today","tomorrow","week","upcoming","overdue","next-week"];u.split(",").forEach(x=>{const g=x.toLowerCase();p.includes(g)&&t.dates.push(g)});break;case"status":case"is":const y=["completed","active","todo"];u.split(",").forEach(x=>{const g=x.toLowerCase();y.includes(g)&&(l?t.excludeStatus.push(g):t.status.push(g)),g==="important"&&(t.isImportant=!l),g==="unimportant"&&(t.isImportant=l)});break;default:l?t.excludeKeywords.push(c.toLowerCase()):t.keywords.push(c.toLowerCase());break}}else i!=="OR"&&t.keywords.push(i.toLowerCase())}),t}function bi(e){var r,n,a,o,i,l,c,d,h,u,p,y;const t=[];return(r=e.keywords)!=null&&r.length&&t.push(...e.keywords.map(x=>Array.isArray(x)?x.join(" OR "):x.includes(" ")?`"${x}"`:x)),(n=e.excludeKeywords)!=null&&n.length&&t.push(...e.excludeKeywords.map(x=>`-${x}`)),(a=e.projects)!=null&&a.length&&t.push(`project:${e.projects.join(",")}`),(o=e.excludeProjects)!=null&&o.length&&t.push(`-project:${e.excludeProjects.join(",")}`),(i=e.labels)!=null&&i.length&&t.push(`label:${e.labels.join(",")}`),(l=e.excludeLabels)!=null&&l.length&&t.push(`-label:${e.excludeLabels.join(",")}`),(c=e.timeBlocks)!=null&&c.length&&t.push(`timeblock:${e.timeBlocks.join(",")}`),(d=e.excludeTimeBlocks)!=null&&d.length&&t.push(`-timeblock:${e.excludeTimeBlocks.join(",")}`),(h=e.durations)!=null&&h.length&&t.push(`duration:${e.durations.join(",")}`),(u=e.dates)!=null&&u.length&&t.push(`date:${e.dates.join(",")}`),(p=e.status)!=null&&p.length&&t.push(`status:${e.status.join(",")}`),(y=e.excludeStatus)!=null&&y.length&&t.push(`-status:${e.excludeStatus.join(",")}`),e.isImportant===!0&&t.push("is:important"),e.isImportant===!1&&t.push("is:unimportant"),t.join(" ")}function qn(e,t="createdAt_desc"){if(!Array.isArray(e))return[];const[r,n]=t.split("_"),o=n==="desc"?-1:1;return[...e].sort((i,l)=>{var h,u,p,y,x,g;let c,d;switch(r){case"dueDate":c=(h=W(i.dueDate))==null?void 0:h.getTime(),d=(u=W(l.dueDate))==null?void 0:u.getTime();break;case"createdAt":c=(p=W(i.createdAt))==null?void 0:p.getTime(),d=(y=W(l.createdAt))==null?void 0:y.getTime();break;case"title":c=i.title.toLowerCase(),d=l.title.toLowerCase();break;case"duration":c=i.duration||0,d=l.duration||0;break;case"important":c=i.isImportant?1:0,d=l.isImportant?1:0;break;case"manual":c=i.order!==void 0?i.order:Number.MAX_SAFE_INTEGER,d=l.order!==void 0?l.order:Number.MAX_SAFE_INTEGER;break;default:c=(x=W(i.createdAt))==null?void 0:x.getTime(),d=(g=W(l.createdAt))==null?void 0:g.getTime()}return Vn(c,d)*o})}function Vn(e,t){return e===t?0:e==null?1:t==null?-1:e>t?1:e<t?-1:0}function Un(){const e=new Date;e.setHours(0,0,0,0);const t=new Date(e);t.setDate(t.getDate()+1);const r=aa(e),n=new Date(r);n.setDate(n.getDate()+7);const a=new Date(t);return a.setDate(a.getDate()+7),{now:e,tomorrow:t,weekStart:r,weekEnd:n,upcomingEnd:a}}function Kn(e,t,r,n){const{now:a,tomorrow:o,weekStart:i,weekEnd:l,upcomingEnd:c}=r;switch(t){case"today":return At(e,a);case"tomorrow":return At(e,o);case"week":return e>=i&&e<l;case"upcoming":return e>=o&&e<c;case"overdue":return e<a&&n!=="completed";default:return!1}}function Ft(e,t){if(!t)return e;const r=typeof t=="string"?pr(t):t,n=r.dates.length>0?Un():null;return e.filter(a=>{if(r.status.length>0){const i=a.status||"todo";if(!r.status.some(c=>c==="active"&&i==="todo"?!0:c===i))return!1}if(r.excludeStatus.length>0){const i=a.status||"todo";if(r.excludeStatus.some(c=>c==="active"&&i==="todo"?!0:c===i))return!1}if(r.isImportant===!0&&!a.isImportant||r.isImportant===!1&&a.isImportant||r.projects.length>0&&!r.projects.some(l=>l==="unassigned"?!a.projectId||a.projectId==="unassigned"||a.projectId==="none":a.projectId===l)||r.excludeProjects.length>0&&r.excludeProjects.some(i=>a.projectId===i)||r.labels.length>0&&(!a.labelIds||!r.labels.some(i=>{var l;return(l=a.labelIds)==null?void 0:l.includes(i)}))||r.excludeLabels.length>0&&a.labelIds&&r.excludeLabels.some(i=>{var l;return(l=a.labelIds)==null?void 0:l.includes(i)})||r.timeBlocks.length>0&&!r.timeBlocks.some(l=>l==="unassigned"?!a.timeBlockId:a.timeBlockId===l)||r.excludeTimeBlocks.length>0&&r.excludeTimeBlocks.some(i=>a.timeBlockId===i))return!1;if(r.durations.length>0){const i=a.duration||0;if(!r.durations.includes(i))return!1}if(n&&r.dates.length>0){const i=W(a.dueDate);if(!i||!r.dates.some(c=>Kn(i,c,n,a.status||"todo")))return!1}const o=`${a.title} ${a.description||""}`.toLowerCase();return!(r.keywords.length>0&&!r.keywords.every(l=>Array.isArray(l)?l.some(c=>o.includes(c)):o.includes(l))||r.excludeKeywords.length>0&&r.excludeKeywords.some(l=>o.includes(l)))})}function Hn(e){const{keyword:t,showCompleted:r,projectId:n,labelId:a,timeBlockId:o,duration:i,filterType:l}=e,c=t?pr(t):{keywords:[],excludeKeywords:[],projects:[],excludeProjects:[],labels:[],excludeLabels:[],timeBlocks:[],excludeTimeBlocks:[],durations:[],dates:[],status:[],excludeStatus:[],isImportant:void 0};if(n&&c.projects.push(n),a&&c.labels.push(a),o&&c.timeBlocks.push(o),i){const d=typeof i=="number"?i:parseInt(i,10);isNaN(d)||c.durations.push(d)}return l==="today"&&c.dates.push("today"),l==="upcoming"&&c.dates.push("upcoming"),l==="important"&&(c.isImportant=!0),r||c.status.length===0&&c.status.push("active"),c}function fr(e,t){const{savedFilter:r,sortCriteria:n}=t,a=Hn(t);let o=Ft(e,a);return r&&r.query&&(o=Ft(o,r.query)),qn(o,n||"createdAt_desc")}const Xe=({x:e,y:t,onClose:r,children:n})=>{const a=w.useRef(null);return w.useEffect(()=>{const o=l=>{a.current&&!a.current.contains(l.target)&&r()},i=()=>r();return document.addEventListener("mousedown",o),window.addEventListener("scroll",i,!0),()=>{document.removeEventListener("mousedown",o),window.removeEventListener("scroll",i,!0)}},[r]),Mr.createPortal(s.jsx("div",{ref:a,className:"fixed z-50 min-w-[160px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 py-1 animate-in fade-in zoom-in-95 duration-100",style:{top:t,left:e},onContextMenu:o=>o.preventDefault(),children:n}),document.body)},Gn=({label:e,icon:t,children:r})=>{const[n,a]=S.useState(!1);return s.jsxs("div",{className:"relative w-full",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[s.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm flex items-center justify-between gap-2 transition-colors text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[t&&s.jsx("span",{className:"w-4 h-4 text-gray-400",children:t}),e]}),s.jsx(Ae,{className:"w-3 h-3 text-gray-400"})]}),n&&s.jsx("div",{className:"absolute left-full top-0 ml-1 min-w-[140px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 py-1 animate-in fade-in zoom-in-95 duration-100 z-50",children:r})]})},H=({onClick:e,children:t,className:r,icon:n,variant:a="default"})=>s.jsxs("button",{onClick:o=>{o.stopPropagation(),e()},className:C("w-full text-left px-3 py-2 text-sm flex items-center gap-2 transition-colors",a==="danger"?"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",r),children:[n&&s.jsx("span",{className:C("w-4 h-4",a==="danger"?"text-red-500":"text-gray-400"),children:n}),t]}),ye=({icon:e,label:t,count:r,isActive:n,isOver:a,onClick:o,onContextMenu:i,showZero:l=!1})=>{const{density:c}=$();return s.jsxs("button",{type:"button",onClick:o,onContextMenu:i,className:C("w-full text-left group flex items-center justify-between px-2 ml-1 rounded-md transition-colors select-none outline-none focus:ring-2 focus:ring-blue-500/50",Ye(c),n?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",a&&"bg-blue-50 dark:bg-blue-900/30"),children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e&&s.jsx("span",{className:"flex-shrink-0 w-5 flex justify-center text-sm",children:e}),s.jsx("span",{className:"text-sm truncate",children:t})]}),r!==void 0&&(r>0||l&&r===0)&&s.jsx("span",{className:C("text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700/50",n?"text-blue-700 dark:text-blue-300 bg-white":"text-gray-400"),children:r})]})},Yn=()=>{const{filters:e,loading:t}=zn(),{tasks:r}=Ie(),{workspaceId:n}=ne();return t?null:s.jsx("div",{className:"space-y-0.5 py-1",children:e.map(a=>s.jsx(Xn,{filter:a,tasks:r,workspaceId:n},a.id))})},Xn=({filter:e,tasks:t,workspaceId:r})=>{const{t:n}=I(),{filterType:a,targetId:o,setFilter:i}=ee(),{openModal:l}=ae(),c=a==="custom"&&o===e.id,[d,h]=w.useState(null),u=S.useMemo(()=>{try{return fr(t,{savedFilter:e,showCompleted:!1}).length}catch(g){return console.warn("[CustomFilterItem] Count error:",g),0}},[t,e]),p=()=>{h(null),l("filter-edit",e)},y=()=>{h(null),l("confirmation",{title:n("delete"),message:`${n("filter")}: ${e.name}
${n("msg.confirm_delete")}`,confirmLabel:n("delete"),variant:"danger",onConfirm:async()=>{e.id&&r&&await _a(r,e.id)}})},x=g=>{g.preventDefault(),g.stopPropagation(),h({x:g.clientX,y:g.clientY})};return s.jsxs(s.Fragment,{children:[s.jsx("div",{onContextMenu:x,children:s.jsx(ye,{label:e.name,icon:s.jsx(Ee,{size:16}),count:u,isActive:c,onClick:()=>i("custom",e.id)})}),d&&s.jsxs(Xe,{x:d.x,y:d.y,onClose:()=>h(null),children:[s.jsx(H,{onClick:p,icon:s.jsx(Ke,{size:16}),children:n("edit")}),s.jsx(H,{onClick:y,variant:"danger",icon:s.jsx(Ue,{size:16}),children:n("delete")})]})]})},Jn=S.memo(({mins:e,count:t})=>{const{t:r}=I(),{filterType:n,targetId:a,setFilter:o}=ee(),{setView:i}=te(),l=n==="duration"&&a===e.toString(),{setNodeRef:c,isOver:d}=Fe({id:`duration:${e}`,data:{type:"duration",value:e.toString()}});return s.jsx("div",{ref:c,children:s.jsx(ye,{label:r("sidebar.duration_format",{min:e}),icon:s.jsx(rr,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),count:t,isActive:l,isOver:d,onClick:()=>{i("tasks"),o("duration",e.toString())}})})}),Qn=()=>{const{tasks:e}=Ie(),{customDurations:t}=$(),r=(t==null?void 0:t.length)>0?t:T.SIDEBAR.DURATIONS,n=w.useMemo(()=>{const a=new Map;return e.forEach(o=>{if(o.status!=="completed"&&o.duration){const i=Number(o.duration);isNaN(i)||a.set(i,(a.get(i)||0)+1)}}),a},[e]);return s.jsx("div",{className:"space-y-0.5 py-1",children:r.map(a=>s.jsx(Jn,{mins:a,count:n.get(a)||0},a))})},Ct=()=>{const{workspaceId:e,userId:t,loading:r}=ne(),n=Pt(),a=w.useCallback(u=>!e||!t?()=>{}:Ja(e,u),[e,t]),i=(e?Ya(e):!1)&&e?Ga(e):void 0,{data:l,isPending:c}=ve(["projects",t||void 0,e||void 0],a,i);return{projects:l||[],loading:r||!!e&&c,setProjectsOverride:u=>{e&&(n.setQueryData(["projects",e],u),Xa(u,e))}}},Zn=({id:e,children:t})=>{const{attributes:r,listeners:n,setNodeRef:a,transform:o,transition:i,isDragging:l}=ut({id:e}),c={transform:ht.Transform.toString(o),transition:i,opacity:l?.5:1};return s.jsx("div",{ref:a,style:c,...r,...n,children:t})},xr=()=>s.jsxs("div",{className:"space-y-2 p-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),eo=S.memo(({project:e})=>{const{t}=I(),{filterType:r,targetId:n,setFilter:a}=ee(),{density:o}=$(),{openModal:i}=ae(),{setView:l}=te(),c=r==="project"&&n===e.id,[d,h]=w.useState(null),{setNodeRef:u,isOver:p}=Fe({id:`project:${e.id}`,data:{type:"project",value:e.id}}),y=m=>{m==null||m.stopPropagation(),h(null),i("project-edit",e)},x=()=>{h(null),i("confirmation",{title:t("delete"),message:`${t("project")}: ${e.name}
${t("msg.confirm_delete")}`,confirmLabel:t("delete"),variant:"danger",onConfirm:async()=>{e.id&&await Qa(e.id)}})},g=m=>{m.preventDefault(),m.stopPropagation(),h({x:m.clientX,y:m.clientY})},k=()=>{a("project",e.id),l("tasks")},N=_t().projects[e.id]||0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{ref:u,onClick:k,onContextMenu:g,className:C("group flex items-center justify-between px-2 rounded-md cursor-pointer transition-colors select-none",Ye(o),c?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",p&&"bg-blue-50 dark:bg-blue-900/30"),role:"button",tabIndex:0,"aria-selected":c,"aria-label":`${t("project")}: ${e.name}${c?` (${t("active")})`:""}`,children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx("span",{className:C("text-xs shrink-0 transition-colors",c?"text-blue-500":"text-gray-400 group-hover:text-gray-500"),children:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),s.jsx("span",{className:"text-sm truncate",children:e.name})]}),N>0&&s.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:N})]}),d&&s.jsxs(Xe,{x:d.x,y:d.y,onClose:()=>h(null),children:[s.jsx(H,{onClick:y,icon:s.jsx(Ke,{size:16}),children:t("edit")}),s.jsx(H,{onClick:x,variant:"danger",icon:s.jsx(Ue,{size:16}),children:t("delete")})]})]})}),to=()=>{const{t:e}=I(),{projects:t,loading:r}=Ct();return r?s.jsx(xr,{}):t.length===0?s.jsx("div",{className:"p-4 text-xs text-gray-400",children:e("sidebar.no_projects")}):s.jsx(gt,{items:t.map(n=>`${T.DND.PREFIX_PROJECT}${n.id}`),strategy:mt,children:s.jsx("div",{className:"space-y-0.5 p-2",children:t.map(n=>s.jsx(Zn,{id:`${T.DND.PREFIX_PROJECT}${n.id}`,children:s.jsx(eo,{project:n})},n.id))})})},ro=({title:e,children:t,defaultExpanded:r=!0,action:n,dragHandleProps:a})=>{const{t:o}=I(),[i,l]=w.useState(()=>typeof window<"u"&&window.innerWidth<768?!1:r),d=`section-${encodeURIComponent(e.replace(/\s+/g,"-").toLowerCase())}`;return s.jsxs("div",{className:"mb-2 group/section",children:[s.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[s.jsxs("button",{...a,onClick:()=>l(!i),"aria-expanded":i,"aria-controls":d,className:"flex items-center flex-1 text-xs font-semibold text-gray-500 uppercase hover:text-gray-700 dark:hover:text-gray-300 transition-colors text-left cursor-grab active:cursor-grabbing touch-none select-none",title:o("sidebar.reorder_section"),children:[s.jsx("svg",{className:C("w-3 h-3 mr-1 transition-transform",i?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),e]}),n&&s.jsx("div",{className:"opacity-100 transition-opacity",onClick:h=>h.stopPropagation(),children:n})]}),i&&s.jsx("div",{className:"mt-1",id:d,children:t})]})},so=()=>{const{t:e}=I(),{currentView:t,setView:r}=te();return s.jsxs("div",{className:"space-y-0.5 py-1",children:[s.jsx(ye,{label:e("sidebar.target_wizard"),icon:s.jsx(Zt,{}),isActive:t==="wizard",onClick:()=>r("wizard")}),s.jsx(ye,{label:e("sidebar.target_dashboard"),icon:s.jsx(Qt,{}),isActive:t==="target-dashboard",onClick:()=>r("target-dashboard")}),s.jsx(ye,{label:e("sidebar.framework_wiki"),icon:s.jsx(er,{}),isActive:t==="wiki",onClick:()=>r("wiki")})]})},Je=()=>{const{workspaceId:e,userId:t,loading:r}=ne(),n=w.useCallback(c=>!e||!t?()=>{}:Fn(e,c),[e,t]),a=e?Rn(e):!1,{data:o,isPending:i}=ve(["timeblocks",t||void 0,e||void 0],n,e&&a?mr(e):void 0);return{timeBlocks:o||[],loading:r||!!e&&i}},ao=()=>{const{timeBlocks:e,loading:t}=Je(),{tasks:r}=Ie(),{workspaceId:n}=ne(),a=S.useMemo(()=>{const o=new Map;let i=0;return r.forEach(l=>{l.status!=="completed"&&(!l.timeBlockId||l.timeBlockId==="unassigned"||l.timeBlockId==="null"?i++:o.set(l.timeBlockId,(o.get(l.timeBlockId)||0)+1))}),{map:o,unassignedCount:i}},[r]);return t?s.jsx(xr,{}):s.jsxs("div",{className:"space-y-0.5 py-1",children:[e.map(o=>s.jsx(no,{block:o,count:a.map.get(o.id||"")||0,workspaceId:n},o.id)),s.jsx(oo,{count:a.unassignedCount})]})},no=({block:e,count:t,workspaceId:r})=>{const{t:n}=I(),{filterType:a,targetId:o,setFilter:i}=ee(),{openModal:l}=ae(),c=a==="timeblock"&&o===e.id,{setView:d}=te(),[h,u]=w.useState(null),{setNodeRef:p,isOver:y}=Fe({id:`timeblock:${e.id}`,data:{type:"timeblock",value:e.id}}),x=()=>{u(null),l("timeblock-edit",e)},g=()=>{u(null),l("confirmation",{title:n("delete"),message:`${n("timeblock")}: ${e.start} - ${e.end}
${n("msg.confirm_delete")}`,confirmLabel:n("delete"),variant:"danger",onConfirm:async()=>{e.id&&r&&await Pn(r,e.id)}})},k=m=>{m.preventDefault(),m.stopPropagation(),u({x:m.clientX,y:m.clientY})},N=()=>{i("timeblock",e.id||""),d("tasks")};return s.jsxs("div",{ref:p,onContextMenu:k,children:[s.jsx(ye,{label:`${e.start} - ${e.end}`,icon:s.jsx("span",{className:"w-2 rounded-full aspect-square",style:{backgroundColor:e.color}}),count:t,isActive:c,isOver:y,onClick:N}),h&&s.jsxs(Xe,{x:h.x,y:h.y,onClose:()=>u(null),children:[s.jsx(H,{onClick:x,icon:s.jsx(Ke,{size:16}),children:n("edit")}),s.jsx(H,{onClick:g,variant:"danger",icon:s.jsx(Ue,{size:16}),children:n("delete")})]})]})},oo=({count:e})=>{const{t}=I(),{filterType:r,targetId:n,setFilter:a}=ee(),{setView:o}=te(),i=r==="timeblock"&&n==="unassigned",{setNodeRef:l,isOver:c}=Fe({id:"timeblock:unassigned",data:{type:"timeblock",value:"unassigned"}}),d=()=>{a("timeblock","unassigned"),o("tasks")};return s.jsx("div",{ref:l,children:s.jsx(ye,{label:t("sidebar.unassigned"),icon:s.jsx("span",{className:"w-2 rounded-full aspect-square bg-gray-400"}),count:e,isActive:i,isOver:c,onClick:d})})},io=({id:e,section:t})=>{const{attributes:r,listeners:n,setNodeRef:a,transform:o,transition:i,isDragging:l}=ut({id:e}),c={transform:ht.Transform.toString(o),transition:i,opacity:l?.5:1};return s.jsx("div",{ref:a,style:c,...r,children:s.jsx(ro,{title:t.title,defaultExpanded:t.defaultExpanded,action:t.action,dragHandleProps:n,children:t.component})})},rt=["general","projects","targets","timeblocks","durations","filters"],lo=()=>{const{t:e}=I(),{openModal:t}=ae(),[r,n]=S.useState(()=>{const l=localStorage.getItem(T.STORAGE_KEYS.SECTION_ORDER);let c=rt;if(l)try{const d=JSON.parse(l);if(Array.isArray(d)&&d.every(h=>typeof h=="string")){const h=[...d];rt.forEach(u=>{h.includes(u)||(u==="general"?h.unshift(u):h.push(u))}),c=h.filter(u=>rt.includes(u))}}catch{}return c});w.useEffect(()=>{localStorage.setItem(T.STORAGE_KEYS.SECTION_ORDER,JSON.stringify(r))},[r]);const a=Bt(We(Ot,{activationConstraint:{distance:8}}),We(Ar,{coordinateGetter:Er})),o=l=>{const{active:c,over:d}=l;d&&c.id!==d.id&&n(h=>{const u=h.indexOf(c.id),p=h.indexOf(d.id);return pt(h,u,p)})},i=S.useMemo(()=>({general:{id:"general",title:e("general"),component:s.jsx(s.Fragment,{children:s.jsx($n,{})}),defaultExpanded:!0},projects:{id:"projects",title:e("projects"),component:s.jsx(to,{}),defaultExpanded:!0,action:s.jsx("button",{onClick:()=>t("project-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},targets:{id:"targets",title:e("targets"),component:s.jsx(so,{}),defaultExpanded:!1,action:s.jsx("button",{onClick:()=>t("wiki-framework"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},timeblocks:{id:"timeblocks",title:e("timeblocks"),component:s.jsx(ao,{}),defaultExpanded:!1,action:s.jsx("button",{onClick:()=>t("timeblock-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})},durations:{id:"durations",title:e("durations"),component:s.jsx(Qn,{}),defaultExpanded:!1},filters:{id:"filters",title:e("filters"),component:s.jsx(Yn,{}),defaultExpanded:!1,action:s.jsx("button",{onClick:()=>t("filter-edit"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:e("add"),"aria-label":e("add"),children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})}}),[e,t]);return s.jsx($t,{sensors:a,collisionDetection:Wt,onDragEnd:o,children:s.jsx(gt,{items:r,strategy:mt,children:s.jsx("div",{className:"flex flex-col gap-4",children:r.map(l=>{const c=i[l];return c?s.jsx(io,{id:c.id,section:c},c.id):null})})})})},br=we(e=>({onTasksReorder:null,setTasksReorderHandler:t=>e({onTasksReorder:t})})),ie=w.forwardRef(({className:e,variant:t="primary",size:r="md",isLoading:n,leftIcon:a,rightIcon:o,children:i,disabled:l,...c},d)=>{const h={primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg shadow-blue-500/30 border border-transparent",secondary:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 border border-transparent",danger:"bg-red-500 hover:bg-red-600 text-white shadow-md shadow-red-500/30 border border-transparent",ghost:"bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",outline:"bg-transparent border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800",premium:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg shadow-blue-500/40 border border-transparent"},u={sm:"text-xs px-3 py-1.5 rounded-lg gap-1.5",md:"text-sm px-4 py-2 rounded-lg gap-2",lg:"text-base px-6 py-3 rounded-xl gap-2.5",icon:"p-2 rounded-full aspect-square flex items-center justify-center"};return s.jsxs("button",{ref:d,className:C("flex items-center justify-center font-bold transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",h[t],u[r],e),disabled:l||n,...c,children:[n&&s.jsx(fs,{className:"-ml-1 text-currentColor",size:16}),!n&&a,i,!n&&o]})});ie.displayName="Button";const yr=w.forwardRef(({className:e,label:t,error:r,containerClassName:n,options:a,children:o,id:i,...l},c)=>s.jsxs("div",{className:C("flex flex-col gap-1.5",n),children:[t&&s.jsx("label",{htmlFor:i,className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t}),s.jsxs("div",{className:"relative group",children:[s.jsx("select",{ref:c,id:i,className:C("w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border rounded-xl pl-4 pr-10 py-2.5 outline-none transition-all appearance-none cursor-pointer placeholder:text-gray-300 dark:placeholder:text-gray-600","focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",r?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 text-gray-500 hover:border-gray-300 dark:hover:border-gray-600",e),"aria-invalid":!!r,"aria-describedby":r&&i?`${i}-error`:void 0,...l,children:o||(a==null?void 0:a.map(d=>s.jsx("option",{value:d.value,children:d.label},d.value)))}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors",children:s.jsx(Jt,{size:16})})]}),r&&s.jsx("p",{id:i?`${i}-error`:void 0,className:"text-xs text-red-500 font-medium animate-fade-in-down",children:r})]}));yr.displayName="Select";const kr=S.memo(({task:e,style:t,className:r,dragHandleProps:n})=>{const{t:a}=I(),o=e.status==="completed",i=!!e.isImportant,{openModal:l}=ae(),{projects:c}=Ct(),{timeBlocks:d}=Je(),[h,u]=w.useState(null),p=async R=>{R.stopPropagation(),e.id&&await jn(e.id,e.status||"todo")},y=async R=>{R.stopPropagation(),e.id&&await lt(e.id,{isImportant:!i})},x=R=>{R.preventDefault(),R.stopPropagation(),u({x:R.clientX,y:R.clientY})},g=()=>{u(null),l("task-detail",e)},k=()=>{u(null),l("confirmation",{title:a("delete"),message:`${a("task")}: ${e.title}
${a("msg.confirm_delete")}`,confirmLabel:a("delete"),variant:"danger",onConfirm:async()=>{e.id&&await wn(e.id)}})},N=async R=>{if(u(null),!e.id)return;let O=null;const B=new Date;switch(B.setHours(0,0,0,0),R){case"today":O=new Date;break;case"tomorrow":O=new Date(B),O.setDate(B.getDate()+1);break;case"next_week":O=new Date(B),O.setDate(B.getDate()+7);break;case"no_date":O=null;break}await lt(e.id,{dueDate:O})},m=e.projectId?c.find(R=>R.id===e.projectId):null,f=e.timeBlockId?d.find(R=>R.id===e.timeBlockId):null,E=!!(e.recurrence&&e.recurrence.type!=="none"),F=!!e.dueDate;return s.jsxs(s.Fragment,{children:[s.jsxs("li",{style:t,onClick:()=>l("task-detail",e),onContextMenu:x,className:C("group flex items-center gap-3 p-[var(--task-p)] bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700/50 rounded-xl hover:shadow-sm hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-200 cursor-default hover-lift",r),children:[n&&s.jsx("div",{...n,className:"cursor-move text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 p-1 -ml-1 flex-shrink-0 touch-none",children:s.jsx(gs,{className:"w-4 h-4"})}),s.jsx("button",{onClick:p,className:C("w-5 h-5 rounded-full border flex items-center justify-center transition-colors shrink-0 cursor-pointer",o?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-blue-400 text-transparent"),"aria-label":o?"Mark as incomplete":"Mark as complete",children:s.jsx(Pe,{className:"w-3 h-3",strokeWidth:3})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[s.jsx("div",{className:C("text-sm text-gray-800 dark:text-gray-200 break-words",o&&"line-through text-gray-400 dark:text-gray-500"),children:e.title}),e.description&&s.jsx("div",{className:"text-xs text-gray-500 line-clamp-1 truncate",children:e.description})]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs shrink-0",children:[s.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 px-2 py-0.5 rounded-md bg-gray-50 dark:bg-gray-700/50 text-gray-600 dark:text-gray-300",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:(m==null?void 0:m.color)||"#ccc"}}),s.jsx("span",{className:"max-w-[100px] truncate",children:m?m.name:a("task_detail.project_none")})]}),s.jsx("div",{className:"hidden sm:flex items-center gap-1 text-gray-400 dark:text-gray-500 min-w-[80px]",children:f?s.jsxs(s.Fragment,{children:[s.jsx(rr,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"max-w-[120px] truncate",children:f.name||`${f.start} - ${f.end}`})]}):s.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest opacity-30",children:a("task_detail.time_block_unspecified")})}),s.jsx("div",{className:C("flex items-center gap-1 min-w-[70px]",E||F?o?"text-gray-400":na(e.dueDate||null):"text-gray-400 dark:text-gray-500 opacity-50"),children:E?s.jsxs(s.Fragment,{children:[s.jsx(ms,{className:"w-3.5 h-3.5"}),e.dueDate&&s.jsx("span",{className:"hidden sm:inline",children:Lt(e.dueDate)})]}):F?s.jsxs(s.Fragment,{children:[s.jsx(qe,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"hidden sm:inline",children:Lt(e.dueDate)})]}):s.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:a("no_date")})})]}),s.jsx("div",{className:C("flex items-center gap-1 transition-opacity shrink-0",i?"opacity-100":"opacity-0 group-hover:opacity-100 placeholder-opacity"),children:s.jsx("button",{onClick:y,className:C("p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",i?"text-yellow-500":"text-gray-400"),title:i?"ÈáçË¶ÅÂ∫¶„ÇíËß£Èô§":"ÈáçË¶Å„Å®„Åó„Å¶„Éû„Éº„ÇØ",children:s.jsx(yt,{className:"w-4 h-4",fill:i?"currentColor":"none"})})})]}),h&&s.jsxs(Xe,{x:h.x,y:h.y,onClose:()=>u(null),children:[s.jsxs(Gn,{label:a("date_change")||"Êó•‰ªòÂ§âÊõ¥",icon:s.jsx(qe,{}),children:[s.jsx(H,{onClick:()=>N("today"),children:a("today")}),s.jsx(H,{onClick:()=>N("tomorrow"),children:a("tomorrow")}),s.jsx(H,{onClick:()=>N("next_week"),children:a("next_week")||"Êù•ÈÄ±"}),s.jsx(H,{onClick:()=>N("no_date"),children:a("no_date")||"ÊúüÈôê„Å™„Åó"})]}),s.jsx(H,{onClick:g,icon:s.jsx(Ke,{}),children:a("edit")}),s.jsx(H,{onClick:k,variant:"danger",icon:s.jsx(Ue,{}),children:a("delete")})]})]})},(e,t)=>{const r=a=>a?a instanceof Date?a.getTime():typeof a.toDate=="function"?a.toDate().getTime():typeof a.getTime=="function"?a.getTime():null:null,n=(a,o)=>{const i=r(a),l=r(o);return i===l};return e.task.id===t.task.id&&e.task.status===t.task.status&&e.task.title===t.task.title&&e.task.description===t.task.description&&e.task.projectId===t.task.projectId&&e.task.timeBlockId===t.task.timeBlockId&&e.task.isImportant===t.task.isImportant&&e.task.recurrence===t.task.recurrence&&n(e.task.dueDate,t.task.dueDate)}),dt=({tasks:e,timeBlockId:t})=>{const{t:r}=I(),{timeBlocks:n}=Je(),a=e.reduce((u,p)=>{const y=p.duration,x=typeof y=="number"?y:Number(y);return u+(isNaN(x)?0:x)},0),o=u=>(u/60).toFixed(2)+"h",i=t?n.find(u=>u.id===t):null;if(i&&i.start&&i.end){const u=ia(i.start,i.end);if(u<=0)return null;const p=(u/60).toFixed(2),y=(a/60).toFixed(2),x=a/u*100,g=Math.min(x,100),k=u-a,N=k<0,m=(Math.abs(k)/60).toFixed(2),f=x>100;return s.jsxs("div",{className:"flex items-center gap-3 py-2 px-3 my-1 border border-gray-100 dark:border-gray-800 rounded-lg bg-gray-50/30 dark:bg-gray-800/20",children:[s.jsx("div",{className:"flex-shrink-0 w-20 truncate text-[10px] font-bold text-gray-400 uppercase tracking-tight",title:i.name,children:i.name}),s.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 dark:text-gray-400 tabular-nums min-w-[70px]",children:[s.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:[y,"h"]}),s.jsx("span",{className:"text-gray-400 mx-0.5",children:"/"}),s.jsxs("span",{children:[p,"h"]})]}),s.jsx("div",{className:"flex-1 relative h-2 bg-gray-200 dark:bg-gray-700/50 rounded-full overflow-hidden min-w-[60px]",children:s.jsx("div",{className:C("h-full rounded-full transition-all duration-500 ease-out",f?"bg-red-500":"bg-blue-500"),style:{width:f?"100%":`${g}%`}})}),s.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2 tabular-nums",children:[s.jsxs("span",{className:C("text-xs font-bold w-[4ch] text-right",f?"text-red-500":"text-blue-500"),children:[Math.round(x),"%"]}),s.jsxs("span",{className:C("text-[10px] hidden sm:inline",N?"text-red-400":"text-gray-400"),children:["(",N?"+":"-",m,"h)"]})]})]})}const l=e.length,c=l>0?a/l:0,d=r("task_stats.count_unit"),h=r("task_stats.avg_unit");return s.jsxs("div",{className:"glass-card flex items-center justify-evenly py-3 px-4 my-2",children:[s.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[s.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:r("task_stats.count_label")}),s.jsxs("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:[l,d&&s.jsx("span",{className:"text-xs font-normal ml-0.5 text-gray-400",children:d})]})]}),s.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),s.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[s.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:r("task_stats.total_label")}),s.jsx("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200 text-blue-600 dark:text-blue-400",children:o(a)})]}),s.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),s.jsxs("div",{className:"flex flex-row items-baseline gap-2",children:[s.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider font-bold",children:r("task_stats.avg_label")}),s.jsxs("span",{className:"font-medium text-sm",children:[o(c),s.jsx("span",{className:"text-xs ml-0.5",children:h})]})]})]})},co=({task:e,className:t})=>{const{attributes:r,listeners:n,setNodeRef:a,transform:o,transition:i,isDragging:l}=ut({id:`${T.DND.PREFIX_TASK}${e.id||""}`,data:{type:"task",task:e}}),c={transform:ht.Transform.toString(o),transition:i,zIndex:l?50:"auto",position:"relative"};return s.jsx("div",{ref:a,style:c,className:"touch-manipulation",children:s.jsx(kr,{task:e,className:C(t,l&&"opacity-80 shadow-lg border-blue-400 bg-blue-50/50"),dragHandleProps:{...r,...n}})})},wr=()=>{const{t:e}=I(),{tasks:t,loading:r}=Ie(),{filterType:n,targetId:a,query:o,showCompleted:i,sortCriteria:l,setShowCompleted:c,setSortCriteria:d}=ee(),{density:h}=$(),{openModal:u}=ae(),p=w.useMemo(()=>o&&o.trim().length>0?{keyword:o,showCompleted:i,projectId:null,labelId:null,timeBlockId:null,duration:null,filterType:"all_tasks",savedFilter:null,sortCriteria:l}:{keyword:o,showCompleted:i,projectId:n==="inbox"?"unassigned":n==="project"?a:null,labelId:n==="label"?a:null,timeBlockId:n==="timeblock"?a:null,duration:n==="duration"?a:null,filterType:n,savedFilter:null,sortCriteria:l},[n,a,o,i,l]),y=w.useMemo(()=>fr(t,p),[t,p]),x={compact:"space-y-1",normal:"space-y-2",comfortable:"space-y-3",spacious:"space-y-4"}[h],{setTasksReorderHandler:g}=br(),[k,N]=S.useState(null);S.useEffect(()=>{N(null)},[t,p]);const m=k||y,f=S.useCallback(async(B,Nr)=>{if(l!=="manual")return;const Ze=k||y,Dt=Ze.findIndex(Ne=>Ne.id===B),Mt=Ze.findIndex(Ne=>Ne.id===Nr);if(Dt!==-1&&Mt!==-1){const Ne=pt(Ze,Dt,Mt);N(Ne);const _r=Ne.map(et=>et.id).filter(Boolean);try{await kn(_r)}catch(et){console.error("Failed to reorder tasks",et),N(null)}}},[l,k,y]);S.useEffect(()=>(g(f),()=>g(null)),[f,g]);const E=m.length===0,F=!!(o&&o.trim().length>0);if(r&&!F&&t.length===0)return s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"text-gray-400 text-sm animate-pulse",children:e("task_list.loading")})});const O=l==="manual";return s.jsxs("div",{className:"flex flex-col h-full overflow-hidden relative",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-1 pb-24",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm pt-2 pb-4 mb-4 flex items-center gap-2",children:[s.jsx("div",{className:"flex-1",children:F&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(Ee,{className:"w-4 h-4"}),e("task_list.searching_results",{query:o||""})]})}),s.jsx("div",{className:"flex items-center gap-2 px-1",children:s.jsxs(yr,{name:"sortCriteria","aria-label":e("task_list.sort_options")||"Sort Options",value:l,onChange:B=>d(B.target.value),className:"font-medium text-xs py-1.5 h-auto",children:[s.jsx("option",{value:"manual",children:e("task_list.sort_manual")}),s.jsx("option",{value:"createdAt_desc",children:e("task_list.sort_created")}),s.jsx("option",{value:"dueDate_asc",children:e("task_list.sort_due")}),s.jsx("option",{value:"important_desc",children:e("task_list.sort_important")}),s.jsx("option",{value:"title_asc",children:e("task_list.sort_title")})]})}),s.jsx(ie,{variant:i?"primary":"outline",size:"sm",onClick:()=>c(!i),title:e(i?"task_list.hide_completed":"task_list.show_completed"),className:"shrink-0",children:e(i?"task_list.hide_completed":"task_list.show_completed")})]}),E?s.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center min-h-[60vh]",children:[s.jsxs("div",{className:"relative mb-8",children:[s.jsx("div",{className:"absolute -inset-4 bg-blue-500/10 dark:bg-blue-400/10 blur-3xl rounded-full"}),s.jsx("div",{className:"relative",children:s.jsx(Pe,{className:"w-24 h-24 text-blue-200 dark:text-blue-900/50",strokeWidth:1.5})})]}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:e("task_list.no_tasks_title")}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs mb-8",children:e(i?"task_list.no_tasks_desc_showing":"task_list.no_tasks_desc_hiding")}),s.jsx(ie,{variant:"premium",onClick:()=>u("task-detail",{title:""}),leftIcon:s.jsx(Yt,{className:"w-5 h-5"}),children:e("task_list.add_new_task")})]}):O?s.jsx(gt,{items:m.map(B=>`${T.DND.PREFIX_TASK}${B.id||""}`),strategy:mt,children:s.jsx("div",{className:C("transition-all duration-200",x),children:m.map(B=>s.jsx(co,{task:B},B.id))})}):s.jsx("ul",{className:C("transition-all duration-200",x),children:m.map(B=>s.jsx(kr,{task:B},B.id))})]}),s.jsx("div",{className:"flex-none mt-auto pt-2 border-t border-gray-100 dark:border-gray-800 bg-white/50 dark:bg-gray-900/50 backdrop-blur pb-[calc(0.5rem+env(safe-area-inset-bottom))]",children:s.jsx(dt,{tasks:m,timeBlockId:p.timeBlockId})})]})},uo=()=>{const{t:e}=I(),{tasks:t}=Ie(),{timeBlocks:r}=Je(),n=_t(),{density:a}=$();t.length,t.filter(i=>i.status==="completed").length;const o=[{id:"inbox",label:e("inbox"),count:n.inbox,icon:sr,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{id:"today",label:e("today"),count:n.today,icon:qe,color:"text-green-500",bg:"bg-green-50 dark:bg-green-900/20"},{id:"upcoming",label:e("upcoming"),count:n.upcoming,icon:tr,color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-900/20"},{id:"important",label:e("important"),count:n.important,icon:yt,color:"text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/20"}];return s.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar p-4 md:p-6 space-y-6",children:[s.jsxs("header",{className:"mb-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:e("dashboard")}),s.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:[e("general_dashboard.overall_stats")," & ",e("general_dashboard.time_block_usage")]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.map(i=>s.jsxs("div",{className:"p-4 rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-800 shadow-sm flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:i.label}),s.jsx("p",{className:"text-2xl font-black text-gray-800 dark:text-gray-100 tabular-nums",children:i.count})]}),s.jsx("div",{className:`p-3 rounded-lg ${i.bg}`,children:s.jsx(i.icon,{className:`w-6 h-6 ${i.color}`})})]},i.id))}),s.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[s.jsx("h2",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:e("general_dashboard.overall_stats")}),s.jsx(dt,{tasks:t.filter(i=>i.status!=="completed"),timeBlockId:null})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e("general_dashboard.time_block_usage")}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(i=>{const l=t.filter(c=>c.timeBlockId===i.id&&c.status!=="completed");return l.length===0?null:s.jsx("div",{className:"p-4 rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-800 shadow-sm",children:s.jsx(dt,{tasks:l,timeBlockId:i.id||null})},i.id)})})]})]})},Tt=w.forwardRef(({className:e,label:t,error:r,leftIcon:n,rightIcon:a,containerClassName:o,id:i,...l},c)=>{const d=w.useId(),h=i||d;return s.jsxs("div",{className:C("flex flex-col gap-1.5",o),children:[t&&s.jsx("label",{htmlFor:h,className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t}),s.jsxs("div",{className:"relative group",children:[n&&s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 z-10 pointer-events-none",children:n}),s.jsx("input",{ref:c,id:h,className:C("w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border rounded-xl px-4 py-2.5 outline-none transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600","focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",r?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 group-hover:border-gray-300 dark:group-hover:border-gray-600",n&&"pl-10",a&&"pr-10",e),"aria-invalid":!!r,"aria-describedby":r?`${h}-error`:void 0,...l}),a&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 z-10 pointer-events-none",children:a})]}),r&&s.jsx("p",{id:`${h}-error`,className:"text-xs text-red-500 font-medium animate-fade-in-down",children:r})]})});Tt.displayName="Input";const ho=()=>{const{t:e}=I(),{query:t,setSearchQuery:r,setFilter:n}=ee(),{setView:a}=te(),[o,i]=w.useState(t),l=w.useRef(null);w.useEffect(()=>{var u;(u=l.current)==null||u.focus()},[]),w.useEffect(()=>{t!==o&&i(t)},[t]),w.useEffect(()=>{const u=setTimeout(()=>{o!==t&&r(o)},150);return()=>{clearTimeout(u)}},[o,t,r]);const c=u=>{i(u.target.value)},d=()=>{var u;i(""),r(""),(u=l.current)==null||u.focus()},h=()=>{r(""),n("inbox"),a("tasks")};return s.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-50 via-white to-blue-50/30 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:[s.jsxs("div",{className:"relative p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full blur-3xl -z-0"}),s.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(ie,{variant:"ghost",size:"icon",onClick:h,className:"rounded-xl transition-all hover:scale-105 active:scale-95","aria-label":e("close"),children:s.jsx(ds,{className:"w-5 h-5 text-gray-500"})}),s.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("sidebar.search_placeholder")})]}),s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-2xl blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-300 pointer-events-none"}),s.jsx(Tt,{ref:l,id:"search-input",name:"search",type:"text",value:o,onChange:c,placeholder:e("sidebar.search_placeholder"),className:"py-4 text-base bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl border-gray-200/50 dark:border-gray-700/50 rounded-2xl shadow-lg shadow-gray-200/50 dark:shadow-black/20",leftIcon:s.jsx(Ee,{className:"w-5 h-5"}),rightIcon:o?s.jsx("button",{type:"button",onClick:d,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors pointer-events-auto","aria-label":e("clear"),children:s.jsx(cs,{className:"w-5 h-5"})}):void 0})]}),!o&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[s.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 font-mono",children:"/"}),s.jsx("span",{children:e("search_view.tips")})]}),o&&s.jsxs("p",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),e("search_view.results_for",{query:o})]})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:o?s.jsx(wr,{}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 dark:text-gray-500 p-8",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-full blur-2xl"}),s.jsx("div",{className:"relative w-24 h-24 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center mb-6",children:s.jsx(Ee,{className:"w-12 h-12 text-gray-400 dark:text-gray-500",strokeWidth:1.5})})]}),s.jsx("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-300 mb-2",children:e("search_view.empty_title")}),s.jsx("p",{className:"text-sm text-center max-w-xs opacity-75",dangerouslySetInnerHTML:{__html:e("search_view.empty_desc")}})]})})]})},go=()=>{const{workspaceId:e,userId:t,loading:r}=ne(),n=w.useCallback(c=>!e||!t?()=>{}:cn(e,c),[e,t]),a=e?ln(e):!1,{data:o,isPending:i}=ve(["targets",t||void 0,e||void 0],n,e&&a?on(e):void 0);return{targets:o||[],loading:r||!!e&&i}},mo=S.memo(({kgi:e,currentTab:t,onTabChange:r,collapsed:n,onToggleCollapse:a})=>{const{t:o}=I(),i={good:"text-emerald-500",warning:"text-amber-500",danger:"text-red-500"},l={good:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-red-500"},c=i[e.status]||"text-gray-500",d=l[e.status]||"bg-gray-500",h=[{id:"backward",label:o("backward_map"),icon:"üó∫Ô∏è"},{id:"woop",label:o("woop_board"),icon:"‚ú®"},{id:"okr",label:o("okr_tree"),icon:"üéØ"}];return s.jsx("div",{className:`mb-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg transition-all duration-300 mx-4 mt-4 ${n?"py-2":"py-4"}`,children:s.jsxs("div",{className:"px-6 flex items-center justify-between gap-6",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("h1",{className:`font-bold text-gray-900 dark:text-white truncate transition-all duration-300 ${n?"text-sm opacity-50":"text-base"}`,children:e.title})}),s.jsx("div",{className:"flex-1 max-w-md hidden sm:block",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"h-3 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:s.jsx("div",{style:{width:`${e.progress}%`},className:`h-full ${d} transition-all duration-1000 ease-out rounded-full`})})}),s.jsxs("span",{className:`font-black ${c} tabular-nums text-sm whitespace-nowrap`,children:[e.progress,"%"]})]})}),s.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0",children:[s.jsxs("div",{className:"text-center hidden sm:block",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:o("target_dashboard.days_left")}),s.jsxs("div",{className:`font-black ${c} tabular-nums`,children:[e.daysLeft,s.jsx("span",{className:"text-xs font-medium ml-0.5 text-gray-400",children:o("target_dashboard.days_unit")})]})]}),s.jsx("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-900/50 p-1 rounded-lg",children:h.map(u=>s.jsxs("button",{onClick:()=>r(u.id),className:`group px-3 py-1.5 rounded-md text-xs font-bold transition-all flex flex-col sm:flex-row items-center gap-1 sm:gap-2 ${t===u.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,title:u.label,children:[s.jsx("span",{className:"text-sm sm:text-base leading-none",children:u.icon}),s.jsx("span",{className:"text-[10px] sm:text-xs leading-none",children:u.label})]},u.id))}),s.jsx(ie,{variant:"ghost",size:"icon",onClick:a,title:o(n?"target_dashboard.header_expand":"target_dashboard.header_collapse"),className:"rounded-lg",children:s.jsx(us,{className:`w-4 h-4 text-gray-500 transition-transform duration-300 ${n?"rotate-180":""}`})})]})]})})}),po=S.memo(({data:e})=>{const{t}=I();return!e||!e.milestones?s.jsx("div",{className:"p-4 text-center text-gray-500",children:t("target_dashboard.loading_error")}):s.jsxs("div",{className:"max-w-4xl mx-auto relative pb-10",children:[s.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 -translate-x-1/2"}),e.milestones.map((r,n)=>{const a=r.type==="goal",o=r.type==="current",i=r.completed;let l,c="";return a?(l=s.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-400 text-white flex items-center justify-center text-base shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:"üèÜ"}),c="bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"):o?(l=s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold shadow-md ring-4 ring-gray-50 dark:ring-gray-900 z-10 animate-pulse relative",children:t("target_dashboard.backward.now_icon")}),c="border-blue-500 border-2 shadow-md"):i?(l=s.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs shadow ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative",children:"‚úì"}),c="bg-gray-50 dark:bg-gray-800 opacity-70"):(l=s.jsx("div",{className:"w-5 h-5 rounded-full bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 ring-4 ring-gray-50 dark:ring-gray-900 z-10 relative"}),c="bg-white dark:bg-gray-800"),s.jsxs("div",{className:"relative flex items-center mb-4 animate-fade-in group",style:{animationDelay:`${n*50}ms`},children:[s.jsx("div",{className:"w-16 flex-shrink-0 flex justify-center items-center z-10",children:l}),s.jsx("div",{className:"flex-1 pr-4 min-w-0",children:s.jsx("div",{className:`px-3 py-3 rounded-lg border ${o&&!c.includes("border-2")?"border-2 border-blue-500":o?"":"border-gray-200 dark:border-gray-700"} ${c} shadow-sm transition-all hover:shadow-md hover:translate-x-1 cursor-pointer`,children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("span",{className:`text-xs font-bold ${o?"text-blue-600":"text-gray-500"} flex-shrink-0 font-mono`,children:r.date}),s.jsx("h3",{className:"font-bold text-gray-900 dark:text-white flex-1 truncate text-sm md:text-base",children:r.title}),a&&s.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-bold flex-shrink-0",children:t("target_dashboard.backward.target_label")}),o&&s.jsx("span",{className:"text-[10px] text-blue-500 font-bold flex-shrink-0",children:t("target_dashboard.backward.now_label")})]})})})]},r.id||`milestone-${n}`)})]})}),fo=S.memo(({data:e})=>{const{t}=I();if(!e||!e.keyResults)return s.jsx("div",{className:"p-4 text-center text-gray-500",children:t("target_dashboard.loading_error")});const r=n=>n==="high"?"bg-emerald-500":n==="medium"?"bg-amber-500":"bg-red-500";return s.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border-2 border-blue-100 dark:border-blue-900 shadow-lg text-center mb-12 relative z-10 transition-transform hover:scale-[1.01]",children:[s.jsx("div",{className:"absolute top-[-15px] left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-md",children:t("target_dashboard.okr.objective_label")}),s.jsxs("h2",{className:"font-black text-2xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 leading-tight",children:['"',e.objective,'"']}),s.jsx("div",{className:"absolute bottom-[-50px] left-1/2 w-1 h-[50px] bg-gray-200 dark:bg-gray-700 z-0"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative",children:[s.jsx("div",{className:"hidden md:block absolute top-[-25px] left-[16.66%] right-[16.66%] h-1 bg-gray-200 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 rounded-t-xl z-0"}),e.keyResults.map(n=>{const a=n.target>0?Math.round(n.current/n.target*100):0,o=r(n.confidence);return s.jsxs("div",{className:"relative pt-6",children:[s.jsx("div",{className:"absolute top-[-25px] left-1/2 w-1 h-[25px] bg-gray-200 dark:bg-gray-700 md:block hidden"}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-700 transition-all group h-full flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[t("target_dashboard.okr.kr_prefix"),n.id]}),s.jsx("div",{className:`w-3 h-3 rounded-full ${o}`,title:`Confidence: ${n.confidence}`})]}),s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-4 h-12 line-clamp-2",children:n.text}),s.jsxs("div",{className:"space-y-1 mt-auto",children:[s.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-500 dark:text-gray-400",children:[s.jsx("span",{children:n.current}),s.jsx("span",{children:n.target})]}),s.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-900 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${a}%`}})}),s.jsxs("div",{className:"text-right text-sm font-black text-blue-600 mt-1",children:[a,"%"]})]})]})]},n.id)})]})]})}),xo=S.memo(({data:e})=>{const{t}=I();return!e||!e.obstacles?s.jsx("div",{className:"p-4 text-center text-gray-500",children:t("target_dashboard.loading_error")}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto animate-fade-in",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/30 dark:to-blue-900/30 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800 shadow-sm hover:shadow-md transition-shadow",children:[s.jsx("h3",{className:"text-sm font-bold text-indigo-500 uppercase mb-2",children:t("target_dashboard.woop.wish_label")}),s.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',e.wish,'"']})]}),s.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/30 dark:to-rose-900/30 p-6 rounded-2xl border border-pink-100 dark:border-pink-800 shadow-sm hover:shadow-md transition-shadow",children:[s.jsx("h3",{className:"text-sm font-bold text-pink-500 uppercase mb-2",children:t("target_dashboard.woop.outcome_label")}),s.jsxs("p",{className:"font-bold text-gray-900 dark:text-white leading-relaxed text-lg",children:['"',e.outcome,'"']})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-2 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"üöß"})," ",t("target_dashboard.woop.obstacles_header")]}),e.obstacles.map(r=>s.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all overflow-hidden relative",children:[s.jsx("div",{className:"p-5 border-l-4 border-gray-400 bg-gray-50 dark:bg-gray-800 relative z-10 transition-transform group-hover:translate-x-1",children:s.jsxs("h4",{className:"font-bold text-gray-700 dark:text-gray-300 flex items-center",children:[s.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-xs px-2 py-1 rounded mr-3 text-gray-600 dark:text-gray-400",children:t("target_dashboard.woop.obstacle_badge")}),r.text]})}),s.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border-t border-gray-100 dark:border-gray-700 flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("span",{className:"block w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs font-bold",children:t("target_dashboard.woop.if_badge")})}),s.jsx("div",{className:"ml-3 flex-1",children:s.jsxs("p",{className:"text-emerald-800 dark:text-emerald-300 font-bold text-sm",children:["‚Üí ",r.plan]})}),s.jsxs("div",{className:"ml-2 flex flex-col items-center",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:t("target_dashboard.woop.score_label")}),s.jsx("span",{className:"text-lg font-black text-emerald-500 leading-none",children:r.overcomeCount})]})]})]},r.id)),s.jsx("button",{className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl text-gray-400 hover:border-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition flex items-center justify-center font-bold text-sm",children:t("target_dashboard.woop.add_obstacle")})]})]})}),bo=()=>{var x;const{t:e}=I(),{targets:t}=go(),[r,n]=w.useState("backward"),[a,o]=w.useState(!1),i=t.filter(g=>{var k;return((k=g.mode)==null?void 0:k.toLowerCase())===r.toLowerCase()}),l=g=>({milestones:[{date:e("target_dashboard.backward.timeline.future"),title:g.data.goal_kgi||e("target_dashboard.kgi_default"),type:"goal",completed:!1},{date:e("target_dashboard.backward.timeline.milestone"),title:g.data.milestone_minus_1mo||"",type:"milestone",completed:!1},{date:e("target_dashboard.backward.timeline.today"),title:e("target_dashboard.backward.current_status"),type:"current",completed:!0},{date:e("target_dashboard.backward.timeline.now"),title:g.data.first_action||"",type:"action",completed:!1}]}),c=g=>({wish:g.data.wish||"",outcome:g.data.outcome||"",obstacles:[{id:1,text:g.data.obstacle||"",plan:g.data.plan||"",overcomeCount:0}]}),d=g=>({objective:g.data.objective||"",keyResults:[{id:1,text:g.data.kr_1||`${e("target_dashboard.okr.kr_prefix")}1`,current:0,target:100,confidence:"medium"},{id:2,text:g.data.kr_2||`${e("target_dashboard.okr.kr_prefix")}2`,current:0,target:100,confidence:"medium"},{id:3,text:g.data.kr_3||`${e("target_dashboard.okr.kr_prefix")}3`,current:0,target:100,confidence:"medium"}]}),h=()=>i.length===0?s.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500 dark:text-gray-400",children:s.jsx("p",{className:"mb-4",children:e("target_dashboard.no_targets",{mode:r.toUpperCase()})})}):s.jsx("div",{className:"space-y-12",children:i.map(g=>{var k;return s.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-12 last:border-0",children:[s.jsx("div",{className:"mb-4 text-xs text-gray-400 flex justify-end",children:e("target_dashboard.created_at",{date:((k=W(g.createdAt))==null?void 0:k.toLocaleDateString())||"Unknown"})}),r==="backward"&&s.jsx(po,{data:l(g)}),r==="woop"&&s.jsx(xo,{data:c(g)}),r==="okr"&&s.jsx(fo,{data:d(g)})]},g.id)})}),u=i[0],y={title:((g,k)=>g?k==="backward"?g.data.goal_kgi||e("target_dashboard.kgi_default"):k==="woop"?g.data.wish||e("target_dashboard.wish_default"):k==="okr"?g.data.objective||e("target_dashboard.obj_default"):e("target_dashboard.target_default"):e("target_dashboard.title_default"))(u,r),progress:Number(((x=u==null?void 0:u.data)==null?void 0:x.progress)||0),daysLeft:0,status:"good"};return s.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[s.jsx(mo,{kgi:y,currentTab:r,onTabChange:n,collapsed:a,onToggleCollapse:()=>o(!a)}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 pb-6 pt-4",children:h()})]})},yo=[{id:"okr",title:"OKR (Objectives and Key Results)",subTitle:"ÈáéÂøÉÁöÑ„Å™ÁõÆÊ®ô„Å®ÊàêÊûúÊåáÊ®ô",color:"blue",icon:"üéØ",concept:{summary:"„Äå‰Ωï„ÇíÈÅîÊàê„Åó„Åü„ÅÑ„ÅãÔºàObjectiveÔºâ„Äç„Å®„Äå„Å©„ÅÜ„ÇÑ„Å£„Å¶ÈÅîÊàê„ÇíÊ∏¨„Çã„ÅãÔºàKey ResultsÔºâ„Äç„Çí„Çª„ÉÉ„Éà„ÅßÁÆ°ÁêÜ„Åô„ÇãÊâãÊ≥ï„ÄÇ",detail:"Google„ÇÑIntel„ÇÇÊé°Áî®„Åô„ÇãÁõÆÊ®ôÁÆ°ÁêÜ„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ„ÄÇ60-70%„ÅÆÈÅîÊàêÂ∫¶„ÅßÊàêÂäü„Å®„Åø„Å™„Åô„Äå„É†„Éº„É≥„Ç∑„Éß„ÉÉ„Éà„Äç„Å™ÁõÆÊ®ôË®≠ÂÆö„ÅåÁâπÂæ¥„Åß„ÄÅÁèæÁä∂Á∂≠ÊåÅ„Åß„ÅØ„Å™„ÅèÈ£õË∫çÁöÑ„Å™ÊàêÈï∑„Çí‰øÉ„Åó„Åæ„Åô„ÄÇ"},useCases:[{title:"„Ç®„É≥„Ç∏„Éã„Ç¢ÂÄã‰∫∫„ÅÆ„Çπ„Ç≠„É´„Ç¢„ÉÉ„Éó",before:"Êº†ÁÑ∂„Å®„ÄåÊäÄË°ìÂäõ„Çí‰∏ä„Åí„Åü„ÅÑ„Äç„Å®ËÄÉ„Åà„ÄÅÊâãÂΩì„Åü„ÇäÊ¨°Á¨¨„Å´Êú¨„ÇíË™≠„ÇÄ„ÅåË∫´„Å´„Å§„Åã„Å™„ÅÑ„ÄÇ",after:"O:„Äå„ÉÅ„Éº„É†„ÅÆRustÁßªË°å„Çí„É™„Éº„Éâ„Åô„ÇãÂ≠òÂú®„Å´„Å™„Çã„Äç KR:„ÄåRust„Åß„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Çí1„Å§ÂÆüË£Ö„Åô„Çã„Äç„ÄåÁ§æÂÜÖÂãâÂº∑‰ºö„Çí3ÂõûÈñãÂÇ¨„Åô„Çã„Äç„Å®Ë®≠ÂÆö„Åó„ÄÅÂ≠¶Áøí„ÅÆÁÑ¶ÁÇπ„ÅåÂÆö„Åæ„Å£„Åü„ÄÇ"},{title:"ÂâØÊ•≠„ÉªÂÄã‰∫∫ÈñãÁô∫",before:"„Äå„ÅÑ„Å§„Åã„Ç¢„Éó„É™„Çí„É™„É™„Éº„Çπ„Åó„Åü„ÅÑ„Äç„Å®ÊÄù„ÅÑ„Å§„Å§„ÄÅ„ÉÄ„É©„ÉÄ„É©„Å®ÈñãÁô∫„ÇíÁ∂ö„Åë„Å¶„Åó„Åæ„ÅÜ„ÄÇ",after:"O:„Äå„É¶„Éº„Ç∂„Éº„Å´ÊÑõ„Åï„Çå„ÇãMVP„Çí„É™„É™„Éº„Çπ„Åô„Çã„Äç KR:„Äå3ÊúàÊú´„Åæ„Åß„Å´„Çπ„Éà„Ç¢ÂÖ¨Èñã„Äç„ÄåÂàùÊúü„É¶„Éº„Ç∂„Éº100‰∫∫Áç≤Âæó„Äç„ÄåÈÄ±Ê¨°„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁéá30%ÈÅîÊàê„Äç„Å®ÊúüÈôê„Å®Êï∞Â≠ó„Åß„Ç≥„Éü„ÉÉ„Éà„Åó„Åü„ÄÇ"}],tips:[{q:"ÁõÆÊ®ô„ÅåÈ´ò„Åô„Åé„Å¶„É¢„ÉÅ„Éô„Éº„Ç∑„Éß„É≥„ÅåÁ∂ö„Åç„Åæ„Åõ„Çì„ÄÇ",a:"OKR„ÅØ„ÄåÈÅîÊàê„Åß„Åç„Å™„Åè„Å¶„ÇÇ„Éö„Éä„É´„ÉÜ„Ç£„Åå„Å™„ÅÑ„Äç„ÅÆ„ÅåÂâçÊèê„Åß„Åô„ÄÇ60%ÈÅîÊàê„Åß„Åç„Çå„Å∞Âæ°„ÅÆÂ≠ó„Å®ËÄÉ„Åà„ÄÅÂ§±Êïó„ÇíÊÅê„Çå„Åö„Å´ÊåëÊà¶„Åô„Çã„Åì„Å®Ëá™‰Ωì„ÇíË©ï‰æ°„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇÈÄ≤Êçó„ÅØÈÄ±Ê¨°„Åß„ÉÅ„Çß„ÉÉ„ÇØ„ÅóÔºàWin„Çª„ÉÉ„Ç∑„Éß„É≥Ôºâ„ÄÅÂ∞è„Åï„Å™ÂâçÈÄ≤„ÇíÁ•ù„ÅÜ„Åì„Å®„ÅåÈáçË¶Å„Åß„Åô„ÄÇ"},{q:"KRÔºàÊàêÊûúÊåáÊ®ôÔºâ„ÅÆÊï∞Â≠ó„ÅØ„Å©„ÅÜÊ±∫„ÇÅ„Çå„Å∞„ÅÑ„ÅÑ„Åß„Åô„ÅãÔºü",a:"„ÄåÈ†ëÂºµ„Çå„Å∞ÈÅîÊàê„Åß„Åç„ÇãÔºà50%Ôºâ„Äç„Å®„Äå„Åã„Å™„ÇäÈÅã„ÅåËâØ„Åè„Å™„ÅÑ„Å®ÁÑ°ÁêÜÔºà100%Ôºâ„Äç„ÅÆÈñì„ÄÅ„ÄåÂ∞ë„ÅóËÉå‰º∏„Å≥„ÅåÂøÖË¶ÅÔºà70%Ôºâ„Äç„Å™„É©„Ç§„É≥„ÇíÁãô„ÅÑ„Åæ„Åó„Çá„ÅÜ„ÄÇË®àÊ∏¨‰∏çÂèØËÉΩ„Å™„Äå„Äú„ÇíÈ†ëÂºµ„Çã„Äç„ÅØNG„Åß„Åô„ÄÇ"}]},{id:"woop",title:"WOOP (Wish, Outcome, Obstacle, Plan)",subTitle:"ÁßëÂ≠¶ÁöÑ„Å™È°òÊúõÂÆüÁèæ„É°„ÇΩ„ÉÉ„Éâ",color:"amber",icon:"‚ú®",concept:{summary:"„ÄåÊúÄÈ´ò„ÅÆÊú™Êù•„Äç„Å®„ÄåÁèæÂÆü„ÅÆÈöúÂÆ≥„Äç„ÇíÂØæÊØî„Åï„Åõ„ÄÅËÑ≥„ÇíÊú¨Ê∞ó„Å´„Åï„Åõ„ÇãÔºà„É°„É≥„Çø„É´„Éª„Ç≥„É≥„Éà„É©„Çπ„ÉÜ„Ç£„É≥„Ç∞Ôºâ„ÄÇ",detail:"„Åü„Å†„Éù„Ç∏„ÉÜ„Ç£„Éñ„Å´ËÄÉ„Åà„Çã„Å†„Åë„Åß„Å™„Åè„ÄÅ„Åù„Çå„ÇíÈòª„ÇÄËá™ÂàÜ„ÅÆÂÜÖÈù¢„ÅÆÈöúÂÆ≥„ÇíÁõ¥Ë¶ñ„Åó„ÄÅ„ÄåIf-Then„Éó„É©„É≥Ôºà„ÇÇ„ÅóX„ÅåËµ∑„Åç„Åü„ÇâY„Åô„ÇãÔºâ„Äç„Çí‰∫ãÂâç„Å´Áî®ÊÑè„Åô„Çã„Åì„Å®„Åß„ÄÅÂÆüË°åÁéá„ÇíÈ£õË∫çÁöÑ„Å´È´ò„ÇÅ„Åæ„Åô„ÄÇ"},useCases:[{title:"ÊØéÊó•„ÅÆÈÅãÂãïÁøíÊÖ£",before:"„ÄåÁó©„Åõ„Åü„ÅÑ„Äç„Å®ÊÄù„ÅÜ„Å†„Åë„Åß„ÄÅ‰ªï‰∫ã„ÅßÁñ≤„Çå„Çã„Å®„Äå‰ªäÊó•„ÅØ„ÅÑ„ÅÑ„ÇÑ„Äç„Å®„Çµ„Éú„Å£„Å¶„Åó„Åæ„ÅÜ„ÄÇ",after:"W:„ÄåÊØéÊó•30ÂàÜËµ∞„Çã„Äç O:„Äå‰Ωì„ÅåËªΩ„Åè„Å™„Çä„ÄÅËá™‰ø°„Åå„Å§„Åè„Äç Obs:„Äå‰ªï‰∫ãÂ∏∞„Çä„ÅÆÁñ≤Âä¥ÊÑü„Äç Plan:„Äå„ÇÇ„Åó„ÄéÁñ≤„Çå„Åü„Äè„Å®ÊÑü„Åò„Åü„Çâ„ÄÅ„Äé„Å®„Çä„ÅÇ„Åà„Åö„Ç¶„Çß„Ç¢„Å´ÁùÄÊõø„Åà„Çã„Äè„Äç„Å®Ê±∫„ÇÅ„Å¶„Åä„Åè„Åì„Å®„Åß„ÄÅËá™ÂãïÁöÑ„Å´Ë°åÂãï„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Å£„Åü„ÄÇ"},{title:"Ë≥áÊ†ºË©¶È®ì„ÅÆÂãâÂº∑",before:"„Çπ„Éû„Éõ„ÅÆÈÄöÁü•„ÅåÊ∞ó„Å´„Å™„Å£„Å¶ÈõÜ‰∏≠Âäõ„ÅåÈÄîÂàá„Çå„Å¶„Åó„Åæ„ÅÜ„ÄÇ",after:"Obs:„Äå„Çπ„Éû„Éõ„ÇíË¶ã„Å¶„Åó„Åæ„ÅÜÁôñ„Äç Plan:„Äå„ÇÇ„Åó„ÄéÂãâÂº∑„ÇíÂßã„ÇÅ„Çã„ÄèÊôÇ„ÅØ„ÄÅ„Äé„Çπ„Éû„Éõ„ÇíÂà•„ÅÆÈÉ®Â±ã„Å´ÁΩÆ„Åè„Äè„Äç„Å®„ÅÑ„ÅÜ„Çª„ÉÉ„ÉàË°åÂãï„ÇíÂæπÂ∫ï„Åó„ÄÅÈõÜ‰∏≠ÊôÇÈñì„ÇíÁ¢∫‰øù„Åó„Åü„ÄÇ"}],tips:[{q:"ÈöúÂÆ≥ÔºàObstacleÔºâ„Å´„ÅØ‰Ωï„ÇíÊõ∏„Åë„Å∞„ÅÑ„ÅÑ„Åß„Åô„ÅãÔºü",a:"„ÄåÊôÇÈñì„Åå„Å™„ÅÑ„Äç„Äå„ÅäÈáë„Åå„Å™„ÅÑ„Äç„Å®„ÅÑ„Å£„ÅüÂ§ñÈÉ®Ë¶ÅÂõ†„Åß„ÅØ„Å™„Åè„ÄÅ„Äå„Å§„ÅÑ„ÉÄ„É©„ÉÄ„É©„Åó„Å¶„Åó„Åæ„ÅÜ„Äç„ÄåÂ§±Êïó„Åô„Çã„ÅÆ„ÅåÊÄñ„ÅÑ„Äç„Å®„ÅÑ„Å£„Åü„ÄéËá™ÂàÜ„ÅÆÂÜÖÈù¢„Å´„ÅÇ„ÇãÊÑüÊÉÖ„ÇÑÁôñ„Äè„ÇíÊé¢„Çä„Åæ„Åó„Çá„ÅÜ„ÄÇ„Åì„Çå„Åì„Åù„Åå„Ç≥„É≥„Éà„É≠„Éº„É´ÂèØËÉΩ„Å™Áúü„ÅÆÈöúÂÆ≥„Åß„Åô„ÄÇ"},{q:"Ë®àÁîªÔºàPlanÔºâ„Åå„ÅÜ„Åæ„ÅèÊ©üËÉΩ„Åó„Åæ„Åõ„Çì„ÄÇ",a:"„Äå„ÇÇ„Åó„Äú„Å™„Çâ„Äç„ÅÆÊù°‰ª∂Ôºà„Éà„É™„Ç¨„ÉºÔºâ„Çí„ÇÇ„Å£„Å®ÂÖ∑‰ΩìÁöÑ„Å´„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ„ÄåÁñ≤„Çå„Åü„Çâ„Äç„Çà„Çä„ÇÇ„ÄåÂ∏∞ÂÆÖ„Åó„Å¶„ÇΩ„Éï„Ç°„ÇíË¶ã„ÅüÁû¨Èñì„Äç„ÅÆÊñπ„ÅåËÑ≥„ÅØÂèçÂøú„Åó„ÇÑ„Åô„Åè„Å™„Çä„Åæ„Åô„ÄÇ„Ç¢„ÇØ„Ç∑„Éß„É≥„ÇÇ„ÄåÈ†ëÂºµ„Çã„Äç„Åß„ÅØ„Å™„Åè„Äå5ÂàÜ„Å†„Åë„ÇÑ„Çã„Äç„Å™„Å©„Éè„Éº„Éâ„É´„ÇíÊ•µÈôê„Åæ„Åß‰∏ã„Åí„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"}]},{id:"backward",title:"Backward Design (ÈÄÜÁÆóÊÄùËÄÉ)",subTitle:"„Ç¥„Éº„É´„Åã„ÇâÁèæÂú®Âú∞„Å∏„ÅÆÊû∂„ÅëÊ©ã",color:"purple",icon:"üó∫Ô∏è",concept:{summary:"„Äå„ÅÇ„Çä„Åü„ÅÑÂßøÔºà„Ç¥„Éº„É´Ôºâ„Äç„Åã„ÇâÊôÇÈñì„ÇíÂ∑ª„ÅçÊàª„Åó„Å¶„ÄÅ‰ªä„ÇÑ„Çã„Åπ„Åç„Åì„Å®„ÇíÊ±∫ÂÆö„Åô„Çã„ÄÇ",detail:"ÁèæÂú®„Åã„Çâ„ÅÆÁ©ç„Åø‰∏ä„ÅíÔºàForecastingÔºâ„Åß„ÅØ„Å™„Åè„ÄÅÊú™Êù•„Åã„Çâ„ÅÆÈÄÜÁÆóÔºàBackcastingÔºâ„ÇíË°å„ÅÜ„Åì„Å®„Åß„ÄÅÁèæÁä∂„ÅÆÂª∂Èï∑Á∑ö‰∏ä„Å´„ÅØ„Å™„ÅÑÈ£õË∫çÁöÑ„Å™ÊàêÊûú„ÇÑ„ÄÅÁÑ°ÈßÑ„ÅÆ„Å™„ÅÑÊúÄÁü≠„É´„Éº„Éà„ÅåË¶ã„Åà„Å¶„Åç„Åæ„Åô„ÄÇÈï∑Êúü„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Å´ÂøÖÈ†à„ÅÆË¶ñÁÇπ„Åß„Åô„ÄÇ"},useCases:[{title:"ÂçäÂπ¥Âæå„ÅÆ„Ç§„Éô„É≥„Éà‰∏ªÂÇ¨",before:"„Å®„Çä„ÅÇ„Åà„Åö‰ºöÂ†¥„Å†„ÅëÊäº„Åï„Åà„Å¶„ÄÅÈõÜÂÆ¢„ÇÑ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅØÁõ¥Ââç„Å´„Å™„Å£„Å¶ÊÖå„Å¶„Å¶Ê∫ñÂÇô„Åô„Çã„ÄÇ",after:"Goal:„Äå„Ç§„Éô„É≥„ÉàÊàêÂäü„Äç‚Üí 1„É∂ÊúàÂâç:„ÄåÊ∫ÄÂ∏≠„Äç‚Üí 3„É∂ÊúàÂâç:„ÄåÂëäÁü•ÈñãÂßã„ÉªLPÂÆåÊàê„Äç‚Üí ‰ªä:„Äå„Ç≥„É≥„Çª„Éó„ÉàÊ±∫ÂÆö„ÉªÁôªÂ£áËÄÖ„Ç™„Éï„Ç°„Éº„Äç„Å®„Éû„Ç§„É´„Çπ„Éà„Éº„É≥„ÇíÁΩÆ„Åç„ÄÅ‰ªäÊúà„ÅÆÂøÖÈ†à„Çø„Çπ„ÇØ„ÇíÊ¥ó„ÅÑÂá∫„Åó„Åü„ÄÇ"},{title:"„Ç≠„É£„É™„Ç¢„ÉÅ„Çß„É≥„Ç∏",before:"‰ªä„ÅÆ‰ªï‰∫ã„ÅåÂ´å„ÅßËª¢ËÅ∑„Çµ„Ç§„Éà„ÇíÁú∫„ÇÅ„Çã„Åå„ÄÅÁâπ„Å´„Çπ„Ç≠„É´„ÇÇ„Å™„ÅèÂãï„Åë„Å™„ÅÑ„ÄÇ",after:"Goal:„Äå3Âπ¥Âæå„Å´„Éï„É™„Éº„É©„É≥„ÇπÁã¨Á´ã„Äç‚Üí 2Âπ¥Âæå:„ÄåÂâØÊ•≠ÊúàÂèé20‰∏á„Äç‚Üí 1Âπ¥Âæå:„Äå„Çπ„Ç≠„É´ÁøíÂæó„Éª„Éù„Éº„Éà„Éï„Ç©„É™„Ç™ÂÆåÊàê„Äç‚Üí ‰ªä:„Äå„Çπ„ÇØ„Éº„É´ÈÅ∏„Å≥„ÉªÂ≠¶ÁøíÊôÇÈñì„ÅÆÁ¢∫‰øù„Äç„Å®ÈÄÜÁÆó„Åó„ÄÅÂÖ∑‰ΩìÁöÑ„Å™‰∏ÄÊ≠©„ÇíË∏è„ÅøÂá∫„Åó„Åü„ÄÇ"}],tips:[{q:"ÈÅ†„ÅÑÊú™Êù•„Åô„Åé„Å¶„Ç§„É°„Éº„Ç∏„ÅåÊπß„Åç„Åæ„Åõ„Çì„ÄÇ",a:"ÁÑ°ÁêÜ„Å´Ë©≥Á¥∞„ÇíÊ±∫„ÇÅ„ÇãÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Åæ„Åö„ÅØ„ÄåÁµ∂ÂØæ„Å´„Åì„ÅÜ„Å™„Å£„Å¶„ÅÑ„Åü„ÅÑ„Äç„Å®„ÅÑ„ÅÜÁä∂ÊÖãÔºàKGIÔºâ„Å®ÊúüÈôê„ÇíÊ±∫„ÇÅ„ÄÅ„Åù„Åì„Åã„Çâ„Äå„Åù„ÅÆÁõ¥Ââç„ÅØ„Å©„ÅÜ„Å™„Å£„Å¶„ÅÑ„Çã„ÅØ„Åö„ÅãÔºü„Äç„Å®1„Çπ„ÉÜ„ÉÉ„Éó„Åö„Å§Êàª„Å£„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇÁõ¥Ëøë„ÅÆ„Éû„Ç§„É´„Çπ„Éà„Éº„É≥„Å†„ÅëË©≥Á¥∞„Åß„ÅÇ„Çå„Å∞OK„Åß„Åô„ÄÇ"},{q:"Ë®àÁîªÈÄö„Çä„Å´ÈÄ≤„Åæ„Å™„ÅÑÊôÇ„ÅØÔºü",a:"ÈÄÜÁÆóÊÄùËÄÉ„Åß‰Ωú„Å£„ÅüË®àÁîª„ÅØ„Äå‰ªÆË™¨„Äç„Åß„Åô„ÄÇÁä∂Ê≥Å„ÅåÂ§â„Çè„Çå„Å∞„É™„É´„Éº„ÉàÔºàÂÜçË®àÁÆóÔºâ„Åô„Çå„Å∞ËâØ„ÅÑ„ÅÆ„Åß„Åô„ÄÇÈáçË¶Å„Å™„ÅÆ„ÅØ„Äå„Ç¥„Éº„É´„ÇíË¶ãÂ§±„Çè„Å™„ÅÑ„Åì„Å®„Äç„ÄÇÁèæÂú®Âú∞„ÅåÂ§â„Çè„Å£„Å¶„ÇÇ„ÄÅ„Éä„Éì„ÅåÁõÆÁöÑÂú∞„Å∏„ÅÆ„É´„Éº„Éà„ÇíÂºï„ÅçÁõ¥„Åô„Çà„ÅÜ„Å´„ÄÅË®àÁîª„Çí‰øÆÊ≠£„ÅóÁ∂ö„Åë„Åæ„Åó„Çá„ÅÜ„ÄÇ"}]}],ko=[{id:"okr",title:"OKR (Objectives and Key Results)",subTitle:"Ambitious Goals and Measurable Outcomes",color:"blue",icon:"üéØ",concept:{summary:"A goal-setting framework for defining and tracking objectives and their outcomes.",detail:'Adopted by companies like Google and Intel. Characterized by "Moonshot" goals where 60-70% achievement is considered success, encouraging leap-forward growth rather than just the status quo.'},useCases:[{title:"Individual Skill Development",before:'Vaguely thinking "I want to improve my tech skills" and reading books without a focus.',after:`O: "Become a lead in team's Rust migration" KR: "Implement one microservice in Rust", "Hold 3 internal study sessions". Learning focus became crystal clear.`},{title:"Side Projects",before:'Wishing to release an app "someday" but continuing development without a deadline.',after:'O: "Release a MVP loved by users" KR: "App store release by March", "Gain 100 initial users", "Achieve 30% weekly active rate". Committed with dates and numbers.'}],tips:[{q:"The goals are too high and I lose motivation.",a:'OKR assumes "no penalty for falling short". Consider 60% a success and value the challenge itself. Check progress weekly (Win sessions) to celebrate small wins.'},{q:"How should I determine KR numbers?",a:'Aim for a line between "Achievable with effort (50%)" and "Impossible without extreme luck (100%)", approx the "70% stretch" line. Avoid unmeasurable descriptors like "Try hard".'}]},{id:"woop",title:"WOOP (Wish, Outcome, Obstacle, Plan)",subTitle:"A Scientific Method for Goal Realization",color:"amber",icon:"‚ú®",concept:{summary:'Mental Contrasting: Contrast your "best future" with "inner obstacles" to engage the brain.',detail:'Instead of just positive thinking, directly face your inner obstacles and prepare "If-Then Plans" in advance to dramatically increase execution rates.'},useCases:[{title:"Daily Exercise Habit",before:'Thinking "I want to lose weight" but skipping it when tired from work.',after:'W: "Run 30 mins daily" O: "Feel lighter and gain confidence" Obs: "Fatigue after work" Plan: "IF I feel tired, THEN at least change into workout clothes." Started acting automatically.'},{title:"Studying for Certifications",before:"Losing focus due to smartphone notifications.",after:'Obs: "Habit of checking phone" Plan: "IF I start studying, THEN place the phone in another room." Secured focused time.'}],tips:[{q:"What should I write for Obstacles?",a:'Avoid external factors like "no time". Look for emotions or habits within yourself, like "procrastinating" or "fear of failure". These are the true controllable obstacles.'},{q:"My Plan doesn't seem to work.",a:'Make the trigger more specific. Instead of "when tired", use "the moment I see the sofa after returning home". Keep the action extremely simple, like "do it for just 5 minutes".'}]},{id:"backward",title:"Backward Design",subTitle:"Bridging the Gap from Goal to Today",color:"purple",icon:"üó∫Ô∏è",concept:{summary:'Determine what to do now by rewinding time from your "Ideal State (Goal)".',detail:"By using Backcasting (from future to present) instead of Forecasting (from present to future), you find shortcuts and results beyond the status quo. Essential for long-term projects."},useCases:[{title:"Organizing a Large Event",before:"Booking a venue first, then scrambling for speakers and content at the last minute.",after:'Goal: "Successful Event" -> 1mo before: "Tickets Sold out" -> 3mo before: "Start Promotion/LP Ready" -> Now: "Define Concept/Offer Speakers". Identified must-have tasks for this month.'},{title:"Career Change",before:"Disliking current job but just browsing sites without acting due to lack of skills.",after:'Goal: "Freelance in 3 years" -> 2yrs later: "200k/mo from side work" -> 1yr later: "Complete portfolio" -> Now: "Choose a school/Save study time". Started with concrete steps.'}],tips:[{q:"The future feels too distant to imagine.",a:'No need to decide every detail. Start with your KGI and deadline, then ask "What should have happened just before that?". Only the nearest milestones need full detail.'},{q:"What if I can't follow the plan?",a:`The backward plan is a hypothesis. Re-route when situations change. The important thing is "don't lose sight of the goal". Recalculate your route just like a GPS navigator.`}]}],wo=(e="ja")=>e==="ja"?yo:ko,jo=S.memo(({framework:e,onClick:t})=>{const{t:r}=I();return s.jsxs("div",{className:"cursor-pointer bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 transition-colors hover:border-purple-400 dark:hover:border-purple-500 group",onClick:()=>t(e),role:"button",tabIndex:0,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&t(e)},children:[s.jsx("div",{className:"text-2xl mb-2",children:e.icon}),s.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white mb-1",children:e.title}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:e.concept.summary}),s.jsxs("div",{className:"mt-3 flex items-center text-xs text-purple-600 dark:text-purple-400 font-medium opacity-70 group-hover:opacity-100 transition-opacity",children:[s.jsx("span",{children:r("wiki.view_details")}),s.jsx(Ae,{className:"w-3 h-3 ml-1 transform transition-transform group-hover:translate-x-0.5"})]})]})}),vo=()=>{const{openModal:e}=ae(),{t}=I(),{language:r}=$(),n=wo(r);return s.jsx("div",{className:"h-full bg-gray-50 dark:bg-gray-900 overflow-y-auto custom-scrollbar",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 animate-fade-in",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-8 flex items-center",children:[s.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500 mr-3",children:s.jsx(er,{className:"w-8 h-8 text-blue-500"})}),s.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-gray-300",children:t("sidebar.framework_wiki")})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>s.jsx(jo,{framework:a,onClick:o=>e("wiki-framework",o)},a.id))})]})})},No={backward:{id:"backward",label:"Backward Design",description:"„Ç¥„Éº„É´„Åã„ÇâÈÄÜÁÆó„Åó„Å¶„ÄÅÁùÄÂÆü„Å™„Çø„Çπ„ÇØ„ÇíË®≠Ë®à„Åó„Åæ„Åô„ÄÇÈï∑ÊúüÁöÑ„Å™„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Å´ÊúÄÈÅ©„Åß„Åô„ÄÇ",steps:[{title:"Goal / KGI",description:"ÊúÄÁµÇ„Ç¥„Éº„É´„ÅÆÊó•‰ªò„Å®Áä∂ÊÖãÔºàKGIÔºâ„ÇíÂÆöÁæ©„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ",inputs:[{type:"textarea",placeholder:"‰æãÔºö2025Âπ¥3Êúà31Êó•„Åæ„Åß„Å´„ÄÅÊúàÈñì„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„É¶„Éº„Ç∂„Éº1‰∏á‰∫∫„ÇíÈÅîÊàê„Åô„Çã„ÄÇ",key:"goal_kgi"}]},{title:"Milestone",description:"„Ç¥„Éº„É´„ÅÆ1„É∂ÊúàÂâç„Å´Âà∞ÈÅî„Åô„Åπ„ÅçÁä∂ÊÖã„ÅØÔºü",inputs:[{type:"textarea",placeholder:"‰æãÔºö„Ç≥„Ç¢Ê©üËÉΩ„ÅÆÂÆüË£Ö„ÅåÂÆå‰∫Ü„Åó„ÄÅ„Éô„Éº„ÇøÁâà„Çí100‰∫∫„Å´ÈÖçÂ∏ÉÊ∏à„Åø„Åß„ÅÇ„Çã„ÄÇ",key:"milestone_minus_1mo"}]},{title:"First Action",description:"‰ªä„Åô„ÅêÂßã„ÇÅ„Çã„Åπ„ÅçÊúÄÂàù„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅØÔºü",inputs:[{type:"textarea",placeholder:"‰æãÔºöÁ´∂Âêà„Ç¢„Éó„É™„ÅÆ„É¨„Éì„É•„Éº„ÇíÂàÜÊûê„Åó„Å¶Ê©üËÉΩ„É™„Çπ„Éà„Çí‰Ωú„Çã„ÄÇ",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"È°òÊúõ„Å®ÈöúÂÆ≥„ÇíÂØæÊØî„Åï„Åõ„ÄÅÂÆüË°åË®àÁîª„ÇíËá™ÂãïÂåñ„Åó„Åæ„Åô„ÄÇÁøíÊÖ£Âåñ„ÇÑÂõ∞Èõ£„Å™ÁõÆÊ®ô„Å´ÊúâÂäπ„Åß„Åô„ÄÇ",steps:[{title:"Wish (È°òÊúõ)",description:"ÈÅîÊàê„Åó„Åü„ÅÑ„Åì„Å®„ÅØ‰Ωï„Åß„Åô„ÅãÔºüÔºàÊåëÊà¶ÁöÑ„Å†„ÅåÈÅîÊàêÂèØËÉΩ„Å™„ÇÇ„ÅÆÔºâ",inputs:[{type:"textarea",placeholder:"‰æãÔºöÊØéÊó•30ÂàÜ„ÄÅËã±Ë™û„ÅÆÂãâÂº∑„Çí„Åô„Çã„ÄÇ",key:"wish"}]},{title:"Outcome (ÁµêÊûú)",description:"„Åù„Çå„ÅåÈÅîÊàê„Åß„Åç„ÅüÊôÇ„ÅÆ„ÄåÊúÄÈ´ò„ÅÆ„É°„É™„ÉÉ„Éà„Äç„ÇÑÊÑüÊÉÖ„ÇíË©≥„Åó„Åè„Ç§„É°„Éº„Ç∏„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",inputs:[{type:"textarea",placeholder:"‰æãÔºöÂ≠óÂπï„Å™„Åó„ÅßÊµ∑Â§ñ„Éâ„É©„Éû„ÇíÊ•Ω„Åó„ÇÅ„Çã„Çà„ÅÜ„Å´„Å™„Çä„ÄÅËá™‰ø°„Åå„Å§„Åè„ÄÇ",key:"outcome"}]},{title:"Obstacle (ÈöúÂÆ≥)",description:"„Åù„Çå„ÇíÈÇ™È≠î„Åô„Çã„ÄÅ„ÅÇ„Å™„ÅüËá™Ë∫´„ÅÆ„ÄåÂÜÖÈù¢„ÅÆÈöúÂÆ≥„ÄçÔºàÊÑüÊÉÖ„ÉªÁôñ„ÉªÊÄù„ÅÑËæº„ÅøÔºâ„ÅØ‰Ωï„Åß„Åô„ÅãÔºü",inputs:[{type:"textarea",placeholder:"‰æãÔºö‰ªï‰∫ã„ÅßÁñ≤„Çå„Å¶Â∏∞„Å£„Å¶„Åè„Çã„Å®„ÄÅ„Å§„ÅÑ„Çπ„Éû„Éõ„ÅßSNS„ÇíË¶ã„Å¶„Åó„Åæ„ÅÜ„ÄÇ",key:"obstacle"}]},{title:"Plan (Ë®àÁîª)",description:"„Äå„ÇÇ„ÅóÔºàÈöúÂÆ≥Ôºâ„ÅåËµ∑„Åç„Åü„Çâ„ÄÅÔºàË°åÂãïÔºâ„Åô„Çã„Äç„Å®„ÅÑ„ÅÜÂΩ¢„ÅßË®àÁîª„ÇíÁ´ã„Å¶„Åæ„Åó„Çá„ÅÜ„ÄÇ",inputs:[{type:"textarea",placeholder:"‰æãÔºö„ÇÇ„Åó„ÄåÁñ≤„Çå„Å¶„ÇΩ„Éï„Ç°„Å´Â∫ß„Çä„Åù„ÅÜ„Äç„Å´„Å™„Å£„Åü„Çâ„ÄÅ„Äå„Åô„Åê„Å´„ÉÜ„Ç≠„Çπ„Éà„ÇíÈñã„Åè„Äç„Å®„Åô„Çã„ÄÇ",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"ÈáéÂøÉÁöÑ„Å™ÁõÆÊ®ô(O)„Å®„ÄÅÊ∏¨ÂÆöÂèØËÉΩ„Å™ÊàêÊûú(KR)„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Åæ„Åô„ÄÇÁµÑÁπî„ÇÑ„ÉÅ„Éº„É†„ÄÅÈ´ò„ÅÑÊàêÈï∑„ÇíÁõÆÊåá„ÅôÂÄã‰∫∫„Å´„ÄÇ",steps:[{title:"Objective",description:"ÂÆöÊÄßÁöÑ„Åß„ÉØ„ÇØ„ÉØ„ÇØ„Åô„Çã„Çà„ÅÜ„Å™ÁõÆÊ®ô„Çí1„Å§Ê±∫„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",inputs:[{type:"textarea",placeholder:"‰æãÔºö‰∏ñÁïå‰∏≠„ÅÆ„Ç®„É≥„Ç∏„Éã„Ç¢„Å´ÊÑõ„Åï„Çå„ÇãÈñãÁô∫„ÉÑ„Éº„É´„Çí‰Ωú„ÇãÔºÅ",key:"objective"}]},{title:"Key Results",description:"ÁõÆÊ®ôÈÅîÊàê„ÇíÊ∏¨„Çã„Åü„ÇÅ„ÅÆ„ÄÅ3„Å§„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Êï∞Â≠óÔºàÊåáÊ®ôÔºâ„ÇíË®≠ÂÆö„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",inputs:[{type:"text",placeholder:"KR 1 (‰æã: GitHub„Çπ„Çø„ÉºÊï∞ 1,000Âà∞ÈÅî)",key:"kr_1"},{type:"text",placeholder:"KR 2 (‰æã: ÈÄ±Èñì„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÊï∞ 500Âõû)",key:"kr_2"},{type:"text",placeholder:"KR 3 (‰æã: „É¶„Éº„Ç∂„ÉºÁ∂ôÁ∂öÁéá 40%Á∂≠ÊåÅ)",key:"kr_3"}]}]}},_o={backward:{id:"backward",label:"Backward Design",description:"Design solid tasks by rewinding from your goal. Best for long-term projects.",steps:[{title:"Goal / KGI",description:"Define the date and state (KGI) of your final goal.",inputs:[{type:"textarea",placeholder:"e.g., Reach 10,000 monthly active users by March 31, 2025.",key:"goal_kgi"}]},{title:"Milestone",description:"What should be the state one month before the goal?",inputs:[{type:"textarea",placeholder:"e.g., Core features implemented and beta distributed to 100 users.",key:"milestone_minus_1mo"}]},{title:"First Action",description:"What is the very first action you should start right now?",inputs:[{type:"textarea",placeholder:"e.g., Analyze competitor reviews and create a feature list.",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"Contrast wishes and obstacles to automate your execution plan. Effective for habits and tough goals.",steps:[{title:"Wish",description:"What do you want to achieve? (Challenging but achievable)",inputs:[{type:"textarea",placeholder:"e.g., Study English for 30 minutes every day.",key:"wish"}]},{title:"Outcome",description:`Imagine the "best benefit" or feeling when it's achieved.`,inputs:[{type:"textarea",placeholder:"e.g., Enjoy foreign dramas without subtitles and gain confidence.",key:"outcome"}]},{title:"Obstacle",description:'What is your "inner obstacle" (emotion, habit, belief) that gets in the way?',inputs:[{type:"textarea",placeholder:"e.g., Checking SNS on the phone when returning home tired from work.",key:"obstacle"}]},{title:"Plan",description:'Make a plan in the form of "IF (obstacle) happens, THEN (action)".',inputs:[{type:"textarea",placeholder:"e.g., IF I am about to sit on the sofa tired, THEN I will open the textbook immediately.",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"Combine ambitious objectives (O) with measurable key results (KR). For organizations, teams, or high-growth individuals.",steps:[{title:"Objective",description:"Decide on one qualitative and exciting objective.",inputs:[{type:"textarea",placeholder:"e.g., Build a development tool loved by engineers worldwide!",key:"objective"}]},{title:"Key Results",description:"Set three specific metrics (indices) to measure goal achievement.",inputs:[{type:"text",placeholder:"KR 1 (e.g., Reach 1,000 GitHub stars)",key:"kr_1"},{type:"text",placeholder:"KR 2 (e.g., 500 downloads per week)",key:"kr_2"},{type:"text",placeholder:"KR 3 (e.g., Maintain 40% user retention rate)",key:"kr_3"}]}]}},Qe=(e="ja")=>e==="ja"?No:_o,jr=w.forwardRef(({className:e,label:t,error:r,containerClassName:n,id:a,...o},i)=>s.jsxs("div",{className:C("flex flex-col gap-1.5 h-full",n),children:[t&&s.jsx("label",{htmlFor:a,className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t}),s.jsx("textarea",{ref:i,id:a,className:C("w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border rounded-xl px-4 py-3 outline-none transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600 resize-none","focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",r?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600",e),"aria-invalid":!!r,"aria-describedby":r&&a?`${a}-error`:void 0,...o}),r&&s.jsx("p",{id:a?`${a}-error`:void 0,className:"text-xs text-red-500 font-medium animate-fade-in-down",children:r})]}));jr.displayName="Textarea";const Co=({mode:e,currentStep:t})=>{const{language:r}=$(),n=Qe(r)[e],a=n.steps.length;return s.jsx("div",{className:"flex items-center justify-between mb-8 max-w-2xl mx-auto",children:s.jsx("div",{className:"flex items-center space-x-1 mx-auto w-full justify-center",children:n.steps.map((o,i)=>{const l=i+1,c=t>l,d=t===l,h=t<l;return s.jsxs(S.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center relative z-10 w-16",children:[s.jsx("div",{className:C("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold",d&&"bg-blue-600 text-white ring-4 ring-blue-100 dark:ring-blue-900",c&&"bg-green-500 text-white",h&&"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:c?"‚úì":l}),s.jsx("div",{className:C("text-[10px] mt-1 font-medium text-center w-20 truncate",d?"text-blue-600 dark:text-blue-400":"text-gray-400"),children:o.title})]}),i<a-1&&s.jsx("div",{className:C("h-1 flex-1 mx-[-10px] mt-[-14px] z-0 transition-all duration-500 rounded-full",t>l?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},i)})})})},To=({mode:e,step:t,onBack:r,onNext:n,onFinish:a})=>{const{t:o}=I(),{language:i}=$(),l=Qe(i)[e],c=t-1,d=l.steps[c],h=l.steps.length,[u,p]=w.useState({}),y=(g,k)=>{p(N=>({...N,[g]:k}))},x=()=>{const g=(d.inputs??[]).reduce((k,N,m)=>{const f=u[m]||"";return N.key&&(k[N.key]=f),k},{});t<h?n(g):a(g)};return s.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:[l.label," Mode"]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-8 min-h-[500px] flex flex-col",children:[s.jsx(Co,{mode:e,currentStep:t}),s.jsxs("div",{className:"flex-1 animate-fade-in",children:[s.jsxs("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-100",children:["Q",t,". ",d.title]}),s.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:d.description}),s.jsx("div",{className:"mb-8 space-y-4",children:(d.inputs??[]).map((g,k)=>s.jsx("div",{children:g.type==="textarea"?s.jsx(jr,{name:g.key||`textarea-${k}`,id:g.key||`textarea-${k}`,className:"text-base",rows:5,placeholder:g.placeholder,value:u[k]||"",onChange:N=>y(k,N.target.value),"aria-label":g.placeholder}):s.jsx(Tt,{name:g.key||`input-${k}`,id:g.key||`input-${k}`,className:"text-base",placeholder:g.placeholder,value:u[k]||"",onChange:N=>y(k,N.target.value),"aria-label":g.placeholder})},g.key||k))})]}),s.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[s.jsx(ie,{onClick:r,variant:"ghost",className:"text-gray-600 dark:text-gray-400 font-medium",children:o("wizard.back")}),t<h?s.jsx(ie,{onClick:x,variant:"primary",className:"bg-blue-600 hover:bg-blue-700 shadow-md",rightIcon:s.jsx(Ae,{className:"w-4 h-4 ml-2"}),children:o("wizard.next")}):s.jsx(ie,{onClick:x,variant:"primary",className:"bg-green-600 hover:bg-green-700 shadow-lg transform hover:scale-105",leftIcon:s.jsx(Pe,{className:"w-5 h-5 mr-2"}),children:o("wizard.finish")})]})]})]})},Do=({currentMode:e,onModeChange:t,onStart:r})=>{const{t:n}=I(),{language:a}=$(),o=Qe(a),i=o[e],l=(n(`wizard.features.${e}`)||"").split(",");return s.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-full max-h-[700px] flex flex-col py-6",children:[s.jsx("div",{className:"mb-4 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[s.jsx(Zt,{className:"w-3 h-3 mr-1.5"}),s.jsx("span",{className:"font-medium",children:n("sidebar.target_wizard")}),s.jsx(Ae,{className:"w-3 h-3 mx-1.5"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:n("wizard.select_method")})]})}),s.jsxs("div",{className:"mb-6 flex-shrink-0",children:[s.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:n("wizard.select_framework")}),s.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:Object.keys(o).map(c=>s.jsx("button",{onClick:()=>t(c),className:C("flex-1 py-2 text-xs font-bold rounded-lg transition-all",e===c?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:o[c].label},c))})]}),s.jsx("div",{className:"flex-1 mb-6 min-h-0",children:s.jsx("div",{className:"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden shadow-xl",children:s.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mb-4 shadow-lg flex-shrink-0",children:s.jsx(Pe,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 text-xl",children:i.label}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-2xl leading-relaxed",children:i.description}),s.jsx("div",{className:"mt-6 flex flex-wrap gap-2 justify-center",children:l.map(c=>s.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300 shadow-sm",children:c.trim()},c))})]})})}),s.jsx("div",{className:"flex justify-center pb-4 flex-shrink-0",children:s.jsx(ie,{variant:"premium",size:"lg",onClick:r,className:"shadow-xl",rightIcon:s.jsx(Ae,{className:"w-4 h-4"}),children:n("wizard.start_mode")})})]})},Mo=()=>{const[e,t]=w.useState("backward"),[r,n]=w.useState(0),[a,o]=w.useState({}),{setView:i,viewData:l}=te(),{workspaceId:c}=ne(),{t:d}=I(),{language:h}=$(),u=Qe(h);w.useEffect(()=>{l!=null&&l.mode&&(t(l.mode),n(0))},[l]);const p=g=>{o(k=>({...k,...g})),n(k=>k+1)},y=async g=>{const k={...a,...g};if(!c){j.error(d("wizard.alert_no_workspace"));return}try{await dn(c,{mode:e,data:k}),console.log("Wizard Completed, Saved to Firestore",k),j.success(d("wizard.alert_create_success",{label:u[e].label})),n(0),o({}),i("target-dashboard")}catch(N){console.error("Failed to save wizard target:",N),j.error(d("wizard.alert_save_fail"))}},x=()=>{n(g=>Math.max(0,g-1))};return r===0?s.jsx(Do,{currentMode:e,onModeChange:t,onStart:()=>n(1)}):s.jsx(To,{mode:e,step:r,onBack:x,onNext:p,onFinish:y})},So=(e,t)=>{const r=Bt(We(Ot,{activationConstraint:{distance:5}}),We(Lr,{activationConstraint:{delay:T.DND.TOUCH_DELAY,tolerance:5}})),{t:n}=I(),a=w.useRef(e),o=w.useCallback(()=>{a.current=e},[e]),i=w.useCallback(async l=>{var y,x,g,k,N;const{active:c,over:d}=l;if(!d)return;const h=String(c.id),u=String(d.id);let p=null;if(c.data.current&&c.data.current.type==="task"&&(p=((y=c.data.current.task)==null?void 0:y.id)||h.replace(T.DND.PREFIX_TASK,"")),p){const m=d.data.current,f=m==null?void 0:m.type,E=m==null?void 0:m.value;if(f&&Io(f)){const F={};if(f===T.DND.TYPE_PROJECT)F.projectId=E;else if(f===T.DND.TYPE_INBOX)F.projectId=null;else if(f===T.DND.TYPE_TIMEBLOCK)F.timeBlockId=E==="unassigned"?null:E;else if(f===T.DND.TYPE_LABEL){const R=(x=c.data.current)==null?void 0:x.task,O=(R==null?void 0:R.labelIds)??[];E&&(O.includes(E)?F.labelIds=O.filter(B=>B!==E):F.labelIds=[...O,E])}if(Object.keys(F).length>0){try{await lt(p,F)}catch(R){console.error("Failed to update task via dnd",R),j.error(n("msg.dnd.reorderFailed")||n("error"))}return}}if(h!==u&&u.startsWith(T.DND.PREFIX_TASK)){const F=u.replace(T.DND.PREFIX_TASK,"");(g=t==null?void 0:t.onTasksReorder)==null||g.call(t,p,F);return}}if(h!==u&&h.startsWith(T.DND.PREFIX_PROJECT)&&u.startsWith(T.DND.PREFIX_PROJECT)){const m=a.current,f=h.replace(T.DND.PREFIX_PROJECT,""),E=u.replace(T.DND.PREFIX_PROJECT,""),F=m.findIndex(O=>O.id===f),R=m.findIndex(O=>O.id===E);if(F!==-1&&R!==-1){const O=pt(m,F,R);(k=t==null?void 0:t.onOptimisticReorder)==null||k.call(t,O);try{await Za(O)}catch(B){console.error("Failed to update project order",B),j.error(n("msg.dnd.reorderFailed")||n("error")),(N=t==null?void 0:t.onRevertReorder)==null||N.call(t,m)}}}},[e,t,n]);return{sensors:r,handleDragEnd:i,handleDragStart:o}};function Io(e){return[T.DND.TYPE_PROJECT,T.DND.TYPE_INBOX,T.DND.TYPE_TIMEBLOCK,T.DND.TYPE_LABEL].includes(e)}const Eo=()=>{const{workspaceId:e,userId:t,loading:r}=ne(),n=w.useCallback(c=>!e||!t?()=>{}:Fa(e,c),[e,t]),a=e?La(e):!1,{data:o,isPending:i}=ve(["labels",t||void 0,e||void 0],n,e&&a?Aa(e):void 0);return{labels:o||[],loading:r||!!e&&i}},Ao=()=>{const{fontEn:e,fontJp:t,fontSize:r,density:n,themeMode:a}=$(),{setSidebarDensity:o}=bt();w.useEffect(()=>{const i=document.documentElement,l=document.body;a==="dark"?i.classList.add("dark"):a==="light"?i.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?i.classList.add("dark"):i.classList.remove("dark"),i.style.setProperty("--font-en",e),i.style.setProperty("--font-jp",t);const c=["font-app-sm","font-app-base","font-app-md","font-app-lg","font-app-xl"];l.classList.remove(...c),l.classList.add(`font-app-${r}`);const d=["app-density-compact","app-density-normal","app-density-comfortable","app-density-spacious"];l.classList.remove(...d),l.classList.add(`app-density-${n}`),o(n);const h=window.matchMedia("(prefers-color-scheme: dark)"),u=()=>{a==="system"&&(h.matches?i.classList.add("dark"):i.classList.remove("dark"))};return h.addEventListener("change",u),()=>h.removeEventListener("change",u)},[a,e,t,r,n,o])};function Rt(e){const t=String(e);return t.startsWith("project:")||t==="inbox"||t.startsWith("timeblock:")||t.startsWith("duration:")||t.startsWith("label:")}const Lo=e=>{const r=Fr(e).filter(a=>Rt(a.id));if(r.length>0)return r;const n=e.droppableContainers.filter(a=>Rt(a.id));if(n.length>0){const a={...e,droppableContainers:n},o=Rr(a);if(o.length>0)return o}return Wt(e)},Fo=()=>{Ao();const{filterType:e,targetId:t,query:r}=ee(),{currentView:n,setView:a}=te(),{setFilter:o}=ee(),{projects:i,setProjectsOverride:l}=Ct(),{labels:c}=Eo(),[d,h]=S.useState({user:D.currentUser,loading:!D.currentUser}),u=w.useCallback(N=>{const m=N.target,f=["INPUT","TEXTAREA"].includes(m.tagName)||m.closest("[contenteditable]"),E=document.querySelector('[role="dialog"]');N.key==="/"&&!f&&!E&&(N.preventDefault(),o("search"),a("search"))},[o,a]);S.useEffect(()=>{const N=qt(D,m=>{h({user:m,loading:!1})});return document.addEventListener("keydown",u),()=>{N(),document.removeEventListener("keydown",u)}},[u]);const{onTasksReorder:p}=br(),{sensors:y,handleDragEnd:x,handleDragStart:g}=So(i,{onOptimisticReorder:l,onRevertReorder:l,onTasksReorder:p||void 0}),k=w.useMemo(()=>{var N,m;if(n==="wizard")return"Goal Wizard";if(n==="target-dashboard")return"Target Dashboard";if(n==="wiki")return"Framework Wiki";if(n==="search")return r?`"${r}" „ÅÆÊ§úÁ¥¢ÁµêÊûú`:"Ê§úÁ¥¢";if(e==="project")return((N=i.find(f=>f.id===t))==null?void 0:N.name)||"Project";if(e==="label")return((m=c.find(f=>f.id===t))==null?void 0:m.name)||"Label";if(e==="search")return r?`"${r}" „ÅÆÊ§úÁ¥¢ÁµêÊûú`:"Ê§úÁ¥¢";switch(e){case"inbox":return"Inbox";case"today":return"Today";case"upcoming":return"Upcoming";case"important":return"Important";case"custom":return"All Tasks";default:return"TaskMg"}},[n,r,e,t,i,c]);return d.loading?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Ë™≠„ÅøËæº„Åø‰∏≠..."})]})}):d.user?s.jsxs($t,{sensors:y,collisionDetection:Lo,onDragEnd:x,onDragStart:g,children:[s.jsx(as,{}),s.jsx(ta,{}),s.jsx(qs,{sidebarContent:s.jsx(lo,{}),title:k,children:n==="wizard"?s.jsx(Mo,{}):n==="target-dashboard"?s.jsx(bo,{}):n==="wiki"?s.jsx(vo,{}):n==="search"?s.jsx(ho,{}):n==="dashboard"?s.jsx(uo,{}):s.jsx(wr,{})})]}):s.jsx(ts,{})};class Ro extends w.Component{constructor(r){super(r);A(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){Ps(r,n.componentStack??void 0)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const r=$.getState().language,{t:n}=me(r);return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:s.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:n("error_boundary.title")}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:n("error_boundary.description")}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:n("error_boundary.retry")}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:n("error_boundary.reload")})]}),!1]})})}return this.props.children}}const Po=new Qr({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1,retry:!1}}});Rs();Ur();const vr=document.getElementById("app");if(!vr)throw new Error("Failed to find the root element");const Bo=s.jsx(Ro,{children:s.jsx(Ir,{client:Po,children:s.jsx(Fo,{})})});Sr.createRoot(vr).render(Bo);export{ai as $,xi as A,ie as B,ns as C,Pn as D,lr as E,Go as F,Ho as G,j as H,Tt as I,$e as J,ii as K,li as L,W as M,oi as N,fi as O,lt as P,wn as Q,yt as R,yr as S,Yo as T,T as U,Xo as V,Jo as W,Qo as X,Zo as Y,ei as Z,jr as _,ae as a,ni as a0,Zn as a1,Uo as a2,Jt as a3,Is as a4,ri as a5,ti as a6,As as a7,si as a8,wo as a9,te as aa,ds as ab,Ae as ac,Zt as ad,Ct as b,Je as c,ne as d,di as e,ci as f,hi as g,ui as h,gi as i,C as j,Ue as k,He as l,pi as m,mi as n,Qa as o,pr as p,Ko as q,D as r,bi as s,_ as t,I as u,v,Yt as w,Pe as x,cs as y,Ke as z};
