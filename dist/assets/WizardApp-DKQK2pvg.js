import{d as g,j as e,c as W}from"./vendor-B1PbPNG1.js";import{o as u,u as I,B as k,F as _,an as z,G as O,e as K,k as D,ao as N}from"./main-1-rMcdaW.js";import{u as w}from"./i18n-wsfI0CSL.js";import"./firebase-DyJWnMqn.js";import{a as F}from"./targets-DUpeEqMU.js";import{I as E}from"./Input-DZ3fag93.js";const M={backward:{id:"backward",label:"Backward Design",description:"ゴールから逆算して、着実なタスクを設計します。長期的なプロジェクトに最適です。",steps:[{title:"Goal / KGI",description:"最終ゴールの日付と状態（KGI）を定義しましょう。",inputs:[{type:"textarea",placeholder:"例：2025年3月31日までに、月間アクティブユーザー1万人を達成する。",key:"goal_kgi"}]},{title:"Milestone",description:"ゴールの1ヶ月前に到達すべき状態は？",inputs:[{type:"textarea",placeholder:"例：コア機能の実装が完了し、ベータ版を100人に配布済みである。",key:"milestone_minus_1mo"}]},{title:"First Action",description:"今すぐ始めるべき最初のアクションは？",inputs:[{type:"textarea",placeholder:"例：競合アプリのレビューを分析して機能リストを作る。",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"願望と障害を対比させ、実行計画を自動化します。習慣化や困難な目標に有効です。",steps:[{title:"Wish (願望)",description:"達成したいことは何ですか？（挑戦的だが達成可能なもの）",inputs:[{type:"textarea",placeholder:"例：毎日30分、英語の勉強をする。",key:"wish"}]},{title:"Outcome (結果)",description:"それが達成できた時の「最高のメリット」や感情を詳しくイメージしてください。",inputs:[{type:"textarea",placeholder:"例：字幕なしで海外ドラマを楽しめるようになり、自信がつく。",key:"outcome"}]},{title:"Obstacle (障害)",description:"それを邪魔する、あなた自身の「内面の障害」（感情・癖・思い込み）は何ですか？",inputs:[{type:"textarea",placeholder:"例：仕事で疲れて帰ってくると、ついスマホでSNSを見てしまう。",key:"obstacle"}]},{title:"Plan (計画)",description:"「もし（障害）が起きたら、（行動）する」という形で計画を立てましょう。",inputs:[{type:"textarea",placeholder:"例：もし「疲れてソファに座りそう」になったら、「すぐにテキストを開く」とする。",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"野心的な目標(O)と、測定可能な成果(KR)を組み合わせます。組織やチーム、高い成長を目指す個人に。",steps:[{title:"Objective",description:"定性的でワクワクするような目標を1つ決めてください。",inputs:[{type:"textarea",placeholder:"例：世界中のエンジニアに愛される開発ツールを作る！",key:"objective"}]},{title:"Key Results",description:"目標達成を測るための、3つの具体的な数字（指標）を設定してください。",inputs:[{type:"text",placeholder:"KR 1 (例: GitHubスター数 1,000到達)",key:"kr_1"},{type:"text",placeholder:"KR 2 (例: 週間ダウンロード数 500回)",key:"kr_2"},{type:"text",placeholder:"KR 3 (例: ユーザー継続率 40%維持)",key:"kr_3"}]}]}},B={backward:{id:"backward",label:"Backward Design",description:"Design solid tasks by rewinding from your goal. Best for long-term projects.",steps:[{title:"Goal / KGI",description:"Define the date and state (KGI) of your final goal.",inputs:[{type:"textarea",placeholder:"e.g., Reach 10,000 monthly active users by March 31, 2025.",key:"goal_kgi"}]},{title:"Milestone",description:"What should be the state one month before the goal?",inputs:[{type:"textarea",placeholder:"e.g., Core features implemented and beta distributed to 100 users.",key:"milestone_minus_1mo"}]},{title:"First Action",description:"What is the very first action you should start right now?",inputs:[{type:"textarea",placeholder:"e.g., Analyze competitor reviews and create a feature list.",key:"first_action"}]}]},woop:{id:"woop",label:"WOOP",description:"Contrast wishes and obstacles to automate your execution plan. Effective for habits and tough goals.",steps:[{title:"Wish",description:"What do you want to achieve? (Challenging but achievable)",inputs:[{type:"textarea",placeholder:"e.g., Study English for 30 minutes every day.",key:"wish"}]},{title:"Outcome",description:`Imagine the "best benefit" or feeling when it's achieved.`,inputs:[{type:"textarea",placeholder:"e.g., Enjoy foreign dramas without subtitles and gain confidence.",key:"outcome"}]},{title:"Obstacle",description:'What is your "inner obstacle" (emotion, habit, belief) that gets in the way?',inputs:[{type:"textarea",placeholder:"e.g., Checking SNS on the phone when returning home tired from work.",key:"obstacle"}]},{title:"Plan",description:'Make a plan in the form of "IF (obstacle) happens, THEN (action)".',inputs:[{type:"textarea",placeholder:"e.g., IF I am about to sit on the sofa tired, THEN I will open the textbook immediately.",key:"plan"}]}]},okr:{id:"okr",label:"OKR",description:"Combine ambitious objectives (O) with measurable key results (KR). For organizations, teams, or high-growth individuals.",steps:[{title:"Objective",description:"Decide on one qualitative and exciting objective.",inputs:[{type:"textarea",placeholder:"e.g., Build a development tool loved by engineers worldwide!",key:"objective"}]},{title:"Key Results",description:"Set three specific metrics (indices) to measure goal achievement.",inputs:[{type:"text",placeholder:"KR 1 (e.g., Reach 1,000 GitHub stars)",key:"kr_1"},{type:"text",placeholder:"KR 2 (e.g., 500 downloads per week)",key:"kr_2"},{type:"text",placeholder:"KR 3 (e.g., Maintain 40% user retention rate)",key:"kr_3"}]}]}},j=(o="ja")=>o==="ja"?M:B,C=g.forwardRef(({className:o,label:s,error:n,containerClassName:i,id:p,...d},c)=>{const l=g.useId(),a=p||l;return e.jsxs("div",{className:u("flex flex-col gap-1.5 h-full",i),children:[s&&e.jsx("label",{htmlFor:a,className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:s}),e.jsx("textarea",{ref:c,id:a,className:u("w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border rounded-xl px-4 py-3 outline-none transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600 resize-none","focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",n?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600",o),"aria-invalid":!!n,"aria-describedby":n?`${a}-error`:void 0,...d}),n&&e.jsx("p",{id:`${a}-error`,className:"text-xs text-red-500 font-medium animate-fade-in-down",children:n})]})});C.displayName="Textarea";const G=({mode:o,currentStep:s})=>{const{language:n}=w(),i=j(n)[o],p=i.steps.length;return e.jsx("div",{className:"flex items-center justify-between mb-8 max-w-2xl mx-auto",children:e.jsx("div",{className:"flex items-center space-x-1 mx-auto w-full justify-center",children:i.steps.map((d,c)=>{const l=c+1,a=s>l,x=s===l,m=s<l;return e.jsxs(W.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center relative z-10 w-16",children:[e.jsx("div",{className:u("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold",x&&"bg-blue-600 text-white ring-4 ring-blue-100 dark:ring-blue-900",a&&"bg-green-500 text-white",m&&"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:a?"✓":l}),e.jsx("div",{className:u("text-[10px] mt-1 font-medium text-center w-20 truncate",x?"text-blue-600 dark:text-blue-400":"text-gray-400"),children:d.title})]}),c<p-1&&e.jsx("div",{className:u("h-1 flex-1 mx-[-10px] mt-[-14px] z-0 transition-all duration-500 rounded-full",s>l?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},c)})})})},A=({mode:o,step:s,onBack:n,onNext:i,onFinish:p})=>{const{t:d}=I(),{language:c}=w(),l=j(c)[o],a=s-1,x=l.steps[a],m=l.steps.length,[y,v]=g.useState({}),b=(t,r)=>{v(h=>({...h,[t]:r}))},f=()=>{const t=(x.inputs??[]).reduce((r,h,R)=>{const S=y[R]||"";return h.key&&(r[h.key]=S),r},{});s<m?i(t):p(t)};return e.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:[l.label," Mode"]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-8 min-h-[500px] flex flex-col",children:[e.jsx(G,{mode:o,currentStep:s}),e.jsxs("div",{className:"flex-1 animate-fade-in",children:[e.jsxs("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-100",children:["Q",s,". ",x.title]}),e.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:x.description}),e.jsx("div",{className:"mb-8 space-y-4",children:(x.inputs??[]).map((t,r)=>e.jsx("div",{children:t.type==="textarea"?e.jsx(C,{name:t.key||`textarea-${r}`,id:t.key||`textarea-${r}`,className:"text-base",rows:5,placeholder:t.placeholder,value:y[r]||"",onChange:h=>b(r,h.target.value),"aria-label":t.placeholder}):e.jsx(E,{name:t.key||`input-${r}`,id:t.key||`input-${r}`,className:"text-base",placeholder:t.placeholder,value:y[r]||"",onChange:h=>b(r,h.target.value),"aria-label":t.placeholder})},t.key||r))})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[e.jsx(k,{onClick:n,variant:"ghost",className:"text-gray-600 dark:text-gray-400 font-medium",children:d("wizard.back")}),s<m?e.jsx(k,{onClick:f,variant:"primary",className:"bg-blue-600 hover:bg-blue-700 shadow-md",rightIcon:e.jsx(_,{className:"w-4 h-4 ml-2"}),children:d("wizard.next")}):e.jsx(k,{onClick:f,variant:"primary",className:"bg-green-600 hover:bg-green-700 shadow-lg transform hover:scale-105",leftIcon:e.jsx(z,{className:"w-5 h-5 mr-2"}),children:d("wizard.finish")})]})]})]})},$=({currentMode:o,onModeChange:s,onStart:n})=>{const{t:i}=I(),{language:p}=w(),d=j(p),c=d[o],l=(i(`wizard.features.${o}`)||"").split(",");return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-full max-h-[700px] flex flex-col py-6",children:[e.jsx("div",{className:"mb-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(O,{className:"w-3 h-3 mr-1.5"}),e.jsx("span",{className:"font-medium",children:i("sidebar.target_wizard")}),e.jsx(_,{className:"w-3 h-3 mx-1.5"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:i("wizard.select_method")})]})}),e.jsxs("div",{className:"mb-6 flex-shrink-0",children:[e.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:i("wizard.select_framework")}),e.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:Object.keys(d).map(a=>e.jsx("button",{onClick:()=>s(a),className:u("flex-1 py-2 text-xs font-bold rounded-lg transition-all",o===a?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:d[a].label},a))})]}),e.jsx("div",{className:"flex-1 mb-6 min-h-0",children:e.jsx("div",{className:"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden shadow-xl",children:e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mb-4 shadow-lg flex-shrink-0",children:e.jsx(z,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 text-xl",children:c.label}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-2xl leading-relaxed",children:c.description}),e.jsx("div",{className:"mt-6 flex flex-wrap gap-2 justify-center",children:l.map(a=>e.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300 shadow-sm",children:a.trim()},a))})]})})}),e.jsx("div",{className:"flex justify-center pb-4 flex-shrink-0",children:e.jsx(k,{variant:"premium",size:"lg",onClick:n,className:"shadow-xl",rightIcon:e.jsx(_,{className:"w-4 h-4"}),children:i("wizard.start_mode")})})]})},J=()=>{const[o,s]=g.useState("backward"),[n,i]=g.useState(0),[p,d]=g.useState({}),{setView:c,viewData:l}=K(),{workspaceId:a}=D(),{t:x}=I(),{language:m}=w(),y=j(m);g.useEffect(()=>{l&&l.mode&&(s(l.mode),i(0))},[l]);const v=t=>{d(r=>({...r,...t})),i(r=>r+1)},b=async t=>{const r={...p,...t};if(!a){N.error(x("wizard.alert_no_workspace"));return}try{await F(a,{mode:o,data:r}),N.success(x("wizard.alert_create_success",{label:y[o].label})),i(0),d({}),c("target-dashboard")}catch(h){console.error("Failed to save wizard target:",h),N.error(x("wizard.alert_save_fail"))}},f=()=>{i(t=>Math.max(0,t-1))};return n===0?e.jsx($,{currentMode:o,onModeChange:s,onStart:()=>i(1)}):e.jsx(A,{mode:o,step:n,onBack:f,onNext:v,onFinish:b})};export{J as WizardApp};
