var xc=t=>{throw TypeError(t)};var Hs=(t,e,n)=>e.has(t)||xc("Cannot "+n);var v=(t,e,n)=>(Hs(t,e,"read from private field"),n?n.call(t):e.get(t)),V=(t,e,n)=>e.has(t)?xc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),$=(t,e,n,r)=>(Hs(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ie=(t,e,n)=>(Hs(t,e,"access private method"),n);var Gi=(t,e,n,r)=>({set _(i){$(t,e,i,n)},get _(){return v(t,e,r)}});import{r as b,R as re,a as Qr,b as ad}from"./react-vendor-BT7r1O85.js";var Cs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Mm={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},hn,vl,Qf,Am=(Qf=class{constructor(){V(this,hn,Mm);V(this,vl,!1)}setTimeoutProvider(t){$(this,hn,t)}setTimeout(t,e){return v(this,hn).setTimeout(t,e)}clearTimeout(t){v(this,hn).clearTimeout(t)}setInterval(t,e){return v(this,hn).setInterval(t,e)}clearInterval(t){v(this,hn).clearInterval(t)}},hn=new WeakMap,vl=new WeakMap,Qf),_a=new Am;function Im(t){setTimeout(t,0)}var Os=typeof window>"u"||"Deno"in globalThis;function pt(){}function Rm(t,e){return typeof t=="function"?t(e):t}function Pm(t){return typeof t=="number"&&t>=0&&t!==1/0}function zm(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Fa(t,e){return typeof t=="function"?t(e):t}function _m(t,e){return typeof t=="function"?t(e):t}function kc(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=t;if(s){if(r){if(e.queryHash!==xl(s,e.options))return!1}else if(!vi(e.queryKey,s))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||o&&!o(e))}function Sc(t,e){const{exact:n,status:r,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(wi(e.options.mutationKey)!==wi(o))return!1}else if(!vi(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function xl(t,e){return((e==null?void 0:e.queryKeyHashFn)||wi)(t)}function wi(t){return JSON.stringify(t,(e,n)=>La(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function vi(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>vi(t[n],e[n])):!1}var Fm=Object.prototype.hasOwnProperty;function ld(t,e){if(t===e)return t;const n=Cc(t)&&Cc(e);if(!n&&!(La(t)&&La(e)))return e;const i=(n?t:Object.keys(t)).length,o=n?e:Object.keys(e),s=o.length,a=n?new Array(s):{};let l=0;for(let c=0;c<s;c++){const u=n?c:o[c],f=t[u],d=e[u];if(f===d){a[u]=f,(n?c<i:Fm.call(t,u))&&l++;continue}if(f===null||d===null||typeof f!="object"||typeof d!="object"){a[u]=d;continue}const h=ld(f,d);a[u]=h,h===f&&l++}return i===s&&l===i?t:a}function Cc(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function La(t){if(!Oc(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Oc(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Oc(t){return Object.prototype.toString.call(t)==="[object Object]"}function Lm(t){return new Promise(e=>{_a.setTimeout(e,t)})}function $m(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ld(t,e):e}function Bm(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function jm(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var kl=Symbol();function cd(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===kl?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Vm(t,e,n){let r=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),r||(r=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var Ln,pn,Cr,Xf,Wm=(Xf=class extends Cs{constructor(){super();V(this,Ln);V(this,pn);V(this,Cr);$(this,Cr,e=>{if(!Os&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){v(this,pn)||this.setEventListener(v(this,Cr))}onUnsubscribe(){var e;this.hasListeners()||((e=v(this,pn))==null||e.call(this),$(this,pn,void 0))}setEventListener(e){var n;$(this,Cr,e),(n=v(this,pn))==null||n.call(this),$(this,pn,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){v(this,Ln)!==e&&($(this,Ln,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof v(this,Ln)=="boolean"?v(this,Ln):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ln=new WeakMap,pn=new WeakMap,Cr=new WeakMap,Xf),ud=new Wm;function Zm(){let t,e;const n=new Promise((i,o)=>{t=i,e=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var Um=Im;function qm(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=Um;const o=a=>{e?t.push(a):i(()=>{n(a)})},s=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||s()}return l},batchCalls:a=>(...l)=>{o(()=>{a(...l)})},schedule:o,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Be=qm(),Or,mn,Er,ed,Hm=(ed=class extends Cs{constructor(){super();V(this,Or,!0);V(this,mn);V(this,Er);$(this,Er,e=>{if(!Os&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){v(this,mn)||this.setEventListener(v(this,Er))}onUnsubscribe(){var e;this.hasListeners()||((e=v(this,mn))==null||e.call(this),$(this,mn,void 0))}setEventListener(e){var n;$(this,Er,e),(n=v(this,mn))==null||n.call(this),$(this,mn,e(this.setOnline.bind(this)))}setOnline(e){v(this,Or)!==e&&($(this,Or,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return v(this,Or)}},Or=new WeakMap,mn=new WeakMap,Er=new WeakMap,ed),ko=new Hm;function Ym(t){return Math.min(1e3*2**t,3e4)}function fd(t){return(t??"online")==="online"?ko.isOnline():!0}var $a=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function dd(t){let e=!1,n=0,r;const i=Zm(),o=()=>i.status!=="pending",s=m=>{var g;if(!o()){const y=new $a(m);d(y),(g=t.onCancel)==null||g.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>ud.isFocused()&&(t.networkMode==="always"||ko.isOnline())&&t.canRun(),u=()=>fd(t.networkMode)&&t.canRun(),f=m=>{o()||(r==null||r(),i.resolve(m))},d=m=>{o()||(r==null||r(),i.reject(m))},h=()=>new Promise(m=>{var g;r=y=>{(o()||c())&&m(y)},(g=t.onPause)==null||g.call(t)}).then(()=>{var m;r=void 0,o()||(m=t.onContinue)==null||m.call(t)}),p=()=>{if(o())return;let m;const g=n===0?t.initialPromise:void 0;try{m=g??t.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(f).catch(y=>{var N;if(o())return;const S=t.retry??(Os?0:3),w=t.retryDelay??Ym,k=typeof w=="function"?w(n,y):w,T=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,y);if(e||!T){d(y);return}n++,(N=t.onFail)==null||N.call(t,n,y),Lm(k).then(()=>c()?void 0:h()).then(()=>{e?d(y):p()})})};return{promise:i,status:()=>i.status,cancel:s,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?p():h().then(p),i)}}var $n,td,hd=(td=class{constructor(){V(this,$n)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Pm(this.gcTime)&&$(this,$n,_a.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Os?1/0:300*1e3))}clearGcTimeout(){v(this,$n)&&(_a.clearTimeout(v(this,$n)),$(this,$n,void 0))}},$n=new WeakMap,td),Bn,Dr,it,jn,we,_i,Vn,mt,Vt,nd,Jm=(nd=class extends hd{constructor(e){super();V(this,mt);V(this,Bn);V(this,Dr);V(this,it);V(this,jn);V(this,we);V(this,_i);V(this,Vn);$(this,Vn,!1),$(this,_i,e.defaultOptions),this.setOptions(e.options),this.observers=[],$(this,jn,e.client),$(this,it,v(this,jn).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,$(this,Bn,Dc(this.options)),this.state=e.state??v(this,Bn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=v(this,we))==null?void 0:e.promise}setOptions(e){if(this.options={...v(this,_i),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Dc(this.options);n.data!==void 0&&(this.setState(Ec(n.data,n.dataUpdatedAt)),$(this,Bn,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&v(this,it).remove(this)}setData(e,n){const r=$m(this.state.data,e,this.options);return Ie(this,mt,Vt).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ie(this,mt,Vt).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=v(this,we))==null?void 0:r.promise;return(i=v(this,we))==null||i.cancel(e),n?n.then(pt).catch(pt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(v(this,Bn))}isActive(){return this.observers.some(e=>_m(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===kl||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Fa(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!zm(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=v(this,we))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=v(this,we))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),v(this,it).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(v(this,we)&&(v(this,Vn)?v(this,we).cancel({revert:!0}):v(this,we).cancelRetry()),this.scheduleGc()),v(this,it).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ie(this,mt,Vt).call(this,{type:"invalidate"})}async fetch(e,n){var l,c,u,f,d,h,p,m,g,y,S,w;if(this.state.fetchStatus!=="idle"&&((l=v(this,we))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(v(this,we))return v(this,we).continueRetry(),v(this,we).promise}if(e&&this.setOptions(e),!this.options.queryFn){const k=this.observers.find(T=>T.options.queryFn);k&&this.setOptions(k.options)}const r=new AbortController,i=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>($(this,Vn,!0),r.signal)})},o=()=>{const k=cd(this.options,n),N=(()=>{const O={client:v(this,jn),queryKey:this.queryKey,meta:this.meta};return i(O),O})();return $(this,Vn,!1),this.options.persister?this.options.persister(k,N,this):k(N)},a=(()=>{const k={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:v(this,jn),state:this.state,fetchFn:o};return i(k),k})();(c=this.options.behavior)==null||c.onFetch(a,this),$(this,Dr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ie(this,mt,Vt).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta}),$(this,we,dd({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:k=>{k instanceof $a&&k.revert&&this.setState({...v(this,Dr),fetchStatus:"idle"}),r.abort()},onFail:(k,T)=>{Ie(this,mt,Vt).call(this,{type:"failed",failureCount:k,error:T})},onPause:()=>{Ie(this,mt,Vt).call(this,{type:"pause"})},onContinue:()=>{Ie(this,mt,Vt).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const k=await v(this,we).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(h=(d=v(this,it).config).onSuccess)==null||h.call(d,k,this),(m=(p=v(this,it).config).onSettled)==null||m.call(p,k,this.state.error,this),k}catch(k){if(k instanceof $a){if(k.silent)return v(this,we).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Ie(this,mt,Vt).call(this,{type:"error",error:k}),(y=(g=v(this,it).config).onError)==null||y.call(g,k,this),(w=(S=v(this,it).config).onSettled)==null||w.call(S,this.state.data,k,this),k}finally{this.scheduleGc()}}},Bn=new WeakMap,Dr=new WeakMap,it=new WeakMap,jn=new WeakMap,we=new WeakMap,_i=new WeakMap,Vn=new WeakMap,mt=new WeakSet,Vt=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Km(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,...Ec(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return $(this,Dr,e.manual?i:void 0),i;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Be.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),v(this,it).notify({query:this,type:"updated",action:e})})},nd);function Km(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:fd(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Ec(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Dc(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function Tc(t){return{onFetch:(e,n)=>{var u,f,d,h,p;const r=e.options,i=(d=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:d.direction,o=((h=e.state.data)==null?void 0:h.pages)||[],s=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const g=w=>{Vm(w,()=>e.signal,()=>m=!0)},y=cd(e.options,e.fetchOptions),S=async(w,k,T)=>{if(m)return Promise.reject();if(k==null&&w.pages.length)return Promise.resolve(w);const O=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:k,direction:T?"backward":"forward",meta:e.options.meta};return g(L),L})(),C=await y(O),{maxPages:P}=e.options,F=T?jm:Bm;return{pages:F(w.pages,C,P),pageParams:F(w.pageParams,k,P)}};if(i&&o.length){const w=i==="backward",k=w?Gm:Nc,T={pages:o,pageParams:s},N=k(r,T);a=await S(T,N,w)}else{const w=t??o.length;do{const k=l===0?s[0]??r.initialPageParam:Nc(r,a);if(l>0&&k==null)break;a=await S(a,k),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var m,g;return(g=(m=e.options).persister)==null?void 0:g.call(m,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function Nc(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Gm(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Fi,Et,$e,Wn,Dt,on,rd,Qm=(rd=class extends hd{constructor(e){super();V(this,Dt);V(this,Fi);V(this,Et);V(this,$e);V(this,Wn);$(this,Fi,e.client),this.mutationId=e.mutationId,$(this,$e,e.mutationCache),$(this,Et,[]),this.state=e.state||Xm(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){v(this,Et).includes(e)||(v(this,Et).push(e),this.clearGcTimeout(),v(this,$e).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){$(this,Et,v(this,Et).filter(n=>n!==e)),this.scheduleGc(),v(this,$e).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){v(this,Et).length||(this.state.status==="pending"?this.scheduleGc():v(this,$e).remove(this))}continue(){var e;return((e=v(this,Wn))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,a,l,c,u,f,d,h,p,m,g,y,S,w,k,T,N,O,C,P;const n=()=>{Ie(this,Dt,on).call(this,{type:"continue"})},r={client:v(this,Fi),meta:this.options.meta,mutationKey:this.options.mutationKey};$(this,Wn,dd({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(F,L)=>{Ie(this,Dt,on).call(this,{type:"failed",failureCount:F,error:L})},onPause:()=>{Ie(this,Dt,on).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>v(this,$e).canRun(this)}));const i=this.state.status==="pending",o=!v(this,Wn).canStart();try{if(i)n();else{Ie(this,Dt,on).call(this,{type:"pending",variables:e,isPaused:o}),await((a=(s=v(this,$e).config).onMutate)==null?void 0:a.call(s,e,this,r));const L=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,r));L!==this.state.context&&Ie(this,Dt,on).call(this,{type:"pending",context:L,variables:e,isPaused:o})}const F=await v(this,Wn).start();return await((f=(u=v(this,$e).config).onSuccess)==null?void 0:f.call(u,F,e,this.state.context,this,r)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,F,e,this.state.context,r)),await((m=(p=v(this,$e).config).onSettled)==null?void 0:m.call(p,F,null,this.state.variables,this.state.context,this,r)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,F,null,e,this.state.context,r)),Ie(this,Dt,on).call(this,{type:"success",data:F}),F}catch(F){try{await((w=(S=v(this,$e).config).onError)==null?void 0:w.call(S,F,e,this.state.context,this,r))}catch(L){Promise.reject(L)}try{await((T=(k=this.options).onError)==null?void 0:T.call(k,F,e,this.state.context,r))}catch(L){Promise.reject(L)}try{await((O=(N=v(this,$e).config).onSettled)==null?void 0:O.call(N,void 0,F,this.state.variables,this.state.context,this,r))}catch(L){Promise.reject(L)}try{await((P=(C=this.options).onSettled)==null?void 0:P.call(C,void 0,F,e,this.state.context,r))}catch(L){Promise.reject(L)}throw Ie(this,Dt,on).call(this,{type:"error",error:F}),F}finally{v(this,$e).runNext(this)}}},Fi=new WeakMap,Et=new WeakMap,$e=new WeakMap,Wn=new WeakMap,Dt=new WeakSet,on=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Be.batch(()=>{v(this,Et).forEach(r=>{r.onMutationUpdate(e)}),v(this,$e).notify({mutation:this,type:"updated",action:e})})},rd);function Xm(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ut,gt,Li,id,eg=(id=class extends Cs{constructor(e={}){super();V(this,Ut);V(this,gt);V(this,Li);this.config=e,$(this,Ut,new Set),$(this,gt,new Map),$(this,Li,0)}build(e,n,r){const i=new Qm({client:e,mutationCache:this,mutationId:++Gi(this,Li)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){v(this,Ut).add(e);const n=Qi(e);if(typeof n=="string"){const r=v(this,gt).get(n);r?r.push(e):v(this,gt).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(v(this,Ut).delete(e)){const n=Qi(e);if(typeof n=="string"){const r=v(this,gt).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&v(this,gt).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Qi(e);if(typeof n=="string"){const r=v(this,gt).get(n),i=r==null?void 0:r.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Qi(e);if(typeof n=="string"){const i=(r=v(this,gt).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Be.batch(()=>{v(this,Ut).forEach(e=>{this.notify({type:"removed",mutation:e})}),v(this,Ut).clear(),v(this,gt).clear()})}getAll(){return Array.from(v(this,Ut))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Sc(n,r))}findAll(e={}){return this.getAll().filter(n=>Sc(e,n))}notify(e){Be.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Be.batch(()=>Promise.all(e.map(n=>n.continue().catch(pt))))}},Ut=new WeakMap,gt=new WeakMap,Li=new WeakMap,id);function Qi(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Tt,od,tg=(od=class extends Cs{constructor(e={}){super();V(this,Tt);this.config=e,$(this,Tt,new Map)}build(e,n,r){const i=n.queryKey,o=n.queryHash??xl(i,n);let s=this.get(o);return s||(s=new Jm({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){v(this,Tt).has(e.queryHash)||(v(this,Tt).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=v(this,Tt).get(e.queryHash);n&&(e.destroy(),n===e&&v(this,Tt).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Be.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return v(this,Tt).get(e)}getAll(){return[...v(this,Tt).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>kc(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>kc(e,r)):n}notify(e){Be.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Be.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Be.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Tt=new WeakMap,od),se,gn,yn,Tr,Nr,bn,Mr,Ar,sd,XD=(sd=class{constructor(t={}){V(this,se);V(this,gn);V(this,yn);V(this,Tr);V(this,Nr);V(this,bn);V(this,Mr);V(this,Ar);$(this,se,t.queryCache||new tg),$(this,gn,t.mutationCache||new eg),$(this,yn,t.defaultOptions||{}),$(this,Tr,new Map),$(this,Nr,new Map),$(this,bn,0)}mount(){Gi(this,bn)._++,v(this,bn)===1&&($(this,Mr,ud.subscribe(async t=>{t&&(await this.resumePausedMutations(),v(this,se).onFocus())})),$(this,Ar,ko.subscribe(async t=>{t&&(await this.resumePausedMutations(),v(this,se).onOnline())})))}unmount(){var t,e;Gi(this,bn)._--,v(this,bn)===0&&((t=v(this,Mr))==null||t.call(this),$(this,Mr,void 0),(e=v(this,Ar))==null||e.call(this),$(this,Ar,void 0))}isFetching(t){return v(this,se).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return v(this,gn).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=v(this,se).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=v(this,se).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Fa(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return v(this,se).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=v(this,se).get(r.queryHash),o=i==null?void 0:i.state.data,s=Rm(e,o);if(s!==void 0)return v(this,se).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(t,e,n){return Be.batch(()=>v(this,se).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=v(this,se).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=v(this,se);Be.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=v(this,se);return Be.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Be.batch(()=>v(this,se).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(pt).catch(pt)}invalidateQueries(t,e={}){return Be.batch(()=>(v(this,se).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Be.batch(()=>v(this,se).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(pt)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(pt)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=v(this,se).build(this,e);return n.isStaleByTime(Fa(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(pt).catch(pt)}fetchInfiniteQuery(t){return t.behavior=Tc(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(pt).catch(pt)}ensureInfiniteQueryData(t){return t.behavior=Tc(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ko.isOnline()?v(this,gn).resumePausedMutations():Promise.resolve()}getQueryCache(){return v(this,se)}getMutationCache(){return v(this,gn)}getDefaultOptions(){return v(this,yn)}setDefaultOptions(t){$(this,yn,t)}setQueryDefaults(t,e){v(this,Tr).set(wi(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...v(this,Tr).values()],n={};return e.forEach(r=>{vi(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){v(this,Nr).set(wi(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...v(this,Nr).values()],n={};return e.forEach(r=>{vi(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...v(this,yn).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=xl(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===kl&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...v(this,yn).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){v(this,se).clear(),v(this,gn).clear()}},se=new WeakMap,gn=new WeakMap,yn=new WeakMap,Tr=new WeakMap,Nr=new WeakMap,bn=new WeakMap,Mr=new WeakMap,Ar=new WeakMap,sd);function ng(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Es=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Fr(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Sl(t){return"nodeType"in t}function Ze(t){var e,n;return t?Fr(t)?t:Sl(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Cl(t){const{Document:e}=Ze(t);return t instanceof e}function $i(t){return Fr(t)?!1:t instanceof Ze(t).HTMLElement}function pd(t){return t instanceof Ze(t).SVGElement}function Lr(t){return t?Fr(t)?t.document:Sl(t)?Cl(t)?t:$i(t)||pd(t)?t.ownerDocument:document:document:document}const bt=Es?b.useLayoutEffect:b.useEffect;function Ds(t){const e=b.useRef(t);return bt(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function rg(){const t=b.useRef(null),e=b.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=b.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function xi(t,e){e===void 0&&(e=[t]);const n=b.useRef(t);return bt(()=>{n.current!==t&&(n.current=t)},e),n}function Bi(t,e){const n=b.useRef();return b.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function So(t){const e=Ds(t),n=b.useRef(null),r=b.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Co(t){const e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}let Ys={};function ji(t,e){return b.useMemo(()=>{if(e)return e;const n=Ys[t]==null?0:Ys[t]+1;return Ys[t]=n,t+"-"+n},[t,e])}function md(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,s)=>{const a=Object.entries(s);for(const[l,c]of a){const u=o[l];u!=null&&(o[l]=u+t*c)}return o},{...e})}}const wr=md(1),ki=md(-1);function ig(t){return"clientX"in t&&"clientY"in t}function Ts(t){if(!t)return!1;const{KeyboardEvent:e}=Ze(t.target);return e&&t instanceof e}function og(t){if(!t)return!1;const{TouchEvent:e}=Ze(t.target);return e&&t instanceof e}function Oo(t){if(og(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return ig(t)?{x:t.clientX,y:t.clientY}:null}const Jn=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Jn.Translate.toString(t),Jn.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Mc="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function sg(t){return t.matches(Mc)?t:t.querySelector(Mc)}const ag={display:"none"};function lg(t){let{id:e,value:n}=t;return re.createElement("div",{id:e,style:ag},n)}function cg(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return re.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function ug(){const[t,e]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const gd=b.createContext(null);function fg(t){const e=b.useContext(gd);b.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function dg(){const[t]=b.useState(()=>new Set),e=b.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[b.useCallback(r=>{let{type:i,event:o}=r;t.forEach(s=>{var a;return(a=s[i])==null?void 0:a.call(s,o)})},[t]),e]}const hg={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},pg={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function mg(t){let{announcements:e=pg,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=hg}=t;const{announce:o,announcement:s}=ug(),a=ji("DndLiveRegion"),[l,c]=b.useState(!1);if(b.useEffect(()=>{c(!0)},[]),fg(b.useMemo(()=>({onDragStart(f){let{active:d}=f;o(e.onDragStart({active:d}))},onDragMove(f){let{active:d,over:h}=f;e.onDragMove&&o(e.onDragMove({active:d,over:h}))},onDragOver(f){let{active:d,over:h}=f;o(e.onDragOver({active:d,over:h}))},onDragEnd(f){let{active:d,over:h}=f;o(e.onDragEnd({active:d,over:h}))},onDragCancel(f){let{active:d,over:h}=f;o(e.onDragCancel({active:d,over:h}))}}),[o,e])),!l)return null;const u=re.createElement(re.Fragment,null,re.createElement(lg,{id:r,value:i.draggable}),re.createElement(cg,{id:a,announcement:s}));return n?Qr.createPortal(u,n):u}var he;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(he||(he={}));function Eo(){}function eT(t,e){return b.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function tT(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const wt=Object.freeze({x:0,y:0});function Ol(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function gg(t,e){const n=Oo(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function El(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function yg(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Ba(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function yd(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Ac(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const nT=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=Ac(e,e.left,e.top),o=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const c=Ol(Ac(l),i);o.push({id:a,data:{droppableContainer:s,value:c}})}}return o.sort(El)},bg=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=Ba(e),o=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const c=Ba(l),u=i.reduce((d,h,p)=>d+Ol(c[p],h),0),f=Number((u/4).toFixed(4));o.push({id:a,data:{droppableContainer:s,value:f}})}}return o.sort(El)};function wg(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),s=i-r,a=o-n;if(r<i&&n<o){const l=e.width*e.height,c=t.width*t.height,u=s*a,f=u/(l+c-u);return Number(f.toFixed(4))}return 0}const vg=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const o of r){const{id:s}=o,a=n.get(s);if(a){const l=wg(a,e);l>0&&i.push({id:s,data:{droppableContainer:o,value:l}})}}return i.sort(yg)};function xg(t,e){const{top:n,left:r,bottom:i,right:o}=e;return n<=t.y&&t.y<=i&&r<=t.x&&t.x<=o}const rT=t=>{let{droppableContainers:e,droppableRects:n,pointerCoordinates:r}=t;if(!r)return[];const i=[];for(const o of e){const{id:s}=o,a=n.get(s);if(a&&xg(r,a)){const c=Ba(a).reduce((f,d)=>f+Ol(r,d),0),u=Number((c/4).toFixed(4));i.push({id:s,data:{droppableContainer:o,value:u}})}}return i.sort(El)};function kg(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function bd(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:wt}function Sg(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((s,a)=>({...s,top:s.top+t*a.y,bottom:s.bottom+t*a.y,left:s.left+t*a.x,right:s.right+t*a.x}),{...n})}}const Cg=Sg(1);function wd(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Og(t,e,n){const r=wd(e);if(!r)return t;const{scaleX:i,scaleY:o,x:s,y:a}=r,l=t.left-s-(1-i)*parseFloat(n),c=t.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?t.width/i:t.width,f=o?t.height/o:t.height;return{width:u,height:f,top:c,right:l+u,bottom:c+f,left:l}}const Eg={ignoreTransform:!1};function $r(t,e){e===void 0&&(e=Eg);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=Ze(t).getComputedStyle(t);c&&(n=Og(n,c,u))}const{top:r,left:i,width:o,height:s,bottom:a,right:l}=n;return{top:r,left:i,width:o,height:s,bottom:a,right:l}}function Ic(t){return $r(t,{ignoreTransform:!0})}function Dg(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Tg(t,e){return e===void 0&&(e=Ze(t).getComputedStyle(t)),e.position==="fixed"}function Ng(t,e){e===void 0&&(e=Ze(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=e[i];return typeof o=="string"?n.test(o):!1})}function Ns(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(Cl(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!$i(i)||pd(i)||n.includes(i))return n;const o=Ze(t).getComputedStyle(i);return i!==t&&Ng(i,o)&&n.push(i),Tg(i,o)?n:r(i.parentNode)}return t?r(t):n}function vd(t){const[e]=Ns(t,1);return e??null}function Js(t){return!Es||!t?null:Fr(t)?t:Sl(t)?Cl(t)||t===Lr(t).scrollingElement?window:$i(t)?t:null:null}function xd(t){return Fr(t)?t.scrollX:t.scrollLeft}function kd(t){return Fr(t)?t.scrollY:t.scrollTop}function ja(t){return{x:xd(t),y:kd(t)}}var ve;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ve||(ve={}));function Sd(t){return!Es||!t?!1:t===document.scrollingElement}function Cd(t){const e={x:0,y:0},n=Sd(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,s=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:s,isRight:a,maxScroll:r,minScroll:e}}const Mg={x:.2,y:.2};function Ag(t,e,n,r,i){let{top:o,left:s,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=Mg);const{isTop:c,isBottom:u,isLeft:f,isRight:d}=Cd(t),h={x:0,y:0},p={x:0,y:0},m={height:e.height*i.y,width:e.width*i.x};return!c&&o<=e.top+m.height?(h.y=ve.Backward,p.y=r*Math.abs((e.top+m.height-o)/m.height)):!u&&l>=e.bottom-m.height&&(h.y=ve.Forward,p.y=r*Math.abs((e.bottom-m.height-l)/m.height)),!d&&a>=e.right-m.width?(h.x=ve.Forward,p.x=r*Math.abs((e.right-m.width-a)/m.width)):!f&&s<=e.left+m.width&&(h.x=ve.Backward,p.x=r*Math.abs((e.left+m.width-s)/m.width)),{direction:h,speed:p}}function Ig(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function Od(t){return t.reduce((e,n)=>wr(e,ja(n)),wt)}function Rg(t){return t.reduce((e,n)=>e+xd(n),0)}function Pg(t){return t.reduce((e,n)=>e+kd(n),0)}function Ed(t,e){if(e===void 0&&(e=$r),!t)return;const{top:n,left:r,bottom:i,right:o}=e(t);vd(t)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const zg=[["x",["left","right"],Rg],["y",["top","bottom"],Pg]];class Dl{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ns(n),i=Od(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,a]of zg)for(const l of s)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=i[o]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class oi{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function _g(t){const{EventTarget:e}=Ze(t);return t instanceof e?t:Lr(t)}function Ks(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var ot;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ot||(ot={}));function Rc(t){t.preventDefault()}function Fg(t){t.stopPropagation()}var W;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(W||(W={}));const Dd={start:[W.Space,W.Enter],cancel:[W.Esc],end:[W.Space,W.Enter,W.Tab]},Lg=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case W.Right:return{...n,x:n.x+25};case W.Left:return{...n,x:n.x-25};case W.Down:return{...n,y:n.y+25};case W.Up:return{...n,y:n.y-25}}};class Td{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new oi(Lr(n)),this.windowListeners=new oi(Ze(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ot.Resize,this.handleCancel),this.windowListeners.add(ot.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ot.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Ed(r),n(wt)}handleKeyDown(e){if(Ts(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=Dd,coordinateGetter:s=Lg,scrollBehavior:a="smooth"}=i,{code:l}=e;if(o.end.includes(l)){this.handleEnd(e);return}if(o.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:wt;this.referenceCoordinates||(this.referenceCoordinates=u);const f=s(e,{active:n,context:r.current,currentCoordinates:u});if(f){const d=ki(f,u),h={x:0,y:0},{scrollableAncestors:p}=r.current;for(const m of p){const g=e.code,{isTop:y,isRight:S,isLeft:w,isBottom:k,maxScroll:T,minScroll:N}=Cd(m),O=Ig(m),C={x:Math.min(g===W.Right?O.right-O.width/2:O.right,Math.max(g===W.Right?O.left:O.left+O.width/2,f.x)),y:Math.min(g===W.Down?O.bottom-O.height/2:O.bottom,Math.max(g===W.Down?O.top:O.top+O.height/2,f.y))},P=g===W.Right&&!S||g===W.Left&&!w,F=g===W.Down&&!k||g===W.Up&&!y;if(P&&C.x!==f.x){const L=m.scrollLeft+d.x,ue=g===W.Right&&L<=T.x||g===W.Left&&L>=N.x;if(ue&&!d.y){m.scrollTo({left:L,behavior:a});return}ue?h.x=m.scrollLeft-L:h.x=g===W.Right?m.scrollLeft-T.x:m.scrollLeft-N.x,h.x&&m.scrollBy({left:-h.x,behavior:a});break}else if(F&&C.y!==f.y){const L=m.scrollTop+d.y,ue=g===W.Down&&L<=T.y||g===W.Up&&L>=N.y;if(ue&&!d.x){m.scrollTo({top:L,behavior:a});return}ue?h.y=m.scrollTop-L:h.y=g===W.Down?m.scrollTop-T.y:m.scrollTop-N.y,h.y&&m.scrollBy({top:-h.y,behavior:a});break}}this.handleMove(e,wr(ki(f,this.referenceCoordinates),h))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Td.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Dd,onActivation:i}=e,{active:o}=n;const{code:s}=t.nativeEvent;if(r.start.includes(s)){const a=o.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function Pc(t){return!!(t&&"distance"in t)}function zc(t){return!!(t&&"delay"in t)}class Tl{constructor(e,n,r){var i;r===void 0&&(r=_g(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:s}=o;this.props=e,this.events=n,this.document=Lr(s),this.documentListeners=new oi(this.document),this.listeners=new oi(r),this.windowListeners=new oi(Ze(s)),this.initialCoordinates=(i=Oo(o))!=null?i:wt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ot.Resize,this.handleCancel),this.windowListeners.add(ot.DragStart,Rc),this.windowListeners.add(ot.VisibilityChange,this.handleCancel),this.windowListeners.add(ot.ContextMenu,Rc),this.documentListeners.add(ot.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(zc(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Pc(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ot.Click,Fg,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ot.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!i)return;const l=(n=Oo(e))!=null?n:wt,c=ki(i,l);if(!r&&a){if(Pc(a)){if(a.tolerance!=null&&Ks(c,a.tolerance))return this.handleCancel();if(Ks(c,a.distance))return this.handleStart()}if(zc(a)&&Ks(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),s(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===W.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const $g={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Nd extends Tl{constructor(e){const{event:n}=e,r=Lr(n.target);super(e,$g,r)}}Nd.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Bg={move:{name:"mousemove"},end:{name:"mouseup"}};var Va;(function(t){t[t.RightClick=2]="RightClick"})(Va||(Va={}));class jg extends Tl{constructor(e){super(e,Bg,Lr(e.event.target))}}jg.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Va.RightClick?!1:(r==null||r({event:n}),!0)}}];const Gs={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Vg extends Tl{constructor(e){super(e,Gs)}static setup(){return window.addEventListener(Gs.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Gs.move.name,e)};function e(){}}}Vg.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var si;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(si||(si={}));var Do;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Do||(Do={}));function Wg(t){let{acceleration:e,activator:n=si.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:s=5,order:a=Do.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:f,threshold:d}=t;const h=Ug({delta:f,disabled:!o}),[p,m]=rg(),g=b.useRef({x:0,y:0}),y=b.useRef({x:0,y:0}),S=b.useMemo(()=>{switch(n){case si.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case si.DraggableRect:return i}},[n,i,l]),w=b.useRef(null),k=b.useCallback(()=>{const N=w.current;if(!N)return;const O=g.current.x*y.current.x,C=g.current.y*y.current.y;N.scrollBy(O,C)},[]),T=b.useMemo(()=>a===Do.TreeOrder?[...c].reverse():c,[a,c]);b.useEffect(()=>{if(!o||!c.length||!S){m();return}for(const N of T){if((r==null?void 0:r(N))===!1)continue;const O=c.indexOf(N),C=u[O];if(!C)continue;const{direction:P,speed:F}=Ag(N,C,S,e,d);for(const L of["x","y"])h[L][P[L]]||(F[L]=0,P[L]=0);if(F.x>0||F.y>0){m(),w.current=N,p(k,s),g.current=F,y.current=P;return}}g.current={x:0,y:0},y.current={x:0,y:0},m()},[e,k,r,m,o,s,JSON.stringify(S),JSON.stringify(h),p,c,T,u,JSON.stringify(d)])}const Zg={x:{[ve.Backward]:!1,[ve.Forward]:!1},y:{[ve.Backward]:!1,[ve.Forward]:!1}};function Ug(t){let{delta:e,disabled:n}=t;const r=Co(e);return Bi(i=>{if(n||!r||!i)return Zg;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[ve.Backward]:i.x[ve.Backward]||o.x===-1,[ve.Forward]:i.x[ve.Forward]||o.x===1},y:{[ve.Backward]:i.y[ve.Backward]||o.y===-1,[ve.Forward]:i.y[ve.Forward]||o.y===1}}},[n,e,r])}function qg(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Bi(i=>{var o;return e==null?null:(o=r??i)!=null?o:null},[r,e])}function Hg(t,e){return b.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,r)}));return[...n,...o]},[]),[t,e])}var Si;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Si||(Si={}));var Wa;(function(t){t.Optimized="optimized"})(Wa||(Wa={}));const _c=new Map;function Yg(t,e){let{dragging:n,dependencies:r,config:i}=e;const[o,s]=b.useState(null),{frequency:a,measure:l,strategy:c}=i,u=b.useRef(t),f=g(),d=xi(f),h=b.useCallback(function(y){y===void 0&&(y=[]),!d.current&&s(S=>S===null?y:S.concat(y.filter(w=>!S.includes(w))))},[d]),p=b.useRef(null),m=Bi(y=>{if(f&&!n)return _c;if(!y||y===_c||u.current!==t||o!=null){const S=new Map;for(let w of t){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){S.set(w.id,w.rect.current);continue}const k=w.node.current,T=k?new Dl(l(k),k):null;w.rect.current=T,T&&S.set(w.id,T)}return S}return y},[t,o,n,f,l]);return b.useEffect(()=>{u.current=t},[t]),b.useEffect(()=>{f||h()},[n,f]),b.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),b.useEffect(()=>{f||typeof a!="number"||p.current!==null||(p.current=setTimeout(()=>{h(),p.current=null},a))},[a,f,h,...r]),{droppableRects:m,measureDroppableContainers:h,measuringScheduled:o!=null};function g(){switch(c){case Si.Always:return!1;case Si.BeforeDragging:return n;default:return!n}}}function Nl(t,e){return Bi(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Jg(t,e){return Nl(t,e)}function Kg(t){let{callback:e,disabled:n}=t;const r=Ds(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Ms(t){let{callback:e,disabled:n}=t;const r=Ds(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Gg(t){return new Dl($r(t),t)}function Fc(t,e,n){e===void 0&&(e=Gg);const[r,i]=b.useState(null);function o(){i(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=e(t);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const s=Kg({callback(l){if(t)for(const c of l){const{type:u,target:f}=c;if(u==="childList"&&f instanceof HTMLElement&&f.contains(t)){o();break}}}}),a=Ms({callback:o});return bt(()=>{o(),t?(a==null||a.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),s==null||s.disconnect())},[t]),r}function Qg(t){const e=Nl(t);return bd(t,e)}const Lc=[];function Xg(t){const e=b.useRef(t),n=Bi(r=>t?r&&r!==Lc&&t&&e.current&&t.parentNode===e.current.parentNode?r:Ns(t):Lc,[t]);return b.useEffect(()=>{e.current=t},[t]),n}function ey(t){const[e,n]=b.useState(null),r=b.useRef(t),i=b.useCallback(o=>{const s=Js(o.target);s&&n(a=>a?(a.set(s,ja(s)),new Map(a)):null)},[]);return b.useEffect(()=>{const o=r.current;if(t!==o){s(o);const a=t.map(l=>{const c=Js(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,ja(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{s(t),s(o)};function s(a){a.forEach(l=>{const c=Js(l);c==null||c.removeEventListener("scroll",i)})}},[i,t]),b.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,s)=>wr(o,s),wt):Od(t):wt,[t,e])}function $c(t,e){e===void 0&&(e=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},e),b.useEffect(()=>{const r=t!==wt;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?ki(t,n.current):wt}function ty(t){b.useEffect(()=>{if(!Es)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function ny(t,e){return b.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=s=>{o(s,e)},n},{}),[t,e])}function Md(t){return b.useMemo(()=>t?Dg(t):null,[t])}const Bc=[];function ry(t,e){e===void 0&&(e=$r);const[n]=t,r=Md(n?Ze(n):null),[i,o]=b.useState(Bc);function s(){o(()=>t.length?t.map(l=>Sd(l)?r:new Dl(e(l),l)):Bc)}const a=Ms({callback:s});return bt(()=>{a==null||a.disconnect(),s(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function Ad(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return $i(e)?e:t}function iy(t){let{measure:e}=t;const[n,r]=b.useState(null),i=b.useCallback(c=>{for(const{target:u}of c)if($i(u)){r(f=>{const d=e(u);return f?{...f,width:d.width,height:d.height}:d});break}},[e]),o=Ms({callback:i}),s=b.useCallback(c=>{const u=Ad(c);o==null||o.disconnect(),u&&(o==null||o.observe(u)),r(u?e(u):null)},[e,o]),[a,l]=So(s);return b.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const oy=[{sensor:Nd,options:{}},{sensor:Td,options:{}}],sy={current:{}},mo={draggable:{measure:Ic},droppable:{measure:Ic,strategy:Si.WhileDragging,frequency:Wa.Optimized},dragOverlay:{measure:$r}};class ai extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const ay={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ai,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Eo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:mo,measureDroppableContainers:Eo,windowRect:null,measuringScheduled:!1},Id={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Eo,draggableNodes:new Map,over:null,measureDroppableContainers:Eo},Vi=b.createContext(Id),Rd=b.createContext(ay);function ly(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ai}}}function cy(t,e){switch(e.type){case he.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case he.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case he.DragEnd:case he.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case he.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new ai(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case he.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const s=new ai(t.droppable.containers);return s.set(n,{...o,disabled:i}),{...t,droppable:{...t.droppable,containers:s}}}case he.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new ai(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function uy(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=b.useContext(Vi),o=Co(r),s=Co(n==null?void 0:n.id);return b.useEffect(()=>{if(!e&&!r&&o&&s!=null){if(!Ts(o)||document.activeElement===o.target)return;const a=i.get(s);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const f=sg(u);if(f){f.focus();break}}})}},[r,e,i,s,o]),null}function Pd(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,o)=>o({transform:i,...r}),n):n}function fy(t){return b.useMemo(()=>({draggable:{...mo.draggable,...t==null?void 0:t.draggable},droppable:{...mo.droppable,...t==null?void 0:t.droppable},dragOverlay:{...mo.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function dy(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const o=b.useRef(!1),{x:s,y:a}=typeof i=="boolean"?{x:i,y:i}:i;bt(()=>{if(!s&&!a||!e){o.current=!1;return}if(o.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const u=n(c),f=bd(u,r);if(s||(f.x=0),a||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const d=vd(c);d&&d.scrollBy({top:f.y,left:f.x})}},[e,s,a,r,n])}const As=b.createContext({...wt,scaleX:1,scaleY:1});var an;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(an||(an={}));const iT=b.memo(function(e){var n,r,i,o;let{id:s,accessibility:a,autoScroll:l=!0,children:c,sensors:u=oy,collisionDetection:f=vg,measuring:d,modifiers:h,...p}=e;const m=b.useReducer(cy,void 0,ly),[g,y]=m,[S,w]=dg(),[k,T]=b.useState(an.Uninitialized),N=k===an.Initialized,{draggable:{active:O,nodes:C,translate:P},droppable:{containers:F}}=g,L=O!=null?C.get(O):null,ue=b.useRef({initial:null,translated:null}),Se=b.useMemo(()=>{var Ae;return O!=null?{id:O,data:(Ae=L==null?void 0:L.data)!=null?Ae:sy,rect:ue}:null},[O,L]),ye=b.useRef(null),[Ce,le]=b.useState(null),[J,z]=b.useState(null),et=xi(p,Object.values(p)),Jt=ji("DndDescribedBy",s),An=b.useMemo(()=>F.getEnabled(),[F]),be=fy(d),{droppableRects:G,measureDroppableContainers:ce,measuringScheduled:vt}=Yg(An,{dragging:N,dependencies:[P.x,P.y],config:be.droppable}),_e=qg(C,O),ne=b.useMemo(()=>J?Oo(J):null,[J]),ht=Nm(),Ue=Jg(_e,be.draggable.measure);dy({activeNode:O!=null?C.get(O):null,config:ht.layoutShiftCompensation,initialRect:Ue,measure:be.draggable.measure});const Z=Fc(_e,be.draggable.measure,Ue),zt=Fc(_e?_e.parentElement:null),Fe=b.useRef({activatorEvent:null,active:null,activeNode:_e,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),rr=F.getNodeFor((n=Fe.current.over)==null?void 0:n.id),_t=iy({measure:be.dragOverlay.measure}),ir=(r=_t.nodeRef.current)!=null?r:_e,or=N?(i=_t.rect)!=null?i:Z:null,hc=!!(_t.nodeRef.current&&_t.rect),pc=Qg(hc?null:Z),Zs=Md(ir?Ze(ir):null),Kt=Xg(N?rr??_e:null),Ji=ry(Kt),Ki=Pd(h,{transform:{x:P.x-pc.x,y:P.y-pc.y,scaleX:1,scaleY:1},activatorEvent:J,active:Se,activeNodeRect:Z,containerNodeRect:zt,draggingNodeRect:or,over:Fe.current.over,overlayNodeRect:_t.rect,scrollableAncestors:Kt,scrollableAncestorRects:Ji,windowRect:Zs}),mc=ne?wr(ne,P):null,gc=ey(Kt),km=$c(gc),Sm=$c(gc,[Z]),sr=wr(Ki,km),ar=or?Cg(or,Ki):null,Zr=Se&&ar?f({active:Se,collisionRect:ar,droppableRects:G,droppableContainers:An,pointerCoordinates:mc}):null,yc=yd(Zr,"id"),[Gt,bc]=b.useState(null),Cm=hc?Ki:wr(Ki,Sm),Om=kg(Cm,(o=Gt==null?void 0:Gt.rect)!=null?o:null,Z),Us=b.useRef(null),wc=b.useCallback((Ae,Ke)=>{let{sensor:Ge,options:Qt}=Ke;if(ye.current==null)return;const tt=C.get(ye.current);if(!tt)return;const Qe=Ae.nativeEvent,xt=new Ge({active:ye.current,activeNode:tt,event:Qe,options:Qt,context:Fe,onAbort(Oe){if(!C.get(Oe))return;const{onDragAbort:kt}=et.current,Ft={id:Oe};kt==null||kt(Ft),S({type:"onDragAbort",event:Ft})},onPending(Oe,Xt,kt,Ft){if(!C.get(Oe))return;const{onDragPending:qr}=et.current,en={id:Oe,constraint:Xt,initialCoordinates:kt,offset:Ft};qr==null||qr(en),S({type:"onDragPending",event:en})},onStart(Oe){const Xt=ye.current;if(Xt==null)return;const kt=C.get(Xt);if(!kt)return;const{onDragStart:Ft}=et.current,Ur={activatorEvent:Qe,active:{id:Xt,data:kt.data,rect:ue}};Qr.unstable_batchedUpdates(()=>{Ft==null||Ft(Ur),T(an.Initializing),y({type:he.DragStart,initialCoordinates:Oe,active:Xt}),S({type:"onDragStart",event:Ur}),le(Us.current),z(Qe)})},onMove(Oe){y({type:he.DragMove,coordinates:Oe})},onEnd:lr(he.DragEnd),onCancel:lr(he.DragCancel)});Us.current=xt;function lr(Oe){return async function(){const{active:kt,collisions:Ft,over:Ur,scrollAdjustedTranslate:qr}=Fe.current;let en=null;if(kt&&qr){const{cancelDrop:Hr}=et.current;en={activatorEvent:Qe,active:kt,collisions:Ft,delta:qr,over:Ur},Oe===he.DragEnd&&typeof Hr=="function"&&await Promise.resolve(Hr(en))&&(Oe=he.DragCancel)}ye.current=null,Qr.unstable_batchedUpdates(()=>{y({type:Oe}),T(an.Uninitialized),bc(null),le(null),z(null),Us.current=null;const Hr=Oe===he.DragEnd?"onDragEnd":"onDragCancel";if(en){const qs=et.current[Hr];qs==null||qs(en),S({type:Hr,event:en})}})}}},[C]),Em=b.useCallback((Ae,Ke)=>(Ge,Qt)=>{const tt=Ge.nativeEvent,Qe=C.get(Qt);if(ye.current!==null||!Qe||tt.dndKit||tt.defaultPrevented)return;const xt={active:Qe};Ae(Ge,Ke.options,xt)===!0&&(tt.dndKit={capturedBy:Ke.sensor},ye.current=Qt,wc(Ge,Ke))},[C,wc]),vc=Hg(u,Em);ty(u),bt(()=>{Z&&k===an.Initializing&&T(an.Initialized)},[Z,k]),b.useEffect(()=>{const{onDragMove:Ae}=et.current,{active:Ke,activatorEvent:Ge,collisions:Qt,over:tt}=Fe.current;if(!Ke||!Ge)return;const Qe={active:Ke,activatorEvent:Ge,collisions:Qt,delta:{x:sr.x,y:sr.y},over:tt};Qr.unstable_batchedUpdates(()=>{Ae==null||Ae(Qe),S({type:"onDragMove",event:Qe})})},[sr.x,sr.y]),b.useEffect(()=>{const{active:Ae,activatorEvent:Ke,collisions:Ge,droppableContainers:Qt,scrollAdjustedTranslate:tt}=Fe.current;if(!Ae||ye.current==null||!Ke||!tt)return;const{onDragOver:Qe}=et.current,xt=Qt.get(yc),lr=xt&&xt.rect.current?{id:xt.id,rect:xt.rect.current,data:xt.data,disabled:xt.disabled}:null,Oe={active:Ae,activatorEvent:Ke,collisions:Ge,delta:{x:tt.x,y:tt.y},over:lr};Qr.unstable_batchedUpdates(()=>{bc(lr),Qe==null||Qe(Oe),S({type:"onDragOver",event:Oe})})},[yc]),bt(()=>{Fe.current={activatorEvent:J,active:Se,activeNode:_e,collisionRect:ar,collisions:Zr,droppableRects:G,draggableNodes:C,draggingNode:ir,draggingNodeRect:or,droppableContainers:F,over:Gt,scrollableAncestors:Kt,scrollAdjustedTranslate:sr},ue.current={initial:or,translated:ar}},[Se,_e,Zr,ar,C,ir,or,G,F,Gt,Kt,sr]),Wg({...ht,delta:P,draggingRect:ar,pointerCoordinates:mc,scrollableAncestors:Kt,scrollableAncestorRects:Ji});const Dm=b.useMemo(()=>({active:Se,activeNode:_e,activeNodeRect:Z,activatorEvent:J,collisions:Zr,containerNodeRect:zt,dragOverlay:_t,draggableNodes:C,droppableContainers:F,droppableRects:G,over:Gt,measureDroppableContainers:ce,scrollableAncestors:Kt,scrollableAncestorRects:Ji,measuringConfiguration:be,measuringScheduled:vt,windowRect:Zs}),[Se,_e,Z,J,Zr,zt,_t,C,F,G,Gt,ce,Kt,Ji,be,vt,Zs]),Tm=b.useMemo(()=>({activatorEvent:J,activators:vc,active:Se,activeNodeRect:Z,ariaDescribedById:{draggable:Jt},dispatch:y,draggableNodes:C,over:Gt,measureDroppableContainers:ce}),[J,vc,Se,Z,y,Jt,C,Gt,ce]);return re.createElement(gd.Provider,{value:w},re.createElement(Vi.Provider,{value:Tm},re.createElement(Rd.Provider,{value:Dm},re.createElement(As.Provider,{value:Om},c)),re.createElement(uy,{disabled:(a==null?void 0:a.restoreFocus)===!1})),re.createElement(mg,{...a,hiddenTextDescribedById:Jt}));function Nm(){const Ae=(Ce==null?void 0:Ce.autoScrollEnabled)===!1,Ke=typeof l=="object"?l.enabled===!1:l===!1,Ge=N&&!Ae&&!Ke;return typeof l=="object"?{...l,enabled:Ge}:{enabled:Ge}}}),hy=b.createContext(null),jc="button",py="Draggable";function my(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const o=ji(py),{activators:s,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:f,over:d}=b.useContext(Vi),{role:h=jc,roleDescription:p="draggable",tabIndex:m=0}=i??{},g=(l==null?void 0:l.id)===e,y=b.useContext(g?As:hy),[S,w]=So(),[k,T]=So(),N=ny(s,e),O=xi(n);bt(()=>(f.set(e,{id:e,key:o,node:S,activatorNode:k,data:O}),()=>{const P=f.get(e);P&&P.key===o&&f.delete(e)}),[f,e]);const C=b.useMemo(()=>({role:h,tabIndex:m,"aria-disabled":r,"aria-pressed":g&&h===jc?!0:void 0,"aria-roledescription":p,"aria-describedby":u.draggable}),[r,h,m,g,p,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:C,isDragging:g,listeners:r?void 0:N,node:S,over:d,setNodeRef:w,setActivatorNodeRef:T,transform:y}}function zd(){return b.useContext(Rd)}const gy="Droppable",yy={timeout:25};function by(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const o=ji(gy),{active:s,dispatch:a,over:l,measureDroppableContainers:c}=b.useContext(Vi),u=b.useRef({disabled:n}),f=b.useRef(!1),d=b.useRef(null),h=b.useRef(null),{disabled:p,updateMeasurementsFor:m,timeout:g}={...yy,...i},y=xi(m??r),S=b.useCallback(()=>{if(!f.current){f.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{c(Array.isArray(y.current)?y.current:[y.current]),h.current=null},g)},[g]),w=Ms({callback:S,disabled:p||!s}),k=b.useCallback((C,P)=>{w&&(P&&(w.unobserve(P),f.current=!1),C&&w.observe(C))},[w]),[T,N]=So(k),O=xi(e);return b.useEffect(()=>{!w||!T.current||(w.disconnect(),f.current=!1,w.observe(T.current))},[T,w]),b.useEffect(()=>(a({type:he.RegisterDroppable,element:{id:r,key:o,disabled:n,node:T,rect:d,data:O}}),()=>a({type:he.UnregisterDroppable,key:o,id:r})),[r]),b.useEffect(()=>{n!==u.current.disabled&&(a({type:he.SetDroppableDisabled,id:r,key:o,disabled:n}),u.current.disabled=n)},[r,o,n,a]),{active:s,rect:d,isOver:(l==null?void 0:l.id)===r,node:T,over:l,setNodeRef:N}}function wy(t){let{animation:e,children:n}=t;const[r,i]=b.useState(null),[o,s]=b.useState(null),a=Co(n);return!n&&!r&&a&&i(a),bt(()=>{if(!o)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){i(null);return}Promise.resolve(e(c,o)).then(()=>{i(null)})},[e,r,o]),re.createElement(re.Fragment,null,n,r?b.cloneElement(r,{ref:s}):null)}const vy={x:0,y:0,scaleX:1,scaleY:1};function xy(t){let{children:e}=t;return re.createElement(Vi.Provider,{value:Id},re.createElement(As.Provider,{value:vy},e))}const ky={position:"fixed",touchAction:"none"},Sy=t=>Ts(t)?"transform 250ms ease":void 0,Cy=b.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:o,className:s,rect:a,style:l,transform:c,transition:u=Sy}=t;if(!a)return null;const f=i?c:{...c,scaleX:1,scaleY:1},d={...ky,width:a.width,height:a.height,top:a.top,left:a.left,transform:Jn.Transform.toString(f),transformOrigin:i&&r?gg(r,a):void 0,transition:typeof u=="function"?u(r):u,...l};return re.createElement(n,{className:s,style:d,ref:e},o)}),Oy=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:o,className:s}=t;if(o!=null&&o.active)for(const[a,l]of Object.entries(o.active))l!==void 0&&(i[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(o!=null&&o.dragOverlay)for(const[a,l]of Object.entries(o.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(const[l,c]of Object.entries(i))n.node.style.setProperty(l,c);s!=null&&s.active&&n.node.classList.remove(s.active)}},Ey=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Jn.Transform.toString(e)},{transform:Jn.Transform.toString(n)}]},Dy={duration:250,easing:"ease",keyframes:Ey,sideEffects:Oy({styles:{active:{opacity:"0"}}})};function Ty(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return Ds((o,s)=>{if(e===null)return;const a=n.get(o);if(!a)return;const l=a.node.current;if(!l)return;const c=Ad(s);if(!c)return;const{transform:u}=Ze(s).getComputedStyle(s),f=wd(u);if(!f)return;const d=typeof e=="function"?e:Ny(e);return Ed(l,i.draggable.measure),d({active:{id:o,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:s,rect:i.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:i,transform:f})})}function Ny(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={...Dy,...t};return o=>{let{active:s,dragOverlay:a,transform:l,...c}=o;if(!e)return;const u={x:a.rect.left-s.rect.left,y:a.rect.top-s.rect.top},f={scaleX:l.scaleX!==1?s.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?s.rect.height*l.scaleY/a.rect.height:1},d={x:l.x-u.x,y:l.y-u.y,...f},h=i({...c,active:s,dragOverlay:a,transform:{initial:l,final:d}}),[p]=h,m=h[h.length-1];if(JSON.stringify(p)===JSON.stringify(m))return;const g=r==null?void 0:r({active:s,dragOverlay:a,...c}),y=a.node.animate(h,{duration:e,easing:n,fill:"forwards"});return new Promise(S=>{y.onfinish=()=>{g==null||g(),S()}})}}let Vc=0;function My(t){return b.useMemo(()=>{if(t!=null)return Vc++,Vc},[t])}const oT=re.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:o,modifiers:s,wrapperElement:a="div",className:l,zIndex:c=999}=t;const{activatorEvent:u,active:f,activeNodeRect:d,containerNodeRect:h,draggableNodes:p,droppableContainers:m,dragOverlay:g,over:y,measuringConfiguration:S,scrollableAncestors:w,scrollableAncestorRects:k,windowRect:T}=zd(),N=b.useContext(As),O=My(f==null?void 0:f.id),C=Pd(s,{activatorEvent:u,active:f,activeNodeRect:d,containerNodeRect:h,draggingNodeRect:g.rect,over:y,overlayNodeRect:g.rect,scrollableAncestors:w,scrollableAncestorRects:k,transform:N,windowRect:T}),P=Nl(d),F=Ty({config:r,draggableNodes:p,droppableContainers:m,measuringConfiguration:S}),L=P?g.setRef:void 0;return re.createElement(xy,null,re.createElement(wy,{animation:F},f&&O?re.createElement(Cy,{key:O,id:f.id,ref:L,as:a,activatorEvent:u,adjustScale:e,className:l,transition:o,rect:P,style:{zIndex:c,...i},transform:C},n):null))}),Ay=(t,e)=>e.some(n=>t instanceof n);let Wc,Zc;function Iy(){return Wc||(Wc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ry(){return Zc||(Zc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _d=new WeakMap,Za=new WeakMap,Fd=new WeakMap,Qs=new WeakMap,Ml=new WeakMap;function Py(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(kn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&_d.set(n,t)}).catch(()=>{}),Ml.set(e,t),e}function zy(t){if(Za.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Za.set(t,e)}let Ua={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Za.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fd.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _y(t){Ua=t(Ua)}function Fy(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Xs(this),e,...n);return Fd.set(r,e.sort?e.sort():[e]),kn(r)}:Ry().includes(t)?function(...e){return t.apply(Xs(this),e),kn(_d.get(this))}:function(...e){return kn(t.apply(Xs(this),e))}}function Ly(t){return typeof t=="function"?Fy(t):(t instanceof IDBTransaction&&zy(t),Ay(t,Iy())?new Proxy(t,Ua):t)}function kn(t){if(t instanceof IDBRequest)return Py(t);if(Qs.has(t))return Qs.get(t);const e=Ly(t);return e!==t&&(Qs.set(t,e),Ml.set(e,t)),e}const Xs=t=>Ml.get(t);function sT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=kn(s);return r&&s.addEventListener("upgradeneeded",l=>{r(kn(s.result),l.oldVersion,l.newVersion,kn(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const $y=["get","getKey","getAll","getAllKeys","count"],By=["put","add","delete","clear"],ea=new Map;function Uc(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ea.get(e))return ea.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=By.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$y.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return ea.set(e,o),o}_y(t=>({...t,get:(e,n,r)=>Uc(e,n)||t.get(e,n,r),has:(e,n)=>!!Uc(e,n)||t.has(e,n)}));function aT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ld(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Ld(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function lT(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Ld(t))&&(r&&(r+=" "),r+=e);return r}const jy=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},Vy=(t,e)=>({classGroupId:t,validator:e}),$d=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),To="-",qc=[],Wy="arbitrary..",Zy=t=>{const e=qy(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{if(s.startsWith("[")&&s.endsWith("]"))return Uy(s);const a=s.split(To),l=a[0]===""&&a.length>1?1:0;return Bd(a,l,e)},getConflictingClassGroupIds:(s,a)=>{if(a){const l=r[s],c=n[s];return l?c?jy(c,l):l:c||qc}return n[s]||qc}}},Bd=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],o=n.nextPart.get(i);if(o){const c=Bd(t,e+1,o);if(c)return c}const s=n.validators;if(s===null)return;const a=e===0?t.join(To):t.slice(e).join(To),l=s.length;for(let c=0;c<l;c++){const u=s[c];if(u.validator(a))return u.classGroupId}},Uy=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?Wy+r:void 0})(),qy=t=>{const{theme:e,classGroups:n}=t;return Hy(n,e)},Hy=(t,e)=>{const n=$d();for(const r in t){const i=t[r];Al(i,n,r,e)}return n},Al=(t,e,n,r)=>{const i=t.length;for(let o=0;o<i;o++){const s=t[o];Yy(s,e,n,r)}},Yy=(t,e,n,r)=>{if(typeof t=="string"){Jy(t,e,n);return}if(typeof t=="function"){Ky(t,e,n,r);return}Gy(t,e,n,r)},Jy=(t,e,n)=>{const r=t===""?e:jd(e,t);r.classGroupId=n},Ky=(t,e,n,r)=>{if(Qy(t)){Al(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(Vy(n,t))},Gy=(t,e,n,r)=>{const i=Object.entries(t),o=i.length;for(let s=0;s<o;s++){const[a,l]=i[s];Al(l,jd(e,a),n,r)}},jd=(t,e)=>{let n=t;const r=e.split(To),i=r.length;for(let o=0;o<i;o++){const s=r[o];let a=n.nextPart.get(s);a||(a=$d(),n.nextPart.set(s,a)),n=a}return n},Qy=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,Xy=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(o,s)=>{n[o]=s,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(o){let s=n[o];if(s!==void 0)return s;if((s=r[o])!==void 0)return i(o,s),s},set(o,s){o in n?n[o]=s:i(o,s)}}},qa="!",Hc=":",eb=[],Yc=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),tb=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const o=[];let s=0,a=0,l=0,c;const u=i.length;for(let m=0;m<u;m++){const g=i[m];if(s===0&&a===0){if(g===Hc){o.push(i.slice(l,m)),l=m+1;continue}if(g==="/"){c=m;continue}}g==="["?s++:g==="]"?s--:g==="("?a++:g===")"&&a--}const f=o.length===0?i:i.slice(l);let d=f,h=!1;f.endsWith(qa)?(d=f.slice(0,-1),h=!0):f.startsWith(qa)&&(d=f.slice(1),h=!0);const p=c&&c>l?c-l:void 0;return Yc(o,h,d,p)};if(e){const i=e+Hc,o=r;r=s=>s.startsWith(i)?o(s.slice(i.length)):Yc(eb,!1,s,void 0,!0)}if(n){const i=r;r=o=>n({className:o,parseClassName:i})}return r},nb=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let o=0;o<n.length;o++){const s=n[o],a=s[0]==="[",l=e.has(s);a||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(s)):i.push(s)}return i.length>0&&(i.sort(),r.push(...i)),r}},rb=t=>({cache:Xy(t.cacheSize),parseClassName:tb(t),sortModifiers:nb(t),...Zy(t)}),ib=/\s+/,ob=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,s=[],a=t.trim().split(ib);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:f,modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(u);if(f){l=u+(l.length>0?" "+l:l);continue}let g=!!m,y=r(g?p.substring(0,m):p);if(!y){if(!g){l=u+(l.length>0?" "+l:l);continue}if(y=r(p),!y){l=u+(l.length>0?" "+l:l);continue}g=!1}const S=d.length===0?"":d.length===1?d[0]:o(d).join(":"),w=h?S+qa:S,k=w+y;if(s.indexOf(k)>-1)continue;s.push(k);const T=i(y,g);for(let N=0;N<T.length;++N){const O=T[N];s.push(w+O)}l=u+(l.length>0?" "+l:l)}return l},sb=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=Vd(n))&&(i&&(i+=" "),i+=r);return i},Vd=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Vd(t[r]))&&(n&&(n+=" "),n+=e);return n},ab=(t,...e)=>{let n,r,i,o;const s=l=>{const c=e.reduce((u,f)=>f(u),t());return n=rb(c),r=n.cache.get,i=n.cache.set,o=a,a(l)},a=l=>{const c=r(l);if(c)return c;const u=ob(l,n);return i(l,u),u};return o=s,(...l)=>o(sb(...l))},lb=[],de=t=>{const e=n=>n[t]||lb;return e.isThemeGetter=!0,e},Wd=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Zd=/^\((?:(\w[\w-]*):)?(.+)\)$/i,cb=/^\d+\/\d+$/,ub=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fb=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,db=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,hb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,cr=t=>cb.test(t),j=t=>!!t&&!Number.isNaN(Number(t)),tn=t=>!!t&&Number.isInteger(Number(t)),ta=t=>t.endsWith("%")&&j(t.slice(0,-1)),Lt=t=>ub.test(t),mb=()=>!0,gb=t=>fb.test(t)&&!db.test(t),Ud=()=>!1,yb=t=>hb.test(t),bb=t=>pb.test(t),wb=t=>!A(t)&&!I(t),vb=t=>Br(t,Yd,Ud),A=t=>Wd.test(t),In=t=>Br(t,Jd,gb),na=t=>Br(t,Ob,j),Jc=t=>Br(t,qd,Ud),xb=t=>Br(t,Hd,bb),Xi=t=>Br(t,Kd,yb),I=t=>Zd.test(t),Yr=t=>jr(t,Jd),kb=t=>jr(t,Eb),Kc=t=>jr(t,qd),Sb=t=>jr(t,Yd),Cb=t=>jr(t,Hd),eo=t=>jr(t,Kd,!0),Br=(t,e,n)=>{const r=Wd.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},jr=(t,e,n=!1)=>{const r=Zd.exec(t);return r?r[1]?e(r[1]):n:!1},qd=t=>t==="position"||t==="percentage",Hd=t=>t==="image"||t==="url",Yd=t=>t==="length"||t==="size"||t==="bg-size",Jd=t=>t==="length",Ob=t=>t==="number",Eb=t=>t==="family-name",Kd=t=>t==="shadow",Db=()=>{const t=de("color"),e=de("font"),n=de("text"),r=de("font-weight"),i=de("tracking"),o=de("leading"),s=de("breakpoint"),a=de("container"),l=de("spacing"),c=de("radius"),u=de("shadow"),f=de("inset-shadow"),d=de("text-shadow"),h=de("drop-shadow"),p=de("blur"),m=de("perspective"),g=de("aspect"),y=de("ease"),S=de("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...k(),I,A],N=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],C=()=>[I,A,l],P=()=>[cr,"full","auto",...C()],F=()=>[tn,"none","subgrid",I,A],L=()=>["auto",{span:["full",tn,I,A]},tn,I,A],ue=()=>[tn,"auto",I,A],Se=()=>["auto","min","max","fr",I,A],ye=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ce=()=>["start","end","center","stretch","center-safe","end-safe"],le=()=>["auto",...C()],J=()=>[cr,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],z=()=>[t,I,A],et=()=>[...k(),Kc,Jc,{position:[I,A]}],Jt=()=>["no-repeat",{repeat:["","x","y","space","round"]}],An=()=>["auto","cover","contain",Sb,vb,{size:[I,A]}],be=()=>[ta,Yr,In],G=()=>["","none","full",c,I,A],ce=()=>["",j,Yr,In],vt=()=>["solid","dashed","dotted","double"],_e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ne=()=>[j,ta,Kc,Jc],ht=()=>["","none",p,I,A],Ue=()=>["none",j,I,A],Z=()=>["none",j,I,A],zt=()=>[j,I,A],Fe=()=>[cr,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Lt],breakpoint:[Lt],color:[mb],container:[Lt],"drop-shadow":[Lt],ease:["in","out","in-out"],font:[wb],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Lt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Lt],shadow:[Lt],spacing:["px",j],text:[Lt],"text-shadow":[Lt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",cr,A,I,g]}],container:["container"],columns:[{columns:[j,A,I,a]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[tn,"auto",I,A]}],basis:[{basis:[cr,"full","auto",a,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[j,cr,"auto","initial","none",A]}],grow:[{grow:["",j,I,A]}],shrink:[{shrink:["",j,I,A]}],order:[{order:[tn,"first","last","none",I,A]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":ue()}],"col-end":[{"col-end":ue()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":ue()}],"row-end":[{"row-end":ue()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Se()}],"auto-rows":[{"auto-rows":Se()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...ye(),"normal"]}],"justify-items":[{"justify-items":[...Ce(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ce()]}],"align-content":[{content:["normal",...ye()]}],"align-items":[{items:[...Ce(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ce(),{baseline:["","last"]}]}],"place-content":[{"place-content":ye()}],"place-items":[{"place-items":[...Ce(),"baseline"]}],"place-self":[{"place-self":["auto",...Ce()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:le()}],mx:[{mx:le()}],my:[{my:le()}],ms:[{ms:le()}],me:[{me:le()}],mt:[{mt:le()}],mr:[{mr:le()}],mb:[{mb:le()}],ml:[{ml:le()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:J()}],w:[{w:[a,"screen",...J()]}],"min-w":[{"min-w":[a,"screen","none",...J()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...J()]}],h:[{h:["screen","lh",...J()]}],"min-h":[{"min-h":["screen","lh","none",...J()]}],"max-h":[{"max-h":["screen","lh",...J()]}],"font-size":[{text:["base",n,Yr,In]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,I,na]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ta,A]}],"font-family":[{font:[kb,A,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,I,A]}],"line-clamp":[{"line-clamp":[j,"none",I,na]}],leading:[{leading:[o,...C()]}],"list-image":[{"list-image":["none",I,A]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",I,A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...vt(),"wavy"]}],"text-decoration-thickness":[{decoration:[j,"from-font","auto",I,In]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[j,"auto",I,A]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",I,A]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",I,A]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:et()}],"bg-repeat":[{bg:Jt()}],"bg-size":[{bg:An()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},tn,I,A],radial:["",I,A],conic:[tn,I,A]},Cb,xb]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:be()}],"gradient-via-pos":[{via:be()}],"gradient-to-pos":[{to:be()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:G()}],"rounded-s":[{"rounded-s":G()}],"rounded-e":[{"rounded-e":G()}],"rounded-t":[{"rounded-t":G()}],"rounded-r":[{"rounded-r":G()}],"rounded-b":[{"rounded-b":G()}],"rounded-l":[{"rounded-l":G()}],"rounded-ss":[{"rounded-ss":G()}],"rounded-se":[{"rounded-se":G()}],"rounded-ee":[{"rounded-ee":G()}],"rounded-es":[{"rounded-es":G()}],"rounded-tl":[{"rounded-tl":G()}],"rounded-tr":[{"rounded-tr":G()}],"rounded-br":[{"rounded-br":G()}],"rounded-bl":[{"rounded-bl":G()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...vt(),"hidden","none"]}],"divide-style":[{divide:[...vt(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...vt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[j,I,A]}],"outline-w":[{outline:["",j,Yr,In]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",u,eo,Xi]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",f,eo,Xi]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[j,In]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",d,eo,Xi]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[j,I,A]}],"mix-blend":[{"mix-blend":[..._e(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":_e()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[j]}],"mask-image-linear-from-pos":[{"mask-linear-from":ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":ne()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":ne()}],"mask-image-t-to-pos":[{"mask-t-to":ne()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":ne()}],"mask-image-r-to-pos":[{"mask-r-to":ne()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":ne()}],"mask-image-b-to-pos":[{"mask-b-to":ne()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":ne()}],"mask-image-l-to-pos":[{"mask-l-to":ne()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":ne()}],"mask-image-x-to-pos":[{"mask-x-to":ne()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":ne()}],"mask-image-y-to-pos":[{"mask-y-to":ne()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[I,A]}],"mask-image-radial-from-pos":[{"mask-radial-from":ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":ne()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[j]}],"mask-image-conic-from-pos":[{"mask-conic-from":ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":ne()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:et()}],"mask-repeat":[{mask:Jt()}],"mask-size":[{mask:An()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",I,A]}],filter:[{filter:["","none",I,A]}],blur:[{blur:ht()}],brightness:[{brightness:[j,I,A]}],contrast:[{contrast:[j,I,A]}],"drop-shadow":[{"drop-shadow":["","none",h,eo,Xi]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",j,I,A]}],"hue-rotate":[{"hue-rotate":[j,I,A]}],invert:[{invert:["",j,I,A]}],saturate:[{saturate:[j,I,A]}],sepia:[{sepia:["",j,I,A]}],"backdrop-filter":[{"backdrop-filter":["","none",I,A]}],"backdrop-blur":[{"backdrop-blur":ht()}],"backdrop-brightness":[{"backdrop-brightness":[j,I,A]}],"backdrop-contrast":[{"backdrop-contrast":[j,I,A]}],"backdrop-grayscale":[{"backdrop-grayscale":["",j,I,A]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[j,I,A]}],"backdrop-invert":[{"backdrop-invert":["",j,I,A]}],"backdrop-opacity":[{"backdrop-opacity":[j,I,A]}],"backdrop-saturate":[{"backdrop-saturate":[j,I,A]}],"backdrop-sepia":[{"backdrop-sepia":["",j,I,A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",I,A]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[j,"initial",I,A]}],ease:[{ease:["linear","initial",y,I,A]}],delay:[{delay:[j,I,A]}],animate:[{animate:["none",S,I,A]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,I,A]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:Ue()}],"rotate-x":[{"rotate-x":Ue()}],"rotate-y":[{"rotate-y":Ue()}],"rotate-z":[{"rotate-z":Ue()}],scale:[{scale:Z()}],"scale-x":[{"scale-x":Z()}],"scale-y":[{"scale-y":Z()}],"scale-z":[{"scale-z":Z()}],"scale-3d":["scale-3d"],skew:[{skew:zt()}],"skew-x":[{"skew-x":zt()}],"skew-y":[{"skew-y":zt()}],transform:[{transform:[I,A,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Fe()}],"translate-x":[{"translate-x":Fe()}],"translate-y":[{"translate-y":Fe()}],"translate-z":[{"translate-z":Fe()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",I,A]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",I,A]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[j,Yr,In,na]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},cT=ab(Db);function x(t,e,n){function r(a,l){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:l,constr:s,traits:new Set},enumerable:!1}),a._zod.traits.has(t))return;a._zod.traits.add(t),e(a,l);const c=s.prototype,u=Object.keys(c);for(let f=0;f<u.length;f++){const d=u[f];d in a||(a[d]=c[d].bind(a))}}const i=(n==null?void 0:n.Parent)??Object;class o extends i{}Object.defineProperty(o,"name",{value:t});function s(a){var l;const c=n!=null&&n.Parent?new o:this;r(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>{var l,c;return n!=null&&n.Parent&&a instanceof n.Parent?!0:(c=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:c.has(t)}}),Object.defineProperty(s,"name",{value:t}),s}class vr extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Gd extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const Ha={};function Yt(t){return t&&Object.assign(Ha,t),Ha}function Qd(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function Ya(t,e){return typeof e=="bigint"?e.toString():e}function Il(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Rl(t){return t==null}function Pl(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function Tb(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let i=(r.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(r)){const l=r.match(/\d?e-(\d?)/);l!=null&&l[1]&&(i=Number.parseInt(l[1]))}const o=n>i?n:i,s=Number.parseInt(t.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return s%a/10**o}const Gc=Symbol("evaluating");function K(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==Gc)return r===void 0&&(r=Gc,r=n()),r},set(i){Object.defineProperty(t,e,{value:i})},configurable:!0})}function er(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function tr(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function Qc(t){return JSON.stringify(t)}function Nb(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Xd="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function No(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const Mb=Il(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Ir(t){if(No(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(No(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function eh(t){return Ir(t)?{...t}:Array.isArray(t)?[...t]:t}const Ab=new Set(["string","number","symbol"]);function Is(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Tn(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function R(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Ib(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const Rb={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Pb(t,e){const n=t._zod.def,r=tr(t._zod.def,{get shape(){const i={};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(i[o]=n.shape[o])}return er(this,"shape",i),i},checks:[]});return Tn(t,r)}function zb(t,e){const n=t._zod.def,r=tr(t._zod.def,{get shape(){const i={...t._zod.def.shape};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete i[o]}return er(this,"shape",i),i},checks:[]});return Tn(t,r)}function _b(t,e){if(!Ir(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=tr(t._zod.def,{get shape(){const o={...t._zod.def.shape,...e};return er(this,"shape",o),o},checks:[]});return Tn(t,i)}function Fb(t,e){if(!Ir(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return er(this,"shape",r),r},checks:t._zod.def.checks};return Tn(t,n)}function Lb(t,e){const n=tr(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return er(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Tn(t,n)}function $b(t,e,n){const r=tr(e._zod.def,{get shape(){const i=e._zod.def.shape,o={...i};if(n)for(const s in n){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=t?new t({type:"optional",innerType:i[s]}):i[s])}else for(const s in i)o[s]=t?new t({type:"optional",innerType:i[s]}):i[s];return er(this,"shape",o),o},checks:[]});return Tn(e,r)}function Bb(t,e,n){const r=tr(e._zod.def,{get shape(){const i=e._zod.def.shape,o={...i};if(n)for(const s in n){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=new t({type:"nonoptional",innerType:i[s]}))}else for(const s in i)o[s]=new t({type:"nonoptional",innerType:i[s]});return er(this,"shape",o),o},checks:[]});return Tn(e,r)}function yr(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function br(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function to(t){return typeof t=="string"?t:t==null?void 0:t.message}function En(t,e,n){var i,o,s,a,l,c;const r={...t,path:t.path??[]};if(!t.message){const u=to((s=(o=(i=t.inst)==null?void 0:i._zod.def)==null?void 0:o.error)==null?void 0:s.call(o,t))??to((a=e==null?void 0:e.error)==null?void 0:a.call(e,t))??to((l=n.customError)==null?void 0:l.call(n,t))??to((c=n.localeError)==null?void 0:c.call(n,t))??"Invalid input";r.message=u}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function zl(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Ci(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const th=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Ya,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},nh=x("$ZodError",th),rh=x("$ZodError",th,{Parent:Error});function jb(t,e=n=>n.message){const n={},r=[];for(const i of t.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}function Vb(t,e=n=>n.message){const n={_errors:[]},r=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(s=>r({issues:s}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)n._errors.push(e(o));else{let s=n,a=0;for(;a<o.path.length;){const l=o.path[a];a===o.path.length-1?(s[l]=s[l]||{_errors:[]},s[l]._errors.push(e(o))):s[l]=s[l]||{_errors:[]},s=s[l],a++}}};return r(t),n}const _l=t=>(e,n,r,i)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},s=e._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new vr;if(s.issues.length){const a=new((i==null?void 0:i.Err)??t)(s.issues.map(l=>En(l,o,Yt())));throw Xd(a,i==null?void 0:i.callee),a}return s.value},Fl=t=>async(e,n,r,i)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:n,issues:[]},o);if(s instanceof Promise&&(s=await s),s.issues.length){const a=new((i==null?void 0:i.Err)??t)(s.issues.map(l=>En(l,o,Yt())));throw Xd(a,i==null?void 0:i.callee),a}return s.value},Rs=t=>(e,n,r)=>{const i=r?{...r,async:!1}:{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new vr;return o.issues.length?{success:!1,error:new(t??nh)(o.issues.map(s=>En(s,i,Yt())))}:{success:!0,data:o.value}},Wb=Rs(rh),Ps=t=>async(e,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(s=>En(s,i,Yt())))}:{success:!0,data:o.value}},Zb=Ps(rh),Ub=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return _l(t)(e,n,i)},qb=t=>(e,n,r)=>_l(t)(e,n,r),Hb=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Fl(t)(e,n,i)},Yb=t=>async(e,n,r)=>Fl(t)(e,n,r),Jb=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Rs(t)(e,n,i)},Kb=t=>(e,n,r)=>Rs(t)(e,n,r),Gb=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ps(t)(e,n,i)},Qb=t=>async(e,n,r)=>Ps(t)(e,n,r),Xb=/^[cC][^\s-]{8,}$/,e0=/^[0-9a-z]+$/,t0=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,n0=/^[0-9a-vA-V]{20}$/,r0=/^[A-Za-z0-9]{27}$/,i0=/^[a-zA-Z0-9_-]{21}$/,o0=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,s0=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Xc=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,a0=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,l0="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function c0(){return new RegExp(l0,"u")}const u0=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,f0=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,d0=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,h0=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,p0=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ih=/^[A-Za-z0-9_-]*$/,m0=/^\+(?:[0-9]){6,14}[0-9]$/,oh="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",g0=new RegExp(`^${oh}$`);function sh(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function y0(t){return new RegExp(`^${sh(t)}$`)}function b0(t){const e=sh({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${oh}T(?:${r})$`)}const w0=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},v0=/^-?\d+$/,x0=/^-?\d+(?:\.\d+)?/,k0=/^(?:true|false)$/i,S0=/^null$/i,C0=/^undefined$/i,O0=/^[^A-Z]*$/,E0=/^[^a-z]*$/,Je=x("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),ah={number:"number",bigint:"bigint",object:"date"},lh=x("$ZodCheckLessThan",(t,e)=>{Je.init(t,e);const n=ah[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,o=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),ch=x("$ZodCheckGreaterThan",(t,e)=>{Je.init(t,e);const n=ah[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,o=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),D0=x("$ZodCheckMultipleOf",(t,e)=>{Je.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):Tb(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),T0=x("$ZodCheckNumberFormat",(t,e)=>{var s;Je.init(t,e),e.format=e.format||"float64";const n=(s=e.format)==null?void 0:s.includes("int"),r=n?"int":"number",[i,o]=Rb[e.format];t._zod.onattach.push(a=>{const l=a._zod.bag;l.format=e.format,l.minimum=i,l.maximum=o,n&&(l.pattern=v0)}),t._zod.check=a=>{const l=a.value;if(n){if(!Number.isInteger(l)){a.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:l,inst:t});return}if(!Number.isSafeInteger(l)){l>0?a.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):a.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}l<i&&a.issues.push({origin:"number",input:l,code:"too_small",minimum:i,inclusive:!0,inst:t,continue:!e.abort}),l>o&&a.issues.push({origin:"number",input:l,code:"too_big",maximum:o,inst:t})}}),N0=x("$ZodCheckMaxLength",(t,e)=>{var n;Je.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!Rl(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const i=r.value;if(i.length<=e.maximum)return;const s=zl(i);r.issues.push({origin:s,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),M0=x("$ZodCheckMinLength",(t,e)=>{var n;Je.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!Rl(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const i=r.value;if(i.length>=e.minimum)return;const s=zl(i);r.issues.push({origin:s,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),A0=x("$ZodCheckLengthEquals",(t,e)=>{var n;Je.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!Rl(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),t._zod.check=r=>{const i=r.value,o=i.length;if(o===e.length)return;const s=zl(i),a=o>e.length;r.issues.push({origin:s,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),zs=x("$ZodCheckStringFormat",(t,e)=>{var n,r;Je.init(t,e),t._zod.onattach.push(i=>{const o=i._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),I0=x("$ZodCheckRegex",(t,e)=>{zs.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),R0=x("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=O0),zs.init(t,e)}),P0=x("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=E0),zs.init(t,e)}),z0=x("$ZodCheckIncludes",(t,e)=>{Je.init(t,e);const n=Is(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(i=>{const o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:t,continue:!e.abort})}}),_0=x("$ZodCheckStartsWith",(t,e)=>{Je.init(t,e);const n=new RegExp(`^${Is(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),F0=x("$ZodCheckEndsWith",(t,e)=>{Je.init(t,e);const n=new RegExp(`.*${Is(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),L0=x("$ZodCheckOverwrite",(t,e)=>{Je.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class $0{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(s=>s),i=Math.min(...r.map(s=>s.length-s.trimStart().length)),o=r.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(const s of o)this.content.push(s)}compile(){const e=Function,n=this==null?void 0:this.args,i=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new e(...n,i.join(`
`))}}const B0={major:4,minor:2,patch:1},X=x("$ZodType",(t,e)=>{var i;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=B0;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const o of r)for(const s of o._zod.onattach)s(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(i=t._zod.deferred)==null||i.push(()=>{t._zod.run=t._zod.parse});else{const o=(a,l,c)=>{let u=yr(a),f;for(const d of l){if(d._zod.def.when){if(!d._zod.def.when(a))continue}else if(u)continue;const h=a.issues.length,p=d._zod.check(a);if(p instanceof Promise&&(c==null?void 0:c.async)===!1)throw new vr;if(f||p instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await p,a.issues.length!==h&&(u||(u=yr(a,h)))});else{if(a.issues.length===h)continue;u||(u=yr(a,h))}}return f?f.then(()=>a):a},s=(a,l,c)=>{if(yr(a))return a.aborted=!0,a;const u=o(l,r,c);if(u instanceof Promise){if(c.async===!1)throw new vr;return u.then(f=>t._zod.parse(f,c))}return t._zod.parse(u,c)};t._zod.run=(a,l)=>{if(l.skipChecks)return t._zod.parse(a,l);if(l.direction==="backward"){const u=t._zod.parse({value:a.value,issues:[]},{...l,skipChecks:!0});return u instanceof Promise?u.then(f=>s(f,a,l)):s(u,a,l)}const c=t._zod.parse(a,l);if(c instanceof Promise){if(l.async===!1)throw new vr;return c.then(u=>o(u,r,l))}return o(c,r,l)}}t["~standard"]={validate:o=>{var s;try{const a=Wb(t,o);return a.success?{value:a.data}:{issues:(s=a.error)==null?void 0:s.issues}}catch{return Zb(t,o).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),Ll=x("$ZodString",(t,e)=>{var n;X.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??w0(t._zod.bag),t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),ee=x("$ZodStringFormat",(t,e)=>{zs.init(t,e),Ll.init(t,e)}),j0=x("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=s0),ee.init(t,e)}),V0=x("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Xc(r))}else e.pattern??(e.pattern=Xc());ee.init(t,e)}),W0=x("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=a0),ee.init(t,e)}),Z0=x("$ZodURL",(t,e)=>{ee.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),i=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),U0=x("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=c0()),ee.init(t,e)}),q0=x("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=i0),ee.init(t,e)}),H0=x("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=Xb),ee.init(t,e)}),Y0=x("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=e0),ee.init(t,e)}),J0=x("$ZodULID",(t,e)=>{e.pattern??(e.pattern=t0),ee.init(t,e)}),K0=x("$ZodXID",(t,e)=>{e.pattern??(e.pattern=n0),ee.init(t,e)}),G0=x("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=r0),ee.init(t,e)}),Q0=x("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=b0(e)),ee.init(t,e)}),X0=x("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=g0),ee.init(t,e)}),ew=x("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=y0(e)),ee.init(t,e)}),tw=x("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=o0),ee.init(t,e)}),nw=x("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=u0),ee.init(t,e),t._zod.bag.format="ipv4"}),rw=x("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=f0),ee.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),iw=x("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=d0),ee.init(t,e)}),ow=x("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=h0),ee.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[i,o]=r;if(!o)throw new Error;const s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function uh(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const sw=x("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=p0),ee.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{uh(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function aw(t){if(!ih.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return uh(n)}const lw=x("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=ih),ee.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{aw(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),cw=x("$ZodE164",(t,e)=>{e.pattern??(e.pattern=m0),ee.init(t,e)});function uw(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const fw=x("$ZodJWT",(t,e)=>{ee.init(t,e),t._zod.check=n=>{uw(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),fh=x("$ZodNumber",(t,e)=>{X.init(t,e),t._zod.pattern=t._zod.bag.pattern??x0,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:t,...o?{received:o}:{}}),n}}),dw=x("$ZodNumberFormat",(t,e)=>{T0.init(t,e),fh.init(t,e)}),hw=x("$ZodBoolean",(t,e)=>{X.init(t,e),t._zod.pattern=k0,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:t}),n}}),pw=x("$ZodUndefined",(t,e)=>{X.init(t,e),t._zod.pattern=C0,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(n,r)=>{const i=n.value;return typeof i>"u"||n.issues.push({expected:"undefined",code:"invalid_type",input:i,inst:t}),n}}),mw=x("$ZodNull",(t,e)=>{X.init(t,e),t._zod.pattern=S0,t._zod.values=new Set([null]),t._zod.parse=(n,r)=>{const i=n.value;return i===null||n.issues.push({expected:"null",code:"invalid_type",input:i,inst:t}),n}}),gw=x("$ZodUnknown",(t,e)=>{X.init(t,e),t._zod.parse=n=>n}),yw=x("$ZodNever",(t,e)=>{X.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),bw=x("$ZodDate",(t,e)=>{X.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const i=n.value,o=i instanceof Date;return o&&!Number.isNaN(i.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:i,...o?{received:"Invalid Date"}:{},inst:t}),n}});function eu(t,e,n){t.issues.length&&e.issues.push(...br(n,t.issues)),e.value[n]=t.value}const ww=x("$ZodArray",(t,e)=>{X.init(t,e),t._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),n;n.value=Array(i.length);const o=[];for(let s=0;s<i.length;s++){const a=i[s],l=e.element._zod.run({value:a,issues:[]},r);l instanceof Promise?o.push(l.then(c=>eu(c,n,s))):eu(l,n,s)}return o.length?Promise.all(o).then(()=>n):n}});function Mo(t,e,n,r){t.issues.length&&e.issues.push(...br(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function dh(t){var r,i,o,s;const e=Object.keys(t.shape);for(const a of e)if(!((s=(o=(i=(r=t.shape)==null?void 0:r[a])==null?void 0:i._zod)==null?void 0:o.traits)!=null&&s.has("$ZodType")))throw new Error(`Invalid element at key "${a}": expected a Zod schema`);const n=Ib(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function hh(t,e,n,r,i,o){const s=[],a=i.keySet,l=i.catchall._zod,c=l.def.type;for(const u in e){if(a.has(u))continue;if(c==="never"){s.push(u);continue}const f=l.run({value:e[u],issues:[]},r);f instanceof Promise?t.push(f.then(d=>Mo(d,n,u,e))):Mo(f,n,u,e)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:e,inst:o}),t.length?Promise.all(t).then(()=>n):n}const vw=x("$ZodObject",(t,e)=>{X.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const a=e.shape;Object.defineProperty(e,"shape",{get:()=>{const l={...a};return Object.defineProperty(e,"shape",{value:l}),l}})}const r=Il(()=>dh(e));K(t._zod,"propValues",()=>{const a=e.shape,l={};for(const c in a){const u=a[c]._zod;if(u.values){l[c]??(l[c]=new Set);for(const f of u.values)l[c].add(f)}}return l});const i=No,o=e.catchall;let s;t._zod.parse=(a,l)=>{s??(s=r.value);const c=a.value;if(!i(c))return a.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),a;a.value={};const u=[],f=s.shape;for(const d of s.keys){const p=f[d]._zod.run({value:c[d],issues:[]},l);p instanceof Promise?u.push(p.then(m=>Mo(m,a,d,c))):Mo(p,a,d,c)}return o?hh(u,c,a,l,r.value,t):u.length?Promise.all(u).then(()=>a):a}}),xw=x("$ZodObjectJIT",(t,e)=>{vw.init(t,e);const n=t._zod.parse,r=Il(()=>dh(e)),i=d=>{const h=new $0(["shape","payload","ctx"]),p=r.value,m=w=>{const k=Qc(w);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`};h.write("const input = payload.value;");const g=Object.create(null);let y=0;for(const w of p.keys)g[w]=`key_${y++}`;h.write("const newResult = {};");for(const w of p.keys){const k=g[w],T=Qc(w);h.write(`const ${k} = ${m(w)};`),h.write(`
        if (${k}.issues.length) {
          payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${T}, ...iss.path] : [${T}]
          })));
        }
        
        
        if (${k}.value === undefined) {
          if (${T} in input) {
            newResult[${T}] = undefined;
          }
        } else {
          newResult[${T}] = ${k}.value;
        }
        
      `)}h.write("payload.value = newResult;"),h.write("return payload;");const S=h.compile();return(w,k)=>S(d,w,k)};let o;const s=No,a=!Ha.jitless,c=a&&Mb.value,u=e.catchall;let f;t._zod.parse=(d,h)=>{f??(f=r.value);const p=d.value;return s(p)?a&&c&&(h==null?void 0:h.async)===!1&&h.jitless!==!0?(o||(o=i(e.shape)),d=o(d,h),u?hh([],p,d,h,f,t):d):n(d,h):(d.issues.push({expected:"object",code:"invalid_type",input:p,inst:t}),d)}});function tu(t,e,n,r){for(const o of t)if(o.issues.length===0)return e.value=o.value,e;const i=t.filter(o=>!yr(o));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(o=>o.issues.map(s=>En(s,r,Yt())))}),e)}const kw=x("$ZodUnion",(t,e)=>{X.init(t,e),K(t._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),K(t._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),K(t._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),K(t._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${i.map(o=>Pl(o.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(i,o)=>{if(n)return r(i,o);let s=!1;const a=[];for(const l of e.options){const c=l._zod.run({value:i.value,issues:[]},o);if(c instanceof Promise)a.push(c),s=!0;else{if(c.issues.length===0)return c;a.push(c)}}return s?Promise.all(a).then(l=>tu(l,i,t,o)):tu(a,i,t,o)}}),Sw=x("$ZodIntersection",(t,e)=>{X.init(t,e),t._zod.parse=(n,r)=>{const i=n.value,o=e.left._zod.run({value:i,issues:[]},r),s=e.right._zod.run({value:i,issues:[]},r);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([l,c])=>nu(n,l,c)):nu(n,o,s)}});function Ja(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Ir(t)&&Ir(e)){const n=Object.keys(e),r=Object.keys(t).filter(o=>n.indexOf(o)!==-1),i={...t,...e};for(const o of r){const s=Ja(t[o],e[o]);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};i[o]=s.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const i=t[r],o=e[r],s=Ja(i,o);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function nu(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),yr(t))return t;const r=Ja(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const Cw=x("$ZodRecord",(t,e)=>{X.init(t,e),t._zod.parse=(n,r)=>{const i=n.value;if(!Ir(i))return n.issues.push({expected:"record",code:"invalid_type",input:i,inst:t}),n;const o=[],s=e.keyType._zod.values;if(s){n.value={};const a=new Set;for(const c of s)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){a.add(typeof c=="number"?c.toString():c);const u=e.valueType._zod.run({value:i[c],issues:[]},r);u instanceof Promise?o.push(u.then(f=>{f.issues.length&&n.issues.push(...br(c,f.issues)),n.value[c]=f.value})):(u.issues.length&&n.issues.push(...br(c,u.issues)),n.value[c]=u.value)}let l;for(const c in i)a.has(c)||(l=l??[],l.push(c));l&&l.length>0&&n.issues.push({code:"unrecognized_keys",input:i,inst:t,keys:l})}else{n.value={};for(const a of Reflect.ownKeys(i)){if(a==="__proto__")continue;const l=e.keyType._zod.run({value:a,issues:[]},r);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){e.mode==="loose"?n.value[a]=i[a]:n.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(u=>En(u,r,Yt())),input:a,path:[a],inst:t});continue}const c=e.valueType._zod.run({value:i[a],issues:[]},r);c instanceof Promise?o.push(c.then(u=>{u.issues.length&&n.issues.push(...br(a,u.issues)),n.value[l.value]=u.value})):(c.issues.length&&n.issues.push(...br(a,c.issues)),n.value[l.value]=c.value)}}return o.length?Promise.all(o).then(()=>n):n}}),Ow=x("$ZodEnum",(t,e)=>{X.init(t,e);const n=Qd(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(i=>Ab.has(typeof i)).map(i=>typeof i=="string"?Is(i):i.toString()).join("|")})$`),t._zod.parse=(i,o)=>{const s=i.value;return r.has(s)||i.issues.push({code:"invalid_value",values:n,input:s,inst:t}),i}}),Ew=x("$ZodTransform",(t,e)=>{X.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Gd(t.constructor.name);const i=e.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(n.value=s,n));if(i instanceof Promise)throw new vr;return n.value=i,n}});function ru(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const Dw=x("$ZodOptional",(t,e)=>{X.init(t,e),t._zod.optin="optional",t._zod.optout="optional",K(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),K(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Pl(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>ru(o,n.value)):ru(i,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),Tw=x("$ZodNullable",(t,e)=>{X.init(t,e),K(t._zod,"optin",()=>e.innerType._zod.optin),K(t._zod,"optout",()=>e.innerType._zod.optout),K(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Pl(n.source)}|null)$`):void 0}),K(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),Nw=x("$ZodDefault",(t,e)=>{X.init(t,e),t._zod.optin="optional",K(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>iu(o,e)):iu(i,e)}});function iu(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const Mw=x("$ZodPrefault",(t,e)=>{X.init(t,e),t._zod.optin="optional",K(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),Aw=x("$ZodNonOptional",(t,e)=>{X.init(t,e),K(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>ou(o,t)):ou(i,t)}});function ou(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const Iw=x("$ZodCatch",(t,e)=>{X.init(t,e),K(t._zod,"optin",()=>e.innerType._zod.optin),K(t._zod,"optout",()=>e.innerType._zod.optout),K(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>(n.value=o.value,o.issues.length&&(n.value=e.catchValue({...n,error:{issues:o.issues.map(s=>En(s,r,Yt()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(o=>En(o,r,Yt()))},input:n.value}),n.issues=[]),n)}}),Rw=x("$ZodPipe",(t,e)=>{X.init(t,e),K(t._zod,"values",()=>e.in._zod.values),K(t._zod,"optin",()=>e.in._zod.optin),K(t._zod,"optout",()=>e.out._zod.optout),K(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const o=e.out._zod.run(n,r);return o instanceof Promise?o.then(s=>no(s,e.in,r)):no(o,e.in,r)}const i=e.in._zod.run(n,r);return i instanceof Promise?i.then(o=>no(o,e.out,r)):no(i,e.out,r)}});function no(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const Pw=x("$ZodReadonly",(t,e)=>{X.init(t,e),K(t._zod,"propValues",()=>e.innerType._zod.propValues),K(t._zod,"values",()=>e.innerType._zod.values),K(t._zod,"optin",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),K(t._zod,"optout",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(su):su(i)}});function su(t){return t.value=Object.freeze(t.value),t}const zw=x("$ZodCustom",(t,e)=>{Je.init(t,e),X.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,i=e.fn(r);if(i instanceof Promise)return i.then(o=>au(o,n,r,t));au(i,n,r,t)}});function au(t,e,n,r){if(!t){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(Ci(i))}}var lu;class _w{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Fw(){return new _w}(lu=globalThis).__zod_globalRegistry??(lu.__zod_globalRegistry=Fw());const Xr=globalThis.__zod_globalRegistry;function Lw(t,e){return new t({type:"string",...R(e)})}function $w(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...R(e)})}function cu(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...R(e)})}function Bw(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...R(e)})}function jw(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...R(e)})}function Vw(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...R(e)})}function Ww(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...R(e)})}function Zw(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...R(e)})}function Uw(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...R(e)})}function qw(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...R(e)})}function Hw(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...R(e)})}function Yw(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...R(e)})}function Jw(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...R(e)})}function Kw(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...R(e)})}function Gw(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...R(e)})}function Qw(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...R(e)})}function Xw(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...R(e)})}function ev(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...R(e)})}function tv(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...R(e)})}function nv(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...R(e)})}function rv(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...R(e)})}function iv(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...R(e)})}function ov(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...R(e)})}function sv(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...R(e)})}function av(t,e){return new t({type:"string",format:"date",check:"string_format",...R(e)})}function lv(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...R(e)})}function cv(t,e){return new t({type:"string",format:"duration",check:"string_format",...R(e)})}function uv(t,e){return new t({type:"number",checks:[],...R(e)})}function fv(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...R(e)})}function dv(t,e){return new t({type:"boolean",...R(e)})}function hv(t,e){return new t({type:"undefined",...R(e)})}function pv(t,e){return new t({type:"null",...R(e)})}function mv(t){return new t({type:"unknown"})}function gv(t,e){return new t({type:"never",...R(e)})}function yv(t,e){return new t({type:"date",...R(e)})}function uu(t,e){return new lh({check:"less_than",...R(e),value:t,inclusive:!1})}function go(t,e){return new lh({check:"less_than",...R(e),value:t,inclusive:!0})}function fu(t,e){return new ch({check:"greater_than",...R(e),value:t,inclusive:!1})}function yo(t,e){return new ch({check:"greater_than",...R(e),value:t,inclusive:!0})}function du(t,e){return new D0({check:"multiple_of",...R(e),value:t})}function ph(t,e){return new N0({check:"max_length",...R(e),maximum:t})}function Ao(t,e){return new M0({check:"min_length",...R(e),minimum:t})}function mh(t,e){return new A0({check:"length_equals",...R(e),length:t})}function bv(t,e){return new I0({check:"string_format",format:"regex",...R(e),pattern:t})}function wv(t){return new R0({check:"string_format",format:"lowercase",...R(t)})}function vv(t){return new P0({check:"string_format",format:"uppercase",...R(t)})}function xv(t,e){return new z0({check:"string_format",format:"includes",...R(e),includes:t})}function kv(t,e){return new _0({check:"string_format",format:"starts_with",...R(e),prefix:t})}function Sv(t,e){return new F0({check:"string_format",format:"ends_with",...R(e),suffix:t})}function Vr(t){return new L0({check:"overwrite",tx:t})}function Cv(t){return Vr(e=>e.normalize(t))}function Ov(){return Vr(t=>t.trim())}function Ev(){return Vr(t=>t.toLowerCase())}function Dv(){return Vr(t=>t.toUpperCase())}function Tv(){return Vr(t=>Nb(t))}function Nv(t,e,n){return new t({type:"array",element:e,...R(n)})}function Mv(t,e,n){return new t({type:"custom",check:"custom",fn:e,...R(n)})}function Av(t){const e=Iv(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Ci(r,n.value,e._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),n.issues.push(Ci(i))}},t(n.value,n)));return e}function Iv(t,e){const n=new Je({check:"custom",...R(e)});return n._zod.check=t,n}function gh(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??Xr,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function me(t,e,n={path:[],schemaPath:[]}){var u,f;var r;const i=t._zod.def,o=e.seen.get(t);if(o)return o.count++,n.schemaPath.includes(t)&&(o.cycle=n.path),o.schema;const s={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,s);const a=(f=(u=t._zod).toJSONSchema)==null?void 0:f.call(u);if(a)s.schema=a;else{const d={...n,schemaPath:[...n.schemaPath,t],path:n.path},h=t._zod.parent;if(h)s.ref=h,me(h,e,d),e.seen.get(h).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,s.schema,d);else{const p=s.schema,m=e.processors[i.type];if(!m)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${i.type}`);m(t,e,p,d)}}const l=e.metadataRegistry.get(t);return l&&Object.assign(s.schema,l),e.io==="input"&&Le(t)&&(delete s.schema.examples,delete s.schema.default),e.io==="input"&&s.schema._prefault&&((r=s.schema).default??(r.default=s.schema._prefault)),delete s.schema._prefault,e.seen.get(t).schema}function yh(t,e){var o,s,a;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{var h;const c=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=(h=t.external.registry.get(l[0]))==null?void 0:h.id,m=t.external.uri??(y=>y);if(p)return{ref:m(p)};const g=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=g,{defId:g,ref:`${m("__shared")}#/${c}/${g}`}}if(l[1]===n)return{ref:"#"};const f=`#/${c}/`,d=l[1].schema.id??`__schema${t.counter++}`;return{defId:d,ref:f+d}},i=l=>{if(l[1].schema.$ref)return;const c=l[1],{ref:u,defId:f}=r(l);c.def={...c.schema},f&&(c.defId=f);const d=c.schema;for(const h in d)delete d[h];d.$ref=u};if(t.cycles==="throw")for(const l of t.seen.entries()){const c=l[1];if(c.cycle)throw new Error(`Cycle detected: #/${(o=c.cycle)==null?void 0:o.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const c=l[1];if(e===l[0]){i(l);continue}if(t.external){const f=(s=t.external.registry.get(l[0]))==null?void 0:s.id;if(e!==l[0]&&f){i(l);continue}}if((a=t.metadataRegistry.get(l[0]))==null?void 0:a.id){i(l);continue}if(c.cycle){i(l);continue}if(c.count>1&&t.reused==="ref"){i(l);continue}}}function bh(t,e){var s,a,l;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=c=>{const u=t.seen.get(c),f=u.def??u.schema,d={...f};if(u.ref===null)return;const h=u.ref;if(u.ref=null,h){r(h);const p=t.seen.get(h).schema;p.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(p)):(Object.assign(f,p),Object.assign(f,d))}u.isParent||t.override({zodSchema:c,jsonSchema:f,path:u.path??[]})};for(const c of[...t.seen.entries()].reverse())r(c[0]);const i={};if(t.target==="draft-2020-12"?i.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?i.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?i.$schema="http://json-schema.org/draft-04/schema#":t.target,(s=t.external)!=null&&s.uri){const c=(a=t.external.registry.get(e))==null?void 0:a.id;if(!c)throw new Error("Schema is missing an `id` property");i.$id=t.external.uri(c)}Object.assign(i,n.def??n.schema);const o=((l=t.external)==null?void 0:l.defs)??{};for(const c of t.seen.entries()){const u=c[1];u.def&&u.defId&&(o[u.defId]=u.def)}t.external||Object.keys(o).length>0&&(t.target==="draft-2020-12"?i.$defs=o:i.definitions=o);try{const c=JSON.parse(JSON.stringify(i));return Object.defineProperty(c,"~standard",{value:{...e["~standard"],jsonSchema:{input:Io(e,"input"),output:Io(e,"output")}},enumerable:!1,writable:!1}),c}catch{throw new Error("Error converting schema to JSON.")}}function Le(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Le(r.element,n);if(r.type==="set")return Le(r.valueType,n);if(r.type==="lazy")return Le(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Le(r.innerType,n);if(r.type==="intersection")return Le(r.left,n)||Le(r.right,n);if(r.type==="record"||r.type==="map")return Le(r.keyType,n)||Le(r.valueType,n);if(r.type==="pipe")return Le(r.in,n)||Le(r.out,n);if(r.type==="object"){for(const i in r.shape)if(Le(r.shape[i],n))return!0;return!1}if(r.type==="union"){for(const i of r.options)if(Le(i,n))return!0;return!1}if(r.type==="tuple"){for(const i of r.items)if(Le(i,n))return!0;return!!(r.rest&&Le(r.rest,n))}return!1}const Rv=(t,e={})=>n=>{const r=gh({...n,processors:e});return me(t,r),yh(r,t),bh(r,t)},Io=(t,e)=>n=>{const{libraryOptions:r,target:i}=n??{},o=gh({...r??{},target:i,io:e,processors:{}});return me(t,o),yh(o,t),bh(o,t)},Pv={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},zv=(t,e,n,r)=>{const i=n;i.type="string";const{minimum:o,maximum:s,format:a,patterns:l,contentEncoding:c}=t._zod.bag;if(typeof o=="number"&&(i.minLength=o),typeof s=="number"&&(i.maxLength=s),a&&(i.format=Pv[a]??a,i.format===""&&delete i.format),c&&(i.contentEncoding=c),l&&l.size>0){const u=[...l];u.length===1?i.pattern=u[0].source:u.length>1&&(i.allOf=[...u.map(f=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:f.source}))])}},_v=(t,e,n,r)=>{const i=n,{minimum:o,maximum:s,format:a,multipleOf:l,exclusiveMaximum:c,exclusiveMinimum:u}=t._zod.bag;typeof a=="string"&&a.includes("int")?i.type="integer":i.type="number",typeof u=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(i.minimum=u,i.exclusiveMinimum=!0):i.exclusiveMinimum=u),typeof o=="number"&&(i.minimum=o,typeof u=="number"&&e.target!=="draft-04"&&(u>=o?delete i.minimum:delete i.exclusiveMinimum)),typeof c=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(i.maximum=c,i.exclusiveMaximum=!0):i.exclusiveMaximum=c),typeof s=="number"&&(i.maximum=s,typeof c=="number"&&e.target!=="draft-04"&&(c<=s?delete i.maximum:delete i.exclusiveMaximum)),typeof l=="number"&&(i.multipleOf=l)},Fv=(t,e,n,r)=>{n.type="boolean"},Lv=(t,e,n,r)=>{e.target==="openapi-3.0"?(n.type="string",n.nullable=!0,n.enum=[null]):n.type="null"},$v=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},Bv=(t,e,n,r)=>{n.not={}},jv=(t,e,n,r)=>{},Vv=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},Wv=(t,e,n,r)=>{const i=t._zod.def,o=Qd(i.entries);o.every(s=>typeof s=="number")&&(n.type="number"),o.every(s=>typeof s=="string")&&(n.type="string"),n.enum=o},Zv=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Uv=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},qv=(t,e,n,r)=>{const i=n,o=t._zod.def,{minimum:s,maximum:a}=t._zod.bag;typeof s=="number"&&(i.minItems=s),typeof a=="number"&&(i.maxItems=a),i.type="array",i.items=me(o.element,e,{...r,path:[...r.path,"items"]})},Hv=(t,e,n,r)=>{var c;const i=n,o=t._zod.def;i.type="object",i.properties={};const s=o.shape;for(const u in s)i.properties[u]=me(s[u],e,{...r,path:[...r.path,"properties",u]});const a=new Set(Object.keys(s)),l=new Set([...a].filter(u=>{const f=o.shape[u]._zod;return e.io==="input"?f.optin===void 0:f.optout===void 0}));l.size>0&&(i.required=Array.from(l)),((c=o.catchall)==null?void 0:c._zod.def.type)==="never"?i.additionalProperties=!1:o.catchall?o.catchall&&(i.additionalProperties=me(o.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(i.additionalProperties=!1)},Yv=(t,e,n,r)=>{const i=t._zod.def,o=i.inclusive===!1,s=i.options.map((a,l)=>me(a,e,{...r,path:[...r.path,o?"oneOf":"anyOf",l]}));o?n.oneOf=s:n.anyOf=s},Jv=(t,e,n,r)=>{const i=t._zod.def,o=me(i.left,e,{...r,path:[...r.path,"allOf",0]}),s=me(i.right,e,{...r,path:[...r.path,"allOf",1]}),a=c=>"allOf"in c&&Object.keys(c).length===1,l=[...a(o)?o.allOf:[o],...a(s)?s.allOf:[s]];n.allOf=l},Kv=(t,e,n,r)=>{const i=n,o=t._zod.def;i.type="object",(e.target==="draft-07"||e.target==="draft-2020-12")&&(i.propertyNames=me(o.keyType,e,{...r,path:[...r.path,"propertyNames"]})),i.additionalProperties=me(o.valueType,e,{...r,path:[...r.path,"additionalProperties"]})},Gv=(t,e,n,r)=>{const i=t._zod.def,o=me(i.innerType,e,r),s=e.seen.get(t);e.target==="openapi-3.0"?(s.ref=i.innerType,n.nullable=!0):n.anyOf=[o,{type:"null"}]},Qv=(t,e,n,r)=>{const i=t._zod.def;me(i.innerType,e,r);const o=e.seen.get(t);o.ref=i.innerType},Xv=(t,e,n,r)=>{const i=t._zod.def;me(i.innerType,e,r);const o=e.seen.get(t);o.ref=i.innerType,n.default=JSON.parse(JSON.stringify(i.defaultValue))},e1=(t,e,n,r)=>{const i=t._zod.def;me(i.innerType,e,r);const o=e.seen.get(t);o.ref=i.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(i.defaultValue)))},t1=(t,e,n,r)=>{const i=t._zod.def;me(i.innerType,e,r);const o=e.seen.get(t);o.ref=i.innerType;let s;try{s=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=s},n1=(t,e,n,r)=>{const i=t._zod.def,o=e.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;me(o,e,r);const s=e.seen.get(t);s.ref=o},r1=(t,e,n,r)=>{const i=t._zod.def;me(i.innerType,e,r);const o=e.seen.get(t);o.ref=i.innerType,n.readOnly=!0},i1=(t,e,n,r)=>{const i=t._zod.def;me(i.innerType,e,r);const o=e.seen.get(t);o.ref=i.innerType},o1=x("ZodISODateTime",(t,e)=>{Q0.init(t,e),ie.init(t,e)});function s1(t){return sv(o1,t)}const a1=x("ZodISODate",(t,e)=>{X0.init(t,e),ie.init(t,e)});function l1(t){return av(a1,t)}const c1=x("ZodISOTime",(t,e)=>{ew.init(t,e),ie.init(t,e)});function u1(t){return lv(c1,t)}const f1=x("ZodISODuration",(t,e)=>{tw.init(t,e),ie.init(t,e)});function d1(t){return cv(f1,t)}const h1=(t,e)=>{nh.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>Vb(t,n)},flatten:{value:n=>jb(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Ya,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Ya,2)}},isEmpty:{get(){return t.issues.length===0}}})},dt=x("ZodError",h1,{Parent:Error}),p1=_l(dt),m1=Fl(dt),g1=Rs(dt),y1=Ps(dt),b1=Ub(dt),w1=qb(dt),v1=Hb(dt),x1=Yb(dt),k1=Jb(dt),S1=Kb(dt),C1=Gb(dt),O1=Qb(dt),te=x("ZodType",(t,e)=>(X.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Io(t,"input"),output:Io(t,"output")}}),t.toJSONSchema=Rv(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(tr(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>Tn(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>p1(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>g1(t,n,r),t.parseAsync=async(n,r)=>m1(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>y1(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>b1(t,n,r),t.decode=(n,r)=>w1(t,n,r),t.encodeAsync=async(n,r)=>v1(t,n,r),t.decodeAsync=async(n,r)=>x1(t,n,r),t.safeEncode=(n,r)=>k1(t,n,r),t.safeDecode=(n,r)=>S1(t,n,r),t.safeEncodeAsync=async(n,r)=>C1(t,n,r),t.safeDecodeAsync=async(n,r)=>O1(t,n,r),t.refine=(n,r)=>t.check(vx(n,r)),t.superRefine=n=>t.check(xx(n)),t.overwrite=n=>t.check(Vr(n)),t.optional=()=>gu(t),t.nullable=()=>yu(t),t.nullish=()=>gu(yu(t)),t.nonoptional=n=>px(t,n),t.array=()=>X1(t),t.or=n=>nx([t,n]),t.and=n=>ix(t,n),t.transform=n=>bu(t,lx(n)),t.default=n=>fx(t,n),t.prefault=n=>hx(t,n),t.catch=n=>gx(t,n),t.pipe=n=>bu(t,n),t.readonly=()=>wx(t),t.describe=n=>{const r=t.clone();return Xr.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=Xr.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Xr.get(t);const r=t.clone();return Xr.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),wh=x("_ZodString",(t,e)=>{Ll.init(t,e),te.init(t,e),t._zod.processJSONSchema=(r,i,o)=>zv(t,r,i);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(bv(...r)),t.includes=(...r)=>t.check(xv(...r)),t.startsWith=(...r)=>t.check(kv(...r)),t.endsWith=(...r)=>t.check(Sv(...r)),t.min=(...r)=>t.check(Ao(...r)),t.max=(...r)=>t.check(ph(...r)),t.length=(...r)=>t.check(mh(...r)),t.nonempty=(...r)=>t.check(Ao(1,...r)),t.lowercase=r=>t.check(wv(r)),t.uppercase=r=>t.check(vv(r)),t.trim=()=>t.check(Ov()),t.normalize=(...r)=>t.check(Cv(...r)),t.toLowerCase=()=>t.check(Ev()),t.toUpperCase=()=>t.check(Dv()),t.slugify=()=>t.check(Tv())}),E1=x("ZodString",(t,e)=>{Ll.init(t,e),wh.init(t,e),t.email=n=>t.check($w(D1,n)),t.url=n=>t.check(Zw(T1,n)),t.jwt=n=>t.check(ov(W1,n)),t.emoji=n=>t.check(Uw(N1,n)),t.guid=n=>t.check(cu(hu,n)),t.uuid=n=>t.check(Bw(ro,n)),t.uuidv4=n=>t.check(jw(ro,n)),t.uuidv6=n=>t.check(Vw(ro,n)),t.uuidv7=n=>t.check(Ww(ro,n)),t.nanoid=n=>t.check(qw(M1,n)),t.guid=n=>t.check(cu(hu,n)),t.cuid=n=>t.check(Hw(A1,n)),t.cuid2=n=>t.check(Yw(I1,n)),t.ulid=n=>t.check(Jw(R1,n)),t.base64=n=>t.check(nv(B1,n)),t.base64url=n=>t.check(rv(j1,n)),t.xid=n=>t.check(Kw(P1,n)),t.ksuid=n=>t.check(Gw(z1,n)),t.ipv4=n=>t.check(Qw(_1,n)),t.ipv6=n=>t.check(Xw(F1,n)),t.cidrv4=n=>t.check(ev(L1,n)),t.cidrv6=n=>t.check(tv($1,n)),t.e164=n=>t.check(iv(V1,n)),t.datetime=n=>t.check(s1(n)),t.date=n=>t.check(l1(n)),t.time=n=>t.check(u1(n)),t.duration=n=>t.check(d1(n))});function uT(t){return Lw(E1,t)}const ie=x("ZodStringFormat",(t,e)=>{ee.init(t,e),wh.init(t,e)}),D1=x("ZodEmail",(t,e)=>{W0.init(t,e),ie.init(t,e)}),hu=x("ZodGUID",(t,e)=>{j0.init(t,e),ie.init(t,e)}),ro=x("ZodUUID",(t,e)=>{V0.init(t,e),ie.init(t,e)}),T1=x("ZodURL",(t,e)=>{Z0.init(t,e),ie.init(t,e)}),N1=x("ZodEmoji",(t,e)=>{U0.init(t,e),ie.init(t,e)}),M1=x("ZodNanoID",(t,e)=>{q0.init(t,e),ie.init(t,e)}),A1=x("ZodCUID",(t,e)=>{H0.init(t,e),ie.init(t,e)}),I1=x("ZodCUID2",(t,e)=>{Y0.init(t,e),ie.init(t,e)}),R1=x("ZodULID",(t,e)=>{J0.init(t,e),ie.init(t,e)}),P1=x("ZodXID",(t,e)=>{K0.init(t,e),ie.init(t,e)}),z1=x("ZodKSUID",(t,e)=>{G0.init(t,e),ie.init(t,e)}),_1=x("ZodIPv4",(t,e)=>{nw.init(t,e),ie.init(t,e)}),F1=x("ZodIPv6",(t,e)=>{rw.init(t,e),ie.init(t,e)}),L1=x("ZodCIDRv4",(t,e)=>{iw.init(t,e),ie.init(t,e)}),$1=x("ZodCIDRv6",(t,e)=>{ow.init(t,e),ie.init(t,e)}),B1=x("ZodBase64",(t,e)=>{sw.init(t,e),ie.init(t,e)}),j1=x("ZodBase64URL",(t,e)=>{lw.init(t,e),ie.init(t,e)}),V1=x("ZodE164",(t,e)=>{cw.init(t,e),ie.init(t,e)}),W1=x("ZodJWT",(t,e)=>{fw.init(t,e),ie.init(t,e)}),vh=x("ZodNumber",(t,e)=>{fh.init(t,e),te.init(t,e),t._zod.processJSONSchema=(r,i,o)=>_v(t,r,i),t.gt=(r,i)=>t.check(fu(r,i)),t.gte=(r,i)=>t.check(yo(r,i)),t.min=(r,i)=>t.check(yo(r,i)),t.lt=(r,i)=>t.check(uu(r,i)),t.lte=(r,i)=>t.check(go(r,i)),t.max=(r,i)=>t.check(go(r,i)),t.int=r=>t.check(pu(r)),t.safe=r=>t.check(pu(r)),t.positive=r=>t.check(fu(0,r)),t.nonnegative=r=>t.check(yo(0,r)),t.negative=r=>t.check(uu(0,r)),t.nonpositive=r=>t.check(go(0,r)),t.multipleOf=(r,i)=>t.check(du(r,i)),t.step=(r,i)=>t.check(du(r,i)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function fT(t){return uv(vh,t)}const Z1=x("ZodNumberFormat",(t,e)=>{dw.init(t,e),vh.init(t,e)});function pu(t){return fv(Z1,t)}const U1=x("ZodBoolean",(t,e)=>{hw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Fv(t,n,r)});function dT(t){return dv(U1,t)}const q1=x("ZodUndefined",(t,e)=>{pw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>$v(t,n)});function hT(t){return hv(q1,t)}const H1=x("ZodNull",(t,e)=>{mw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Lv(t,n,r)});function pT(t){return pv(H1,t)}const Y1=x("ZodUnknown",(t,e)=>{gw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>jv()});function mu(){return mv(Y1)}const J1=x("ZodNever",(t,e)=>{yw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Bv(t,n,r)});function K1(t){return gv(J1,t)}const G1=x("ZodDate",(t,e)=>{bw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(r,i,o)=>Vv(t,r),t.min=(r,i)=>t.check(yo(r,i)),t.max=(r,i)=>t.check(go(r,i));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function mT(t){return yv(G1,t)}const Q1=x("ZodArray",(t,e)=>{ww.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>qv(t,n,r,i),t.element=e.element,t.min=(n,r)=>t.check(Ao(n,r)),t.nonempty=n=>t.check(Ao(1,n)),t.max=(n,r)=>t.check(ph(n,r)),t.length=(n,r)=>t.check(mh(n,r)),t.unwrap=()=>t.element});function X1(t,e){return Nv(Q1,t,e)}const ex=x("ZodObject",(t,e)=>{xw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Hv(t,n,r,i),K(t,"shape",()=>e.shape),t.keyof=()=>sx(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:mu()}),t.loose=()=>t.clone({...t._zod.def,catchall:mu()}),t.strict=()=>t.clone({...t._zod.def,catchall:K1()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>_b(t,n),t.safeExtend=n=>Fb(t,n),t.merge=n=>Lb(t,n),t.pick=n=>Pb(t,n),t.omit=n=>zb(t,n),t.partial=(...n)=>$b(xh,t,n[0]),t.required=(...n)=>Bb(kh,t,n[0])});function gT(t,e){const n={type:"object",shape:t??{},...R(e)};return new ex(n)}const tx=x("ZodUnion",(t,e)=>{kw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Yv(t,n,r,i),t.options=e.options});function nx(t,e){return new tx({type:"union",options:t,...R(e)})}const rx=x("ZodIntersection",(t,e)=>{Sw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Jv(t,n,r,i)});function ix(t,e){return new rx({type:"intersection",left:t,right:e})}const ox=x("ZodRecord",(t,e)=>{Cw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Kv(t,n,r,i),t.keyType=e.keyType,t.valueType=e.valueType});function yT(t,e,n){return new ox({type:"record",keyType:t,valueType:e,...R(n)})}const Ka=x("ZodEnum",(t,e)=>{Ow.init(t,e),te.init(t,e),t._zod.processJSONSchema=(r,i,o)=>Wv(t,r,i),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,i)=>{const o={};for(const s of r)if(n.has(s))o[s]=e.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Ka({...e,checks:[],...R(i),entries:o})},t.exclude=(r,i)=>{const o={...e.entries};for(const s of r)if(n.has(s))delete o[s];else throw new Error(`Key ${s} not found in enum`);return new Ka({...e,checks:[],...R(i),entries:o})}});function sx(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Ka({type:"enum",entries:n,...R(e)})}const ax=x("ZodTransform",(t,e)=>{Ew.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Uv(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Gd(t.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(Ci(o,n.value,e));else{const s=o;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),n.issues.push(Ci(s))}};const i=e.transform(n.value,n);return i instanceof Promise?i.then(o=>(n.value=o,n)):(n.value=i,n)}});function lx(t){return new ax({type:"transform",transform:t})}const xh=x("ZodOptional",(t,e)=>{Dw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>i1(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function gu(t){return new xh({type:"optional",innerType:t})}const cx=x("ZodNullable",(t,e)=>{Tw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Gv(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function yu(t){return new cx({type:"nullable",innerType:t})}const ux=x("ZodDefault",(t,e)=>{Nw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Xv(t,n,r,i),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function fx(t,e){return new ux({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():eh(e)}})}const dx=x("ZodPrefault",(t,e)=>{Mw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>e1(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function hx(t,e){return new dx({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():eh(e)}})}const kh=x("ZodNonOptional",(t,e)=>{Aw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Qv(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function px(t,e){return new kh({type:"nonoptional",innerType:t,...R(e)})}const mx=x("ZodCatch",(t,e)=>{Iw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>t1(t,n,r,i),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function gx(t,e){return new mx({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const yx=x("ZodPipe",(t,e)=>{Rw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>n1(t,n,r,i),t.in=e.in,t.out=e.out});function bu(t,e){return new yx({type:"pipe",in:t,out:e})}const bx=x("ZodReadonly",(t,e)=>{Pw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>r1(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function wx(t){return new bx({type:"readonly",innerType:t})}const Sh=x("ZodCustom",(t,e)=>{zw.init(t,e),te.init(t,e),t._zod.processJSONSchema=(n,r,i)=>Zv(t,n)});function vx(t,e={}){return Mv(Sh,t,e)}function xx(t){return Av(t)}function bT(t,e={error:`Input not instance of ${t.name}`}){const n=new Sh({type:"custom",check:"custom",fn:r=>r instanceof t,abort:!0,...R(e)});return n._zod.bag.Class=t,n}const wT={invalid_type:"invalid_type",custom:"custom"};function vT(t){Yt({customError:t})}function Ch(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function kx(t,e){return t.reduce((n,r,i)=>{const o=e.get(r);return o&&(n[i]=o),n},Array(t.length))}function io(t){return t!==null&&t>=0}function Sx(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Cx(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Oh=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const o=Ch(e,r,n),s=e[i],a=o[i];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},oo={scaleX:1,scaleY:1},xT=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:s}=t;const a=(e=o[n])!=null?e:r;if(!a)return null;if(i===n){const c=o[s];return c?{x:0,y:n<s?c.top+c.height-(a.top+a.height):c.top-a.top,...oo}:null}const l=Ox(o,i,n);return i>n&&i<=s?{x:0,y:-a.height-l,...oo}:i<n&&i>=s?{x:0,y:a.height+l,...oo}:{x:0,y:0,...oo}};function Ox(t,e,n){const r=t[e],i=t[e-1],o=t[e+1];return r?n<e?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const Eh="Sortable",Dh=re.createContext({activeIndex:-1,containerId:Eh,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Oh,disabled:{draggable:!1,droppable:!1}});function kT(t){let{children:e,id:n,items:r,strategy:i=Oh,disabled:o=!1}=t;const{active:s,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=zd(),f=ji(Eh,n),d=a.rect!==null,h=b.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),p=s!=null,m=s?h.indexOf(s.id):-1,g=c?h.indexOf(c.id):-1,y=b.useRef(h),S=!Sx(h,y.current),w=g!==-1&&m===-1||S,k=Cx(o);bt(()=>{S&&p&&u(h)},[S,h,p,u]),b.useEffect(()=>{y.current=h},[h]);const T=b.useMemo(()=>({activeIndex:m,containerId:f,disabled:k,disableTransforms:w,items:h,overIndex:g,useDragOverlay:d,sortedRects:kx(h,l),strategy:i}),[m,f,k.draggable,k.droppable,w,h,g,l,d,i]);return re.createElement(Dh.Provider,{value:T},e)}const Ex=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return Ch(n,r,i).indexOf(e)},Dx=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:o,newIndex:s,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==o&&i===s?!1:n?!0:s!==i&&e===l},Tx={duration:200,easing:"ease"},Th="transform",Nx=Jn.Transition.toString({property:Th,duration:0,easing:"linear"}),Mx={roleDescription:"sortable"};function Ax(t){let{disabled:e,index:n,node:r,rect:i}=t;const[o,s]=b.useState(null),a=b.useRef(n);return bt(()=>{if(!e&&n!==a.current&&r.current){const l=i.current;if(l){const c=$r(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&s(u)}}n!==a.current&&(a.current=n)},[e,n,r,i]),b.useEffect(()=>{o&&s(null)},[o]),o}function ST(t){let{animateLayoutChanges:e=Dx,attributes:n,disabled:r,data:i,getNewIndex:o=Ex,id:s,strategy:a,resizeObserverConfig:l,transition:c=Tx}=t;const{items:u,containerId:f,activeIndex:d,disabled:h,disableTransforms:p,sortedRects:m,overIndex:g,useDragOverlay:y,strategy:S}=b.useContext(Dh),w=Ix(r,h),k=u.indexOf(s),T=b.useMemo(()=>({sortable:{containerId:f,index:k,items:u},...i}),[f,i,k,u]),N=b.useMemo(()=>u.slice(u.indexOf(s)),[u,s]),{rect:O,node:C,isOver:P,setNodeRef:F}=by({id:s,data:T,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...l}}),{active:L,activatorEvent:ue,activeNodeRect:Se,attributes:ye,setNodeRef:Ce,listeners:le,isDragging:J,over:z,setActivatorNodeRef:et,transform:Jt}=my({id:s,data:T,attributes:{...Mx,...n},disabled:w.draggable}),An=ng(F,Ce),be=!!L,G=be&&!p&&io(d)&&io(g),ce=!y&&J,vt=ce&&G?Jt:null,ne=G?vt??(a??S)({rects:m,activeNodeRect:Se,activeIndex:d,overIndex:g,index:k}):null,ht=io(d)&&io(g)?o({id:s,items:u,activeIndex:d,overIndex:g}):k,Ue=L==null?void 0:L.id,Z=b.useRef({activeId:Ue,items:u,newIndex:ht,containerId:f}),zt=u!==Z.current.items,Fe=e({active:L,containerId:f,isDragging:J,isSorting:be,id:s,index:k,items:u,newIndex:Z.current.newIndex,previousItems:Z.current.items,previousContainerId:Z.current.containerId,transition:c,wasDragging:Z.current.activeId!=null}),rr=Ax({disabled:!Fe,index:k,node:C,rect:O});return b.useEffect(()=>{be&&Z.current.newIndex!==ht&&(Z.current.newIndex=ht),f!==Z.current.containerId&&(Z.current.containerId=f),u!==Z.current.items&&(Z.current.items=u)},[be,ht,f,u]),b.useEffect(()=>{if(Ue===Z.current.activeId)return;if(Ue!=null&&Z.current.activeId==null){Z.current.activeId=Ue;return}const ir=setTimeout(()=>{Z.current.activeId=Ue},50);return()=>clearTimeout(ir)},[Ue]),{active:L,activeIndex:d,attributes:ye,data:T,rect:O,index:k,newIndex:ht,items:u,isOver:P,isSorting:be,isDragging:J,listeners:le,node:C,overIndex:g,over:z,setNodeRef:An,setActivatorNodeRef:et,setDroppableNodeRef:F,setDraggableNodeRef:Ce,transform:rr??ne,transition:_t()};function _t(){if(rr||zt&&Z.current.newIndex===k)return Nx;if(!(ce&&!Ts(ue)||!c)&&(be||Fe))return Jn.Transition.toString({...c,property:Th})}}function Ix(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Ro(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const Rx=[W.Down,W.Right,W.Up,W.Left],CT=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:o,over:s,scrollableAncestors:a}}=e;if(Rx.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];o.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const d=i.get(f.id);if(d)switch(t.code){case W.Down:r.top<d.top&&l.push(f);break;case W.Up:r.top>d.top&&l.push(f);break;case W.Left:r.left>d.left&&l.push(f);break;case W.Right:r.left<d.left&&l.push(f);break}});const c=bg({collisionRect:r,droppableRects:i,droppableContainers:l});let u=yd(c,"id");if(u===(s==null?void 0:s.id)&&c.length>1&&(u=c[1].id),u!=null){const f=o.get(n.id),d=o.get(u),h=d?i.get(d.id):null,p=d==null?void 0:d.node.current;if(p&&h&&f&&d){const g=Ns(p).some((N,O)=>a[O]!==N),y=Nh(f,d),S=Px(f,d),w=g||!y?{x:0,y:0}:{x:S?r.width-h.width:0,y:S?r.height-h.height:0},k={x:h.left,y:h.top};return w.x&&w.y?k:ki(k,w)}}}};function Nh(t,e){return!Ro(t)||!Ro(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function Px(t,e){return!Ro(t)||!Ro(e)||!Nh(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const Mh=6048e5,zx=864e5,wu=Symbol.for("constructDateFrom");function Ye(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&wu in t?t[wu](e):t instanceof Date?new t.constructor(e):new Date(e)}function ge(t,e){return Ye(e||t,t)}function $l(t,e,n){const r=ge(t,n==null?void 0:n.in);return isNaN(e)?Ye(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Ah(t,e,n){const r=ge(t,n==null?void 0:n.in);if(isNaN(e))return Ye(t,NaN);if(!e)return r;const i=r.getDate(),o=Ye(t,r.getTime());o.setMonth(r.getMonth()+e+1,0);const s=o.getDate();return i>=s?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}let _x={};function Wi(){return _x}function Oi(t,e){var a,l,c,u;const n=Wi(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=ge(t,e==null?void 0:e.in),o=i.getDay(),s=(o<r?7:0)+o-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Po(t,e){return Oi(t,{...e,weekStartsOn:1})}function Ih(t,e){const n=ge(t,e==null?void 0:e.in),r=n.getFullYear(),i=Ye(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=Po(i),s=Ye(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const a=Po(s);return n.getTime()>=o.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function vu(t){const e=ge(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Rh(t,...e){const n=Ye.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function zo(t,e){const n=ge(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function Fx(t,e,n){const[r,i]=Rh(n==null?void 0:n.in,t,e),o=zo(r),s=zo(i),a=+o-vu(o),l=+s-vu(s);return Math.round((a-l)/zx)}function Lx(t,e){const n=Ih(t,e),r=Ye(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Po(r)}function $x(t,e,n){return Ah(t,e*3,n)}function Bx(t,e,n){return $l(t,e*7,n)}function Bl(t){return Ye(t,Date.now())}function jl(t,e,n){const[r,i]=Rh(n==null?void 0:n.in,t,e);return+zo(r)==+zo(i)}function jx(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Vx(t){return!(!jx(t)&&typeof t!="number"||isNaN(+ge(t)))}function OT(t,e){const n=ge(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function ET(t,e){const n=ge(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function DT(t,e){const n=ge(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function TT(t,e){const n=ge(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Wx(t,e){const n=ge(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function NT(t,e){const n=e==null?void 0:e.weekStartsOn,r=ge(t,e==null?void 0:e.in),i=r.getDay(),o=(i<n?-7:0)+6-(i-n);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function MT(t,e){const n=ge(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}const Zx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ux=(t,e,n)=>{let r;const i=Zx[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function xr(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const qx={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Hx={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Yx={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Jx={date:xr({formats:qx,defaultWidth:"full"}),time:xr({formats:Hx,defaultWidth:"full"}),dateTime:xr({formats:Yx,defaultWidth:"full"})},Kx={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Gx=(t,e,n,r)=>Kx[t];function Nt(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):s;i=t.formattingValues[a]||t.formattingValues[s]}else{const s=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[s]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}const Qx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ek={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tk={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nk={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rk={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ik=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ok={ordinalNumber:ik,era:Nt({values:Qx,defaultWidth:"wide"}),quarter:Nt({values:Xx,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Nt({values:ek,defaultWidth:"wide"}),day:Nt({values:tk,defaultWidth:"wide"}),dayPeriod:Nt({values:nk,defaultWidth:"wide",formattingValues:rk,defaultFormattingWidth:"wide"})};function Mt(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const s=o[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?ak(a,f=>f.test(s)):sk(a,f=>f.test(s));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}function sk(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ak(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Ph(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let s=t.valueCallback?t.valueCallback(o[0]):o[0];s=n.valueCallback?n.valueCallback(s):s;const a=e.slice(i.length);return{value:s,rest:a}}}const lk=/^(\d+)(th|st|nd|rd)?/i,ck=/\d+/i,uk={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fk={any:[/^b/i,/^(a|c)/i]},dk={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hk={any:[/1/i,/2/i,/3/i,/4/i]},pk={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mk={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gk={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yk={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bk={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wk={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vk={ordinalNumber:Ph({matchPattern:lk,parsePattern:ck,valueCallback:t=>parseInt(t,10)}),era:Mt({matchPatterns:uk,defaultMatchWidth:"wide",parsePatterns:fk,defaultParseWidth:"any"}),quarter:Mt({matchPatterns:dk,defaultMatchWidth:"wide",parsePatterns:hk,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mt({matchPatterns:pk,defaultMatchWidth:"wide",parsePatterns:mk,defaultParseWidth:"any"}),day:Mt({matchPatterns:gk,defaultMatchWidth:"wide",parsePatterns:yk,defaultParseWidth:"any"}),dayPeriod:Mt({matchPatterns:bk,defaultMatchWidth:"any",parsePatterns:wk,defaultParseWidth:"any"})},xk={code:"en-US",formatDistance:Ux,formatLong:Jx,formatRelative:Gx,localize:ok,match:vk,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kk(t,e){const n=ge(t,e==null?void 0:e.in);return Fx(n,Wx(n))+1}function Sk(t,e){const n=ge(t,e==null?void 0:e.in),r=+Po(n)-+Lx(n);return Math.round(r/Mh)+1}function zh(t,e){var u,f,d,h;const n=ge(t,e==null?void 0:e.in),r=n.getFullYear(),i=Wi(),o=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(d=i.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=Ye((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);const a=Oi(s,e),l=Ye((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);const c=Oi(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function Ck(t,e){var a,l,c,u;const n=Wi(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=zh(t,e),o=Ye((e==null?void 0:e.in)||t,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Oi(o,e)}function Ok(t,e){const n=ge(t,e==null?void 0:e.in),r=+Oi(n,e)-+Ck(n,e);return Math.round(r/Mh)+1}function Y(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const nn={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Y(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Y(n+1,2)},d(t,e){return Y(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Y(t.getHours()%12||12,e.length)},H(t,e){return Y(t.getHours(),e.length)},m(t,e){return Y(t.getMinutes(),e.length)},s(t,e){return Y(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Y(i,e.length)}},ur={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xu={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return nn.y(t,e)},Y:function(t,e,n,r){const i=zh(t,r),o=i>0?i:1-i;if(e==="YY"){const s=o%100;return Y(s,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):Y(o,e.length)},R:function(t,e){const n=Ih(t);return Y(n,e.length)},u:function(t,e){const n=t.getFullYear();return Y(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Y(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Y(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return nn.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Y(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Ok(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Y(i,e.length)},I:function(t,e,n){const r=Sk(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Y(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):nn.d(t,e)},D:function(t,e,n){const r=kk(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Y(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Y(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Y(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Y(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=ur.noon:r===0?i=ur.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=ur.evening:r>=12?i=ur.afternoon:r>=4?i=ur.morning:i=ur.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return nn.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):nn.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Y(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Y(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):nn.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):nn.s(t,e)},S:function(t,e){return nn.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Su(r);case"XXXX":case"XX":return Rn(r);case"XXXXX":case"XXX":default:return Rn(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Su(r);case"xxxx":case"xx":return Rn(r);case"xxxxx":case"xxx":default:return Rn(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ku(r,":");case"OOOO":default:return"GMT"+Rn(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ku(r,":");case"zzzz":default:return"GMT"+Rn(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Y(r,e.length)},T:function(t,e,n){return Y(+t,e.length)}};function ku(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return o===0?n+String(i):n+String(i)+e+Y(o,2)}function Su(t,e){return t%60===0?(t>0?"-":"+")+Y(Math.abs(t)/60,2):Rn(t,e)}function Rn(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Y(Math.trunc(r/60),2),o=Y(r%60,2);return n+i+e+o}const Cu=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},_h=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ek=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Cu(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Cu(r,e)).replace("{{time}}",_h(i,e))},Dk={p:_h,P:Ek},Tk=/^D+$/,Nk=/^Y+$/,Mk=["D","DD","YY","YYYY"];function Ak(t){return Tk.test(t)}function Ik(t){return Nk.test(t)}function Rk(t,e,n){const r=Pk(t,e,n);if(console.warn(r),Mk.includes(t))throw new RangeError(r)}function Pk(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const zk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_k=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fk=/^'([^]*?)'?$/,Lk=/''/g,$k=/[a-zA-Z]/;function Bk(t,e,n){var u,f,d,h,p,m,g,y;const r=Wi(),i=(n==null?void 0:n.locale)??r.locale??xk,o=(n==null?void 0:n.firstWeekContainsDate)??((f=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??0,a=ge(t,n==null?void 0:n.in);if(!Vx(a))throw new RangeError("Invalid time value");let l=e.match(_k).map(S=>{const w=S[0];if(w==="p"||w==="P"){const k=Dk[w];return k(S,i.formatLong)}return S}).join("").match(zk).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const w=S[0];if(w==="'")return{isToken:!1,value:jk(S)};if(xu[w])return{isToken:!0,value:S};if(w.match($k))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:o,weekStartsOn:s,locale:i};return l.map(S=>{if(!S.isToken)return S.value;const w=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Ik(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Ak(w))&&Rk(w,e,String(t));const k=xu[w[0]];return k(a,w,i.localize,c)}).join("")}function jk(t){const e=t.match(Fk);return e?e[1].replace(Lk,"'"):t}function Vk(){return Object.assign({},Wi())}function AT(t,e){return jl(Ye(t,t),Bl(t))}function IT(t,e){return jl(t,$l(Bl(t),1),e)}function Wk(t,e,n){return $l(t,-e,n)}function RT(t,e){return jl(Ye(t,t),Wk(Bl(t),1))}function PT(t,e,n){return Ah(t,-e,n)}function zT(t,e,n){return $x(t,-e,n)}function _T(t,e,n){return Bx(t,-e,n)}function Ou(t,e,n){const r=Vk(),i=qk(t,n.timeZone,n.locale??r.locale);return"formatToParts"in i?Zk(i,e):Uk(i,e)}function Zk(t,e){const n=t.formatToParts(e);for(let r=n.length-1;r>=0;--r)if(n[r].type==="timeZoneName")return n[r].value}function Uk(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(n);return r?r[0].substr(1):""}function qk(t,e,n){return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:e,timeZoneName:t})}function Hk(t,e){const n=Qk(e);return"formatToParts"in n?Jk(n,t):Kk(n,t)}const Yk={year:0,month:1,day:2,hour:3,minute:4,second:5};function Jk(t,e){try{const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const o=Yk[n[i].type];o!==void 0&&(r[o]=parseInt(n[i].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function Kk(t,e){const n=t.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const ra={},Eu=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Gk=Eu==="06/25/2014, 00:00:00"||Eu==="06/25/2014 00:00:00";function Qk(t){return ra[t]||(ra[t]=Gk?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),ra[t]}function Fh(t,e,n,r,i,o,s){const a=new Date(0);return a.setUTCFullYear(t,e,n),a.setUTCHours(r,i,o,s),a}const Du=36e5,Xk=6e4,ia={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Vl(t,e,n){if(!t)return 0;let r=ia.timezoneZ.exec(t);if(r)return 0;let i,o;if(r=ia.timezoneHH.exec(t),r)return i=parseInt(r[1],10),Tu(i)?-(i*Du):NaN;if(r=ia.timezoneHHMM.exec(t),r){i=parseInt(r[2],10);const s=parseInt(r[3],10);return Tu(i,s)?(o=Math.abs(i)*Du+s*Xk,r[1]==="+"?-o:o):NaN}if(nS(t)){e=new Date(e||Date.now());const s=n?e:eS(e),a=Ga(s,t);return-(n?a:tS(e,a,t))}return NaN}function eS(t){return Fh(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function Ga(t,e){const n=Hk(t,e),r=Fh(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let i=t.getTime();const o=i%1e3;return i-=o>=0?o:1e3+o,r-i}function tS(t,e,n){let i=t.getTime()-e;const o=Ga(new Date(i),n);if(e===o)return e;i-=o-e;const s=Ga(new Date(i),n);return o===s?o:Math.max(o,s)}function Tu(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}const Nu={};function nS(t){if(Nu[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),Nu[t]=!0,!0}catch{return!1}}const rS=60*1e3,iS={X:function(t,e,n){const r=oa(n.timeZone,t);if(r===0)return"Z";switch(e){case"X":return Mu(r);case"XXXX":case"XX":return hr(r);case"XXXXX":case"XXX":default:return hr(r,":")}},x:function(t,e,n){const r=oa(n.timeZone,t);switch(e){case"x":return Mu(r);case"xxxx":case"xx":return hr(r);case"xxxxx":case"xxx":default:return hr(r,":")}},O:function(t,e,n){const r=oa(n.timeZone,t);switch(e){case"O":case"OO":case"OOO":return"GMT"+oS(r,":");case"OOOO":default:return"GMT"+hr(r,":")}},z:function(t,e,n){switch(e){case"z":case"zz":case"zzz":return Ou("short",t,n);case"zzzz":default:return Ou("long",t,n)}}};function oa(t,e){const n=t?Vl(t,e,!0)/rS:(e==null?void 0:e.getTimezoneOffset())??0;if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+t);return n}function _o(t,e){const n=t<0?"-":"";let r=Math.abs(t).toString();for(;r.length<e;)r="0"+r;return n+r}function hr(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=_o(Math.floor(r/60),2),o=_o(Math.floor(r%60),2);return n+i+e+o}function Mu(t,e){return t%60===0?(t>0?"-":"+")+_o(Math.abs(t)/60,2):hr(t,e)}function oS(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;return o===0?n+String(i):n+String(i)+e+_o(o,2)}function Au(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+t-+e}const sS=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,sa=36e5,Iu=6e4,aS=2,je={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:sS};function Lh(t,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);const n=e.additionalDigits==null?aS:Number(e.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(Object.prototype.toString.call(t)!=="[object String]")return new Date(NaN);const r=lS(t),{year:i,restDateString:o}=cS(r.date,n),s=uS(o,i);if(s===null||isNaN(s.getTime()))return new Date(NaN);if(s){const a=s.getTime();let l=0,c;if(r.time&&(l=fS(r.time),l===null||isNaN(l)))return new Date(NaN);if(r.timeZone||e.timeZone){if(c=Vl(r.timeZone||e.timeZone,new Date(a+l)),isNaN(c))return new Date(NaN)}else c=Au(new Date(a+l)),c=Au(new Date(a+l+c));return new Date(a+l+c)}else return new Date(NaN)}function lS(t){const e={};let n=je.dateTimePattern.exec(t),r;if(n?(e.date=n[1],r=n[3]):(n=je.datePattern.exec(t),n?(e.date=n[1],r=n[2]):(e.date=null,r=t)),r){const i=je.timeZone.exec(r);i?(e.time=r.replace(i[1],""),e.timeZone=i[1].trim()):e.time=r}return e}function cS(t,e){if(t){const n=je.YYY[e],r=je.YYYYY[e];let i=je.YYYY.exec(t)||r.exec(t);if(i){const o=i[1];return{year:parseInt(o,10),restDateString:t.slice(o.length)}}if(i=je.YY.exec(t)||n.exec(t),i){const o=i[1];return{year:parseInt(o,10)*100,restDateString:t.slice(o.length)}}}return{year:null}}function uS(t,e){if(e===null)return null;let n,r,i;if(!t||!t.length)return n=new Date(0),n.setUTCFullYear(e),n;let o=je.MM.exec(t);if(o)return n=new Date(0),r=parseInt(o[1],10)-1,Pu(e,r)?(n.setUTCFullYear(e,r),n):new Date(NaN);if(o=je.DDD.exec(t),o){n=new Date(0);const s=parseInt(o[1],10);return pS(e,s)?(n.setUTCFullYear(e,0,s),n):new Date(NaN)}if(o=je.MMDD.exec(t),o){n=new Date(0),r=parseInt(o[1],10)-1;const s=parseInt(o[2],10);return Pu(e,r,s)?(n.setUTCFullYear(e,r,s),n):new Date(NaN)}if(o=je.Www.exec(t),o)return i=parseInt(o[1],10)-1,zu(i)?Ru(e,i):new Date(NaN);if(o=je.WwwD.exec(t),o){i=parseInt(o[1],10)-1;const s=parseInt(o[2],10)-1;return zu(i,s)?Ru(e,i,s):new Date(NaN)}return null}function fS(t){let e,n,r=je.HH.exec(t);if(r)return e=parseFloat(r[1].replace(",",".")),aa(e)?e%24*sa:NaN;if(r=je.HHMM.exec(t),r)return e=parseInt(r[1],10),n=parseFloat(r[2].replace(",",".")),aa(e,n)?e%24*sa+n*Iu:NaN;if(r=je.HHMMSS.exec(t),r){e=parseInt(r[1],10),n=parseInt(r[2],10);const i=parseFloat(r[3].replace(",","."));return aa(e,n,i)?e%24*sa+n*Iu+i*1e3:NaN}return null}function Ru(t,e,n){e=e||0,n=n||0;const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,o=e*7+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}const dS=[31,28,31,30,31,30,31,31,30,31,30,31],hS=[31,29,31,30,31,30,31,31,30,31,30,31];function $h(t){return t%400===0||t%4===0&&t%100!==0}function Pu(t,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;const r=$h(t);if(r&&n>hS[e]||!r&&n>dS[e])return!1}return!0}function pS(t,e){if(e<1)return!1;const n=$h(t);return!(n&&e>366||!n&&e>365)}function zu(t,e){return!(t<0||t>52||e!=null&&(e<0||e>6))}function aa(t,e,n){return!(t<0||t>=25||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}const mS=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function gS(t,e,n={}){e=String(e);const r=e.match(mS);if(r){const i=Lh(n.originalDate||t,n);e=r.reduce(function(o,s){if(s[0]==="'")return o;const a=o.indexOf(s),l=o[a-1]==="'",c=o.replace(s,"'"+iS[s[0]](i,s,n)+"'");return l?c.substring(0,a-1)+c.substring(a+1):c},e)}return Bk(t,e,n)}function yS(t,e,n){t=Lh(t,n);const r=Vl(e,t,!0),i=new Date(t.getTime()-r),o=new Date(0);return o.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),o.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),o}function FT(t,e,n,r){return r={...r,timeZone:e,originalDate:t},gS(yS(t,e,{timeZone:r.timeZone}),n,r)}const bS={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},wS=(t,e,n)=>{n=n||{};let r;const i=bS[t];return typeof i=="string"?r=i:e===1?n.addSuffix&&i.oneWithSuffix?r=i.oneWithSuffix:r=i.one:n.addSuffix&&i.otherWithSuffix?r=i.otherWithSuffix.replace("{{count}}",String(e)):r=i.other.replace("{{count}}",String(e)),n.addSuffix?n.comparison&&n.comparison>0?r+"":r+"":r},vS={full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},xS={full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},kS={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},SS={date:xr({formats:vS,defaultWidth:"full"}),time:xr({formats:xS,defaultWidth:"full"}),dateTime:xr({formats:kS,defaultWidth:"full"})},CS={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},OS=(t,e,n,r)=>CS[t],ES={narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},DS={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},TS={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},NS={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},MS={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},AS={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},IS=(t,e)=>{const n=Number(t);switch(String(e==null?void 0:e.unit)){case"year":return`${n}`;case"quarter":return`${n}`;case"month":return`${n}`;case"week":return`${n}`;case"date":return`${n}`;case"hour":return`${n}`;case"minute":return`${n}`;case"second":return`${n}`;default:return`${n}`}},RS={ordinalNumber:IS,era:Nt({values:ES,defaultWidth:"wide"}),quarter:Nt({values:DS,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Nt({values:TS,defaultWidth:"wide"}),day:Nt({values:NS,defaultWidth:"wide"}),dayPeriod:Nt({values:MS,defaultWidth:"wide",formattingValues:AS,defaultFormattingWidth:"wide"})},PS=/^?\d+(|||||||)?/i,zS=/\d+/i,_S={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},FS={narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},LS={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},$S={any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},BS={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},jS={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},VS={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},WS={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},ZS={any:/^(AM|PM|||||||)/i},US={any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},qS={ordinalNumber:Ph({matchPattern:PS,parsePattern:zS,valueCallback:function(t){return parseInt(t,10)}}),era:Mt({matchPatterns:_S,defaultMatchWidth:"wide",parsePatterns:FS,defaultParseWidth:"any"}),quarter:Mt({matchPatterns:LS,defaultMatchWidth:"wide",parsePatterns:$S,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mt({matchPatterns:BS,defaultMatchWidth:"wide",parsePatterns:jS,defaultParseWidth:"any"}),day:Mt({matchPatterns:VS,defaultMatchWidth:"wide",parsePatterns:WS,defaultParseWidth:"any"}),dayPeriod:Mt({matchPatterns:ZS,defaultMatchWidth:"any",parsePatterns:US,defaultParseWidth:"any"})},LT={code:"ja",formatDistance:wS,formatLong:SS,formatRelative:OS,localize:RS,match:qS,options:{weekStartsOn:0,firstWeekContainsDate:1}},{getOwnPropertyNames:HS,getOwnPropertySymbols:YS}=Object,{hasOwnProperty:JS}=Object.prototype;function la(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function so(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:o}=i,s=o.get(n),a=o.get(r);if(s&&a)return s===r&&a===n;o.set(n,r),o.set(r,n);const l=t(n,r,i);return o.delete(n),o.delete(r),l}}function _u(t){return HS(t).concat(YS(t))}const KS=Object.hasOwn||((t,e)=>JS.call(t,e)),GS="__v",QS="__o",XS="_owner",{getOwnPropertyDescriptor:Fu,keys:Lu}=Object,nr=Object.is||function(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n};function eC(t,e){return t===e}function tC(t,e){return t.byteLength===e.byteLength&&Fo(new Uint8Array(t),new Uint8Array(e))}function nC(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function rC(t,e){return t.byteLength===e.byteLength&&Fo(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function iC(t,e){return nr(t.getTime(),e.getTime())}function oC(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function $u(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.entries();let s,a,l=0;for(;(s=o.next())&&!s.done;){const c=e.entries();let u=!1,f=0;for(;(a=c.next())&&!a.done;){if(i[f]){f++;continue}const d=s.value,h=a.value;if(n.equals(d[0],h[0],l,f,t,e,n)&&n.equals(d[1],h[1],d[0],h[0],t,e,n)){u=i[f]=!0;break}f++}if(!u)return!1;l++}return!0}function sC(t,e,n){const r=Lu(t);let i=r.length;if(Lu(e).length!==i)return!1;for(;i-- >0;)if(!Bh(t,e,n,r[i]))return!1;return!0}function Jr(t,e,n){const r=_u(t);let i=r.length;if(_u(e).length!==i)return!1;let o,s,a;for(;i-- >0;)if(o=r[i],!Bh(t,e,n,o)||(s=Fu(t,o),a=Fu(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function aC(t,e){return nr(t.valueOf(),e.valueOf())}function lC(t,e){return t.source===e.source&&t.flags===e.flags}function Bu(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.values();let s,a;for(;(s=o.next())&&!s.done;){const l=e.values();let c=!1,u=0;for(;(a=l.next())&&!a.done;){if(!i[u]&&n.equals(s.value,a.value,s.value,a.value,t,e,n)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function Fo(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function cC(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Bh(t,e,n,r){return(r===XS||r===QS||r===GS)&&(t.$$typeof||e.$$typeof)?!0:KS(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const uC=Object.prototype.toString;function fC(t){const e=mC(t),{areArraysEqual:n,areDatesEqual:r,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:s,areObjectsEqual:a,areRegExpsEqual:l,areSetsEqual:c,getUnsupportedCustomComparator:u}=t;return function(d,h,p){if(d===h)return!0;if(d==null||h==null)return!1;const m=typeof d;if(m!==typeof h)return!1;if(m!=="object")return m==="number"||m==="bigint"?s(d,h,p):m==="function"?i(d,h,p):!1;const g=d.constructor;if(g!==h.constructor)return!1;if(g===Object)return a(d,h,p);if(g===Array)return n(d,h,p);if(g===Date)return r(d,h,p);if(g===RegExp)return l(d,h,p);if(g===Map)return o(d,h,p);if(g===Set)return c(d,h,p);if(g===Promise)return!1;if(Array.isArray(d))return n(d,h,p);const y=uC.call(d),S=e[y];if(S)return S(d,h,p);const w=u&&u(d,h,p,y);return w?w(d,h,p):!1}}function dC({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:tC,areArraysEqual:n?Jr:nC,areDataViewsEqual:rC,areDatesEqual:iC,areErrorsEqual:oC,areFunctionsEqual:eC,areMapsEqual:n?la($u,Jr):$u,areNumbersEqual:nr,areObjectsEqual:n?Jr:sC,arePrimitiveWrappersEqual:aC,areRegExpsEqual:lC,areSetsEqual:n?la(Bu,Jr):Bu,areTypedArraysEqual:n?la(Fo,Jr):Fo,areUrlsEqual:cC,getUnsupportedCustomComparator:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=so(r.areArraysEqual),o=so(r.areMapsEqual),s=so(r.areObjectsEqual),a=so(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:a})}return r}function hC(t){return function(e,n,r,i,o,s,a){return t(e,n,a)}}function pC({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:u}=n();return e(a,l,{cache:c,equals:r,meta:u,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,l){return e(a,l,o)}}function mC({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:s,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:u,areSetsEqual:f,areTypedArraysEqual:d,areUrlsEqual:h}){return{"[object Arguments]":l,"[object Array]":e,"[object ArrayBuffer]":t,"[object AsyncGeneratorFunction]":o,"[object BigInt]":a,"[object BigInt64Array]":d,"[object BigUint64Array]":d,"[object Boolean]":c,"[object DataView]":n,"[object Date]":r,"[object Error]":i,"[object Float16Array]":d,"[object Float32Array]":d,"[object Float64Array]":d,"[object Function]":o,"[object GeneratorFunction]":o,"[object Int8Array]":d,"[object Int16Array]":d,"[object Int32Array]":d,"[object Map]":s,"[object Number]":c,"[object Object]":(p,m,g)=>typeof p.then!="function"&&typeof m.then!="function"&&l(p,m,g),"[object RegExp]":u,"[object Set]":f,"[object String]":c,"[object URL]":h,"[object Uint8Array]":d,"[object Uint8ClampedArray]":d,"[object Uint16Array]":d,"[object Uint32Array]":d}}const $T=Nn();Nn({strict:!0});Nn({circular:!0});Nn({circular:!0,strict:!0});Nn({createInternalComparator:()=>nr});Nn({strict:!0,createInternalComparator:()=>nr});Nn({circular:!0,createInternalComparator:()=>nr});Nn({circular:!0,createInternalComparator:()=>nr,strict:!0});function Nn(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,o=dC(t),s=fC(o),a=n?n(s):hC(s);return pC({circular:e,comparator:s,createState:r,equals:a,strict:i})}function Ee(t){this.content=t}Ee.prototype={constructor:Ee,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Ee(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ee(n)},addToStart:function(t,e){return new Ee([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ee(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Ee(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ee.from(t),t.size?new Ee(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ee.from(t),t.size?new Ee(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ee.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ee.from=function(t){if(t instanceof Ee)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ee(e)};function jh(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=jh(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function Vh(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=Vh(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class D{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new D(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new D(r,i)}cutByIndex(e,n){return e==n?D.empty:e==0&&n==this.content.length?this:new D(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new D(i,o)}addToStart(e){return new D([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new D(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return jh(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Vh(this,e,n,r)}findIndex(e){if(e==0)return ao(0,e);if(e==this.size)return ao(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?ao(n+1,o):ao(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return D.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new D(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return D.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new D(n||e,r)}static from(e){if(!e)return D.empty;if(e instanceof D)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new D([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}D.empty=new D([],0);const ca={index:0,offset:0};function ao(t,e){return ca.index=t,ca.offset=e,ca}function Lo(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Lo(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Lo(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}class H{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Lo(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return H.none;if(e instanceof H)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}}H.none=[];class $o extends Error{}class M{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Zh(this.content,e+this.openStart,n);return r&&new M(r,this.openStart,this.openEnd)}removeBetween(e,n){return new M(Wh(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return M.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new M(D.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new M(e,r,i)}}M.empty=new M(D.empty,0,0);function Wh(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(Wh(o.content,e-i-1,n-i-1)))}function Zh(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=Zh(s.content,e-o-1,n,s);return a&&t.replaceChild(i,s.copy(a))}function gC(t,e,n){if(n.openStart>t.depth)throw new $o("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new $o("Inconsistent open depths");return Uh(t,e,n,0)}function Uh(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=Uh(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Un(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=yC(n,t);return Un(o,Hh(t,s,a,e,r))}else return Un(o,Bo(t,e,r))}function qh(t,e){if(!e.type.compatibleContent(t.type))throw new $o("Cannot join "+e.type.name+" onto "+t.type.name)}function Qa(t,e,n){let r=t.node(n);return qh(r,e.node(n)),r}function Zn(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function li(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Zn(t.nodeAfter,r),o++));for(let a=o;a<s;a++)Zn(i.child(a),r);e&&e.depth==n&&e.textOffset&&Zn(e.nodeBefore,r)}function Un(t,e){return t.type.checkContent(e),t.copy(e)}function Hh(t,e,n,r,i){let o=t.depth>i&&Qa(t,e,i+1),s=r.depth>i&&Qa(n,r,i+1),a=[];return li(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(qh(o,s),Zn(Un(o,Hh(t,e,n,r,i+1)),a)):(o&&Zn(Un(o,Bo(t,e,i+1)),a),li(e,n,i,a),s&&Zn(Un(s,Bo(n,r,i+1)),a)),li(r,null,i,a),new D(a)}function Bo(t,e,n){let r=[];if(li(null,t,n,r),t.depth>n){let i=Qa(t,e,n+1);Zn(Un(i,Bo(t,e,n+1)),r)}return li(e,null,n,r),new D(r)}function yC(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(D.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Ei{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return H.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new jo(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(r.push(s,a,i+l),!c||(s=s.child(a),s.isText))break;o=c-1,i+=l+1}return new Ei(n,r,o)}static resolveCached(e,n){let r=ju.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else ju.set(e,r=new bC);let i=r.elts[r.i]=Ei.resolve(e,n);return r.i=(r.i+1)%wC,i}}class bC{constructor(){this.elts=[],this.i=0}}const wC=12,ju=new WeakMap;class jo{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const vC=Object.create(null);class It{constructor(e,n,r,i=H.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||D.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Lo(this.attrs,n||e.defaultAttrs||vC)&&H.sameSet(this.marks,r||H.none)}copy(e=null){return e==this.content?this:new It(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new It(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return M.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new M(c,i.depth-s,o.depth-s)}replace(e,n,r){return gC(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Ei.resolveCached(this,e)}resolveNoCache(e){return Ei.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Yh(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=D.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=H.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!H.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=D.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}}It.prototype.text=void 0;class Vo extends It{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Yh(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Vo(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Vo(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Yh(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Kn{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new xC(e,n);if(r.next==null)return Kn.empty;let i=Jh(r);r.next&&r.err("Unexpected trailing text");let o=TC(DC(i));return NC(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return D.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:f}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,a.concat(u));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}Kn.empty=new Kn(!0);class xC{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Jh(t){let e=[];do e.push(kC(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function kC(t){let e=[];do e.push(SC(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function SC(t){let e=EC(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=CC(t,e);else break;return e}function Vu(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function CC(t,e){let n=Vu(t),r=n;return t.eat(",")&&(t.next!="}"?r=Vu(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function OC(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function EC(t){if(t.eat("(")){let e=Jh(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=OC(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function DC(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,l),u),l=u}if(s.max==-1)i(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),i(o(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Kh(t,e){return e-t}function Wu(t,e){let n=[];return r(e),n.sort(Kh);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function TC(t){let e=Object.create(null);return n(Wu(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);Wu(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new Kn(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(Kh);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function NC(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Gh(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Qh(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Xh(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function ep(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new AC(t,r,e[r]);return n}let Zu=class tp{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ep(e,r.attrs),this.defaultAttrs=Gh(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Kn.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Qh(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new It(this,this.computeAttrs(e),D.from(n),H.setFrom(r))}createChecked(e=null,n,r){return n=D.from(n),this.checkContent(n),new It(this,this.computeAttrs(e),n,H.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=D.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(D.empty,!0);return o?new It(this,e,n.append(o),H.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Xh(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:H.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new tp(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function MC(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class AC{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?MC(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class _s{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=ep(e,i.attrs),this.excluded=null;let o=Gh(this.attrs);this.instance=o?new H(this,o):null}create(e=null){return!e&&this.instance?this.instance:new H(this,Qh(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new _s(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Xh(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class BT{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Ee.from(e.nodes),n.marks=Ee.from(e.marks||{}),this.nodes=Zu.compile(this.spec.nodes,this),this.marks=_s.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=Kn.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?Uu(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Uu(this,s.split(" "))}this.nodeFromJSON=i=>It.fromJSON(this,i),this.markFromJSON=i=>H.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Zu){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Vo(r,r.defaultAttrs,e,H.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Uu(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function IC(t){return t.tag!=null}function RC(t){return t.style!=null}class Di{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(IC(i))this.tags.push(i);else if(RC(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new Hu(this,n,!1);return r.addAll(e,H.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Hu(this,n,!0);return r.addAll(e,H.none,n.from,n.to),M.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(_C(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Yu(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Yu(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Di(e,Di.schemaRules(e)))}}const np={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},PC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},rp={ol:!0,ul:!0},Ti=1,Xa=2,ci=4;function qu(t,e,n){return e!=null?(e?Ti:0)|(e==="full"?Xa:0):t&&t.whitespace=="pre"?Ti|Xa:n&~ci}class lo{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=H.none,this.match=o||(s&ci?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(D.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ti)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=D.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(D.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!np.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Hu{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=qu(null,n.preserveWhitespace,0)|(r?ci:0);i?o=new lo(i.type,i.attrs,H.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new lo(null,null,H.none,!0,null,s):o=new lo(e.schema.topNodeType,null,H.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Xa?"full":this.localPreserveWS||(i.options&Ti)>0,{schema:s}=this.parser;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(s.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(s.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;rp.hasOwnProperty(s)&&this.parser.normalizeLists&&zC(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:PC.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(np.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=l&&l.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}o&&this.sync(a)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let s=this.open,a=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,o=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(o);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=H.none;for(let a of i.concat(e.marks))(o.type?o.type.allowsMarkType(a.type):Ju(a.type,e.type))&&(s=a.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=qu(e,o,s.options);s.options&ci&&s.content.length==0&&(a|=ci);let l=H.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Ju(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new lo(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Ti)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function zC(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&rp.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function _C(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Yu(t){let e={};for(let n in t)e[n]=t[n];return e}function Ju(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}class Wr{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=ua(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=bo(ua(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&bo(ua(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return bo(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Wr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Ku(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Ku(e.marks)}}function Ku(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ua(t){return t.document||window.document}const Gu=new WeakMap;function FC(t){let e=Gu.get(t);return e===void 0&&Gu.set(t,e=LC(t)),e}function LC(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function bo(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=FC(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let d=f.indexOf(" ");d>0?l.setAttributeNS(f.slice(0,d),f.slice(d+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=u;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=bo(t,d,n,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const ip=65535,op=Math.pow(2,16);function $C(t,e){return t+e*op}function Qu(t){return t&ip}function BC(t){return(t-(t&ip))/op}const sp=1,ap=2,wo=4,lp=8;class el{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&lp)>0}get deletedBefore(){return(this.delInfo&(sp|wo))>0}get deletedAfter(){return(this.delInfo&(ap|wo))>0}get deletedAcross(){return(this.delInfo&wo)>0}}class Xe{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Xe.empty)return Xe.empty}recover(e){let n=0,r=Qu(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+BC(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+s],f=l+c;if(e<=f){let d=c?e==l?-1:e==f?1:n:n,h=l+i+(d<0?0:u);if(r)return h;let p=e==(n<0?l:f)?null:$C(a/3,e-l),m=e==l?ap:e==f?sp:wo;return(n<0?e!=l:e!=f)&&(m|=lp),new el(h,m,p)}i+=u-c}return r?e+i:new el(e+i,0,null)}touches(e,n){let r=0,i=Qu(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),o+=u-c}}invert(){return new Xe(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Xe.empty:new Xe(e<0?[0,-e,0]:[0,0,e])}}Xe.empty=new Xe([]);class Ni{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Ni(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Ni;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new el(e,i,null)}}const fa=Object.create(null);class ze{getMap(){return Xe.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=fa[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in fa)throw new RangeError("Duplicate use of step JSON ID "+e);return fa[e]=n,n.prototype.jsonID=e,n}}class fe{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new fe(e,null)}static fail(e){return new fe(null,e)}static fromReplace(e,n,r,i){try{return fe.ok(e.replace(n,r,i))}catch(o){if(o instanceof $o)return fe.fail(o.message);throw o}}}function Wl(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(Wl(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return D.fromArray(r)}class wn extends ze{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new M(Wl(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return fe.fromReplace(e,this.from,this.to,o)}invert(){return new At(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new wn(n.pos,r.pos,this.mark)}merge(e){return e instanceof wn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new wn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new wn(n.from,n.to,e.markFromJSON(n.mark))}}ze.jsonID("addMark",wn);class At extends ze{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new M(Wl(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return fe.fromReplace(e,this.from,this.to,r)}invert(){return new wn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new At(n.pos,r.pos,this.mark)}merge(e){return e instanceof At&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new At(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new At(n.from,n.to,e.markFromJSON(n.mark))}}ze.jsonID("removeMark",At);class vn extends ze{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return fe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return fe.fromReplace(e,this.pos,this.pos+1,new M(D.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new vn(this.pos,n.marks[i]);return new vn(this.pos,this.mark)}}return new Gn(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new vn(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new vn(n.pos,e.markFromJSON(n.mark))}}ze.jsonID("addNodeMark",vn);class Gn extends ze{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return fe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return fe.fromReplace(e,this.pos,this.pos+1,new M(D.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new vn(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Gn(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Gn(n.pos,e.markFromJSON(n.mark))}}ze.jsonID("removeNodeMark",Gn);class De extends ze{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&tl(e,this.from,this.to)?fe.fail("Structure replace would overwrite content"):fe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Xe([this.from,this.to-this.from,this.slice.size])}invert(e){return new De(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new De(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof De)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?M.empty:new M(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new De(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?M.empty:new M(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new De(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new De(n.from,n.to,M.fromJSON(e,n.slice),!!n.structure)}}ze.jsonID("replace",De);class Me extends ze{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(tl(e,this.from,this.gapFrom)||tl(e,this.gapTo,this.to)))return fe.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return fe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?fe.fromReplace(e,this.from,this.to,r):fe.fail("Content does not fit in gap")}getMap(){return new Xe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Me(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Me(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Me(n.from,n.to,n.gapFrom,n.gapTo,M.fromJSON(e,n.slice),n.insert,!!n.structure)}}ze.jsonID("replaceAround",Me);function tl(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function jC(t,e,n,r){let i=[],o=[],s,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),h=Math.min(c+l.nodeSize,n),p=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(s&&s.to==d&&s.mark.eq(f[m])?s.to=h:i.push(s=new At(d,h,f[m])));a&&a.to==d?a.to=h:o.push(a=new wn(d,h,r))}}),i.forEach(l=>t.step(l)),o.forEach(l=>t.step(l))}function VC(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof _s){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let f=l[u],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=c,d.step=o):i.push({style:f,from:Math.max(a,e),to:c,step:o})}}}),i.forEach(s=>t.step(new At(s.from,s.to,s.style)))}function Zl(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=a+c.nodeSize,f=r.matchType(c.type);if(!f)s.push(new De(a,u,M.empty));else{r=f;for(let d=0;d<c.marks.length;d++)n.allowsMarkType(c.marks[d].type)||t.step(new At(a,u,c.marks[d]));if(i&&c.isText&&n.whitespace!="pre"){let d,h=/\r?\n|\r/g,p;for(;d=h.exec(c.text);)p||(p=new M(D.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new De(a+d.index,a+d.index+d[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(D.empty,!0);t.replace(a,a,new M(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function WC(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Zi(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,o=0;;--r){let s=t.$from.node(r),a=t.$from.index(r)+i,l=t.$to.indexAfter(r)-o;if(r<t.depth&&s.canReplace(a,l,n))return r;if(r==0||s.type.spec.isolating||!WC(s,a,l))break;a&&(i=1),l<s.childCount&&(o=1)}return null}function ZC(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=D.empty,f=0;for(let p=o,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=D.from(r.node(p).copy(u)),f++):l--;let d=D.empty,h=0;for(let p=o,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=D.from(i.node(p).copy(d)),h++):c++;t.step(new Me(l,c,s,a,new M(u.append(d),f,h),u.size-f,!0))}function cp(t,e,n=null,r=t){let i=UC(t,e),o=i&&qC(r,e);return o?i.map(Xu).concat({type:e,attrs:n}).concat(o.map(Xu)):null}function Xu(t){return{type:t,attrs:null}}function UC(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function qC(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function HC(t,e,n){let r=D.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=D.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Me(i,o,i,o,new M(r,0,0),n.length,!0))}function YC(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,l)&&JC(t.doc,t.mapping.slice(o).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?c=!1:!h&&p&&(c=!0)}c===!1&&fp(t,s,a,o),Zl(t,t.mapping.slice(o).map(a,1),r,void 0,c===null);let u=t.mapping.slice(o),f=u.map(a,1),d=u.map(a+s.nodeSize,1);return t.step(new Me(f,d,f+1,d-1,new M(D.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&up(t,s,a,o),!1}})}function up(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function fp(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function JC(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function KC(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Me(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new M(D.from(s),0,0),1,!0))}function ui(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let f=i.node(c),d=i.index(c);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function GC(t,e,n=1,r){let i=t.doc.resolve(e),o=D.empty,s=D.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){o=D.from(i.node(a).copy(o));let u=r&&r[c];s=D.from(u?u.type.create(u.attrs,s):i.node(a).copy(s))}t.step(new De(e,e,new M(o.append(s),n,n),!0))}function Ui(t,e){let n=t.resolve(e),r=n.index();return dp(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function QC(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function dp(t,e){return!!(t&&e&&!t.isLeaf&&QC(t,e))}function hp(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&dp(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function XC(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let u=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);u&&!f?r=!1:!u&&f&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);fp(t,u.node(),u.before(),a)}s.inlineContent&&Zl(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new De(c,l.map(e+n,-1),M.empty,!0)),r===!0){let u=t.doc.resolve(c);up(t,u.node(),u.before(),t.steps.length)}return t}function eO(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function pp(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let f=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function Fs(t,e,n=e,r=M.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return mp(i,o,r)?new De(e,n,r):new tO(i,o,r).fit()}function mp(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class tO{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=D.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=D.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new M(o,s,a);return e>-1?new Me(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new De(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=da(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(n==1&&(s?c.matchType(s.type)||(f=c.fillBefore(D.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:f};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=da(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new M(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=da(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new M(ei(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new M(ei(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:f,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));f=f.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let m=a.child(c),g=f.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(f=g,u.push(gp(m.mark(d.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=ti(this.placed,n,D.from(u)),this.frontier[n].match=f,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<h;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?M.empty:new M(ei(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new M(ei(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!ha(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=ha(e,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=ha(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ti(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ti(this.placed,this.depth,D.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(D.empty,!0);n.childCount&&(this.placed=ti(this.placed,this.frontier.length,n))}}function ei(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ei(t.firstChild.content,e-1,n)))}function ti(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ti(t.lastChild.content,e-1,n)))}function da(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function gp(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,gp(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(D.empty,!0)))),t.copy(r)}function ha(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!nO(n,o.content,s)?a:null}function nO(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function rO(t){return t.spec.defining||t.spec.definingForContent}function iO(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(mp(i,o,r))return t.step(new De(e,n,r));let s=bp(i,o);s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(d)>-1?a=d:i.before(d)==h&&s.splice(1,0,-d)}let l=s.indexOf(a),c=[],u=r.openStart;for(let d=r.content,h=0;;h++){let p=d.firstChild;if(c.push(p),h==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let h=c[d],p=rO(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))u=d;else if(p||!h.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+u+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<s.length;m++){let g=s[(m+l)%s.length],y=!0;g<0&&(y=!1,g=-g);let S=i.node(g-1),w=i.index(g-1);if(S.canReplaceWith(w,w,p.type,p.marks))return t.replace(i.before(g),y?o.after(g):n,new M(yp(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let d=s.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>f));d--){let h=s[d];h<0||(e=i.before(h),n=o.after(h))}}function yp(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(yp(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(D.empty,!0))}return t}function oO(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=eO(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new M(D.from(r),0,0))}function sO(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=bp(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function bp(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class kr extends ze{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return fe.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return fe.fromReplace(e,this.pos,this.pos+1,new M(D.from(i),0,n.isLeaf?0:1))}getMap(){return Xe.empty}invert(e){return new kr(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new kr(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new kr(n.pos,n.attr,n.value)}}ze.jsonID("attr",kr);class Mi extends ze{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return fe.ok(r)}getMap(){return Xe.empty}invert(e){return new Mi(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Mi(n.attr,n.value)}}ze.jsonID("docAttr",Mi);let Rr=class extends Error{};Rr=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Rr.prototype=Object.create(Error.prototype);Rr.prototype.constructor=Rr;Rr.prototype.name="TransformError";class aO{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ni}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Rr(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=M.empty){let i=Fs(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new M(D.from(r),0,0))}delete(e,n){return this.replace(e,n,M.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return iO(this,e,n,r),this}replaceRangeWith(e,n,r){return oO(this,e,n,r),this}deleteRange(e,n){return sO(this,e,n),this}lift(e,n){return ZC(this,e,n),this}join(e,n=1){return XC(this,e,n),this}wrap(e,n){return HC(this,e,n),this}setBlockType(e,n=e,r,i=null){return YC(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return KC(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new kr(e,n,r)),this}setDocAttribute(e,n){return this.step(new Mi(e,n)),this}addNodeMark(e,n){return this.step(new vn(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof H)n.isInSet(r.marks)&&this.step(new Gn(e,n));else{let i=r.marks,o,s=[];for(;o=n.isInSet(i);)s.push(new Gn(e,o)),i=o.removeFromSet(i);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(e,n=1,r){return GC(this,e,n,r),this}addMark(e,n,r){return jC(this,e,n,r),this}removeMark(e,n,r){return VC(this,e,n,r),this}clearIncompatible(e,n,r){return Zl(this,e,n,r),this}}const pa=Object.create(null);class U{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new lO(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=M.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?M.empty:n),a==0&&nf(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),nf(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new q(e):pr(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?pr(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):pr(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new ct(e.node(0))}static atStart(e){return pr(e,e,0,0,1)||new ct(e)}static atEnd(e){return pr(e,e,e.content.size,e.childCount,-1)||new ct(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=pa[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in pa)throw new RangeError("Duplicate use of selection JSON ID "+e);return pa[e]=n,n.prototype.jsonID=e,n}getBookmark(){return q.between(this.$anchor,this.$head).getBookmark()}}U.prototype.visible=!0;class lO{constructor(e,n){this.$from=e,this.$to=n}}let ef=!1;function tf(t){!ef&&!t.parent.inlineContent&&(ef=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class q extends U{constructor(e,n=e){tf(e),tf(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return U.near(r);let i=e.resolve(n.map(this.anchor));return new q(i.parent.inlineContent?i:r,r)}replace(e,n=M.empty){if(super.replace(e,n),n==M.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof q&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ls(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new q(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=U.findFrom(n,r,!0)||U.findFrom(n,-r,!0);if(o)n=o.$head;else return U.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(U.findFrom(e,-r,!0)||U.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new q(e,n)}}U.jsonID("text",q);class Ls{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ls(e.map(this.anchor),e.map(this.head))}resolve(e){return q.between(e.resolve(this.anchor),e.resolve(this.head))}}class _ extends U{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?U.near(o):new _(o)}content(){return new M(D.from(this.node),0,0)}eq(e){return e instanceof _&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ul(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new _(e.resolve(n.anchor))}static create(e,n){return new _(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}_.prototype.visible=!1;U.jsonID("node",_);class Ul{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ls(r,r):new Ul(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&_.isSelectable(r)?new _(n):U.near(n)}}class ct extends U{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=M.empty){if(n==M.empty){e.delete(0,e.doc.content.size);let r=U.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new ct(e)}map(e){return new ct(e)}eq(e){return e instanceof ct}getBookmark(){return cO}}U.jsonID("all",ct);const cO={map(){return this},resolve(t){return new ct(t)}};function pr(t,e,n,r,i,o=!1){if(e.inlineContent)return q.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&_.isSelectable(a))return _.create(t,n-(i<0?a.nodeSize:0))}else{let l=pr(t,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function nf(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof De||i instanceof Me))return;let o=t.mapping.maps[r],s;o.forEach((a,l,c,u)=>{s==null&&(s=u)}),t.setSelection(U.near(t.doc.resolve(s),n))}const rf=1,co=2,of=4;class uO extends aO{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|rf)&~co,this.storedMarks=null,this}get selectionSet(){return(this.updated&rf)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=co,this}ensureMarks(e){return H.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&co)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~co,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||H.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(U.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=of,this}get scrolledIntoView(){return(this.updated&of)>0}}function sf(t,e){return!e||!t?t:t.bind(e)}class ni{constructor(e,n,r){this.name=e,this.init=sf(n.init,r),this.apply=sf(n.apply,r)}}const fO=[new ni("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new ni("selection",{init(t,e){return t.selection||U.atStart(e.doc)},apply(t){return t.selection}}),new ni("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new ni("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class ma{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=fO.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ni(r.key,r.spec.state,r))})}}class ri{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ri(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new uO(this)}static create(e){let n=new ma(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ri(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new ma(this.schema,e.plugins),r=n.fields,i=new ri(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new ma(e.schema,e.plugins),o=new ri(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=It.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=U.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[s.name]=c.fromJSON.call(l,e,n[a],o);return}}o[s.name]=s.init(e,o)}}),o}}function wp(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=wp(i,e,{})),n[r]=i}return n}class $s{constructor(e){this.spec=e,this.props={},e.props&&wp(e.props,this,this.props),this.key=e.key?e.key.key:vp("plugin")}getState(e){return e[this.key]}}const ga=Object.create(null);function vp(t){return t in ga?t+"$"+ ++ga[t]:(ga[t]=0,t+"$")}class xp{constructor(e="key"){this.key=vp(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const kp=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Sp(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const dO=(t,e,n)=>{let r=Sp(t,n);if(!r)return!1;let i=ql(r);if(!i){let s=r.blockRange(),a=s&&Zi(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(Ep(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Pr(o,"end")||_.isSelectable(o)))for(let s=r.depth;;s--){let a=Fs(t.doc,r.before(s),r.after(s),M.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Pr(o,"end")?U.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):_.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},jT=(t,e,n)=>{let r=Sp(t,n);if(!r)return!1;let i=ql(r);return i?Cp(t,i,e):!1},VT=(t,e,n)=>{let r=Op(t,n);if(!r)return!1;let i=Hl(r);return i?Cp(t,i,e):!1};function Cp(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Fs(t.doc,o,l,M.empty);if(!c||c.from!=o||c instanceof De&&c.slice.size>=l-o)return!1;if(n){let u=t.tr.step(c);u.setSelection(q.create(u.doc,o)),n(u.scrollIntoView())}return!0}function Pr(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const hO=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=ql(r)}let s=o&&o.nodeBefore;return!s||!_.isSelectable(s)?!1:(e&&e(t.tr.setSelection(_.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function ql(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Op(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const pO=(t,e,n)=>{let r=Op(t,n);if(!r)return!1;let i=Hl(r);if(!i)return!1;let o=i.nodeAfter;if(Ep(t,i,e,1))return!0;if(r.parent.content.size==0&&(Pr(o,"start")||_.isSelectable(o))){let s=Fs(t.doc,r.before(),r.after(),M.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(Pr(o,"start")?U.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):_.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},mO=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Hl(r)}let s=o&&o.nodeAfter;return!s||!_.isSelectable(s)?!1:(e&&e(t.tr.setSelection(_.create(t.doc,o.pos)).scrollIntoView()),!0)};function Hl(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const WT=(t,e)=>{let n=t.selection,r=n instanceof _,i;if(r){if(n.node.isTextblock||!Ui(t.doc,n.from))return!1;i=n.from}else if(i=hp(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(_.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},ZT=(t,e)=>{let n=t.selection,r;if(n instanceof _){if(n.node.isTextblock||!Ui(t.doc,n.to))return!1;r=n.to}else if(r=hp(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},UT=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Zi(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},gO=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Yl(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const qT=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Yl(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(U.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},yO=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof ct||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Yl(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(q.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},bO=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(ui(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Zi(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function wO(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof _&&e.selection.node.isBlock)return!r.parentOffset||!ui(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],s,a,l=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){l=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),a=Yl(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),o.unshift(l&&a?{type:a}:null),s=h;break}else{if(h==1)return!1;o.unshift(null)}let u=e.tr;(e.selection instanceof q||e.selection instanceof ct)&&u.deleteSelection();let f=u.mapping.map(r.pos),d=ui(u.doc,f,o.length,o);if(d||(o[0]=a?{type:a}:null,d=ui(u.doc,f,o.length,o)),!d)return!1;if(u.split(f,o.length,o),!l&&c&&r.node(s).type!=a){let h=u.mapping.map(r.before(s)),p=u.doc.resolve(h);a&&r.node(s-1).canReplaceWith(p.index(),p.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(s)),a)}return n&&n(u.scrollIntoView()),!0}}const vO=wO(),HT=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(_.create(t.doc,i))),!0)};function xO(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Ui(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Ep(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,a,l=i.type.spec.isolating||o.type.spec.isolating;if(!l&&xO(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(n){let h=e.pos+o.nodeSize,p=D.empty;for(let y=s.length-1;y>=0;y--)p=D.from(s[y].create(null,p));p=D.from(i.copy(p));let m=t.tr.step(new Me(e.pos-1,h,e.pos,h,new M(p,1,0),s.length,!0)),g=m.doc.resolve(h+2*s.length);g.nodeAfter&&g.nodeAfter.type==i.type&&Ui(m.doc,g.pos)&&m.join(g.pos),n(m.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:U.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),d=f&&Zi(f);if(d!=null&&d>=e.depth)return n&&n(t.tr.lift(f,d).scrollIntoView()),!0;if(c&&Pr(o,"start",!0)&&Pr(i,"end")){let h=i,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let m=o,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(n){let y=D.empty;for(let w=p.length-1;w>=0;w--)y=D.from(p[w].copy(y));let S=t.tr.step(new Me(e.pos-p.length,e.pos+o.nodeSize,e.pos+g,e.pos+o.nodeSize-g,new M(y,p.length,0),0,!0));n(S.scrollIntoView())}return!0}}return!1}function Dp(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(q.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const YT=Dp(-1),JT=Dp(1);function KT(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&cp(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function GT(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),f=u.index();i=u.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,t,e)}r(o.scrollIntoView())}return!0}}function Jl(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Jl(kp,dO,hO);Jl(kp,pO,mO);Jl(gO,yO,bO,vO);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function QT(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let a=r?n.tr:null;return kO(a,s,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function kO(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);o=new jo(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new jo(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=cp(o,n,r,e);return a?(t&&SO(t,e,a,i,n),!0):!1}function SO(t,e,n,r,i){let o=D.empty;for(let u=n.length-1;u>=0;u--)o=D.from(n[u].type.create(n[u].attrs,o));t.step(new Me(e.start-(r?2:0),e.end,e.start,e.end,new M(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,d=!0;u<f;u++,d=!1)!d&&ui(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function XT(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?CO(e,n,t,o):OO(e,n,o):!0:!1}}function CO(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Me(o-1,s,o,s,new M(D.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new jo(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=Zi(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(o,-1)-1);return Ui(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function OO(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?D.empty:D.from(i))))return!1;let f=o.pos,d=f+s.nodeSize;return r.step(new Me(f-(a?1:0),d+(l?1:0),f+1,d-1,new M((a?D.empty:D.from(i.copy(D.empty))).append(l?D.empty:D.from(i.copy(D.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function eN(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=D.from(c?t.create():null),f=new M(D.from(t.create(null,D.from(a.type.create(null,u)))),c?3:1,0),d=o.start,h=o.end;n(e.tr.step(new Me(d-(c?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}const Te=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},zr=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let nl=null;const Zt=function(t,e,n){let r=nl||(nl=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},EO=function(){nl=null},Qn=function(t,e,n,r){return n&&(af(t,e,n,r,-1)||af(t,e,n,r,1))},DO=/^(img|br|input|textarea|hr)$/i;function af(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:at(t))){let s=t.parentNode;if(!s||s.nodeType!=1||qi(t)||DO.test(t.nodeName)||t.contentEditable=="false")return!1;e=Te(t)+(i<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((o=s.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=s,e=i<0?at(t):0}else return!1}}function at(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function TO(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=at(t)}else if(t.parentNode&&!qi(t))e=Te(t),t=t.parentNode;else return null}}function NO(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!qi(t))e=Te(t)+1,t=t.parentNode;else return null}}function MO(t,e,n){for(let r=e==0,i=e==at(t);r||i;){if(t==n)return!0;let o=Te(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==at(t)}}function qi(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Bs=function(t){return t.focusNode&&Qn(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Pn(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function AO(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function IO(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(at(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(at(r.startContainer),r.startOffset)}}}const Rt=typeof navigator<"u"?navigator:null,lf=typeof document<"u"?document:null,Mn=Rt&&Rt.userAgent||"",rl=/Edge\/(\d+)/.exec(Mn),Tp=/MSIE \d/.exec(Mn),il=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Mn),He=!!(Tp||il||rl),Sn=Tp?document.documentMode:il?+il[1]:rl?+rl[1]:0,ut=!He&&/gecko\/(\d+)/i.test(Mn);ut&&+(/Firefox\/(\d+)/.exec(Mn)||[0,0])[1];const ol=!He&&/Chrome\/(\d+)/.exec(Mn),xe=!!ol,Np=ol?+ol[1]:0,Pe=!He&&!!Rt&&/Apple Computer/.test(Rt.vendor),_r=Pe&&(/Mobile\/\w+/.test(Mn)||!!Rt&&Rt.maxTouchPoints>2),st=_r||(Rt?/Mac/.test(Rt.platform):!1),Mp=Rt?/Win/.test(Rt.platform):!1,qt=/Android \d/.test(Mn),Hi=!!lf&&"webkitFontSmoothing"in lf.documentElement.style,RO=Hi?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function PO(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function $t(t,e){return typeof t=="number"?t:t[e]}function zO(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function cf(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=zr(s);continue}let a=s,l=a==o.body,c=l?PO(o):zO(a),u=0,f=0;if(e.top<c.top+$t(r,"top")?f=-(c.top-e.top+$t(i,"top")):e.bottom>c.bottom-$t(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+$t(i,"top")-c.top:e.bottom-c.bottom+$t(i,"bottom")),e.left<c.left+$t(r,"left")?u=-(c.left-e.left+$t(i,"left")):e.right>c.right-$t(r,"right")&&(u=e.right-c.right+$t(i,"right")),u||f)if(l)o.defaultView.scrollBy(u,f);else{let h=a.scrollLeft,p=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let m=a.scrollLeft-h,g=a.scrollTop-p;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}let d=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(d))break;s=d=="absolute"?s.offsetParent:zr(s)}}function _O(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(o,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:Ap(t.dom)}}function Ap(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=zr(r));return e}function FO({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Ip(n,r==0?0:r-e)}function Ip(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let fr=null;function LO(t){if(t.setActive)return t.setActive();if(fr)return t.focus(fr);let e=Ap(t);t.focus(fr==null?{get preventScroll(){return fr={preventScroll:!0},!0}}:void 0),fr||(fr=!1,Ip(e,0))}function Rp(t,e){let n,r=2e8,i,o=0,s=e.top,a=e.top,l,c;for(let u=t.firstChild,f=0;u;u=u.nextSibling,f++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=Zt(u).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(o=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=f+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?$O(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:Rp(n,i)}function $O(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=sn(r,1);if(s.top!=s.bottom&&Kl(e,s)){i={node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function Kl(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function BO(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function jO(t,e,n){let{node:r,offset:i}=Rp(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function VO(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let a=t.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&l.left>r.left||l.top>r.top?i=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Pp(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Kl(e,c))return Pp(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function WO(t,e){let n=t.dom.ownerDocument,r,i=0,o=IO(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!Kl(e,c)||(s=Pp(t.dom,e,c),!s))return null}if(Pe)for(let c=s;r&&c;c=zr(c))c.draggable&&(r=void 0);if(s=BO(s,e),r){if(ut&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let c;Hi&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=VO(t,r,i,e))}a==null&&(a=jO(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function uf(t){return t.top<t.bottom||t.left<t.right}function sn(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(uf(r))return r}return Array.prototype.find.call(n,uf)||t.getBoundingClientRect()}const ZO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function zp(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=Hi||ut;if(r.nodeType==3)if(s&&(ZO.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=sn(Zt(r,i,i),n);if(ut&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=sn(Zt(r,i-1,i-1),-1);if(c.top==l.top){let u=sn(Zt(r,i,i+1),-1);if(u.top!=l.top)return Kr(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Kr(sn(Zt(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==at(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return ya(l.getBoundingClientRect(),!1)}if(o==null&&i<at(r)){let l=r.childNodes[i];if(l.nodeType==1)return ya(l.getBoundingClientRect(),!0)}return ya(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==at(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Zt(l,at(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Kr(sn(c,1),!1)}if(o==null&&i<at(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Zt(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return Kr(sn(c,-1),!0)}return Kr(sn(r.nodeType==3?Zt(r):r,-n),n>=0)}function Kr(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ya(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function _p(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function UO(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return _p(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=zp(t,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Zt(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const qO=/[\u0590-\u08ac]/;function HO(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return a?!qO.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:s:_p(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=t.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return d!=null&&(a.caretBidiLevel=d),g}):r.pos==r.start()||r.pos==r.end()}let ff=null,df=null,hf=!1;function YO(t,e,n){return ff==e&&df==n?hf:(ff=e,df=n,hf=n=="up"||n=="down"?UO(t,e,n):HO(t,e,n))}const ft=0,pf=1,zn=2,Pt=3;class Yi{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ft,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Te(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let a=i.children[s];if(a.size){i=a;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>e||s instanceof Lp){i=e-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Fp&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Te(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Te(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(i==-1&&e<=c){let u=s+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=s;for(let f=a;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=Te(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Te(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let m=this.children[h],g=p+m.size;if(o>p&&s<g)return m.setSelection(e-p-m.border,n-p-m.border,r,i);p=g}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((ut||Pe)&&e==n){let{node:h,offset:p}=a;if(h.nodeType==3){if(f=!!(p&&h.nodeValue[p-1]==`
`),f&&p==h.nodeValue.length)for(let m=h,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:Te(g)+1});break}let y=m.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let m=h.childNodes[p-1];f=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(ut&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&Pe)&&Qn(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Qn(l.node,l.offset,u.focusNode,u.focusOffset))return;let d=!1;if((c.extend||e==n)&&!(f&&ut)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>n){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+o.border,l=s-o.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?zn:pf,e==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Pt:o.markDirty(e-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?zn:Pt}r=s}this.dirty=zn}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?zn:pf;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Fp extends Yi{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==ft&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class JO extends Yi{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Xn extends Yi{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=Wr.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Xn(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Pt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Pt&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ft){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ft}}slice(e,n,r){let i=Xn.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=al(o,n,s,r)),e>0&&(o=al(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Cn extends Yi{constructor(e,n,r,i,o,s,a,l,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,o,s){let a=o.nodeViews[n.type.name],l,c=a&&a(n,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=Wr.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=jp(u,r,n),c?l=new KO(e,n,r,i,u,f||null,d,c,o,s+1):n.isText?new js(e,n,r,i,u,d,o):new Cn(e,n,r,i,u,f||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>D.empty)}return e}matchesNode(e,n,r){return this.dirty==ft&&e.eq(this.node)&&Wo(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new QO(this,s&&s.node,e);tE(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?H.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,f,d)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,f,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,f,h,e)||l.updateNextNode(c,u,f,e,d,i)||l.addNode(c,u,f,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==zn)&&(s&&this.protectLocalComposition(e,s),$p(this.contentDOM,this.children,e),_r&&nE(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof q)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=rE(this.node.content,s,r-n,i-n);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new JO(this,o,n,i);e.input.compositionNodes.push(s),this.children=al(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Pt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ft}updateOuterDeco(e){if(Wo(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Bp(this.dom,this.nodeDOM,sl(this.outerDeco,this.node,n),sl(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function mf(t,e,n,r,i){jp(r,e,t);let o=new Cn(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class js extends Cn{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Pt||this.dirty!=ft&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ft||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ft,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new js(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Pt)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Lp extends Yi{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ft&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class KO extends Cn{constructor(e,n,r,i,o,s,a,l,c,u){super(e,n,r,i,o,s,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==Pt)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function $p(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=gf(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof Xn){let l=r?r.previousSibling:t.lastChild;$p(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=gf(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const fi=function(t){t&&(this.nodeName=t)};fi.prototype=Object.create(null);const _n=[new fi];function sl(t,e,n){if(t.length==0)return _n;let r=n?_n[0]:new fi,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new fi(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&i.length==1&&i.push(r=new fi(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function Bp(t,e,n,r){if(n==_n&&r==_n)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=_n[0]),i=l}GO(i,a||_n[0],s)}return i}function GO(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function jp(t,e,n){return Bp(t,t,_n,sl(e,n,t.nodeType!=1))}function Wo(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function gf(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class QO{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=XO(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=ft,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Xn.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==Pt&&s.dom==s.contentDOM&&(s.dirty=zn),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Cn){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,f,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Pt&&Wo(n,l.outerDeco));if(!d&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(l,e,n,r,i,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=zn,f.updateChildren(i,s+1),f.dirty=ft),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Wo(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Cn.create(this.top,n,r,i,o,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,o){let s=Cn.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new Fp(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Xn;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof js)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Pe||xe)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Lp(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function XO(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Xn)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function eE(t,e){return t.type.side-e.type.side}function tE(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,f;for(;s<i.length&&i[s].to==o;){let g=i[s++];g.widget&&(u?(f||(f=[u])).push(g):u=g)}if(u)if(f){f.sort(eE);for(let g=0;g<f.length;g++)n(f[g],c,!!l)}else n(u,c,!!l);let d,h;if(l)h=-1,d=l,l=null;else if(c<t.childCount)h=c,d=t.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=o&&a.splice(g--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let p=o+d.nodeSize;if(d.isText){let g=p;s<i.length&&i[s].from<g&&(g=i[s].from);for(let y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<p&&(l=d.cut(g-o),d=d.cut(0,g-o),p=g,h=-1)}else for(;s<i.length&&i[s].to<p;)s++;let m=d.isInline&&!d.isLeaf?a.filter(g=>!g.inline):a.slice();r(d,m,e.forChild(o,d),h),o=p}}function nE(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function rE(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){if(o>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function al(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,u=a+=l.size;c>=n||u<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function Gl(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(Bs(n)){for(l=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&_.isSelectable(f)&&i.parent&&!(f.isInline&&MO(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;c=new _(s==d?a:r.resolve(d))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=s,d=s;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);f=Math.min(f,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),d=Math.max(d,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(f<0)return null;[l,s]=d==t.state.selection.anchor?[d,f]:[f,d],a=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let f=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;c=Ql(t,u,a,f)}return c}function Vp(t){return t.editable?t.hasFocus():Zp(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ht(t,e=!1){let n=t.state.selection;if(Wp(t,n),!!Vp(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&xe){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Qn(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)oE(t);else{let{anchor:r,head:i}=n,o,s;yf&&!(n instanceof q)&&(n.$from.parent.inlineContent||(o=bf(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=bf(t,n.to))),t.docView.setSelection(r,i,t,e),yf&&(o&&wf(o),s&&wf(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&iE(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const yf=Pe||xe&&Np<63;function bf(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Pe&&i&&i.contentEditable=="false")return ba(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return ba(i);if(o)return ba(o)}}function ba(t){return t.contentEditable="true",Pe&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function wf(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function iE(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Vp(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function oE(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Te(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&He&&Sn<=11&&(n.disabled=!0,n.disabled=!1)}function Wp(t,e){if(e instanceof _){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(vf(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else vf(t)}function vf(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Ql(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||q.between(e,n,r)}function xf(t){return t.editable&&!t.hasFocus()?!1:Zp(t)}function Zp(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function sE(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Qn(e.node,e.offset,n.anchorNode,n.anchorOffset)}function ll(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&U.findFrom(o,e)}function ln(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function kf(t,e,n){let r=t.state.selection;if(r instanceof q)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return ln(t,new q(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=ll(t.state,e);return i&&i instanceof _?ln(t,i):!1}else if(!(st&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?_.isSelectable(o)?ln(t,new _(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):Hi?ln(t,new q(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof _&&r.node.isInline)return ln(t,new q(e>0?r.$to:r.$from));{let i=ll(t.state,e);return i?ln(t,i):!1}}}function Zo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function di(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function dr(t,e){return e<0?aE(t):lE(t)}function aE(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(ut&&n.nodeType==1&&r<Zo(n)&&di(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(di(a,-1))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(Up(n))break;{let a=n.previousSibling;for(;a&&di(a,-1);)i=n.parentNode,o=Te(a),a=a.previousSibling;if(a)n=a,r=Zo(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?cl(t,n,r):i&&cl(t,i,o)}function lE(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Zo(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(di(a,1))o=n,s=++r;else break}else{if(Up(n))break;{let a=n.nextSibling;for(;a&&di(a,1);)o=a.parentNode,s=Te(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Zo(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&cl(t,o,s)}function Up(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function cE(t,e){for(;t&&e==t.childNodes.length&&!qi(t);)e=Te(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function uE(t,e){for(;t&&!e&&!qi(t);)e=Te(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function cl(t,e,n){if(e.nodeType!=3){let o,s;(s=cE(e,n))?(e=s,n=0):(o=uE(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Bs(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ht(t)},50)}function Sf(t,e){let n=t.state.doc.resolve(e);if(!(xe||Mp)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Cf(t,e,n){let r=t.state.selection;if(r instanceof q&&!r.empty||n.indexOf("s")>-1||st&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=ll(t.state,e);if(s&&s instanceof _)return ln(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof ct?U.near(s,e):U.findFrom(s,e);return a?ln(t,a):!1}return!1}function Of(t,e){if(!(t.state.selection instanceof q))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function Ef(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function fE(t){if(!Pe||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Ef(t,r,"true"),setTimeout(()=>Ef(t,r,"false"),20)}return!1}function dE(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function hE(t,e){let n=e.keyCode,r=dE(e);if(n==8||st&&n==72&&r=="c")return Of(t,-1)||dr(t,-1);if(n==46&&!e.shiftKey||st&&n==68&&r=="c")return Of(t,1)||dr(t,1);if(n==13||n==27)return!0;if(n==37||st&&n==66&&r=="c"){let i=n==37?Sf(t,t.state.selection.from)=="ltr"?-1:1:-1;return kf(t,i,r)||dr(t,i)}else if(n==39||st&&n==70&&r=="c"){let i=n==39?Sf(t,t.state.selection.from)=="ltr"?1:-1:1;return kf(t,i,r)||dr(t,i)}else{if(n==38||st&&n==80&&r=="c")return Cf(t,-1,r)||dr(t,-1);if(n==40||st&&n==78&&r=="c")return fE(t)||Cf(t,1,r)||dr(t,1);if(r==(st?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Xl(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||Wr.fromSchema(t.state.schema),a=Gp(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=Kp[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d,slice:e}}function qp(t,e,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=!!e&&(r||o||!n);if(l){if(t.someProp("transformPastedText",d=>{e=d(e,o||r,t)}),o)return a=new M(D.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",d=>{a=d(a,t,!0)}),a;let f=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(f)a=f;else{let d=i.marks(),{schema:h}=t.state,p=Wr.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=s.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,d)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),s=yE(n),Hi&&bE(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let d=s.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;s=d}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Di.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!pE.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=wE(Df(a,+u[1],+u[2]),u[4]);else if(a=M.maxOpen(mE(a.content,i),!0),a.openStart||a.openEnd){let f=0,d=0;for(let h=a.content.firstChild;f<a.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=a.content.lastChild;d<a.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);a=Df(a,f,d)}return t.someProp("transformPasted",f=>{a=f(a,t,l)}),a}const pE=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function mE(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&Yp(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=Jp(s[s.length-1],o.length));let u=Hp(a,l);s.push(u),i=i.matchType(u.type),o=l}}),s)return D.from(s)}return t}function Hp(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,D.from(t));return t}function Yp(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=Yp(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(D.from(Hp(n,t,i+1))))}}function Jp(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Jp(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(D.empty,!0);return t.copy(n.append(r))}function ul(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(o=0),i<r-1&&(a=ul(a,e,n,r,i+1,o)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(D.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function Df(t,e,n){return e<t.openStart&&(t=new M(ul(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new M(ul(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Kp={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Tf=null;function Gp(){return Tf||(Tf=document.implementation.createHTMLDocument("title"))}let wa=null;function gE(t){let e=window.trustedTypes;return e?(wa||(wa=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),wa.createHTML(t)):t}function yE(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Gp().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&Kp[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=gE(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function bE(t){let e=t.querySelectorAll(xe?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function wE(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=D.from(l.create(r[a+1],i)),o++,s++}return new M(i,o,s)}const Ve={},We={},vE={touchstart:!0,touchmove:!0};class xE{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function kE(t){for(let e in Ve){let n=Ve[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{CE(t,r)&&!ec(t,r)&&(t.editable||!(r.type in We))&&n(t,r)},vE[e]?{passive:!0}:void 0)}Pe&&t.dom.addEventListener("input",()=>null),fl(t)}function xn(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function SE(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function fl(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>ec(t,r))})}function ec(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function CE(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function OE(t,e){!ec(t,e)&&Ve[e.type]&&(t.editable||!(e.type in We))&&Ve[e.type](t,e)}We.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Xp(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(qt&&xe&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),_r&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Pn(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||hE(t,n)?n.preventDefault():xn(t,"key")};We.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};We.keypress=(t,e)=>{let n=e;if(Xp(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||st&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof q)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function Vs(t){return{left:t.clientX,top:t.clientY}}function EE(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function tc(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,a=>s>o.depth?a(t,n,o.nodeAfter,o.before(s),i,!0):a(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Sr(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function DE(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&_.isSelectable(r)?(Sr(t,new _(n)),!0):!1}function TE(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof _&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(_.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Sr(t,_.create(t.state.doc,i)),!0):!1}function NE(t,e,n,r,i){return tc(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?TE(t,n):DE(t,n))}function ME(t,e,n,r){return tc(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function AE(t,e,n,r){return tc(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||IE(t,n,r)}function IE(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Sr(t,q.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Sr(t,q.create(r,a+1,a+1+s.content.size));else if(_.isSelectable(s))Sr(t,_.create(r,a));else continue;return!0}}function nc(t){return Uo(t)}const Qp=st?"metaKey":"ctrlKey";Ve.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=nc(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&EE(n,t.input.lastClick)&&!n[Qp]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let s=t.posAtCoords(Vs(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new RE(t,s,n,!!r)):(o=="doubleClick"?ME:AE)(t,s.pos,s.inside,n)?n.preventDefault():xn(t,"pointer"))};class RE{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Qp],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof _&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ut&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),xn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ht(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Vs(e))),this.updateAllowDefault(e),this.allowDefault||!n?xn(this.view,"pointer"):NE(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Pe&&this.mightDrag&&!this.mightDrag.node.isAtom||xe&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Sr(this.view,U.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):xn(this.view,"pointer")}move(e){this.updateAllowDefault(e),xn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ve.touchstart=t=>{t.input.lastTouch=Date.now(),nc(t),xn(t,"pointer")};Ve.touchmove=t=>{t.input.lastTouch=Date.now(),xn(t,"pointer")};Ve.contextmenu=t=>nc(t);function Xp(t,e){return t.composing?!0:Pe&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const PE=qt?5e3:-1;We.compositionstart=We.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof q&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||xe&&Mp&&zE(t)))t.markCursor=t.state.storedMarks||n.marks(),Uo(t,!0),t.markCursor=null;else if(Uo(t,!e.selection.empty),ut&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let a=t.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}em(t,PE)};function zE(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}We.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,em(t,20))};function em(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Uo(t),e))}function tm(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=FE());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function _E(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=TO(e.focusNode,e.focusOffset),r=NO(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function FE(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Uo(t,e=!1){if(!(qt&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),tm(t),e||t.docView&&t.docView.dirty){let n=Gl(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function LE(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ai=He&&Sn<15||_r&&RO<604;Ve.copy=We.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Ai?null:n.clipboardData,s=r.content(),{dom:a,text:l}=Xl(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):LE(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function $E(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function BE(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ii(t,r.value,null,i,e):Ii(t,r.textContent,r.innerHTML,i,e)},50)}function Ii(t,e,n,r,i){let o=qp(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,o||M.empty)))return!0;if(!o)return!1;let s=$E(o),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function nm(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}We.paste=(t,e)=>{let n=e;if(t.composing&&!qt)return;let r=Ai?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Ii(t,nm(r),r.getData("text/html"),i,n)?n.preventDefault():BE(t,n)};class rm{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const jE=st?"altKey":"ctrlKey";function im(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[jE]}Ve.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Vs(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof _?i.to-1:i.to))){if(r&&r.mightDrag)s=_.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(s=_.create(t.state.doc,f.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:c,slice:u}=Xl(t,a);(!n.dataTransfer.files.length||!xe||Np>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ai?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ai||n.dataTransfer.setData("text/plain",c),t.dragging=new rm(u,im(t,n),s)};Ve.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};We.dragover=We.dragenter=(t,e)=>e.preventDefault();We.drop=(t,e)=>{try{VE(t,e,t.dragging)}finally{t.dragging=null}};function VE(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Vs(e));if(!r)return;let i=t.state.doc.resolve(r.pos),o=n&&n.slice;o?t.someProp("transformPasted",h=>{o=h(o,t,!1)}):o=qp(t,nm(e.dataTransfer),Ai?null:e.dataTransfer.getData("text/html"),!1,i);let s=!!(n&&im(t,e));if(t.someProp("handleDrop",h=>h(t,e,o||M.empty,s))){e.preventDefault();return}if(!o)return;e.preventDefault();let a=o?pp(t.state.doc,i.pos,o):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(s){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=l.doc;if(u?l.replaceRangeWith(c,c,o.content.firstChild):l.replaceRange(c,c,o),l.doc.eq(f))return;let d=l.doc.resolve(c);if(u&&_.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new _(d));else{let h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((p,m,g,y)=>h=y),l.setSelection(Ql(t,d,l.doc.resolve(h)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}Ve.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ht(t)},20))};Ve.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ve.beforeinput=(t,e)=>{if(xe&&qt&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Pn(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in We)Ve[t]=We[t];function Ri(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class qo{constructor(e,n){this.toDOM=e,this.spec=n||qn,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new lt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof qo&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ri(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class On{constructor(e,n){this.attrs=e,this.spec=n||qn}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new lt(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof On&&Ri(this.attrs,e.attrs)&&Ri(this.spec,e.spec)}static is(e){return e.type instanceof On}destroy(){}}class rc{constructor(e,n){this.attrs=e,this.spec=n||qn}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new lt(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof rc&&Ri(this.attrs,e.attrs)&&Ri(this.spec,e.spec)}destroy(){}}class lt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new lt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new lt(e,e,new qo(n,r))}static inline(e,n,r,i){return new lt(e,n,new On(r,i))}static node(e,n,r,i){return new lt(e,n,new rc(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof On}get widget(){return this.type instanceof qo}}const mr=[],qn={};class pe{constructor(e,n){this.local=e.length?e:mr,this.children=n.length?n:mr}static create(e,n){return n.length?Ho(n,e,0,qn):Re}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,i+a,o)}}map(e,n,r){return this==Re||e.maps.length==0?this:this.mapInner(e,n,0,0,r||qn)}mapInner(e,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?WE(this.children,s||[],e,n,r,i,o):s?new pe(s.sort(Hn),mr):Re}add(e,n){return n.length?this==Re?pe.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((a,l)=>{let c=l+r,u;if(u=sm(n,a,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,u,c+1):i.splice(o,0,l,l+a.nodeSize,Ho(u,a,c+1,qn)),o+=3}});let s=om(o?am(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new pe(s.length?this.local.concat(s).sort(Hn):this.local,i||this.children)}remove(e){return e.length==0||this==Re?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,l=r[o+1]+n;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>a&&f.to<l&&(e[u]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,a+1);c!=Re?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new pe(i,r):Re}forChild(e,n){if(this==Re)return this;if(n.isLeaf)return pe.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof On){let c=Math.max(o,l.from)-o,u=Math.min(s,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new pe(i.sort(Hn),mr);return r?new fn([a,r]):a}return r||Re}eq(e){if(this==e)return!0;if(!(e instanceof pe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return ic(this.localsInner(e))}localsInner(e){if(this==Re)return mr;if(e.inlineContent||!this.local.some(On.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof On||n.push(this.local[r]);return n}forEachSet(e){e(this)}}pe.empty=new pe([],[]);pe.removeOverlap=ic;const Re=pe.empty;class fn{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,qn));return fn.from(r)}forChild(e,n){if(n.isLeaf)return pe.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=Re&&(o instanceof fn?r=r.concat(o.members):r.push(o))}return fn.from(r)}eq(e){if(!(e instanceof fn)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?ic(r?n:n.sort(Hn)):mr}static from(e){switch(e.length){case 0:return Re;case 1:return e[0];default:return new fn(e.every(n=>n instanceof pe)?e:e.reduce((n,r)=>n.concat(r instanceof pe?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function WE(t,e,n,r,i,o,s){let a=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let f=0;n.maps[c].forEach((d,h,p,m)=>{let g=m-p-(h-d);for(let y=0;y<a.length;y+=3){let S=a[y+1];if(S<0||d>S+u-f)continue;let w=a[y]+u-f;h>=w?a[y+1]=d<=w?-2:-1:d>=u&&g&&(a[y]+=g,a[y+1]+=g)}f+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+o),f=u-i;if(f<0||f>=r.content.size){l=!0;continue}let d=n.map(t[c+1]+o,-1),h=d-i,{index:p,offset:m}=r.content.findIndex(f),g=r.maybeChild(p);if(g&&m==f&&m+g.nodeSize==h){let y=a[c+2].mapInner(n,g,u+1,t[c]+o+1,s);y!=Re?(a[c]=f,a[c+1]=h,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=ZE(a,t,e,n,i,o,s),u=Ho(c,r,0,s);e=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,d=0;f<u.children.length;f+=3){let h=u.children[f];for(;d<a.length&&a[d]<h;)d+=3;a.splice(d,0,u.children[f],u.children[f+1],u.children[f+2])}}return new pe(e.sort(Hn),a)}function om(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new lt(i.from+e,i.to+e,i.type))}return n}function ZE(t,e,n,r,i,o,s){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,i,c);f?n.push(f):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+o+1);return n}function sm(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function am(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Ho(t,e,n,r){let i=[],o=!1;e.forEach((a,l)=>{let c=sm(t,a,l+n);if(c){o=!0;let u=Ho(c,a,n+l+1,r);u!=Re&&i.push(l,l+a.nodeSize,u)}});let s=om(o?am(t):t,-n).sort(Hn);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new pe(s,i):Re}function Hn(t,e){return t.from-e.from||t.to-e.to}function ic(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Nf(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Nf(e,i,r.copy(o.from,r.to)));break}}}return e}function Nf(t,e,n){for(;e<t.length&&Hn(n,t[e])>0;)e++;t.splice(e,0,n)}function va(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Re&&e.push(r)}),t.cursorWrapper&&e.push(pe.create(t.state.doc,[t.cursorWrapper.deco])),fn.from(e)}const UE={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},qE=He&&Sn<=11;class HE{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class YE{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new HE,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);He&&Sn<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),qE&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,UE)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(xf(this.view)){if(this.suppressingSelectionUpdates)return Ht(this.view);if(He&&Sn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Qn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=zr(o))n.add(o);for(let o=e.anchorNode;o;o=zr(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&xf(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],l);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(a=!0))}if(ut&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,d]=u;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of u){let h=d.parentNode;h&&h.nodeName=="LI"&&(!f||GE(e,f)!=h)&&d.remove()}}}else if((xe||Pe)&&l.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let f=u.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Bs(r)&&(c=Gl(e))&&c.eq(U.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ht(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),JE(e)),this.handleDOMChange(o,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ht(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(He&&Sn<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:d}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d)}let s=i&&i.parentNode==e.target?Te(i)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?Te(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Mf=new WeakMap,Af=!1;function JE(t){if(!Mf.has(t)&&(Mf.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ut,Af)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Af=!0}}function If(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return Qn(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function KE(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return If(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?If(t,n):null}function GE(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function QE(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Bs(l)||c.push({node:l.focusNode,offset:l.focusOffset})),xe&&t.input.lastKeyCode===8)for(let g=o;g>i;g--){let y=r.childNodes[g-1],S=y.pmViewDesc;if(y.nodeName=="BR"&&!S){o=g;break}if(!S||S.size)break}let f=t.state.doc,d=t.someProp("domParser")||Di.fromSchema(t.state.schema),h=f.resolve(s),p=null,m=d.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:XE,context:h});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+s,head:y+s}}return{doc:m,sel:p,from:s,to:a}}function XE(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Pe&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Pe&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const eD=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function tD(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let O=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,C=Gl(t,O);if(C&&!t.state.selection.eq(C)){if(xe&&qt&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",F=>F(t,Pn(13,"Enter"))))return;let P=t.state.tr.setSelection(C);O=="pointer"?P.setMeta("pointer",!0):O=="key"&&P.scrollIntoView(),o&&P.setMeta("composition",o),t.dispatch(P)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=QE(t,e,n),u=t.state.doc,f=u.slice(c.from,c.to),d,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,h="end"):(d=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=iD(f.content,c.doc.content,c.from,d,h);if(p&&t.input.domChangeCount++,(_r&&t.input.lastIOSEnter>Date.now()-225||qt)&&i.some(O=>O.nodeType==1&&!eD.test(O.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",O=>O(t,Pn(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof q&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let O=Rf(t,t.state.doc,c.sel);if(O&&!O.eq(t.state.selection)){let C=t.state.tr.setSelection(O);o&&C.setMeta("composition",o),t.dispatch(C)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof q&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),He&&Sn<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),S=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA;if((_r&&t.input.lastIOSEnter>Date.now()-225&&(!S||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!S&&m.pos<c.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&m.pos<g.pos&&!/\S/.test(c.doc.textBetween(m.pos,g.pos,"","")))&&t.someProp("handleKeyDown",O=>O(t,Pn(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&rD(u,p.start,p.endA,m,g)&&t.someProp("handleKeyDown",O=>O(t,Pn(8,"Backspace")))){qt&&xe&&t.domObserver.suppressSelectionUpdates();return}xe&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),qt&&!S&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(O){return O(t,Pn(13,"Enter"))})},20));let w=p.start,k=p.endA,T=O=>{let C=O||t.state.tr.replace(w,k,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let P=Rf(t,C.doc,c.sel);P&&!(xe&&t.composing&&P.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(P.head==w||P.head==C.mapping.map(k)-1)||He&&P.empty&&P.head==w)&&C.setSelection(P)}return o&&C.setMeta("composition",o),C.scrollIntoView()},N;if(S)if(m.pos==g.pos){He&&Sn<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ht(t),20));let O=T(t.state.tr.delete(w,k)),C=u.resolve(p.start).marksAcross(u.resolve(p.endA));C&&O.ensureMarks(C),t.dispatch(O)}else if(p.endA==p.endB&&(N=nD(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start())))){let O=T(t.state.tr);N.type=="add"?O.addMark(w,k,N.mark):O.removeMark(w,k,N.mark),t.dispatch(O)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let O=m.parent.textBetween(m.parentOffset,g.parentOffset),C=()=>T(t.state.tr.insertText(O,w,k));t.someProp("handleTextInput",P=>P(t,w,k,O,C))||t.dispatch(C())}else t.dispatch(T());else t.dispatch(T())}function Rf(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Ql(t,e.resolve(n.anchor),e.resolve(n.head))}function nD(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(D.from(c).eq(t))return{mark:a,type:s}}function rD(t,e,n,r,i){if(n-e<=i.pos-r.pos||xa(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(xa(o,!0,!0));return!s.parent.isTextblock||s.pos>n||xa(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function xa(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function iD(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}if(s<o&&t.size<e.size){let l=r<=o&&r>=s?o-r:0;o-=l,o&&o<e.size&&Pf(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<t.size&&Pf(t.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function Pf(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class oD{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new xE,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach($f),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ff(this),_f(this),this.nodeViews=Lf(this),this.docView=mf(this.state.doc,zf(this),va(this),this.dom,this),this.domObserver=new YE(this,(r,i,o,s)=>tD(this,r,i,o,s)),this.domObserver.start(),kE(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&fl(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach($f),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(tm(this),s=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Lf(this);aD(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&fl(this),this.editable=Ff(this),_f(this);let l=va(this),c=zf(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,c,l);(f||!e.selection.eq(i.selection))&&(s=!0);let d=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&_O(this);if(s){this.domObserver.stop();let h=f&&(He||xe)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&sD(i.selection,e.selection);if(f){let p=xe?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=_E(this)),(o||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=mf(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&sE(this))?Ht(this,h):(Wp(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&FO(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof _){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&cf(this,n.getBoundingClientRect(),e)}else cf(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new rm(e.slice,e.move,i<0?void 0:_.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(i=n?n(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(He){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&LO(this.dom),Ht(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return WO(this,e)}coordsAtPos(e,n=1){return zp(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return YO(this,n||this.state,e)}pasteHTML(e,n){return Ii(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Ii(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Xl(this,e)}destroy(){this.docView&&(SE(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],va(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,EO())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return OE(this,e)}domSelectionRange(){let e=this.domSelection();return e?Pe&&this.root.nodeType===11&&AO(this.dom.ownerDocument)==this.dom&&KE(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}oD.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function zf(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[lt.node(0,t.state.doc.content.size,e)]}function _f(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:lt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Ff(t){return!t.someProp("editable",e=>e(t.state)===!1)}function sD(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Lf(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function aD(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function $f(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Dn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},lD=typeof navigator<"u"&&/Mac/.test(navigator.platform),cD=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ne=0;Ne<10;Ne++)Dn[48+Ne]=Dn[96+Ne]=String(Ne);for(var Ne=1;Ne<=24;Ne++)Dn[Ne+111]="F"+Ne;for(var Ne=65;Ne<=90;Ne++)Dn[Ne]=String.fromCharCode(Ne+32),Yo[Ne]=String.fromCharCode(Ne);for(var ka in Dn)Yo.hasOwnProperty(ka)||(Yo[ka]=Dn[ka]);function uD(t){var e=lD&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||cD&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Yo:Dn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const fD=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),dD=typeof navigator<"u"&&/Win/.test(navigator.platform);function hD(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))fD?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function pD(t){let e=Object.create(null);for(let n in t)e[hD(n)]=t[n];return e}function Sa(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function tN(t){return new $s({props:{handleKeyDown:lm(t)}})}function lm(t){let e=pD(t);return function(n,r){let i=uD(r),o,s=e[Sa(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Sa(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(dD&&r.ctrlKey&&r.altKey)&&(o=Dn[r.keyCode])&&o!=i){let a=e[Sa(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const mD="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",gD="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",dl="numeric",hl="ascii",pl="alpha",hi="asciinumeric",ii="alphanumeric",ml="domain",cm="emoji",yD="scheme",bD="slashscheme",Ca="whitespace";function wD(t,e){return t in e||(e[t]=[]),e[t]}function Fn(t,e,n){e[dl]&&(e[hi]=!0,e[ii]=!0),e[hl]&&(e[hi]=!0,e[pl]=!0),e[hi]&&(e[ii]=!0),e[pl]&&(e[ii]=!0),e[ii]&&(e[ml]=!0),e[cm]&&(e[ml]=!0);for(const r in e){const i=wD(r,n);i.indexOf(t)<0&&i.push(t)}}function vD(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function qe(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}qe.groups={};qe.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||qe.groups;let i;return e&&e.j?i=e:(i=new qe(e),n&&r&&Fn(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let s=0;s<o-1;s++)i=i.tt(t[s]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||qe.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let s,a=i.go(t);if(a?(s=new qe,Object.assign(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new qe,o){if(r)if(s.t&&typeof s.t=="string"){const l=Object.assign(vD(s.t,r),n);Fn(o,l,r)}else n&&Fn(o,n,r);s.t=o}return i.j[t]=s,s}};const B=(t,e,n,r,i)=>t.ta(e,n,r,i),oe=(t,e,n,r,i)=>t.tr(e,n,r,i),Bf=(t,e,n,r,i)=>t.ts(e,n,r,i),E=(t,e,n,r,i)=>t.tt(e,n,r,i),Wt="WORD",gl="UWORD",um="ASCIINUMERICAL",fm="ALPHANUMERICAL",Pi="LOCALHOST",yl="TLD",bl="UTLD",vo="SCHEME",gr="SLASH_SCHEME",oc="NUM",wl="WS",sc="NL",pi="OPENBRACE",mi="CLOSEBRACE",Jo="OPENBRACKET",Ko="CLOSEBRACKET",Go="OPENPAREN",Qo="CLOSEPAREN",Xo="OPENANGLEBRACKET",es="CLOSEANGLEBRACKET",ts="FULLWIDTHLEFTPAREN",ns="FULLWIDTHRIGHTPAREN",rs="LEFTCORNERBRACKET",is="RIGHTCORNERBRACKET",ss="LEFTWHITECORNERBRACKET",as="RIGHTWHITECORNERBRACKET",ls="FULLWIDTHLESSTHAN",cs="FULLWIDTHGREATERTHAN",us="AMPERSAND",fs="APOSTROPHE",ds="ASTERISK",cn="AT",hs="BACKSLASH",ps="BACKTICK",ms="CARET",dn="COLON",ac="COMMA",gs="DOLLAR",St="DOT",ys="EQUALS",lc="EXCLAMATION",rt="HYPHEN",gi="PERCENT",bs="PIPE",ws="PLUS",vs="POUND",yi="QUERY",cc="QUOTE",dm="FULLWIDTHMIDDLEDOT",uc="SEMI",Ct="SLASH",bi="TILDE",xs="UNDERSCORE",hm="EMOJI",ks="SYM";var pm=Object.freeze({__proto__:null,ALPHANUMERICAL:fm,AMPERSAND:us,APOSTROPHE:fs,ASCIINUMERICAL:um,ASTERISK:ds,AT:cn,BACKSLASH:hs,BACKTICK:ps,CARET:ms,CLOSEANGLEBRACKET:es,CLOSEBRACE:mi,CLOSEBRACKET:Ko,CLOSEPAREN:Qo,COLON:dn,COMMA:ac,DOLLAR:gs,DOT:St,EMOJI:hm,EQUALS:ys,EXCLAMATION:lc,FULLWIDTHGREATERTHAN:cs,FULLWIDTHLEFTPAREN:ts,FULLWIDTHLESSTHAN:ls,FULLWIDTHMIDDLEDOT:dm,FULLWIDTHRIGHTPAREN:ns,HYPHEN:rt,LEFTCORNERBRACKET:rs,LEFTWHITECORNERBRACKET:ss,LOCALHOST:Pi,NL:sc,NUM:oc,OPENANGLEBRACKET:Xo,OPENBRACE:pi,OPENBRACKET:Jo,OPENPAREN:Go,PERCENT:gi,PIPE:bs,PLUS:ws,POUND:vs,QUERY:yi,QUOTE:cc,RIGHTCORNERBRACKET:is,RIGHTWHITECORNERBRACKET:as,SCHEME:vo,SEMI:uc,SLASH:Ct,SLASH_SCHEME:gr,SYM:ks,TILDE:bi,TLD:yl,UNDERSCORE:xs,UTLD:bl,UWORD:gl,WORD:Wt,WS:wl});const Bt=/[a-z]/,Gr=new RegExp("\\p{L}","u"),Oa=new RegExp("\\p{Emoji}","u"),jt=/\d/,Ea=/\s/,jf="\r",Da=`
`,xD="",kD="",Ta="";let uo=null,fo=null;function SD(t=[]){const e={};qe.groups=e;const n=new qe;uo==null&&(uo=Vf(mD)),fo==null&&(fo=Vf(gD)),E(n,"'",fs),E(n,"{",pi),E(n,"}",mi),E(n,"[",Jo),E(n,"]",Ko),E(n,"(",Go),E(n,")",Qo),E(n,"<",Xo),E(n,">",es),E(n,"",ts),E(n,"",ns),E(n,"",rs),E(n,"",is),E(n,"",ss),E(n,"",as),E(n,"",ls),E(n,"",cs),E(n,"&",us),E(n,"*",ds),E(n,"@",cn),E(n,"`",ps),E(n,"^",ms),E(n,":",dn),E(n,",",ac),E(n,"$",gs),E(n,".",St),E(n,"=",ys),E(n,"!",lc),E(n,"-",rt),E(n,"%",gi),E(n,"|",bs),E(n,"+",ws),E(n,"#",vs),E(n,"?",yi),E(n,'"',cc),E(n,"/",Ct),E(n,";",uc),E(n,"~",bi),E(n,"_",xs),E(n,"\\",hs),E(n,"",dm);const r=oe(n,jt,oc,{[dl]:!0});oe(r,jt,r);const i=oe(r,Bt,um,{[hi]:!0}),o=oe(r,Gr,fm,{[ii]:!0}),s=oe(n,Bt,Wt,{[hl]:!0});oe(s,jt,i),oe(s,Bt,s),oe(i,jt,i),oe(i,Bt,i);const a=oe(n,Gr,gl,{[pl]:!0});oe(a,Bt),oe(a,jt,o),oe(a,Gr,a),oe(o,jt,o),oe(o,Bt),oe(o,Gr,o);const l=E(n,Da,sc,{[Ca]:!0}),c=E(n,jf,wl,{[Ca]:!0}),u=oe(n,Ea,wl,{[Ca]:!0});E(n,Ta,u),E(c,Da,l),E(c,Ta,u),oe(c,Ea,u),E(u,jf),E(u,Da),oe(u,Ea,u),E(u,Ta,u);const f=oe(n,Oa,hm,{[cm]:!0});E(f,"#"),oe(f,Oa,f),E(f,xD,f);const d=E(f,kD);E(d,"#"),oe(d,Oa,f);const h=[[Bt,s],[jt,i]],p=[[Bt,null],[Gr,a],[jt,o]];for(let m=0;m<uo.length;m++)rn(n,uo[m],yl,Wt,h);for(let m=0;m<fo.length;m++)rn(n,fo[m],bl,gl,p);Fn(yl,{tld:!0,ascii:!0},e),Fn(bl,{utld:!0,alpha:!0},e),rn(n,"file",vo,Wt,h),rn(n,"mailto",vo,Wt,h),rn(n,"http",gr,Wt,h),rn(n,"https",gr,Wt,h),rn(n,"ftp",gr,Wt,h),rn(n,"ftps",gr,Wt,h),Fn(vo,{scheme:!0,ascii:!0},e),Fn(gr,{slashscheme:!0,ascii:!0},e),t=t.sort((m,g)=>m[0]>g[0]?1:-1);for(let m=0;m<t.length;m++){const g=t[m][0],S=t[m][1]?{[yD]:!0}:{[bD]:!0};g.indexOf("-")>=0?S[ml]=!0:Bt.test(g)?jt.test(g)?S[hi]=!0:S[hl]=!0:S[dl]=!0,Bf(n,g,g,S)}return Bf(n,"localhost",Pi,{ascii:!0}),n.jd=new qe(ks),{start:n,tokens:Object.assign({groups:e},pm)}}function mm(t,e){const n=CD(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let o=0,s=0;for(;s<r;){let a=t,l=null,c=0,u=null,f=-1,d=-1;for(;s<r&&(l=a.go(n[s]));)a=l,a.accepts()?(f=0,d=0,u=a):f>=0&&(f+=n[s].length,d++),c+=n[s].length,o+=n[s].length,s++;o-=f,s-=d,c-=f,i.push({t:u.t,v:e.slice(o-c,o),s:o-c,e:o})}return i}function CD(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,s=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function rn(t,e,n,r,i){let o;const s=e.length;for(let a=0;a<s-1;a++){const l=e[a];t.j[l]?o=t.j[l]:(o=new qe(r),o.jr=i.slice(),t.j[l]=o),t=o}return o=new qe(n),o.jr=i.slice(),t.j[e[s-1]]=o,o}function Vf(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+o),10);s>0;s--)n.pop();r+=o}else n.push(t[r]),r++}return e}const zi={defaultProtocol:"http",events:null,format:Wf,formatHref:Wf,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function fc(t,e=null){let n=Object.assign({},zi);t&&(n=Object.assign(n,t instanceof fc?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}fc.prototype={o:zi,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:zi[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Wf(t){return t}function gm(t,e){this.t="token",this.v=t,this.tk=e}gm.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=zi.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),s={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return s.href=r,a&&(s.class=a),l&&(s.target=l),c&&(s.rel=c),u&&Object.assign(s,u),{tagName:i,attributes:s,content:o,eventListeners:f}}};function Ws(t,e){class n extends gm{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Zf=Ws("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Uf=Ws("text"),OD=Ws("nl"),ho=Ws("url",{isLink:!0,toHref(t=zi.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Pi&&t[1].t===dn}}),nt=t=>new qe(t);function ED({groups:t}){const e=t.domain.concat([us,ds,cn,hs,ps,ms,gs,ys,rt,oc,gi,bs,ws,vs,Ct,ks,bi,xs]),n=[fs,dn,ac,St,lc,gi,yi,cc,uc,Xo,es,pi,mi,Ko,Jo,Go,Qo,ts,ns,rs,is,ss,as,ls,cs],r=[us,fs,ds,hs,ps,ms,gs,ys,rt,pi,mi,gi,bs,ws,vs,yi,Ct,ks,bi,xs],i=nt(),o=E(i,bi);B(o,r,o),B(o,t.domain,o);const s=nt(),a=nt(),l=nt();B(i,t.domain,s),B(i,t.scheme,a),B(i,t.slashscheme,l),B(s,r,o),B(s,t.domain,s);const c=E(s,cn);E(o,cn,c),E(a,cn,c),E(l,cn,c);const u=E(o,St);B(u,r,o),B(u,t.domain,o);const f=nt();B(c,t.domain,f),B(f,t.domain,f);const d=E(f,St);B(d,t.domain,f);const h=nt(Zf);B(d,t.tld,h),B(d,t.utld,h),E(c,Pi,h);const p=E(f,rt);E(p,rt,p),B(p,t.domain,f),B(h,t.domain,f),E(h,St,d),E(h,rt,p);const m=E(h,dn);B(m,t.numeric,Zf);const g=E(s,rt),y=E(s,St);E(g,rt,g),B(g,t.domain,s),B(y,r,o),B(y,t.domain,s);const S=nt(ho);B(y,t.tld,S),B(y,t.utld,S),B(S,t.domain,s),B(S,r,o),E(S,St,y),E(S,rt,g),E(S,cn,c);const w=E(S,dn),k=nt(ho);B(w,t.numeric,k);const T=nt(ho),N=nt();B(T,e,T),B(T,n,N),B(N,e,T),B(N,n,N),E(S,Ct,T),E(k,Ct,T);const O=E(a,dn),C=E(l,dn),P=E(C,Ct),F=E(P,Ct);B(a,t.domain,s),E(a,St,y),E(a,rt,g),B(l,t.domain,s),E(l,St,y),E(l,rt,g),B(O,t.domain,T),E(O,Ct,T),E(O,yi,T),B(F,t.domain,T),B(F,e,T),E(F,Ct,T);const L=[[pi,mi],[Jo,Ko],[Go,Qo],[Xo,es],[ts,ns],[rs,is],[ss,as],[ls,cs]];for(let ue=0;ue<L.length;ue++){const[Se,ye]=L[ue],Ce=E(T,Se);E(N,Se,Ce),E(Ce,ye,T);const le=nt(ho);B(Ce,e,le);const J=nt();B(Ce,n),B(le,e,le),B(le,n,J),B(J,e,le),B(J,n,J),E(le,ye,T),E(J,ye,T)}return E(i,Pi,S),E(i,sc,OD),{start:i,tokens:pm}}function DD(t,e,n){let r=n.length,i=0,o=[],s=[];for(;i<r;){let a=t,l=null,c=null,u=0,f=null,d=-1;for(;i<r&&!(l=a.go(n[i].t));)s.push(n[i++]);for(;i<r&&(c=l||a.go(n[i].t));)l=null,a=c,a.accepts()?(d=0,f=a):d>=0&&d++,i++,u++;if(d<0)i-=u,i<r&&(s.push(n[i]),i++);else{s.length>0&&(o.push(Na(Uf,e,s)),s=[]),i-=d,u-=d;const h=f.t,p=n.slice(i-u,i);o.push(Na(h,e,p))}}return s.length>0&&o.push(Na(Uf,e,s)),o}function Na(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const TD=typeof console<"u"&&console&&console.warn||(()=>{}),ND="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Q={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function nN(){return qe.groups={},Q.scanner=null,Q.parser=null,Q.tokenQueue=[],Q.pluginQueue=[],Q.customSchemes=[],Q.initialized=!1,Q}function rN(t,e=!1){if(Q.initialized&&TD(`linkifyjs: already initialized - will not register custom scheme "${t}" ${ND}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Q.customSchemes.push([t,e])}function MD(){Q.scanner=SD(Q.customSchemes);for(let t=0;t<Q.tokenQueue.length;t++)Q.tokenQueue[t][1]({scanner:Q.scanner});Q.parser=ED(Q.scanner.tokens);for(let t=0;t<Q.pluginQueue.length;t++)Q.pluginQueue[t][1]({scanner:Q.scanner,parser:Q.parser});return Q.initialized=!0,Q}function ym(t){return Q.initialized||MD(),DD(Q.parser.start,t,mm(Q.scanner.start,t))}ym.scan=mm;function iN(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new fc(n),i=ym(t),o=[];for(let s=0;s<i.length;s++){const a=i[s];a.isLink&&(!e||a.t===e)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}function oN(t={}){return new $s({view(e){return new AD(e,t)}})}class AD{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),s=o.width/i.offsetWidth,a=o.height/i.offsetHeight;if(n){let f=e.nodeBefore,d=e.nodeAfter;if(f||d){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let p=h.getBoundingClientRect(),m=f?p.bottom:p.top;f&&d&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*a;r={left:p.left,right:p.right,top:m-g,bottom:m+g}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),d=this.width/2*s;r={left:f.left-d,right:f.left+d,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let f=l.getBoundingClientRect(),d=f.width/l.offsetWidth,h=f.height/l.offsetHeight;c=f.left-l.scrollLeft*d,u=f.top-l.scrollTop*h}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=pp(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class ae extends U{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ae.valid(r)?new ae(r):U.near(r)}content(){return M.empty}eq(e){return e instanceof ae&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ae(e.resolve(n.pos))}getBookmark(){return new dc(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!ID(e)||!RD(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ae.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let l=e.doc.resolve(i);if(ae.valid(l))return l}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!_.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let a=e.doc.resolve(i);if(ae.valid(a))return a}return null}}}ae.prototype.visible=!1;ae.findFrom=ae.findGapCursorFrom;U.jsonID("gapcursor",ae);class dc{constructor(e){this.pos=e}map(e){return new dc(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ae.valid(n)?new ae(n):U.near(n)}}function bm(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function ID(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||bm(i.type))return!0;if(i.inlineContent)return!1}}return!0}function RD(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||bm(i.type))return!0;if(i.inlineContent)return!1}}return!0}function sN(){return new $s({props:{decorations:FD,createSelectionBetween(t,e,n){return e.pos==n.pos&&ae.valid(n)?new ae(n):null},handleClick:zD,handleKeyDown:PD,handleDOMEvents:{beforeinput:_D}}})}const PD=lm({ArrowLeft:po("horiz",-1),ArrowRight:po("horiz",1),ArrowUp:po("vert",-1),ArrowDown:po("vert",1)});function po(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof q){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=ae.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new ae(c))),!0):!1}}function zD(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ae.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&_.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ae(r))),!0)}function _D(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ae))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=D.empty;for(let s=r.length-1;s>=0;s--)i=D.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new M(i,0,0));return o.setSelection(q.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function FD(t){if(!(t.selection instanceof ae))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",pe.create(t.doc,[lt.widget(t.selection.head,e,{key:"gapcursor"})])}var Ss=200,ke=function(){};ke.prototype.append=function(e){return e.length?(e=ke.from(e),!this.length&&e||e.length<Ss&&this.leafAppend(e)||this.length<Ss&&e.leafPrepend(this)||this.appendInner(e)):this};ke.prototype.prepend=function(e){return e.length?ke.from(e).append(this):this};ke.prototype.appendInner=function(e){return new LD(this,e)};ke.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ke.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ke.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ke.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ke.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};ke.from=function(e){return e instanceof ke?e:e&&e.length?new wm(e):ke.empty};var wm=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Ss)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Ss)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(ke);ke.empty=new wm([]);var LD=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(ke);const $D=500;class yt{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),o=i.maps.length),o--,u.push(f);return}if(i){u.push(new Ot(f.map));let h=f.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new Ot(p,void 0,void 0,c.length+u.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(f.step);if(f.selection)return a=i?f.selection.map(i.slice(o)):f.selection,l=new yt(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),d=new Ot(e.mapping.maps[u],f,n),h;(h=l&&l.merge(d))&&(d=h,u?o.pop():a=a.slice(0,a.length-1)),o.push(d),n&&(s++,n=void 0),i||(l=d)}let c=s-r.depth;return c>jD&&(a=BD(a,c),s-=c),new yt(a.append(o),s)}remapping(e,n){let r=new Ni;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new yt(this.items.append(e.map(n=>new Ot(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=n;this.items.forEach(d=>{let h=o.getMirror(--l);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(d.step){let m=e.steps[h].invert(e.docs[h]),g=d.selection&&d.selection.map(o.slice(l+1,h));g&&a++,r.push(new Ot(p,m,g))}else r.push(new Ot(p))},i);let c=[];for(let d=n;d<s;d++)c.push(new Ot(o.maps[d]));let u=this.items.slice(0,i).append(c).append(r),f=new yt(u,a);return f.emptyItemCount()>$D&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let f=new Ot(c.invert(),l,u),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else s.map&&r--},this.items.length,0),new yt(ke.from(i.reverse()),o)}}yt.empty=new yt(ke.empty,0);function BD(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Ot{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Ot(n.getMap().invert(),n,this.selection)}}}class un{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const jD=20;function VD(t,e,n,r){let i=n.getMeta(Yn),o;if(i)return i.historyState;n.getMeta(UD)&&(t=new un(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Yn))return s.getMeta(Yn).redo?new un(t.done.addTransform(n,void 0,r,xo(e)),t.undone,qf(n.mapping.maps),t.prevTime,t.prevComposition):new un(t.done,t.undone.addTransform(n,void 0,r,xo(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!WD(n,t.prevRanges)),c=s?Ma(t.prevRanges,n.mapping):qf(n.mapping.maps);return new un(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,xo(e)),yt.empty,c,n.time,a??t.prevComposition)}else return(o=n.getMeta("rebased"))?new un(t.done.rebased(n,o),t.undone.rebased(n,o),Ma(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new un(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Ma(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function WD(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function qf(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function Ma(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function ZD(t,e,n){let r=xo(e),i=Yn.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),l=new un(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(Yn,{redo:n,historyState:l})}let Aa=!1,Hf=null;function xo(t){let e=t.plugins;if(Hf!=e){Aa=!1,Hf=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Aa=!0;break}}return Aa}const Yn=new xp("history"),UD=new xp("closeHistory");function aN(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new $s({key:Yn,state:{init(){return new un(yt.empty,yt.empty,null,0,-1)},apply(e,n,r){return VD(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?qD:r=="historyRedo"?HD:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function vm(t,e){return(n,r)=>{let i=Yn.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=ZD(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const qD=vm(!1,!0),HD=vm(!0,!0);var Ia={exports:{}},Ra={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf;function YD(){if(Yf)return Ra;Yf=1;var t=ad();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function a(f,d){var h=d(),p=r({inst:{value:h,getSnapshot:d}}),m=p[0].inst,g=p[1];return o(function(){m.value=h,m.getSnapshot=d,l(m)&&g({inst:m})},[f,h,d]),i(function(){return l(m)&&g({inst:m}),f(function(){l(m)&&g({inst:m})})},[f]),s(h),h}function l(f){var d=f.getSnapshot;f=f.value;try{var h=d();return!n(f,h)}catch{return!0}}function c(f,d){return d()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Ra.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Ra}var Jf;function xm(){return Jf||(Jf=1,Ia.exports=YD()),Ia.exports}var lN=xm(),Pa={exports:{}},za={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function JD(){if(Kf)return za;Kf=1;var t=ad(),e=xm();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return za.useSyncExternalStoreWithSelector=function(c,u,f,d,h){var p=o(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=a(function(){function y(N){if(!S){if(S=!0,w=N,N=d(N),h!==void 0&&m.hasValue){var O=m.value;if(h(O,N))return k=O}return k=N}if(O=k,r(w,N))return O;var C=d(N);return h!==void 0&&h(O,C)?(w=N,O):(w=N,k=C)}var S=!1,w,k,T=f===void 0?null:f;return[function(){return y(u())},T===null?void 0:function(){return y(T())}]},[u,f,d,h]);var g=i(c,p[0],p[1]);return s(function(){m.hasValue=!0,m.value=g},[g]),l(g),g},za}var Gf;function KD(){return Gf||(Gf=1,Pa.exports=JD()),Pa.exports}var cN=KD();export{nN as $,ct as A,hO as B,mO as C,Wr as D,ri as E,D as F,HT as G,JT as H,YT as I,GT as J,eN as K,ui as L,M,_ as N,KT as O,$s as P,QT as Q,At as R,U as S,aO as T,De as U,Me as V,rN as W,ym as X,iN as Y,wT as Z,aT as _,oD as a,vg as a$,lt as a0,pe as a1,oN as a2,sN as a3,aN as a4,HD as a5,qD as a6,lN as a7,cN as a8,Wk as a9,nx as aA,mT as aB,bT as aC,uT as aD,gT as aE,X1 as aF,fT as aG,sx as aH,dT as aI,yT as aJ,FT as aK,yS as aL,AT as aM,$l as aN,Fx as aO,IT as aP,RT as aQ,xk as aR,pT as aS,hT as aT,$T as aU,by as aV,ST as aW,Jn as aX,my as aY,Vg as aZ,rT as a_,_T as aa,PT as ab,zT as ac,zo as ad,OT as ae,Bk as af,LT as ag,Oi as ah,NT as ai,TT as aj,ET as ak,DT as al,MT as am,tT as an,eT as ao,iT as ap,nT as aq,kT as ar,xT as as,oT as at,Ch as au,CT as av,Td as aw,Nd as ax,cT as ay,lT as az,q as b,XD as b0,Ui as c,xp as d,BT as e,cp as f,It as g,Di as h,yO as i,kp as j,tN as k,Zi as l,qT as m,WT as n,sT as o,ZT as p,dO as q,pO as r,vT as s,hp as t,jT as u,VT as v,UT as w,bO as x,XT as y,gO as z};
