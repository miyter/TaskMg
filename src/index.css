/* @ts-nocheck */
/* @miyter:20251221 */


@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --font-en: 'Inter';
        --font-jp: 'M PLUS 2';
    }

    html,
    body {
        height: 100%;
        @apply font-sans antialiased text-gray-800 dark:text-gray-100 transition-colors duration-300;
        /* フォールバック背景: アプリ最上位の bg-premium-gradient が適用されない場合の安全策 */
        @apply bg-white dark:bg-gray-900;
        font-family: var(--font-en), var(--font-jp), sans-serif;
    }

    /* 文字サイズ設定: Tailwind Configの値(@apply)を参照して一元化 */
    /* !important を付与して、サイドバーや他のコンポーネントのデフォルトスタイルを確実に上書きする */
    body.font-app-xl {
        font-size: 1.25rem !important;
        line-height: 1.75rem !important;
    }

    body.font-app-lg {
        font-size: 1.125rem !important;
        line-height: 1.75rem !important;
    }

    body.font-app-md {
        font-size: 1rem !important;
        line-height: 1.5rem !important;
    }

    body.font-app-base {
        font-size: 0.9375rem !important;
        line-height: 1.375rem !important;
    }

    body.font-app-sm {
        font-size: 0.8125rem !important;
        line-height: 1.25rem !important;
    }

    /* UI密度設定 (Global Variables) */
    :root {
        --modal-p: 1.25rem;
        /* normal equivalent - slightly more compact */
        --modal-gap: 0.875rem;
    }

    body.app-density-compact {
        --modal-p: 0.75rem;
        --modal-gap: 0.5rem;
        --task-line-clamp: 1;
        --task-p: 0.375rem;
    }

    body.app-density-normal {
        --modal-p: 1.25rem;
        --modal-gap: 1rem;
        --task-line-clamp: 2;
        --task-p: 0.625rem;
    }

    body.app-density-comfortable {
        --modal-p: 1.5rem;
        --modal-gap: 1.25rem;
        --task-line-clamp: 3;
        --task-p: 0.875rem;
    }

    body.app-density-spacious {
        --modal-p: 2rem;
        --modal-gap: 1.75rem;
        --task-line-clamp: 999;
        --task-p: 1.25rem;
    }

    /* Density Utilities */
    .p-modal {
        padding: var(--modal-p);
    }

    .px-modal {
        padding-left: var(--modal-p);
        padding-right: var(--modal-p);
    }

    .py-modal {
        padding-top: var(--modal-p);
        padding-bottom: var(--modal-p);
    }

    .gap-modal {
        gap: var(--modal-gap);
    }
}

@layer utilities {

    /* プレミアムグラデーション背景
       ライト: 青み掛かった白 → 純白
       ダーク: gray-900相当のHSL値による微細なグラデーション（意図的にgray-900 #111827とは異なる）
    */
    .bg-premium-gradient {
        background: linear-gradient(135deg, hsl(220, 100%, 97%) 0%, hsl(220, 100%, 100%) 100%);
    }

    .dark .bg-premium-gradient {
        background: linear-gradient(135deg, hsl(222, 47%, 11%) 0%, hsl(222, 47%, 15%) 100%);
    }

    .text-glow {
        text-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
    }

    /* 微細な浮遊アニメーション */
    @keyframes float {
        0% {
            transform: translateY(0px);
        }

        50% {
            transform: translateY(-3px);
        }

        100% {
            transform: translateY(0px);
        }
    }

    .animate-float {
        animation: float 3s ease-in-out infinite;
    }

    /* ホバー時のカード拡大 */
    .hover-lift {
        @apply transition-transform duration-200 ease-out;
    }

    .hover-lift:hover {
        transform: translateY(-2px);
    }
}

@layer components {

    /* 共通のすりガラス効果: Configのshadow-glassを活用 */
    .glass-effect {
        @apply bg-white/70 dark:bg-gray-900/60 backdrop-blur-md border border-white/20 dark:border-gray-800/30 shadow-glass;
    }

    .glass-card {
        @apply glass-effect rounded-2xl p-4 transition-all;
    }

    .btn-premium {
        @apply px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40 transition-all active:scale-95;
    }

    /* カスタムチェックボックスのチェックマーク */
    input[type="checkbox"].appearance-none:checked::before {
        content: '';
        @apply absolute inset-0 m-auto w-2 h-3 border-r-2 border-b-2 border-white transform rotate-45 translate-y-[-1px];
    }

    /* フォーカス時のリングを強化（任意） */
    input[type="checkbox"].appearance-none:focus {
        @apply ring-2 ring-blue-500 ring-offset-1 dark:ring-offset-gray-800;
    }

    /* カスタムスクロールバー */
    .custom-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: theme('colors.gray.400') transparent;
    }

    .dark .custom-scrollbar {
        scrollbar-color: theme('colors.gray.600') transparent;
    }

    .custom-scrollbar::-webkit-scrollbar {
        @apply w-1.5 h-1.5;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        @apply bg-gray-300 dark:bg-gray-700 rounded-full;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        @apply bg-transparent;
    }
}

/* アニメーション: 重複していた .animate-fade-in 定義を削除し、Tailwind Config側を利用 */

/* Markdown出力用の装飾 */
.markdown-output ul {
    @apply list-disc list-inside space-y-1 mb-2;
}

.markdown-output p {
    @apply mb-2 leading-relaxed;
}